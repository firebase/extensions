var sharded=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return _})),n.d(t,"c",(function(){return I})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return E})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return D})),n.d(t,"h",(function(){return S})),n.d(t,"i",(function(){return a})),n.d(t,"j",(function(){return C})),n.d(t,"k",(function(){return L})),n.d(t,"l",(function(){return h})),n.d(t,"m",(function(){return f})),n.d(t,"n",(function(){return p})),n.d(t,"o",(function(){return g})),n.d(t,"p",(function(){return k})),n.d(t,"q",(function(){return y})),n.d(t,"r",(function(){return b})),n.d(t,"s",(function(){return l})),n.d(t,"t",(function(){return d})),n.d(t,"u",(function(){return m})),n.d(t,"v",(function(){return w})),n.d(t,"w",(function(){return v})),n.d(t,"x",(function(){return N})),n.d(t,"y",(function(){return O}));
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const r=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const i=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,c=a?e[t+2]:0,u=i>>2,h=(3&i)<<4|o>>4;let l=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(l=64)),r.push(n[u],n[h],n[l],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const i=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==i||null==s||null==o||null==a)throw Error();const c=i<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},s=function(e){return function(e){const t=r(e);return i.encodeByteArray(t,!0)}(e).replace(/\./g,"")},o=function(e){try{return i.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=a(e[n],t[n]));return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class c{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[s(JSON.stringify({alg:"none",type:"JWT"})),s(JSON.stringify(o)),""].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function l(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(h())}function d(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(e){return!1}}function f(){return"object"==typeof self&&self.self===self}function p(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function m(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function g(){return h().indexOf("Electron/")>=0}function y(){const e=h();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function v(){return h().indexOf("MSAppHost/")>=0}function w(){return!d()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function b(){return"object"==typeof indexedDB}class I extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,I.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_.prototype.create)}}class _{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(T,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new I(r,o,n)}}const T=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function E(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function k(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function S(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(A(n)&&A(s)){if(!S(n,s))return!1}else if(n!==s)return!1}for(const e of r)if(!n.includes(e))return!1;return!0}function A(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function O(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function C(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D(e,t){const n=new R(e,t);return n.subscribe.bind(n)}class R{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=P),void 0===r.error&&(r.error=P),void 0===r.complete&&(r.complete=P);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function P(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function L(e){return e&&e._delegate?e._delegate:e}}).call(this,n(8))},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return ve})),n.d(t,"c",(function(){return Ne})),n.d(t,"d",(function(){return Re})),n.d(t,"e",(function(){return Le})),n.d(t,"f",(function(){return Pe})),n.d(t,"g",(function(){return Ee})),n.d(t,"h",(function(){return De})),n.d(t,"i",(function(){return pn})),n.d(t,"j",(function(){return ir})),n.d(t,"k",(function(){return c})),n.d(t,"l",(function(){return an})),n.d(t,"m",(function(){return xe})),n.d(t,"n",(function(){return Me})),n.d(t,"o",(function(){return Fe})),n.d(t,"p",(function(){return I})),n.d(t,"q",(function(){return fe})),n.d(t,"r",(function(){return g})),n.d(t,"s",(function(){return Ut})),n.d(t,"t",(function(){return k})),n.d(t,"u",(function(){return xn})),n.d(t,"v",(function(){return Z})),n.d(t,"x",(function(){return st})),n.d(t,"y",(function(){return xt})),n.d(t,"z",(function(){return nr})),n.d(t,"A",(function(){return Ft})),n.d(t,"B",(function(){return ot})),n.d(t,"C",(function(){return it})),n.d(t,"D",(function(){return me})),n.d(t,"F",(function(){return ct})),n.d(t,"G",(function(){return l})),n.d(t,"H",(function(){return ft})),n.d(t,"I",(function(){return St})),n.d(t,"J",(function(){return Ot})),n.d(t,"K",(function(){return Ln})),n.d(t,"L",(function(){return X})),n.d(t,"M",(function(){return Jt})),n.d(t,"N",(function(){return lt})),n.d(t,"O",(function(){return Ye})),n.d(t,"P",(function(){return hn})),n.d(t,"Q",(function(){return En})),n.d(t,"R",(function(){return Pn})),n.d(t,"S",(function(){return Rt})),n.d(t,"T",(function(){return Xe})),n.d(t,"U",(function(){return ln})),n.d(t,"V",(function(){return Tn})),n.d(t,"W",(function(){return Rn})),n.d(t,"X",(function(){return pt})),n.d(t,"Y",(function(){return rt})),n.d(t,"Z",(function(){return ht})),n.d(t,"ab",(function(){return qe})),n.d(t,"bb",(function(){return Je})),n.d(t,"cb",(function(){return Ze})),n.d(t,"db",(function(){return ut})),n.d(t,"eb",(function(){return dt})),n.d(t,"fb",(function(){return un})),n.d(t,"gb",(function(){return _n})),n.d(t,"hb",(function(){return Dn})),n.d(t,"ib",(function(){return We})),n.d(t,"jb",(function(){return yt})),n.d(t,"kb",(function(){return vt})),n.d(t,"lb",(function(){return fn})),n.d(t,"mb",(function(){return gt})),n.d(t,"nb",(function(){return mt})),n.d(t,"ob",(function(){return at})),n.d(t,"w",(function(){return wr})),n.d(t,"E",(function(){return yr}));var r=n(0),i=n(3);function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;var o=n(4),a=n(5);
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const c={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},u={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function h(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const l=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},d=h,f=new r.b("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),p=new o.b("@firebase/auth");function m(e,...t){p.logLevel<=o.a.ERROR&&p.error(`Auth (${i.SDK_VERSION}): ${e}`,...t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g(e,...t){throw b(e,...t)}function y(e,...t){return b(e,...t)}function v(e,t,n){const i=Object.assign(Object.assign({},d()),{[t]:n});return new r.b("auth","Firebase",i).create(t,{appName:e.name})}function w(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&g(e,"argument-error"),v(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function b(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return f.create(e,...t)}function I(e,t,...n){if(!e)throw b(t,...n)}function _(e){const t="INTERNAL ASSERTION FAILED: "+e;throw m(t),new Error(t)}function T(e,t){e||_(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E=new Map;function k(e){T(e instanceof Function,"Expected a class definition");let t=E.get(e);return t?(T(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,E.set(e,t),t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function S(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function A(){return"http:"===N()||"https:"===N()}function N(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class O{constructor(e,t){this.shortDelay=e,this.longDelay=t,T(t>e,"Short delay should be less than long delay!"),this.isMobile=Object(r.s)()||Object(r.u)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(A()||Object(r.n)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C(e,t){T(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void _("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void _("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void _("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},P=new O(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function x(e,t,n,i,s={}){return M(e,s,async()=>{let s={},o={};i&&("GET"===t?o=i:s={body:JSON.stringify(i)});const a=Object(r.x)(Object.assign({key:e.config.apiKey},o)).slice(1),c=await e._getAdditionalHeaders();return c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode),D.fetch()(j(e,e.config.apiHost,n,a),Object.assign({method:t,headers:c,referrerPolicy:"no-referrer"},s))})}async function M(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},R),t);try{const t=new U(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw V(e,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const t=r.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw V(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw V(e,"email-already-in-use",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw v(e,a,o);g(e,a)}}catch(t){if(t instanceof r.c)throw t;g(e,"network-request-failed")}}async function F(e,t,n,r,i={}){const s=await x(e,t,n,r,i);return"mfaPendingCredential"in s&&g(e,"multi-factor-auth-required",{_serverResponse:s}),s}function j(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?C(e.config,i):`${e.config.apiScheme}://${i}`}class U{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(y(this.auth,"timeout")),P.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function V(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=y(e,t,r);return i.customData._tokenResponse=n,i}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function q(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B(e){return 1e3*Number(e)}function z(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return m("JWT malformed, contained fewer than 3 sections"),null;try{const e=Object(r.d)(n);return e?JSON.parse(e):(m("Failed to decode base64 JWT payload"),null)}catch(e){return m("Caught error parsing JWT payload as JSON",e),null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function K(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof r.c&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class W{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e.code&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=q(this.lastLoginAt),this.creationTime=q(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H(e){var t;const n=e.auth,r=await e.getIdToken(),i=await K(e,async function(e,t){return x(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));I(null==i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const a=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?o.providerUserInfo.map(e=>{var{providerId:t}=e,n=s(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}):[];const c=(u=e.providerData,h=a,[...u.filter(e=>!h.some(t=>t.providerId===e.providerId)),...h]);var u,h;const l=e.isAnonymous,d=!(e.email&&o.passwordHash||(null==c?void 0:c.length)),f=!!l&&d,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new G(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(e,p)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ${constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){I(e.idToken,"internal-error"),I(void 0!==e.idToken,"internal-error"),I(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=z(e);return I(t,"internal-error"),I(void 0!==t.exp,"internal-error"),I(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return I(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:s}=await
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e,t){const n=await M(e,{},async()=>{const n=Object(r.x)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=j(e,i,"/v1/token","key="+s),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",D.fetch()(o,{method:"POST",headers:a,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new $;return n&&(I("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(I("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(I("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $,this.toJSON())}_performRefresh(){return _("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(e,t){I("string"==typeof e||void 0===e,"internal-error",{appName:t})}class J{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=s(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new W(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.metadata=new G(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await K(this,this.stsTokenManager.getToken(this.auth,e));return I(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=Object(r.k)(e),i=await n.getIdToken(t),s=z(i);I(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o="object"==typeof s.firebase?s.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:q(B(s.auth_time)),issuedAtTime:q(B(s.iat)),expirationTime:q(B(s.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Object(r.k)(e);await H(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(I(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new J(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){I(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await H(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await K(this,async function(e,t){return x(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,u;const h=null!==(n=t.displayName)&&void 0!==n?n:void 0,l=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:T}=t;I(v&&T,e,"internal-error");const E=$.fromJSON(this.name,T);I("string"==typeof v,e,"internal-error"),Q(h,e.name),Q(l,e.name),I("boolean"==typeof w,e,"internal-error"),I("boolean"==typeof b,e,"internal-error"),Q(d,e.name),Q(f,e.name),Q(p,e.name),Q(m,e.name),Q(g,e.name),Q(y,e.name);const k=new J({uid:v,auth:e,email:l,emailVerified:w,displayName:h,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(k.providerData=_.map(e=>Object.assign({},e))),m&&(k._redirectEventId=m),k}static async _fromIdTokenResponse(e,t,n=!1){const r=new $;r.updateFromServerResponse(t);const i=new J({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await H(i),i}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Y.type="NONE";const X=Y;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(e,t,n){return`firebase:${e}:${t}:${n}`}class ee{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Z(this.userKey,r.apiKey,i),this.fullPersistenceKey=Z("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?J._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new ee(k(X),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||k(X);const s=Z(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=await n._get(s);if(t){const r=J._fromJSON(e,t);n!==i&&(o=r),i=n;break}}catch(e){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(e){}})),new ee(i,e,n)):new ee(i,e,n)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(se(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ne(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ae(t))return"Blackberry";if(ce(t))return"Webos";if(re(t))return"Safari";if((t.includes("chrome/")||ie(t))&&!t.includes("edge/"))return"Chrome";if(oe(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function ne(e=Object(r.l)()){return/firefox\//i.test(e)}function re(e=Object(r.l)()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ie(e=Object(r.l)()){return/crios\//i.test(e)}function se(e=Object(r.l)()){return/iemobile/i.test(e)}function oe(e=Object(r.l)()){return/android/i.test(e)}function ae(e=Object(r.l)()){return/blackberry/i.test(e)}function ce(e=Object(r.l)()){return/webos/i.test(e)}function ue(e=Object(r.l)()){return/iphone|ipad|ipod/i.test(e)}function he(e=Object(r.l)()){return ue(e)||oe(e)||ce(e)||ae(e)||/windows phone/i.test(e)||se(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function le(e,t=[]){let n;switch(e){case"Browser":n=te(Object(r.l)());break;case"Worker":n=`${te(Object(r.l)())}-${e}`;break;default:n=e}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${i.SDK_VERSION}/${s}`}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e,t){this.app=e,this.config=t,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pe(this),this.idTokenSubscription=new pe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=f,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=t.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=k(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await ee.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e):void 0}async initializeCurrentUser(e){var t;let n=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null==n?void 0:n._redirectEventId,s=await this.tryRedirectSignIn(e);r&&r!==i||!(null==s?void 0:s.user)||(n=s.user)}return n?n._redirectEventId?(I(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)):this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await H(e)}catch(e){if("auth/network-request-failed"!==e.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?Object(r.k)(e):null;return t&&I(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&I(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(k(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new r.b("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&k(e)||this._popupRedirectResolver;I(t,this,"argument-error"),this.redirectPersistenceManager=await ee.create(this,[k(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return I(s,this,"internal-error"),s.then(()=>i(this.currentUser)),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return I(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=le(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};return this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId),e}}function fe(e){return Object(r.k)(e)}class pe{constructor(e){this.auth=e,this.observer=null,this.addObserver=Object(r.g)(e=>this.observer=e)}get next(){return I(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function me(e,t,n){const r=fe(e);I(r._canInitEmulator,r,"emulator-config-failed"),I(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=ge(t),{host:o,port:a}=function(e){const t=ge(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:ye(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:ye(t)}}}(t),c=null===a?"":":"+a;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()}function ge(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ye(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class ve{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _("not implemented")}_getIdTokenResponse(e){return _("not implemented")}_linkToIdToken(e,t){return _("not implemented")}_getReauthenticationResolver(e){return _("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function we(e,t){return x(e,"POST","/v1/accounts:resetPassword",L(e,t))}async function be(e,t){return x(e,"POST","/v1/accounts:update",t)}async function Ie(e,t){return x(e,"POST","/v1/accounts:sendOobCode",L(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class _e extends ve{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new _e(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new _e(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return async function(e,t){return F(e,"POST","/v1/accounts:signInWithPassword",L(e,t))}(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return async function(e,t){return F(e,"POST","/v1/accounts:signInWithEmailLink",L(e,t))}(e,{email:this._email,oobCode:this._password});default:g(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return be(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return F(e,"POST","/v1/accounts:signInWithEmailLink",L(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:g(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Te(e,t){return F(e,"POST","/v1/accounts:signInWithIdp",L(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee extends ve{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ee(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):g("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=s(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new Ee(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return Te(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Te(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Te(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Object(r.x)(t)}return e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ke={USER_NOT_FOUND:"user-not-found"};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Se extends ve{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Se({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Se({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return F(e,"POST","/v1/accounts:signInWithPhoneNumber",L(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await F(e,"POST","/v1/accounts:signInWithPhoneNumber",L(e,t));if(n.temporaryProof)throw V(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return F(e,"POST","/v1/accounts:signInWithPhoneNumber",L(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),ke)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Se({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){var t,n,i,s,o,a;const c=Object(r.y)(Object(r.j)(e)),u=null!==(t=c.apiKey)&&void 0!==t?t:null,h=null!==(n=c.oobCode)&&void 0!==n?n:null,l=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=c.mode)&&void 0!==i?i:null);I(u&&h&&l,"argument-error"),this.apiKey=u,this.operation=l,this.code=h,this.continueUrl=null!==(s=c.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=c.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=c.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=Object(r.y)(Object(r.j)(e)).link,n=t?Object(r.y)(Object(r.j)(t)).deep_link_id:null,i=Object(r.y)(Object(r.j)(e)).deep_link_id;return(i?Object(r.y)(Object(r.j)(i)).link:null)||i||n||t||e}(e);try{return new Ae(t)}catch(e){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ne{constructor(){this.providerId=Ne.PROVIDER_ID}static credential(e,t){return _e._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ae.parseLink(t);return I(n,"argument-error"),_e._fromEmailAndCode(e,n.code,n.tenantId)}}Ne.PROVIDER_ID="password",Ne.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ne.EMAIL_LINK_SIGN_IN_METHOD="emailLink";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Oe{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce extends Oe{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class De extends Ce{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return I("providerId"in t&&"signInMethod"in t,"argument-error"),Ee._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return I(e.idToken||e.accessToken,"argument-error"),Ee._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return De.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return De.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:i,nonce:s,providerId:o}=e;if(!(n||r||t||i))return null;if(!o)return null;try{return new De(o)._credential({idToken:t,accessToken:n,nonce:s,pendingToken:i})}catch(e){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re extends Ce{constructor(){super("facebook.com")}static credential(e){return Ee._fromParams({providerId:Re.PROVIDER_ID,signInMethod:Re.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Re.credentialFromTaggedObject(e)}static credentialFromError(e){return Re.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Re.credential(e.oauthAccessToken)}catch(e){return null}}}Re.FACEBOOK_SIGN_IN_METHOD="facebook.com",Re.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Pe extends Ce{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ee._fromParams({providerId:Pe.PROVIDER_ID,signInMethod:Pe.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Pe.credentialFromTaggedObject(e)}static credentialFromError(e){return Pe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Pe.credential(t,n)}catch(e){return null}}}Pe.GOOGLE_SIGN_IN_METHOD="google.com",Pe.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Le extends Ce{constructor(){super("github.com")}static credential(e){return Ee._fromParams({providerId:Le.PROVIDER_ID,signInMethod:Le.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Le.credentialFromTaggedObject(e)}static credentialFromError(e){return Le.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Le.credential(e.oauthAccessToken)}catch(e){return null}}}Le.GITHUB_SIGN_IN_METHOD="github.com",Le.PROVIDER_ID="github.com";class xe extends ve{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return Te(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Te(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Te(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new xe(n,i):null}static _create(e,t){return new xe(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me extends Oe{constructor(e){I(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return Me.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Me.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=xe.fromJSON(e);return I(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return xe._create(n,t)}catch(e){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe extends Ce{constructor(){super("twitter.com")}static credential(e,t){return Ee._fromParams({providerId:Fe.PROVIDER_ID,signInMethod:Fe.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Fe.credentialFromTaggedObject(e)}static credentialFromError(e){return Fe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Fe.credential(t,n)}catch(e){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function je(e,t){return F(e,"POST","/v1/accounts:signUp",L(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fe.TWITTER_SIGN_IN_METHOD="twitter.com",Fe.PROVIDER_ID="twitter.com";class Ue{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await J._fromIdTokenResponse(e,n,r),s=Ve(n);return new Ue({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ve(n);return new Ue({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ve(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qe(e){var t;const n=fe(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Ue({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await je(n,{returnSecureToken:!0}),i=await Ue._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be extends r.c{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Be.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Be(e,t,n,r)}}function ze(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw Be._fromErrorAndOperation(e,n,t,r);throw n})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(e){return new Set(e.map(({providerId:e})=>e).filter(e=>!!e))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function We(e,t){const n=Object(r.k)(e);await He(!0,n,t);const{providerUserInfo:i}=await async function(e,t){return x(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),s=Ke(i||[]);return n.providerData=n.providerData.filter(e=>s.has(e.providerId)),s.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Ge(e,t,n=!1){const r=await K(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ue._forOperation(e,"link",r)}async function He(e,t,n){await H(t);const r=!1===e?"provider-already-linked":"no-such-provider";I(Ke(t.providerData).has(n)===e,t.auth,r)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $e(e,t,n=!1){const{auth:r}=e;try{const i=await K(e,ze(r,"reauthenticate",t,e),n);I(i.idToken,r,"internal-error");const s=z(i.idToken);I(s,r,"internal-error");const{sub:o}=s;return I(e.uid===o,r,"user-mismatch"),Ue._forOperation(e,"reauthenticate",i)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&g(r,"user-mismatch"),e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qe(e,t,n=!1){const r=await ze(e,"signIn",t),i=await Ue._fromIdTokenResponse(e,"signIn",r);return n||await e._updateCurrentUser(i.user),i}async function Je(e,t){return Qe(fe(e),t)}async function Ye(e,t){const n=Object(r.k)(e);return await He(!1,n,t.providerId),Ge(n,t)}async function Xe(e,t){return $e(Object(r.k)(e),t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Ze(e,t){const n=fe(e),r=await async function(e,t){return F(e,"POST","/v1/accounts:signInWithCustomToken",L(e,t))}(n,{token:t,returnSecureToken:!0}),i=await Ue._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?tt._fromServerResponse(e,t):g(e,"internal-error")}}class tt extends et{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new tt(t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(e,t,n){var r;I((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),I(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(I(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(I(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rt(e,t,n){const i=Object(r.k)(e),s={requestType:"PASSWORD_RESET",email:t};n&&nt(i,s,n),await async function(e,t){return Ie(e,t)}(i,s)}async function it(e,t,n){await we(Object(r.k)(e),{oobCode:t,newPassword:n})}async function st(e,t){await async function(e,t){return x(e,"POST","/v1/accounts:update",L(e,t))}(Object(r.k)(e),{oobCode:t})}async function ot(e,t){const n=Object(r.k)(e),i=await we(n,{oobCode:t}),s=i.requestType;switch(I(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":I(i.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":I(i.mfaInfo,n,"internal-error");default:I(i.email,n,"internal-error")}let o=null;return i.mfaInfo&&(o=et._fromServerResponse(fe(n),i.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:s}}async function at(e,t){const{data:n}=await ot(Object(r.k)(e),t);return n.email}async function ct(e,t,n){const r=fe(e),i=await je(r,{returnSecureToken:!0,email:t,password:n}),s=await Ue._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(s.user),s}function ut(e,t,n){return Je(Object(r.k)(e),Ne.credential(t,n))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ht(e,t,n){const i=Object(r.k)(e),s={requestType:"EMAIL_SIGNIN",email:t};I(n.handleCodeInApp,i,"argument-error"),n&&nt(i,s,n),await async function(e,t){return Ie(e,t)}(i,s)}function lt(e,t){const n=Ae.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}async function dt(e,t,n){const i=Object(r.k)(e),s=Ne.credentialWithLink(t,n||S());return I(s._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),Je(i,s)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function ft(e,t){const n={identifier:t,continueUri:A()?S():"http://localhost"},{signinMethods:i}=await async function(e,t){return x(e,"POST","/v1/accounts:createAuthUri",L(e,t))}(Object(r.k)(e),n);return i||[]}async function pt(e,t){const n=Object(r.k)(e),i={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&nt(n.auth,i,t);const{email:s}=await async function(e,t){return Ie(e,t)}(n.auth,i);s!==e.email&&await e.reload()}async function mt(e,t,n){const i=Object(r.k)(e),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&nt(i.auth,s,n);const{email:o}=await async function(e,t){return Ie(e,t)}(i.auth,s);o!==e.email&&await e.reload()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function gt(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const i=Object(r.k)(e),s={idToken:await i.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},o=await K(i,async function(e,t){return x(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find(({providerId:e})=>"password"===e);a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}function yt(e,t){return wt(Object(r.k)(e),t,null)}function vt(e,t){return wt(Object(r.k)(e),null,t)}async function wt(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await K(e,be(r,i));await e._updateTokensIfNecessary(s,!0)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class It extends bt{constructor(e,t,n,r){super(e,t,n),this.username=r}}class _t extends bt{constructor(e,t){super(e,"facebook.com",t)}}class Tt extends It{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class Et extends bt{constructor(e,t){super(e,"google.com",t)}}class kt extends It{constructor(e,t,n){super(e,"twitter.com",t,n)}}function St(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){const r=null===(n=null===(t=z(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r){return new bt(s,"anonymous"!==r&&"custom"!==r?r:null)}}if(!r)return null;switch(r){case"facebook.com":return new _t(s,i);case"github.com":return new Tt(s,i);case"google.com":return new Et(s,i);case"twitter.com":return new kt(s,i,e.screenName||null);case"custom":case"anonymous":return new bt(s,null);default:return new bt(s,r,i)}}(n)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,t){this.type=e,this.credential=t}static _fromIdtoken(e){return new At("enroll",e)}static _fromMfaPendingCredential(e){return new At("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return At._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return At._fromIdtoken(e.multiFactorSession.idToken)}return null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=fe(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map(e=>et._fromServerResponse(n,e));I(r.mfaPendingCredential,n,"internal-error");const s=At._fromMfaPendingCredential(r.mfaPendingCredential);return new Nt(s,i,async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await Ue._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return I(t.user,n,"internal-error"),Ue._forOperation(t.user,t.operationType,o);default:g(n,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function Ot(e,t){var n;const i=Object(r.k)(e),s=t;return I(t.customData.operationType,i,"argument-error"),I(null===(n=s.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,i,"argument-error"),Nt._fromError(i,s)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>et._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new Ct(e)}async getSession(){return At._fromIdtoken(await this.user.getIdToken())}async enroll(e,t){const n=e,r=await this.getSession(),i=await K(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"==typeof e?e:e.uid,n=await this.user.getIdToken(),r=await K(this.user,(i=this.user.auth,s={idToken:n,mfaEnrollmentId:t},x(i,"POST","/v2/accounts/mfaEnrollment:withdraw",L(i,s))));var i,s;this.enrolledFactors=this.enrolledFactors.filter(({uid:e})=>e!==t),await this.user._updateTokensIfNecessary(r);try{await this.user.reload()}catch(e){if("auth/user-token-expired"!==e.code)throw e}}}const Dt=new WeakMap;function Rt(e){const t=Object(r.k)(e);return Dt.has(t)||Dt.set(t,Ct._fromUser(t)),Dt.get(t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Pt{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem("__sak","1"),this.storage.removeItem("__sak"),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt extends Pt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Object(r.l)();return re(e)||ue(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=he(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);Object(r.q)()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Lt.type="LOCAL";const xt=Lt;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt extends Pt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Mt.type="SESSION";const Ft=Mt;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class jt{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new jt(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ut(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jt.receivers=[];class Vt{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((o,a)=>{const c=Ut("",20);r.port1.start();const u=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(){return window}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Bt(){return void 0!==qt().WorkerGlobalScope&&"function"==typeof qt().importScripts}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const zt="firebaseLocalStorageDb";class Kt{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Wt(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly").objectStore("firebaseLocalStorage")}function Gt(){const e=indexedDB.open(zt,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains("firebaseLocalStorage")?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(zt);return new Kt(e).toPromise()}(),t(await Gt()))})})}async function Ht(e,t,n){const r=Wt(e,!0).put({fbase_key:t,value:n});return new Kt(r).toPromise()}function $t(e,t){const n=Wt(e,!0).delete(t);return new Kt(n).toPromise()}class Qt{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Gt()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Bt()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jt._getInstance(Bt()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Vt(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gt();return await Ht(e,"__sak","1"),await $t(e,"__sak"),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ht(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Wt(e,!1).get(t),r=await new Kt(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>$t(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Wt(e,!1).getAll();return new Kt(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Qt.type="LOCAL";const Jt=Qt;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(e){return new Promise((t,n)=>{const r=document.createElement("script");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var i,s;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=y("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(s=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==s?s:document).appendChild(r)})}function Xt(e){return`__${e}${Math.floor(1e6*Math.random())}`}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.auth=e,this.counter=1e12,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new en(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||1e12;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||1e12;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||1e12;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class en{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"==typeof e?document.getElementById(e):e;I(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(e){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(e){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const tn=Xt("rcb"),nn=new O(3e4,6e4);class rn{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!qt().grecaptcha}load(e,t=""){return I(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)?Promise.resolve(qt().grecaptcha):new Promise((n,i)=>{const s=qt().setTimeout(()=>{i(y(e,"network-request-failed"))},nn.get());qt()[tn]=()=>{qt().clearTimeout(s),delete qt()[tn];const r=qt().grecaptcha;if(!r)return void i(y(e,"internal-error"));const o=r.render;r.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(r)};Yt("https://www.google.com/recaptcha/api.js??"+Object(r.x)({onload:tn,render:"explicit",hl:t})).catch(()=>{clearTimeout(s),i(y(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!qt().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class sn{async load(e){return new Zt(e)}clearedOneInstance(){}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on={theme:"light",type:"image"};class an{constructor(e,t=Object.assign({},on),n){this.parameters=t,this.type="recaptcha",this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=fe(n),this.isInvisible="invisible"===this.parameters.size,I("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"==typeof e?document.getElementById(e):e;I(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new sn:new rn,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise(n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){I(!this.parameters.sitekey,this.auth,"argument-error"),I(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),I("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"==typeof e)e(t);else if("string"==typeof e){const n=qt()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){I(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){I(A()&&!Bt(),this.auth,"internal-error"),await function(){let e=null;return new Promise(t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()}).catch(t=>{throw e&&window.removeEventListener("load",e),t})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e){return(await x(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);I(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return I(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class cn{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Se._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function un(e,t,n){const i=fe(e),s=await dn(i,t,Object(r.k)(n));return new cn(s,e=>Je(i,e))}async function hn(e,t,n){const i=Object(r.k)(e);await He(!1,i,"phone");const s=await dn(i.auth,t,Object(r.k)(n));return new cn(s,e=>Ye(i,e))}async function ln(e,t,n){const i=Object(r.k)(e),s=await dn(i.auth,t,Object(r.k)(n));return new cn(s,e=>Xe(i,e))}async function dn(e,t,n){var r;const i=await n.verify();try{let s;if(I("string"==typeof i,e,"argument-error"),I("recaptcha"===n.type,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){I("enroll"===t.type,e,"internal-error");return(await function(e,t){return x(e,"POST","/v2/accounts/mfaEnrollment:start",L(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo}{I("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;I(n,e,"missing-multi-factor-info");return(await function(e,t){return x(e,"POST","/v2/accounts/mfaSignIn:start",L(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return x(e,"POST","/v1/accounts:sendVerificationCode",L(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}async function fn(e,t){await Ge(Object(r.k)(e),t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.providerId=pn.PROVIDER_ID,this.auth=fe(e)}verifyPhoneNumber(e,t){return dn(this.auth,e,Object(r.k)(t))}static credential(e,t){return Se._fromVerification(e,t)}static credentialFromResult(e){const t=e;return pn.credentialFromTaggedObject(t)}static credentialFromError(e){return pn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Se._fromTokenResponse(t,n):null}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function mn(e,t){return t?k(t):(I(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pn.PROVIDER_ID="phone",pn.PHONE_SIGN_IN_METHOD="phone";class gn extends ve{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Te(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Te(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Te(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function yn(e){return Qe(e.auth,new gn(e),e.bypassAuthState)}function vn(e){const{auth:t,user:n}=e;return I(n,t,"internal-error"),$e(n,new gn(e),e.bypassAuthState)}async function wn(e){const{auth:t,user:n}=e;return I(n,t,"internal-error"),Ge(n,new gn(e),e.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yn;case"linkViaPopup":case"linkViaRedirect":return wn;case"reauthViaPopup":case"reauthViaRedirect":return vn;default:g(this.auth,"internal-error")}}resolve(e){T(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){T(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In=new O(2e3,1e4);async function _n(e,t,n){const r=fe(e);w(e,t,Oe);const i=mn(r,n);return new kn(r,"signInViaPopup",t,i).executeNotNull()}async function Tn(e,t,n){const i=Object(r.k)(e);w(i.auth,t,Oe);const s=mn(i.auth,n);return new kn(i.auth,"reauthViaPopup",t,s,i).executeNotNull()}async function En(e,t,n){const i=Object(r.k)(e);w(i.auth,t,Oe);const s=mn(i.auth,n);return new kn(i.auth,"linkViaPopup",t,s,i).executeNotNull()}class kn extends bn{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,kn.currentPopupAction&&kn.currentPopupAction.cancel(),kn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return I(e,this.auth,"internal-error"),e}async onExecution(){T(1===this.filter.length,"Popup operations only handle one event");const e=Ut();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(y(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(y(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,kn.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(y(this.auth,"popup-closed-by-user"))},2e3):this.pollId=window.setTimeout(e,In.get())};e()}}kn.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Sn=new Map;class An extends bn{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Sn.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Cn(t),r=On(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Sn.set(this.auth._key(),e)}return this.bypassAuthState||Sn.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Nn(e,t){return On(e)._set(Cn(t),"true")}function On(e){return k(e._redirectPersistence)}function Cn(e){return Z("pendingRedirect",e.config.apiKey,e.name)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(e,t,n){return async function(e,t,n){const r=fe(e);w(e,t,Oe);const i=mn(r,n);return await Nn(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function Rn(e,t,n){return async function(e,t,n){const i=Object(r.k)(e);w(i.auth,t,Oe);const s=mn(i.auth,n);await Nn(s,i.auth);const o=await Mn(i);return s._openRedirect(i.auth,t,"reauthViaRedirect",o)}(e,t,n)}function Pn(e,t,n){return async function(e,t,n){const i=Object(r.k)(e);w(i.auth,t,Oe);const s=mn(i.auth,n);await He(!1,i,t.providerId),await Nn(s,i.auth);const o=await Mn(i);return s._openRedirect(i.auth,t,"linkViaRedirect",o)}(e,t,n)}async function Ln(e,t){return await fe(e)._initializationPromise,xn(e,t,!1)}async function xn(e,t,n=!1){const r=fe(e),i=mn(r,t),s=new An(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function Mn(e){const t=Ut(e.uid+":::");return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Un(e);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Un(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(y(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(jn(e))}saveEventToCache(e){this.cachedEventUids.add(jn(e)),this.lastProcessedEventTime=Date.now()}}function jn(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Un({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}async function Vn(e,t={}){return x(e,"GET","/v1/projects",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Bn=/^https?/;function zn(e){const t=S(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Bn.test(n))return!1;if(qn.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn=new O(3e4,6e4);function Wn(){const e=qt().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}let Gn=null;function Hn(e){return Gn=Gn||function(e){return new Promise((t,n)=>{var r,i,s;function o(){Wn(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Wn(),n(y(e,"network-request-failed"))},timeout:Kn.get()})}if(null===(i=null===(r=qt().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=qt().gapi)||void 0===s?void 0:s.load)){const t=Xt("iframefcb");return qt()[t]=()=>{gapi.load?o():n(y(e,"network-request-failed"))},Yt("https://apis.google.com/js/api.js?onload="+t).catch(e=>n(e))}o()}}).catch(e=>{throw Gn=null,e})}(e),Gn}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n=new O(5e3,15e3),Qn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Jn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Yn(e){const t=e.config;I(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?C(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,s={apiKey:t.apiKey,appName:e.name,v:i.SDK_VERSION},o=Jn.get(e.config.apiHost);o&&(s.eid=o);const a=e._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${Object(r.x)(s).slice(1)}`}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Xn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Zn{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function er(e,t,n,i=500,s=600){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const u=Object.assign(Object.assign({},Xn),{width:i.toString(),height:s.toString(),top:o,left:a}),h=Object(r.l)().toLowerCase();n&&(c=ie(h)?"_blank":n),ne(h)&&(t=t||"http://localhost",u.scrollbars="yes");const l=Object.entries(u).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=Object(r.l)()){var t;return ue(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(h)&&"_self"!==c)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t||"",c),new Zn(null);const d=window.open(t||"",c,l);I(d,e,"popup-blocked");try{d.focus()}catch(e){}return new Zn(d)}function tr(e,t,n,s,o,a){I(e.config.authDomain,e,"auth-domain-config-required"),I(e.config.apiKey,e,"invalid-api-key");const c={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:i.SDK_VERSION,eventId:o};if(t instanceof Oe){t.setDefaultLanguage(e.languageCode),c.providerId=t.providerId||"",Object(r.p)(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))c[e]=t}if(t instanceof Ce){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(c.scopes=e.join(","))}e.tenantId&&(c.tid=e.tenantId);const u=c;for(const e of Object.keys(u))void 0===u[e]&&delete u[e];return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/__/auth/handler`;return C(e,"emulator/auth/handler")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)}?${Object(r.x)(u).slice(1)}`}const nr=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ft,this._completeRedirectFn=xn}async _openPopup(e,t,n,r){var i;T(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return er(e,tr(e,t,n,S(),r),Ut())}async _openRedirect(e,t,n,r){var i;return await this._originValidation(e),i=tr(e,t,n,S(),r),qt().location.href=i,new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(T(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await async function(e){const t=await Hn(e),n=qt().gapi;return I(n,e,"internal-error"),t.open({where:document.body,url:Yn(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Qn,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=y(e,"network-request-failed"),s=qt().setTimeout(()=>{r(i)},$n.get());function o(){qt().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})}))}(e),n=new Fn(e);return t.register("authEvent",t=>{I(null==t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send("webStorageSupport",{type:"webStorageSupport"},n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),g(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Vn(e);for(const e of t)try{if(zn(e))return}catch(e){}g(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return he()||re()||ue()}};class rr extends class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return _("unexpected MultiFactorSessionType")}}}{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new rr(e)}_finalizeEnroll(e,t,n){return function(e,t){return x(e,"POST","/v2/accounts/mfaEnrollment:finalize",L(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return x(e,"POST","/v2/accounts/mfaSignIn:finalize",L(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class ir{constructor(){}static assertion(e){return rr._fromCredential(e)}}ir.FACTOR_ID="phone";var sr;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class or{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){I(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ar(){return window}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sr="Browser",Object(i._registerComponent)(new a.a("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),{apiKey:r,authDomain:i}=n.options;return(e=>{I(r&&!r.includes(":"),"invalid-api-key",{appName:e.name}),I(!(null==i?void 0:i.includes(":")),"argument-error",{appName:e.name});const n={apiKey:r,authDomain:i,clientPlatform:sr,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:le(sr)},s=new de(e,n);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(k);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(s,t),s})(n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Object(i._registerComponent)(new a.a("auth-internal",e=>(e=>new or(e))(fe(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Object(i.registerVersion)("@firebase/auth","0.19.4",function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(sr)),Object(i.registerVersion)("@firebase/auth","0.19.4","esm2017");async function cr(e,t,n){var r;const{BuildInfo:i}=ar();T(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(T(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(e=>e.toString(16).padStart(2,"0")).join("")}(t.sessionId),o={};return ue()?o.ibi=i.packageName:oe()?o.apn=i.packageName:g(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,tr(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function ur(e){const{cordova:t}=ar();return new Promise(n=>{t.plugins.browsertab.isAvailable(i=>{let s=null;i?t.plugins.browsertab.openUrl(e):s=t.InAppBrowser.open(e,function(e=Object(r.l)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(s)})})}class hr extends Fn{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}async function lr(e){const t=await pr()._get(mr(e));return t&&await pr()._remove(mr(e)),t}function dr(e,t){var n,r;const i=function(e){const t=gr(e),n=t.link?decodeURIComponent(t.link):void 0,r=gr(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return gr(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=gr(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(e){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null==s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?y(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function fr(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(Math.random()*t.length);e.push(t.charAt(n))}return e.join("")}function pr(){return k(xt)}function mr(e){return Z("authEvent",e.config.apiKey,e.name)}function gr(e){if(!(null==e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return Object(r.y)(n.join("?"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr=class{constructor(){this._redirectPersistence=Ft,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=xn}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new hr(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){g(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,c,u,h;const l=ar();I("function"==typeof(null===(t=null==l?void 0:l.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),I(void 0!==(null===(n=null==l?void 0:l.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),I("function"==typeof(null===(s=null===(i=null===(r=null==l?void 0:l.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),I("function"==typeof(null===(c=null===(a=null===(o=null==l?void 0:l.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===c?void 0:c.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),I("function"==typeof(null===(h=null===(u=null==l?void 0:l.cordova)||void 0===u?void 0:u.InAppBrowser)||void 0===h?void 0:h.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),Sn.clear(),await this._originValidation(e);const s=function(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:fr(),postBody:null,tenantId:e.tenantId,error:y(e,"no-auth-event")}}(e,n,r);await function(e,t){return pr()._set(mr(e),t)}(e,s);const o=await cr(e,s,t);return async function(e,t,n){const{cordova:r}=ar();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function c(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function u(){a||(a=window.setTimeout(()=>{o(y(e,"redirect-cancelled-by-user"))},2e3))}function h(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&u()}t.addPassiveListener(c),document.addEventListener("resume",u,!1),oe()&&document.addEventListener("visibilitychange",h,!1),i=()=>{t.removePassiveListener(c),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",h,!1),a&&window.clearTimeout(a)}})}finally{i()}}(e,i,await ur(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=ar(),n={};ue()?n.iosBundleId=t.packageName:oe()?n.androidPackageName=t.packageName:g(e,"operation-not-supported-in-this-environment"),await Vn(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=ar(),s=setTimeout(async()=>{await lr(e),t.onEvent(vr())},500),o=async n=>{clearTimeout(s);const r=await lr(e);let i=null;r&&(null==n?void 0:n.url)&&(i=dr(r,n.url)),t.onEvent(i||vr())};void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,o);const a=r,c=i.packageName.toLowerCase()+"://";ar().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(c)&&o({url:e}),"function"==typeof a)try{a(e)}catch(e){console.error(e)}}}};function vr(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:y("no-auth-event")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(e,t){fe(e)._logFramework(t)}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return fu})),n.d(t,"b",(function(){return uc})),n.d(t,"c",(function(){return Ka})),n.d(t,"d",(function(){return xa})),n.d(t,"e",(function(){return Pa})),n.d(t,"f",(function(){return Bc})),n.d(t,"g",(function(){return ac})),n.d(t,"h",(function(){return hc})),n.d(t,"i",(function(){return Wa})),n.d(t,"j",(function(){return T})),n.d(t,"k",(function(){return lc})),n.d(t,"l",(function(){return za})),n.d(t,"m",(function(){return La})),n.d(t,"n",(function(){return $c})),n.d(t,"o",(function(){return zc})),n.d(t,"p",(function(){return Kc})),n.d(t,"q",(function(){return qc})),n.d(t,"r",(function(){return V})),n.d(t,"s",(function(){return Pu})),n.d(t,"t",(function(){return gu})),n.d(t,"u",(function(){return Ia})),n.d(t,"v",(function(){return ae})),n.d(t,"w",(function(){return P})),n.d(t,"x",(function(){return S})),n.d(t,"y",(function(){return $})),n.d(t,"z",(function(){return Na})),n.d(t,"A",(function(){return b})),n.d(t,"B",(function(){return J})),n.d(t,"C",(function(){return g})),n.d(t,"D",(function(){return Ea})),n.d(t,"E",(function(){return Nu})),n.d(t,"F",(function(){return ju})),n.d(t,"G",(function(){return Fu})),n.d(t,"H",(function(){return Za})),n.d(t,"I",(function(){return Ma})),n.d(t,"J",(function(){return Fa})),n.d(t,"K",(function(){return Ra})),n.d(t,"L",(function(){return Au})),n.d(t,"M",(function(){return xu})),n.d(t,"N",(function(){return nc})),n.d(t,"O",(function(){return ja})),n.d(t,"P",(function(){return cc})),n.d(t,"Q",(function(){return Ja})),n.d(t,"R",(function(){return Ya})),n.d(t,"S",(function(){return tc})),n.d(t,"T",(function(){return cu})),n.d(t,"U",(function(){return au})),n.d(t,"V",(function(){return $a})),n.d(t,"W",(function(){return Du})),n.d(t,"X",(function(){return vu})),n.d(t,"Y",(function(){return bu})),n.d(t,"Z",(function(){return Iu})),n.d(t,"ab",(function(){return _u})),n.d(t,"bb",(function(){return Tu})),n.d(t,"cb",(function(){return Eu})),n.d(t,"db",(function(){return Ha})),n.d(t,"eb",(function(){return Uu})),n.d(t,"fb",(function(){return Ga})),n.d(t,"gb",(function(){return tu})),n.d(t,"hb",(function(){return nu})),n.d(t,"ib",(function(){return ic})),n.d(t,"jb",(function(){return sc})),n.d(t,"kb",(function(){return Ou})),n.d(t,"lb",(function(){return Cu})),n.d(t,"mb",(function(){return Zc})),n.d(t,"nb",(function(){return Qc})),n.d(t,"ob",(function(){return Va})),n.d(t,"pb",(function(){return Ua})),n.d(t,"qb",(function(){return Lu})),n.d(t,"rb",(function(){return Mu})),n.d(t,"sb",(function(){return ku})),n.d(t,"tb",(function(){return f})),n.d(t,"ub",(function(){return Gc})),n.d(t,"vb",(function(){return su})),n.d(t,"wb",(function(){return iu})),n.d(t,"xb",(function(){return rc})),n.d(t,"yb",(function(){return Su})),n.d(t,"zb",(function(){return ec})),n.d(t,"Ab",(function(){return Yc})),n.d(t,"Bb",(function(){return Vu}));var r=n(3),i=n(5),s=n(4),o=n(0),a=n(6);const c="@firebase/firestore";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}u.UNAUTHENTICATED=new u(null),u.GOOGLE_CREDENTIALS=new u("google-credentials-uid"),u.FIRST_PARTY=new u("first-party-uid"),u.MOCK_USER=new u("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let h="9.6.1";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l=new s.b("@firebase/firestore");function d(){return l.logLevel}function f(e){l.setLogLevel(e)}function p(e,...t){if(l.logLevel<=s.a.DEBUG){const n=t.map(y);l.debug(`Firestore (${h}): ${e}`,...n)}}function m(e,...t){if(l.logLevel<=s.a.ERROR){const n=t.map(y);l.error(`Firestore (${h}): ${e}`,...n)}}function g(e,...t){if(l.logLevel<=s.a.WARN){const n=t.map(y);l.warn(`Firestore (${h}): ${e}`,...n)}}function y(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v(e="Unexpected state"){const t=`FIRESTORE (${h}) INTERNAL ASSERTION FAILED: `+e;throw m(t),new Error(t)}function w(e,t){e||v()}function b(e,t){e||v()}function I(e,t){return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class T extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer "+e)}}class S{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(u.UNAUTHENTICATED))}shutdown(){}}class A{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class N{constructor(e){this.t=e,this.currentUser=u.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new E;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new E,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{p("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(p("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new E)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(p("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(w("string"==typeof t.accessToken),new k(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return w(null===e||"string"==typeof e),new u(e)}}class O{constructor(e,t,n){this.type="FirstParty",this.user=u.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const r=e.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class C{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new O(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(u.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class D{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class R{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null}start(e,t){this.o=n=>{e.enqueueRetryable(()=>(e=>(null!=e.error&&p("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: "+e.error.message),t(e.token)))(n))};const n=e=>{p("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.g.onInit(e=>n(e)),setTimeout(()=>{if(!this.appCheck){const e=this.g.getImmediate({optional:!0});e?n(e):p("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(w("string"==typeof e.token),new D(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class P{getToken(){return Promise.resolve(new D(""))}invalidateToken(){}start(e,t){}shutdown(){}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.p(e),this.T=e=>t.writeSequenceNumber(e))}p(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */L.I=-1;class M{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=x(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function F(e,t){return e<t?-1:e>t?1:0}function j(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function U(e){return e+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new T(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new T(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new T(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new T(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return V.fromMillis(Date.now())}static fromDate(e){return V.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new V(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?F(this.nanoseconds,e.nanoseconds):F(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.timestamp=e}static fromTimestamp(e){return new q(e)}static min(){return new q(new V(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function z(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function K(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e,t,n){void 0===t?t=0:t>e.length&&v(),void 0===n?n=e.length-t:n>e.length-t&&v(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===W.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof W?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class G extends W{construct(e,t,n){return new G(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new T(_.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new G(t)}static emptyPath(){return new G([])}}const H=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $ extends W{construct(e,t,n){return new $(e,t,n)}static isValidIdentifier(e){return H.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new $(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new T(_.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new T(_.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new T(_.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new T(_.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $(t)}static emptyPath(){return new $([])}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.fields=e,e.sort($.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return j(this.fields,e.fields,(e,t)=>e.isEqual(t))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(){return"undefined"!=typeof atob}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Y(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Y(t)}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return F(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Y.EMPTY_BYTE_STRING=new Y("");const X=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Z(e){if(w(!!e),"string"==typeof e){let t=0;const n=X.exec(e);if(w(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ee(e.seconds),nanos:ee(e.nanos)}}function ee(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function te(e){return"string"==typeof e?Y.fromBase64String(e):Y.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function re(e){const t=Z(e.mapValue.fields.__local_write_time__.timestampValue);return new V(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(e){return null==e}function se(e){return 0===e&&1/e==-1/0}function oe(e){return"number"==typeof e&&Number.isInteger(e)&&!se(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(G.fromString(e))}static fromName(e){return new ae(G.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===G.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return G.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new G(e.slice()))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ce(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ne(e)?4:10:v()}function ue(e,t){const n=ce(e);if(n!==ce(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return re(e).isEqual(re(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Z(e.timestampValue),r=Z(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return te(e.bytesValue).isEqual(te(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ee(e.geoPointValue.latitude)===ee(t.geoPointValue.latitude)&&ee(e.geoPointValue.longitude)===ee(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ee(e.integerValue)===ee(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ee(e.doubleValue),r=ee(t.doubleValue);return n===r?se(n)===se(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return j(e.arrayValue.values||[],t.arrayValue.values||[],ue);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(B(n)!==B(r))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===r[e]||!ue(n[e],r[e])))return!1;return!0}(e,t);default:return v()}}function he(e,t){return void 0!==(e.values||[]).find(e=>ue(e,t))}function le(e,t){const n=ce(e),r=ce(t);if(n!==r)return F(n,r);switch(n){case 0:return 0;case 1:return F(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ee(e.integerValue||e.doubleValue),r=ee(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return de(e.timestampValue,t.timestampValue);case 4:return de(re(e),re(t));case 5:return F(e.stringValue,t.stringValue);case 6:return function(e,t){const n=te(e),r=te(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let e=0;e<n.length&&e<r.length;e++){const t=F(n[e],r[e]);if(0!==t)return t}return F(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=F(ee(e.latitude),ee(t.latitude));return 0!==n?n:F(ee(e.longitude),ee(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){const t=le(n[e],r[e]);if(t)return t}return F(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let e=0;e<r.length&&e<s.length;++e){const t=F(r[e],s[e]);if(0!==t)return t;const o=le(n[r[e]],i[s[e]]);if(0!==o)return o}return F(r.length,s.length)}(e.mapValue,t.mapValue);default:throw v()}}function de(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return F(e,t);const n=Z(e),r=Z(t),i=F(n.seconds,r.seconds);return 0!==i?i:F(n.nanos,r.nanos)}function fe(e){return function e(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(e){const t=Z(e);return`time(${t.seconds},${t.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?te(t.bytesValue).toBase64():"referenceValue"in t?(r=t.referenceValue,ae.fromName(r).toString()):"geoPointValue"in t?`geo(${(n=t.geoPointValue).latitude},${n.longitude})`:"arrayValue"in t?function(t){let n="[",r=!0;for(const i of t.values||[])r?r=!1:n+=",",n+=e(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(t){const n=Object.keys(t.fields||{}).sort();let r="{",i=!0;for(const s of n)i?i=!1:r+=",",r+=`${s}:${e(t.fields[s])}`;return r+"}"}(t.mapValue):v();var n,r}(e)}function pe(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function me(e){return!!e&&"integerValue"in e}function ge(e){return!!e&&"arrayValue"in e}function ye(e){return!!e&&"nullValue"in e}function ve(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function we(e){return!!e&&"mapValue"in e}function be(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return z(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=be(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=be(e.arrayValue.values[n]);return t}return Object.assign({},e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.value=e}static empty(){return new Ie({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!we(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=be(t)}setAll(e){let t=$.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=be(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());we(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ue(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];we(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){z(t,(t,n)=>e[t]=n);for(const t of n)delete e[t]}clone(){return new Ie(be(this.value))}}function _e(e){const t=[];return z(e.fields,(e,n)=>{const r=new $([e]);if(we(n)){const e=_e(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Q(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Te{constructor(e,t,n,r,i){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=i}static newInvalidDocument(e){return new Te(e,0,q.min(),Ie.empty(),0)}static newFoundDocument(e,t,n){return new Te(e,1,t,n,0)}static newNoDocument(e,t){return new Te(e,2,t,Ie.empty(),0)}static newUnknownDocument(e,t){return new Te(e,3,t,Ie.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ie.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ie.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Te&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new Te(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.R=null}}function ke(e,t=null,n=[],r=[],i=null,s=null,o=null){return new Ee(e,t,n,r,i,s,o)}function Se(e){const t=I(e);if(null===t.R){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>function(e){return e.field.canonicalString()+e.op.toString()+fe(e.value)}(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),ie(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=Ue(t.startAt)),t.endAt&&(e+="|ub:",e+=Ue(t.endAt)),t.R=e}return t.R}function Ae(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!qe(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if(n=e.filters[i],r=t.filters[i],n.op!==r.op||!n.field.isEqual(r.field)||!ue(n.value,r.value))return!1;var n,r;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ze(e.startAt,t.startAt)&&ze(e.endAt,t.endAt)}function Ne(e){return ae.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Oe extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,n):new Ce(e,t,n):"array-contains"===t?new Le(e,n):"in"===t?new xe(e,n):"not-in"===t?new Me(e,n):"array-contains-any"===t?new Fe(e,n):new Oe(e,t,n)}static P(e,t,n){return"in"===t?new De(e,n):new Re(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(le(t,this.value)):null!==t&&ce(this.value)===ce(t)&&this.v(le(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return v()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Ce extends Oe{constructor(e,t,n){super(e,t,n),this.key=ae.fromName(n.referenceValue)}matches(e){const t=ae.comparator(e.key,this.key);return this.v(t)}}class De extends Oe{constructor(e,t){super(e,"in",t),this.keys=Pe("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Re extends Oe{constructor(e,t){super(e,"not-in",t),this.keys=Pe("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Pe(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>ae.fromName(e.referenceValue))}class Le extends Oe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ge(t)&&he(t.arrayValue,this.value)}}class xe extends Oe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&he(this.value.arrayValue,t)}}class Me extends Oe{constructor(e,t){super(e,"not-in",t)}matches(e){if(he(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!he(this.value.arrayValue,t)}}class Fe extends Oe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ge(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>he(this.value.arrayValue,e))}}class je{constructor(e,t){this.position=e,this.before=t}}function Ue(e){return`${e.before?"b":"a"}:${e.position.map(e=>fe(e)).join(",")}`}class Ve{constructor(e,t="asc"){this.field=e,this.dir=t}}function qe(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Be(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?ae.comparator(ae.fromName(o.referenceValue),n.key):le(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function ze(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ue(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.S=null,this.D=null,this.startAt,this.endAt}}function We(e,t,n,r,i,s,o,a){return new Ke(e,t,n,r,i,s,o,a)}function Ge(e){return new Ke(e)}function He(e){return!ie(e.limit)&&"F"===e.limitType}function $e(e){return!ie(e.limit)&&"L"===e.limitType}function Qe(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Je(e){for(const t of e.filters)if(t.V())return t.field;return null}function Ye(e){return null!==e.collectionGroup}function Xe(e){const t=I(e);if(null===t.S){t.S=[];const e=Je(t),n=Qe(t);if(null!==e&&null===n)e.isKeyField()||t.S.push(new Ve(e)),t.S.push(new Ve($.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.S.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.S.push(new Ve($.keyField(),e))}}}return t.S}function Ze(e){const t=I(e);if(!t.D)if("F"===t.limitType)t.D=ke(t.path,t.collectionGroup,Xe(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const n of Xe(t)){const t="desc"===n.dir?"asc":"desc";e.push(new Ve(n.field,t))}const n=t.endAt?new je(t.endAt.position,!t.endAt.before):null,r=t.startAt?new je(t.startAt.position,!t.startAt.before):null;t.D=ke(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t.D}function et(e,t,n){return new Ke(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function tt(e,t){return Ae(Ze(e),Ze(t))&&e.limitType===t.limitType}function nt(e){return`${Se(Ze(e))}|lt:${e.limitType}`}function rt(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>{return`${(t=e).field.canonicalString()} ${t.op} ${fe(t.value)}`;var t}).join(", ")}]`),ie(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: "+Ue(e.startAt)),e.endAt&&(t+=", endAt: "+Ue(e.endAt)),`Target(${t})`}(Ze(e))}; limitType=${e.limitType})`}function it(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ae.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!Be(e.startAt,Xe(e),t))&&(!e.endAt||!Be(e.endAt,Xe(e),t))}(e,t)}function st(e){return(t,n)=>{let r=!1;for(const i of Xe(e)){const e=ot(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function ot(e,t,n){const r=e.field.isKeyField()?ae.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?le(r,i):v()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return v()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(e,t){if(e.C){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:se(t)?"-0":t}}function ct(e){return{integerValue:""+e}}function ut(e,t){return oe(t)?ct(t):at(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(){this._=void 0}}function lt(e,t,n){return e instanceof pt?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof mt?gt(e,t):e instanceof yt?vt(e,t):function(e,t){const n=ft(e,t),r=bt(n)+bt(e.N);return me(n)&&me(e.N)?ct(r):at(e.k,r)}(e,t)}function dt(e,t,n){return e instanceof mt?gt(e,t):e instanceof yt?vt(e,t):n}function ft(e,t){return e instanceof wt?me(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class pt extends ht{}class mt extends ht{constructor(e){super(),this.elements=e}}function gt(e,t){const n=It(t);for(const t of e.elements)n.some(e=>ue(e,t))||n.push(t);return{arrayValue:{values:n}}}class yt extends ht{constructor(e){super(),this.elements=e}}function vt(e,t){let n=It(t);for(const t of e.elements)n=n.filter(e=>!ue(e,t));return{arrayValue:{values:n}}}class wt extends ht{constructor(e,t){super(),this.k=e,this.N=t}}function bt(e){return ee(e.integerValue||e.doubleValue)}function It(e){return ge(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,t){this.field=e,this.transform=t}}class Tt{constructor(e,t){this.version=e,this.transformResults=t}}class Et{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Et}static exists(e){return new Et(void 0,e)}static updateTime(e){return new Et(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kt(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class St{}function At(e,t,n){e instanceof Rt?function(e,t,n){const r=e.value.clone(),i=xt(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Pt?function(e,t,n){if(!kt(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=xt(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Lt(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Nt(e,t,n){e instanceof Rt?function(e,t,n){if(!kt(e.precondition,t))return;const r=e.value.clone(),i=Mt(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Dt(t),r).setHasLocalMutations()}(e,t,n):e instanceof Pt?function(e,t,n){if(!kt(e.precondition,t))return;const r=Mt(e.fieldTransforms,n,t),i=t.data;i.setAll(Lt(e)),i.setAll(r),t.convertToFoundDocument(Dt(t),i).setHasLocalMutations()}(e,t,n):function(e,t){kt(e.precondition,t)&&t.convertToNoDocument(q.min())}(e,t)}function Ot(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=ft(r.transform,e||null);null!=i&&(null==n&&(n=Ie.empty()),n.set(r.field,i))}return n||null}function Ct(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&j(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof mt&&t instanceof mt||e instanceof yt&&t instanceof yt?j(e.elements,t.elements,ue):e instanceof wt&&t instanceof wt?ue(e.N,t.N):e instanceof pt&&t instanceof pt}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Dt(e){return e.isFoundDocument()?e.version:q.min()}class Rt extends St{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}}class Pt extends St{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}}function Lt(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function xt(e,t,n){const r=new Map;w(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,dt(o,a,n[i]))}return r}function Mt(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,lt(e,s,t))}return r}class Ft extends St{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class jt extends St{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.count=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,qt;function Bt(e){switch(e){default:return v();case _.CANCELLED:case _.UNKNOWN:case _.DEADLINE_EXCEEDED:case _.RESOURCE_EXHAUSTED:case _.INTERNAL:case _.UNAVAILABLE:case _.UNAUTHENTICATED:return!1;case _.INVALID_ARGUMENT:case _.NOT_FOUND:case _.ALREADY_EXISTS:case _.PERMISSION_DENIED:case _.FAILED_PRECONDITION:case _.ABORTED:case _.OUT_OF_RANGE:case _.UNIMPLEMENTED:case _.DATA_LOSS:return!0}}function zt(e){if(void 0===e)return m("GRPC error has no .code"),_.UNKNOWN;switch(e){case Vt.OK:return _.OK;case Vt.CANCELLED:return _.CANCELLED;case Vt.UNKNOWN:return _.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return _.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return _.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return _.INTERNAL;case Vt.UNAVAILABLE:return _.UNAVAILABLE;case Vt.UNAUTHENTICATED:return _.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return _.INVALID_ARGUMENT;case Vt.NOT_FOUND:return _.NOT_FOUND;case Vt.ALREADY_EXISTS:return _.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return _.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return _.FAILED_PRECONDITION;case Vt.ABORTED:return _.ABORTED;case Vt.OUT_OF_RANGE:return _.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return _.UNIMPLEMENTED;case Vt.DATA_LOSS:return _.DATA_LOSS;default:return v()}}(qt=Vt||(Vt={}))[qt.OK=0]="OK",qt[qt.CANCELLED=1]="CANCELLED",qt[qt.UNKNOWN=2]="UNKNOWN",qt[qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qt[qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qt[qt.NOT_FOUND=5]="NOT_FOUND",qt[qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",qt[qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",qt[qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",qt[qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qt[qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qt[qt.ABORTED=10]="ABORTED",qt[qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",qt[qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",qt[qt.INTERNAL=13]="INTERNAL",qt[qt.UNAVAILABLE=14]="UNAVAILABLE",qt[qt.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Kt{constructor(e,t){this.comparator=e,this.root=t||Gt.EMPTY}insert(e,t){return new Kt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gt.BLACK,null,null))}remove(e){return new Kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wt(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wt(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wt(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wt(this.root,e,this.comparator,!0)}}class Wt{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gt{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Gt.RED,this.left=null!=r?r:Gt.EMPTY,this.right=null!=i?i:Gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Gt(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Gt.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw v();if(this.right.isRed())throw v();const e=this.left.check();if(e!==this.right.check())throw v();return e+(this.isRed()?0:1)}}Gt.EMPTY=null,Gt.RED=!0,Gt.BLACK=!1,Gt.EMPTY=new class{constructor(){this.size=0}get key(){throw v()}get value(){throw v()}get color(){throw v()}get left(){throw v()}get right(){throw v()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Gt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ht{constructor(e){this.comparator=e,this.data=new Kt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $t(this.data.getIterator())}getIteratorFrom(e){return new $t(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Ht))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ht(this.comparator);return t.data=e,t}}class $t{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt=new Kt(ae.comparator);function Jt(){return Qt}const Yt=new Kt(ae.comparator);function Xt(){return Yt}const Zt=new Kt(ae.comparator);function en(){return Zt}const tn=new Ht(ae.comparator);function nn(...e){let t=tn;for(const n of e)t=t.add(n);return t}const rn=new Ht(F);function sn(){return rn}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t){const n=new Map;return n.set(e,an.createSynthesizedTargetChangeForCurrentChange(e,t)),new on(q.min(),n,sn(),Jt(),nn())}}class an{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t){return new an(Y.EMPTY_BYTE_STRING,t,nn(),nn(),nn())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,t,n,r){this.$=e,this.removedTargetIds=t,this.key=n,this.F=r}}class un{constructor(e,t){this.targetId=e,this.O=t}}class hn{constructor(e,t,n=Y.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class ln{constructor(){this.M=0,this.L=pn(),this.B=Y.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.M}get j(){return this.q}W(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}G(){let e=nn(),t=nn(),n=nn();return this.L.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:v()}}),new an(this.B,this.U,e,t,n)}H(){this.q=!1,this.L=pn()}J(e,t){this.q=!0,this.L=this.L.insert(e,t)}Y(e){this.q=!0,this.L=this.L.remove(e)}X(){this.M+=1}Z(){this.M-=1}tt(){this.q=!0,this.U=!0}}class dn{constructor(e){this.et=e,this.nt=new Map,this.st=Jt(),this.it=fn(),this.rt=new Ht(F)}ot(e){for(const t of e.$)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ut(e){this.forEachTarget(e,t=>{const n=this.ht(t);switch(e.state){case 0:this.lt(t)&&n.W(e.resumeToken);break;case 1:n.Z(),n.K||n.H(),n.W(e.resumeToken);break;case 2:n.Z(),n.K||this.removeTarget(t);break;case 3:this.lt(t)&&(n.tt(),n.W(e.resumeToken));break;case 4:this.lt(t)&&(this.ft(t),n.W(e.resumeToken));break;default:v()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach((e,n)=>{this.lt(n)&&t(n)})}dt(e){const t=e.targetId,n=e.O.count,r=this.wt(t);if(r){const e=r.target;if(Ne(e))if(0===n){const n=new ae(e.path);this.ct(t,n,Te.newNoDocument(n,q.min()))}else w(1===n);else this._t(t)!==n&&(this.ft(t),this.rt=this.rt.add(t))}}gt(e){const t=new Map;this.nt.forEach((n,r)=>{const i=this.wt(r);if(i){if(n.current&&Ne(i.target)){const t=new ae(i.target.path);null!==this.st.get(t)||this.yt(r,t)||this.ct(r,t,Te.newNoDocument(t,e))}n.j&&(t.set(r,n.G()),n.H())}});let n=nn();this.it.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.wt(e);return!t||2===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))});const r=new on(e,t,this.rt,this.st,n);return this.st=Jt(),this.it=fn(),this.rt=new Ht(F),r}at(e,t){if(!this.lt(e))return;const n=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,n),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,n){if(!this.lt(e))return;const r=this.ht(e);this.yt(e,t)?r.J(t,1):r.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),n&&(this.st=this.st.insert(t,n))}removeTarget(e){this.nt.delete(e)}_t(e){const t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}X(e){this.ht(e).X()}ht(e){let t=this.nt.get(e);return t||(t=new ln,this.nt.set(e,t)),t}Tt(e){let t=this.it.get(e);return t||(t=new Ht(F),this.it=this.it.insert(e,t)),t}lt(e){const t=null!==this.wt(e);return t||p("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}ft(e){this.nt.set(e,new ln),this.et.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}yt(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}function fn(){return new Kt(ae.comparator)}function pn(){return new Kt(ae.comparator)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn={asc:"ASCENDING",desc:"DESCENDING"},gn={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class yn{constructor(e,t){this.databaseId=e,this.C=t}}function vn(e,t){return e.C?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function wn(e,t){return e.C?t.toBase64():t.toUint8Array()}function bn(e,t){return vn(e,t.toTimestamp())}function In(e){return w(!!e),q.fromTimestamp(function(e){const t=Z(e);return new V(t.seconds,t.nanos)}(e))}function _n(e,t){return function(e){return new G(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Tn(e){const t=G.fromString(e);return w(Gn(t)),t}function En(e,t){return _n(e.databaseId,t.path)}function kn(e,t){const n=Tn(t);if(n.get(1)!==e.databaseId.projectId)throw new T(_.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new T(_.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ae(On(n))}function Sn(e,t){return _n(e.databaseId,t)}function An(e){const t=Tn(e);return 4===t.length?G.emptyPath():On(t)}function Nn(e){return new G(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function On(e){return w(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Cn(e,t,n){return{name:En(e,t),fields:n.value.mapValue.fields}}function Dn(e,t,n){const r=kn(e,t.name),i=In(t.updateTime),s=new Ie({mapValue:{fields:t.fields}}),o=Te.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Rn(e,t){let n;if(t instanceof Rt)n={update:Cn(e,t.key,t.value)};else if(t instanceof Ft)n={delete:En(e,t.key)};else if(t instanceof Pt)n={update:Cn(e,t.key,t.data),updateMask:Wn(t.fieldMask)};else{if(!(t instanceof jt))return v();n={verify:En(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof pt)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof mt)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof yt)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof wt)return{fieldPath:t.field.canonicalString(),increment:n.N};throw v()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:bn(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:v()}(e,t.precondition)),n}function Pn(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Et.updateTime(In(e.updateTime)):void 0!==e.exists?Et.exists(e.exists):Et.none()}(t.currentDocument):Et.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;if("setToServerValue"in t)w("REQUEST_TIME"===t.setToServerValue),n=new pt;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new mt(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new yt(e)}else"increment"in t?n=new wt(e,t.increment):v();const r=$.fromServerFormat(t.fieldPath);return new _t(r,n)}(e,t)):[];if(t.update){t.update.name;const i=kn(e,t.update.name),s=new Ie({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Q(t.map(e=>$.fromServerFormat(e)))}(t.updateMask);return new Pt(i,s,e,n,r)}return new Rt(i,s,n,r)}if(t.delete){const r=kn(e,t.delete);return new Ft(r,n)}if(t.verify){const r=kn(e,t.verify);return new jt(r,n)}return v()}function Ln(e,t){return{documents:[Sn(e,t.path)]}}function xn(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Sn(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Sn(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0===e.length)return;const t=e.map(e=>function(e){if("=="===e.op){if(ve(e.value))return{unaryFilter:{field:qn(e.field),op:"IS_NAN"}};if(ye(e.value))return{unaryFilter:{field:qn(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ve(e.value))return{unaryFilter:{field:qn(e.field),op:"IS_NOT_NAN"}};if(ye(e.value))return{unaryFilter:{field:qn(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qn(e.field),op:Vn(e.op),value:e.value}}}(e));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:qn(e.field),direction:Un(e.dir)}}(e))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(e,t){return e.C||ie(t)?t:{value:t}}(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=Fn(t.startAt)),t.endAt&&(n.structuredQuery.endAt=Fn(t.endAt)),n}function Mn(e){let t=An(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){w(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function e(t){return t?void 0!==t.unaryFilter?[Kn(t)]:void 0!==t.fieldFilter?[zn(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(t=>e(t)).reduce((e,t)=>e.concat(t)):v():[]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(e=>function(e){return new Ve(Bn(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,ie(t)?null:t}(n.limit));let c=null;n.startAt&&(c=jn(n.startAt));let u=null;return n.endAt&&(u=jn(n.endAt)),We(t,i,o,s,a,"F",c,u)}function Fn(e){return{before:e.before,values:e.position}}function jn(e){const t=!!e.before,n=e.values||[];return new je(n,t)}function Un(e){return mn[e]}function Vn(e){return gn[e]}function qn(e){return{fieldPath:e.canonicalString()}}function Bn(e){return $.fromServerFormat(e.fieldPath)}function zn(e){return Oe.create(Bn(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return v()}}(e.fieldFilter.op),e.fieldFilter.value)}function Kn(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Bn(e.unaryFilter.field);return Oe.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Bn(e.unaryFilter.field);return Oe.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Bn(e.unaryFilter.field);return Oe.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Bn(e.unaryFilter.field);return Oe.create(i,"!=",{nullValue:"NULL_VALUE"});default:return v()}}function Wn(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Gn(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Qn(t)),t=$n(e.get(n),t);return Qn(t)}function $n(e,t){let n=t;const r=e.length;for(let t=0;t<r;t++){const r=e.charAt(t);switch(r){case"\0":n+="";break;case"":n+="";break;default:n+=r}}return n}function Qn(e){return e+""}function Jn(e){const t=e.length;if(w(t>=2),2===t)return w(""===e.charAt(0)&&""===e.charAt(1)),G.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("",s);switch((t<0||t>n)&&v(),e.charAt(t+1)){case"":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"":i+=e.substring(s,t),i+="\0";break;case"":i+=e.substring(s,t+1);break;default:v()}s=t+2}return new G(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class Xn{constructor(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}}Xn.store="owner",Xn.key="owner";class Zn{constructor(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}}Zn.store="mutationQueues",Zn.keyPath="userId";class er{constructor(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}}er.store="mutations",er.keyPath="batchId",er.userMutationsIndex="userMutationsIndex",er.userMutationsKeyPath=["userId","batchId"];class tr{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,Hn(t)]}static key(e,t,n){return[e,Hn(t),n]}}tr.store="documentMutations",tr.PLACEHOLDER=new tr;class nr{constructor(e,t){this.path=e,this.readTime=t}}class rr{constructor(e,t){this.path=e,this.version=t}}class ir{constructor(e,t,n,r,i,s){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s}}ir.store="remoteDocuments",ir.readTimeIndex="readTimeIndex",ir.readTimeIndexPath="readTime",ir.collectionReadTimeIndex="collectionReadTimeIndex",ir.collectionReadTimeIndexPath=["parentPath","readTime"];class sr{constructor(e){this.byteSize=e}}sr.store="remoteDocumentGlobal",sr.key="remoteDocumentGlobalKey";class or{constructor(e,t,n,r,i,s,o){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o}}or.store="targets",or.keyPath="targetId",or.queryTargetsIndexName="queryTargetsIndex",or.queryTargetsKeyPath=["canonicalId","targetId"];class ar{constructor(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n}}ar.store="targetDocuments",ar.keyPath=["targetId","path"],ar.documentTargetsIndex="documentTargetsIndex",ar.documentTargetsKeyPath=["path","targetId"];class cr{constructor(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}}cr.key="targetGlobalKey",cr.store="targetGlobal";class ur{constructor(e,t){this.collectionId=e,this.parent=t}}ur.store="collectionParents",ur.keyPath=["collectionId","parent"];class hr{constructor(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}}hr.store="clientMetadata",hr.keyPath="clientId";class lr{constructor(e,t,n){this.bundleId=e,this.createTime=t,this.version=n}}lr.store="bundles",lr.keyPath="bundleId";class dr{constructor(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n}}dr.store="namedQueries",dr.keyPath="name";const fr=[Zn.store,er.store,tr.store,ir.store,or.store,Xn.store,cr.store,ar.store,hr.store,sr.store,ur.store,lr.store,dr.store],pr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mr{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&v(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new gr((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof gr?t:gr.resolve(t)}catch(e){return gr.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):gr.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):gr.reject(t)}static resolve(e){return new gr((t,n)=>{t(e)})}static reject(e){return new gr((t,n)=>{n(e)})}static waitFor(e){return new gr((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=gr.resolve(!1);for(const n of e)t=t.next(e=>e?gr.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.It=new E,this.transaction.oncomplete=()=>{this.It.resolve()},this.transaction.onabort=()=>{t.error?this.It.reject(new br(e,t.error)):this.It.resolve()},this.transaction.onerror=t=>{const n=kr(t.target.error);this.It.reject(new br(e,n))}}static open(e,t,n,r){try{return new yr(t,e.transaction(r,n))}catch(e){throw new br(t,e)}}get At(){return this.It.promise}abort(e){e&&this.It.reject(e),this.aborted||(p("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new _r(t)}}class vr{constructor(e,t,n){this.name=e,this.version=t,this.Rt=n,12.2===vr.Pt(Object(o.l)())&&m("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return p("SimpleDb","Removing database:",e),Tr(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if(!Object(o.r)())return!1;if(vr.vt())return!0;const e=Object(o.l)(),t=vr.Pt(e),n=0<t&&t<10,r=vr.Vt(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static vt(){var t;return void 0!==e&&"YES"===(null===(t=e.env)||void 0===t?void 0:t.St)}static Dt(e,t){return e.store(t)}static Pt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static Vt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async Ct(e){return this.db||(p("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new br(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new T(_.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new T(_.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new br(e,r))},r.onupgradeneeded=e=>{p("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.Rt.Nt(t,r.transaction,e.oldVersion,this.version).next(()=>{p("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.kt&&(this.db.onversionchange=e=>this.kt(e)),this.db}xt(e){this.kt=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.Ct(e);const t=yr.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).catch(e=>(t.abort(e),gr.reject(e))).toPromise();return s.catch(()=>{}),await t.At,s}catch(e){const t="FirebaseError"!==e.name&&s<3;if(p("SimpleDb","Transaction failed with error:",e.message,"Retrying:",t),this.close(),!t)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}class wr{constructor(e){this.$t=e,this.Ft=!1,this.Ot=null}get isDone(){return this.Ft}get Mt(){return this.Ot}set cursor(e){this.$t=e}done(){this.Ft=!0}Lt(e){this.Ot=e}delete(){return Tr(this.$t.delete())}}class br extends T{constructor(e,t){super(_.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ir(e){return"IndexedDbTransactionError"===e.name}class _r{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(p("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(p("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Tr(n)}add(e){return p("SimpleDb","ADD",this.store.name,e,e),Tr(this.store.add(e))}get(e){return Tr(this.store.get(e)).next(t=>(void 0===t&&(t=null),p("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return p("SimpleDb","DELETE",this.store.name,e),Tr(this.store.delete(e))}count(){return p("SimpleDb","COUNT",this.store.name),Tr(this.store.count())}Bt(e,t){const n=this.cursor(this.options(e,t)),r=[];return this.Ut(n,(e,t)=>{r.push(t)}).next(()=>r)}qt(e,t){p("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.Kt=!1;const r=this.cursor(n);return this.Ut(r,(e,t,n)=>n.delete())}jt(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.Ut(r,t)}Qt(e){const t=this.cursor({});return new gr((n,r)=>{t.onerror=e=>{const t=kr(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}Ut(e,t){const n=[];return new gr((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new wr(i),o=t(i.primaryKey,i.value,s);if(o instanceof gr){const e=o.catch(e=>(s.done(),gr.reject(e)));n.push(e)}s.isDone?r():null===s.Mt?i.continue():i.continue(s.Mt)}}).next(()=>gr.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Kt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Tr(e){return new gr((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=kr(e.target.error);n(t)}})}let Er=!1;function kr(e){const t=vr.Pt(Object(o.l)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new T("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Er||(Er=!0,setTimeout(()=>{throw e},0)),e}}return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends mr{constructor(e,t){super(),this.Wt=e,this.currentSequenceNumber=t}}function Ar(e,t){const n=I(e);return vr.Dt(n.Wt,t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const r=this.mutations[t];r.key.isEqual(e.key)&&At(r,e,n[t])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Nt(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Nt(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const n=e.get(t.key),r=n;this.applyToLocalView(r),n.isValidDocument()||r.convertToNoDocument(q.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),nn())}isEqual(e){return this.batchId===e.batchId&&j(this.mutations,e.mutations,(e,t)=>Ct(e,t))&&j(this.baseMutations,e.baseMutations,(e,t)=>Ct(e,t))}}class Or{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){w(e.mutations.length===n.length);let r=en();const i=e.mutations;for(let e=0;e<i.length;e++)r=r.insert(i[e].key,n[e].version);return new Or(e,t,n,r)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,t,n,r,i=q.min(),s=q.min(),o=Y.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(e){return new Cr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this.Gt=e}}function Rr(e,t){if(t.document)return Dn(e.Gt,t.document,!!t.hasCommittedMutations);if(t.noDocument){const e=ae.fromSegments(t.noDocument.path),n=Fr(t.noDocument.readTime),r=Te.newNoDocument(e,n);return t.hasCommittedMutations?r.setHasCommittedMutations():r}if(t.unknownDocument){const e=ae.fromSegments(t.unknownDocument.path),n=Fr(t.unknownDocument.version);return Te.newUnknownDocument(e,n)}return v()}function Pr(e,t,n){const r=Lr(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){const n=function(e,t){return{name:En(e,t.key),fields:t.data.value.mapValue.fields,updateTime:vn(e,t.version.toTimestamp())}}(e.Gt,t),s=t.hasCommittedMutations;return new ir(null,null,n,s,r,i)}if(t.isNoDocument()){const e=t.key.path.toArray(),n=Mr(t.version),s=t.hasCommittedMutations;return new ir(null,new nr(e,n),null,s,r,i)}if(t.isUnknownDocument()){const e=t.key.path.toArray(),n=Mr(t.version);return new ir(new rr(e,n),null,null,!0,r,i)}return v()}function Lr(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function xr(e){const t=new V(e[0],e[1]);return q.fromTimestamp(t)}function Mr(e){const t=e.toTimestamp();return new Yn(t.seconds,t.nanoseconds)}function Fr(e){const t=new V(e.seconds,e.nanoseconds);return q.fromTimestamp(t)}function jr(e,t){const n=(t.baseMutations||[]).map(t=>Pn(e.Gt,t));for(let e=0;e<t.mutations.length-1;++e){const n=t.mutations[e];if(e+1<t.mutations.length&&void 0!==t.mutations[e+1].transform){const r=t.mutations[e+1];n.updateTransforms=r.transform.fieldTransforms,t.mutations.splice(e+1,1),++e}}const r=t.mutations.map(t=>Pn(e.Gt,t)),i=V.fromMillis(t.localWriteTimeMs);return new Nr(t.batchId,i,n,r)}function Ur(e){const t=Fr(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Fr(e.lastLimboFreeSnapshotVersion):q.min();let r;var i;return void 0!==e.query.documents?(w(1===(i=e.query).documents.length),r=Ze(Ge(An(i.documents[0])))):r=function(e){return Ze(Mn(e))}(e.query),new Cr(r,e.targetId,0,e.lastListenSequenceNumber,t,n,Y.fromBase64String(e.resumeToken))}function Vr(e,t){const n=Mr(t.snapshotVersion),r=Mr(t.lastLimboFreeSnapshotVersion);let i;i=Ne(t.target)?Ln(e.Gt,t.target):xn(e.Gt,t.target);const s=t.resumeToken.toBase64();return new or(t.targetId,Se(t.target),n,s,t.sequenceNumber,r,i)}function qr(e){const t=Mn({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?et(t,t.limit,"L"):t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{getBundleMetadata(e,t){return zr(e).get(t).next(e=>{if(e)return{id:(t=e).bundleId,createTime:Fr(t.createTime),version:t.version};var t})}saveBundleMetadata(e,t){return zr(e).put({bundleId:(n=t).id,createTime:Mr(In(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return Kr(e).get(t).next(e=>{if(e)return{name:(t=e).name,query:qr(t.bundledQuery),readTime:Fr(t.readTime)};var t})}saveNamedQuery(e,t){return Kr(e).put(function(e){return{name:e.name,readTime:Mr(In(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function zr(e){return Ar(e,lr.store)}function Kr(e){return Ar(e,dr.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(){this.zt=new Gr}addToCollectionParentIndex(e,t){return this.zt.add(t),gr.resolve()}getCollectionParents(e,t){return gr.resolve(this.zt.getEntries(t))}}class Gr{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ht(G.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ht(G.comparator)).toArray()}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(){this.Ht=new Gr}addToCollectionParentIndex(e,t){if(!this.Ht.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.Ht.add(t)});const i={collectionId:n,parent:Hn(r)};return $r(e).put(i)}return gr.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[U(t),""],!1,!0);return $r(e).Bt(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Jn(r.parent))}return n})}}function $r(e){return Ar(e,ur.store)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Jr{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Jr(e,Jr.DEFAULT_COLLECTION_PERCENTILE,Jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(e,t,n){const r=e.store(er.store),i=e.store(tr.store),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.jt({range:o},(e,t,n)=>(a++,n.delete()));s.push(c.next(()=>{w(1===a)}));const u=[];for(const e of n.mutations){const r=tr.key(t,e.key.path,n.batchId);s.push(i.delete(r)),u.push(e.key)}return gr.waitFor(s).next(()=>u)}function Xr(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw v();t=e.noDocument}return JSON.stringify(t).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jr.DEFAULT_COLLECTION_PERCENTILE=10,Jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jr.DEFAULT=new Jr(41943040,Jr.DEFAULT_COLLECTION_PERCENTILE,Jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jr.DISABLED=new Jr(-1,0,0);class Zr{constructor(e,t,n,r){this.userId=e,this.k=t,this.Jt=n,this.referenceDelegate=r,this.Yt={}}static Xt(e,t,n,r){w(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Zr(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ti(e).jt({index:er.userMutationsIndex,range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const i=ni(e),s=ti(e);return s.add({}).next(o=>{w("number"==typeof o);const a=new Nr(o,t,n,r),c=function(e,t,n){const r=n.baseMutations.map(t=>Rn(e.Gt,t)),i=n.mutations.map(t=>Rn(e.Gt,t));return new er(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(this.k,this.userId,a),u=[];let h=new Ht((e,t)=>F(e.canonicalString(),t.canonicalString()));for(const e of r){const t=tr.key(this.userId,e.key.path,o);h=h.add(e.key.path.popLast()),u.push(s.put(c)),u.push(i.put(t,tr.PLACEHOLDER))}return h.forEach(t=>{u.push(this.Jt.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.Yt[o]=a.keys()}),gr.waitFor(u).next(()=>a)})}lookupMutationBatch(e,t){return ti(e).get(t).next(e=>e?(w(e.userId===this.userId),jr(this.k,e)):null)}Zt(e,t){return this.Yt[t]?gr.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.Yt[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return ti(e).jt({index:er.userMutationsIndex,range:r},(e,t,r)=>{t.userId===this.userId&&(w(t.batchId>=n),i=jr(this.k,t)),r.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return ti(e).jt({index:er.userMutationsIndex,range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ti(e).Bt(er.userMutationsIndex,t).next(e=>e.map(e=>jr(this.k,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=tr.prefixForPath(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return ni(e).jt({range:r},(n,r,s)=>{const[o,a,c]=n,u=Jn(a);if(o===this.userId&&t.path.isEqual(u))return ti(e).get(c).next(e=>{if(!e)throw v();w(e.userId===this.userId),i.push(jr(this.k,e))});s.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ht(F);const r=[];return t.forEach(t=>{const i=tr.prefixForPath(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=ni(e).jt({range:s},(e,r,i)=>{const[s,o,a]=e,c=Jn(o);s===this.userId&&t.path.isEqual(c)?n=n.add(a):i.done()});r.push(o)}),gr.waitFor(r).next(()=>this.te(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=tr.prefixForPath(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new Ht(F);return ni(e).jt({range:s},(e,t,i)=>{const[s,a,c]=e,u=Jn(a);s===this.userId&&n.isPrefixOf(u)?u.length===r&&(o=o.add(c)):i.done()}).next(()=>this.te(e,o))}te(e,t){const n=[],r=[];return t.forEach(t=>{r.push(ti(e).get(t).next(e=>{if(null===e)throw v();w(e.userId===this.userId),n.push(jr(this.k,e))}))}),gr.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return Yr(e.Wt,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.ee(t.batchId)}),gr.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}ee(e){delete this.Yt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return gr.resolve();const n=IDBKeyRange.lowerBound(tr.prefixForUser(this.userId)),r=[];return ni(e).jt({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=Jn(e[1]);r.push(t)}else n.done()}).next(()=>{w(0===r.length)})})}containsKey(e,t){return ei(e,this.userId,t)}ne(e){return ri(e).get(this.userId).next(e=>e||new Zn(this.userId,-1,""))}}function ei(e,t,n){const r=tr.prefixForPath(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return ni(e).jt({range:s,Kt:!0},(e,n,r)=>{const[s,a,c]=e;s===t&&a===i&&(o=!0),r.done()}).next(()=>o)}function ti(e){return Ar(e,er.store)}function ni(e){return Ar(e,tr.store)}function ri(e){return Ar(e,Zn.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this.se=e}next(){return this.se+=2,this.se}static ie(){return new ii(0)}static re(){return new ii(-1)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,t){this.referenceDelegate=e,this.k=t}allocateTargetId(e){return this.oe(e).next(t=>{const n=new ii(t.highestTargetId);return t.highestTargetId=n.next(),this.ae(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.oe(e).next(e=>q.fromTimestamp(new V(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.oe(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.oe(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.ae(e,r)))}addTargetData(e,t){return this.ce(e,t).next(()=>this.oe(e).next(n=>(n.targetCount+=1,this.ue(t,n),this.ae(e,n))))}updateTargetData(e,t){return this.ce(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>oi(e).delete(t.targetId)).next(()=>this.oe(e)).next(t=>(w(t.targetCount>0),t.targetCount-=1,this.ae(e,t)))}removeTargets(e,t,n){let r=0;const i=[];return oi(e).jt((s,o)=>{const a=Ur(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))}).next(()=>gr.waitFor(i)).next(()=>r)}forEachTarget(e,t){return oi(e).jt((e,n)=>{const r=Ur(n);t(r)})}oe(e){return ai(e).get(cr.key).next(e=>(w(null!==e),e))}ae(e,t){return ai(e).put(cr.key,t)}ce(e,t){return oi(e).put(Vr(this.k,t))}ue(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.oe(e).next(e=>e.targetCount)}getTargetData(e,t){const n=Se(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return oi(e).jt({range:r,index:or.queryTargetsIndexName},(e,n,r)=>{const s=Ur(n);Ae(t,s.target)&&(i=s,r.done())}).next(()=>i)}addMatchingKeys(e,t,n){const r=[],i=ci(e);return t.forEach(t=>{const s=Hn(t.path);r.push(i.put(new ar(n,s))),r.push(this.referenceDelegate.addReference(e,n,t))}),gr.waitFor(r)}removeMatchingKeys(e,t,n){const r=ci(e);return gr.forEach(t,t=>{const i=Hn(t.path);return gr.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=ci(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=ci(e);let i=nn();return r.jt({range:n,Kt:!0},(e,t,n)=>{const r=Jn(e[1]),s=new ae(r);i=i.add(s)}).next(()=>i)}containsKey(e,t){const n=Hn(t.path),r=IDBKeyRange.bound([n],[U(n)],!1,!0);let i=0;return ci(e).jt({index:ar.documentTargetsIndex,Kt:!0,range:r},([e,t],n,r)=>{0!==e&&(i++,r.done())}).next(()=>i>0)}Et(e,t){return oi(e).get(t).next(e=>e?Ur(e):null)}}function oi(e){return Ar(e,or.store)}function ai(e){return Ar(e,cr.store)}function ci(e){return Ar(e,ar.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ui(e){if(e.code!==_.FAILED_PRECONDITION||e.message!==pr)throw e;p("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi([e,t],[n,r]){const i=F(e,n);return 0===i?F(t,r):i}class li{constructor(e){this.he=e,this.buffer=new Ht(hi),this.le=0}fe(){return++this.le}de(e){const t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();hi(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class di{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.we=!1,this._e=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}stop(){this._e&&(this._e.cancel(),this._e=null)}get started(){return null!==this._e}me(e){const t=this.we?3e5:6e4;p("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this._e=null,this.we=!0;try{await e.collectGarbage(this.garbageCollector)}catch(e){Ir(e)?p("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await ui(e)}await this.me(e)})}}class fi{constructor(e,t){this.ge=e,this.params=t}calculateTargetCount(e,t){return this.ge.ye(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return gr.resolve(L.I);const n=new li(t);return this.ge.forEachTarget(e,e=>n.de(e.sequenceNumber)).next(()=>this.ge.pe(e,e=>n.de(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.ge.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.ge.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(p("LruGarbageCollector","Garbage collection skipped; disabled"),gr.resolve(Qr)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(p("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Qr):this.Te(e,t))}getCacheSize(e){return this.ge.getCacheSize(e)}Te(e,t){let n,r,i,o,a,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(p("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(u=Date.now(),d()<=s.a.DEBUG&&p("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-h}ms\n\tDetermined least recently used ${r} in `+(a-o)+"ms\n"+`\tRemoved ${i} targets in `+(c-a)+"ms\n"+`\tRemoved ${e} documents in `+(u-c)+"ms\n"+`Total Duration: ${u-h}ms`),gr.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new fi(e,t)}(this,t)}ye(e){const t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}Ee(e){let t=0;return this.pe(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pe(e,t){return this.Ie(e,(e,n)=>t(n))}addReference(e,t,n){return mi(e,n)}removeReference(e,t,n){return mi(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return mi(e,t)}Ae(e,t){return function(e,t){let n=!1;return ri(e).Qt(r=>ei(e,r,t).next(e=>(e&&(n=!0),gr.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Ie(e,(s,o)=>{if(o<=t){const t=this.Ae(e,s).next(t=>{if(!t)return i++,n.getEntry(e,s).next(()=>(n.removeEntry(s),ci(e).delete([0,Hn(s.path)])))});r.push(t)}}).next(()=>gr.waitFor(r)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return mi(e,t)}Ie(e,t){const n=ci(e);let r,i=L.I;return n.jt({index:ar.documentTargetsIndex},([e,n],{path:s,sequenceNumber:o})=>{0===e?(i!==L.I&&t(new ae(Jn(r)),i),i=o,r=s):i=L.I}).next(()=>{i!==L.I&&t(new ae(Jn(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function mi(e,t){return ci(e).put(function(e,t){return new ar(0,Hn(e.path),t)}(t,e.currentSequenceNumber))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,r]of n)if(this.equalsFn(t,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}forEach(e){z(this.inner,(t,n)=>{for(const[t,r]of n)e(t,r)})}isEmpty(){return K(this.inner)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(){this.changes=new gi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:q.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:Te.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?gr.resolve(n.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,t){this.k=e,this.Jt=t}addEntry(e,t,n){return Ii(e).put(_i(t),n)}removeEntry(e,t){const n=Ii(e),r=_i(t);return n.delete(r)}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.Re(e,n)))}getEntry(e,t){return Ii(e).get(_i(t)).next(e=>this.Pe(t,e))}be(e,t){return Ii(e).get(_i(t)).next(e=>({document:this.Pe(t,e),size:Xr(e)}))}getEntries(e,t){let n=Jt();return this.ve(e,t,(e,t)=>{const r=this.Pe(e,t);n=n.insert(e,r)}).next(()=>n)}Ve(e,t){let n=Jt(),r=new Kt(ae.comparator);return this.ve(e,t,(e,t)=>{const i=this.Pe(e,t);n=n.insert(e,i),r=r.insert(e,Xr(t))}).next(()=>({documents:n,Se:r}))}ve(e,t,n){if(t.isEmpty())return gr.resolve();const r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator();let s=i.getNext();return Ii(e).jt({range:r},(e,t,r)=>{const o=ae.fromSegments(e);for(;s&&ae.comparator(s,o)<0;)n(s,null),s=i.getNext();s&&s.isEqual(o)&&(n(s,t),s=i.hasNext()?i.getNext():null),s?r.Lt(s.path.toArray()):r.done()}).next(()=>{for(;s;)n(s,null),s=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,t,n){let r=Jt();const i=t.path.length+1,s={};if(n.isEqual(q.min())){const e=t.path.toArray();s.range=IDBKeyRange.lowerBound(e)}else{const e=t.path.toArray(),r=Lr(n);s.range=IDBKeyRange.lowerBound([e,r],!0),s.index=ir.collectionReadTimeIndex}return Ii(e).jt(s,(e,n,s)=>{if(e.length!==i)return;const o=Rr(this.k,n);t.path.isPrefixOf(o.key.path)?it(t,o)&&(r=r.insert(o.key,o)):s.done()}).next(()=>r)}newChangeBuffer(e){return new wi(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return bi(e).get(sr.key).next(e=>(w(!!e),e))}Re(e,t){return bi(e).put(sr.key,t)}Pe(e,t){if(t){const e=Rr(this.k,t);if(!e.isNoDocument()||!e.version.isEqual(q.min()))return e}return Te.newInvalidDocument(e)}}class wi extends yi{constructor(e,t){super(),this.De=e,this.trackRemovals=t,this.Ce=new gi(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new Ht((e,t)=>F(e.canonicalString(),t.canonicalString()));return this.changes.forEach((i,s)=>{const o=this.Ce.get(i);if(s.document.isValidDocument()){const a=Pr(this.De.k,s.document,this.getReadTime(i));r=r.add(i.path.popLast());const c=Xr(a);n+=c-o,t.push(this.De.addEntry(e,i,a))}else if(n-=o,this.trackRemovals){const n=Pr(this.De.k,Te.newNoDocument(i,q.min()),this.getReadTime(i));t.push(this.De.addEntry(e,i,n))}else t.push(this.De.removeEntry(e,i))}),r.forEach(n=>{t.push(this.De.Jt.addToCollectionParentIndex(e,n))}),t.push(this.De.updateMetadata(e,n)),gr.waitFor(t)}getFromCache(e,t){return this.De.be(e,t).next(e=>(this.Ce.set(t,e.size),e.document))}getAllFromCache(e,t){return this.De.Ve(e,t).next(({documents:e,Se:t})=>(t.forEach((e,t)=>{this.Ce.set(e,t)}),e))}}function bi(e){return Ar(e,sr.store)}function Ii(e){return Ar(e,ir.store)}function _i(e){return e.path.toArray()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e){this.k=e}Nt(e,t,n,r){w(n<r&&n>=0&&r<=11);const i=new yr("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(Xn.store)}(e),function(e){e.createObjectStore(Zn.store,{keyPath:Zn.keyPath}),e.createObjectStore(er.store,{keyPath:er.keyPath,autoIncrement:!0}).createIndex(er.userMutationsIndex,er.userMutationsKeyPath,{unique:!0}),e.createObjectStore(tr.store)}(e),Ei(e),function(e){e.createObjectStore(ir.store)}(e));let s=gr.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(ar.store),e.deleteObjectStore(or.store),e.deleteObjectStore(cr.store)}(e),Ei(e)),s=s.next(()=>function(e){const t=e.store(cr.store),n=new cr(0,0,q.min().toTimestamp(),0);return t.put(cr.key,n)}(i))),n<4&&r>=4&&(0!==n&&(s=s.next(()=>function(e,t){return t.store(er.store).Bt().next(n=>{e.deleteObjectStore(er.store),e.createObjectStore(er.store,{keyPath:er.keyPath,autoIncrement:!0}).createIndex(er.userMutationsIndex,er.userMutationsKeyPath,{unique:!0});const r=t.store(er.store),i=n.map(e=>r.put(e));return gr.waitFor(i)})}(e,i))),s=s.next(()=>{!function(e){e.createObjectStore(hr.store,{keyPath:hr.keyPath})}(e)})),n<5&&r>=5&&(s=s.next(()=>this.Ne(i))),n<6&&r>=6&&(s=s.next(()=>(function(e){e.createObjectStore(sr.store)}(e),this.ke(i)))),n<7&&r>=7&&(s=s.next(()=>this.xe(i))),n<8&&r>=8&&(s=s.next(()=>this.$e(e,i))),n<9&&r>=9&&(s=s.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){const t=e.objectStore(ir.store);t.createIndex(ir.readTimeIndex,ir.readTimeIndexPath,{unique:!1}),t.createIndex(ir.collectionReadTimeIndex,ir.collectionReadTimeIndexPath,{unique:!1})}(t)})),n<10&&r>=10&&(s=s.next(()=>this.Fe(i))),n<11&&r>=11&&(s=s.next(()=>{!function(e){e.createObjectStore(lr.store,{keyPath:lr.keyPath})}(e),function(e){e.createObjectStore(dr.store,{keyPath:dr.keyPath})}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)})),s}ke(e){let t=0;return e.store(ir.store).jt((e,n)=>{t+=Xr(n)}).next(()=>{const n=new sr(t);return e.store(sr.store).put(sr.key,n)})}Ne(e){const t=e.store(Zn.store),n=e.store(er.store);return t.Bt().next(t=>gr.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.Bt(er.userMutationsIndex,r).next(n=>gr.forEach(n,n=>{w(n.userId===t.userId);const r=jr(this.k,n);return Yr(e,t.userId,r).next(()=>{})}))}))}xe(e){const t=e.store(ar.store),n=e.store(ir.store);return e.store(cr.store).get(cr.key).next(e=>{const r=[];return n.jt((n,i)=>{const s=new G(n),o=function(e){return[0,Hn(e)]}(s);r.push(t.get(o).next(n=>n?gr.resolve():(n=>t.put(new ar(0,Hn(n),e.highestListenSequenceNumber)))(s)))}).next(()=>gr.waitFor(r))})}$e(e,t){e.createObjectStore(ur.store,{keyPath:ur.keyPath});const n=t.store(ur.store),r=new Gr,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Hn(r)})}};return t.store(ir.store).jt({Kt:!0},(e,t)=>{const n=new G(e);return i(n.popLast())}).next(()=>t.store(tr.store).jt({Kt:!0},([e,t,n],r)=>{const s=Jn(t);return i(s.popLast())}))}Fe(e){const t=e.store(or.store);return t.jt((e,n)=>{const r=Ur(n),i=Vr(this.k,r);return t.put(i)})}}function Ei(e){e.createObjectStore(ar.store,{keyPath:ar.keyPath}).createIndex(ar.documentTargetsIndex,ar.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(or.store,{keyPath:or.keyPath}).createIndex(or.queryTargetsIndexName,or.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(cr.store)}const ki="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Si{constructor(e,t,n,r,i,s,o,a,c,u){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Oe=i,this.window=s,this.document=o,this.Me=c,this.Le=u,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=e=>Promise.resolve(),!Si.bt())throw new T(_.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new pi(this,r),this.Ge=t+"main",this.k=new Dr(a),this.ze=new vr(this.Ge,11,new Ti(this.k)),this.He=new si(this.referenceDelegate,this.k),this.Jt=new Hr,this.Je=function(e,t){return new vi(e,t)}(this.k,this.Jt),this.Ye=new Br,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===u&&m("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ze().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new T(_.FAILED_PRECONDITION,ki);return this.tn(),this.en(),this.nn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.He.getHighestSequenceNumber(e))}).then(e=>{this.Be=new L(e,this.Me)}).then(()=>{this.Ue=!0}).catch(e=>(this.ze&&this.ze.close(),Promise.reject(e)))}sn(e){return this.We=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ze.xt(async t=>{null===t.newVersion&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget(async()=>{this.started&&await this.Ze()}))}Ze(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ni(e).put(new hr(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.rn(e).next(e=>{e||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)))})}).next(()=>this.on(e)).next(t=>this.isPrimary&&!t?this.an(e).next(()=>!1):!!t&&this.cn(e).next(()=>!0))).catch(e=>{if(Ir(e))return p("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return p("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.We(e)),this.isPrimary=e})}rn(e){return Ai(e).get(Xn.key).next(e=>gr.resolve(this.un(e)))}hn(e){return Ni(e).delete(this.clientId)}async ln(){if(this.isPrimary&&!this.fn(this.Qe,18e5)){this.Qe=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const t=Ar(e,hr.store);return t.Bt().next(e=>{const n=this.dn(e,18e5),r=e.filter(e=>-1===n.indexOf(e));return gr.forEach(r,e=>t.delete(e.clientId)).next(()=>r)})}).catch(()=>[]);if(this.Xe)for(const t of e)this.Xe.removeItem(this.wn(t.clientId))}}nn(){this.je=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ze().then(()=>this.ln()).then(()=>this.nn()))}un(e){return!!e&&e.ownerId===this.clientId}on(e){return this.Le?gr.resolve(!0):Ai(e).get(Xn.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)){if(this.un(t)&&this.networkEnabled)return!0;if(!this.un(t)){if(!t.allowTabSynchronization)throw new T(_.FAILED_PRECONDITION,ki);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ni(e).Bt().next(e=>void 0===this.dn(e,5e3).find(e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&p("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this.Ue=!1,this.mn(),this.je&&(this.je.cancel(),this.je=null),this.gn(),this.yn(),await this.ze.runTransaction("shutdown","readwrite",[Xn.store,hr.store],e=>{const t=new Sr(e,L.I);return this.an(t).next(()=>this.hn(t))}),this.ze.close(),this.pn()}dn(e,t){return e.filter(e=>this.fn(e.updateTimeMs,t)&&!this._n(e.clientId))}Tn(){return this.runTransaction("getActiveClients","readonly",e=>Ni(e).Bt().next(e=>this.dn(e,18e5).map(e=>e.clientId)))}get started(){return this.Ue}getMutationQueue(e){return Zr.Xt(e,this.k,this.Jt,this.referenceDelegate)}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getIndexManager(){return this.Jt}getBundleCache(){return this.Ye}runTransaction(e,t,n){p("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite";let i;return this.ze.runTransaction(e,r,fr,r=>(i=new Sr(r,this.Be?this.Be.next():L.I),"readwrite-primary"===t?this.rn(i).next(e=>!!e||this.on(i)).next(t=>{if(!t)throw m(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)),new T(_.FAILED_PRECONDITION,pr);return n(i)}).next(e=>this.cn(i).next(()=>e)):this.En(i).next(()=>n(i)))).then(e=>(i.raiseOnCommittedEvent(),e))}En(e){return Ai(e).get(Xn.key).next(e=>{if(null!==e&&this.fn(e.leaseTimestampMs,5e3)&&!this._n(e.ownerId)&&!this.un(e)&&!(this.Le||this.allowTabSynchronization&&e.allowTabSynchronization))throw new T(_.FAILED_PRECONDITION,ki)})}cn(e){const t=new Xn(this.clientId,this.allowTabSynchronization,Date.now());return Ai(e).put(Xn.key,t)}static bt(){return vr.bt()}an(e){const t=Ai(e);return t.get(Xn.key).next(e=>this.un(e)?(p("IndexedDbPersistence","Releasing primary lease."),t.delete(Xn.key)):gr.resolve())}fn(e,t){const n=Date.now();return!(e<n-t||e>n&&(m(`Detected an update time that is in the future: ${e} > ${n}`),1))}tn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ze()))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}gn(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}en(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=()=>{this.mn(),Object(o.v)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.qe))}yn(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}_n(e){var t;try{const n=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return p("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return m("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}mn(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(e){m("Failed to set zombie client id.",e)}}pn(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(e){}}wn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ai(e){return Ar(e,Xn.store)}function Ni(e){return Ar(e,hr.store)}function Oi(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Ci{constructor(e,t){this.progress=e,this.In=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,t,n){this.Je=e,this.An=t,this.Jt=n}Rn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next(n=>this.Pn(e,t,n))}Pn(e,t,n){return this.Je.getEntry(e,t).next(e=>{for(const t of n)t.applyToLocalView(e);return e})}bn(e,t){e.forEach((e,n)=>{for(const e of t)e.applyToLocalView(n)})}vn(e,t){return this.Je.getEntries(e,t).next(t=>this.Vn(e,t).next(()=>t))}Vn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>this.bn(t,e))}getDocumentsMatchingQuery(e,t,n){return function(e){return ae.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Sn(e,t.path):Ye(t)?this.Dn(e,t,n):this.Cn(e,t,n)}Sn(e,t){return this.Rn(e,new ae(t)).next(e=>{let t=Xt();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}Dn(e,t,n){const r=t.collectionGroup;let i=Xt();return this.Jt.getCollectionParents(e,r).next(s=>gr.forEach(s,s=>{const o=function(e,t){return new Ke(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.Cn(e,o,n).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}Cn(e,t,n){let r,i;return this.Je.getDocumentsMatchingQuery(e,t,n).next(n=>(r=n,this.An.getAllMutationBatchesAffectingQuery(e,t))).next(t=>(i=t,this.Nn(e,i,r).next(e=>{r=e;for(const e of i)for(const t of e.mutations){const n=t.key;let i=r.get(n);null==i&&(i=Te.newInvalidDocument(n),r=r.insert(n,i)),Nt(t,i,e.localWriteTime),i.isFoundDocument()||(r=r.remove(n))}}))).next(()=>(r.forEach((e,n)=>{it(t,n)||(r=r.remove(e))}),r))}Nn(e,t,n){let r=nn();for(const e of t)for(const t of e.mutations)t instanceof Pt&&null===n.get(t.key)&&(r=r.add(t.key));let i=n;return this.Je.getEntries(e,r).next(e=>(e.forEach((e,t)=>{t.isFoundDocument()&&(i=i.insert(e,t))}),i))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.kn=n,this.xn=r}static $n(e,t){let n=nn(),r=nn();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new Ri(e,t.fromCache,n,r)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{Fn(e){this.On=e}getDocumentsMatchingQuery(e,t,n,r){return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(q.min())?this.Mn(e,t):this.On.vn(e,r).next(i=>{const o=this.Ln(t,i);return(He(t)||$e(t))&&this.Bn(t.limitType,o,r,n)?this.Mn(e,t):(d()<=s.a.DEBUG&&p("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),rt(t)),this.On.getDocumentsMatchingQuery(e,t,n).next(e=>(o.forEach(t=>{e=e.insert(t.key,t)}),e)))})}Ln(e,t){let n=new Ht(st(e));return t.forEach((t,r)=>{it(e,r)&&(n=n.add(r))}),n}Bn(e,t,n,r){if(n.size!==t.size)return!0;const i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Mn(e,t){return d()<=s.a.DEBUG&&p("QueryEngine","Using full collection scan to execute query:",rt(t)),this.On.getDocumentsMatchingQuery(e,t,q.min())}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,t,n,r){this.persistence=e,this.Un=t,this.k=r,this.qn=new Kt(F),this.Kn=new gi(e=>Se(e),Ae),this.jn=q.min(),this.An=e.getMutationQueue(n),this.Qn=e.getRemoteDocumentCache(),this.He=e.getTargetCache(),this.Wn=new Di(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=e.getBundleCache(),this.Un.Fn(this.Wn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qn))}}function xi(e,t,n,r){return new Li(e,t,n,r)}async function Mi(e,t){const n=I(e);let r=n.An,i=n.Wn;const s=await n.persistence.runTransaction("Handle user change","readonly",e=>{let s;return n.An.getAllMutationBatches(e).next(o=>(s=o,r=n.persistence.getMutationQueue(t),i=new Di(n.Qn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(e))).next(t=>{const n=[],r=[];let o=nn();for(const e of s){n.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return i.vn(e,o).next(e=>({Gn:e,removedBatchIds:n,addedBatchIds:r}))})});return n.An=r,n.Wn=i,n.Un.Fn(n.Wn),s}function Fi(e){const t=I(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.He.getLastRemoteSnapshotVersion(e))}function ji(e,t,n,r,i){let s=nn();return n.forEach(e=>s=s.add(e)),t.getEntries(e,s).next(e=>{let s=Jt();return n.forEach((n,o)=>{const a=e.get(n),c=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(q.min())?(t.removeEntry(n,c),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o,c),s=s.insert(n,o)):p("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),s})}function Ui(e,t){const n=I(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.An.getNextMutationBatchAfterBatchId(e,t)))}function Vi(e,t){const n=I(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.He.getTargetData(e,t).next(i=>i?(r=i,gr.resolve(r)):n.He.allocateTargetId(e).next(i=>(r=new Cr(t,i,0,e.currentSequenceNumber),n.He.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.qn.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qn=n.qn.insert(e.targetId,e),n.Kn.set(t,e.targetId)),e})}async function qi(e,t,n){const r=I(e),i=r.qn.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Ir(e))throw e;p("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.qn=r.qn.remove(t),r.Kn.delete(i.target)}function Bi(e,t,n){const r=I(e);let i=q.min(),s=nn();return r.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const r=I(e),i=r.Kn.get(n);return void 0!==i?gr.resolve(r.qn.get(i)):r.He.getTargetData(t,n)}(r,e,Ze(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Un.getDocumentsMatchingQuery(e,t,n?i:q.min(),n?s:nn())).next(e=>({documents:e,zn:s})))}function zi(e,t){const n=I(e),r=I(n.He),i=n.qn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",e=>r.Et(e,t).next(e=>e?e.target:null))}function Ki(e){const t=I(e);return t.persistence.runTransaction("Get new document changes","readonly",e=>function(e,t,n){const r=I(e);let i=Jt(),s=Lr(n);const o=Ii(t),a=IDBKeyRange.lowerBound(s,!0);return o.jt({index:ir.readTimeIndex,range:a},(e,t)=>{const n=Rr(r.k,t);i=i.insert(n.key,n),s=t.readTime}).next(()=>({In:i,readTime:xr(s)}))}(t.Qn,e,t.jn)).then(({In:e,readTime:n})=>(t.jn=n,e))}async function Wi(e,t,n=nn()){const r=await Vi(e,Ze(qr(t.bundledQuery))),i=I(e);return i.persistence.runTransaction("Save named query","readwrite",e=>{const s=In(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Ye.saveNamedQuery(e,t);const o=r.withResumeToken(Y.EMPTY_BYTE_STRING,s);return i.qn=i.qn.insert(o.targetId,o),i.He.updateTargetData(e,o).next(()=>i.He.removeMatchingKeysForTargetId(e,r.targetId)).next(()=>i.He.addMatchingKeys(e,n,r.targetId)).next(()=>i.Ye.saveNamedQuery(e,t))})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e){this.k=e,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(e,t){return gr.resolve(this.Xn.get(t))}saveBundleMetadata(e,t){var n;return this.Xn.set(t.id,{id:(n=t).id,version:n.version,createTime:In(n.createTime)}),gr.resolve()}getNamedQuery(e,t){return gr.resolve(this.Zn.get(t))}saveNamedQuery(e,t){return this.Zn.set(t.name,function(e){return{name:e.name,query:qr(e.bundledQuery),readTime:In(e.readTime)}}(t)),gr.resolve()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(){this.ts=new Ht($i.es),this.ns=new Ht($i.ss)}isEmpty(){return this.ts.isEmpty()}addReference(e,t){const n=new $i(e,t);this.ts=this.ts.add(n),this.ns=this.ns.add(n)}rs(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.os(new $i(e,t))}cs(e,t){e.forEach(e=>this.removeReference(e,t))}us(e){const t=new ae(new G([])),n=new $i(t,e),r=new $i(t,e+1),i=[];return this.ns.forEachInRange([n,r],e=>{this.os(e),i.push(e.key)}),i}hs(){this.ts.forEach(e=>this.os(e))}os(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}ls(e){const t=new ae(new G([])),n=new $i(t,e),r=new $i(t,e+1);let i=nn();return this.ns.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new $i(e,0),n=this.ts.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class $i{constructor(e,t){this.key=e,this.fs=t}static es(e,t){return ae.comparator(e.key,t.key)||F(e.fs,t.fs)}static ss(e,t){return F(e.fs,t.fs)||ae.comparator(e.key,t.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,t){this.Jt=e,this.referenceDelegate=t,this.An=[],this.ds=1,this.ws=new Ht($i.es)}checkEmpty(e){return gr.resolve(0===this.An.length)}addMutationBatch(e,t,n,r){const i=this.ds;this.ds++,this.An.length>0&&this.An[this.An.length-1];const s=new Nr(i,t,n,r);this.An.push(s);for(const t of r)this.ws=this.ws.add(new $i(t.key,i)),this.Jt.addToCollectionParentIndex(e,t.key.path.popLast());return gr.resolve(s)}lookupMutationBatch(e,t){return gr.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.gs(n),i=r<0?0:r;return gr.resolve(this.An.length>i?this.An[i]:null)}getHighestUnacknowledgedBatchId(){return gr.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(e){return gr.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new $i(t,0),r=new $i(t,Number.POSITIVE_INFINITY),i=[];return this.ws.forEachInRange([n,r],e=>{const t=this._s(e.fs);i.push(t)}),gr.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ht(F);return t.forEach(e=>{const t=new $i(e,0),r=new $i(e,Number.POSITIVE_INFINITY);this.ws.forEachInRange([t,r],e=>{n=n.add(e.fs)})}),gr.resolve(this.ys(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;ae.isDocumentKey(i)||(i=i.child(""));const s=new $i(new ae(i),0);let o=new Ht(F);return this.ws.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.fs)),!0)},s),gr.resolve(this.ys(o))}ys(e){const t=[];return e.forEach(e=>{const n=this._s(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){w(0===this.ps(t.batchId,"removed")),this.An.shift();let n=this.ws;return gr.forEach(t.mutations,r=>{const i=new $i(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.ws=n})}ee(e){}containsKey(e,t){const n=new $i(t,0),r=this.ws.firstAfterOrEqual(n);return gr.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.An.length,gr.resolve()}ps(e,t){return this.gs(e)}gs(e){return 0===this.An.length?0:e-this.An[0].batchId}_s(e){const t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,t){this.Jt=e,this.Ts=t,this.docs=new Kt(ae.comparator),this.size=0}addEntry(e,t,n){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Ts(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:o,readTime:n}),this.size+=o-s,this.Jt.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return gr.resolve(n?n.document.clone():Te.newInvalidDocument(t))}getEntries(e,t){let n=Jt();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.clone():Te.newInvalidDocument(e))}),gr.resolve(n)}getDocumentsMatchingQuery(e,t,n){let r=Jt();const i=new ae(t.path.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:e,value:{document:i,readTime:o}}=s.getNext();if(!t.path.isPrefixOf(e.path))break;o.compareTo(n)<=0||it(t,i)&&(r=r.insert(i.key,i.clone()))}return gr.resolve(r)}Es(e,t){return gr.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Yi(this)}getSize(e){return gr.resolve(this.size)}}class Yi extends yi{constructor(e){super(),this.De=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.document.isValidDocument()?t.push(this.De.addEntry(e,r.document,this.getReadTime(n))):this.De.removeEntry(n)}),gr.waitFor(t)}getFromCache(e,t){return this.De.getEntry(e,t)}getAllFromCache(e,t){return this.De.getEntries(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e){this.persistence=e,this.Is=new gi(e=>Se(e),Ae),this.lastRemoteSnapshotVersion=q.min(),this.highestTargetId=0,this.As=0,this.Rs=new Hi,this.targetCount=0,this.Ps=ii.ie()}forEachTarget(e,t){return this.Is.forEach((e,n)=>t(n)),gr.resolve()}getLastRemoteSnapshotVersion(e){return gr.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return gr.resolve(this.As)}allocateTargetId(e){return this.highestTargetId=this.Ps.next(),gr.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.As&&(this.As=t),gr.resolve()}ce(e){this.Is.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ps=new ii(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}addTargetData(e,t){return this.ce(t),this.targetCount+=1,gr.resolve()}updateTargetData(e,t){return this.ce(t),gr.resolve()}removeTargetData(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,gr.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Is.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Is.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),gr.waitFor(i).next(()=>r)}getTargetCount(e){return gr.resolve(this.targetCount)}getTargetData(e,t){const n=this.Is.get(t)||null;return gr.resolve(n)}addMatchingKeys(e,t,n){return this.Rs.rs(t,n),gr.resolve()}removeMatchingKeys(e,t,n){this.Rs.cs(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),gr.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Rs.us(t),gr.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Rs.ls(t);return gr.resolve(n)}containsKey(e,t){return gr.resolve(this.Rs.containsKey(t))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,t){this.bs={},this.Be=new L(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=e(this),this.He=new Xi(this),this.Jt=new Wr,this.Je=function(e,t){return new Ji(e,t)}(this.Jt,e=>this.referenceDelegate.vs(e)),this.k=new Dr(t),this.Ye=new Gi(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(e){let t=this.bs[e.toKey()];return t||(t=new Qi(this.Jt,this.referenceDelegate),this.bs[e.toKey()]=t),t}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(e,t,n){p("MemoryPersistence","Starting transaction:",e);const r=new es(this.Be.next());return this.referenceDelegate.Vs(),n(r).next(e=>this.referenceDelegate.Ss(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ds(e,t){return gr.or(Object.values(this.bs).map(n=>()=>n.containsKey(e,t)))}}class es extends mr{constructor(e){super(),this.currentSequenceNumber=e}}class ts{constructor(e){this.persistence=e,this.Cs=new Hi,this.Ns=null}static ks(e){return new ts(e)}get xs(){if(this.Ns)return this.Ns;throw v()}addReference(e,t,n){return this.Cs.addReference(n,t),this.xs.delete(n.toString()),gr.resolve()}removeReference(e,t,n){return this.Cs.removeReference(n,t),this.xs.add(n.toString()),gr.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),gr.resolve()}removeTarget(e,t){this.Cs.us(t.targetId).forEach(e=>this.xs.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.xs.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Vs(){this.Ns=new Set}Ss(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return gr.forEach(this.xs,n=>{const r=ae.fromPath(n);return this.$s(e,r).next(e=>{e||t.removeEntry(r)})}).next(()=>(this.Ns=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(e=>{e?this.xs.delete(t.toString()):this.xs.add(t.toString())})}vs(e){return 0}$s(e,t){return gr.or([()=>gr.resolve(this.Cs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ds(e,t)])}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(e,t){return`firestore_clients_${e}_${t}`}function rs(e,t,n){let r=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(r+="_"+t.uid),r}function is(e,t){return`firestore_targets_${e}_${t}`}class ss{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Fs(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new T(r.error.code,r.error.message))),s?new ss(e,t,r.state,i):(m("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class os{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Fs(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new T(n.error.code,n.error.message))),i?new os(e,n.state,r):(m("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class as{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Fs(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=sn();for(let e=0;r&&e<n.activeTargetIds.length;++e)r=oe(n.activeTargetIds[e]),i=i.add(n.activeTargetIds[e]);return r?new as(e,i):(m("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class cs{constructor(e,t){this.clientId=e,this.onlineState=t}static Fs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new cs(t.clientId,t.onlineState):(m("SharedClientState","Failed to parse online state: "+e),null)}}class us{constructor(){this.activeTargetIds=sn()}Ms(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ls(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hs{constructor(e,t,n,r,i){this.window=e,this.Oe=t,this.persistenceKey=n,this.Bs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new Kt(F),this.started=!1,this.js=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Qs=ns(this.persistenceKey,this.Bs),this.Ws=function(e){return"firestore_sequence_number_"+e}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.persistenceKey),this.Ks=this.Ks.insert(this.Bs,new us),this.Gs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.zs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Hs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Js=function(e){return"firestore_online_state_"+e}(this.persistenceKey),this.Ys=function(e){return"firestore_bundle_loaded_"+e}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}static bt(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Tn();for(const t of e){if(t===this.Bs)continue;const e=this.getItem(ns(this.persistenceKey,t));if(e){const n=as.Fs(t,e);n&&(this.Ks=this.Ks.insert(n.clientId,n))}}this.Xs();const t=this.storage.getItem(this.Js);if(t){const e=this.Zs(t);e&&this.ti(e)}for(const e of this.js)this.qs(e);this.js=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ei(this.Ks)}isActiveQueryTarget(e){let t=!1;return this.Ks.forEach((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ni(e,"pending")}updateMutationState(e,t,n){this.ni(e,t,n),this.si(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(is(this.persistenceKey,e));if(n){const r=os.Fs(e,n);r&&(t=r.state)}}return this.ii.Ms(e),this.Xs(),t}removeLocalQueryTarget(e){this.ii.Ls(e),this.Xs()}isLocalQueryTarget(e){return this.ii.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(is(this.persistenceKey,e))}updateQueryState(e,t,n){this.ri(e,t,n)}handleUserChange(e,t,n){t.forEach(e=>{this.si(e)}),this.currentUser=e,n.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.oi(e)}notifyBundleLoaded(){this.ai()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return p("SharedClientState","READ",e,t),t}setItem(e,t){p("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){p("SharedClientState","REMOVE",e),this.storage.removeItem(e)}qs(e){const t=e;if(t.storageArea===this.storage){if(p("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Qs)return void m("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable(async()=>{if(this.started){if(null!==t.key)if(this.Gs.test(t.key)){if(null==t.newValue){const e=this.ci(t.key);return this.ui(e,null)}{const e=this.hi(t.key,t.newValue);if(e)return this.ui(e.clientId,e)}}else if(this.zs.test(t.key)){if(null!==t.newValue){const e=this.li(t.key,t.newValue);if(e)return this.fi(e)}}else if(this.Hs.test(t.key)){if(null!==t.newValue){const e=this.di(t.key,t.newValue);if(e)return this.wi(e)}}else if(t.key===this.Js){if(null!==t.newValue){const e=this.Zs(t.newValue);if(e)return this.ti(e)}}else if(t.key===this.Ws){const e=function(e){let t=L.I;if(null!=e)try{const n=JSON.parse(e);w("number"==typeof n),t=n}catch(e){m("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==L.I&&this.sequenceNumberHandler(e)}else if(t.key===this.Ys)return this.syncEngine._i()}else this.js.push(t)})}}get ii(){return this.Ks.get(this.Bs)}Xs(){this.setItem(this.Qs,this.ii.Os())}ni(e,t,n){const r=new ss(this.currentUser,e,t,n),i=rs(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Os())}si(e){const t=rs(this.persistenceKey,this.currentUser,e);this.removeItem(t)}oi(e){const t={clientId:this.Bs,onlineState:e};this.storage.setItem(this.Js,JSON.stringify(t))}ri(e,t,n){const r=is(this.persistenceKey,e),i=new os(e,t,n);this.setItem(r,i.Os())}ai(){this.setItem(this.Ys,"value-not-used")}ci(e){const t=this.Gs.exec(e);return t?t[1]:null}hi(e,t){const n=this.ci(e);return as.Fs(n,t)}li(e,t){const n=this.zs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return ss.Fs(new u(i),r,t)}di(e,t){const n=this.Hs.exec(e),r=Number(n[1]);return os.Fs(r,t)}Zs(e){return cs.Fs(e)}async fi(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.mi(e.batchId,e.state,e.error);p("SharedClientState","Ignoring mutation for non-active user "+e.user.uid)}wi(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}ui(e,t){const n=t?this.Ks.insert(e,t):this.Ks.remove(e),r=this.ei(this.Ks),i=this.ei(n),s=[],o=[];return i.forEach(e=>{r.has(e)||s.push(e)}),r.forEach(e=>{i.has(e)||o.push(e)}),this.syncEngine.yi(s,o).then(()=>{this.Ks=n})}ti(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ei(e){let t=sn();return e.forEach((e,n)=>{t=t.unionWith(n.activeTargetIds)}),t}}class ls{constructor(){this.pi=new us,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.pi.Ms(e),this.Ti[e]||"not-current"}updateQueryState(e,t,n){this.Ti[e]=t}removeLocalQueryTarget(e){this.pi.Ls(e)}isLocalQueryTarget(e){return this.pi.activeTargetIds.has(e)}clearQueryState(e){delete this.Ti[e]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(e){return this.pi.activeTargetIds.has(e)}start(){return this.pi=new us,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{Ei(e){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.Pi(),this.bi=[],this.vi()}Ei(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){p("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Pi(){p("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this.Vi=e.Vi,this.Si=e.Si}Di(e){this.Ci=e}Ni(e){this.ki=e}onMessage(e){this.xi=e}close(){this.Si()}send(e){this.Vi(e)}$i(){this.Ci()}Fi(e){this.ki(e)}Oi(e){this.xi(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.Mi=t+"://"+e.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(e,t,n,r,i){const s=this.Ui(e,t);p("RestConnection","Sending: ",s,n);const o={};return this.qi(o,r,i),this.Ki(e,s,o,n).then(e=>(p("RestConnection","Received: ",e),e),t=>{throw g("RestConnection",e+" failed with error: ",t,"url: ",s,"request:",n),t})}ji(e,t,n,r,i){return this.Bi(e,t,n,r,i)}qi(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+h,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}Ui(e,t){const n=ps[e];return`${this.Mi}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Ki(e,t,n,r){return new Promise((i,s)=>{const o=new a.g;o.listenOnce(a.c.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case a.a.NO_ERROR:const t=o.getResponseJson();p("Connection","XHR received:",JSON.stringify(t)),i(t);break;case a.a.TIMEOUT:p("Connection",'RPC "'+e+'" timed out'),s(new T(_.DEADLINE_EXCEEDED,"Request time out"));break;case a.a.HTTP_ERROR:const n=o.getStatus();if(p("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const e=o.getResponseJson().error;if(e&&e.status&&e.message){const t=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(_).indexOf(t)>=0?t:_.UNKNOWN}(e.status);s(new T(t,e.message))}else s(new T(_.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new T(_.UNAVAILABLE,"Connection failed."));break;default:v()}}finally{p("Connection",'RPC "'+e+'" completed.')}});const c=JSON.stringify(r);o.send(t,"POST",c,n,15)})}Qi(e,t,n){const r=[this.Mi,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Object(a.h)(),s=Object(a.i)(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(c.xmlHttpFactory=new a.d({})),this.qi(c.initMessageHeaders,t,n),Object(o.s)()||Object(o.u)()||Object(o.o)()||Object(o.q)()||Object(o.w)()||Object(o.n)()||(c.httpHeadersOverwriteParam="$httpHeaders");const u=r.join("");p("Connection","Creating WebChannel: "+u,c);const h=i.createWebChannel(u,c);let l=!1,d=!1;const f=new ms({Vi:e=>{d?p("Connection","Not sending because WebChannel is closed:",e):(l||(p("Connection","Opening WebChannel transport."),h.open(),l=!0),p("Connection","WebChannel sending:",e),h.send(e))},Si:()=>h.close()}),m=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return m(h,a.f.EventType.OPEN,()=>{d||p("Connection","WebChannel transport opened.")}),m(h,a.f.EventType.CLOSE,()=>{d||(d=!0,p("Connection","WebChannel transport closed"),f.Fi())}),m(h,a.f.EventType.ERROR,e=>{d||(d=!0,g("Connection","WebChannel transport errored:",e),f.Fi(new T(_.UNAVAILABLE,"The operation could not be completed")))}),m(h,a.f.EventType.MESSAGE,e=>{var t;if(!d){const n=e.data[0];w(!!n);const r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){p("Connection","WebChannel received error:",i);const e=i.status;let t=function(e){const t=Vt[e];if(void 0!==t)return zt(t)}(e),n=i.message;void 0===t&&(t=_.INTERNAL,n="Unknown error status: "+e+" with message "+i.message),d=!0,f.Fi(new T(t,n)),h.close()}else p("Connection","WebChannel received:",n),f.Oi(n)}}),m(s,a.b.STAT_EVENT,e=>{e.stat===a.e.PROXY?p("Connection","Detected buffering proxy"):e.stat===a.e.NOPROXY&&p("Connection","Detected no buffering proxy")}),setTimeout(()=>{f.$i()},0),f}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(){return"undefined"!=typeof window?window:null}function vs(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(e){return new yn(e,!0)}class bs{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Oe=e,this.timerId=t,this.Wi=n,this.Gi=r,this.zi=i,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(e){this.cancel();const t=Math.floor(this.Hi+this.tr()),n=Math.max(0,Date.now()-this.Yi),r=Math.max(0,t-n);r>0&&p("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Hi} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Ji=this.Oe.enqueueAfterDelay(this.timerId,r,()=>(this.Yi=Date.now(),e())),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,t,n,r,i,s,o,a){this.Oe=e,this.nr=n,this.sr=r,this.ir=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new bs(e,t)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}async stop(){this.hr()&&await this.close(0)}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.ar&&(this.ar=this.Oe.enqueueAfterDelay(this.nr,6e4,()=>this.mr()))}gr(e){this.yr(),this.stream.send(e)}async mr(){if(this.lr())return this.close(0)}yr(){this.ar&&(this.ar.cancel(),this.ar=null)}pr(){this.cr&&(this.cr.cancel(),this.cr=null)}async close(e,t){this.yr(),this.pr(),this.ur.cancel(),this.rr++,4!==e?this.ur.reset():t&&t.code===_.RESOURCE_EXHAUSTED?(m(t.toString()),m("Using maximum backoff delay to prevent overloading the backend."),this.ur.Xi()):t&&t.code===_.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Tr(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ni(t)}Tr(){}auth(){this.state=1;const e=this.Er(this.rr),t=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.rr===t&&this.Ir(e,n)},t=>{e(()=>{const e=new T(_.UNKNOWN,"Fetching auth token failed: "+t.message);return this.Ar(e)})})}Ir(e,t){const n=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di(()=>{n(()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.sr,1e4,()=>(this.lr()&&(this.state=3),Promise.resolve())),this.listener.Di()))}),this.stream.Ni(e=>{n(()=>this.Ar(e))}),this.stream.onMessage(e=>{n(()=>this.onMessage(e))})}dr(){this.state=5,this.ur.Zi(async()=>{this.state=0,this.start()})}Ar(e){return p("PersistentStream","close with error: "+e),this.stream=null,this.close(4,e)}Er(e){return t=>{this.Oe.enqueueAndForget(()=>this.rr===e?t():(p("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _s extends Is{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.k=i}Rr(e,t){return this.ir.Qi("Listen",e,t)}onMessage(e){this.ur.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:v()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.C?(w(void 0===t||"string"==typeof t),Y.fromBase64String(t||"")):(w(void 0===t||t instanceof Uint8Array),Y.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?_.UNKNOWN:zt(e.code);return new T(t,e.message||"")}(o);n=new hn(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=kn(e,r.document.name),s=In(r.document.updateTime),o=new Ie({mapValue:{fields:r.document.fields}}),a=Te.newFoundDocument(i,s,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new cn(c,u,a.key,a)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=kn(e,r.document),s=r.readTime?In(r.readTime):q.min(),o=Te.newNoDocument(i,s),a=r.removedTargetIds||[];n=new cn([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=kn(e,r.document),s=r.removedTargetIds||[];n=new cn([],s,i,null)}else{if(!("filter"in t))return v();{t.filter;const e=t.filter;e.targetId;const r=e.count||0,i=new Ut(r),s=e.targetId;n=new un(s,i)}}return n}(this.k,e),n=function(e){if(!("targetChange"in e))return q.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?q.min():t.readTime?In(t.readTime):q.min()}(e);return this.listener.Pr(t,n)}br(e){const t={};t.database=Nn(this.k),t.addTarget=function(e,t){let n;const r=t.target;return n=Ne(r)?{documents:Ln(e,r)}:{query:xn(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=wn(e,t.resumeToken):t.snapshotVersion.compareTo(q.min())>0&&(n.readTime=vn(e,t.snapshotVersion.toTimestamp())),n}(this.k,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return v()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.k,e);n&&(t.labels=n),this.gr(t)}vr(e){const t={};t.database=Nn(this.k),t.removeTarget=e,this.gr(t)}}class Ts extends Is{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.k=i,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(e,t){return this.ir.Qi("Write",e,t)}onMessage(e){if(w(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();const t=function(e,t){return e&&e.length>0?(w(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?In(e.updateTime):In(t);return n.isEqual(q.min())&&(n=In(t)),new Tt(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=In(e.commitTime);return this.listener.Cr(n,t)}return w(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}kr(){const e={};e.database=Nn(this.k),this.gr(e)}Dr(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Rn(this.k,e))};this.gr(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.ir=n,this.k=r,this.$r=!1}Fr(){if(this.$r)throw new T(_.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(e,t,n){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.ir.Bi(e,t,n,r,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===_.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new T(_.UNKNOWN,e.toString())})}ji(e,t,n){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.ir.ji(e,t,n,r,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===_.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new T(_.UNKNOWN,e.toString())})}terminate(){this.$r=!0}}class ks{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Or=0,this.Mr=null,this.Lr=!0}Br(){0===this.Or&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Mr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve())))}Kr(e){"Online"===this.state?this.Ur("Unknown"):(this.Or++,this.Or>=1&&(this.jr(),this.qr("Connection failed 1 times. Most recent error: "+e.toString()),this.Ur("Offline")))}set(e){this.jr(),this.Or=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}Ur(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}qr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(m(t),this.Lr=!1):p("OnlineStateTracker",t)}jr(){null!==this.Mr&&(this.Mr.cancel(),this.Mr=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=i,this.Hr.Ei(e=>{n.enqueueAndForget(async()=>{xs(this)&&(p("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=I(e);t.Gr.add(4),await Ns(t),t.Jr.set("Unknown"),t.Gr.delete(4),await As(t)}(this))})}),this.Jr=new ks(n,r)}}async function As(e){if(xs(e))for(const t of e.zr)await t(!0)}async function Ns(e){for(const t of e.zr)await t(!1)}function Os(e,t){const n=I(e);n.Wr.has(t.targetId)||(n.Wr.set(t.targetId,t),Ls(n)?Ps(n):Xs(n).lr()&&Ds(n,t))}function Cs(e,t){const n=I(e),r=Xs(n);n.Wr.delete(t),r.lr()&&Rs(n,t),0===n.Wr.size&&(r.lr()?r._r():xs(n)&&n.Jr.set("Unknown"))}function Ds(e,t){e.Yr.X(t.targetId),Xs(e).br(t)}function Rs(e,t){e.Yr.X(t),Xs(e).vr(t)}function Ps(e){e.Yr=new dn({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Wr.get(t)||null}),Xs(e).start(),e.Jr.Br()}function Ls(e){return xs(e)&&!Xs(e).hr()&&e.Wr.size>0}function xs(e){return 0===I(e).Gr.size}function Ms(e){e.Yr=void 0}async function Fs(e){e.Wr.forEach((t,n)=>{Ds(e,t)})}async function js(e,t){Ms(e),Ls(e)?(e.Jr.Kr(t),Ps(e)):e.Jr.set("Unknown")}async function Us(e,t,n){if(e.Jr.set("Online"),t instanceof hn&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Wr.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Wr.delete(r),e.Yr.removeTarget(r))}(e,t)}catch(n){p("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Vs(e,n)}else if(t instanceof cn?e.Yr.ot(t):t instanceof un?e.Yr.dt(t):e.Yr.ut(t),!n.isEqual(q.min()))try{const t=await Fi(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Yr.gt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Wr.get(r);i&&e.Wr.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach(t=>{const n=e.Wr.get(t);if(!n)return;e.Wr.set(t,n.withResumeToken(Y.EMPTY_BYTE_STRING,n.snapshotVersion)),Rs(e,t);const r=new Cr(n.target,t,1,n.sequenceNumber);Ds(e,r)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){p("RemoteStore","Failed to raise snapshot:",t),await Vs(e,t)}}async function Vs(e,t,n){if(!Ir(t))throw t;e.Gr.add(1),await Ns(e),e.Jr.set("Offline"),n||(n=()=>Fi(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{p("RemoteStore","Retrying IndexedDB access"),await n(),e.Gr.delete(1),await As(e)})}function qs(e,t){return t().catch(n=>Vs(e,n,t))}async function Bs(e){const t=I(e),n=Zs(t);let r=t.Qr.length>0?t.Qr[t.Qr.length-1].batchId:-1;for(;zs(t);)try{const e=await Ui(t.localStore,r);if(null===e){0===t.Qr.length&&n._r();break}r=e.batchId,Ks(t,e)}catch(e){await Vs(t,e)}Ws(t)&&Gs(t)}function zs(e){return xs(e)&&e.Qr.length<10}function Ks(e,t){e.Qr.push(t);const n=Zs(e);n.lr()&&n.Sr&&n.Dr(t.mutations)}function Ws(e){return xs(e)&&!Zs(e).hr()&&e.Qr.length>0}function Gs(e){Zs(e).start()}async function Hs(e){Zs(e).kr()}async function $s(e){const t=Zs(e);for(const n of e.Qr)t.Dr(n.mutations)}async function Qs(e,t,n){const r=e.Qr.shift(),i=Or.from(r,t,n);await qs(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Bs(e)}async function Js(e,t){t&&Zs(e).Sr&&await async function(e,t){if(Bt(n=t.code)&&n!==_.ABORTED){const n=e.Qr.shift();Zs(e).wr(),await qs(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Bs(e)}var n}(e,t),Ws(e)&&Gs(e)}async function Ys(e,t){const n=I(e);t?(n.Gr.delete(2),await As(n)):t||(n.Gr.add(2),await Ns(n),n.Jr.set("Unknown"))}function Xs(e){return e.Xr||(e.Xr=function(e,t,n){const r=I(e);return r.Fr(),new _s(t,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}(e.datastore,e.asyncQueue,{Di:Fs.bind(null,e),Ni:js.bind(null,e),Pr:Us.bind(null,e)}),e.zr.push(async t=>{t?(e.Xr.wr(),Ls(e)?Ps(e):e.Jr.set("Unknown")):(await e.Xr.stop(),Ms(e))})),e.Xr}function Zs(e){return e.Zr||(e.Zr=function(e,t,n){const r=I(e);return r.Fr(),new Ts(t,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(e.datastore,e.asyncQueue,{Di:Hs.bind(null,e),Ni:Js.bind(null,e),Nr:$s.bind(null,e),Cr:Qs.bind(null,e)}),e.zr.push(async t=>{t?(e.Zr.wr(),await Bs(e)):(await e.Zr.stop(),e.Qr.length>0&&(p("RemoteStore",`Stopping write stream with ${e.Qr.length} pending writes`),e.Qr=[]))})),e.Zr
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class eo{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new E,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new eo(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new T(_.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function to(e,t){if(m("AsyncQueue",`${t}: ${e}`),Ir(e))return new T(_.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this.comparator=e?(t,n)=>e(t,n)||ae.comparator(t.key,n.key):(e,t)=>ae.comparator(e.key,t.key),this.keyedMap=Xt(),this.sortedSet=new Kt(this.comparator)}static emptySet(e){return new no(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof no))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new no;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(){this.eo=new Kt(ae.comparator)}track(e){const t=e.doc.key,n=this.eo.get(t);n?0!==e.type&&3===n.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==n.type?this.eo=this.eo.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.eo=this.eo.remove(t):1===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):v():this.eo=this.eo.insert(t,e)}no(){const e=[];return this.eo.inorderTraversal((t,n)=>{e.push(n)}),e}}class io{constructor(e,t,n,r,i,s,o,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(e,t,n,r){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new io(e,t,no.emptySet(t),i,n,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tt(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(){this.so=void 0,this.listeners=[]}}class oo{constructor(){this.queries=new gi(e=>nt(e),tt),this.onlineState="Unknown",this.io=new Set}}async function ao(e,t){const n=I(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new so),i)try{s.so=await n.onListen(r)}catch(e){const n=to(e,`Initialization of query '${rt(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.ro(n.onlineState),s.so&&t.oo(s.so)&&lo(n)}async function co(e,t){const n=I(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function uo(e,t){const n=I(e);let r=!1;for(const e of t){const t=e.query,i=n.queries.get(t);if(i){for(const t of i.listeners)t.oo(e)&&(r=!0);i.so=e}}r&&lo(n)}function ho(e,t,n){const r=I(e),i=r.queries.get(t);if(i)for(const e of i.listeners)e.onError(n);r.queries.delete(t)}function lo(e){e.io.forEach(e=>{e.next()})}class fo{constructor(e,t,n){this.query=e,this.ao=t,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=n||{}}oo(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new io(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.co?this.ho(e)&&(this.ao.next(e),t=!0):this.lo(e,this.onlineState)&&(this.fo(e),t=!0),this.uo=e,t}onError(e){this.ao.error(e)}ro(e){this.onlineState=e;let t=!1;return this.uo&&!this.co&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}lo(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return!(this.options.wo&&n||e.docs.isEmpty()&&"Offline"!==t)}ho(e){if(e.docChanges.length>0)return!0;const t=this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}fo(e){e=io.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.ao.next(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,t){this.payload=e,this.byteLength=t}_o(){return"metadata"in this.payload}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e){this.k=e}Hn(e){return kn(this.k,e)}Jn(e){return e.metadata.exists?Dn(this.k,e.document,!1):Te.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}Yn(e){return In(e)}}class go{constructor(e,t,n){this.mo=e,this.localStore=t,this.k=n,this.queries=[],this.documents=[],this.progress=yo(e)}yo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}po(e){const t=new Map,n=new mo(this.k);for(const r of e)if(r.metadata.queries){const e=n.Hn(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||nn()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=I(e);let s=nn(),o=Jt(),a=en();for(const e of n){const n=t.Hn(e.metadata.name);e.document&&(s=s.add(n)),o=o.insert(n,t.Jn(e)),a=a.insert(n,t.Yn(e.metadata.readTime))}const c=i.Qn.newChangeBuffer({trackRemovals:!0}),u=await Vi(i,function(e){return Ze(Ge(G.fromString("__bundle__/docs/"+e)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",e=>ji(e,c,o,q.min(),a).next(t=>(c.apply(e),t)).next(t=>i.He.removeMatchingKeysForTargetId(e,u.targetId).next(()=>i.He.addMatchingKeys(e,s,u.targetId)).next(()=>i.Wn.Vn(e,t)).next(()=>t)))}(this.localStore,new mo(this.k),this.documents,this.mo.id),t=this.po(this.documents);for(const e of this.queries)await Wi(this.localStore,e,t.get(e.name));return this.progress.taskState="Success",new Ci(Object.assign({},this.progress),e)}}function yo(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this.key=e}}class wo{constructor(e){this.key=e}}class bo{constructor(e,t){this.query=e,this.To=t,this.Eo=null,this.current=!1,this.Io=nn(),this.mutatedKeys=nn(),this.Ao=st(e),this.Ro=new no(this.Ao)}get Po(){return this.To}bo(e,t){const n=t?t.vo:new ro,r=t?t.Ro:this.Ro;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a=He(this.query)&&r.size===this.query.limit?r.last():null,c=$e(this.query)&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const u=r.get(e),h=it(this.query,t)?t:null,l=!!u&&this.mutatedKeys.has(u.key),d=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let f=!1;u&&h?u.data.isEqual(h.data)?l!==d&&(n.track({type:3,doc:h}),f=!0):this.Vo(u,h)||(n.track({type:2,doc:h}),f=!0,(a&&this.Ao(h,a)>0||c&&this.Ao(h,c)<0)&&(o=!0)):!u&&h?(n.track({type:0,doc:h}),f=!0):u&&!h&&(n.track({type:1,doc:u}),f=!0,(a||c)&&(o=!0)),f&&(h?(s=s.add(h),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),He(this.query)||$e(this.query))for(;s.size>this.query.limit;){const e=He(this.query)?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ro:s,vo:n,Bn:o,mutatedKeys:i}}Vo(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;const i=e.vo.no();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return v()}};return n(e)-n(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e.type,t.type)||this.Ao(e.doc,t.doc)),this.So(n);const s=t?this.Do():[],o=0===this.Io.size&&this.current?1:0,a=o!==this.Eo;return this.Eo=o,0!==i.length||a?{snapshot:new io(this.query,e.Ro,r,i,e.mutatedKeys,0===o,a,!1),Co:s}:{Co:s}}ro(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new ro,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}So(e){e&&(e.addedDocuments.forEach(e=>this.To=this.To.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.To=this.To.delete(e)),this.current=e.current)}Do(){if(!this.current)return[];const e=this.Io;this.Io=nn(),this.Ro.forEach(e=>{this.No(e.key)&&(this.Io=this.Io.add(e.key))});const t=[];return e.forEach(e=>{this.Io.has(e)||t.push(new wo(e))}),this.Io.forEach(n=>{e.has(n)||t.push(new vo(n))}),t}ko(e){this.To=e.zn,this.Io=nn();const t=this.bo(e.documents);return this.applyChanges(t,!0)}xo(){return io.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class Io{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class _o{constructor(e){this.key=e,this.$o=!1}}class To{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Fo={},this.Oo=new gi(e=>nt(e),tt),this.Mo=new Map,this.Lo=new Set,this.Bo=new Kt(ae.comparator),this.Uo=new Map,this.qo=new Hi,this.Ko={},this.jo=new Map,this.Qo=ii.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}async function Eo(e,t){const n=Jo(e);let r,i;const s=n.Oo.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.xo();else{const e=await Vi(n.localStore,Ze(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await ko(n,t,r,"current"===s),n.isPrimaryClient&&Os(n.remoteStore,e)}return i}async function ko(e,t,n,r){e.Go=(t,n,r)=>async function(e,t,n,r){let i=t.view.bo(n);i.Bn&&(i=await Bi(e.localStore,t.query,!1).then(({documents:e})=>t.view.bo(e,i)));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return Mo(e,t.targetId,o.Co),o.snapshot}(e,t,n,r);const i=await Bi(e.localStore,t,!0),s=new bo(t,i.zn),o=s.bo(i.documents),a=an.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),c=s.applyChanges(o,e.isPrimaryClient,a);Mo(e,n,c.Co);const u=new Io(t,n,s);return e.Oo.set(t,u),e.Mo.has(n)?e.Mo.get(n).push(t):e.Mo.set(n,[t]),c.snapshot}async function So(e,t){const n=I(e),r=n.Oo.get(t),i=n.Mo.get(r.targetId);if(i.length>1)return n.Mo.set(r.targetId,i.filter(e=>!tt(e,t))),void n.Oo.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await qi(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Cs(n.remoteStore,r.targetId),Lo(n,r.targetId)}).catch(ui)):(Lo(n,r.targetId),await qi(n.localStore,r.targetId,!0))}async function Ao(e,t){const n=I(e);try{const e=await function(e,t){const n=I(e),r=t.snapshotVersion;let i=n.qn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.qn;const o=[];t.targetChanges.forEach((t,s)=>{const a=i.get(s);if(!a)return;o.push(n.He.removeMatchingKeys(e,t.removedDocuments,s).next(()=>n.He.addMatchingKeys(e,t.addedDocuments,s)));const c=t.resumeToken;if(c.approximateByteSize()>0){const u=a.withResumeToken(c,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(s,u),function(e,t,n){return w(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(a,u,t)&&o.push(n.He.updateTargetData(e,u))}});let a=Jt();if(t.documentUpdates.forEach((r,i)=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(ji(e,s,t.documentUpdates,r,void 0).next(e=>{a=e})),!r.isEqual(q.min())){const t=n.He.getLastRemoteSnapshotVersion(e).next(t=>n.He.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return gr.waitFor(o).next(()=>s.apply(e)).next(()=>n.Wn.Vn(e,a)).next(()=>a)}).then(e=>(n.qn=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Uo.get(t);r&&(w(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.$o=!0:e.modifiedDocuments.size>0?w(r.$o):e.removedDocuments.size>0&&(w(r.$o),r.$o=!1))}),await Uo(n,e,t)}catch(e){await ui(e)}}function No(e,t,n){const r=I(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Oo.forEach((n,r)=>{const i=r.view.ro(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=I(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const e of n.listeners)e.ro(t)&&(r=!0)}),r&&lo(n)}(r.eventManager,t),e.length&&r.Fo.Pr(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Oo(e,t,n){const r=I(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Uo.get(t),s=i&&i.key;if(s){let e=new Kt(ae.comparator);e=e.insert(s,Te.newNoDocument(s,q.min()));const n=nn().add(s),i=new on(q.min(),new Map,new Ht(F),e,n);await Ao(r,i),r.Bo=r.Bo.remove(s),r.Uo.delete(t),jo(r)}else await qi(r.localStore,t,!1).then(()=>Lo(r,t,n)).catch(ui)}async function Co(e,t){const n=I(e),r=t.batch.batchId;try{const e=await function(e,t){const n=I(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=gr.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);w(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))})}),o.next(()=>e.An.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.An.performConsistencyCheck(e)).next(()=>n.Wn.vn(e,r))})}(n.localStore,t);Po(n,r,null),Ro(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Uo(n,e)}catch(e){await ui(e)}}async function Do(e,t,n){const r=I(e);try{const e=await function(e,t){const n=I(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.An.lookupMutationBatch(e,t).next(t=>(w(null!==t),r=t.keys(),n.An.removeMutationBatch(e,t))).next(()=>n.An.performConsistencyCheck(e)).next(()=>n.Wn.vn(e,r))})}(r.localStore,t);Po(r,t,n),Ro(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Uo(r,e)}catch(n){await ui(n)}}function Ro(e,t){(e.jo.get(t)||[]).forEach(e=>{e.resolve()}),e.jo.delete(t)}function Po(e,t,n){const r=I(e);let i=r.Ko[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ko[r.currentUser.toKey()]=i}}function Lo(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Mo.get(t))e.Oo.delete(r),n&&e.Fo.zo(r,n);e.Mo.delete(t),e.isPrimaryClient&&e.qo.us(t).forEach(t=>{e.qo.containsKey(t)||xo(e,t)})}function xo(e,t){e.Lo.delete(t.path.canonicalString());const n=e.Bo.get(t);null!==n&&(Cs(e.remoteStore,n),e.Bo=e.Bo.remove(t),e.Uo.delete(n),jo(e))}function Mo(e,t,n){for(const r of n)r instanceof vo?(e.qo.addReference(r.key,t),Fo(e,r)):r instanceof wo?(p("SyncEngine","Document no longer in limbo: "+r.key),e.qo.removeReference(r.key,t),e.qo.containsKey(r.key)||xo(e,r.key)):v()}function Fo(e,t){const n=t.key,r=n.path.canonicalString();e.Bo.get(n)||e.Lo.has(r)||(p("SyncEngine","New document in limbo: "+n),e.Lo.add(r),jo(e))}function jo(e){for(;e.Lo.size>0&&e.Bo.size<e.maxConcurrentLimboResolutions;){const t=e.Lo.values().next().value;e.Lo.delete(t);const n=new ae(G.fromString(t)),r=e.Qo.next();e.Uo.set(r,new _o(n)),e.Bo=e.Bo.insert(n,r),Os(e.remoteStore,new Cr(Ze(Ge(n.path)),r,2,L.I))}}async function Uo(e,t,n){const r=I(e),i=[],s=[],o=[];r.Oo.isEmpty()||(r.Oo.forEach((e,a)=>{o.push(r.Go(a,t,n).then(e=>{if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),i.push(e);const t=Ri.$n(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.Fo.Pr(i),await async function(e,t){const n=I(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>gr.forEach(t,t=>gr.forEach(t.kn,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>gr.forEach(t.xn,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Ir(e))throw e;p("LocalStore","Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.qn.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.qn=n.qn.insert(t,i)}}}(r.localStore,s))}async function Vo(e,t){const n=I(e);if(!n.currentUser.isEqual(t)){p("SyncEngine","User change. New user:",t.toKey());const e=await Mi(n.localStore,t);n.currentUser=t,function(e,t){e.jo.forEach(e=>{e.forEach(e=>{e.reject(new T(_.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.jo.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Uo(n,e.Gn)}}function qo(e,t){const n=I(e),r=n.Uo.get(t);if(r&&r.$o)return nn().add(r.key);{let e=nn();const r=n.Mo.get(t);if(!r)return e;for(const t of r){const r=n.Oo.get(t);e=e.unionWith(r.view.Po)}return e}}async function Bo(e,t){const n=I(e),r=await Bi(n.localStore,t.query,!0),i=t.view.ko(r);return n.isPrimaryClient&&Mo(n,t.targetId,i.Co),i}async function zo(e){const t=I(e);return Ki(t.localStore).then(e=>Uo(t,e))}async function Ko(e,t,n,r){const i=I(e),s=await function(e,t){const n=I(e),r=I(n.An);return n.persistence.runTransaction("Lookup mutation documents","readonly",e=>r.Zt(e,t).next(t=>t?n.Wn.vn(e,t):gr.resolve(null)))}(i.localStore,t);null!==s?("pending"===n?await Bs(i.remoteStore):"acknowledged"===n||"rejected"===n?(Po(i,t,r||null),Ro(i,t),function(e,t){I(I(e).An).ee(t)}(i.localStore,t)):v(),await Uo(i,s)):p("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Wo(e,t,n){const r=I(e),i=[],s=[];for(const e of t){let t;const n=r.Mo.get(e);if(n&&0!==n.length){t=await Vi(r.localStore,Ze(n[0]));for(const e of n){const t=r.Oo.get(e),n=await Bo(r,t);n.snapshot&&s.push(n.snapshot)}}else{const n=await zi(r.localStore,e);t=await Vi(r.localStore,n),await ko(r,Go(n),e,!1)}i.push(t)}return r.Fo.Pr(s),i}function Go(e){return We(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Ho(e){const t=I(e);return I(I(t.localStore).persistence).Tn()}async function $o(e,t,n,r){const i=I(e);if(i.Wo)p("SyncEngine","Ignoring unexpected query state notification.");else if(i.Mo.has(t))switch(n){case"current":case"not-current":{const e=await Ki(i.localStore),r=on.createSynthesizedRemoteEventForCurrentChange(t,"current"===n);await Uo(i,e,r);break}case"rejected":await qi(i.localStore,t,!0),Lo(i,t,r);break;default:v()}}async function Qo(e,t,n){const r=Jo(e);if(r.Wo){for(const e of t){if(r.Mo.has(e)){p("SyncEngine","Adding an already active target "+e);continue}const t=await zi(r.localStore,e),n=await Vi(r.localStore,t);await ko(r,Go(t),n.targetId,!1),Os(r.remoteStore,n)}for(const e of n)r.Mo.has(e)&&await qi(r.localStore,e,!1).then(()=>{Cs(r.remoteStore,e),Lo(r,e)}).catch(ui)}}function Jo(e){const t=I(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ao.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=qo.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Oo.bind(null,t),t.Fo.Pr=uo.bind(null,t.eventManager),t.Fo.zo=ho.bind(null,t.eventManager),t}function Yo(e){const t=I(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Co.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Do.bind(null,t),t}class Xo{constructor(){this.synchronizeTabs=!1}async initialize(e){this.k=ws(e.databaseInfo.databaseId),this.sharedClientState=this.Jo(e),this.persistence=this.Yo(e),await this.persistence.start(),this.gcScheduler=this.Xo(e),this.localStore=this.Zo(e)}Xo(e){return null}Zo(e){return xi(this.persistence,new Pi,e.initialUser,this.k)}Yo(e){return new Zi(ts.ks,this.k)}Jo(e){return new ls}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Zo extends Xo{constructor(e,t,n){super(),this.ta=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await async function(e){const t=I(e);return t.persistence.runTransaction("Synchronize last document change read time","readonly",e=>function(e){const t=Ii(e);let n=q.min();return t.jt({index:ir.readTimeIndex,reverse:!0},(e,t,r)=>{t.readTime&&(n=xr(t.readTime)),r.done()}).next(()=>n)}(e)).then(e=>{t.jn=e})}(this.localStore),await this.ta.initialize(this,e),await Yo(this.ta.syncEngine),await Bs(this.ta.remoteStore),await this.persistence.sn(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(this.localStore),Promise.resolve()))}Zo(e){return xi(this.persistence,new Pi,e.initialUser,this.k)}Xo(e){const t=this.persistence.referenceDelegate.garbageCollector;return new di(t,e.asyncQueue)}Yo(e){const t=Oi(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Jr.withCacheSize(this.cacheSizeBytes):Jr.DEFAULT;return new Si(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,ys(),vs(),this.k,this.sharedClientState,!!this.forceOwnership)}Jo(e){return new ls}}class ea extends Zo{constructor(e,t){super(e,t,!1),this.ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ta.syncEngine;this.sharedClientState instanceof hs&&(this.sharedClientState.syncEngine={mi:Ko.bind(null,t),gi:$o.bind(null,t),yi:Qo.bind(null,t),Tn:Ho.bind(null,t),_i:zo.bind(null,t)},await this.sharedClientState.start()),await this.persistence.sn(async e=>{await async function(e,t){const n=I(e);if(Jo(n),Yo(n),!0===t&&!0!==n.Wo){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Wo(n,e.toArray());n.Wo=!0,await Ys(n.remoteStore,!0);for(const e of t)Os(n.remoteStore,e)}else if(!1===t&&!1!==n.Wo){const e=[];let t=Promise.resolve();n.Mo.forEach((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then(()=>(Lo(n,i),qi(n.localStore,i,!0))),Cs(n.remoteStore,i)}),await t,await Wo(n,e),function(e){const t=I(e);t.Uo.forEach((e,n)=>{Cs(t.remoteStore,n)}),t.qo.hs(),t.Uo=new Map,t.Bo=new Kt(ae.comparator)}(n),n.Wo=!1,await Ys(n.remoteStore,!1)}}(this.ta.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop())})}Jo(e){const t=ys();if(!hs.bt(t))throw new T(_.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Oi(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new hs(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class ta{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>No(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Vo.bind(null,this.syncEngine),await Ys(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new oo}createDatastore(e){const t=ws(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new gs(r));var r;return function(e,t,n,r){return new Es(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>No(this.syncEngine,e,0),s=fs.bt()?new fs:new ds,new Ss(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new To(e,t,n,r,i,s);return o&&(a.Wo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=I(e);p("RemoteStore","RemoteStore shutting down."),t.Gr.add(5),await Ns(t),t.Hr.shutdown(),t.Jr.set("Unknown")}(this.remoteStore)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(e,t=10240){let n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.reject("unimplemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ea(this.observer.next,e)}error(e){this.observer.error?this.ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}na(){this.muted=!0}ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,t){this.sa=e,this.k=t,this.metadata=new E,this.buffer=new Uint8Array,this.ia=new TextDecoder("utf-8"),this.ra().then(e=>{e&&e._o()?this.metadata.resolve(e.payload.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==e?void 0:e.payload)))},e=>this.metadata.reject(e))}close(){return this.sa.cancel()}async getMetadata(){return this.metadata.promise}async Ho(){return await this.getMetadata(),this.ra()}async ra(){const e=await this.oa();if(null===e)return null;const t=this.ia.decode(e),n=Number(t);isNaN(n)&&this.aa(`length string (${t}) is not valid number`);const r=await this.ca(n);return new po(JSON.parse(r),e.length+n)}ua(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async oa(){for(;this.ua()<0&&!await this.ha(););if(0===this.buffer.length)return null;const e=this.ua();e<0&&this.aa("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async ca(e){for(;this.buffer.length<e;)await this.ha()&&this.aa("Reached the end of bundle when more is expected.");const t=this.ia.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}aa(e){throw this.sa.cancel(),new Error("Invalid bundle format: "+e)}async ha(){const e=await this.sa.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new T(_.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=I(e),r=Nn(n.k)+"/documents",i={documents:t.map(e=>En(n.k,e))},s=await n.ji("BatchGetDocuments",r,i),o=new Map;s.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){w(!!t.found),t.found.name,t.found.updateTime;const n=kn(e,t.found.name),r=In(t.found.updateTime),i=new Ie({mapValue:{fields:t.found.fields}});return Te.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){w(!!t.missing),w(!!t.readTime);const n=kn(e,t.missing),r=In(t.readTime);return Te.newNoDocument(n,r)}(e,t):v()}(n.k,e);o.set(t.key.toString(),t)});const a=[];return t.forEach(e=>{const t=o.get(e.toString());w(!!t),a.push(t)}),a}(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ft(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{const n=ae.fromPath(t);this.mutations.push(new jt(n,this.precondition(n)))}),await async function(e,t){const n=I(e),r=Nn(n.k)+"/documents",i={writes:t.map(e=>Rn(n.k,e))};await n.Bi("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw v();t=q.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new T(_.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Et.updateTime(t):Et.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(q.min()))throw new T(_.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Et.updateTime(t)}return Et.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.la=5,this.ur=new bs(this.asyncQueue,"transaction_retry")}run(){this.la-=1,this.fa()}fa(){this.ur.Zi(async()=>{const e=new sa(this.datastore),t=this.da(e);t&&t.then(t=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(t)}).catch(e=>{this.wa(e)}))}).catch(e=>{this.wa(e)})})}da(e){try{const t=this.updateFunction(e);return!ie(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}wa(e){this.la>0&&this._a(e)?(this.la-=1,this.asyncQueue.enqueueAndForget(()=>(this.fa(),Promise.resolve()))):this.deferred.reject(e)}_a(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Bt(t)}return!1}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=u.UNAUTHENTICATED,this.clientId=M.A(),this.authCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async e=>{p("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,()=>Promise.resolve())}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new T(_.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new E;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=to(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function ca(e,t){e.asyncQueue.verifyOperationInProgress(),p("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Mi(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e.offlineComponents=t}async function ua(e,t){e.asyncQueue.verifyOperationInProgress();const n=await ha(e);p("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener(e=>async function(e,t){const n=I(e);n.asyncQueue.verifyOperationInProgress(),p("RemoteStore","RemoteStore received new credentials");const r=xs(n);n.Gr.add(3),await Ns(n),r&&n.Jr.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Gr.delete(3),await As(n)}(t.remoteStore,e)),e.onlineComponents=t}async function ha(e){return e.offlineComponents||(p("FirestoreClient","Using default OfflineComponentProvider"),await ca(e,new Xo)),e.offlineComponents}async function la(e){return e.onlineComponents||(p("FirestoreClient","Using default OnlineComponentProvider"),await ua(e,new ta)),e.onlineComponents}function da(e){return ha(e).then(e=>e.persistence)}function fa(e){return ha(e).then(e=>e.localStore)}function pa(e){return la(e).then(e=>e.remoteStore)}function ma(e){return la(e).then(e=>e.syncEngine)}async function ga(e){const t=await la(e),n=t.eventManager;return n.onListen=Eo.bind(null,t.syncEngine),n.onUnlisten=So.bind(null,t.syncEngine),n}function ya(e,t,n={}){const r=new E;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new ra({next:s=>{t.enqueueAndForget(()=>co(e,o));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new T(_.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new T(_.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new fo(Ge(n.path),s,{includeMetadataChanges:!0,wo:!0});return ao(e,o)}(await ga(e),e.asyncQueue,t,n,r)),r.promise}function va(e,t,n={}){const r=new E;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new ra({next:n=>{t.enqueueAndForget(()=>co(e,o)),n.fromCache&&"server"===r.source?i.reject(new T(_.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new fo(n,s,{includeMetadataChanges:!0,wo:!0});return ao(e,o)}(await ga(e),e.asyncQueue,t,n,r)),r.promise}function wa(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?(new TextEncoder).encode(e):e,function(e,t){return new ia(e,t)}(function(e,t){if(e instanceof Uint8Array)return na(e,t);if(e instanceof ArrayBuffer)return na(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n,ws(t));e.asyncQueue.enqueueAndForget(async()=>{!function(e,t,n){const r=I(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=I(e),r=In(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",e=>n.Ye.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(r)>=0)}(e.localStore,r))return await t.close(),void n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r));n._updateProgress(yo(r));const i=new go(r,e.localStore,t.k);let s=await t.Ho();for(;s;){const e=await i.yo(s);e&&n._updateProgress(e),s=await t.Ho()}const o=await i.complete();await Uo(e,o.In,void 0),await function(e,t){const n=I(e);return n.persistence.runTransaction("Save bundle","readwrite",e=>n.Ye.saveBundleMetadata(e,t))}(e.localStore,r),n._completeWith(o.progress)}catch(e){g("SyncEngine","Loading bundle failed with "+e),n._failWith(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)(r,t,n).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(await ma(e),i,r)})}class ba{constructor(e,t,n,r,i,s,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class Ia{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ia&&e.projectId===this.projectId&&e.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ta(e,t,n){if(!n)throw new T(_.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Ea(e,t,n,r){if(!0===t&&!0===r)throw new T(_.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function ka(e){if(!ae.isDocumentKey(e))throw new T(_.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Sa(e){if(ae.isDocumentKey(e))throw new T(_.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Aa(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":v()}function Na(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new T(_.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Aa(e);throw new T(_.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Oa(e,t){if(t<=0)throw new T(_.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new T(_.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new T(_.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Ea("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,t,n){this._authCredentials=t,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ca({}),this._settingsFrozen=!1,e instanceof Ia?this._databaseId=e:(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new T(_.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ia(e.options.projectId)}(e))}get app(){if(!this._app)throw new T(_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new T(_.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ca(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new S;switch(e.type){case"gapi":const t=e.client;return w(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new C(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new T(_.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=_a.get(e);t&&(p("ComponentProvider","Removing Datastore"),_a.delete(e),t.terminate())}(this),Promise.resolve()}}function Ra(e,t,n,r={}){var i;const s=(e=Na(e,Da))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&g("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${n}`,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=u.MOCK_USER;else{t=Object(o.f)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new T(_.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new u(s)}e._authCredentials=new A(new k(t,n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pa(this.firestore,e,this._key)}}class La{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new La(this.firestore,e,this._query)}}class xa extends La{constructor(e,t,n){super(e,t,Ge(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pa(this.firestore,null,new ae(e))}withConverter(e){return new xa(this.firestore,e,this._path)}}function Ma(e,t,...n){if(e=Object(o.k)(e),Ta("collection","path",t),e instanceof Da){const r=G.fromString(t,...n);return Sa(r),new xa(e,null,r)}{if(!(e instanceof Pa||e instanceof xa))throw new T(_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(G.fromString(t,...n));return Sa(r),new xa(e.firestore,null,r)}}function Fa(e,t){if(e=Na(e,Da),Ta("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new T(_.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new La(e,null,function(e){return new Ke(G.emptyPath(),e)}(t))}function ja(e,t,...n){if(e=Object(o.k)(e),1===arguments.length&&(t=M.A()),Ta("doc","path",t),e instanceof Da){const r=G.fromString(t,...n);return ka(r),new Pa(e,null,new ae(r))}{if(!(e instanceof Pa||e instanceof xa))throw new T(_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(G.fromString(t,...n));return ka(r),new Pa(e.firestore,e instanceof xa?e.converter:null,new ae(r))}}function Ua(e,t){return e=Object(o.k)(e),t=Object(o.k)(t),(e instanceof Pa||e instanceof xa)&&(t instanceof Pa||t instanceof xa)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Va(e,t){return e=Object(o.k)(e),t=Object(o.k)(t),e instanceof La&&t instanceof La&&e.firestore===t.firestore&&tt(e._query,t._query)&&e.converter===t.converter
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class qa{constructor(){this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new bs(this,"async_queue_retry"),this.Ra=()=>{const e=vs();e&&p("AsyncQueue","Visibility state changed to "+e.visibilityState),this.ur.er()};const e=vs();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ra)}get isShuttingDown(){return this.ya}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pa(),this.ba(e)}enterRestrictedMode(e){if(!this.ya){this.ya=!0,this.Ia=e||!1;const t=vs();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ra)}}enqueue(e){if(this.Pa(),this.ya)return new Promise(()=>{});const t=new E;return this.ba(()=>this.ya&&this.Ia?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ga.push(e),this.va()))}async va(){if(0!==this.ga.length){try{await this.ga[0](),this.ga.shift(),this.ur.reset()}catch(e){if(!Ir(e))throw e;p("AsyncQueue","Operation failed with retryable error: "+e)}this.ga.length>0&&this.ur.Zi(()=>this.va())}}ba(e){const t=this.ma.then(()=>(this.Ea=!0,e().catch(e=>{this.Ta=e,this.Ea=!1;throw m("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)),e}).then(e=>(this.Ea=!1,e))));return this.ma=t,t}enqueueAfterDelay(e,t,n){this.Pa(),this.Aa.indexOf(e)>-1&&(t=0);const r=eo.createAndSchedule(this,e,t,n,e=>this.Va(e));return this.pa.push(r),r}Pa(){this.Ta&&v()}verifyOperationInProgress(){}async Sa(){let e;do{e=this.ma,await e}while(e!==this.ma)}Da(e){for(const t of this.pa)if(t.timerId===e)return!0;return!1}Ca(e){return this.Sa().then(()=>{this.pa.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.pa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Sa()})}Na(e){this.Aa.push(e)}Va(e){const t=this.pa.indexOf(e);this.pa.splice(t,1)}}function Ba(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const e of["next","error","complete"])if(e in n&&"function"==typeof n[e])return!0;return!1}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)}class za{constructor(){this._progressObserver={},this._taskCompletionResolver=new E,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka=-1;class Wa extends Da{constructor(e,t,n){super(e,t,n),this.type="firestore",this._queue=new qa,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Qa(this),this._firestoreClient.terminate()}}function Ga(e,t){const n=Object(r._getProvider)(e,"firestore");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if(Object(o.h)(r,t))return e;throw new T(_.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==t.cacheSizeBytes&&-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new T(_.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:t})}function Ha(e=Object(r.getApp)()){return Object(r._getProvider)(e,"firestore").getImmediate()}function $a(e){return e._firestoreClient||Qa(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Qa(e){var t;const n=e._freezeSettings(),r=function(e,t,n,r){return new ba(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new aa(e._authCredentials,e._appCheckCredentials,e._queue,r)}function Ja(e,t){oc(e=Na(e,Wa));const n=$a(e),r=e._freezeSettings(),i=new ta;return Xa(n,i,new Zo(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}function Ya(e){oc(e=Na(e,Wa));const t=$a(e),n=e._freezeSettings(),r=new ta;return Xa(t,r,new ea(r,n.cacheSizeBytes))}function Xa(e,t,n){const r=new E;return e.asyncQueue.enqueue(async()=>{try{await ca(e,n),await ua(e,t),r.resolve()}catch(e){if(!function(e){return"FirebaseError"===e.name?e.code===_.FAILED_PRECONDITION||e.code===_.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(e))throw e;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.reject(e)}}).then(()=>r.promise)}function Za(e){if(e._initialized&&!e._terminated)throw new T(_.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new E;return e._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(e){if(!vr.bt())return Promise.resolve();const t=e+"main";await vr.delete(t)}(Oi(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}}),t.promise}function ec(e){return function(e){const t=new E;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t){const n=I(e);xs(n.remoteStore)||p("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=I(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.An.getHighestUnacknowledgedBatchId(e))}(n.localStore);if(-1===e)return void t.resolve();const r=n.jo.get(e)||[];r.push(t),n.jo.set(e,r)}catch(e){const n=to(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await ma(e),t)),t.promise}($a(e=Na(e,Wa)))}function tc(e){return function(e){return e.asyncQueue.enqueue(async()=>{const t=await da(e),n=await pa(e);return t.setNetworkEnabled(!0),function(e){const t=I(e);return t.Gr.delete(0),As(t)}(n)})}($a(e=Na(e,Wa)))}function nc(e){return function(e){return e.asyncQueue.enqueue(async()=>{const t=await da(e),n=await pa(e);return t.setNetworkEnabled(!1),async function(e){const t=I(e);t.Gr.add(0),await Ns(t),t.Jr.set("Offline")}(n)})}($a(e=Na(e,Wa)))}function rc(e){return Object(r._removeServiceInstance)(e.app,"firestore"),e._delete()}function ic(e,t){const n=$a(e=Na(e,Wa)),r=new za;return wa(n,e._databaseId,t,r),r}function sc(e,t){return function(e,t){return e.asyncQueue.enqueue(async()=>function(e,t){const n=I(e);return n.persistence.runTransaction("Get named query","readonly",e=>n.Ye.getNamedQuery(e,t))}(await fa(e),t))}($a(e=Na(e,Wa)),t).then(t=>t?new La(e,null,t.query):null)}function oc(e){if(e._initialized||e._terminated)throw new T(_.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new T(_.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function cc(){return new ac("__name__")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new uc(Y.fromBase64String(e))}catch(e){throw new T(_.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new uc(Y.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e){this._methodName=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new T(_.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new T(_.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return F(this._lat,e._lat)||F(this._long,e._long)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=/^__.*__$/;class fc{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Pt(e,this.data,this.fieldMask,t,this.fieldTransforms):new Rt(e,this.data,t,this.fieldTransforms)}}class pc{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Pt(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function mc(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw v()}}class gc{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.k=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ka(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get xa(){return this.settings.xa}$a(e){return new gc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Fa(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.$a({path:n,Oa:!1});return r.Ma(e),r}La(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.$a({path:n,Oa:!1});return r.ka(),r}Ba(e){return this.$a({path:void 0,Oa:!0})}Ua(e){return Mc(e,this.settings.methodName,this.settings.qa||!1,this.path,this.settings.Ka)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ka(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ma(this.path.get(e))}Ma(e){if(0===e.length)throw this.Ua("Document fields must not be empty");if(mc(this.xa)&&dc.test(e))throw this.Ua('Document fields cannot begin and end with "__"')}}class yc{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.k=n||ws(e)}ja(e,t,n,r=!1){return new gc({xa:e,methodName:t,Ka:n,path:$.emptyPath(),Oa:!1,qa:r},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function vc(e){const t=e._freezeSettings(),n=ws(e._databaseId);return new yc(e._databaseId,!!t.ignoreUndefinedProperties,n)}function wc(e,t,n,r,i,s={}){const o=e.ja(s.merge||s.mergeFields?2:0,t,n,i);Rc("Data must be an object, but it was:",o,r);const a=Cc(r,o);let c,u;if(s.merge)c=new Q(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Pc(t,r,n);if(!o.contains(i))throw new T(_.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Fc(e,i)||e.push(i)}c=new Q(e),u=o.fieldTransforms.filter(e=>c.covers(e.field))}else c=null,u=o.fieldTransforms;return new fc(new Ie(a),c,u)}class bc extends hc{_toFieldTransform(e){if(2!==e.xa)throw 1===e.xa?e.Ua(this._methodName+"() can only appear at the top level of your update data"):e.Ua(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bc}}function Ic(e,t,n){return new gc({xa:3,Ka:t.settings.Ka,methodName:e._methodName,Oa:n},t.databaseId,t.k,t.ignoreUndefinedProperties)}class _c extends hc{_toFieldTransform(e){return new _t(e.path,new pt)}isEqual(e){return e instanceof _c}}class Tc extends hc{constructor(e,t){super(e),this.Qa=t}_toFieldTransform(e){const t=Ic(this,e,!0),n=this.Qa.map(e=>Oc(e,t)),r=new mt(n);return new _t(e.path,r)}isEqual(e){return this===e}}class Ec extends hc{constructor(e,t){super(e),this.Qa=t}_toFieldTransform(e){const t=Ic(this,e,!0),n=this.Qa.map(e=>Oc(e,t)),r=new yt(n);return new _t(e.path,r)}isEqual(e){return this===e}}class kc extends hc{constructor(e,t){super(e),this.Wa=t}_toFieldTransform(e){const t=new wt(e.k,ut(e.k,this.Wa));return new _t(e.path,t)}isEqual(e){return this===e}}function Sc(e,t,n,r){const i=e.ja(1,t,n);Rc("Data must be an object, but it was:",i,r);const s=[],a=Ie.empty();z(r,(e,r)=>{const c=xc(t,e,n);r=Object(o.k)(r);const u=i.La(c);if(r instanceof bc)s.push(c);else{const e=Oc(r,u);null!=e&&(s.push(c),a.set(c,e))}});const c=new Q(s);return new pc(a,c,i.fieldTransforms)}function Ac(e,t,n,r,i,s){const a=e.ja(1,t,n),c=[Pc(t,r,n)],u=[i];if(s.length%2!=0)throw new T(_.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<s.length;e+=2)c.push(Pc(t,s[e])),u.push(s[e+1]);const h=[],l=Ie.empty();for(let e=c.length-1;e>=0;--e)if(!Fc(h,c[e])){const t=c[e];let n=u[e];n=Object(o.k)(n);const r=a.La(t);if(n instanceof bc)h.push(t);else{const e=Oc(n,r);null!=e&&(h.push(t),l.set(t,e))}}const d=new Q(h);return new pc(l,d,a.fieldTransforms)}function Nc(e,t,n,r=!1){return Oc(n,e.ja(r?4:3,t))}function Oc(e,t){if(Dc(e=Object(o.k)(e)))return Rc("Unsupported field value:",t,e),Cc(e,t);if(e instanceof hc)return function(e,t){if(!mc(t.xa))throw t.Ua(e._methodName+"() can only be used with update() and set()");if(!t.path)throw t.Ua(e._methodName+"() is not currently supported inside arrays");const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Oa&&4!==t.xa)throw t.Ua("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Oc(i,t.Ba(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Object(o.k)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ut(t.k,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=V.fromDate(e);return{timestampValue:vn(t.k,n)}}if(e instanceof V){const n=new V(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:vn(t.k,n)}}if(e instanceof lc)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof uc)return{bytesValue:wn(t.k,e._byteString)};if(e instanceof Pa){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Ua(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:_n(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Ua("Unsupported field value: "+Aa(e))}(e,t)}function Cc(e,t){const n={};return K(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):z(e,(e,r)=>{const i=Oc(r,t.Fa(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Dc(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof V||e instanceof lc||e instanceof uc||e instanceof Pa||e instanceof hc)}function Rc(e,t,n){if(!Dc(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Aa(n);throw"an object"===r?t.Ua(e+" a custom object"):t.Ua(e+" "+r)}}function Pc(e,t,n){if((t=Object(o.k)(t))instanceof ac)return t._internalPath;if("string"==typeof t)return xc(e,t);throw Mc("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}const Lc=new RegExp("[~\\*/\\[\\]]");function xc(e,t,n){if(t.search(Lc)>=0)throw Mc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ac(...t.split("."))._internalPath}catch(r){throw Mc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Mc(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=" in field "+r),o&&(c+=" in document "+i),c+=")"),new T(_.INVALID_ARGUMENT,a+e+c)}function Fc(e,t){return e.some(e=>e.isEqual(t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Pa(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Uc(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Vc("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Uc extends jc{data(){return super.data()}}function Vc(e,t){return"string"==typeof t?xc(e,t):t instanceof ac?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bc extends jc{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new zc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Vc("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class zc extends Bc{data(e={}){return super.data(e)}}class Kc{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new qc(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new zc(this._firestore,this._userDataWriter,n.key,n,new qc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new T(_.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>({type:"added",doc:new zc(e._firestore,e._userDataWriter,n.doc.key,n.doc,new qc(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:t++}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new zc(e._firestore,e._userDataWriter,t.doc.key,t.doc,new qc(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Wc(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Wc(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return v()}}function Gc(e,t){return e instanceof Bc&&t instanceof Bc?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Kc&&t instanceof Kc&&e._firestore===t._firestore&&Va(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(e){if($e(e)&&0===e.explicitOrderBy.length)throw new T(_.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $c{}function Qc(e,...t){for(const n of t)e=n._apply(e);return e}class Jc extends $c{constructor(e,t,n){super(),this.Ga=e,this.za=t,this.Ha=n,this.type="where"}_apply(e){const t=vc(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new T(_.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on FieldPath.documentId().`);if("in"===s||"not-in"===s){lu(o,s);const t=[];for(const n of o)t.push(hu(r,e,n));a={arrayValue:{values:t}}}else a=hu(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||lu(o,s),a=Nc(n,"where",o,"in"===s||"not-in"===s);const c=Oe.create(i,s,a);return function(e,t){if(t.V()){const n=Je(e);if(null!==n&&!n.isEqual(t.field))throw new T(_.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${t.field.toString()}'`);const r=Qe(e);null!==r&&du(e,t.field,r)}const n=function(e,t){for(const n of e.filters)if(t.indexOf(n.op)>=0)return n.op;return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new T(_.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new T(_.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}(e,c),c}(e._query,0,t,e.firestore._databaseId,this.Ga,this.za,this.Ha);return new La(e.firestore,e.converter,function(e,t){const n=e.filters.concat([t]);return new Ke(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}function Yc(e,t,n){const r=t,i=Vc("where",e);return new Jc(i,r,n)}class Xc extends $c{constructor(e,t){super(),this.Ga=e,this.Ja=t,this.type="orderBy"}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new T(_.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new T(_.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new Ve(t,n);return function(e,t){if(null===Qe(e)){const n=Je(e);null!==n&&du(e,n,t.field)}}(e,r),r}(e._query,this.Ga,this.Ja);return new La(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Ke(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Zc(e,t="asc"){const n=t,r=Vc("orderBy",e);return new Xc(r,n)}class eu extends $c{constructor(e,t,n){super(),this.type=e,this.Ya=t,this.Xa=n}_apply(e){return new La(e.firestore,e.converter,et(e._query,this.Ya,this.Xa))}}function tu(e){return Oa("limit",e),new eu("limit",e,"F")}function nu(e){return Oa("limitToLast",e),new eu("limitToLast",e,"L")}class ru extends $c{constructor(e,t,n){super(),this.type=e,this.Za=t,this.tc=n}_apply(e){const t=uu(e,this.type,this.Za,this.tc);return new La(e.firestore,e.converter,function(e,t){return new Ke(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}function iu(...e){return new ru("startAt",e,!0)}function su(...e){return new ru("startAfter",e,!1)}class ou extends $c{constructor(e,t,n){super(),this.type=e,this.Za=t,this.tc=n}_apply(e){const t=uu(e,this.type,this.Za,this.tc);return new La(e.firestore,e.converter,function(e,t){return new Ke(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function au(...e){return new ou("endBefore",e,!0)}function cu(...e){return new ou("endAt",e,!1)}function uu(e,t,n,r){if(n[0]=Object(o.k)(n[0]),n[0]instanceof jc)return function(e,t,n,r,i){if(!r)throw new T(_.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const n of Xe(e))if(n.field.isKeyField())s.push(pe(t,r.key));else{const e=r.data.field(n.field);if(ne(e))throw new T(_.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+n.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=n.field.canonicalString();throw new T(_.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}s.push(e)}return new je(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=vc(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new T(_.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let s=0;s<i.length;s++){const c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new T(_.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof c}`);if(!Ye(e)&&-1!==c.indexOf("/"))throw new T(_.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${r}() must be a plain document ID, but '${c}' contains a slash.`);const n=e.path.child(G.fromString(c));if(!ae.isDocumentKey(n))throw new T(_.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new ae(n);a.push(pe(t,i))}else{const e=Nc(n,r,c);a.push(e)}}return new je(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function hu(e,t,n){if("string"==typeof(n=Object(o.k)(n))){if(""===n)throw new T(_.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ye(t)&&-1!==n.indexOf("/"))throw new T(_.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(G.fromString(n));if(!ae.isDocumentKey(r))throw new T(_.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return pe(e,new ae(r))}if(n instanceof Pa)return pe(e,n._key);throw new T(_.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${Aa(n)}.`)}function lu(e,t){if(!Array.isArray(e)||0===e.length)throw new T(_.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(e.length>10)throw new T(_.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function du(e,t,n){if(!n.isEqual(t))throw new T(_.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{convertValue(e,t="none"){switch(ce(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ee(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(te(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw v()}}convertObject(e,t){const n={};return z(e.fields,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new lc(ee(e.latitude),ee(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=function e(t){const n=t.mapValue.fields.__previous_value__;return ne(n)?e(n):n}(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(re(e));default:return null}}convertTimestamp(e){const t=Z(e);return new V(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=G.fromString(e);w(Gn(n));const r=new Ia(n.get(1),n.get(3)),i=new ae(n.popFirst(5));return r.isEqual(t)||m(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class mu extends fu{constructor(e){super(),this.firestore=e}convertBytes(e){return new uc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pa(this.firestore,null,t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=vc(e)}set(e,t,n){this._verifyNotCommitted();const r=yu(e,this._firestore),i=pu(r.converter,t,n),s=wc(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Et.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const i=yu(e,this._firestore);let s;return s="string"==typeof(t=Object(o.k)(t))||t instanceof ac?Ac(this._dataReader,"WriteBatch.update",i._key,t,n,r):Sc(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(s.toMutation(i._key,Et.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=yu(e,this._firestore);return this._mutations=this._mutations.concat(new Ft(t._key,Et.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new T(_.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function yu(e,t){if((e=Object(o.k)(e)).firestore!==t)throw new T(_.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(e){e=Na(e,Pa);const t=Na(e.firestore,Wa);return ya($a(t),e._key).then(n=>Ru(t,e,n))}class wu extends fu{constructor(e){super(),this.firestore=e}convertBytes(e){return new uc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pa(this.firestore,null,t)}}function bu(e){e=Na(e,Pa);const t=Na(e.firestore,Wa),n=$a(t),r=new wu(t);return function(e,t){const n=new E;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){try{const r=await function(e,t){const n=I(e);return n.persistence.runTransaction("read document","readonly",e=>n.Wn.Rn(e,t))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new T(_.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=to(e,`Failed to get document '${t} from cache`);n.reject(r)}}(await fa(e),t,n)),n.promise}(n,e._key).then(n=>new Bc(t,r,e._key,n,new qc(null!==n&&n.hasLocalMutations,!0),e.converter))}function Iu(e){e=Na(e,Pa);const t=Na(e.firestore,Wa);return ya($a(t),e._key,{source:"server"}).then(n=>Ru(t,e,n))}function _u(e){e=Na(e,La);const t=Na(e.firestore,Wa),n=$a(t),r=new wu(t);return Hc(e._query),va(n,e._query).then(n=>new Kc(t,r,e,n))}function Tu(e){e=Na(e,La);const t=Na(e.firestore,Wa),n=$a(t),r=new wu(t);return function(e,t){const n=new E;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){try{const r=await Bi(e,t,!0),i=new bo(t,r.zn),s=i.bo(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=to(e,`Failed to execute query '${t} against cache`);n.reject(r)}}(await fa(e),t,n)),n.promise}(n,e._query).then(n=>new Kc(t,r,e,n))}function Eu(e){e=Na(e,La);const t=Na(e.firestore,Wa),n=$a(t),r=new wu(t);return va(n,e._query,{source:"server"}).then(n=>new Kc(t,r,e,n))}function ku(e,t,n){e=Na(e,Pa);const r=Na(e.firestore,Wa),i=pu(e.converter,t,n);return Du(r,[wc(vc(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Et.none())])}function Su(e,t,n,...r){e=Na(e,Pa);const i=Na(e.firestore,Wa),s=vc(i);let a;return a="string"==typeof(t=Object(o.k)(t))||t instanceof ac?Ac(s,"updateDoc",e._key,t,n,r):Sc(s,"updateDoc",e._key,t),Du(i,[a.toMutation(e._key,Et.exists(!0))])}function Au(e){return Du(Na(e.firestore,Wa),[new Ft(e._key,Et.none())])}function Nu(e,t){const n=Na(e.firestore,Wa),r=ja(e),i=pu(e.converter,t);return Du(n,[wc(vc(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Et.exists(!1))]).then(()=>r)}function Ou(e,...t){var n,r,i;e=Object(o.k)(e);let s={includeMetadataChanges:!1},a=0;"object"!=typeof t[a]||Ba(t[a])||(s=t[a],a++);const c={includeMetadataChanges:s.includeMetadataChanges};if(Ba(t[a])){const e=t[a];t[a]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[a+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[a+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let u,h,l;if(e instanceof Pa)h=Na(e.firestore,Wa),l=Ge(e._key.path),u={next:n=>{t[a]&&t[a](Ru(h,e,n))},error:t[a+1],complete:t[a+2]};else{const n=Na(e,La);h=Na(n.firestore,Wa),l=n._query;const r=new wu(h);u={next:e=>{t[a]&&t[a](new Kc(h,r,n,e))},error:t[a+1],complete:t[a+2]},Hc(e._query)}return function(e,t,n,r){const i=new ra(r),s=new fo(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>ao(await ga(e),s)),()=>{i.na(),e.asyncQueue.enqueueAndForget(async()=>co(await ga(e),s))}}($a(h),l,c,u)}function Cu(e,t){return function(e,t){const n=new ra(t);return e.asyncQueue.enqueueAndForget(async()=>function(e,t){I(e).io.add(t),t.next()}(await ga(e),n)),()=>{n.na(),e.asyncQueue.enqueueAndForget(async()=>function(e,t){I(e).io.delete(t)}(await ga(e),n))}}($a(e=Na(e,Wa)),Ba(t)?t:{next:t})}function Du(e,t){return function(e,t){const n=new E;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Yo(e);try{const e=await function(e,t){const n=I(e),r=V.now(),i=t.reduce((e,t)=>e.add(t.key),nn());let s;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>n.Wn.vn(e,i).next(i=>{s=i;const o=[];for(const e of t){const t=Ot(e,s.get(e.key));null!=t&&o.push(new Pt(e.key,t,_e(t.value.mapValue),Et.exists(!0)))}return n.An.addMutationBatch(e,r,o,t)})).then(e=>(e.applyToLocalDocumentSet(s),{batchId:e.batchId,changes:s}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ko[e.currentUser.toKey()];r||(r=new Kt(F)),r=r.insert(t,n),e.Ko[e.currentUser.toKey()]=r}(r,e.batchId,n),await Uo(r,e.changes),await Bs(r.remoteStore)}catch(e){const t=to(e,"Failed to persist write");n.reject(t)}}(await ma(e),t,n)),n.promise}($a(e),t)}function Ru(e,t,n){const r=n.docs.get(t._key),i=new wu(e);return new Bc(e,i,t._key,r,new qc(n.hasPendingWrites,n.fromCache),t.converter)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=vc(e)}get(e){const t=yu(e,this._firestore),n=new mu(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return v();const r=e[0];if(r.isFoundDocument())return new jc(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new jc(this._firestore,n,t._key,null,t.converter);throw v()})}set(e,t,n){const r=yu(e,this._firestore),i=pu(r.converter,t,n),s=wc(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n,...r){const i=yu(e,this._firestore);let s;return s="string"==typeof(t=Object(o.k)(t))||t instanceof ac?Ac(this._dataReader,"Transaction.update",i._key,t,n,r):Sc(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,s),this}delete(e){const t=yu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=yu(e,this._firestore),n=new wu(this._firestore);return super.get(e).then(e=>new Bc(this._firestore,n,t._key,e._document,new qc(!1,!1),t.converter))}}function Lu(e,t){return function(e,t){const n=new E;return e.asyncQueue.enqueueAndForget(async()=>{const r=await function(e){return la(e).then(e=>e.datastore)}(e);new oa(e.asyncQueue,r,t,n).run()}),n.promise}($a(e=Na(e,Wa)),n=>t(new Pu(e,n)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(){return new bc("deleteField")}function Mu(){return new _c("serverTimestamp")}function Fu(...e){return new Tc("arrayUnion",e)}function ju(...e){return new Ec("arrayRemove",e)}function Uu(e){return new kc("increment",e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(e){return $a(e=Na(e,Wa)),new gu(e,t=>Du(e,t))}!function(e,t=!0){!function(e){h=e}(r.SDK_VERSION),Object(r._registerComponent)(new i.a("firestore",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=new Wa(r,new N(e.getProvider("auth-internal")),new R(e.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:t},n),i._setSettings(n),i},"PUBLIC")),Object(r.registerVersion)(c,"3.4.1",e),Object(r.registerVersion)(c,"3.4.1","esm2017")}()}).call(this,n(18))},function(e,t,n){"use strict";n.r(t),n.d(t,"SDK_VERSION",(function(){return _})),n.d(t,"_DEFAULT_ENTRY_NAME",(function(){return u})),n.d(t,"_addComponent",(function(){return f})),n.d(t,"_addOrOverwriteComponent",(function(){return p})),n.d(t,"_apps",(function(){return l})),n.d(t,"_clearComponents",(function(){return v})),n.d(t,"_components",(function(){return d})),n.d(t,"_getProvider",(function(){return g})),n.d(t,"_registerComponent",(function(){return m})),n.d(t,"_removeServiceInstance",(function(){return y})),n.d(t,"deleteApp",(function(){return S})),n.d(t,"getApp",(function(){return E})),n.d(t,"getApps",(function(){return k})),n.d(t,"initializeApp",(function(){return T})),n.d(t,"onLog",(function(){return N})),n.d(t,"registerVersion",(function(){return A})),n.d(t,"setLogLevel",(function(){return O}));var r=n(5),i=n(4),s=n(0);n.d(t,"FirebaseError",(function(){return s.c}));
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class o{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const a="@firebase/app",c=new i.b("@firebase/app"),u="[DEFAULT]",h={[a]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},l=new Map,d=new Map;function f(e,t){try{e.container.addComponent(t)}catch(n){c.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function p(e,t){e.container.addOrOverwriteComponent(t)}function m(e){const t=e.name;if(d.has(t))return c.debug(`There were multiple attempts to register component ${t}.`),!1;d.set(t,e);for(const t of l.values())f(t,e);return!0}function g(e,t){return e.container.getProvider(t)}function y(e,t,n=u){g(e,t).clearInstance(n)}function v(){d.clear()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."},b=new s.b("app","Firebase",w);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class I{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.a("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw b.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _="9.6.1";function T(e,t={}){if("object"!=typeof t){t={name:t}}const n=Object.assign({name:u,automaticDataCollectionEnabled:!1},t),i=n.name;if("string"!=typeof i||!i)throw b.create("bad-app-name",{appName:String(i)});const o=l.get(i);if(o){if(Object(s.h)(e,o.options)&&Object(s.h)(n,o.config))return o;throw b.create("duplicate-app",{appName:i})}const a=new r.b(i);for(const e of d.values())a.addComponent(e);const c=new I(e,n,a);return l.set(i,c),c}function E(e=u){const t=l.get(e);if(!t)throw b.create("no-app",{appName:e});return t}function k(){return Array.from(l.values())}async function S(e){const t=e.name;l.has(t)&&(l.delete(t),await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function A(e,t,n){var i;let s=null!==(i=h[e])&&void 0!==i?i:e;n&&(s+="-"+n);const o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${s}" with version "${t}":`];return o&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void c.warn(e.join(" "))}m(new r.a(s+"-version",()=>({library:s,version:t}),"VERSION"))}function N(e,t){if(null!==e&&"function"!=typeof e)throw b.create("invalid-log-argument");Object(i.d)(e,t)}function O(e){Object(i.c)(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var C;C="",m(new r.a("platform-logger",e=>new o(e),"PRIVATE")),A(a,"0.7.11",C),A(a,"0.7.11","esm2017"),A("fire-js","")},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return l}));
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const r=[];var i;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));const s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},o=i.INFO,a={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},c=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=a[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class u{constructor(e){this.name=e,this._logLevel=o,this._logHandler=c,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...e),this._logHandler(this,i.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...e),this._logHandler(this,i.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,i.INFO,...e),this._logHandler(this,i.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,i.WARN,...e),this._logHandler(this,i.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,i.ERROR,...e),this._logHandler(this,i.ERROR,...e)}}function h(e){r.forEach(t=>{t.setLogLevel(e)})}function l(e,t){for(const n of r){let r=null;t&&t.level&&(r=s[t.level]),n.userLogHandler=null===e?null:(t,n,...s)=>{const o=s.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}}).filter(e=>e).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:i[n].toLowerCase(),message:o,args:s,type:t.name})}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n(0);class i{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class s{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.a;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(e)&&t.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,"[DEFAULT]"===r?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var r;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:"[DEFAULT]":e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class o{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new s(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return sr})),n.d(t,"b",(function(){return ar})),n.d(t,"c",(function(){return or})),n.d(t,"d",(function(){return ur})),n.d(t,"e",(function(){return cr})),n.d(t,"f",(function(){return hr})),n.d(t,"g",(function(){return lr})),n.d(t,"h",(function(){return rr})),n.d(t,"i",(function(){return ir}));var r,i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},s={},o=o||{},a=i||self;function c(){}function u(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function h(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var l="closure_uid_"+(1e9*Math.random()>>>0),d=0;function f(e,t,n){return e.call.apply(e.bind,arguments)}function p(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function m(e,t,n){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?f:p).apply(null,arguments)}function g(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function y(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function v(){this.s=this.s,this.o=this.o}var w={};v.prototype.s=!1,v.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,l)&&e[l]||(e[l]=++d)}(this);delete w[e]}},v.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const b=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},I=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){const r=e.length,i="string"==typeof e?e.split(""):e;for(let s=0;s<r;s++)s in i&&t.call(n,i[s],s,e)};function _(e){return Array.prototype.concat.apply([],arguments)}function T(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function E(e){return/^[\s\xa0]*$/.test(e)}var k,S=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function A(e,t){return-1!=e.indexOf(t)}function N(e,t){return e<t?-1:e>t?1:0}e:{var O=a.navigator;if(O){var C=O.userAgent;if(C){k=C;break e}}k=""}function D(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function R(e){const t={};for(const n in e)t[n]=e[n];return t}var P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<P.length;t++)n=P[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function x(e){return x[" "](e),e}x[" "]=c;var M,F,j=A(k,"Opera"),U=A(k,"Trident")||A(k,"MSIE"),V=A(k,"Edge"),q=V||U,B=A(k,"Gecko")&&!(A(k.toLowerCase(),"webkit")&&!A(k,"Edge"))&&!(A(k,"Trident")||A(k,"MSIE"))&&!A(k,"Edge"),z=A(k.toLowerCase(),"webkit")&&!A(k,"Edge");function K(){var e=a.document;return e?e.documentMode:void 0}e:{var W="",G=(F=k,B?/rv:([^\);]+)(\)|;)/.exec(F):V?/Edge\/([\d\.]+)/.exec(F):U?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(F):z?/WebKit\/(\S+)/.exec(F):j?/(?:Version)[ \/]?(\S+)/.exec(F):void 0);if(G&&(W=G?G[1]:""),U){var H=K();if(null!=H&&H>parseFloat(W)){M=String(H);break e}}M=W}var $,Q={};function J(){return function(e){var t=Q;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){let e=0;const t=S(String(M)).split("."),n=S("9").split("."),r=Math.max(t.length,n.length);for(let o=0;0==e&&o<r;o++){var i=t[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;e=N(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||N(0==i[2].length,0==s[2].length)||N(i[2],s[2]),i=i[3],s=s[3]}while(0==e)}return 0<=e}))}if(a.document&&U){var Y=K();$=Y||(parseInt(M,10)||void 0)}else $=void 0;var X=$,Z=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{a.addEventListener("test",c,t),a.removeEventListener("test",c,t)}catch(e){}return e}();function ee(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function te(e,t){if(ee.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(B){e:{try{x(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:ne[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&te.Z.h.call(this)}}ee.prototype.h=function(){this.defaultPrevented=!0},y(te,ee);var ne={2:"touch",3:"pen",4:"mouse"};te.prototype.h=function(){te.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var re="closure_listenable_"+(1e6*Math.random()|0),ie=0;function se(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++ie,this.ca=this.fa=!1}function oe(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function ae(e){this.src=e,this.g={},this.h=0}function ce(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=b(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(oe(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ue(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.ca&&s.listener==t&&s.capture==!!n&&s.ia==r)return i}return-1}ae.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=ue(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new se(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var he="closure_lm_"+(1e6*Math.random()|0),le={};function de(e,t,n,r,i){if(r&&r.once)return function e(t,n,r,i,s){if(Array.isArray(n)){for(var o=0;o<n.length;o++)e(t,n[o],r,i,s);return null}return r=we(r),t&&t[re]?t.O(n,r,h(i)?!!i.capture:!!i,s):fe(t,n,r,!0,i,s)}(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)de(e,t[s],n,r,i);return null}return n=we(n),e&&e[re]?e.N(t,n,h(r)?!!r.capture:!!r,i):fe(e,t,n,!1,r,i)}function fe(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=h(i)?!!i.capture:!!i,a=ye(e);if(a||(e[he]=a=new ae(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){var e=ge;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Z||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(me(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function pe(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[re])ce(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(me(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ye(t))?(ce(n,e),0==n.h&&(n.src=null,t[he]=null)):oe(e)}}}function me(e){return e in le?le[e]:le[e]="on"+e}function ge(e,t){if(e.ca)e=!0;else{t=new te(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&pe(e),e=n.call(r,t)}return e}function ye(e){return(e=e[he])instanceof ae?e:null}var ve="__closure_events_fn_"+(1e9*Math.random()>>>0);function we(e){return"function"==typeof e?e:(e[ve]||(e[ve]=function(t){return e.handleEvent(t)}),e[ve])}function be(){v.call(this),this.i=new ae(this),this.P=this,this.I=null}function Ie(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new ee(t,e);else if(t instanceof ee)t.target=t.target||e;else{var i=t;L(t=new ee(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=_e(o,r,!0,t)&&i}if(i=_e(o=t.g=e,r,!0,t)&&i,i=_e(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=_e(o=t.g=n[s],r,!1,t)&&i}function _e(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,c=o.ia||o.src;o.fa&&ce(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}y(be,v),be.prototype[re]=!0,be.prototype.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,s){if(Array.isArray(n))for(var o=0;o<n.length;o++)e(t,n[o],r,i,s);else i=h(i)?!!i.capture:!!i,r=we(r),t&&t[re]?(t=t.i,(n=String(n).toString())in t.g&&(-1<(r=ue(o=t.g[n],r,i,s))&&(oe(o[r]),Array.prototype.splice.call(o,r,1),0==o.length&&(delete t.g[n],t.h--)))):t&&(t=ye(t))&&(n=t.g[n.toString()],t=-1,n&&(t=ue(n,r,i,s)),(r=-1<t?n[t]:null)&&pe(r))}(this,e,t,n,r)},be.prototype.M=function(){if(be.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)oe(n[r]);delete t.g[e],t.h--}}this.I=null},be.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},be.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Te=a.JSON.stringify;function Ee(){var e=De;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ke,Se=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Ae,e=>e.reset());class Ae{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ne(e){a.setTimeout(()=>{throw e},0)}function Oe(e,t){ke||function(){var e=a.Promise.resolve(void 0);ke=function(){e.then(Re)}}(),Ce||(ke(),Ce=!0),De.add(e,t)}var Ce=!1,De=new class{constructor(){this.h=this.g=null}add(e,t){const n=Se.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}};function Re(){for(var e;e=Ee();){try{e.h.call(e.g)}catch(e){Ne(e)}var t=Se;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ce=!1}function Pe(e,t){be.call(this),this.h=e||1,this.g=t||a,this.j=m(this.kb,this),this.l=Date.now()}function Le(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function xe(e,t,n){if("function"==typeof e)n&&(e=m(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=m(e.handleEvent,e)}return 2147483647<Number(t)?-1:a.setTimeout(e,t||0)}y(Pe,be),(r=Pe.prototype).da=!1,r.S=null,r.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ie(this,"tick"),this.da&&(Le(this),this.start()))}},r.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},r.M=function(){Pe.Z.M.call(this),Le(this),delete this.g};class Me extends v{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:function e(t){t.g=xe(()=>{t.g=null,t.i&&(t.i=!1,e(t))},t.j);const n=t.h;t.h=null,t.m.apply(null,n)}(this)}M(){super.M(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fe(e){v.call(this),this.h=e,this.g={}}y(Fe,v);var je=[];function Ue(e,t,n,r){Array.isArray(n)||(n&&(je[0]=n.toString()),n=je);for(var i=0;i<n.length;i++){var s=de(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Ve(e){D(e.g,(function(e,t){this.g.hasOwnProperty(t)&&pe(e)}),e),e.g={}}function qe(){this.g=!0}function Be(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Te(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}Fe.prototype.M=function(){Fe.Z.M.call(this),Ve(this)},Fe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},qe.prototype.Aa=function(){this.g=!1},qe.prototype.info=function(){};var ze={},Ke=null;function We(){return Ke=Ke||new be}function Ge(e){ee.call(this,ze.Ma,e)}function He(e){const t=We();Ie(t,new Ge(t,e))}function $e(e,t){ee.call(this,ze.STAT_EVENT,e),this.stat=t}function Qe(e){const t=We();Ie(t,new $e(t,e))}function Je(e,t){ee.call(this,ze.Na,e),this.size=t}function Ye(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return a.setTimeout((function(){e()}),t)}ze.Ma="serverreachability",y(Ge,ee),ze.STAT_EVENT="statevent",y($e,ee),ze.Na="timingevent",y(Je,ee);var Xe={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ze={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function et(){}function tt(e){return e.h||(e.h=e.i())}function nt(){}et.prototype.h=null;var rt,it={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function st(){ee.call(this,"d")}function ot(){ee.call(this,"c")}function at(){}function ct(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Fe(this),this.P=ht,e=q?125:void 0,this.W=new Pe(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ut}function ut(){this.i=null,this.g="",this.h=!1}y(st,ee),y(ot,ee),y(at,et),at.prototype.g=function(){return new XMLHttpRequest},at.prototype.i=function(){return{}},rt=new at;var ht=45e3,lt={},dt={};function ft(e,t,n){e.K=1,e.v=Mt(Ct(t)),e.s=n,e.U=!0,pt(e,null)}function pt(e,t){e.F=Date.now(),vt(e),e.A=Ct(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Qt(n.h,"t",r),e.C=0,n=e.l.H,e.h=new ut,e.g=Jn(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Me(m(e.Ia,e,e.g),e.O)),Ue(e.V,e.g,"readystatechange",e.gb),t=e.H?R(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),He(1),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var h=u[0];u=u[1];var l=h.split("_");o=2<=l.length&&"type"==l[1]?o+(h+"=")+u+"&":o+(h+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function mt(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function gt(e,t,n){let r,i=!0;for(;!e.I&&e.C<n.length;){if(r=yt(e,n),r==dt){4==t&&(e.o=4,Qe(14),i=!1),Be(e.j,e.m,null,"[Incomplete Response]");break}if(r==lt){e.o=4,Qe(15),Be(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Be(e.j,e.m,r,null),Tt(e,r)}mt(e)&&r!=dt&&r!=lt&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Qe(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Bn(t),t.L=!0,Qe(11))):(Be(e.j,e.m,n,"[Invalid Chunked Response]"),_t(e),It(e))}function yt(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?dt:(n=Number(t.substring(n,r)),isNaN(n)?lt:(r+=1)+n>t.length?dt:(t=t.substr(r,n),e.C=r+n,t))}function vt(e){e.Y=Date.now()+e.P,wt(e,e.P)}function wt(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ye(m(e.eb,e),t)}function bt(e){e.B&&(a.clearTimeout(e.B),e.B=null)}function It(e){0==e.l.G||e.I||Wn(e.l,e)}function _t(e){bt(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Le(e.W),Ve(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Tt(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||tn(n.i,e)))if(n.I=e.N,!e.J&&tn(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Kn(n),Pn(n)}qn(n),Qe(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Ye(m(n.ab,n),6e3));if(1>=en(n.i)&&n.ka){try{n.ka()}catch(e){}n.ka=void 0}}else Hn(n,11)}else if((e.J||n.g==e)&&Kn(n),!E(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.U=u[0],u=u[1],2==n.G)if("c"==u[0]){n.J=u[1],n.la=u[2];const t=u[3];null!=t&&(n.ma=t,n.h.info("VER="+n.ma));const i=u[4];null!=i&&(n.za=i,n.h.info("SVER="+n.za));const h=u[5];null!=h&&"number"==typeof h&&0<h&&(r=1.5*h,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const l=e.g;if(l){const e=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;!s.g&&(A(e,"spdy")||A(e,"quic")||A(e,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(nn(s,s.h),s.h=null))}if(r.D){const e=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.sa=e,xt(r.F,r.D,e))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=e;if((r=n).oa=Qn(r,r.H?r.la:null,r.W),o.J){rn(r.i,o);var a=o,c=r.K;c&&a.setTimeout(c),a.B&&(bt(a),vt(a)),r.g=o}else Vn(r);0<n.l.length&&Mn(n)}else"stop"!=u[0]&&"close"!=u[0]||Hn(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Hn(n,7):Rn(n):"noop"!=u[0]&&n.j&&n.j.wa(u),n.A=0)}He(4)}catch(e){}}function Et(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(u(e)||"string"==typeof e)I(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(u(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(u(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}}function kt(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof kt)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function St(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];At(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)At(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function At(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(r=ct.prototype).setTimeout=function(e){this.P=e},r.gb=function(e){e=e.target;const t=this.L;t&&3==An(e)?t.l():this.Ia(e)},r.Ia=function(e){try{if(e==this.g)e:{const l=An(this.g);var t=this.g.Da();const d=this.g.ba();if(!(3>l)&&(3!=l||q||this.g&&(this.h.h||this.g.ga()||Nn(this.g)))){this.I||4!=l||7==t||He(8==t||0>=d?3:2),bt(this);var n=this.g.ba();this.N=n;t:if(mt(this)){var r=Nn(this.g);e="";var i=r.length,s=4==An(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){_t(this),It(this);var o="";break t}this.h.i=new a.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.X,l,n),this.i){if(this.$&&!this.J){t:{if(this.g){var c,u=this.g;if((c=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(c)){var h=c;break t}}h=null}if(!(n=h)){this.i=!1,this.o=3,Qe(12),_t(this),It(this);break e}Be(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Tt(this,n)}this.U?(gt(this,l,o),q&&this.i&&3==l&&(Ue(this.V,this.W,"tick",this.fb),this.W.start())):(Be(this.j,this.m,o,null),Tt(this,o)),4==l&&_t(this),this.i&&!this.I&&(4==l?Wn(this.l,this):(this.i=!1,vt(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Qe(12)):(this.o=0,Qe(13)),_t(this),It(this)}}}catch(e){}},r.fb=function(){if(this.g){var e=An(this.g),t=this.g.ga();this.C<t.length&&(bt(this),gt(this,e,t),this.i&&4!=e&&vt(this))}},r.cancel=function(){this.I=!0,_t(this)},r.eb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(He(3),Qe(17)),_t(this),this.o=2,It(this)):wt(this,this.Y-e)},(r=kt.prototype).R=function(){St(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},r.T=function(){return St(this),this.g.concat()},r.get=function(e,t){return At(this.h,e)?this.h[e]:t},r.set=function(e,t){At(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},r.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);e.call(t,s,i,this)}};var Nt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ot(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Ot){this.g=void 0!==t?t:e.g,Dt(this,e.j),this.s=e.s,Rt(this,e.i),Pt(this,e.m),this.l=e.l,t=e.h;var n=new Wt;n.i=t.i,t.g&&(n.g=new kt(t.g),n.h=t.h),Lt(this,n),this.o=e.o}else e&&(n=String(e).match(Nt))?(this.g=!!t,Dt(this,n[1]||"",!0),this.s=Ft(n[2]||""),Rt(this,n[3]||"",!0),Pt(this,n[4]),this.l=Ft(n[5]||"",!0),Lt(this,n[6]||"",!0),this.o=Ft(n[7]||"")):(this.g=!!t,this.h=new Wt(null,this.g))}function Ct(e){return new Ot(e)}function Dt(e,t,n){e.j=n?Ft(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Rt(e,t,n){e.i=n?Ft(t,!0):t}function Pt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Lt(e,t,n){t instanceof Wt?(e.h=t,function(e,t){t&&!e.j&&(Gt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ht(this,t),Qt(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=jt(t,zt)),e.h=new Wt(t,e.g))}function xt(e,t,n){e.h.set(t,n)}function Mt(e){return xt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ft(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function jt(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Ut),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ut(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ot.prototype.toString=function(){var e=[],t=this.j;t&&e.push(jt(t,Vt,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(jt(t,Vt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(jt(n,"/"==n.charAt(0)?Bt:qt,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",jt(n,Kt)),e.join("")};var Vt=/[#\/\?@]/g,qt=/[#\?:]/g,Bt=/[#\?]/g,zt=/[#\?@]/g,Kt=/#/g;function Wt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Gt(e){e.g||(e.g=new kt,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ht(e,t){Gt(e),t=Jt(e,t),At(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,At((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&St(e)))}function $t(e,t){return Gt(e),t=Jt(e,t),At(e.g.h,t)}function Qt(e,t,n){Ht(e,t),0<n.length&&(e.i=null,e.g.set(Jt(e,t),T(n)),e.h+=n.length)}function Jt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(r=Wt.prototype).add=function(e,t){Gt(this),this.i=null,e=Jt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},r.forEach=function(e,t){Gt(this),this.g.forEach((function(n,r){I(n,(function(n){e.call(t,n,r,this)}),this)}),this)},r.T=function(){Gt(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],s=0;s<i.length;s++)n.push(t[r]);return n},r.R=function(e){Gt(this);var t=[];if("string"==typeof e)$t(this,e)&&(t=_(t,this.g.get(Jt(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=_(t,e[n])}return t},r.set=function(e,t){return Gt(this),this.i=null,$t(this,e=Jt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},r.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},r.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),e.push(o)}}return this.i=e.join("&")};function Yt(e){this.l=e||Xt,a.PerformanceNavigationTiming?e=0<(e=a.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(a.g&&a.g.Ea&&a.g.Ea()&&a.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Xt=10;function Zt(e){return!!e.h||!!e.g&&e.g.size>=e.j}function en(e){return e.h?1:e.g?e.g.size:0}function tn(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function nn(e,t){e.g?e.g.add(t):e.h=t}function rn(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function sn(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return T(e.i)}function on(){}function an(){this.g=new on}function cn(e,t,n){const r=n||"";try{Et(e,(function(e,n){let i=e;h(e)&&(i=Te(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function un(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function hn(e){this.l=e.$b||null,this.j=e.ib||!1}function ln(e,t){be.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=dn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Yt.prototype.cancel=function(){if(this.i=sn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}},on.prototype.stringify=function(e){return a.JSON.stringify(e,void 0)},on.prototype.parse=function(e){return a.JSON.parse(e,void 0)},y(hn,et),hn.prototype.g=function(){return new ln(this.l,this.j)},hn.prototype.i=function(e){return function(){return e}}({}),y(ln,be);var dn=0;function fn(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function pn(e){e.readyState=4,e.l=null,e.j=null,e.A=null,mn(e)}function mn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(r=ln.prototype).open=function(e,t){if(this.readyState!=dn)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,mn(this)},r.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||a).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},r.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,pn(this)),this.readyState=dn},r.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,mn(this)),this.g&&(this.readyState=3,mn(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==a.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;fn(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},r.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?pn(this):mn(this),3==this.readyState&&fn(this)}},r.Ua=function(e){this.g&&(this.response=this.responseText=e,pn(this))},r.Ta=function(e){this.g&&(this.response=e,pn(this))},r.ha=function(){this.g&&pn(this)},r.setRequestHeader=function(e,t){this.v.append(e,t)},r.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ln.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var gn=a.JSON.parse;function yn(e){be.call(this),this.headers=new kt,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=vn,this.K=this.L=!1}y(yn,be);var vn="",wn=/^https?$/i,bn=["POST","PUT"];function In(e){return"content-type"==e.toLowerCase()}function _n(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Tn(e),kn(e)}function Tn(e){e.D||(e.D=!0,Ie(e,"complete"),Ie(e,"error"))}function En(e){if(e.h&&void 0!==o&&(!e.C[1]||4!=An(e)||2!=e.ba()))if(e.v&&4==An(e))xe(e.Fa,0,e);else if(Ie(e,"readystatechange"),4==An(e)){e.h=!1;try{const o=e.ba();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===o){var i=String(e.H).match(Nt)[1]||null;if(!i&&a.self&&a.self.location){var s=a.self.location.protocol;i=s.substr(0,s.length-1)}r=!wn.test(i?i.toLowerCase():"")}n=r}if(n)Ie(e,"complete"),Ie(e,"success");else{e.m=6;try{var c=2<An(e)?e.g.statusText:""}catch(e){c=""}e.j=c+" ["+e.ba()+"]",Tn(e)}}finally{kn(e)}}}function kn(e,t){if(e.g){Sn(e);const n=e.g,r=e.C[0]?c:null;e.g=null,e.C=null,t||Ie(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function Sn(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(a.clearTimeout(e.A),e.A=null)}function An(e){return e.g?e.g.readyState:0}function Nn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case vn:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function On(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){let t="";return D(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):xt(e,t,n))}function Cn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Dn(e){this.za=0,this.l=[],this.h=new qe,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Cn("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Cn("baseRetryDelayMs",5e3,e),this.$a=Cn("retryDelaySeedMs",1e4,e),this.Ya=Cn("forwardChannelMaxRetries",2,e),this.ra=Cn("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Yt(e&&e.concurrentRequestLimit),this.Ca=new an,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Rn(e){if(Ln(e),3==e.G){var t=e.V++,n=Ct(e.F);xt(n,"SID",e.J),xt(n,"RID",t),xt(n,"TYPE","terminate"),jn(e,n),(t=new ct(e,e.h,t,void 0)).K=2,t.v=Mt(Ct(n)),n=!1,a.navigator&&a.navigator.sendBeacon&&(n=a.navigator.sendBeacon(t.v.toString(),"")),!n&&a.Image&&((new Image).src=t.v,n=!0),n||(t.g=Jn(t.l,null),t.g.ea(t.v)),t.F=Date.now(),vt(t)}$n(e)}function Pn(e){e.g&&(Bn(e),e.g.cancel(),e.g=null)}function Ln(e){Pn(e),e.u&&(a.clearTimeout(e.u),e.u=null),Kn(e),e.i.cancel(),e.m&&("number"==typeof e.m&&a.clearTimeout(e.m),e.m=null)}function xn(e,t){e.l.push(new class{constructor(e,t){this.h=e,this.g=t}}(e.Za++,t)),3==e.G&&Mn(e)}function Mn(e){Zt(e.i)||e.m||(e.m=!0,Oe(e.Ha,e),e.C=0)}function Fn(e,t){var n;n=t?t.m:e.V++;const r=Ct(e.F);xt(r,"SID",e.J),xt(r,"RID",n),xt(r,"AID",e.U),jn(e,r),e.o&&e.s&&On(r,e.o,e.s),n=new ct(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Un(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),nn(e.i,n),ft(n,r,t)}function jn(e,t){e.j&&Et({},(function(e,n){xt(t,n,e)}))}function Un(e,t,n){n=Math.min(e.l.length,n);var r=e.j?m(e.j.Oa,e.j,e):null;e:{var i=e.l;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].h,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].h;const a=i[o].g;if(n-=t,0>n)t=Math.max(0,i[o].h-100),s=!1;else try{cn(a,e,"req"+n+"_")}catch(e){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.l.splice(0,n),t.D=e,r}function Vn(e){e.g||e.u||(e.Y=1,Oe(e.Ga,e),e.A=0)}function qn(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Ye(m(e.Ga,e),Gn(e,e.A)),e.A++,!0)}function Bn(e){null!=e.B&&(a.clearTimeout(e.B),e.B=null)}function zn(e){e.g=new ct(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Ct(e.oa);xt(t,"RID","rpc"),xt(t,"SID",e.J),xt(t,"CI",e.N?"0":"1"),xt(t,"AID",e.U),jn(e,t),xt(t,"TYPE","xmlhttp"),e.o&&e.s&&On(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Mt(Ct(t)),n.s=null,n.U=!0,pt(n,e)}function Kn(e){null!=e.v&&(a.clearTimeout(e.v),e.v=null)}function Wn(e,t){var n=null;if(e.g==t){Kn(e),Bn(e),e.g=null;var r=2}else{if(!tn(e.i,t))return;n=t.D,rn(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Ie(r=We(),new Je(r,n,t,i)),Mn(e)}else Vn(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(en(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Ye(m(e.Ha,e,t),Gn(e,e.C)),e.C++,!0))}(e,t)||2==r&&qn(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Hn(e,5);break;case 4:Hn(e,10);break;case 3:Hn(e,6);break;default:Hn(e,2)}}function Gn(e,t){let n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Hn(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=m(e.jb,e);n||(n=new Ot("//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Dt(n,"https"),Mt(n)),function(e,t){const n=new qe;if(a.Image){const r=new Image;r.onload=g(un,n,r,"TestLoadImage: loaded",!0,t),r.onerror=g(un,n,r,"TestLoadImage: error",!1,t),r.onabort=g(un,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=g(un,n,r,"TestLoadImage: timeout",!1,t),a.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Qe(2);e.G=0,e.j&&e.j.va(t),$n(e),Ln(e)}function $n(e){e.G=0,e.I=-1,e.j&&(0==sn(e.i).length&&0==e.l.length||(e.i.i.length=0,T(e.l),e.l.length=0),e.j.ua())}function Qn(e,t,n){let r=function(e){return e instanceof Ot?Ct(e):new Ot(e,void 0)}(n);if(""!=r.i)t&&Rt(r,t+"."+r.i),Pt(r,r.m);else{const e=a.location;r=function(e,t,n,r){var i=new Ot(null,void 0);return e&&Dt(i,e),t&&Rt(i,t),n&&Pt(i,n),r&&(i.l=r),i}(e.protocol,t?t+"."+e.hostname:e.hostname,+e.port,n)}return e.aa&&D(e.aa,(function(e,t){xt(r,t,e)})),t=e.D,n=e.sa,t&&n&&xt(r,t,n),xt(r,"VER",e.ma),jn(e,r),r}function Jn(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new yn(new hn({ib:!0})):new yn(e.qa)).L=e.H,t}function Yn(){}function Xn(){if(U&&!(10<=Number(X)))throw Error("Environmental error: no available transport.")}function Zn(e,t){be.call(this),this.g=new Dn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!E(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!E(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new nr(this)}function er(e){st.call(this);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function tr(){ot.call(this),this.status=1}function nr(e){this.g=e}(r=yn.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():rt.g(),this.C=this.u?tt(this.u):tt(rt),this.g.onreadystatechange=m(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(e){return void _n(this,e)}e=n||"";const i=new kt(this.headers);r&&Et(r,(function(e,t){i.set(t,e)})),r=function(e){e:{var t=In;const n=e.length,r="string"==typeof e?e.split(""):e;for(let i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=a.FormData&&e instanceof a.FormData,!(0<=b(bn,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Sn(this),0<this.B&&((this.K=function(e){return U&&J()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=m(this.pa,this)):this.A=xe(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){_n(this,e)}},r.pa=function(){void 0!==o&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ie(this,"timeout"),this.abort(8))},r.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ie(this,"complete"),Ie(this,"abort"),kn(this))},r.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),kn(this,!0)),yn.Z.M.call(this)},r.Fa=function(){this.s||(this.F||this.v||this.l?En(this):this.cb())},r.cb=function(){En(this)},r.ba=function(){try{return 2<An(this)?this.g.status:-1}catch(e){return-1}},r.ga=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},r.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),gn(t)}},r.Da=function(){return this.m},r.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(r=Dn.prototype).ma=8,r.G=1,r.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(e){}},r.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new ct(this,this.h,e,void 0);let s=this.s;if(this.P&&(s?(s=R(s),L(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var t=0,n=0;n<this.l.length;n++){var r=this.l[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.l.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Un(this,i,t),xt(n=Ct(this.F),"RID",e),xt(n,"CVER",22),this.D&&xt(n,"X-HTTP-Session-Id",this.D),jn(this,n),this.o&&s&&On(n,this.o,s),nn(this.i,i),this.Ra&&xt(n,"TYPE","init"),this.ja?(xt(n,"$req",t),xt(n,"SID","null"),i.$=!0,ft(i,n,null)):ft(i,n,t),this.G=2}}else 3==this.G&&(e?Fn(this,e):0==this.l.length||Zt(this.i)||Fn(this))},r.Ga=function(){if(this.u=null,zn(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Ye(m(this.bb,this),e)}},r.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Qe(10),Pn(this),zn(this))},r.ab=function(){null!=this.v&&(this.v=null,Pn(this),qn(this),Qe(19))},r.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Qe(2)):(this.h.info("Failed to ping google.com"),Qe(1))},(r=Yn.prototype).xa=function(){},r.wa=function(){},r.va=function(){},r.ua=function(){},r.Oa=function(){},Xn.prototype.g=function(e,t){return new Zn(e,t)},y(Zn,be),Zn.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Oe(m(e.hb,e,t))),Qe(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Qn(e,null,e.W),Mn(e)},Zn.prototype.close=function(){Rn(this.g)},Zn.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,xn(this.g,t)}else this.v?((t={}).__data__=Te(e),xn(this.g,t)):xn(this.g,e)},Zn.prototype.M=function(){this.g.j=null,delete this.j,Rn(this.g),delete this.g,Zn.Z.M.call(this)},y(er,st),y(tr,ot),y(nr,Yn),nr.prototype.xa=function(){Ie(this.g,"a")},nr.prototype.wa=function(e){Ie(this.g,new er(e))},nr.prototype.va=function(e){Ie(this.g,new tr(e))},nr.prototype.ua=function(){Ie(this.g,"b")},Xn.prototype.createWebChannel=Xn.prototype.g,Zn.prototype.send=Zn.prototype.u,Zn.prototype.open=Zn.prototype.m,Zn.prototype.close=Zn.prototype.close,Xe.NO_ERROR=0,Xe.TIMEOUT=8,Xe.HTTP_ERROR=6,Ze.COMPLETE="complete",nt.EventType=it,it.OPEN="a",it.CLOSE="b",it.ERROR="c",it.MESSAGE="d",be.prototype.listen=be.prototype.N,yn.prototype.listenOnce=yn.prototype.O,yn.prototype.getLastError=yn.prototype.La,yn.prototype.getLastErrorCode=yn.prototype.Da,yn.prototype.getStatus=yn.prototype.ba,yn.prototype.getResponseJson=yn.prototype.Qa,yn.prototype.getResponseText=yn.prototype.ga,yn.prototype.send=yn.prototype.ea;var rr=s.createWebChannelTransport=function(){return new Xn},ir=s.getStatEventTarget=function(){return We()},sr=s.ErrorCode=Xe,or=s.EventType=Ze,ar=s.Event=ze,cr=s.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ur=s.FetchXmlHttpFactory=hn,hr=s.WebChannel=nt,lr=s.XhrIo=yn}).call(this,n(8))},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(0),i=n(5),s=n(3),o=n(4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class a{constructor(e,t){this._delegate=e,this.firebase=t,Object(s._addComponent)(e,new i.a("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Object(s.deleteApp)(this._delegate)))}_getService(e,t=s._DEFAULT_ENTRY_NAME){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=s._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Object(s._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){Object(s._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},u=new r.b("app-compat","Firebase",c);const h=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function e(){const t=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){const t={},n={__esModule:!0,initializeApp:function(i,o={}){const a=s.initializeApp(i,o);if(Object(r.e)(t,a.name))return t[a.name];const c=new e(a,n);return t[a.name]=c,c},app:i,registerVersion:s.registerVersion,setLogLevel:s.setLogLevel,onLog:s.onLog,apps:null,SDK_VERSION:s.SDK_VERSION,INTERNAL:{registerComponent:function(t){const o=t.name,a=o.replace("-compat","");if(s._registerComponent(t)&&"PUBLIC"===t.type){const s=(e=i())=>{if("function"!=typeof e[a])throw u.create("invalid-app-argument",{appName:o});return e[a]()};void 0!==t.serviceProps&&Object(r.i)(s,t.serviceProps),n[a]=s,e.prototype[a]=function(...e){return this._getService.bind(this,o).apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[a]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){if("serverAuth"===t)return null;return t},modularAPIs:s}};function i(e){if(e=e||s._DEFAULT_ENTRY_NAME,!Object(r.e)(t,e))throw u.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(e=>t[e])}}),i.App=e,n}(a);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){Object(r.i)(t,e)},createSubscribe:r.g,ErrorFactory:r.b,deepExtend:r.i}),t}(),l=new o.b("@firebase/app-compat");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if(Object(r.m)()&&void 0!==self.firebase){l.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&l.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const d=h;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var f;Object(s.registerVersion)("@firebase/app-compat","0.1.12",f)},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Counter=void 0;const r=n(12),i=n(15);n(16),n(20);const s=n(19);t.Counter=class{constructor(e,t){this.doc=e,this.field=t,this.db=null,this.shardId="",this.shards={},this.notifyPromise=null,this.db=e.firestore,this.shardId=function(e){const t=new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie);if(t)return t[1];const n=r.v4(),i=new Date;i.setTime(i.getTime()+2592e6);const s="; expires="+i.toUTCString();return document.cookie=encodeURIComponent(e)+"="+n+s+"; path=/",n}("FIRESTORE_COUNTER_SHARD_ID"),i.default.initializeApp(this.db.app.options);const n=i.default.firestore().collection(e.path+"/_counter_shards_");this.shards[e.path]=0,this.shards[n.path+"/"+this.shardId]=0,this.shards[n.path+"/\t"+this.shardId.substr(0,4)]=0,this.shards[n.path+"/\t\t"+this.shardId.substr(0,3)]=0,this.shards[n.path+"/\t\t\t"+this.shardId.substr(0,2)]=0,this.shards[n.path+"/\t\t\t"+this.shardId.substr(0,1)]=0}async get(e){const t=Object.keys(this.shards).map(async t=>(await this.db.doc(t).get(e)).get(this.field)||0);return(await Promise.all(t)).reduce((e,t)=>e+t,0)}onSnapshot(e){Object.keys(this.shards).forEach(t=>{const n=i.default.firestore().doc(t);(0,s.onSnapshot)(n,t=>{this.shards[t.ref.path]=t.get(this.field)||0,null===this.notifyPromise&&(this.notifyPromise=async function(e){return new Promise(async t=>{setTimeout(async()=>{const n=e();t(n)},0)})}(()=>{const t=Object.values(this.shards).reduce((e,t)=>e+t,0);e({exists:!0,data:()=>t}),this.notifyPromise=null}))})})}incrementBy(e){const t=i.default.firestore.FieldValue.increment(e),n=this.field.split(".").reverse().reduce((e,t)=>({[t]:e}),t),r=i.default.firestore().collection(this.doc.path+"/_counter_shards_");return(0,s.setDoc)((0,s.doc)(r,this.shardId),n,{merge:!0})}shard(){return this.doc.collection("_counter_shards_").doc(this.shardId)}}},function(e,t,n){var r=n(13),i=n(14),s=i;s.v1=r,s.v4=i,e.exports=s},function(e,t,n){var r,i,s=n(9),o=n(10),a=0,c=0;e.exports=function(e,t,n){var u=t&&n||0,h=t||[],l=(e=e||{}).node||r,d=void 0!==e.clockseq?e.clockseq:i;if(null==l||null==d){var f=s();null==l&&(l=r=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==d&&(d=i=16383&(f[6]<<8|f[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:c+1,g=p-a+(m-c)/1e4;if(g<0&&void 0===e.clockseq&&(d=d+1&16383),(g<0||p>a)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=p,c=m,i=d;var y=(1e4*(268435455&(p+=122192928e5))+m)%4294967296;h[u++]=y>>>24&255,h[u++]=y>>>16&255,h[u++]=y>>>8&255,h[u++]=255&y;var v=p/4294967296*1e4&268435455;h[u++]=v>>>8&255,h[u++]=255&v,h[u++]=v>>>24&15|16,h[u++]=v>>>16&255,h[u++]=d>>>8|128,h[u++]=255&d;for(var w=0;w<6;++w)h[u+w]=l[w];return t||o(h)}},function(e,t,n){var r=n(9),i=n(10);e.exports=function(e,t,n){var s=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var a=0;a<16;++a)t[s+a]=o[a];return t||i(o)}},function(e,t,n){"use strict";n.r(t);var r=n(7);n.d(t,"default",(function(){return r.a}));
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
r.a.registerVersion("firebase","9.6.1","app-compat")},function(e,t,n){"use strict";n.r(t);n(17)},function(e,t,n){"use strict";(function(e){var t=n(7),r=n(1),i=n(5),s=n(0);function o(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function a(e=Object(s.l)()){return!("file:"!==o()&&"ionic:"!==o()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function c(e=Object(s.l)()){return Object(s.q)()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(e=Object(s.l)()){return/Edge\/\d+/.test(e)}(e)}function u(){try{const e=self.localStorage,t=r.s();if(e)return e.setItem(t,"1"),e.removeItem(t),!c()||Object(s.r)()}catch(e){return h()&&Object(s.r)()}return!1}function h(){return void 0!==e&&"WorkerGlobalScope"in e&&"importScripts"in e}function l(){return("http:"===o()||"https:"===o()||Object(s.n)()||a())&&!(Object(s.u)()||Object(s.t)())&&u()&&!h()}function d(){return a()&&"undefined"!=typeof document}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const f={LOCAL:"local",NONE:"none",SESSION:"session"},p=r.p;async function m(e){await e._initializationPromise;const t=g(),n=r.v("persistence",e.config.apiKey,e.name);(null==t?void 0:t.sessionStorage)&&t.sessionStorage.setItem(n,e._getPersistence())}function g(){return"undefined"!=typeof window?window:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y=r.p;class v{constructor(){this.browserResolver=r.t(r.z),this.cordovaResolver=r.t(r.E),this.underlyingResolver=null,this._redirectPersistence=r.A,this._completeRedirectFn=r.u}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return d()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return y(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!d()&&new Promise(e=>{const t=setTimeout(()=>{e(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(t),e(!0)})})}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w(e){return e.unwrap()}function b(e){const{_tokenResponse:t}=e instanceof s.c?e.customData:e;if(!t)return null;if(!(e instanceof s.c)&&"temporaryProof"in t&&"phoneNumber"in t)return r.i.credentialFromResult(e);const n=t.providerId;if(!n||n===r.k.PASSWORD)return null;let i;switch(n){case r.k.GOOGLE:i=r.f;break;case r.k.FACEBOOK:i=r.d;break;case r.k.GITHUB:i=r.e;break;case r.k.TWITTER:i=r.o;break;default:const{oauthIdToken:e,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:c}=t;return s||o||e||a?a?n.startsWith("saml.")?r.m._create(n,a):r.g._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:e,accessToken:s}):new r.h(n).credential({idToken:e,accessToken:s,rawNonce:c}):null}return e instanceof s.c?i.credentialFromError(e):i.credentialFromResult(e)}function I(e,t){return t.catch(t=>{throw t instanceof s.c&&function(e,t){var n;const i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code){t.resolver=new T(e,r.J(e,t))}else if(i){const e=b(t),n=t;e&&(n.credential=e,n.tenantId=i.tenantId||void 0,n.email=i.email||void 0,n.phoneNumber=i.phoneNumber||void 0)}}(e,t),t}).then(e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(i=e,b(i)),additionalUserInfo:r.I(e),user:E.getOrCreate(n)};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var i})}async function _(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>I(e,n.confirm(t))}}class T{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return I(w(this.auth),this.resolver.resolveSignIn(e))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E{constructor(e){this._delegate=e,this.multiFactor=r.S(e)}static getOrCreate(e){return E.USER_MAP.has(e)||E.USER_MAP.set(e,new E(e)),E.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return I(this.auth,r.O(this._delegate,e))}async linkWithPhoneNumber(e,t){return _(this.auth,r.P(this._delegate,e,t))}async linkWithPopup(e){return I(this.auth,r.Q(this._delegate,e,v))}async linkWithRedirect(e){return await m(r.q(this.auth)),r.R(this._delegate,e,v)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return I(this.auth,r.T(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return _(this.auth,r.U(this._delegate,e,t))}reauthenticateWithPopup(e){return I(this.auth,r.V(this._delegate,e,v))}async reauthenticateWithRedirect(e){return await m(r.q(this.auth)),r.W(this._delegate,e,v)}sendEmailVerification(e){return r.X(this._delegate,e)}async unlink(e){return await r.ib(this._delegate,e),this}updateEmail(e){return r.jb(this._delegate,e)}updatePassword(e){return r.kb(this._delegate,e)}updatePhoneNumber(e){return r.lb(this._delegate,e)}updateProfile(e){return r.mb(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return r.nb(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}E.USER_MAP=new WeakMap;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const k=r.p;class S{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;k(n,"invalid-api-key",{appName:e.name});let i=[r.L];if("undefined"!=typeof window){i=function(e,t){const n=g();if(!(null==n?void 0:n.sessionStorage))return[];const i=r.v("persistence",e,t);switch(n.sessionStorage.getItem(i)){case f.NONE:return[r.L];case f.LOCAL:return[r.M,r.A];case f.SESSION:return[r.A];default:return[]}}(n,e.name);for(const e of[r.M,r.y,r.A])i.includes(e)||i.push(e)}k(n,"invalid-api-key",{appName:e.name});const s="undefined"!=typeof window?v:void 0;this._delegate=t.initialize({options:{persistence:i,popupRedirectResolver:s}}),this._delegate._updateErrorMap(r.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?E.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){r.D(this._delegate,e,t)}applyActionCode(e){return r.x(this._delegate,e)}checkActionCode(e){return r.B(this._delegate,e)}confirmPasswordReset(e,t){return r.C(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return I(this._delegate,r.F(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return r.H(this._delegate,e)}isSignInWithEmailLink(e){return r.N(this._delegate,e)}async getRedirectResult(){k(l(),this._delegate,"operation-not-supported-in-this-environment");const e=await r.K(this._delegate,v);return e?I(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){r.w(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=A(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=A(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return r.Z(this._delegate,e,t)}sendPasswordResetEmail(e,t){return r.Y(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){p(Object.values(f).includes(t),e,"invalid-persistence-type"),Object(s.u)()?p(t!==f.SESSION,e,"unsupported-persistence-type"):Object(s.t)()?p(t===f.NONE,e,"unsupported-persistence-type"):h()?p(t===f.NONE||t===f.LOCAL&&Object(s.r)(),e,"unsupported-persistence-type"):p(t===f.NONE||u(),e,"unsupported-persistence-type")}(this._delegate,e),e){case f.SESSION:t=r.A;break;case f.LOCAL:t=await r.t(r.M)._isAvailable()?r.M:r.y;break;case f.NONE:t=r.L;break;default:return r.r("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return I(this._delegate,r.ab(this._delegate))}signInWithCredential(e){return I(this._delegate,r.bb(this._delegate,e))}signInWithCustomToken(e){return I(this._delegate,r.cb(this._delegate,e))}signInWithEmailAndPassword(e,t){return I(this._delegate,r.db(this._delegate,e,t))}signInWithEmailLink(e,t){return I(this._delegate,r.eb(this._delegate,e,t))}signInWithPhoneNumber(e,t){return _(this._delegate,r.fb(this._delegate,e,t))}async signInWithPopup(e){return k(l(),this._delegate,"operation-not-supported-in-this-environment"),I(this._delegate,r.gb(this._delegate,e,v))}async signInWithRedirect(e){return k(l(),this._delegate,"operation-not-supported-in-this-environment"),await m(this._delegate),r.hb(this._delegate,e,v)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return r.ob(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function A(e,t,n){let r=e;"function"!=typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&E.getOrCreate(e)),error:t,complete:n}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */S.Persistence=f;class N{constructor(){this.providerId="phone",this._delegate=new r.i(w(t.a.auth()))}static credential(e,t){return r.i.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}N.PHONE_SIGN_IN_METHOD=r.i.PHONE_SIGN_IN_METHOD,N.PROVIDER_ID=r.i.PROVIDER_ID;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const O=r.p;class C{constructor(e,n,i=t.a.app()){var s;O(null===(s=i.options)||void 0===s?void 0:s.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new r.l(e,n,i.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var D;(D=t.a).INTERNAL.registerComponent(new i.a("auth-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new S(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:r.a.EMAIL_SIGNIN,PASSWORD_RESET:r.a.PASSWORD_RESET,RECOVER_EMAIL:r.a.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:r.a.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:r.a.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:r.a.VERIFY_EMAIL}},EmailAuthProvider:r.c,FacebookAuthProvider:r.d,GithubAuthProvider:r.e,GoogleAuthProvider:r.f,OAuthProvider:r.h,SAMLAuthProvider:r.n,PhoneAuthProvider:N,PhoneMultiFactorGenerator:r.j,RecaptchaVerifier:C,TwitterAuthProvider:r.o,Auth:S,AuthCredential:r.b,Error:s.c}).setInstantiationMode("LAZY").setMultipleInstances(!1)),D.registerVersion("@firebase/auth-compat","0.2.4")}).call(this,n(8))},function(e,t){var n,r,i=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(e){n=s}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var c,u=[],h=!1,l=-1;function d(){h&&c&&(h=!1,c.length?u=c.concat(u):l=-1,u.length&&f())}function f(){if(!h){var e=a(d);h=!0;for(var t=u.length;t;){for(c=u,u=[];++l<t;)c&&c[l].run();l=-1,t=u.length}c=null,h=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||h||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";n.r(t);var r=n(2);n.d(t,"AbstractUserDataWriter",(function(){return r.a})),n.d(t,"Bytes",(function(){return r.b})),n.d(t,"CACHE_SIZE_UNLIMITED",(function(){return r.c})),n.d(t,"CollectionReference",(function(){return r.d})),n.d(t,"DocumentReference",(function(){return r.e})),n.d(t,"DocumentSnapshot",(function(){return r.f})),n.d(t,"FieldPath",(function(){return r.g})),n.d(t,"FieldValue",(function(){return r.h})),n.d(t,"Firestore",(function(){return r.i})),n.d(t,"FirestoreError",(function(){return r.j})),n.d(t,"GeoPoint",(function(){return r.k})),n.d(t,"LoadBundleTask",(function(){return r.l})),n.d(t,"Query",(function(){return r.m})),n.d(t,"QueryConstraint",(function(){return r.n})),n.d(t,"QueryDocumentSnapshot",(function(){return r.o})),n.d(t,"QuerySnapshot",(function(){return r.p})),n.d(t,"SnapshotMetadata",(function(){return r.q})),n.d(t,"Timestamp",(function(){return r.r})),n.d(t,"Transaction",(function(){return r.s})),n.d(t,"WriteBatch",(function(){return r.t})),n.d(t,"_DatabaseId",(function(){return r.u})),n.d(t,"_DocumentKey",(function(){return r.v})),n.d(t,"_EmptyAppCheckTokenProvider",(function(){return r.w})),n.d(t,"_EmptyAuthCredentialsProvider",(function(){return r.x})),n.d(t,"_FieldPath",(function(){return r.y})),n.d(t,"_cast",(function(){return r.z})),n.d(t,"_debugAssert",(function(){return r.A})),n.d(t,"_isBase64Available",(function(){return r.B})),n.d(t,"_logWarn",(function(){return r.C})),n.d(t,"_validateIsNotUsedTogether",(function(){return r.D})),n.d(t,"addDoc",(function(){return r.E})),n.d(t,"arrayRemove",(function(){return r.F})),n.d(t,"arrayUnion",(function(){return r.G})),n.d(t,"clearIndexedDbPersistence",(function(){return r.H})),n.d(t,"collection",(function(){return r.I})),n.d(t,"collectionGroup",(function(){return r.J})),n.d(t,"connectFirestoreEmulator",(function(){return r.K})),n.d(t,"deleteDoc",(function(){return r.L})),n.d(t,"deleteField",(function(){return r.M})),n.d(t,"disableNetwork",(function(){return r.N})),n.d(t,"doc",(function(){return r.O})),n.d(t,"documentId",(function(){return r.P})),n.d(t,"enableIndexedDbPersistence",(function(){return r.Q})),n.d(t,"enableMultiTabIndexedDbPersistence",(function(){return r.R})),n.d(t,"enableNetwork",(function(){return r.S})),n.d(t,"endAt",(function(){return r.T})),n.d(t,"endBefore",(function(){return r.U})),n.d(t,"ensureFirestoreConfigured",(function(){return r.V})),n.d(t,"executeWrite",(function(){return r.W})),n.d(t,"getDoc",(function(){return r.X})),n.d(t,"getDocFromCache",(function(){return r.Y})),n.d(t,"getDocFromServer",(function(){return r.Z})),n.d(t,"getDocs",(function(){return r.ab})),n.d(t,"getDocsFromCache",(function(){return r.bb})),n.d(t,"getDocsFromServer",(function(){return r.cb})),n.d(t,"getFirestore",(function(){return r.db})),n.d(t,"increment",(function(){return r.eb})),n.d(t,"initializeFirestore",(function(){return r.fb})),n.d(t,"limit",(function(){return r.gb})),n.d(t,"limitToLast",(function(){return r.hb})),n.d(t,"loadBundle",(function(){return r.ib})),n.d(t,"namedQuery",(function(){return r.jb})),n.d(t,"onSnapshot",(function(){return r.kb})),n.d(t,"onSnapshotsInSync",(function(){return r.lb})),n.d(t,"orderBy",(function(){return r.mb})),n.d(t,"query",(function(){return r.nb})),n.d(t,"queryEqual",(function(){return r.ob})),n.d(t,"refEqual",(function(){return r.pb})),n.d(t,"runTransaction",(function(){return r.qb})),n.d(t,"serverTimestamp",(function(){return r.rb})),n.d(t,"setDoc",(function(){return r.sb})),n.d(t,"setLogLevel",(function(){return r.tb})),n.d(t,"snapshotEqual",(function(){return r.ub})),n.d(t,"startAfter",(function(){return r.vb})),n.d(t,"startAt",(function(){return r.wb})),n.d(t,"terminate",(function(){return r.xb})),n.d(t,"updateDoc",(function(){return r.yb})),n.d(t,"waitForPendingWrites",(function(){return r.zb})),n.d(t,"where",(function(){return r.Ab})),n.d(t,"writeBatch",(function(){return r.Bb}))},function(e,t,n){"use strict";n.r(t);var r=n(7),i=n(2),s=n(0),o=n(5);
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function a(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new i.j("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c(){if("undefined"==typeof Uint8Array)throw new i.j("unimplemented","Uint8Arrays are not available in this environment.")}function u(){if(!Object(i.B)())throw new i.j("unimplemented","Blobs are unavailable in Firestore in this environment.")}class h{constructor(e){this._delegate=e}static fromBase64String(e){return u(),new h(i.b.fromBase64String(e))}static fromUint8Array(e){return c(),new h(i.b.fromUint8Array(e))}toBase64(){return u(),this._delegate.toBase64()}toUint8Array(){return c(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const e of t)if(e in n&&"function"==typeof n[e])return!0;return!1}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,["next","error","complete"])}class d{enableIndexedDbPersistence(e,t){return Object(i.Q)(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return Object(i.R)(e._delegate)}clearIndexedDbPersistence(e){return Object(i.H)(e._delegate)}}class f{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof i.u||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Object(i.C)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,n={}){Object(i.K)(this._delegate,e,t,n)}enableNetwork(){return Object(i.S)(this._delegate)}disableNetwork(){return Object(i.N)(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Object(i.D)("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Object(i.zb)(this._delegate)}onSnapshotsInSync(e){return Object(i.lb)(this._delegate,e)}get app(){if(!this._appCompat)throw new i.j("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new A(this,Object(i.I)(this._delegate,e))}catch(e){throw w(e,"collection()","Firestore.collection()")}}doc(e){try{return new v(this,Object(i.O)(this._delegate,e))}catch(e){throw w(e,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new E(this,Object(i.J)(this._delegate,e))}catch(e){throw w(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Object(i.qb)(this._delegate,t=>e(new m(this,t)))}batch(){return Object(i.V)(this._delegate),new g(new i.t(this._delegate,e=>Object(i.W)(this._delegate,e)))}loadBundle(e){return Object(i.ib)(this._delegate,e)}namedQuery(e){return Object(i.jb)(this._delegate,e).then(e=>e?new E(this,e):null)}}class p extends i.a{constructor(e){super(),this.firestore=e}convertBytes(e){return new h(new i.b(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return v.forKey(t,this.firestore,null)}}class m{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new p(e)}get(e){const t=N(e);return this._delegate.get(t).then(e=>new _(this._firestore,new i.f(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter)))}set(e,t,n){const r=N(e);return n?(a("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=N(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=N(e);return this._delegate.delete(t),this}}class g{constructor(e){this._delegate=e}set(e,t,n){const r=N(e);return n?(a("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=N(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=N(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class y{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new i.o(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new T(this._firestore,n),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=y.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new y(e,new p(e),t),r.set(t,i)),i}}y.INSTANCES=new WeakMap;class v{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new p(e)}static forPath(e,t,n){if(e.length%2!=0)throw new i.j("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new v(t,new i.e(t._delegate,n,new i.v(e)))}static forKey(e,t,n){return new v(t,new i.e(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new A(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new A(this.firestore,Object(i.I)(this._delegate,e))}catch(e){throw w(e,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=Object(s.k)(e))instanceof i.e&&Object(i.pb)(this._delegate,e)}set(e,t){t=a("DocumentReference.set",t);try{return t?Object(i.sb)(this._delegate,e,t):Object(i.sb)(this._delegate,e)}catch(e){throw w(e,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return 1===arguments.length?Object(i.yb)(this._delegate,e):Object(i.yb)(this._delegate,e,t,...n)}catch(e){throw w(e,"updateDoc()","DocumentReference.update()")}}delete(){return Object(i.L)(this._delegate)}onSnapshot(...e){const t=b(e),n=I(e,e=>new _(this.firestore,new i.f(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)));return Object(i.kb)(this._delegate,t,n)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?Object(i.Y)(this._delegate):"server"===(null==e?void 0:e.source)?Object(i.Z)(this._delegate):Object(i.X)(this._delegate),t.then(e=>new _(this.firestore,new i.f(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)))}withConverter(e){return new v(this.firestore,e?this._delegate.withConverter(y.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function w(e,t,n){return e.message=e.message.replace(t,n),e}function b(e){for(const t of e)if("object"==typeof t&&!l(t))return t;return{}}function I(e,t){var n,r;let i;return i=l(e[0])?e[0]:l(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class _{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new v(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Object(i.ub)(this._delegate,e._delegate)}}class T extends _{data(e){const t=this._delegate.data(e);return Object(i.A)(void 0!==t,"Document in a QueryDocumentSnapshot should exist"),t}}class E{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new p(e)}where(e,t,n){try{return new E(this.firestore,Object(i.nb)(this._delegate,Object(i.Ab)(e,t,n)))}catch(e){throw w(e,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new E(this.firestore,Object(i.nb)(this._delegate,Object(i.mb)(e,t)))}catch(e){throw w(e,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new E(this.firestore,Object(i.nb)(this._delegate,Object(i.gb)(e)))}catch(e){throw w(e,"limit()","Query.limit()")}}limitToLast(e){try{return new E(this.firestore,Object(i.nb)(this._delegate,Object(i.hb)(e)))}catch(e){throw w(e,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new E(this.firestore,Object(i.nb)(this._delegate,Object(i.wb)(...e)))}catch(e){throw w(e,"startAt()","Query.startAt()")}}startAfter(...e){try{return new E(this.firestore,Object(i.nb)(this._delegate,Object(i.vb)(...e)))}catch(e){throw w(e,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new E(this.firestore,Object(i.nb)(this._delegate,Object(i.U)(...e)))}catch(e){throw w(e,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new E(this.firestore,Object(i.nb)(this._delegate,Object(i.T)(...e)))}catch(e){throw w(e,"endAt()","Query.endAt()")}}isEqual(e){return Object(i.ob)(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?Object(i.bb)(this._delegate):"server"===(null==e?void 0:e.source)?Object(i.cb)(this._delegate):Object(i.ab)(this._delegate),t.then(e=>new S(this.firestore,new i.p(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)))}onSnapshot(...e){const t=b(e),n=I(e,e=>new S(this.firestore,new i.p(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)));return Object(i.kb)(this._delegate,t,n)}withConverter(e){return new E(this.firestore,e?this._delegate.withConverter(y.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class k{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new T(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class S{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new E(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new T(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(e=>new k(this._firestore,e))}forEach(e,t){this._delegate.forEach(n=>{e.call(t,new T(this._firestore,n))})}isEqual(e){return Object(i.ub)(this._delegate,e._delegate)}}class A extends E{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new v(this.firestore,e):null}doc(e){try{return new v(this.firestore,void 0===e?Object(i.O)(this._delegate):Object(i.O)(this._delegate,e))}catch(e){throw w(e,"doc()","CollectionReference.doc()")}}add(e){return Object(i.E)(this._delegate,e).then(e=>new v(this.firestore,e))}isEqual(e){return Object(i.pb)(this._delegate,e._delegate)}withConverter(e){return new A(this.firestore,e?this._delegate.withConverter(y.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function N(e){return Object(i.z)(e,i.e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(...e){this._delegate=new i.g(...e)}static documentId(){return new O(i.y.keyField().canonicalString())}isEqual(e){return(e=Object(s.k)(e))instanceof i.g&&this._delegate._internalPath.isEqual(e._internalPath)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C{constructor(e){this._delegate=e}static serverTimestamp(){const e=Object(i.rb)();return e._methodName="FieldValue.serverTimestamp",new C(e)}static delete(){const e=Object(i.M)();return e._methodName="FieldValue.delete",new C(e)}static arrayUnion(...e){const t=Object(i.G)(...e);return t._methodName="FieldValue.arrayUnion",new C(t)}static arrayRemove(...e){const t=Object(i.F)(...e);return t._methodName="FieldValue.arrayRemove",new C(t)}static increment(e){const t=Object(i.eb)(e);return t._methodName="FieldValue.increment",new C(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D={Firestore:f,GeoPoint:i.k,Timestamp:i.r,Blob:h,Transaction:m,WriteBatch:g,DocumentReference:v,DocumentSnapshot:_,Query:E,QueryDocumentSnapshot:T,QuerySnapshot:S,CollectionReference:A,FieldPath:O,FieldValue:C,setLogLevel:function(e){Object(i.tb)(e)},CACHE_SIZE_UNLIMITED:i.c};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var R,P;R=r.a,P=(e,t)=>new f(e,t,new d),R.INTERNAL.registerComponent(new o.a("firestore-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("firestore").getImmediate();return P(t,n)},"PUBLIC").setServiceProps(Object.assign({},D))),R.registerVersion("@firebase/firestore-compat","0.1.10")}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zaGFyZGVkL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3NoYXJkZWQvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3V0aWwvZGlzdC9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL3NoYXJkZWQvLi9ub2RlX21vZHVsZXMvdHNsaWIvdHNsaWIuZXM2LmpzIiwid2VicGFjazovL3NoYXJkZWQvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2F1dGgvZGlzdC9lc20yMDE3L2luZGV4LTgzOWRlNTEwLmpzIiwid2VicGFjazovL3NoYXJkZWQvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2F1dGgvZGlzdC9lc20yMDE3L2ludGVybmFsLmpzIiwid2VicGFjazovL3NoYXJkZWQvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2ZpcmVzdG9yZS9kaXN0L2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vc2hhcmRlZC8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvYXBwL2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vc2hhcmRlZC8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvbG9nZ2VyL2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vc2hhcmRlZC8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvY29tcG9uZW50L2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vc2hhcmRlZC8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2Uvd2ViY2hhbm5lbC13cmFwcGVyL2Rpc3QvaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly9zaGFyZGVkLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9hcHAtY29tcGF0L2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vc2hhcmRlZC8od2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanMiLCJ3ZWJwYWNrOi8vc2hhcmRlZC8uL25vZGVfbW9kdWxlcy91dWlkL2xpYi9ybmctYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly9zaGFyZGVkLy4vbm9kZV9tb2R1bGVzL3V1aWQvbGliL2J5dGVzVG9VdWlkLmpzIiwid2VicGFjazovL3NoYXJkZWQvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vc2hhcmRlZC8uL25vZGVfbW9kdWxlcy91dWlkL2luZGV4LmpzIiwid2VicGFjazovL3NoYXJkZWQvLi9ub2RlX21vZHVsZXMvdXVpZC92MS5qcyIsIndlYnBhY2s6Ly9zaGFyZGVkLy4vbm9kZV9tb2R1bGVzL3V1aWQvdjQuanMiLCJ3ZWJwYWNrOi8vc2hhcmRlZC8uL25vZGVfbW9kdWxlcy9maXJlYmFzZS9jb21wYXQvYXBwL2Rpc3QvaW5kZXguZXNtLmpzIiwid2VicGFjazovL3NoYXJkZWQvLi9ub2RlX21vZHVsZXMvZmlyZWJhc2UvY29tcGF0L2F1dGgvZGlzdC9pbmRleC5lc20uanMiLCJ3ZWJwYWNrOi8vc2hhcmRlZC8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvYXV0aC1jb21wYXQvZGlzdC9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL3NoYXJkZWQvLi9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwid2VicGFjazovL3NoYXJkZWQvLi9ub2RlX21vZHVsZXMvZmlyZWJhc2UvZmlyZXN0b3JlL2Rpc3QvaW5kZXguZXNtLmpzIiwid2VicGFjazovL3NoYXJkZWQvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2ZpcmVzdG9yZS1jb21wYXQvZGlzdC9pbmRleC5lc20yMDE3LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwic3RyaW5nVG9CeXRlQXJyYXkkMSIsInN0ciIsIm91dCIsImxlbmd0aCIsImNoYXJDb2RlQXQiLCJiYXNlNjQiLCJieXRlVG9DaGFyTWFwXyIsImNoYXJUb0J5dGVNYXBfIiwiYnl0ZVRvQ2hhck1hcFdlYlNhZmVfIiwiY2hhclRvQnl0ZU1hcFdlYlNhZmVfIiwiRU5DT0RFRF9WQUxTX0JBU0UiLCJ0aGlzIiwiSEFTX05BVElWRV9TVVBQT1JUIiwiYXRvYiIsImlucHV0Iiwid2ViU2FmZSIsIkFycmF5IiwiaXNBcnJheSIsIkVycm9yIiwiaW5pdF8iLCJieXRlVG9DaGFyTWFwIiwib3V0cHV0IiwiYnl0ZTEiLCJoYXZlQnl0ZTIiLCJieXRlMiIsImhhdmVCeXRlMyIsImJ5dGUzIiwib3V0Qnl0ZTEiLCJvdXRCeXRlMiIsIm91dEJ5dGUzIiwib3V0Qnl0ZTQiLCJwdXNoIiwiam9pbiIsImJ0b2EiLCJlbmNvZGVCeXRlQXJyYXkiLCJieXRlcyIsInBvcyIsImMxIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiYzIiLCJ1IiwiYzMiLCJieXRlQXJyYXlUb1N0cmluZyIsImRlY29kZVN0cmluZ1RvQnl0ZUFycmF5IiwiY2hhclRvQnl0ZU1hcCIsImNoYXJBdCIsImJ5dGU0IiwiRU5DT0RFRF9WQUxTIiwiRU5DT0RFRF9WQUxTX1dFQlNBRkUiLCJiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyIsInV0ZjhCeXRlcyIsImJhc2U2NEVuY29kZSIsInJlcGxhY2UiLCJiYXNlNjREZWNvZGUiLCJkZWNvZGVTdHJpbmciLCJlIiwiY29uc29sZSIsImVycm9yIiwiZGVlcEV4dGVuZCIsInRhcmdldCIsInNvdXJjZSIsImNvbnN0cnVjdG9yIiwiRGF0ZSIsImdldFRpbWUiLCJ1bmRlZmluZWQiLCJwcm9wIiwiRGVmZXJyZWQiLCJyZWplY3QiLCJyZXNvbHZlIiwicHJvbWlzZSIsIlByb21pc2UiLCJjYWxsYmFjayIsImNhdGNoIiwiY3JlYXRlTW9ja1VzZXJUb2tlbiIsInRva2VuIiwicHJvamVjdElkIiwidWlkIiwicHJvamVjdCIsImlhdCIsInN1YiIsInVzZXJfaWQiLCJwYXlsb2FkIiwiYXNzaWduIiwiaXNzIiwiYXVkIiwiZXhwIiwiYXV0aF90aW1lIiwiZmlyZWJhc2UiLCJzaWduX2luX3Byb3ZpZGVyIiwiaWRlbnRpdGllcyIsIkpTT04iLCJzdHJpbmdpZnkiLCJhbGciLCJ0eXBlIiwiZ2V0VUEiLCJuYXZpZ2F0b3IiLCJpc01vYmlsZUNvcmRvdmEiLCJ3aW5kb3ciLCJ0ZXN0IiwiaXNOb2RlIiwidG9TdHJpbmciLCJnbG9iYWwiLCJwcm9jZXNzIiwiaXNCcm93c2VyIiwic2VsZiIsImlzQnJvd3NlckV4dGVuc2lvbiIsInJ1bnRpbWUiLCJjaHJvbWUiLCJicm93c2VyIiwiaWQiLCJpc1JlYWN0TmF0aXZlIiwiaXNFbGVjdHJvbiIsImluZGV4T2YiLCJpc0lFIiwidWEiLCJpc1VXUCIsImlzU2FmYXJpIiwidXNlckFnZW50IiwiaW5jbHVkZXMiLCJpc0luZGV4ZWREQkF2YWlsYWJsZSIsImluZGV4ZWREQiIsIkZpcmViYXNlRXJyb3IiLCJjb2RlIiwibWVzc2FnZSIsImN1c3RvbURhdGEiLCJzdXBlciIsInNldFByb3RvdHlwZU9mIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJFcnJvckZhY3RvcnkiLCJzZXJ2aWNlIiwic2VydmljZU5hbWUiLCJlcnJvcnMiLCJkYXRhIiwiZnVsbENvZGUiLCJ0ZW1wbGF0ZSIsIlBBVFRFUk4iLCJfIiwicmVwbGFjZVRlbXBsYXRlIiwiZnVsbE1lc3NhZ2UiLCJjb250YWlucyIsIm9iaiIsImlzRW1wdHkiLCJkZWVwRXF1YWwiLCJhIiwiYiIsImFLZXlzIiwia2V5cyIsImJLZXlzIiwiayIsImFQcm9wIiwiYlByb3AiLCJpc09iamVjdCIsInRoaW5nIiwicXVlcnlzdHJpbmciLCJxdWVyeXN0cmluZ1BhcmFtcyIsInBhcmFtcyIsImVudHJpZXMiLCJmb3JFYWNoIiwiYXJyYXlWYWwiLCJlbmNvZGVVUklDb21wb25lbnQiLCJxdWVyeXN0cmluZ0RlY29kZSIsInNwbGl0IiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiZXh0cmFjdFF1ZXJ5c3RyaW5nIiwidXJsIiwicXVlcnlTdGFydCIsImZyYWdtZW50U3RhcnQiLCJzdWJzdHJpbmciLCJjcmVhdGVTdWJzY3JpYmUiLCJleGVjdXRvciIsIm9uTm9PYnNlcnZlcnMiLCJwcm94eSIsIk9ic2VydmVyUHJveHkiLCJzdWJzY3JpYmUiLCJvYnNlcnZlcnMiLCJ1bnN1YnNjcmliZXMiLCJvYnNlcnZlckNvdW50IiwidGFzayIsImZpbmFsaXplZCIsInRoZW4iLCJmb3JFYWNoT2JzZXJ2ZXIiLCJvYnNlcnZlciIsIm5leHQiLCJjbG9zZSIsImNvbXBsZXRlIiwibmV4dE9yT2JzZXJ2ZXIiLCJtZXRob2RzIiwibWV0aG9kIiwiaW1wbGVtZW50c0FueU1ldGhvZHMiLCJub29wIiwidW5zdWIiLCJ1bnN1YnNjcmliZU9uZSIsImZpbmFsRXJyb3IiLCJmbiIsInNlbmRPbmUiLCJlcnIiLCJnZXRNb2R1bGFySW5zdGFuY2UiLCJfZGVsZWdhdGUiLCJfX3Jlc3QiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsIlByb3ZpZGVySWQiLCJGQUNFQk9PSyIsIkdJVEhVQiIsIkdPT0dMRSIsIlBBU1NXT1JEIiwiUEhPTkUiLCJUV0lUVEVSIiwiQWN0aW9uQ29kZU9wZXJhdGlvbiIsIkVNQUlMX1NJR05JTiIsIlBBU1NXT1JEX1JFU0VUIiwiUkVDT1ZFUl9FTUFJTCIsIlJFVkVSVF9TRUNPTkRfRkFDVE9SX0FERElUSU9OIiwiVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwiLCJWRVJJRllfRU1BSUwiLCJfcHJvZEVycm9yTWFwIiwiZGVidWdFcnJvck1hcCIsInByb2RFcnJvck1hcCIsIl9ERUZBVUxUX0FVVEhfRVJST1JfRkFDVE9SWSIsImxvZ0NsaWVudCIsIl9sb2dFcnJvciIsIm1zZyIsImFyZ3MiLCJsb2dMZXZlbCIsIkVSUk9SIiwiX2ZhaWwiLCJhdXRoT3JDb2RlIiwicmVzdCIsImNyZWF0ZUVycm9ySW50ZXJuYWwiLCJfY3JlYXRlRXJyb3IiLCJfZXJyb3JXaXRoQ3VzdG9tTWVzc2FnZSIsImF1dGgiLCJlcnJvck1hcCIsImFwcE5hbWUiLCJfYXNzZXJ0SW5zdGFuY2VPZiIsImluc3RhbmNlIiwiZnVsbFBhcmFtcyIsInNsaWNlIiwiX2Vycm9yRmFjdG9yeSIsIl9hc3NlcnQiLCJhc3NlcnRpb24iLCJkZWJ1Z0ZhaWwiLCJmYWlsdXJlIiwiZGVidWdBc3NlcnQiLCJpbnN0YW5jZUNhY2hlIiwiTWFwIiwiX2dldEluc3RhbmNlIiwiY2xzIiwiRnVuY3Rpb24iLCJzZXQiLCJfZ2V0Q3VycmVudFVybCIsIl9hIiwibG9jYXRpb24iLCJocmVmIiwiX2lzSHR0cE9ySHR0cHMiLCJfZ2V0Q3VycmVudFNjaGVtZSIsInByb3RvY29sIiwic2hvcnREZWxheSIsImxvbmdEZWxheSIsImlzTW9iaWxlIiwib25MaW5lIiwiTWF0aCIsIm1pbiIsIl9lbXVsYXRvclVybCIsImNvbmZpZyIsInBhdGgiLCJlbXVsYXRvciIsInN0YXJ0c1dpdGgiLCJGZXRjaFByb3ZpZGVyIiwiZmV0Y2hJbXBsIiwiaGVhZGVyc0ltcGwiLCJyZXNwb25zZUltcGwiLCJmZXRjaCIsIkhlYWRlcnMiLCJSZXNwb25zZSIsIlNFUlZFUl9FUlJPUl9NQVAiLCJERUZBVUxUX0FQSV9USU1FT1VUX01TIiwiX2FkZFRpZElmTmVjZXNzYXJ5IiwicmVxdWVzdCIsInRlbmFudElkIiwiYXN5bmMiLCJfcGVyZm9ybUFwaVJlcXVlc3QiLCJjdXN0b21FcnJvck1hcCIsIl9wZXJmb3JtRmV0Y2hXaXRoRXJyb3JIYW5kbGluZyIsImJvZHkiLCJxdWVyeSIsImFwaUtleSIsImhlYWRlcnMiLCJfZ2V0QWRkaXRpb25hbEhlYWRlcnMiLCJsYW5ndWFnZUNvZGUiLCJfZ2V0RmluYWxUYXJnZXQiLCJhcGlIb3N0IiwicmVmZXJyZXJQb2xpY3kiLCJmZXRjaEZuIiwiX2NhbkluaXRFbXVsYXRvciIsIm5ldHdvcmtUaW1lb3V0IiwiTmV0d29ya1RpbWVvdXQiLCJyZXNwb25zZSIsInJhY2UiLCJjbGVhck5ldHdvcmtUaW1lb3V0IiwianNvbiIsIl9tYWtlVGFnZ2VkRXJyb3IiLCJvayIsImVycm9yTWVzc2FnZSIsInNlcnZlckVycm9yQ29kZSIsInNlcnZlckVycm9yTWVzc2FnZSIsImF1dGhFcnJvciIsInRvTG93ZXJDYXNlIiwiX3BlcmZvcm1TaWduSW5SZXF1ZXN0Iiwic2VydmVyUmVzcG9uc2UiLCJfc2VydmVyUmVzcG9uc2UiLCJob3N0IiwiYmFzZSIsImFwaVNjaGVtZSIsInRpbWVyIiwic2V0VGltZW91dCIsImNsZWFyVGltZW91dCIsImVycm9yUGFyYW1zIiwiZW1haWwiLCJwaG9uZU51bWJlciIsIl90b2tlblJlc3BvbnNlIiwidXRjVGltZXN0YW1wVG9EYXRlU3RyaW5nIiwidXRjVGltZXN0YW1wIiwiZGF0ZSIsIk51bWJlciIsImlzTmFOIiwidG9VVENTdHJpbmciLCJzZWNvbmRzU3RyaW5nVG9NaWxsaXNlY29uZHMiLCJzZWNvbmRzIiwiX3BhcnNlVG9rZW4iLCJhbGdvcml0aG0iLCJzaWduYXR1cmUiLCJkZWNvZGVkIiwicGFyc2UiLCJfbG9nb3V0SWZJbnZhbGlkYXRlZCIsInVzZXIiLCJieXBhc3NBdXRoU3RhdGUiLCJpc1VzZXJJbnZhbGlkYXRlZCIsImN1cnJlbnRVc2VyIiwic2lnbk91dCIsIlByb2FjdGl2ZVJlZnJlc2giLCJpc1J1bm5pbmciLCJ0aW1lcklkIiwiZXJyb3JCYWNrb2ZmIiwic2NoZWR1bGUiLCJ3YXNFcnJvciIsImludGVydmFsIiwic3RzVG9rZW5NYW5hZ2VyIiwiZXhwaXJhdGlvblRpbWUiLCJub3ciLCJtYXgiLCJnZXRJbnRlcnZhbCIsIml0ZXJhdGlvbiIsImdldElkVG9rZW4iLCJVc2VyTWV0YWRhdGEiLCJjcmVhdGVkQXQiLCJsYXN0TG9naW5BdCIsIl9pbml0aWFsaXplVGltZSIsImxhc3RTaWduSW5UaW1lIiwiY3JlYXRpb25UaW1lIiwibWV0YWRhdGEiLCJfcmVsb2FkV2l0aG91dFNhdmluZyIsImlkVG9rZW4iLCJnZXRBY2NvdW50SW5mbyIsInVzZXJzIiwiY29yZUFjY291bnQiLCJfbm90aWZ5UmVsb2FkTGlzdGVuZXIiLCJuZXdQcm92aWRlckRhdGEiLCJwcm92aWRlclVzZXJJbmZvIiwibWFwIiwicHJvdmlkZXJJZCIsInByb3ZpZGVyIiwicmF3SWQiLCJkaXNwbGF5TmFtZSIsInBob3RvVVJMIiwicGhvdG9VcmwiLCJwcm92aWRlckRhdGEiLCJvcmlnaW5hbCIsIm5ld0RhdGEiLCJmaWx0ZXIiLCJzb21lIiwib2xkSXNBbm9ueW1vdXMiLCJpc0Fub255bW91cyIsIm5ld0lzQW5vbnltb3VzIiwicGFzc3dvcmRIYXNoIiwidXBkYXRlcyIsImxvY2FsSWQiLCJlbWFpbFZlcmlmaWVkIiwiU3RzVG9rZW5NYW5hZ2VyIiwicmVmcmVzaFRva2VuIiwiYWNjZXNzVG9rZW4iLCJleHBpcmVzSW4iLCJwYXJzZWRUb2tlbiIsIl90b2tlbkV4cGlyZXNJbiIsInVwZGF0ZVRva2Vuc0FuZEV4cGlyYXRpb24iLCJmb3JjZVJlZnJlc2giLCJpc0V4cGlyZWQiLCJyZWZyZXNoIiwib2xkVG9rZW4iLCJ0b2tlbkFwaUhvc3QiLCJhY2Nlc3NfdG9rZW4iLCJleHBpcmVzX2luIiwicmVmcmVzaF90b2tlbiIsInJlcXVlc3RTdHNUb2tlbiIsImV4cGlyZXNJblNlYyIsIm1hbmFnZXIiLCJ0b0pTT04iLCJhc3NlcnRTdHJpbmdPclVuZGVmaW5lZCIsIm9wdCIsInByb2FjdGl2ZVJlZnJlc2giLCJyZWxvYWRVc2VySW5mbyIsInJlbG9hZExpc3RlbmVyIiwiZ2V0VG9rZW4iLCJfcGVyc2lzdFVzZXJJZkN1cnJlbnQiLCJfbm90aWZ5TGlzdGVuZXJzSWZDdXJyZW50IiwidXNlckludGVybmFsIiwiY2xhaW1zIiwic2lnbkluUHJvdmlkZXIiLCJhdXRoVGltZSIsImlzc3VlZEF0VGltZSIsInNpZ25JblNlY29uZEZhY3RvciIsImdldElkVG9rZW5SZXN1bHQiLCJyZWxvYWQiLCJ1c2VySW5mbyIsIl9jb3B5IiwiX2Fzc2lnbiIsIl9jbG9uZSIsIl9zdGFydCIsIl9zdG9wIiwidG9rZW5zUmVmcmVzaGVkIiwidXBkYXRlRnJvbVNlcnZlclJlc3BvbnNlIiwiZGVsZXRlQWNjb3VudCIsImNsZWFyUmVmcmVzaFRva2VuIiwiX3JlZGlyZWN0RXZlbnRJZCIsIl9iIiwiX2MiLCJfZCIsIl9lIiwiX2YiLCJfZyIsIl9oIiwicGxhaW5PYmplY3RUb2tlbk1hbmFnZXIiLCJmcm9tSlNPTiIsImlkVG9rZW5SZXNwb25zZSIsIkluTWVtb3J5UGVyc2lzdGVuY2UiLCJzdG9yYWdlIiwiX2tleSIsIl9saXN0ZW5lciIsImluTWVtb3J5UGVyc2lzdGVuY2UiLCJfcGVyc2lzdGVuY2VLZXlOYW1lIiwiUGVyc2lzdGVuY2VVc2VyTWFuYWdlciIsInBlcnNpc3RlbmNlIiwidXNlcktleSIsImZ1bGxVc2VyS2V5IiwiZnVsbFBlcnNpc3RlbmNlS2V5IiwiYm91bmRFdmVudEhhbmRsZXIiLCJfb25TdG9yYWdlRXZlbnQiLCJfYWRkTGlzdGVuZXIiLCJfc2V0IiwiYmxvYiIsIl9nZXQiLCJfZnJvbUpTT04iLCJfcmVtb3ZlIiwibmV3UGVyc2lzdGVuY2UiLCJnZXRDdXJyZW50VXNlciIsInJlbW92ZUN1cnJlbnRVc2VyIiwic2V0Q3VycmVudFVzZXIiLCJfcmVtb3ZlTGlzdGVuZXIiLCJwZXJzaXN0ZW5jZUhpZXJhcmNoeSIsImF2YWlsYWJsZVBlcnNpc3RlbmNlcyIsImFsbCIsIl9pc0F2YWlsYWJsZSIsInNlbGVjdGVkUGVyc2lzdGVuY2UiLCJ1c2VyVG9NaWdyYXRlIiwibWlncmF0aW9uSGllcmFyY2h5IiwiX3Nob3VsZEFsbG93TWlncmF0aW9uIiwiX2dldEJyb3dzZXJOYW1lIiwiX2lzSUVNb2JpbGUiLCJfaXNGaXJlZm94IiwiX2lzQmxhY2tCZXJyeSIsIl9pc1dlYk9TIiwiX2lzU2FmYXJpIiwiX2lzQ2hyb21lSU9TIiwiX2lzQW5kcm9pZCIsInJlIiwibWF0Y2hlcyIsIm1hdGNoIiwiX2lzSU9TIiwiX2lzTW9iaWxlQnJvd3NlciIsIl9nZXRDbGllbnRWZXJzaW9uIiwiY2xpZW50UGxhdGZvcm0iLCJmcmFtZXdvcmtzIiwicmVwb3J0ZWRQbGF0Zm9ybSIsInJlcG9ydGVkRnJhbWV3b3JrcyIsImFwcCIsImVtdWxhdG9yQ29uZmlnIiwib3BlcmF0aW9ucyIsImF1dGhTdGF0ZVN1YnNjcmlwdGlvbiIsImlkVG9rZW5TdWJzY3JpcHRpb24iLCJyZWRpcmVjdFVzZXIiLCJpc1Byb2FjdGl2ZVJlZnJlc2hFbmFibGVkIiwiX2lzSW5pdGlhbGl6ZWQiLCJfZGVsZXRlZCIsIl9pbml0aWFsaXphdGlvblByb21pc2UiLCJfcG9wdXBSZWRpcmVjdFJlc29sdmVyIiwibGFzdE5vdGlmaWVkVWlkIiwic2V0dGluZ3MiLCJhcHBWZXJpZmljYXRpb25EaXNhYmxlZEZvclRlc3RpbmciLCJjbGllbnRWZXJzaW9uIiwic2RrQ2xpZW50VmVyc2lvbiIsInBvcHVwUmVkaXJlY3RSZXNvbHZlciIsInF1ZXVlIiwicGVyc2lzdGVuY2VNYW5hZ2VyIiwiX3Nob3VsZEluaXRQcm9hY3RpdmVseSIsIl9pbml0aWFsaXplIiwiaW5pdGlhbGl6ZUN1cnJlbnRVc2VyIiwiYXNzZXJ0ZWRQZXJzaXN0ZW5jZSIsIl9jdXJyZW50VXNlciIsIl91cGRhdGVDdXJyZW50VXNlciIsInN0b3JlZFVzZXIiLCJhdXRoRG9tYWluIiwiZ2V0T3JJbml0UmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIiLCJyZWRpcmVjdFVzZXJFdmVudElkIiwic3RvcmVkVXNlckV2ZW50SWQiLCJyZXN1bHQiLCJ0cnlSZWRpcmVjdFNpZ25JbiIsImRpcmVjdGx5U2V0Q3VycmVudFVzZXIiLCJyZWxvYWRBbmRTZXRDdXJyZW50VXNlck9yQ2xlYXIiLCJyZWRpcmVjdFJlc29sdmVyIiwiX2NvbXBsZXRlUmVkaXJlY3RGbiIsIl9zZXRSZWRpcmVjdFVzZXIiLCJuYXZpZ2F0b3JMYW5ndWFnZSIsImxhbmd1YWdlcyIsImxhbmd1YWdlIiwiX2dldFVzZXJMYW5ndWFnZSIsInVzZXJFeHRlcm4iLCJub3RpZnlBdXRoTGlzdGVuZXJzIiwicmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIiLCJzZXRQZXJzaXN0ZW5jZSIsImNvbXBsZXRlZCIsInJlZ2lzdGVyU3RhdGVMaXN0ZW5lciIsInJlZGlyZWN0TWFuYWdlciIsInJlc29sdmVyIiwiX3JlZGlyZWN0UGVyc2lzdGVuY2UiLCJfc3RhcnRQcm9hY3RpdmVSZWZyZXNoIiwiX3N0b3BQcm9hY3RpdmVSZWZyZXNoIiwiY3VycmVudFVpZCIsInN1YnNjcmlwdGlvbiIsImNiIiwiYWRkT2JzZXJ2ZXIiLCJhY3Rpb24iLCJmcmFtZXdvcmsiLCJzb3J0IiwiX2dldEZyYW1ld29ya3MiLCJvcHRpb25zIiwiYXBwSWQiLCJfY2FzdEF1dGgiLCJjb25uZWN0QXV0aEVtdWxhdG9yIiwiYXV0aEludGVybmFsIiwiZGlzYWJsZVdhcm5pbmdzIiwiZXh0cmFjdFByb3RvY29sIiwicG9ydCIsImF1dGhvcml0eSIsImV4ZWMiLCJzdWJzdHIiLCJob3N0QW5kUG9ydCIsInBvcCIsImJyYWNrZXRlZElQdjYiLCJwYXJzZVBvcnQiLCJleHRyYWN0SG9zdEFuZFBvcnQiLCJwb3J0U3RyIiwiZnJlZXplIiwiYXR0YWNoQmFubmVyIiwiZWwiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzdHkiLCJzdHlsZSIsImlubmVyVGV4dCIsInBvc2l0aW9uIiwid2lkdGgiLCJiYWNrZ3JvdW5kQ29sb3IiLCJib3JkZXIiLCJjb2xvciIsImJvdHRvbSIsImxlZnQiLCJtYXJnaW4iLCJ6SW5kZXgiLCJ0ZXh0QWxpZ24iLCJjbGFzc0xpc3QiLCJhZGQiLCJhcHBlbmRDaGlsZCIsImluZm8iLCJyZWFkeVN0YXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImVtaXRFbXVsYXRvcldhcm5pbmciLCJwcm90b2NvbEVuZCIsIkF1dGhDcmVkZW50aWFsIiwic2lnbkluTWV0aG9kIiwiX2F1dGgiLCJfaWRUb2tlbiIsInJlc2V0UGFzc3dvcmQiLCJ1cGRhdGVFbWFpbFBhc3N3b3JkIiwic2VuZE9vYkNvZGUiLCJFbWFpbEF1dGhDcmVkZW50aWFsIiwiX2VtYWlsIiwiX3Bhc3N3b3JkIiwiX3RlbmFudElkIiwicGFzc3dvcmQiLCJvb2JDb2RlIiwiX2Zyb21FbWFpbEFuZFBhc3N3b3JkIiwiX2Zyb21FbWFpbEFuZENvZGUiLCJzaWduSW5XaXRoUGFzc3dvcmQiLCJyZXR1cm5TZWN1cmVUb2tlbiIsInNpZ25JbldpdGhFbWFpbExpbmskMSIsInNpZ25JbldpdGhFbWFpbExpbmtGb3JMaW5raW5nIiwiX2dldElkVG9rZW5SZXNwb25zZSIsInNpZ25JbldpdGhJZHAiLCJhcmd1bWVudHMiLCJwZW5kaW5nVG9rZW4iLCJjcmVkIiwibm9uY2UiLCJvYXV0aFRva2VuIiwib2F1dGhUb2tlblNlY3JldCIsInNlY3JldCIsImJ1aWxkUmVxdWVzdCIsImF1dG9DcmVhdGUiLCJyZXF1ZXN0VXJpIiwicG9zdEJvZHkiLCJWRVJJRllfUEhPTkVfTlVNQkVSX0ZPUl9FWElTVElOR19FUlJPUl9NQVBfIiwiUGhvbmVBdXRoQ3JlZGVudGlhbCIsInZlcmlmaWNhdGlvbklkIiwidmVyaWZpY2F0aW9uQ29kZSIsInRlbXBvcmFyeVByb29mIiwic2lnbkluV2l0aFBob25lTnVtYmVyJDEiLCJfbWFrZVZlcmlmaWNhdGlvblJlcXVlc3QiLCJsaW5rV2l0aFBob25lTnVtYmVyJDEiLCJvcGVyYXRpb24iLCJ2ZXJpZnlQaG9uZU51bWJlckZvckV4aXN0aW5nIiwic2Vzc2lvbkluZm8iLCJhY3Rpb25MaW5rIiwic2VhcmNoUGFyYW1zIiwicGFyc2VNb2RlIiwiY29udGludWVVcmwiLCJsaW5rIiwiZG91YmxlRGVlcExpbmsiLCJpT1NEZWVwTGluayIsInBhcnNlRGVlcExpbmsiLCJFbWFpbEF1dGhQcm92aWRlciIsIlBST1ZJREVSX0lEIiwiZW1haWxMaW5rIiwiYWN0aW9uQ29kZVVybCIsInBhcnNlTGluayIsIkVNQUlMX1BBU1NXT1JEX1NJR05fSU5fTUVUSE9EIiwiRU1BSUxfTElOS19TSUdOX0lOX01FVEhPRCIsIkZlZGVyYXRlZEF1dGhQcm92aWRlciIsImRlZmF1bHRMYW5ndWFnZUNvZGUiLCJjdXN0b21QYXJhbWV0ZXJzIiwiY3VzdG9tT0F1dGhQYXJhbWV0ZXJzIiwiQmFzZU9BdXRoUHJvdmlkZXIiLCJzY29wZXMiLCJzY29wZSIsIk9BdXRoUHJvdmlkZXIiLCJfZnJvbVBhcmFtcyIsIl9jcmVkZW50aWFsIiwicmF3Tm9uY2UiLCJ1c2VyQ3JlZGVudGlhbCIsIm9hdXRoQ3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QiLCJ0b2tlblJlc3BvbnNlIiwib2F1dGhJZFRva2VuIiwib2F1dGhBY2Nlc3NUb2tlbiIsIkZhY2Vib29rQXV0aFByb3ZpZGVyIiwiRkFDRUJPT0tfU0lHTl9JTl9NRVRIT0QiLCJjcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCIsImNyZWRlbnRpYWwiLCJHb29nbGVBdXRoUHJvdmlkZXIiLCJhZGRTY29wZSIsIkdPT0dMRV9TSUdOX0lOX01FVEhPRCIsIkdpdGh1YkF1dGhQcm92aWRlciIsIkdJVEhVQl9TSUdOX0lOX01FVEhPRCIsIlNBTUxBdXRoQ3JlZGVudGlhbCIsIlNBTUxBdXRoUHJvdmlkZXIiLCJzYW1sQ3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QiLCJfY3JlYXRlIiwiVHdpdHRlckF1dGhQcm92aWRlciIsIlRXSVRURVJfU0lHTl9JTl9NRVRIT0QiLCJzaWduVXAiLCJVc2VyQ3JlZGVudGlhbEltcGwiLCJvcGVyYXRpb25UeXBlIiwiX2Zyb21JZFRva2VuUmVzcG9uc2UiLCJwcm92aWRlcklkRm9yUmVzcG9uc2UiLCJfdXBkYXRlVG9rZW5zSWZOZWNlc3NhcnkiLCJzaWduSW5Bbm9ueW1vdXNseSIsIl9wcm9jZXNzQ3JlZGVudGlhbFNhdmluZ01mYUNvbnRleHRJZk5lY2Vzc2FyeSIsIl9nZXRSZWF1dGhlbnRpY2F0aW9uUmVzb2x2ZXIiLCJfZnJvbUVycm9yQW5kT3BlcmF0aW9uIiwicHJvdmlkZXJEYXRhQXNOYW1lcyIsIlNldCIsInBpZCIsInVubGluayIsIl9hc3NlcnRMaW5rZWRTdGF0dXMiLCJkZWxldGVMaW5rZWRBY2NvdW50cyIsImRlbGV0ZVByb3ZpZGVyIiwicHJvdmlkZXJzTGVmdCIsInBkIiwiaGFzIiwiX2xpbmskMSIsIl9saW5rVG9JZFRva2VuIiwiX2Zvck9wZXJhdGlvbiIsImV4cGVjdGVkIiwiX3JlYXV0aGVudGljYXRlIiwicGFyc2VkIiwiX3NpZ25JbldpdGhDcmVkZW50aWFsIiwic2lnbkluV2l0aENyZWRlbnRpYWwiLCJsaW5rV2l0aENyZWRlbnRpYWwiLCJyZWF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFsIiwic2lnbkluV2l0aEN1c3RvbVRva2VuIiwiY3VzdG9tVG9rZW4iLCJzaWduSW5XaXRoQ3VzdG9tVG9rZW4kMSIsIk11bHRpRmFjdG9ySW5mb0ltcGwiLCJmYWN0b3JJZCIsIm1mYUVucm9sbG1lbnRJZCIsImVucm9sbG1lbnRUaW1lIiwiZW5yb2xsZWRBdCIsImVucm9sbG1lbnQiLCJQaG9uZU11bHRpRmFjdG9ySW5mbyIsIl9mcm9tU2VydmVyUmVzcG9uc2UiLCJwaG9uZUluZm8iLCJfc2V0QWN0aW9uQ29kZVNldHRpbmdzT25SZXF1ZXN0IiwiYWN0aW9uQ29kZVNldHRpbmdzIiwiZHluYW1pY0xpbmtEb21haW4iLCJjYW5IYW5kbGVDb2RlSW5BcHAiLCJoYW5kbGVDb2RlSW5BcHAiLCJpT1MiLCJidW5kbGVJZCIsImlPU0J1bmRsZUlkIiwiYW5kcm9pZCIsInBhY2thZ2VOYW1lIiwiYW5kcm9pZEluc3RhbGxBcHAiLCJpbnN0YWxsQXBwIiwiYW5kcm9pZE1pbmltdW1WZXJzaW9uQ29kZSIsIm1pbmltdW1WZXJzaW9uIiwiYW5kcm9pZFBhY2thZ2VOYW1lIiwic2VuZFBhc3N3b3JkUmVzZXRFbWFpbCIsImF1dGhNb2R1bGFyIiwicmVxdWVzdFR5cGUiLCJzZW5kUGFzc3dvcmRSZXNldEVtYWlsJDEiLCJjb25maXJtUGFzc3dvcmRSZXNldCIsIm5ld1Bhc3N3b3JkIiwiYXBwbHlBY3Rpb25Db2RlIiwiYXBwbHlBY3Rpb25Db2RlJDEiLCJjaGVja0FjdGlvbkNvZGUiLCJuZXdFbWFpbCIsIm1mYUluZm8iLCJtdWx0aUZhY3RvckluZm8iLCJwcmV2aW91c0VtYWlsIiwidmVyaWZ5UGFzc3dvcmRSZXNldENvZGUiLCJjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQiLCJzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZCIsInNlbmRTaWduSW5MaW5rVG9FbWFpbCIsInNlbmRTaWduSW5MaW5rVG9FbWFpbCQxIiwiaXNTaWduSW5XaXRoRW1haWxMaW5rIiwic2lnbkluV2l0aEVtYWlsTGluayIsImNyZWRlbnRpYWxXaXRoTGluayIsImZldGNoU2lnbkluTWV0aG9kc0ZvckVtYWlsIiwiaWRlbnRpZmllciIsImNvbnRpbnVlVXJpIiwic2lnbmluTWV0aG9kcyIsImNyZWF0ZUF1dGhVcmkiLCJzZW5kRW1haWxWZXJpZmljYXRpb24iLCJzZW5kRW1haWxWZXJpZmljYXRpb24kMSIsInZlcmlmeUJlZm9yZVVwZGF0ZUVtYWlsIiwidmVyaWZ5QW5kQ2hhbmdlRW1haWwiLCJ1cGRhdGVQcm9maWxlIiwicHJvZmlsZVJlcXVlc3QiLCJ1cGRhdGVQcm9maWxlJDEiLCJwYXNzd29yZFByb3ZpZGVyIiwiZmluZCIsInVwZGF0ZUVtYWlsIiwidXBkYXRlRW1haWxPclBhc3N3b3JkIiwidXBkYXRlUGFzc3dvcmQiLCJHZW5lcmljQWRkaXRpb25hbFVzZXJJbmZvIiwiaXNOZXdVc2VyIiwicHJvZmlsZSIsIkZlZGVyYXRlZEFkZGl0aW9uYWxVc2VySW5mb1dpdGhVc2VybmFtZSIsInVzZXJuYW1lIiwiRmFjZWJvb2tBZGRpdGlvbmFsVXNlckluZm8iLCJHaXRodWJBZGRpdGlvbmFsVXNlckluZm8iLCJsb2dpbiIsIkdvb2dsZUFkZGl0aW9uYWxVc2VySW5mbyIsIlR3aXR0ZXJBZGRpdGlvbmFsVXNlckluZm8iLCJzY3JlZW5OYW1lIiwiZ2V0QWRkaXRpb25hbFVzZXJJbmZvIiwicmF3VXNlckluZm8iLCJraW5kIiwiTXVsdGlGYWN0b3JTZXNzaW9uSW1wbCIsIm1mYVBlbmRpbmdDcmVkZW50aWFsIiwibXVsdGlGYWN0b3JTZXNzaW9uIiwicGVuZGluZ0NyZWRlbnRpYWwiLCJfZnJvbU1mYVBlbmRpbmdDcmVkZW50aWFsIiwiX2Zyb21JZHRva2VuIiwiTXVsdGlGYWN0b3JSZXNvbHZlckltcGwiLCJzZXNzaW9uIiwiaGludHMiLCJzaWduSW5SZXNvbHZlciIsImF1dGhFeHRlcm4iLCJtZmFSZXNwb25zZSIsIl9wcm9jZXNzIiwiYXNzZXJ0aW9uRXh0ZXJuIiwiZ2V0TXVsdGlGYWN0b3JSZXNvbHZlciIsImVycm9ySW50ZXJuYWwiLCJfZnJvbUVycm9yIiwiTXVsdGlGYWN0b3JVc2VySW1wbCIsImVucm9sbGVkRmFjdG9ycyIsIl9vblJlbG9hZCIsImdldFNlc3Npb24iLCJmaW5hbGl6ZU1mYVJlc3BvbnNlIiwiaW5mb09yVWlkIiwibXVsdGlGYWN0b3JVc2VyQ2FjaGUiLCJXZWFrTWFwIiwibXVsdGlGYWN0b3IiLCJ1c2VyTW9kdWxhciIsIl9mcm9tVXNlciIsIkJyb3dzZXJQZXJzaXN0ZW5jZUNsYXNzIiwic3RvcmFnZVJldHJpZXZlciIsInNldEl0ZW0iLCJyZW1vdmVJdGVtIiwiZ2V0SXRlbSIsIkJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlIiwibG9jYWxTdG9yYWdlIiwiZXZlbnQiLCJwb2xsIiwib25TdG9yYWdlRXZlbnQiLCJsaXN0ZW5lcnMiLCJsb2NhbENhY2hlIiwicG9sbFRpbWVyIiwic2FmYXJpTG9jYWxTdG9yYWdlTm90U3luY2VkIiwiX2lmcmFtZUNhbm5vdFN5bmNXZWJTdG9yYWdlIiwidG9wIiwiX2lzSWZyYW1lIiwiZmFsbGJhY2tUb1BvbGxpbmciLCJuZXdWYWx1ZSIsIm9sZFZhbHVlIiwiZm9yQWxsQ2hhbmdlZEtleXMiLCJfb2xkVmFsdWUiLCJub3RpZnlMaXN0ZW5lcnMiLCJkZXRhY2hMaXN0ZW5lciIsInN0b3BQb2xsaW5nIiwic3RvcmVkVmFsdWUiLCJ0cmlnZ2VyTGlzdGVuZXJzIiwiZG9jdW1lbnRNb2RlIiwibGlzdGVuZXIiLCJmcm9tIiwic2V0SW50ZXJ2YWwiLCJTdG9yYWdlRXZlbnQiLCJjbGVhckludGVydmFsIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInN0YXJ0UG9sbGluZyIsImF0dGFjaExpc3RlbmVyIiwiZGVsZXRlIiwic2l6ZSIsImJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlIiwiQnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZSIsInNlc3Npb25TdG9yYWdlIiwiYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZSIsIlJlY2VpdmVyIiwiZXZlbnRUYXJnZXQiLCJoYW5kbGVyc01hcCIsImhhbmRsZUV2ZW50IiwiZXhpc3RpbmdJbnN0YW5jZSIsInJlY2VpdmVycyIsInJlY2VpdmVyIiwiaXNMaXN0ZW5pbmd0byIsIm5ld0luc3RhbmNlIiwibWVzc2FnZUV2ZW50IiwiZXZlbnRJZCIsImV2ZW50VHlwZSIsImhhbmRsZXJzIiwicG9ydHMiLCJwb3N0TWVzc2FnZSIsInN0YXR1cyIsInByb21pc2VzIiwiaGFuZGxlciIsIm9yaWdpbiIsImZ1bGZpbGxlZCIsInJlYXNvbiIsIl9hbGxTZXR0bGVkIiwiZXZlbnRIYW5kbGVyIiwiX2dlbmVyYXRlRXZlbnRJZCIsInByZWZpeCIsImRpZ2l0cyIsInJhbmRvbSIsImZsb29yIiwiU2VuZGVyIiwibWVzc2FnZUNoYW5uZWwiLCJwb3J0MSIsIm9uTWVzc2FnZSIsInRpbWVvdXQiLCJNZXNzYWdlQ2hhbm5lbCIsImNvbXBsZXRpb25UaW1lciIsInN0YXJ0IiwiYWNrVGltZXIiLCJwb3J0MiIsImZpbmFsbHkiLCJyZW1vdmVNZXNzYWdlSGFuZGxlciIsIl93aW5kb3ciLCJfaXNXb3JrZXIiLCJEQl9OQU1FIiwiREJQcm9taXNlIiwiZ2V0T2JqZWN0U3RvcmUiLCJkYiIsImlzUmVhZFdyaXRlIiwidHJhbnNhY3Rpb24iLCJvYmplY3RTdG9yZSIsIl9vcGVuRGF0YWJhc2UiLCJvcGVuIiwiY3JlYXRlT2JqZWN0U3RvcmUiLCJrZXlQYXRoIiwib2JqZWN0U3RvcmVOYW1lcyIsImRlbGV0ZURhdGFiYXNlIiwidG9Qcm9taXNlIiwiX2RlbGV0ZURhdGFiYXNlIiwiX3B1dE9iamVjdCIsInB1dCIsIl9kZWxldGVPYmplY3QiLCJJbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlIiwicGVuZGluZ1dyaXRlcyIsInNlbmRlciIsInNlcnZpY2VXb3JrZXJSZWNlaXZlckF2YWlsYWJsZSIsImFjdGl2ZVNlcnZpY2VXb3JrZXIiLCJfd29ya2VySW5pdGlhbGl6YXRpb25Qcm9taXNlIiwiaW5pdGlhbGl6ZVNlcnZpY2VXb3JrZXJNZXNzYWdpbmciLCJvcCIsIm51bUF0dGVtcHRzIiwiX29wZW5EYiIsImluaXRpYWxpemVSZWNlaXZlciIsImluaXRpYWxpemVTZW5kZXIiLCJfc3Vic2NyaWJlIiwiX29yaWdpbiIsImtleVByb2Nlc3NlZCIsIl9wb2xsIiwiX2RhdGEiLCJzZXJ2aWNlV29ya2VyIiwicmVhZHkiLCJhY3RpdmUiLCJfZ2V0QWN0aXZlU2VydmljZVdvcmtlciIsInJlc3VsdHMiLCJfc2VuZCIsImNvbnRyb2xsZXIiLCJ3cml0ZSIsIl93aXRoUGVuZGluZ1dyaXRlIiwiX3dpdGhSZXRyaWVzIiwibm90aWZ5U2VydmljZVdvcmtlciIsImdldE9iamVjdCIsImdldEFsbFJlcXVlc3QiLCJnZXRBbGwiLCJrZXlzSW5SZXN1bHQiLCJmYmFzZV9rZXkiLCJsb2NhbEtleSIsImluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2UiLCJfbG9hZEpTIiwic2V0QXR0cmlidXRlIiwib25sb2FkIiwib25lcnJvciIsImNoYXJzZXQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsIl9nZW5lcmF0ZUNhbGxiYWNrTmFtZSIsIk1vY2tSZUNhcHRjaGEiLCJjb3VudGVyIiwiX3dpZGdldHMiLCJjb250YWluZXIiLCJwYXJhbWV0ZXJzIiwiTW9ja1dpZGdldCIsIm9wdFdpZGdldElkIiwiZ2V0UmVzcG9uc2UiLCJleGVjdXRlIiwiY29udGFpbmVyT3JJZCIsImRlbGV0ZWQiLCJyZXNwb25zZVRva2VuIiwiY2xpY2tIYW5kbGVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJpc1Zpc2libGUiLCJjaGVja0lmRGVsZXRlZCIsImxlbiIsImNoYXJzIiwiYWxsb3dlZENoYXJzIiwiZ2VuZXJhdGVSYW5kb21BbHBoYU51bWVyaWNTdHJpbmciLCJleHBpcmVkQ2FsbGJhY2siLCJfSlNMT0FEX0NBTExCQUNLIiwiTkVUV09SS19USU1FT1VUX0RFTEFZIiwiaG9zdExhbmd1YWdlIiwibGlicmFyeVNlcGFyYXRlbHlMb2FkZWQiLCJncmVjYXB0Y2hhIiwiaGwiLCJpc0hvc3RMYW5ndWFnZVZhbGlkIiwic2hvdWxkUmVzb2x2ZUltbWVkaWF0ZWx5IiwicmVjYXB0Y2hhIiwicmVuZGVyIiwid2lkZ2V0SWQiLCJNb2NrUmVDYXB0Y2hhTG9hZGVySW1wbCIsIkRFRkFVTFRfUEFSQU1TIiwidGhlbWUiLCJSZWNhcHRjaGFWZXJpZmllciIsImRlc3Ryb3llZCIsInRva2VuQ2hhbmdlTGlzdGVuZXJzIiwicmVuZGVyUHJvbWlzZSIsImlzSW52aXNpYmxlIiwibWFrZVRva2VuQ2FsbGJhY2siLCJfcmVjYXB0Y2hhTG9hZGVyIiwidmFsaWRhdGVTdGFydGluZ1N0YXRlIiwiYXNzZXJ0Tm90RGVzdHJveWVkIiwiZ2V0QXNzZXJ0ZWRSZWNhcHRjaGEiLCJ0b2tlbkNoYW5nZSIsIm1ha2VSZW5kZXJQcm9taXNlIiwicmVzZXQiLCJjbGVhcmVkT25lSW5zdGFuY2UiLCJjaGlsZE5vZGVzIiwibm9kZSIsInJlbW92ZUNoaWxkIiwic2l0ZWtleSIsImhhc0NoaWxkTm9kZXMiLCJleGlzdGluZyIsImdsb2JhbEZ1bmMiLCJpbml0IiwiZ3VhcmFudGVlZEVtcHR5IiwiZG9tUmVhZHkiLCJsb2FkIiwic2l0ZUtleSIsInJlY2FwdGNoYVNpdGVLZXkiLCJnZXRSZWNhcHRjaGFQYXJhbXMiLCJDb25maXJtYXRpb25SZXN1bHRJbXBsIiwib25Db25maXJtYXRpb24iLCJhdXRoQ3JlZGVudGlhbCIsIl9mcm9tVmVyaWZpY2F0aW9uIiwic2lnbkluV2l0aFBob25lTnVtYmVyIiwiYXBwVmVyaWZpZXIiLCJfdmVyaWZ5UGhvbmVOdW1iZXIiLCJsaW5rV2l0aFBob25lTnVtYmVyIiwicmVhdXRoZW50aWNhdGVXaXRoUGhvbmVOdW1iZXIiLCJ2ZXJpZmllciIsInJlY2FwdGNoYVRva2VuIiwidmVyaWZ5IiwicGhvbmVJbmZvT3B0aW9ucyIsInN0YXJ0RW5yb2xsUGhvbmVNZmEiLCJwaG9uZUVucm9sbG1lbnRJbmZvIiwicGhvbmVTZXNzaW9uSW5mbyIsIm11bHRpRmFjdG9ySGludCIsIm11bHRpRmFjdG9yVWlkIiwic3RhcnRTaWduSW5QaG9uZU1mYSIsInBob25lU2lnbkluSW5mbyIsInBob25lUmVzcG9uc2VJbmZvIiwic2VuZFBob25lVmVyaWZpY2F0aW9uQ29kZSIsIl9yZXNldCIsInVwZGF0ZVBob25lTnVtYmVyIiwicGhvbmVPcHRpb25zIiwiYXBwbGljYXRpb25WZXJpZmllciIsIl9mcm9tVG9rZW5SZXNwb25zZSIsIl93aXRoRGVmYXVsdFJlc29sdmVyIiwicmVzb2x2ZXJPdmVycmlkZSIsIlBIT05FX1NJR05fSU5fTUVUSE9EIiwiSWRwQ3JlZGVudGlhbCIsIl9idWlsZElkcFJlcXVlc3QiLCJzZXNzaW9uSWQiLCJyZXR1cm5JZHBDcmVkZW50aWFsIiwiX3NpZ25JbiIsIl9yZWF1dGgiLCJfbGluayIsIkFic3RyYWN0UG9wdXBSZWRpcmVjdE9wZXJhdGlvbiIsInBlbmRpbmdQcm9taXNlIiwiZXZlbnRNYW5hZ2VyIiwib25FeGVjdXRpb24iLCJyZWdpc3RlckNvbnN1bWVyIiwidXJsUmVzcG9uc2UiLCJnZXRJZHBUYXNrIiwidW5yZWdpc3RlckFuZENsZWFuVXAiLCJ1bnJlZ2lzdGVyQ29uc3VtZXIiLCJjbGVhblVwIiwiX1BPTExfV0lORE9XX0NMT1NFX1RJTUVPVVQiLCJzaWduSW5XaXRoUG9wdXAiLCJyZXNvbHZlckludGVybmFsIiwiUG9wdXBPcGVyYXRpb24iLCJleGVjdXRlTm90TnVsbCIsInJlYXV0aGVudGljYXRlV2l0aFBvcHVwIiwibGlua1dpdGhQb3B1cCIsImF1dGhXaW5kb3ciLCJwb2xsSWQiLCJjdXJyZW50UG9wdXBBY3Rpb24iLCJjYW5jZWwiLCJfb3BlblBvcHVwIiwiYXNzb2NpYXRlZEV2ZW50IiwiX29yaWdpblZhbGlkYXRpb24iLCJfaXNJZnJhbWVXZWJTdG9yYWdlU3VwcG9ydGVkIiwiaXNTdXBwb3J0ZWQiLCJwb2xsVXNlckNhbmNlbGxhdGlvbiIsImNsb3NlZCIsInJlZGlyZWN0T3V0Y29tZU1hcCIsIlJlZGlyZWN0QWN0aW9uIiwicmVhZHlPdXRjb21lIiwicGVuZGluZ1JlZGlyZWN0S2V5IiwicmVzb2x2ZXJQZXJzaXN0ZW5jZSIsImhhc1BlbmRpbmdSZWRpcmVjdCIsIl9nZXRBbmRDbGVhclBlbmRpbmdSZWRpcmVjdFN0YXR1cyIsIm9uQXV0aEV2ZW50IiwiX3JlZGlyZWN0VXNlckZvcklkIiwiX3NldFBlbmRpbmdSZWRpcmVjdFN0YXR1cyIsInNpZ25JbldpdGhSZWRpcmVjdCIsIl9vcGVuUmVkaXJlY3QiLCJfc2lnbkluV2l0aFJlZGlyZWN0IiwicmVhdXRoZW50aWNhdGVXaXRoUmVkaXJlY3QiLCJwcmVwYXJlVXNlckZvclJlZGlyZWN0IiwiX3JlYXV0aGVudGljYXRlV2l0aFJlZGlyZWN0IiwibGlua1dpdGhSZWRpcmVjdCIsIl9saW5rV2l0aFJlZGlyZWN0IiwiZ2V0UmVkaXJlY3RSZXN1bHQiLCJfZ2V0UmVkaXJlY3RSZXN1bHQiLCJyZXNvbHZlckV4dGVybiIsIkF1dGhFdmVudE1hbmFnZXIiLCJjYWNoZWRFdmVudFVpZHMiLCJjb25zdW1lcnMiLCJxdWV1ZWRSZWRpcmVjdEV2ZW50IiwiaGFzSGFuZGxlZFBvdGVudGlhbFJlZGlyZWN0IiwibGFzdFByb2Nlc3NlZEV2ZW50VGltZSIsImF1dGhFdmVudENvbnN1bWVyIiwiaXNFdmVudEZvckNvbnN1bWVyIiwic2VuZFRvQ29uc3VtZXIiLCJzYXZlRXZlbnRUb0NhY2hlIiwiaGFzRXZlbnRCZWVuSGFuZGxlZCIsImhhbmRsZWQiLCJjb25zdW1lciIsImlzTnVsbFJlZGlyZWN0RXZlbnQiLCJpc1JlZGlyZWN0RXZlbnQiLCJvbkVycm9yIiwiZXZlbnRJZE1hdGNoZXMiLCJjbGVhciIsImV2ZW50VWlkIiwidiIsIl9nZXRQcm9qZWN0Q29uZmlnIiwiSVBfQUREUkVTU19SRUdFWCIsIkhUVFBfUkVHRVgiLCJtYXRjaERvbWFpbiIsImN1cnJlbnRVcmwiLCJob3N0bmFtZSIsIlVSTCIsImNlVXJsIiwiZXNjYXBlZERvbWFpblBhdHRlcm4iLCJSZWdFeHAiLCJORVRXT1JLX1RJTUVPVVQiLCJyZXNldFVubG9hZGVkR2FwaU1vZHVsZXMiLCJiZWFjb24iLCJfX19qc2wiLCJIIiwiaGludCIsIkwiLCJDUCIsImNhY2hlZEdBcGlMb2FkZXIiLCJfbG9hZEdhcGkiLCJsb2FkR2FwaUlmcmFtZSIsImdhcGkiLCJpZnJhbWVzIiwiZ2V0Q29udGV4dCIsIm9udGltZW91dCIsIklmcmFtZSIsImNiTmFtZSIsImxvYWRHYXBpIiwiUElOR19USU1FT1VUIiwiSUZSQU1FX0FUVFJJQlVURVMiLCJoZWlnaHQiLCJ0YWJpbmRleCIsIkVJRF9GUk9NX0FQSUhPU1QiLCJnZXRJZnJhbWVVcmwiLCJlaWQiLCJmdyIsIkJBU0VfUE9QVVBfT1BUSU9OUyIsInJlc2l6YWJsZSIsInN0YXR1c2JhciIsInRvb2xiYXIiLCJBdXRoUG9wdXAiLCJfb3BlbiIsInNjcmVlbiIsImF2YWlsSGVpZ2h0IiwiYXZhaWxXaWR0aCIsInNjcm9sbGJhcnMiLCJvcHRpb25zU3RyaW5nIiwicmVkdWNlIiwiYWNjdW0iLCJzdGFuZGFsb25lIiwiX2lzSU9TU3RhbmRhbG9uZSIsImNsaWNrIiwiY3JlYXRlRXZlbnQiLCJpbml0TW91c2VFdmVudCIsImRpc3BhdGNoRXZlbnQiLCJvcGVuQXNOZXdXaW5kb3dJT1MiLCJuZXdXaW4iLCJmb2N1cyIsIl9nZXRSZWRpcmVjdFVybCIsImF1dGhUeXBlIiwicmVkaXJlY3RVcmwiLCJhZGRpdGlvbmFsUGFyYW1zIiwic2V0RGVmYXVsdExhbmd1YWdlIiwiZ2V0Q3VzdG9tUGFyYW1ldGVycyIsImdldFNjb3BlcyIsInRpZCIsInBhcmFtc0RpY3QiLCJnZXRIYW5kbGVyQmFzZSIsImJyb3dzZXJQb3B1cFJlZGlyZWN0UmVzb2x2ZXIiLCJldmVudE1hbmFnZXJzIiwib3JpZ2luVmFsaWRhdGlvblByb21pc2VzIiwiaW5pdEFuZEdldE1hbmFnZXIiLCJpZnJhbWUiLCJjb250ZXh0Iiwid2hlcmUiLCJtZXNzYWdlSGFuZGxlcnNGaWx0ZXIiLCJDUk9TU19PUklHSU5fSUZSQU1FU19GSUxURVIiLCJhdHRyaWJ1dGVzIiwiZG9udGNsZWFyIiwicmVzdHlsZSIsInNldEhpZGVPbkxlYXZlIiwibmV0d29ya0Vycm9yIiwibmV0d29ya0Vycm9yVGltZXIiLCJjbGVhclRpbWVyQW5kUmVzb2x2ZSIsInBpbmciLCJfb3BlbklmcmFtZSIsInJlZ2lzdGVyIiwiaWZyYW1lRXZlbnQiLCJhdXRoRXZlbnQiLCJvbkV2ZW50Iiwic2VuZCIsImF1dGhvcml6ZWREb21haW5zIiwiZG9tYWluIiwiX3ZhbGlkYXRlT3JpZ2luIiwiUGhvbmVNdWx0aUZhY3RvckFzc2VydGlvbkltcGwiLCJfZmluYWxpemVFbnJvbGwiLCJfZmluYWxpemVTaWduSW4iLCJmaW5hbGl6ZUVucm9sbFBob25lTWZhIiwicGhvbmVWZXJpZmljYXRpb25JbmZvIiwiZmluYWxpemVTaWduSW5QaG9uZU1mYSIsIlBob25lTXVsdGlGYWN0b3JHZW5lcmF0b3IiLCJfZnJvbUNyZWRlbnRpYWwiLCJGQUNUT1JfSUQiLCJBdXRoSW50ZXJvcCIsImludGVybmFsTGlzdGVuZXJzIiwiYXNzZXJ0QXV0aENvbmZpZ3VyZWQiLCJ1bnN1YnNjcmliZSIsIm9uSWRUb2tlbkNoYW5nZWQiLCJ1cGRhdGVQcm9hY3RpdmVSZWZyZXNoIiwiX2NvcmRvdmFXaW5kb3ciLCJkZXBzIiwiZ2V0UHJvdmlkZXIiLCJnZXRJbW1lZGlhdGUiLCJhdXRoSW5zdGFuY2UiLCJoaWVyYXJjaHkiLCJfdXBkYXRlRXJyb3JNYXAiLCJfaW5pdGlhbGl6ZVdpdGhQZXJzaXN0ZW5jZSIsIl9pbml0aWFsaXplQXV0aEluc3RhbmNlIiwic2V0SW5zdGFudGlhdGlvbk1vZGUiLCJzZXRJbnN0YW5jZUNyZWF0ZWRDYWxsYmFjayIsIl9pbnN0YW5jZUlkZW50aWZpZXIiLCJfaW5zdGFuY2UiLCJpbml0aWFsaXplIiwiZ2V0VmVyc2lvbkZvclBsYXRmb3JtIiwiX2dlbmVyYXRlSGFuZGxlclVybCIsIkJ1aWxkSW5mbyIsInNlc3Npb25EaWdlc3QiLCJUZXh0RW5jb2RlciIsImVuY29kZSIsImJ1ZmYiLCJBcnJheUJ1ZmZlciIsInZpZXciLCJVaW50OEFycmF5Iiwic3RyaW5nVG9BcnJheUJ1ZmZlciIsImJ1ZiIsImNyeXB0byIsInN1YnRsZSIsImRpZ2VzdCIsIm51bSIsInBhZFN0YXJ0IiwiY29tcHV0ZVNoYTI1NiIsIl9wZXJmb3JtUmVkaXJlY3QiLCJoYW5kbGVyVXJsIiwiY29yZG92YSIsInBsdWdpbnMiLCJicm93c2VydGFiIiwiaXNBdmFpbGFibGUiLCJicm93c2VyVGFiSXNBdmFpbGFibGUiLCJpYWJSZWYiLCJvcGVuVXJsIiwiSW5BcHBCcm93c2VyIiwiX2lzSU9TN09yOCIsInBhc3NpdmVMaXN0ZW5lcnMiLCJpbml0UHJvbWlzZSIsInJlc29sdmVJbmlhbGl6ZWQiLCJfZ2V0QW5kUmVtb3ZlRXZlbnQiLCJwZXJzaXN0ZW5jZUtleSIsIl9ldmVudEZyb21QYXJ0aWFsQW5kVXJsIiwicGFydGlhbEV2ZW50IiwiY2FsbGJhY2tVcmwiLCJzZWFyY2hQYXJhbXNPckVtcHR5IiwiX2dldERlZXBMaW5rRnJvbUNhbGxiYWNrIiwiZXJyb3JPYmplY3QiLCJwYXJzZUpzb25Pck51bGwiLCJnZW5lcmF0ZVNlc3Npb25JZCIsImlkeCIsImNvcmRvdmFQb3B1cFJlZGlyZWN0UmVzb2x2ZXIiLCJhdHRhY2hDYWxsYmFja0xpc3RlbmVycyIsIl9qIiwiX2siLCJ3aW4iLCJ1bml2ZXJzYWxMaW5rcyIsIm1pc3NpbmdQbHVnaW4iLCJfY2hlY2tDb3Jkb3ZhQ29uZmlndXJhdGlvbiIsImluaXRpYWxpemVkIiwicmVzZXRSZWRpcmVjdCIsIl9nZW5lcmF0ZU5ld0V2ZW50IiwiX3NhdmVQYXJ0aWFsRXZlbnQiLCJldmVudExpc3RlbmVyIiwiY2xlYW51cCIsIm9uQ2xvc2VUaW1lciIsImF1dGhFdmVudFNlZW4iLCJjbG9zZUJyb3dzZXJUYWIiLCJyZXN1bWVkIiwidmlzaWJpbGl0eUNoYW5nZWQiLCJ2aXNpYmlsaXR5U3RhdGUiLCJhZGRQYXNzaXZlTGlzdGVuZXIiLCJyZW1vdmVQYXNzaXZlTGlzdGVuZXIiLCJfd2FpdEZvckFwcFJlc3VtZSIsIl9jYiIsImlvc0J1bmRsZUlkIiwiaGFuZGxlT3BlblVSTCIsIm5vRXZlbnRUaW1lb3V0IiwiZ2VuZXJhdGVOb0V2ZW50IiwidW5pdmVyc2FsTGlua3NDYiIsImV2ZW50RGF0YSIsImZpbmFsRXZlbnQiLCJleGlzdGluZ0hhbmRsZU9wZW5VUkwiLCJwYWNrYWdlUHJlZml4IiwiYWRkRnJhbWV3b3JrRm9yTG9nZ2luZyIsIl9sb2dGcmFtZXdvcmsiLCJTIiwiRCIsImlzQXV0aGVudGljYXRlZCIsIlVOQVVUSEVOVElDQVRFRCIsIkdPT0dMRV9DUkVERU5USUFMUyIsIkZJUlNUX1BBUlRZIiwiTU9DS19VU0VSIiwiQyIsIk4iLCJ4Iiwic2V0TG9nTGV2ZWwiLCIkIiwiREVCVUciLCJNIiwiZGVidWciLCJGIiwiTyIsIldBUk4iLCJ3YXJuIiwiQiIsIlUiLCJxIiwiSyIsIk9LIiwiQ0FOQ0VMTEVEIiwiVU5LTk9XTiIsIklOVkFMSURfQVJHVU1FTlQiLCJERUFETElORV9FWENFRURFRCIsIk5PVF9GT1VORCIsIkFMUkVBRFlfRVhJU1RTIiwiUEVSTUlTU0lPTl9ERU5JRUQiLCJSRVNPVVJDRV9FWEhBVVNURUQiLCJGQUlMRURfUFJFQ09ORElUSU9OIiwiQUJPUlRFRCIsIk9VVF9PRl9SQU5HRSIsIlVOSU1QTEVNRU5URUQiLCJJTlRFUk5BTCIsIlVOQVZBSUxBQkxFIiwiREFUQV9MT1NTIiwiaiIsIlEiLCJXIiwiRyIsImVucXVldWVSZXRyeWFibGUiLCJ6IiwiY2hhbmdlTGlzdGVuZXIiLCJhZGRBdXRoVG9rZW5MaXN0ZW5lciIsIm9uSW5pdCIsIm9wdGlvbmFsIiwicmVtb3ZlQXV0aFRva2VuTGlzdGVuZXIiLCJnZXRVaWQiLCJKIiwiZ2V0QXV0aEhlYWRlclZhbHVlRm9yRmlyc3RQYXJ0eSIsIlkiLCJoIiwiWCIsIloiLCJnIiwiYXBwQ2hlY2siLCJhZGRUb2tlbkxpc3RlbmVyIiwicmVtb3ZlVG9rZW5MaXN0ZW5lciIsInR0IiwiZXQiLCJwcmV2aW91c1ZhbHVlIiwic2VxdWVuY2VOdW1iZXJIYW5kbGVyIiwiVCIsIndyaXRlU2VxdWVuY2VOdW1iZXIiLCJudCIsIm1zQ3J5cHRvIiwiZ2V0UmFuZG9tVmFsdWVzIiwiSSIsInN0IiwiaXQiLCJydCIsImV2ZXJ5Iiwib3QiLCJhdCIsIm5hbm9zZWNvbmRzIiwiZnJvbU1pbGxpcyIsInRvTWlsbGlzIiwiY3QiLCJ0aW1lc3RhbXAiLCJfY29tcGFyZVRvIiwiaXNFcXVhbCIsInV0IiwiaHQiLCJsdCIsImZ0Iiwic2VnbWVudHMiLCJvZmZzZXQiLCJjb21wYXJhdG9yIiwibGltaXQiLCJjb25zdHJ1Y3QiLCJkdCIsInRvQXJyYXkiLCJjYW5vbmljYWxTdHJpbmciLCJ3dCIsIl90IiwiaXNWYWxpZElkZW50aWZpZXIiLCJtdCIsImZpZWxkcyIsImlzUHJlZml4T2YiLCJndCIsInl0IiwiYmluYXJ5U3RyaW5nIiwiRU1QVFlfQllURV9TVFJJTkciLCJwdCIsIlR0IiwibmFub3MiLCJFdCIsIkl0IiwiZnJvbUJhc2U2NFN0cmluZyIsImZyb21VaW50OEFycmF5IiwiQXQiLCJtYXBWYWx1ZSIsIl9fdHlwZV9fIiwic3RyaW5nVmFsdWUiLCJQdCIsIl9fbG9jYWxfd3JpdGVfdGltZV9fIiwidGltZXN0YW1wVmFsdWUiLCJidCIsInZ0IiwiVnQiLCJpc0ludGVnZXIiLCJNQVhfU0FGRV9JTlRFR0VSIiwiTUlOX1NBRkVfSU5URUdFUiIsIlN0IiwiZnJvbVN0cmluZyIsInBvcEZpcnN0IiwiRHQiLCJDdCIsImJvb2xlYW5WYWx1ZSIsImJ5dGVzVmFsdWUiLCJyZWZlcmVuY2VWYWx1ZSIsImdlb1BvaW50VmFsdWUiLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsImludGVnZXJWYWx1ZSIsImRvdWJsZVZhbHVlIiwiYXJyYXlWYWx1ZSIsInZhbHVlcyIsIk50Iiwia3QiLCJ4dCIsImNvbXBhcmVUbyIsIiR0IiwiRnQiLCJ0b0Jhc2U2NCIsImZyb21OYW1lIiwiT3QiLCJkYXRhYmFzZSIsIk10IiwiTHQiLCJCdCIsIlV0IiwicXQiLCJLdCIsImp0IiwibGFzdFNlZ21lbnQiLCJnZXRGaWVsZHNNYXAiLCJwb3BMYXN0IiwiZW1wdHlQYXRoIiwiaXNJbW1lZGlhdGVQYXJlbnRPZiIsImFwcGx5Q2hhbmdlcyIsImZpZWxkIiwiUXQiLCJjaGlsZCIsIld0IiwiZG9jdW1lbnRUeXBlIiwidmVyc2lvbiIsImRvY3VtZW50U3RhdGUiLCJlbXB0eSIsImhhc0xvY2FsTXV0YXRpb25zIiwiaGFzQ29tbWl0dGVkTXV0YXRpb25zIiwiY2xvbmUiLCJHdCIsImNvbGxlY3Rpb25Hcm91cCIsIm9yZGVyQnkiLCJmaWx0ZXJzIiwic3RhcnRBdCIsImVuZEF0IiwiUiIsInp0IiwiSHQiLCJ0ZSIsImRpciIsImhlIiwiWXQiLCJmZSIsIndlIiwiWHQiLCJpc0RvY3VtZW50S2V5IiwiWnQiLCJpc0tleUZpZWxkIiwiUCIsImVlIiwib2UiLCJhZSIsImNlIiwibmUiLCJzZSIsImllIiwibnVsbFZhbHVlIiwidWUiLCJiZWZvcmUiLCJsZSIsImRlIiwiZXhwbGljaXRPcmRlckJ5IiwibGltaXRUeXBlIiwibWUiLCJnZSIsInllIiwicGUiLCJUZSIsIkVlIiwiViIsIkllIiwiQWUiLCJrZXlGaWVsZCIsIlJlIiwiUGUiLCJiZSIsInZlIiwiVmUiLCJKdCIsIlNlIiwiaXNGb3VuZERvY3VtZW50IiwiaGFzQ29sbGVjdGlvbklkIiwiRGUiLCJDZSIsIk5lIiwia2UiLCJ4ZSIsIiRlIiwiRmUiLCJMZSIsIl9fcHJldmlvdXNfdmFsdWVfXyIsIkJlIiwiVWUiLCJxZSIsIktlIiwiTWUiLCJRZSIsIk9lIiwiamUiLCJlbGVtZW50cyIsIldlIiwiR2UiLCJ0cmFuc2Zvcm0iLCJIZSIsInRyYW5zZm9ybVJlc3VsdHMiLCJKZSIsInVwZGF0ZVRpbWUiLCJleGlzdHMiLCJZZSIsIlhlIiwiWmUiLCJybiIsImNuIiwiZmllbGRUcmFuc2Zvcm1zIiwic2V0QWxsIiwiY29udmVydFRvRm91bmREb2N1bWVudCIsInNldEhhc0NvbW1pdHRlZE11dGF0aW9ucyIsIm9uIiwicHJlY29uZGl0aW9uIiwiY29udmVydFRvVW5rbm93bkRvY3VtZW50IiwiYW4iLCJjb252ZXJ0VG9Ob0RvY3VtZW50IiwidG4iLCJ1biIsInNuIiwic2V0SGFzTG9jYWxNdXRhdGlvbnMiLCJlbiIsIm5uIiwiemUiLCJmaWVsZE1hc2siLCJobiIsImxuIiwiY291bnQiLCJkbiIsInduIiwiX24iLCJtbiIsImduIiwicm9vdCIsInBuIiwiRU1QVFkiLCJpbnNlcnQiLCJjb3B5IiwiQkxBQ0siLCJyZW1vdmUiLCJyaWdodCIsIm1pbktleSIsIm1heEtleSIsImlub3JkZXJUcmF2ZXJzYWwiLCJyZXZlcnNlVHJhdmVyc2FsIiwieW4iLCJpc1JldmVyc2UiLCJub2RlU3RhY2siLCJSRUQiLCJmaXhVcCIsImlzUmVkIiwibW92ZVJlZExlZnQiLCJyZW1vdmVNaW4iLCJyb3RhdGVSaWdodCIsIm1vdmVSZWRSaWdodCIsInJvdGF0ZUxlZnQiLCJjb2xvckZsaXAiLCJjaGVjayIsInBvdyIsIlRuIiwiZ2V0SXRlcmF0b3JGcm9tIiwiaGFzTmV4dCIsImdldE5leHQiLCJnZXRJdGVyYXRvciIsIkVuIiwiaXRlciIsIkluIiwiQW4iLCJSbiIsIlBuIiwiYm4iLCJ2biIsIlZuIiwiU24iLCJEbiIsIkNuIiwiTm4iLCJzbmFwc2hvdFZlcnNpb24iLCJ0YXJnZXRDaGFuZ2VzIiwidGFyZ2V0TWlzbWF0Y2hlcyIsImRvY3VtZW50VXBkYXRlcyIsInJlc29sdmVkTGltYm9Eb2N1bWVudHMiLCJrbiIsImNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZSIsInJlc3VtZVRva2VuIiwiY3VycmVudCIsImFkZGVkRG9jdW1lbnRzIiwibW9kaWZpZWREb2N1bWVudHMiLCJyZW1vdmVkRG9jdW1lbnRzIiwieG4iLCJyZW1vdmVkVGFyZ2V0SWRzIiwiJG4iLCJ0YXJnZXRJZCIsIkZuIiwic3RhdGUiLCJ0YXJnZXRJZHMiLCJjYXVzZSIsIk9uIiwiQm4iLCJhcHByb3hpbWF0ZUJ5dGVTaXplIiwiTW4iLCJMbiIsImZvckVhY2hUYXJnZXQiLCJyZW1vdmVUYXJnZXQiLCJuZXdOb0RvY3VtZW50IiwiZm9yRWFjaFdoaWxlIiwicHVycG9zZSIsImdldFJlbW90ZUtleXNGb3JUYXJnZXQiLCJVbiIsImFzYyIsImRlc2MiLCJxbiIsImluIiwiS24iLCJkYXRhYmFzZUlkIiwiam4iLCJ0b0lTT1N0cmluZyIsIlFuIiwidG9VaW50OEFycmF5IiwiV24iLCJ0b1RpbWVzdGFtcCIsIkduIiwiZnJvbVRpbWVzdGFtcCIsInpuIiwiSG4iLCJBcyIsIkpuIiwiWW4iLCJlcyIsIlhuIiwiWm4iLCJ0cyIsInNzIiwibmV3Rm91bmREb2N1bWVudCIsIm9zIiwidXBkYXRlIiwidXBkYXRlTWFzayIsIklzIiwidXBkYXRlVHJhbnNmb3JtcyIsImZpZWxkUGF0aCIsInNldFRvU2VydmVyVmFsdWUiLCJhcHBlbmRNaXNzaW5nRWxlbWVudHMiLCJyZW1vdmVBbGxGcm9tQXJyYXkiLCJpbmNyZW1lbnQiLCJpc05vbmUiLCJjdXJyZW50RG9jdW1lbnQiLCJhcyIsIm5vbmUiLCJmcm9tU2VydmVyRm9ybWF0IiwiZmllbGRQYXRocyIsInVzIiwiZG9jdW1lbnRzIiwiaHMiLCJzdHJ1Y3R1cmVkUXVlcnkiLCJwYXJlbnQiLCJjb2xsZWN0aW9uSWQiLCJhbGxEZXNjZW5kYW50cyIsInVuYXJ5RmlsdGVyIiwieXMiLCJmaWVsZEZpbHRlciIsImdzIiwiY29tcG9zaXRlRmlsdGVyIiwiZGlyZWN0aW9uIiwibXMiLCJ3cyIsImxzIiwiZHMiLCJFcyIsIlRzIiwiY29uY2F0IiwicHMiLCJfcyIsIk5hTiIsIlJzIiwiYnMiLCJQcyIsInZzIiwiVnMiLCJTcyIsIm93bmVySWQiLCJhbGxvd1RhYlN5bmNocm9uaXphdGlvbiIsImxlYXNlVGltZXN0YW1wTXMiLCJzdG9yZSIsIkRzIiwidXNlcklkIiwibGFzdEFja25vd2xlZGdlZEJhdGNoSWQiLCJsYXN0U3RyZWFtVG9rZW4iLCJDcyIsImJhdGNoSWQiLCJsb2NhbFdyaXRlVGltZU1zIiwiYmFzZU11dGF0aW9ucyIsIm11dGF0aW9ucyIsInVzZXJNdXRhdGlvbnNJbmRleCIsInVzZXJNdXRhdGlvbnNLZXlQYXRoIiwiTnMiLCJQTEFDRUhPTERFUiIsImtzIiwicmVhZFRpbWUiLCJ4cyIsIiRzIiwidW5rbm93bkRvY3VtZW50Iiwibm9Eb2N1bWVudCIsInBhcmVudFBhdGgiLCJyZWFkVGltZUluZGV4IiwicmVhZFRpbWVJbmRleFBhdGgiLCJjb2xsZWN0aW9uUmVhZFRpbWVJbmRleCIsImNvbGxlY3Rpb25SZWFkVGltZUluZGV4UGF0aCIsIkZzIiwiYnl0ZVNpemUiLCJPcyIsImNhbm9uaWNhbElkIiwibGFzdExpc3RlblNlcXVlbmNlTnVtYmVyIiwibGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiIsInF1ZXJ5VGFyZ2V0c0luZGV4TmFtZSIsInF1ZXJ5VGFyZ2V0c0tleVBhdGgiLCJNcyIsInNlcXVlbmNlTnVtYmVyIiwiZG9jdW1lbnRUYXJnZXRzSW5kZXgiLCJkb2N1bWVudFRhcmdldHNLZXlQYXRoIiwiTHMiLCJoaWdoZXN0VGFyZ2V0SWQiLCJoaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIiLCJsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uIiwidGFyZ2V0Q291bnQiLCJCcyIsIlVzIiwiY2xpZW50SWQiLCJ1cGRhdGVUaW1lTXMiLCJuZXR3b3JrRW5hYmxlZCIsImluRm9yZWdyb3VuZCIsInFzIiwiY3JlYXRlVGltZSIsIktzIiwiYnVuZGxlZFF1ZXJ5IiwianMiLCJRcyIsIldzIiwib25Db21taXR0ZWRMaXN0ZW5lcnMiLCJHcyIsIm5leHRDYWxsYmFjayIsImNhdGNoQ2FsbGJhY2siLCJpc0RvbmUiLCJjYWxsYmFja0F0dGFjaGVkIiwid3JhcEZhaWx1cmUiLCJ3cmFwU3VjY2VzcyIsIndyYXBVc2VyRnVuY3Rpb24iLCJ3YWl0Rm9yIiwienMiLCJhYm9ydGVkIiwib25jb21wbGV0ZSIsIm9uYWJvcnQiLCJZcyIsIm5pIiwiYWJvcnQiLCJacyIsIkhzIiwiUnQiLCJ0aSIsImVudiIsIm9uc3VjY2VzcyIsIm9uYmxvY2tlZCIsIm9udXBncmFkZW5lZWRlZCIsIm9sZFZlcnNpb24iLCJvbnZlcnNpb25jaGFuZ2UiLCJKcyIsIlhzIiwiY3Vyc29yIiwicHJpbWFyeUtleSIsImNvbnRpbnVlIiwiZG9uZSIsImluZGV4IiwicmFuZ2UiLCJyZXZlcnNlIiwib3BlbktleUN1cnNvciIsIm9wZW5DdXJzb3IiLCJlaSIsInNpIiwiY3VycmVudFNlcXVlbmNlTnVtYmVyIiwiaWkiLCJyaSIsImxvY2FsV3JpdGVUaW1lIiwibXV0YXRpb25SZXN1bHRzIiwiYXBwbHlUb0xvY2FsVmlldyIsImlzVmFsaWREb2N1bWVudCIsIm9pIiwiYmF0Y2giLCJjb21taXRWZXJzaW9uIiwiZG9jVmVyc2lvbnMiLCJhaSIsImNpIiwidWkiLCJmcm9tU2VnbWVudHMiLCJ3aSIsIm5ld1Vua25vd25Eb2N1bWVudCIsImhpIiwibGkiLCJpc05vRG9jdW1lbnQiLCJkaSIsImlzVW5rbm93bkRvY3VtZW50IiwiZmkiLCJfaSIsInNwbGljZSIsIm1pIiwiZ2kiLCJ5aSIsInBpIiwiVGkiLCJFaSIsIklpIiwiQWkiLCJnZXRFbnRyaWVzIiwiUmkiLCJhZGRPbkNvbW1pdHRlZExpc3RlbmVyIiwiUGkiLCJJREJLZXlSYW5nZSIsImJvdW5kIiwiYmkiLCJkaWRSdW4iLCJzZXF1ZW5jZU51bWJlcnNDb2xsZWN0ZWQiLCJ0YXJnZXRzUmVtb3ZlZCIsImRvY3VtZW50c1JlbW92ZWQiLCJ2aSIsImNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQiLCJwZXJjZW50aWxlVG9Db2xsZWN0IiwibWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCIsIkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFIiwiREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUIiwiVmkiLCJvbmx5IiwiU2kiLCJERUZBVUxUIiwiRElTQUJMRUQiLCJEaSIsInJlZmVyZW5jZURlbGVnYXRlIiwiTkVHQVRJVkVfSU5GSU5JVFkiLCJQT1NJVElWRV9JTkZJTklUWSIsIk5pIiwia2kiLCJhZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCIsImxvb2t1cE11dGF0aW9uQmF0Y2giLCJsb3dlckJvdW5kIiwidXBwZXJCb3VuZCIsInByZWZpeEZvclBhdGgiLCJtYXJrUG90ZW50aWFsbHlPcnBoYW5lZCIsImNoZWNrRW1wdHkiLCJwcmVmaXhGb3JVc2VyIiwiQ2kiLCJ4aSIsIiRpIiwiRmkiLCJyZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCIsIk9pIiwicmVtb3ZlVGFyZ2V0RGF0YSIsIk1pIiwiTGkiLCJhZGRSZWZlcmVuY2UiLCJyZW1vdmVSZWZlcmVuY2UiLCJCaSIsIlVpIiwicWkiLCJidWZmZXIiLCJsYXN0IiwiS2kiLCJnYXJiYWdlQ29sbGVjdG9yIiwiYXN5bmNRdWV1ZSIsImVucXVldWVBZnRlckRlbGF5IiwiY29sbGVjdEdhcmJhZ2UiLCJqaSIsIm1heFZhbHVlIiwicmVtb3ZlVGFyZ2V0cyIsInJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzIiwiZ2V0Q2FjaGVTaXplIiwiY2FsY3VsYXRlVGFyZ2V0Q291bnQiLCJudGhTZXF1ZW5jZU51bWJlciIsIlFpIiwiZ2V0VGFyZ2V0Q2FjaGUiLCJnZXRUYXJnZXRDb3VudCIsIldpIiwiZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSIsIm5ld0NoYW5nZUJ1ZmZlciIsImdldEVudHJ5IiwicmVtb3ZlRW50cnkiLCJhcHBseSIsIndpdGhTZXF1ZW5jZU51bWJlciIsInVwZGF0ZVRhcmdldERhdGEiLCJnZXRTaXplIiwiR2kiLCJtYXBLZXlGbiIsImVxdWFsc0ZuIiwiaW5uZXIiLCJ6aSIsImNoYW5nZXMiLCJjaGFuZ2VzQXBwbGllZCIsImFzc2VydE5vdEFwcGxpZWQiLCJuZXdJbnZhbGlkRG9jdW1lbnQiLCJnZXRGcm9tQ2FjaGUiLCJnZXRBbGxGcm9tQ2FjaGUiLCJIaSIsIlhpIiwiWmkiLCJnZXRNZXRhZGF0YSIsImZpcnN0IiwiSmkiLCJ0cmFja1JlbW92YWxzIiwiWWkiLCJnZXRSZWFkVGltZSIsImFkZEVudHJ5IiwidXBkYXRlTWV0YWRhdGEiLCJ0ciIsImF1dG9JbmNyZW1lbnQiLCJjcmVhdGVJbmRleCIsInVuaXF1ZSIsImVyIiwiZGVsZXRlT2JqZWN0U3RvcmUiLCJuciIsInNyIiwiaXNQcmltYXJ5IiwicnVuVHJhbnNhY3Rpb24iLCJnZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIiLCJzdGFydGVkIiwibmV3VmVyc2lvbiIsImVucXVldWVBbmRGb3JnZXQiLCJyciIsImlyIiwicmFpc2VPbkNvbW1pdHRlZEV2ZW50IiwiYXBwVmVyc2lvbiIsImVudGVyUmVzdHJpY3RlZE1vZGUiLCJzaHV0ZG93biIsIm9yIiwiaXNEZWZhdWx0RGF0YWJhc2UiLCJhciIsInByb2dyZXNzIiwiY3IiLCJnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleSIsImdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5cyIsImdldENvbGxlY3Rpb25QYXJlbnRzIiwiZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSIsImdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ1F1ZXJ5IiwidXIiLCJmcm9tQ2FjaGUiLCJkb2NDaGFuZ2VzIiwiZG9jIiwiaHIiLCJoYXNQZW5kaW5nV3JpdGVzIiwibHIiLCJnZXRNdXRhdGlvblF1ZXVlIiwiZ2V0SW5kZXhNYW5hZ2VyIiwiZ2V0QnVuZGxlQ2FjaGUiLCJjb2xsZWN0IiwiZnIiLCJkciIsImdldEFsbE11dGF0aW9uQmF0Y2hlcyIsInJlbW92ZWRCYXRjaElkcyIsImFkZGVkQmF0Y2hJZHMiLCJfciIsImdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24iLCJnciIsInlyIiwiZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQiLCJwciIsImdldFRhcmdldERhdGEiLCJhbGxvY2F0ZVRhcmdldElkIiwiYWRkVGFyZ2V0RGF0YSIsIlRyIiwiRXIiLCJnZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCIsIklyIiwiQXIiLCJiciIsInNhdmVOYW1lZFF1ZXJ5Iiwid2l0aFJlc3VtZVRva2VuIiwiYWRkTWF0Y2hpbmdLZXlzIiwidnIiLCJWciIsIlNyIiwiZm9yRWFjaEluUmFuZ2UiLCJmaXJzdEFmdGVyT3JFcXVhbCIsImZzIiwiRHIiLCJzaGlmdCIsIkNyIiwiZG9jcyIsIk5yIiwia3IiLCJycyIsImNzIiwiY29udGFpbnNLZXkiLCJ4ciIsInRvS2V5IiwiJHIiLCJGciIsImZyb21QYXRoIiwiT3IiLCJNciIsIkxyIiwiQnIiLCJVciIsInFyIiwiYWN0aXZlVGFyZ2V0SWRzIiwiS3IiLCJvbmxpbmVTdGF0ZSIsImpyIiwiUXIiLCJzeW5jRW5naW5lIiwib25saW5lU3RhdGVIYW5kbGVyIiwiaXNBY3RpdmVRdWVyeVRhcmdldCIsImFkZFBlbmRpbmdNdXRhdGlvbiIsInN0b3JhZ2VBcmVhIiwidW5pb25XaXRoIiwiV3IiLCJHciIsInpyIiwiSHIiLCJCYXRjaEdldERvY3VtZW50cyIsIkNvbW1pdCIsIlJ1blF1ZXJ5IiwiSnIiLCJZciIsImRhdGFiYXNlSW5mbyIsInNzbCIsImZvcmNlTG9uZ1BvbGxpbmciLCJhdXRvRGV0ZWN0TG9uZ1BvbGxpbmciLCJ1c2VGZXRjaFN0cmVhbXMiLCJsaXN0ZW5PbmNlIiwiQ09NUExFVEUiLCJnZXRMYXN0RXJyb3JDb2RlIiwiTk9fRVJST1IiLCJnZXRSZXNwb25zZUpzb24iLCJUSU1FT1VUIiwiSFRUUF9FUlJPUiIsImdldFN0YXR1cyIsImdldFJlc3BvbnNlVGV4dCIsImh0dHBTZXNzaW9uSWRQYXJhbSIsImluaXRNZXNzYWdlSGVhZGVycyIsIm1lc3NhZ2VVcmxQYXJhbXMiLCJzZW5kUmF3SnNvbiIsInN1cHBvcnRzQ3Jvc3NEb21haW5YaHIiLCJpbnRlcm5hbENoYW5uZWxQYXJhbXMiLCJmb3J3YXJkQ2hhbm5lbFJlcXVlc3RUaW1lb3V0TXMiLCJkZXRlY3RCdWZmZXJpbmdQcm94eSIsInhtbEh0dHBGYWN0b3J5IiwiaHR0cEhlYWRlcnNPdmVyd3JpdGVQYXJhbSIsImNyZWF0ZVdlYkNoYW5uZWwiLCJ5IiwibGlzdGVuIiwiRXZlbnRUeXBlIiwiT1BFTiIsIkNMT1NFIiwiTUVTU0FHRSIsIlNUQVRfRVZFTlQiLCJzdGF0IiwiUFJPWFkiLCJOT1BST1hZIiwiWHIiLCJaciIsInRvIiwiZW8iLCJza2lwRGVsYXkiLCJubyIsImF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyIiwiYXBwQ2hlY2tDcmVkZW50aWFsc1Byb3ZpZGVyIiwic3RyZWFtIiwibXIiLCJpbnZhbGlkYXRlVG9rZW4iLCJSciIsInNvIiwidGFyZ2V0Q2hhbmdlIiwidGFyZ2V0Q2hhbmdlVHlwZSIsImRvY3VtZW50Q2hhbmdlIiwiZG9jdW1lbnREZWxldGUiLCJkb2N1bWVudFJlbW92ZSIsIlByIiwiYWRkVGFyZ2V0IiwibGFiZWxzIiwiaW8iLCJzdHJlYW1Ub2tlbiIsIndyaXRlUmVzdWx0cyIsImNvbW1pdFRpbWUiLCJ3cml0ZXMiLCJybyIsImF1dGhDcmVkZW50aWFscyIsImFwcENoZWNrQ3JlZGVudGlhbHMiLCJvbyIsImFvIiwibG9jYWxTdG9yZSIsImRhdGFzdG9yZSIsInJlbW90ZVN5bmNlciIsImdvIiwidW8iLCJjbyIsImhvIiwibW8iLCJfbyIsInhvIiwiZm8iLCJsbyIsIndvIiwieW8iLCJwbyIsIlRvIiwiRW8iLCJyZWplY3RMaXN0ZW4iLCJJbyIsImFwcGx5UmVtb3RlRXZlbnQiLCJBbyIsIlJvIiwiJG8iLCJQbyIsImJvIiwidm8iLCJWbyIsIlNvIiwiRG8iLCJDbyIsImFwcGx5U3VjY2Vzc2Z1bFdyaXRlIiwiTm8iLCJ3ciIsInJlamVjdEZhaWxlZFdyaXRlIiwia28iLCJzdG9wIiwiRm8iLCJ0YXJnZXRUaW1lTXMiLCJyZW1vdmFsQ2FsbGJhY2siLCJkZWZlcnJlZCIsInRpbWVySGFuZGxlIiwiaGFuZGxlRGVsYXlFbGFwc2VkIiwiT28iLCJNbyIsImtleWVkTWFwIiwic29ydGVkU2V0IiwiTG8iLCJCbyIsIm9sZERvY3MiLCJtdXRhdGVkS2V5cyIsInN5bmNTdGF0ZUNoYW5nZWQiLCJleGNsdWRlc01ldGFkYXRhQ2hhbmdlcyIsImVtcHR5U2V0IiwiVW8iLCJxbyIsInF1ZXJpZXMiLCJLbyIsIm9uTGlzdGVuIiwiR28iLCJqbyIsIm9uVW5saXN0ZW4iLCJRbyIsIldvIiwiem8iLCJpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzIiwiZnJvbUluaXRpYWxEb2N1bWVudHMiLCJIbyIsImJ5dGVMZW5ndGgiLCJKbyIsIllvIiwiWG8iLCJieXRlc0xvYWRlZCIsImRvY3VtZW50c0xvYWRlZCIsIm5hbWVkUXVlcnkiLCJkb2N1bWVudE1ldGFkYXRhIiwidGFza1N0YXRlIiwidG90YWxEb2N1bWVudHMiLCJ0b3RhbEJ5dGVzIiwiWm8iLCJ0YSIsImVhIiwiZiIsInRyYWNrIiwic25hcHNob3QiLCJuYSIsInNhIiwiaWEiLCJyZW1vdGVTdG9yZSIsInNoYXJlZENsaWVudFN0YXRlIiwibWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnMiLCJyYSIsInhhIiwiYWRkTG9jYWxRdWVyeVRhcmdldCIsIm9hIiwiaXNQcmltYXJ5Q2xpZW50IiwicGEiLCJhYSIsInJlbW92ZUxvY2FsUXVlcnlUYXJnZXQiLCJjbGVhclF1ZXJ5U3RhdGUiLCJnYSIsInJlbW92ZU1hdGNoaW5nS2V5cyIsInRvTWljcm9zZWNvbmRzIiwidXBkYXRlTGltYm9Eb2N1bWVudCIsInNldFRhcmdldHNNZXRhZGF0YSIsIklhIiwiaGEiLCJzZXRPbmxpbmVTdGF0ZSIsImxhIiwidXBkYXRlUXVlcnlTdGF0ZSIsIkVhIiwiZmEiLCJhcHBseVRvUmVtb3RlRG9jdW1lbnQiLCJyZW1vdmVNdXRhdGlvbkJhdGNoIiwicGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2siLCJtYSIsInVwZGF0ZU11dGF0aW9uU3RhdGUiLCJkYSIsInlhIiwiVGEiLCJ3aXRoTGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiIsIkFhIiwiaGFuZGxlVXNlckNoYW5nZSIsIlJhIiwiUGEiLCJiYSIsInZhIiwiU2EiLCJEYSIsIkNhIiwiTmEiLCJjcmVhdGVTeW50aGVzaXplZFJlbW90ZUV2ZW50Rm9yQ3VycmVudENoYW5nZSIsImthIiwiJGEiLCJPYSIsInN5bmNocm9uaXplVGFicyIsImdjU2NoZWR1bGVyIiwiaW5pdGlhbFVzZXIiLCJNYSIsImNhY2hlU2l6ZUJ5dGVzIiwiZm9yY2VPd25lcnNoaXAiLCJ3aXRoQ2FjaGVTaXplIiwiTGEiLCJnZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMiLCJpc0xvY2FsUXVlcnlUYXJnZXQiLCJWYSIsIkJhIiwiY3JlYXRlRGF0YXN0b3JlIiwiY3JlYXRlUmVtb3RlU3RvcmUiLCJjcmVhdGVFdmVudE1hbmFnZXIiLCJjcmVhdGVTeW5jRW5naW5lIiwiaGFuZGxlQ3JlZGVudGlhbENoYW5nZSIsIlVhIiwicWEiLCJtdXRlZCIsIkthIiwiVGV4dERlY29kZXIiLCJkZWNvZGUiLCJjYSIsImZpbmRJbmRleCIsInJlYWQiLCJqYSIsInJlYWRWZXJzaW9ucyIsImNvbW1pdHRlZCIsImxhc3RXcml0ZUVycm9yIiwid3JpdHRlbkRvY3MiLCJlbnN1cmVDb21taXROb3RDYWxsZWQiLCJmb3VuZCIsIm1pc3NpbmciLCJpcyIsInJlY29yZFZlcnNpb24iLCJ0b011dGF0aW9uIiwicHJlY29uZGl0aW9uRm9yVXBkYXRlIiwiUWEiLCJ1cGRhdGVGdW5jdGlvbiIsImNvbW1pdCIsIndhIiwiV2EiLCJBIiwiYXV0aENyZWRlbnRpYWxMaXN0ZW5lciIsImlzU2h1dHRpbmdEb3duIiwiZW5xdWV1ZUFuZEZvcmdldEV2ZW5XaGlsZVJlc3RyaWN0ZWQiLCJvbmxpbmVDb21wb25lbnRzIiwidGVybWluYXRlIiwib2ZmbGluZUNvbXBvbmVudHMiLCJHYSIsInZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MiLCJnZXRDb25maWd1cmF0aW9uIiwic2V0Q3JlZGVudGlhbENoYW5nZUxpc3RlbmVyIiwic2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIiLCJ6YSIsIkhhIiwiSmEiLCJZYSIsIlhhIiwiWmEiLCJ0YyIsImVjIiwicmMiLCJhYyIsImhjIiwiUmVhZGFibGVTdHJlYW0iLCJnZXRSZWFkZXIiLCJnZXRCdW5kbGVNZXRhZGF0YSIsIl9jb21wbGV0ZVdpdGgiLCJfdXBkYXRlUHJvZ3Jlc3MiLCJzYXZlQnVuZGxlTWV0YWRhdGEiLCJfZmFpbFdpdGgiLCJub3RpZnlCdW5kbGVMb2FkZWQiLCJGYSIsImZjIiwiZGMiLCJ3YyIsIm1jIiwiZ2MiLCJ5YyIsInBjIiwiVGMiLCJFYyIsIkljIiwiY3JlZGVudGlhbHMiLCJpZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzIiwiZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyIsImV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyIsIkFjIiwiX2F1dGhDcmVkZW50aWFscyIsIl9hcHBDaGVja0NyZWRlbnRpYWxzIiwiX3BlcnNpc3RlbmNlS2V5IiwiX3NldHRpbmdzIiwiX3NldHRpbmdzRnJvemVuIiwiX2RhdGFiYXNlSWQiLCJfYXBwIiwiX3Rlcm1pbmF0ZVRhc2siLCJjbGllbnQiLCJzZXNzaW9uSW5kZXgiLCJpYW1Ub2tlbiIsIl90ZXJtaW5hdGUiLCJSYyIsIl9nZXRTZXR0aW5ncyIsIl9zZXRTZXR0aW5ncyIsIm1vY2tVc2VyVG9rZW4iLCJQYyIsImNvbnZlcnRlciIsImZpcmVzdG9yZSIsInZjIiwiYmMiLCJfcXVlcnkiLCJfcGF0aCIsIlZjIiwiU2MiLCJEYyIsIkNjIiwiTmMiLCJrYyIsImVucXVldWUiLCJzdGFjayIsImNyZWF0ZUFuZFNjaGVkdWxlIiwieGMiLCIkYyIsIl9wcm9ncmVzc09ic2VydmVyIiwiX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIiLCJfbGFzdFByb2dyZXNzIiwiRmMiLCJPYyIsIl9xdWV1ZSIsIl9maXJlc3RvcmVDbGllbnQiLCJVYyIsIk1jIiwiaXNJbml0aWFsaXplZCIsImdldE9wdGlvbnMiLCJMYyIsIkJjIiwidmVyaWZ5Tm90VGVybWluYXRlZCIsIl9mcmVlemVTZXR0aW5ncyIsInFjIiwiWGMiLCJqYyIsIktjIiwiRE9NRXhjZXB0aW9uIiwiUWMiLCJfaW5pdGlhbGl6ZWQiLCJfdGVybWluYXRlZCIsIldjIiwiZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZCIsIkdjIiwic2V0TmV0d29ya0VuYWJsZWQiLCJuYyIsInpjIiwic2MiLCJIYyIsIl9kZWxldGUiLCJKYyIsIlljIiwiZ2V0TmFtZWRRdWVyeSIsImxjIiwiWmMiLCJfaW50ZXJuYWxQYXRoIiwidHUiLCJldSIsIl9ieXRlU3RyaW5nIiwibnUiLCJfbWV0aG9kTmFtZSIsInN1IiwiaXNGaW5pdGUiLCJfbGF0IiwiX2xvbmciLCJpdSIsInJ1Iiwib3UiLCJhdSIsImN1IiwiVnUiLCJtZXRob2ROYW1lIiwidXUiLCJodSIsImx1IiwibWVyZ2UiLCJtZXJnZUZpZWxkcyIsIlJ1IiwiSXUiLCJQdSIsIlN1IiwiY292ZXJzIiwiZnUiLCJkdSIsInd1IiwiX3UiLCJFdSIsIm11IiwiZ3UiLCJ5dSIsInZ1IiwicHUiLCJUdSIsIkF1IiwiX3RvRmllbGRUcmFuc2Zvcm0iLCJmcm9tRGF0ZSIsImdldFByb3RvdHlwZU9mIiwiYnUiLCJzZWFyY2giLCJEdSIsIl9maXJlc3RvcmUiLCJfdXNlckRhdGFXcml0ZXIiLCJfZG9jdW1lbnQiLCJfY29udmVydGVyIiwiQ3UiLCJmcm9tRmlyZXN0b3JlIiwiY29udmVydFZhbHVlIiwiTnUiLCJrdSIsInh1IiwiX2ZpcmVzdG9yZUltcGwiLCIkdSIsInNlcnZlclRpbWVzdGFtcHMiLCJGdSIsIl9zbmFwc2hvdCIsIl9jYWNoZWRDaGFuZ2VzIiwiX2NhY2hlZENoYW5nZXNJbmNsdWRlTWV0YWRhdGFDaGFuZ2VzIiwib2xkSW5kZXgiLCJuZXdJbmRleCIsIk91IiwiTXUiLCJMdSIsIkJ1IiwiVXUiLCJfYXBwbHkiLCJxdSIsInNoIiwibmgiLCJpaCIsIkt1IiwianUiLCJRdSIsIld1IiwiR3UiLCJ6dSIsIkh1IiwiZWgiLCJKdSIsIll1IiwiWHUiLCJadSIsInRoIiwicmgiLCJjb252ZXJ0VGltZXN0YW1wIiwiY29udmVydFNlcnZlclRpbWVzdGFtcCIsImNvbnZlcnRCeXRlcyIsImNvbnZlcnRSZWZlcmVuY2UiLCJjb252ZXJ0R2VvUG9pbnQiLCJjb252ZXJ0QXJyYXkiLCJjb252ZXJ0T2JqZWN0Iiwib2giLCJ0b0ZpcmVzdG9yZSIsImFoIiwiY29udmVydERvY3VtZW50S2V5IiwiY2giLCJfY29tbWl0SGFuZGxlciIsIl9tdXRhdGlvbnMiLCJfY29tbWl0dGVkIiwiX2RhdGFSZWFkZXIiLCJfdmVyaWZ5Tm90Q29tbWl0dGVkIiwidWgiLCJoaCIsIlJoIiwibGgiLCJmaCIsImljIiwiZGgiLCJ3aCIsIm9jIiwibWgiLCJnaCIsIkFoIiwieWgiLCJwaCIsIlRoIiwiRWgiLCJJaCIsImNjIiwiYWRkTXV0YXRpb25CYXRjaCIsImFwcGx5VG9Mb2NhbERvY3VtZW50U2V0IiwiUGgiLCJfdHJhbnNhY3Rpb24iLCJsb29rdXAiLCJiaCIsInJ1biIsInVjIiwidmgiLCJWaCIsIlNoIiwiRGgiLCJDaCIsIk5oIiwiUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlSW1wbCIsImdldFByb3ZpZGVycyIsImNvbXBvbmVudCIsImdldENvbXBvbmVudCIsImlzVmVyc2lvblNlcnZpY2VQcm92aWRlciIsImxpYnJhcnkiLCJsb2dTdHJpbmciLCJuYW1lJG8iLCJsb2dnZXIiLCJERUZBVUxUX0VOVFJZX05BTUUiLCJQTEFURk9STV9MT0dfU1RSSU5HIiwiX2FwcHMiLCJfY29tcG9uZW50cyIsIl9hZGRDb21wb25lbnQiLCJhZGRDb21wb25lbnQiLCJfYWRkT3JPdmVyd3JpdGVDb21wb25lbnQiLCJhZGRPck92ZXJ3cml0ZUNvbXBvbmVudCIsIl9yZWdpc3RlckNvbXBvbmVudCIsImNvbXBvbmVudE5hbWUiLCJfZ2V0UHJvdmlkZXIiLCJfcmVtb3ZlU2VydmljZUluc3RhbmNlIiwiaW5zdGFuY2VJZGVudGlmaWVyIiwiY2xlYXJJbnN0YW5jZSIsIl9jbGVhckNvbXBvbmVudHMiLCJFUlJPUlMiLCJFUlJPUl9GQUNUT1JZIiwiRmlyZWJhc2VBcHBJbXBsIiwiX2lzRGVsZXRlZCIsIl9vcHRpb25zIiwiX2NvbmZpZyIsIl9uYW1lIiwiX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCIsImF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCIsIl9jb250YWluZXIiLCJjaGVja0Rlc3Ryb3llZCIsInZhbCIsImlzRGVsZXRlZCIsIlNES19WRVJTSU9OIiwiaW5pdGlhbGl6ZUFwcCIsInJhd0NvbmZpZyIsImV4aXN0aW5nQXBwIiwibmV3QXBwIiwiZ2V0QXBwIiwiZ2V0QXBwcyIsImRlbGV0ZUFwcCIsInJlZ2lzdGVyVmVyc2lvbiIsImxpYnJhcnlLZXlPck5hbWUiLCJ2YXJpYW50IiwibGlicmFyeU1pc21hdGNoIiwidmVyc2lvbk1pc21hdGNoIiwid2FybmluZyIsIm9uTG9nIiwibG9nQ2FsbGJhY2siLCJpbnN0YW5jZXMiLCJMb2dMZXZlbCIsImxldmVsU3RyaW5nVG9FbnVtIiwiVkVSQk9TRSIsIklORk8iLCJTSUxFTlQiLCJkZWZhdWx0TG9nTGV2ZWwiLCJDb25zb2xlTWV0aG9kIiwiZGVmYXVsdExvZ0hhbmRsZXIiLCJsb2dUeXBlIiwiTG9nZ2VyIiwiX2xvZ0xldmVsIiwiX2xvZ0hhbmRsZXIiLCJfdXNlckxvZ0hhbmRsZXIiLCJUeXBlRXJyb3IiLCJsZXZlbCIsImluc3QiLCJzZXRVc2VyTG9nSGFuZGxlciIsImN1c3RvbUxvZ0xldmVsIiwidXNlckxvZ0hhbmRsZXIiLCJhcmciLCJpZ25vcmVkIiwiQ29tcG9uZW50IiwiaW5zdGFuY2VGYWN0b3J5IiwibXVsdGlwbGVJbnN0YW5jZXMiLCJzZXJ2aWNlUHJvcHMiLCJpbnN0YW50aWF0aW9uTW9kZSIsIm9uSW5zdGFuY2VDcmVhdGVkIiwicHJvcHMiLCJQcm92aWRlciIsImluc3RhbmNlc0RlZmVycmVkIiwiaW5zdGFuY2VzT3B0aW9ucyIsIm9uSW5pdENhbGxiYWNrcyIsIm5vcm1hbGl6ZWRJZGVudGlmaWVyIiwibm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyIiwic2hvdWxkQXV0b0luaXRpYWxpemUiLCJnZXRPckluaXRpYWxpemVTZXJ2aWNlIiwiaXNDb21wb25lbnRFYWdlciIsImluc3RhbmNlRGVmZXJyZWQiLCJzZXJ2aWNlcyIsIm9wdHMiLCJpc0NvbXBvbmVudFNldCIsImV4aXN0aW5nQ2FsbGJhY2tzIiwiY2FsbGJhY2tzIiwiaW52b2tlT25Jbml0Q2FsbGJhY2tzIiwiQ29tcG9uZW50Q29udGFpbmVyIiwicHJvdmlkZXJzIiwic2V0Q29tcG9uZW50IiwiY29tbW9uanNHbG9iYWwiLCJnbG9iYWxUaGlzIiwiZXNtIiwiZ29vZyIsInVuc2hpZnQiLCJWYiIsInRyaW0iLCJ3IiwicGFyc2VGbG9hdCIsInBhcnNlSW50IiwiZGVmYXVsdFByZXZlbnRlZCIsInJlbGF0ZWRUYXJnZXQiLCJidXR0b24iLCJzY3JlZW5ZIiwic2NyZWVuWCIsImNsaWVudFkiLCJjbGllbnRYIiwibWV0YUtleSIsInNoaWZ0S2V5IiwiYWx0S2V5IiwiY3RybEtleSIsInBvaW50ZXJJZCIsInBvaW50ZXJUeXBlIiwiY2hhbmdlZFRvdWNoZXMiLCJzcmNFbGVtZW50Iiwibm9kZU5hbWUiLCJmcm9tRWxlbWVudCIsInRvRWxlbWVudCIsInBhZ2VYIiwicGFnZVkiLCIyIiwiMyIsIjQiLCJwcmV2ZW50RGVmYXVsdCIsInJldHVyblZhbHVlIiwic3JjIiwiY2FwdHVyZSIsImJiIiwiYWIiLCJmYiIsIm9uY2UiLCJnYiIsImhiIiwiaWIiLCJqYiIsIm1iIiwia2IiLCJhdHRhY2hFdmVudCIsImxiIiwiYWRkTGlzdGVuZXIiLCJyZW1vdmVMaXN0ZW5lciIsIm9iIiwiZGV0YWNoRXZlbnQiLCJwYiIsInFiIiwibmIiLCJyYiIsInNiIiwidGIiLCJBYiIsInZiIiwid2IiLCJ5YiIsInpiIiwiRGIiLCJCYiIsIkNiIiwiRWIiLCJGYiIsIkdiIiwiSWIiLCJIYiIsIkUiLCJKYiIsIktiIiwiTGIiLCJNYiIsIlBiIiwiUmIiLCJTYiIsIlRiIiwiVWIiLCJXYiIsInhiIiwiWGIiLCJZYiIsIlpiIiwiJGIiLCJYTUxIdHRwUmVxdWVzdCIsIk5iIiwiZWIiLCJnZXRSZXNwb25zZUhlYWRlciIsIk9iIiwiUWIiLCJkZCIsImFicyIsImRlY29kZVVSSSIsImVuY29kZVVSSSIsImNkIiwiZWQiLCJnZCIsImhkIiwiUGVyZm9ybWFuY2VOYXZpZ2F0aW9uVGltaW5nIiwicGVyZm9ybWFuY2UiLCJnZXRFbnRyaWVzQnlUeXBlIiwibmV4dEhvcFByb3RvY29sIiwiamQiLCJrZCIsImxkIiwibWQiLCJvZCIsInFkIiwicmQiLCJyZXNwb25zZVR5cGUiLCJyZXNwb25zZVRleHQiLCJzdGF0dXNUZXh0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwidWQiLCJ0ZCIsInNkIiwiY2FjaGUiLCJSZXF1ZXN0IiwiYXJyYXlCdWZmZXIiLCJ0ZXh0Iiwic2V0UmVxdWVzdEhlYWRlciIsImFwcGVuZCIsImdldEFsbFJlc3BvbnNlSGVhZGVycyIsInZkIiwid2QiLCJ4ZCIsInlkIiwiemQiLCJDZCIsIkRkIiwiRWQiLCJBZCIsIm1velJlc3BvbnNlQXJyYXlCdWZmZXIiLCJHZCIsIkZkIiwiSGQiLCJJZCIsImNvbmN1cnJlbnRSZXF1ZXN0TGltaXQiLCJmYXN0SGFuZHNoYWtlIiwiSmQiLCJLZCIsInNlbmRCZWFjb24iLCJJbWFnZSIsIkxkIiwiTWQiLCJRZCIsIlBkIiwicm91bmQiLCJPZCIsIlJkIiwiTmQiLCJuZCIsImFkIiwiYmQiLCJTZCIsIlRkIiwibWVzc2FnZUhlYWRlcnMiLCJjbGllbnRQcm90b2NvbEhlYWRlclJlcXVpcmVkIiwibWVzc2FnZUNvbnRlbnRUeXBlIiwiVWQiLCJfX3NtX18iLCJWZCIsInRvVXBwZXJDYXNlIiwiRm9ybURhdGEiLCJ3aXRoQ3JlZGVudGlhbHMiLCJCZCIsIl9fZGF0YV9fIiwiZ2V0TGFzdEVycm9yIiwiY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCIsImdldFN0YXRFdmVudFRhcmdldCIsIkVycm9yQ29kZSIsIkV2ZW50IiwiU3RhdCIsInViIiwiRmV0Y2hYbWxIdHRwRmFjdG9yeSIsIldlYkNoYW5uZWwiLCJYaHJJbyIsInJlbW92ZUFwcCIsImZpcmViYXNlJDEiLCJjcmVhdGVGaXJlYmFzZU5hbWVzcGFjZSIsIm5hbWVzcGFjZSIsImZpcmViYXNlQXBwSW1wbCIsImFwcHMiLCJhcHBDb21wYXQiLCJyZWdpc3RlckNvbXBvbmVudCIsImNvbXBvbmVudE5hbWVXaXRob3V0Q29tcGF0Iiwic2VydmljZU5hbWVzcGFjZSIsImFwcEFyZyIsIl9nZXRTZXJ2aWNlIiwidXNlQXNTZXJ2aWNlIiwibW9kdWxhckFQSXMiLCJjcmVhdGVGaXJlYmFzZU5hbWVzcGFjZUNvcmUiLCJleHRlbmROYW1lc3BhY2UiLCJzZGtWZXJzaW9uIiwicm5kczgiLCJybmRzIiwiYnl0ZVRvSGV4IiwiYnRoIiwic2hhcmRJZCIsInNoYXJkcyIsIm5vdGlmeVByb21pc2UiLCJjb29raWUiLCJ1dWlkIiwidjQiLCJzZXRUaW1lIiwiZXhwaXJlcyIsImdldFNoYXJkSWQiLCJzaGFyZHNSZWYiLCJjb2xsZWN0aW9uIiwidmFsdWVQcm9taXNlcyIsIm9ic2VydmFibGUiLCJvblNuYXBzaG90Iiwic25hcCIsInJlZiIsImZ1bmMiLCJzdW0iLCJGaWVsZFZhbHVlIiwic2hhcmRSZWYiLCJzZXREb2MiLCJ2MSIsIl9ub2RlSWQiLCJfY2xvY2tzZXEiLCJybmciLCJieXRlc1RvVXVpZCIsIl9sYXN0TVNlY3MiLCJfbGFzdE5TZWNzIiwiY2xvY2tzZXEiLCJzZWVkQnl0ZXMiLCJtc2VjcyIsIm5zZWNzIiwidGwiLCJ0bWgiLCJfaXNBbmRyb2lkT3JJb3NDb3Jkb3ZhU2NoZW1lIiwiX2lzTG9jYWxTdG9yYWdlTm90U3luY2hyb25pemVkIiwiX2lzRWRnZSIsIl9pc1dlYlN0b3JhZ2VTdXBwb3J0ZWQiLCJfaXNQb3B1cFJlZGlyZWN0U3VwcG9ydGVkIiwiX2lzTGlrZWx5Q29yZG92YSIsIlBlcnNpc3RlbmNlIiwiTE9DQUwiLCJOT05FIiwiU0VTU0lPTiIsIl9hc3NlcnQkMyIsIl9zYXZlUGVyc2lzdGVuY2VGb3JSZWRpcmVjdCIsImdldFNlbGZXaW5kb3ciLCJfZ2V0UGVyc2lzdGVuY2UiLCJfYXNzZXJ0JDIiLCJDb21wYXRQb3B1cFJlZGlyZWN0UmVzb2x2ZXIiLCJicm93c2VyUmVzb2x2ZXIiLCJjb3Jkb3ZhUmVzb2x2ZXIiLCJ1bmRlcmx5aW5nUmVzb2x2ZXIiLCJzZWxlY3RVbmRlcmx5aW5nUmVzb2x2ZXIiLCJhc3NlcnRlZFVuZGVybHlpbmdSZXNvbHZlciIsImlzQ29yZG92YSIsInRpbWVvdXRJZCIsIl9pc0NvcmRvdmEiLCJ1bndyYXAiLCJjcmVkZW50aWFsRnJvbU9iamVjdCIsImNyZWRlbnRpYWxGcm9tUmVzdWx0IiwiY3JlZGVudGlhbEZyb21FcnJvciIsImNvbnZlcnRDcmVkZW50aWFsIiwiY3JlZGVudGlhbFByb21pc2UiLCJNdWx0aUZhY3RvclJlc29sdmVyIiwiY3JlZEVyciIsImF0dGFjaEV4dHJhRXJyb3JGaWVsZHMiLCJhZGRpdGlvbmFsVXNlckluZm8iLCJVc2VyIiwiZ2V0T3JDcmVhdGUiLCJjb252ZXJ0Q29uZmlybWF0aW9uUmVzdWx0IiwiY29uZmlybWF0aW9uUmVzdWx0UHJvbWlzZSIsImNvbmZpcm1hdGlvblJlc3VsdEV4cCIsImNvbmZpcm0iLCJ3cmFwcGVkIiwicmVzb2x2ZVNpZ25JbiIsIlVTRVJfTUFQIiwicGhvbmVDcmVkZW50aWFsIiwiX2Fzc2VydCQxIiwiQXV0aCIsImxpbmtVbmRlcmx5aW5nQXV0aCIsInBlcnNpc3RlbmNlcyIsIl9nZXRQZXJzaXN0ZW5jZXNGcm9tUmVkaXJlY3QiLCJ1c2VEZXZpY2VMYW5ndWFnZSIsImVycm9yRm4iLCJ3cmFwT2JzZXJ2ZXJzIiwib25BdXRoU3RhdGVDaGFuZ2VkIiwiY29udmVydGVkIiwiX3ZhbGlkYXRlUGVyc2lzdGVuY2VBcmd1bWVudCIsInVwZGF0ZUN1cnJlbnRVc2VyIiwib2xkTmV4dCIsIlBob25lQXV0aFByb3ZpZGVyIiwidmVyaWZ5UGhvbmVOdW1iZXIiLCJhdXRoUHJvdmlkZXIiLCJzZXRTZXJ2aWNlUHJvcHMiLCJBY3Rpb25Db2RlSW5mbyIsIk9wZXJhdGlvbiIsInNldE11bHRpcGxlSW5zdGFuY2VzIiwiY2FjaGVkU2V0VGltZW91dCIsImNhY2hlZENsZWFyVGltZW91dCIsImRlZmF1bHRTZXRUaW1vdXQiLCJkZWZhdWx0Q2xlYXJUaW1lb3V0IiwicnVuVGltZW91dCIsImZ1biIsImN1cnJlbnRRdWV1ZSIsImRyYWluaW5nIiwicXVldWVJbmRleCIsImNsZWFuVXBOZXh0VGljayIsImRyYWluUXVldWUiLCJtYXJrZXIiLCJydW5DbGVhclRpbWVvdXQiLCJJdGVtIiwiYXJyYXkiLCJuZXh0VGljayIsInRpdGxlIiwiYXJndiIsInZlcnNpb25zIiwib2ZmIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiZW1pdCIsInByZXBlbmRMaXN0ZW5lciIsInByZXBlbmRPbmNlTGlzdGVuZXIiLCJiaW5kaW5nIiwiY3dkIiwiY2hkaXIiLCJ1bWFzayIsInZhbGlkYXRlU2V0T3B0aW9ucyIsImFzc2VydFVpbnQ4QXJyYXlBdmFpbGFibGUiLCJhc3NlcnRCYXNlNjRBdmFpbGFibGUiLCJvdGhlciIsImlzUGFydGlhbE9ic2VydmVyIiwiZGF0YWJhc2VJZE9yQXBwIiwiX3BlcnNpc3RlbmNlUHJvdmlkZXIiLCJfYXBwQ29tcGF0Iiwic2V0dGluZ3NMaXRlcmFsIiwiY3VycmVudFNldHRpbmdzIiwiZXhwZXJpbWVudGFsRm9yY2VPd25pbmdUYWIiLCJlbmFibGVNdWx0aVRhYkluZGV4ZWREYlBlcnNpc3RlbmNlIiwiZW5hYmxlSW5kZXhlZERiUGVyc2lzdGVuY2UiLCJjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlIiwicGF0aFN0cmluZyIsInJlcGxhY2VGdW5jdGlvbk5hbWUiLCJXcml0ZUJhdGNoIiwiYnVuZGxlRGF0YSIsImV4cFF1ZXJ5IiwiZm9yS2V5IiwiZG9jdW1lbnRSZWYiLCJjYXN0UmVmZXJlbmNlIiwiZGF0YU9yRmllbGQiLCJtb3JlRmllbGRzQW5kVmFsdWVzIiwiZXhwU25hcHNob3QiLCJtb2RlbE9iamVjdCIsImNvbnZlcnRlck1hcEJ5RmlyZXN0b3JlIiwiSU5TVEFOQ0VTIiwidW50eXBlZENvbnZlcnRlckJ5Q29udmVydGVyIiwiZmllbGRPclVwZGF0ZURhdGEiLCJleHRyYWN0U25hcHNob3RPcHRpb25zIiwid3JhcE9ic2VydmVyIiwid2l0aENvbnZlcnRlciIsImdldEluc3RhbmNlIiwidXBkYXRlZCIsIndyYXBwZXIiLCJ1c2VyT2JzZXJ2ZXIiLCJvcFN0ciIsImRpcmVjdGlvblN0ciIsIkRvY3VtZW50Q2hhbmdlIiwiZG9jQ2hhbmdlIiwidGhpc0FyZyIsImRvY1JlZiIsImRvY3VtZW50UGF0aCIsImZpZWxkTmFtZXMiLCJkZWxlZ2F0ZSIsImZpcmVzdG9yZU5hbWVzcGFjZSIsIkZpcmVzdG9yZSIsIkdlb1BvaW50IiwiVGltZXN0YW1wIiwiQmxvYiIsIlRyYW5zYWN0aW9uIiwiRG9jdW1lbnRSZWZlcmVuY2UiLCJEb2N1bWVudFNuYXBzaG90IiwiUXVlcnkiLCJRdWVyeURvY3VtZW50U25hcHNob3QiLCJRdWVyeVNuYXBzaG90IiwiQ29sbGVjdGlvblJlZmVyZW5jZSIsIkZpZWxkUGF0aCIsIkNBQ0hFX1NJWkVfVU5MSU1JVEVEIiwiZmlyZXN0b3JlRmFjdG9yeSIsImZpcmVzdG9yZUV4cCJdLCJtYXBwaW5ncyI6IndCQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlC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aHBCSixTQUFxQjZ5QyxHQUNqQixhQUFjQSxJQWdwQmRvYSxxQkFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFxQ0osSUFBMkJ6eUYsRUE1QmEweUYsRUE0QmIxeUYsRUFJVCxJQWhDc0IweUYsRUE2QkwsQ0FBQ3ZpRixFQUFLd2lGLElBQWlCLElBQUksRUFBVXhpRixFQUFLd2lGLEVBQWMsSUFBSSxHQUF0RTN5RixFQTVCWmtuQyxTQUFTZy9DLGtCQUFrQixJQUFJLElBQVUsbUJBQW9CbjRELElBQ2xFLE1BQU01ZCxFQUFNNGQsRUFBVXFSLFlBQVksY0FBY0MsZUFDMUNzekQsRUFBZTVrRSxFQUFVcVIsWUFBWSxhQUFhQyxlQUN4RCxPQUFPcXpELEVBQWlCdmlGLEVBQUt3aUYsSUFDOUIsVUFBVTdGLGdCQUFnQmg5RixPQUFPeUcsT0FBTyxHQUFJcTdGLEtBeUIvQzV4RixFQUFTODJFLGdCQTE5QkEsNkJBQ0ciLCJmaWxlIjoic2hhcmRlZC1jb3VudGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDExKTtcbiIsIi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IEZpcmViYXNlIGNvbnN0YW50cy4gIFNvbWUgb2YgdGhlc2UgKEBkZWZpbmVzKSBjYW4gYmUgb3ZlcnJpZGRlbiBhdCBjb21waWxlLXRpbWUuXHJcbiAqL1xyXG5jb25zdCBDT05TVEFOVFMgPSB7XHJcbiAgICAvKipcclxuICAgICAqIEBkZWZpbmUge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBpcyB0aGUgY2xpZW50IE5vZGUuanMgU0RLLlxyXG4gICAgICovXHJcbiAgICBOT0RFX0NMSUVOVDogZmFsc2UsXHJcbiAgICAvKipcclxuICAgICAqIEBkZWZpbmUge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBpcyB0aGUgQWRtaW4gTm9kZS5qcyBTREsuXHJcbiAgICAgKi9cclxuICAgIE5PREVfQURNSU46IGZhbHNlLFxyXG4gICAgLyoqXHJcbiAgICAgKiBGaXJlYmFzZSBTREsgVmVyc2lvblxyXG4gICAgICovXHJcbiAgICBTREtfVkVSU0lPTjogJyR7SlNDT1JFX1ZFUlNJT059J1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhyb3dzIGFuIGVycm9yIGlmIHRoZSBwcm92aWRlZCBhc3NlcnRpb24gaXMgZmFsc3lcclxuICovXHJcbmNvbnN0IGFzc2VydCA9IGZ1bmN0aW9uIChhc3NlcnRpb24sIG1lc3NhZ2UpIHtcclxuICAgIGlmICghYXNzZXJ0aW9uKSB7XHJcbiAgICAgICAgdGhyb3cgYXNzZXJ0aW9uRXJyb3IobWVzc2FnZSk7XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGFuIEVycm9yIG9iamVjdCBzdWl0YWJsZSBmb3IgdGhyb3dpbmcuXHJcbiAqL1xyXG5jb25zdCBhc3NlcnRpb25FcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XHJcbiAgICByZXR1cm4gbmV3IEVycm9yKCdGaXJlYmFzZSBEYXRhYmFzZSAoJyArXHJcbiAgICAgICAgQ09OU1RBTlRTLlNES19WRVJTSU9OICtcclxuICAgICAgICAnKSBJTlRFUk5BTCBBU1NFUlQgRkFJTEVEOiAnICtcclxuICAgICAgICBtZXNzYWdlKTtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3Qgc3RyaW5nVG9CeXRlQXJyYXkkMSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIC8vIFRPRE8odXNlcik6IFVzZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIGlmL3doZW4gYXZhaWxhYmxlXHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICBpZiAoYyA8IDEyOCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IGM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gNikgfCAxOTI7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKChjICYgMHhmYzAwKSA9PT0gMHhkODAwICYmXHJcbiAgICAgICAgICAgIGkgKyAxIDwgc3RyLmxlbmd0aCAmJlxyXG4gICAgICAgICAgICAoc3RyLmNoYXJDb2RlQXQoaSArIDEpICYgMHhmYzAwKSA9PT0gMHhkYzAwKSB7XHJcbiAgICAgICAgICAgIC8vIFN1cnJvZ2F0ZSBQYWlyXHJcbiAgICAgICAgICAgIGMgPSAweDEwMDAwICsgKChjICYgMHgwM2ZmKSA8PCAxMCkgKyAoc3RyLmNoYXJDb2RlQXQoKytpKSAmIDB4MDNmZik7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTgpIHwgMjQwO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiAxMikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxMikgfCAyMjQ7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXQ7XHJcbn07XHJcbi8qKlxyXG4gKiBUdXJucyBhbiBhcnJheSBvZiBudW1iZXJzIGludG8gdGhlIHN0cmluZyBnaXZlbiBieSB0aGUgY29uY2F0ZW5hdGlvbiBvZiB0aGVcclxuICogY2hhcmFjdGVycyB0byB3aGljaCB0aGUgbnVtYmVycyBjb3JyZXNwb25kLlxyXG4gKiBAcGFyYW0gYnl0ZXMgQXJyYXkgb2YgbnVtYmVycyByZXByZXNlbnRpbmcgY2hhcmFjdGVycy5cclxuICogQHJldHVybiBTdHJpbmdpZmljYXRpb24gb2YgdGhlIGFycmF5LlxyXG4gKi9cclxuY29uc3QgYnl0ZUFycmF5VG9TdHJpbmcgPSBmdW5jdGlvbiAoYnl0ZXMpIHtcclxuICAgIC8vIFRPRE8odXNlcik6IFVzZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIGlmL3doZW4gYXZhaWxhYmxlXHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwb3MgPSAwLCBjID0gMDtcclxuICAgIHdoaWxlIChwb3MgPCBieXRlcy5sZW5ndGgpIHtcclxuICAgICAgICBjb25zdCBjMSA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICBpZiAoYzEgPCAxMjgpIHtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGMxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYzEgPiAxOTEgJiYgYzEgPCAyMjQpIHtcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgoKGMxICYgMzEpIDw8IDYpIHwgKGMyICYgNjMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYzEgPiAyMzkgJiYgYzEgPCAzNjUpIHtcclxuICAgICAgICAgICAgLy8gU3Vycm9nYXRlIFBhaXJcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IGMzID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBjb25zdCBjNCA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgY29uc3QgdSA9ICgoKGMxICYgNykgPDwgMTgpIHwgKChjMiAmIDYzKSA8PCAxMikgfCAoKGMzICYgNjMpIDw8IDYpIHwgKGM0ICYgNjMpKSAtXHJcbiAgICAgICAgICAgICAgICAweDEwMDAwO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhkODAwICsgKHUgPj4gMTApKTtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZGMwMCArICh1ICYgMTAyMykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IGMzID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMSAmIDE1KSA8PCAxMikgfCAoKGMyICYgNjMpIDw8IDYpIHwgKGMzICYgNjMpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0LmpvaW4oJycpO1xyXG59O1xyXG4vLyBXZSBkZWZpbmUgaXQgYXMgYW4gb2JqZWN0IGxpdGVyYWwgaW5zdGVhZCBvZiBhIGNsYXNzIGJlY2F1c2UgYSBjbGFzcyBjb21waWxlZCBkb3duIHRvIGVzNSBjYW4ndFxyXG4vLyBiZSB0cmVlc2hha2VkLiBodHRwczovL2dpdGh1Yi5jb20vcm9sbHVwL3JvbGx1cC9pc3N1ZXMvMTY5MVxyXG4vLyBTdGF0aWMgbG9va3VwIG1hcHMsIGxhemlseSBwb3B1bGF0ZWQgYnkgaW5pdF8oKVxyXG5jb25zdCBiYXNlNjQgPSB7XHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgYnl0ZXMgdG8gY2hhcmFjdGVycy5cclxuICAgICAqL1xyXG4gICAgYnl0ZVRvQ2hhck1hcF86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgY2hhcmFjdGVycyB0byBieXRlcy5cclxuICAgICAqL1xyXG4gICAgY2hhclRvQnl0ZU1hcF86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgYnl0ZXMgdG8gd2Vic2FmZSBjaGFyYWN0ZXJzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgYnl0ZVRvQ2hhck1hcFdlYlNhZmVfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIHdlYnNhZmUgY2hhcmFjdGVycyB0byBieXRlcy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGNoYXJUb0J5dGVNYXBXZWJTYWZlXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIGRlZmF1bHQgYWxwaGFiZXQsIHNoYXJlZCBiZXR3ZWVuXHJcbiAgICAgKiBFTkNPREVEX1ZBTFMgYW5kIEVOQ09ERURfVkFMU19XRUJTQUZFXHJcbiAgICAgKi9cclxuICAgIEVOQ09ERURfVkFMU19CQVNFOiAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVonICsgJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6JyArICcwMTIzNDU2Nzg5JyxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIGRlZmF1bHQgYWxwaGFiZXQuIFZhbHVlIDY0ICg9KSBpcyBzcGVjaWFsOyBpdCBtZWFucyBcIm5vdGhpbmcuXCJcclxuICAgICAqL1xyXG4gICAgZ2V0IEVOQ09ERURfVkFMUygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRSArICcrLz0nO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIHdlYnNhZmUgYWxwaGFiZXQuXHJcbiAgICAgKi9cclxuICAgIGdldCBFTkNPREVEX1ZBTFNfV0VCU0FGRSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRSArICctXy4nO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogV2hldGhlciB0aGlzIGJyb3dzZXIgc3VwcG9ydHMgdGhlIGF0b2IgYW5kIGJ0b2EgZnVuY3Rpb25zLiBUaGlzIGV4dGVuc2lvblxyXG4gICAgICogc3RhcnRlZCBhdCBNb3ppbGxhIGJ1dCBpcyBub3cgaW1wbGVtZW50ZWQgYnkgbWFueSBicm93c2Vycy4gV2UgdXNlIHRoZVxyXG4gICAgICogQVNTVU1FXyogdmFyaWFibGVzIHRvIGF2b2lkIHB1bGxpbmcgaW4gdGhlIGZ1bGwgdXNlcmFnZW50IGRldGVjdGlvbiBsaWJyYXJ5XHJcbiAgICAgKiBidXQgc3RpbGwgYWxsb3dpbmcgdGhlIHN0YW5kYXJkIHBlci1icm93c2VyIGNvbXBpbGF0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIEhBU19OQVRJVkVfU1VQUE9SVDogdHlwZW9mIGF0b2IgPT09ICdmdW5jdGlvbicsXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1lbmNvZGUgYW4gYXJyYXkgb2YgYnl0ZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IEFuIGFycmF5IG9mIGJ5dGVzIChudW1iZXJzIHdpdGhcclxuICAgICAqICAgICB2YWx1ZSBpbiBbMCwgMjU1XSkgdG8gZW5jb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgQm9vbGVhbiBpbmRpY2F0aW5nIHdlIHNob3VsZCB1c2UgdGhlXHJcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIGVuY29kZUJ5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ2VuY29kZUJ5dGVBcnJheSB0YWtlcyBhbiBhcnJheSBhcyBhIHBhcmFtZXRlcicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluaXRfKCk7XHJcbiAgICAgICAgY29uc3QgYnl0ZVRvQ2hhck1hcCA9IHdlYlNhZmVcclxuICAgICAgICAgICAgPyB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1xyXG4gICAgICAgICAgICA6IHRoaXMuYnl0ZVRvQ2hhck1hcF87XHJcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkgKz0gMykge1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMSA9IGlucHV0W2ldO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTIgPSBpICsgMSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTIgPSBoYXZlQnl0ZTIgPyBpbnB1dFtpICsgMV0gOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTMgPSBpICsgMiA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTMgPSBoYXZlQnl0ZTMgPyBpbnB1dFtpICsgMl0gOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMSA9IGJ5dGUxID4+IDI7XHJcbiAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUyID0gKChieXRlMSAmIDB4MDMpIDw8IDQpIHwgKGJ5dGUyID4+IDQpO1xyXG4gICAgICAgICAgICBsZXQgb3V0Qnl0ZTMgPSAoKGJ5dGUyICYgMHgwZikgPDwgMikgfCAoYnl0ZTMgPj4gNik7XHJcbiAgICAgICAgICAgIGxldCBvdXRCeXRlNCA9IGJ5dGUzICYgMHgzZjtcclxuICAgICAgICAgICAgaWYgKCFoYXZlQnl0ZTMpIHtcclxuICAgICAgICAgICAgICAgIG91dEJ5dGU0ID0gNjQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWhhdmVCeXRlMikge1xyXG4gICAgICAgICAgICAgICAgICAgIG91dEJ5dGUzID0gNjQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3V0cHV0LnB1c2goYnl0ZVRvQ2hhck1hcFtvdXRCeXRlMV0sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTJdLCBieXRlVG9DaGFyTWFwW291dEJ5dGUzXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlNF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0LmpvaW4oJycpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWVuY29kZSBhIHN0cmluZy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgQSBzdHJpbmcgdG8gZW5jb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgSWYgdHJ1ZSwgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gVGhlIGJhc2U2NCBlbmNvZGVkIHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgZW5jb2RlU3RyaW5nKGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcclxuICAgICAgICAvLyBhIG5hdGl2ZSBiYXNlNjQgZW5jb2RlciBpbiB0aGUgZm9ybSBvZiBcImJ0b2EvYXRvYlwiXHJcbiAgICAgICAgaWYgKHRoaXMuSEFTX05BVElWRV9TVVBQT1JUICYmICF3ZWJTYWZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBidG9hKGlucHV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlQnl0ZUFycmF5KHN0cmluZ1RvQnl0ZUFycmF5JDEoaW5wdXQpLCB3ZWJTYWZlKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1kZWNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IHRvIGRlY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIFRydWUgaWYgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZGVjb2RlZCB2YWx1ZS5cclxuICAgICAqL1xyXG4gICAgZGVjb2RlU3RyaW5nKGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcclxuICAgICAgICAvLyBhIG5hdGl2ZSBiYXNlNjQgZW5jb2RlciBpbiB0aGUgZm9ybSBvZiBcImJ0b2EvYXRvYlwiXHJcbiAgICAgICAgaWYgKHRoaXMuSEFTX05BVElWRV9TVVBQT1JUICYmICF3ZWJTYWZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdG9iKGlucHV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGJ5dGVBcnJheVRvU3RyaW5nKHRoaXMuZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkoaW5wdXQsIHdlYlNhZmUpKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1kZWNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogSW4gYmFzZS02NCBkZWNvZGluZywgZ3JvdXBzIG9mIGZvdXIgY2hhcmFjdGVycyBhcmUgY29udmVydGVkIGludG8gdGhyZWVcclxuICAgICAqIGJ5dGVzLiAgSWYgdGhlIGVuY29kZXIgZGlkIG5vdCBhcHBseSBwYWRkaW5nLCB0aGUgaW5wdXQgbGVuZ3RoIG1heSBub3RcclxuICAgICAqIGJlIGEgbXVsdGlwbGUgb2YgNC5cclxuICAgICAqXHJcbiAgICAgKiBJbiB0aGlzIGNhc2UsIHRoZSBsYXN0IGdyb3VwIHdpbGwgaGF2ZSBmZXdlciB0aGFuIDQgY2hhcmFjdGVycywgYW5kXHJcbiAgICAgKiBwYWRkaW5nIHdpbGwgYmUgaW5mZXJyZWQuICBJZiB0aGUgZ3JvdXAgaGFzIG9uZSBvciB0d28gY2hhcmFjdGVycywgaXQgZGVjb2Rlc1xyXG4gICAgICogdG8gb25lIGJ5dGUuICBJZiB0aGUgZ3JvdXAgaGFzIHRocmVlIGNoYXJhY3RlcnMsIGl0IGRlY29kZXMgdG8gdHdvIGJ5dGVzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCBJbnB1dCB0byBkZWNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBUcnVlIGlmIHdlIHNob3VsZCB1c2UgdGhlIHdlYi1zYWZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBieXRlcyByZXByZXNlbnRpbmcgdGhlIGRlY29kZWQgdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIGRlY29kZVN0cmluZ1RvQnl0ZUFycmF5KGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgdGhpcy5pbml0XygpO1xyXG4gICAgICAgIGNvbnN0IGNoYXJUb0J5dGVNYXAgPSB3ZWJTYWZlXHJcbiAgICAgICAgICAgID8gdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9cclxuICAgICAgICAgICAgOiB0aGlzLmNoYXJUb0J5dGVNYXBfO1xyXG4gICAgICAgIGNvbnN0IG91dHB1dCA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOykge1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMSA9IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkrKyldO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTIgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMiA9IGhhdmVCeXRlMiA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDA7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUzID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTMgPSBoYXZlQnl0ZTMgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiA2NDtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTQgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlNCA9IGhhdmVCeXRlNCA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDY0O1xyXG4gICAgICAgICAgICArK2k7XHJcbiAgICAgICAgICAgIGlmIChieXRlMSA9PSBudWxsIHx8IGJ5dGUyID09IG51bGwgfHwgYnl0ZTMgPT0gbnVsbCB8fCBieXRlNCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUxID0gKGJ5dGUxIDw8IDIpIHwgKGJ5dGUyID4+IDQpO1xyXG4gICAgICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMSk7XHJcbiAgICAgICAgICAgIGlmIChieXRlMyAhPT0gNjQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUyID0gKChieXRlMiA8PCA0KSAmIDB4ZjApIHwgKGJ5dGUzID4+IDIpO1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJ5dGU0ICE9PSA2NCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUzID0gKChieXRlMyA8PCA2KSAmIDB4YzApIHwgYnl0ZTQ7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBMYXp5IHN0YXRpYyBpbml0aWFsaXphdGlvbiBmdW5jdGlvbi4gQ2FsbGVkIGJlZm9yZVxyXG4gICAgICogYWNjZXNzaW5nIGFueSBvZiB0aGUgc3RhdGljIG1hcCB2YXJpYWJsZXMuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBpbml0XygpIHtcclxuICAgICAgICBpZiAoIXRoaXMuYnl0ZVRvQ2hhck1hcF8pIHtcclxuICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfID0ge307XHJcbiAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfID0ge307XHJcbiAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfID0ge307XHJcbiAgICAgICAgICAgIC8vIFdlIHdhbnQgcXVpY2sgbWFwcGluZ3MgYmFjayBhbmQgZm9ydGgsIHNvIHdlIHByZWNvbXB1dGUgdHdvIG1hcHMuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5FTkNPREVEX1ZBTFMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcF9baV0gPSB0aGlzLkVOQ09ERURfVkFMUy5jaGFyQXQoaSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfW3RoaXMuYnl0ZVRvQ2hhck1hcF9baV1dID0gaTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfW2ldID0gdGhpcy5FTkNPREVEX1ZBTFNfV0VCU0FGRS5jaGFyQXQoaSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlX1t0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1tpXV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgLy8gQmUgZm9yZ2l2aW5nIHdoZW4gZGVjb2RpbmcgYW5kIGNvcnJlY3RseSBkZWNvZGUgYm90aCBlbmNvZGluZ3MuXHJcbiAgICAgICAgICAgICAgICBpZiAoaSA+PSB0aGlzLkVOQ09ERURfVkFMU19CQVNFLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF9bdGhpcy5FTkNPREVEX1ZBTFNfV0VCU0FGRS5jaGFyQXQoaSldID0gaTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlX1t0aGlzLkVOQ09ERURfVkFMUy5jaGFyQXQoaSldID0gaTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBlbmNvZGluZ1xyXG4gKi9cclxuY29uc3QgYmFzZTY0RW5jb2RlID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgY29uc3QgdXRmOEJ5dGVzID0gc3RyaW5nVG9CeXRlQXJyYXkkMShzdHIpO1xyXG4gICAgcmV0dXJuIGJhc2U2NC5lbmNvZGVCeXRlQXJyYXkodXRmOEJ5dGVzLCB0cnVlKTtcclxufTtcclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBlbmNvZGluZyAod2l0aG91dCBcIi5cIiBwYWRkaW5nIGluIHRoZSBlbmQpLlxyXG4gKiBlLmcuIFVzZWQgaW4gSlNPTiBXZWIgVG9rZW4gKEpXVCkgcGFydHMuXHJcbiAqL1xyXG5jb25zdCBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIC8vIFVzZSBiYXNlNjR1cmwgZW5jb2RpbmcgYW5kIHJlbW92ZSBwYWRkaW5nIGluIHRoZSBlbmQgKGRvdCBjaGFyYWN0ZXJzKS5cclxuICAgIHJldHVybiBiYXNlNjRFbmNvZGUoc3RyKS5yZXBsYWNlKC9cXC4vZywgJycpO1xyXG59O1xyXG4vKipcclxuICogVVJMLXNhZmUgYmFzZTY0IGRlY29kaW5nXHJcbiAqXHJcbiAqIE5PVEU6IERPIE5PVCB1c2UgdGhlIGdsb2JhbCBhdG9iKCkgZnVuY3Rpb24gLSBpdCBkb2VzIE5PVCBzdXBwb3J0IHRoZVxyXG4gKiBiYXNlNjRVcmwgdmFyaWFudCBlbmNvZGluZy5cclxuICpcclxuICogQHBhcmFtIHN0ciBUbyBiZSBkZWNvZGVkXHJcbiAqIEByZXR1cm4gRGVjb2RlZCByZXN1bHQsIGlmIHBvc3NpYmxlXHJcbiAqL1xyXG5jb25zdCBiYXNlNjREZWNvZGUgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiBiYXNlNjQuZGVjb2RlU3RyaW5nKHN0ciwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ2Jhc2U2NERlY29kZSBmYWlsZWQ6ICcsIGUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEbyBhIGRlZXAtY29weSBvZiBiYXNpYyBKYXZhU2NyaXB0IE9iamVjdHMgb3IgQXJyYXlzLlxyXG4gKi9cclxuZnVuY3Rpb24gZGVlcENvcHkodmFsdWUpIHtcclxuICAgIHJldHVybiBkZWVwRXh0ZW5kKHVuZGVmaW5lZCwgdmFsdWUpO1xyXG59XHJcbi8qKlxyXG4gKiBDb3B5IHByb3BlcnRpZXMgZnJvbSBzb3VyY2UgdG8gdGFyZ2V0IChyZWN1cnNpdmVseSBhbGxvd3MgZXh0ZW5zaW9uXHJcbiAqIG9mIE9iamVjdHMgYW5kIEFycmF5cykuICBTY2FsYXIgdmFsdWVzIGluIHRoZSB0YXJnZXQgYXJlIG92ZXItd3JpdHRlbi5cclxuICogSWYgdGFyZ2V0IGlzIHVuZGVmaW5lZCwgYW4gb2JqZWN0IG9mIHRoZSBhcHByb3ByaWF0ZSB0eXBlIHdpbGwgYmUgY3JlYXRlZFxyXG4gKiAoYW5kIHJldHVybmVkKS5cclxuICpcclxuICogV2UgcmVjdXJzaXZlbHkgY29weSBhbGwgY2hpbGQgcHJvcGVydGllcyBvZiBwbGFpbiBPYmplY3RzIGluIHRoZSBzb3VyY2UtIHNvXHJcbiAqIHRoYXQgbmFtZXNwYWNlLSBsaWtlIGRpY3Rpb25hcmllcyBhcmUgbWVyZ2VkLlxyXG4gKlxyXG4gKiBOb3RlIHRoYXQgdGhlIHRhcmdldCBjYW4gYmUgYSBmdW5jdGlvbiwgaW4gd2hpY2ggY2FzZSB0aGUgcHJvcGVydGllcyBpblxyXG4gKiB0aGUgc291cmNlIE9iamVjdCBhcmUgY29waWVkIG9udG8gaXQgYXMgc3RhdGljIHByb3BlcnRpZXMgb2YgdGhlIEZ1bmN0aW9uLlxyXG4gKlxyXG4gKiBOb3RlOiB3ZSBkb24ndCBtZXJnZSBfX3Byb3RvX18gdG8gcHJldmVudCBwcm90b3R5cGUgcG9sbHV0aW9uXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWVwRXh0ZW5kKHRhcmdldCwgc291cmNlKSB7XHJcbiAgICBpZiAoIShzb3VyY2UgaW5zdGFuY2VvZiBPYmplY3QpKSB7XHJcbiAgICAgICAgcmV0dXJuIHNvdXJjZTtcclxuICAgIH1cclxuICAgIHN3aXRjaCAoc291cmNlLmNvbnN0cnVjdG9yKSB7XHJcbiAgICAgICAgY2FzZSBEYXRlOlxyXG4gICAgICAgICAgICAvLyBUcmVhdCBEYXRlcyBsaWtlIHNjYWxhcnM7IGlmIHRoZSB0YXJnZXQgZGF0ZSBvYmplY3QgaGFkIGFueSBjaGlsZFxyXG4gICAgICAgICAgICAvLyBwcm9wZXJ0aWVzIC0gdGhleSB3aWxsIGJlIGxvc3QhXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGVWYWx1ZSA9IHNvdXJjZTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGVWYWx1ZS5nZXRUaW1lKCkpO1xyXG4gICAgICAgIGNhc2UgT2JqZWN0OlxyXG4gICAgICAgICAgICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldCA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQXJyYXk6XHJcbiAgICAgICAgICAgIC8vIEFsd2F5cyBjb3B5IHRoZSBhcnJheSBzb3VyY2UgYW5kIG92ZXJ3cml0ZSB0aGUgdGFyZ2V0LlxyXG4gICAgICAgICAgICB0YXJnZXQgPSBbXTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgLy8gTm90IGEgcGxhaW4gT2JqZWN0IC0gdHJlYXQgaXQgYXMgYSBzY2FsYXIuXHJcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2U7XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IHByb3AgaW4gc291cmNlKSB7XHJcbiAgICAgICAgLy8gdXNlIGlzVmFsaWRLZXkgdG8gZ3VhcmQgYWdhaW5zdCBwcm90b3R5cGUgcG9sbHV0aW9uLiBTZWUgaHR0cHM6Ly9zbnlrLmlvL3Z1bG4vU05ZSy1KUy1MT0RBU0gtNDUwMjAyXHJcbiAgICAgICAgaWYgKCFzb3VyY2UuaGFzT3duUHJvcGVydHkocHJvcCkgfHwgIWlzVmFsaWRLZXkocHJvcCkpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhcmdldFtwcm9wXSA9IGRlZXBFeHRlbmQodGFyZ2V0W3Byb3BdLCBzb3VyY2VbcHJvcF0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRhcmdldDtcclxufVxyXG5mdW5jdGlvbiBpc1ZhbGlkS2V5KGtleSkge1xyXG4gICAgcmV0dXJuIGtleSAhPT0gJ19fcHJvdG9fXyc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgRGVmZXJyZWQge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5yZWplY3QgPSAoKSA9PiB7IH07XHJcbiAgICAgICAgdGhpcy5yZXNvbHZlID0gKCkgPT4geyB9O1xyXG4gICAgICAgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZXNvbHZlID0gcmVzb2x2ZTtcclxuICAgICAgICAgICAgdGhpcy5yZWplY3QgPSByZWplY3Q7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE91ciBBUEkgaW50ZXJuYWxzIGFyZSBub3QgcHJvbWlzZWlmaWVkIGFuZCBjYW5ub3QgYmVjYXVzZSBvdXIgY2FsbGJhY2sgQVBJcyBoYXZlIHN1YnRsZSBleHBlY3RhdGlvbnMgYXJvdW5kXHJcbiAgICAgKiBpbnZva2luZyBwcm9taXNlcyBpbmxpbmUsIHdoaWNoIFByb21pc2VzIGFyZSBmb3JiaWRkZW4gdG8gZG8uIFRoaXMgbWV0aG9kIGFjY2VwdHMgYW4gb3B0aW9uYWwgbm9kZS1zdHlsZSBjYWxsYmFja1xyXG4gICAgICogYW5kIHJldHVybnMgYSBub2RlLXN0eWxlIGNhbGxiYWNrIHdoaWNoIHdpbGwgcmVzb2x2ZSBvciByZWplY3QgdGhlIERlZmVycmVkJ3MgcHJvbWlzZS5cclxuICAgICAqL1xyXG4gICAgd3JhcENhbGxiYWNrKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgcmV0dXJuIChlcnJvciwgdmFsdWUpID0+IHtcclxuICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc29sdmUodmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIC8vIEF0dGFjaGluZyBub29wIGhhbmRsZXIganVzdCBpbiBjYXNlIGRldmVsb3BlciB3YXNuJ3QgZXhwZWN0aW5nXHJcbiAgICAgICAgICAgICAgICAvLyBwcm9taXNlc1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9taXNlLmNhdGNoKCgpID0+IHsgfSk7XHJcbiAgICAgICAgICAgICAgICAvLyBTb21lIG9mIG91ciBjYWxsYmFja3MgZG9uJ3QgZXhwZWN0IGEgdmFsdWUgYW5kIG91ciBvd24gdGVzdHNcclxuICAgICAgICAgICAgICAgIC8vIGFzc2VydCB0aGF0IHRoZSBwYXJhbWV0ZXIgbGVuZ3RoIGlzIDFcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjay5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnJvciwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVNb2NrVXNlclRva2VuKHRva2VuLCBwcm9qZWN0SWQpIHtcclxuICAgIGlmICh0b2tlbi51aWQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBcInVpZFwiIGZpZWxkIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQgYnkgbW9ja1VzZXJUb2tlbi4gUGxlYXNlIHVzZSBcInN1YlwiIGluc3RlYWQgZm9yIEZpcmViYXNlIEF1dGggVXNlciBJRC4nKTtcclxuICAgIH1cclxuICAgIC8vIFVuc2VjdXJlZCBKV1RzIHVzZSBcIm5vbmVcIiBhcyB0aGUgYWxnb3JpdGhtLlxyXG4gICAgY29uc3QgaGVhZGVyID0ge1xyXG4gICAgICAgIGFsZzogJ25vbmUnLFxyXG4gICAgICAgIHR5cGU6ICdKV1QnXHJcbiAgICB9O1xyXG4gICAgY29uc3QgcHJvamVjdCA9IHByb2plY3RJZCB8fCAnZGVtby1wcm9qZWN0JztcclxuICAgIGNvbnN0IGlhdCA9IHRva2VuLmlhdCB8fCAwO1xyXG4gICAgY29uc3Qgc3ViID0gdG9rZW4uc3ViIHx8IHRva2VuLnVzZXJfaWQ7XHJcbiAgICBpZiAoIXN1Yikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIm1vY2tVc2VyVG9rZW4gbXVzdCBjb250YWluICdzdWInIG9yICd1c2VyX2lkJyBmaWVsZCFcIik7XHJcbiAgICB9XHJcbiAgICBjb25zdCBwYXlsb2FkID0gT2JqZWN0LmFzc2lnbih7IFxyXG4gICAgICAgIC8vIFNldCBhbGwgcmVxdWlyZWQgZmllbGRzIHRvIGRlY2VudCBkZWZhdWx0c1xyXG4gICAgICAgIGlzczogYGh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS8ke3Byb2plY3R9YCwgYXVkOiBwcm9qZWN0LCBpYXQsIGV4cDogaWF0ICsgMzYwMCwgYXV0aF90aW1lOiBpYXQsIHN1YiwgdXNlcl9pZDogc3ViLCBmaXJlYmFzZToge1xyXG4gICAgICAgICAgICBzaWduX2luX3Byb3ZpZGVyOiAnY3VzdG9tJyxcclxuICAgICAgICAgICAgaWRlbnRpdGllczoge31cclxuICAgICAgICB9IH0sIHRva2VuKTtcclxuICAgIC8vIFVuc2VjdXJlZCBKV1RzIHVzZSB0aGUgZW1wdHkgc3RyaW5nIGFzIGEgc2lnbmF0dXJlLlxyXG4gICAgY29uc3Qgc2lnbmF0dXJlID0gJyc7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nKEpTT04uc3RyaW5naWZ5KGhlYWRlcikpLFxyXG4gICAgICAgIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nKEpTT04uc3RyaW5naWZ5KHBheWxvYWQpKSxcclxuICAgICAgICBzaWduYXR1cmVcclxuICAgIF0uam9pbignLicpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXR1cm5zIG5hdmlnYXRvci51c2VyQWdlbnQgc3RyaW5nIG9yICcnIGlmIGl0J3Mgbm90IGRlZmluZWQuXHJcbiAqIEByZXR1cm4gdXNlciBhZ2VudCBzdHJpbmdcclxuICovXHJcbmZ1bmN0aW9uIGdldFVBKCkge1xyXG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgdHlwZW9mIG5hdmlnYXRvclsndXNlckFnZW50J10gPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgcmV0dXJuIG5hdmlnYXRvclsndXNlckFnZW50J107XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBDb3Jkb3ZhIC8gUGhvbmVHYXAgLyBJb25pYyBmcmFtZXdvcmtzIG9uIGEgbW9iaWxlIGRldmljZS5cclxuICpcclxuICogRGVsaWJlcmF0ZWx5IGRvZXMgbm90IHJlbHkgb24gY2hlY2tpbmcgYGZpbGU6Ly9gIFVSTHMgKGFzIHRoaXMgZmFpbHMgUGhvbmVHYXBcclxuICogaW4gdGhlIFJpcHBsZSBlbXVsYXRvcikgbm9yIENvcmRvdmEgYG9uRGV2aWNlUmVhZHlgLCB3aGljaCB3b3VsZCBub3JtYWxseVxyXG4gKiB3YWl0IGZvciBhIGNhbGxiYWNrLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNNb2JpbGVDb3Jkb3ZhKCkge1xyXG4gICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmUgU2V0dGluZyB1cCBhbiBicm9hZGx5IGFwcGxpY2FibGUgaW5kZXggc2lnbmF0dXJlIGZvciBXaW5kb3dcclxuICAgICAgICAvLyBqdXN0IHRvIGRlYWwgd2l0aCB0aGlzIGNhc2Ugd291bGQgcHJvYmFibHkgYmUgYSBiYWQgaWRlYS5cclxuICAgICAgICAhISh3aW5kb3dbJ2NvcmRvdmEnXSB8fCB3aW5kb3dbJ3Bob25lZ2FwJ10gfHwgd2luZG93WydQaG9uZUdhcCddKSAmJlxyXG4gICAgICAgIC9pb3N8aXBob25lfGlwb2R8aXBhZHxhbmRyb2lkfGJsYWNrYmVycnl8aWVtb2JpbGUvaS50ZXN0KGdldFVBKCkpKTtcclxufVxyXG4vKipcclxuICogRGV0ZWN0IE5vZGUuanMuXHJcbiAqXHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBOb2RlLmpzIGVudmlyb25tZW50IGlzIGRldGVjdGVkLlxyXG4gKi9cclxuLy8gTm9kZSBkZXRlY3Rpb24gbG9naWMgZnJvbTogaHR0cHM6Ly9naXRodWIuY29tL2lsaWFrYW4vZGV0ZWN0LW5vZGUvXHJcbmZ1bmN0aW9uIGlzTm9kZSgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXScpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBCcm93c2VyIEVudmlyb25tZW50XHJcbiAqL1xyXG5mdW5jdGlvbiBpc0Jyb3dzZXIoKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHNlbGYgPT09ICdvYmplY3QnICYmIHNlbGYuc2VsZiA9PT0gc2VsZjtcclxufVxyXG5mdW5jdGlvbiBpc0Jyb3dzZXJFeHRlbnNpb24oKSB7XHJcbiAgICBjb25zdCBydW50aW1lID0gdHlwZW9mIGNocm9tZSA9PT0gJ29iamVjdCdcclxuICAgICAgICA/IGNocm9tZS5ydW50aW1lXHJcbiAgICAgICAgOiB0eXBlb2YgYnJvd3NlciA9PT0gJ29iamVjdCdcclxuICAgICAgICAgICAgPyBicm93c2VyLnJ1bnRpbWVcclxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XHJcbiAgICByZXR1cm4gdHlwZW9mIHJ1bnRpbWUgPT09ICdvYmplY3QnICYmIHJ1bnRpbWUuaWQgIT09IHVuZGVmaW5lZDtcclxufVxyXG4vKipcclxuICogRGV0ZWN0IFJlYWN0IE5hdGl2ZS5cclxuICpcclxuICogQHJldHVybiB0cnVlIGlmIFJlYWN0TmF0aXZlIGVudmlyb25tZW50IGlzIGRldGVjdGVkLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNSZWFjdE5hdGl2ZSgpIHtcclxuICAgIHJldHVybiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ29iamVjdCcgJiYgbmF2aWdhdG9yWydwcm9kdWN0J10gPT09ICdSZWFjdE5hdGl2ZScpO1xyXG59XHJcbi8qKiBEZXRlY3RzIEVsZWN0cm9uIGFwcHMuICovXHJcbmZ1bmN0aW9uIGlzRWxlY3Ryb24oKSB7XHJcbiAgICByZXR1cm4gZ2V0VUEoKS5pbmRleE9mKCdFbGVjdHJvbi8nKSA+PSAwO1xyXG59XHJcbi8qKiBEZXRlY3RzIEludGVybmV0IEV4cGxvcmVyLiAqL1xyXG5mdW5jdGlvbiBpc0lFKCkge1xyXG4gICAgY29uc3QgdWEgPSBnZXRVQSgpO1xyXG4gICAgcmV0dXJuIHVhLmluZGV4T2YoJ01TSUUgJykgPj0gMCB8fCB1YS5pbmRleE9mKCdUcmlkZW50LycpID49IDA7XHJcbn1cclxuLyoqIERldGVjdHMgVW5pdmVyc2FsIFdpbmRvd3MgUGxhdGZvcm0gYXBwcy4gKi9cclxuZnVuY3Rpb24gaXNVV1AoKSB7XHJcbiAgICByZXR1cm4gZ2V0VUEoKS5pbmRleE9mKCdNU0FwcEhvc3QvJykgPj0gMDtcclxufVxyXG4vKipcclxuICogRGV0ZWN0IHdoZXRoZXIgdGhlIGN1cnJlbnQgU0RLIGJ1aWxkIGlzIHRoZSBOb2RlIHZlcnNpb24uXHJcbiAqXHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBpdCdzIHRoZSBOb2RlIFNESyBidWlsZC5cclxuICovXHJcbmZ1bmN0aW9uIGlzTm9kZVNkaygpIHtcclxuICAgIHJldHVybiBDT05TVEFOVFMuTk9ERV9DTElFTlQgPT09IHRydWUgfHwgQ09OU1RBTlRTLk5PREVfQURNSU4gPT09IHRydWU7XHJcbn1cclxuLyoqIFJldHVybnMgdHJ1ZSBpZiB3ZSBhcmUgcnVubmluZyBpbiBTYWZhcmkuICovXHJcbmZ1bmN0aW9uIGlzU2FmYXJpKCkge1xyXG4gICAgcmV0dXJuICghaXNOb2RlKCkgJiZcclxuICAgICAgICBuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdTYWZhcmknKSAmJlxyXG4gICAgICAgICFuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdDaHJvbWUnKSk7XHJcbn1cclxuLyoqXHJcbiAqIFRoaXMgbWV0aG9kIGNoZWNrcyBpZiBpbmRleGVkREIgaXMgc3VwcG9ydGVkIGJ5IGN1cnJlbnQgYnJvd3Nlci9zZXJ2aWNlIHdvcmtlciBjb250ZXh0XHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBpbmRleGVkREIgaXMgc3VwcG9ydGVkIGJ5IGN1cnJlbnQgYnJvd3Nlci9zZXJ2aWNlIHdvcmtlciBjb250ZXh0XHJcbiAqL1xyXG5mdW5jdGlvbiBpc0luZGV4ZWREQkF2YWlsYWJsZSgpIHtcclxuICAgIHJldHVybiB0eXBlb2YgaW5kZXhlZERCID09PSAnb2JqZWN0JztcclxufVxyXG4vKipcclxuICogVGhpcyBtZXRob2QgdmFsaWRhdGVzIGJyb3dzZXIvc3cgY29udGV4dCBmb3IgaW5kZXhlZERCIGJ5IG9wZW5pbmcgYSBkdW1teSBpbmRleGVkREIgZGF0YWJhc2UgYW5kIHJlamVjdFxyXG4gKiBpZiBlcnJvcnMgb2NjdXIgZHVyaW5nIHRoZSBkYXRhYmFzZSBvcGVuIG9wZXJhdGlvbi5cclxuICpcclxuICogQHRocm93cyBleGNlcHRpb24gaWYgY3VycmVudCBicm93c2VyL3N3IGNvbnRleHQgY2FuJ3QgcnVuIGlkYi5vcGVuIChleDogU2FmYXJpIGlmcmFtZSwgRmlyZWZveFxyXG4gKiBwcml2YXRlIGJyb3dzaW5nKVxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSgpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbGV0IHByZUV4aXN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgY29uc3QgREJfQ0hFQ0tfTkFNRSA9ICd2YWxpZGF0ZS1icm93c2VyLWNvbnRleHQtZm9yLWluZGV4ZWRkYi1hbmFseXRpY3MtbW9kdWxlJztcclxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdCA9IHNlbGYuaW5kZXhlZERCLm9wZW4oREJfQ0hFQ0tfTkFNRSk7XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5yZXN1bHQuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBkYXRhYmFzZSBvbmx5IHdoZW4gaXQgZG9lc24ndCBwcmUtZXhpc3RcclxuICAgICAgICAgICAgICAgIGlmICghcHJlRXhpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShEQl9DSEVDS19OQU1FKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcHJlRXhpc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KCgoX2EgPSByZXF1ZXN0LmVycm9yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWVzc2FnZSkgfHwgJycpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG4vKipcclxuICpcclxuICogVGhpcyBtZXRob2QgY2hlY2tzIHdoZXRoZXIgY29va2llIGlzIGVuYWJsZWQgd2l0aGluIGN1cnJlbnQgYnJvd3NlclxyXG4gKiBAcmV0dXJuIHRydWUgaWYgY29va2llIGlzIGVuYWJsZWQgd2l0aGluIGN1cnJlbnQgYnJvd3NlclxyXG4gKi9cclxuZnVuY3Rpb24gYXJlQ29va2llc0VuYWJsZWQoKSB7XHJcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ3VuZGVmaW5lZCcgfHwgIW5hdmlnYXRvci5jb29raWVFbmFibGVkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuLyoqXHJcbiAqIFBvbHlmaWxsIGZvciBgZ2xvYmFsVGhpc2Agb2JqZWN0LlxyXG4gKiBAcmV0dXJucyB0aGUgYGdsb2JhbFRoaXNgIG9iamVjdCBmb3IgdGhlIGdpdmVuIGVudmlyb25tZW50LlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0R2xvYmFsKCkge1xyXG4gICAgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiBzZWxmO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIHdpbmRvdztcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiBnbG9iYWw7XHJcbiAgICB9XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBsb2NhdGUgZ2xvYmFsIG9iamVjdC4nKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGZpbGVvdmVydmlldyBTdGFuZGFyZGl6ZWQgRmlyZWJhc2UgRXJyb3IuXHJcbiAqXHJcbiAqIFVzYWdlOlxyXG4gKlxyXG4gKiAgIC8vIFR5cGVzY3JpcHQgc3RyaW5nIGxpdGVyYWxzIGZvciB0eXBlLXNhZmUgY29kZXNcclxuICogICB0eXBlIEVyciA9XHJcbiAqICAgICAndW5rbm93bicgfFxyXG4gKiAgICAgJ29iamVjdC1ub3QtZm91bmQnXHJcbiAqICAgICA7XHJcbiAqXHJcbiAqICAgLy8gQ2xvc3VyZSBlbnVtIGZvciB0eXBlLXNhZmUgZXJyb3IgY29kZXNcclxuICogICAvLyBhdC1lbnVtIHtzdHJpbmd9XHJcbiAqICAgdmFyIEVyciA9IHtcclxuICogICAgIFVOS05PV046ICd1bmtub3duJyxcclxuICogICAgIE9CSkVDVF9OT1RfRk9VTkQ6ICdvYmplY3Qtbm90LWZvdW5kJyxcclxuICogICB9XHJcbiAqXHJcbiAqICAgbGV0IGVycm9yczogTWFwPEVyciwgc3RyaW5nPiA9IHtcclxuICogICAgICdnZW5lcmljLWVycm9yJzogXCJVbmtub3duIGVycm9yXCIsXHJcbiAqICAgICAnZmlsZS1ub3QtZm91bmQnOiBcIkNvdWxkIG5vdCBmaW5kIGZpbGU6IHskZmlsZX1cIixcclxuICogICB9O1xyXG4gKlxyXG4gKiAgIC8vIFR5cGUtc2FmZSBmdW5jdGlvbiAtIG11c3QgcGFzcyBhIHZhbGlkIGVycm9yIGNvZGUgYXMgcGFyYW0uXHJcbiAqICAgbGV0IGVycm9yID0gbmV3IEVycm9yRmFjdG9yeTxFcnI+KCdzZXJ2aWNlJywgJ1NlcnZpY2UnLCBlcnJvcnMpO1xyXG4gKlxyXG4gKiAgIC4uLlxyXG4gKiAgIHRocm93IGVycm9yLmNyZWF0ZShFcnIuR0VORVJJQyk7XHJcbiAqICAgLi4uXHJcbiAqICAgdGhyb3cgZXJyb3IuY3JlYXRlKEVyci5GSUxFX05PVF9GT1VORCwgeydmaWxlJzogZmlsZU5hbWV9KTtcclxuICogICAuLi5cclxuICogICAvLyBTZXJ2aWNlOiBDb3VsZCBub3QgZmlsZSBmaWxlOiBmb28udHh0IChzZXJ2aWNlL2ZpbGUtbm90LWZvdW5kKS5cclxuICpcclxuICogICBjYXRjaCAoZSkge1xyXG4gKiAgICAgYXNzZXJ0KGUubWVzc2FnZSA9PT0gXCJDb3VsZCBub3QgZmluZCBmaWxlOiBmb28udHh0LlwiKTtcclxuICogICAgIGlmIChlLmNvZGUgPT09ICdzZXJ2aWNlL2ZpbGUtbm90LWZvdW5kJykge1xyXG4gKiAgICAgICBjb25zb2xlLmxvZyhcIkNvdWxkIG5vdCByZWFkIGZpbGU6IFwiICsgZVsnZmlsZSddKTtcclxuICogICAgIH1cclxuICogICB9XHJcbiAqL1xyXG5jb25zdCBFUlJPUl9OQU1FID0gJ0ZpcmViYXNlRXJyb3InO1xyXG4vLyBCYXNlZCBvbiBjb2RlIGZyb206XHJcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Vycm9yI0N1c3RvbV9FcnJvcl9UeXBlc1xyXG5jbGFzcyBGaXJlYmFzZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gICAgY29uc3RydWN0b3IoY29kZSwgbWVzc2FnZSwgY3VzdG9tRGF0YSkge1xyXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xyXG4gICAgICAgIHRoaXMuY29kZSA9IGNvZGU7XHJcbiAgICAgICAgdGhpcy5jdXN0b21EYXRhID0gY3VzdG9tRGF0YTtcclxuICAgICAgICB0aGlzLm5hbWUgPSBFUlJPUl9OQU1FO1xyXG4gICAgICAgIC8vIEZpeCBGb3IgRVM1XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0LXdpa2kvYmxvYi9tYXN0ZXIvQnJlYWtpbmctQ2hhbmdlcy5tZCNleHRlbmRpbmctYnVpbHQtaW5zLWxpa2UtZXJyb3ItYXJyYXktYW5kLW1hcC1tYXktbm8tbG9uZ2VyLXdvcmtcclxuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgRmlyZWJhc2VFcnJvci5wcm90b3R5cGUpO1xyXG4gICAgICAgIC8vIE1haW50YWlucyBwcm9wZXIgc3RhY2sgdHJhY2UgZm9yIHdoZXJlIG91ciBlcnJvciB3YXMgdGhyb3duLlxyXG4gICAgICAgIC8vIE9ubHkgYXZhaWxhYmxlIG9uIFY4LlxyXG4gICAgICAgIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xyXG4gICAgICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBFcnJvckZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmNsYXNzIEVycm9yRmFjdG9yeSB7XHJcbiAgICBjb25zdHJ1Y3RvcihzZXJ2aWNlLCBzZXJ2aWNlTmFtZSwgZXJyb3JzKSB7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlID0gc2VydmljZTtcclxuICAgICAgICB0aGlzLnNlcnZpY2VOYW1lID0gc2VydmljZU5hbWU7XHJcbiAgICAgICAgdGhpcy5lcnJvcnMgPSBlcnJvcnM7XHJcbiAgICB9XHJcbiAgICBjcmVhdGUoY29kZSwgLi4uZGF0YSkge1xyXG4gICAgICAgIGNvbnN0IGN1c3RvbURhdGEgPSBkYXRhWzBdIHx8IHt9O1xyXG4gICAgICAgIGNvbnN0IGZ1bGxDb2RlID0gYCR7dGhpcy5zZXJ2aWNlfS8ke2NvZGV9YDtcclxuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IHRoaXMuZXJyb3JzW2NvZGVdO1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0ZW1wbGF0ZSA/IHJlcGxhY2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgY3VzdG9tRGF0YSkgOiAnRXJyb3InO1xyXG4gICAgICAgIC8vIFNlcnZpY2UgTmFtZTogRXJyb3IgbWVzc2FnZSAoc2VydmljZS9jb2RlKS5cclxuICAgICAgICBjb25zdCBmdWxsTWVzc2FnZSA9IGAke3RoaXMuc2VydmljZU5hbWV9OiAke21lc3NhZ2V9ICgke2Z1bGxDb2RlfSkuYDtcclxuICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBGaXJlYmFzZUVycm9yKGZ1bGxDb2RlLCBmdWxsTWVzc2FnZSwgY3VzdG9tRGF0YSk7XHJcbiAgICAgICAgcmV0dXJuIGVycm9yO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHJlcGxhY2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgZGF0YSkge1xyXG4gICAgcmV0dXJuIHRlbXBsYXRlLnJlcGxhY2UoUEFUVEVSTiwgKF8sIGtleSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gZGF0YVtrZXldO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZSAhPSBudWxsID8gU3RyaW5nKHZhbHVlKSA6IGA8JHtrZXl9Pz5gO1xyXG4gICAgfSk7XHJcbn1cclxuY29uc3QgUEFUVEVSTiA9IC9cXHtcXCQoW159XSspfS9nO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRXZhbHVhdGVzIGEgSlNPTiBzdHJpbmcgaW50byBhIGphdmFzY3JpcHQgb2JqZWN0LlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyIEEgc3RyaW5nIGNvbnRhaW5pbmcgSlNPTi5cclxuICogQHJldHVybiB7Kn0gVGhlIGphdmFzY3JpcHQgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc3BlY2lmaWVkIEpTT04uXHJcbiAqL1xyXG5mdW5jdGlvbiBqc29uRXZhbChzdHIpIHtcclxuICAgIHJldHVybiBKU09OLnBhcnNlKHN0cik7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgSlNPTiByZXByZXNlbnRpbmcgYSBqYXZhc2NyaXB0IG9iamVjdC5cclxuICogQHBhcmFtIHsqfSBkYXRhIEphdmFzY3JpcHQgb2JqZWN0IHRvIGJlIHN0cmluZ2lmaWVkLlxyXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBKU09OIGNvbnRlbnRzIG9mIHRoZSBvYmplY3QuXHJcbiAqL1xyXG5mdW5jdGlvbiBzdHJpbmdpZnkoZGF0YSkge1xyXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gaW50byBjb25zdGl0dWVudCBwYXJ0cy5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiB3aXRoIGludmFsaWQgLyBpbmNvbXBsZXRlIGNsYWltcyBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGRlY29kZSA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgbGV0IGhlYWRlciA9IHt9LCBjbGFpbXMgPSB7fSwgZGF0YSA9IHt9LCBzaWduYXR1cmUgPSAnJztcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcGFydHMgPSB0b2tlbi5zcGxpdCgnLicpO1xyXG4gICAgICAgIGhlYWRlciA9IGpzb25FdmFsKGJhc2U2NERlY29kZShwYXJ0c1swXSkgfHwgJycpO1xyXG4gICAgICAgIGNsYWltcyA9IGpzb25FdmFsKGJhc2U2NERlY29kZShwYXJ0c1sxXSkgfHwgJycpO1xyXG4gICAgICAgIHNpZ25hdHVyZSA9IHBhcnRzWzJdO1xyXG4gICAgICAgIGRhdGEgPSBjbGFpbXNbJ2QnXSB8fCB7fTtcclxuICAgICAgICBkZWxldGUgY2xhaW1zWydkJ107XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGhlYWRlcixcclxuICAgICAgICBjbGFpbXMsXHJcbiAgICAgICAgZGF0YSxcclxuICAgICAgICBzaWduYXR1cmVcclxuICAgIH07XHJcbn07XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gYW5kIGNoZWNrcyB0aGUgdmFsaWRpdHkgb2YgaXRzIHRpbWUtYmFzZWQgY2xhaW1zLiBXaWxsIHJldHVybiB0cnVlIGlmIHRoZVxyXG4gKiB0b2tlbiBpcyB3aXRoaW4gdGhlIHRpbWUgd2luZG93IGF1dGhvcml6ZWQgYnkgdGhlICduYmYnIChub3QtYmVmb3JlKSBhbmQgJ2lhdCcgKGlzc3VlZC1hdCkgY2xhaW1zLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc1ZhbGlkVGltZXN0YW1wID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcclxuICAgIGNvbnN0IG5vdyA9IE1hdGguZmxvb3IobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKTtcclxuICAgIGxldCB2YWxpZFNpbmNlID0gMCwgdmFsaWRVbnRpbCA9IDA7XHJcbiAgICBpZiAodHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCduYmYnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFNpbmNlID0gY2xhaW1zWyduYmYnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFNpbmNlID0gY2xhaW1zWydpYXQnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnZXhwJykpIHtcclxuICAgICAgICAgICAgdmFsaWRVbnRpbCA9IGNsYWltc1snZXhwJ107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyB0b2tlbiB3aWxsIGV4cGlyZSBhZnRlciAyNGggYnkgZGVmYXVsdFxyXG4gICAgICAgICAgICB2YWxpZFVudGlsID0gdmFsaWRTaW5jZSArIDg2NDAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiAoISFub3cgJiZcclxuICAgICAgICAhIXZhbGlkU2luY2UgJiZcclxuICAgICAgICAhIXZhbGlkVW50aWwgJiZcclxuICAgICAgICBub3cgPj0gdmFsaWRTaW5jZSAmJlxyXG4gICAgICAgIG5vdyA8PSB2YWxpZFVudGlsKTtcclxufTtcclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgcmV0dXJucyBpdHMgaXNzdWVkIGF0IHRpbWUgaWYgdmFsaWQsIG51bGwgb3RoZXJ3aXNlLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIG51bGwgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc3N1ZWRBdFRpbWUgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGNvbnN0IGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xyXG4gICAgaWYgKHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0JykpIHtcclxuICAgICAgICByZXR1cm4gY2xhaW1zWydpYXQnXTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59O1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCBjaGVja3MgdGhlIHZhbGlkaXR5IG9mIGl0cyBmb3JtYXQuIEV4cGVjdHMgYSB2YWxpZCBpc3N1ZWQtYXQgdGltZS5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgaXNWYWxpZEZvcm1hdCA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgZGVjb2RlZCA9IGRlY29kZSh0b2tlbiksIGNsYWltcyA9IGRlY29kZWQuY2xhaW1zO1xyXG4gICAgcmV0dXJuICEhY2xhaW1zICYmIHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0Jyk7XHJcbn07XHJcbi8qKlxyXG4gKiBBdHRlbXB0cyB0byBwZWVyIGludG8gYW4gYXV0aCB0b2tlbiBhbmQgZGV0ZXJtaW5lIGlmIGl0J3MgYW4gYWRtaW4gYXV0aCB0b2tlbiBieSBsb29raW5nIGF0IHRoZSBjbGFpbXMgcG9ydGlvbi5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgaXNBZG1pbiA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XHJcbiAgICByZXR1cm4gdHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zWydhZG1pbiddID09PSB0cnVlO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBjb250YWlucyhvYmosIGtleSkge1xyXG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XHJcbn1cclxuZnVuY3Rpb24gc2FmZUdldChvYmosIGtleSkge1xyXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICByZXR1cm4gb2JqW2tleV07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGlzRW1wdHkob2JqKSB7XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gbWFwKG9iaiwgZm4sIGNvbnRleHRPYmopIHtcclxuICAgIGNvbnN0IHJlcyA9IHt9O1xyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICAgICAgcmVzW2tleV0gPSBmbi5jYWxsKGNvbnRleHRPYmosIG9ialtrZXldLCBrZXksIG9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcztcclxufVxyXG4vKipcclxuICogRGVlcCBlcXVhbCB0d28gb2JqZWN0cy4gU3VwcG9ydCBBcnJheXMgYW5kIE9iamVjdHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWVwRXF1YWwoYSwgYikge1xyXG4gICAgaWYgKGEgPT09IGIpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGNvbnN0IGFLZXlzID0gT2JqZWN0LmtleXMoYSk7XHJcbiAgICBjb25zdCBiS2V5cyA9IE9iamVjdC5rZXlzKGIpO1xyXG4gICAgZm9yIChjb25zdCBrIG9mIGFLZXlzKSB7XHJcbiAgICAgICAgaWYgKCFiS2V5cy5pbmNsdWRlcyhrKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGFQcm9wID0gYVtrXTtcclxuICAgICAgICBjb25zdCBiUHJvcCA9IGJba107XHJcbiAgICAgICAgaWYgKGlzT2JqZWN0KGFQcm9wKSAmJiBpc09iamVjdChiUHJvcCkpIHtcclxuICAgICAgICAgICAgaWYgKCFkZWVwRXF1YWwoYVByb3AsIGJQcm9wKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGFQcm9wICE9PSBiUHJvcCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBrIG9mIGJLZXlzKSB7XHJcbiAgICAgICAgaWYgKCFhS2V5cy5pbmNsdWRlcyhrKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gaXNPYmplY3QodGhpbmcpIHtcclxuICAgIHJldHVybiB0aGluZyAhPT0gbnVsbCAmJiB0eXBlb2YgdGhpbmcgPT09ICdvYmplY3QnO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgcXVlcnlzdHJpbmctZm9ybWF0dGVkIHN0cmluZyAoZS5nLiAmYXJnPXZhbCZhcmcyPXZhbDIpIGZyb20gYVxyXG4gKiBwYXJhbXMgb2JqZWN0IChlLmcuIHthcmc6ICd2YWwnLCBhcmcyOiAndmFsMid9KVxyXG4gKiBOb3RlOiBZb3UgbXVzdCBwcmVwZW5kIGl0IHdpdGggPyB3aGVuIGFkZGluZyBpdCB0byBhIFVSTC5cclxuICovXHJcbmZ1bmN0aW9uIHF1ZXJ5c3RyaW5nKHF1ZXJ5c3RyaW5nUGFyYW1zKSB7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBbXTtcclxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHF1ZXJ5c3RyaW5nUGFyYW1zKSkge1xyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICAgICAgICB2YWx1ZS5mb3JFYWNoKGFycmF5VmFsID0+IHtcclxuICAgICAgICAgICAgICAgIHBhcmFtcy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGFycmF5VmFsKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcGFyYW1zLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcGFyYW1zLmxlbmd0aCA/ICcmJyArIHBhcmFtcy5qb2luKCcmJykgOiAnJztcclxufVxyXG4vKipcclxuICogRGVjb2RlcyBhIHF1ZXJ5c3RyaW5nIChlLmcuID9hcmc9dmFsJmFyZzI9dmFsMikgaW50byBhIHBhcmFtcyBvYmplY3RcclxuICogKGUuZy4ge2FyZzogJ3ZhbCcsIGFyZzI6ICd2YWwyJ30pXHJcbiAqL1xyXG5mdW5jdGlvbiBxdWVyeXN0cmluZ0RlY29kZShxdWVyeXN0cmluZykge1xyXG4gICAgY29uc3Qgb2JqID0ge307XHJcbiAgICBjb25zdCB0b2tlbnMgPSBxdWVyeXN0cmluZy5yZXBsYWNlKC9eXFw/LywgJycpLnNwbGl0KCcmJyk7XHJcbiAgICB0b2tlbnMuZm9yRWFjaCh0b2tlbiA9PiB7XHJcbiAgICAgICAgaWYgKHRva2VuKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IHRva2VuLnNwbGl0KCc9Jyk7XHJcbiAgICAgICAgICAgIG9ialtkZWNvZGVVUklDb21wb25lbnQoa2V5KV0gPSBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIG9iajtcclxufVxyXG4vKipcclxuICogRXh0cmFjdCB0aGUgcXVlcnkgc3RyaW5nIHBhcnQgb2YgYSBVUkwsIGluY2x1ZGluZyB0aGUgbGVhZGluZyBxdWVzdGlvbiBtYXJrIChpZiBwcmVzZW50KS5cclxuICovXHJcbmZ1bmN0aW9uIGV4dHJhY3RRdWVyeXN0cmluZyh1cmwpIHtcclxuICAgIGNvbnN0IHF1ZXJ5U3RhcnQgPSB1cmwuaW5kZXhPZignPycpO1xyXG4gICAgaWYgKCFxdWVyeVN0YXJ0KSB7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZnJhZ21lbnRTdGFydCA9IHVybC5pbmRleE9mKCcjJywgcXVlcnlTdGFydCk7XHJcbiAgICByZXR1cm4gdXJsLnN1YnN0cmluZyhxdWVyeVN0YXJ0LCBmcmFnbWVudFN0YXJ0ID4gMCA/IGZyYWdtZW50U3RhcnQgOiB1bmRlZmluZWQpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IFNIQS0xIGNyeXB0b2dyYXBoaWMgaGFzaC5cclxuICogVmFyaWFibGUgbmFtZXMgZm9sbG93IHRoZSBub3RhdGlvbiBpbiBGSVBTIFBVQiAxODAtMzpcclxuICogaHR0cDovL2NzcmMubmlzdC5nb3YvcHVibGljYXRpb25zL2ZpcHMvZmlwczE4MC0zL2ZpcHMxODAtM19maW5hbC5wZGYuXHJcbiAqXHJcbiAqIFVzYWdlOlxyXG4gKiAgIHZhciBzaGExID0gbmV3IHNoYTEoKTtcclxuICogICBzaGExLnVwZGF0ZShieXRlcyk7XHJcbiAqICAgdmFyIGhhc2ggPSBzaGExLmRpZ2VzdCgpO1xyXG4gKlxyXG4gKiBQZXJmb3JtYW5jZTpcclxuICogICBDaHJvbWUgMjM6ICAgfjQwMCBNYml0L3NcclxuICogICBGaXJlZm94IDE2OiAgfjI1MCBNYml0L3NcclxuICpcclxuICovXHJcbi8qKlxyXG4gKiBTSEEtMSBjcnlwdG9ncmFwaGljIGhhc2ggY29uc3RydWN0b3IuXHJcbiAqXHJcbiAqIFRoZSBwcm9wZXJ0aWVzIGRlY2xhcmVkIGhlcmUgYXJlIGRpc2N1c3NlZCBpbiB0aGUgYWJvdmUgYWxnb3JpdGhtIGRvY3VtZW50LlxyXG4gKiBAY29uc3RydWN0b3JcclxuICogQGZpbmFsXHJcbiAqIEBzdHJ1Y3RcclxuICovXHJcbmNsYXNzIFNoYTEge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSG9sZHMgdGhlIHByZXZpb3VzIHZhbHVlcyBvZiBhY2N1bXVsYXRlZCB2YXJpYWJsZXMgYS1lIGluIHRoZSBjb21wcmVzc19cclxuICAgICAgICAgKiBmdW5jdGlvbi5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuY2hhaW5fID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBidWZmZXIgaG9sZGluZyB0aGUgcGFydGlhbGx5IGNvbXB1dGVkIGhhc2ggcmVzdWx0LlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5idWZfID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQW4gYXJyYXkgb2YgODAgYnl0ZXMsIGVhY2ggYSBwYXJ0IG9mIHRoZSBtZXNzYWdlIHRvIGJlIGhhc2hlZC4gIFJlZmVycmVkIHRvXHJcbiAgICAgICAgICogYXMgdGhlIG1lc3NhZ2Ugc2NoZWR1bGUgaW4gdGhlIGRvY3MuXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLldfID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ29udGFpbnMgZGF0YSBuZWVkZWQgdG8gcGFkIG1lc3NhZ2VzIGxlc3MgdGhhbiA2NCBieXRlcy5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMucGFkXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwcml2YXRlIHtudW1iZXJ9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5pbmJ1Zl8gPSAwO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwcml2YXRlIHtudW1iZXJ9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy50b3RhbF8gPSAwO1xyXG4gICAgICAgIHRoaXMuYmxvY2tTaXplID0gNTEyIC8gODtcclxuICAgICAgICB0aGlzLnBhZF9bMF0gPSAxMjg7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLmJsb2NrU2l6ZTsgKytpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFkX1tpXSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgIH1cclxuICAgIHJlc2V0KCkge1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzBdID0gMHg2NzQ1MjMwMTtcclxuICAgICAgICB0aGlzLmNoYWluX1sxXSA9IDB4ZWZjZGFiODk7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMl0gPSAweDk4YmFkY2ZlO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzNdID0gMHgxMDMyNTQ3NjtcclxuICAgICAgICB0aGlzLmNoYWluX1s0XSA9IDB4YzNkMmUxZjA7XHJcbiAgICAgICAgdGhpcy5pbmJ1Zl8gPSAwO1xyXG4gICAgICAgIHRoaXMudG90YWxfID0gMDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW50ZXJuYWwgY29tcHJlc3MgaGVscGVyIGZ1bmN0aW9uLlxyXG4gICAgICogQHBhcmFtIGJ1ZiBCbG9jayB0byBjb21wcmVzcy5cclxuICAgICAqIEBwYXJhbSBvZmZzZXQgT2Zmc2V0IG9mIHRoZSBibG9jayBpbiB0aGUgYnVmZmVyLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgY29tcHJlc3NfKGJ1Ziwgb2Zmc2V0KSB7XHJcbiAgICAgICAgaWYgKCFvZmZzZXQpIHtcclxuICAgICAgICAgICAgb2Zmc2V0ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgVyA9IHRoaXMuV187XHJcbiAgICAgICAgLy8gZ2V0IDE2IGJpZyBlbmRpYW4gd29yZHNcclxuICAgICAgICBpZiAodHlwZW9mIGJ1ZiA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPKHVzZXIpOiBbYnVnIDgxNDAxMjJdIFJlY2VudCB2ZXJzaW9ucyBvZiBTYWZhcmkgZm9yIE1hYyBPUyBhbmQgaU9TXHJcbiAgICAgICAgICAgICAgICAvLyBoYXZlIGEgYnVnIHRoYXQgdHVybnMgdGhlIHBvc3QtaW5jcmVtZW50ICsrIG9wZXJhdG9yIGludG8gcHJlLWluY3JlbWVudFxyXG4gICAgICAgICAgICAgICAgLy8gZHVyaW5nIEpJVCBjb21waWxhdGlvbi4gIFdlIGhhdmUgY29kZSB0aGF0IGRlcGVuZHMgaGVhdmlseSBvbiBTSEEtMSBmb3JcclxuICAgICAgICAgICAgICAgIC8vIGNvcnJlY3RuZXNzIGFuZCB3aGljaCBpcyBhZmZlY3RlZCBieSB0aGlzIGJ1Zywgc28gSSd2ZSByZW1vdmVkIGFsbCB1c2VzXHJcbiAgICAgICAgICAgICAgICAvLyBvZiBwb3N0LWluY3JlbWVudCArKyBpbiB3aGljaCB0aGUgcmVzdWx0IHZhbHVlIGlzIHVzZWQuICBXZSBjYW4gcmV2ZXJ0XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzIGNoYW5nZSBvbmNlIHRoZSBTYWZhcmkgYnVnXHJcbiAgICAgICAgICAgICAgICAvLyAoaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTEwOTAzNikgaGFzIGJlZW4gZml4ZWQgYW5kXHJcbiAgICAgICAgICAgICAgICAvLyBtb3N0IGNsaWVudHMgaGF2ZSBiZWVuIHVwZGF0ZWQuXHJcbiAgICAgICAgICAgICAgICBXW2ldID1cclxuICAgICAgICAgICAgICAgICAgICAoYnVmLmNoYXJDb2RlQXQob2Zmc2V0KSA8PCAyNCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmLmNoYXJDb2RlQXQob2Zmc2V0ICsgMSkgPDwgMTYpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDIpIDw8IDgpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnVmLmNoYXJDb2RlQXQob2Zmc2V0ICsgMyk7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gNDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBXW2ldID1cclxuICAgICAgICAgICAgICAgICAgICAoYnVmW29mZnNldF0gPDwgMjQpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXQgKyAxXSA8PCAxNikgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmW29mZnNldCArIDJdIDw8IDgpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnVmW29mZnNldCArIDNdO1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZXhwYW5kIHRvIDgwIHdvcmRzXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE2OyBpIDwgODA7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCB0ID0gV1tpIC0gM10gXiBXW2kgLSA4XSBeIFdbaSAtIDE0XSBeIFdbaSAtIDE2XTtcclxuICAgICAgICAgICAgV1tpXSA9ICgodCA8PCAxKSB8ICh0ID4+PiAzMSkpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGEgPSB0aGlzLmNoYWluX1swXTtcclxuICAgICAgICBsZXQgYiA9IHRoaXMuY2hhaW5fWzFdO1xyXG4gICAgICAgIGxldCBjID0gdGhpcy5jaGFpbl9bMl07XHJcbiAgICAgICAgbGV0IGQgPSB0aGlzLmNoYWluX1szXTtcclxuICAgICAgICBsZXQgZSA9IHRoaXMuY2hhaW5fWzRdO1xyXG4gICAgICAgIGxldCBmLCBrO1xyXG4gICAgICAgIC8vIFRPRE8odXNlcik6IFRyeSB0byB1bnJvbGwgdGhpcyBsb29wIHRvIHNwZWVkIHVwIHRoZSBjb21wdXRhdGlvbi5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDgwOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGkgPCA0MCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPCAyMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSBkIF4gKGIgJiAoYyBeIGQpKTtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHg1YTgyNzk5OTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSBiIF4gYyBeIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4NmVkOWViYTE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA8IDYwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IChiICYgYykgfCAoZCAmIChiIHwgYykpO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweDhmMWJiY2RjO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IGIgXiBjIF4gZDtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHhjYTYyYzFkNjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCB0ID0gKCgoYSA8PCA1KSB8IChhID4+PiAyNykpICsgZiArIGUgKyBrICsgV1tpXSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgICAgICBlID0gZDtcclxuICAgICAgICAgICAgZCA9IGM7XHJcbiAgICAgICAgICAgIGMgPSAoKGIgPDwgMzApIHwgKGIgPj4+IDIpKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgICAgIGIgPSBhO1xyXG4gICAgICAgICAgICBhID0gdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMF0gPSAodGhpcy5jaGFpbl9bMF0gKyBhKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMV0gPSAodGhpcy5jaGFpbl9bMV0gKyBiKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMl0gPSAodGhpcy5jaGFpbl9bMl0gKyBjKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bM10gPSAodGhpcy5jaGFpbl9bM10gKyBkKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bNF0gPSAodGhpcy5jaGFpbl9bNF0gKyBlKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICB9XHJcbiAgICB1cGRhdGUoYnl0ZXMsIGxlbmd0aCkge1xyXG4gICAgICAgIC8vIFRPRE8oam9obmxlbnopOiB0aWdodGVuIHRoZSBmdW5jdGlvbiBzaWduYXR1cmUgYW5kIHJlbW92ZSB0aGlzIGNoZWNrXHJcbiAgICAgICAgaWYgKGJ5dGVzID09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgbGVuZ3RoID0gYnl0ZXMubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBsZW5ndGhNaW51c0Jsb2NrID0gbGVuZ3RoIC0gdGhpcy5ibG9ja1NpemU7XHJcbiAgICAgICAgbGV0IG4gPSAwO1xyXG4gICAgICAgIC8vIFVzaW5nIGxvY2FsIGluc3RlYWQgb2YgbWVtYmVyIHZhcmlhYmxlcyBnaXZlcyB+NSUgc3BlZWR1cCBvbiBGaXJlZm94IDE2LlxyXG4gICAgICAgIGNvbnN0IGJ1ZiA9IHRoaXMuYnVmXztcclxuICAgICAgICBsZXQgaW5idWYgPSB0aGlzLmluYnVmXztcclxuICAgICAgICAvLyBUaGUgb3V0ZXIgd2hpbGUgbG9vcCBzaG91bGQgZXhlY3V0ZSBhdCBtb3N0IHR3aWNlLlxyXG4gICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgaGF2ZSBubyBkYXRhIGluIHRoZSBibG9jayB0byB0b3AgdXAsIHdlIGNhbiBkaXJlY3RseSBwcm9jZXNzIHRoZVxyXG4gICAgICAgICAgICAvLyBpbnB1dCBidWZmZXIgKGFzc3VtaW5nIGl0IGNvbnRhaW5zIHN1ZmZpY2llbnQgZGF0YSkuIFRoaXMgZ2l2ZXMgfjI1JVxyXG4gICAgICAgICAgICAvLyBzcGVlZHVwIG9uIENocm9tZSAyMyBhbmQgfjE1JSBzcGVlZHVwIG9uIEZpcmVmb3ggMTYsIGJ1dCByZXF1aXJlcyB0aGF0XHJcbiAgICAgICAgICAgIC8vIHRoZSBkYXRhIGlzIHByb3ZpZGVkIGluIGxhcmdlIGNodW5rcyAob3IgaW4gbXVsdGlwbGVzIG9mIDY0IGJ5dGVzKS5cclxuICAgICAgICAgICAgaWYgKGluYnVmID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8PSBsZW5ndGhNaW51c0Jsb2NrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnl0ZXMsIG4pO1xyXG4gICAgICAgICAgICAgICAgICAgIG4gKz0gdGhpcy5ibG9ja1NpemU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBieXRlcyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVmW2luYnVmXSA9IGJ5dGVzLmNoYXJDb2RlQXQobik7XHJcbiAgICAgICAgICAgICAgICAgICAgKytpbmJ1ZjtcclxuICAgICAgICAgICAgICAgICAgICArK247XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluYnVmID09PSB0aGlzLmJsb2NrU2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXByZXNzXyhidWYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmJ1ZiA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEp1bXAgdG8gdGhlIG91dGVyIGxvb3Agc28gd2UgdXNlIHRoZSBmdWxsLWJsb2NrIG9wdGltaXphdGlvbi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBidWZbaW5idWZdID0gYnl0ZXNbbl07XHJcbiAgICAgICAgICAgICAgICAgICAgKytpbmJ1ZjtcclxuICAgICAgICAgICAgICAgICAgICArK247XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluYnVmID09PSB0aGlzLmJsb2NrU2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXByZXNzXyhidWYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmJ1ZiA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEp1bXAgdG8gdGhlIG91dGVyIGxvb3Agc28gd2UgdXNlIHRoZSBmdWxsLWJsb2NrIG9wdGltaXphdGlvbi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaW5idWZfID0gaW5idWY7XHJcbiAgICAgICAgdGhpcy50b3RhbF8gKz0gbGVuZ3RoO1xyXG4gICAgfVxyXG4gICAgLyoqIEBvdmVycmlkZSAqL1xyXG4gICAgZGlnZXN0KCkge1xyXG4gICAgICAgIGNvbnN0IGRpZ2VzdCA9IFtdO1xyXG4gICAgICAgIGxldCB0b3RhbEJpdHMgPSB0aGlzLnRvdGFsXyAqIDg7XHJcbiAgICAgICAgLy8gQWRkIHBhZCAweDgwIDB4MDAqLlxyXG4gICAgICAgIGlmICh0aGlzLmluYnVmXyA8IDU2KSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKHRoaXMucGFkXywgNTYgLSB0aGlzLmluYnVmXyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSh0aGlzLnBhZF8sIHRoaXMuYmxvY2tTaXplIC0gKHRoaXMuaW5idWZfIC0gNTYpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQWRkICMgYml0cy5cclxuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5ibG9ja1NpemUgLSAxOyBpID49IDU2OyBpLS0pIHtcclxuICAgICAgICAgICAgdGhpcy5idWZfW2ldID0gdG90YWxCaXRzICYgMjU1O1xyXG4gICAgICAgICAgICB0b3RhbEJpdHMgLz0gMjU2OyAvLyBEb24ndCB1c2UgYml0LXNoaWZ0aW5nIGhlcmUhXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29tcHJlc3NfKHRoaXMuYnVmXyk7XHJcbiAgICAgICAgbGV0IG4gPSAwO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAyNDsgaiA+PSAwOyBqIC09IDgpIHtcclxuICAgICAgICAgICAgICAgIGRpZ2VzdFtuXSA9ICh0aGlzLmNoYWluX1tpXSA+PiBqKSAmIDI1NTtcclxuICAgICAgICAgICAgICAgICsrbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGlnZXN0O1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBIZWxwZXIgdG8gbWFrZSBhIFN1YnNjcmliZSBmdW5jdGlvbiAoanVzdCBsaWtlIFByb21pc2UgaGVscHMgbWFrZSBhXHJcbiAqIFRoZW5hYmxlKS5cclxuICpcclxuICogQHBhcmFtIGV4ZWN1dG9yIEZ1bmN0aW9uIHdoaWNoIGNhbiBtYWtlIGNhbGxzIHRvIGEgc2luZ2xlIE9ic2VydmVyXHJcbiAqICAgICBhcyBhIHByb3h5LlxyXG4gKiBAcGFyYW0gb25Ob09ic2VydmVycyBDYWxsYmFjayB3aGVuIGNvdW50IG9mIE9ic2VydmVycyBnb2VzIHRvIHplcm8uXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVTdWJzY3JpYmUoZXhlY3V0b3IsIG9uTm9PYnNlcnZlcnMpIHtcclxuICAgIGNvbnN0IHByb3h5ID0gbmV3IE9ic2VydmVyUHJveHkoZXhlY3V0b3IsIG9uTm9PYnNlcnZlcnMpO1xyXG4gICAgcmV0dXJuIHByb3h5LnN1YnNjcmliZS5iaW5kKHByb3h5KTtcclxufVxyXG4vKipcclxuICogSW1wbGVtZW50IGZhbi1vdXQgZm9yIGFueSBudW1iZXIgb2YgT2JzZXJ2ZXJzIGF0dGFjaGVkIHZpYSBhIHN1YnNjcmliZVxyXG4gKiBmdW5jdGlvbi5cclxuICovXHJcbmNsYXNzIE9ic2VydmVyUHJveHkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gZXhlY3V0b3IgRnVuY3Rpb24gd2hpY2ggY2FuIG1ha2UgY2FsbHMgdG8gYSBzaW5nbGUgT2JzZXJ2ZXJcclxuICAgICAqICAgICBhcyBhIHByb3h5LlxyXG4gICAgICogQHBhcmFtIG9uTm9PYnNlcnZlcnMgQ2FsbGJhY2sgd2hlbiBjb3VudCBvZiBPYnNlcnZlcnMgZ29lcyB0byB6ZXJvLlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihleGVjdXRvciwgb25Ob09ic2VydmVycykge1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gW107XHJcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZXMgPSBbXTtcclxuICAgICAgICB0aGlzLm9ic2VydmVyQ291bnQgPSAwO1xyXG4gICAgICAgIC8vIE1pY3JvLXRhc2sgc2NoZWR1bGluZyBieSBjYWxsaW5nIHRhc2sudGhlbigpLlxyXG4gICAgICAgIHRoaXMudGFzayA9IFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIHRoaXMuZmluYWxpemVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5vbk5vT2JzZXJ2ZXJzID0gb25Ob09ic2VydmVycztcclxuICAgICAgICAvLyBDYWxsIHRoZSBleGVjdXRvciBhc3luY2hyb25vdXNseSBzbyBzdWJzY3JpYmVycyB0aGF0IGFyZSBjYWxsZWRcclxuICAgICAgICAvLyBzeW5jaHJvbm91c2x5IGFmdGVyIHRoZSBjcmVhdGlvbiBvZiB0aGUgc3Vic2NyaWJlIGZ1bmN0aW9uXHJcbiAgICAgICAgLy8gY2FuIHN0aWxsIHJlY2VpdmUgdGhlIHZlcnkgZmlyc3QgdmFsdWUgZ2VuZXJhdGVkIGluIHRoZSBleGVjdXRvci5cclxuICAgICAgICB0aGlzLnRhc2tcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBleGVjdXRvcih0aGlzKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZXJyb3IoZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBuZXh0KHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoT2JzZXJ2ZXIoKG9ic2VydmVyKSA9PiB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLm5leHQodmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZXJyb3IoZXJyb3IpIHtcclxuICAgICAgICB0aGlzLmZvckVhY2hPYnNlcnZlcigob2JzZXJ2ZXIpID0+IHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY2xvc2UoZXJyb3IpO1xyXG4gICAgfVxyXG4gICAgY29tcGxldGUoKSB7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoT2JzZXJ2ZXIoKG9ic2VydmVyKSA9PiB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTdWJzY3JpYmUgZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBhZGQgYW4gT2JzZXJ2ZXIgdG8gdGhlIGZhbi1vdXQgbGlzdC5cclxuICAgICAqXHJcbiAgICAgKiAtIFdlIHJlcXVpcmUgdGhhdCBubyBldmVudCBpcyBzZW50IHRvIGEgc3Vic2NyaWJlciBzeWNocm9ub3VzbHkgdG8gdGhlaXJcclxuICAgICAqICAgY2FsbCB0byBzdWJzY3JpYmUoKS5cclxuICAgICAqL1xyXG4gICAgc3Vic2NyaWJlKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpIHtcclxuICAgICAgICBsZXQgb2JzZXJ2ZXI7XHJcbiAgICAgICAgaWYgKG5leHRPck9ic2VydmVyID09PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgZXJyb3IgPT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICBjb21wbGV0ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBPYnNlcnZlci4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQXNzZW1ibGUgYW4gT2JzZXJ2ZXIgb2JqZWN0IHdoZW4gcGFzc2VkIGFzIGNhbGxiYWNrIGZ1bmN0aW9ucy5cclxuICAgICAgICBpZiAoaW1wbGVtZW50c0FueU1ldGhvZHMobmV4dE9yT2JzZXJ2ZXIsIFtcclxuICAgICAgICAgICAgJ25leHQnLFxyXG4gICAgICAgICAgICAnZXJyb3InLFxyXG4gICAgICAgICAgICAnY29tcGxldGUnXHJcbiAgICAgICAgXSkpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIgPSBuZXh0T3JPYnNlcnZlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyID0ge1xyXG4gICAgICAgICAgICAgICAgbmV4dDogbmV4dE9yT2JzZXJ2ZXIsXHJcbiAgICAgICAgICAgICAgICBlcnJvcixcclxuICAgICAgICAgICAgICAgIGNvbXBsZXRlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvYnNlcnZlci5uZXh0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dCA9IG5vb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvYnNlcnZlci5lcnJvciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yID0gbm9vcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9ic2VydmVyLmNvbXBsZXRlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUgPSBub29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB1bnN1YiA9IHRoaXMudW5zdWJzY3JpYmVPbmUuYmluZCh0aGlzLCB0aGlzLm9ic2VydmVycy5sZW5ndGgpO1xyXG4gICAgICAgIC8vIEF0dGVtcHQgdG8gc3Vic2NyaWJlIHRvIGEgdGVybWluYXRlZCBPYnNlcnZhYmxlIC0gd2VcclxuICAgICAgICAvLyBqdXN0IHJlc3BvbmQgdG8gdGhlIE9ic2VydmVyIHdpdGggdGhlIGZpbmFsIGVycm9yIG9yIGNvbXBsZXRlXHJcbiAgICAgICAgLy8gZXZlbnQuXHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICAgICAgdGhpcy50YXNrLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5maW5hbEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKHRoaXMuZmluYWxFcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbm90aGluZ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMucHVzaChvYnNlcnZlcik7XHJcbiAgICAgICAgcmV0dXJuIHVuc3ViO1xyXG4gICAgfVxyXG4gICAgLy8gVW5zdWJzY3JpYmUgaXMgc3luY2hyb25vdXMgLSB3ZSBndWFyYW50ZWUgdGhhdCBubyBldmVudHMgYXJlIHNlbnQgdG9cclxuICAgIC8vIGFueSB1bnN1YnNjcmliZWQgT2JzZXJ2ZXIuXHJcbiAgICB1bnN1YnNjcmliZU9uZShpKSB7XHJcbiAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJzID09PSB1bmRlZmluZWQgfHwgdGhpcy5vYnNlcnZlcnNbaV0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlbGV0ZSB0aGlzLm9ic2VydmVyc1tpXTtcclxuICAgICAgICB0aGlzLm9ic2VydmVyQ291bnQgLT0gMTtcclxuICAgICAgICBpZiAodGhpcy5vYnNlcnZlckNvdW50ID09PSAwICYmIHRoaXMub25Ob09ic2VydmVycyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25Ob09ic2VydmVycyh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmb3JFYWNoT2JzZXJ2ZXIoZm4pIHtcclxuICAgICAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcclxuICAgICAgICAgICAgLy8gQWxyZWFkeSBjbG9zZWQgYnkgcHJldmlvdXMgZXZlbnQuLi4uanVzdCBlYXQgdGhlIGFkZGl0aW9uYWwgdmFsdWVzLlxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFNpbmNlIHNlbmRPbmUgY2FsbHMgYXN5bmNocm9ub3VzbHkgLSB0aGVyZSBpcyBubyBjaGFuY2UgdGhhdFxyXG4gICAgICAgIC8vIHRoaXMub2JzZXJ2ZXJzIHdpbGwgYmVjb21lIHVuZGVmaW5lZC5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMub2JzZXJ2ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VuZE9uZShpLCBmbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gQ2FsbCB0aGUgT2JzZXJ2ZXIgdmlhIG9uZSBvZiBpdCdzIGNhbGxiYWNrIGZ1bmN0aW9uLiBXZSBhcmUgY2FyZWZ1bCB0b1xyXG4gICAgLy8gY29uZmlybSB0aGF0IHRoZSBvYnNlcnZlIGhhcyBub3QgYmVlbiB1bnN1YnNjcmliZWQgc2luY2UgdGhpcyBhc3luY2hyb25vdXNcclxuICAgIC8vIGZ1bmN0aW9uIGhhZCBiZWVuIHF1ZXVlZC5cclxuICAgIHNlbmRPbmUoaSwgZm4pIHtcclxuICAgICAgICAvLyBFeGVjdXRlIHRoZSBjYWxsYmFjayBhc3luY2hyb25vdXNseVxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICB0aGlzLnRhc2sudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9ic2VydmVycyAhPT0gdW5kZWZpbmVkICYmIHRoaXMub2JzZXJ2ZXJzW2ldICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm4odGhpcy5vYnNlcnZlcnNbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgZXhjZXB0aW9ucyByYWlzZWQgaW4gT2JzZXJ2ZXJzIG9yIG1pc3NpbmcgbWV0aG9kcyBvZiBhblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIE9ic2VydmVyLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIExvZyBlcnJvciB0byBjb25zb2xlLiBiLzMxNDA0ODA2XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJiBjb25zb2xlLmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjbG9zZShlcnIpIHtcclxuICAgICAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmZpbmFsaXplZCA9IHRydWU7XHJcbiAgICAgICAgaWYgKGVyciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmluYWxFcnJvciA9IGVycjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUHJveHkgaXMgbm8gbG9uZ2VyIG5lZWRlZCAtIGdhcmJhZ2UgY29sbGVjdCByZWZlcmVuY2VzXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgIHRoaXMudGFzay50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHRoaXMub25Ob09ic2VydmVycyA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4vKiogVHVybiBzeW5jaHJvbm91cyBmdW5jdGlvbiBpbnRvIG9uZSBjYWxsZWQgYXN5bmNocm9ub3VzbHkuICovXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXR5cGVzXHJcbmZ1bmN0aW9uIGFzeW5jKGZuLCBvbkVycm9yKSB7XHJcbiAgICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcclxuICAgICAgICBQcm9taXNlLnJlc29sdmUodHJ1ZSlcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBmbiguLi5hcmdzKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChvbkVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBvbkVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufVxyXG4vKipcclxuICogUmV0dXJuIHRydWUgaWYgdGhlIG9iamVjdCBwYXNzZWQgaW4gaW1wbGVtZW50cyBhbnkgb2YgdGhlIG5hbWVkIG1ldGhvZHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBpbXBsZW1lbnRzQW55TWV0aG9kcyhvYmosIG1ldGhvZHMpIHtcclxuICAgIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyB8fCBvYmogPT09IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IG1ldGhvZCBvZiBtZXRob2RzKSB7XHJcbiAgICAgICAgaWYgKG1ldGhvZCBpbiBvYmogJiYgdHlwZW9mIG9ialttZXRob2RdID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxyXG5mdW5jdGlvbiBub29wKCkge1xyXG4gICAgLy8gZG8gbm90aGluZ1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDaGVjayB0byBtYWtlIHN1cmUgdGhlIGFwcHJvcHJpYXRlIG51bWJlciBvZiBhcmd1bWVudHMgYXJlIHByb3ZpZGVkIGZvciBhIHB1YmxpYyBmdW5jdGlvbi5cclxuICogVGhyb3dzIGFuIGVycm9yIGlmIGl0IGZhaWxzLlxyXG4gKlxyXG4gKiBAcGFyYW0gZm5OYW1lIFRoZSBmdW5jdGlvbiBuYW1lXHJcbiAqIEBwYXJhbSBtaW5Db3VudCBUaGUgbWluaW11bSBudW1iZXIgb2YgYXJndW1lbnRzIHRvIGFsbG93IGZvciB0aGUgZnVuY3Rpb24gY2FsbFxyXG4gKiBAcGFyYW0gbWF4Q291bnQgVGhlIG1heGltdW0gbnVtYmVyIG9mIGFyZ3VtZW50IHRvIGFsbG93IGZvciB0aGUgZnVuY3Rpb24gY2FsbFxyXG4gKiBAcGFyYW0gYXJnQ291bnQgVGhlIGFjdHVhbCBudW1iZXIgb2YgYXJndW1lbnRzIHByb3ZpZGVkLlxyXG4gKi9cclxuY29uc3QgdmFsaWRhdGVBcmdDb3VudCA9IGZ1bmN0aW9uIChmbk5hbWUsIG1pbkNvdW50LCBtYXhDb3VudCwgYXJnQ291bnQpIHtcclxuICAgIGxldCBhcmdFcnJvcjtcclxuICAgIGlmIChhcmdDb3VudCA8IG1pbkNvdW50KSB7XHJcbiAgICAgICAgYXJnRXJyb3IgPSAnYXQgbGVhc3QgJyArIG1pbkNvdW50O1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoYXJnQ291bnQgPiBtYXhDb3VudCkge1xyXG4gICAgICAgIGFyZ0Vycm9yID0gbWF4Q291bnQgPT09IDAgPyAnbm9uZScgOiAnbm8gbW9yZSB0aGFuICcgKyBtYXhDb3VudDtcclxuICAgIH1cclxuICAgIGlmIChhcmdFcnJvcikge1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0gZm5OYW1lICtcclxuICAgICAgICAgICAgJyBmYWlsZWQ6IFdhcyBjYWxsZWQgd2l0aCAnICtcclxuICAgICAgICAgICAgYXJnQ291bnQgK1xyXG4gICAgICAgICAgICAoYXJnQ291bnQgPT09IDEgPyAnIGFyZ3VtZW50LicgOiAnIGFyZ3VtZW50cy4nKSArXHJcbiAgICAgICAgICAgICcgRXhwZWN0cyAnICtcclxuICAgICAgICAgICAgYXJnRXJyb3IgK1xyXG4gICAgICAgICAgICAnLic7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIEdlbmVyYXRlcyBhIHN0cmluZyB0byBwcmVmaXggYW4gZXJyb3IgbWVzc2FnZSBhYm91dCBmYWlsZWQgYXJndW1lbnQgdmFsaWRhdGlvblxyXG4gKlxyXG4gKiBAcGFyYW0gZm5OYW1lIFRoZSBmdW5jdGlvbiBuYW1lXHJcbiAqIEBwYXJhbSBhcmdOYW1lIFRoZSBuYW1lIG9mIHRoZSBhcmd1bWVudFxyXG4gKiBAcmV0dXJuIFRoZSBwcmVmaXggdG8gYWRkIHRvIHRoZSBlcnJvciB0aHJvd24gZm9yIHZhbGlkYXRpb24uXHJcbiAqL1xyXG5mdW5jdGlvbiBlcnJvclByZWZpeChmbk5hbWUsIGFyZ05hbWUpIHtcclxuICAgIHJldHVybiBgJHtmbk5hbWV9IGZhaWxlZDogJHthcmdOYW1lfSBhcmd1bWVudCBgO1xyXG59XHJcbi8qKlxyXG4gKiBAcGFyYW0gZm5OYW1lXHJcbiAqIEBwYXJhbSBhcmd1bWVudE51bWJlclxyXG4gKiBAcGFyYW0gbmFtZXNwYWNlXHJcbiAqIEBwYXJhbSBvcHRpb25hbFxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVOYW1lc3BhY2UoZm5OYW1lLCBuYW1lc3BhY2UsIG9wdGlvbmFsKSB7XHJcbiAgICBpZiAob3B0aW9uYWwgJiYgIW5hbWVzcGFjZSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgbmFtZXNwYWNlICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIC8vVE9ETzogSSBzaG91bGQgZG8gbW9yZSB2YWxpZGF0aW9uIGhlcmUuIFdlIG9ubHkgYWxsb3cgY2VydGFpbiBjaGFycyBpbiBuYW1lc3BhY2VzLlxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsICduYW1lc3BhY2UnKSArICdtdXN0IGJlIGEgdmFsaWQgZmlyZWJhc2UgbmFtZXNwYWNlLicpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHZhbGlkYXRlQ2FsbGJhY2soZm5OYW1lLCBhcmd1bWVudE5hbWUsIFxyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xyXG5jYWxsYmFjaywgb3B0aW9uYWwpIHtcclxuICAgIGlmIChvcHRpb25hbCAmJiAhY2FsbGJhY2spIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4KGZuTmFtZSwgYXJndW1lbnROYW1lKSArICdtdXN0IGJlIGEgdmFsaWQgZnVuY3Rpb24uJyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdmFsaWRhdGVDb250ZXh0T2JqZWN0KGZuTmFtZSwgYXJndW1lbnROYW1lLCBjb250ZXh0LCBvcHRpb25hbCkge1xyXG4gICAgaWYgKG9wdGlvbmFsICYmICFjb250ZXh0KSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBjb250ZXh0ICE9PSAnb2JqZWN0JyB8fCBjb250ZXh0ID09PSBudWxsKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4KGZuTmFtZSwgYXJndW1lbnROYW1lKSArICdtdXN0IGJlIGEgdmFsaWQgY29udGV4dCBvYmplY3QuJyk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gQ29kZSBvcmlnaW5hbGx5IGNhbWUgZnJvbSBnb29nLmNyeXB0LnN0cmluZ1RvVXRmOEJ5dGVBcnJheSwgYnV0IGZvciBzb21lIHJlYXNvbiB0aGV5XHJcbi8vIGF1dG9tYXRpY2FsbHkgcmVwbGFjZWQgJ1xcclxcbicgd2l0aCAnXFxuJywgYW5kIHRoZXkgZGlkbid0IGhhbmRsZSBzdXJyb2dhdGUgcGFpcnMsXHJcbi8vIHNvIGl0J3MgYmVlbiBtb2RpZmllZC5cclxuLy8gTm90ZSB0aGF0IG5vdCBhbGwgVW5pY29kZSBjaGFyYWN0ZXJzIGFwcGVhciBhcyBzaW5nbGUgY2hhcmFjdGVycyBpbiBKYXZhU2NyaXB0IHN0cmluZ3MuXHJcbi8vIGZyb21DaGFyQ29kZSByZXR1cm5zIHRoZSBVVEYtMTYgZW5jb2Rpbmcgb2YgYSBjaGFyYWN0ZXIgLSBzbyBzb21lIFVuaWNvZGUgY2hhcmFjdGVyc1xyXG4vLyB1c2UgMiBjaGFyYWN0ZXJzIGluIEphdmFzY3JpcHQuICBBbGwgNC1ieXRlIFVURi04IGNoYXJhY3RlcnMgYmVnaW4gd2l0aCBhIGZpcnN0XHJcbi8vIGNoYXJhY3RlciBpbiB0aGUgcmFuZ2UgMHhEODAwIC0gMHhEQkZGICh0aGUgZmlyc3QgY2hhcmFjdGVyIG9mIGEgc28tY2FsbGVkIHN1cnJvZ2F0ZVxyXG4vLyBwYWlyKS5cclxuLy8gU2VlIGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi81LjEvI3NlYy0xNS4xLjNcclxuLyoqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcclxuICogQHJldHVybiB7QXJyYXl9XHJcbiAqL1xyXG5jb25zdCBzdHJpbmdUb0J5dGVBcnJheSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIGNvbnN0IG91dCA9IFtdO1xyXG4gICAgbGV0IHAgPSAwO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBsZXQgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIC8vIElzIHRoaXMgdGhlIGxlYWQgc3Vycm9nYXRlIGluIGEgc3Vycm9nYXRlIHBhaXI/XHJcbiAgICAgICAgaWYgKGMgPj0gMHhkODAwICYmIGMgPD0gMHhkYmZmKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhpZ2ggPSBjIC0gMHhkODAwOyAvLyB0aGUgaGlnaCAxMCBiaXRzLlxyXG4gICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIGFzc2VydChpIDwgc3RyLmxlbmd0aCwgJ1N1cnJvZ2F0ZSBwYWlyIG1pc3NpbmcgdHJhaWwgc3Vycm9nYXRlLicpO1xyXG4gICAgICAgICAgICBjb25zdCBsb3cgPSBzdHIuY2hhckNvZGVBdChpKSAtIDB4ZGMwMDsgLy8gdGhlIGxvdyAxMCBiaXRzLlxyXG4gICAgICAgICAgICBjID0gMHgxMDAwMCArIChoaWdoIDw8IDEwKSArIGxvdztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSBjO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDYpIHwgMTkyO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgNjU1MzYpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxMikgfCAyMjQ7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxOCkgfCAyNDA7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDEyKSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dDtcclxufTtcclxuLyoqXHJcbiAqIENhbGN1bGF0ZSBsZW5ndGggd2l0aG91dCBhY3R1YWxseSBjb252ZXJ0aW5nOyB1c2VmdWwgZm9yIGRvaW5nIGNoZWFwZXIgdmFsaWRhdGlvbi5cclxuICogQHBhcmFtIHtzdHJpbmd9IHN0clxyXG4gKiBAcmV0dXJuIHtudW1iZXJ9XHJcbiAqL1xyXG5jb25zdCBzdHJpbmdMZW5ndGggPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICBsZXQgcCA9IDA7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICBpZiAoYyA8IDEyOCkge1xyXG4gICAgICAgICAgICBwKys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XHJcbiAgICAgICAgICAgIHAgKz0gMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA+PSAweGQ4MDAgJiYgYyA8PSAweGRiZmYpIHtcclxuICAgICAgICAgICAgLy8gTGVhZCBzdXJyb2dhdGUgb2YgYSBzdXJyb2dhdGUgcGFpci4gIFRoZSBwYWlyIHRvZ2V0aGVyIHdpbGwgdGFrZSA0IGJ5dGVzIHRvIHJlcHJlc2VudC5cclxuICAgICAgICAgICAgcCArPSA0O1xyXG4gICAgICAgICAgICBpKys7IC8vIHNraXAgdHJhaWwgc3Vycm9nYXRlLlxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcCArPSAzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBwO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIGFtb3VudCBvZiBtaWxsaXNlY29uZHMgdG8gZXhwb25lbnRpYWxseSBpbmNyZWFzZS5cclxuICovXHJcbmNvbnN0IERFRkFVTFRfSU5URVJWQUxfTUlMTElTID0gMTAwMDtcclxuLyoqXHJcbiAqIFRoZSBmYWN0b3IgdG8gYmFja29mZiBieS5cclxuICogU2hvdWxkIGJlIGEgbnVtYmVyIGdyZWF0ZXIgdGhhbiAxLlxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9CQUNLT0ZGX0ZBQ1RPUiA9IDI7XHJcbi8qKlxyXG4gKiBUaGUgbWF4aW11bSBtaWxsaXNlY29uZHMgdG8gaW5jcmVhc2UgdG8uXHJcbiAqXHJcbiAqIDxwPlZpc2libGUgZm9yIHRlc3RpbmdcclxuICovXHJcbmNvbnN0IE1BWF9WQUxVRV9NSUxMSVMgPSA0ICogNjAgKiA2MCAqIDEwMDA7IC8vIEZvdXIgaG91cnMsIGxpa2UgaU9TIGFuZCBBbmRyb2lkLlxyXG4vKipcclxuICogVGhlIHBlcmNlbnRhZ2Ugb2YgYmFja29mZiB0aW1lIHRvIHJhbmRvbWl6ZSBieS5cclxuICogU2VlXHJcbiAqIGh0dHA6Ly9nby9zYWZlLWNsaWVudC1iZWhhdmlvciNzdGVwLTEtZGV0ZXJtaW5lLXRoZS1hcHByb3ByaWF0ZS1yZXRyeS1pbnRlcnZhbC10by1oYW5kbGUtc3Bpa2UtdHJhZmZpY1xyXG4gKiBmb3IgY29udGV4dC5cclxuICpcclxuICogPHA+VmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gKi9cclxuY29uc3QgUkFORE9NX0ZBQ1RPUiA9IDAuNTtcclxuLyoqXHJcbiAqIEJhc2VkIG9uIHRoZSBiYWNrb2ZmIG1ldGhvZCBmcm9tXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY2xvc3VyZS1saWJyYXJ5L2Jsb2IvbWFzdGVyL2Nsb3N1cmUvZ29vZy9tYXRoL2V4cG9uZW50aWFsYmFja29mZi5qcy5cclxuICogRXh0cmFjdGVkIGhlcmUgc28gd2UgZG9uJ3QgbmVlZCB0byBwYXNzIG1ldGFkYXRhIGFuZCBhIHN0YXRlZnVsIEV4cG9uZW50aWFsQmFja29mZiBvYmplY3QgYXJvdW5kLlxyXG4gKi9cclxuZnVuY3Rpb24gY2FsY3VsYXRlQmFja29mZk1pbGxpcyhiYWNrb2ZmQ291bnQsIGludGVydmFsTWlsbGlzID0gREVGQVVMVF9JTlRFUlZBTF9NSUxMSVMsIGJhY2tvZmZGYWN0b3IgPSBERUZBVUxUX0JBQ0tPRkZfRkFDVE9SKSB7XHJcbiAgICAvLyBDYWxjdWxhdGVzIGFuIGV4cG9uZW50aWFsbHkgaW5jcmVhc2luZyB2YWx1ZS5cclxuICAgIC8vIERldmlhdGlvbjogY2FsY3VsYXRlcyB2YWx1ZSBmcm9tIGNvdW50IGFuZCBhIGNvbnN0YW50IGludGVydmFsLCBzbyB3ZSBvbmx5IG5lZWQgdG8gc2F2ZSB2YWx1ZVxyXG4gICAgLy8gYW5kIGNvdW50IHRvIHJlc3RvcmUgc3RhdGUuXHJcbiAgICBjb25zdCBjdXJyQmFzZVZhbHVlID0gaW50ZXJ2YWxNaWxsaXMgKiBNYXRoLnBvdyhiYWNrb2ZmRmFjdG9yLCBiYWNrb2ZmQ291bnQpO1xyXG4gICAgLy8gQSByYW5kb20gXCJmdXp6XCIgdG8gYXZvaWQgd2F2ZXMgb2YgcmV0cmllcy5cclxuICAgIC8vIERldmlhdGlvbjogcmFuZG9tRmFjdG9yIGlzIHJlcXVpcmVkLlxyXG4gICAgY29uc3QgcmFuZG9tV2FpdCA9IE1hdGgucm91bmQoXHJcbiAgICAvLyBBIGZyYWN0aW9uIG9mIHRoZSBiYWNrb2ZmIHZhbHVlIHRvIGFkZC9zdWJ0cmFjdC5cclxuICAgIC8vIERldmlhdGlvbjogY2hhbmdlcyBtdWx0aXBsaWNhdGlvbiBvcmRlciB0byBpbXByb3ZlIHJlYWRhYmlsaXR5LlxyXG4gICAgUkFORE9NX0ZBQ1RPUiAqXHJcbiAgICAgICAgY3VyckJhc2VWYWx1ZSAqXHJcbiAgICAgICAgLy8gQSByYW5kb20gZmxvYXQgKHJvdW5kZWQgdG8gaW50IGJ5IE1hdGgucm91bmQgYWJvdmUpIGluIHRoZSByYW5nZSBbLTEsIDFdLiBEZXRlcm1pbmVzXHJcbiAgICAgICAgLy8gaWYgd2UgYWRkIG9yIHN1YnRyYWN0LlxyXG4gICAgICAgIChNYXRoLnJhbmRvbSgpIC0gMC41KSAqXHJcbiAgICAgICAgMik7XHJcbiAgICAvLyBMaW1pdHMgYmFja29mZiB0byBtYXggdG8gYXZvaWQgZWZmZWN0aXZlbHkgcGVybWFuZW50IGJhY2tvZmYuXHJcbiAgICByZXR1cm4gTWF0aC5taW4oTUFYX1ZBTFVFX01JTExJUywgY3VyckJhc2VWYWx1ZSArIHJhbmRvbVdhaXQpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlIEVuZ2xpc2ggb3JkaW5hbCBsZXR0ZXJzIGFmdGVyIGEgbnVtYmVyXHJcbiAqL1xyXG5mdW5jdGlvbiBvcmRpbmFsKGkpIHtcclxuICAgIGlmICghTnVtYmVyLmlzRmluaXRlKGkpKSB7XHJcbiAgICAgICAgcmV0dXJuIGAke2l9YDtcclxuICAgIH1cclxuICAgIHJldHVybiBpICsgaW5kaWNhdG9yKGkpO1xyXG59XHJcbmZ1bmN0aW9uIGluZGljYXRvcihpKSB7XHJcbiAgICBpID0gTWF0aC5hYnMoaSk7XHJcbiAgICBjb25zdCBjZW50ID0gaSAlIDEwMDtcclxuICAgIGlmIChjZW50ID49IDEwICYmIGNlbnQgPD0gMjApIHtcclxuICAgICAgICByZXR1cm4gJ3RoJztcclxuICAgIH1cclxuICAgIGNvbnN0IGRlYyA9IGkgJSAxMDtcclxuICAgIGlmIChkZWMgPT09IDEpIHtcclxuICAgICAgICByZXR1cm4gJ3N0JztcclxuICAgIH1cclxuICAgIGlmIChkZWMgPT09IDIpIHtcclxuICAgICAgICByZXR1cm4gJ25kJztcclxuICAgIH1cclxuICAgIGlmIChkZWMgPT09IDMpIHtcclxuICAgICAgICByZXR1cm4gJ3JkJztcclxuICAgIH1cclxuICAgIHJldHVybiAndGgnO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGdldE1vZHVsYXJJbnN0YW5jZShzZXJ2aWNlKSB7XHJcbiAgICBpZiAoc2VydmljZSAmJiBzZXJ2aWNlLl9kZWxlZ2F0ZSkge1xyXG4gICAgICAgIHJldHVybiBzZXJ2aWNlLl9kZWxlZ2F0ZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBzZXJ2aWNlO1xyXG4gICAgfVxyXG59XG5cbmV4cG9ydCB7IENPTlNUQU5UUywgRGVmZXJyZWQsIEVycm9yRmFjdG9yeSwgRmlyZWJhc2VFcnJvciwgTUFYX1ZBTFVFX01JTExJUywgUkFORE9NX0ZBQ1RPUiwgU2hhMSwgYXJlQ29va2llc0VuYWJsZWQsIGFzc2VydCwgYXNzZXJ0aW9uRXJyb3IsIGFzeW5jLCBiYXNlNjQsIGJhc2U2NERlY29kZSwgYmFzZTY0RW5jb2RlLCBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZywgY2FsY3VsYXRlQmFja29mZk1pbGxpcywgY29udGFpbnMsIGNyZWF0ZU1vY2tVc2VyVG9rZW4sIGNyZWF0ZVN1YnNjcmliZSwgZGVjb2RlLCBkZWVwQ29weSwgZGVlcEVxdWFsLCBkZWVwRXh0ZW5kLCBlcnJvclByZWZpeCwgZXh0cmFjdFF1ZXJ5c3RyaW5nLCBnZXRHbG9iYWwsIGdldE1vZHVsYXJJbnN0YW5jZSwgZ2V0VUEsIGlzQWRtaW4sIGlzQnJvd3NlciwgaXNCcm93c2VyRXh0ZW5zaW9uLCBpc0VsZWN0cm9uLCBpc0VtcHR5LCBpc0lFLCBpc0luZGV4ZWREQkF2YWlsYWJsZSwgaXNNb2JpbGVDb3Jkb3ZhLCBpc05vZGUsIGlzTm9kZVNkaywgaXNSZWFjdE5hdGl2ZSwgaXNTYWZhcmksIGlzVVdQLCBpc1ZhbGlkRm9ybWF0LCBpc1ZhbGlkVGltZXN0YW1wLCBpc3N1ZWRBdFRpbWUsIGpzb25FdmFsLCBtYXAsIG9yZGluYWwsIHF1ZXJ5c3RyaW5nLCBxdWVyeXN0cmluZ0RlY29kZSwgc2FmZUdldCwgc3RyaW5nTGVuZ3RoLCBzdHJpbmdUb0J5dGVBcnJheSwgc3RyaW5naWZ5LCB2YWxpZGF0ZUFyZ0NvdW50LCB2YWxpZGF0ZUNhbGxiYWNrLCB2YWxpZGF0ZUNvbnRleHRPYmplY3QsIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUsIHZhbGlkYXRlTmFtZXNwYWNlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmluZGV4T2YocFtpXSkgPCAwICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzLCBwW2ldKSlcclxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgIH1cclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19jcmVhdGVCaW5kaW5nID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcclxufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBvW2syXSA9IG1ba107XHJcbn0pO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBvKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIHApKSBfX2NyZWF0ZUJpbmRpbmcobywgbSwgcCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheXMoKSB7XHJcbiAgICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcclxuICAgIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKylcclxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcclxuICAgICAgICAgICAgcltrXSA9IGFbal07XHJcbiAgICByZXR1cm4gcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXkodG8sIGZyb20sIHBhY2spIHtcclxuICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xyXG4gICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xyXG4gICAgICAgICAgICBhcltpXSA9IGZyb21baV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cclxuICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHJlamVjdCh2YWx1ZSkgeyByZXN1bWUoXCJ0aHJvd1wiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xyXG4gICAgdmFyIGksIHA7XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7IHRocm93IGU7IH0pLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogbiA9PT0gXCJyZXR1cm5cIiB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcclxufSkgOiBmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcclxuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRHZXQocmVjZWl2ZXIsIHN0YXRlLCBraW5kLCBmKSB7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBnZXR0ZXJcIik7XHJcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCByZWFkIHByaXZhdGUgbWVtYmVyIGZyb20gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcclxuICAgIHJldHVybiBraW5kID09PSBcIm1cIiA/IGYgOiBraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlcikgOiBmID8gZi52YWx1ZSA6IHN0YXRlLmdldChyZWNlaXZlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHJlY2VpdmVyLCBzdGF0ZSwgdmFsdWUsIGtpbmQsIGYpIHtcclxuICAgIGlmIChraW5kID09PSBcIm1cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgbWV0aG9kIGlzIG5vdCB3cml0YWJsZVwiKTtcclxuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIHNldHRlclwiKTtcclxuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHdyaXRlIHByaXZhdGUgbWVtYmVyIHRvIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4gKGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyLCB2YWx1ZSkgOiBmID8gZi52YWx1ZSA9IHZhbHVlIDogc3RhdGUuc2V0KHJlY2VpdmVyLCB2YWx1ZSkpLCB2YWx1ZTtcclxufVxyXG4iLCJpbXBvcnQgeyBFcnJvckZhY3RvcnksIGRlZXBFcXVhbCwgaXNCcm93c2VyRXh0ZW5zaW9uLCBpc01vYmlsZUNvcmRvdmEsIGlzUmVhY3ROYXRpdmUsIEZpcmViYXNlRXJyb3IsIHF1ZXJ5c3RyaW5nLCBnZXRNb2R1bGFySW5zdGFuY2UsIGJhc2U2NERlY29kZSwgZ2V0VUEsIGlzSUUsIGNyZWF0ZVN1YnNjcmliZSwgcXVlcnlzdHJpbmdEZWNvZGUsIGV4dHJhY3RRdWVyeXN0cmluZywgaXNFbXB0eSB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IFNES19WRVJTSU9OLCBfZ2V0UHJvdmlkZXIsIF9yZWdpc3RlckNvbXBvbmVudCwgcmVnaXN0ZXJWZXJzaW9uLCBnZXRBcHAgfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7IF9fcmVzdCB9IGZyb20gJ3RzbGliJztcbmltcG9ydCB7IExvZ2dlciwgTG9nTGV2ZWwgfSBmcm9tICdAZmlyZWJhc2UvbG9nZ2VyJztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQW4gZW51bSBvZiBmYWN0b3JzIHRoYXQgbWF5IGJlIHVzZWQgZm9yIG11bHRpZmFjdG9yIGF1dGhlbnRpY2F0aW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBGYWN0b3JJZCA9IHtcclxuICAgIC8qKiBQaG9uZSBhcyBzZWNvbmQgZmFjdG9yICovXHJcbiAgICBQSE9ORTogJ3Bob25lJ1xyXG59O1xyXG4vKipcclxuICogRW51bWVyYXRpb24gb2Ygc3VwcG9ydGVkIHByb3ZpZGVycy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgUHJvdmlkZXJJZCA9IHtcclxuICAgIC8qKiBGYWNlYm9vayBwcm92aWRlciBJRCAqL1xyXG4gICAgRkFDRUJPT0s6ICdmYWNlYm9vay5jb20nLFxyXG4gICAgLyoqIEdpdEh1YiBwcm92aWRlciBJRCAqL1xyXG4gICAgR0lUSFVCOiAnZ2l0aHViLmNvbScsXHJcbiAgICAvKiogR29vZ2xlIHByb3ZpZGVyIElEICovXHJcbiAgICBHT09HTEU6ICdnb29nbGUuY29tJyxcclxuICAgIC8qKiBQYXNzd29yZCBwcm92aWRlciAqL1xyXG4gICAgUEFTU1dPUkQ6ICdwYXNzd29yZCcsXHJcbiAgICAvKiogUGhvbmUgcHJvdmlkZXIgKi9cclxuICAgIFBIT05FOiAncGhvbmUnLFxyXG4gICAgLyoqIFR3aXR0ZXIgcHJvdmlkZXIgSUQgKi9cclxuICAgIFRXSVRURVI6ICd0d2l0dGVyLmNvbSdcclxufTtcclxuLyoqXHJcbiAqIEVudW1lcmF0aW9uIG9mIHN1cHBvcnRlZCBzaWduLWluIG1ldGhvZHMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IFNpZ25Jbk1ldGhvZCA9IHtcclxuICAgIC8qKiBFbWFpbCBsaW5rIHNpZ24gaW4gbWV0aG9kICovXHJcbiAgICBFTUFJTF9MSU5LOiAnZW1haWxMaW5rJyxcclxuICAgIC8qKiBFbWFpbC9wYXNzd29yZCBzaWduIGluIG1ldGhvZCAqL1xyXG4gICAgRU1BSUxfUEFTU1dPUkQ6ICdwYXNzd29yZCcsXHJcbiAgICAvKiogRmFjZWJvb2sgc2lnbiBpbiBtZXRob2QgKi9cclxuICAgIEZBQ0VCT09LOiAnZmFjZWJvb2suY29tJyxcclxuICAgIC8qKiBHaXRIdWIgc2lnbiBpbiBtZXRob2QgKi9cclxuICAgIEdJVEhVQjogJ2dpdGh1Yi5jb20nLFxyXG4gICAgLyoqIEdvb2dsZSBzaWduIGluIG1ldGhvZCAqL1xyXG4gICAgR09PR0xFOiAnZ29vZ2xlLmNvbScsXHJcbiAgICAvKiogUGhvbmUgc2lnbiBpbiBtZXRob2QgKi9cclxuICAgIFBIT05FOiAncGhvbmUnLFxyXG4gICAgLyoqIFR3aXR0ZXIgc2lnbiBpbiBtZXRob2QgKi9cclxuICAgIFRXSVRURVI6ICd0d2l0dGVyLmNvbSdcclxufTtcclxuLyoqXHJcbiAqIEVudW1lcmF0aW9uIG9mIHN1cHBvcnRlZCBvcGVyYXRpb24gdHlwZXMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IE9wZXJhdGlvblR5cGUgPSB7XHJcbiAgICAvKiogT3BlcmF0aW9uIGludm9sdmluZyBsaW5raW5nIGFuIGFkZGl0aW9uYWwgcHJvdmlkZXIgdG8gYW4gYWxyZWFkeSBzaWduZWQtaW4gdXNlci4gKi9cclxuICAgIExJTks6ICdsaW5rJyxcclxuICAgIC8qKiBPcGVyYXRpb24gaW52b2x2aW5nIHVzaW5nIGEgcHJvdmlkZXIgdG8gcmVhdXRoZW50aWNhdGUgYW4gYWxyZWFkeSBzaWduZWQtaW4gdXNlci4gKi9cclxuICAgIFJFQVVUSEVOVElDQVRFOiAncmVhdXRoZW50aWNhdGUnLFxyXG4gICAgLyoqIE9wZXJhdGlvbiBpbnZvbHZpbmcgc2lnbmluZyBpbiBhIHVzZXIuICovXHJcbiAgICBTSUdOX0lOOiAnc2lnbkluJ1xyXG59O1xyXG4vKipcclxuICogQW4gZW51bWVyYXRpb24gb2YgdGhlIHBvc3NpYmxlIGVtYWlsIGFjdGlvbiB0eXBlcy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgQWN0aW9uQ29kZU9wZXJhdGlvbiA9IHtcclxuICAgIC8qKiBUaGUgZW1haWwgbGluayBzaWduLWluIGFjdGlvbi4gKi9cclxuICAgIEVNQUlMX1NJR05JTjogJ0VNQUlMX1NJR05JTicsXHJcbiAgICAvKiogVGhlIHBhc3N3b3JkIHJlc2V0IGFjdGlvbi4gKi9cclxuICAgIFBBU1NXT1JEX1JFU0VUOiAnUEFTU1dPUkRfUkVTRVQnLFxyXG4gICAgLyoqIFRoZSBlbWFpbCByZXZvY2F0aW9uIGFjdGlvbi4gKi9cclxuICAgIFJFQ09WRVJfRU1BSUw6ICdSRUNPVkVSX0VNQUlMJyxcclxuICAgIC8qKiBUaGUgcmV2ZXJ0IHNlY29uZCBmYWN0b3IgYWRkaXRpb24gZW1haWwgYWN0aW9uLiAqL1xyXG4gICAgUkVWRVJUX1NFQ09ORF9GQUNUT1JfQURESVRJT046ICdSRVZFUlRfU0VDT05EX0ZBQ1RPUl9BRERJVElPTicsXHJcbiAgICAvKiogVGhlIHJldmVydCBzZWNvbmQgZmFjdG9yIGFkZGl0aW9uIGVtYWlsIGFjdGlvbi4gKi9cclxuICAgIFZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMOiAnVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwnLFxyXG4gICAgLyoqIFRoZSBlbWFpbCB2ZXJpZmljYXRpb24gYWN0aW9uLiAqL1xyXG4gICAgVkVSSUZZX0VNQUlMOiAnVkVSSUZZX0VNQUlMJ1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfZGVidWdFcnJvck1hcCgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgW1wiYWRtaW4tcmVzdHJpY3RlZC1vcGVyYXRpb25cIiAvKiBBRE1JTl9PTkxZX09QRVJBVElPTiAqL106ICdUaGlzIG9wZXJhdGlvbiBpcyByZXN0cmljdGVkIHRvIGFkbWluaXN0cmF0b3JzIG9ubHkuJyxcclxuICAgICAgICBbXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovXTogJycsXHJcbiAgICAgICAgW1wiYXBwLW5vdC1hdXRob3JpemVkXCIgLyogQVBQX05PVF9BVVRIT1JJWkVEICovXTogXCJUaGlzIGFwcCwgaWRlbnRpZmllZCBieSB0aGUgZG9tYWluIHdoZXJlIGl0J3MgaG9zdGVkLCBpcyBub3QgXCIgK1xyXG4gICAgICAgICAgICAnYXV0aG9yaXplZCB0byB1c2UgRmlyZWJhc2UgQXV0aGVudGljYXRpb24gd2l0aCB0aGUgcHJvdmlkZWQgQVBJIGtleS4gJyArXHJcbiAgICAgICAgICAgICdSZXZpZXcgeW91ciBrZXkgY29uZmlndXJhdGlvbiBpbiB0aGUgR29vZ2xlIEFQSSBjb25zb2xlLicsXHJcbiAgICAgICAgW1wiYXBwLW5vdC1pbnN0YWxsZWRcIiAvKiBBUFBfTk9UX0lOU1RBTExFRCAqL106ICdUaGUgcmVxdWVzdGVkIG1vYmlsZSBhcHBsaWNhdGlvbiBjb3JyZXNwb25kaW5nIHRvIHRoZSBpZGVudGlmaWVyICgnICtcclxuICAgICAgICAgICAgJ0FuZHJvaWQgcGFja2FnZSBuYW1lIG9yIGlPUyBidW5kbGUgSUQpIHByb3ZpZGVkIGlzIG5vdCBpbnN0YWxsZWQgb24gJyArXHJcbiAgICAgICAgICAgICd0aGlzIGRldmljZS4nLFxyXG4gICAgICAgIFtcImNhcHRjaGEtY2hlY2stZmFpbGVkXCIgLyogQ0FQVENIQV9DSEVDS19GQUlMRUQgKi9dOiAnVGhlIHJlQ0FQVENIQSByZXNwb25zZSB0b2tlbiBwcm92aWRlZCBpcyBlaXRoZXIgaW52YWxpZCwgZXhwaXJlZCwgJyArXHJcbiAgICAgICAgICAgICdhbHJlYWR5IHVzZWQgb3IgdGhlIGRvbWFpbiBhc3NvY2lhdGVkIHdpdGggaXQgZG9lcyBub3QgbWF0Y2ggdGhlIGxpc3QgJyArXHJcbiAgICAgICAgICAgICdvZiB3aGl0ZWxpc3RlZCBkb21haW5zLicsXHJcbiAgICAgICAgW1wiY29kZS1leHBpcmVkXCIgLyogQ09ERV9FWFBJUkVEICovXTogJ1RoZSBTTVMgY29kZSBoYXMgZXhwaXJlZC4gUGxlYXNlIHJlLXNlbmQgdGhlIHZlcmlmaWNhdGlvbiBjb2RlIHRvIHRyeSAnICtcclxuICAgICAgICAgICAgJ2FnYWluLicsXHJcbiAgICAgICAgW1wiY29yZG92YS1ub3QtcmVhZHlcIiAvKiBDT1JET1ZBX05PVF9SRUFEWSAqL106ICdDb3Jkb3ZhIGZyYW1ld29yayBpcyBub3QgcmVhZHkuJyxcclxuICAgICAgICBbXCJjb3JzLXVuc3VwcG9ydGVkXCIgLyogQ09SU19VTlNVUFBPUlRFRCAqL106ICdUaGlzIGJyb3dzZXIgaXMgbm90IHN1cHBvcnRlZC4nLFxyXG4gICAgICAgIFtcImNyZWRlbnRpYWwtYWxyZWFkeS1pbi11c2VcIiAvKiBDUkVERU5USUFMX0FMUkVBRFlfSU5fVVNFICovXTogJ1RoaXMgY3JlZGVudGlhbCBpcyBhbHJlYWR5IGFzc29jaWF0ZWQgd2l0aCBhIGRpZmZlcmVudCB1c2VyIGFjY291bnQuJyxcclxuICAgICAgICBbXCJjdXN0b20tdG9rZW4tbWlzbWF0Y2hcIiAvKiBDUkVERU5USUFMX01JU01BVENIICovXTogJ1RoZSBjdXN0b20gdG9rZW4gY29ycmVzcG9uZHMgdG8gYSBkaWZmZXJlbnQgYXVkaWVuY2UuJyxcclxuICAgICAgICBbXCJyZXF1aXJlcy1yZWNlbnQtbG9naW5cIiAvKiBDUkVERU5USUFMX1RPT19PTERfTE9HSU5fQUdBSU4gKi9dOiAnVGhpcyBvcGVyYXRpb24gaXMgc2Vuc2l0aXZlIGFuZCByZXF1aXJlcyByZWNlbnQgYXV0aGVudGljYXRpb24uIExvZyBpbiAnICtcclxuICAgICAgICAgICAgJ2FnYWluIGJlZm9yZSByZXRyeWluZyB0aGlzIHJlcXVlc3QuJyxcclxuICAgICAgICBbXCJkZXBlbmRlbnQtc2RrLWluaXRpYWxpemVkLWJlZm9yZS1hdXRoXCIgLyogREVQRU5ERU5UX1NES19JTklUX0JFRk9SRV9BVVRIICovXTogJ0Fub3RoZXIgRmlyZWJhc2UgU0RLIHdhcyBpbml0aWFsaXplZCBhbmQgaXMgdHJ5aW5nIHRvIHVzZSBBdXRoIGJlZm9yZSBBdXRoIGlzICcgK1xyXG4gICAgICAgICAgICAnaW5pdGlhbGl6ZWQuIFBsZWFzZSBiZSBzdXJlIHRvIGNhbGwgYGluaXRpYWxpemVBdXRoYCBvciBgZ2V0QXV0aGAgYmVmb3JlICcgK1xyXG4gICAgICAgICAgICAnc3RhcnRpbmcgYW55IG90aGVyIEZpcmViYXNlIFNESy4nLFxyXG4gICAgICAgIFtcImR5bmFtaWMtbGluay1ub3QtYWN0aXZhdGVkXCIgLyogRFlOQU1JQ19MSU5LX05PVF9BQ1RJVkFURUQgKi9dOiAnUGxlYXNlIGFjdGl2YXRlIER5bmFtaWMgTGlua3MgaW4gdGhlIEZpcmViYXNlIENvbnNvbGUgYW5kIGFncmVlIHRvIHRoZSB0ZXJtcyBhbmQgJyArXHJcbiAgICAgICAgICAgICdjb25kaXRpb25zLicsXHJcbiAgICAgICAgW1wiZW1haWwtY2hhbmdlLW5lZWRzLXZlcmlmaWNhdGlvblwiIC8qIEVNQUlMX0NIQU5HRV9ORUVEU19WRVJJRklDQVRJT04gKi9dOiAnTXVsdGktZmFjdG9yIHVzZXJzIG11c3QgYWx3YXlzIGhhdmUgYSB2ZXJpZmllZCBlbWFpbC4nLFxyXG4gICAgICAgIFtcImVtYWlsLWFscmVhZHktaW4tdXNlXCIgLyogRU1BSUxfRVhJU1RTICovXTogJ1RoZSBlbWFpbCBhZGRyZXNzIGlzIGFscmVhZHkgaW4gdXNlIGJ5IGFub3RoZXIgYWNjb3VudC4nLFxyXG4gICAgICAgIFtcImVtdWxhdG9yLWNvbmZpZy1mYWlsZWRcIiAvKiBFTVVMQVRPUl9DT05GSUdfRkFJTEVEICovXTogJ0F1dGggaW5zdGFuY2UgaGFzIGFscmVhZHkgYmVlbiB1c2VkIHRvIG1ha2UgYSBuZXR3b3JrIGNhbGwuIEF1dGggY2FuICcgK1xyXG4gICAgICAgICAgICAnbm8gbG9uZ2VyIGJlIGNvbmZpZ3VyZWQgdG8gdXNlIHRoZSBlbXVsYXRvci4gVHJ5IGNhbGxpbmcgJyArXHJcbiAgICAgICAgICAgICdcImNvbm5lY3RBdXRoRW11bGF0b3IoKVwiIHNvb25lci4nLFxyXG4gICAgICAgIFtcImV4cGlyZWQtYWN0aW9uLWNvZGVcIiAvKiBFWFBJUkVEX09PQl9DT0RFICovXTogJ1RoZSBhY3Rpb24gY29kZSBoYXMgZXhwaXJlZC4nLFxyXG4gICAgICAgIFtcImNhbmNlbGxlZC1wb3B1cC1yZXF1ZXN0XCIgLyogRVhQSVJFRF9QT1BVUF9SRVFVRVNUICovXTogJ1RoaXMgb3BlcmF0aW9uIGhhcyBiZWVuIGNhbmNlbGxlZCBkdWUgdG8gYW5vdGhlciBjb25mbGljdGluZyBwb3B1cCBiZWluZyBvcGVuZWQuJyxcclxuICAgICAgICBbXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovXTogJ0FuIGludGVybmFsIEF1dGhFcnJvciBoYXMgb2NjdXJyZWQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWFwcC1jcmVkZW50aWFsXCIgLyogSU5WQUxJRF9BUFBfQ1JFREVOVElBTCAqL106ICdUaGUgcGhvbmUgdmVyaWZpY2F0aW9uIHJlcXVlc3QgY29udGFpbnMgYW4gaW52YWxpZCBhcHBsaWNhdGlvbiB2ZXJpZmllci4nICtcclxuICAgICAgICAgICAgJyBUaGUgcmVDQVBUQ0hBIHRva2VuIHJlc3BvbnNlIGlzIGVpdGhlciBpbnZhbGlkIG9yIGV4cGlyZWQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWFwcC1pZFwiIC8qIElOVkFMSURfQVBQX0lEICovXTogJ1RoZSBtb2JpbGUgYXBwIGlkZW50aWZpZXIgaXMgbm90IHJlZ2lzdGVkIGZvciB0aGUgY3VycmVudCBwcm9qZWN0LicsXHJcbiAgICAgICAgW1wiaW52YWxpZC11c2VyLXRva2VuXCIgLyogSU5WQUxJRF9BVVRIICovXTogXCJUaGlzIHVzZXIncyBjcmVkZW50aWFsIGlzbid0IHZhbGlkIGZvciB0aGlzIHByb2plY3QuIFRoaXMgY2FuIGhhcHBlbiBcIiArXHJcbiAgICAgICAgICAgIFwiaWYgdGhlIHVzZXIncyB0b2tlbiBoYXMgYmVlbiB0YW1wZXJlZCB3aXRoLCBvciBpZiB0aGUgdXNlciBpc24ndCBmb3IgXCIgK1xyXG4gICAgICAgICAgICAndGhlIHByb2plY3QgYXNzb2NpYXRlZCB3aXRoIHRoaXMgQVBJIGtleS4nLFxyXG4gICAgICAgIFtcImludmFsaWQtYXV0aC1ldmVudFwiIC8qIElOVkFMSURfQVVUSF9FVkVOVCAqL106ICdBbiBpbnRlcm5hbCBBdXRoRXJyb3IgaGFzIG9jY3VycmVkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC12ZXJpZmljYXRpb24tY29kZVwiIC8qIElOVkFMSURfQ09ERSAqL106ICdUaGUgU01TIHZlcmlmaWNhdGlvbiBjb2RlIHVzZWQgdG8gY3JlYXRlIHRoZSBwaG9uZSBhdXRoIGNyZWRlbnRpYWwgaXMgJyArXHJcbiAgICAgICAgICAgICdpbnZhbGlkLiBQbGVhc2UgcmVzZW5kIHRoZSB2ZXJpZmljYXRpb24gY29kZSBzbXMgYW5kIGJlIHN1cmUgdG8gdXNlIHRoZSAnICtcclxuICAgICAgICAgICAgJ3ZlcmlmaWNhdGlvbiBjb2RlIHByb3ZpZGVkIGJ5IHRoZSB1c2VyLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1jb250aW51ZS11cmlcIiAvKiBJTlZBTElEX0NPTlRJTlVFX1VSSSAqL106ICdUaGUgY29udGludWUgVVJMIHByb3ZpZGVkIGluIHRoZSByZXF1ZXN0IGlzIGludmFsaWQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWNvcmRvdmEtY29uZmlndXJhdGlvblwiIC8qIElOVkFMSURfQ09SRE9WQV9DT05GSUdVUkFUSU9OICovXTogJ1RoZSBmb2xsb3dpbmcgQ29yZG92YSBwbHVnaW5zIG11c3QgYmUgaW5zdGFsbGVkIHRvIGVuYWJsZSBPQXV0aCBzaWduLWluOiAnICtcclxuICAgICAgICAgICAgJ2NvcmRvdmEtcGx1Z2luLWJ1aWxkaW5mbywgY29yZG92YS11bml2ZXJzYWwtbGlua3MtcGx1Z2luLCAnICtcclxuICAgICAgICAgICAgJ2NvcmRvdmEtcGx1Z2luLWJyb3dzZXJ0YWIsIGNvcmRvdmEtcGx1Z2luLWluYXBwYnJvd3NlciBhbmQgJyArXHJcbiAgICAgICAgICAgICdjb3Jkb3ZhLXBsdWdpbi1jdXN0b211cmxzY2hlbWUuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWN1c3RvbS10b2tlblwiIC8qIElOVkFMSURfQ1VTVE9NX1RPS0VOICovXTogJ1RoZSBjdXN0b20gdG9rZW4gZm9ybWF0IGlzIGluY29ycmVjdC4gUGxlYXNlIGNoZWNrIHRoZSBkb2N1bWVudGF0aW9uLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1keW5hbWljLWxpbmstZG9tYWluXCIgLyogSU5WQUxJRF9EWU5BTUlDX0xJTktfRE9NQUlOICovXTogJ1RoZSBwcm92aWRlZCBkeW5hbWljIGxpbmsgZG9tYWluIGlzIG5vdCBjb25maWd1cmVkIG9yIGF1dGhvcml6ZWQgZm9yIHRoZSBjdXJyZW50IHByb2plY3QuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWVtYWlsXCIgLyogSU5WQUxJRF9FTUFJTCAqL106ICdUaGUgZW1haWwgYWRkcmVzcyBpcyBiYWRseSBmb3JtYXR0ZWQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWVtdWxhdG9yLXNjaGVtZVwiIC8qIElOVkFMSURfRU1VTEFUT1JfU0NIRU1FICovXTogJ0VtdWxhdG9yIFVSTCBtdXN0IHN0YXJ0IHdpdGggYSB2YWxpZCBzY2hlbWUgKGh0dHA6Ly8gb3IgaHR0cHM6Ly8pLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1hcGkta2V5XCIgLyogSU5WQUxJRF9BUElfS0VZICovXTogJ1lvdXIgQVBJIGtleSBpcyBpbnZhbGlkLCBwbGVhc2UgY2hlY2sgeW91IGhhdmUgY29waWVkIGl0IGNvcnJlY3RseS4nLFxyXG4gICAgICAgIFtcImludmFsaWQtY2VydC1oYXNoXCIgLyogSU5WQUxJRF9DRVJUX0hBU0ggKi9dOiAnVGhlIFNIQS0xIGNlcnRpZmljYXRlIGhhc2ggcHJvdmlkZWQgaXMgaW52YWxpZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtY3JlZGVudGlhbFwiIC8qIElOVkFMSURfSURQX1JFU1BPTlNFICovXTogJ1RoZSBzdXBwbGllZCBhdXRoIGNyZWRlbnRpYWwgaXMgbWFsZm9ybWVkIG9yIGhhcyBleHBpcmVkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1tZXNzYWdlLXBheWxvYWRcIiAvKiBJTlZBTElEX01FU1NBR0VfUEFZTE9BRCAqL106ICdUaGUgZW1haWwgdGVtcGxhdGUgY29ycmVzcG9uZGluZyB0byB0aGlzIGFjdGlvbiBjb250YWlucyBpbnZhbGlkIGNoYXJhY3RlcnMgaW4gaXRzIG1lc3NhZ2UuICcgK1xyXG4gICAgICAgICAgICAnUGxlYXNlIGZpeCBieSBnb2luZyB0byB0aGUgQXV0aCBlbWFpbCB0ZW1wbGF0ZXMgc2VjdGlvbiBpbiB0aGUgRmlyZWJhc2UgQ29uc29sZS4nLFxyXG4gICAgICAgIFtcImludmFsaWQtbXVsdGktZmFjdG9yLXNlc3Npb25cIiAvKiBJTlZBTElEX01GQV9TRVNTSU9OICovXTogJ1RoZSByZXF1ZXN0IGRvZXMgbm90IGNvbnRhaW4gYSB2YWxpZCBwcm9vZiBvZiBmaXJzdCBmYWN0b3Igc3VjY2Vzc2Z1bCBzaWduLWluLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1vYXV0aC1wcm92aWRlclwiIC8qIElOVkFMSURfT0FVVEhfUFJPVklERVIgKi9dOiAnRW1haWxBdXRoUHJvdmlkZXIgaXMgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBvcGVyYXRpb24uIFRoaXMgb3BlcmF0aW9uICcgK1xyXG4gICAgICAgICAgICAnb25seSBzdXBwb3J0cyBPQXV0aCBwcm92aWRlcnMuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLW9hdXRoLWNsaWVudC1pZFwiIC8qIElOVkFMSURfT0FVVEhfQ0xJRU5UX0lEICovXTogJ1RoZSBPQXV0aCBjbGllbnQgSUQgcHJvdmlkZWQgaXMgZWl0aGVyIGludmFsaWQgb3IgZG9lcyBub3QgbWF0Y2ggdGhlICcgK1xyXG4gICAgICAgICAgICAnc3BlY2lmaWVkIEFQSSBrZXkuJyxcclxuICAgICAgICBbXCJ1bmF1dGhvcml6ZWQtZG9tYWluXCIgLyogSU5WQUxJRF9PUklHSU4gKi9dOiAnVGhpcyBkb21haW4gaXMgbm90IGF1dGhvcml6ZWQgZm9yIE9BdXRoIG9wZXJhdGlvbnMgZm9yIHlvdXIgRmlyZWJhc2UgJyArXHJcbiAgICAgICAgICAgICdwcm9qZWN0LiBFZGl0IHRoZSBsaXN0IG9mIGF1dGhvcml6ZWQgZG9tYWlucyBmcm9tIHRoZSBGaXJlYmFzZSBjb25zb2xlLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1hY3Rpb24tY29kZVwiIC8qIElOVkFMSURfT09CX0NPREUgKi9dOiAnVGhlIGFjdGlvbiBjb2RlIGlzIGludmFsaWQuIFRoaXMgY2FuIGhhcHBlbiBpZiB0aGUgY29kZSBpcyBtYWxmb3JtZWQsICcgK1xyXG4gICAgICAgICAgICAnZXhwaXJlZCwgb3IgaGFzIGFscmVhZHkgYmVlbiB1c2VkLicsXHJcbiAgICAgICAgW1wid3JvbmctcGFzc3dvcmRcIiAvKiBJTlZBTElEX1BBU1NXT1JEICovXTogJ1RoZSBwYXNzd29yZCBpcyBpbnZhbGlkIG9yIHRoZSB1c2VyIGRvZXMgbm90IGhhdmUgYSBwYXNzd29yZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtcGVyc2lzdGVuY2UtdHlwZVwiIC8qIElOVkFMSURfUEVSU0lTVEVOQ0UgKi9dOiAnVGhlIHNwZWNpZmllZCBwZXJzaXN0ZW5jZSB0eXBlIGlzIGludmFsaWQuIEl0IGNhbiBvbmx5IGJlIGxvY2FsLCBzZXNzaW9uIG9yIG5vbmUuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLXBob25lLW51bWJlclwiIC8qIElOVkFMSURfUEhPTkVfTlVNQkVSICovXTogJ1RoZSBmb3JtYXQgb2YgdGhlIHBob25lIG51bWJlciBwcm92aWRlZCBpcyBpbmNvcnJlY3QuIFBsZWFzZSBlbnRlciB0aGUgJyArXHJcbiAgICAgICAgICAgICdwaG9uZSBudW1iZXIgaW4gYSBmb3JtYXQgdGhhdCBjYW4gYmUgcGFyc2VkIGludG8gRS4xNjQgZm9ybWF0LiBFLjE2NCAnICtcclxuICAgICAgICAgICAgJ3Bob25lIG51bWJlcnMgYXJlIHdyaXR0ZW4gaW4gdGhlIGZvcm1hdCBbK11bY291bnRyeSBjb2RlXVtzdWJzY3JpYmVyICcgK1xyXG4gICAgICAgICAgICAnbnVtYmVyIGluY2x1ZGluZyBhcmVhIGNvZGVdLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1wcm92aWRlci1pZFwiIC8qIElOVkFMSURfUFJPVklERVJfSUQgKi9dOiAnVGhlIHNwZWNpZmllZCBwcm92aWRlciBJRCBpcyBpbnZhbGlkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1yZWNpcGllbnQtZW1haWxcIiAvKiBJTlZBTElEX1JFQ0lQSUVOVF9FTUFJTCAqL106ICdUaGUgZW1haWwgY29ycmVzcG9uZGluZyB0byB0aGlzIGFjdGlvbiBmYWlsZWQgdG8gc2VuZCBhcyB0aGUgcHJvdmlkZWQgJyArXHJcbiAgICAgICAgICAgICdyZWNpcGllbnQgZW1haWwgYWRkcmVzcyBpcyBpbnZhbGlkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1zZW5kZXJcIiAvKiBJTlZBTElEX1NFTkRFUiAqL106ICdUaGUgZW1haWwgdGVtcGxhdGUgY29ycmVzcG9uZGluZyB0byB0aGlzIGFjdGlvbiBjb250YWlucyBhbiBpbnZhbGlkIHNlbmRlciBlbWFpbCBvciBuYW1lLiAnICtcclxuICAgICAgICAgICAgJ1BsZWFzZSBmaXggYnkgZ29pbmcgdG8gdGhlIEF1dGggZW1haWwgdGVtcGxhdGVzIHNlY3Rpb24gaW4gdGhlIEZpcmViYXNlIENvbnNvbGUuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLXZlcmlmaWNhdGlvbi1pZFwiIC8qIElOVkFMSURfU0VTU0lPTl9JTkZPICovXTogJ1RoZSB2ZXJpZmljYXRpb24gSUQgdXNlZCB0byBjcmVhdGUgdGhlIHBob25lIGF1dGggY3JlZGVudGlhbCBpcyBpbnZhbGlkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC10ZW5hbnQtaWRcIiAvKiBJTlZBTElEX1RFTkFOVF9JRCAqL106IFwiVGhlIEF1dGggaW5zdGFuY2UncyB0ZW5hbnQgSUQgaXMgaW52YWxpZC5cIixcclxuICAgICAgICBbXCJtaXNzaW5nLWFuZHJvaWQtcGtnLW5hbWVcIiAvKiBNSVNTSU5HX0FORFJPSURfUEFDS0FHRV9OQU1FICovXTogJ0FuIEFuZHJvaWQgUGFja2FnZSBOYW1lIG11c3QgYmUgcHJvdmlkZWQgaWYgdGhlIEFuZHJvaWQgQXBwIGlzIHJlcXVpcmVkIHRvIGJlIGluc3RhbGxlZC4nLFxyXG4gICAgICAgIFtcImF1dGgtZG9tYWluLWNvbmZpZy1yZXF1aXJlZFwiIC8qIE1JU1NJTkdfQVVUSF9ET01BSU4gKi9dOiAnQmUgc3VyZSB0byBpbmNsdWRlIGF1dGhEb21haW4gd2hlbiBjYWxsaW5nIGZpcmViYXNlLmluaXRpYWxpemVBcHAoKSwgJyArXHJcbiAgICAgICAgICAgICdieSBmb2xsb3dpbmcgdGhlIGluc3RydWN0aW9ucyBpbiB0aGUgRmlyZWJhc2UgY29uc29sZS4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctYXBwLWNyZWRlbnRpYWxcIiAvKiBNSVNTSU5HX0FQUF9DUkVERU5USUFMICovXTogJ1RoZSBwaG9uZSB2ZXJpZmljYXRpb24gcmVxdWVzdCBpcyBtaXNzaW5nIGFuIGFwcGxpY2F0aW9uIHZlcmlmaWVyICcgK1xyXG4gICAgICAgICAgICAnYXNzZXJ0aW9uLiBBIHJlQ0FQVENIQSByZXNwb25zZSB0b2tlbiBuZWVkcyB0byBiZSBwcm92aWRlZC4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctdmVyaWZpY2F0aW9uLWNvZGVcIiAvKiBNSVNTSU5HX0NPREUgKi9dOiAnVGhlIHBob25lIGF1dGggY3JlZGVudGlhbCB3YXMgY3JlYXRlZCB3aXRoIGFuIGVtcHR5IFNNUyB2ZXJpZmljYXRpb24gY29kZS4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctY29udGludWUtdXJpXCIgLyogTUlTU0lOR19DT05USU5VRV9VUkkgKi9dOiAnQSBjb250aW51ZSBVUkwgbXVzdCBiZSBwcm92aWRlZCBpbiB0aGUgcmVxdWVzdC4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctaWZyYW1lLXN0YXJ0XCIgLyogTUlTU0lOR19JRlJBTUVfU1RBUlQgKi9dOiAnQW4gaW50ZXJuYWwgQXV0aEVycm9yIGhhcyBvY2N1cnJlZC4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctaW9zLWJ1bmRsZS1pZFwiIC8qIE1JU1NJTkdfSU9TX0JVTkRMRV9JRCAqL106ICdBbiBpT1MgQnVuZGxlIElEIG11c3QgYmUgcHJvdmlkZWQgaWYgYW4gQXBwIFN0b3JlIElEIGlzIHByb3ZpZGVkLicsXHJcbiAgICAgICAgW1wibWlzc2luZy1vci1pbnZhbGlkLW5vbmNlXCIgLyogTUlTU0lOR19PUl9JTlZBTElEX05PTkNFICovXTogJ1RoZSByZXF1ZXN0IGRvZXMgbm90IGNvbnRhaW4gYSB2YWxpZCBub25jZS4gVGhpcyBjYW4gb2NjdXIgaWYgdGhlICcgK1xyXG4gICAgICAgICAgICAnU0hBLTI1NiBoYXNoIG9mIHRoZSBwcm92aWRlZCByYXcgbm9uY2UgZG9lcyBub3QgbWF0Y2ggdGhlIGhhc2hlZCBub25jZSAnICtcclxuICAgICAgICAgICAgJ2luIHRoZSBJRCB0b2tlbiBwYXlsb2FkLicsXHJcbiAgICAgICAgW1wibWlzc2luZy1tdWx0aS1mYWN0b3ItaW5mb1wiIC8qIE1JU1NJTkdfTUZBX0lORk8gKi9dOiAnTm8gc2Vjb25kIGZhY3RvciBpZGVudGlmaWVyIGlzIHByb3ZpZGVkLicsXHJcbiAgICAgICAgW1wibWlzc2luZy1tdWx0aS1mYWN0b3Itc2Vzc2lvblwiIC8qIE1JU1NJTkdfTUZBX1NFU1NJT04gKi9dOiAnVGhlIHJlcXVlc3QgaXMgbWlzc2luZyBwcm9vZiBvZiBmaXJzdCBmYWN0b3Igc3VjY2Vzc2Z1bCBzaWduLWluLicsXHJcbiAgICAgICAgW1wibWlzc2luZy1waG9uZS1udW1iZXJcIiAvKiBNSVNTSU5HX1BIT05FX05VTUJFUiAqL106ICdUbyBzZW5kIHZlcmlmaWNhdGlvbiBjb2RlcywgcHJvdmlkZSBhIHBob25lIG51bWJlciBmb3IgdGhlIHJlY2lwaWVudC4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctdmVyaWZpY2F0aW9uLWlkXCIgLyogTUlTU0lOR19TRVNTSU9OX0lORk8gKi9dOiAnVGhlIHBob25lIGF1dGggY3JlZGVudGlhbCB3YXMgY3JlYXRlZCB3aXRoIGFuIGVtcHR5IHZlcmlmaWNhdGlvbiBJRC4nLFxyXG4gICAgICAgIFtcImFwcC1kZWxldGVkXCIgLyogTU9EVUxFX0RFU1RST1lFRCAqL106ICdUaGlzIGluc3RhbmNlIG9mIEZpcmViYXNlQXBwIGhhcyBiZWVuIGRlbGV0ZWQuJyxcclxuICAgICAgICBbXCJtdWx0aS1mYWN0b3ItaW5mby1ub3QtZm91bmRcIiAvKiBNRkFfSU5GT19OT1RfRk9VTkQgKi9dOiAnVGhlIHVzZXIgZG9lcyBub3QgaGF2ZSBhIHNlY29uZCBmYWN0b3IgbWF0Y2hpbmcgdGhlIGlkZW50aWZpZXIgcHJvdmlkZWQuJyxcclxuICAgICAgICBbXCJtdWx0aS1mYWN0b3ItYXV0aC1yZXF1aXJlZFwiIC8qIE1GQV9SRVFVSVJFRCAqL106ICdQcm9vZiBvZiBvd25lcnNoaXAgb2YgYSBzZWNvbmQgZmFjdG9yIGlzIHJlcXVpcmVkIHRvIGNvbXBsZXRlIHNpZ24taW4uJyxcclxuICAgICAgICBbXCJhY2NvdW50LWV4aXN0cy13aXRoLWRpZmZlcmVudC1jcmVkZW50aWFsXCIgLyogTkVFRF9DT05GSVJNQVRJT04gKi9dOiAnQW4gYWNjb3VudCBhbHJlYWR5IGV4aXN0cyB3aXRoIHRoZSBzYW1lIGVtYWlsIGFkZHJlc3MgYnV0IGRpZmZlcmVudCAnICtcclxuICAgICAgICAgICAgJ3NpZ24taW4gY3JlZGVudGlhbHMuIFNpZ24gaW4gdXNpbmcgYSBwcm92aWRlciBhc3NvY2lhdGVkIHdpdGggdGhpcyAnICtcclxuICAgICAgICAgICAgJ2VtYWlsIGFkZHJlc3MuJyxcclxuICAgICAgICBbXCJuZXR3b3JrLXJlcXVlc3QtZmFpbGVkXCIgLyogTkVUV09SS19SRVFVRVNUX0ZBSUxFRCAqL106ICdBIG5ldHdvcmsgQXV0aEVycm9yIChzdWNoIGFzIHRpbWVvdXQsIGludGVycnVwdGVkIGNvbm5lY3Rpb24gb3IgdW5yZWFjaGFibGUgaG9zdCkgaGFzIG9jY3VycmVkLicsXHJcbiAgICAgICAgW1wibm8tYXV0aC1ldmVudFwiIC8qIE5PX0FVVEhfRVZFTlQgKi9dOiAnQW4gaW50ZXJuYWwgQXV0aEVycm9yIGhhcyBvY2N1cnJlZC4nLFxyXG4gICAgICAgIFtcIm5vLXN1Y2gtcHJvdmlkZXJcIiAvKiBOT19TVUNIX1BST1ZJREVSICovXTogJ1VzZXIgd2FzIG5vdCBsaW5rZWQgdG8gYW4gYWNjb3VudCB3aXRoIHRoZSBnaXZlbiBwcm92aWRlci4nLFxyXG4gICAgICAgIFtcIm51bGwtdXNlclwiIC8qIE5VTExfVVNFUiAqL106ICdBIG51bGwgdXNlciBvYmplY3Qgd2FzIHByb3ZpZGVkIGFzIHRoZSBhcmd1bWVudCBmb3IgYW4gb3BlcmF0aW9uIHdoaWNoICcgK1xyXG4gICAgICAgICAgICAncmVxdWlyZXMgYSBub24tbnVsbCB1c2VyIG9iamVjdC4nLFxyXG4gICAgICAgIFtcIm9wZXJhdGlvbi1ub3QtYWxsb3dlZFwiIC8qIE9QRVJBVElPTl9OT1RfQUxMT1dFRCAqL106ICdUaGUgZ2l2ZW4gc2lnbi1pbiBwcm92aWRlciBpcyBkaXNhYmxlZCBmb3IgdGhpcyBGaXJlYmFzZSBwcm9qZWN0LiAnICtcclxuICAgICAgICAgICAgJ0VuYWJsZSBpdCBpbiB0aGUgRmlyZWJhc2UgY29uc29sZSwgdW5kZXIgdGhlIHNpZ24taW4gbWV0aG9kIHRhYiBvZiB0aGUgJyArXHJcbiAgICAgICAgICAgICdBdXRoIHNlY3Rpb24uJyxcclxuICAgICAgICBbXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIgLyogT1BFUkFUSU9OX05PVF9TVVBQT1JURUQgKi9dOiAnVGhpcyBvcGVyYXRpb24gaXMgbm90IHN1cHBvcnRlZCBpbiB0aGUgZW52aXJvbm1lbnQgdGhpcyBhcHBsaWNhdGlvbiBpcyAnICtcclxuICAgICAgICAgICAgJ3J1bm5pbmcgb24uIFwibG9jYXRpb24ucHJvdG9jb2xcIiBtdXN0IGJlIGh0dHAsIGh0dHBzIG9yIGNocm9tZS1leHRlbnNpb24nICtcclxuICAgICAgICAgICAgJyBhbmQgd2ViIHN0b3JhZ2UgbXVzdCBiZSBlbmFibGVkLicsXHJcbiAgICAgICAgW1wicG9wdXAtYmxvY2tlZFwiIC8qIFBPUFVQX0JMT0NLRUQgKi9dOiAnVW5hYmxlIHRvIGVzdGFibGlzaCBhIGNvbm5lY3Rpb24gd2l0aCB0aGUgcG9wdXAuIEl0IG1heSBoYXZlIGJlZW4gYmxvY2tlZCBieSB0aGUgYnJvd3Nlci4nLFxyXG4gICAgICAgIFtcInBvcHVwLWNsb3NlZC1ieS11c2VyXCIgLyogUE9QVVBfQ0xPU0VEX0JZX1VTRVIgKi9dOiAnVGhlIHBvcHVwIGhhcyBiZWVuIGNsb3NlZCBieSB0aGUgdXNlciBiZWZvcmUgZmluYWxpemluZyB0aGUgb3BlcmF0aW9uLicsXHJcbiAgICAgICAgW1wicHJvdmlkZXItYWxyZWFkeS1saW5rZWRcIiAvKiBQUk9WSURFUl9BTFJFQURZX0xJTktFRCAqL106ICdVc2VyIGNhbiBvbmx5IGJlIGxpbmtlZCB0byBvbmUgaWRlbnRpdHkgZm9yIHRoZSBnaXZlbiBwcm92aWRlci4nLFxyXG4gICAgICAgIFtcInF1b3RhLWV4Y2VlZGVkXCIgLyogUVVPVEFfRVhDRUVERUQgKi9dOiBcIlRoZSBwcm9qZWN0J3MgcXVvdGEgZm9yIHRoaXMgb3BlcmF0aW9uIGhhcyBiZWVuIGV4Y2VlZGVkLlwiLFxyXG4gICAgICAgIFtcInJlZGlyZWN0LWNhbmNlbGxlZC1ieS11c2VyXCIgLyogUkVESVJFQ1RfQ0FOQ0VMTEVEX0JZX1VTRVIgKi9dOiAnVGhlIHJlZGlyZWN0IG9wZXJhdGlvbiBoYXMgYmVlbiBjYW5jZWxsZWQgYnkgdGhlIHVzZXIgYmVmb3JlIGZpbmFsaXppbmcuJyxcclxuICAgICAgICBbXCJyZWRpcmVjdC1vcGVyYXRpb24tcGVuZGluZ1wiIC8qIFJFRElSRUNUX09QRVJBVElPTl9QRU5ESU5HICovXTogJ0EgcmVkaXJlY3Qgc2lnbi1pbiBvcGVyYXRpb24gaXMgYWxyZWFkeSBwZW5kaW5nLicsXHJcbiAgICAgICAgW1wicmVqZWN0ZWQtY3JlZGVudGlhbFwiIC8qIFJFSkVDVEVEX0NSRURFTlRJQUwgKi9dOiAnVGhlIHJlcXVlc3QgY29udGFpbnMgbWFsZm9ybWVkIG9yIG1pc21hdGNoaW5nIGNyZWRlbnRpYWxzLicsXHJcbiAgICAgICAgW1wic2Vjb25kLWZhY3Rvci1hbHJlYWR5LWluLXVzZVwiIC8qIFNFQ09ORF9GQUNUT1JfQUxSRUFEWV9FTlJPTExFRCAqL106ICdUaGUgc2Vjb25kIGZhY3RvciBpcyBhbHJlYWR5IGVucm9sbGVkIG9uIHRoaXMgYWNjb3VudC4nLFxyXG4gICAgICAgIFtcIm1heGltdW0tc2Vjb25kLWZhY3Rvci1jb3VudC1leGNlZWRlZFwiIC8qIFNFQ09ORF9GQUNUT1JfTElNSVRfRVhDRUVERUQgKi9dOiAnVGhlIG1heGltdW0gYWxsb3dlZCBudW1iZXIgb2Ygc2Vjb25kIGZhY3RvcnMgb24gYSB1c2VyIGhhcyBiZWVuIGV4Y2VlZGVkLicsXHJcbiAgICAgICAgW1widGVuYW50LWlkLW1pc21hdGNoXCIgLyogVEVOQU5UX0lEX01JU01BVENIICovXTogXCJUaGUgcHJvdmlkZWQgdGVuYW50IElEIGRvZXMgbm90IG1hdGNoIHRoZSBBdXRoIGluc3RhbmNlJ3MgdGVuYW50IElEXCIsXHJcbiAgICAgICAgW1widGltZW91dFwiIC8qIFRJTUVPVVQgKi9dOiAnVGhlIG9wZXJhdGlvbiBoYXMgdGltZWQgb3V0LicsXHJcbiAgICAgICAgW1widXNlci10b2tlbi1leHBpcmVkXCIgLyogVE9LRU5fRVhQSVJFRCAqL106IFwiVGhlIHVzZXIncyBjcmVkZW50aWFsIGlzIG5vIGxvbmdlciB2YWxpZC4gVGhlIHVzZXIgbXVzdCBzaWduIGluIGFnYWluLlwiLFxyXG4gICAgICAgIFtcInRvby1tYW55LXJlcXVlc3RzXCIgLyogVE9PX01BTllfQVRURU1QVFNfVFJZX0xBVEVSICovXTogJ1dlIGhhdmUgYmxvY2tlZCBhbGwgcmVxdWVzdHMgZnJvbSB0aGlzIGRldmljZSBkdWUgdG8gdW51c3VhbCBhY3Rpdml0eS4gJyArXHJcbiAgICAgICAgICAgICdUcnkgYWdhaW4gbGF0ZXIuJyxcclxuICAgICAgICBbXCJ1bmF1dGhvcml6ZWQtY29udGludWUtdXJpXCIgLyogVU5BVVRIT1JJWkVEX0RPTUFJTiAqL106ICdUaGUgZG9tYWluIG9mIHRoZSBjb250aW51ZSBVUkwgaXMgbm90IHdoaXRlbGlzdGVkLiAgUGxlYXNlIHdoaXRlbGlzdCAnICtcclxuICAgICAgICAgICAgJ3RoZSBkb21haW4gaW4gdGhlIEZpcmViYXNlIGNvbnNvbGUuJyxcclxuICAgICAgICBbXCJ1bnN1cHBvcnRlZC1maXJzdC1mYWN0b3JcIiAvKiBVTlNVUFBPUlRFRF9GSVJTVF9GQUNUT1IgKi9dOiAnRW5yb2xsaW5nIGEgc2Vjb25kIGZhY3RvciBvciBzaWduaW5nIGluIHdpdGggYSBtdWx0aS1mYWN0b3IgYWNjb3VudCByZXF1aXJlcyBzaWduLWluIHdpdGggYSBzdXBwb3J0ZWQgZmlyc3QgZmFjdG9yLicsXHJcbiAgICAgICAgW1widW5zdXBwb3J0ZWQtcGVyc2lzdGVuY2UtdHlwZVwiIC8qIFVOU1VQUE9SVEVEX1BFUlNJU1RFTkNFICovXTogJ1RoZSBjdXJyZW50IGVudmlyb25tZW50IGRvZXMgbm90IHN1cHBvcnQgdGhlIHNwZWNpZmllZCBwZXJzaXN0ZW5jZSB0eXBlLicsXHJcbiAgICAgICAgW1widW5zdXBwb3J0ZWQtdGVuYW50LW9wZXJhdGlvblwiIC8qIFVOU1VQUE9SVEVEX1RFTkFOVF9PUEVSQVRJT04gKi9dOiAnVGhpcyBvcGVyYXRpb24gaXMgbm90IHN1cHBvcnRlZCBpbiBhIG11bHRpLXRlbmFudCBjb250ZXh0LicsXHJcbiAgICAgICAgW1widW52ZXJpZmllZC1lbWFpbFwiIC8qIFVOVkVSSUZJRURfRU1BSUwgKi9dOiAnVGhlIG9wZXJhdGlvbiByZXF1aXJlcyBhIHZlcmlmaWVkIGVtYWlsLicsXHJcbiAgICAgICAgW1widXNlci1jYW5jZWxsZWRcIiAvKiBVU0VSX0NBTkNFTExFRCAqL106ICdUaGUgdXNlciBkaWQgbm90IGdyYW50IHlvdXIgYXBwbGljYXRpb24gdGhlIHBlcm1pc3Npb25zIGl0IHJlcXVlc3RlZC4nLFxyXG4gICAgICAgIFtcInVzZXItbm90LWZvdW5kXCIgLyogVVNFUl9ERUxFVEVEICovXTogJ1RoZXJlIGlzIG5vIHVzZXIgcmVjb3JkIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyBpZGVudGlmaWVyLiBUaGUgdXNlciBtYXkgJyArXHJcbiAgICAgICAgICAgICdoYXZlIGJlZW4gZGVsZXRlZC4nLFxyXG4gICAgICAgIFtcInVzZXItZGlzYWJsZWRcIiAvKiBVU0VSX0RJU0FCTEVEICovXTogJ1RoZSB1c2VyIGFjY291bnQgaGFzIGJlZW4gZGlzYWJsZWQgYnkgYW4gYWRtaW5pc3RyYXRvci4nLFxyXG4gICAgICAgIFtcInVzZXItbWlzbWF0Y2hcIiAvKiBVU0VSX01JU01BVENIICovXTogJ1RoZSBzdXBwbGllZCBjcmVkZW50aWFscyBkbyBub3QgY29ycmVzcG9uZCB0byB0aGUgcHJldmlvdXNseSBzaWduZWQgaW4gdXNlci4nLFxyXG4gICAgICAgIFtcInVzZXItc2lnbmVkLW91dFwiIC8qIFVTRVJfU0lHTkVEX09VVCAqL106ICcnLFxyXG4gICAgICAgIFtcIndlYWstcGFzc3dvcmRcIiAvKiBXRUFLX1BBU1NXT1JEICovXTogJ1RoZSBwYXNzd29yZCBtdXN0IGJlIDYgY2hhcmFjdGVycyBsb25nIG9yIG1vcmUuJyxcclxuICAgICAgICBbXCJ3ZWItc3RvcmFnZS11bnN1cHBvcnRlZFwiIC8qIFdFQl9TVE9SQUdFX1VOU1VQUE9SVEVEICovXTogJ1RoaXMgYnJvd3NlciBpcyBub3Qgc3VwcG9ydGVkIG9yIDNyZCBwYXJ0eSBjb29raWVzIGFuZCBkYXRhIG1heSBiZSBkaXNhYmxlZC4nLFxyXG4gICAgICAgIFtcImFscmVhZHktaW5pdGlhbGl6ZWRcIiAvKiBBTFJFQURZX0lOSVRJQUxJWkVEICovXTogJ2luaXRpYWxpemVBdXRoKCkgaGFzIGFscmVhZHkgYmVlbiBjYWxsZWQgd2l0aCAnICtcclxuICAgICAgICAgICAgJ2RpZmZlcmVudCBvcHRpb25zLiBUbyBhdm9pZCB0aGlzIGVycm9yLCBjYWxsIGluaXRpYWxpemVBdXRoKCkgd2l0aCB0aGUgJyArXHJcbiAgICAgICAgICAgICdzYW1lIG9wdGlvbnMgYXMgd2hlbiBpdCB3YXMgb3JpZ2luYWxseSBjYWxsZWQsIG9yIGNhbGwgZ2V0QXV0aCgpIHRvIHJldHVybiB0aGUnICtcclxuICAgICAgICAgICAgJyBhbHJlYWR5IGluaXRpYWxpemVkIGluc3RhbmNlLidcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gX3Byb2RFcnJvck1hcCgpIHtcclxuICAgIC8vIFdlIHdpbGwgaW5jbHVkZSB0aGlzIG9uZSBtZXNzYWdlIGluIHRoZSBwcm9kIGVycm9yIG1hcCBzaW5jZSBieSB0aGUgdmVyeVxyXG4gICAgLy8gbmF0dXJlIG9mIHRoaXMgZXJyb3IsIGRldmVsb3BlcnMgd2lsbCBuZXZlciBiZSBhYmxlIHRvIHNlZSB0aGUgbWVzc2FnZVxyXG4gICAgLy8gdXNpbmcgdGhlIGRlYnVnRXJyb3JNYXAgKHdoaWNoIGlzIGluc3RhbGxlZCBkdXJpbmcgYXV0aCBpbml0aWFsaXphdGlvbikuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIFtcImRlcGVuZGVudC1zZGstaW5pdGlhbGl6ZWQtYmVmb3JlLWF1dGhcIiAvKiBERVBFTkRFTlRfU0RLX0lOSVRfQkVGT1JFX0FVVEggKi9dOiAnQW5vdGhlciBGaXJlYmFzZSBTREsgd2FzIGluaXRpYWxpemVkIGFuZCBpcyB0cnlpbmcgdG8gdXNlIEF1dGggYmVmb3JlIEF1dGggaXMgJyArXHJcbiAgICAgICAgICAgICdpbml0aWFsaXplZC4gUGxlYXNlIGJlIHN1cmUgdG8gY2FsbCBgaW5pdGlhbGl6ZUF1dGhgIG9yIGBnZXRBdXRoYCBiZWZvcmUgJyArXHJcbiAgICAgICAgICAgICdzdGFydGluZyBhbnkgb3RoZXIgRmlyZWJhc2UgU0RLLidcclxuICAgIH07XHJcbn1cclxuLyoqXHJcbiAqIEEgdmVyYm9zZSBlcnJvciBtYXAgd2l0aCBkZXRhaWxlZCBkZXNjcmlwdGlvbnMgZm9yIG1vc3QgZXJyb3IgY29kZXMuXHJcbiAqXHJcbiAqIFNlZSBkaXNjdXNzaW9uIGF0IHtAbGluayBBdXRoRXJyb3JNYXB9XHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGRlYnVnRXJyb3JNYXAgPSBfZGVidWdFcnJvck1hcDtcclxuLyoqXHJcbiAqIEEgbWluaW1hbCBlcnJvciBtYXAgd2l0aCBhbGwgdmVyYm9zZSBlcnJvciBtZXNzYWdlcyBzdHJpcHBlZC5cclxuICpcclxuICogU2VlIGRpc2N1c3Npb24gYXQge0BsaW5rIEF1dGhFcnJvck1hcH1cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgcHJvZEVycm9yTWFwID0gX3Byb2RFcnJvck1hcDtcclxuY29uc3QgX0RFRkFVTFRfQVVUSF9FUlJPUl9GQUNUT1JZID0gbmV3IEVycm9yRmFjdG9yeSgnYXV0aCcsICdGaXJlYmFzZScsIF9wcm9kRXJyb3JNYXAoKSk7XHJcbi8qKlxyXG4gKiBBIG1hcCBvZiBwb3RlbnRpYWwgYEF1dGhgIGVycm9yIGNvZGVzLCBmb3IgZWFzaWVyIGNvbXBhcmlzb24gd2l0aCBlcnJvcnNcclxuICogdGhyb3duIGJ5IHRoZSBTREsuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIE5vdGUgdGhhdCB5b3UgY2FuJ3QgdHJlZS1zaGFrZSBpbmRpdmlkdWFsIGtleXNcclxuICogaW4gdGhlIG1hcCwgc28gYnkgdXNpbmcgdGhlIG1hcCB5b3UgbWlnaHQgc3Vic3RhbnRpYWxseSBpbmNyZWFzZSB5b3VyXHJcbiAqIGJ1bmRsZSBzaXplLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBBVVRIX0VSUk9SX0NPREVTX01BUF9ET19OT1RfVVNFX0lOVEVSTkFMTFkgPSB7XHJcbiAgICBBRE1JTl9PTkxZX09QRVJBVElPTjogJ2F1dGgvYWRtaW4tcmVzdHJpY3RlZC1vcGVyYXRpb24nLFxyXG4gICAgQVJHVU1FTlRfRVJST1I6ICdhdXRoL2FyZ3VtZW50LWVycm9yJyxcclxuICAgIEFQUF9OT1RfQVVUSE9SSVpFRDogJ2F1dGgvYXBwLW5vdC1hdXRob3JpemVkJyxcclxuICAgIEFQUF9OT1RfSU5TVEFMTEVEOiAnYXV0aC9hcHAtbm90LWluc3RhbGxlZCcsXHJcbiAgICBDQVBUQ0hBX0NIRUNLX0ZBSUxFRDogJ2F1dGgvY2FwdGNoYS1jaGVjay1mYWlsZWQnLFxyXG4gICAgQ09ERV9FWFBJUkVEOiAnYXV0aC9jb2RlLWV4cGlyZWQnLFxyXG4gICAgQ09SRE9WQV9OT1RfUkVBRFk6ICdhdXRoL2NvcmRvdmEtbm90LXJlYWR5JyxcclxuICAgIENPUlNfVU5TVVBQT1JURUQ6ICdhdXRoL2NvcnMtdW5zdXBwb3J0ZWQnLFxyXG4gICAgQ1JFREVOVElBTF9BTFJFQURZX0lOX1VTRTogJ2F1dGgvY3JlZGVudGlhbC1hbHJlYWR5LWluLXVzZScsXHJcbiAgICBDUkVERU5USUFMX01JU01BVENIOiAnYXV0aC9jdXN0b20tdG9rZW4tbWlzbWF0Y2gnLFxyXG4gICAgQ1JFREVOVElBTF9UT09fT0xEX0xPR0lOX0FHQUlOOiAnYXV0aC9yZXF1aXJlcy1yZWNlbnQtbG9naW4nLFxyXG4gICAgREVQRU5ERU5UX1NES19JTklUX0JFRk9SRV9BVVRIOiAnYXV0aC9kZXBlbmRlbnQtc2RrLWluaXRpYWxpemVkLWJlZm9yZS1hdXRoJyxcclxuICAgIERZTkFNSUNfTElOS19OT1RfQUNUSVZBVEVEOiAnYXV0aC9keW5hbWljLWxpbmstbm90LWFjdGl2YXRlZCcsXHJcbiAgICBFTUFJTF9DSEFOR0VfTkVFRFNfVkVSSUZJQ0FUSU9OOiAnYXV0aC9lbWFpbC1jaGFuZ2UtbmVlZHMtdmVyaWZpY2F0aW9uJyxcclxuICAgIEVNQUlMX0VYSVNUUzogJ2F1dGgvZW1haWwtYWxyZWFkeS1pbi11c2UnLFxyXG4gICAgRU1VTEFUT1JfQ09ORklHX0ZBSUxFRDogJ2F1dGgvZW11bGF0b3ItY29uZmlnLWZhaWxlZCcsXHJcbiAgICBFWFBJUkVEX09PQl9DT0RFOiAnYXV0aC9leHBpcmVkLWFjdGlvbi1jb2RlJyxcclxuICAgIEVYUElSRURfUE9QVVBfUkVRVUVTVDogJ2F1dGgvY2FuY2VsbGVkLXBvcHVwLXJlcXVlc3QnLFxyXG4gICAgSU5URVJOQUxfRVJST1I6ICdhdXRoL2ludGVybmFsLWVycm9yJyxcclxuICAgIElOVkFMSURfQVBJX0tFWTogJ2F1dGgvaW52YWxpZC1hcGkta2V5JyxcclxuICAgIElOVkFMSURfQVBQX0NSRURFTlRJQUw6ICdhdXRoL2ludmFsaWQtYXBwLWNyZWRlbnRpYWwnLFxyXG4gICAgSU5WQUxJRF9BUFBfSUQ6ICdhdXRoL2ludmFsaWQtYXBwLWlkJyxcclxuICAgIElOVkFMSURfQVVUSDogJ2F1dGgvaW52YWxpZC11c2VyLXRva2VuJyxcclxuICAgIElOVkFMSURfQVVUSF9FVkVOVDogJ2F1dGgvaW52YWxpZC1hdXRoLWV2ZW50JyxcclxuICAgIElOVkFMSURfQ0VSVF9IQVNIOiAnYXV0aC9pbnZhbGlkLWNlcnQtaGFzaCcsXHJcbiAgICBJTlZBTElEX0NPREU6ICdhdXRoL2ludmFsaWQtdmVyaWZpY2F0aW9uLWNvZGUnLFxyXG4gICAgSU5WQUxJRF9DT05USU5VRV9VUkk6ICdhdXRoL2ludmFsaWQtY29udGludWUtdXJpJyxcclxuICAgIElOVkFMSURfQ09SRE9WQV9DT05GSUdVUkFUSU9OOiAnYXV0aC9pbnZhbGlkLWNvcmRvdmEtY29uZmlndXJhdGlvbicsXHJcbiAgICBJTlZBTElEX0NVU1RPTV9UT0tFTjogJ2F1dGgvaW52YWxpZC1jdXN0b20tdG9rZW4nLFxyXG4gICAgSU5WQUxJRF9EWU5BTUlDX0xJTktfRE9NQUlOOiAnYXV0aC9pbnZhbGlkLWR5bmFtaWMtbGluay1kb21haW4nLFxyXG4gICAgSU5WQUxJRF9FTUFJTDogJ2F1dGgvaW52YWxpZC1lbWFpbCcsXHJcbiAgICBJTlZBTElEX0VNVUxBVE9SX1NDSEVNRTogJ2F1dGgvaW52YWxpZC1lbXVsYXRvci1zY2hlbWUnLFxyXG4gICAgSU5WQUxJRF9JRFBfUkVTUE9OU0U6ICdhdXRoL2ludmFsaWQtY3JlZGVudGlhbCcsXHJcbiAgICBJTlZBTElEX01FU1NBR0VfUEFZTE9BRDogJ2F1dGgvaW52YWxpZC1tZXNzYWdlLXBheWxvYWQnLFxyXG4gICAgSU5WQUxJRF9NRkFfU0VTU0lPTjogJ2F1dGgvaW52YWxpZC1tdWx0aS1mYWN0b3Itc2Vzc2lvbicsXHJcbiAgICBJTlZBTElEX09BVVRIX0NMSUVOVF9JRDogJ2F1dGgvaW52YWxpZC1vYXV0aC1jbGllbnQtaWQnLFxyXG4gICAgSU5WQUxJRF9PQVVUSF9QUk9WSURFUjogJ2F1dGgvaW52YWxpZC1vYXV0aC1wcm92aWRlcicsXHJcbiAgICBJTlZBTElEX09PQl9DT0RFOiAnYXV0aC9pbnZhbGlkLWFjdGlvbi1jb2RlJyxcclxuICAgIElOVkFMSURfT1JJR0lOOiAnYXV0aC91bmF1dGhvcml6ZWQtZG9tYWluJyxcclxuICAgIElOVkFMSURfUEFTU1dPUkQ6ICdhdXRoL3dyb25nLXBhc3N3b3JkJyxcclxuICAgIElOVkFMSURfUEVSU0lTVEVOQ0U6ICdhdXRoL2ludmFsaWQtcGVyc2lzdGVuY2UtdHlwZScsXHJcbiAgICBJTlZBTElEX1BIT05FX05VTUJFUjogJ2F1dGgvaW52YWxpZC1waG9uZS1udW1iZXInLFxyXG4gICAgSU5WQUxJRF9QUk9WSURFUl9JRDogJ2F1dGgvaW52YWxpZC1wcm92aWRlci1pZCcsXHJcbiAgICBJTlZBTElEX1JFQ0lQSUVOVF9FTUFJTDogJ2F1dGgvaW52YWxpZC1yZWNpcGllbnQtZW1haWwnLFxyXG4gICAgSU5WQUxJRF9TRU5ERVI6ICdhdXRoL2ludmFsaWQtc2VuZGVyJyxcclxuICAgIElOVkFMSURfU0VTU0lPTl9JTkZPOiAnYXV0aC9pbnZhbGlkLXZlcmlmaWNhdGlvbi1pZCcsXHJcbiAgICBJTlZBTElEX1RFTkFOVF9JRDogJ2F1dGgvaW52YWxpZC10ZW5hbnQtaWQnLFxyXG4gICAgTUZBX0lORk9fTk9UX0ZPVU5EOiAnYXV0aC9tdWx0aS1mYWN0b3ItaW5mby1ub3QtZm91bmQnLFxyXG4gICAgTUZBX1JFUVVJUkVEOiAnYXV0aC9tdWx0aS1mYWN0b3ItYXV0aC1yZXF1aXJlZCcsXHJcbiAgICBNSVNTSU5HX0FORFJPSURfUEFDS0FHRV9OQU1FOiAnYXV0aC9taXNzaW5nLWFuZHJvaWQtcGtnLW5hbWUnLFxyXG4gICAgTUlTU0lOR19BUFBfQ1JFREVOVElBTDogJ2F1dGgvbWlzc2luZy1hcHAtY3JlZGVudGlhbCcsXHJcbiAgICBNSVNTSU5HX0FVVEhfRE9NQUlOOiAnYXV0aC9hdXRoLWRvbWFpbi1jb25maWctcmVxdWlyZWQnLFxyXG4gICAgTUlTU0lOR19DT0RFOiAnYXV0aC9taXNzaW5nLXZlcmlmaWNhdGlvbi1jb2RlJyxcclxuICAgIE1JU1NJTkdfQ09OVElOVUVfVVJJOiAnYXV0aC9taXNzaW5nLWNvbnRpbnVlLXVyaScsXHJcbiAgICBNSVNTSU5HX0lGUkFNRV9TVEFSVDogJ2F1dGgvbWlzc2luZy1pZnJhbWUtc3RhcnQnLFxyXG4gICAgTUlTU0lOR19JT1NfQlVORExFX0lEOiAnYXV0aC9taXNzaW5nLWlvcy1idW5kbGUtaWQnLFxyXG4gICAgTUlTU0lOR19PUl9JTlZBTElEX05PTkNFOiAnYXV0aC9taXNzaW5nLW9yLWludmFsaWQtbm9uY2UnLFxyXG4gICAgTUlTU0lOR19NRkFfSU5GTzogJ2F1dGgvbWlzc2luZy1tdWx0aS1mYWN0b3ItaW5mbycsXHJcbiAgICBNSVNTSU5HX01GQV9TRVNTSU9OOiAnYXV0aC9taXNzaW5nLW11bHRpLWZhY3Rvci1zZXNzaW9uJyxcclxuICAgIE1JU1NJTkdfUEhPTkVfTlVNQkVSOiAnYXV0aC9taXNzaW5nLXBob25lLW51bWJlcicsXHJcbiAgICBNSVNTSU5HX1NFU1NJT05fSU5GTzogJ2F1dGgvbWlzc2luZy12ZXJpZmljYXRpb24taWQnLFxyXG4gICAgTU9EVUxFX0RFU1RST1lFRDogJ2F1dGgvYXBwLWRlbGV0ZWQnLFxyXG4gICAgTkVFRF9DT05GSVJNQVRJT046ICdhdXRoL2FjY291bnQtZXhpc3RzLXdpdGgtZGlmZmVyZW50LWNyZWRlbnRpYWwnLFxyXG4gICAgTkVUV09SS19SRVFVRVNUX0ZBSUxFRDogJ2F1dGgvbmV0d29yay1yZXF1ZXN0LWZhaWxlZCcsXHJcbiAgICBOVUxMX1VTRVI6ICdhdXRoL251bGwtdXNlcicsXHJcbiAgICBOT19BVVRIX0VWRU5UOiAnYXV0aC9uby1hdXRoLWV2ZW50JyxcclxuICAgIE5PX1NVQ0hfUFJPVklERVI6ICdhdXRoL25vLXN1Y2gtcHJvdmlkZXInLFxyXG4gICAgT1BFUkFUSU9OX05PVF9BTExPV0VEOiAnYXV0aC9vcGVyYXRpb24tbm90LWFsbG93ZWQnLFxyXG4gICAgT1BFUkFUSU9OX05PVF9TVVBQT1JURUQ6ICdhdXRoL29wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnQnLFxyXG4gICAgUE9QVVBfQkxPQ0tFRDogJ2F1dGgvcG9wdXAtYmxvY2tlZCcsXHJcbiAgICBQT1BVUF9DTE9TRURfQllfVVNFUjogJ2F1dGgvcG9wdXAtY2xvc2VkLWJ5LXVzZXInLFxyXG4gICAgUFJPVklERVJfQUxSRUFEWV9MSU5LRUQ6ICdhdXRoL3Byb3ZpZGVyLWFscmVhZHktbGlua2VkJyxcclxuICAgIFFVT1RBX0VYQ0VFREVEOiAnYXV0aC9xdW90YS1leGNlZWRlZCcsXHJcbiAgICBSRURJUkVDVF9DQU5DRUxMRURfQllfVVNFUjogJ2F1dGgvcmVkaXJlY3QtY2FuY2VsbGVkLWJ5LXVzZXInLFxyXG4gICAgUkVESVJFQ1RfT1BFUkFUSU9OX1BFTkRJTkc6ICdhdXRoL3JlZGlyZWN0LW9wZXJhdGlvbi1wZW5kaW5nJyxcclxuICAgIFJFSkVDVEVEX0NSRURFTlRJQUw6ICdhdXRoL3JlamVjdGVkLWNyZWRlbnRpYWwnLFxyXG4gICAgU0VDT05EX0ZBQ1RPUl9BTFJFQURZX0VOUk9MTEVEOiAnYXV0aC9zZWNvbmQtZmFjdG9yLWFscmVhZHktaW4tdXNlJyxcclxuICAgIFNFQ09ORF9GQUNUT1JfTElNSVRfRVhDRUVERUQ6ICdhdXRoL21heGltdW0tc2Vjb25kLWZhY3Rvci1jb3VudC1leGNlZWRlZCcsXHJcbiAgICBURU5BTlRfSURfTUlTTUFUQ0g6ICdhdXRoL3RlbmFudC1pZC1taXNtYXRjaCcsXHJcbiAgICBUSU1FT1VUOiAnYXV0aC90aW1lb3V0JyxcclxuICAgIFRPS0VOX0VYUElSRUQ6ICdhdXRoL3VzZXItdG9rZW4tZXhwaXJlZCcsXHJcbiAgICBUT09fTUFOWV9BVFRFTVBUU19UUllfTEFURVI6ICdhdXRoL3Rvby1tYW55LXJlcXVlc3RzJyxcclxuICAgIFVOQVVUSE9SSVpFRF9ET01BSU46ICdhdXRoL3VuYXV0aG9yaXplZC1jb250aW51ZS11cmknLFxyXG4gICAgVU5TVVBQT1JURURfRklSU1RfRkFDVE9SOiAnYXV0aC91bnN1cHBvcnRlZC1maXJzdC1mYWN0b3InLFxyXG4gICAgVU5TVVBQT1JURURfUEVSU0lTVEVOQ0U6ICdhdXRoL3Vuc3VwcG9ydGVkLXBlcnNpc3RlbmNlLXR5cGUnLFxyXG4gICAgVU5TVVBQT1JURURfVEVOQU5UX09QRVJBVElPTjogJ2F1dGgvdW5zdXBwb3J0ZWQtdGVuYW50LW9wZXJhdGlvbicsXHJcbiAgICBVTlZFUklGSUVEX0VNQUlMOiAnYXV0aC91bnZlcmlmaWVkLWVtYWlsJyxcclxuICAgIFVTRVJfQ0FOQ0VMTEVEOiAnYXV0aC91c2VyLWNhbmNlbGxlZCcsXHJcbiAgICBVU0VSX0RFTEVURUQ6ICdhdXRoL3VzZXItbm90LWZvdW5kJyxcclxuICAgIFVTRVJfRElTQUJMRUQ6ICdhdXRoL3VzZXItZGlzYWJsZWQnLFxyXG4gICAgVVNFUl9NSVNNQVRDSDogJ2F1dGgvdXNlci1taXNtYXRjaCcsXHJcbiAgICBVU0VSX1NJR05FRF9PVVQ6ICdhdXRoL3VzZXItc2lnbmVkLW91dCcsXHJcbiAgICBXRUFLX1BBU1NXT1JEOiAnYXV0aC93ZWFrLXBhc3N3b3JkJyxcclxuICAgIFdFQl9TVE9SQUdFX1VOU1VQUE9SVEVEOiAnYXV0aC93ZWItc3RvcmFnZS11bnN1cHBvcnRlZCcsXHJcbiAgICBBTFJFQURZX0lOSVRJQUxJWkVEOiAnYXV0aC9hbHJlYWR5LWluaXRpYWxpemVkJ1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBsb2dDbGllbnQgPSBuZXcgTG9nZ2VyKCdAZmlyZWJhc2UvYXV0aCcpO1xyXG5mdW5jdGlvbiBfbG9nRXJyb3IobXNnLCAuLi5hcmdzKSB7XHJcbiAgICBpZiAobG9nQ2xpZW50LmxvZ0xldmVsIDw9IExvZ0xldmVsLkVSUk9SKSB7XHJcbiAgICAgICAgbG9nQ2xpZW50LmVycm9yKGBBdXRoICgke1NES19WRVJTSU9OfSk6ICR7bXNnfWAsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9mYWlsKGF1dGhPckNvZGUsIC4uLnJlc3QpIHtcclxuICAgIHRocm93IGNyZWF0ZUVycm9ySW50ZXJuYWwoYXV0aE9yQ29kZSwgLi4ucmVzdCk7XHJcbn1cclxuZnVuY3Rpb24gX2NyZWF0ZUVycm9yKGF1dGhPckNvZGUsIC4uLnJlc3QpIHtcclxuICAgIHJldHVybiBjcmVhdGVFcnJvckludGVybmFsKGF1dGhPckNvZGUsIC4uLnJlc3QpO1xyXG59XHJcbmZ1bmN0aW9uIF9lcnJvcldpdGhDdXN0b21NZXNzYWdlKGF1dGgsIGNvZGUsIG1lc3NhZ2UpIHtcclxuICAgIGNvbnN0IGVycm9yTWFwID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBwcm9kRXJyb3JNYXAoKSksIHsgW2NvZGVdOiBtZXNzYWdlIH0pO1xyXG4gICAgY29uc3QgZmFjdG9yeSA9IG5ldyBFcnJvckZhY3RvcnkoJ2F1dGgnLCAnRmlyZWJhc2UnLCBlcnJvck1hcCk7XHJcbiAgICByZXR1cm4gZmFjdG9yeS5jcmVhdGUoY29kZSwge1xyXG4gICAgICAgIGFwcE5hbWU6IGF1dGgubmFtZSxcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIF9hc3NlcnRJbnN0YW5jZU9mKGF1dGgsIG9iamVjdCwgaW5zdGFuY2UpIHtcclxuICAgIGNvbnN0IGNvbnN0cnVjdG9ySW5zdGFuY2UgPSBpbnN0YW5jZTtcclxuICAgIGlmICghKG9iamVjdCBpbnN0YW5jZW9mIGNvbnN0cnVjdG9ySW5zdGFuY2UpKSB7XHJcbiAgICAgICAgaWYgKGNvbnN0cnVjdG9ySW5zdGFuY2UubmFtZSAhPT0gb2JqZWN0LmNvbnN0cnVjdG9yLm5hbWUpIHtcclxuICAgICAgICAgICAgX2ZhaWwoYXV0aCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgX2Vycm9yV2l0aEN1c3RvbU1lc3NhZ2UoYXV0aCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovLCBgVHlwZSBvZiAke29iamVjdC5jb25zdHJ1Y3Rvci5uYW1lfSBkb2VzIG5vdCBtYXRjaCBleHBlY3RlZCBpbnN0YW5jZS5gICtcclxuICAgICAgICAgICAgYERpZCB5b3UgcGFzcyBhIHJlZmVyZW5jZSBmcm9tIGEgZGlmZmVyZW50IEF1dGggU0RLP2ApO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZUVycm9ySW50ZXJuYWwoYXV0aE9yQ29kZSwgLi4ucmVzdCkge1xyXG4gICAgaWYgKHR5cGVvZiBhdXRoT3JDb2RlICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIGNvbnN0IGNvZGUgPSByZXN0WzBdO1xyXG4gICAgICAgIGNvbnN0IGZ1bGxQYXJhbXMgPSBbLi4ucmVzdC5zbGljZSgxKV07XHJcbiAgICAgICAgaWYgKGZ1bGxQYXJhbXNbMF0pIHtcclxuICAgICAgICAgICAgZnVsbFBhcmFtc1swXS5hcHBOYW1lID0gYXV0aE9yQ29kZS5uYW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXV0aE9yQ29kZS5fZXJyb3JGYWN0b3J5LmNyZWF0ZShjb2RlLCAuLi5mdWxsUGFyYW1zKTtcclxuICAgIH1cclxuICAgIHJldHVybiBfREVGQVVMVF9BVVRIX0VSUk9SX0ZBQ1RPUlkuY3JlYXRlKGF1dGhPckNvZGUsIC4uLnJlc3QpO1xyXG59XHJcbmZ1bmN0aW9uIF9hc3NlcnQoYXNzZXJ0aW9uLCBhdXRoT3JDb2RlLCAuLi5yZXN0KSB7XHJcbiAgICBpZiAoIWFzc2VydGlvbikge1xyXG4gICAgICAgIHRocm93IGNyZWF0ZUVycm9ySW50ZXJuYWwoYXV0aE9yQ29kZSwgLi4ucmVzdCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFVuY29uZGl0aW9uYWxseSBmYWlscywgdGhyb3dpbmcgYW4gaW50ZXJuYWwgZXJyb3Igd2l0aCB0aGUgZ2l2ZW4gbWVzc2FnZS5cclxuICpcclxuICogQHBhcmFtIGZhaWx1cmUgdHlwZSBvZiBmYWlsdXJlIGVuY291bnRlcmVkXHJcbiAqIEB0aHJvd3MgRXJyb3JcclxuICovXHJcbmZ1bmN0aW9uIGRlYnVnRmFpbChmYWlsdXJlKSB7XHJcbiAgICAvLyBMb2cgdGhlIGZhaWx1cmUgaW4gYWRkaXRpb24gdG8gdGhyb3cgYW4gZXhjZXB0aW9uLCBqdXN0IGluIGNhc2UgdGhlXHJcbiAgICAvLyBleGNlcHRpb24gaXMgc3dhbGxvd2VkLlxyXG4gICAgY29uc3QgbWVzc2FnZSA9IGBJTlRFUk5BTCBBU1NFUlRJT04gRkFJTEVEOiBgICsgZmFpbHVyZTtcclxuICAgIF9sb2dFcnJvcihtZXNzYWdlKTtcclxuICAgIC8vIE5PVEU6IFdlIGRvbid0IHVzZSBGaXJlYmFzZUVycm9yIGhlcmUgYmVjYXVzZSB0aGVzZSBhcmUgaW50ZXJuYWwgZmFpbHVyZXNcclxuICAgIC8vIHRoYXQgY2Fubm90IGJlIGhhbmRsZWQgYnkgdGhlIHVzZXIuIChBbHNvIGl0IHdvdWxkIGNyZWF0ZSBhIGNpcmN1bGFyXHJcbiAgICAvLyBkZXBlbmRlbmN5IGJldHdlZW4gdGhlIGVycm9yIGFuZCBhc3NlcnQgbW9kdWxlcyB3aGljaCBkb2Vzbid0IHdvcmsuKVxyXG4gICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xyXG59XHJcbi8qKlxyXG4gKiBGYWlscyBpZiB0aGUgZ2l2ZW4gYXNzZXJ0aW9uIGNvbmRpdGlvbiBpcyBmYWxzZSwgdGhyb3dpbmcgYW4gRXJyb3Igd2l0aCB0aGVcclxuICogZ2l2ZW4gbWVzc2FnZSBpZiBpdCBkaWQuXHJcbiAqXHJcbiAqIEBwYXJhbSBhc3NlcnRpb25cclxuICogQHBhcmFtIG1lc3NhZ2VcclxuICovXHJcbmZ1bmN0aW9uIGRlYnVnQXNzZXJ0KGFzc2VydGlvbiwgbWVzc2FnZSkge1xyXG4gICAgaWYgKCFhc3NlcnRpb24pIHtcclxuICAgICAgICBkZWJ1Z0ZhaWwobWVzc2FnZSk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgaW5zdGFuY2VDYWNoZSA9IG5ldyBNYXAoKTtcclxuZnVuY3Rpb24gX2dldEluc3RhbmNlKGNscykge1xyXG4gICAgZGVidWdBc3NlcnQoY2xzIGluc3RhbmNlb2YgRnVuY3Rpb24sICdFeHBlY3RlZCBhIGNsYXNzIGRlZmluaXRpb24nKTtcclxuICAgIGxldCBpbnN0YW5jZSA9IGluc3RhbmNlQ2FjaGUuZ2V0KGNscyk7XHJcbiAgICBpZiAoaW5zdGFuY2UpIHtcclxuICAgICAgICBkZWJ1Z0Fzc2VydChpbnN0YW5jZSBpbnN0YW5jZW9mIGNscywgJ0luc3RhbmNlIHN0b3JlZCBpbiBjYWNoZSBtaXNtYXRjaGVkIHdpdGggY2xhc3MnKTtcclxuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XHJcbiAgICB9XHJcbiAgICBpbnN0YW5jZSA9IG5ldyBjbHMoKTtcclxuICAgIGluc3RhbmNlQ2FjaGUuc2V0KGNscywgaW5zdGFuY2UpO1xyXG4gICAgcmV0dXJuIGluc3RhbmNlO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplcyBhbiB7QGxpbmsgQXV0aH0gaW5zdGFuY2Ugd2l0aCBmaW5lLWdyYWluZWQgY29udHJvbCBvdmVyXHJcbiAqIHtAbGluayBEZXBlbmRlbmNpZXN9LlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKlxyXG4gKiBUaGlzIGZ1bmN0aW9uIGFsbG93cyBtb3JlIGNvbnRyb2wgb3ZlciB0aGUge0BsaW5rIEF1dGh9IGluc3RhbmNlIHRoYW5cclxuICoge0BsaW5rIGdldEF1dGh9LiBgZ2V0QXV0aGAgdXNlcyBwbGF0Zm9ybS1zcGVjaWZpYyBkZWZhdWx0cyB0byBzdXBwbHlcclxuICogdGhlIHtAbGluayBEZXBlbmRlbmNpZXN9LiBJbiBnZW5lcmFsLCBgZ2V0QXV0aGAgaXMgdGhlIGVhc2llc3Qgd2F5IHRvXHJcbiAqIGluaXRpYWxpemUgQXV0aCBhbmQgd29ya3MgZm9yIG1vc3QgdXNlIGNhc2VzLiBVc2UgYGluaXRpYWxpemVBdXRoYCBpZiB5b3VcclxuICogbmVlZCBjb250cm9sIG92ZXIgd2hpY2ggcGVyc2lzdGVuY2UgbGF5ZXIgaXMgdXNlZCwgb3IgdG8gbWluaW1pemUgYnVuZGxlXHJcbiAqIHNpemUgaWYgeW91J3JlIG5vdCB1c2luZyBlaXRoZXIgYHNpZ25JbldpdGhQb3B1cGAgb3IgYHNpZ25JbldpdGhSZWRpcmVjdGAuXHJcbiAqXHJcbiAqIEZvciBleGFtcGxlLCBpZiB5b3VyIGFwcCBvbmx5IHVzZXMgYW5vbnltb3VzIGFjY291bnRzIGFuZCB5b3Ugb25seSB3YW50XHJcbiAqIGFjY291bnRzIHNhdmVkIGZvciB0aGUgY3VycmVudCBzZXNzaW9uLCBpbml0aWFsaXplIGBBdXRoYCB3aXRoOlxyXG4gKlxyXG4gKiBgYGBqc1xyXG4gKiBjb25zdCBhdXRoID0gaW5pdGlhbGl6ZUF1dGgoYXBwLCB7XHJcbiAqICAgcGVyc2lzdGVuY2U6IGJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UsXHJcbiAqICAgcG9wdXBSZWRpcmVjdFJlc29sdmVyOiB1bmRlZmluZWQsXHJcbiAqIH0pO1xyXG4gKiBgYGBcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gaW5pdGlhbGl6ZUF1dGgoYXBwLCBkZXBzKSB7XHJcbiAgICBjb25zdCBwcm92aWRlciA9IF9nZXRQcm92aWRlcihhcHAsICdhdXRoJyk7XHJcbiAgICBpZiAocHJvdmlkZXIuaXNJbml0aWFsaXplZCgpKSB7XHJcbiAgICAgICAgY29uc3QgYXV0aCA9IHByb3ZpZGVyLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIGNvbnN0IGluaXRpYWxPcHRpb25zID0gcHJvdmlkZXIuZ2V0T3B0aW9ucygpO1xyXG4gICAgICAgIGlmIChkZWVwRXF1YWwoaW5pdGlhbE9wdGlvbnMsIGRlcHMgIT09IG51bGwgJiYgZGVwcyAhPT0gdm9pZCAwID8gZGVwcyA6IHt9KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXV0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIF9mYWlsKGF1dGgsIFwiYWxyZWFkeS1pbml0aWFsaXplZFwiIC8qIEFMUkVBRFlfSU5JVElBTElaRUQgKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGF1dGggPSBwcm92aWRlci5pbml0aWFsaXplKHsgb3B0aW9uczogZGVwcyB9KTtcclxuICAgIHJldHVybiBhdXRoO1xyXG59XHJcbmZ1bmN0aW9uIF9pbml0aWFsaXplQXV0aEluc3RhbmNlKGF1dGgsIGRlcHMpIHtcclxuICAgIGNvbnN0IHBlcnNpc3RlbmNlID0gKGRlcHMgPT09IG51bGwgfHwgZGVwcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGVwcy5wZXJzaXN0ZW5jZSkgfHwgW107XHJcbiAgICBjb25zdCBoaWVyYXJjaHkgPSAoQXJyYXkuaXNBcnJheShwZXJzaXN0ZW5jZSkgPyBwZXJzaXN0ZW5jZSA6IFtwZXJzaXN0ZW5jZV0pLm1hcChfZ2V0SW5zdGFuY2UpO1xyXG4gICAgaWYgKGRlcHMgPT09IG51bGwgfHwgZGVwcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGVwcy5lcnJvck1hcCkge1xyXG4gICAgICAgIGF1dGguX3VwZGF0ZUVycm9yTWFwKGRlcHMuZXJyb3JNYXApO1xyXG4gICAgfVxyXG4gICAgLy8gVGhpcyBwcm9taXNlIGlzIGludGVuZGVkIHRvIGZsb2F0OyBhdXRoIGluaXRpYWxpemF0aW9uIGhhcHBlbnMgaW4gdGhlXHJcbiAgICAvLyBiYWNrZ3JvdW5kLCBtZWFud2hpbGUgdGhlIGF1dGggb2JqZWN0IG1heSBiZSB1c2VkIGJ5IHRoZSBhcHAuXHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICBhdXRoLl9pbml0aWFsaXplV2l0aFBlcnNpc3RlbmNlKGhpZXJhcmNoeSwgZGVwcyA9PT0gbnVsbCB8fCBkZXBzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkZXBzLnBvcHVwUmVkaXJlY3RSZXNvbHZlcik7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX2dldEN1cnJlbnRVcmwoKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICByZXR1cm4gKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyAmJiAoKF9hID0gc2VsZi5sb2NhdGlvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmhyZWYpKSB8fCAnJztcclxufVxyXG5mdW5jdGlvbiBfaXNIdHRwT3JIdHRwcygpIHtcclxuICAgIHJldHVybiBfZ2V0Q3VycmVudFNjaGVtZSgpID09PSAnaHR0cDonIHx8IF9nZXRDdXJyZW50U2NoZW1lKCkgPT09ICdodHRwczonO1xyXG59XHJcbmZ1bmN0aW9uIF9nZXRDdXJyZW50U2NoZW1lKCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgcmV0dXJuICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgKChfYSA9IHNlbGYubG9jYXRpb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wcm90b2NvbCkpIHx8IG51bGw7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIERldGVybWluZSB3aGV0aGVyIHRoZSBicm93c2VyIGlzIHdvcmtpbmcgb25saW5lXHJcbiAqL1xyXG5mdW5jdGlvbiBfaXNPbmxpbmUoKSB7XHJcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICBuYXZpZ2F0b3IgJiZcclxuICAgICAgICAnb25MaW5lJyBpbiBuYXZpZ2F0b3IgJiZcclxuICAgICAgICB0eXBlb2YgbmF2aWdhdG9yLm9uTGluZSA9PT0gJ2Jvb2xlYW4nICYmXHJcbiAgICAgICAgLy8gQXBwbHkgb25seSBmb3IgdHJhZGl0aW9uYWwgd2ViIGFwcHMgYW5kIENocm9tZSBleHRlbnNpb25zLlxyXG4gICAgICAgIC8vIFRoaXMgaXMgZXNwZWNpYWxseSB0cnVlIGZvciBDb3Jkb3ZhIGFwcHMgd2hpY2ggaGF2ZSB1bnJlbGlhYmxlXHJcbiAgICAgICAgLy8gbmF2aWdhdG9yLm9uTGluZSBiZWhhdmlvciB1bmxlc3MgY29yZG92YS1wbHVnaW4tbmV0d29yay1pbmZvcm1hdGlvbiBpc1xyXG4gICAgICAgIC8vIGluc3RhbGxlZCB3aGljaCBvdmVyd3JpdGVzIHRoZSBuYXRpdmUgbmF2aWdhdG9yLm9uTGluZSB2YWx1ZSBhbmRcclxuICAgICAgICAvLyBkZWZpbmVzIG5hdmlnYXRvci5jb25uZWN0aW9uLlxyXG4gICAgICAgIChfaXNIdHRwT3JIdHRwcygpIHx8IGlzQnJvd3NlckV4dGVuc2lvbigpIHx8ICdjb25uZWN0aW9uJyBpbiBuYXZpZ2F0b3IpKSB7XHJcbiAgICAgICAgcmV0dXJuIG5hdmlnYXRvci5vbkxpbmU7XHJcbiAgICB9XHJcbiAgICAvLyBJZiB3ZSBjYW4ndCBkZXRlcm1pbmUgdGhlIHN0YXRlLCBhc3N1bWUgaXQgaXMgb25saW5lLlxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gX2dldFVzZXJMYW5ndWFnZSgpIHtcclxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbmF2aWdhdG9yTGFuZ3VhZ2UgPSBuYXZpZ2F0b3I7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgLy8gTW9zdCByZWxpYWJsZSwgYnV0IG9ubHkgc3VwcG9ydGVkIGluIENocm9tZS9GaXJlZm94LlxyXG4gICAgKG5hdmlnYXRvckxhbmd1YWdlLmxhbmd1YWdlcyAmJiBuYXZpZ2F0b3JMYW5ndWFnZS5sYW5ndWFnZXNbMF0pIHx8XHJcbiAgICAgICAgLy8gU3VwcG9ydGVkIGluIG1vc3QgYnJvd3NlcnMsIGJ1dCByZXR1cm5zIHRoZSBsYW5ndWFnZSBvZiB0aGUgYnJvd3NlclxyXG4gICAgICAgIC8vIFVJLCBub3QgdGhlIGxhbmd1YWdlIHNldCBpbiBicm93c2VyIHNldHRpbmdzLlxyXG4gICAgICAgIG5hdmlnYXRvckxhbmd1YWdlLmxhbmd1YWdlIHx8XHJcbiAgICAgICAgLy8gQ291bGRuJ3QgZGV0ZXJtaW5lIGxhbmd1YWdlLlxyXG4gICAgICAgIG51bGwpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBIHN0cnVjdHVyZSB0byBoZWxwIHBpY2sgYmV0d2VlbiBhIHJhbmdlIG9mIGxvbmcgYW5kIHNob3J0IGRlbGF5IGR1cmF0aW9uc1xyXG4gKiBkZXBlbmRpbmcgb24gdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuIEluIGdlbmVyYWwsIHRoZSBsb25nIGRlbGF5IGlzIHVzZWQgZm9yXHJcbiAqIG1vYmlsZSBlbnZpcm9ubWVudHMgd2hlcmVhcyBzaG9ydCBkZWxheXMgYXJlIHVzZWQgZm9yIGRlc2t0b3AgZW52aXJvbm1lbnRzLlxyXG4gKi9cclxuY2xhc3MgRGVsYXkge1xyXG4gICAgY29uc3RydWN0b3Ioc2hvcnREZWxheSwgbG9uZ0RlbGF5KSB7XHJcbiAgICAgICAgdGhpcy5zaG9ydERlbGF5ID0gc2hvcnREZWxheTtcclxuICAgICAgICB0aGlzLmxvbmdEZWxheSA9IGxvbmdEZWxheTtcclxuICAgICAgICAvLyBJbnRlcm5hbCBlcnJvciB3aGVuIGltcHJvcGVybHkgaW5pdGlhbGl6ZWQuXHJcbiAgICAgICAgZGVidWdBc3NlcnQobG9uZ0RlbGF5ID4gc2hvcnREZWxheSwgJ1Nob3J0IGRlbGF5IHNob3VsZCBiZSBsZXNzIHRoYW4gbG9uZyBkZWxheSEnKTtcclxuICAgICAgICB0aGlzLmlzTW9iaWxlID0gaXNNb2JpbGVDb3Jkb3ZhKCkgfHwgaXNSZWFjdE5hdGl2ZSgpO1xyXG4gICAgfVxyXG4gICAgZ2V0KCkge1xyXG4gICAgICAgIGlmICghX2lzT25saW5lKCkpIHtcclxuICAgICAgICAgICAgLy8gUGljayB0aGUgc2hvcnRlciB0aW1lb3V0LlxyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5taW4oNTAwMCAvKiBPRkZMSU5FICovLCB0aGlzLnNob3J0RGVsYXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJZiBydW5uaW5nIGluIGEgbW9iaWxlIGVudmlyb25tZW50LCByZXR1cm4gdGhlIGxvbmcgZGVsYXksIG90aGVyd2lzZVxyXG4gICAgICAgIC8vIHJldHVybiB0aGUgc2hvcnQgZGVsYXkuXHJcbiAgICAgICAgLy8gVGhpcyBjb3VsZCBiZSBpbXByb3ZlZCBpbiB0aGUgZnV0dXJlIHRvIGR5bmFtaWNhbGx5IGNoYW5nZSBiYXNlZCBvbiBvdGhlclxyXG4gICAgICAgIC8vIHZhcmlhYmxlcyBpbnN0ZWFkIG9mIGp1c3QgcmVhZGluZyB0aGUgY3VycmVudCBlbnZpcm9ubWVudC5cclxuICAgICAgICByZXR1cm4gdGhpcy5pc01vYmlsZSA/IHRoaXMubG9uZ0RlbGF5IDogdGhpcy5zaG9ydERlbGF5O1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9lbXVsYXRvclVybChjb25maWcsIHBhdGgpIHtcclxuICAgIGRlYnVnQXNzZXJ0KGNvbmZpZy5lbXVsYXRvciwgJ0VtdWxhdG9yIHNob3VsZCBhbHdheXMgYmUgc2V0IGhlcmUnKTtcclxuICAgIGNvbnN0IHsgdXJsIH0gPSBjb25maWcuZW11bGF0b3I7XHJcbiAgICBpZiAoIXBhdGgpIHtcclxuICAgICAgICByZXR1cm4gdXJsO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGAke3VybH0ke3BhdGguc3RhcnRzV2l0aCgnLycpID8gcGF0aC5zbGljZSgxKSA6IHBhdGh9YDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBGZXRjaFByb3ZpZGVyIHtcclxuICAgIHN0YXRpYyBpbml0aWFsaXplKGZldGNoSW1wbCwgaGVhZGVyc0ltcGwsIHJlc3BvbnNlSW1wbCkge1xyXG4gICAgICAgIHRoaXMuZmV0Y2hJbXBsID0gZmV0Y2hJbXBsO1xyXG4gICAgICAgIGlmIChoZWFkZXJzSW1wbCkge1xyXG4gICAgICAgICAgICB0aGlzLmhlYWRlcnNJbXBsID0gaGVhZGVyc0ltcGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZXNwb25zZUltcGwpIHtcclxuICAgICAgICAgICAgdGhpcy5yZXNwb25zZUltcGwgPSByZXNwb25zZUltcGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc3RhdGljIGZldGNoKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmZldGNoSW1wbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mZXRjaEltcGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgJ2ZldGNoJyBpbiBzZWxmKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmZldGNoO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWJ1Z0ZhaWwoJ0NvdWxkIG5vdCBmaW5kIGZldGNoIGltcGxlbWVudGF0aW9uLCBtYWtlIHN1cmUgeW91IGNhbGwgRmV0Y2hQcm92aWRlci5pbml0aWFsaXplKCkgd2l0aCBhbiBhcHByb3ByaWF0ZSBwb2x5ZmlsbCcpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGhlYWRlcnMoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaGVhZGVyc0ltcGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGVhZGVyc0ltcGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgJ0hlYWRlcnMnIGluIHNlbGYpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuSGVhZGVycztcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVidWdGYWlsKCdDb3VsZCBub3QgZmluZCBIZWFkZXJzIGltcGxlbWVudGF0aW9uLCBtYWtlIHN1cmUgeW91IGNhbGwgRmV0Y2hQcm92aWRlci5pbml0aWFsaXplKCkgd2l0aCBhbiBhcHByb3ByaWF0ZSBwb2x5ZmlsbCcpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIHJlc3BvbnNlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnJlc3BvbnNlSW1wbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXNwb25zZUltcGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgJ1Jlc3BvbnNlJyBpbiBzZWxmKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLlJlc3BvbnNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWJ1Z0ZhaWwoJ0NvdWxkIG5vdCBmaW5kIFJlc3BvbnNlIGltcGxlbWVudGF0aW9uLCBtYWtlIHN1cmUgeW91IGNhbGwgRmV0Y2hQcm92aWRlci5pbml0aWFsaXplKCkgd2l0aCBhbiBhcHByb3ByaWF0ZSBwb2x5ZmlsbCcpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBNYXAgZnJvbSBlcnJvcnMgcmV0dXJuZWQgYnkgdGhlIHNlcnZlciB0byBlcnJvcnMgdG8gZGV2ZWxvcGVyIHZpc2libGUgZXJyb3JzXHJcbiAqL1xyXG5jb25zdCBTRVJWRVJfRVJST1JfTUFQID0ge1xyXG4gICAgLy8gQ3VzdG9tIHRva2VuIGVycm9ycy5cclxuICAgIFtcIkNSRURFTlRJQUxfTUlTTUFUQ0hcIiAvKiBDUkVERU5USUFMX01JU01BVENIICovXTogXCJjdXN0b20tdG9rZW4tbWlzbWF0Y2hcIiAvKiBDUkVERU5USUFMX01JU01BVENIICovLFxyXG4gICAgLy8gVGhpcyBjYW4gb25seSBoYXBwZW4gaWYgdGhlIFNESyBzZW5kcyBhIGJhZCByZXF1ZXN0LlxyXG4gICAgW1wiTUlTU0lOR19DVVNUT01fVE9LRU5cIiAvKiBNSVNTSU5HX0NVU1RPTV9UT0tFTiAqL106IFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyxcclxuICAgIC8vIENyZWF0ZSBBdXRoIFVSSSBlcnJvcnMuXHJcbiAgICBbXCJJTlZBTElEX0lERU5USUZJRVJcIiAvKiBJTlZBTElEX0lERU5USUZJRVIgKi9dOiBcImludmFsaWQtZW1haWxcIiAvKiBJTlZBTElEX0VNQUlMICovLFxyXG4gICAgLy8gVGhpcyBjYW4gb25seSBoYXBwZW4gaWYgdGhlIFNESyBzZW5kcyBhIGJhZCByZXF1ZXN0LlxyXG4gICAgW1wiTUlTU0lOR19DT05USU5VRV9VUklcIiAvKiBNSVNTSU5HX0NPTlRJTlVFX1VSSSAqL106IFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyxcclxuICAgIC8vIFNpZ24gaW4gd2l0aCBlbWFpbCBhbmQgcGFzc3dvcmQgZXJyb3JzIChzb21lIGFwcGx5IHRvIHNpZ24gdXAgdG9vKS5cclxuICAgIFtcIklOVkFMSURfUEFTU1dPUkRcIiAvKiBJTlZBTElEX1BBU1NXT1JEICovXTogXCJ3cm9uZy1wYXNzd29yZFwiIC8qIElOVkFMSURfUEFTU1dPUkQgKi8sXHJcbiAgICAvLyBUaGlzIGNhbiBvbmx5IGhhcHBlbiBpZiB0aGUgU0RLIHNlbmRzIGEgYmFkIHJlcXVlc3QuXHJcbiAgICBbXCJNSVNTSU5HX1BBU1NXT1JEXCIgLyogTUlTU0lOR19QQVNTV09SRCAqL106IFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyxcclxuICAgIC8vIFNpZ24gdXAgd2l0aCBlbWFpbCBhbmQgcGFzc3dvcmQgZXJyb3JzLlxyXG4gICAgW1wiRU1BSUxfRVhJU1RTXCIgLyogRU1BSUxfRVhJU1RTICovXTogXCJlbWFpbC1hbHJlYWR5LWluLXVzZVwiIC8qIEVNQUlMX0VYSVNUUyAqLyxcclxuICAgIFtcIlBBU1NXT1JEX0xPR0lOX0RJU0FCTEVEXCIgLyogUEFTU1dPUkRfTE9HSU5fRElTQUJMRUQgKi9dOiBcIm9wZXJhdGlvbi1ub3QtYWxsb3dlZFwiIC8qIE9QRVJBVElPTl9OT1RfQUxMT1dFRCAqLyxcclxuICAgIC8vIFZlcmlmeSBhc3NlcnRpb24gZm9yIHNpZ24gaW4gd2l0aCBjcmVkZW50aWFsIGVycm9yczpcclxuICAgIFtcIklOVkFMSURfSURQX1JFU1BPTlNFXCIgLyogSU5WQUxJRF9JRFBfUkVTUE9OU0UgKi9dOiBcImludmFsaWQtY3JlZGVudGlhbFwiIC8qIElOVkFMSURfSURQX1JFU1BPTlNFICovLFxyXG4gICAgW1wiSU5WQUxJRF9QRU5ESU5HX1RPS0VOXCIgLyogSU5WQUxJRF9QRU5ESU5HX1RPS0VOICovXTogXCJpbnZhbGlkLWNyZWRlbnRpYWxcIiAvKiBJTlZBTElEX0lEUF9SRVNQT05TRSAqLyxcclxuICAgIFtcIkZFREVSQVRFRF9VU0VSX0lEX0FMUkVBRFlfTElOS0VEXCIgLyogRkVERVJBVEVEX1VTRVJfSURfQUxSRUFEWV9MSU5LRUQgKi9dOiBcImNyZWRlbnRpYWwtYWxyZWFkeS1pbi11c2VcIiAvKiBDUkVERU5USUFMX0FMUkVBRFlfSU5fVVNFICovLFxyXG4gICAgLy8gVGhpcyBjYW4gb25seSBoYXBwZW4gaWYgdGhlIFNESyBzZW5kcyBhIGJhZCByZXF1ZXN0LlxyXG4gICAgW1wiTUlTU0lOR19SRVFfVFlQRVwiIC8qIE1JU1NJTkdfUkVRX1RZUEUgKi9dOiBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8sXHJcbiAgICAvLyBTZW5kIFBhc3N3b3JkIHJlc2V0IGVtYWlsIGVycm9yczpcclxuICAgIFtcIkVNQUlMX05PVF9GT1VORFwiIC8qIEVNQUlMX05PVF9GT1VORCAqL106IFwidXNlci1ub3QtZm91bmRcIiAvKiBVU0VSX0RFTEVURUQgKi8sXHJcbiAgICBbXCJSRVNFVF9QQVNTV09SRF9FWENFRURfTElNSVRcIiAvKiBSRVNFVF9QQVNTV09SRF9FWENFRURfTElNSVQgKi9dOiBcInRvby1tYW55LXJlcXVlc3RzXCIgLyogVE9PX01BTllfQVRURU1QVFNfVFJZX0xBVEVSICovLFxyXG4gICAgW1wiRVhQSVJFRF9PT0JfQ09ERVwiIC8qIEVYUElSRURfT09CX0NPREUgKi9dOiBcImV4cGlyZWQtYWN0aW9uLWNvZGVcIiAvKiBFWFBJUkVEX09PQl9DT0RFICovLFxyXG4gICAgW1wiSU5WQUxJRF9PT0JfQ09ERVwiIC8qIElOVkFMSURfT09CX0NPREUgKi9dOiBcImludmFsaWQtYWN0aW9uLWNvZGVcIiAvKiBJTlZBTElEX09PQl9DT0RFICovLFxyXG4gICAgLy8gVGhpcyBjYW4gb25seSBoYXBwZW4gaWYgdGhlIFNESyBzZW5kcyBhIGJhZCByZXF1ZXN0LlxyXG4gICAgW1wiTUlTU0lOR19PT0JfQ09ERVwiIC8qIE1JU1NJTkdfT09CX0NPREUgKi9dOiBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8sXHJcbiAgICAvLyBPcGVyYXRpb25zIHRoYXQgcmVxdWlyZSBJRCB0b2tlbiBpbiByZXF1ZXN0OlxyXG4gICAgW1wiQ1JFREVOVElBTF9UT09fT0xEX0xPR0lOX0FHQUlOXCIgLyogQ1JFREVOVElBTF9UT09fT0xEX0xPR0lOX0FHQUlOICovXTogXCJyZXF1aXJlcy1yZWNlbnQtbG9naW5cIiAvKiBDUkVERU5USUFMX1RPT19PTERfTE9HSU5fQUdBSU4gKi8sXHJcbiAgICBbXCJJTlZBTElEX0lEX1RPS0VOXCIgLyogSU5WQUxJRF9JRF9UT0tFTiAqL106IFwiaW52YWxpZC11c2VyLXRva2VuXCIgLyogSU5WQUxJRF9BVVRIICovLFxyXG4gICAgW1wiVE9LRU5fRVhQSVJFRFwiIC8qIFRPS0VOX0VYUElSRUQgKi9dOiBcInVzZXItdG9rZW4tZXhwaXJlZFwiIC8qIFRPS0VOX0VYUElSRUQgKi8sXHJcbiAgICBbXCJVU0VSX05PVF9GT1VORFwiIC8qIFVTRVJfTk9UX0ZPVU5EICovXTogXCJ1c2VyLXRva2VuLWV4cGlyZWRcIiAvKiBUT0tFTl9FWFBJUkVEICovLFxyXG4gICAgLy8gT3RoZXIgZXJyb3JzLlxyXG4gICAgW1wiVE9PX01BTllfQVRURU1QVFNfVFJZX0xBVEVSXCIgLyogVE9PX01BTllfQVRURU1QVFNfVFJZX0xBVEVSICovXTogXCJ0b28tbWFueS1yZXF1ZXN0c1wiIC8qIFRPT19NQU5ZX0FUVEVNUFRTX1RSWV9MQVRFUiAqLyxcclxuICAgIC8vIFBob25lIEF1dGggcmVsYXRlZCBlcnJvcnMuXHJcbiAgICBbXCJJTlZBTElEX0NPREVcIiAvKiBJTlZBTElEX0NPREUgKi9dOiBcImludmFsaWQtdmVyaWZpY2F0aW9uLWNvZGVcIiAvKiBJTlZBTElEX0NPREUgKi8sXHJcbiAgICBbXCJJTlZBTElEX1NFU1NJT05fSU5GT1wiIC8qIElOVkFMSURfU0VTU0lPTl9JTkZPICovXTogXCJpbnZhbGlkLXZlcmlmaWNhdGlvbi1pZFwiIC8qIElOVkFMSURfU0VTU0lPTl9JTkZPICovLFxyXG4gICAgW1wiSU5WQUxJRF9URU1QT1JBUllfUFJPT0ZcIiAvKiBJTlZBTElEX1RFTVBPUkFSWV9QUk9PRiAqL106IFwiaW52YWxpZC1jcmVkZW50aWFsXCIgLyogSU5WQUxJRF9JRFBfUkVTUE9OU0UgKi8sXHJcbiAgICBbXCJNSVNTSU5HX1NFU1NJT05fSU5GT1wiIC8qIE1JU1NJTkdfU0VTU0lPTl9JTkZPICovXTogXCJtaXNzaW5nLXZlcmlmaWNhdGlvbi1pZFwiIC8qIE1JU1NJTkdfU0VTU0lPTl9JTkZPICovLFxyXG4gICAgW1wiU0VTU0lPTl9FWFBJUkVEXCIgLyogU0VTU0lPTl9FWFBJUkVEICovXTogXCJjb2RlLWV4cGlyZWRcIiAvKiBDT0RFX0VYUElSRUQgKi8sXHJcbiAgICAvLyBPdGhlciBhY3Rpb24gY29kZSBlcnJvcnMgd2hlbiBhZGRpdGlvbmFsIHNldHRpbmdzIHBhc3NlZC5cclxuICAgIC8vIE1JU1NJTkdfQ09OVElOVUVfVVJJIGlzIGdldHRpbmcgbWFwcGVkIHRvIElOVEVSTkFMX0VSUk9SIGFib3ZlLlxyXG4gICAgLy8gVGhpcyBpcyBPSyBhcyB0aGlzIGVycm9yIHdpbGwgYmUgY2F1Z2h0IGJ5IGNsaWVudCBzaWRlIHZhbGlkYXRpb24uXHJcbiAgICBbXCJNSVNTSU5HX0FORFJPSURfUEFDS0FHRV9OQU1FXCIgLyogTUlTU0lOR19BTkRST0lEX1BBQ0tBR0VfTkFNRSAqL106IFwibWlzc2luZy1hbmRyb2lkLXBrZy1uYW1lXCIgLyogTUlTU0lOR19BTkRST0lEX1BBQ0tBR0VfTkFNRSAqLyxcclxuICAgIFtcIlVOQVVUSE9SSVpFRF9ET01BSU5cIiAvKiBVTkFVVEhPUklaRURfRE9NQUlOICovXTogXCJ1bmF1dGhvcml6ZWQtY29udGludWUtdXJpXCIgLyogVU5BVVRIT1JJWkVEX0RPTUFJTiAqLyxcclxuICAgIC8vIGdldFByb2plY3RDb25maWcgZXJyb3JzIHdoZW4gY2xpZW50SWQgaXMgcGFzc2VkLlxyXG4gICAgW1wiSU5WQUxJRF9PQVVUSF9DTElFTlRfSURcIiAvKiBJTlZBTElEX09BVVRIX0NMSUVOVF9JRCAqL106IFwiaW52YWxpZC1vYXV0aC1jbGllbnQtaWRcIiAvKiBJTlZBTElEX09BVVRIX0NMSUVOVF9JRCAqLyxcclxuICAgIC8vIFVzZXIgYWN0aW9ucyAoc2lnbi11cCBvciBkZWxldGlvbikgZGlzYWJsZWQgZXJyb3JzLlxyXG4gICAgW1wiQURNSU5fT05MWV9PUEVSQVRJT05cIiAvKiBBRE1JTl9PTkxZX09QRVJBVElPTiAqL106IFwiYWRtaW4tcmVzdHJpY3RlZC1vcGVyYXRpb25cIiAvKiBBRE1JTl9PTkxZX09QRVJBVElPTiAqLyxcclxuICAgIC8vIE11bHRpIGZhY3RvciByZWxhdGVkIGVycm9ycy5cclxuICAgIFtcIklOVkFMSURfTUZBX1BFTkRJTkdfQ1JFREVOVElBTFwiIC8qIElOVkFMSURfTUZBX1BFTkRJTkdfQ1JFREVOVElBTCAqL106IFwiaW52YWxpZC1tdWx0aS1mYWN0b3Itc2Vzc2lvblwiIC8qIElOVkFMSURfTUZBX1NFU1NJT04gKi8sXHJcbiAgICBbXCJNRkFfRU5ST0xMTUVOVF9OT1RfRk9VTkRcIiAvKiBNRkFfRU5ST0xMTUVOVF9OT1RfRk9VTkQgKi9dOiBcIm11bHRpLWZhY3Rvci1pbmZvLW5vdC1mb3VuZFwiIC8qIE1GQV9JTkZPX05PVF9GT1VORCAqLyxcclxuICAgIFtcIk1JU1NJTkdfTUZBX0VOUk9MTE1FTlRfSURcIiAvKiBNSVNTSU5HX01GQV9FTlJPTExNRU5UX0lEICovXTogXCJtaXNzaW5nLW11bHRpLWZhY3Rvci1pbmZvXCIgLyogTUlTU0lOR19NRkFfSU5GTyAqLyxcclxuICAgIFtcIk1JU1NJTkdfTUZBX1BFTkRJTkdfQ1JFREVOVElBTFwiIC8qIE1JU1NJTkdfTUZBX1BFTkRJTkdfQ1JFREVOVElBTCAqL106IFwibWlzc2luZy1tdWx0aS1mYWN0b3Itc2Vzc2lvblwiIC8qIE1JU1NJTkdfTUZBX1NFU1NJT04gKi8sXHJcbiAgICBbXCJTRUNPTkRfRkFDVE9SX0VYSVNUU1wiIC8qIFNFQ09ORF9GQUNUT1JfRVhJU1RTICovXTogXCJzZWNvbmQtZmFjdG9yLWFscmVhZHktaW4tdXNlXCIgLyogU0VDT05EX0ZBQ1RPUl9BTFJFQURZX0VOUk9MTEVEICovLFxyXG4gICAgW1wiU0VDT05EX0ZBQ1RPUl9MSU1JVF9FWENFRURFRFwiIC8qIFNFQ09ORF9GQUNUT1JfTElNSVRfRVhDRUVERUQgKi9dOiBcIm1heGltdW0tc2Vjb25kLWZhY3Rvci1jb3VudC1leGNlZWRlZFwiIC8qIFNFQ09ORF9GQUNUT1JfTElNSVRfRVhDRUVERUQgKi8sXHJcbiAgICAvLyBCbG9ja2luZyBmdW5jdGlvbnMgcmVsYXRlZCBlcnJvcnMuXHJcbiAgICBbXCJCTE9DS0lOR19GVU5DVElPTl9FUlJPUl9SRVNQT05TRVwiIC8qIEJMT0NLSU5HX0ZVTkNUSU9OX0VSUk9SX1JFU1BPTlNFICovXTogXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovLFxyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0FQSV9USU1FT1VUX01TID0gbmV3IERlbGF5KDMwMDAwLCA2MDAwMCk7XHJcbmZ1bmN0aW9uIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICBpZiAoYXV0aC50ZW5hbnRJZCAmJiAhcmVxdWVzdC50ZW5hbnRJZCkge1xyXG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlcXVlc3QpLCB7IHRlbmFudElkOiBhdXRoLnRlbmFudElkIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcXVlc3Q7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIG1ldGhvZCwgcGF0aCwgcmVxdWVzdCwgY3VzdG9tRXJyb3JNYXAgPSB7fSkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtRmV0Y2hXaXRoRXJyb3JIYW5kbGluZyhhdXRoLCBjdXN0b21FcnJvck1hcCwgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGxldCBib2R5ID0ge307XHJcbiAgICAgICAgbGV0IHBhcmFtcyA9IHt9O1xyXG4gICAgICAgIGlmIChyZXF1ZXN0KSB7XHJcbiAgICAgICAgICAgIGlmIChtZXRob2QgPT09IFwiR0VUXCIgLyogR0VUICovKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXMgPSByZXF1ZXN0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYm9keSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0KVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBxdWVyeSA9IHF1ZXJ5c3RyaW5nKE9iamVjdC5hc3NpZ24oeyBrZXk6IGF1dGguY29uZmlnLmFwaUtleSB9LCBwYXJhbXMpKS5zbGljZSgxKTtcclxuICAgICAgICBjb25zdCBoZWFkZXJzID0gYXdhaXQgYXV0aC5fZ2V0QWRkaXRpb25hbEhlYWRlcnMoKTtcclxuICAgICAgICBoZWFkZXJzW1wiQ29udGVudC1UeXBlXCIgLyogQ09OVEVOVF9UWVBFICovXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcclxuICAgICAgICBpZiAoYXV0aC5sYW5ndWFnZUNvZGUpIHtcclxuICAgICAgICAgICAgaGVhZGVyc1tcIlgtRmlyZWJhc2UtTG9jYWxlXCIgLyogWF9GSVJFQkFTRV9MT0NBTEUgKi9dID0gYXV0aC5sYW5ndWFnZUNvZGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBGZXRjaFByb3ZpZGVyLmZldGNoKCkoX2dldEZpbmFsVGFyZ2V0KGF1dGgsIGF1dGguY29uZmlnLmFwaUhvc3QsIHBhdGgsIHF1ZXJ5KSwgT2JqZWN0LmFzc2lnbih7IG1ldGhvZCxcclxuICAgICAgICAgICAgaGVhZGVycywgcmVmZXJyZXJQb2xpY3k6ICduby1yZWZlcnJlcicgfSwgYm9keSkpO1xyXG4gICAgfSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX3BlcmZvcm1GZXRjaFdpdGhFcnJvckhhbmRsaW5nKGF1dGgsIGN1c3RvbUVycm9yTWFwLCBmZXRjaEZuKSB7XHJcbiAgICBhdXRoLl9jYW5Jbml0RW11bGF0b3IgPSBmYWxzZTtcclxuICAgIGNvbnN0IGVycm9yTWFwID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBTRVJWRVJfRVJST1JfTUFQKSwgY3VzdG9tRXJyb3JNYXApO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBuZXR3b3JrVGltZW91dCA9IG5ldyBOZXR3b3JrVGltZW91dChhdXRoKTtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IFByb21pc2UucmFjZShbXHJcbiAgICAgICAgICAgIGZldGNoRm4oKSxcclxuICAgICAgICAgICAgbmV0d29ya1RpbWVvdXQucHJvbWlzZVxyXG4gICAgICAgIF0pO1xyXG4gICAgICAgIC8vIElmIHdlJ3ZlIHJlYWNoZWQgdGhpcyBwb2ludCwgdGhlIGZldGNoIHN1Y2NlZWRlZCBhbmQgdGhlIG5ldHdvcmtUaW1lb3V0XHJcbiAgICAgICAgLy8gZGlkbid0IHRocm93OyBjbGVhciB0aGUgbmV0d29yayB0aW1lb3V0IGRlbGF5IHNvIHRoYXQgTm9kZSB3b24ndCBoYW5nXHJcbiAgICAgICAgbmV0d29ya1RpbWVvdXQuY2xlYXJOZXR3b3JrVGltZW91dCgpO1xyXG4gICAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgaWYgKCduZWVkQ29uZmlybWF0aW9uJyBpbiBqc29uKSB7XHJcbiAgICAgICAgICAgIHRocm93IF9tYWtlVGFnZ2VkRXJyb3IoYXV0aCwgXCJhY2NvdW50LWV4aXN0cy13aXRoLWRpZmZlcmVudC1jcmVkZW50aWFsXCIgLyogTkVFRF9DT05GSVJNQVRJT04gKi8sIGpzb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVzcG9uc2Uub2sgJiYgISgnZXJyb3JNZXNzYWdlJyBpbiBqc29uKSkge1xyXG4gICAgICAgICAgICByZXR1cm4ganNvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHJlc3BvbnNlLm9rID8ganNvbi5lcnJvck1lc3NhZ2UgOiBqc29uLmVycm9yLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgIGNvbnN0IFtzZXJ2ZXJFcnJvckNvZGUsIHNlcnZlckVycm9yTWVzc2FnZV0gPSBlcnJvck1lc3NhZ2Uuc3BsaXQoJyA6ICcpO1xyXG4gICAgICAgICAgICBpZiAoc2VydmVyRXJyb3JDb2RlID09PSBcIkZFREVSQVRFRF9VU0VSX0lEX0FMUkVBRFlfTElOS0VEXCIgLyogRkVERVJBVEVEX1VTRVJfSURfQUxSRUFEWV9MSU5LRUQgKi8pIHtcclxuICAgICAgICAgICAgICAgIHRocm93IF9tYWtlVGFnZ2VkRXJyb3IoYXV0aCwgXCJjcmVkZW50aWFsLWFscmVhZHktaW4tdXNlXCIgLyogQ1JFREVOVElBTF9BTFJFQURZX0lOX1VTRSAqLywganNvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoc2VydmVyRXJyb3JDb2RlID09PSBcIkVNQUlMX0VYSVNUU1wiIC8qIEVNQUlMX0VYSVNUUyAqLykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgX21ha2VUYWdnZWRFcnJvcihhdXRoLCBcImVtYWlsLWFscmVhZHktaW4tdXNlXCIgLyogRU1BSUxfRVhJU1RTICovLCBqc29uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBhdXRoRXJyb3IgPSBlcnJvck1hcFtzZXJ2ZXJFcnJvckNvZGVdIHx8XHJcbiAgICAgICAgICAgICAgICBzZXJ2ZXJFcnJvckNvZGVcclxuICAgICAgICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bX1xcc10rL2csICctJyk7XHJcbiAgICAgICAgICAgIGlmIChzZXJ2ZXJFcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IF9lcnJvcldpdGhDdXN0b21NZXNzYWdlKGF1dGgsIGF1dGhFcnJvciwgc2VydmVyRXJyb3JNZXNzYWdlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF9mYWlsKGF1dGgsIGF1dGhFcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgRmlyZWJhc2VFcnJvcikge1xyXG4gICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfZmFpbChhdXRoLCBcIm5ldHdvcmstcmVxdWVzdC1mYWlsZWRcIiAvKiBORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovKTtcclxuICAgIH1cclxufVxyXG5hc3luYyBmdW5jdGlvbiBfcGVyZm9ybVNpZ25JblJlcXVlc3QoYXV0aCwgbWV0aG9kLCBwYXRoLCByZXF1ZXN0LCBjdXN0b21FcnJvck1hcCA9IHt9KSB7XHJcbiAgICBjb25zdCBzZXJ2ZXJSZXNwb25zZSA9IChhd2FpdCBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgbWV0aG9kLCBwYXRoLCByZXF1ZXN0LCBjdXN0b21FcnJvck1hcCkpO1xyXG4gICAgaWYgKCdtZmFQZW5kaW5nQ3JlZGVudGlhbCcgaW4gc2VydmVyUmVzcG9uc2UpIHtcclxuICAgICAgICBfZmFpbChhdXRoLCBcIm11bHRpLWZhY3Rvci1hdXRoLXJlcXVpcmVkXCIgLyogTUZBX1JFUVVJUkVEICovLCB7XHJcbiAgICAgICAgICAgIF9zZXJ2ZXJSZXNwb25zZTogc2VydmVyUmVzcG9uc2VcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBzZXJ2ZXJSZXNwb25zZTtcclxufVxyXG5mdW5jdGlvbiBfZ2V0RmluYWxUYXJnZXQoYXV0aCwgaG9zdCwgcGF0aCwgcXVlcnkpIHtcclxuICAgIGNvbnN0IGJhc2UgPSBgJHtob3N0fSR7cGF0aH0/JHtxdWVyeX1gO1xyXG4gICAgaWYgKCFhdXRoLmNvbmZpZy5lbXVsYXRvcikge1xyXG4gICAgICAgIHJldHVybiBgJHthdXRoLmNvbmZpZy5hcGlTY2hlbWV9Oi8vJHtiYXNlfWA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX2VtdWxhdG9yVXJsKGF1dGguY29uZmlnLCBiYXNlKTtcclxufVxyXG5jbGFzcyBOZXR3b3JrVGltZW91dCB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoKSB7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gYXV0aDtcclxuICAgICAgICAvLyBOb2RlIHRpbWVycyBhbmQgYnJvd3NlciB0aW1lcnMgYXJlIGZ1bmRhbWVudGFsbHkgaW5jb21wYXRpYmxlLCBidXQgd2VcclxuICAgICAgICAvLyBkb24ndCBjYXJlIGFib3V0IHRoZSB2YWx1ZSBoZXJlXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICB0aGlzLnRpbWVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZSgoXywgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoX2NyZWF0ZUVycm9yKHRoaXMuYXV0aCwgXCJ0aW1lb3V0XCIgLyogVElNRU9VVCAqLykpO1xyXG4gICAgICAgICAgICB9LCBERUZBVUxUX0FQSV9USU1FT1VUX01TLmdldCgpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNsZWFyTmV0d29ya1RpbWVvdXQoKSB7XHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIF9tYWtlVGFnZ2VkRXJyb3IoYXV0aCwgY29kZSwgcmVzcG9uc2UpIHtcclxuICAgIGNvbnN0IGVycm9yUGFyYW1zID0ge1xyXG4gICAgICAgIGFwcE5hbWU6IGF1dGgubmFtZVxyXG4gICAgfTtcclxuICAgIGlmIChyZXNwb25zZS5lbWFpbCkge1xyXG4gICAgICAgIGVycm9yUGFyYW1zLmVtYWlsID0gcmVzcG9uc2UuZW1haWw7XHJcbiAgICB9XHJcbiAgICBpZiAocmVzcG9uc2UucGhvbmVOdW1iZXIpIHtcclxuICAgICAgICBlcnJvclBhcmFtcy5waG9uZU51bWJlciA9IHJlc3BvbnNlLnBob25lTnVtYmVyO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZXJyb3IgPSBfY3JlYXRlRXJyb3IoYXV0aCwgY29kZSwgZXJyb3JQYXJhbXMpO1xyXG4gICAgLy8gV2Uga25vdyBjdXN0b21EYXRhIGlzIGRlZmluZWQgb24gZXJyb3IgYmVjYXVzZSBlcnJvclBhcmFtcyBpcyBkZWZpbmVkXHJcbiAgICBlcnJvci5jdXN0b21EYXRhLl90b2tlblJlc3BvbnNlID0gcmVzcG9uc2U7XHJcbiAgICByZXR1cm4gZXJyb3I7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlQWNjb3VudChhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOmRlbGV0ZVwiIC8qIERFTEVURV9BQ0NPVU5UICovLCByZXF1ZXN0KTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBkZWxldGVMaW5rZWRBY2NvdW50cyhhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnVwZGF0ZVwiIC8qIFNFVF9BQ0NPVU5UX0lORk8gKi8sIHJlcXVlc3QpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIGdldEFjY291bnRJbmZvKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6bG9va3VwXCIgLyogR0VUX0FDQ09VTlRfSU5GTyAqLywgcmVxdWVzdCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gdXRjVGltZXN0YW1wVG9EYXRlU3RyaW5nKHV0Y1RpbWVzdGFtcCkge1xyXG4gICAgaWYgKCF1dGNUaW1lc3RhbXApIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBDb252ZXJ0IHRvIGRhdGUgb2JqZWN0LlxyXG4gICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShOdW1iZXIodXRjVGltZXN0YW1wKSk7XHJcbiAgICAgICAgLy8gVGVzdCBkYXRlIGlzIHZhbGlkLlxyXG4gICAgICAgIGlmICghaXNOYU4oZGF0ZS5nZXRUaW1lKCkpKSB7XHJcbiAgICAgICAgICAgIC8vIENvbnZlcnQgdG8gVVRDIGRhdGUgc3RyaW5nLlxyXG4gICAgICAgICAgICByZXR1cm4gZGF0ZS50b1VUQ1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgLy8gRG8gbm90aGluZy4gdW5kZWZpbmVkIHdpbGwgYmUgcmV0dXJuZWQuXHJcbiAgICB9XHJcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgSlNPTiBXZWIgVG9rZW4gKEpXVCkgdXNlZCB0byBpZGVudGlmeSB0aGUgdXNlciB0byBhIEZpcmViYXNlIHNlcnZpY2UuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFJldHVybnMgdGhlIGN1cnJlbnQgdG9rZW4gaWYgaXQgaGFzIG5vdCBleHBpcmVkIG9yIGlmIGl0IHdpbGwgbm90IGV4cGlyZSBpbiB0aGUgbmV4dCBmaXZlXHJcbiAqIG1pbnV0ZXMuIE90aGVyd2lzZSwgdGhpcyB3aWxsIHJlZnJlc2ggdGhlIHRva2VuIGFuZCByZXR1cm4gYSBuZXcgb25lLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gZm9yY2VSZWZyZXNoIC0gRm9yY2UgcmVmcmVzaCByZWdhcmRsZXNzIG9mIHRva2VuIGV4cGlyYXRpb24uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGdldElkVG9rZW4odXNlciwgZm9yY2VSZWZyZXNoID0gZmFsc2UpIHtcclxuICAgIHJldHVybiBnZXRNb2R1bGFySW5zdGFuY2UodXNlcikuZ2V0SWRUb2tlbihmb3JjZVJlZnJlc2gpO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgZGVzZXJpYWxpemVkIEpTT04gV2ViIFRva2VuIChKV1QpIHVzZWQgdG8gaWRlbnRpdGZ5IHRoZSB1c2VyIHRvIGEgRmlyZWJhc2Ugc2VydmljZS5cclxuICpcclxuICogQHJlbWFya3NcclxuICogUmV0dXJucyB0aGUgY3VycmVudCB0b2tlbiBpZiBpdCBoYXMgbm90IGV4cGlyZWQgb3IgaWYgaXQgd2lsbCBub3QgZXhwaXJlIGluIHRoZSBuZXh0IGZpdmVcclxuICogbWludXRlcy4gT3RoZXJ3aXNlLCB0aGlzIHdpbGwgcmVmcmVzaCB0aGUgdG9rZW4gYW5kIHJldHVybiBhIG5ldyBvbmUuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBmb3JjZVJlZnJlc2ggLSBGb3JjZSByZWZyZXNoIHJlZ2FyZGxlc3Mgb2YgdG9rZW4gZXhwaXJhdGlvbi5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ2V0SWRUb2tlblJlc3VsdCh1c2VyLCBmb3JjZVJlZnJlc2ggPSBmYWxzZSkge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgY29uc3QgdG9rZW4gPSBhd2FpdCB1c2VySW50ZXJuYWwuZ2V0SWRUb2tlbihmb3JjZVJlZnJlc2gpO1xyXG4gICAgY29uc3QgY2xhaW1zID0gX3BhcnNlVG9rZW4odG9rZW4pO1xyXG4gICAgX2Fzc2VydChjbGFpbXMgJiYgY2xhaW1zLmV4cCAmJiBjbGFpbXMuYXV0aF90aW1lICYmIGNsYWltcy5pYXQsIHVzZXJJbnRlcm5hbC5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgY29uc3QgZmlyZWJhc2UgPSB0eXBlb2YgY2xhaW1zLmZpcmViYXNlID09PSAnb2JqZWN0JyA/IGNsYWltcy5maXJlYmFzZSA6IHVuZGVmaW5lZDtcclxuICAgIGNvbnN0IHNpZ25JblByb3ZpZGVyID0gZmlyZWJhc2UgPT09IG51bGwgfHwgZmlyZWJhc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZpcmViYXNlWydzaWduX2luX3Byb3ZpZGVyJ107XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGNsYWltcyxcclxuICAgICAgICB0b2tlbixcclxuICAgICAgICBhdXRoVGltZTogdXRjVGltZXN0YW1wVG9EYXRlU3RyaW5nKHNlY29uZHNTdHJpbmdUb01pbGxpc2Vjb25kcyhjbGFpbXMuYXV0aF90aW1lKSksXHJcbiAgICAgICAgaXNzdWVkQXRUaW1lOiB1dGNUaW1lc3RhbXBUb0RhdGVTdHJpbmcoc2Vjb25kc1N0cmluZ1RvTWlsbGlzZWNvbmRzKGNsYWltcy5pYXQpKSxcclxuICAgICAgICBleHBpcmF0aW9uVGltZTogdXRjVGltZXN0YW1wVG9EYXRlU3RyaW5nKHNlY29uZHNTdHJpbmdUb01pbGxpc2Vjb25kcyhjbGFpbXMuZXhwKSksXHJcbiAgICAgICAgc2lnbkluUHJvdmlkZXI6IHNpZ25JblByb3ZpZGVyIHx8IG51bGwsXHJcbiAgICAgICAgc2lnbkluU2Vjb25kRmFjdG9yOiAoZmlyZWJhc2UgPT09IG51bGwgfHwgZmlyZWJhc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGZpcmViYXNlWydzaWduX2luX3NlY29uZF9mYWN0b3InXSkgfHwgbnVsbFxyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBzZWNvbmRzU3RyaW5nVG9NaWxsaXNlY29uZHMoc2Vjb25kcykge1xyXG4gICAgcmV0dXJuIE51bWJlcihzZWNvbmRzKSAqIDEwMDA7XHJcbn1cclxuZnVuY3Rpb24gX3BhcnNlVG9rZW4odG9rZW4pIHtcclxuICAgIGNvbnN0IFthbGdvcml0aG0sIHBheWxvYWQsIHNpZ25hdHVyZV0gPSB0b2tlbi5zcGxpdCgnLicpO1xyXG4gICAgaWYgKGFsZ29yaXRobSA9PT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgICAgcGF5bG9hZCA9PT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgICAgc2lnbmF0dXJlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBfbG9nRXJyb3IoJ0pXVCBtYWxmb3JtZWQsIGNvbnRhaW5lZCBmZXdlciB0aGFuIDMgc2VjdGlvbnMnKTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IGJhc2U2NERlY29kZShwYXlsb2FkKTtcclxuICAgICAgICBpZiAoIWRlY29kZWQpIHtcclxuICAgICAgICAgICAgX2xvZ0Vycm9yKCdGYWlsZWQgdG8gZGVjb2RlIGJhc2U2NCBKV1QgcGF5bG9hZCcpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZGVjb2RlZCk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIF9sb2dFcnJvcignQ2F1Z2h0IGVycm9yIHBhcnNpbmcgSldUIHBheWxvYWQgYXMgSlNPTicsIGUpO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBFeHRyYWN0IGV4cGlyZXNJbiBUVEwgZnJvbSBhIHRva2VuIGJ5IHN1YnRyYWN0aW5nIHRoZSBleHBpcmF0aW9uIGZyb20gdGhlIGlzc3VhbmNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX3Rva2VuRXhwaXJlc0luKHRva2VuKSB7XHJcbiAgICBjb25zdCBwYXJzZWRUb2tlbiA9IF9wYXJzZVRva2VuKHRva2VuKTtcclxuICAgIF9hc3NlcnQocGFyc2VkVG9rZW4sIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICBfYXNzZXJ0KHR5cGVvZiBwYXJzZWRUb2tlbi5leHAgIT09ICd1bmRlZmluZWQnLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgX2Fzc2VydCh0eXBlb2YgcGFyc2VkVG9rZW4uaWF0ICE9PSAndW5kZWZpbmVkJywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIHJldHVybiBOdW1iZXIocGFyc2VkVG9rZW4uZXhwKSAtIE51bWJlcihwYXJzZWRUb2tlbi5pYXQpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF9sb2dvdXRJZkludmFsaWRhdGVkKHVzZXIsIHByb21pc2UsIGJ5cGFzc0F1dGhTdGF0ZSA9IGZhbHNlKSB7XHJcbiAgICBpZiAoYnlwYXNzQXV0aFN0YXRlKSB7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICB9XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCBwcm9taXNlO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IgJiYgaXNVc2VySW52YWxpZGF0ZWQoZSkpIHtcclxuICAgICAgICAgICAgaWYgKHVzZXIuYXV0aC5jdXJyZW50VXNlciA9PT0gdXNlcikge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdXNlci5hdXRoLnNpZ25PdXQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBlO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGlzVXNlckludmFsaWRhdGVkKHsgY29kZSB9KSB7XHJcbiAgICByZXR1cm4gKGNvZGUgPT09IGBhdXRoLyR7XCJ1c2VyLWRpc2FibGVkXCIgLyogVVNFUl9ESVNBQkxFRCAqL31gIHx8XHJcbiAgICAgICAgY29kZSA9PT0gYGF1dGgvJHtcInVzZXItdG9rZW4tZXhwaXJlZFwiIC8qIFRPS0VOX0VYUElSRUQgKi99YCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgUHJvYWN0aXZlUmVmcmVzaCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih1c2VyKSB7XHJcbiAgICAgICAgdGhpcy51c2VyID0gdXNlcjtcclxuICAgICAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlO1xyXG4gICAgICAgIC8vIE5vZGUgdGltZXJzIGFuZCBicm93c2VyIHRpbWVycyByZXR1cm4gZnVuZGFtZW50YWxseSBkaWZmZXJlbnQgdHlwZXMuXHJcbiAgICAgICAgLy8gV2UgZG9uJ3QgYWN0dWFsbHkgY2FyZSB3aGF0IHRoZSB2YWx1ZSBpcyBidXQgVFMgd29uJ3QgYWNjZXB0IHVua25vd24gYW5kXHJcbiAgICAgICAgLy8gd2UgY2FuJ3QgY2FzdCBwcm9wZXJseSBpbiBib3RoIGVudmlyb25tZW50cy5cclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgIHRoaXMudGltZXJJZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5lcnJvckJhY2tvZmYgPSAzMDAwMCAvKiBSRVRSWV9CQUNLT0ZGX01JTiAqLztcclxuICAgIH1cclxuICAgIF9zdGFydCgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc1J1bm5pbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmlzUnVubmluZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zY2hlZHVsZSgpO1xyXG4gICAgfVxyXG4gICAgX3N0b3AoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzUnVubmluZykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaXNSdW5uaW5nID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMudGltZXJJZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcklkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXRJbnRlcnZhbCh3YXNFcnJvcikge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBpZiAod2FzRXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc3QgaW50ZXJ2YWwgPSB0aGlzLmVycm9yQmFja29mZjtcclxuICAgICAgICAgICAgdGhpcy5lcnJvckJhY2tvZmYgPSBNYXRoLm1pbih0aGlzLmVycm9yQmFja29mZiAqIDIsIDk2MDAwMCAvKiBSRVRSWV9CQUNLT0ZGX01BWCAqLyk7XHJcbiAgICAgICAgICAgIHJldHVybiBpbnRlcnZhbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFJlc2V0IHRoZSBlcnJvciBiYWNrb2ZmXHJcbiAgICAgICAgICAgIHRoaXMuZXJyb3JCYWNrb2ZmID0gMzAwMDAgLyogUkVUUllfQkFDS09GRl9NSU4gKi87XHJcbiAgICAgICAgICAgIGNvbnN0IGV4cFRpbWUgPSAoX2EgPSB0aGlzLnVzZXIuc3RzVG9rZW5NYW5hZ2VyLmV4cGlyYXRpb25UaW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBpbnRlcnZhbCA9IGV4cFRpbWUgLSBEYXRlLm5vdygpIC0gMzAwMDAwIC8qIE9GRlNFVCAqLztcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KDAsIGludGVydmFsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzY2hlZHVsZSh3YXNFcnJvciA9IGZhbHNlKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzUnVubmluZykge1xyXG4gICAgICAgICAgICAvLyBKdXN0IGluIGNhc2UuLi5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBpbnRlcnZhbCA9IHRoaXMuZ2V0SW50ZXJ2YWwod2FzRXJyb3IpO1xyXG4gICAgICAgIHRoaXMudGltZXJJZCA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLml0ZXJhdGlvbigpO1xyXG4gICAgICAgIH0sIGludGVydmFsKTtcclxuICAgIH1cclxuICAgIGFzeW5jIGl0ZXJhdGlvbigpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVzZXIuZ2V0SWRUb2tlbih0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgLy8gT25seSByZXRyeSBvbiBuZXR3b3JrIGVycm9yc1xyXG4gICAgICAgICAgICBpZiAoZS5jb2RlID09PSBgYXV0aC8ke1wibmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiIC8qIE5FVFdPUktfUkVRVUVTVF9GQUlMRUQgKi99YCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY2hlZHVsZSgvKiB3YXNFcnJvciAqLyB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2NoZWR1bGUoKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBVc2VyTWV0YWRhdGEge1xyXG4gICAgY29uc3RydWN0b3IoY3JlYXRlZEF0LCBsYXN0TG9naW5BdCkge1xyXG4gICAgICAgIHRoaXMuY3JlYXRlZEF0ID0gY3JlYXRlZEF0O1xyXG4gICAgICAgIHRoaXMubGFzdExvZ2luQXQgPSBsYXN0TG9naW5BdDtcclxuICAgICAgICB0aGlzLl9pbml0aWFsaXplVGltZSgpO1xyXG4gICAgfVxyXG4gICAgX2luaXRpYWxpemVUaW1lKCkge1xyXG4gICAgICAgIHRoaXMubGFzdFNpZ25JblRpbWUgPSB1dGNUaW1lc3RhbXBUb0RhdGVTdHJpbmcodGhpcy5sYXN0TG9naW5BdCk7XHJcbiAgICAgICAgdGhpcy5jcmVhdGlvblRpbWUgPSB1dGNUaW1lc3RhbXBUb0RhdGVTdHJpbmcodGhpcy5jcmVhdGVkQXQpO1xyXG4gICAgfVxyXG4gICAgX2NvcHkobWV0YWRhdGEpIHtcclxuICAgICAgICB0aGlzLmNyZWF0ZWRBdCA9IG1ldGFkYXRhLmNyZWF0ZWRBdDtcclxuICAgICAgICB0aGlzLmxhc3RMb2dpbkF0ID0gbWV0YWRhdGEubGFzdExvZ2luQXQ7XHJcbiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZVRpbWUoKTtcclxuICAgIH1cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IHRoaXMuY3JlYXRlZEF0LFxyXG4gICAgICAgICAgICBsYXN0TG9naW5BdDogdGhpcy5sYXN0TG9naW5BdFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX3JlbG9hZFdpdGhvdXRTYXZpbmcodXNlcikge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgY29uc3QgYXV0aCA9IHVzZXIuYXV0aDtcclxuICAgIGNvbnN0IGlkVG9rZW4gPSBhd2FpdCB1c2VyLmdldElkVG9rZW4oKTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX2xvZ291dElmSW52YWxpZGF0ZWQodXNlciwgZ2V0QWNjb3VudEluZm8oYXV0aCwgeyBpZFRva2VuIH0pKTtcclxuICAgIF9hc3NlcnQocmVzcG9uc2UgPT09IG51bGwgfHwgcmVzcG9uc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlc3BvbnNlLnVzZXJzLmxlbmd0aCwgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIGNvbnN0IGNvcmVBY2NvdW50ID0gcmVzcG9uc2UudXNlcnNbMF07XHJcbiAgICB1c2VyLl9ub3RpZnlSZWxvYWRMaXN0ZW5lcihjb3JlQWNjb3VudCk7XHJcbiAgICBjb25zdCBuZXdQcm92aWRlckRhdGEgPSAoKF9hID0gY29yZUFjY291bnQucHJvdmlkZXJVc2VySW5mbykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxlbmd0aClcclxuICAgICAgICA/IGV4dHJhY3RQcm92aWRlckRhdGEoY29yZUFjY291bnQucHJvdmlkZXJVc2VySW5mbylcclxuICAgICAgICA6IFtdO1xyXG4gICAgY29uc3QgcHJvdmlkZXJEYXRhID0gbWVyZ2VQcm92aWRlckRhdGEodXNlci5wcm92aWRlckRhdGEsIG5ld1Byb3ZpZGVyRGF0YSk7XHJcbiAgICAvLyBQcmVzZXJ2ZXMgdGhlIG5vbi1ub255bW91cyBzdGF0dXMgb2YgdGhlIHN0b3JlZCB1c2VyLCBldmVuIGlmIG5vIG1vcmVcclxuICAgIC8vIGNyZWRlbnRpYWxzIChmZWRlcmF0ZWQgb3IgZW1haWwvcGFzc3dvcmQpIGFyZSBsaW5rZWQgdG8gdGhlIHVzZXIuIElmXHJcbiAgICAvLyB0aGUgdXNlciB3YXMgcHJldmlvdXNseSBhbm9ueW1vdXMsIHRoZW4gdXNlIHByb3ZpZGVyIGRhdGEgdG8gdXBkYXRlLlxyXG4gICAgLy8gT24gdGhlIG90aGVyIGhhbmQsIGlmIGl0IHdhcyBub3QgYW5vbnltb3VzIGJlZm9yZSwgaXQgc2hvdWxkIG5ldmVyIGJlXHJcbiAgICAvLyBjb25zaWRlcmVkIGFub255bW91cyBub3cuXHJcbiAgICBjb25zdCBvbGRJc0Fub255bW91cyA9IHVzZXIuaXNBbm9ueW1vdXM7XHJcbiAgICBjb25zdCBuZXdJc0Fub255bW91cyA9ICEodXNlci5lbWFpbCAmJiBjb3JlQWNjb3VudC5wYXNzd29yZEhhc2gpICYmICEocHJvdmlkZXJEYXRhID09PSBudWxsIHx8IHByb3ZpZGVyRGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcHJvdmlkZXJEYXRhLmxlbmd0aCk7XHJcbiAgICBjb25zdCBpc0Fub255bW91cyA9ICFvbGRJc0Fub255bW91cyA/IGZhbHNlIDogbmV3SXNBbm9ueW1vdXM7XHJcbiAgICBjb25zdCB1cGRhdGVzID0ge1xyXG4gICAgICAgIHVpZDogY29yZUFjY291bnQubG9jYWxJZCxcclxuICAgICAgICBkaXNwbGF5TmFtZTogY29yZUFjY291bnQuZGlzcGxheU5hbWUgfHwgbnVsbCxcclxuICAgICAgICBwaG90b1VSTDogY29yZUFjY291bnQucGhvdG9VcmwgfHwgbnVsbCxcclxuICAgICAgICBlbWFpbDogY29yZUFjY291bnQuZW1haWwgfHwgbnVsbCxcclxuICAgICAgICBlbWFpbFZlcmlmaWVkOiBjb3JlQWNjb3VudC5lbWFpbFZlcmlmaWVkIHx8IGZhbHNlLFxyXG4gICAgICAgIHBob25lTnVtYmVyOiBjb3JlQWNjb3VudC5waG9uZU51bWJlciB8fCBudWxsLFxyXG4gICAgICAgIHRlbmFudElkOiBjb3JlQWNjb3VudC50ZW5hbnRJZCB8fCBudWxsLFxyXG4gICAgICAgIHByb3ZpZGVyRGF0YSxcclxuICAgICAgICBtZXRhZGF0YTogbmV3IFVzZXJNZXRhZGF0YShjb3JlQWNjb3VudC5jcmVhdGVkQXQsIGNvcmVBY2NvdW50Lmxhc3RMb2dpbkF0KSxcclxuICAgICAgICBpc0Fub255bW91c1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5hc3NpZ24odXNlciwgdXBkYXRlcyk7XHJcbn1cclxuLyoqXHJcbiAqIFJlbG9hZHMgdXNlciBhY2NvdW50IGRhdGEsIGlmIHNpZ25lZCBpbi5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gcmVsb2FkKHVzZXIpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGF3YWl0IF9yZWxvYWRXaXRob3V0U2F2aW5nKHVzZXJJbnRlcm5hbCk7XHJcbiAgICAvLyBFdmVuIHRob3VnaCB0aGUgY3VycmVudCB1c2VyIGhhc24ndCBjaGFuZ2VkLCB1cGRhdGVcclxuICAgIC8vIGN1cnJlbnQgdXNlciB3aWxsIHRyaWdnZXIgYSBwZXJzaXN0ZW5jZSB1cGRhdGUgdy8gdGhlXHJcbiAgICAvLyBuZXcgaW5mby5cclxuICAgIGF3YWl0IHVzZXJJbnRlcm5hbC5hdXRoLl9wZXJzaXN0VXNlcklmQ3VycmVudCh1c2VySW50ZXJuYWwpO1xyXG4gICAgdXNlckludGVybmFsLmF1dGguX25vdGlmeUxpc3RlbmVyc0lmQ3VycmVudCh1c2VySW50ZXJuYWwpO1xyXG59XHJcbmZ1bmN0aW9uIG1lcmdlUHJvdmlkZXJEYXRhKG9yaWdpbmFsLCBuZXdEYXRhKSB7XHJcbiAgICBjb25zdCBkZWR1cGVkID0gb3JpZ2luYWwuZmlsdGVyKG8gPT4gIW5ld0RhdGEuc29tZShuID0+IG4ucHJvdmlkZXJJZCA9PT0gby5wcm92aWRlcklkKSk7XHJcbiAgICByZXR1cm4gWy4uLmRlZHVwZWQsIC4uLm5ld0RhdGFdO1xyXG59XHJcbmZ1bmN0aW9uIGV4dHJhY3RQcm92aWRlckRhdGEocHJvdmlkZXJzKSB7XHJcbiAgICByZXR1cm4gcHJvdmlkZXJzLm1hcCgoX2EpID0+IHtcclxuICAgICAgICB2YXIgeyBwcm92aWRlcklkIH0gPSBfYSwgcHJvdmlkZXIgPSBfX3Jlc3QoX2EsIFtcInByb3ZpZGVySWRcIl0pO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQsXHJcbiAgICAgICAgICAgIHVpZDogcHJvdmlkZXIucmF3SWQgfHwgJycsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBwcm92aWRlci5kaXNwbGF5TmFtZSB8fCBudWxsLFxyXG4gICAgICAgICAgICBlbWFpbDogcHJvdmlkZXIuZW1haWwgfHwgbnVsbCxcclxuICAgICAgICAgICAgcGhvbmVOdW1iZXI6IHByb3ZpZGVyLnBob25lTnVtYmVyIHx8IG51bGwsXHJcbiAgICAgICAgICAgIHBob3RvVVJMOiBwcm92aWRlci5waG90b1VybCB8fCBudWxsXHJcbiAgICAgICAgfTtcclxuICAgIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlcXVlc3RTdHNUb2tlbihhdXRoLCByZWZyZXNoVG9rZW4pIHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX3BlcmZvcm1GZXRjaFdpdGhFcnJvckhhbmRsaW5nKGF1dGgsIHt9LCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgYm9keSA9IHF1ZXJ5c3RyaW5nKHtcclxuICAgICAgICAgICAgJ2dyYW50X3R5cGUnOiAncmVmcmVzaF90b2tlbicsXHJcbiAgICAgICAgICAgICdyZWZyZXNoX3Rva2VuJzogcmVmcmVzaFRva2VuXHJcbiAgICAgICAgfSkuc2xpY2UoMSk7XHJcbiAgICAgICAgY29uc3QgeyB0b2tlbkFwaUhvc3QsIGFwaUtleSB9ID0gYXV0aC5jb25maWc7XHJcbiAgICAgICAgY29uc3QgdXJsID0gX2dldEZpbmFsVGFyZ2V0KGF1dGgsIHRva2VuQXBpSG9zdCwgXCIvdjEvdG9rZW5cIiAvKiBUT0tFTiAqLywgYGtleT0ke2FwaUtleX1gKTtcclxuICAgICAgICBjb25zdCBoZWFkZXJzID0gYXdhaXQgYXV0aC5fZ2V0QWRkaXRpb25hbEhlYWRlcnMoKTtcclxuICAgICAgICBoZWFkZXJzW1wiQ29udGVudC1UeXBlXCIgLyogQ09OVEVOVF9UWVBFICovXSA9ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnO1xyXG4gICAgICAgIHJldHVybiBGZXRjaFByb3ZpZGVyLmZldGNoKCkodXJsLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIgLyogUE9TVCAqLyxcclxuICAgICAgICAgICAgaGVhZGVycyxcclxuICAgICAgICAgICAgYm9keVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICAvLyBUaGUgcmVzcG9uc2UgY29tZXMgYmFjayBpbiBzbmFrZV9jYXNlLiBDb252ZXJ0IHRvIGNhbWVsOlxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBhY2Nlc3NUb2tlbjogcmVzcG9uc2UuYWNjZXNzX3Rva2VuLFxyXG4gICAgICAgIGV4cGlyZXNJbjogcmVzcG9uc2UuZXhwaXJlc19pbixcclxuICAgICAgICByZWZyZXNoVG9rZW46IHJlc3BvbnNlLnJlZnJlc2hfdG9rZW5cclxuICAgIH07XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFdlIG5lZWQgdG8gbWFyayB0aGlzIGNsYXNzIGFzIGludGVybmFsIGV4cGxpY2l0bHkgdG8gZXhjbHVkZSBpdCBpbiB0aGUgcHVibGljIHR5cGluZ3MsIGJlY2F1c2VcclxuICogaXQgcmVmZXJlbmNlcyBBdXRoSW50ZXJuYWwgd2hpY2ggaGFzIGEgY2lyY3VsYXIgZGVwZW5kZW5jeSB3aXRoIFVzZXJJbnRlcm5hbC5cclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jbGFzcyBTdHNUb2tlbk1hbmFnZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5yZWZyZXNoVG9rZW4gPSBudWxsO1xyXG4gICAgICAgIHRoaXMuYWNjZXNzVG9rZW4gPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZXhwaXJhdGlvblRpbWUgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgZ2V0IGlzRXhwaXJlZCgpIHtcclxuICAgICAgICByZXR1cm4gKCF0aGlzLmV4cGlyYXRpb25UaW1lIHx8XHJcbiAgICAgICAgICAgIERhdGUubm93KCkgPiB0aGlzLmV4cGlyYXRpb25UaW1lIC0gMzAwMDAgLyogVE9LRU5fUkVGUkVTSCAqLyk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGVGcm9tU2VydmVyUmVzcG9uc2UocmVzcG9uc2UpIHtcclxuICAgICAgICBfYXNzZXJ0KHJlc3BvbnNlLmlkVG9rZW4sIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgX2Fzc2VydCh0eXBlb2YgcmVzcG9uc2UuaWRUb2tlbiAhPT0gJ3VuZGVmaW5lZCcsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgX2Fzc2VydCh0eXBlb2YgcmVzcG9uc2UucmVmcmVzaFRva2VuICE9PSAndW5kZWZpbmVkJywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICBjb25zdCBleHBpcmVzSW4gPSAnZXhwaXJlc0luJyBpbiByZXNwb25zZSAmJiB0eXBlb2YgcmVzcG9uc2UuZXhwaXJlc0luICE9PSAndW5kZWZpbmVkJ1xyXG4gICAgICAgICAgICA/IE51bWJlcihyZXNwb25zZS5leHBpcmVzSW4pXHJcbiAgICAgICAgICAgIDogX3Rva2VuRXhwaXJlc0luKHJlc3BvbnNlLmlkVG9rZW4pO1xyXG4gICAgICAgIHRoaXMudXBkYXRlVG9rZW5zQW5kRXhwaXJhdGlvbihyZXNwb25zZS5pZFRva2VuLCByZXNwb25zZS5yZWZyZXNoVG9rZW4sIGV4cGlyZXNJbik7XHJcbiAgICB9XHJcbiAgICBhc3luYyBnZXRUb2tlbihhdXRoLCBmb3JjZVJlZnJlc2ggPSBmYWxzZSkge1xyXG4gICAgICAgIF9hc3NlcnQoIXRoaXMuYWNjZXNzVG9rZW4gfHwgdGhpcy5yZWZyZXNoVG9rZW4sIGF1dGgsIFwidXNlci10b2tlbi1leHBpcmVkXCIgLyogVE9LRU5fRVhQSVJFRCAqLyk7XHJcbiAgICAgICAgaWYgKCFmb3JjZVJlZnJlc2ggJiYgdGhpcy5hY2Nlc3NUb2tlbiAmJiAhdGhpcy5pc0V4cGlyZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWNjZXNzVG9rZW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnJlZnJlc2hUb2tlbikge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2goYXV0aCwgdGhpcy5yZWZyZXNoVG9rZW4pO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hY2Nlc3NUb2tlbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBjbGVhclJlZnJlc2hUb2tlbigpIHtcclxuICAgICAgICB0aGlzLnJlZnJlc2hUb2tlbiA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBhc3luYyByZWZyZXNoKGF1dGgsIG9sZFRva2VuKSB7XHJcbiAgICAgICAgY29uc3QgeyBhY2Nlc3NUb2tlbiwgcmVmcmVzaFRva2VuLCBleHBpcmVzSW4gfSA9IGF3YWl0IHJlcXVlc3RTdHNUb2tlbihhdXRoLCBvbGRUb2tlbik7XHJcbiAgICAgICAgdGhpcy51cGRhdGVUb2tlbnNBbmRFeHBpcmF0aW9uKGFjY2Vzc1Rva2VuLCByZWZyZXNoVG9rZW4sIE51bWJlcihleHBpcmVzSW4pKTtcclxuICAgIH1cclxuICAgIHVwZGF0ZVRva2Vuc0FuZEV4cGlyYXRpb24oYWNjZXNzVG9rZW4sIHJlZnJlc2hUb2tlbiwgZXhwaXJlc0luU2VjKSB7XHJcbiAgICAgICAgdGhpcy5yZWZyZXNoVG9rZW4gPSByZWZyZXNoVG9rZW4gfHwgbnVsbDtcclxuICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gYWNjZXNzVG9rZW4gfHwgbnVsbDtcclxuICAgICAgICB0aGlzLmV4cGlyYXRpb25UaW1lID0gRGF0ZS5ub3coKSArIGV4cGlyZXNJblNlYyAqIDEwMDA7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZnJvbUpTT04oYXBwTmFtZSwgb2JqZWN0KSB7XHJcbiAgICAgICAgY29uc3QgeyByZWZyZXNoVG9rZW4sIGFjY2Vzc1Rva2VuLCBleHBpcmF0aW9uVGltZSB9ID0gb2JqZWN0O1xyXG4gICAgICAgIGNvbnN0IG1hbmFnZXIgPSBuZXcgU3RzVG9rZW5NYW5hZ2VyKCk7XHJcbiAgICAgICAgaWYgKHJlZnJlc2hUb2tlbikge1xyXG4gICAgICAgICAgICBfYXNzZXJ0KHR5cGVvZiByZWZyZXNoVG9rZW4gPT09ICdzdHJpbmcnLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8sIHtcclxuICAgICAgICAgICAgICAgIGFwcE5hbWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG1hbmFnZXIucmVmcmVzaFRva2VuID0gcmVmcmVzaFRva2VuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgX2Fzc2VydCh0eXBlb2YgYWNjZXNzVG9rZW4gPT09ICdzdHJpbmcnLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8sIHtcclxuICAgICAgICAgICAgICAgIGFwcE5hbWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG1hbmFnZXIuYWNjZXNzVG9rZW4gPSBhY2Nlc3NUb2tlbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGV4cGlyYXRpb25UaW1lKSB7XHJcbiAgICAgICAgICAgIF9hc3NlcnQodHlwZW9mIGV4cGlyYXRpb25UaW1lID09PSAnbnVtYmVyJywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovLCB7XHJcbiAgICAgICAgICAgICAgICBhcHBOYW1lXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBtYW5hZ2VyLmV4cGlyYXRpb25UaW1lID0gZXhwaXJhdGlvblRpbWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtYW5hZ2VyO1xyXG4gICAgfVxyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlZnJlc2hUb2tlbjogdGhpcy5yZWZyZXNoVG9rZW4sXHJcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiB0aGlzLmFjY2Vzc1Rva2VuLFxyXG4gICAgICAgICAgICBleHBpcmF0aW9uVGltZTogdGhpcy5leHBpcmF0aW9uVGltZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBfYXNzaWduKHN0c1Rva2VuTWFuYWdlcikge1xyXG4gICAgICAgIHRoaXMuYWNjZXNzVG9rZW4gPSBzdHNUb2tlbk1hbmFnZXIuYWNjZXNzVG9rZW47XHJcbiAgICAgICAgdGhpcy5yZWZyZXNoVG9rZW4gPSBzdHNUb2tlbk1hbmFnZXIucmVmcmVzaFRva2VuO1xyXG4gICAgICAgIHRoaXMuZXhwaXJhdGlvblRpbWUgPSBzdHNUb2tlbk1hbmFnZXIuZXhwaXJhdGlvblRpbWU7XHJcbiAgICB9XHJcbiAgICBfY2xvbmUoKSB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24obmV3IFN0c1Rva2VuTWFuYWdlcigpLCB0aGlzLnRvSlNPTigpKTtcclxuICAgIH1cclxuICAgIF9wZXJmb3JtUmVmcmVzaCgpIHtcclxuICAgICAgICByZXR1cm4gZGVidWdGYWlsKCdub3QgaW1wbGVtZW50ZWQnKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBhc3NlcnRTdHJpbmdPclVuZGVmaW5lZChhc3NlcnRpb24sIGFwcE5hbWUpIHtcclxuICAgIF9hc3NlcnQodHlwZW9mIGFzc2VydGlvbiA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGFzc2VydGlvbiA9PT0gJ3VuZGVmaW5lZCcsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLywgeyBhcHBOYW1lIH0pO1xyXG59XHJcbmNsYXNzIFVzZXJJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKF9hKSB7XHJcbiAgICAgICAgdmFyIHsgdWlkLCBhdXRoLCBzdHNUb2tlbk1hbmFnZXIgfSA9IF9hLCBvcHQgPSBfX3Jlc3QoX2EsIFtcInVpZFwiLCBcImF1dGhcIiwgXCJzdHNUb2tlbk1hbmFnZXJcIl0pO1xyXG4gICAgICAgIC8vIEZvciB0aGUgdXNlciBvYmplY3QsIHByb3ZpZGVyIGlzIGFsd2F5cyBGaXJlYmFzZS5cclxuICAgICAgICB0aGlzLnByb3ZpZGVySWQgPSBcImZpcmViYXNlXCIgLyogRklSRUJBU0UgKi87XHJcbiAgICAgICAgdGhpcy5lbWFpbFZlcmlmaWVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pc0Fub255bW91cyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMudGVuYW50SWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJEYXRhID0gW107XHJcbiAgICAgICAgdGhpcy5wcm9hY3RpdmVSZWZyZXNoID0gbmV3IFByb2FjdGl2ZVJlZnJlc2godGhpcyk7XHJcbiAgICAgICAgdGhpcy5yZWxvYWRVc2VySW5mbyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5yZWxvYWRMaXN0ZW5lciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy51aWQgPSB1aWQ7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gYXV0aDtcclxuICAgICAgICB0aGlzLnN0c1Rva2VuTWFuYWdlciA9IHN0c1Rva2VuTWFuYWdlcjtcclxuICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gc3RzVG9rZW5NYW5hZ2VyLmFjY2Vzc1Rva2VuO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheU5hbWUgPSBvcHQuZGlzcGxheU5hbWUgfHwgbnVsbDtcclxuICAgICAgICB0aGlzLmVtYWlsID0gb3B0LmVtYWlsIHx8IG51bGw7XHJcbiAgICAgICAgdGhpcy5lbWFpbFZlcmlmaWVkID0gb3B0LmVtYWlsVmVyaWZpZWQgfHwgZmFsc2U7XHJcbiAgICAgICAgdGhpcy5waG9uZU51bWJlciA9IG9wdC5waG9uZU51bWJlciB8fCBudWxsO1xyXG4gICAgICAgIHRoaXMucGhvdG9VUkwgPSBvcHQucGhvdG9VUkwgfHwgbnVsbDtcclxuICAgICAgICB0aGlzLmlzQW5vbnltb3VzID0gb3B0LmlzQW5vbnltb3VzIHx8IGZhbHNlO1xyXG4gICAgICAgIHRoaXMudGVuYW50SWQgPSBvcHQudGVuYW50SWQgfHwgbnVsbDtcclxuICAgICAgICB0aGlzLm1ldGFkYXRhID0gbmV3IFVzZXJNZXRhZGF0YShvcHQuY3JlYXRlZEF0IHx8IHVuZGVmaW5lZCwgb3B0Lmxhc3RMb2dpbkF0IHx8IHVuZGVmaW5lZCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBnZXRJZFRva2VuKGZvcmNlUmVmcmVzaCkge1xyXG4gICAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gYXdhaXQgX2xvZ291dElmSW52YWxpZGF0ZWQodGhpcywgdGhpcy5zdHNUb2tlbk1hbmFnZXIuZ2V0VG9rZW4odGhpcy5hdXRoLCBmb3JjZVJlZnJlc2gpKTtcclxuICAgICAgICBfYXNzZXJ0KGFjY2Vzc1Rva2VuLCB0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgaWYgKHRoaXMuYWNjZXNzVG9rZW4gIT09IGFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWNjZXNzVG9rZW4gPSBhY2Nlc3NUb2tlbjtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hdXRoLl9wZXJzaXN0VXNlcklmQ3VycmVudCh0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5hdXRoLl9ub3RpZnlMaXN0ZW5lcnNJZkN1cnJlbnQodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhY2Nlc3NUb2tlbjtcclxuICAgIH1cclxuICAgIGdldElkVG9rZW5SZXN1bHQoZm9yY2VSZWZyZXNoKSB7XHJcbiAgICAgICAgcmV0dXJuIGdldElkVG9rZW5SZXN1bHQodGhpcywgZm9yY2VSZWZyZXNoKTtcclxuICAgIH1cclxuICAgIHJlbG9hZCgpIHtcclxuICAgICAgICByZXR1cm4gcmVsb2FkKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgX2Fzc2lnbih1c2VyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMgPT09IHVzZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfYXNzZXJ0KHRoaXMudWlkID09PSB1c2VyLnVpZCwgdGhpcy5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheU5hbWUgPSB1c2VyLmRpc3BsYXlOYW1lO1xyXG4gICAgICAgIHRoaXMucGhvdG9VUkwgPSB1c2VyLnBob3RvVVJMO1xyXG4gICAgICAgIHRoaXMuZW1haWwgPSB1c2VyLmVtYWlsO1xyXG4gICAgICAgIHRoaXMuZW1haWxWZXJpZmllZCA9IHVzZXIuZW1haWxWZXJpZmllZDtcclxuICAgICAgICB0aGlzLnBob25lTnVtYmVyID0gdXNlci5waG9uZU51bWJlcjtcclxuICAgICAgICB0aGlzLmlzQW5vbnltb3VzID0gdXNlci5pc0Fub255bW91cztcclxuICAgICAgICB0aGlzLnRlbmFudElkID0gdXNlci50ZW5hbnRJZDtcclxuICAgICAgICB0aGlzLnByb3ZpZGVyRGF0YSA9IHVzZXIucHJvdmlkZXJEYXRhLm1hcCh1c2VySW5mbyA9PiAoT2JqZWN0LmFzc2lnbih7fSwgdXNlckluZm8pKSk7XHJcbiAgICAgICAgdGhpcy5tZXRhZGF0YS5fY29weSh1c2VyLm1ldGFkYXRhKTtcclxuICAgICAgICB0aGlzLnN0c1Rva2VuTWFuYWdlci5fYXNzaWduKHVzZXIuc3RzVG9rZW5NYW5hZ2VyKTtcclxuICAgIH1cclxuICAgIF9jbG9uZShhdXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBVc2VySW1wbChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMpLCB7IGF1dGgsIHN0c1Rva2VuTWFuYWdlcjogdGhpcy5zdHNUb2tlbk1hbmFnZXIuX2Nsb25lKCkgfSkpO1xyXG4gICAgfVxyXG4gICAgX29uUmVsb2FkKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgLy8gVGhlcmUgc2hvdWxkIG9ubHkgZXZlciBiZSBvbmUgbGlzdGVuZXIsIGFuZCB0aGF0IGlzIGEgc2luZ2xlIGluc3RhbmNlIG9mIE11bHRpRmFjdG9yVXNlclxyXG4gICAgICAgIF9hc3NlcnQoIXRoaXMucmVsb2FkTGlzdGVuZXIsIHRoaXMuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICB0aGlzLnJlbG9hZExpc3RlbmVyID0gY2FsbGJhY2s7XHJcbiAgICAgICAgaWYgKHRoaXMucmVsb2FkVXNlckluZm8pIHtcclxuICAgICAgICAgICAgdGhpcy5fbm90aWZ5UmVsb2FkTGlzdGVuZXIodGhpcy5yZWxvYWRVc2VySW5mbyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVsb2FkVXNlckluZm8gPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9ub3RpZnlSZWxvYWRMaXN0ZW5lcih1c2VySW5mbykge1xyXG4gICAgICAgIGlmICh0aGlzLnJlbG9hZExpc3RlbmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVsb2FkTGlzdGVuZXIodXNlckluZm8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gSWYgbm8gbGlzdGVuZXIgaXMgc3Vic2NyaWJlZCB5ZXQsIHNhdmUgdGhlIHJlc3VsdCBzbyBpdCdzIGF2YWlsYWJsZSB3aGVuIHRoZXkgZG8gc3Vic2NyaWJlXHJcbiAgICAgICAgICAgIHRoaXMucmVsb2FkVXNlckluZm8gPSB1c2VySW5mbztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfc3RhcnRQcm9hY3RpdmVSZWZyZXNoKCkge1xyXG4gICAgICAgIHRoaXMucHJvYWN0aXZlUmVmcmVzaC5fc3RhcnQoKTtcclxuICAgIH1cclxuICAgIF9zdG9wUHJvYWN0aXZlUmVmcmVzaCgpIHtcclxuICAgICAgICB0aGlzLnByb2FjdGl2ZVJlZnJlc2guX3N0b3AoKTtcclxuICAgIH1cclxuICAgIGFzeW5jIF91cGRhdGVUb2tlbnNJZk5lY2Vzc2FyeShyZXNwb25zZSwgcmVsb2FkID0gZmFsc2UpIHtcclxuICAgICAgICBsZXQgdG9rZW5zUmVmcmVzaGVkID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlLmlkVG9rZW4gJiZcclxuICAgICAgICAgICAgcmVzcG9uc2UuaWRUb2tlbiAhPT0gdGhpcy5zdHNUb2tlbk1hbmFnZXIuYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgdGhpcy5zdHNUb2tlbk1hbmFnZXIudXBkYXRlRnJvbVNlcnZlclJlc3BvbnNlKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgdG9rZW5zUmVmcmVzaGVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlbG9hZCkge1xyXG4gICAgICAgICAgICBhd2FpdCBfcmVsb2FkV2l0aG91dFNhdmluZyh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYXdhaXQgdGhpcy5hdXRoLl9wZXJzaXN0VXNlcklmQ3VycmVudCh0aGlzKTtcclxuICAgICAgICBpZiAodG9rZW5zUmVmcmVzaGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0aC5fbm90aWZ5TGlzdGVuZXJzSWZDdXJyZW50KHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGFzeW5jIGRlbGV0ZSgpIHtcclxuICAgICAgICBjb25zdCBpZFRva2VuID0gYXdhaXQgdGhpcy5nZXRJZFRva2VuKCk7XHJcbiAgICAgICAgYXdhaXQgX2xvZ291dElmSW52YWxpZGF0ZWQodGhpcywgZGVsZXRlQWNjb3VudCh0aGlzLmF1dGgsIHsgaWRUb2tlbiB9KSk7XHJcbiAgICAgICAgdGhpcy5zdHNUb2tlbk1hbmFnZXIuY2xlYXJSZWZyZXNoVG9rZW4oKTtcclxuICAgICAgICAvLyBUT0RPOiBEZXRlcm1pbmUgaWYgY2FuY2VsbGFibGUtcHJvbWlzZXMgYXJlIG5lY2Vzc2FyeSB0byB1c2UgaW4gdGhpcyBjbGFzcyBzbyB0aGF0IGRlbGV0ZSgpXHJcbiAgICAgICAgLy8gICAgICAgY2FuY2VscyBwZW5kaW5nIGFjdGlvbnMuLi5cclxuICAgICAgICByZXR1cm4gdGhpcy5hdXRoLnNpZ25PdXQoKTtcclxuICAgIH1cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHsgdWlkOiB0aGlzLnVpZCwgZW1haWw6IHRoaXMuZW1haWwgfHwgdW5kZWZpbmVkLCBlbWFpbFZlcmlmaWVkOiB0aGlzLmVtYWlsVmVyaWZpZWQsIGRpc3BsYXlOYW1lOiB0aGlzLmRpc3BsYXlOYW1lIHx8IHVuZGVmaW5lZCwgaXNBbm9ueW1vdXM6IHRoaXMuaXNBbm9ueW1vdXMsIHBob3RvVVJMOiB0aGlzLnBob3RvVVJMIHx8IHVuZGVmaW5lZCwgcGhvbmVOdW1iZXI6IHRoaXMucGhvbmVOdW1iZXIgfHwgdW5kZWZpbmVkLCB0ZW5hbnRJZDogdGhpcy50ZW5hbnRJZCB8fCB1bmRlZmluZWQsIHByb3ZpZGVyRGF0YTogdGhpcy5wcm92aWRlckRhdGEubWFwKHVzZXJJbmZvID0+IChPYmplY3QuYXNzaWduKHt9LCB1c2VySW5mbykpKSwgc3RzVG9rZW5NYW5hZ2VyOiB0aGlzLnN0c1Rva2VuTWFuYWdlci50b0pTT04oKSwgXHJcbiAgICAgICAgICAgIC8vIFJlZGlyZWN0IGV2ZW50IElEIG11c3QgYmUgbWFpbnRhaW5lZCBpbiBjYXNlIHRoZXJlIGlzIGEgcGVuZGluZ1xyXG4gICAgICAgICAgICAvLyByZWRpcmVjdCBldmVudC5cclxuICAgICAgICAgICAgX3JlZGlyZWN0RXZlbnRJZDogdGhpcy5fcmVkaXJlY3RFdmVudElkIH0sIHRoaXMubWV0YWRhdGEudG9KU09OKCkpLCB7IFxyXG4gICAgICAgICAgICAvLyBSZXF1aXJlZCBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIHRoZSBsZWdhY3kgU0RLIChnby9maXJlYmFzZS1hdXRoLXNkay1wZXJzaXN0ZW5jZS1wYXJzaW5nKTpcclxuICAgICAgICAgICAgYXBpS2V5OiB0aGlzLmF1dGguY29uZmlnLmFwaUtleSwgYXBwTmFtZTogdGhpcy5hdXRoLm5hbWUgfSk7XHJcbiAgICB9XHJcbiAgICBnZXQgcmVmcmVzaFRva2VuKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0c1Rva2VuTWFuYWdlci5yZWZyZXNoVG9rZW4gfHwgJyc7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgX2Zyb21KU09OKGF1dGgsIG9iamVjdCkge1xyXG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2g7XHJcbiAgICAgICAgY29uc3QgZGlzcGxheU5hbWUgPSAoX2EgPSBvYmplY3QuZGlzcGxheU5hbWUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCBlbWFpbCA9IChfYiA9IG9iamVjdC5lbWFpbCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IHBob25lTnVtYmVyID0gKF9jID0gb2JqZWN0LnBob25lTnVtYmVyKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3QgcGhvdG9VUkwgPSAoX2QgPSBvYmplY3QucGhvdG9VUkwpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCB0ZW5hbnRJZCA9IChfZSA9IG9iamVjdC50ZW5hbnRJZCkgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IF9yZWRpcmVjdEV2ZW50SWQgPSAoX2YgPSBvYmplY3QuX3JlZGlyZWN0RXZlbnRJZCkgIT09IG51bGwgJiYgX2YgIT09IHZvaWQgMCA/IF9mIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IGNyZWF0ZWRBdCA9IChfZyA9IG9iamVjdC5jcmVhdGVkQXQpICE9PSBudWxsICYmIF9nICE9PSB2b2lkIDAgPyBfZyA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCBsYXN0TG9naW5BdCA9IChfaCA9IG9iamVjdC5sYXN0TG9naW5BdCkgIT09IG51bGwgJiYgX2ggIT09IHZvaWQgMCA/IF9oIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IHsgdWlkLCBlbWFpbFZlcmlmaWVkLCBpc0Fub255bW91cywgcHJvdmlkZXJEYXRhLCBzdHNUb2tlbk1hbmFnZXI6IHBsYWluT2JqZWN0VG9rZW5NYW5hZ2VyIH0gPSBvYmplY3Q7XHJcbiAgICAgICAgX2Fzc2VydCh1aWQgJiYgcGxhaW5PYmplY3RUb2tlbk1hbmFnZXIsIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgY29uc3Qgc3RzVG9rZW5NYW5hZ2VyID0gU3RzVG9rZW5NYW5hZ2VyLmZyb21KU09OKHRoaXMubmFtZSwgcGxhaW5PYmplY3RUb2tlbk1hbmFnZXIpO1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIHVpZCA9PT0gJ3N0cmluZycsIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQoZGlzcGxheU5hbWUsIGF1dGgubmFtZSk7XHJcbiAgICAgICAgYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQoZW1haWwsIGF1dGgubmFtZSk7XHJcbiAgICAgICAgX2Fzc2VydCh0eXBlb2YgZW1haWxWZXJpZmllZCA9PT0gJ2Jvb2xlYW4nLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIGlzQW5vbnltb3VzID09PSAnYm9vbGVhbicsIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQocGhvbmVOdW1iZXIsIGF1dGgubmFtZSk7XHJcbiAgICAgICAgYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQocGhvdG9VUkwsIGF1dGgubmFtZSk7XHJcbiAgICAgICAgYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQodGVuYW50SWQsIGF1dGgubmFtZSk7XHJcbiAgICAgICAgYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQoX3JlZGlyZWN0RXZlbnRJZCwgYXV0aC5uYW1lKTtcclxuICAgICAgICBhc3NlcnRTdHJpbmdPclVuZGVmaW5lZChjcmVhdGVkQXQsIGF1dGgubmFtZSk7XHJcbiAgICAgICAgYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQobGFzdExvZ2luQXQsIGF1dGgubmFtZSk7XHJcbiAgICAgICAgY29uc3QgdXNlciA9IG5ldyBVc2VySW1wbCh7XHJcbiAgICAgICAgICAgIHVpZCxcclxuICAgICAgICAgICAgYXV0aCxcclxuICAgICAgICAgICAgZW1haWwsXHJcbiAgICAgICAgICAgIGVtYWlsVmVyaWZpZWQsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICBpc0Fub255bW91cyxcclxuICAgICAgICAgICAgcGhvdG9VUkwsXHJcbiAgICAgICAgICAgIHBob25lTnVtYmVyLFxyXG4gICAgICAgICAgICB0ZW5hbnRJZCxcclxuICAgICAgICAgICAgc3RzVG9rZW5NYW5hZ2VyLFxyXG4gICAgICAgICAgICBjcmVhdGVkQXQsXHJcbiAgICAgICAgICAgIGxhc3RMb2dpbkF0XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHByb3ZpZGVyRGF0YSAmJiBBcnJheS5pc0FycmF5KHByb3ZpZGVyRGF0YSkpIHtcclxuICAgICAgICAgICAgdXNlci5wcm92aWRlckRhdGEgPSBwcm92aWRlckRhdGEubWFwKHVzZXJJbmZvID0+IChPYmplY3QuYXNzaWduKHt9LCB1c2VySW5mbykpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKF9yZWRpcmVjdEV2ZW50SWQpIHtcclxuICAgICAgICAgICAgdXNlci5fcmVkaXJlY3RFdmVudElkID0gX3JlZGlyZWN0RXZlbnRJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHVzZXI7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemUgYSBVc2VyIGZyb20gYW4gaWRUb2tlbiBzZXJ2ZXIgcmVzcG9uc2VcclxuICAgICAqIEBwYXJhbSBhdXRoXHJcbiAgICAgKiBAcGFyYW0gaWRUb2tlblJlc3BvbnNlXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhc3luYyBfZnJvbUlkVG9rZW5SZXNwb25zZShhdXRoLCBpZFRva2VuUmVzcG9uc2UsIGlzQW5vbnltb3VzID0gZmFsc2UpIHtcclxuICAgICAgICBjb25zdCBzdHNUb2tlbk1hbmFnZXIgPSBuZXcgU3RzVG9rZW5NYW5hZ2VyKCk7XHJcbiAgICAgICAgc3RzVG9rZW5NYW5hZ2VyLnVwZGF0ZUZyb21TZXJ2ZXJSZXNwb25zZShpZFRva2VuUmVzcG9uc2UpO1xyXG4gICAgICAgIC8vIEluaXRpYWxpemUgdGhlIEZpcmViYXNlIEF1dGggdXNlci5cclxuICAgICAgICBjb25zdCB1c2VyID0gbmV3IFVzZXJJbXBsKHtcclxuICAgICAgICAgICAgdWlkOiBpZFRva2VuUmVzcG9uc2UubG9jYWxJZCxcclxuICAgICAgICAgICAgYXV0aCxcclxuICAgICAgICAgICAgc3RzVG9rZW5NYW5hZ2VyLFxyXG4gICAgICAgICAgICBpc0Fub255bW91c1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIFVwZGF0ZXMgdGhlIHVzZXIgaW5mbyBhbmQgZGF0YSBhbmQgcmVzb2x2ZXMgd2l0aCBhIHVzZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgYXdhaXQgX3JlbG9hZFdpdGhvdXRTYXZpbmcodXNlcik7XHJcbiAgICAgICAgcmV0dXJuIHVzZXI7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgSW5NZW1vcnlQZXJzaXN0ZW5jZSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnR5cGUgPSBcIk5PTkVcIiAvKiBOT05FICovO1xyXG4gICAgICAgIHRoaXMuc3RvcmFnZSA9IHt9O1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX2lzQXZhaWxhYmxlKCkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX3NldChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5zdG9yYWdlW2tleV0gPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9nZXQoa2V5KSB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLnN0b3JhZ2Vba2V5XTtcclxuICAgICAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/IG51bGwgOiB2YWx1ZTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9yZW1vdmUoa2V5KSB7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMuc3RvcmFnZVtrZXldO1xyXG4gICAgfVxyXG4gICAgX2FkZExpc3RlbmVyKF9rZXksIF9saXN0ZW5lcikge1xyXG4gICAgICAgIC8vIExpc3RlbmVycyBhcmUgbm90IHN1cHBvcnRlZCBmb3IgaW4tbWVtb3J5IHN0b3JhZ2Ugc2luY2UgaXQgY2Fubm90IGJlIHNoYXJlZCBhY3Jvc3Mgd2luZG93cy93b3JrZXJzXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgX3JlbW92ZUxpc3RlbmVyKF9rZXksIF9saXN0ZW5lcikge1xyXG4gICAgICAgIC8vIExpc3RlbmVycyBhcmUgbm90IHN1cHBvcnRlZCBmb3IgaW4tbWVtb3J5IHN0b3JhZ2Ugc2luY2UgaXQgY2Fubm90IGJlIHNoYXJlZCBhY3Jvc3Mgd2luZG93cy93b3JrZXJzXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG59XHJcbkluTWVtb3J5UGVyc2lzdGVuY2UudHlwZSA9ICdOT05FJztcclxuLyoqXHJcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBQZXJzaXN0ZW5jZX0gb2YgdHlwZSAnTk9ORScuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGluTWVtb3J5UGVyc2lzdGVuY2UgPSBJbk1lbW9yeVBlcnNpc3RlbmNlO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfcGVyc2lzdGVuY2VLZXlOYW1lKGtleSwgYXBpS2V5LCBhcHBOYW1lKSB7XHJcbiAgICByZXR1cm4gYCR7XCJmaXJlYmFzZVwiIC8qIFBFUlNJU1RFTkNFICovfToke2tleX06JHthcGlLZXl9OiR7YXBwTmFtZX1gO1xyXG59XHJcbmNsYXNzIFBlcnNpc3RlbmNlVXNlck1hbmFnZXIge1xyXG4gICAgY29uc3RydWN0b3IocGVyc2lzdGVuY2UsIGF1dGgsIHVzZXJLZXkpIHtcclxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gcGVyc2lzdGVuY2U7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gYXV0aDtcclxuICAgICAgICB0aGlzLnVzZXJLZXkgPSB1c2VyS2V5O1xyXG4gICAgICAgIGNvbnN0IHsgY29uZmlnLCBuYW1lIH0gPSB0aGlzLmF1dGg7XHJcbiAgICAgICAgdGhpcy5mdWxsVXNlcktleSA9IF9wZXJzaXN0ZW5jZUtleU5hbWUodGhpcy51c2VyS2V5LCBjb25maWcuYXBpS2V5LCBuYW1lKTtcclxuICAgICAgICB0aGlzLmZ1bGxQZXJzaXN0ZW5jZUtleSA9IF9wZXJzaXN0ZW5jZUtleU5hbWUoXCJwZXJzaXN0ZW5jZVwiIC8qIFBFUlNJU1RFTkNFX1VTRVIgKi8sIGNvbmZpZy5hcGlLZXksIG5hbWUpO1xyXG4gICAgICAgIHRoaXMuYm91bmRFdmVudEhhbmRsZXIgPSBhdXRoLl9vblN0b3JhZ2VFdmVudC5iaW5kKGF1dGgpO1xyXG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UuX2FkZExpc3RlbmVyKHRoaXMuZnVsbFVzZXJLZXksIHRoaXMuYm91bmRFdmVudEhhbmRsZXIpO1xyXG4gICAgfVxyXG4gICAgc2V0Q3VycmVudFVzZXIodXNlcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLl9zZXQodGhpcy5mdWxsVXNlcktleSwgdXNlci50b0pTT04oKSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBnZXRDdXJyZW50VXNlcigpIHtcclxuICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5fZ2V0KHRoaXMuZnVsbFVzZXJLZXkpO1xyXG4gICAgICAgIHJldHVybiBibG9iID8gVXNlckltcGwuX2Zyb21KU09OKHRoaXMuYXV0aCwgYmxvYikgOiBudWxsO1xyXG4gICAgfVxyXG4gICAgcmVtb3ZlQ3VycmVudFVzZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuX3JlbW92ZSh0aGlzLmZ1bGxVc2VyS2V5KTtcclxuICAgIH1cclxuICAgIHNhdmVQZXJzaXN0ZW5jZUZvclJlZGlyZWN0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLl9zZXQodGhpcy5mdWxsUGVyc2lzdGVuY2VLZXksIHRoaXMucGVyc2lzdGVuY2UudHlwZSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBzZXRQZXJzaXN0ZW5jZShuZXdQZXJzaXN0ZW5jZSkge1xyXG4gICAgICAgIGlmICh0aGlzLnBlcnNpc3RlbmNlID09PSBuZXdQZXJzaXN0ZW5jZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gYXdhaXQgdGhpcy5nZXRDdXJyZW50VXNlcigpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMucmVtb3ZlQ3VycmVudFVzZXIoKTtcclxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gbmV3UGVyc2lzdGVuY2U7XHJcbiAgICAgICAgaWYgKGN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNldEN1cnJlbnRVc2VyKGN1cnJlbnRVc2VyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBkZWxldGUoKSB7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZS5fcmVtb3ZlTGlzdGVuZXIodGhpcy5mdWxsVXNlcktleSwgdGhpcy5ib3VuZEV2ZW50SGFuZGxlcik7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgYXN5bmMgY3JlYXRlKGF1dGgsIHBlcnNpc3RlbmNlSGllcmFyY2h5LCB1c2VyS2V5ID0gXCJhdXRoVXNlclwiIC8qIEFVVEhfVVNFUiAqLykge1xyXG4gICAgICAgIGlmICghcGVyc2lzdGVuY2VIaWVyYXJjaHkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VVc2VyTWFuYWdlcihfZ2V0SW5zdGFuY2UoaW5NZW1vcnlQZXJzaXN0ZW5jZSksIGF1dGgsIHVzZXJLZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBFbGltaW5hdGUgYW55IHBlcnNpc3RlbmNlcyB0aGF0IGFyZSBub3QgYXZhaWxhYmxlXHJcbiAgICAgICAgY29uc3QgYXZhaWxhYmxlUGVyc2lzdGVuY2VzID0gKGF3YWl0IFByb21pc2UuYWxsKHBlcnNpc3RlbmNlSGllcmFyY2h5Lm1hcChhc3luYyAocGVyc2lzdGVuY2UpID0+IHtcclxuICAgICAgICAgICAgaWYgKGF3YWl0IHBlcnNpc3RlbmNlLl9pc0F2YWlsYWJsZSgpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGVyc2lzdGVuY2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9KSkpLmZpbHRlcihwZXJzaXN0ZW5jZSA9PiBwZXJzaXN0ZW5jZSk7XHJcbiAgICAgICAgLy8gRmFsbCBiYWNrIHRvIHRoZSBmaXJzdCBwZXJzaXN0ZW5jZSBsaXN0ZWQsIG9yIGluIG1lbW9yeSBpZiBub25lIGF2YWlsYWJsZVxyXG4gICAgICAgIGxldCBzZWxlY3RlZFBlcnNpc3RlbmNlID0gYXZhaWxhYmxlUGVyc2lzdGVuY2VzWzBdIHx8XHJcbiAgICAgICAgICAgIF9nZXRJbnN0YW5jZShpbk1lbW9yeVBlcnNpc3RlbmNlKTtcclxuICAgICAgICBjb25zdCBrZXkgPSBfcGVyc2lzdGVuY2VLZXlOYW1lKHVzZXJLZXksIGF1dGguY29uZmlnLmFwaUtleSwgYXV0aC5uYW1lKTtcclxuICAgICAgICAvLyBQdWxsIG91dCB0aGUgZXhpc3RpbmcgdXNlciwgc2V0dGluZyB0aGUgY2hvc2VuIHBlcnNpc3RlbmNlIHRvIHRoYXRcclxuICAgICAgICAvLyBwZXJzaXN0ZW5jZSBpZiB0aGUgdXNlciBleGlzdHMuXHJcbiAgICAgICAgbGV0IHVzZXJUb01pZ3JhdGUgPSBudWxsO1xyXG4gICAgICAgIC8vIE5vdGUsIGhlcmUgd2UgY2hlY2sgZm9yIGEgdXNlciBpbiBfYWxsXyBwZXJzaXN0ZW5jZXMsIG5vdCBqdXN0IHRoZVxyXG4gICAgICAgIC8vIG9uZXMgZGVlbWVkIGF2YWlsYWJsZS4gSWYgd2UgY2FuIG1pZ3JhdGUgYSB1c2VyIG91dCBvZiBhIGJyb2tlblxyXG4gICAgICAgIC8vIHBlcnNpc3RlbmNlLCB3ZSB3aWxsIChidXQgb25seSBpZiB0aGF0IHBlcnNpc3RlbmNlIHN1cHBvcnRzIG1pZ3JhdGlvbikuXHJcbiAgICAgICAgZm9yIChjb25zdCBwZXJzaXN0ZW5jZSBvZiBwZXJzaXN0ZW5jZUhpZXJhcmNoeSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IHBlcnNpc3RlbmNlLl9nZXQoa2V5KTtcclxuICAgICAgICAgICAgICAgIGlmIChibG9iKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXNlciA9IFVzZXJJbXBsLl9mcm9tSlNPTihhdXRoLCBibG9iKTsgLy8gdGhyb3dzIGZvciB1bnBhcnNhYmxlIGJsb2IgKHdyb25nIGZvcm1hdClcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGVyc2lzdGVuY2UgIT09IHNlbGVjdGVkUGVyc2lzdGVuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlclRvTWlncmF0ZSA9IHVzZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkUGVyc2lzdGVuY2UgPSBwZXJzaXN0ZW5jZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoX2EpIHsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJZiB3ZSBmaW5kIHRoZSB1c2VyIGluIGEgcGVyc2lzdGVuY2UgdGhhdCBkb2VzIHN1cHBvcnQgbWlncmF0aW9uLCB1c2VcclxuICAgICAgICAvLyB0aGF0IG1pZ3JhdGlvbiBwYXRoIChvZiBvbmx5IHBlcnNpc3RlbmNlcyB0aGF0IHN1cHBvcnQgbWlncmF0aW9uKVxyXG4gICAgICAgIGNvbnN0IG1pZ3JhdGlvbkhpZXJhcmNoeSA9IGF2YWlsYWJsZVBlcnNpc3RlbmNlcy5maWx0ZXIocCA9PiBwLl9zaG91bGRBbGxvd01pZ3JhdGlvbik7XHJcbiAgICAgICAgLy8gSWYgdGhlIHBlcnNpc3RlbmNlIGRvZXMgX25vdF8gYWxsb3cgbWlncmF0aW9uLCBqdXN0IGZpbmlzaCBvZmYgaGVyZVxyXG4gICAgICAgIGlmICghc2VsZWN0ZWRQZXJzaXN0ZW5jZS5fc2hvdWxkQWxsb3dNaWdyYXRpb24gfHxcclxuICAgICAgICAgICAgIW1pZ3JhdGlvbkhpZXJhcmNoeS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVVzZXJNYW5hZ2VyKHNlbGVjdGVkUGVyc2lzdGVuY2UsIGF1dGgsIHVzZXJLZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxlY3RlZFBlcnNpc3RlbmNlID0gbWlncmF0aW9uSGllcmFyY2h5WzBdO1xyXG4gICAgICAgIGlmICh1c2VyVG9NaWdyYXRlKSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgbm9ybWFsbHkgc2hvdWxkbid0IHRocm93IHNpbmNlIGNob3NlblBlcnNpc3RlbmNlLmlzQXZhaWxhYmxlKCkgaXMgdHJ1ZSwgYnV0IGlmIGl0IGRvZXNcclxuICAgICAgICAgICAgLy8gd2UnbGwganVzdCBsZXQgaXQgYnViYmxlIHRvIHN1cmZhY2UgdGhlIGVycm9yLlxyXG4gICAgICAgICAgICBhd2FpdCBzZWxlY3RlZFBlcnNpc3RlbmNlLl9zZXQoa2V5LCB1c2VyVG9NaWdyYXRlLnRvSlNPTigpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQXR0ZW1wdCB0byBjbGVhciB0aGUga2V5IGluIG90aGVyIHBlcnNpc3RlbmNlcyBidXQgaWdub3JlIGVycm9ycy4gVGhpcyBoZWxwcyBwcmV2ZW50IGlzc3Vlc1xyXG4gICAgICAgIC8vIHN1Y2ggYXMgdXNlcnMgZ2V0dGluZyBzdHVjayB3aXRoIGEgcHJldmlvdXMgYWNjb3VudCBhZnRlciBzaWduaW5nIG91dCBhbmQgcmVmcmVzaGluZyB0aGUgdGFiLlxyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHBlcnNpc3RlbmNlSGllcmFyY2h5Lm1hcChhc3luYyAocGVyc2lzdGVuY2UpID0+IHtcclxuICAgICAgICAgICAgaWYgKHBlcnNpc3RlbmNlICE9PSBzZWxlY3RlZFBlcnNpc3RlbmNlKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHBlcnNpc3RlbmNlLl9yZW1vdmUoa2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChfYSkgeyB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVVzZXJNYW5hZ2VyKHNlbGVjdGVkUGVyc2lzdGVuY2UsIGF1dGgsIHVzZXJLZXkpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEZXRlcm1pbmUgdGhlIGJyb3dzZXIgZm9yIHRoZSBwdXJwb3NlcyBvZiByZXBvcnRpbmcgdXNhZ2UgdG8gdGhlIEFQSVxyXG4gKi9cclxuZnVuY3Rpb24gX2dldEJyb3dzZXJOYW1lKHVzZXJBZ2VudCkge1xyXG4gICAgY29uc3QgdWEgPSB1c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcclxuICAgIGlmICh1YS5pbmNsdWRlcygnb3BlcmEvJykgfHwgdWEuaW5jbHVkZXMoJ29wci8nKSB8fCB1YS5pbmNsdWRlcygnb3Bpb3MvJykpIHtcclxuICAgICAgICByZXR1cm4gXCJPcGVyYVwiIC8qIE9QRVJBICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoX2lzSUVNb2JpbGUodWEpKSB7XHJcbiAgICAgICAgLy8gV2luZG93cyBwaG9uZSBJRU1vYmlsZSBicm93c2VyLlxyXG4gICAgICAgIHJldHVybiBcIklFTW9iaWxlXCIgLyogSUVNT0JJTEUgKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh1YS5pbmNsdWRlcygnbXNpZScpIHx8IHVhLmluY2x1ZGVzKCd0cmlkZW50LycpKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiSUVcIiAvKiBJRSAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHVhLmluY2x1ZGVzKCdlZGdlLycpKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiRWRnZVwiIC8qIEVER0UgKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChfaXNGaXJlZm94KHVhKSkge1xyXG4gICAgICAgIHJldHVybiBcIkZpcmVmb3hcIiAvKiBGSVJFRk9YICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodWEuaW5jbHVkZXMoJ3NpbGsvJykpIHtcclxuICAgICAgICByZXR1cm4gXCJTaWxrXCIgLyogU0lMSyAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKF9pc0JsYWNrQmVycnkodWEpKSB7XHJcbiAgICAgICAgLy8gQmxhY2tiZXJyeSBicm93c2VyLlxyXG4gICAgICAgIHJldHVybiBcIkJsYWNrYmVycnlcIiAvKiBCTEFDS0JFUlJZICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoX2lzV2ViT1ModWEpKSB7XHJcbiAgICAgICAgLy8gV2ViT1MgZGVmYXVsdCBicm93c2VyLlxyXG4gICAgICAgIHJldHVybiBcIldlYm9zXCIgLyogV0VCT1MgKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChfaXNTYWZhcmkodWEpKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiU2FmYXJpXCIgLyogU0FGQVJJICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoKHVhLmluY2x1ZGVzKCdjaHJvbWUvJykgfHwgX2lzQ2hyb21lSU9TKHVhKSkgJiZcclxuICAgICAgICAhdWEuaW5jbHVkZXMoJ2VkZ2UvJykpIHtcclxuICAgICAgICByZXR1cm4gXCJDaHJvbWVcIiAvKiBDSFJPTUUgKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChfaXNBbmRyb2lkKHVhKSkge1xyXG4gICAgICAgIC8vIEFuZHJvaWQgc3RvY2sgYnJvd3Nlci5cclxuICAgICAgICByZXR1cm4gXCJBbmRyb2lkXCIgLyogQU5EUk9JRCAqLztcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIC8vIE1vc3QgbW9kZXJuIGJyb3dzZXJzIGhhdmUgbmFtZS92ZXJzaW9uIGF0IGVuZCBvZiB1c2VyIGFnZW50IHN0cmluZy5cclxuICAgICAgICBjb25zdCByZSA9IC8oW2EtekEtWlxcZFxcLl0rKVxcL1thLXpBLVpcXGRcXC5dKiQvO1xyXG4gICAgICAgIGNvbnN0IG1hdGNoZXMgPSB1c2VyQWdlbnQubWF0Y2gocmUpO1xyXG4gICAgICAgIGlmICgobWF0Y2hlcyA9PT0gbnVsbCB8fCBtYXRjaGVzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtYXRjaGVzLmxlbmd0aCkgPT09IDIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1hdGNoZXNbMV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIFwiT3RoZXJcIiAvKiBPVEhFUiAqLztcclxufVxyXG5mdW5jdGlvbiBfaXNGaXJlZm94KHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuIC9maXJlZm94XFwvL2kudGVzdCh1YSk7XHJcbn1cclxuZnVuY3Rpb24gX2lzU2FmYXJpKHVzZXJBZ2VudCA9IGdldFVBKCkpIHtcclxuICAgIGNvbnN0IHVhID0gdXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XHJcbiAgICByZXR1cm4gKHVhLmluY2x1ZGVzKCdzYWZhcmkvJykgJiZcclxuICAgICAgICAhdWEuaW5jbHVkZXMoJ2Nocm9tZS8nKSAmJlxyXG4gICAgICAgICF1YS5pbmNsdWRlcygnY3Jpb3MvJykgJiZcclxuICAgICAgICAhdWEuaW5jbHVkZXMoJ2FuZHJvaWQnKSk7XHJcbn1cclxuZnVuY3Rpb24gX2lzQ2hyb21lSU9TKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuIC9jcmlvc1xcLy9pLnRlc3QodWEpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0lFTW9iaWxlKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuIC9pZW1vYmlsZS9pLnRlc3QodWEpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0FuZHJvaWQodWEgPSBnZXRVQSgpKSB7XHJcbiAgICByZXR1cm4gL2FuZHJvaWQvaS50ZXN0KHVhKTtcclxufVxyXG5mdW5jdGlvbiBfaXNCbGFja0JlcnJ5KHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuIC9ibGFja2JlcnJ5L2kudGVzdCh1YSk7XHJcbn1cclxuZnVuY3Rpb24gX2lzV2ViT1ModWEgPSBnZXRVQSgpKSB7XHJcbiAgICByZXR1cm4gL3dlYm9zL2kudGVzdCh1YSk7XHJcbn1cclxuZnVuY3Rpb24gX2lzSU9TKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuIC9pcGhvbmV8aXBhZHxpcG9kL2kudGVzdCh1YSk7XHJcbn1cclxuZnVuY3Rpb24gX2lzSU9TN09yOCh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAoLyhpUGFkfGlQaG9uZXxpUG9kKS4qT1MgN19cXGQvaS50ZXN0KHVhKSB8fFxyXG4gICAgICAgIC8oaVBhZHxpUGhvbmV8aVBvZCkuKk9TIDhfXFxkL2kudGVzdCh1YSkpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0lPU1N0YW5kYWxvbmUodWEgPSBnZXRVQSgpKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICByZXR1cm4gX2lzSU9TKHVhKSAmJiAhISgoX2EgPSB3aW5kb3cubmF2aWdhdG9yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc3RhbmRhbG9uZSk7XHJcbn1cclxuZnVuY3Rpb24gX2lzSUUxMCgpIHtcclxuICAgIHJldHVybiBpc0lFKCkgJiYgZG9jdW1lbnQuZG9jdW1lbnRNb2RlID09PSAxMDtcclxufVxyXG5mdW5jdGlvbiBfaXNNb2JpbGVCcm93c2VyKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgLy8gVE9ETzogaW1wbGVtZW50IGdldEJyb3dzZXJOYW1lIGVxdWl2YWxlbnQgZm9yIE9TLlxyXG4gICAgcmV0dXJuIChfaXNJT1ModWEpIHx8XHJcbiAgICAgICAgX2lzQW5kcm9pZCh1YSkgfHxcclxuICAgICAgICBfaXNXZWJPUyh1YSkgfHxcclxuICAgICAgICBfaXNCbGFja0JlcnJ5KHVhKSB8fFxyXG4gICAgICAgIC93aW5kb3dzIHBob25lL2kudGVzdCh1YSkgfHxcclxuICAgICAgICBfaXNJRU1vYmlsZSh1YSkpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0lmcmFtZSgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8gQ2hlY2sgdGhhdCB0aGUgY3VycmVudCB3aW5kb3cgaXMgbm90IHRoZSB0b3Agd2luZG93LlxyXG4gICAgICAgIC8vIElmIHNvLCByZXR1cm4gdHJ1ZS5cclxuICAgICAgICByZXR1cm4gISEod2luZG93ICYmIHdpbmRvdyAhPT0gd2luZG93LnRvcCk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKlxyXG4gKiBEZXRlcm1pbmUgdGhlIFNESyB2ZXJzaW9uIHN0cmluZ1xyXG4gKi9cclxuZnVuY3Rpb24gX2dldENsaWVudFZlcnNpb24oY2xpZW50UGxhdGZvcm0sIGZyYW1ld29ya3MgPSBbXSkge1xyXG4gICAgbGV0IHJlcG9ydGVkUGxhdGZvcm07XHJcbiAgICBzd2l0Y2ggKGNsaWVudFBsYXRmb3JtKSB7XHJcbiAgICAgICAgY2FzZSBcIkJyb3dzZXJcIiAvKiBCUk9XU0VSICovOlxyXG4gICAgICAgICAgICAvLyBJbiBhIGJyb3dzZXIgZW52aXJvbm1lbnQsIHJlcG9ydCB0aGUgYnJvd3NlciBuYW1lLlxyXG4gICAgICAgICAgICByZXBvcnRlZFBsYXRmb3JtID0gX2dldEJyb3dzZXJOYW1lKGdldFVBKCkpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiV29ya2VyXCIgLyogV09SS0VSICovOlxyXG4gICAgICAgICAgICAvLyBUZWNobmljYWxseSBhIHdvcmtlciBydW5zIGZyb20gYSBicm93c2VyIGJ1dCB3ZSBuZWVkIHRvIGRpZmZlcmVudGlhdGUgYVxyXG4gICAgICAgICAgICAvLyB3b3JrZXIgZnJvbSBhIGJyb3dzZXIuXHJcbiAgICAgICAgICAgIC8vIEZvciBleGFtcGxlOiBDaHJvbWUtV29ya2VyL0pzQ29yZS80LjkuMS9GaXJlYmFzZUNvcmUtd2ViLlxyXG4gICAgICAgICAgICByZXBvcnRlZFBsYXRmb3JtID0gYCR7X2dldEJyb3dzZXJOYW1lKGdldFVBKCkpfS0ke2NsaWVudFBsYXRmb3JtfWA7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJlcG9ydGVkUGxhdGZvcm0gPSBjbGllbnRQbGF0Zm9ybTtcclxuICAgIH1cclxuICAgIGNvbnN0IHJlcG9ydGVkRnJhbWV3b3JrcyA9IGZyYW1ld29ya3MubGVuZ3RoXHJcbiAgICAgICAgPyBmcmFtZXdvcmtzLmpvaW4oJywnKVxyXG4gICAgICAgIDogJ0ZpcmViYXNlQ29yZS13ZWInOyAvKiBkZWZhdWx0IHZhbHVlIGlmIG5vIG90aGVyIGZyYW1ld29yayBpcyB1c2VkICovXHJcbiAgICByZXR1cm4gYCR7cmVwb3J0ZWRQbGF0Zm9ybX0vJHtcIkpzQ29yZVwiIC8qIENPUkUgKi99LyR7U0RLX1ZFUlNJT059LyR7cmVwb3J0ZWRGcmFtZXdvcmtzfWA7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgQXV0aEltcGwge1xyXG4gICAgY29uc3RydWN0b3IoYXBwLCBjb25maWcpIHtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcclxuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gbnVsbDtcclxuICAgICAgICB0aGlzLmVtdWxhdG9yQ29uZmlnID0gbnVsbDtcclxuICAgICAgICB0aGlzLm9wZXJhdGlvbnMgPSBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB0aGlzLmF1dGhTdGF0ZVN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24odGhpcyk7XHJcbiAgICAgICAgdGhpcy5pZFRva2VuU3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbih0aGlzKTtcclxuICAgICAgICB0aGlzLnJlZGlyZWN0VXNlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pc1Byb2FjdGl2ZVJlZnJlc2hFbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgLy8gQW55IG5ldHdvcmsgY2FsbHMgd2lsbCBzZXQgdGhpcyB0byB0cnVlIGFuZCBwcmV2ZW50IHN1YnNlcXVlbnQgZW11bGF0b3JcclxuICAgICAgICAvLyBpbml0aWFsaXphdGlvblxyXG4gICAgICAgIHRoaXMuX2NhbkluaXRFbXVsYXRvciA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5faXNJbml0aWFsaXplZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2RlbGV0ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9pbml0aWFsaXphdGlvblByb21pc2UgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fZXJyb3JGYWN0b3J5ID0gX0RFRkFVTFRfQVVUSF9FUlJPUl9GQUNUT1JZO1xyXG4gICAgICAgIC8vIFRyYWNrcyB0aGUgbGFzdCBub3RpZmllZCBVSUQgZm9yIHN0YXRlIGNoYW5nZSBsaXN0ZW5lcnMgdG8gcHJldmVudFxyXG4gICAgICAgIC8vIHJlcGVhdGVkIGNhbGxzIHRvIHRoZSBjYWxsYmFja3MuIFVuZGVmaW5lZCBtZWFucyBpdCdzIG5ldmVyIGJlZW5cclxuICAgICAgICAvLyBjYWxsZWQsIHdoZXJlYXMgbnVsbCBtZWFucyBpdCdzIGJlZW4gY2FsbGVkIHdpdGggYSBzaWduZWQgb3V0IHVzZXJcclxuICAgICAgICB0aGlzLmxhc3ROb3RpZmllZFVpZCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLmxhbmd1YWdlQ29kZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy50ZW5hbnRJZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHsgYXBwVmVyaWZpY2F0aW9uRGlzYWJsZWRGb3JUZXN0aW5nOiBmYWxzZSB9O1xyXG4gICAgICAgIHRoaXMuZnJhbWV3b3JrcyA9IFtdO1xyXG4gICAgICAgIHRoaXMubmFtZSA9IGFwcC5uYW1lO1xyXG4gICAgICAgIHRoaXMuY2xpZW50VmVyc2lvbiA9IGNvbmZpZy5zZGtDbGllbnRWZXJzaW9uO1xyXG4gICAgfVxyXG4gICAgX2luaXRpYWxpemVXaXRoUGVyc2lzdGVuY2UocGVyc2lzdGVuY2VIaWVyYXJjaHksIHBvcHVwUmVkaXJlY3RSZXNvbHZlcikge1xyXG4gICAgICAgIGlmIChwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyID0gX2dldEluc3RhbmNlKHBvcHVwUmVkaXJlY3RSZXNvbHZlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEhhdmUgdG8gY2hlY2sgZm9yIGFwcCBkZWxldGlvbiB0aHJvdWdob3V0IGluaXRpYWxpemF0aW9uIChhZnRlciBlYWNoXHJcbiAgICAgICAgLy8gcHJvbWlzZSByZXNvbHV0aW9uKVxyXG4gICAgICAgIHRoaXMuX2luaXRpYWxpemF0aW9uUHJvbWlzZSA9IHRoaXMucXVldWUoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fZGVsZXRlZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucGVyc2lzdGVuY2VNYW5hZ2VyID0gYXdhaXQgUGVyc2lzdGVuY2VVc2VyTWFuYWdlci5jcmVhdGUodGhpcywgcGVyc2lzdGVuY2VIaWVyYXJjaHkpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fZGVsZXRlZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgdGhlIHJlc29sdmVyIGVhcmx5IGlmIG5lY2Vzc2FyeSAob25seSBhcHBsaWNhYmxlIHRvIHdlYjpcclxuICAgICAgICAgICAgLy8gdGhpcyB3aWxsIGNhdXNlIHRoZSBpZnJhbWUgdG8gbG9hZCBpbW1lZGlhdGVseSBpbiBjZXJ0YWluIGNhc2VzKVxyXG4gICAgICAgICAgICBpZiAoKF9hID0gdGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuX3Nob3VsZEluaXRQcm9hY3RpdmVseSkge1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhpcyBmYWlscywgZG9uJ3QgaGFsdCBhdXRoIGxvYWRpbmdcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyLl9pbml0aWFsaXplKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsgLyogSWdub3JlIHRoZSBlcnJvciAqLyB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplQ3VycmVudFVzZXIocG9wdXBSZWRpcmVjdFJlc29sdmVyKTtcclxuICAgICAgICAgICAgdGhpcy5sYXN0Tm90aWZpZWRVaWQgPSAoKF9iID0gdGhpcy5jdXJyZW50VXNlcikgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnVpZCkgfHwgbnVsbDtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2RlbGV0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9pc0luaXRpYWxpemVkID0gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5faW5pdGlhbGl6YXRpb25Qcm9taXNlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJZiB0aGUgcGVyc2lzdGVuY2UgaXMgY2hhbmdlZCBpbiBhbm90aGVyIHdpbmRvdywgdGhlIHVzZXIgbWFuYWdlciB3aWxsIGxldCB1cyBrbm93XHJcbiAgICAgKi9cclxuICAgIGFzeW5jIF9vblN0b3JhZ2VFdmVudCgpIHtcclxuICAgICAgICBpZiAodGhpcy5fZGVsZXRlZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB0aGlzLmFzc2VydGVkUGVyc2lzdGVuY2UuZ2V0Q3VycmVudFVzZXIoKTtcclxuICAgICAgICBpZiAoIXRoaXMuY3VycmVudFVzZXIgJiYgIXVzZXIpIHtcclxuICAgICAgICAgICAgLy8gTm8gY2hhbmdlLCBkbyBub3RoaW5nICh3YXMgc2lnbmVkIG91dCBhbmQgcmVtYWluZWQgc2lnbmVkIG91dCkuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgdGhlIHNhbWUgdXNlciBpcyB0byBiZSBzeW5jaHJvbml6ZWQuXHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFVzZXIgJiYgdXNlciAmJiB0aGlzLmN1cnJlbnRVc2VyLnVpZCA9PT0gdXNlci51aWQpIHtcclxuICAgICAgICAgICAgLy8gRGF0YSB1cGRhdGUsIHNpbXBseSBjb3B5IGRhdGEgY2hhbmdlcy5cclxuICAgICAgICAgICAgdGhpcy5fY3VycmVudFVzZXIuX2Fzc2lnbih1c2VyKTtcclxuICAgICAgICAgICAgLy8gSWYgdG9rZW5zIGNoYW5nZWQgZnJvbSBwcmV2aW91cyB1c2VyIHRva2VucywgdGhpcyB3aWxsIHRyaWdnZXJcclxuICAgICAgICAgICAgLy8gbm90aWZ5QXV0aExpc3RlbmVyc18uXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3VycmVudFVzZXIuZ2V0SWRUb2tlbigpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFVwZGF0ZSBjdXJyZW50IEF1dGggc3RhdGUuIEVpdGhlciBhIG5ldyBsb2dpbiBvciBsb2dvdXQuXHJcbiAgICAgICAgYXdhaXQgdGhpcy5fdXBkYXRlQ3VycmVudFVzZXIodXNlcik7XHJcbiAgICB9XHJcbiAgICBhc3luYyBpbml0aWFsaXplQ3VycmVudFVzZXIocG9wdXBSZWRpcmVjdFJlc29sdmVyKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIC8vIEZpcnN0IGNoZWNrIHRvIHNlZSBpZiB3ZSBoYXZlIGEgcGVuZGluZyByZWRpcmVjdCBldmVudC5cclxuICAgICAgICBsZXQgc3RvcmVkVXNlciA9IChhd2FpdCB0aGlzLmFzc2VydGVkUGVyc2lzdGVuY2UuZ2V0Q3VycmVudFVzZXIoKSk7XHJcbiAgICAgICAgaWYgKHBvcHVwUmVkaXJlY3RSZXNvbHZlciAmJiB0aGlzLmNvbmZpZy5hdXRoRG9tYWluKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0T3JJbml0UmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIoKTtcclxuICAgICAgICAgICAgY29uc3QgcmVkaXJlY3RVc2VyRXZlbnRJZCA9IChfYSA9IHRoaXMucmVkaXJlY3RVc2VyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuX3JlZGlyZWN0RXZlbnRJZDtcclxuICAgICAgICAgICAgY29uc3Qgc3RvcmVkVXNlckV2ZW50SWQgPSBzdG9yZWRVc2VyID09PSBudWxsIHx8IHN0b3JlZFVzZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHN0b3JlZFVzZXIuX3JlZGlyZWN0RXZlbnRJZDtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy50cnlSZWRpcmVjdFNpZ25Jbihwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpO1xyXG4gICAgICAgICAgICAvLyBJZiB0aGUgc3RvcmVkIHVzZXIgKGkuZS4gdGhlIG9sZCBcImN1cnJlbnRVc2VyXCIpIGhhcyBhIHJlZGlyZWN0SWQgdGhhdFxyXG4gICAgICAgICAgICAvLyBtYXRjaGVzIHRoZSByZWRpcmVjdCB1c2VyLCB0aGVuIHdlIHdhbnQgdG8gaW5pdGlhbGx5IHNpZ24gaW4gd2l0aCB0aGVcclxuICAgICAgICAgICAgLy8gbmV3IHVzZXIgb2JqZWN0IGZyb20gcmVzdWx0LlxyXG4gICAgICAgICAgICAvLyBUT0RPKHNhbWdobyk6IE1vcmUgdGhvcm91Z2hseSB0ZXN0IGFsbCBvZiB0aGlzXHJcbiAgICAgICAgICAgIGlmICgoIXJlZGlyZWN0VXNlckV2ZW50SWQgfHwgcmVkaXJlY3RVc2VyRXZlbnRJZCA9PT0gc3RvcmVkVXNlckV2ZW50SWQpICYmXHJcbiAgICAgICAgICAgICAgICAocmVzdWx0ID09PSBudWxsIHx8IHJlc3VsdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzdWx0LnVzZXIpKSB7XHJcbiAgICAgICAgICAgICAgICBzdG9yZWRVc2VyID0gcmVzdWx0LnVzZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgbm8gdXNlciBpbiBwZXJzaXN0ZW5jZSwgdGhlcmUgaXMgbm8gY3VycmVudCB1c2VyLiBTZXQgdG8gbnVsbC5cclxuICAgICAgICBpZiAoIXN0b3JlZFVzZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0bHlTZXRDdXJyZW50VXNlcihudWxsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFzdG9yZWRVc2VyLl9yZWRpcmVjdEV2ZW50SWQpIHtcclxuICAgICAgICAgICAgLy8gVGhpcyBpc24ndCBhIHJlZGlyZWN0IHVzZXIsIHdlIGNhbiByZWxvYWQgYW5kIGJhaWxcclxuICAgICAgICAgICAgLy8gVGhpcyB3aWxsIGFsc28gY2F0Y2ggdGhlIHJlZGlyZWN0ZWQgdXNlciwgaWYgYXZhaWxhYmxlLCBhcyB0aGF0IG1ldGhvZFxyXG4gICAgICAgICAgICAvLyBzdHJpcHMgdGhlIF9yZWRpcmVjdEV2ZW50SWRcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVsb2FkQW5kU2V0Q3VycmVudFVzZXJPckNsZWFyKHN0b3JlZFVzZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfYXNzZXJ0KHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlciwgdGhpcywgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICBhd2FpdCB0aGlzLmdldE9ySW5pdFJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyKCk7XHJcbiAgICAgICAgLy8gSWYgdGhlIHJlZGlyZWN0IHVzZXIncyBldmVudCBJRCBtYXRjaGVzIHRoZSBjdXJyZW50IHVzZXIncyBldmVudCBJRCxcclxuICAgICAgICAvLyBETyBOT1QgcmVsb2FkIHRoZSBjdXJyZW50IHVzZXIsIG90aGVyd2lzZSB0aGV5J2xsIGJlIGNsZWFyZWQgZnJvbSBzdG9yYWdlLlxyXG4gICAgICAgIC8vIFRoaXMgaXMgaW1wb3J0YW50IGZvciB0aGUgcmVhdXRoZW50aWNhdGVXaXRoUmVkaXJlY3QoKSBmbG93LlxyXG4gICAgICAgIGlmICh0aGlzLnJlZGlyZWN0VXNlciAmJlxyXG4gICAgICAgICAgICB0aGlzLnJlZGlyZWN0VXNlci5fcmVkaXJlY3RFdmVudElkID09PSBzdG9yZWRVc2VyLl9yZWRpcmVjdEV2ZW50SWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0bHlTZXRDdXJyZW50VXNlcihzdG9yZWRVc2VyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVsb2FkQW5kU2V0Q3VycmVudFVzZXJPckNsZWFyKHN0b3JlZFVzZXIpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgdHJ5UmVkaXJlY3RTaWduSW4ocmVkaXJlY3RSZXNvbHZlcikge1xyXG4gICAgICAgIC8vIFRoZSByZWRpcmVjdCB1c2VyIG5lZWRzIHRvIGJlIGNoZWNrZWQgKGFuZCBzaWduZWQgaW4gaWYgYXZhaWxhYmxlKVxyXG4gICAgICAgIC8vIGR1cmluZyBhdXRoIGluaXRpYWxpemF0aW9uLiBBbGwgb2YgdGhlIG5vcm1hbCBzaWduIGluIGFuZCBsaW5rL3JlYXV0aFxyXG4gICAgICAgIC8vIGZsb3dzIGNhbGwgYmFjayBpbnRvIGF1dGggYW5kIHB1c2ggdGhpbmdzIG9udG8gdGhlIHByb21pc2UgcXVldWUuIFdlXHJcbiAgICAgICAgLy8gbmVlZCB0byBhd2FpdCB0aGUgcmVzdWx0IG9mIHRoZSByZWRpcmVjdCBzaWduIGluICppbnNpZGUgdGhlIHByb21pc2VcclxuICAgICAgICAvLyBxdWV1ZSouIFRoaXMgcHJlc2VudHMgYSBwcm9ibGVtOiB3ZSBydW4gaW50byBkZWFkbG9jay4gU2VlOlxyXG4gICAgICAgIC8vICAgIOKUjD4gW0luaXRpYWxpemF0aW9uXSDilIDilIDilIDilIDilIDilJBcclxuICAgICAgICAvLyAgICDilIw+IFs8b3RoZXIgcXVldWUgdGFza3M+XSDilIJcclxuICAgICAgICAvLyAgICDilJTilIAgW2dldFJlZGlyZWN0UmVzdWx0XSA84pSA4pSYXHJcbiAgICAgICAgLy8gICAgd2hlcmUgW10gYXJlIHRhc2tzIG9uIHRoZSBxdWV1ZSBhbmQgYXJyb3dzIGRlbm90ZSBhd2FpdHNcclxuICAgICAgICAvLyBJbml0aWFsaXphdGlvbiB3aWxsIG5ldmVyIGNvbXBsZXRlIGJlY2F1c2UgaXQncyB3YWl0aW5nIG9uIHNvbWV0aGluZ1xyXG4gICAgICAgIC8vIHRoYXQncyB3YWl0aW5nIGZvciBpbml0aWFsaXphdGlvbiB0byBjb21wbGV0ZSFcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vIEluc3RlYWQsIHRoaXMgbWV0aG9kIGNhbGxzIGdldFJlZGlyZWN0UmVzdWx0KCkgKHN0b3JlZCBpblxyXG4gICAgICAgIC8vIF9jb21wbGV0ZVJlZGlyZWN0Rm4pIHdpdGggYW4gb3B0aW9uYWwgcGFyYW1ldGVyIHRoYXQgaW5zdHJ1Y3RzIGFsbCBvZlxyXG4gICAgICAgIC8vIHRoZSB1bmRlcmx5aW5nIGF1dGggb3BlcmF0aW9ucyB0byBza2lwIGFueXRoaW5nIHRoYXQgbXV0YXRlcyBhdXRoIHN0YXRlLlxyXG4gICAgICAgIGxldCByZXN1bHQgPSBudWxsO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFdlIGtub3cgdGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyIGlzIHNldCBzaW5jZSByZWRpcmVjdFJlc29sdmVyXHJcbiAgICAgICAgICAgIC8vIGlzIHBhc3NlZCBpbi4gVGhlIF9jb21wbGV0ZVJlZGlyZWN0Rm4gZXhwZWN0cyB0aGUgdW53cmFwcGVkIGV4dGVybi5cclxuICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyLl9jb21wbGV0ZVJlZGlyZWN0Rm4odGhpcywgcmVkaXJlY3RSZXNvbHZlciwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIC8vIFN3YWxsb3cgYW55IGVycm9ycyBoZXJlOyB0aGUgY29kZSBjYW4gcmV0cmlldmUgdGhlbSBpblxyXG4gICAgICAgICAgICAvLyBnZXRSZWRpcmVjdFJlc3VsdCgpLlxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9zZXRSZWRpcmVjdFVzZXIobnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgICBhc3luYyByZWxvYWRBbmRTZXRDdXJyZW50VXNlck9yQ2xlYXIodXNlcikge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IF9yZWxvYWRXaXRob3V0U2F2aW5nKHVzZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBpZiAoZS5jb2RlICE9PSBgYXV0aC8ke1wibmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiIC8qIE5FVFdPUktfUkVRVUVTVF9GQUlMRUQgKi99YCkge1xyXG4gICAgICAgICAgICAgICAgLy8gU29tZXRoaW5nJ3Mgd3Jvbmcgd2l0aCB0aGUgdXNlcidzIHRva2VuLiBMb2cgdGhlbSBvdXQgYW5kIHJlbW92ZVxyXG4gICAgICAgICAgICAgICAgLy8gdGhlbSBmcm9tIHN0b3JhZ2VcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGx5U2V0Q3VycmVudFVzZXIobnVsbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0bHlTZXRDdXJyZW50VXNlcih1c2VyKTtcclxuICAgIH1cclxuICAgIHVzZURldmljZUxhbmd1YWdlKCkge1xyXG4gICAgICAgIHRoaXMubGFuZ3VhZ2VDb2RlID0gX2dldFVzZXJMYW5ndWFnZSgpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX2RlbGV0ZSgpIHtcclxuICAgICAgICB0aGlzLl9kZWxldGVkID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGFzeW5jIHVwZGF0ZUN1cnJlbnRVc2VyKHVzZXJFeHRlcm4pIHtcclxuICAgICAgICAvLyBUaGUgcHVibGljIHVwZGF0ZUN1cnJlbnRVc2VyIG1ldGhvZCBuZWVkcyB0byBtYWtlIGEgY29weSBvZiB0aGUgdXNlcixcclxuICAgICAgICAvLyBhbmQgYWxzbyBjaGVjayB0aGF0IHRoZSBwcm9qZWN0IG1hdGNoZXNcclxuICAgICAgICBjb25zdCB1c2VyID0gdXNlckV4dGVyblxyXG4gICAgICAgICAgICA/IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyRXh0ZXJuKVxyXG4gICAgICAgICAgICA6IG51bGw7XHJcbiAgICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICAgICAgX2Fzc2VydCh1c2VyLmF1dGguY29uZmlnLmFwaUtleSA9PT0gdGhpcy5jb25maWcuYXBpS2V5LCB0aGlzLCBcImludmFsaWQtdXNlci10b2tlblwiIC8qIElOVkFMSURfQVVUSCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl91cGRhdGVDdXJyZW50VXNlcih1c2VyICYmIHVzZXIuX2Nsb25lKHRoaXMpKTtcclxuICAgIH1cclxuICAgIGFzeW5jIF91cGRhdGVDdXJyZW50VXNlcih1c2VyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2RlbGV0ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodXNlcikge1xyXG4gICAgICAgICAgICBfYXNzZXJ0KHRoaXMudGVuYW50SWQgPT09IHVzZXIudGVuYW50SWQsIHRoaXMsIFwidGVuYW50LWlkLW1pc21hdGNoXCIgLyogVEVOQU5UX0lEX01JU01BVENIICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucXVldWUoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRpcmVjdGx5U2V0Q3VycmVudFVzZXIodXNlcik7XHJcbiAgICAgICAgICAgIHRoaXMubm90aWZ5QXV0aExpc3RlbmVycygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgc2lnbk91dCgpIHtcclxuICAgICAgICAvLyBDbGVhciB0aGUgcmVkaXJlY3QgdXNlciB3aGVuIHNpZ25PdXQgaXMgY2FsbGVkXHJcbiAgICAgICAgaWYgKHRoaXMucmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIgfHwgdGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX3NldFJlZGlyZWN0VXNlcihudWxsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VwZGF0ZUN1cnJlbnRVc2VyKG51bGwpO1xyXG4gICAgfVxyXG4gICAgc2V0UGVyc2lzdGVuY2UocGVyc2lzdGVuY2UpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZShhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXNzZXJ0ZWRQZXJzaXN0ZW5jZS5zZXRQZXJzaXN0ZW5jZShfZ2V0SW5zdGFuY2UocGVyc2lzdGVuY2UpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIF9nZXRQZXJzaXN0ZW5jZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hc3NlcnRlZFBlcnNpc3RlbmNlLnBlcnNpc3RlbmNlLnR5cGU7XHJcbiAgICB9XHJcbiAgICBfdXBkYXRlRXJyb3JNYXAoZXJyb3JNYXApIHtcclxuICAgICAgICB0aGlzLl9lcnJvckZhY3RvcnkgPSBuZXcgRXJyb3JGYWN0b3J5KCdhdXRoJywgJ0ZpcmViYXNlJywgZXJyb3JNYXAoKSk7XHJcbiAgICB9XHJcbiAgICBvbkF1dGhTdGF0ZUNoYW5nZWQobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlclN0YXRlTGlzdGVuZXIodGhpcy5hdXRoU3RhdGVTdWJzY3JpcHRpb24sIG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKTtcclxuICAgIH1cclxuICAgIG9uSWRUb2tlbkNoYW5nZWQobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlclN0YXRlTGlzdGVuZXIodGhpcy5pZFRva2VuU3Vic2NyaXB0aW9uLCBuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCk7XHJcbiAgICB9XHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGFwaUtleTogdGhpcy5jb25maWcuYXBpS2V5LFxyXG4gICAgICAgICAgICBhdXRoRG9tYWluOiB0aGlzLmNvbmZpZy5hdXRoRG9tYWluLFxyXG4gICAgICAgICAgICBhcHBOYW1lOiB0aGlzLm5hbWUsXHJcbiAgICAgICAgICAgIGN1cnJlbnRVc2VyOiAoX2EgPSB0aGlzLl9jdXJyZW50VXNlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnRvSlNPTigpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9zZXRSZWRpcmVjdFVzZXIodXNlciwgcG9wdXBSZWRpcmVjdFJlc29sdmVyKSB7XHJcbiAgICAgICAgY29uc3QgcmVkaXJlY3RNYW5hZ2VyID0gYXdhaXQgdGhpcy5nZXRPckluaXRSZWRpcmVjdFBlcnNpc3RlbmNlTWFuYWdlcihwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpO1xyXG4gICAgICAgIHJldHVybiB1c2VyID09PSBudWxsXHJcbiAgICAgICAgICAgID8gcmVkaXJlY3RNYW5hZ2VyLnJlbW92ZUN1cnJlbnRVc2VyKClcclxuICAgICAgICAgICAgOiByZWRpcmVjdE1hbmFnZXIuc2V0Q3VycmVudFVzZXIodXNlcik7XHJcbiAgICB9XHJcbiAgICBhc3luYyBnZXRPckluaXRSZWRpcmVjdFBlcnNpc3RlbmNlTWFuYWdlcihwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpIHtcclxuICAgICAgICBpZiAoIXRoaXMucmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIpIHtcclxuICAgICAgICAgICAgY29uc3QgcmVzb2x2ZXIgPSAocG9wdXBSZWRpcmVjdFJlc29sdmVyICYmIF9nZXRJbnN0YW5jZShwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpKSB8fFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyO1xyXG4gICAgICAgICAgICBfYXNzZXJ0KHJlc29sdmVyLCB0aGlzLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgICAgICB0aGlzLnJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyID0gYXdhaXQgUGVyc2lzdGVuY2VVc2VyTWFuYWdlci5jcmVhdGUodGhpcywgW19nZXRJbnN0YW5jZShyZXNvbHZlci5fcmVkaXJlY3RQZXJzaXN0ZW5jZSldLCBcInJlZGlyZWN0VXNlclwiIC8qIFJFRElSRUNUX1VTRVIgKi8pO1xyXG4gICAgICAgICAgICB0aGlzLnJlZGlyZWN0VXNlciA9XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyLmdldEN1cnJlbnRVc2VyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX3JlZGlyZWN0VXNlckZvcklkKGlkKSB7XHJcbiAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICAvLyBNYWtlIHN1cmUgd2UndmUgY2xlYXJlZCBhbnkgcGVuZGluZyBwZXJzaXN0ZW5jZSBhY3Rpb25zIGlmIHdlJ3JlIG5vdCBpblxyXG4gICAgICAgIC8vIHRoZSBpbml0aWFsaXplclxyXG4gICAgICAgIGlmICh0aGlzLl9pc0luaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucXVldWUoYXN5bmMgKCkgPT4geyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCgoX2EgPSB0aGlzLl9jdXJyZW50VXNlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLl9yZWRpcmVjdEV2ZW50SWQpID09PSBpZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY3VycmVudFVzZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgoKF9iID0gdGhpcy5yZWRpcmVjdFVzZXIpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5fcmVkaXJlY3RFdmVudElkKSA9PT0gaWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVkaXJlY3RVc2VyO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGFzeW5jIF9wZXJzaXN0VXNlcklmQ3VycmVudCh1c2VyKSB7XHJcbiAgICAgICAgaWYgKHVzZXIgPT09IHRoaXMuY3VycmVudFVzZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVldWUoYXN5bmMgKCkgPT4gdGhpcy5kaXJlY3RseVNldEN1cnJlbnRVc2VyKHVzZXIpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiogTm90aWZpZXMgbGlzdGVuZXJzIG9ubHkgaWYgdGhlIHVzZXIgaXMgY3VycmVudCAqL1xyXG4gICAgX25vdGlmeUxpc3RlbmVyc0lmQ3VycmVudCh1c2VyKSB7XHJcbiAgICAgICAgaWYgKHVzZXIgPT09IHRoaXMuY3VycmVudFVzZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5ub3RpZnlBdXRoTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX2tleSgpIHtcclxuICAgICAgICByZXR1cm4gYCR7dGhpcy5jb25maWcuYXV0aERvbWFpbn06JHt0aGlzLmNvbmZpZy5hcGlLZXl9OiR7dGhpcy5uYW1lfWA7XHJcbiAgICB9XHJcbiAgICBfc3RhcnRQcm9hY3RpdmVSZWZyZXNoKCkge1xyXG4gICAgICAgIHRoaXMuaXNQcm9hY3RpdmVSZWZyZXNoRW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFVzZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fY3VycmVudFVzZXIuX3N0YXJ0UHJvYWN0aXZlUmVmcmVzaCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9zdG9wUHJvYWN0aXZlUmVmcmVzaCgpIHtcclxuICAgICAgICB0aGlzLmlzUHJvYWN0aXZlUmVmcmVzaEVuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50VXNlci5fc3RvcFByb2FjdGl2ZVJlZnJlc2goKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiogUmV0dXJucyB0aGUgY3VycmVudCB1c2VyIGNhc3QgYXMgdGhlIGludGVybmFsIHR5cGUgKi9cclxuICAgIGdldCBfY3VycmVudFVzZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFVzZXI7XHJcbiAgICB9XHJcbiAgICBub3RpZnlBdXRoTGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9pc0luaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pZFRva2VuU3Vic2NyaXB0aW9uLm5leHQodGhpcy5jdXJyZW50VXNlcik7XHJcbiAgICAgICAgY29uc3QgY3VycmVudFVpZCA9IChfYiA9IChfYSA9IHRoaXMuY3VycmVudFVzZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS51aWQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IG51bGw7XHJcbiAgICAgICAgaWYgKHRoaXMubGFzdE5vdGlmaWVkVWlkICE9PSBjdXJyZW50VWlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdE5vdGlmaWVkVWlkID0gY3VycmVudFVpZDtcclxuICAgICAgICAgICAgdGhpcy5hdXRoU3RhdGVTdWJzY3JpcHRpb24ubmV4dCh0aGlzLmN1cnJlbnRVc2VyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZWdpc3RlclN0YXRlTGlzdGVuZXIoc3Vic2NyaXB0aW9uLCBuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9kZWxldGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB7IH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNiID0gdHlwZW9mIG5leHRPck9ic2VydmVyID09PSAnZnVuY3Rpb24nXHJcbiAgICAgICAgICAgID8gbmV4dE9yT2JzZXJ2ZXJcclxuICAgICAgICAgICAgOiBuZXh0T3JPYnNlcnZlci5uZXh0LmJpbmQobmV4dE9yT2JzZXJ2ZXIpO1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLl9pc0luaXRpYWxpemVkXHJcbiAgICAgICAgICAgID8gUHJvbWlzZS5yZXNvbHZlKClcclxuICAgICAgICAgICAgOiB0aGlzLl9pbml0aWFsaXphdGlvblByb21pc2U7XHJcbiAgICAgICAgX2Fzc2VydChwcm9taXNlLCB0aGlzLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIC8vIFRoZSBjYWxsYmFjayBuZWVkcyB0byBiZSBjYWxsZWQgYXN5bmNocm9ub3VzbHkgcGVyIHRoZSBzcGVjLlxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICBwcm9taXNlLnRoZW4oKCkgPT4gY2IodGhpcy5jdXJyZW50VXNlcikpO1xyXG4gICAgICAgIGlmICh0eXBlb2YgbmV4dE9yT2JzZXJ2ZXIgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbi5hZGRPYnNlcnZlcihuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uLmFkZE9ic2VydmVyKG5leHRPck9ic2VydmVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVucHJvdGVjdGVkIChmcm9tIHJhY2UgY29uZGl0aW9ucykgbWV0aG9kIHRvIHNldCB0aGUgY3VycmVudCB1c2VyLiBUaGlzXHJcbiAgICAgKiBzaG91bGQgb25seSBiZSBjYWxsZWQgZnJvbSB3aXRoaW4gYSBxdWV1ZWQgY2FsbGJhY2suIFRoaXMgaXMgbmVjZXNzYXJ5XHJcbiAgICAgKiBiZWNhdXNlIHRoZSBxdWV1ZSBzaG91bGRuJ3QgcmVseSBvbiBhbm90aGVyIHF1ZXVlZCBjYWxsYmFjay5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgZGlyZWN0bHlTZXRDdXJyZW50VXNlcih1c2VyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFVzZXIgJiYgdGhpcy5jdXJyZW50VXNlciAhPT0gdXNlcikge1xyXG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50VXNlci5fc3RvcFByb2FjdGl2ZVJlZnJlc2goKTtcclxuICAgICAgICAgICAgaWYgKHVzZXIgJiYgdGhpcy5pc1Byb2FjdGl2ZVJlZnJlc2hFbmFibGVkKSB7XHJcbiAgICAgICAgICAgICAgICB1c2VyLl9zdGFydFByb2FjdGl2ZVJlZnJlc2goKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gdXNlcjtcclxuICAgICAgICBpZiAodXNlcikge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFzc2VydGVkUGVyc2lzdGVuY2Uuc2V0Q3VycmVudFVzZXIodXNlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFzc2VydGVkUGVyc2lzdGVuY2UucmVtb3ZlQ3VycmVudFVzZXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBxdWV1ZShhY3Rpb24pIHtcclxuICAgICAgICAvLyBJbiBjYXNlIHNvbWV0aGluZyBlcnJvcnMsIHRoZSBjYWxsYmFjayBzdGlsbCBzaG91bGQgYmUgY2FsbGVkIGluIG9yZGVyXHJcbiAgICAgICAgLy8gdG8ga2VlcCB0aGUgcHJvbWlzZSBjaGFpbiBhbGl2ZVxyXG4gICAgICAgIHRoaXMub3BlcmF0aW9ucyA9IHRoaXMub3BlcmF0aW9ucy50aGVuKGFjdGlvbiwgYWN0aW9uKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5vcGVyYXRpb25zO1xyXG4gICAgfVxyXG4gICAgZ2V0IGFzc2VydGVkUGVyc2lzdGVuY2UoKSB7XHJcbiAgICAgICAgX2Fzc2VydCh0aGlzLnBlcnNpc3RlbmNlTWFuYWdlciwgdGhpcywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZU1hbmFnZXI7XHJcbiAgICB9XHJcbiAgICBfbG9nRnJhbWV3b3JrKGZyYW1ld29yaykge1xyXG4gICAgICAgIGlmICghZnJhbWV3b3JrIHx8IHRoaXMuZnJhbWV3b3Jrcy5pbmNsdWRlcyhmcmFtZXdvcmspKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5mcmFtZXdvcmtzLnB1c2goZnJhbWV3b3JrKTtcclxuICAgICAgICAvLyBTb3J0IGFscGhhYmV0aWNhbGx5IHNvIHRoYXQgXCJGaXJlYmFzZUNvcmUtd2ViLEZpcmViYXNlVUktd2ViXCIgYW5kXHJcbiAgICAgICAgLy8gXCJGaXJlYmFzZVVJLXdlYixGaXJlYmFzZUNvcmUtd2ViXCIgYXJlbid0IHZpZXdlZCBhcyBkaWZmZXJlbnQuXHJcbiAgICAgICAgdGhpcy5mcmFtZXdvcmtzLnNvcnQoKTtcclxuICAgICAgICB0aGlzLmNsaWVudFZlcnNpb24gPSBfZ2V0Q2xpZW50VmVyc2lvbih0aGlzLmNvbmZpZy5jbGllbnRQbGF0Zm9ybSwgdGhpcy5fZ2V0RnJhbWV3b3JrcygpKTtcclxuICAgIH1cclxuICAgIF9nZXRGcmFtZXdvcmtzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZyYW1ld29ya3M7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfZ2V0QWRkaXRpb25hbEhlYWRlcnMoKSB7XHJcbiAgICAgICAgLy8gQWRkaXRpb25hbCBoZWFkZXJzIG9uIGV2ZXJ5IHJlcXVlc3RcclxuICAgICAgICBjb25zdCBoZWFkZXJzID0ge1xyXG4gICAgICAgICAgICBbXCJYLUNsaWVudC1WZXJzaW9uXCIgLyogWF9DTElFTlRfVkVSU0lPTiAqL106IHRoaXMuY2xpZW50VmVyc2lvbixcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICh0aGlzLmFwcC5vcHRpb25zLmFwcElkKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnNbXCJYLUZpcmViYXNlLWdtcGlkXCIgLyogWF9GSVJFQkFTRV9HTVBJRCAqL10gPSB0aGlzLmFwcC5vcHRpb25zLmFwcElkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaGVhZGVycztcclxuICAgIH1cclxufVxyXG4vKipcclxuICogTWV0aG9kIHRvIGJlIHVzZWQgdG8gY2FzdCBkb3duIHRvIG91ciBwcml2YXRlIGltcGxtZW50YXRpb24gb2YgQXV0aC5cclxuICogSXQgd2lsbCBhbHNvIGhhbmRsZSB1bndyYXBwaW5nIGZyb20gdGhlIGNvbXBhdCB0eXBlIGlmIG5lY2Vzc2FyeVxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCBBdXRoIG9iamVjdCBwYXNzZWQgaW4gZnJvbSBkZXZlbG9wZXJcclxuICovXHJcbmZ1bmN0aW9uIF9jYXN0QXV0aChhdXRoKSB7XHJcbiAgICByZXR1cm4gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpO1xyXG59XHJcbi8qKiBIZWxwZXIgY2xhc3MgdG8gd3JhcCBzdWJzY3JpYmVyIGxvZ2ljICovXHJcbmNsYXNzIFN1YnNjcmlwdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoKSB7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gYXV0aDtcclxuICAgICAgICB0aGlzLm9ic2VydmVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLmFkZE9ic2VydmVyID0gY3JlYXRlU3Vic2NyaWJlKG9ic2VydmVyID0+ICh0aGlzLm9ic2VydmVyID0gb2JzZXJ2ZXIpKTtcclxuICAgIH1cclxuICAgIGdldCBuZXh0KCkge1xyXG4gICAgICAgIF9hc3NlcnQodGhpcy5vYnNlcnZlciwgdGhpcy5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9ic2VydmVyLm5leHQuYmluZCh0aGlzLm9ic2VydmVyKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQ2hhbmdlcyB0aGUge0BsaW5rIEF1dGh9IGluc3RhbmNlIHRvIGNvbW11bmljYXRlIHdpdGggdGhlIEZpcmViYXNlIEF1dGggRW11bGF0b3IsIGluc3RlYWQgb2YgcHJvZHVjdGlvblxyXG4gKiBGaXJlYmFzZSBBdXRoIHNlcnZpY2VzLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUaGlzIG11c3QgYmUgY2FsbGVkIHN5bmNocm9ub3VzbHkgaW1tZWRpYXRlbHkgZm9sbG93aW5nIHRoZSBmaXJzdCBjYWxsIHRvXHJcbiAqIHtAbGluayBpbml0aWFsaXplQXV0aH0uICBEbyBub3QgdXNlIHdpdGggcHJvZHVjdGlvbiBjcmVkZW50aWFscyBhcyBlbXVsYXRvclxyXG4gKiB0cmFmZmljIGlzIG5vdCBlbmNyeXB0ZWQuXHJcbiAqXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogY29ubmVjdEF1dGhFbXVsYXRvcihhdXRoLCAnaHR0cDovLzEyNy4wLjAuMTo5MDk5JywgeyBkaXNhYmxlV2FybmluZ3M6IHRydWUgfSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSB1cmwgLSBUaGUgVVJMIGF0IHdoaWNoIHRoZSBlbXVsYXRvciBpcyBydW5uaW5nIChlZywgJ2h0dHA6Ly9sb2NhbGhvc3Q6OTA5OScpLlxyXG4gKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsLiBgb3B0aW9ucy5kaXNhYmxlV2FybmluZ3NgIGRlZmF1bHRzIHRvIGBmYWxzZWAuIFNldCBpdCB0b1xyXG4gKiBgdHJ1ZWAgdG8gZGlzYWJsZSB0aGUgd2FybmluZyBiYW5uZXIgYXR0YWNoZWQgdG8gdGhlIERPTS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gY29ubmVjdEF1dGhFbXVsYXRvcihhdXRoLCB1cmwsIG9wdGlvbnMpIHtcclxuICAgIGNvbnN0IGF1dGhJbnRlcm5hbCA9IF9jYXN0QXV0aChhdXRoKTtcclxuICAgIF9hc3NlcnQoYXV0aEludGVybmFsLl9jYW5Jbml0RW11bGF0b3IsIGF1dGhJbnRlcm5hbCwgXCJlbXVsYXRvci1jb25maWctZmFpbGVkXCIgLyogRU1VTEFUT1JfQ09ORklHX0ZBSUxFRCAqLyk7XHJcbiAgICBfYXNzZXJ0KC9eaHR0cHM/OlxcL1xcLy8udGVzdCh1cmwpLCBhdXRoSW50ZXJuYWwsIFwiaW52YWxpZC1lbXVsYXRvci1zY2hlbWVcIiAvKiBJTlZBTElEX0VNVUxBVE9SX1NDSEVNRSAqLyk7XHJcbiAgICBjb25zdCBkaXNhYmxlV2FybmluZ3MgPSAhIShvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuZGlzYWJsZVdhcm5pbmdzKTtcclxuICAgIGNvbnN0IHByb3RvY29sID0gZXh0cmFjdFByb3RvY29sKHVybCk7XHJcbiAgICBjb25zdCB7IGhvc3QsIHBvcnQgfSA9IGV4dHJhY3RIb3N0QW5kUG9ydCh1cmwpO1xyXG4gICAgY29uc3QgcG9ydFN0ciA9IHBvcnQgPT09IG51bGwgPyAnJyA6IGA6JHtwb3J0fWA7XHJcbiAgICAvLyBBbHdheXMgcmVwbGFjZSBwYXRoIHdpdGggXCIvXCIgKGV2ZW4gaWYgaW5wdXQgdXJsIGhhZCBubyBwYXRoIGF0IGFsbCwgb3IgaGFkIGEgZGlmZmVyZW50IG9uZSkuXHJcbiAgICBhdXRoSW50ZXJuYWwuY29uZmlnLmVtdWxhdG9yID0geyB1cmw6IGAke3Byb3RvY29sfS8vJHtob3N0fSR7cG9ydFN0cn0vYCB9O1xyXG4gICAgYXV0aEludGVybmFsLnNldHRpbmdzLmFwcFZlcmlmaWNhdGlvbkRpc2FibGVkRm9yVGVzdGluZyA9IHRydWU7XHJcbiAgICBhdXRoSW50ZXJuYWwuZW11bGF0b3JDb25maWcgPSBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICBob3N0LFxyXG4gICAgICAgIHBvcnQsXHJcbiAgICAgICAgcHJvdG9jb2w6IHByb3RvY29sLnJlcGxhY2UoJzonLCAnJyksXHJcbiAgICAgICAgb3B0aW9uczogT2JqZWN0LmZyZWV6ZSh7IGRpc2FibGVXYXJuaW5ncyB9KVxyXG4gICAgfSk7XHJcbiAgICBpZiAoIWRpc2FibGVXYXJuaW5ncykge1xyXG4gICAgICAgIGVtaXRFbXVsYXRvcldhcm5pbmcoKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBleHRyYWN0UHJvdG9jb2wodXJsKSB7XHJcbiAgICBjb25zdCBwcm90b2NvbEVuZCA9IHVybC5pbmRleE9mKCc6Jyk7XHJcbiAgICByZXR1cm4gcHJvdG9jb2xFbmQgPCAwID8gJycgOiB1cmwuc3Vic3RyKDAsIHByb3RvY29sRW5kICsgMSk7XHJcbn1cclxuZnVuY3Rpb24gZXh0cmFjdEhvc3RBbmRQb3J0KHVybCkge1xyXG4gICAgY29uc3QgcHJvdG9jb2wgPSBleHRyYWN0UHJvdG9jb2wodXJsKTtcclxuICAgIGNvbnN0IGF1dGhvcml0eSA9IC8oXFwvXFwvKT8oW14/Iy9dKykvLmV4ZWModXJsLnN1YnN0cihwcm90b2NvbC5sZW5ndGgpKTsgLy8gQmV0d2VlbiAvLyBhbmQgLywgPyBvciAjLlxyXG4gICAgaWYgKCFhdXRob3JpdHkpIHtcclxuICAgICAgICByZXR1cm4geyBob3N0OiAnJywgcG9ydDogbnVsbCB9O1xyXG4gICAgfVxyXG4gICAgY29uc3QgaG9zdEFuZFBvcnQgPSBhdXRob3JpdHlbMl0uc3BsaXQoJ0AnKS5wb3AoKSB8fCAnJzsgLy8gU3RyaXAgb3V0IFwidXNlcm5hbWU6cGFzc3dvcmRAXCIuXHJcbiAgICBjb25zdCBicmFja2V0ZWRJUHY2ID0gL14oXFxbW15cXF1dK1xcXSkoOnwkKS8uZXhlYyhob3N0QW5kUG9ydCk7XHJcbiAgICBpZiAoYnJhY2tldGVkSVB2Nikge1xyXG4gICAgICAgIGNvbnN0IGhvc3QgPSBicmFja2V0ZWRJUHY2WzFdO1xyXG4gICAgICAgIHJldHVybiB7IGhvc3QsIHBvcnQ6IHBhcnNlUG9ydChob3N0QW5kUG9ydC5zdWJzdHIoaG9zdC5sZW5ndGggKyAxKSkgfTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IFtob3N0LCBwb3J0XSA9IGhvc3RBbmRQb3J0LnNwbGl0KCc6Jyk7XHJcbiAgICAgICAgcmV0dXJuIHsgaG9zdCwgcG9ydDogcGFyc2VQb3J0KHBvcnQpIH07XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gcGFyc2VQb3J0KHBvcnRTdHIpIHtcclxuICAgIGlmICghcG9ydFN0cikge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcG9ydCA9IE51bWJlcihwb3J0U3RyKTtcclxuICAgIGlmIChpc05hTihwb3J0KSkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBvcnQ7XHJcbn1cclxuZnVuY3Rpb24gZW1pdEVtdWxhdG9yV2FybmluZygpIHtcclxuICAgIGZ1bmN0aW9uIGF0dGFjaEJhbm5lcigpIHtcclxuICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcclxuICAgICAgICBjb25zdCBzdHkgPSBlbC5zdHlsZTtcclxuICAgICAgICBlbC5pbm5lclRleHQgPVxyXG4gICAgICAgICAgICAnUnVubmluZyBpbiBlbXVsYXRvciBtb2RlLiBEbyBub3QgdXNlIHdpdGggcHJvZHVjdGlvbiBjcmVkZW50aWFscy4nO1xyXG4gICAgICAgIHN0eS5wb3NpdGlvbiA9ICdmaXhlZCc7XHJcbiAgICAgICAgc3R5LndpZHRoID0gJzEwMCUnO1xyXG4gICAgICAgIHN0eS5iYWNrZ3JvdW5kQ29sb3IgPSAnI2ZmZmZmZic7XHJcbiAgICAgICAgc3R5LmJvcmRlciA9ICcuMWVtIHNvbGlkICMwMDAwMDAnO1xyXG4gICAgICAgIHN0eS5jb2xvciA9ICcjYjUwMDAwJztcclxuICAgICAgICBzdHkuYm90dG9tID0gJzBweCc7XHJcbiAgICAgICAgc3R5LmxlZnQgPSAnMHB4JztcclxuICAgICAgICBzdHkubWFyZ2luID0gJzBweCc7XHJcbiAgICAgICAgc3R5LnpJbmRleCA9ICcxMDAwMCc7XHJcbiAgICAgICAgc3R5LnRleHRBbGlnbiA9ICdjZW50ZXInO1xyXG4gICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2ZpcmViYXNlLWVtdWxhdG9yLXdhcm5pbmcnKTtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsKTtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGNvbnNvbGUuaW5mbyA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIGNvbnNvbGUuaW5mbygnV0FSTklORzogWW91IGFyZSB1c2luZyB0aGUgQXV0aCBFbXVsYXRvciwnICtcclxuICAgICAgICAgICAgJyB3aGljaCBpcyBpbnRlbmRlZCBmb3IgbG9jYWwgdGVzdGluZyBvbmx5LiAgRG8gbm90IHVzZSB3aXRoJyArXHJcbiAgICAgICAgICAgICcgcHJvZHVjdGlvbiBjcmVkZW50aWFscy4nKTtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgIHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2xvYWRpbmcnKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgYXR0YWNoQmFubmVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGF0dGFjaEJhbm5lcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogSW50ZXJmYWNlIHRoYXQgcmVwcmVzZW50cyB0aGUgY3JlZGVudGlhbHMgcmV0dXJuZWQgYnkgYW4ge0BsaW5rIEF1dGhQcm92aWRlcn0uXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEltcGxlbWVudGF0aW9ucyBzcGVjaWZ5IHRoZSBkZXRhaWxzIGFib3V0IGVhY2ggYXV0aCBwcm92aWRlcidzIGNyZWRlbnRpYWwgcmVxdWlyZW1lbnRzLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBBdXRoQ3JlZGVudGlhbCB7XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGF1dGhlbnRpY2F0aW9uIHByb3ZpZGVyIElEIGZvciB0aGUgY3JlZGVudGlhbC5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogRm9yIGV4YW1wbGUsICdmYWNlYm9vay5jb20nLCBvciAnZ29vZ2xlLmNvbScuXHJcbiAgICAgKi9cclxuICAgIHByb3ZpZGVySWQsIFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgYXV0aGVudGljYXRpb24gc2lnbiBpbiBtZXRob2QgZm9yIHRoZSBjcmVkZW50aWFsLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiBGb3IgZXhhbXBsZSwge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRU1BSUxfUEFTU1dPUkQsIG9yXHJcbiAgICAgKiB7QGxpbmsgU2lnbkluTWV0aG9kfS5FTUFJTF9MSU5LLiBUaGlzIGNvcnJlc3BvbmRzIHRvIHRoZSBzaWduLWluIG1ldGhvZFxyXG4gICAgICogaWRlbnRpZmllciBhcyByZXR1cm5lZCBpbiB7QGxpbmsgZmV0Y2hTaWduSW5NZXRob2RzRm9yRW1haWx9LlxyXG4gICAgICovXHJcbiAgICBzaWduSW5NZXRob2QpIHtcclxuICAgICAgICB0aGlzLnByb3ZpZGVySWQgPSBwcm92aWRlcklkO1xyXG4gICAgICAgIHRoaXMuc2lnbkluTWV0aG9kID0gc2lnbkluTWV0aG9kO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgSlNPTi1zZXJpYWxpemFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBvYmplY3QuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgYSBKU09OLXNlcmlhbGl6YWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIG9iamVjdC5cclxuICAgICAqL1xyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIHJldHVybiBkZWJ1Z0ZhaWwoJ25vdCBpbXBsZW1lbnRlZCcpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2dldElkVG9rZW5SZXNwb25zZShfYXV0aCkge1xyXG4gICAgICAgIHJldHVybiBkZWJ1Z0ZhaWwoJ25vdCBpbXBsZW1lbnRlZCcpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2xpbmtUb0lkVG9rZW4oX2F1dGgsIF9pZFRva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIGRlYnVnRmFpbCgnbm90IGltcGxlbWVudGVkJyk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZ2V0UmVhdXRoZW50aWNhdGlvblJlc29sdmVyKF9hdXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIGRlYnVnRmFpbCgnbm90IGltcGxlbWVudGVkJyk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gcmVzZXRQYXNzd29yZChhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnJlc2V0UGFzc3dvcmRcIiAvKiBSRVNFVF9QQVNTV09SRCAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVFbWFpbFBhc3N3b3JkKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6dXBkYXRlXCIgLyogU0VUX0FDQ09VTlRfSU5GTyAqLywgcmVxdWVzdCk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gYXBwbHlBY3Rpb25Db2RlJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czp1cGRhdGVcIiAvKiBTRVRfQUNDT1VOVF9JTkZPICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25JbldpdGhQYXNzd29yZChhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25JbldpdGhQYXNzd29yZFwiIC8qIFNJR05fSU5fV0lUSF9QQVNTV09SRCAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBzZW5kT29iQ29kZShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNlbmRPb2JDb2RlXCIgLyogU0VORF9PT0JfQ09ERSAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBzZW5kRW1haWxWZXJpZmljYXRpb24kMShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gc2VuZE9vYkNvZGUoYXV0aCwgcmVxdWVzdCk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gc2VuZFBhc3N3b3JkUmVzZXRFbWFpbCQxKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBzZW5kT29iQ29kZShhdXRoLCByZXF1ZXN0KTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBzZW5kU2lnbkluTGlua1RvRW1haWwkMShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gc2VuZE9vYkNvZGUoYXV0aCwgcmVxdWVzdCk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gdmVyaWZ5QW5kQ2hhbmdlRW1haWwoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIHNlbmRPb2JDb2RlKGF1dGgsIHJlcXVlc3QpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25JbldpdGhFbWFpbExpbmskMShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25JbldpdGhFbWFpbExpbmtcIiAvKiBTSUdOX0lOX1dJVEhfRU1BSUxfTElOSyAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoRW1haWxMaW5rRm9yTGlua2luZyhhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25JbldpdGhFbWFpbExpbmtcIiAvKiBTSUdOX0lOX1dJVEhfRU1BSUxfTElOSyAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogSW50ZXJmYWNlIHRoYXQgcmVwcmVzZW50cyB0aGUgY3JlZGVudGlhbHMgcmV0dXJuZWQgYnkge0BsaW5rIEVtYWlsQXV0aFByb3ZpZGVyfSBmb3JcclxuICoge0BsaW5rIFByb3ZpZGVySWR9LlBBU1NXT1JEXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIENvdmVycyBib3RoIHtAbGluayBTaWduSW5NZXRob2R9LkVNQUlMX1BBU1NXT1JEIGFuZFxyXG4gKiB7QGxpbmsgU2lnbkluTWV0aG9kfS5FTUFJTF9MSU5LLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBFbWFpbEF1dGhDcmVkZW50aWFsIGV4dGVuZHMgQXV0aENyZWRlbnRpYWwge1xyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZW1haWwsIFxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX3Bhc3N3b3JkLCBzaWduSW5NZXRob2QsIFxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX3RlbmFudElkID0gbnVsbCkge1xyXG4gICAgICAgIHN1cGVyKFwicGFzc3dvcmRcIiAvKiBQQVNTV09SRCAqLywgc2lnbkluTWV0aG9kKTtcclxuICAgICAgICB0aGlzLl9lbWFpbCA9IF9lbWFpbDtcclxuICAgICAgICB0aGlzLl9wYXNzd29yZCA9IF9wYXNzd29yZDtcclxuICAgICAgICB0aGlzLl90ZW5hbnRJZCA9IF90ZW5hbnRJZDtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIHN0YXRpYyBfZnJvbUVtYWlsQW5kUGFzc3dvcmQoZW1haWwsIHBhc3N3b3JkKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBFbWFpbEF1dGhDcmVkZW50aWFsKGVtYWlsLCBwYXNzd29yZCwgXCJwYXNzd29yZFwiIC8qIEVNQUlMX1BBU1NXT1JEICovKTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIHN0YXRpYyBfZnJvbUVtYWlsQW5kQ29kZShlbWFpbCwgb29iQ29kZSwgdGVuYW50SWQgPSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBFbWFpbEF1dGhDcmVkZW50aWFsKGVtYWlsLCBvb2JDb2RlLCBcImVtYWlsTGlua1wiIC8qIEVNQUlMX0xJTksgKi8sIHRlbmFudElkKTtcclxuICAgIH1cclxuICAgIC8qKiB7QGluaGVyaXRkb2MgQXV0aENyZWRlbnRpYWwudG9KU09OfSAqL1xyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGVtYWlsOiB0aGlzLl9lbWFpbCxcclxuICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMuX3Bhc3N3b3JkLFxyXG4gICAgICAgICAgICBzaWduSW5NZXRob2Q6IHRoaXMuc2lnbkluTWV0aG9kLFxyXG4gICAgICAgICAgICB0ZW5hbnRJZDogdGhpcy5fdGVuYW50SWRcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTdGF0aWMgbWV0aG9kIHRvIGRlc2VyaWFsaXplIGEgSlNPTiByZXByZXNlbnRhdGlvbiBvZiBhbiBvYmplY3QgaW50byBhbiB7QGxpbmsgIEF1dGhDcmVkZW50aWFsfS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ganNvbiAtIEVpdGhlciBgb2JqZWN0YCBvciB0aGUgc3RyaW5naWZpZWQgcmVwcmVzZW50YXRpb24gb2YgdGhlIG9iamVjdC4gV2hlbiBzdHJpbmcgaXNcclxuICAgICAqIHByb3ZpZGVkLCBgSlNPTi5wYXJzZWAgd291bGQgYmUgY2FsbGVkIGZpcnN0LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIElmIHRoZSBKU09OIGlucHV0IGRvZXMgbm90IHJlcHJlc2VudCBhbiB7QGxpbmsgQXV0aENyZWRlbnRpYWx9LCBudWxsIGlzIHJldHVybmVkLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZnJvbUpTT04oanNvbikge1xyXG4gICAgICAgIGNvbnN0IG9iaiA9IHR5cGVvZiBqc29uID09PSAnc3RyaW5nJyA/IEpTT04ucGFyc2UoanNvbikgOiBqc29uO1xyXG4gICAgICAgIGlmICgob2JqID09PSBudWxsIHx8IG9iaiA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqLmVtYWlsKSAmJiAob2JqID09PSBudWxsIHx8IG9iaiA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqLnBhc3N3b3JkKSkge1xyXG4gICAgICAgICAgICBpZiAob2JqLnNpZ25Jbk1ldGhvZCA9PT0gXCJwYXNzd29yZFwiIC8qIEVNQUlMX1BBU1NXT1JEICovKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZnJvbUVtYWlsQW5kUGFzc3dvcmQob2JqLmVtYWlsLCBvYmoucGFzc3dvcmQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKG9iai5zaWduSW5NZXRob2QgPT09IFwiZW1haWxMaW5rXCIgLyogRU1BSUxfTElOSyAqLykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Zyb21FbWFpbEFuZENvZGUob2JqLmVtYWlsLCBvYmoucGFzc3dvcmQsIG9iai50ZW5hbnRJZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBhc3luYyBfZ2V0SWRUb2tlblJlc3BvbnNlKGF1dGgpIHtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMuc2lnbkluTWV0aG9kKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJwYXNzd29yZFwiIC8qIEVNQUlMX1BBU1NXT1JEICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhQYXNzd29yZChhdXRoLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuX2VtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLl9wYXNzd29yZFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNhc2UgXCJlbWFpbExpbmtcIiAvKiBFTUFJTF9MSU5LICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhFbWFpbExpbmskMShhdXRoLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuX2VtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgIG9vYkNvZGU6IHRoaXMuX3Bhc3N3b3JkXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIF9mYWlsKGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgYXN5bmMgX2xpbmtUb0lkVG9rZW4oYXV0aCwgaWRUb2tlbikge1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5zaWduSW5NZXRob2QpIHtcclxuICAgICAgICAgICAgY2FzZSBcInBhc3N3b3JkXCIgLyogRU1BSUxfUEFTU1dPUkQgKi86XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlRW1haWxQYXNzd29yZChhdXRoLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWRUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy5fZW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMuX3Bhc3N3b3JkXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY2FzZSBcImVtYWlsTGlua1wiIC8qIEVNQUlMX0xJTksgKi86XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2lnbkluV2l0aEVtYWlsTGlua0ZvckxpbmtpbmcoYXV0aCwge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuX2VtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgIG9vYkNvZGU6IHRoaXMuX3Bhc3N3b3JkXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIF9mYWlsKGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2dldFJlYXV0aGVudGljYXRpb25SZXNvbHZlcihhdXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldElkVG9rZW5SZXNwb25zZShhdXRoKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoSWRwKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybVNpZ25JblJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6c2lnbkluV2l0aElkcFwiIC8qIFNJR05fSU5fV0lUSF9JRFAgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgSURQX1JFUVVFU1RfVVJJJDEgPSAnaHR0cDovL2xvY2FsaG9zdCc7XHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIHRoZSBPQXV0aCBjcmVkZW50aWFscyByZXR1cm5lZCBieSBhbiB7QGxpbmsgT0F1dGhQcm92aWRlcn0uXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEltcGxlbWVudGF0aW9ucyBzcGVjaWZ5IHRoZSBkZXRhaWxzIGFib3V0IGVhY2ggYXV0aCBwcm92aWRlcidzIGNyZWRlbnRpYWwgcmVxdWlyZW1lbnRzLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBPQXV0aENyZWRlbnRpYWwgZXh0ZW5kcyBBdXRoQ3JlZGVudGlhbCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1Rva2VuID0gbnVsbDtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIHN0YXRpYyBfZnJvbVBhcmFtcyhwYXJhbXMpIHtcclxuICAgICAgICBjb25zdCBjcmVkID0gbmV3IE9BdXRoQ3JlZGVudGlhbChwYXJhbXMucHJvdmlkZXJJZCwgcGFyYW1zLnNpZ25Jbk1ldGhvZCk7XHJcbiAgICAgICAgaWYgKHBhcmFtcy5pZFRva2VuIHx8IHBhcmFtcy5hY2Nlc3NUb2tlbikge1xyXG4gICAgICAgICAgICAvLyBPQXV0aCAyIGFuZCBlaXRoZXIgSUQgdG9rZW4gb3IgYWNjZXNzIHRva2VuLlxyXG4gICAgICAgICAgICBpZiAocGFyYW1zLmlkVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIGNyZWQuaWRUb2tlbiA9IHBhcmFtcy5pZFRva2VuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChwYXJhbXMuYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIGNyZWQuYWNjZXNzVG9rZW4gPSBwYXJhbXMuYWNjZXNzVG9rZW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQWRkIG5vbmNlIGlmIGF2YWlsYWJsZSBhbmQgbm8gcGVuZGluZ1Rva2VuIGlzIHByZXNlbnQuXHJcbiAgICAgICAgICAgIGlmIChwYXJhbXMubm9uY2UgJiYgIXBhcmFtcy5wZW5kaW5nVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIGNyZWQubm9uY2UgPSBwYXJhbXMubm9uY2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHBhcmFtcy5wZW5kaW5nVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIGNyZWQucGVuZGluZ1Rva2VuID0gcGFyYW1zLnBlbmRpbmdUb2tlbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChwYXJhbXMub2F1dGhUb2tlbiAmJiBwYXJhbXMub2F1dGhUb2tlblNlY3JldCkge1xyXG4gICAgICAgICAgICAvLyBPQXV0aCAxIGFuZCBPQXV0aCB0b2tlbiB3aXRoIHRva2VuIHNlY3JldFxyXG4gICAgICAgICAgICBjcmVkLmFjY2Vzc1Rva2VuID0gcGFyYW1zLm9hdXRoVG9rZW47XHJcbiAgICAgICAgICAgIGNyZWQuc2VjcmV0ID0gcGFyYW1zLm9hdXRoVG9rZW5TZWNyZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBfZmFpbChcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY3JlZDtcclxuICAgIH1cclxuICAgIC8qKiB7QGluaGVyaXRkb2MgQXV0aENyZWRlbnRpYWwudG9KU09OfSAgKi9cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpZFRva2VuOiB0aGlzLmlkVG9rZW4sXHJcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiB0aGlzLmFjY2Vzc1Rva2VuLFxyXG4gICAgICAgICAgICBzZWNyZXQ6IHRoaXMuc2VjcmV0LFxyXG4gICAgICAgICAgICBub25jZTogdGhpcy5ub25jZSxcclxuICAgICAgICAgICAgcGVuZGluZ1Rva2VuOiB0aGlzLnBlbmRpbmdUb2tlbixcclxuICAgICAgICAgICAgcHJvdmlkZXJJZDogdGhpcy5wcm92aWRlcklkLFxyXG4gICAgICAgICAgICBzaWduSW5NZXRob2Q6IHRoaXMuc2lnbkluTWV0aG9kXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU3RhdGljIG1ldGhvZCB0byBkZXNlcmlhbGl6ZSBhIEpTT04gcmVwcmVzZW50YXRpb24gb2YgYW4gb2JqZWN0IGludG8gYW5cclxuICAgICAqIHtAbGluayAgQXV0aENyZWRlbnRpYWx9LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBqc29uIC0gSW5wdXQgY2FuIGJlIGVpdGhlciBPYmplY3Qgb3IgdGhlIHN0cmluZ2lmaWVkIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBvYmplY3QuXHJcbiAgICAgKiBXaGVuIHN0cmluZyBpcyBwcm92aWRlZCwgSlNPTi5wYXJzZSB3b3VsZCBiZSBjYWxsZWQgZmlyc3QuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgSWYgdGhlIEpTT04gaW5wdXQgZG9lcyBub3QgcmVwcmVzZW50IGFuIHtAbGluayAgQXV0aENyZWRlbnRpYWx9LCBudWxsIGlzIHJldHVybmVkLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZnJvbUpTT04oanNvbikge1xyXG4gICAgICAgIGNvbnN0IG9iaiA9IHR5cGVvZiBqc29uID09PSAnc3RyaW5nJyA/IEpTT04ucGFyc2UoanNvbikgOiBqc29uO1xyXG4gICAgICAgIGNvbnN0IHsgcHJvdmlkZXJJZCwgc2lnbkluTWV0aG9kIH0gPSBvYmosIHJlc3QgPSBfX3Jlc3Qob2JqLCBbXCJwcm92aWRlcklkXCIsIFwic2lnbkluTWV0aG9kXCJdKTtcclxuICAgICAgICBpZiAoIXByb3ZpZGVySWQgfHwgIXNpZ25Jbk1ldGhvZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY3JlZCA9IG5ldyBPQXV0aENyZWRlbnRpYWwocHJvdmlkZXJJZCwgc2lnbkluTWV0aG9kKTtcclxuICAgICAgICBjcmVkLmlkVG9rZW4gPSByZXN0LmlkVG9rZW4gfHwgdW5kZWZpbmVkO1xyXG4gICAgICAgIGNyZWQuYWNjZXNzVG9rZW4gPSByZXN0LmFjY2Vzc1Rva2VuIHx8IHVuZGVmaW5lZDtcclxuICAgICAgICBjcmVkLnNlY3JldCA9IHJlc3Quc2VjcmV0O1xyXG4gICAgICAgIGNyZWQubm9uY2UgPSByZXN0Lm5vbmNlO1xyXG4gICAgICAgIGNyZWQucGVuZGluZ1Rva2VuID0gcmVzdC5wZW5kaW5nVG9rZW4gfHwgbnVsbDtcclxuICAgICAgICByZXR1cm4gY3JlZDtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9nZXRJZFRva2VuUmVzcG9uc2UoYXV0aCkge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLmJ1aWxkUmVxdWVzdCgpO1xyXG4gICAgICAgIHJldHVybiBzaWduSW5XaXRoSWRwKGF1dGgsIHJlcXVlc3QpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2xpbmtUb0lkVG9rZW4oYXV0aCwgaWRUb2tlbikge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLmJ1aWxkUmVxdWVzdCgpO1xyXG4gICAgICAgIHJlcXVlc3QuaWRUb2tlbiA9IGlkVG9rZW47XHJcbiAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhJZHAoYXV0aCwgcmVxdWVzdCk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZ2V0UmVhdXRoZW50aWNhdGlvblJlc29sdmVyKGF1dGgpIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5idWlsZFJlcXVlc3QoKTtcclxuICAgICAgICByZXF1ZXN0LmF1dG9DcmVhdGUgPSBmYWxzZTtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aElkcChhdXRoLCByZXF1ZXN0KTtcclxuICAgIH1cclxuICAgIGJ1aWxkUmVxdWVzdCgpIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0ge1xyXG4gICAgICAgICAgICByZXF1ZXN0VXJpOiBJRFBfUkVRVUVTVF9VUkkkMSxcclxuICAgICAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWVcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICh0aGlzLnBlbmRpbmdUb2tlbikge1xyXG4gICAgICAgICAgICByZXF1ZXN0LnBlbmRpbmdUb2tlbiA9IHRoaXMucGVuZGluZ1Rva2VuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgcG9zdEJvZHkgPSB7fTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaWRUb2tlbikge1xyXG4gICAgICAgICAgICAgICAgcG9zdEJvZHlbJ2lkX3Rva2VuJ10gPSB0aGlzLmlkVG9rZW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIHBvc3RCb2R5WydhY2Nlc3NfdG9rZW4nXSA9IHRoaXMuYWNjZXNzVG9rZW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VjcmV0KSB7XHJcbiAgICAgICAgICAgICAgICBwb3N0Qm9keVsnb2F1dGhfdG9rZW5fc2VjcmV0J10gPSB0aGlzLnNlY3JldDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwb3N0Qm9keVsncHJvdmlkZXJJZCddID0gdGhpcy5wcm92aWRlcklkO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5ub25jZSAmJiAhdGhpcy5wZW5kaW5nVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIHBvc3RCb2R5Wydub25jZSddID0gdGhpcy5ub25jZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXF1ZXN0LnBvc3RCb2R5ID0gcXVlcnlzdHJpbmcocG9zdEJvZHkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVxdWVzdDtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzZW5kUGhvbmVWZXJpZmljYXRpb25Db2RlKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6c2VuZFZlcmlmaWNhdGlvbkNvZGVcIiAvKiBTRU5EX1ZFUklGSUNBVElPTl9DT0RFICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25JbldpdGhQaG9uZU51bWJlciQxKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybVNpZ25JblJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6c2lnbkluV2l0aFBob25lTnVtYmVyXCIgLyogU0lHTl9JTl9XSVRIX1BIT05FX05VTUJFUiAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBsaW5rV2l0aFBob25lTnVtYmVyJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfcGVyZm9ybVNpZ25JblJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6c2lnbkluV2l0aFBob25lTnVtYmVyXCIgLyogU0lHTl9JTl9XSVRIX1BIT05FX05VTUJFUiAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxuICAgIGlmIChyZXNwb25zZS50ZW1wb3JhcnlQcm9vZikge1xyXG4gICAgICAgIHRocm93IF9tYWtlVGFnZ2VkRXJyb3IoYXV0aCwgXCJhY2NvdW50LWV4aXN0cy13aXRoLWRpZmZlcmVudC1jcmVkZW50aWFsXCIgLyogTkVFRF9DT05GSVJNQVRJT04gKi8sIHJlc3BvbnNlKTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXNwb25zZTtcclxufVxyXG5jb25zdCBWRVJJRllfUEhPTkVfTlVNQkVSX0ZPUl9FWElTVElOR19FUlJPUl9NQVBfID0ge1xyXG4gICAgW1wiVVNFUl9OT1RfRk9VTkRcIiAvKiBVU0VSX05PVF9GT1VORCAqL106IFwidXNlci1ub3QtZm91bmRcIiAvKiBVU0VSX0RFTEVURUQgKi9cclxufTtcclxuYXN5bmMgZnVuY3Rpb24gdmVyaWZ5UGhvbmVOdW1iZXJGb3JFeGlzdGluZyhhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICBjb25zdCBhcGlSZXF1ZXN0ID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXF1ZXN0KSwgeyBvcGVyYXRpb246ICdSRUFVVEgnIH0pO1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpzaWduSW5XaXRoUGhvbmVOdW1iZXJcIiAvKiBTSUdOX0lOX1dJVEhfUEhPTkVfTlVNQkVSICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgYXBpUmVxdWVzdCksIFZFUklGWV9QSE9ORV9OVU1CRVJfRk9SX0VYSVNUSU5HX0VSUk9SX01BUF8pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIHRoZSBjcmVkZW50aWFscyByZXR1cm5lZCBieSB7QGxpbmsgUGhvbmVBdXRoUHJvdmlkZXJ9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBQaG9uZUF1dGhDcmVkZW50aWFsIGV4dGVuZHMgQXV0aENyZWRlbnRpYWwge1xyXG4gICAgY29uc3RydWN0b3IocGFyYW1zKSB7XHJcbiAgICAgICAgc3VwZXIoXCJwaG9uZVwiIC8qIFBIT05FICovLCBcInBob25lXCIgLyogUEhPTkUgKi8pO1xyXG4gICAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgc3RhdGljIF9mcm9tVmVyaWZpY2F0aW9uKHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQaG9uZUF1dGhDcmVkZW50aWFsKHsgdmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUgfSk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBzdGF0aWMgX2Zyb21Ub2tlblJlc3BvbnNlKHBob25lTnVtYmVyLCB0ZW1wb3JhcnlQcm9vZikge1xyXG4gICAgICAgIHJldHVybiBuZXcgUGhvbmVBdXRoQ3JlZGVudGlhbCh7IHBob25lTnVtYmVyLCB0ZW1wb3JhcnlQcm9vZiB9KTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9nZXRJZFRva2VuUmVzcG9uc2UoYXV0aCkge1xyXG4gICAgICAgIHJldHVybiBzaWduSW5XaXRoUGhvbmVOdW1iZXIkMShhdXRoLCB0aGlzLl9tYWtlVmVyaWZpY2F0aW9uUmVxdWVzdCgpKTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9saW5rVG9JZFRva2VuKGF1dGgsIGlkVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gbGlua1dpdGhQaG9uZU51bWJlciQxKGF1dGgsIE9iamVjdC5hc3NpZ24oeyBpZFRva2VuIH0sIHRoaXMuX21ha2VWZXJpZmljYXRpb25SZXF1ZXN0KCkpKTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9nZXRSZWF1dGhlbnRpY2F0aW9uUmVzb2x2ZXIoYXV0aCkge1xyXG4gICAgICAgIHJldHVybiB2ZXJpZnlQaG9uZU51bWJlckZvckV4aXN0aW5nKGF1dGgsIHRoaXMuX21ha2VWZXJpZmljYXRpb25SZXF1ZXN0KCkpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX21ha2VWZXJpZmljYXRpb25SZXF1ZXN0KCkge1xyXG4gICAgICAgIGNvbnN0IHsgdGVtcG9yYXJ5UHJvb2YsIHBob25lTnVtYmVyLCB2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSB9ID0gdGhpcy5wYXJhbXM7XHJcbiAgICAgICAgaWYgKHRlbXBvcmFyeVByb29mICYmIHBob25lTnVtYmVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHRlbXBvcmFyeVByb29mLCBwaG9uZU51bWJlciB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzZXNzaW9uSW5mbzogdmVyaWZpY2F0aW9uSWQsXHJcbiAgICAgICAgICAgIGNvZGU6IHZlcmlmaWNhdGlvbkNvZGVcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLyoqIHtAaW5oZXJpdGRvYyBBdXRoQ3JlZGVudGlhbC50b0pTT059ICovXHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgY29uc3Qgb2JqID0ge1xyXG4gICAgICAgICAgICBwcm92aWRlcklkOiB0aGlzLnByb3ZpZGVySWRcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICh0aGlzLnBhcmFtcy5waG9uZU51bWJlcikge1xyXG4gICAgICAgICAgICBvYmoucGhvbmVOdW1iZXIgPSB0aGlzLnBhcmFtcy5waG9uZU51bWJlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucGFyYW1zLnRlbXBvcmFyeVByb29mKSB7XHJcbiAgICAgICAgICAgIG9iai50ZW1wb3JhcnlQcm9vZiA9IHRoaXMucGFyYW1zLnRlbXBvcmFyeVByb29mO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5wYXJhbXMudmVyaWZpY2F0aW9uQ29kZSkge1xyXG4gICAgICAgICAgICBvYmoudmVyaWZpY2F0aW9uQ29kZSA9IHRoaXMucGFyYW1zLnZlcmlmaWNhdGlvbkNvZGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnBhcmFtcy52ZXJpZmljYXRpb25JZCkge1xyXG4gICAgICAgICAgICBvYmoudmVyaWZpY2F0aW9uSWQgPSB0aGlzLnBhcmFtcy52ZXJpZmljYXRpb25JZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuICAgIC8qKiBHZW5lcmF0ZXMgYSBwaG9uZSBjcmVkZW50aWFsIGJhc2VkIG9uIGEgcGxhaW4gb2JqZWN0IG9yIGEgSlNPTiBzdHJpbmcuICovXHJcbiAgICBzdGF0aWMgZnJvbUpTT04oanNvbikge1xyXG4gICAgICAgIGlmICh0eXBlb2YganNvbiA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAganNvbiA9IEpTT04ucGFyc2UoanNvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgdmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUsIHBob25lTnVtYmVyLCB0ZW1wb3JhcnlQcm9vZiB9ID0ganNvbjtcclxuICAgICAgICBpZiAoIXZlcmlmaWNhdGlvbkNvZGUgJiZcclxuICAgICAgICAgICAgIXZlcmlmaWNhdGlvbklkICYmXHJcbiAgICAgICAgICAgICFwaG9uZU51bWJlciAmJlxyXG4gICAgICAgICAgICAhdGVtcG9yYXJ5UHJvb2YpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgUGhvbmVBdXRoQ3JlZGVudGlhbCh7XHJcbiAgICAgICAgICAgIHZlcmlmaWNhdGlvbklkLFxyXG4gICAgICAgICAgICB2ZXJpZmljYXRpb25Db2RlLFxyXG4gICAgICAgICAgICBwaG9uZU51bWJlcixcclxuICAgICAgICAgICAgdGVtcG9yYXJ5UHJvb2ZcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogTWFwcyB0aGUgbW9kZSBzdHJpbmcgaW4gYWN0aW9uIGNvZGUgVVJMIHRvIEFjdGlvbiBDb2RlIEluZm8gb3BlcmF0aW9uLlxyXG4gKlxyXG4gKiBAcGFyYW0gbW9kZVxyXG4gKi9cclxuZnVuY3Rpb24gcGFyc2VNb2RlKG1vZGUpIHtcclxuICAgIHN3aXRjaCAobW9kZSkge1xyXG4gICAgICAgIGNhc2UgJ3JlY292ZXJFbWFpbCc6XHJcbiAgICAgICAgICAgIHJldHVybiBcIlJFQ09WRVJfRU1BSUxcIiAvKiBSRUNPVkVSX0VNQUlMICovO1xyXG4gICAgICAgIGNhc2UgJ3Jlc2V0UGFzc3dvcmQnOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJQQVNTV09SRF9SRVNFVFwiIC8qIFBBU1NXT1JEX1JFU0VUICovO1xyXG4gICAgICAgIGNhc2UgJ3NpZ25Jbic6XHJcbiAgICAgICAgICAgIHJldHVybiBcIkVNQUlMX1NJR05JTlwiIC8qIEVNQUlMX1NJR05JTiAqLztcclxuICAgICAgICBjYXNlICd2ZXJpZnlFbWFpbCc6XHJcbiAgICAgICAgICAgIHJldHVybiBcIlZFUklGWV9FTUFJTFwiIC8qIFZFUklGWV9FTUFJTCAqLztcclxuICAgICAgICBjYXNlICd2ZXJpZnlBbmRDaGFuZ2VFbWFpbCc6XHJcbiAgICAgICAgICAgIHJldHVybiBcIlZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMXCIgLyogVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwgKi87XHJcbiAgICAgICAgY2FzZSAncmV2ZXJ0U2Vjb25kRmFjdG9yQWRkaXRpb24nOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJSRVZFUlRfU0VDT05EX0ZBQ1RPUl9BRERJVElPTlwiIC8qIFJFVkVSVF9TRUNPTkRfRkFDVE9SX0FERElUSU9OICovO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBIZWxwZXIgdG8gcGFyc2UgRkRMIGxpbmtzXHJcbiAqXHJcbiAqIEBwYXJhbSB1cmxcclxuICovXHJcbmZ1bmN0aW9uIHBhcnNlRGVlcExpbmsodXJsKSB7XHJcbiAgICBjb25zdCBsaW5rID0gcXVlcnlzdHJpbmdEZWNvZGUoZXh0cmFjdFF1ZXJ5c3RyaW5nKHVybCkpWydsaW5rJ107XHJcbiAgICAvLyBEb3VibGUgbGluayBjYXNlIChhdXRvbWF0aWMgcmVkaXJlY3QpLlxyXG4gICAgY29uc3QgZG91YmxlRGVlcExpbmsgPSBsaW5rXHJcbiAgICAgICAgPyBxdWVyeXN0cmluZ0RlY29kZShleHRyYWN0UXVlcnlzdHJpbmcobGluaykpWydkZWVwX2xpbmtfaWQnXVxyXG4gICAgICAgIDogbnVsbDtcclxuICAgIC8vIGlPUyBjdXN0b20gc2NoZW1lIGxpbmtzLlxyXG4gICAgY29uc3QgaU9TRGVlcExpbmsgPSBxdWVyeXN0cmluZ0RlY29kZShleHRyYWN0UXVlcnlzdHJpbmcodXJsKSlbJ2RlZXBfbGlua19pZCddO1xyXG4gICAgY29uc3QgaU9TRG91YmxlRGVlcExpbmsgPSBpT1NEZWVwTGlua1xyXG4gICAgICAgID8gcXVlcnlzdHJpbmdEZWNvZGUoZXh0cmFjdFF1ZXJ5c3RyaW5nKGlPU0RlZXBMaW5rKSlbJ2xpbmsnXVxyXG4gICAgICAgIDogbnVsbDtcclxuICAgIHJldHVybiBpT1NEb3VibGVEZWVwTGluayB8fCBpT1NEZWVwTGluayB8fCBkb3VibGVEZWVwTGluayB8fCBsaW5rIHx8IHVybDtcclxufVxyXG4vKipcclxuICogQSB1dGlsaXR5IGNsYXNzIHRvIHBhcnNlIGVtYWlsIGFjdGlvbiBVUkxzIHN1Y2ggYXMgcGFzc3dvcmQgcmVzZXQsIGVtYWlsIHZlcmlmaWNhdGlvbixcclxuICogZW1haWwgbGluayBzaWduIGluLCBldGMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIEFjdGlvbkNvZGVVUkwge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gYWN0aW9uTGluayAtIFRoZSBsaW5rIGZyb20gd2hpY2ggdG8gZXh0cmFjdCB0aGUgVVJMLlxyXG4gICAgICogQHJldHVybnMgVGhlIHtAbGluayBBY3Rpb25Db2RlVVJMfSBvYmplY3QsIG9yIG51bGwgaWYgdGhlIGxpbmsgaXMgaW52YWxpZC5cclxuICAgICAqXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoYWN0aW9uTGluaykge1xyXG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mO1xyXG4gICAgICAgIGNvbnN0IHNlYXJjaFBhcmFtcyA9IHF1ZXJ5c3RyaW5nRGVjb2RlKGV4dHJhY3RRdWVyeXN0cmluZyhhY3Rpb25MaW5rKSk7XHJcbiAgICAgICAgY29uc3QgYXBpS2V5ID0gKF9hID0gc2VhcmNoUGFyYW1zW1wiYXBpS2V5XCIgLyogQVBJX0tFWSAqL10pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IG51bGw7XHJcbiAgICAgICAgY29uc3QgY29kZSA9IChfYiA9IHNlYXJjaFBhcmFtc1tcIm9vYkNvZGVcIiAvKiBDT0RFICovXSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogbnVsbDtcclxuICAgICAgICBjb25zdCBvcGVyYXRpb24gPSBwYXJzZU1vZGUoKF9jID0gc2VhcmNoUGFyYW1zW1wibW9kZVwiIC8qIE1PREUgKi9dKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBudWxsKTtcclxuICAgICAgICAvLyBWYWxpZGF0ZSBBUEkga2V5LCBjb2RlIGFuZCBtb2RlLlxyXG4gICAgICAgIF9hc3NlcnQoYXBpS2V5ICYmIGNvZGUgJiYgb3BlcmF0aW9uLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIHRoaXMuYXBpS2V5ID0gYXBpS2V5O1xyXG4gICAgICAgIHRoaXMub3BlcmF0aW9uID0gb3BlcmF0aW9uO1xyXG4gICAgICAgIHRoaXMuY29kZSA9IGNvZGU7XHJcbiAgICAgICAgdGhpcy5jb250aW51ZVVybCA9IChfZCA9IHNlYXJjaFBhcmFtc1tcImNvbnRpbnVlVXJsXCIgLyogQ09OVElOVUVfVVJMICovXSkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogbnVsbDtcclxuICAgICAgICB0aGlzLmxhbmd1YWdlQ29kZSA9IChfZSA9IHNlYXJjaFBhcmFtc1tcImxhbmd1YWdlQ29kZVwiIC8qIExBTkdVQUdFX0NPREUgKi9dKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiBudWxsO1xyXG4gICAgICAgIHRoaXMudGVuYW50SWQgPSAoX2YgPSBzZWFyY2hQYXJhbXNbXCJ0ZW5hbnRJZFwiIC8qIFRFTkFOVF9JRCAqL10pICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IG51bGw7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFBhcnNlcyB0aGUgZW1haWwgYWN0aW9uIGxpbmsgc3RyaW5nIGFuZCByZXR1cm5zIGFuIHtAbGluayBBY3Rpb25Db2RlVVJMfSBpZiB0aGUgbGluayBpcyB2YWxpZCxcclxuICAgICAqIG90aGVyd2lzZSByZXR1cm5zIG51bGwuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGxpbmsgIC0gVGhlIGVtYWlsIGFjdGlvbiBsaW5rIHN0cmluZy5cclxuICAgICAqIEByZXR1cm5zIFRoZSB7QGxpbmsgQWN0aW9uQ29kZVVSTH0gb2JqZWN0LCBvciBudWxsIGlmIHRoZSBsaW5rIGlzIGludmFsaWQuXHJcbiAgICAgKlxyXG4gICAgICogQHB1YmxpY1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgcGFyc2VMaW5rKGxpbmspIHtcclxuICAgICAgICBjb25zdCBhY3Rpb25MaW5rID0gcGFyc2VEZWVwTGluayhsaW5rKTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEFjdGlvbkNvZGVVUkwoYWN0aW9uTGluayk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFBhcnNlcyB0aGUgZW1haWwgYWN0aW9uIGxpbmsgc3RyaW5nIGFuZCByZXR1cm5zIGFuIHtAbGluayBBY3Rpb25Db2RlVVJMfSBpZlxyXG4gKiB0aGUgbGluayBpcyB2YWxpZCwgb3RoZXJ3aXNlIHJldHVybnMgbnVsbC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gcGFyc2VBY3Rpb25Db2RlVVJMKGxpbmspIHtcclxuICAgIHJldHVybiBBY3Rpb25Db2RlVVJMLnBhcnNlTGluayhsaW5rKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGdlbmVyYXRpbmcge0BsaW5rIEVtYWlsQXV0aENyZWRlbnRpYWx9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBFbWFpbEF1dGhQcm92aWRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBbHdheXMgc2V0IHRvIHtAbGluayBQcm92aWRlcklkfS5QQVNTV09SRCwgZXZlbiBmb3IgZW1haWwgbGluay5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnByb3ZpZGVySWQgPSBFbWFpbEF1dGhQcm92aWRlci5QUk9WSURFUl9JRDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZSBhbiB7QGxpbmsgQXV0aENyZWRlbnRpYWx9IHVzaW5nIGFuIGVtYWlsIGFuZCBwYXNzd29yZC5cclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogY29uc3QgYXV0aENyZWRlbnRpYWwgPSBFbWFpbEF1dGhQcm92aWRlci5jcmVkZW50aWFsKGVtYWlsLCBwYXNzd29yZCk7XHJcbiAgICAgKiBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IHNpZ25JbldpdGhDcmVkZW50aWFsKGF1dGgsIGF1dGhDcmVkZW50aWFsKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLCBwYXNzd29yZCk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZW1haWwgLSBFbWFpbCBhZGRyZXNzLlxyXG4gICAgICogQHBhcmFtIHBhc3N3b3JkIC0gVXNlciBhY2NvdW50IHBhc3N3b3JkLlxyXG4gICAgICogQHJldHVybnMgVGhlIGF1dGggcHJvdmlkZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWwoZW1haWwsIHBhc3N3b3JkKSB7XHJcbiAgICAgICAgcmV0dXJuIEVtYWlsQXV0aENyZWRlbnRpYWwuX2Zyb21FbWFpbEFuZFBhc3N3b3JkKGVtYWlsLCBwYXNzd29yZCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemUgYW4ge0BsaW5rIEF1dGhDcmVkZW50aWFsfSB1c2luZyBhbiBlbWFpbCBhbmQgYW4gZW1haWwgbGluayBhZnRlciBhIHNpZ24gaW4gd2l0aFxyXG4gICAgICogZW1haWwgbGluayBvcGVyYXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGNvbnN0IGF1dGhDcmVkZW50aWFsID0gRW1haWxBdXRoUHJvdmlkZXIuY3JlZGVudGlhbFdpdGhMaW5rKGF1dGgsIGVtYWlsLCBlbWFpbExpbmspO1xyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBzaWduSW5XaXRoQ3JlZGVudGlhbChhdXRoLCBhdXRoQ3JlZGVudGlhbCk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogYXdhaXQgc2VuZFNpZ25JbkxpbmtUb0VtYWlsKGF1dGgsIGVtYWlsKTtcclxuICAgICAqIC8vIE9idGFpbiBlbWFpbExpbmsgZnJvbSB1c2VyLlxyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBzaWduSW5XaXRoRW1haWxMaW5rKGF1dGgsIGVtYWlsLCBlbWFpbExpbmspO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlIHVzZWQgdG8gdmVyaWZ5IHRoZSBsaW5rLlxyXG4gICAgICogQHBhcmFtIGVtYWlsIC0gRW1haWwgYWRkcmVzcy5cclxuICAgICAqIEBwYXJhbSBlbWFpbExpbmsgLSBTaWduLWluIGVtYWlsIGxpbmsuXHJcbiAgICAgKiBAcmV0dXJucyAtIFRoZSBhdXRoIHByb3ZpZGVyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsV2l0aExpbmsoZW1haWwsIGVtYWlsTGluaykge1xyXG4gICAgICAgIGNvbnN0IGFjdGlvbkNvZGVVcmwgPSBBY3Rpb25Db2RlVVJMLnBhcnNlTGluayhlbWFpbExpbmspO1xyXG4gICAgICAgIF9hc3NlcnQoYWN0aW9uQ29kZVVybCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICByZXR1cm4gRW1haWxBdXRoQ3JlZGVudGlhbC5fZnJvbUVtYWlsQW5kQ29kZShlbWFpbCwgYWN0aW9uQ29kZVVybC5jb2RlLCBhY3Rpb25Db2RlVXJsLnRlbmFudElkKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQWx3YXlzIHNldCB0byB7QGxpbmsgUHJvdmlkZXJJZH0uUEFTU1dPUkQsIGV2ZW4gZm9yIGVtYWlsIGxpbmsuXHJcbiAqL1xyXG5FbWFpbEF1dGhQcm92aWRlci5QUk9WSURFUl9JRCA9IFwicGFzc3dvcmRcIiAvKiBQQVNTV09SRCAqLztcclxuLyoqXHJcbiAqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRU1BSUxfUEFTU1dPUkQuXHJcbiAqL1xyXG5FbWFpbEF1dGhQcm92aWRlci5FTUFJTF9QQVNTV09SRF9TSUdOX0lOX01FVEhPRCA9IFwicGFzc3dvcmRcIiAvKiBFTUFJTF9QQVNTV09SRCAqLztcclxuLyoqXHJcbiAqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRU1BSUxfTElOSy5cclxuICovXHJcbkVtYWlsQXV0aFByb3ZpZGVyLkVNQUlMX0xJTktfU0lHTl9JTl9NRVRIT0QgPSBcImVtYWlsTGlua1wiIC8qIEVNQUlMX0xJTksgKi87XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaGUgYmFzZSBjbGFzcyBmb3IgYWxsIEZlZGVyYXRlZCBwcm92aWRlcnMgKE9BdXRoIChpbmNsdWRpbmcgT0lEQyksIFNBTUwpLlxyXG4gKlxyXG4gKiBUaGlzIGNsYXNzIGlzIG5vdCBtZWFudCB0byBiZSBpbnN0YW50aWF0ZWQgZGlyZWN0bHkuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIEZlZGVyYXRlZEF1dGhQcm92aWRlciB7XHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdG9yIGZvciBnZW5lcmljIE9BdXRoIHByb3ZpZGVycy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcHJvdmlkZXJJZCAtIFByb3ZpZGVyIGZvciB3aGljaCBjcmVkZW50aWFscyBzaG91bGQgYmUgZ2VuZXJhdGVkLlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm92aWRlcklkKSB7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlcklkID0gcHJvdmlkZXJJZDtcclxuICAgICAgICAvKiogQGludGVybmFsICovXHJcbiAgICAgICAgdGhpcy5kZWZhdWx0TGFuZ3VhZ2VDb2RlID0gbnVsbDtcclxuICAgICAgICAvKiogQGludGVybmFsICovXHJcbiAgICAgICAgdGhpcy5jdXN0b21QYXJhbWV0ZXJzID0ge307XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgbGFuZ3VhZ2UgZ29kZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbGFuZ3VhZ2VDb2RlIC0gbGFuZ3VhZ2UgY29kZVxyXG4gICAgICovXHJcbiAgICBzZXREZWZhdWx0TGFuZ3VhZ2UobGFuZ3VhZ2VDb2RlKSB7XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0TGFuZ3VhZ2VDb2RlID0gbGFuZ3VhZ2VDb2RlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSBPQXV0aCBjdXN0b20gcGFyYW1ldGVycyB0byBwYXNzIGluIGFuIE9BdXRoIHJlcXVlc3QgZm9yIHBvcHVwIGFuZCByZWRpcmVjdCBzaWduLWluXHJcbiAgICAgKiBvcGVyYXRpb25zLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiBGb3IgYSBkZXRhaWxlZCBsaXN0LCBjaGVjayB0aGUgcmVzZXJ2ZWQgcmVxdWlyZWQgT0F1dGggMi4wIHBhcmFtZXRlcnMgc3VjaCBhcyBgY2xpZW50X2lkYCxcclxuICAgICAqIGByZWRpcmVjdF91cmlgLCBgc2NvcGVgLCBgcmVzcG9uc2VfdHlwZWAsIGFuZCBgc3RhdGVgIGFyZSBub3QgYWxsb3dlZCBhbmQgd2lsbCBiZSBpZ25vcmVkLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjdXN0b21PQXV0aFBhcmFtZXRlcnMgLSBUaGUgY3VzdG9tIE9BdXRoIHBhcmFtZXRlcnMgdG8gcGFzcyBpbiB0aGUgT0F1dGggcmVxdWVzdC5cclxuICAgICAqL1xyXG4gICAgc2V0Q3VzdG9tUGFyYW1ldGVycyhjdXN0b21PQXV0aFBhcmFtZXRlcnMpIHtcclxuICAgICAgICB0aGlzLmN1c3RvbVBhcmFtZXRlcnMgPSBjdXN0b21PQXV0aFBhcmFtZXRlcnM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHJpZXZlIHRoZSBjdXJyZW50IGxpc3Qgb2Yge0BsaW5rIEN1c3RvbVBhcmFtZXRlcnN9LlxyXG4gICAgICovXHJcbiAgICBnZXRDdXN0b21QYXJhbWV0ZXJzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmN1c3RvbVBhcmFtZXRlcnM7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENvbW1vbiBjb2RlIHRvIGFsbCBPQXV0aCBwcm92aWRlcnMuIFRoaXMgaXMgc2VwYXJhdGUgZnJvbSB0aGVcclxuICoge0BsaW5rIE9BdXRoUHJvdmlkZXJ9IHNvIHRoYXQgY2hpbGQgcHJvdmlkZXJzIChsaWtlXHJcbiAqIHtAbGluayBHb29nbGVBdXRoUHJvdmlkZXJ9KSBkb24ndCBpbmhlcml0IHRoZSBgY3JlZGVudGlhbGAgaW5zdGFuY2UgbWV0aG9kLlxyXG4gKiBJbnN0ZWFkLCB0aGV5IHJlbHkgb24gYSBzdGF0aWMgYGNyZWRlbnRpYWxgIG1ldGhvZC5cclxuICovXHJcbmNsYXNzIEJhc2VPQXV0aFByb3ZpZGVyIGV4dGVuZHMgRmVkZXJhdGVkQXV0aFByb3ZpZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XHJcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgICAgIHRoaXMuc2NvcGVzID0gW107XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEFkZCBhbiBPQXV0aCBzY29wZSB0byB0aGUgY3JlZGVudGlhbC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gc2NvcGUgLSBQcm92aWRlciBPQXV0aCBzY29wZSB0byBhZGQuXHJcbiAgICAgKi9cclxuICAgIGFkZFNjb3BlKHNjb3BlKSB7XHJcbiAgICAgICAgLy8gSWYgbm90IGFscmVhZHkgYWRkZWQsIGFkZCBzY29wZSB0byBsaXN0LlxyXG4gICAgICAgIGlmICghdGhpcy5zY29wZXMuaW5jbHVkZXMoc2NvcGUpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NvcGVzLnB1c2goc2NvcGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0cmlldmUgdGhlIGN1cnJlbnQgbGlzdCBvZiBPQXV0aCBzY29wZXMuXHJcbiAgICAgKi9cclxuICAgIGdldFNjb3BlcygpIHtcclxuICAgICAgICByZXR1cm4gWy4uLnRoaXMuc2NvcGVzXTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGdlbmVyYXRpbmcgZ2VuZXJpYyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IE9BdXRoUHJvdmlkZXIoJ2dvb2dsZS5jb20nKTtcclxuICogLy8gU3RhcnQgYSBzaWduIGluIHByb2Nlc3MgZm9yIGFuIHVuYXV0aGVudGljYXRlZCB1c2VyLlxyXG4gKiBwcm92aWRlci5hZGRTY29wZSgncHJvZmlsZScpO1xyXG4gKiBwcm92aWRlci5hZGRTY29wZSgnZW1haWwnKTtcclxuICogYXdhaXQgc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIGlmIChyZXN1bHQpIHtcclxuICogICAvLyBUaGlzIGlzIHRoZSBzaWduZWQtaW4gdXNlclxyXG4gKiAgIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogICAvLyBUaGlzIGdpdmVzIHlvdSBhIE9BdXRoIEFjY2VzcyBUb2tlbiBmb3IgdGhlIHByb3ZpZGVyLlxyXG4gKiAgIGNvbnN0IGNyZWRlbnRpYWwgPSBwcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChhdXRoLCByZXN1bHQpO1xyXG4gKiAgIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogfVxyXG4gKiBgYGBcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcG9wdXAuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IE9BdXRoUHJvdmlkZXIoJ2dvb2dsZS5jb20nKTtcclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3Byb2ZpbGUnKTtcclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ2VtYWlsJyk7XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhQb3B1cChhdXRoLCBwcm92aWRlcik7XHJcbiAqXHJcbiAqIC8vIFRoZSBzaWduZWQtaW4gdXNlciBpbmZvLlxyXG4gKiBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqIC8vIFRoaXMgZ2l2ZXMgeW91IGEgT0F1dGggQWNjZXNzIFRva2VuIGZvciB0aGUgcHJvdmlkZXIuXHJcbiAqIGNvbnN0IGNyZWRlbnRpYWwgPSBwcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChhdXRoLCByZXN1bHQpO1xyXG4gKiBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIGBgYFxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBPQXV0aFByb3ZpZGVyIGV4dGVuZHMgQmFzZU9BdXRoUHJvdmlkZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGFuIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSBKU09OIHN0cmluZyBvciBhIHBsYWluIG9iamVjdC5cclxuICAgICAqIEBwYXJhbSBqc29uIC0gQSBwbGFpbiBvYmplY3Qgb3IgYSBKU09OIHN0cmluZ1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21KU09OKGpzb24pIHtcclxuICAgICAgICBjb25zdCBvYmogPSB0eXBlb2YganNvbiA9PT0gJ3N0cmluZycgPyBKU09OLnBhcnNlKGpzb24pIDoganNvbjtcclxuICAgICAgICBfYXNzZXJ0KCdwcm92aWRlcklkJyBpbiBvYmogJiYgJ3NpZ25Jbk1ldGhvZCcgaW4gb2JqLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIHJldHVybiBPQXV0aENyZWRlbnRpYWwuX2Zyb21QYXJhbXMob2JqKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSBnZW5lcmljIE9BdXRoIHByb3ZpZGVyJ3MgYWNjZXNzIHRva2VuIG9yIElEIHRva2VuLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiBUaGUgcmF3IG5vbmNlIGlzIHJlcXVpcmVkIHdoZW4gYW4gSUQgdG9rZW4gd2l0aCBhIG5vbmNlIGZpZWxkIGlzIHByb3ZpZGVkLiBUaGUgU0hBLTI1NiBoYXNoIG9mXHJcbiAgICAgKiB0aGUgcmF3IG5vbmNlIG11c3QgbWF0Y2ggdGhlIG5vbmNlIGZpZWxkIGluIHRoZSBJRCB0b2tlbi5cclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogLy8gYGdvb2dsZVVzZXJgIGZyb20gdGhlIG9uc3VjY2VzcyBHb29nbGUgU2lnbiBJbiBjYWxsYmFjay5cclxuICAgICAqIC8vIEluaXRpYWxpemUgYSBnZW5lcmF0ZSBPQXV0aCBwcm92aWRlciB3aXRoIGEgYGdvb2dsZS5jb21gIHByb3ZpZGVySWQuXHJcbiAgICAgKiBjb25zdCBwcm92aWRlciA9IG5ldyBPQXV0aFByb3ZpZGVyKCdnb29nbGUuY29tJyk7XHJcbiAgICAgKiBjb25zdCBjcmVkZW50aWFsID0gcHJvdmlkZXIuY3JlZGVudGlhbCh7XHJcbiAgICAgKiAgIGlkVG9rZW46IGdvb2dsZVVzZXIuZ2V0QXV0aFJlc3BvbnNlKCkuaWRfdG9rZW4sXHJcbiAgICAgKiB9KTtcclxuICAgICAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhDcmVkZW50aWFsKGNyZWRlbnRpYWwpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBhcmFtcyAtIEVpdGhlciB0aGUgb3B0aW9ucyBvYmplY3QgY29udGFpbmluZyB0aGUgSUQgdG9rZW4sIGFjY2VzcyB0b2tlbiBhbmQgcmF3IG5vbmNlXHJcbiAgICAgKiBvciB0aGUgSUQgdG9rZW4gc3RyaW5nLlxyXG4gICAgICovXHJcbiAgICBjcmVkZW50aWFsKHBhcmFtcykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jcmVkZW50aWFsKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcGFyYW1zKSwgeyBub25jZTogcGFyYW1zLnJhd05vbmNlIH0pKTtcclxuICAgIH1cclxuICAgIC8qKiBBbiBpbnRlcm5hbCBjcmVkZW50aWFsIG1ldGhvZCB0aGF0IGFjY2VwdHMgbW9yZSBwZXJtaXNzaXZlIG9wdGlvbnMgKi9cclxuICAgIF9jcmVkZW50aWFsKHBhcmFtcykge1xyXG4gICAgICAgIF9hc3NlcnQocGFyYW1zLmlkVG9rZW4gfHwgcGFyYW1zLmFjY2Vzc1Rva2VuLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIC8vIEZvciBPQXV0aENyZWRlbnRpYWwsIHNpZ24gaW4gbWV0aG9kIGlzIHNhbWUgYXMgcHJvdmlkZXJJZC5cclxuICAgICAgICByZXR1cm4gT0F1dGhDcmVkZW50aWFsLl9mcm9tUGFyYW1zKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcGFyYW1zKSwgeyBwcm92aWRlcklkOiB0aGlzLnByb3ZpZGVySWQsIHNpZ25Jbk1ldGhvZDogdGhpcy5wcm92aWRlcklkIH0pKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCB0byBleHRyYWN0IHRoZSB1bmRlcmx5aW5nIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgVXNlckNyZWRlbnRpYWx9LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVJlc3VsdCh1c2VyQ3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBPQXV0aFByb3ZpZGVyLm9hdXRoQ3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QodXNlckNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBBdXRoRXJyb3J9IHdoaWNoIHdhc1xyXG4gICAgICogdGhyb3duIGR1cmluZyBhIHNpZ24taW4sIGxpbmssIG9yIHJlYXV0aGVudGljYXRlIG9wZXJhdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBPQXV0aFByb3ZpZGVyLm9hdXRoQ3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoKGVycm9yLmN1c3RvbURhdGEgfHwge30pKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBvYXV0aENyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHsgX3Rva2VuUmVzcG9uc2U6IHRva2VuUmVzcG9uc2UgfSkge1xyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeyBvYXV0aElkVG9rZW4sIG9hdXRoQWNjZXNzVG9rZW4sIG9hdXRoVG9rZW5TZWNyZXQsIHBlbmRpbmdUb2tlbiwgbm9uY2UsIHByb3ZpZGVySWQgfSA9IHRva2VuUmVzcG9uc2U7XHJcbiAgICAgICAgaWYgKCFvYXV0aEFjY2Vzc1Rva2VuICYmXHJcbiAgICAgICAgICAgICFvYXV0aFRva2VuU2VjcmV0ICYmXHJcbiAgICAgICAgICAgICFvYXV0aElkVG9rZW4gJiZcclxuICAgICAgICAgICAgIXBlbmRpbmdUb2tlbikge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFwcm92aWRlcklkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IE9BdXRoUHJvdmlkZXIocHJvdmlkZXJJZCkuX2NyZWRlbnRpYWwoe1xyXG4gICAgICAgICAgICAgICAgaWRUb2tlbjogb2F1dGhJZFRva2VuLFxyXG4gICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IG9hdXRoQWNjZXNzVG9rZW4sXHJcbiAgICAgICAgICAgICAgICBub25jZSxcclxuICAgICAgICAgICAgICAgIHBlbmRpbmdUb2tlblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgZ2VuZXJhdGluZyBhbiB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmb3Ige0BsaW5rIFByb3ZpZGVySWR9LkZBQ0VCT09LLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSByZWRpcmVjdC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcclxuICogLy8gU3RhcnQgYSBzaWduIGluIHByb2Nlc3MgZm9yIGFuIHVuYXV0aGVudGljYXRlZCB1c2VyLlxyXG4gKiBwcm92aWRlci5hZGRTY29wZSgndXNlcl9iaXJ0aGRheScpO1xyXG4gKiBhd2FpdCBzaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogaWYgKHJlc3VsdCkge1xyXG4gKiAgIC8vIFRoaXMgaXMgdGhlIHNpZ25lZC1pbiB1c2VyXHJcbiAqICAgY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAgIC8vIFRoaXMgZ2l2ZXMgeW91IGEgRmFjZWJvb2sgQWNjZXNzIFRva2VuLlxyXG4gKiAgIGNvbnN0IGNyZWRlbnRpYWwgPSBGYWNlYm9va0F1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChyZXN1bHQpO1xyXG4gKiAgIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogfVxyXG4gKiBgYGBcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcG9wdXAuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEZhY2Vib29rQXV0aFByb3ZpZGVyKCk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCd1c2VyX2JpcnRoZGF5Jyk7XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhQb3B1cChhdXRoLCBwcm92aWRlcik7XHJcbiAqXHJcbiAqIC8vIFRoZSBzaWduZWQtaW4gdXNlciBpbmZvLlxyXG4gKiBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqIC8vIFRoaXMgZ2l2ZXMgeW91IGEgRmFjZWJvb2sgQWNjZXNzIFRva2VuLlxyXG4gKiBjb25zdCBjcmVkZW50aWFsID0gRmFjZWJvb2tBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQocmVzdWx0KTtcclxuICogY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiBgYGBcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgRmFjZWJvb2tBdXRoUHJvdmlkZXIgZXh0ZW5kcyBCYXNlT0F1dGhQcm92aWRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcihcImZhY2Vib29rLmNvbVwiIC8qIEZBQ0VCT09LICovKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIGNyZWRlbnRpYWwgZm9yIEZhY2Vib29rLlxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiAvLyBgZXZlbnRgIGZyb20gdGhlIEZhY2Vib29rIGF1dGguYXV0aFJlc3BvbnNlQ2hhbmdlIGNhbGxiYWNrLlxyXG4gICAgICogY29uc3QgY3JlZGVudGlhbCA9IEZhY2Vib29rQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwoZXZlbnQuYXV0aFJlc3BvbnNlLmFjY2Vzc1Rva2VuKTtcclxuICAgICAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhDcmVkZW50aWFsKGNyZWRlbnRpYWwpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGFjY2Vzc1Rva2VuIC0gRmFjZWJvb2sgYWNjZXNzIHRva2VuLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbChhY2Nlc3NUb2tlbikge1xyXG4gICAgICAgIHJldHVybiBPQXV0aENyZWRlbnRpYWwuX2Zyb21QYXJhbXMoe1xyXG4gICAgICAgICAgICBwcm92aWRlcklkOiBGYWNlYm9va0F1dGhQcm92aWRlci5QUk9WSURFUl9JRCxcclxuICAgICAgICAgICAgc2lnbkluTWV0aG9kOiBGYWNlYm9va0F1dGhQcm92aWRlci5GQUNFQk9PS19TSUdOX0lOX01FVEhPRCxcclxuICAgICAgICAgICAgYWNjZXNzVG9rZW5cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCB0byBleHRyYWN0IHRoZSB1bmRlcmx5aW5nIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgVXNlckNyZWRlbnRpYWx9LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVJlc3VsdCh1c2VyQ3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBGYWNlYm9va0F1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh1c2VyQ3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIEF1dGhFcnJvcn0gd2hpY2ggd2FzXHJcbiAgICAgKiB0aHJvd24gZHVyaW5nIGEgc2lnbi1pbiwgbGluaywgb3IgcmVhdXRoZW50aWNhdGUgb3BlcmF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbUVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIEZhY2Vib29rQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KChlcnJvci5jdXN0b21EYXRhIHx8IHt9KSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoeyBfdG9rZW5SZXNwb25zZTogdG9rZW5SZXNwb25zZSB9KSB7XHJcbiAgICAgICAgaWYgKCF0b2tlblJlc3BvbnNlIHx8ICEoJ29hdXRoQWNjZXNzVG9rZW4nIGluIHRva2VuUmVzcG9uc2UpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRva2VuUmVzcG9uc2Uub2F1dGhBY2Nlc3NUb2tlbikge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIEZhY2Vib29rQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwodG9rZW5SZXNwb25zZS5vYXV0aEFjY2Vzc1Rva2VuKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4vKiogQWx3YXlzIHNldCB0byB7QGxpbmsgU2lnbkluTWV0aG9kfS5GQUNFQk9PSy4gKi9cclxuRmFjZWJvb2tBdXRoUHJvdmlkZXIuRkFDRUJPT0tfU0lHTl9JTl9NRVRIT0QgPSBcImZhY2Vib29rLmNvbVwiIC8qIEZBQ0VCT09LICovO1xyXG4vKiogQWx3YXlzIHNldCB0byB7QGxpbmsgUHJvdmlkZXJJZH0uRkFDRUJPT0suICovXHJcbkZhY2Vib29rQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lEID0gXCJmYWNlYm9vay5jb21cIiAvKiBGQUNFQk9PSyAqLztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIGFuIGFuIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZvciB7QGxpbmsgUHJvdmlkZXJJZH0uR09PR0xFLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSByZWRpcmVjdC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgR29vZ2xlQXV0aFByb3ZpZGVyKCk7XHJcbiAqIC8vIFN0YXJ0IGEgc2lnbiBpbiBwcm9jZXNzIGZvciBhbiB1bmF1dGhlbnRpY2F0ZWQgdXNlci5cclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3Byb2ZpbGUnKTtcclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ2VtYWlsJyk7XHJcbiAqIGF3YWl0IHNpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlcik7XHJcbiAqIC8vIFRoaXMgd2lsbCB0cmlnZ2VyIGEgZnVsbCBwYWdlIHJlZGlyZWN0IGF3YXkgZnJvbSB5b3VyIGFwcFxyXG4gKlxyXG4gKiAvLyBBZnRlciByZXR1cm5pbmcgZnJvbSB0aGUgcmVkaXJlY3Qgd2hlbiB5b3VyIGFwcCBpbml0aWFsaXplcyB5b3UgY2FuIG9idGFpbiB0aGUgcmVzdWx0XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJlZGlyZWN0UmVzdWx0KGF1dGgpO1xyXG4gKiBpZiAocmVzdWx0KSB7XHJcbiAqICAgLy8gVGhpcyBpcyB0aGUgc2lnbmVkLWluIHVzZXJcclxuICogICBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqICAgLy8gVGhpcyBnaXZlcyB5b3UgYSBHb29nbGUgQWNjZXNzIFRva2VuLlxyXG4gKiAgIGNvbnN0IGNyZWRlbnRpYWwgPSBHb29nbGVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQocmVzdWx0KTtcclxuICogICBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHBvcHVwLlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBHb29nbGVBdXRoUHJvdmlkZXIoKTtcclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3Byb2ZpbGUnKTtcclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ2VtYWlsJyk7XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhQb3B1cChhdXRoLCBwcm92aWRlcik7XHJcbiAqXHJcbiAqIC8vIFRoZSBzaWduZWQtaW4gdXNlciBpbmZvLlxyXG4gKiBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqIC8vIFRoaXMgZ2l2ZXMgeW91IGEgR29vZ2xlIEFjY2VzcyBUb2tlbi5cclxuICogY29uc3QgY3JlZGVudGlhbCA9IEdvb2dsZUF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChyZXN1bHQpO1xyXG4gKiBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBHb29nbGVBdXRoUHJvdmlkZXIgZXh0ZW5kcyBCYXNlT0F1dGhQcm92aWRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcihcImdvb2dsZS5jb21cIiAvKiBHT09HTEUgKi8pO1xyXG4gICAgICAgIHRoaXMuYWRkU2NvcGUoJ3Byb2ZpbGUnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIGNyZWRlbnRpYWwgZm9yIEdvb2dsZS4gQXQgbGVhc3Qgb25lIG9mIElEIHRva2VuIGFuZCBhY2Nlc3MgdG9rZW4gaXMgcmVxdWlyZWQuXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIC8vIFxcYGdvb2dsZVVzZXJcXGAgZnJvbSB0aGUgb25zdWNjZXNzIEdvb2dsZSBTaWduIEluIGNhbGxiYWNrLlxyXG4gICAgICogY29uc3QgY3JlZGVudGlhbCA9IEdvb2dsZUF1dGhQcm92aWRlci5jcmVkZW50aWFsKGdvb2dsZVVzZXIuZ2V0QXV0aFJlc3BvbnNlKCkuaWRfdG9rZW4pO1xyXG4gICAgICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aENyZWRlbnRpYWwoY3JlZGVudGlhbCk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaWRUb2tlbiAtIEdvb2dsZSBJRCB0b2tlbi5cclxuICAgICAqIEBwYXJhbSBhY2Nlc3NUb2tlbiAtIEdvb2dsZSBhY2Nlc3MgdG9rZW4uXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsKGlkVG9rZW4sIGFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIE9BdXRoQ3JlZGVudGlhbC5fZnJvbVBhcmFtcyh7XHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQ6IEdvb2dsZUF1dGhQcm92aWRlci5QUk9WSURFUl9JRCxcclxuICAgICAgICAgICAgc2lnbkluTWV0aG9kOiBHb29nbGVBdXRoUHJvdmlkZXIuR09PR0xFX1NJR05fSU5fTUVUSE9ELFxyXG4gICAgICAgICAgICBpZFRva2VuLFxyXG4gICAgICAgICAgICBhY2Nlc3NUb2tlblxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBVc2VyQ3JlZGVudGlhbH0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tUmVzdWx0KHVzZXJDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIEdvb2dsZUF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh1c2VyQ3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIEF1dGhFcnJvcn0gd2hpY2ggd2FzXHJcbiAgICAgKiB0aHJvd24gZHVyaW5nIGEgc2lnbi1pbiwgbGluaywgb3IgcmVhdXRoZW50aWNhdGUgb3BlcmF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbUVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIEdvb2dsZUF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCgoZXJyb3IuY3VzdG9tRGF0YSB8fCB7fSkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHsgX3Rva2VuUmVzcG9uc2U6IHRva2VuUmVzcG9uc2UgfSkge1xyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeyBvYXV0aElkVG9rZW4sIG9hdXRoQWNjZXNzVG9rZW4gfSA9IHRva2VuUmVzcG9uc2U7XHJcbiAgICAgICAgaWYgKCFvYXV0aElkVG9rZW4gJiYgIW9hdXRoQWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgLy8gVGhpcyBjb3VsZCBiZSBhbiBvYXV0aCAxIGNyZWRlbnRpYWwgb3IgYSBwaG9uZSBjcmVkZW50aWFsXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gR29vZ2xlQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwob2F1dGhJZFRva2VuLCBvYXV0aEFjY2Vzc1Rva2VuKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4vKiogQWx3YXlzIHNldCB0byB7QGxpbmsgU2lnbkluTWV0aG9kfS5HT09HTEUuICovXHJcbkdvb2dsZUF1dGhQcm92aWRlci5HT09HTEVfU0lHTl9JTl9NRVRIT0QgPSBcImdvb2dsZS5jb21cIiAvKiBHT09HTEUgKi87XHJcbi8qKiBBbHdheXMgc2V0IHRvIHtAbGluayBQcm92aWRlcklkfS5HT09HTEUuICovXHJcbkdvb2dsZUF1dGhQcm92aWRlci5QUk9WSURFUl9JRCA9IFwiZ29vZ2xlLmNvbVwiIC8qIEdPT0dMRSAqLztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIGFuIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZvciB7QGxpbmsgUHJvdmlkZXJJZH0uR0lUSFVCLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBHaXRIdWIgcmVxdWlyZXMgYW4gT0F1dGggMi4wIHJlZGlyZWN0LCBzbyB5b3UgY2FuIGVpdGhlciBoYW5kbGUgdGhlIHJlZGlyZWN0IGRpcmVjdGx5LCBvciB1c2VcclxuICogdGhlIHtAbGluayBzaWduSW5XaXRoUG9wdXB9IGhhbmRsZXI6XHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBHaXRodWJBdXRoUHJvdmlkZXIoKTtcclxuICogLy8gU3RhcnQgYSBzaWduIGluIHByb2Nlc3MgZm9yIGFuIHVuYXV0aGVudGljYXRlZCB1c2VyLlxyXG4gKiBwcm92aWRlci5hZGRTY29wZSgncmVwbycpO1xyXG4gKiBhd2FpdCBzaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogaWYgKHJlc3VsdCkge1xyXG4gKiAgIC8vIFRoaXMgaXMgdGhlIHNpZ25lZC1pbiB1c2VyXHJcbiAqICAgY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAgIC8vIFRoaXMgZ2l2ZXMgeW91IGEgR2l0aHViIEFjY2VzcyBUb2tlbi5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gR2l0aHViQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KHJlc3VsdCk7XHJcbiAqICAgY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSBwb3B1cC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgR2l0aHViQXV0aFByb3ZpZGVyKCk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdyZXBvJyk7XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhQb3B1cChhdXRoLCBwcm92aWRlcik7XHJcbiAqXHJcbiAqIC8vIFRoZSBzaWduZWQtaW4gdXNlciBpbmZvLlxyXG4gKiBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqIC8vIFRoaXMgZ2l2ZXMgeW91IGEgR2l0aHViIEFjY2VzcyBUb2tlbi5cclxuICogY29uc3QgY3JlZGVudGlhbCA9IEdpdGh1YkF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChyZXN1bHQpO1xyXG4gKiBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIGBgYFxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBHaXRodWJBdXRoUHJvdmlkZXIgZXh0ZW5kcyBCYXNlT0F1dGhQcm92aWRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcihcImdpdGh1Yi5jb21cIiAvKiBHSVRIVUIgKi8pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgY3JlZGVudGlhbCBmb3IgR2l0aHViLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBhY2Nlc3NUb2tlbiAtIEdpdGh1YiBhY2Nlc3MgdG9rZW4uXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsKGFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIE9BdXRoQ3JlZGVudGlhbC5fZnJvbVBhcmFtcyh7XHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQ6IEdpdGh1YkF1dGhQcm92aWRlci5QUk9WSURFUl9JRCxcclxuICAgICAgICAgICAgc2lnbkluTWV0aG9kOiBHaXRodWJBdXRoUHJvdmlkZXIuR0lUSFVCX1NJR05fSU5fTUVUSE9ELFxyXG4gICAgICAgICAgICBhY2Nlc3NUb2tlblxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBVc2VyQ3JlZGVudGlhbH0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tUmVzdWx0KHVzZXJDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIEdpdGh1YkF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh1c2VyQ3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIEF1dGhFcnJvcn0gd2hpY2ggd2FzXHJcbiAgICAgKiB0aHJvd24gZHVyaW5nIGEgc2lnbi1pbiwgbGluaywgb3IgcmVhdXRoZW50aWNhdGUgb3BlcmF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbUVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIEdpdGh1YkF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCgoZXJyb3IuY3VzdG9tRGF0YSB8fCB7fSkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHsgX3Rva2VuUmVzcG9uc2U6IHRva2VuUmVzcG9uc2UgfSkge1xyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZSB8fCAhKCdvYXV0aEFjY2Vzc1Rva2VuJyBpbiB0b2tlblJlc3BvbnNlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0b2tlblJlc3BvbnNlLm9hdXRoQWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBHaXRodWJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbCh0b2tlblJlc3BvbnNlLm9hdXRoQWNjZXNzVG9rZW4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbi8qKiBBbHdheXMgc2V0IHRvIHtAbGluayBTaWduSW5NZXRob2R9LkdJVEhVQi4gKi9cclxuR2l0aHViQXV0aFByb3ZpZGVyLkdJVEhVQl9TSUdOX0lOX01FVEhPRCA9IFwiZ2l0aHViLmNvbVwiIC8qIEdJVEhVQiAqLztcclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFByb3ZpZGVySWR9LkdJVEhVQi4gKi9cclxuR2l0aHViQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lEID0gXCJnaXRodWIuY29tXCIgLyogR0lUSFVCICovO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBJRFBfUkVRVUVTVF9VUkkgPSAnaHR0cDovL2xvY2FsaG9zdCc7XHJcbi8qKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBTQU1MQXV0aENyZWRlbnRpYWwgZXh0ZW5kcyBBdXRoQ3JlZGVudGlhbCB7XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm92aWRlcklkLCBwZW5kaW5nVG9rZW4pIHtcclxuICAgICAgICBzdXBlcihwcm92aWRlcklkLCBwcm92aWRlcklkKTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdUb2tlbiA9IHBlbmRpbmdUb2tlbjtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9nZXRJZFRva2VuUmVzcG9uc2UoYXV0aCkge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLmJ1aWxkUmVxdWVzdCgpO1xyXG4gICAgICAgIHJldHVybiBzaWduSW5XaXRoSWRwKGF1dGgsIHJlcXVlc3QpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2xpbmtUb0lkVG9rZW4oYXV0aCwgaWRUb2tlbikge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLmJ1aWxkUmVxdWVzdCgpO1xyXG4gICAgICAgIHJlcXVlc3QuaWRUb2tlbiA9IGlkVG9rZW47XHJcbiAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhJZHAoYXV0aCwgcmVxdWVzdCk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZ2V0UmVhdXRoZW50aWNhdGlvblJlc29sdmVyKGF1dGgpIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5idWlsZFJlcXVlc3QoKTtcclxuICAgICAgICByZXF1ZXN0LmF1dG9DcmVhdGUgPSBmYWxzZTtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aElkcChhdXRoLCByZXF1ZXN0KTtcclxuICAgIH1cclxuICAgIC8qKiB7QGluaGVyaXRkb2MgQXV0aENyZWRlbnRpYWwudG9KU09OfSAgKi9cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzaWduSW5NZXRob2Q6IHRoaXMuc2lnbkluTWV0aG9kLFxyXG4gICAgICAgICAgICBwcm92aWRlcklkOiB0aGlzLnByb3ZpZGVySWQsXHJcbiAgICAgICAgICAgIHBlbmRpbmdUb2tlbjogdGhpcy5wZW5kaW5nVG9rZW5cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTdGF0aWMgbWV0aG9kIHRvIGRlc2VyaWFsaXplIGEgSlNPTiByZXByZXNlbnRhdGlvbiBvZiBhbiBvYmplY3QgaW50byBhblxyXG4gICAgICoge0BsaW5rICBBdXRoQ3JlZGVudGlhbH0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGpzb24gLSBJbnB1dCBjYW4gYmUgZWl0aGVyIE9iamVjdCBvciB0aGUgc3RyaW5naWZpZWQgcmVwcmVzZW50YXRpb24gb2YgdGhlIG9iamVjdC5cclxuICAgICAqIFdoZW4gc3RyaW5nIGlzIHByb3ZpZGVkLCBKU09OLnBhcnNlIHdvdWxkIGJlIGNhbGxlZCBmaXJzdC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBJZiB0aGUgSlNPTiBpbnB1dCBkb2VzIG5vdCByZXByZXNlbnQgYW4ge0BsaW5rICBBdXRoQ3JlZGVudGlhbH0sIG51bGwgaXMgcmV0dXJuZWQuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBmcm9tSlNPTihqc29uKSB7XHJcbiAgICAgICAgY29uc3Qgb2JqID0gdHlwZW9mIGpzb24gPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZShqc29uKSA6IGpzb247XHJcbiAgICAgICAgY29uc3QgeyBwcm92aWRlcklkLCBzaWduSW5NZXRob2QsIHBlbmRpbmdUb2tlbiB9ID0gb2JqO1xyXG4gICAgICAgIGlmICghcHJvdmlkZXJJZCB8fFxyXG4gICAgICAgICAgICAhc2lnbkluTWV0aG9kIHx8XHJcbiAgICAgICAgICAgICFwZW5kaW5nVG9rZW4gfHxcclxuICAgICAgICAgICAgcHJvdmlkZXJJZCAhPT0gc2lnbkluTWV0aG9kKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IFNBTUxBdXRoQ3JlZGVudGlhbChwcm92aWRlcklkLCBwZW5kaW5nVG9rZW4pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBIZWxwZXIgc3RhdGljIG1ldGhvZCB0byBhdm9pZCBleHBvc2luZyB0aGUgY29uc3RydWN0b3IgdG8gZW5kIHVzZXJzLlxyXG4gICAgICpcclxuICAgICAqIEBpbnRlcm5hbFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgX2NyZWF0ZShwcm92aWRlcklkLCBwZW5kaW5nVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gbmV3IFNBTUxBdXRoQ3JlZGVudGlhbChwcm92aWRlcklkLCBwZW5kaW5nVG9rZW4pO1xyXG4gICAgfVxyXG4gICAgYnVpbGRSZXF1ZXN0KCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RVcmk6IElEUF9SRVFVRVNUX1VSSSxcclxuICAgICAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWUsXHJcbiAgICAgICAgICAgIHBlbmRpbmdUb2tlbjogdGhpcy5wZW5kaW5nVG9rZW5cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IFNBTUxfUFJPVklERVJfUFJFRklYID0gJ3NhbWwuJztcclxuLyoqXHJcbiAqIEFuIHtAbGluayBBdXRoUHJvdmlkZXJ9IGZvciBTQU1MLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBTQU1MQXV0aFByb3ZpZGVyIGV4dGVuZHMgRmVkZXJhdGVkQXV0aFByb3ZpZGVyIHtcclxuICAgIC8qKlxyXG4gICAgICogQ29uc3RydWN0b3IuIFRoZSBwcm92aWRlcklkIG11c3Qgc3RhcnQgd2l0aCBcInNhbWwuXCJcclxuICAgICAqIEBwYXJhbSBwcm92aWRlcklkIC0gU0FNTCBwcm92aWRlciBJRC5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IocHJvdmlkZXJJZCkge1xyXG4gICAgICAgIF9hc3NlcnQocHJvdmlkZXJJZC5zdGFydHNXaXRoKFNBTUxfUFJPVklERVJfUFJFRklYKSwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICBzdXBlcihwcm92aWRlcklkKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogR2VuZXJhdGVzIGFuIHtAbGluayBBdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBVc2VyQ3JlZGVudGlhbH0gYWZ0ZXIgYVxyXG4gICAgICogc3VjY2Vzc2Z1bCBTQU1MIGZsb3cgY29tcGxldGVzLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKlxyXG4gICAgICogRm9yIGV4YW1wbGUsIHRvIGdldCBhbiB7QGxpbmsgQXV0aENyZWRlbnRpYWx9LCB5b3UgY291bGQgd3JpdGUgdGhlXHJcbiAgICAgKiBmb2xsb3dpbmcgY29kZTpcclxuICAgICAqXHJcbiAgICAgKiBgYGBqc1xyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgc2FtbFByb3ZpZGVyKTtcclxuICAgICAqIGNvbnN0IGNyZWRlbnRpYWwgPSBTQU1MQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KHVzZXJDcmVkZW50aWFsKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVJlc3VsdCh1c2VyQ3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBTQU1MQXV0aFByb3ZpZGVyLnNhbWxDcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh1c2VyQ3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIEF1dGhFcnJvcn0gd2hpY2ggd2FzXHJcbiAgICAgKiB0aHJvd24gZHVyaW5nIGEgc2lnbi1pbiwgbGluaywgb3IgcmVhdXRoZW50aWNhdGUgb3BlcmF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbUVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIFNBTUxBdXRoUHJvdmlkZXIuc2FtbENyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KChlcnJvci5jdXN0b21EYXRhIHx8IHt9KSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYW4ge0BsaW5rIEF1dGhDcmVkZW50aWFsfSBmcm9tIGEgSlNPTiBzdHJpbmcgb3IgYSBwbGFpbiBvYmplY3QuXHJcbiAgICAgKiBAcGFyYW0ganNvbiAtIEEgcGxhaW4gb2JqZWN0IG9yIGEgSlNPTiBzdHJpbmdcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tSlNPTihqc29uKSB7XHJcbiAgICAgICAgY29uc3QgY3JlZGVudGlhbCA9IFNBTUxBdXRoQ3JlZGVudGlhbC5mcm9tSlNPTihqc29uKTtcclxuICAgICAgICBfYXNzZXJ0KGNyZWRlbnRpYWwsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgcmV0dXJuIGNyZWRlbnRpYWw7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgc2FtbENyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHsgX3Rva2VuUmVzcG9uc2U6IHRva2VuUmVzcG9uc2UgfSkge1xyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeyBwZW5kaW5nVG9rZW4sIHByb3ZpZGVySWQgfSA9IHRva2VuUmVzcG9uc2U7XHJcbiAgICAgICAgaWYgKCFwZW5kaW5nVG9rZW4gfHwgIXByb3ZpZGVySWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBTQU1MQXV0aENyZWRlbnRpYWwuX2NyZWF0ZShwcm92aWRlcklkLCBwZW5kaW5nVG9rZW4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIGFuIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZvciB7QGxpbmsgUHJvdmlkZXJJZH0uVFdJVFRFUi5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IFR3aXR0ZXJBdXRoUHJvdmlkZXIoKTtcclxuICogLy8gU3RhcnQgYSBzaWduIGluIHByb2Nlc3MgZm9yIGFuIHVuYXV0aGVudGljYXRlZCB1c2VyLlxyXG4gKiBhd2FpdCBzaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogaWYgKHJlc3VsdCkge1xyXG4gKiAgIC8vIFRoaXMgaXMgdGhlIHNpZ25lZC1pbiB1c2VyXHJcbiAqICAgY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAgIC8vIFRoaXMgZ2l2ZXMgeW91IGEgVHdpdHRlciBBY2Nlc3MgVG9rZW4gYW5kIFNlY3JldC5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gVHdpdHRlckF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChyZXN1bHQpO1xyXG4gKiAgIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogICBjb25zdCBzZWNyZXQgPSBjcmVkZW50aWFsLnNlY3JldDtcclxuICogfVxyXG4gKiBgYGBcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcG9wdXAuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IFR3aXR0ZXJBdXRoUHJvdmlkZXIoKTtcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aFBvcHVwKGF1dGgsIHByb3ZpZGVyKTtcclxuICpcclxuICogLy8gVGhlIHNpZ25lZC1pbiB1c2VyIGluZm8uXHJcbiAqIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogLy8gVGhpcyBnaXZlcyB5b3UgYSBUd2l0dGVyIEFjY2VzcyBUb2tlbiBhbmQgU2VjcmV0LlxyXG4gKiBjb25zdCBjcmVkZW50aWFsID0gVHdpdHRlckF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChyZXN1bHQpO1xyXG4gKiBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIGNvbnN0IHNlY3JldCA9IGNyZWRlbnRpYWwuc2VjcmV0O1xyXG4gKiBgYGBcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgVHdpdHRlckF1dGhQcm92aWRlciBleHRlbmRzIEJhc2VPQXV0aFByb3ZpZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKFwidHdpdHRlci5jb21cIiAvKiBUV0lUVEVSICovKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIGNyZWRlbnRpYWwgZm9yIFR3aXR0ZXIuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHRva2VuIC0gVHdpdHRlciBhY2Nlc3MgdG9rZW4uXHJcbiAgICAgKiBAcGFyYW0gc2VjcmV0IC0gVHdpdHRlciBzZWNyZXQuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsKHRva2VuLCBzZWNyZXQpIHtcclxuICAgICAgICByZXR1cm4gT0F1dGhDcmVkZW50aWFsLl9mcm9tUGFyYW1zKHtcclxuICAgICAgICAgICAgcHJvdmlkZXJJZDogVHdpdHRlckF1dGhQcm92aWRlci5QUk9WSURFUl9JRCxcclxuICAgICAgICAgICAgc2lnbkluTWV0aG9kOiBUd2l0dGVyQXV0aFByb3ZpZGVyLlRXSVRURVJfU0lHTl9JTl9NRVRIT0QsXHJcbiAgICAgICAgICAgIG9hdXRoVG9rZW46IHRva2VuLFxyXG4gICAgICAgICAgICBvYXV0aFRva2VuU2VjcmV0OiBzZWNyZXRcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCB0byBleHRyYWN0IHRoZSB1bmRlcmx5aW5nIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgVXNlckNyZWRlbnRpYWx9LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVJlc3VsdCh1c2VyQ3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBUd2l0dGVyQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHVzZXJDcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCB0byBleHRyYWN0IHRoZSB1bmRlcmx5aW5nIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgQXV0aEVycm9yfSB3aGljaCB3YXNcclxuICAgICAqIHRocm93biBkdXJpbmcgYSBzaWduLWluLCBsaW5rLCBvciByZWF1dGhlbnRpY2F0ZSBvcGVyYXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tRXJyb3IoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gVHdpdHRlckF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCgoZXJyb3IuY3VzdG9tRGF0YSB8fCB7fSkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHsgX3Rva2VuUmVzcG9uc2U6IHRva2VuUmVzcG9uc2UgfSkge1xyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeyBvYXV0aEFjY2Vzc1Rva2VuLCBvYXV0aFRva2VuU2VjcmV0IH0gPSB0b2tlblJlc3BvbnNlO1xyXG4gICAgICAgIGlmICghb2F1dGhBY2Nlc3NUb2tlbiB8fCAhb2F1dGhUb2tlblNlY3JldCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIFR3aXR0ZXJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbChvYXV0aEFjY2Vzc1Rva2VuLCBvYXV0aFRva2VuU2VjcmV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4vKiogQWx3YXlzIHNldCB0byB7QGxpbmsgU2lnbkluTWV0aG9kfS5UV0lUVEVSLiAqL1xyXG5Ud2l0dGVyQXV0aFByb3ZpZGVyLlRXSVRURVJfU0lHTl9JTl9NRVRIT0QgPSBcInR3aXR0ZXIuY29tXCIgLyogVFdJVFRFUiAqLztcclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFByb3ZpZGVySWR9LlRXSVRURVIuICovXHJcblR3aXR0ZXJBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQgPSBcInR3aXR0ZXIuY29tXCIgLyogVFdJVFRFUiAqLztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnblVwKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybVNpZ25JblJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6c2lnblVwXCIgLyogU0lHTl9VUCAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBVc2VyQ3JlZGVudGlhbEltcGwge1xyXG4gICAgY29uc3RydWN0b3IocGFyYW1zKSB7XHJcbiAgICAgICAgdGhpcy51c2VyID0gcGFyYW1zLnVzZXI7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlcklkID0gcGFyYW1zLnByb3ZpZGVySWQ7XHJcbiAgICAgICAgdGhpcy5fdG9rZW5SZXNwb25zZSA9IHBhcmFtcy5fdG9rZW5SZXNwb25zZTtcclxuICAgICAgICB0aGlzLm9wZXJhdGlvblR5cGUgPSBwYXJhbXMub3BlcmF0aW9uVHlwZTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBhc3luYyBfZnJvbUlkVG9rZW5SZXNwb25zZShhdXRoLCBvcGVyYXRpb25UeXBlLCBpZFRva2VuUmVzcG9uc2UsIGlzQW5vbnltb3VzID0gZmFsc2UpIHtcclxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlckltcGwuX2Zyb21JZFRva2VuUmVzcG9uc2UoYXV0aCwgaWRUb2tlblJlc3BvbnNlLCBpc0Fub255bW91cyk7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXJJZCA9IHByb3ZpZGVySWRGb3JSZXNwb25zZShpZFRva2VuUmVzcG9uc2UpO1xyXG4gICAgICAgIGNvbnN0IHVzZXJDcmVkID0gbmV3IFVzZXJDcmVkZW50aWFsSW1wbCh7XHJcbiAgICAgICAgICAgIHVzZXIsXHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQsXHJcbiAgICAgICAgICAgIF90b2tlblJlc3BvbnNlOiBpZFRva2VuUmVzcG9uc2UsXHJcbiAgICAgICAgICAgIG9wZXJhdGlvblR5cGVcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdXNlckNyZWQ7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgYXN5bmMgX2Zvck9wZXJhdGlvbih1c2VyLCBvcGVyYXRpb25UeXBlLCByZXNwb25zZSkge1xyXG4gICAgICAgIGF3YWl0IHVzZXIuX3VwZGF0ZVRva2Vuc0lmTmVjZXNzYXJ5KHJlc3BvbnNlLCAvKiByZWxvYWQgKi8gdHJ1ZSk7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXJJZCA9IHByb3ZpZGVySWRGb3JSZXNwb25zZShyZXNwb25zZSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBVc2VyQ3JlZGVudGlhbEltcGwoe1xyXG4gICAgICAgICAgICB1c2VyLFxyXG4gICAgICAgICAgICBwcm92aWRlcklkLFxyXG4gICAgICAgICAgICBfdG9rZW5SZXNwb25zZTogcmVzcG9uc2UsXHJcbiAgICAgICAgICAgIG9wZXJhdGlvblR5cGVcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBwcm92aWRlcklkRm9yUmVzcG9uc2UocmVzcG9uc2UpIHtcclxuICAgIGlmIChyZXNwb25zZS5wcm92aWRlcklkKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnByb3ZpZGVySWQ7XHJcbiAgICB9XHJcbiAgICBpZiAoJ3Bob25lTnVtYmVyJyBpbiByZXNwb25zZSkge1xyXG4gICAgICAgIHJldHVybiBcInBob25lXCIgLyogUEhPTkUgKi87XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQXN5bmNocm9ub3VzbHkgc2lnbnMgaW4gYXMgYW4gYW5vbnltb3VzIHVzZXIuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIElmIHRoZXJlIGlzIGFscmVhZHkgYW4gYW5vbnltb3VzIHVzZXIgc2lnbmVkIGluLCB0aGF0IHVzZXIgd2lsbCBiZSByZXR1cm5lZDsgb3RoZXJ3aXNlLCBhXHJcbiAqIG5ldyBhbm9ueW1vdXMgdXNlciBpZGVudGl0eSB3aWxsIGJlIGNyZWF0ZWQgYW5kIHJldHVybmVkLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25JbkFub255bW91c2x5KGF1dGgpIHtcclxuICAgIHZhciBfYTtcclxuICAgIGNvbnN0IGF1dGhJbnRlcm5hbCA9IF9jYXN0QXV0aChhdXRoKTtcclxuICAgIGF3YWl0IGF1dGhJbnRlcm5hbC5faW5pdGlhbGl6YXRpb25Qcm9taXNlO1xyXG4gICAgaWYgKChfYSA9IGF1dGhJbnRlcm5hbC5jdXJyZW50VXNlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmlzQW5vbnltb3VzKSB7XHJcbiAgICAgICAgLy8gSWYgYW4gYW5vbnltb3VzIHVzZXIgaXMgYWxyZWFkeSBzaWduZWQgaW4sIG5vIG5lZWQgdG8gc2lnbiB0aGVtIGluIGFnYWluLlxyXG4gICAgICAgIHJldHVybiBuZXcgVXNlckNyZWRlbnRpYWxJbXBsKHtcclxuICAgICAgICAgICAgdXNlcjogYXV0aEludGVybmFsLmN1cnJlbnRVc2VyLFxyXG4gICAgICAgICAgICBwcm92aWRlcklkOiBudWxsLFxyXG4gICAgICAgICAgICBvcGVyYXRpb25UeXBlOiBcInNpZ25JblwiIC8qIFNJR05fSU4gKi9cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2lnblVwKGF1dGhJbnRlcm5hbCwge1xyXG4gICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgVXNlckNyZWRlbnRpYWxJbXBsLl9mcm9tSWRUb2tlblJlc3BvbnNlKGF1dGhJbnRlcm5hbCwgXCJzaWduSW5cIiAvKiBTSUdOX0lOICovLCByZXNwb25zZSwgdHJ1ZSk7XHJcbiAgICBhd2FpdCBhdXRoSW50ZXJuYWwuX3VwZGF0ZUN1cnJlbnRVc2VyKHVzZXJDcmVkZW50aWFsLnVzZXIpO1xyXG4gICAgcmV0dXJuIHVzZXJDcmVkZW50aWFsO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIE11bHRpRmFjdG9yRXJyb3IgZXh0ZW5kcyBGaXJlYmFzZUVycm9yIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgsIGVycm9yLCBvcGVyYXRpb25UeXBlLCB1c2VyKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHN1cGVyKGVycm9yLmNvZGUsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgIHRoaXMub3BlcmF0aW9uVHlwZSA9IG9wZXJhdGlvblR5cGU7XHJcbiAgICAgICAgdGhpcy51c2VyID0gdXNlcjtcclxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vTWljcm9zb2Z0L1R5cGVTY3JpcHQtd2lraS9ibG9iL21hc3Rlci9CcmVha2luZy1DaGFuZ2VzLm1kI2V4dGVuZGluZy1idWlsdC1pbnMtbGlrZS1lcnJvci1hcnJheS1hbmQtbWFwLW1heS1uby1sb25nZXItd29ya1xyXG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBNdWx0aUZhY3RvckVycm9yLnByb3RvdHlwZSk7XHJcbiAgICAgICAgdGhpcy5jdXN0b21EYXRhID0ge1xyXG4gICAgICAgICAgICBhcHBOYW1lOiBhdXRoLm5hbWUsXHJcbiAgICAgICAgICAgIHRlbmFudElkOiAoX2EgPSBhdXRoLnRlbmFudElkKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIF9zZXJ2ZXJSZXNwb25zZTogZXJyb3IuY3VzdG9tRGF0YS5fc2VydmVyUmVzcG9uc2UsXHJcbiAgICAgICAgICAgIG9wZXJhdGlvblR5cGUsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBfZnJvbUVycm9yQW5kT3BlcmF0aW9uKGF1dGgsIGVycm9yLCBvcGVyYXRpb25UeXBlLCB1c2VyKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNdWx0aUZhY3RvckVycm9yKGF1dGgsIGVycm9yLCBvcGVyYXRpb25UeXBlLCB1c2VyKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBfcHJvY2Vzc0NyZWRlbnRpYWxTYXZpbmdNZmFDb250ZXh0SWZOZWNlc3NhcnkoYXV0aCwgb3BlcmF0aW9uVHlwZSwgY3JlZGVudGlhbCwgdXNlcikge1xyXG4gICAgY29uc3QgaWRUb2tlblByb3ZpZGVyID0gb3BlcmF0aW9uVHlwZSA9PT0gXCJyZWF1dGhlbnRpY2F0ZVwiIC8qIFJFQVVUSEVOVElDQVRFICovXHJcbiAgICAgICAgPyBjcmVkZW50aWFsLl9nZXRSZWF1dGhlbnRpY2F0aW9uUmVzb2x2ZXIoYXV0aClcclxuICAgICAgICA6IGNyZWRlbnRpYWwuX2dldElkVG9rZW5SZXNwb25zZShhdXRoKTtcclxuICAgIHJldHVybiBpZFRva2VuUHJvdmlkZXIuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgIGlmIChlcnJvci5jb2RlID09PSBgYXV0aC8ke1wibXVsdGktZmFjdG9yLWF1dGgtcmVxdWlyZWRcIiAvKiBNRkFfUkVRVUlSRUQgKi99YCkge1xyXG4gICAgICAgICAgICB0aHJvdyBNdWx0aUZhY3RvckVycm9yLl9mcm9tRXJyb3JBbmRPcGVyYXRpb24oYXV0aCwgZXJyb3IsIG9wZXJhdGlvblR5cGUsIHVzZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUYWtlcyBhIHNldCBvZiBVc2VySW5mbyBwcm92aWRlciBkYXRhIGFuZCBjb252ZXJ0cyBpdCB0byBhIHNldCBvZiBuYW1lc1xyXG4gKi9cclxuZnVuY3Rpb24gcHJvdmlkZXJEYXRhQXNOYW1lcyhwcm92aWRlckRhdGEpIHtcclxuICAgIHJldHVybiBuZXcgU2V0KHByb3ZpZGVyRGF0YVxyXG4gICAgICAgIC5tYXAoKHsgcHJvdmlkZXJJZCB9KSA9PiBwcm92aWRlcklkKVxyXG4gICAgICAgIC5maWx0ZXIocGlkID0+ICEhcGlkKSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFVubGlua3MgYSBwcm92aWRlciBmcm9tIGEgdXNlciBhY2NvdW50LlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gcHJvdmlkZXJJZCAtIFRoZSBwcm92aWRlciB0byB1bmxpbmsuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHVubGluayh1c2VyLCBwcm92aWRlcklkKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBhd2FpdCBfYXNzZXJ0TGlua2VkU3RhdHVzKHRydWUsIHVzZXJJbnRlcm5hbCwgcHJvdmlkZXJJZCk7XHJcbiAgICBjb25zdCB7IHByb3ZpZGVyVXNlckluZm8gfSA9IGF3YWl0IGRlbGV0ZUxpbmtlZEFjY291bnRzKHVzZXJJbnRlcm5hbC5hdXRoLCB7XHJcbiAgICAgICAgaWRUb2tlbjogYXdhaXQgdXNlckludGVybmFsLmdldElkVG9rZW4oKSxcclxuICAgICAgICBkZWxldGVQcm92aWRlcjogW3Byb3ZpZGVySWRdXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IHByb3ZpZGVyc0xlZnQgPSBwcm92aWRlckRhdGFBc05hbWVzKHByb3ZpZGVyVXNlckluZm8gfHwgW10pO1xyXG4gICAgdXNlckludGVybmFsLnByb3ZpZGVyRGF0YSA9IHVzZXJJbnRlcm5hbC5wcm92aWRlckRhdGEuZmlsdGVyKHBkID0+IHByb3ZpZGVyc0xlZnQuaGFzKHBkLnByb3ZpZGVySWQpKTtcclxuICAgIGlmICghcHJvdmlkZXJzTGVmdC5oYXMoXCJwaG9uZVwiIC8qIFBIT05FICovKSkge1xyXG4gICAgICAgIHVzZXJJbnRlcm5hbC5waG9uZU51bWJlciA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBhd2FpdCB1c2VySW50ZXJuYWwuYXV0aC5fcGVyc2lzdFVzZXJJZkN1cnJlbnQodXNlckludGVybmFsKTtcclxuICAgIHJldHVybiB1c2VySW50ZXJuYWw7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX2xpbmskMSh1c2VyLCBjcmVkZW50aWFsLCBieXBhc3NBdXRoU3RhdGUgPSBmYWxzZSkge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfbG9nb3V0SWZJbnZhbGlkYXRlZCh1c2VyLCBjcmVkZW50aWFsLl9saW5rVG9JZFRva2VuKHVzZXIuYXV0aCwgYXdhaXQgdXNlci5nZXRJZFRva2VuKCkpLCBieXBhc3NBdXRoU3RhdGUpO1xyXG4gICAgcmV0dXJuIFVzZXJDcmVkZW50aWFsSW1wbC5fZm9yT3BlcmF0aW9uKHVzZXIsIFwibGlua1wiIC8qIExJTksgKi8sIHJlc3BvbnNlKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfYXNzZXJ0TGlua2VkU3RhdHVzKGV4cGVjdGVkLCB1c2VyLCBwcm92aWRlcikge1xyXG4gICAgYXdhaXQgX3JlbG9hZFdpdGhvdXRTYXZpbmcodXNlcik7XHJcbiAgICBjb25zdCBwcm92aWRlcklkcyA9IHByb3ZpZGVyRGF0YUFzTmFtZXModXNlci5wcm92aWRlckRhdGEpO1xyXG4gICAgY29uc3QgY29kZSA9IGV4cGVjdGVkID09PSBmYWxzZVxyXG4gICAgICAgID8gXCJwcm92aWRlci1hbHJlYWR5LWxpbmtlZFwiIC8qIFBST1ZJREVSX0FMUkVBRFlfTElOS0VEICovXHJcbiAgICAgICAgOiBcIm5vLXN1Y2gtcHJvdmlkZXJcIiAvKiBOT19TVUNIX1BST1ZJREVSICovO1xyXG4gICAgX2Fzc2VydChwcm92aWRlcklkcy5oYXMocHJvdmlkZXIpID09PSBleHBlY3RlZCwgdXNlci5hdXRoLCBjb2RlKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBfcmVhdXRoZW50aWNhdGUodXNlciwgY3JlZGVudGlhbCwgYnlwYXNzQXV0aFN0YXRlID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IHsgYXV0aCB9ID0gdXNlcjtcclxuICAgIGNvbnN0IG9wZXJhdGlvblR5cGUgPSBcInJlYXV0aGVudGljYXRlXCIgLyogUkVBVVRIRU5USUNBVEUgKi87XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX2xvZ291dElmSW52YWxpZGF0ZWQodXNlciwgX3Byb2Nlc3NDcmVkZW50aWFsU2F2aW5nTWZhQ29udGV4dElmTmVjZXNzYXJ5KGF1dGgsIG9wZXJhdGlvblR5cGUsIGNyZWRlbnRpYWwsIHVzZXIpLCBieXBhc3NBdXRoU3RhdGUpO1xyXG4gICAgICAgIF9hc3NlcnQocmVzcG9uc2UuaWRUb2tlbiwgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICBjb25zdCBwYXJzZWQgPSBfcGFyc2VUb2tlbihyZXNwb25zZS5pZFRva2VuKTtcclxuICAgICAgICBfYXNzZXJ0KHBhcnNlZCwgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICBjb25zdCB7IHN1YjogbG9jYWxJZCB9ID0gcGFyc2VkO1xyXG4gICAgICAgIF9hc3NlcnQodXNlci51aWQgPT09IGxvY2FsSWQsIGF1dGgsIFwidXNlci1taXNtYXRjaFwiIC8qIFVTRVJfTUlTTUFUQ0ggKi8pO1xyXG4gICAgICAgIHJldHVybiBVc2VyQ3JlZGVudGlhbEltcGwuX2Zvck9wZXJhdGlvbih1c2VyLCBvcGVyYXRpb25UeXBlLCByZXNwb25zZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIC8vIENvbnZlcnQgdXNlciBkZWxldGVkIGVycm9yIGludG8gdXNlciBtaXNtYXRjaFxyXG4gICAgICAgIGlmICgoZSA9PT0gbnVsbCB8fCBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlLmNvZGUpID09PSBgYXV0aC8ke1widXNlci1ub3QtZm91bmRcIiAvKiBVU0VSX0RFTEVURUQgKi99YCkge1xyXG4gICAgICAgICAgICBfZmFpbChhdXRoLCBcInVzZXItbWlzbWF0Y2hcIiAvKiBVU0VSX01JU01BVENIICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgZTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBfc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aCwgY3JlZGVudGlhbCwgYnlwYXNzQXV0aFN0YXRlID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IG9wZXJhdGlvblR5cGUgPSBcInNpZ25JblwiIC8qIFNJR05fSU4gKi87XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9wcm9jZXNzQ3JlZGVudGlhbFNhdmluZ01mYUNvbnRleHRJZk5lY2Vzc2FyeShhdXRoLCBvcGVyYXRpb25UeXBlLCBjcmVkZW50aWFsKTtcclxuICAgIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgVXNlckNyZWRlbnRpYWxJbXBsLl9mcm9tSWRUb2tlblJlc3BvbnNlKGF1dGgsIG9wZXJhdGlvblR5cGUsIHJlc3BvbnNlKTtcclxuICAgIGlmICghYnlwYXNzQXV0aFN0YXRlKSB7XHJcbiAgICAgICAgYXdhaXQgYXV0aC5fdXBkYXRlQ3VycmVudFVzZXIodXNlckNyZWRlbnRpYWwudXNlcik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdXNlckNyZWRlbnRpYWw7XHJcbn1cclxuLyoqXHJcbiAqIEFzeW5jaHJvbm91c2x5IHNpZ25zIGluIHdpdGggdGhlIGdpdmVuIGNyZWRlbnRpYWxzLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBBbiB7QGxpbmsgQXV0aFByb3ZpZGVyfSBjYW4gYmUgdXNlZCB0byBnZW5lcmF0ZSB0aGUgY3JlZGVudGlhbC5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gY3JlZGVudGlhbCAtIFRoZSBhdXRoIGNyZWRlbnRpYWwuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25JbldpdGhDcmVkZW50aWFsKGF1dGgsIGNyZWRlbnRpYWwpIHtcclxuICAgIHJldHVybiBfc2lnbkluV2l0aENyZWRlbnRpYWwoX2Nhc3RBdXRoKGF1dGgpLCBjcmVkZW50aWFsKTtcclxufVxyXG4vKipcclxuICogTGlua3MgdGhlIHVzZXIgYWNjb3VudCB3aXRoIHRoZSBnaXZlbiBjcmVkZW50aWFscy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogQW4ge0BsaW5rIEF1dGhQcm92aWRlcn0gY2FuIGJlIHVzZWQgdG8gZ2VuZXJhdGUgdGhlIGNyZWRlbnRpYWwuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBjcmVkZW50aWFsIC0gVGhlIGF1dGggY3JlZGVudGlhbC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gbGlua1dpdGhDcmVkZW50aWFsKHVzZXIsIGNyZWRlbnRpYWwpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGF3YWl0IF9hc3NlcnRMaW5rZWRTdGF0dXMoZmFsc2UsIHVzZXJJbnRlcm5hbCwgY3JlZGVudGlhbC5wcm92aWRlcklkKTtcclxuICAgIHJldHVybiBfbGluayQxKHVzZXJJbnRlcm5hbCwgY3JlZGVudGlhbCk7XHJcbn1cclxuLyoqXHJcbiAqIFJlLWF1dGhlbnRpY2F0ZXMgYSB1c2VyIHVzaW5nIGEgZnJlc2ggY3JlZGVudGlhbC5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVXNlIGJlZm9yZSBvcGVyYXRpb25zIHN1Y2ggYXMge0BsaW5rIHVwZGF0ZVBhc3N3b3JkfSB0aGF0IHJlcXVpcmUgdG9rZW5zIGZyb20gcmVjZW50IHNpZ24taW5cclxuICogYXR0ZW1wdHMuIFRoaXMgbWV0aG9kIGNhbiBiZSB1c2VkIHRvIHJlY292ZXIgZnJvbSBhIGBDUkVERU5USUFMX1RPT19PTERfTE9HSU5fQUdBSU5gIGVycm9yLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gY3JlZGVudGlhbCAtIFRoZSBhdXRoIGNyZWRlbnRpYWwuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlYXV0aGVudGljYXRlV2l0aENyZWRlbnRpYWwodXNlciwgY3JlZGVudGlhbCkge1xyXG4gICAgcmV0dXJuIF9yZWF1dGhlbnRpY2F0ZShnZXRNb2R1bGFySW5zdGFuY2UodXNlciksIGNyZWRlbnRpYWwpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25JbldpdGhDdXN0b21Ub2tlbiQxKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybVNpZ25JblJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6c2lnbkluV2l0aEN1c3RvbVRva2VuXCIgLyogU0lHTl9JTl9XSVRIX0NVU1RPTV9UT0tFTiAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQXN5bmNocm9ub3VzbHkgc2lnbnMgaW4gdXNpbmcgYSBjdXN0b20gdG9rZW4uXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEN1c3RvbSB0b2tlbnMgYXJlIHVzZWQgdG8gaW50ZWdyYXRlIEZpcmViYXNlIEF1dGggd2l0aCBleGlzdGluZyBhdXRoIHN5c3RlbXMsIGFuZCBtdXN0XHJcbiAqIGJlIGdlbmVyYXRlZCBieSBhbiBhdXRoIGJhY2tlbmQgdXNpbmcgdGhlXHJcbiAqIHtAbGluayBodHRwczovL2ZpcmViYXNlLmdvb2dsZS5jb20vZG9jcy9yZWZlcmVuY2UvYWRtaW4vbm9kZS9hZG1pbi5hdXRoLkF1dGgjY3JlYXRlY3VzdG9tdG9rZW4gfCBjcmVhdGVDdXN0b21Ub2tlbn1cclxuICogbWV0aG9kIGluIHRoZSB7QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvYXV0aC9hZG1pbiB8IEFkbWluIFNES30gLlxyXG4gKlxyXG4gKiBGYWlscyB3aXRoIGFuIGVycm9yIGlmIHRoZSB0b2tlbiBpcyBpbnZhbGlkLCBleHBpcmVkLCBvciBub3QgYWNjZXB0ZWQgYnkgdGhlIEZpcmViYXNlIEF1dGggc2VydmljZS5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gY3VzdG9tVG9rZW4gLSBUaGUgY3VzdG9tIHRva2VuIHRvIHNpZ24gaW4gd2l0aC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aEN1c3RvbVRva2VuKGF1dGgsIGN1c3RvbVRva2VuKSB7XHJcbiAgICBjb25zdCBhdXRoSW50ZXJuYWwgPSBfY2FzdEF1dGgoYXV0aCk7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNpZ25JbldpdGhDdXN0b21Ub2tlbiQxKGF1dGhJbnRlcm5hbCwge1xyXG4gICAgICAgIHRva2VuOiBjdXN0b21Ub2tlbixcclxuICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBjcmVkID0gYXdhaXQgVXNlckNyZWRlbnRpYWxJbXBsLl9mcm9tSWRUb2tlblJlc3BvbnNlKGF1dGhJbnRlcm5hbCwgXCJzaWduSW5cIiAvKiBTSUdOX0lOICovLCByZXNwb25zZSk7XHJcbiAgICBhd2FpdCBhdXRoSW50ZXJuYWwuX3VwZGF0ZUN1cnJlbnRVc2VyKGNyZWQudXNlcik7XHJcbiAgICByZXR1cm4gY3JlZDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBNdWx0aUZhY3RvckluZm9JbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGZhY3RvcklkLCByZXNwb25zZSkge1xyXG4gICAgICAgIHRoaXMuZmFjdG9ySWQgPSBmYWN0b3JJZDtcclxuICAgICAgICB0aGlzLnVpZCA9IHJlc3BvbnNlLm1mYUVucm9sbG1lbnRJZDtcclxuICAgICAgICB0aGlzLmVucm9sbG1lbnRUaW1lID0gbmV3IERhdGUocmVzcG9uc2UuZW5yb2xsZWRBdCkudG9VVENTdHJpbmcoKTtcclxuICAgICAgICB0aGlzLmRpc3BsYXlOYW1lID0gcmVzcG9uc2UuZGlzcGxheU5hbWU7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgX2Zyb21TZXJ2ZXJSZXNwb25zZShhdXRoLCBlbnJvbGxtZW50KSB7XHJcbiAgICAgICAgaWYgKCdwaG9uZUluZm8nIGluIGVucm9sbG1lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFBob25lTXVsdGlGYWN0b3JJbmZvLl9mcm9tU2VydmVyUmVzcG9uc2UoYXV0aCwgZW5yb2xsbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBfZmFpbChhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIFBob25lTXVsdGlGYWN0b3JJbmZvIGV4dGVuZHMgTXVsdGlGYWN0b3JJbmZvSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihyZXNwb25zZSkge1xyXG4gICAgICAgIHN1cGVyKFwicGhvbmVcIiAvKiBQSE9ORSAqLywgcmVzcG9uc2UpO1xyXG4gICAgICAgIHRoaXMucGhvbmVOdW1iZXIgPSByZXNwb25zZS5waG9uZUluZm87XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgX2Zyb21TZXJ2ZXJSZXNwb25zZShfYXV0aCwgZW5yb2xsbWVudCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUGhvbmVNdWx0aUZhY3RvckluZm8oZW5yb2xsbWVudCk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX3NldEFjdGlvbkNvZGVTZXR0aW5nc09uUmVxdWVzdChhdXRoLCByZXF1ZXN0LCBhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgIHZhciBfYTtcclxuICAgIF9hc3NlcnQoKChfYSA9IGFjdGlvbkNvZGVTZXR0aW5ncy51cmwpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5sZW5ndGgpID4gMCwgYXV0aCwgXCJpbnZhbGlkLWNvbnRpbnVlLXVyaVwiIC8qIElOVkFMSURfQ09OVElOVUVfVVJJICovKTtcclxuICAgIF9hc3NlcnQodHlwZW9mIGFjdGlvbkNvZGVTZXR0aW5ncy5keW5hbWljTGlua0RvbWFpbiA9PT0gJ3VuZGVmaW5lZCcgfHxcclxuICAgICAgICBhY3Rpb25Db2RlU2V0dGluZ3MuZHluYW1pY0xpbmtEb21haW4ubGVuZ3RoID4gMCwgYXV0aCwgXCJpbnZhbGlkLWR5bmFtaWMtbGluay1kb21haW5cIiAvKiBJTlZBTElEX0RZTkFNSUNfTElOS19ET01BSU4gKi8pO1xyXG4gICAgcmVxdWVzdC5jb250aW51ZVVybCA9IGFjdGlvbkNvZGVTZXR0aW5ncy51cmw7XHJcbiAgICByZXF1ZXN0LmR5bmFtaWNMaW5rRG9tYWluID0gYWN0aW9uQ29kZVNldHRpbmdzLmR5bmFtaWNMaW5rRG9tYWluO1xyXG4gICAgcmVxdWVzdC5jYW5IYW5kbGVDb2RlSW5BcHAgPSBhY3Rpb25Db2RlU2V0dGluZ3MuaGFuZGxlQ29kZUluQXBwO1xyXG4gICAgaWYgKGFjdGlvbkNvZGVTZXR0aW5ncy5pT1MpIHtcclxuICAgICAgICBfYXNzZXJ0KGFjdGlvbkNvZGVTZXR0aW5ncy5pT1MuYnVuZGxlSWQubGVuZ3RoID4gMCwgYXV0aCwgXCJtaXNzaW5nLWlvcy1idW5kbGUtaWRcIiAvKiBNSVNTSU5HX0lPU19CVU5ETEVfSUQgKi8pO1xyXG4gICAgICAgIHJlcXVlc3QuaU9TQnVuZGxlSWQgPSBhY3Rpb25Db2RlU2V0dGluZ3MuaU9TLmJ1bmRsZUlkO1xyXG4gICAgfVxyXG4gICAgaWYgKGFjdGlvbkNvZGVTZXR0aW5ncy5hbmRyb2lkKSB7XHJcbiAgICAgICAgX2Fzc2VydChhY3Rpb25Db2RlU2V0dGluZ3MuYW5kcm9pZC5wYWNrYWdlTmFtZS5sZW5ndGggPiAwLCBhdXRoLCBcIm1pc3NpbmctYW5kcm9pZC1wa2ctbmFtZVwiIC8qIE1JU1NJTkdfQU5EUk9JRF9QQUNLQUdFX05BTUUgKi8pO1xyXG4gICAgICAgIHJlcXVlc3QuYW5kcm9pZEluc3RhbGxBcHAgPSBhY3Rpb25Db2RlU2V0dGluZ3MuYW5kcm9pZC5pbnN0YWxsQXBwO1xyXG4gICAgICAgIHJlcXVlc3QuYW5kcm9pZE1pbmltdW1WZXJzaW9uQ29kZSA9XHJcbiAgICAgICAgICAgIGFjdGlvbkNvZGVTZXR0aW5ncy5hbmRyb2lkLm1pbmltdW1WZXJzaW9uO1xyXG4gICAgICAgIHJlcXVlc3QuYW5kcm9pZFBhY2thZ2VOYW1lID0gYWN0aW9uQ29kZVNldHRpbmdzLmFuZHJvaWQucGFja2FnZU5hbWU7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFNlbmRzIGEgcGFzc3dvcmQgcmVzZXQgZW1haWwgdG8gdGhlIGdpdmVuIGVtYWlsIGFkZHJlc3MuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRvIGNvbXBsZXRlIHRoZSBwYXNzd29yZCByZXNldCwgY2FsbCB7QGxpbmsgY29uZmlybVBhc3N3b3JkUmVzZXR9IHdpdGggdGhlIGNvZGUgc3VwcGxpZWQgaW5cclxuICogdGhlIGVtYWlsIHNlbnQgdG8gdGhlIHVzZXIsIGFsb25nIHdpdGggdGhlIG5ldyBwYXNzd29yZCBzcGVjaWZpZWQgYnkgdGhlIHVzZXIuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogY29uc3QgYWN0aW9uQ29kZVNldHRpbmdzID0ge1xyXG4gKiAgIHVybDogJ2h0dHBzOi8vd3d3LmV4YW1wbGUuY29tLz9lbWFpbD11c2VyQGV4YW1wbGUuY29tJyxcclxuICogICBpT1M6IHtcclxuICogICAgICBidW5kbGVJZDogJ2NvbS5leGFtcGxlLmlvcydcclxuICogICB9LFxyXG4gKiAgIGFuZHJvaWQ6IHtcclxuICogICAgIHBhY2thZ2VOYW1lOiAnY29tLmV4YW1wbGUuYW5kcm9pZCcsXHJcbiAqICAgICBpbnN0YWxsQXBwOiB0cnVlLFxyXG4gKiAgICAgbWluaW11bVZlcnNpb246ICcxMidcclxuICogICB9LFxyXG4gKiAgIGhhbmRsZUNvZGVJbkFwcDogdHJ1ZVxyXG4gKiB9O1xyXG4gKiBhd2FpdCBzZW5kUGFzc3dvcmRSZXNldEVtYWlsKGF1dGgsICd1c2VyQGV4YW1wbGUuY29tJywgYWN0aW9uQ29kZVNldHRpbmdzKTtcclxuICogLy8gT2J0YWluIGNvZGUgZnJvbSB1c2VyLlxyXG4gKiBhd2FpdCBjb25maXJtUGFzc3dvcmRSZXNldCgndXNlckBleGFtcGxlLmNvbScsIGNvZGUpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gZW1haWwgLSBUaGUgdXNlcidzIGVtYWlsIGFkZHJlc3MuXHJcbiAqIEBwYXJhbSBhY3Rpb25Db2RlU2V0dGluZ3MgLSBUaGUge0BsaW5rIEFjdGlvbkNvZGVTZXR0aW5nc30uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNlbmRQYXNzd29yZFJlc2V0RW1haWwoYXV0aCwgZW1haWwsIGFjdGlvbkNvZGVTZXR0aW5ncykge1xyXG4gICAgY29uc3QgYXV0aE1vZHVsYXIgPSBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCk7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0ge1xyXG4gICAgICAgIHJlcXVlc3RUeXBlOiBcIlBBU1NXT1JEX1JFU0VUXCIgLyogUEFTU1dPUkRfUkVTRVQgKi8sXHJcbiAgICAgICAgZW1haWxcclxuICAgIH07XHJcbiAgICBpZiAoYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICAgICAgX3NldEFjdGlvbkNvZGVTZXR0aW5nc09uUmVxdWVzdChhdXRoTW9kdWxhciwgcmVxdWVzdCwgYWN0aW9uQ29kZVNldHRpbmdzKTtcclxuICAgIH1cclxuICAgIGF3YWl0IHNlbmRQYXNzd29yZFJlc2V0RW1haWwkMShhdXRoTW9kdWxhciwgcmVxdWVzdCk7XHJcbn1cclxuLyoqXHJcbiAqIENvbXBsZXRlcyB0aGUgcGFzc3dvcmQgcmVzZXQgcHJvY2VzcywgZ2l2ZW4gYSBjb25maXJtYXRpb24gY29kZSBhbmQgbmV3IHBhc3N3b3JkLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBvb2JDb2RlIC0gQSBjb25maXJtYXRpb24gY29kZSBzZW50IHRvIHRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gbmV3UGFzc3dvcmQgLSBUaGUgbmV3IHBhc3N3b3JkLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBjb25maXJtUGFzc3dvcmRSZXNldChhdXRoLCBvb2JDb2RlLCBuZXdQYXNzd29yZCkge1xyXG4gICAgYXdhaXQgcmVzZXRQYXNzd29yZChnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCksIHtcclxuICAgICAgICBvb2JDb2RlLFxyXG4gICAgICAgIG5ld1Bhc3N3b3JkXHJcbiAgICB9KTtcclxuICAgIC8vIERvIG5vdCByZXR1cm4gdGhlIGVtYWlsLlxyXG59XHJcbi8qKlxyXG4gKiBBcHBsaWVzIGEgdmVyaWZpY2F0aW9uIGNvZGUgc2VudCB0byB0aGUgdXNlciBieSBlbWFpbCBvciBvdGhlciBvdXQtb2YtYmFuZCBtZWNoYW5pc20uXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIG9vYkNvZGUgLSBBIHZlcmlmaWNhdGlvbiBjb2RlIHNlbnQgdG8gdGhlIHVzZXIuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGFwcGx5QWN0aW9uQ29kZShhdXRoLCBvb2JDb2RlKSB7XHJcbiAgICBhd2FpdCBhcHBseUFjdGlvbkNvZGUkMShnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCksIHsgb29iQ29kZSB9KTtcclxufVxyXG4vKipcclxuICogQ2hlY2tzIGEgdmVyaWZpY2F0aW9uIGNvZGUgc2VudCB0byB0aGUgdXNlciBieSBlbWFpbCBvciBvdGhlciBvdXQtb2YtYmFuZCBtZWNoYW5pc20uXHJcbiAqXHJcbiAqIEByZXR1cm5zIG1ldGFkYXRhIGFib3V0IHRoZSBjb2RlLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBvb2JDb2RlIC0gQSB2ZXJpZmljYXRpb24gY29kZSBzZW50IHRvIHRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBjaGVja0FjdGlvbkNvZGUoYXV0aCwgb29iQ29kZSkge1xyXG4gICAgY29uc3QgYXV0aE1vZHVsYXIgPSBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCk7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlc2V0UGFzc3dvcmQoYXV0aE1vZHVsYXIsIHsgb29iQ29kZSB9KTtcclxuICAgIC8vIEVtYWlsIGNvdWxkIGJlIGVtcHR5IG9ubHkgaWYgdGhlIHJlcXVlc3QgdHlwZSBpcyBFTUFJTF9TSUdOSU4gb3JcclxuICAgIC8vIFZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMLlxyXG4gICAgLy8gTmV3IGVtYWlsIHNob3VsZCBub3QgYmUgZW1wdHkgaWYgdGhlIHJlcXVlc3QgdHlwZSBpc1xyXG4gICAgLy8gVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwuXHJcbiAgICAvLyBNdWx0aS1mYWN0b3IgaW5mbyBjb3VsZCBub3QgYmUgZW1wdHkgaWYgdGhlIHJlcXVlc3QgdHlwZSBpc1xyXG4gICAgLy8gUkVWRVJUX1NFQ09ORF9GQUNUT1JfQURESVRJT04uXHJcbiAgICBjb25zdCBvcGVyYXRpb24gPSByZXNwb25zZS5yZXF1ZXN0VHlwZTtcclxuICAgIF9hc3NlcnQob3BlcmF0aW9uLCBhdXRoTW9kdWxhciwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIHN3aXRjaCAob3BlcmF0aW9uKSB7XHJcbiAgICAgICAgY2FzZSBcIkVNQUlMX1NJR05JTlwiIC8qIEVNQUlMX1NJR05JTiAqLzpcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcIlZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMXCIgLyogVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwgKi86XHJcbiAgICAgICAgICAgIF9hc3NlcnQocmVzcG9uc2UubmV3RW1haWwsIGF1dGhNb2R1bGFyLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiUkVWRVJUX1NFQ09ORF9GQUNUT1JfQURESVRJT05cIiAvKiBSRVZFUlRfU0VDT05EX0ZBQ1RPUl9BRERJVElPTiAqLzpcclxuICAgICAgICAgICAgX2Fzc2VydChyZXNwb25zZS5tZmFJbmZvLCBhdXRoTW9kdWxhciwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICAvLyBmYWxsIHRocm91Z2hcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICBfYXNzZXJ0KHJlc3BvbnNlLmVtYWlsLCBhdXRoTW9kdWxhciwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIH1cclxuICAgIC8vIFRoZSBtdWx0aS1mYWN0b3IgaW5mbyBmb3IgcmV2ZXJ0IHNlY29uZCBmYWN0b3IgYWRkaXRpb25cclxuICAgIGxldCBtdWx0aUZhY3RvckluZm8gPSBudWxsO1xyXG4gICAgaWYgKHJlc3BvbnNlLm1mYUluZm8pIHtcclxuICAgICAgICBtdWx0aUZhY3RvckluZm8gPSBNdWx0aUZhY3RvckluZm9JbXBsLl9mcm9tU2VydmVyUmVzcG9uc2UoX2Nhc3RBdXRoKGF1dGhNb2R1bGFyKSwgcmVzcG9uc2UubWZhSW5mbyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgZW1haWw6IChyZXNwb25zZS5yZXF1ZXN0VHlwZSA9PT0gXCJWRVJJRllfQU5EX0NIQU5HRV9FTUFJTFwiIC8qIFZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMICovXHJcbiAgICAgICAgICAgICAgICA/IHJlc3BvbnNlLm5ld0VtYWlsXHJcbiAgICAgICAgICAgICAgICA6IHJlc3BvbnNlLmVtYWlsKSB8fCBudWxsLFxyXG4gICAgICAgICAgICBwcmV2aW91c0VtYWlsOiAocmVzcG9uc2UucmVxdWVzdFR5cGUgPT09IFwiVkVSSUZZX0FORF9DSEFOR0VfRU1BSUxcIiAvKiBWRVJJRllfQU5EX0NIQU5HRV9FTUFJTCAqL1xyXG4gICAgICAgICAgICAgICAgPyByZXNwb25zZS5lbWFpbFxyXG4gICAgICAgICAgICAgICAgOiByZXNwb25zZS5uZXdFbWFpbCkgfHwgbnVsbCxcclxuICAgICAgICAgICAgbXVsdGlGYWN0b3JJbmZvXHJcbiAgICAgICAgfSxcclxuICAgICAgICBvcGVyYXRpb25cclxuICAgIH07XHJcbn1cclxuLyoqXHJcbiAqIENoZWNrcyBhIHBhc3N3b3JkIHJlc2V0IGNvZGUgc2VudCB0byB0aGUgdXNlciBieSBlbWFpbCBvciBvdGhlciBvdXQtb2YtYmFuZCBtZWNoYW5pc20uXHJcbiAqXHJcbiAqIEByZXR1cm5zIHRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcyBpZiB2YWxpZC5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gY29kZSAtIEEgdmVyaWZpY2F0aW9uIGNvZGUgc2VudCB0byB0aGUgdXNlci5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gdmVyaWZ5UGFzc3dvcmRSZXNldENvZGUoYXV0aCwgY29kZSkge1xyXG4gICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBjaGVja0FjdGlvbkNvZGUoZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLCBjb2RlKTtcclxuICAgIC8vIEVtYWlsIHNob3VsZCBhbHdheXMgYmUgcHJlc2VudCBzaW5jZSBhIGNvZGUgd2FzIHNlbnQgdG8gaXRcclxuICAgIHJldHVybiBkYXRhLmVtYWlsO1xyXG59XHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgbmV3IHVzZXIgYWNjb3VudCBhc3NvY2lhdGVkIHdpdGggdGhlIHNwZWNpZmllZCBlbWFpbCBhZGRyZXNzIGFuZCBwYXNzd29yZC5cclxuICpcclxuICogQHJlbWFya3NcclxuICogT24gc3VjY2Vzc2Z1bCBjcmVhdGlvbiBvZiB0aGUgdXNlciBhY2NvdW50LCB0aGlzIHVzZXIgd2lsbCBhbHNvIGJlIHNpZ25lZCBpbiB0byB5b3VyIGFwcGxpY2F0aW9uLlxyXG4gKlxyXG4gKiBVc2VyIGFjY291bnQgY3JlYXRpb24gY2FuIGZhaWwgaWYgdGhlIGFjY291bnQgYWxyZWFkeSBleGlzdHMgb3IgdGhlIHBhc3N3b3JkIGlzIGludmFsaWQuXHJcbiAqXHJcbiAqIE5vdGU6IFRoZSBlbWFpbCBhZGRyZXNzIGFjdHMgYXMgYSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHVzZXIgYW5kIGVuYWJsZXMgYW4gZW1haWwtYmFzZWRcclxuICogcGFzc3dvcmQgcmVzZXQuIFRoaXMgZnVuY3Rpb24gd2lsbCBjcmVhdGUgYSBuZXcgdXNlciBhY2NvdW50IGFuZCBzZXQgdGhlIGluaXRpYWwgdXNlciBwYXNzd29yZC5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gZW1haWwgLSBUaGUgdXNlcidzIGVtYWlsIGFkZHJlc3MuXHJcbiAqIEBwYXJhbSBwYXNzd29yZCAtIFRoZSB1c2VyJ3MgY2hvc2VuIHBhc3N3b3JkLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQoYXV0aCwgZW1haWwsIHBhc3N3b3JkKSB7XHJcbiAgICBjb25zdCBhdXRoSW50ZXJuYWwgPSBfY2FzdEF1dGgoYXV0aCk7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNpZ25VcChhdXRoSW50ZXJuYWwsIHtcclxuICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZSxcclxuICAgICAgICBlbWFpbCxcclxuICAgICAgICBwYXNzd29yZFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IFVzZXJDcmVkZW50aWFsSW1wbC5fZnJvbUlkVG9rZW5SZXNwb25zZShhdXRoSW50ZXJuYWwsIFwic2lnbkluXCIgLyogU0lHTl9JTiAqLywgcmVzcG9uc2UpO1xyXG4gICAgYXdhaXQgYXV0aEludGVybmFsLl91cGRhdGVDdXJyZW50VXNlcih1c2VyQ3JlZGVudGlhbC51c2VyKTtcclxuICAgIHJldHVybiB1c2VyQ3JlZGVudGlhbDtcclxufVxyXG4vKipcclxuICogQXN5bmNocm9ub3VzbHkgc2lnbnMgaW4gdXNpbmcgYW4gZW1haWwgYW5kIHBhc3N3b3JkLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBGYWlscyB3aXRoIGFuIGVycm9yIGlmIHRoZSBlbWFpbCBhZGRyZXNzIGFuZCBwYXNzd29yZCBkbyBub3QgbWF0Y2guXHJcbiAqXHJcbiAqIE5vdGU6IFRoZSB1c2VyJ3MgcGFzc3dvcmQgaXMgTk9UIHRoZSBwYXNzd29yZCB1c2VkIHRvIGFjY2VzcyB0aGUgdXNlcidzIGVtYWlsIGFjY291bnQuIFRoZVxyXG4gKiBlbWFpbCBhZGRyZXNzIHNlcnZlcyBhcyBhIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgdXNlciwgYW5kIHRoZSBwYXNzd29yZCBpcyB1c2VkIHRvIGFjY2Vzc1xyXG4gKiB0aGUgdXNlcidzIGFjY291bnQgaW4geW91ciBGaXJlYmFzZSBwcm9qZWN0LiBTZWUgYWxzbzoge0BsaW5rIGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZH0uXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGVtYWlsIC0gVGhlIHVzZXJzIGVtYWlsIGFkZHJlc3MuXHJcbiAqIEBwYXJhbSBwYXNzd29yZCAtIFRoZSB1c2VycyBwYXNzd29yZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQoYXV0aCwgZW1haWwsIHBhc3N3b3JkKSB7XHJcbiAgICByZXR1cm4gc2lnbkluV2l0aENyZWRlbnRpYWwoZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLCBFbWFpbEF1dGhQcm92aWRlci5jcmVkZW50aWFsKGVtYWlsLCBwYXNzd29yZCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBTZW5kcyBhIHNpZ24taW4gZW1haWwgbGluayB0byB0aGUgdXNlciB3aXRoIHRoZSBzcGVjaWZpZWQgZW1haWwuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRoZSBzaWduLWluIG9wZXJhdGlvbiBoYXMgdG8gYWx3YXlzIGJlIGNvbXBsZXRlZCBpbiB0aGUgYXBwIHVubGlrZSBvdGhlciBvdXQgb2YgYmFuZCBlbWFpbFxyXG4gKiBhY3Rpb25zIChwYXNzd29yZCByZXNldCBhbmQgZW1haWwgdmVyaWZpY2F0aW9ucykuIFRoaXMgaXMgYmVjYXVzZSwgYXQgdGhlIGVuZCBvZiB0aGUgZmxvdyxcclxuICogdGhlIHVzZXIgaXMgZXhwZWN0ZWQgdG8gYmUgc2lnbmVkIGluIGFuZCB0aGVpciBBdXRoIHN0YXRlIHBlcnNpc3RlZCB3aXRoaW4gdGhlIGFwcC5cclxuICpcclxuICogVG8gY29tcGxldGUgc2lnbiBpbiB3aXRoIHRoZSBlbWFpbCBsaW5rLCBjYWxsIHtAbGluayBzaWduSW5XaXRoRW1haWxMaW5rfSB3aXRoIHRoZSBlbWFpbFxyXG4gKiBhZGRyZXNzIGFuZCB0aGUgZW1haWwgbGluayBzdXBwbGllZCBpbiB0aGUgZW1haWwgc2VudCB0byB0aGUgdXNlci5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBjb25zdCBhY3Rpb25Db2RlU2V0dGluZ3MgPSB7XHJcbiAqICAgdXJsOiAnaHR0cHM6Ly93d3cuZXhhbXBsZS5jb20vP2VtYWlsPXVzZXJAZXhhbXBsZS5jb20nLFxyXG4gKiAgIGlPUzoge1xyXG4gKiAgICAgIGJ1bmRsZUlkOiAnY29tLmV4YW1wbGUuaW9zJ1xyXG4gKiAgIH0sXHJcbiAqICAgYW5kcm9pZDoge1xyXG4gKiAgICAgcGFja2FnZU5hbWU6ICdjb20uZXhhbXBsZS5hbmRyb2lkJyxcclxuICogICAgIGluc3RhbGxBcHA6IHRydWUsXHJcbiAqICAgICBtaW5pbXVtVmVyc2lvbjogJzEyJ1xyXG4gKiAgIH0sXHJcbiAqICAgaGFuZGxlQ29kZUluQXBwOiB0cnVlXHJcbiAqIH07XHJcbiAqIGF3YWl0IHNlbmRTaWduSW5MaW5rVG9FbWFpbChhdXRoLCAndXNlckBleGFtcGxlLmNvbScsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAqIC8vIE9idGFpbiBlbWFpbExpbmsgZnJvbSB0aGUgdXNlci5cclxuICogaWYoaXNTaWduSW5XaXRoRW1haWxMaW5rKGF1dGgsIGVtYWlsTGluaykpIHtcclxuICogICBhd2FpdCBzaWduSW5XaXRoRW1haWxMaW5rKCd1c2VyQGV4YW1wbGUuY29tJywgJ3VzZXJAZXhhbXBsZS5jb20nLCBlbWFpbExpbmspO1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aEludGVybmFsIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGVtYWlsIC0gVGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzLlxyXG4gKiBAcGFyYW0gYWN0aW9uQ29kZVNldHRpbmdzIC0gVGhlIHtAbGluayBBY3Rpb25Db2RlU2V0dGluZ3N9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzZW5kU2lnbkluTGlua1RvRW1haWwoYXV0aCwgZW1haWwsIGFjdGlvbkNvZGVTZXR0aW5ncykge1xyXG4gICAgY29uc3QgYXV0aE1vZHVsYXIgPSBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCk7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0ge1xyXG4gICAgICAgIHJlcXVlc3RUeXBlOiBcIkVNQUlMX1NJR05JTlwiIC8qIEVNQUlMX1NJR05JTiAqLyxcclxuICAgICAgICBlbWFpbFxyXG4gICAgfTtcclxuICAgIF9hc3NlcnQoYWN0aW9uQ29kZVNldHRpbmdzLmhhbmRsZUNvZGVJbkFwcCwgYXV0aE1vZHVsYXIsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICBpZiAoYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICAgICAgX3NldEFjdGlvbkNvZGVTZXR0aW5nc09uUmVxdWVzdChhdXRoTW9kdWxhciwgcmVxdWVzdCwgYWN0aW9uQ29kZVNldHRpbmdzKTtcclxuICAgIH1cclxuICAgIGF3YWl0IHNlbmRTaWduSW5MaW5rVG9FbWFpbCQxKGF1dGhNb2R1bGFyLCByZXF1ZXN0KTtcclxufVxyXG4vKipcclxuICogQ2hlY2tzIGlmIGFuIGluY29taW5nIGxpbmsgaXMgYSBzaWduLWluIHdpdGggZW1haWwgbGluayBzdWl0YWJsZSBmb3Ige0BsaW5rIHNpZ25JbldpdGhFbWFpbExpbmt9LlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBlbWFpbExpbmsgLSBUaGUgbGluayBzZW50IHRvIHRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gaXNTaWduSW5XaXRoRW1haWxMaW5rKGF1dGgsIGVtYWlsTGluaykge1xyXG4gICAgY29uc3QgYWN0aW9uQ29kZVVybCA9IEFjdGlvbkNvZGVVUkwucGFyc2VMaW5rKGVtYWlsTGluayk7XHJcbiAgICByZXR1cm4gKGFjdGlvbkNvZGVVcmwgPT09IG51bGwgfHwgYWN0aW9uQ29kZVVybCA9PT0gdm9pZCAwID8gdm9pZCAwIDogYWN0aW9uQ29kZVVybC5vcGVyYXRpb24pID09PSBcIkVNQUlMX1NJR05JTlwiIC8qIEVNQUlMX1NJR05JTiAqLztcclxufVxyXG4vKipcclxuICogQXN5bmNocm9ub3VzbHkgc2lnbnMgaW4gdXNpbmcgYW4gZW1haWwgYW5kIHNpZ24taW4gZW1haWwgbGluay5cclxuICpcclxuICogQHJlbWFya3NcclxuICogSWYgbm8gbGluayBpcyBwYXNzZWQsIHRoZSBsaW5rIGlzIGluZmVycmVkIGZyb20gdGhlIGN1cnJlbnQgVVJMLlxyXG4gKlxyXG4gKiBGYWlscyB3aXRoIGFuIGVycm9yIGlmIHRoZSBlbWFpbCBhZGRyZXNzIGlzIGludmFsaWQgb3IgT1RQIGluIGVtYWlsIGxpbmsgZXhwaXJlcy5cclxuICpcclxuICogTm90ZTogQ29uZmlybSB0aGUgbGluayBpcyBhIHNpZ24taW4gZW1haWwgbGluayBiZWZvcmUgY2FsbGluZyB0aGlzIG1ldGhvZCBmaXJlYmFzZS5hdXRoLkF1dGguaXNTaWduSW5XaXRoRW1haWxMaW5rLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIGNvbnN0IGFjdGlvbkNvZGVTZXR0aW5ncyA9IHtcclxuICogICB1cmw6ICdodHRwczovL3d3dy5leGFtcGxlLmNvbS8/ZW1haWw9dXNlckBleGFtcGxlLmNvbScsXHJcbiAqICAgaU9TOiB7XHJcbiAqICAgICAgYnVuZGxlSWQ6ICdjb20uZXhhbXBsZS5pb3MnXHJcbiAqICAgfSxcclxuICogICBhbmRyb2lkOiB7XHJcbiAqICAgICBwYWNrYWdlTmFtZTogJ2NvbS5leGFtcGxlLmFuZHJvaWQnLFxyXG4gKiAgICAgaW5zdGFsbEFwcDogdHJ1ZSxcclxuICogICAgIG1pbmltdW1WZXJzaW9uOiAnMTInXHJcbiAqICAgfSxcclxuICogICBoYW5kbGVDb2RlSW5BcHA6IHRydWVcclxuICogfTtcclxuICogYXdhaXQgc2VuZFNpZ25JbkxpbmtUb0VtYWlsKGF1dGgsICd1c2VyQGV4YW1wbGUuY29tJywgYWN0aW9uQ29kZVNldHRpbmdzKTtcclxuICogLy8gT2J0YWluIGVtYWlsTGluayBmcm9tIHRoZSB1c2VyLlxyXG4gKiBpZihpc1NpZ25JbldpdGhFbWFpbExpbmsoYXV0aCwgZW1haWxMaW5rKSkge1xyXG4gKiAgIGF3YWl0IHNpZ25JbldpdGhFbWFpbExpbmsoJ3VzZXJAZXhhbXBsZS5jb20nLCAndXNlckBleGFtcGxlLmNvbScsIGVtYWlsTGluayk7XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGVtYWlsIC0gVGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzLlxyXG4gKiBAcGFyYW0gZW1haWxMaW5rIC0gVGhlIGxpbmsgc2VudCB0byB0aGUgdXNlcidzIGVtYWlsIGFkZHJlc3MuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25JbldpdGhFbWFpbExpbmsoYXV0aCwgZW1haWwsIGVtYWlsTGluaykge1xyXG4gICAgY29uc3QgYXV0aE1vZHVsYXIgPSBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCk7XHJcbiAgICBjb25zdCBjcmVkZW50aWFsID0gRW1haWxBdXRoUHJvdmlkZXIuY3JlZGVudGlhbFdpdGhMaW5rKGVtYWlsLCBlbWFpbExpbmsgfHwgX2dldEN1cnJlbnRVcmwoKSk7XHJcbiAgICAvLyBDaGVjayBpZiB0aGUgdGVuYW50IElEIGluIHRoZSBlbWFpbCBsaW5rIG1hdGNoZXMgdGhlIHRlbmFudCBJRCBvbiBBdXRoXHJcbiAgICAvLyBpbnN0YW5jZS5cclxuICAgIF9hc3NlcnQoY3JlZGVudGlhbC5fdGVuYW50SWQgPT09IChhdXRoTW9kdWxhci50ZW5hbnRJZCB8fCBudWxsKSwgYXV0aE1vZHVsYXIsIFwidGVuYW50LWlkLW1pc21hdGNoXCIgLyogVEVOQU5UX0lEX01JU01BVENIICovKTtcclxuICAgIHJldHVybiBzaWduSW5XaXRoQ3JlZGVudGlhbChhdXRoTW9kdWxhciwgY3JlZGVudGlhbCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlQXV0aFVyaShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOmNyZWF0ZUF1dGhVcmlcIiAvKiBDUkVBVEVfQVVUSF9VUkkgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEdldHMgdGhlIGxpc3Qgb2YgcG9zc2libGUgc2lnbiBpbiBtZXRob2RzIGZvciB0aGUgZ2l2ZW4gZW1haWwgYWRkcmVzcy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhpcyBpcyB1c2VmdWwgdG8gZGlmZmVyZW50aWF0ZSBtZXRob2RzIG9mIHNpZ24taW4gZm9yIHRoZSBzYW1lIHByb3ZpZGVyLCBlZy5cclxuICoge0BsaW5rIEVtYWlsQXV0aFByb3ZpZGVyfSB3aGljaCBoYXMgMiBtZXRob2RzIG9mIHNpZ24taW4sXHJcbiAqIHtAbGluayBTaWduSW5NZXRob2R9LkVNQUlMX1BBU1NXT1JEIGFuZFxyXG4gKiB7QGxpbmsgU2lnbkluTWV0aG9kfS5FTUFJTF9MSU5LLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBlbWFpbCAtIFRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hTaWduSW5NZXRob2RzRm9yRW1haWwoYXV0aCwgZW1haWwpIHtcclxuICAgIC8vIGNyZWF0ZUF1dGhVcmkgcmV0dXJucyBhbiBlcnJvciBpZiBjb250aW51ZSBVUkkgaXMgbm90IGh0dHAgb3IgaHR0cHMuXHJcbiAgICAvLyBGb3IgZW52aXJvbm1lbnRzIGxpa2UgQ29yZG92YSwgQ2hyb21lIGV4dGVuc2lvbnMsIG5hdGl2ZSBmcmFtZXdvcmtzLCBmaWxlXHJcbiAgICAvLyBzeXN0ZW1zLCBldGMsIHVzZSBodHRwOi8vbG9jYWxob3N0IGFzIGNvbnRpbnVlIFVSTC5cclxuICAgIGNvbnN0IGNvbnRpbnVlVXJpID0gX2lzSHR0cE9ySHR0cHMoKSA/IF9nZXRDdXJyZW50VXJsKCkgOiAnaHR0cDovL2xvY2FsaG9zdCc7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0ge1xyXG4gICAgICAgIGlkZW50aWZpZXI6IGVtYWlsLFxyXG4gICAgICAgIGNvbnRpbnVlVXJpXHJcbiAgICB9O1xyXG4gICAgY29uc3QgeyBzaWduaW5NZXRob2RzIH0gPSBhd2FpdCBjcmVhdGVBdXRoVXJpKGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKSwgcmVxdWVzdCk7XHJcbiAgICByZXR1cm4gc2lnbmluTWV0aG9kcyB8fCBbXTtcclxufVxyXG4vKipcclxuICogU2VuZHMgYSB2ZXJpZmljYXRpb24gZW1haWwgdG8gYSB1c2VyLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUaGUgdmVyaWZpY2F0aW9uIHByb2Nlc3MgaXMgY29tcGxldGVkIGJ5IGNhbGxpbmcge0BsaW5rIGFwcGx5QWN0aW9uQ29kZX0uXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogY29uc3QgYWN0aW9uQ29kZVNldHRpbmdzID0ge1xyXG4gKiAgIHVybDogJ2h0dHBzOi8vd3d3LmV4YW1wbGUuY29tLz9lbWFpbD11c2VyQGV4YW1wbGUuY29tJyxcclxuICogICBpT1M6IHtcclxuICogICAgICBidW5kbGVJZDogJ2NvbS5leGFtcGxlLmlvcydcclxuICogICB9LFxyXG4gKiAgIGFuZHJvaWQ6IHtcclxuICogICAgIHBhY2thZ2VOYW1lOiAnY29tLmV4YW1wbGUuYW5kcm9pZCcsXHJcbiAqICAgICBpbnN0YWxsQXBwOiB0cnVlLFxyXG4gKiAgICAgbWluaW11bVZlcnNpb246ICcxMidcclxuICogICB9LFxyXG4gKiAgIGhhbmRsZUNvZGVJbkFwcDogdHJ1ZVxyXG4gKiB9O1xyXG4gKiBhd2FpdCBzZW5kRW1haWxWZXJpZmljYXRpb24odXNlciwgYWN0aW9uQ29kZVNldHRpbmdzKTtcclxuICogLy8gT2J0YWluIGNvZGUgZnJvbSB0aGUgdXNlci5cclxuICogYXdhaXQgYXBwbHlBY3Rpb25Db2RlKGF1dGgsIGNvZGUpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIGFjdGlvbkNvZGVTZXR0aW5ncyAtIFRoZSB7QGxpbmsgQWN0aW9uQ29kZVNldHRpbmdzfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2VuZEVtYWlsVmVyaWZpY2F0aW9uKHVzZXIsIGFjdGlvbkNvZGVTZXR0aW5ncykge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgY29uc3QgaWRUb2tlbiA9IGF3YWl0IHVzZXIuZ2V0SWRUb2tlbigpO1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICByZXF1ZXN0VHlwZTogXCJWRVJJRllfRU1BSUxcIiAvKiBWRVJJRllfRU1BSUwgKi8sXHJcbiAgICAgICAgaWRUb2tlblxyXG4gICAgfTtcclxuICAgIGlmIChhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgICAgICBfc2V0QWN0aW9uQ29kZVNldHRpbmdzT25SZXF1ZXN0KHVzZXJJbnRlcm5hbC5hdXRoLCByZXF1ZXN0LCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgeyBlbWFpbCB9ID0gYXdhaXQgc2VuZEVtYWlsVmVyaWZpY2F0aW9uJDEodXNlckludGVybmFsLmF1dGgsIHJlcXVlc3QpO1xyXG4gICAgaWYgKGVtYWlsICE9PSB1c2VyLmVtYWlsKSB7XHJcbiAgICAgICAgYXdhaXQgdXNlci5yZWxvYWQoKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogU2VuZHMgYSB2ZXJpZmljYXRpb24gZW1haWwgdG8gYSBuZXcgZW1haWwgYWRkcmVzcy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhlIHVzZXIncyBlbWFpbCB3aWxsIGJlIHVwZGF0ZWQgdG8gdGhlIG5ldyBvbmUgYWZ0ZXIgYmVpbmcgdmVyaWZpZWQuXHJcbiAqXHJcbiAqIElmIHlvdSBoYXZlIGEgY3VzdG9tIGVtYWlsIGFjdGlvbiBoYW5kbGVyLCB5b3UgY2FuIGNvbXBsZXRlIHRoZSB2ZXJpZmljYXRpb24gcHJvY2VzcyBieSBjYWxsaW5nXHJcbiAqIHtAbGluayBhcHBseUFjdGlvbkNvZGV9LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIGNvbnN0IGFjdGlvbkNvZGVTZXR0aW5ncyA9IHtcclxuICogICB1cmw6ICdodHRwczovL3d3dy5leGFtcGxlLmNvbS8/ZW1haWw9dXNlckBleGFtcGxlLmNvbScsXHJcbiAqICAgaU9TOiB7XHJcbiAqICAgICAgYnVuZGxlSWQ6ICdjb20uZXhhbXBsZS5pb3MnXHJcbiAqICAgfSxcclxuICogICBhbmRyb2lkOiB7XHJcbiAqICAgICBwYWNrYWdlTmFtZTogJ2NvbS5leGFtcGxlLmFuZHJvaWQnLFxyXG4gKiAgICAgaW5zdGFsbEFwcDogdHJ1ZSxcclxuICogICAgIG1pbmltdW1WZXJzaW9uOiAnMTInXHJcbiAqICAgfSxcclxuICogICBoYW5kbGVDb2RlSW5BcHA6IHRydWVcclxuICogfTtcclxuICogYXdhaXQgdmVyaWZ5QmVmb3JlVXBkYXRlRW1haWwodXNlciwgJ25ld2VtYWlsQGV4YW1wbGUuY29tJywgYWN0aW9uQ29kZVNldHRpbmdzKTtcclxuICogLy8gT2J0YWluIGNvZGUgZnJvbSB0aGUgdXNlci5cclxuICogYXdhaXQgYXBwbHlBY3Rpb25Db2RlKGF1dGgsIGNvZGUpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIG5ld0VtYWlsIC0gVGhlIG5ldyBlbWFpbCBhZGRyZXNzIHRvIGJlIHZlcmlmaWVkIGJlZm9yZSB1cGRhdGUuXHJcbiAqIEBwYXJhbSBhY3Rpb25Db2RlU2V0dGluZ3MgLSBUaGUge0BsaW5rIEFjdGlvbkNvZGVTZXR0aW5nc30uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHZlcmlmeUJlZm9yZVVwZGF0ZUVtYWlsKHVzZXIsIG5ld0VtYWlsLCBhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGNvbnN0IGlkVG9rZW4gPSBhd2FpdCB1c2VyLmdldElkVG9rZW4oKTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgcmVxdWVzdFR5cGU6IFwiVkVSSUZZX0FORF9DSEFOR0VfRU1BSUxcIiAvKiBWRVJJRllfQU5EX0NIQU5HRV9FTUFJTCAqLyxcclxuICAgICAgICBpZFRva2VuLFxyXG4gICAgICAgIG5ld0VtYWlsXHJcbiAgICB9O1xyXG4gICAgaWYgKGFjdGlvbkNvZGVTZXR0aW5ncykge1xyXG4gICAgICAgIF9zZXRBY3Rpb25Db2RlU2V0dGluZ3NPblJlcXVlc3QodXNlckludGVybmFsLmF1dGgsIHJlcXVlc3QsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAgICB9XHJcbiAgICBjb25zdCB7IGVtYWlsIH0gPSBhd2FpdCB2ZXJpZnlBbmRDaGFuZ2VFbWFpbCh1c2VySW50ZXJuYWwuYXV0aCwgcmVxdWVzdCk7XHJcbiAgICBpZiAoZW1haWwgIT09IHVzZXIuZW1haWwpIHtcclxuICAgICAgICAvLyBJZiB0aGUgbG9jYWwgY29weSBvZiB0aGUgZW1haWwgb24gdXNlciBpcyBvdXRkYXRlZCwgcmVsb2FkIHRoZVxyXG4gICAgICAgIC8vIHVzZXIuXHJcbiAgICAgICAgYXdhaXQgdXNlci5yZWxvYWQoKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVQcm9maWxlJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czp1cGRhdGVcIiAvKiBTRVRfQUNDT1VOVF9JTkZPICovLCByZXF1ZXN0KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVXBkYXRlcyBhIHVzZXIncyBwcm9maWxlIGRhdGEuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBwcm9maWxlIC0gVGhlIHByb2ZpbGUncyBgZGlzcGxheU5hbWVgIGFuZCBgcGhvdG9VUkxgIHRvIHVwZGF0ZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlUHJvZmlsZSh1c2VyLCB7IGRpc3BsYXlOYW1lLCBwaG90b1VSTDogcGhvdG9VcmwgfSkge1xyXG4gICAgaWYgKGRpc3BsYXlOYW1lID09PSB1bmRlZmluZWQgJiYgcGhvdG9VcmwgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGNvbnN0IGlkVG9rZW4gPSBhd2FpdCB1c2VySW50ZXJuYWwuZ2V0SWRUb2tlbigpO1xyXG4gICAgY29uc3QgcHJvZmlsZVJlcXVlc3QgPSB7XHJcbiAgICAgICAgaWRUb2tlbixcclxuICAgICAgICBkaXNwbGF5TmFtZSxcclxuICAgICAgICBwaG90b1VybCxcclxuICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX2xvZ291dElmSW52YWxpZGF0ZWQodXNlckludGVybmFsLCB1cGRhdGVQcm9maWxlJDEodXNlckludGVybmFsLmF1dGgsIHByb2ZpbGVSZXF1ZXN0KSk7XHJcbiAgICB1c2VySW50ZXJuYWwuZGlzcGxheU5hbWUgPSByZXNwb25zZS5kaXNwbGF5TmFtZSB8fCBudWxsO1xyXG4gICAgdXNlckludGVybmFsLnBob3RvVVJMID0gcmVzcG9uc2UucGhvdG9VcmwgfHwgbnVsbDtcclxuICAgIC8vIFVwZGF0ZSB0aGUgcGFzc3dvcmQgcHJvdmlkZXIgYXMgd2VsbFxyXG4gICAgY29uc3QgcGFzc3dvcmRQcm92aWRlciA9IHVzZXJJbnRlcm5hbC5wcm92aWRlckRhdGEuZmluZCgoeyBwcm92aWRlcklkIH0pID0+IHByb3ZpZGVySWQgPT09IFwicGFzc3dvcmRcIiAvKiBQQVNTV09SRCAqLyk7XHJcbiAgICBpZiAocGFzc3dvcmRQcm92aWRlcikge1xyXG4gICAgICAgIHBhc3N3b3JkUHJvdmlkZXIuZGlzcGxheU5hbWUgPSB1c2VySW50ZXJuYWwuZGlzcGxheU5hbWU7XHJcbiAgICAgICAgcGFzc3dvcmRQcm92aWRlci5waG90b1VSTCA9IHVzZXJJbnRlcm5hbC5waG90b1VSTDtcclxuICAgIH1cclxuICAgIGF3YWl0IHVzZXJJbnRlcm5hbC5fdXBkYXRlVG9rZW5zSWZOZWNlc3NhcnkocmVzcG9uc2UpO1xyXG59XHJcbi8qKlxyXG4gKiBVcGRhdGVzIHRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogQW4gZW1haWwgd2lsbCBiZSBzZW50IHRvIHRoZSBvcmlnaW5hbCBlbWFpbCBhZGRyZXNzIChpZiBpdCB3YXMgc2V0KSB0aGF0IGFsbG93cyB0byByZXZva2UgdGhlXHJcbiAqIGVtYWlsIGFkZHJlc3MgY2hhbmdlLCBpbiBvcmRlciB0byBwcm90ZWN0IHRoZW0gZnJvbSBhY2NvdW50IGhpamFja2luZy5cclxuICpcclxuICogSW1wb3J0YW50OiB0aGlzIGlzIGEgc2VjdXJpdHkgc2Vuc2l0aXZlIG9wZXJhdGlvbiB0aGF0IHJlcXVpcmVzIHRoZSB1c2VyIHRvIGhhdmUgcmVjZW50bHkgc2lnbmVkXHJcbiAqIGluLiBJZiB0aGlzIHJlcXVpcmVtZW50IGlzbid0IG1ldCwgYXNrIHRoZSB1c2VyIHRvIGF1dGhlbnRpY2F0ZSBhZ2FpbiBhbmQgdGhlbiBjYWxsXHJcbiAqIHtAbGluayByZWF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFsfS5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIG5ld0VtYWlsIC0gVGhlIG5ldyBlbWFpbCBhZGRyZXNzLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVFbWFpbCh1c2VyLCBuZXdFbWFpbCkge1xyXG4gICAgcmV0dXJuIHVwZGF0ZUVtYWlsT3JQYXNzd29yZChnZXRNb2R1bGFySW5zdGFuY2UodXNlciksIG5ld0VtYWlsLCBudWxsKTtcclxufVxyXG4vKipcclxuICogVXBkYXRlcyB0aGUgdXNlcidzIHBhc3N3b3JkLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJbXBvcnRhbnQ6IHRoaXMgaXMgYSBzZWN1cml0eSBzZW5zaXRpdmUgb3BlcmF0aW9uIHRoYXQgcmVxdWlyZXMgdGhlIHVzZXIgdG8gaGF2ZSByZWNlbnRseSBzaWduZWRcclxuICogaW4uIElmIHRoaXMgcmVxdWlyZW1lbnQgaXNuJ3QgbWV0LCBhc2sgdGhlIHVzZXIgdG8gYXV0aGVudGljYXRlIGFnYWluIGFuZCB0aGVuIGNhbGxcclxuICoge0BsaW5rIHJlYXV0aGVudGljYXRlV2l0aENyZWRlbnRpYWx9LlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gbmV3UGFzc3dvcmQgLSBUaGUgbmV3IHBhc3N3b3JkLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVQYXNzd29yZCh1c2VyLCBuZXdQYXNzd29yZCkge1xyXG4gICAgcmV0dXJuIHVwZGF0ZUVtYWlsT3JQYXNzd29yZChnZXRNb2R1bGFySW5zdGFuY2UodXNlciksIG51bGwsIG5ld1Bhc3N3b3JkKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVFbWFpbE9yUGFzc3dvcmQodXNlciwgZW1haWwsIHBhc3N3b3JkKSB7XHJcbiAgICBjb25zdCB7IGF1dGggfSA9IHVzZXI7XHJcbiAgICBjb25zdCBpZFRva2VuID0gYXdhaXQgdXNlci5nZXRJZFRva2VuKCk7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0ge1xyXG4gICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWVcclxuICAgIH07XHJcbiAgICBpZiAoZW1haWwpIHtcclxuICAgICAgICByZXF1ZXN0LmVtYWlsID0gZW1haWw7XHJcbiAgICB9XHJcbiAgICBpZiAocGFzc3dvcmQpIHtcclxuICAgICAgICByZXF1ZXN0LnBhc3N3b3JkID0gcGFzc3dvcmQ7XHJcbiAgICB9XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHVzZXIsIHVwZGF0ZUVtYWlsUGFzc3dvcmQoYXV0aCwgcmVxdWVzdCkpO1xyXG4gICAgYXdhaXQgdXNlci5fdXBkYXRlVG9rZW5zSWZOZWNlc3NhcnkocmVzcG9uc2UsIC8qIHJlbG9hZCAqLyB0cnVlKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUGFyc2UgdGhlIGBBZGRpdGlvbmFsVXNlckluZm9gIGZyb20gdGhlIElEIHRva2VuIHJlc3BvbnNlLlxyXG4gKlxyXG4gKi9cclxuZnVuY3Rpb24gX2Zyb21JZFRva2VuUmVzcG9uc2UoaWRUb2tlblJlc3BvbnNlKSB7XHJcbiAgICB2YXIgX2EsIF9iO1xyXG4gICAgaWYgKCFpZFRva2VuUmVzcG9uc2UpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGNvbnN0IHsgcHJvdmlkZXJJZCB9ID0gaWRUb2tlblJlc3BvbnNlO1xyXG4gICAgY29uc3QgcHJvZmlsZSA9IGlkVG9rZW5SZXNwb25zZS5yYXdVc2VySW5mb1xyXG4gICAgICAgID8gSlNPTi5wYXJzZShpZFRva2VuUmVzcG9uc2UucmF3VXNlckluZm8pXHJcbiAgICAgICAgOiB7fTtcclxuICAgIGNvbnN0IGlzTmV3VXNlciA9IGlkVG9rZW5SZXNwb25zZS5pc05ld1VzZXIgfHxcclxuICAgICAgICBpZFRva2VuUmVzcG9uc2Uua2luZCA9PT0gXCJpZGVudGl0eXRvb2xraXQjU2lnbnVwTmV3VXNlclJlc3BvbnNlXCIgLyogU2lnbnVwTmV3VXNlciAqLztcclxuICAgIGlmICghcHJvdmlkZXJJZCAmJiAoaWRUb2tlblJlc3BvbnNlID09PSBudWxsIHx8IGlkVG9rZW5SZXNwb25zZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogaWRUb2tlblJlc3BvbnNlLmlkVG9rZW4pKSB7XHJcbiAgICAgICAgY29uc3Qgc2lnbkluUHJvdmlkZXIgPSAoX2IgPSAoX2EgPSBfcGFyc2VUb2tlbihpZFRva2VuUmVzcG9uc2UuaWRUb2tlbikpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5maXJlYmFzZSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iWydzaWduX2luX3Byb3ZpZGVyJ107XHJcbiAgICAgICAgaWYgKHNpZ25JblByb3ZpZGVyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkUHJvdmlkZXJJZCA9IHNpZ25JblByb3ZpZGVyICE9PSBcImFub255bW91c1wiIC8qIEFOT05ZTU9VUyAqLyAmJlxyXG4gICAgICAgICAgICAgICAgc2lnbkluUHJvdmlkZXIgIT09IFwiY3VzdG9tXCIgLyogQ1VTVE9NICovXHJcbiAgICAgICAgICAgICAgICA/IHNpZ25JblByb3ZpZGVyXHJcbiAgICAgICAgICAgICAgICA6IG51bGw7XHJcbiAgICAgICAgICAgIC8vIFVzZXMgZ2VuZXJpYyBjbGFzcyBpbiBhY2NvcmRhbmNlIHdpdGggdGhlIGxlZ2FjeSBTREsuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0FkZGl0aW9uYWxVc2VySW5mbyhpc05ld1VzZXIsIGZpbHRlcmVkUHJvdmlkZXJJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKCFwcm92aWRlcklkKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBzd2l0Y2ggKHByb3ZpZGVySWQpIHtcclxuICAgICAgICBjYXNlIFwiZmFjZWJvb2suY29tXCIgLyogRkFDRUJPT0sgKi86XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmFjZWJvb2tBZGRpdGlvbmFsVXNlckluZm8oaXNOZXdVc2VyLCBwcm9maWxlKTtcclxuICAgICAgICBjYXNlIFwiZ2l0aHViLmNvbVwiIC8qIEdJVEhVQiAqLzpcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHaXRodWJBZGRpdGlvbmFsVXNlckluZm8oaXNOZXdVc2VyLCBwcm9maWxlKTtcclxuICAgICAgICBjYXNlIFwiZ29vZ2xlLmNvbVwiIC8qIEdPT0dMRSAqLzpcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHb29nbGVBZGRpdGlvbmFsVXNlckluZm8oaXNOZXdVc2VyLCBwcm9maWxlKTtcclxuICAgICAgICBjYXNlIFwidHdpdHRlci5jb21cIiAvKiBUV0lUVEVSICovOlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFR3aXR0ZXJBZGRpdGlvbmFsVXNlckluZm8oaXNOZXdVc2VyLCBwcm9maWxlLCBpZFRva2VuUmVzcG9uc2Uuc2NyZWVuTmFtZSB8fCBudWxsKTtcclxuICAgICAgICBjYXNlIFwiY3VzdG9tXCIgLyogQ1VTVE9NICovOlxyXG4gICAgICAgIGNhc2UgXCJhbm9ueW1vdXNcIiAvKiBBTk9OWU1PVVMgKi86XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0FkZGl0aW9uYWxVc2VySW5mbyhpc05ld1VzZXIsIG51bGwpO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0FkZGl0aW9uYWxVc2VySW5mbyhpc05ld1VzZXIsIHByb3ZpZGVySWQsIHByb2ZpbGUpO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIEdlbmVyaWNBZGRpdGlvbmFsVXNlckluZm8ge1xyXG4gICAgY29uc3RydWN0b3IoaXNOZXdVc2VyLCBwcm92aWRlcklkLCBwcm9maWxlID0ge30pIHtcclxuICAgICAgICB0aGlzLmlzTmV3VXNlciA9IGlzTmV3VXNlcjtcclxuICAgICAgICB0aGlzLnByb3ZpZGVySWQgPSBwcm92aWRlcklkO1xyXG4gICAgICAgIHRoaXMucHJvZmlsZSA9IHByb2ZpbGU7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgRmVkZXJhdGVkQWRkaXRpb25hbFVzZXJJbmZvV2l0aFVzZXJuYW1lIGV4dGVuZHMgR2VuZXJpY0FkZGl0aW9uYWxVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcihpc05ld1VzZXIsIHByb3ZpZGVySWQsIHByb2ZpbGUsIHVzZXJuYW1lKSB7XHJcbiAgICAgICAgc3VwZXIoaXNOZXdVc2VyLCBwcm92aWRlcklkLCBwcm9maWxlKTtcclxuICAgICAgICB0aGlzLnVzZXJuYW1lID0gdXNlcm5hbWU7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgRmFjZWJvb2tBZGRpdGlvbmFsVXNlckluZm8gZXh0ZW5kcyBHZW5lcmljQWRkaXRpb25hbFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKGlzTmV3VXNlciwgcHJvZmlsZSkge1xyXG4gICAgICAgIHN1cGVyKGlzTmV3VXNlciwgXCJmYWNlYm9vay5jb21cIiAvKiBGQUNFQk9PSyAqLywgcHJvZmlsZSk7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgR2l0aHViQWRkaXRpb25hbFVzZXJJbmZvIGV4dGVuZHMgRmVkZXJhdGVkQWRkaXRpb25hbFVzZXJJbmZvV2l0aFVzZXJuYW1lIHtcclxuICAgIGNvbnN0cnVjdG9yKGlzTmV3VXNlciwgcHJvZmlsZSkge1xyXG4gICAgICAgIHN1cGVyKGlzTmV3VXNlciwgXCJnaXRodWIuY29tXCIgLyogR0lUSFVCICovLCBwcm9maWxlLCB0eXBlb2YgKHByb2ZpbGUgPT09IG51bGwgfHwgcHJvZmlsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcHJvZmlsZS5sb2dpbikgPT09ICdzdHJpbmcnID8gcHJvZmlsZSA9PT0gbnVsbCB8fCBwcm9maWxlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwcm9maWxlLmxvZ2luIDogbnVsbCk7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgR29vZ2xlQWRkaXRpb25hbFVzZXJJbmZvIGV4dGVuZHMgR2VuZXJpY0FkZGl0aW9uYWxVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcihpc05ld1VzZXIsIHByb2ZpbGUpIHtcclxuICAgICAgICBzdXBlcihpc05ld1VzZXIsIFwiZ29vZ2xlLmNvbVwiIC8qIEdPT0dMRSAqLywgcHJvZmlsZSk7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgVHdpdHRlckFkZGl0aW9uYWxVc2VySW5mbyBleHRlbmRzIEZlZGVyYXRlZEFkZGl0aW9uYWxVc2VySW5mb1dpdGhVc2VybmFtZSB7XHJcbiAgICBjb25zdHJ1Y3Rvcihpc05ld1VzZXIsIHByb2ZpbGUsIHNjcmVlbk5hbWUpIHtcclxuICAgICAgICBzdXBlcihpc05ld1VzZXIsIFwidHdpdHRlci5jb21cIiAvKiBUV0lUVEVSICovLCBwcm9maWxlLCBzY3JlZW5OYW1lKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRXh0cmFjdHMgcHJvdmlkZXIgc3BlY2lmaWMge0BsaW5rIEFkZGl0aW9uYWxVc2VySW5mb30gZm9yIHRoZSBnaXZlbiBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRBZGRpdGlvbmFsVXNlckluZm8odXNlckNyZWRlbnRpYWwpIHtcclxuICAgIGNvbnN0IHsgdXNlciwgX3Rva2VuUmVzcG9uc2UgfSA9IHVzZXJDcmVkZW50aWFsO1xyXG4gICAgaWYgKHVzZXIuaXNBbm9ueW1vdXMgJiYgIV90b2tlblJlc3BvbnNlKSB7XHJcbiAgICAgICAgLy8gSGFuZGxlIHRoZSBzcGVjaWFsIGNhc2Ugd2hlcmUgc2lnbkluQW5vbnltb3VzbHkoKSBnZXRzIGNhbGxlZCB0d2ljZS5cclxuICAgICAgICAvLyBObyBuZXR3b3JrIGNhbGwgaXMgbWFkZSBzbyB0aGVyZSdzIG5vdGhpbmcgdG8gYWN0dWFsbHkgZmlsbCB0aGlzIGluXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcHJvdmlkZXJJZDogbnVsbCxcclxuICAgICAgICAgICAgaXNOZXdVc2VyOiBmYWxzZSxcclxuICAgICAgICAgICAgcHJvZmlsZTogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX2Zyb21JZFRva2VuUmVzcG9uc2UoX3Rva2VuUmVzcG9uc2UpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIE5vbi1vcHRpb25hbCBhdXRoIG1ldGhvZHMuXHJcbi8qKlxyXG4gKiBDaGFuZ2VzIHRoZSB0eXBlIG9mIHBlcnNpc3RlbmNlIG9uIHRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UgZm9yIHRoZSBjdXJyZW50bHkgc2F2ZWRcclxuICogYEF1dGhgIHNlc3Npb24gYW5kIGFwcGxpZXMgdGhpcyB0eXBlIG9mIHBlcnNpc3RlbmNlIGZvciBmdXR1cmUgc2lnbi1pbiByZXF1ZXN0cywgaW5jbHVkaW5nXHJcbiAqIHNpZ24taW4gd2l0aCByZWRpcmVjdCByZXF1ZXN0cy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhpcyBtYWtlcyBpdCBlYXN5IGZvciBhIHVzZXIgc2lnbmluZyBpbiB0byBzcGVjaWZ5IHdoZXRoZXIgdGhlaXIgc2Vzc2lvbiBzaG91bGQgYmVcclxuICogcmVtZW1iZXJlZCBvciBub3QuIEl0IGFsc28gbWFrZXMgaXQgZWFzaWVyIHRvIG5ldmVyIHBlcnNpc3QgdGhlIGBBdXRoYCBzdGF0ZSBmb3IgYXBwbGljYXRpb25zXHJcbiAqIHRoYXQgYXJlIHNoYXJlZCBieSBvdGhlciB1c2VycyBvciBoYXZlIHNlbnNpdGl2ZSBkYXRhLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIHNldFBlcnNpc3RlbmNlKGF1dGgsIGJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gcGVyc2lzdGVuY2UgLSBUaGUge0BsaW5rIFBlcnNpc3RlbmNlfSB0byB1c2UuXHJcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgcmVzb2x2ZXMgb25jZSB0aGUgcGVyc2lzdGVuY2UgY2hhbmdlIGhhcyBjb21wbGV0ZWRcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gc2V0UGVyc2lzdGVuY2UoYXV0aCwgcGVyc2lzdGVuY2UpIHtcclxuICAgIHJldHVybiBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCkuc2V0UGVyc2lzdGVuY2UocGVyc2lzdGVuY2UpO1xyXG59XHJcbi8qKlxyXG4gKiBBZGRzIGFuIG9ic2VydmVyIGZvciBjaGFuZ2VzIHRvIHRoZSBzaWduZWQtaW4gdXNlcidzIElEIHRva2VuLCB3aGljaCBpbmNsdWRlcyBzaWduLWluLFxyXG4gKiBzaWduLW91dCwgYW5kIHRva2VuIHJlZnJlc2ggZXZlbnRzLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBuZXh0T3JPYnNlcnZlciAtIGNhbGxiYWNrIHRyaWdnZXJlZCBvbiBjaGFuZ2UuXHJcbiAqIEBwYXJhbSBlcnJvciAtIGNhbGxiYWNrIHRyaWdnZXJlZCBvbiBlcnJvci5cclxuICogQHBhcmFtIGNvbXBsZXRlZCAtIGNhbGxiYWNrIHRyaWdnZXJlZCB3aGVuIG9ic2VydmVyIGlzIHJlbW92ZWQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIG9uSWRUb2tlbkNoYW5nZWQoYXV0aCwgbmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpIHtcclxuICAgIHJldHVybiBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCkub25JZFRva2VuQ2hhbmdlZChuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCk7XHJcbn1cclxuLyoqXHJcbiAqIEFkZHMgYW4gb2JzZXJ2ZXIgZm9yIGNoYW5nZXMgdG8gdGhlIHVzZXIncyBzaWduLWluIHN0YXRlLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUbyBrZWVwIHRoZSBvbGQgYmVoYXZpb3IsIHNlZSB7QGxpbmsgb25JZFRva2VuQ2hhbmdlZH0uXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIG5leHRPck9ic2VydmVyIC0gY2FsbGJhY2sgdHJpZ2dlcmVkIG9uIGNoYW5nZS5cclxuICogQHBhcmFtIGVycm9yIC0gY2FsbGJhY2sgdHJpZ2dlcmVkIG9uIGVycm9yLlxyXG4gKiBAcGFyYW0gY29tcGxldGVkIC0gY2FsbGJhY2sgdHJpZ2dlcmVkIHdoZW4gb2JzZXJ2ZXIgaXMgcmVtb3ZlZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gb25BdXRoU3RhdGVDaGFuZ2VkKGF1dGgsIG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKSB7XHJcbiAgICByZXR1cm4gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLm9uQXV0aFN0YXRlQ2hhbmdlZChuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCk7XHJcbn1cclxuLyoqXHJcbiAqIFNldHMgdGhlIGN1cnJlbnQgbGFuZ3VhZ2UgdG8gdGhlIGRlZmF1bHQgZGV2aWNlL2Jyb3dzZXIgcHJlZmVyZW5jZS5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiB1c2VEZXZpY2VMYW5ndWFnZShhdXRoKSB7XHJcbiAgICBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCkudXNlRGV2aWNlTGFuZ3VhZ2UoKTtcclxufVxyXG4vKipcclxuICogQXN5bmNocm9ub3VzbHkgc2V0cyB0aGUgcHJvdmlkZWQgdXNlciBhcyB7QGxpbmsgQXV0aC5jdXJyZW50VXNlcn0gb24gdGhlXHJcbiAqIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICpcclxuICogQHJlbWFya3NcclxuICogQSBuZXcgaW5zdGFuY2UgY29weSBvZiB0aGUgdXNlciBwcm92aWRlZCB3aWxsIGJlIG1hZGUgYW5kIHNldCBhcyBjdXJyZW50VXNlci5cclxuICpcclxuICogVGhpcyB3aWxsIHRyaWdnZXIge0BsaW5rIG9uQXV0aFN0YXRlQ2hhbmdlZH0gYW5kIHtAbGluayBvbklkVG9rZW5DaGFuZ2VkfSBsaXN0ZW5lcnNcclxuICogbGlrZSBvdGhlciBzaWduIGluIG1ldGhvZHMuXHJcbiAqXHJcbiAqIFRoZSBvcGVyYXRpb24gZmFpbHMgd2l0aCBhbiBlcnJvciBpZiB0aGUgdXNlciB0byBiZSB1cGRhdGVkIGJlbG9uZ3MgdG8gYSBkaWZmZXJlbnQgRmlyZWJhc2VcclxuICogcHJvamVjdC5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSBuZXcge0BsaW5rIFVzZXJ9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVDdXJyZW50VXNlcihhdXRoLCB1c2VyKSB7XHJcbiAgICByZXR1cm4gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLnVwZGF0ZUN1cnJlbnRVc2VyKHVzZXIpO1xyXG59XHJcbi8qKlxyXG4gKiBTaWducyBvdXQgdGhlIGN1cnJlbnQgdXNlci5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBzaWduT3V0KGF1dGgpIHtcclxuICAgIHJldHVybiBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCkuc2lnbk91dCgpO1xyXG59XHJcbi8qKlxyXG4gKiBEZWxldGVzIGFuZCBzaWducyBvdXQgdGhlIHVzZXIuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEltcG9ydGFudDogdGhpcyBpcyBhIHNlY3VyaXR5LXNlbnNpdGl2ZSBvcGVyYXRpb24gdGhhdCByZXF1aXJlcyB0aGUgdXNlciB0byBoYXZlIHJlY2VudGx5XHJcbiAqIHNpZ25lZCBpbi4gSWYgdGhpcyByZXF1aXJlbWVudCBpc24ndCBtZXQsIGFzayB0aGUgdXNlciB0byBhdXRoZW50aWNhdGUgYWdhaW4gYW5kIHRoZW4gY2FsbFxyXG4gKiB7QGxpbmsgcmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbH0uXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVVzZXIodXNlcikge1xyXG4gICAgcmV0dXJuIGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKS5kZWxldGUoKTtcclxufVxuXG5jbGFzcyBNdWx0aUZhY3RvclNlc3Npb25JbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKHR5cGUsIGNyZWRlbnRpYWwpIHtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIHRoaXMuY3JlZGVudGlhbCA9IGNyZWRlbnRpYWw7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgX2Zyb21JZHRva2VuKGlkVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gbmV3IE11bHRpRmFjdG9yU2Vzc2lvbkltcGwoXCJlbnJvbGxcIiAvKiBFTlJPTEwgKi8sIGlkVG9rZW4pO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIF9mcm9tTWZhUGVuZGluZ0NyZWRlbnRpYWwobWZhUGVuZGluZ0NyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gbmV3IE11bHRpRmFjdG9yU2Vzc2lvbkltcGwoXCJzaWduaW5cIiAvKiBTSUdOX0lOICovLCBtZmFQZW5kaW5nQ3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gdGhpcy50eXBlID09PSBcImVucm9sbFwiIC8qIEVOUk9MTCAqL1xyXG4gICAgICAgICAgICA/ICdpZFRva2VuJ1xyXG4gICAgICAgICAgICA6ICdwZW5kaW5nQ3JlZGVudGlhbCc7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbXVsdGlGYWN0b3JTZXNzaW9uOiB7XHJcbiAgICAgICAgICAgICAgICBba2V5XTogdGhpcy5jcmVkZW50aWFsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGZyb21KU09OKG9iaikge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgaWYgKG9iaiA9PT0gbnVsbCB8fCBvYmogPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iai5tdWx0aUZhY3RvclNlc3Npb24pIHtcclxuICAgICAgICAgICAgaWYgKChfYSA9IG9iai5tdWx0aUZhY3RvclNlc3Npb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wZW5kaW5nQ3JlZGVudGlhbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE11bHRpRmFjdG9yU2Vzc2lvbkltcGwuX2Zyb21NZmFQZW5kaW5nQ3JlZGVudGlhbChvYmoubXVsdGlGYWN0b3JTZXNzaW9uLnBlbmRpbmdDcmVkZW50aWFsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICgoX2IgPSBvYmoubXVsdGlGYWN0b3JTZXNzaW9uKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuaWRUb2tlbikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE11bHRpRmFjdG9yU2Vzc2lvbkltcGwuX2Zyb21JZHRva2VuKG9iai5tdWx0aUZhY3RvclNlc3Npb24uaWRUb2tlbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgTXVsdGlGYWN0b3JSZXNvbHZlckltcGwge1xyXG4gICAgY29uc3RydWN0b3Ioc2Vzc2lvbiwgaGludHMsIHNpZ25JblJlc29sdmVyKSB7XHJcbiAgICAgICAgdGhpcy5zZXNzaW9uID0gc2Vzc2lvbjtcclxuICAgICAgICB0aGlzLmhpbnRzID0gaGludHM7XHJcbiAgICAgICAgdGhpcy5zaWduSW5SZXNvbHZlciA9IHNpZ25JblJlc29sdmVyO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgc3RhdGljIF9mcm9tRXJyb3IoYXV0aEV4dGVybiwgZXJyb3IpIHtcclxuICAgICAgICBjb25zdCBhdXRoID0gX2Nhc3RBdXRoKGF1dGhFeHRlcm4pO1xyXG4gICAgICAgIGNvbnN0IHNlcnZlclJlc3BvbnNlID0gZXJyb3IuY3VzdG9tRGF0YS5fc2VydmVyUmVzcG9uc2U7XHJcbiAgICAgICAgY29uc3QgaGludHMgPSAoc2VydmVyUmVzcG9uc2UubWZhSW5mbyB8fCBbXSkubWFwKGVucm9sbG1lbnQgPT4gTXVsdGlGYWN0b3JJbmZvSW1wbC5fZnJvbVNlcnZlclJlc3BvbnNlKGF1dGgsIGVucm9sbG1lbnQpKTtcclxuICAgICAgICBfYXNzZXJ0KHNlcnZlclJlc3BvbnNlLm1mYVBlbmRpbmdDcmVkZW50aWFsLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSBNdWx0aUZhY3RvclNlc3Npb25JbXBsLl9mcm9tTWZhUGVuZGluZ0NyZWRlbnRpYWwoc2VydmVyUmVzcG9uc2UubWZhUGVuZGluZ0NyZWRlbnRpYWwpO1xyXG4gICAgICAgIHJldHVybiBuZXcgTXVsdGlGYWN0b3JSZXNvbHZlckltcGwoc2Vzc2lvbiwgaGludHMsIGFzeW5jIChhc3NlcnRpb24pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbWZhUmVzcG9uc2UgPSBhd2FpdCBhc3NlcnRpb24uX3Byb2Nlc3MoYXV0aCwgc2Vzc2lvbik7XHJcbiAgICAgICAgICAgIC8vIENsZWFyIG91dCB0aGUgdW5uZWVkZWQgZmllbGRzIGZyb20gdGhlIG9sZCBsb2dpbiByZXNwb25zZVxyXG4gICAgICAgICAgICBkZWxldGUgc2VydmVyUmVzcG9uc2UubWZhSW5mbztcclxuICAgICAgICAgICAgZGVsZXRlIHNlcnZlclJlc3BvbnNlLm1mYVBlbmRpbmdDcmVkZW50aWFsO1xyXG4gICAgICAgICAgICAvLyBVc2UgaW4gdGhlIG5ldyB0b2tlbiAmIHJlZnJlc2ggdG9rZW4gaW4gdGhlIG9sZCByZXNwb25zZVxyXG4gICAgICAgICAgICBjb25zdCBpZFRva2VuUmVzcG9uc2UgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHNlcnZlclJlc3BvbnNlKSwgeyBpZFRva2VuOiBtZmFSZXNwb25zZS5pZFRva2VuLCByZWZyZXNoVG9rZW46IG1mYVJlc3BvbnNlLnJlZnJlc2hUb2tlbiB9KTtcclxuICAgICAgICAgICAgLy8gVE9ETzogd2Ugc2hvdWxkIGNvbGxhcHNlIHRoaXMgc3dpdGNoIHN0YXRlbWVudCBpbnRvIFVzZXJDcmVkZW50aWFsSW1wbC5fZm9yT3BlcmF0aW9uIGFuZCBoYXZlIGl0IHN1cHBvcnQgdGhlIFNJR05fSU4gY2FzZVxyXG4gICAgICAgICAgICBzd2l0Y2ggKGVycm9yLm9wZXJhdGlvblR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzaWduSW5cIiAvKiBTSUdOX0lOICovOlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgVXNlckNyZWRlbnRpYWxJbXBsLl9mcm9tSWRUb2tlblJlc3BvbnNlKGF1dGgsIGVycm9yLm9wZXJhdGlvblR5cGUsIGlkVG9rZW5SZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXV0aC5fdXBkYXRlQ3VycmVudFVzZXIodXNlckNyZWRlbnRpYWwudXNlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJDcmVkZW50aWFsO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInJlYXV0aGVudGljYXRlXCIgLyogUkVBVVRIRU5USUNBVEUgKi86XHJcbiAgICAgICAgICAgICAgICAgICAgX2Fzc2VydChlcnJvci51c2VyLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBVc2VyQ3JlZGVudGlhbEltcGwuX2Zvck9wZXJhdGlvbihlcnJvci51c2VyLCBlcnJvci5vcGVyYXRpb25UeXBlLCBpZFRva2VuUmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBfZmFpbChhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyByZXNvbHZlU2lnbkluKGFzc2VydGlvbkV4dGVybikge1xyXG4gICAgICAgIGNvbnN0IGFzc2VydGlvbiA9IGFzc2VydGlvbkV4dGVybjtcclxuICAgICAgICByZXR1cm4gdGhpcy5zaWduSW5SZXNvbHZlcihhc3NlcnRpb24pO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBQcm92aWRlcyBhIHtAbGluayBNdWx0aUZhY3RvclJlc29sdmVyfSBzdWl0YWJsZSBmb3IgY29tcGxldGlvbiBvZiBhXHJcbiAqIG11bHRpLWZhY3RvciBmbG93LlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBlcnJvciAtIFRoZSB7QGxpbmsgTXVsdGlGYWN0b3JFcnJvcn0gcmFpc2VkIGR1cmluZyBhIHNpZ24taW4sIG9yXHJcbiAqIHJlYXV0aGVudGljYXRpb24gb3BlcmF0aW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRNdWx0aUZhY3RvclJlc29sdmVyKGF1dGgsIGVycm9yKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICBjb25zdCBhdXRoTW9kdWxhciA9IGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKTtcclxuICAgIGNvbnN0IGVycm9ySW50ZXJuYWwgPSBlcnJvcjtcclxuICAgIF9hc3NlcnQoZXJyb3IuY3VzdG9tRGF0YS5vcGVyYXRpb25UeXBlLCBhdXRoTW9kdWxhciwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgIF9hc3NlcnQoKF9hID0gZXJyb3JJbnRlcm5hbC5jdXN0b21EYXRhLl9zZXJ2ZXJSZXNwb25zZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1mYVBlbmRpbmdDcmVkZW50aWFsLCBhdXRoTW9kdWxhciwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgIHJldHVybiBNdWx0aUZhY3RvclJlc29sdmVySW1wbC5fZnJvbUVycm9yKGF1dGhNb2R1bGFyLCBlcnJvckludGVybmFsKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBzdGFydEVucm9sbFBob25lTWZhKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjIvYWNjb3VudHMvbWZhRW5yb2xsbWVudDpzdGFydFwiIC8qIFNUQVJUX1BIT05FX01GQV9FTlJPTExNRU5UICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XHJcbmZ1bmN0aW9uIGZpbmFsaXplRW5yb2xsUGhvbmVNZmEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92Mi9hY2NvdW50cy9tZmFFbnJvbGxtZW50OmZpbmFsaXplXCIgLyogRklOQUxJWkVfUEhPTkVfTUZBX0VOUk9MTE1FTlQgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuZnVuY3Rpb24gd2l0aGRyYXdNZmEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92Mi9hY2NvdW50cy9tZmFFbnJvbGxtZW50OndpdGhkcmF3XCIgLyogV0lUSERSQVdfTUZBICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XG5cbmNsYXNzIE11bHRpRmFjdG9yVXNlckltcGwge1xyXG4gICAgY29uc3RydWN0b3IodXNlcikge1xyXG4gICAgICAgIHRoaXMudXNlciA9IHVzZXI7XHJcbiAgICAgICAgdGhpcy5lbnJvbGxlZEZhY3RvcnMgPSBbXTtcclxuICAgICAgICB1c2VyLl9vblJlbG9hZCh1c2VySW5mbyA9PiB7XHJcbiAgICAgICAgICAgIGlmICh1c2VySW5mby5tZmFJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVucm9sbGVkRmFjdG9ycyA9IHVzZXJJbmZvLm1mYUluZm8ubWFwKGVucm9sbG1lbnQgPT4gTXVsdGlGYWN0b3JJbmZvSW1wbC5fZnJvbVNlcnZlclJlc3BvbnNlKHVzZXIuYXV0aCwgZW5yb2xsbWVudCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgX2Zyb21Vc2VyKHVzZXIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IE11bHRpRmFjdG9yVXNlckltcGwodXNlcik7XHJcbiAgICB9XHJcbiAgICBhc3luYyBnZXRTZXNzaW9uKCkge1xyXG4gICAgICAgIHJldHVybiBNdWx0aUZhY3RvclNlc3Npb25JbXBsLl9mcm9tSWR0b2tlbihhd2FpdCB0aGlzLnVzZXIuZ2V0SWRUb2tlbigpKTtcclxuICAgIH1cclxuICAgIGFzeW5jIGVucm9sbChhc3NlcnRpb25FeHRlcm4sIGRpc3BsYXlOYW1lKSB7XHJcbiAgICAgICAgY29uc3QgYXNzZXJ0aW9uID0gYXNzZXJ0aW9uRXh0ZXJuO1xyXG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSAoYXdhaXQgdGhpcy5nZXRTZXNzaW9uKCkpO1xyXG4gICAgICAgIGNvbnN0IGZpbmFsaXplTWZhUmVzcG9uc2UgPSBhd2FpdCBfbG9nb3V0SWZJbnZhbGlkYXRlZCh0aGlzLnVzZXIsIGFzc2VydGlvbi5fcHJvY2Vzcyh0aGlzLnVzZXIuYXV0aCwgc2Vzc2lvbiwgZGlzcGxheU5hbWUpKTtcclxuICAgICAgICAvLyBOZXcgdG9rZW5zIHdpbGwgYmUgaXNzdWVkIGFmdGVyIGVucm9sbG1lbnQgb2YgdGhlIG5ldyBzZWNvbmQgZmFjdG9ycy5cclxuICAgICAgICAvLyBUaGV5IG5lZWQgdG8gYmUgdXBkYXRlZCBvbiB0aGUgdXNlci5cclxuICAgICAgICBhd2FpdCB0aGlzLnVzZXIuX3VwZGF0ZVRva2Vuc0lmTmVjZXNzYXJ5KGZpbmFsaXplTWZhUmVzcG9uc2UpO1xyXG4gICAgICAgIC8vIFRoZSB1c2VyIG5lZWRzIHRvIGJlIHJlbG9hZGVkIHRvIGdldCB0aGUgbmV3IG11bHRpLWZhY3RvciBpbmZvcm1hdGlvblxyXG4gICAgICAgIC8vIGZyb20gc2VydmVyLiBVU0VSX1JFTE9BREVEIGV2ZW50IHdpbGwgYmUgdHJpZ2dlcmVkIGFuZCBgZW5yb2xsZWRGYWN0b3JzYFxyXG4gICAgICAgIC8vIHdpbGwgYmUgdXBkYXRlZC5cclxuICAgICAgICByZXR1cm4gdGhpcy51c2VyLnJlbG9hZCgpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgdW5lbnJvbGwoaW5mb09yVWlkKSB7XHJcbiAgICAgICAgY29uc3QgbWZhRW5yb2xsbWVudElkID0gdHlwZW9mIGluZm9PclVpZCA9PT0gJ3N0cmluZycgPyBpbmZvT3JVaWQgOiBpbmZvT3JVaWQudWlkO1xyXG4gICAgICAgIGNvbnN0IGlkVG9rZW4gPSBhd2FpdCB0aGlzLnVzZXIuZ2V0SWRUb2tlbigpO1xyXG4gICAgICAgIGNvbnN0IGlkVG9rZW5SZXNwb25zZSA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHRoaXMudXNlciwgd2l0aGRyYXdNZmEodGhpcy51c2VyLmF1dGgsIHtcclxuICAgICAgICAgICAgaWRUb2tlbixcclxuICAgICAgICAgICAgbWZhRW5yb2xsbWVudElkXHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgc2Vjb25kIGZhY3RvciBmcm9tIHRoZSB1c2VyJ3MgbGlzdC5cclxuICAgICAgICB0aGlzLmVucm9sbGVkRmFjdG9ycyA9IHRoaXMuZW5yb2xsZWRGYWN0b3JzLmZpbHRlcigoeyB1aWQgfSkgPT4gdWlkICE9PSBtZmFFbnJvbGxtZW50SWQpO1xyXG4gICAgICAgIC8vIERlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSBiYWNrZW5kIGRlY2lkZWQgdG8gcmV2b2tlIHRoZSB1c2VyJ3Mgc2Vzc2lvbixcclxuICAgICAgICAvLyB0aGUgdG9rZW5SZXNwb25zZSBtYXkgYmUgZW1wdHkuIElmIHRoZSB0b2tlbnMgd2VyZSBub3QgdXBkYXRlZCAoYW5kIHRoZXlcclxuICAgICAgICAvLyBhcmUgbm93IGludmFsaWQpLCByZWxvYWRpbmcgdGhlIHVzZXIgd2lsbCBkaXNjb3ZlciB0aGlzIGFuZCBpbnZhbGlkYXRlXHJcbiAgICAgICAgLy8gdGhlIHVzZXIncyBzdGF0ZSBhY2NvcmRpbmdseS5cclxuICAgICAgICBhd2FpdCB0aGlzLnVzZXIuX3VwZGF0ZVRva2Vuc0lmTmVjZXNzYXJ5KGlkVG9rZW5SZXNwb25zZSk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy51c2VyLnJlbG9hZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBpZiAoZS5jb2RlICE9PSBgYXV0aC8ke1widXNlci10b2tlbi1leHBpcmVkXCIgLyogVE9LRU5fRVhQSVJFRCAqL31gKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmNvbnN0IG11bHRpRmFjdG9yVXNlckNhY2hlID0gbmV3IFdlYWtNYXAoKTtcclxuLyoqXHJcbiAqIFRoZSB7QGxpbmsgTXVsdGlGYWN0b3JVc2VyfSBjb3JyZXNwb25kaW5nIHRvIHRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUaGlzIGlzIHVzZWQgdG8gYWNjZXNzIGFsbCBtdWx0aS1mYWN0b3IgcHJvcGVydGllcyBhbmQgb3BlcmF0aW9ucyByZWxhdGVkIHRvIHRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBtdWx0aUZhY3Rvcih1c2VyKSB7XHJcbiAgICBjb25zdCB1c2VyTW9kdWxhciA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGlmICghbXVsdGlGYWN0b3JVc2VyQ2FjaGUuaGFzKHVzZXJNb2R1bGFyKSkge1xyXG4gICAgICAgIG11bHRpRmFjdG9yVXNlckNhY2hlLnNldCh1c2VyTW9kdWxhciwgTXVsdGlGYWN0b3JVc2VySW1wbC5fZnJvbVVzZXIodXNlck1vZHVsYXIpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBtdWx0aUZhY3RvclVzZXJDYWNoZS5nZXQodXNlck1vZHVsYXIpO1xyXG59XG5cbmNvbnN0IFNUT1JBR0VfQVZBSUxBQkxFX0tFWSA9ICdfX3Nhayc7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIFRoZXJlIGFyZSB0d28gZGlmZmVyZW50IGJyb3dzZXIgcGVyc2lzdGVuY2UgdHlwZXM6IGxvY2FsIGFuZCBzZXNzaW9uLlxyXG4vLyBCb3RoIGhhdmUgdGhlIHNhbWUgaW1wbGVtZW50YXRpb24gYnV0IHVzZSBhIGRpZmZlcmVudCB1bmRlcmx5aW5nIHN0b3JhZ2VcclxuLy8gb2JqZWN0LlxyXG5jbGFzcyBCcm93c2VyUGVyc2lzdGVuY2VDbGFzcyB7XHJcbiAgICBjb25zdHJ1Y3RvcihzdG9yYWdlUmV0cmlldmVyLCB0eXBlKSB7XHJcbiAgICAgICAgdGhpcy5zdG9yYWdlUmV0cmlldmVyID0gc3RvcmFnZVJldHJpZXZlcjtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgfVxyXG4gICAgX2lzQXZhaWxhYmxlKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5zdG9yYWdlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbShTVE9SQUdFX0FWQUlMQUJMRV9LRVksICcxJyk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RvcmFnZS5yZW1vdmVJdGVtKFNUT1JBR0VfQVZBSUxBQkxFX0tFWSk7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfc2V0KGtleSwgdmFsdWUpIHtcclxuICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfVxyXG4gICAgX2dldChrZXkpIHtcclxuICAgICAgICBjb25zdCBqc29uID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGpzb24gPyBKU09OLnBhcnNlKGpzb24pIDogbnVsbCk7XHJcbiAgICB9XHJcbiAgICBfcmVtb3ZlKGtleSkge1xyXG4gICAgICAgIHRoaXMuc3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfVxyXG4gICAgZ2V0IHN0b3JhZ2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RvcmFnZVJldHJpZXZlcigpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9pZnJhbWVDYW5ub3RTeW5jV2ViU3RvcmFnZSgpIHtcclxuICAgIGNvbnN0IHVhID0gZ2V0VUEoKTtcclxuICAgIHJldHVybiBfaXNTYWZhcmkodWEpIHx8IF9pc0lPUyh1YSk7XHJcbn1cclxuLy8gVGhlIHBvbGxpbmcgcGVyaW9kIGluIGNhc2UgZXZlbnRzIGFyZSBub3Qgc3VwcG9ydGVkXHJcbmNvbnN0IF9QT0xMSU5HX0lOVEVSVkFMX01TJDEgPSAxMDAwO1xyXG4vLyBUaGUgSUUgMTAgbG9jYWxTdG9yYWdlIGNyb3NzIHRhYiBzeW5jaHJvbml6YXRpb24gZGVsYXkgaW4gbWlsbGlzZWNvbmRzXHJcbmNvbnN0IElFMTBfTE9DQUxfU1RPUkFHRV9TWU5DX0RFTEFZID0gMTA7XHJcbmNsYXNzIEJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlIGV4dGVuZHMgQnJvd3NlclBlcnNpc3RlbmNlQ2xhc3Mge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKCkgPT4gd2luZG93LmxvY2FsU3RvcmFnZSwgXCJMT0NBTFwiIC8qIExPQ0FMICovKTtcclxuICAgICAgICB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyID0gKGV2ZW50LCBwb2xsKSA9PiB0aGlzLm9uU3RvcmFnZUV2ZW50KGV2ZW50LCBwb2xsKTtcclxuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IHt9O1xyXG4gICAgICAgIHRoaXMubG9jYWxDYWNoZSA9IHt9O1xyXG4gICAgICAgIC8vIHNldFRpbWVvdXQgcmV0dXJuIHZhbHVlIGlzIHBsYXRmb3JtIHNwZWNpZmljXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICB0aGlzLnBvbGxUaW1lciA9IG51bGw7XHJcbiAgICAgICAgLy8gU2FmYXJpIG9yIGlPUyBicm93c2VyIGFuZCBlbWJlZGRlZCBpbiBhbiBpZnJhbWUuXHJcbiAgICAgICAgdGhpcy5zYWZhcmlMb2NhbFN0b3JhZ2VOb3RTeW5jZWQgPSBfaWZyYW1lQ2Fubm90U3luY1dlYlN0b3JhZ2UoKSAmJiBfaXNJZnJhbWUoKTtcclxuICAgICAgICAvLyBXaGV0aGVyIHRvIHVzZSBwb2xsaW5nIGluc3RlYWQgb2YgZGVwZW5kaW5nIG9uIHdpbmRvdyBldmVudHNcclxuICAgICAgICB0aGlzLmZhbGxiYWNrVG9Qb2xsaW5nID0gX2lzTW9iaWxlQnJvd3NlcigpO1xyXG4gICAgICAgIHRoaXMuX3Nob3VsZEFsbG93TWlncmF0aW9uID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGZvckFsbENoYW5nZWRLZXlzKGNiKSB7XHJcbiAgICAgICAgLy8gQ2hlY2sgYWxsIGtleXMgd2l0aCBsaXN0ZW5lcnMgb24gdGhlbS5cclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyh0aGlzLmxpc3RlbmVycykpIHtcclxuICAgICAgICAgICAgLy8gR2V0IHZhbHVlIGZyb20gbG9jYWxTdG9yYWdlLlxyXG4gICAgICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG9sZFZhbHVlID0gdGhpcy5sb2NhbENhY2hlW2tleV07XHJcbiAgICAgICAgICAgIC8vIElmIGxvY2FsIG1hcCB2YWx1ZSBkb2VzIG5vdCBtYXRjaCwgdHJpZ2dlciBsaXN0ZW5lciB3aXRoIHN0b3JhZ2UgZXZlbnQuXHJcbiAgICAgICAgICAgIC8vIERpZmZlcmVudGlhdGUgdGhpcyBzaW11bGF0ZWQgZXZlbnQgZnJvbSB0aGUgcmVhbCBzdG9yYWdlIGV2ZW50LlxyXG4gICAgICAgICAgICBpZiAobmV3VmFsdWUgIT09IG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBjYihrZXksIG9sZFZhbHVlLCBuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBvblN0b3JhZ2VFdmVudChldmVudCwgcG9sbCA9IGZhbHNlKSB7XHJcbiAgICAgICAgLy8gS2V5IHdvdWxkIGJlIG51bGwgaW4gc29tZSBzaXR1YXRpb25zLCBsaWtlIHdoZW4gbG9jYWxTdG9yYWdlIGlzIGNsZWFyZWRcclxuICAgICAgICBpZiAoIWV2ZW50LmtleSkge1xyXG4gICAgICAgICAgICB0aGlzLmZvckFsbENoYW5nZWRLZXlzKChrZXksIF9vbGRWYWx1ZSwgbmV3VmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5TGlzdGVuZXJzKGtleSwgbmV3VmFsdWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBrZXkgPSBldmVudC5rZXk7XHJcbiAgICAgICAgLy8gQ2hlY2sgdGhlIG1lY2hhbmlzbSBob3cgdGhpcyBldmVudCB3YXMgZGV0ZWN0ZWQuXHJcbiAgICAgICAgLy8gVGhlIGZpcnN0IGV2ZW50IHdpbGwgZGljdGF0ZSB0aGUgbWVjaGFuaXNtIHRvIGJlIHVzZWQuXHJcbiAgICAgICAgaWYgKHBvbGwpIHtcclxuICAgICAgICAgICAgLy8gRW52aXJvbm1lbnQgZGV0ZWN0cyBzdG9yYWdlIGNoYW5nZXMgdmlhIHBvbGxpbmcuXHJcbiAgICAgICAgICAgIC8vIFJlbW92ZSBzdG9yYWdlIGV2ZW50IGxpc3RlbmVyIHRvIHByZXZlbnQgcG9zc2libGUgZXZlbnQgZHVwbGljYXRpb24uXHJcbiAgICAgICAgICAgIHRoaXMuZGV0YWNoTGlzdGVuZXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIEVudmlyb25tZW50IGRldGVjdHMgc3RvcmFnZSBjaGFuZ2VzIHZpYSBzdG9yYWdlIGV2ZW50IGxpc3RlbmVyLlxyXG4gICAgICAgICAgICAvLyBSZW1vdmUgcG9sbGluZyBsaXN0ZW5lciB0byBwcmV2ZW50IHBvc3NpYmxlIGV2ZW50IGR1cGxpY2F0aW9uLlxyXG4gICAgICAgICAgICB0aGlzLnN0b3BQb2xsaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFNhZmFyaSBlbWJlZGRlZCBpZnJhbWUuIFN0b3JhZ2UgZXZlbnQgd2lsbCB0cmlnZ2VyIHdpdGggdGhlIGRlbHRhXHJcbiAgICAgICAgLy8gY2hhbmdlcyBidXQgbm8gY2hhbmdlcyB3aWxsIGJlIGFwcGxpZWQgdG8gdGhlIGlmcmFtZSBsb2NhbFN0b3JhZ2UuXHJcbiAgICAgICAgaWYgKHRoaXMuc2FmYXJpTG9jYWxTdG9yYWdlTm90U3luY2VkKSB7XHJcbiAgICAgICAgICAgIC8vIEdldCBjdXJyZW50IGlmcmFtZSBwYWdlIHZhbHVlLlxyXG4gICAgICAgICAgICBjb25zdCBzdG9yZWRWYWx1ZSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcbiAgICAgICAgICAgIC8vIFZhbHVlIG5vdCBzeW5jaHJvbml6ZWQsIHN5bmNocm9uaXplIG1hbnVhbGx5LlxyXG4gICAgICAgICAgICBpZiAoZXZlbnQubmV3VmFsdWUgIT09IHN0b3JlZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQubmV3VmFsdWUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBWYWx1ZSBjaGFuZ2VkIGZyb20gY3VycmVudCB2YWx1ZS5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbShrZXksIGV2ZW50Lm5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEN1cnJlbnQgdmFsdWUgZGVsZXRlZC5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMubG9jYWxDYWNoZVtrZXldID09PSBldmVudC5uZXdWYWx1ZSAmJiAhcG9sbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQWxyZWFkeSBkZXRlY3RlZCBhbmQgcHJvY2Vzc2VkLCBkbyBub3QgdHJpZ2dlciBsaXN0ZW5lcnMgYWdhaW4uXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdHJpZ2dlckxpc3RlbmVycyA9ICgpID0+IHtcclxuICAgICAgICAgICAgLy8gS2VlcCBsb2NhbCBtYXAgdXAgdG8gZGF0ZSBpbiBjYXNlIHN0b3JhZ2UgZXZlbnQgaXMgdHJpZ2dlcmVkIGJlZm9yZVxyXG4gICAgICAgICAgICAvLyBwb2xsLlxyXG4gICAgICAgICAgICBjb25zdCBzdG9yZWRWYWx1ZSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcbiAgICAgICAgICAgIGlmICghcG9sbCAmJiB0aGlzLmxvY2FsQ2FjaGVba2V5XSA9PT0gc3RvcmVkVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIC8vIFJlYWwgc3RvcmFnZSBldmVudCB3aGljaCBoYXMgYWxyZWFkeSBiZWVuIGRldGVjdGVkLCBkbyBub3RoaW5nLlxyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBzZWVtcyB0byB0cmlnZ2VyIGluIHNvbWUgSUUgYnJvd3NlcnMgZm9yIHNvbWUgcmVhc29uLlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubm90aWZ5TGlzdGVuZXJzKGtleSwgc3RvcmVkVmFsdWUpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3Qgc3RvcmVkVmFsdWUgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xyXG4gICAgICAgIGlmIChfaXNJRTEwKCkgJiZcclxuICAgICAgICAgICAgc3RvcmVkVmFsdWUgIT09IGV2ZW50Lm5ld1ZhbHVlICYmXHJcbiAgICAgICAgICAgIGV2ZW50Lm5ld1ZhbHVlICE9PSBldmVudC5vbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICAvLyBJRSAxMCBoYXMgdGhpcyB3ZWlyZCBidWcgd2hlcmUgYSBzdG9yYWdlIGV2ZW50IHdvdWxkIHRyaWdnZXIgd2l0aCB0aGVcclxuICAgICAgICAgICAgLy8gY29ycmVjdCBrZXksIG9sZFZhbHVlIGFuZCBuZXdWYWx1ZSBidXQgbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KSBkb2VzXHJcbiAgICAgICAgICAgIC8vIG5vdCB5aWVsZCB0aGUgdXBkYXRlZCB2YWx1ZSB1bnRpbCBhIGZldyBtaWxsaXNlY29uZHMuIFRoaXMgZW5zdXJlc1xyXG4gICAgICAgICAgICAvLyB0aGlzIHJlY292ZXJzIGZyb20gdGhhdCBzaXR1YXRpb24uXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQodHJpZ2dlckxpc3RlbmVycywgSUUxMF9MT0NBTF9TVE9SQUdFX1NZTkNfREVMQVkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdHJpZ2dlckxpc3RlbmVycygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG5vdGlmeUxpc3RlbmVycyhrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5sb2NhbENhY2hlW2tleV0gPSB2YWx1ZTtcclxuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVyc1trZXldO1xyXG4gICAgICAgIGlmIChsaXN0ZW5lcnMpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiBBcnJheS5mcm9tKGxpc3RlbmVycykpIHtcclxuICAgICAgICAgICAgICAgIGxpc3RlbmVyKHZhbHVlID8gSlNPTi5wYXJzZSh2YWx1ZSkgOiB2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzdGFydFBvbGxpbmcoKSB7XHJcbiAgICAgICAgdGhpcy5zdG9wUG9sbGluZygpO1xyXG4gICAgICAgIHRoaXMucG9sbFRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmZvckFsbENoYW5nZWRLZXlzKChrZXksIG9sZFZhbHVlLCBuZXdWYWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblN0b3JhZ2VFdmVudChuZXcgU3RvcmFnZUV2ZW50KCdzdG9yYWdlJywge1xyXG4gICAgICAgICAgICAgICAgICAgIGtleSxcclxuICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZVxyXG4gICAgICAgICAgICAgICAgfSksIFxyXG4gICAgICAgICAgICAgICAgLyogcG9sbCAqLyB0cnVlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSwgX1BPTExJTkdfSU5URVJWQUxfTVMkMSk7XHJcbiAgICB9XHJcbiAgICBzdG9wUG9sbGluZygpIHtcclxuICAgICAgICBpZiAodGhpcy5wb2xsVGltZXIpIHtcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnBvbGxUaW1lcik7XHJcbiAgICAgICAgICAgIHRoaXMucG9sbFRpbWVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBhdHRhY2hMaXN0ZW5lcigpIHtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc3RvcmFnZScsIHRoaXMuYm91bmRFdmVudEhhbmRsZXIpO1xyXG4gICAgfVxyXG4gICAgZGV0YWNoTGlzdGVuZXIoKSB7XHJcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N0b3JhZ2UnLCB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyKTtcclxuICAgIH1cclxuICAgIF9hZGRMaXN0ZW5lcihrZXksIGxpc3RlbmVyKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMubGlzdGVuZXJzKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgLy8gV2hldGhlciBicm93c2VyIGNhbiBkZXRlY3Qgc3RvcmFnZSBldmVudCB3aGVuIGl0IGhhZCBhbHJlYWR5IGJlZW4gcHVzaGVkIHRvIHRoZSBiYWNrZ3JvdW5kLlxyXG4gICAgICAgICAgICAvLyBUaGlzIG1heSBoYXBwZW4gaW4gc29tZSBtb2JpbGUgYnJvd3NlcnMuIEEgbG9jYWxTdG9yYWdlIGNoYW5nZSBpbiB0aGUgZm9yZWdyb3VuZCB3aW5kb3dcclxuICAgICAgICAgICAgLy8gd2lsbCBub3QgYmUgZGV0ZWN0ZWQgaW4gdGhlIGJhY2tncm91bmQgd2luZG93IHZpYSB0aGUgc3RvcmFnZSBldmVudC5cclxuICAgICAgICAgICAgLy8gVGhpcyB3YXMgZGV0ZWN0ZWQgaW4gaU9TIDcueCBtb2JpbGUgYnJvd3NlcnNcclxuICAgICAgICAgICAgaWYgKHRoaXMuZmFsbGJhY2tUb1BvbGxpbmcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRQb2xsaW5nKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmF0dGFjaExpc3RlbmVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmxpc3RlbmVyc1trZXldKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzW2tleV0gPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgICAgIC8vIFBvcHVsYXRlIHRoZSBjYWNoZSB0byBhdm9pZCBzcHVyaW91c2x5IHRyaWdnZXJpbmcgb24gZmlyc3QgcG9sbC5cclxuICAgICAgICAgICAgdGhpcy5sb2NhbENhY2hlW2tleV0gPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxpc3RlbmVyc1trZXldLmFkZChsaXN0ZW5lcik7XHJcbiAgICB9XHJcbiAgICBfcmVtb3ZlTGlzdGVuZXIoa2V5LCBsaXN0ZW5lcikge1xyXG4gICAgICAgIGlmICh0aGlzLmxpc3RlbmVyc1trZXldKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzW2tleV0uZGVsZXRlKGxpc3RlbmVyKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMubGlzdGVuZXJzW2tleV0uc2l6ZSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMubGlzdGVuZXJzW2tleV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMubGlzdGVuZXJzKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5kZXRhY2hMaXN0ZW5lcigpO1xyXG4gICAgICAgICAgICB0aGlzLnN0b3BQb2xsaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gVXBkYXRlIGxvY2FsIGNhY2hlIG9uIGJhc2Ugb3BlcmF0aW9uczpcclxuICAgIGFzeW5jIF9zZXQoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIGF3YWl0IHN1cGVyLl9zZXQoa2V5LCB2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5sb2NhbENhY2hlW2tleV0gPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfZ2V0KGtleSkge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgc3VwZXIuX2dldChrZXkpO1xyXG4gICAgICAgIHRoaXMubG9jYWxDYWNoZVtrZXldID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9yZW1vdmUoa2V5KSB7XHJcbiAgICAgICAgYXdhaXQgc3VwZXIuX3JlbW92ZShrZXkpO1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLmxvY2FsQ2FjaGVba2V5XTtcclxuICAgIH1cclxufVxyXG5Ccm93c2VyTG9jYWxQZXJzaXN0ZW5jZS50eXBlID0gJ0xPQ0FMJztcclxuLyoqXHJcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBQZXJzaXN0ZW5jZX0gb2YgdHlwZSBgTE9DQUxgIHVzaW5nIGBsb2NhbFN0b3JhZ2VgXHJcbiAqIGZvciB0aGUgdW5kZXJseWluZyBzdG9yYWdlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBicm93c2VyTG9jYWxQZXJzaXN0ZW5jZSA9IEJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBCcm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlIGV4dGVuZHMgQnJvd3NlclBlcnNpc3RlbmNlQ2xhc3Mge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKCkgPT4gd2luZG93LnNlc3Npb25TdG9yYWdlLCBcIlNFU1NJT05cIiAvKiBTRVNTSU9OICovKTtcclxuICAgIH1cclxuICAgIF9hZGRMaXN0ZW5lcihfa2V5LCBfbGlzdGVuZXIpIHtcclxuICAgICAgICAvLyBMaXN0ZW5lcnMgYXJlIG5vdCBzdXBwb3J0ZWQgZm9yIHNlc3Npb24gc3RvcmFnZSBzaW5jZSBpdCBjYW5ub3QgYmUgc2hhcmVkIGFjcm9zcyB3aW5kb3dzXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgX3JlbW92ZUxpc3RlbmVyKF9rZXksIF9saXN0ZW5lcikge1xyXG4gICAgICAgIC8vIExpc3RlbmVycyBhcmUgbm90IHN1cHBvcnRlZCBmb3Igc2Vzc2lvbiBzdG9yYWdlIHNpbmNlIGl0IGNhbm5vdCBiZSBzaGFyZWQgYWNyb3NzIHdpbmRvd3NcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbn1cclxuQnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZS50eXBlID0gJ1NFU1NJT04nO1xyXG4vKipcclxuICogQW4gaW1wbGVtZW50YXRpb24gb2Yge0BsaW5rIFBlcnNpc3RlbmNlfSBvZiBgU0VTU0lPTmAgdXNpbmcgYHNlc3Npb25TdG9yYWdlYFxyXG4gKiBmb3IgdGhlIHVuZGVybHlpbmcgc3RvcmFnZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZSA9IEJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2U7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBTaGltIGZvciBQcm9taXNlLmFsbFNldHRsZWQsIG5vdGUgdGhlIHNsaWdodGx5IGRpZmZlcmVudCBmb3JtYXQgb2YgYGZ1bGZpbGxlZGAgdnMgYHN0YXR1c2AuXHJcbiAqXHJcbiAqIEBwYXJhbSBwcm9taXNlcyAtIEFycmF5IG9mIHByb21pc2VzIHRvIHdhaXQgb24uXHJcbiAqL1xyXG5mdW5jdGlvbiBfYWxsU2V0dGxlZChwcm9taXNlcykge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzLm1hcChhc3luYyAocHJvbWlzZSkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgcHJvbWlzZTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGZ1bGZpbGxlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHZhbHVlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChyZWFzb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGZ1bGZpbGxlZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICByZWFzb25cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEludGVyZmFjZSBjbGFzcyBmb3IgcmVjZWl2aW5nIG1lc3NhZ2VzLlxyXG4gKlxyXG4gKi9cclxuY2xhc3MgUmVjZWl2ZXIge1xyXG4gICAgY29uc3RydWN0b3IoZXZlbnRUYXJnZXQpIHtcclxuICAgICAgICB0aGlzLmV2ZW50VGFyZ2V0ID0gZXZlbnRUYXJnZXQ7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVyc01hcCA9IHt9O1xyXG4gICAgICAgIHRoaXMuYm91bmRFdmVudEhhbmRsZXIgPSB0aGlzLmhhbmRsZUV2ZW50LmJpbmQodGhpcyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE9idGFpbiBhbiBpbnN0YW5jZSBvZiBhIFJlY2VpdmVyIGZvciBhIGdpdmVuIGV2ZW50IHRhcmdldCwgaWYgbm9uZSBleGlzdHMgaXQgd2lsbCBiZSBjcmVhdGVkLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBldmVudFRhcmdldCAtIEFuIGV2ZW50IHRhcmdldCAoc3VjaCBhcyB3aW5kb3cgb3Igc2VsZikgdGhyb3VnaCB3aGljaCB0aGUgdW5kZXJseWluZ1xyXG4gICAgICogbWVzc2FnZXMgd2lsbCBiZSByZWNlaXZlZC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIF9nZXRJbnN0YW5jZShldmVudFRhcmdldCkge1xyXG4gICAgICAgIC8vIFRoZSByZXN1bHRzIGFyZSBzdG9yZWQgaW4gYW4gYXJyYXkgc2luY2Ugb2JqZWN0cyBjYW4ndCBiZSBrZXlzIGZvciBvdGhlclxyXG4gICAgICAgIC8vIG9iamVjdHMuIEluIGFkZGl0aW9uLCBzZXR0aW5nIGEgdW5pcXVlIHByb3BlcnR5IG9uIGFuIGV2ZW50IHRhcmdldCBhcyBhXHJcbiAgICAgICAgLy8gaGFzaCBtYXAga2V5IG1heSBub3QgYmUgYWxsb3dlZCBkdWUgdG8gQ09SUyByZXN0cmljdGlvbnMuXHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdJbnN0YW5jZSA9IHRoaXMucmVjZWl2ZXJzLmZpbmQocmVjZWl2ZXIgPT4gcmVjZWl2ZXIuaXNMaXN0ZW5pbmd0byhldmVudFRhcmdldCkpO1xyXG4gICAgICAgIGlmIChleGlzdGluZ0luc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZ0luc3RhbmNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBuZXdJbnN0YW5jZSA9IG5ldyBSZWNlaXZlcihldmVudFRhcmdldCk7XHJcbiAgICAgICAgdGhpcy5yZWNlaXZlcnMucHVzaChuZXdJbnN0YW5jZSk7XHJcbiAgICAgICAgcmV0dXJuIG5ld0luc3RhbmNlO1xyXG4gICAgfVxyXG4gICAgaXNMaXN0ZW5pbmd0byhldmVudFRhcmdldCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50VGFyZ2V0ID09PSBldmVudFRhcmdldDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogRmFucyBvdXQgYSBNZXNzYWdlRXZlbnQgdG8gdGhlIGFwcHJvcHJpYXRlIGxpc3RlbmVycy5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogU2VuZHMgYW4ge0BsaW5rIFN0YXR1cy5BQ0t9IHVwb24gcmVjZWlwdCBhbmQgYSB7QGxpbmsgU3RhdHVzLkRPTkV9IG9uY2UgYWxsIGhhbmRsZXJzIGhhdmVcclxuICAgICAqIGZpbmlzaGVkIHByb2Nlc3NpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGV2ZW50IC0gVGhlIE1lc3NhZ2VFdmVudC5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGhhbmRsZUV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZUV2ZW50ID0gZXZlbnQ7XHJcbiAgICAgICAgY29uc3QgeyBldmVudElkLCBldmVudFR5cGUsIGRhdGEgfSA9IG1lc3NhZ2VFdmVudC5kYXRhO1xyXG4gICAgICAgIGNvbnN0IGhhbmRsZXJzID0gdGhpcy5oYW5kbGVyc01hcFtldmVudFR5cGVdO1xyXG4gICAgICAgIGlmICghKGhhbmRsZXJzID09PSBudWxsIHx8IGhhbmRsZXJzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBoYW5kbGVycy5zaXplKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1lc3NhZ2VFdmVudC5wb3J0c1swXS5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgIHN0YXR1czogXCJhY2tcIiAvKiBBQ0sgKi8sXHJcbiAgICAgICAgICAgIGV2ZW50SWQsXHJcbiAgICAgICAgICAgIGV2ZW50VHlwZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IHByb21pc2VzID0gQXJyYXkuZnJvbShoYW5kbGVycykubWFwKGFzeW5jIChoYW5kbGVyKSA9PiBoYW5kbGVyKG1lc3NhZ2VFdmVudC5vcmlnaW4sIGRhdGEpKTtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9hbGxTZXR0bGVkKHByb21pc2VzKTtcclxuICAgICAgICBtZXNzYWdlRXZlbnQucG9ydHNbMF0ucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICBzdGF0dXM6IFwiZG9uZVwiIC8qIERPTkUgKi8sXHJcbiAgICAgICAgICAgIGV2ZW50SWQsXHJcbiAgICAgICAgICAgIGV2ZW50VHlwZSxcclxuICAgICAgICAgICAgcmVzcG9uc2VcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU3Vic2NyaWJlIGFuIGV2ZW50IGhhbmRsZXIgZm9yIGEgcGFydGljdWxhciBldmVudC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRUeXBlIC0gRXZlbnQgbmFtZSB0byBzdWJzY3JpYmUgdG8uXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRIYW5kbGVyIC0gVGhlIGV2ZW50IGhhbmRsZXIgd2hpY2ggc2hvdWxkIHJlY2VpdmUgdGhlIGV2ZW50cy5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIF9zdWJzY3JpYmUoZXZlbnRUeXBlLCBldmVudEhhbmRsZXIpIHtcclxuICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5oYW5kbGVyc01hcCkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRUYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMuYm91bmRFdmVudEhhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMuaGFuZGxlcnNNYXBbZXZlbnRUeXBlXSkge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZXJzTWFwW2V2ZW50VHlwZV0gPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaGFuZGxlcnNNYXBbZXZlbnRUeXBlXS5hZGQoZXZlbnRIYW5kbGVyKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVW5zdWJzY3JpYmUgYW4gZXZlbnQgaGFuZGxlciBmcm9tIGEgcGFydGljdWxhciBldmVudC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRUeXBlIC0gRXZlbnQgbmFtZSB0byB1bnN1YnNjcmliZSBmcm9tLlxyXG4gICAgICogQHBhcmFtIGV2ZW50SGFuZGxlciAtIE9wdGlub2FsIGV2ZW50IGhhbmRsZXIsIGlmIG5vbmUgcHJvdmlkZWQsIHVuc3Vic2NyaWJlIGFsbCBoYW5kbGVycyBvbiB0aGlzIGV2ZW50LlxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgX3Vuc3Vic2NyaWJlKGV2ZW50VHlwZSwgZXZlbnRIYW5kbGVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaGFuZGxlcnNNYXBbZXZlbnRUeXBlXSAmJiBldmVudEhhbmRsZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVyc01hcFtldmVudFR5cGVdLmRlbGV0ZShldmVudEhhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWV2ZW50SGFuZGxlciB8fCB0aGlzLmhhbmRsZXJzTWFwW2V2ZW50VHlwZV0uc2l6ZSA9PT0gMCkge1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5oYW5kbGVyc01hcFtldmVudFR5cGVdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5oYW5kbGVyc01hcCkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRUYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMuYm91bmRFdmVudEhhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5SZWNlaXZlci5yZWNlaXZlcnMgPSBbXTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX2dlbmVyYXRlRXZlbnRJZChwcmVmaXggPSAnJywgZGlnaXRzID0gMTApIHtcclxuICAgIGxldCByYW5kb20gPSAnJztcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGlnaXRzOyBpKyspIHtcclxuICAgICAgICByYW5kb20gKz0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHByZWZpeCArIHJhbmRvbTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogSW50ZXJmYWNlIGZvciBzZW5kaW5nIG1lc3NhZ2VzIGFuZCB3YWl0aW5nIGZvciBhIGNvbXBsZXRpb24gcmVzcG9uc2UuXHJcbiAqXHJcbiAqL1xyXG5jbGFzcyBTZW5kZXIge1xyXG4gICAgY29uc3RydWN0b3IodGFyZ2V0KSB7XHJcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVycyA9IG5ldyBTZXQoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVW5zdWJzY3JpYmUgdGhlIGhhbmRsZXIgYW5kIHJlbW92ZSBpdCBmcm9tIG91ciB0cmFja2luZyBTZXQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGhhbmRsZXIgLSBUaGUgaGFuZGxlciB0byB1bnN1YnNjcmliZS5cclxuICAgICAqL1xyXG4gICAgcmVtb3ZlTWVzc2FnZUhhbmRsZXIoaGFuZGxlcikge1xyXG4gICAgICAgIGlmIChoYW5kbGVyLm1lc3NhZ2VDaGFubmVsKSB7XHJcbiAgICAgICAgICAgIGhhbmRsZXIubWVzc2FnZUNoYW5uZWwucG9ydDEucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGhhbmRsZXIub25NZXNzYWdlKTtcclxuICAgICAgICAgICAgaGFuZGxlci5tZXNzYWdlQ2hhbm5lbC5wb3J0MS5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmhhbmRsZXJzLmRlbGV0ZShoYW5kbGVyKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU2VuZCBhIG1lc3NhZ2UgdG8gdGhlIFJlY2VpdmVyIGxvY2F0ZWQgYXQge0BsaW5rIHRhcmdldH0uXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIFdlJ2xsIGZpcnN0IHdhaXQgYSBiaXQgZm9yIGFuIEFDSyAsIGlmIHdlIGdldCBvbmUgd2Ugd2lsbCB3YWl0IHNpZ25pZmljYW50bHkgbG9uZ2VyIHVudGlsIHRoZVxyXG4gICAgICogcmVjZWl2ZXIgaGFzIGhhZCBhIGNoYW5jZSB0byBmdWxseSBwcm9jZXNzIHRoZSBldmVudC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRUeXBlIC0gVHlwZSBvZiBldmVudCB0byBzZW5kLlxyXG4gICAgICogQHBhcmFtIGRhdGEgLSBUaGUgcGF5bG9hZCBvZiB0aGUgZXZlbnQuXHJcbiAgICAgKiBAcGFyYW0gdGltZW91dCAtIFRpbWVvdXQgZm9yIHdhaXRpbmcgb24gYW4gQUNLIGZyb20gdGhlIHJlY2VpdmVyLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIEFuIGFycmF5IG9mIHNldHRsZWQgcHJvbWlzZXMgZnJvbSBhbGwgdGhlIGhhbmRsZXJzIHRoYXQgd2VyZSBsaXN0ZW5pbmcgb24gdGhlIHJlY2VpdmVyLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBfc2VuZChldmVudFR5cGUsIGRhdGEsIHRpbWVvdXQgPSA1MCAvKiBBQ0sgKi8pIHtcclxuICAgICAgICBjb25zdCBtZXNzYWdlQ2hhbm5lbCA9IHR5cGVvZiBNZXNzYWdlQ2hhbm5lbCAhPT0gJ3VuZGVmaW5lZCcgPyBuZXcgTWVzc2FnZUNoYW5uZWwoKSA6IG51bGw7XHJcbiAgICAgICAgaWYgKCFtZXNzYWdlQ2hhbm5lbCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjb25uZWN0aW9uX3VuYXZhaWxhYmxlXCIgLyogQ09OTkVDVElPTl9VTkFWQUlMQUJMRSAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE5vZGUgdGltZXJzIGFuZCBicm93c2VyIHRpbWVycyByZXR1cm4gZnVuZGFtZW50YWxseSBkaWZmZXJlbnQgdHlwZXMuXHJcbiAgICAgICAgLy8gV2UgZG9uJ3QgYWN0dWFsbHkgY2FyZSB3aGF0IHRoZSB2YWx1ZSBpcyBidXQgVFMgd29uJ3QgYWNjZXB0IHVua25vd24gYW5kXHJcbiAgICAgICAgLy8gd2UgY2FuJ3QgY2FzdCBwcm9wZXJseSBpbiBib3RoIGVudmlyb25tZW50cy5cclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgIGxldCBjb21wbGV0aW9uVGltZXI7XHJcbiAgICAgICAgbGV0IGhhbmRsZXI7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZXZlbnRJZCA9IF9nZW5lcmF0ZUV2ZW50SWQoJycsIDIwKTtcclxuICAgICAgICAgICAgbWVzc2FnZUNoYW5uZWwucG9ydDEuc3RhcnQoKTtcclxuICAgICAgICAgICAgY29uc3QgYWNrVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJ1bnN1cHBvcnRlZF9ldmVudFwiIC8qIFVOU1VQUE9SVEVEX0VWRU5UICovKSk7XHJcbiAgICAgICAgICAgIH0sIHRpbWVvdXQpO1xyXG4gICAgICAgICAgICBoYW5kbGVyID0ge1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZUNoYW5uZWwsXHJcbiAgICAgICAgICAgICAgICBvbk1lc3NhZ2UoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlRXZlbnQgPSBldmVudDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZUV2ZW50LmRhdGEuZXZlbnRJZCAhPT0gZXZlbnRJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobWVzc2FnZUV2ZW50LmRhdGEuc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhY2tcIiAvKiBBQ0sgKi86XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgcmVjZWl2ZXIgc2hvdWxkIEFDSyBmaXJzdC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChhY2tUaW1lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0aW9uVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwidGltZW91dFwiIC8qIFRJTUVPVVQgKi8pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMDAgLyogQ09NUExFVElPTiAqLyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImRvbmVcIiAvKiBET05FICovOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT25jZSB0aGUgcmVjZWl2ZXIncyBoYW5kbGVycyBhcmUgZmluaXNoZWQgd2Ugd2lsbCBnZXQgdGhlIHJlc3VsdHMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoY29tcGxldGlvblRpbWVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUobWVzc2FnZUV2ZW50LmRhdGEucmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoYWNrVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGNvbXBsZXRpb25UaW1lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwiaW52YWxpZF9yZXNwb25zZVwiIC8qIElOVkFMSURfUkVTUE9OU0UgKi8pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVycy5hZGQoaGFuZGxlcik7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VDaGFubmVsLnBvcnQxLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBoYW5kbGVyLm9uTWVzc2FnZSk7XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgICAgIGV2ZW50VHlwZSxcclxuICAgICAgICAgICAgICAgIGV2ZW50SWQsXHJcbiAgICAgICAgICAgICAgICBkYXRhXHJcbiAgICAgICAgICAgIH0sIFttZXNzYWdlQ2hhbm5lbC5wb3J0Ml0pO1xyXG4gICAgICAgIH0pLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaGFuZGxlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVNZXNzYWdlSGFuZGxlcihoYW5kbGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBMYXp5IGFjY2Vzc29yIGZvciB3aW5kb3csIHNpbmNlIHRoZSBjb21wYXQgbGF5ZXIgd29uJ3QgdHJlZSBzaGFrZSB0aGlzIG91dCxcclxuICogd2UgbmVlZCB0byBtYWtlIHN1cmUgbm90IHRvIG1lc3Mgd2l0aCB3aW5kb3cgdW5sZXNzIHdlIGhhdmUgdG9cclxuICovXHJcbmZ1bmN0aW9uIF93aW5kb3coKSB7XHJcbiAgICByZXR1cm4gd2luZG93O1xyXG59XHJcbmZ1bmN0aW9uIF9zZXRXaW5kb3dMb2NhdGlvbih1cmwpIHtcclxuICAgIF93aW5kb3coKS5sb2NhdGlvbi5ocmVmID0gdXJsO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfaXNXb3JrZXIoKSB7XHJcbiAgICByZXR1cm4gKHR5cGVvZiBfd2luZG93KClbJ1dvcmtlckdsb2JhbFNjb3BlJ10gIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgdHlwZW9mIF93aW5kb3coKVsnaW1wb3J0U2NyaXB0cyddID09PSAnZnVuY3Rpb24nKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfZ2V0QWN0aXZlU2VydmljZVdvcmtlcigpIHtcclxuICAgIGlmICghKG5hdmlnYXRvciA9PT0gbnVsbCB8fCBuYXZpZ2F0b3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyKSkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZWdpc3RyYXRpb24gPSBhd2FpdCBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWFkeTtcclxuICAgICAgICByZXR1cm4gcmVnaXN0cmF0aW9uLmFjdGl2ZTtcclxuICAgIH1cclxuICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIF9nZXRTZXJ2aWNlV29ya2VyQ29udHJvbGxlcigpIHtcclxuICAgIHZhciBfYTtcclxuICAgIHJldHVybiAoKF9hID0gbmF2aWdhdG9yID09PSBudWxsIHx8IG5hdmlnYXRvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jb250cm9sbGVyKSB8fCBudWxsO1xyXG59XHJcbmZ1bmN0aW9uIF9nZXRXb3JrZXJHbG9iYWxTY29wZSgpIHtcclxuICAgIHJldHVybiBfaXNXb3JrZXIoKSA/IHNlbGYgOiBudWxsO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IERCX05BTUUgPSAnZmlyZWJhc2VMb2NhbFN0b3JhZ2VEYic7XHJcbmNvbnN0IERCX1ZFUlNJT04gPSAxO1xyXG5jb25zdCBEQl9PQkpFQ1RTVE9SRV9OQU1FID0gJ2ZpcmViYXNlTG9jYWxTdG9yYWdlJztcclxuY29uc3QgREJfREFUQV9LRVlQQVRIID0gJ2ZiYXNlX2tleSc7XHJcbi8qKlxyXG4gKiBQcm9taXNlIHdyYXBwZXIgZm9yIElEQlJlcXVlc3RcclxuICpcclxuICogVW5mb3J0dW5hdGVseSB3ZSBjYW4ndCBjbGVhbmx5IGV4dGVuZCBQcm9taXNlPFQ+IHNpbmNlIHByb21pc2VzIGFyZSBub3QgY2FsbGFibGUgaW4gRVM2XHJcbiAqXHJcbiAqL1xyXG5jbGFzcyBEQlByb21pc2Uge1xyXG4gICAgY29uc3RydWN0b3IocmVxdWVzdCkge1xyXG4gICAgICAgIHRoaXMucmVxdWVzdCA9IHJlcXVlc3Q7XHJcbiAgICB9XHJcbiAgICB0b1Byb21pc2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Y2Nlc3MnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMucmVxdWVzdC5yZXN1bHQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KHRoaXMucmVxdWVzdC5lcnJvcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGdldE9iamVjdFN0b3JlKGRiLCBpc1JlYWRXcml0ZSkge1xyXG4gICAgcmV0dXJuIGRiXHJcbiAgICAgICAgLnRyYW5zYWN0aW9uKFtEQl9PQkpFQ1RTVE9SRV9OQU1FXSwgaXNSZWFkV3JpdGUgPyAncmVhZHdyaXRlJyA6ICdyZWFkb25seScpXHJcbiAgICAgICAgLm9iamVjdFN0b3JlKERCX09CSkVDVFNUT1JFX05BTUUpO1xyXG59XHJcbmZ1bmN0aW9uIF9kZWxldGVEYXRhYmFzZSgpIHtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIuZGVsZXRlRGF0YWJhc2UoREJfTkFNRSk7XHJcbiAgICByZXR1cm4gbmV3IERCUHJvbWlzZShyZXF1ZXN0KS50b1Byb21pc2UoKTtcclxufVxyXG5mdW5jdGlvbiBfb3BlbkRhdGFiYXNlKCkge1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKERCX05BTUUsIERCX1ZFUlNJT04pO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgKCkgPT4ge1xyXG4gICAgICAgICAgICByZWplY3QocmVxdWVzdC5lcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCd1cGdyYWRlbmVlZGVkJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkYiA9IHJlcXVlc3QucmVzdWx0O1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoREJfT0JKRUNUU1RPUkVfTkFNRSwgeyBrZXlQYXRoOiBEQl9EQVRBX0tFWVBBVEggfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignc3VjY2VzcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGIgPSByZXF1ZXN0LnJlc3VsdDtcclxuICAgICAgICAgICAgLy8gU3RyYW5nZSBidWcgdGhhdCBvY2N1cnMgaW4gRmlyZWZveCB3aGVuIG11bHRpcGxlIHRhYnMgYXJlIG9wZW5lZCBhdCB0aGVcclxuICAgICAgICAgICAgLy8gc2FtZSB0aW1lLiBUaGUgb25seSB3YXkgdG8gcmVjb3ZlciBzZWVtcyB0byBiZSBkZWxldGluZyB0aGUgZGF0YWJhc2VcclxuICAgICAgICAgICAgLy8gYW5kIHJlLWluaXRpYWxpemluZyBpdC5cclxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWpzLXNkay9pc3N1ZXMvNjM0XHJcbiAgICAgICAgICAgIGlmICghZGIub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyhEQl9PQkpFQ1RTVE9SRV9OQU1FKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gTmVlZCB0byBjbG9zZSB0aGUgZGF0YWJhc2Ugb3IgZWxzZSB5b3UgZ2V0IGEgYGJsb2NrZWRgIGV2ZW50XHJcbiAgICAgICAgICAgICAgICBkYi5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgX2RlbGV0ZURhdGFiYXNlKCk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKGF3YWl0IF9vcGVuRGF0YWJhc2UoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKGRiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX3B1dE9iamVjdChkYiwga2V5LCB2YWx1ZSkge1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IGdldE9iamVjdFN0b3JlKGRiLCB0cnVlKS5wdXQoe1xyXG4gICAgICAgIFtEQl9EQVRBX0tFWVBBVEhdOiBrZXksXHJcbiAgICAgICAgdmFsdWVcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIG5ldyBEQlByb21pc2UocmVxdWVzdCkudG9Qcm9taXNlKCk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gZ2V0T2JqZWN0KGRiLCBrZXkpIHtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBnZXRPYmplY3RTdG9yZShkYiwgZmFsc2UpLmdldChrZXkpO1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IG5ldyBEQlByb21pc2UocmVxdWVzdCkudG9Qcm9taXNlKCk7XHJcbiAgICByZXR1cm4gZGF0YSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IGRhdGEudmFsdWU7XHJcbn1cclxuZnVuY3Rpb24gX2RlbGV0ZU9iamVjdChkYiwga2V5KSB7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gZ2V0T2JqZWN0U3RvcmUoZGIsIHRydWUpLmRlbGV0ZShrZXkpO1xyXG4gICAgcmV0dXJuIG5ldyBEQlByb21pc2UocmVxdWVzdCkudG9Qcm9taXNlKCk7XHJcbn1cclxuY29uc3QgX1BPTExJTkdfSU5URVJWQUxfTVMgPSA4MDA7XHJcbmNvbnN0IF9UUkFOU0FDVElPTl9SRVRSWV9DT1VOVCA9IDM7XHJcbmNsYXNzIEluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2Uge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy50eXBlID0gXCJMT0NBTFwiIC8qIExPQ0FMICovO1xyXG4gICAgICAgIHRoaXMuX3Nob3VsZEFsbG93TWlncmF0aW9uID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IHt9O1xyXG4gICAgICAgIHRoaXMubG9jYWxDYWNoZSA9IHt9O1xyXG4gICAgICAgIC8vIHNldFRpbWVvdXQgcmV0dXJuIHZhbHVlIGlzIHBsYXRmb3JtIHNwZWNpZmljXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICB0aGlzLnBvbGxUaW1lciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nV3JpdGVzID0gMDtcclxuICAgICAgICB0aGlzLnJlY2VpdmVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLnNlbmRlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlV29ya2VyUmVjZWl2ZXJBdmFpbGFibGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmFjdGl2ZVNlcnZpY2VXb3JrZXIgPSBudWxsO1xyXG4gICAgICAgIC8vIEZpcmUgJiBmb3JnZXQgdGhlIHNlcnZpY2Ugd29ya2VyIHJlZ2lzdHJhdGlvbiBhcyBpdCBtYXkgbmV2ZXIgcmVzb2x2ZVxyXG4gICAgICAgIHRoaXMuX3dvcmtlckluaXRpYWxpemF0aW9uUHJvbWlzZSA9XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZVNlcnZpY2VXb3JrZXJNZXNzYWdpbmcoKS50aGVuKCgpID0+IHsgfSwgKCkgPT4geyB9KTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9vcGVuRGIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZGIgPSBhd2FpdCBfb3BlbkRhdGFiYXNlKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGI7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfd2l0aFJldHJpZXMob3ApIHtcclxuICAgICAgICBsZXQgbnVtQXR0ZW1wdHMgPSAwO1xyXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYiA9IGF3YWl0IHRoaXMuX29wZW5EYigpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IG9wKGRiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG51bUF0dGVtcHRzKysgPiBfVFJBTlNBQ1RJT05fUkVUUllfQ09VTlQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRiLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYiA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IGNvbnNpZGVyIGFkZGluZyBleHBvbmVudGlhbCBiYWNrb2ZmXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEluZGV4ZWREQiBldmVudHMgZG8gbm90IHByb3BhZ2F0ZSBmcm9tIHRoZSBtYWluIHdpbmRvdyB0byB0aGUgd29ya2VyIGNvbnRleHQuICBXZSByZWx5IG9uIGFcclxuICAgICAqIHBvc3RNZXNzYWdlIGludGVyZmFjZSB0byBzZW5kIHRoZXNlIGV2ZW50cyB0byB0aGUgd29ya2VyIG91cnNlbHZlcy5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgaW5pdGlhbGl6ZVNlcnZpY2VXb3JrZXJNZXNzYWdpbmcoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9pc1dvcmtlcigpID8gdGhpcy5pbml0aWFsaXplUmVjZWl2ZXIoKSA6IHRoaXMuaW5pdGlhbGl6ZVNlbmRlcigpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBcyB0aGUgd29ya2VyIHdlIHNob3VsZCBsaXN0ZW4gdG8gZXZlbnRzIGZyb20gdGhlIG1haW4gd2luZG93LlxyXG4gICAgICovXHJcbiAgICBhc3luYyBpbml0aWFsaXplUmVjZWl2ZXIoKSB7XHJcbiAgICAgICAgdGhpcy5yZWNlaXZlciA9IFJlY2VpdmVyLl9nZXRJbnN0YW5jZShfZ2V0V29ya2VyR2xvYmFsU2NvcGUoKSk7XHJcbiAgICAgICAgLy8gUmVmcmVzaCBmcm9tIHBlcnNpc3RlbmNlIGlmIHdlIHJlY2VpdmUgYSBLZXlDaGFuZ2VkIG1lc3NhZ2UuXHJcbiAgICAgICAgdGhpcy5yZWNlaXZlci5fc3Vic2NyaWJlKFwia2V5Q2hhbmdlZFwiIC8qIEtFWV9DSEFOR0VEICovLCBhc3luYyAoX29yaWdpbiwgZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBrZXlzID0gYXdhaXQgdGhpcy5fcG9sbCgpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAga2V5UHJvY2Vzc2VkOiBrZXlzLmluY2x1ZGVzKGRhdGEua2V5KVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIExldCB0aGUgc2VuZGVyIGtub3cgdGhhdCB3ZSBhcmUgbGlzdGVuaW5nIHNvIHRoZXkgZ2l2ZSB1cyBtb3JlIHRpbWVvdXQuXHJcbiAgICAgICAgdGhpcy5yZWNlaXZlci5fc3Vic2NyaWJlKFwicGluZ1wiIC8qIFBJTkcgKi8sIGFzeW5jIChfb3JpZ2luLCBfZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gW1wia2V5Q2hhbmdlZFwiIC8qIEtFWV9DSEFOR0VEICovXTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQXMgdGhlIG1haW4gd2luZG93LCB3ZSBzaG91bGQgbGV0IHRoZSB3b3JrZXIga25vdyB3aGVuIGtleXMgY2hhbmdlIChzZXQgYW5kIHJlbW92ZSkuXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIHtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU2VydmljZVdvcmtlckNvbnRhaW5lci9yZWFkeSB8IFNlcnZpY2VXb3JrZXJDb250YWluZXIucmVhZHl9XHJcbiAgICAgKiBtYXkgbm90IHJlc29sdmUuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGluaXRpYWxpemVTZW5kZXIoKSB7XHJcbiAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICAvLyBDaGVjayB0byBzZWUgaWYgdGhlcmUncyBhbiBhY3RpdmUgc2VydmljZSB3b3JrZXIuXHJcbiAgICAgICAgdGhpcy5hY3RpdmVTZXJ2aWNlV29ya2VyID0gYXdhaXQgX2dldEFjdGl2ZVNlcnZpY2VXb3JrZXIoKTtcclxuICAgICAgICBpZiAoIXRoaXMuYWN0aXZlU2VydmljZVdvcmtlcikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2VuZGVyID0gbmV3IFNlbmRlcih0aGlzLmFjdGl2ZVNlcnZpY2VXb3JrZXIpO1xyXG4gICAgICAgIC8vIFBpbmcgdGhlIHNlcnZpY2Ugd29ya2VyIHRvIGNoZWNrIHdoYXQgZXZlbnRzIHRoZXkgY2FuIGhhbmRsZS5cclxuICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgdGhpcy5zZW5kZXIuX3NlbmQoXCJwaW5nXCIgLyogUElORyAqLywge30sIDgwMCAvKiBMT05HX0FDSyAqLyk7XHJcbiAgICAgICAgaWYgKCFyZXN1bHRzKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCgoX2EgPSByZXN1bHRzWzBdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZnVsZmlsbGVkKSAmJlxyXG4gICAgICAgICAgICAoKF9iID0gcmVzdWx0c1swXSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnZhbHVlLmluY2x1ZGVzKFwia2V5Q2hhbmdlZFwiIC8qIEtFWV9DSEFOR0VEICovKSkpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlV29ya2VyUmVjZWl2ZXJBdmFpbGFibGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogTGV0IHRoZSB3b3JrZXIga25vdyBhYm91dCBhIGNoYW5nZWQga2V5LCB0aGUgZXhhY3Qga2V5IGRvZXNuJ3QgdGVjaG5pY2FsbHkgbWF0dGVyIHNpbmNlIHRoZVxyXG4gICAgICogd29ya2VyIHdpbGwganVzdCB0cmlnZ2VyIGEgZnVsbCBzeW5jIGFueXdheS5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogRm9yIG5vdywgd2Ugb25seSBzdXBwb3J0IG9uZSBzZXJ2aWNlIHdvcmtlciBwZXIgcGFnZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ga2V5IC0gU3RvcmFnZSBrZXkgd2hpY2ggY2hhbmdlZC5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgbm90aWZ5U2VydmljZVdvcmtlcihrZXkpIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2VuZGVyIHx8XHJcbiAgICAgICAgICAgICF0aGlzLmFjdGl2ZVNlcnZpY2VXb3JrZXIgfHxcclxuICAgICAgICAgICAgX2dldFNlcnZpY2VXb3JrZXJDb250cm9sbGVyKCkgIT09IHRoaXMuYWN0aXZlU2VydmljZVdvcmtlcikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2VuZGVyLl9zZW5kKFwia2V5Q2hhbmdlZFwiIC8qIEtFWV9DSEFOR0VEICovLCB7IGtleSB9LCBcclxuICAgICAgICAgICAgLy8gVXNlIGxvbmcgdGltZW91dCBpZiByZWNlaXZlciBoYXMgcHJldmlvdXNseSByZXNwb25kZWQgdG8gYSBwaW5nIGZyb20gdXMuXHJcbiAgICAgICAgICAgIHRoaXMuc2VydmljZVdvcmtlclJlY2VpdmVyQXZhaWxhYmxlXHJcbiAgICAgICAgICAgICAgICA/IDgwMCAvKiBMT05HX0FDSyAqL1xyXG4gICAgICAgICAgICAgICAgOiA1MCAvKiBBQ0sgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgLy8gVGhpcyBpcyBhIGJlc3QgZWZmb3J0IGFwcHJvYWNoLiBJZ25vcmUgZXJyb3JzLlxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGFzeW5jIF9pc0F2YWlsYWJsZSgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAoIWluZGV4ZWREQikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGRiID0gYXdhaXQgX29wZW5EYXRhYmFzZSgpO1xyXG4gICAgICAgICAgICBhd2FpdCBfcHV0T2JqZWN0KGRiLCBTVE9SQUdFX0FWQUlMQUJMRV9LRVksICcxJyk7XHJcbiAgICAgICAgICAgIGF3YWl0IF9kZWxldGVPYmplY3QoZGIsIFNUT1JBR0VfQVZBSUxBQkxFX0tFWSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHsgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGFzeW5jIF93aXRoUGVuZGluZ1dyaXRlKHdyaXRlKSB7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nV3JpdGVzKys7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgd3JpdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7XHJcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ1dyaXRlcy0tO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGFzeW5jIF9zZXQoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl93aXRoUGVuZGluZ1dyaXRlKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fd2l0aFJldHJpZXMoKGRiKSA9PiBfcHV0T2JqZWN0KGRiLCBrZXksIHZhbHVlKSk7XHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxDYWNoZVtrZXldID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vdGlmeVNlcnZpY2VXb3JrZXIoa2V5KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9nZXQoa2V5KSB7XHJcbiAgICAgICAgY29uc3Qgb2JqID0gKGF3YWl0IHRoaXMuX3dpdGhSZXRyaWVzKChkYikgPT4gZ2V0T2JqZWN0KGRiLCBrZXkpKSk7XHJcbiAgICAgICAgdGhpcy5sb2NhbENhY2hlW2tleV0gPSBvYmo7XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuICAgIGFzeW5jIF9yZW1vdmUoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3dpdGhQZW5kaW5nV3JpdGUoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl93aXRoUmV0cmllcygoZGIpID0+IF9kZWxldGVPYmplY3QoZGIsIGtleSkpO1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5sb2NhbENhY2hlW2tleV07XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vdGlmeVNlcnZpY2VXb3JrZXIoa2V5KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9wb2xsKCkge1xyXG4gICAgICAgIC8vIFRPRE86IGNoZWNrIGlmIHdlIG5lZWQgdG8gZmFsbGJhY2sgaWYgZ2V0QWxsIGlzIG5vdCBzdXBwb3J0ZWRcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLl93aXRoUmV0cmllcygoZGIpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZ2V0QWxsUmVxdWVzdCA9IGdldE9iamVjdFN0b3JlKGRiLCBmYWxzZSkuZ2V0QWxsKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgREJQcm9taXNlKGdldEFsbFJlcXVlc3QpLnRvUHJvbWlzZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICghcmVzdWx0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgd2UgaGF2ZSBwZW5kaW5nIHdyaXRlcyBpbiBwcm9ncmVzcyBhYm9ydCwgd2UnbGwgZ2V0IHBpY2tlZCB1cCBvbiB0aGUgbmV4dCBwb2xsXHJcbiAgICAgICAgaWYgKHRoaXMucGVuZGluZ1dyaXRlcyAhPT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGtleXMgPSBbXTtcclxuICAgICAgICBjb25zdCBrZXlzSW5SZXN1bHQgPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgZm9yIChjb25zdCB7IGZiYXNlX2tleToga2V5LCB2YWx1ZSB9IG9mIHJlc3VsdCkge1xyXG4gICAgICAgICAgICBrZXlzSW5SZXN1bHQuYWRkKGtleSk7XHJcbiAgICAgICAgICAgIGlmIChKU09OLnN0cmluZ2lmeSh0aGlzLmxvY2FsQ2FjaGVba2V5XSkgIT09IEpTT04uc3RyaW5naWZ5KHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMoa2V5LCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBrZXlzLnB1c2goa2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGNvbnN0IGxvY2FsS2V5IG9mIE9iamVjdC5rZXlzKHRoaXMubG9jYWxDYWNoZSkpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubG9jYWxDYWNoZVtsb2NhbEtleV0gJiYgIWtleXNJblJlc3VsdC5oYXMobG9jYWxLZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBEZWxldGVkXHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeUxpc3RlbmVycyhsb2NhbEtleSwgbnVsbCk7XHJcbiAgICAgICAgICAgICAgICBrZXlzLnB1c2gobG9jYWxLZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBrZXlzO1xyXG4gICAgfVxyXG4gICAgbm90aWZ5TGlzdGVuZXJzKGtleSwgbmV3VmFsdWUpIHtcclxuICAgICAgICB0aGlzLmxvY2FsQ2FjaGVba2V5XSA9IG5ld1ZhbHVlO1xyXG4gICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzW2tleV07XHJcbiAgICAgICAgaWYgKGxpc3RlbmVycykge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIEFycmF5LmZyb20obGlzdGVuZXJzKSkge1xyXG4gICAgICAgICAgICAgICAgbGlzdGVuZXIobmV3VmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc3RhcnRQb2xsaW5nKCkge1xyXG4gICAgICAgIHRoaXMuc3RvcFBvbGxpbmcoKTtcclxuICAgICAgICB0aGlzLnBvbGxUaW1lciA9IHNldEludGVydmFsKGFzeW5jICgpID0+IHRoaXMuX3BvbGwoKSwgX1BPTExJTkdfSU5URVJWQUxfTVMpO1xyXG4gICAgfVxyXG4gICAgc3RvcFBvbGxpbmcoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucG9sbFRpbWVyKSB7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5wb2xsVGltZXIpO1xyXG4gICAgICAgICAgICB0aGlzLnBvbGxUaW1lciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX2FkZExpc3RlbmVyKGtleSwgbGlzdGVuZXIpIHtcclxuICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5saXN0ZW5lcnMpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXJ0UG9sbGluZygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMubGlzdGVuZXJzW2tleV0pIHtcclxuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnNba2V5XSA9IG5ldyBTZXQoKTtcclxuICAgICAgICAgICAgLy8gUG9wdWxhdGUgdGhlIGNhY2hlIHRvIGF2b2lkIHNwdXJpb3VzbHkgdHJpZ2dlcmluZyBvbiBmaXJzdCBwb2xsLlxyXG4gICAgICAgICAgICB2b2lkIHRoaXMuX2dldChrZXkpOyAvLyBUaGlzIGNhbiBoYXBwZW4gaW4gdGhlIGJhY2tncm91bmQgYXN5bmMgYW5kIHdlIGNhbiByZXR1cm4gaW1tZWRpYXRlbHkuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzW2tleV0uYWRkKGxpc3RlbmVyKTtcclxuICAgIH1cclxuICAgIF9yZW1vdmVMaXN0ZW5lcihrZXksIGxpc3RlbmVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubGlzdGVuZXJzW2tleV0pIHtcclxuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnNba2V5XS5kZWxldGUobGlzdGVuZXIpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5saXN0ZW5lcnNba2V5XS5zaXplID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5saXN0ZW5lcnNba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5saXN0ZW5lcnMpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnN0b3BQb2xsaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbkluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2UudHlwZSA9ICdMT0NBTCc7XHJcbi8qKlxyXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgUGVyc2lzdGVuY2V9IG9mIHR5cGUgYExPQ0FMYCB1c2luZyBgaW5kZXhlZERCYFxyXG4gKiBmb3IgdGhlIHVuZGVybHlpbmcgc3RvcmFnZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgaW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZSA9IEluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2U7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIHN0YXJ0U2lnbkluUGhvbmVNZmEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92Mi9hY2NvdW50cy9tZmFTaWduSW46c3RhcnRcIiAvKiBTVEFSVF9QSE9ORV9NRkFfU0lHTl9JTiAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxyXG5mdW5jdGlvbiBmaW5hbGl6ZVNpZ25JblBob25lTWZhKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjIvYWNjb3VudHMvbWZhU2lnbkluOmZpbmFsaXplXCIgLyogRklOQUxJWkVfUEhPTkVfTUZBX1NJR05fSU4gKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ2V0UmVjYXB0Y2hhUGFyYW1zKGF1dGgpIHtcclxuICAgIHJldHVybiAoKGF3YWl0IF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIkdFVFwiIC8qIEdFVCAqLywgXCIvdjEvcmVjYXB0Y2hhUGFyYW1zXCIgLyogR0VUX1JFQ0FQVENIQV9QQVJBTSAqLykpLnJlY2FwdGNoYVNpdGVLZXkgfHwgJycpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGdldFNjcmlwdFBhcmVudEVsZW1lbnQoKSB7XHJcbiAgICB2YXIgX2EsIF9iO1xyXG4gICAgcmV0dXJuIChfYiA9IChfYSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJykpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYVswXSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogZG9jdW1lbnQ7XHJcbn1cclxuZnVuY3Rpb24gX2xvYWRKUyh1cmwpIHtcclxuICAgIC8vIFRPRE86IGNvbnNpZGVyIGFkZGluZyB0aW1lb3V0IHN1cHBvcnQgJiBjYW5jZWxsYXRpb25cclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3NyYycsIHVybCk7XHJcbiAgICAgICAgZWwub25sb2FkID0gcmVzb2x2ZTtcclxuICAgICAgICBlbC5vbmVycm9yID0gZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gX2NyZWF0ZUVycm9yKFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgICAgIGVycm9yLmN1c3RvbURhdGEgPSBlO1xyXG4gICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgZWwudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnO1xyXG4gICAgICAgIGVsLmNoYXJzZXQgPSAnVVRGLTgnO1xyXG4gICAgICAgIGdldFNjcmlwdFBhcmVudEVsZW1lbnQoKS5hcHBlbmRDaGlsZChlbCk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBfZ2VuZXJhdGVDYWxsYmFja05hbWUocHJlZml4KSB7XHJcbiAgICByZXR1cm4gYF9fJHtwcmVmaXh9JHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwKX1gO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IF9TT0xWRV9USU1FX01TID0gNTAwO1xyXG5jb25zdCBfRVhQSVJBVElPTl9USU1FX01TID0gNjAwMDA7XHJcbmNvbnN0IF9XSURHRVRfSURfU1RBUlQgPSAxMDAwMDAwMDAwMDAwO1xyXG5jbGFzcyBNb2NrUmVDYXB0Y2hhIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgpIHtcclxuICAgICAgICB0aGlzLmF1dGggPSBhdXRoO1xyXG4gICAgICAgIHRoaXMuY291bnRlciA9IF9XSURHRVRfSURfU1RBUlQ7XHJcbiAgICAgICAgdGhpcy5fd2lkZ2V0cyA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICAgIHJlbmRlcihjb250YWluZXIsIHBhcmFtZXRlcnMpIHtcclxuICAgICAgICBjb25zdCBpZCA9IHRoaXMuY291bnRlcjtcclxuICAgICAgICB0aGlzLl93aWRnZXRzLnNldChpZCwgbmV3IE1vY2tXaWRnZXQoY29udGFpbmVyLCB0aGlzLmF1dGgubmFtZSwgcGFyYW1ldGVycyB8fCB7fSkpO1xyXG4gICAgICAgIHRoaXMuY291bnRlcisrO1xyXG4gICAgICAgIHJldHVybiBpZDtcclxuICAgIH1cclxuICAgIHJlc2V0KG9wdFdpZGdldElkKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IGlkID0gb3B0V2lkZ2V0SWQgfHwgX1dJREdFVF9JRF9TVEFSVDtcclxuICAgICAgICB2b2lkICgoX2EgPSB0aGlzLl93aWRnZXRzLmdldChpZCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kZWxldGUoKSk7XHJcbiAgICAgICAgdGhpcy5fd2lkZ2V0cy5kZWxldGUoaWQpO1xyXG4gICAgfVxyXG4gICAgZ2V0UmVzcG9uc2Uob3B0V2lkZ2V0SWQpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgY29uc3QgaWQgPSBvcHRXaWRnZXRJZCB8fCBfV0lER0VUX0lEX1NUQVJUO1xyXG4gICAgICAgIHJldHVybiAoKF9hID0gdGhpcy5fd2lkZ2V0cy5nZXQoaWQpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZ2V0UmVzcG9uc2UoKSkgfHwgJyc7XHJcbiAgICB9XHJcbiAgICBhc3luYyBleGVjdXRlKG9wdFdpZGdldElkKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IGlkID0gb3B0V2lkZ2V0SWQgfHwgX1dJREdFVF9JRF9TVEFSVDtcclxuICAgICAgICB2b2lkICgoX2EgPSB0aGlzLl93aWRnZXRzLmdldChpZCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5leGVjdXRlKCkpO1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxufVxyXG5jbGFzcyBNb2NrV2lkZ2V0IHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lck9ySWQsIGFwcE5hbWUsIHBhcmFtcykge1xyXG4gICAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xyXG4gICAgICAgIHRoaXMudGltZXJJZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5kZWxldGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5yZXNwb25zZVRva2VuID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNsaWNrSGFuZGxlciA9ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5leGVjdXRlKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0eXBlb2YgY29udGFpbmVyT3JJZCA9PT0gJ3N0cmluZydcclxuICAgICAgICAgICAgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb250YWluZXJPcklkKVxyXG4gICAgICAgICAgICA6IGNvbnRhaW5lck9ySWQ7XHJcbiAgICAgICAgX2Fzc2VydChjb250YWluZXIsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLywgeyBhcHBOYW1lIH0pO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIHRoaXMuaXNWaXNpYmxlID0gdGhpcy5wYXJhbXMuc2l6ZSAhPT0gJ2ludmlzaWJsZSc7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNWaXNpYmxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXhlY3V0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0UmVzcG9uc2UoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0lmRGVsZXRlZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlc3BvbnNlVG9rZW47XHJcbiAgICB9XHJcbiAgICBkZWxldGUoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0lmRGVsZXRlZCgpO1xyXG4gICAgICAgIHRoaXMuZGVsZXRlZCA9IHRydWU7XHJcbiAgICAgICAgaWYgKHRoaXMudGltZXJJZCkge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcklkKTtcclxuICAgICAgICAgICAgdGhpcy50aW1lcklkID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlcik7XHJcbiAgICB9XHJcbiAgICBleGVjdXRlKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tJZkRlbGV0ZWQoKTtcclxuICAgICAgICBpZiAodGhpcy50aW1lcklkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50aW1lcklkID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlc3BvbnNlVG9rZW4gPSBnZW5lcmF0ZVJhbmRvbUFscGhhTnVtZXJpY1N0cmluZyg1MCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgY2FsbGJhY2ssICdleHBpcmVkLWNhbGxiYWNrJzogZXhwaXJlZENhbGxiYWNrIH0gPSB0aGlzLnBhcmFtcztcclxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHRoaXMucmVzcG9uc2VUb2tlbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy50aW1lcklkID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50aW1lcklkID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzcG9uc2VUb2tlbiA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXhwaXJlZENhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlZENhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7IH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhlY3V0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBfRVhQSVJBVElPTl9USU1FX01TKTtcclxuICAgICAgICB9LCBfU09MVkVfVElNRV9NUyk7XHJcbiAgICB9XHJcbiAgICBjaGVja0lmRGVsZXRlZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5kZWxldGVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncmVDQVBUQ0hBIG1vY2sgd2FzIGFscmVhZHkgZGVsZXRlZCEnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZ2VuZXJhdGVSYW5kb21BbHBoYU51bWVyaWNTdHJpbmcobGVuKSB7XHJcbiAgICBjb25zdCBjaGFycyA9IFtdO1xyXG4gICAgY29uc3QgYWxsb3dlZENoYXJzID0gJzEyMzQ1Njc4OTBhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaJztcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICBjaGFycy5wdXNoKGFsbG93ZWRDaGFycy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYWxsb3dlZENoYXJzLmxlbmd0aCkpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBjaGFycy5qb2luKCcnKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBSZUNhcHRjaGEgd2lsbCBsb2FkIHVzaW5nIHRoZSBzYW1lIGNhbGxiYWNrLCBzbyB0aGUgY2FsbGJhY2sgZnVuY3Rpb24gbmVlZHNcclxuLy8gdG8gYmUga2VwdCBhcm91bmRcclxuY29uc3QgX0pTTE9BRF9DQUxMQkFDSyA9IF9nZW5lcmF0ZUNhbGxiYWNrTmFtZSgncmNiJyk7XHJcbmNvbnN0IE5FVFdPUktfVElNRU9VVF9ERUxBWSA9IG5ldyBEZWxheSgzMDAwMCwgNjAwMDApO1xyXG5jb25zdCBSRUNBUFRDSEFfQkFTRSA9ICdodHRwczovL3d3dy5nb29nbGUuY29tL3JlY2FwdGNoYS9hcGkuanM/JztcclxuLyoqXHJcbiAqIExvYWRlciBmb3IgdGhlIEdSZUNhcHRjaGEgbGlicmFyeS4gVGhlcmUgc2hvdWxkIG9ubHkgZXZlciBiZSBvbmUgb2YgdGhpcy5cclxuICovXHJcbmNsYXNzIFJlQ2FwdGNoYUxvYWRlckltcGwge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5ob3N0TGFuZ3VhZ2UgPSAnJztcclxuICAgICAgICB0aGlzLmNvdW50ZXIgPSAwO1xyXG4gICAgICAgIHRoaXMubGlicmFyeVNlcGFyYXRlbHlMb2FkZWQgPSAhIV93aW5kb3coKS5ncmVjYXB0Y2hhO1xyXG4gICAgfVxyXG4gICAgbG9hZChhdXRoLCBobCA9ICcnKSB7XHJcbiAgICAgICAgX2Fzc2VydChpc0hvc3RMYW5ndWFnZVZhbGlkKGhsKSwgYXV0aCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICBpZiAodGhpcy5zaG91bGRSZXNvbHZlSW1tZWRpYXRlbHkoaGwpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoX3dpbmRvdygpLmdyZWNhcHRjaGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBuZXR3b3JrVGltZW91dCA9IF93aW5kb3coKS5zZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChfY3JlYXRlRXJyb3IoYXV0aCwgXCJuZXR3b3JrLXJlcXVlc3QtZmFpbGVkXCIgLyogTkVUV09SS19SRVFVRVNUX0ZBSUxFRCAqLykpO1xyXG4gICAgICAgICAgICB9LCBORVRXT1JLX1RJTUVPVVRfREVMQVkuZ2V0KCkpO1xyXG4gICAgICAgICAgICBfd2luZG93KClbX0pTTE9BRF9DQUxMQkFDS10gPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBfd2luZG93KCkuY2xlYXJUaW1lb3V0KG5ldHdvcmtUaW1lb3V0KTtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBfd2luZG93KClbX0pTTE9BRF9DQUxMQkFDS107XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZWNhcHRjaGEgPSBfd2luZG93KCkuZ3JlY2FwdGNoYTtcclxuICAgICAgICAgICAgICAgIGlmICghcmVjYXB0Y2hhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KF9jcmVhdGVFcnJvcihhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBXcmFwIHRoZSBncmVwdGNoYSByZW5kZXIgZnVuY3Rpb24gc28gdGhhdCB3ZSBrbm93IGlmIHRoZSBkZXZlbG9wZXIgaGFzXHJcbiAgICAgICAgICAgICAgICAvLyBjYWxsZWQgaXQgc2VwYXJhdGVseVxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVuZGVyID0gcmVjYXB0Y2hhLnJlbmRlcjtcclxuICAgICAgICAgICAgICAgIHJlY2FwdGNoYS5yZW5kZXIgPSAoY29udGFpbmVyLCBwYXJhbXMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB3aWRnZXRJZCA9IHJlbmRlcihjb250YWluZXIsIHBhcmFtcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3VudGVyKys7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpZGdldElkO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaG9zdExhbmd1YWdlID0gaGw7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlY2FwdGNoYSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IGAke1JFQ0FQVENIQV9CQVNFfT8ke3F1ZXJ5c3RyaW5nKHtcclxuICAgICAgICAgICAgICAgIG9ubG9hZDogX0pTTE9BRF9DQUxMQkFDSyxcclxuICAgICAgICAgICAgICAgIHJlbmRlcjogJ2V4cGxpY2l0JyxcclxuICAgICAgICAgICAgICAgIGhsXHJcbiAgICAgICAgICAgIH0pfWA7XHJcbiAgICAgICAgICAgIF9sb2FkSlModXJsKS5jYXRjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQobmV0d29ya1RpbWVvdXQpO1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KF9jcmVhdGVFcnJvcihhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjbGVhcmVkT25lSW5zdGFuY2UoKSB7XHJcbiAgICAgICAgdGhpcy5jb3VudGVyLS07XHJcbiAgICB9XHJcbiAgICBzaG91bGRSZXNvbHZlSW1tZWRpYXRlbHkoaGwpIHtcclxuICAgICAgICAvLyBXZSBjYW4gcmVzb2x2ZSBpbW1lZGlhdGVseSBpZjpcclxuICAgICAgICAvLyAgIOKAoiBncmVjYXB0Y2hhIGlzIGFscmVhZHkgZGVmaW5lZCBBTkQgKFxyXG4gICAgICAgIC8vICAgICAxLiB0aGUgcmVxdWVzdGVkIGxhbmd1YWdlIGNvZGVzIGFyZSB0aGUgc2FtZSBPUlxyXG4gICAgICAgIC8vICAgICAyLiB0aGVyZSBleGlzdHMgYWxyZWFkeSBhIFJlQ2FwdGNoYSBvbiB0aGUgcGFnZVxyXG4gICAgICAgIC8vICAgICAzLiB0aGUgbGlicmFyeSB3YXMgYWxyZWFkeSBsb2FkZWQgYnkgdGhlIGFwcFxyXG4gICAgICAgIC8vIEluIGNhc2VzICgyKSBhbmQgKDMpLCB3ZSBfY2FuJ3RfIHJlbG9hZCBhcyBpdCB3b3VsZCBicmVhayB0aGUgcmVjYXB0Y2hhc1xyXG4gICAgICAgIC8vIHRoYXQgYXJlIGFscmVhZHkgaW4gdGhlIHBhZ2VcclxuICAgICAgICByZXR1cm4gKCEhX3dpbmRvdygpLmdyZWNhcHRjaGEgJiZcclxuICAgICAgICAgICAgKGhsID09PSB0aGlzLmhvc3RMYW5ndWFnZSB8fFxyXG4gICAgICAgICAgICAgICAgdGhpcy5jb3VudGVyID4gMCB8fFxyXG4gICAgICAgICAgICAgICAgdGhpcy5saWJyYXJ5U2VwYXJhdGVseUxvYWRlZCkpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGlzSG9zdExhbmd1YWdlVmFsaWQoaGwpIHtcclxuICAgIHJldHVybiBobC5sZW5ndGggPD0gNiAmJiAvXlxccypbYS16QS1aMC05XFwtXSpcXHMqJC8udGVzdChobCk7XHJcbn1cclxuY2xhc3MgTW9ja1JlQ2FwdGNoYUxvYWRlckltcGwge1xyXG4gICAgYXN5bmMgbG9hZChhdXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNb2NrUmVDYXB0Y2hhKGF1dGgpO1xyXG4gICAgfVxyXG4gICAgY2xlYXJlZE9uZUluc3RhbmNlKCkgeyB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgUkVDQVBUQ0hBX1ZFUklGSUVSX1RZUEUgPSAncmVjYXB0Y2hhJztcclxuY29uc3QgREVGQVVMVF9QQVJBTVMgPSB7XHJcbiAgICB0aGVtZTogJ2xpZ2h0JyxcclxuICAgIHR5cGU6ICdpbWFnZSdcclxufTtcclxuLyoqXHJcbiAqIEFuIHtAbGluayBodHRwczovL3d3dy5nb29nbGUuY29tL3JlY2FwdGNoYS8gfCByZUNBUFRDSEF9LWJhc2VkIGFwcGxpY2F0aW9uIHZlcmlmaWVyLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBSZWNhcHRjaGFWZXJpZmllciB7XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY29udGFpbmVyT3JJZCAtIFRoZSByZUNBUFRDSEEgY29udGFpbmVyIHBhcmFtZXRlci5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogVGhpcyBoYXMgZGlmZmVyZW50IG1lYW5pbmcgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIHJlQ0FQVENIQSBpcyBoaWRkZW4gb3IgdmlzaWJsZS4gRm9yIGFcclxuICAgICAqIHZpc2libGUgcmVDQVBUQ0hBIHRoZSBjb250YWluZXIgbXVzdCBiZSBlbXB0eS4gSWYgYSBzdHJpbmcgaXMgdXNlZCwgaXQgaGFzIHRvIGNvcnJlc3BvbmQgdG9cclxuICAgICAqIGFuIGVsZW1lbnQgSUQuIFRoZSBjb3JyZXNwb25kaW5nIGVsZW1lbnQgbXVzdCBhbHNvIG11c3QgYmUgaW4gdGhlIERPTSBhdCB0aGUgdGltZSBvZlxyXG4gICAgICogaW5pdGlhbGl6YXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBhcmFtZXRlcnMgLSBUaGUgb3B0aW9uYWwgcmVDQVBUQ0hBIHBhcmFtZXRlcnMuXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIENoZWNrIHRoZSByZUNBUFRDSEEgZG9jcyBmb3IgYSBjb21wcmVoZW5zaXZlIGxpc3QuIEFsbCBwYXJhbWV0ZXJzIGFyZSBhY2NlcHRlZCBleGNlcHQgZm9yXHJcbiAgICAgKiB0aGUgc2l0ZWtleS4gRmlyZWJhc2UgQXV0aCBiYWNrZW5kIHByb3Zpc2lvbnMgYSByZUNBUFRDSEEgZm9yIGVhY2ggcHJvamVjdCBhbmQgd2lsbFxyXG4gICAgICogY29uZmlndXJlIHRoaXMgdXBvbiByZW5kZXJpbmcuIEZvciBhbiBpbnZpc2libGUgcmVDQVBUQ0hBLCBhIHNpemUga2V5IG11c3QgaGF2ZSB0aGUgdmFsdWVcclxuICAgICAqICdpbnZpc2libGUnLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBhdXRoRXh0ZXJuIC0gVGhlIGNvcnJlc3BvbmRpbmcgRmlyZWJhc2Uge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiBJZiBub25lIGlzIHByb3ZpZGVkLCB0aGUgZGVmYXVsdCBGaXJlYmFzZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UgaXMgdXNlZC4gQSBGaXJlYmFzZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2VcclxuICAgICAqIG11c3QgYmUgaW5pdGlhbGl6ZWQgd2l0aCBhbiBBUEkga2V5LCBvdGhlcndpc2UgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd24uXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lck9ySWQsIHBhcmFtZXRlcnMgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1BBUkFNUyksIGF1dGhFeHRlcm4pIHtcclxuICAgICAgICB0aGlzLnBhcmFtZXRlcnMgPSBwYXJhbWV0ZXJzO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBhcHBsaWNhdGlvbiB2ZXJpZmllciB0eXBlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJlbWFya3NcclxuICAgICAgICAgKiBGb3IgYSByZUNBUFRDSEEgdmVyaWZpZXIsIHRoaXMgaXMgJ3JlY2FwdGNoYScuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy50eXBlID0gUkVDQVBUQ0hBX1ZFUklGSUVSX1RZUEU7XHJcbiAgICAgICAgdGhpcy5kZXN0cm95ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLndpZGdldElkID0gbnVsbDtcclxuICAgICAgICB0aGlzLnRva2VuQ2hhbmdlTGlzdGVuZXJzID0gbmV3IFNldCgpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyUHJvbWlzZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5yZWNhcHRjaGEgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IF9jYXN0QXV0aChhdXRoRXh0ZXJuKTtcclxuICAgICAgICB0aGlzLmlzSW52aXNpYmxlID0gdGhpcy5wYXJhbWV0ZXJzLnNpemUgPT09ICdpbnZpc2libGUnO1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJywgdGhpcy5hdXRoLCBcIm9wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnRcIiAvKiBPUEVSQVRJT05fTk9UX1NVUFBPUlRFRCAqLyk7XHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdHlwZW9mIGNvbnRhaW5lck9ySWQgPT09ICdzdHJpbmcnXHJcbiAgICAgICAgICAgID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29udGFpbmVyT3JJZClcclxuICAgICAgICAgICAgOiBjb250YWluZXJPcklkO1xyXG4gICAgICAgIF9hc3NlcnQoY29udGFpbmVyLCB0aGlzLmF1dGgsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJzLmNhbGxiYWNrID0gdGhpcy5tYWtlVG9rZW5DYWxsYmFjayh0aGlzLnBhcmFtZXRlcnMuY2FsbGJhY2spO1xyXG4gICAgICAgIHRoaXMuX3JlY2FwdGNoYUxvYWRlciA9IHRoaXMuYXV0aC5zZXR0aW5ncy5hcHBWZXJpZmljYXRpb25EaXNhYmxlZEZvclRlc3RpbmdcclxuICAgICAgICAgICAgPyBuZXcgTW9ja1JlQ2FwdGNoYUxvYWRlckltcGwoKVxyXG4gICAgICAgICAgICA6IG5ldyBSZUNhcHRjaGFMb2FkZXJJbXBsKCk7XHJcbiAgICAgICAgdGhpcy52YWxpZGF0ZVN0YXJ0aW5nU3RhdGUoKTtcclxuICAgICAgICAvLyBUT0RPOiBGaWd1cmUgb3V0IGlmIHNkayB2ZXJzaW9uIGlzIG5lZWRlZFxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBXYWl0cyBmb3IgdGhlIHVzZXIgdG8gc29sdmUgdGhlIHJlQ0FQVENIQSBhbmQgcmVzb2x2ZXMgd2l0aCB0aGUgcmVDQVBUQ0hBIHRva2VuLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSBmb3IgdGhlIHJlQ0FQVENIQSB0b2tlbi5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgdmVyaWZ5KCkge1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90RGVzdHJveWVkKCk7XHJcbiAgICAgICAgY29uc3QgaWQgPSBhd2FpdCB0aGlzLnJlbmRlcigpO1xyXG4gICAgICAgIGNvbnN0IHJlY2FwdGNoYSA9IHRoaXMuZ2V0QXNzZXJ0ZWRSZWNhcHRjaGEoKTtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IHJlY2FwdGNoYS5nZXRSZXNwb25zZShpZCk7XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0b2tlbkNoYW5nZSA9ICh0b2tlbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0b2tlbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gSWdub3JlIHRva2VuIGV4cGlyYXRpb25zLlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy50b2tlbkNoYW5nZUxpc3RlbmVycy5kZWxldGUodG9rZW5DaGFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0b2tlbik7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMudG9rZW5DaGFuZ2VMaXN0ZW5lcnMuYWRkKHRva2VuQ2hhbmdlKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNJbnZpc2libGUpIHtcclxuICAgICAgICAgICAgICAgIHJlY2FwdGNoYS5leGVjdXRlKGlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW5kZXJzIHRoZSByZUNBUFRDSEEgd2lkZ2V0IG9uIHRoZSBwYWdlLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHJlQ0FQVENIQSB3aWRnZXQgSUQuXHJcbiAgICAgKi9cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLmFzc2VydE5vdERlc3Ryb3llZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAvLyBUaGlzIG1ldGhvZCByZXR1cm5zIGEgcHJvbWlzZS4gU2luY2UgaXQncyBub3QgYXN5bmMgKHdlIHdhbnQgdG8gcmV0dXJuIHRoZVxyXG4gICAgICAgICAgICAvLyBfc2FtZV8gcHJvbWlzZSBpZiByZW5kZXJpbmcgaXMgc3RpbGwgb2NjdXJyaW5nKSwgdGhlIEFQSSBzdXJmYWNlIHNob3VsZFxyXG4gICAgICAgICAgICAvLyByZWplY3Qgd2l0aCB0aGUgZXJyb3IgcmF0aGVyIHRoYW4ganVzdCB0aHJvd1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnJlbmRlclByb21pc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyUHJvbWlzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9taXNlID0gdGhpcy5tYWtlUmVuZGVyUHJvbWlzZSgpLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlclByb21pc2UgPSBudWxsO1xyXG4gICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlclByb21pc2U7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfcmVzZXQoKSB7XHJcbiAgICAgICAgdGhpcy5hc3NlcnROb3REZXN0cm95ZWQoKTtcclxuICAgICAgICBpZiAodGhpcy53aWRnZXRJZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmdldEFzc2VydGVkUmVjYXB0Y2hhKCkucmVzZXQodGhpcy53aWRnZXRJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDbGVhcnMgdGhlIHJlQ0FQVENIQSB3aWRnZXQgZnJvbSB0aGUgcGFnZSBhbmQgZGVzdHJveXMgdGhlIGluc3RhbmNlLlxyXG4gICAgICovXHJcbiAgICBjbGVhcigpIHtcclxuICAgICAgICB0aGlzLmFzc2VydE5vdERlc3Ryb3llZCgpO1xyXG4gICAgICAgIHRoaXMuZGVzdHJveWVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9yZWNhcHRjaGFMb2FkZXIuY2xlYXJlZE9uZUluc3RhbmNlKCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzSW52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmNoaWxkTm9kZXMuZm9yRWFjaChub2RlID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZUNoaWxkKG5vZGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB2YWxpZGF0ZVN0YXJ0aW5nU3RhdGUoKSB7XHJcbiAgICAgICAgX2Fzc2VydCghdGhpcy5wYXJhbWV0ZXJzLnNpdGVrZXksIHRoaXMuYXV0aCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICBfYXNzZXJ0KHRoaXMuaXNJbnZpc2libGUgfHwgIXRoaXMuY29udGFpbmVyLmhhc0NoaWxkTm9kZXMoKSwgdGhpcy5hdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJywgdGhpcy5hdXRoLCBcIm9wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnRcIiAvKiBPUEVSQVRJT05fTk9UX1NVUFBPUlRFRCAqLyk7XHJcbiAgICB9XHJcbiAgICBtYWtlVG9rZW5DYWxsYmFjayhleGlzdGluZykge1xyXG4gICAgICAgIHJldHVybiB0b2tlbiA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudG9rZW5DaGFuZ2VMaXN0ZW5lcnMuZm9yRWFjaChsaXN0ZW5lciA9PiBsaXN0ZW5lcih0b2tlbikpO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGV4aXN0aW5nID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBleGlzdGluZyh0b2tlbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGV4aXN0aW5nID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ2xvYmFsRnVuYyA9IF93aW5kb3coKVtleGlzdGluZ107XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGdsb2JhbEZ1bmMgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBnbG9iYWxGdW5jKHRva2VuKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBhc3NlcnROb3REZXN0cm95ZWQoKSB7XHJcbiAgICAgICAgX2Fzc2VydCghdGhpcy5kZXN0cm95ZWQsIHRoaXMuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIH1cclxuICAgIGFzeW5jIG1ha2VSZW5kZXJQcm9taXNlKCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdCgpO1xyXG4gICAgICAgIGlmICghdGhpcy53aWRnZXRJZCkge1xyXG4gICAgICAgICAgICBsZXQgY29udGFpbmVyID0gdGhpcy5jb250YWluZXI7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0ludmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ3VhcmFudGVlZEVtcHR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZ3VhcmFudGVlZEVtcHR5KTtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lciA9IGd1YXJhbnRlZWRFbXB0eTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLndpZGdldElkID0gdGhpcy5nZXRBc3NlcnRlZFJlY2FwdGNoYSgpLnJlbmRlcihjb250YWluZXIsIHRoaXMucGFyYW1ldGVycyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLndpZGdldElkO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgaW5pdCgpIHtcclxuICAgICAgICBfYXNzZXJ0KF9pc0h0dHBPckh0dHBzKCkgJiYgIV9pc1dvcmtlcigpLCB0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgYXdhaXQgZG9tUmVhZHkoKTtcclxuICAgICAgICB0aGlzLnJlY2FwdGNoYSA9IGF3YWl0IHRoaXMuX3JlY2FwdGNoYUxvYWRlci5sb2FkKHRoaXMuYXV0aCwgdGhpcy5hdXRoLmxhbmd1YWdlQ29kZSB8fCB1bmRlZmluZWQpO1xyXG4gICAgICAgIGNvbnN0IHNpdGVLZXkgPSBhd2FpdCBnZXRSZWNhcHRjaGFQYXJhbXModGhpcy5hdXRoKTtcclxuICAgICAgICBfYXNzZXJ0KHNpdGVLZXksIHRoaXMuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICB0aGlzLnBhcmFtZXRlcnMuc2l0ZWtleSA9IHNpdGVLZXk7XHJcbiAgICB9XHJcbiAgICBnZXRBc3NlcnRlZFJlY2FwdGNoYSgpIHtcclxuICAgICAgICBfYXNzZXJ0KHRoaXMucmVjYXB0Y2hhLCB0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVjYXB0Y2hhO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGRvbVJlYWR5KCkge1xyXG4gICAgbGV0IHJlc29sdmVyID0gbnVsbDtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xyXG4gICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRG9jdW1lbnQgbm90IHJlYWR5LCB3YWl0IGZvciBsb2FkIGJlZm9yZSByZXNvbHZpbmcuXHJcbiAgICAgICAgLy8gU2F2ZSByZXNvbHZlciwgc28gd2UgY2FuIHJlbW92ZSBsaXN0ZW5lciBpbiBjYXNlIGl0IHdhcyBleHRlcm5hbGx5XHJcbiAgICAgICAgLy8gY2FuY2VsbGVkLlxyXG4gICAgICAgIHJlc29sdmVyID0gKCkgPT4gcmVzb2x2ZSgpO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgcmVzb2x2ZXIpO1xyXG4gICAgfSkuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgaWYgKHJlc29sdmVyKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdsb2FkJywgcmVzb2x2ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBlO1xyXG4gICAgfSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgQ29uZmlybWF0aW9uUmVzdWx0SW1wbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih2ZXJpZmljYXRpb25JZCwgb25Db25maXJtYXRpb24pIHtcclxuICAgICAgICB0aGlzLnZlcmlmaWNhdGlvbklkID0gdmVyaWZpY2F0aW9uSWQ7XHJcbiAgICAgICAgdGhpcy5vbkNvbmZpcm1hdGlvbiA9IG9uQ29uZmlybWF0aW9uO1xyXG4gICAgfVxyXG4gICAgY29uZmlybSh2ZXJpZmljYXRpb25Db2RlKSB7XHJcbiAgICAgICAgY29uc3QgYXV0aENyZWRlbnRpYWwgPSBQaG9uZUF1dGhDcmVkZW50aWFsLl9mcm9tVmVyaWZpY2F0aW9uKHRoaXMudmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9uQ29uZmlybWF0aW9uKGF1dGhDcmVkZW50aWFsKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQXN5bmNocm9ub3VzbHkgc2lnbnMgaW4gdXNpbmcgYSBwaG9uZSBudW1iZXIuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRoaXMgbWV0aG9kIHNlbmRzIGEgY29kZSB2aWEgU01TIHRvIHRoZSBnaXZlblxyXG4gKiBwaG9uZSBudW1iZXIsIGFuZCByZXR1cm5zIGEge0BsaW5rIENvbmZpcm1hdGlvblJlc3VsdH0uIEFmdGVyIHRoZSB1c2VyXHJcbiAqIHByb3ZpZGVzIHRoZSBjb2RlIHNlbnQgdG8gdGhlaXIgcGhvbmUsIGNhbGwge0BsaW5rIENvbmZpcm1hdGlvblJlc3VsdC5jb25maXJtfVxyXG4gKiB3aXRoIHRoZSBjb2RlIHRvIHNpZ24gdGhlIHVzZXIgaW4uXHJcbiAqXHJcbiAqIEZvciBhYnVzZSBwcmV2ZW50aW9uLCB0aGlzIG1ldGhvZCBhbHNvIHJlcXVpcmVzIGEge0BsaW5rIEFwcGxpY2F0aW9uVmVyaWZpZXJ9LlxyXG4gKiBUaGlzIFNESyBpbmNsdWRlcyBhIHJlQ0FQVENIQS1iYXNlZCBpbXBsZW1lbnRhdGlvbiwge0BsaW5rIFJlY2FwdGNoYVZlcmlmaWVyfS5cclxuICogVGhpcyBmdW5jdGlvbiBjYW4gd29yayBvbiBvdGhlciBwbGF0Zm9ybXMgdGhhdCBkbyBub3Qgc3VwcG9ydCB0aGVcclxuICoge0BsaW5rIFJlY2FwdGNoYVZlcmlmaWVyfSAobGlrZSBSZWFjdCBOYXRpdmUpLCBidXQgeW91IG5lZWQgdG8gdXNlIGFcclxuICogdGhpcmQtcGFydHkge0BsaW5rIEFwcGxpY2F0aW9uVmVyaWZpZXJ9IGltcGxlbWVudGF0aW9uLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vICdyZWNhcHRjaGEtY29udGFpbmVyJyBpcyB0aGUgSUQgb2YgYW4gZWxlbWVudCBpbiB0aGUgRE9NLlxyXG4gKiBjb25zdCBhcHBsaWNhdGlvblZlcmlmaWVyID0gbmV3IGZpcmViYXNlLmF1dGguUmVjYXB0Y2hhVmVyaWZpZXIoJ3JlY2FwdGNoYS1jb250YWluZXInKTtcclxuICogY29uc3QgY29uZmlybWF0aW9uUmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aFBob25lTnVtYmVyKGF1dGgsIHBob25lTnVtYmVyLCBhcHBsaWNhdGlvblZlcmlmaWVyKTtcclxuICogLy8gT2J0YWluIGEgdmVyaWZpY2F0aW9uQ29kZSBmcm9tIHRoZSB1c2VyLlxyXG4gKiBjb25zdCBjcmVkZW50aWFsID0gYXdhaXQgY29uZmlybWF0aW9uUmVzdWx0LmNvbmZpcm0odmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBwaG9uZU51bWJlciAtIFRoZSB1c2VyJ3MgcGhvbmUgbnVtYmVyIGluIEUuMTY0IGZvcm1hdCAoZS5nLiArMTY1MDU1NTAxMDEpLlxyXG4gKiBAcGFyYW0gYXBwVmVyaWZpZXIgLSBUaGUge0BsaW5rIEFwcGxpY2F0aW9uVmVyaWZpZXJ9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoUGhvbmVOdW1iZXIoYXV0aCwgcGhvbmVOdW1iZXIsIGFwcFZlcmlmaWVyKSB7XHJcbiAgICBjb25zdCBhdXRoSW50ZXJuYWwgPSBfY2FzdEF1dGgoYXV0aCk7XHJcbiAgICBjb25zdCB2ZXJpZmljYXRpb25JZCA9IGF3YWl0IF92ZXJpZnlQaG9uZU51bWJlcihhdXRoSW50ZXJuYWwsIHBob25lTnVtYmVyLCBnZXRNb2R1bGFySW5zdGFuY2UoYXBwVmVyaWZpZXIpKTtcclxuICAgIHJldHVybiBuZXcgQ29uZmlybWF0aW9uUmVzdWx0SW1wbCh2ZXJpZmljYXRpb25JZCwgY3JlZCA9PiBzaWduSW5XaXRoQ3JlZGVudGlhbChhdXRoSW50ZXJuYWwsIGNyZWQpKTtcclxufVxyXG4vKipcclxuICogTGlua3MgdGhlIHVzZXIgYWNjb3VudCB3aXRoIHRoZSBnaXZlbiBwaG9uZSBudW1iZXIuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBwaG9uZU51bWJlciAtIFRoZSB1c2VyJ3MgcGhvbmUgbnVtYmVyIGluIEUuMTY0IGZvcm1hdCAoZS5nLiArMTY1MDU1NTAxMDEpLlxyXG4gKiBAcGFyYW0gYXBwVmVyaWZpZXIgLSBUaGUge0BsaW5rIEFwcGxpY2F0aW9uVmVyaWZpZXJ9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBsaW5rV2l0aFBob25lTnVtYmVyKHVzZXIsIHBob25lTnVtYmVyLCBhcHBWZXJpZmllcikge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgYXdhaXQgX2Fzc2VydExpbmtlZFN0YXR1cyhmYWxzZSwgdXNlckludGVybmFsLCBcInBob25lXCIgLyogUEhPTkUgKi8pO1xyXG4gICAgY29uc3QgdmVyaWZpY2F0aW9uSWQgPSBhd2FpdCBfdmVyaWZ5UGhvbmVOdW1iZXIodXNlckludGVybmFsLmF1dGgsIHBob25lTnVtYmVyLCBnZXRNb2R1bGFySW5zdGFuY2UoYXBwVmVyaWZpZXIpKTtcclxuICAgIHJldHVybiBuZXcgQ29uZmlybWF0aW9uUmVzdWx0SW1wbCh2ZXJpZmljYXRpb25JZCwgY3JlZCA9PiBsaW5rV2l0aENyZWRlbnRpYWwodXNlckludGVybmFsLCBjcmVkKSk7XHJcbn1cclxuLyoqXHJcbiAqIFJlLWF1dGhlbnRpY2F0ZXMgYSB1c2VyIHVzaW5nIGEgZnJlc2ggcGhvbmUgY3JlZGVudGlhbC5cclxuICpcclxuICogQHJlbWFya3MgVXNlIGJlZm9yZSBvcGVyYXRpb25zIHN1Y2ggYXMge0BsaW5rIHVwZGF0ZVBhc3N3b3JkfSB0aGF0IHJlcXVpcmUgdG9rZW5zIGZyb20gcmVjZW50IHNpZ24taW4gYXR0ZW1wdHMuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBwaG9uZU51bWJlciAtIFRoZSB1c2VyJ3MgcGhvbmUgbnVtYmVyIGluIEUuMTY0IGZvcm1hdCAoZS5nLiArMTY1MDU1NTAxMDEpLlxyXG4gKiBAcGFyYW0gYXBwVmVyaWZpZXIgLSBUaGUge0BsaW5rIEFwcGxpY2F0aW9uVmVyaWZpZXJ9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiByZWF1dGhlbnRpY2F0ZVdpdGhQaG9uZU51bWJlcih1c2VyLCBwaG9uZU51bWJlciwgYXBwVmVyaWZpZXIpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGNvbnN0IHZlcmlmaWNhdGlvbklkID0gYXdhaXQgX3ZlcmlmeVBob25lTnVtYmVyKHVzZXJJbnRlcm5hbC5hdXRoLCBwaG9uZU51bWJlciwgZ2V0TW9kdWxhckluc3RhbmNlKGFwcFZlcmlmaWVyKSk7XHJcbiAgICByZXR1cm4gbmV3IENvbmZpcm1hdGlvblJlc3VsdEltcGwodmVyaWZpY2F0aW9uSWQsIGNyZWQgPT4gcmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbCh1c2VySW50ZXJuYWwsIGNyZWQpKTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyBhIHZlcmlmaWNhdGlvbiBJRCB0byBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggdGhlIFNNUyBjb2RlIHRoYXQgaXMgc2VudC5cclxuICpcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF92ZXJpZnlQaG9uZU51bWJlcihhdXRoLCBvcHRpb25zLCB2ZXJpZmllcikge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgY29uc3QgcmVjYXB0Y2hhVG9rZW4gPSBhd2FpdCB2ZXJpZmllci52ZXJpZnkoKTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgX2Fzc2VydCh0eXBlb2YgcmVjYXB0Y2hhVG9rZW4gPT09ICdzdHJpbmcnLCBhdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIF9hc3NlcnQodmVyaWZpZXIudHlwZSA9PT0gUkVDQVBUQ0hBX1ZFUklGSUVSX1RZUEUsIGF1dGgsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgbGV0IHBob25lSW5mb09wdGlvbnM7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBwaG9uZUluZm9PcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IG9wdGlvbnNcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBob25lSW5mb09wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoJ3Nlc3Npb24nIGluIHBob25lSW5mb09wdGlvbnMpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IHBob25lSW5mb09wdGlvbnMuc2Vzc2lvbjtcclxuICAgICAgICAgICAgaWYgKCdwaG9uZU51bWJlcicgaW4gcGhvbmVJbmZvT3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgX2Fzc2VydChzZXNzaW9uLnR5cGUgPT09IFwiZW5yb2xsXCIgLyogRU5ST0xMICovLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzdGFydEVucm9sbFBob25lTWZhKGF1dGgsIHtcclxuICAgICAgICAgICAgICAgICAgICBpZFRva2VuOiBzZXNzaW9uLmNyZWRlbnRpYWwsXHJcbiAgICAgICAgICAgICAgICAgICAgcGhvbmVFbnJvbGxtZW50SW5mbzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwaG9uZU51bWJlcjogcGhvbmVJbmZvT3B0aW9ucy5waG9uZU51bWJlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjYXB0Y2hhVG9rZW5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5waG9uZVNlc3Npb25JbmZvLnNlc3Npb25JbmZvO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX2Fzc2VydChzZXNzaW9uLnR5cGUgPT09IFwic2lnbmluXCIgLyogU0lHTl9JTiAqLywgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1mYUVucm9sbG1lbnRJZCA9ICgoX2EgPSBwaG9uZUluZm9PcHRpb25zLm11bHRpRmFjdG9ySGludCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnVpZCkgfHxcclxuICAgICAgICAgICAgICAgICAgICBwaG9uZUluZm9PcHRpb25zLm11bHRpRmFjdG9yVWlkO1xyXG4gICAgICAgICAgICAgICAgX2Fzc2VydChtZmFFbnJvbGxtZW50SWQsIGF1dGgsIFwibWlzc2luZy1tdWx0aS1mYWN0b3ItaW5mb1wiIC8qIE1JU1NJTkdfTUZBX0lORk8gKi8pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzdGFydFNpZ25JblBob25lTWZhKGF1dGgsIHtcclxuICAgICAgICAgICAgICAgICAgICBtZmFQZW5kaW5nQ3JlZGVudGlhbDogc2Vzc2lvbi5jcmVkZW50aWFsLFxyXG4gICAgICAgICAgICAgICAgICAgIG1mYUVucm9sbG1lbnRJZCxcclxuICAgICAgICAgICAgICAgICAgICBwaG9uZVNpZ25JbkluZm86IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjYXB0Y2hhVG9rZW5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5waG9uZVJlc3BvbnNlSW5mby5zZXNzaW9uSW5mbztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgeyBzZXNzaW9uSW5mbyB9ID0gYXdhaXQgc2VuZFBob25lVmVyaWZpY2F0aW9uQ29kZShhdXRoLCB7XHJcbiAgICAgICAgICAgICAgICBwaG9uZU51bWJlcjogcGhvbmVJbmZvT3B0aW9ucy5waG9uZU51bWJlcixcclxuICAgICAgICAgICAgICAgIHJlY2FwdGNoYVRva2VuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gc2Vzc2lvbkluZm87XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdmVyaWZpZXIuX3Jlc2V0KCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFVwZGF0ZXMgdGhlIHVzZXIncyBwaG9uZSBudW1iZXIuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYFxyXG4gKiAvLyAncmVjYXB0Y2hhLWNvbnRhaW5lcicgaXMgdGhlIElEIG9mIGFuIGVsZW1lbnQgaW4gdGhlIERPTS5cclxuICogY29uc3QgYXBwbGljYXRpb25WZXJpZmllciA9IG5ldyBSZWNhcHRjaGFWZXJpZmllcigncmVjYXB0Y2hhLWNvbnRhaW5lcicpO1xyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBQaG9uZUF1dGhQcm92aWRlcihhdXRoKTtcclxuICogY29uc3QgdmVyaWZpY2F0aW9uSWQgPSBhd2FpdCBwcm92aWRlci52ZXJpZnlQaG9uZU51bWJlcignKzE2NTA1NTUwMTAxJywgYXBwbGljYXRpb25WZXJpZmllcik7XHJcbiAqIC8vIE9idGFpbiB0aGUgdmVyaWZpY2F0aW9uQ29kZSBmcm9tIHRoZSB1c2VyLlxyXG4gKiBjb25zdCBwaG9uZUNyZWRlbnRpYWwgPSBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsKHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlKTtcclxuICogYXdhaXQgdXBkYXRlUGhvbmVOdW1iZXIodXNlciwgcGhvbmVDcmVkZW50aWFsKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBjcmVkZW50aWFsIC0gQSBjcmVkZW50aWFsIGF1dGhlbnRpY2F0aW5nIHRoZSBuZXcgcGhvbmUgbnVtYmVyLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVQaG9uZU51bWJlcih1c2VyLCBjcmVkZW50aWFsKSB7XHJcbiAgICBhd2FpdCBfbGluayQxKGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKSwgY3JlZGVudGlhbCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIGFuIHtAbGluayBQaG9uZUF1dGhDcmVkZW50aWFsfS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyAncmVjYXB0Y2hhLWNvbnRhaW5lcicgaXMgdGhlIElEIG9mIGFuIGVsZW1lbnQgaW4gdGhlIERPTS5cclxuICogY29uc3QgYXBwbGljYXRpb25WZXJpZmllciA9IG5ldyBSZWNhcHRjaGFWZXJpZmllcigncmVjYXB0Y2hhLWNvbnRhaW5lcicpO1xyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBQaG9uZUF1dGhQcm92aWRlcihhdXRoKTtcclxuICogY29uc3QgdmVyaWZpY2F0aW9uSWQgPSBhd2FpdCBwcm92aWRlci52ZXJpZnlQaG9uZU51bWJlcignKzE2NTA1NTUwMTAxJywgYXBwbGljYXRpb25WZXJpZmllcik7XHJcbiAqIC8vIE9idGFpbiB0aGUgdmVyaWZpY2F0aW9uQ29kZSBmcm9tIHRoZSB1c2VyLlxyXG4gKiBjb25zdCBwaG9uZUNyZWRlbnRpYWwgPSBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsKHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlKTtcclxuICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBzaWduSW5XaXRoQ3JlZGVudGlhbChhdXRoLCBwaG9uZUNyZWRlbnRpYWwpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgUGhvbmVBdXRoUHJvdmlkZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gYXV0aCAtIFRoZSBGaXJlYmFzZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UgaW4gd2hpY2ggc2lnbi1pbnMgc2hvdWxkIG9jY3VyLlxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoYXV0aCkge1xyXG4gICAgICAgIC8qKiBBbHdheXMgc2V0IHRvIHtAbGluayBQcm92aWRlcklkfS5QSE9ORS4gKi9cclxuICAgICAgICB0aGlzLnByb3ZpZGVySWQgPSBQaG9uZUF1dGhQcm92aWRlci5QUk9WSURFUl9JRDtcclxuICAgICAgICB0aGlzLmF1dGggPSBfY2FzdEF1dGgoYXV0aCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBTdGFydHMgYSBwaG9uZSBudW1iZXIgYXV0aGVudGljYXRpb24gZmxvdyBieSBzZW5kaW5nIGEgdmVyaWZpY2F0aW9uIGNvZGUgdG8gdGhlIGdpdmVuIHBob25lXHJcbiAgICAgKiBudW1iZXIuXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IFBob25lQXV0aFByb3ZpZGVyKGF1dGgpO1xyXG4gICAgICogY29uc3QgdmVyaWZpY2F0aW9uSWQgPSBhd2FpdCBwcm92aWRlci52ZXJpZnlQaG9uZU51bWJlcihwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcik7XHJcbiAgICAgKiAvLyBPYnRhaW4gdmVyaWZpY2F0aW9uQ29kZSBmcm9tIHRoZSB1c2VyLlxyXG4gICAgICogY29uc3QgYXV0aENyZWRlbnRpYWwgPSBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsKHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlKTtcclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aCwgYXV0aENyZWRlbnRpYWwpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIEFuIGFsdGVybmF0aXZlIGZsb3cgaXMgcHJvdmlkZWQgdXNpbmcgdGhlIGBzaWduSW5XaXRoUGhvbmVOdW1iZXJgIG1ldGhvZC5cclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGNvbnN0IGNvbmZpcm1hdGlvblJlc3VsdCA9IHNpZ25JbldpdGhQaG9uZU51bWJlcihhdXRoLCBwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcik7XHJcbiAgICAgKiAvLyBPYnRhaW4gdmVyaWZpY2F0aW9uQ29kZSBmcm9tIHRoZSB1c2VyLlxyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBjb25maXJtYXRpb25SZXN1bHQuY29uZmlybSh2ZXJpZmljYXRpb25Db2RlKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwaG9uZUluZm9PcHRpb25zIC0gVGhlIHVzZXIncyB7QGxpbmsgUGhvbmVJbmZvT3B0aW9uc30uIFRoZSBwaG9uZSBudW1iZXIgc2hvdWxkIGJlIGluXHJcbiAgICAgKiBFLjE2NCBmb3JtYXQgKGUuZy4gKzE2NTA1NTUwMTAxKS5cclxuICAgICAqIEBwYXJhbSBhcHBsaWNhdGlvblZlcmlmaWVyIC0gRm9yIGFidXNlIHByZXZlbnRpb24sIHRoaXMgbWV0aG9kIGFsc28gcmVxdWlyZXMgYVxyXG4gICAgICoge0BsaW5rIEFwcGxpY2F0aW9uVmVyaWZpZXJ9LiBUaGlzIFNESyBpbmNsdWRlcyBhIHJlQ0FQVENIQS1iYXNlZCBpbXBsZW1lbnRhdGlvbixcclxuICAgICAqIHtAbGluayBSZWNhcHRjaGFWZXJpZmllcn0uXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIGZvciBhIHZlcmlmaWNhdGlvbiBJRCB0aGF0IGNhbiBiZSBwYXNzZWQgdG9cclxuICAgICAqIHtAbGluayBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsfSB0byBpZGVudGlmeSB0aGlzIGZsb3cuLlxyXG4gICAgICovXHJcbiAgICB2ZXJpZnlQaG9uZU51bWJlcihwaG9uZU9wdGlvbnMsIGFwcGxpY2F0aW9uVmVyaWZpZXIpIHtcclxuICAgICAgICByZXR1cm4gX3ZlcmlmeVBob25lTnVtYmVyKHRoaXMuYXV0aCwgcGhvbmVPcHRpb25zLCBnZXRNb2R1bGFySW5zdGFuY2UoYXBwbGljYXRpb25WZXJpZmllcikpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgcGhvbmUgYXV0aCBjcmVkZW50aWFsLCBnaXZlbiB0aGUgdmVyaWZpY2F0aW9uIElEIGZyb21cclxuICAgICAqIHtAbGluayBQaG9uZUF1dGhQcm92aWRlci52ZXJpZnlQaG9uZU51bWJlcn0gYW5kIHRoZSBjb2RlIHRoYXQgd2FzIHNlbnQgdG8gdGhlIHVzZXInc1xyXG4gICAgICogbW9iaWxlIGRldmljZS5cclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogY29uc3QgcHJvdmlkZXIgPSBuZXcgUGhvbmVBdXRoUHJvdmlkZXIoYXV0aCk7XHJcbiAgICAgKiBjb25zdCB2ZXJpZmljYXRpb25JZCA9IHByb3ZpZGVyLnZlcmlmeVBob25lTnVtYmVyKHBob25lTnVtYmVyLCBhcHBsaWNhdGlvblZlcmlmaWVyKTtcclxuICAgICAqIC8vIE9idGFpbiB2ZXJpZmljYXRpb25Db2RlIGZyb20gdGhlIHVzZXIuXHJcbiAgICAgKiBjb25zdCBhdXRoQ3JlZGVudGlhbCA9IFBob25lQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwodmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUpO1xyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBzaWduSW5XaXRoQ3JlZGVudGlhbChhdXRoLCBhdXRoQ3JlZGVudGlhbCk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogQW4gYWx0ZXJuYXRpdmUgZmxvdyBpcyBwcm92aWRlZCB1c2luZyB0aGUgYHNpZ25JbldpdGhQaG9uZU51bWJlcmAgbWV0aG9kLlxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogY29uc3QgY29uZmlybWF0aW9uUmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aFBob25lTnVtYmVyKGF1dGgsIHBob25lTnVtYmVyLCBhcHBsaWNhdGlvblZlcmlmaWVyKTtcclxuICAgICAqIC8vIE9idGFpbiB2ZXJpZmljYXRpb25Db2RlIGZyb20gdGhlIHVzZXIuXHJcbiAgICAgKiBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IGNvbmZpcm1hdGlvblJlc3VsdC5jb25maXJtKHZlcmlmaWNhdGlvbkNvZGUpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHZlcmlmaWNhdGlvbklkIC0gVGhlIHZlcmlmaWNhdGlvbiBJRCByZXR1cm5lZCBmcm9tIHtAbGluayBQaG9uZUF1dGhQcm92aWRlci52ZXJpZnlQaG9uZU51bWJlcn0uXHJcbiAgICAgKiBAcGFyYW0gdmVyaWZpY2F0aW9uQ29kZSAtIFRoZSB2ZXJpZmljYXRpb24gY29kZSBzZW50IHRvIHRoZSB1c2VyJ3MgbW9iaWxlIGRldmljZS5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgYXV0aCBwcm92aWRlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbCh2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSkge1xyXG4gICAgICAgIHJldHVybiBQaG9uZUF1dGhDcmVkZW50aWFsLl9mcm9tVmVyaWZpY2F0aW9uKHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogR2VuZXJhdGVzIGFuIHtAbGluayBBdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBVc2VyQ3JlZGVudGlhbH0uXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21SZXN1bHQodXNlckNyZWRlbnRpYWwpIHtcclxuICAgICAgICBjb25zdCBjcmVkZW50aWFsID0gdXNlckNyZWRlbnRpYWw7XHJcbiAgICAgICAgcmV0dXJuIFBob25lQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KGNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGFuIHtAbGluayBBdXRoQ3JlZGVudGlhbH0gd2hlbiBwYXNzZWQgYW4gZXJyb3IuXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqXHJcbiAgICAgKiBUaGlzIG1ldGhvZCB3b3JrcyBmb3IgZXJyb3JzIGxpa2VcclxuICAgICAqIGBhdXRoL2FjY291bnQtZXhpc3RzLXdpdGgtZGlmZmVyZW50LWNyZWRlbnRpYWxzYC4gVGhpcyBpcyB1c2VmdWwgZm9yXHJcbiAgICAgKiByZWNvdmVyaW5nIHdoZW4gYXR0ZW1wdGluZyB0byBzZXQgYSB1c2VyJ3MgcGhvbmUgbnVtYmVyIGJ1dCB0aGUgbnVtYmVyXHJcbiAgICAgKiBpbiBxdWVzdGlvbiBpcyBhbHJlYWR5IHRpZWQgdG8gYW5vdGhlciBhY2NvdW50LiBGb3IgZXhhbXBsZSwgdGhlIGZvbGxvd2luZ1xyXG4gICAgICogY29kZSB0cmllcyB0byB1cGRhdGUgdGhlIGN1cnJlbnQgdXNlcidzIHBob25lIG51bWJlciwgYW5kIGlmIHRoYXRcclxuICAgICAqIGZhaWxzLCBsaW5rcyB0aGUgdXNlciB3aXRoIHRoZSBhY2NvdW50IGFzc29jaWF0ZWQgd2l0aCB0aGF0IG51bWJlcjpcclxuICAgICAqXHJcbiAgICAgKiBgYGBqc1xyXG4gICAgICogY29uc3QgcHJvdmlkZXIgPSBuZXcgUGhvbmVBdXRoUHJvdmlkZXIoYXV0aCk7XHJcbiAgICAgKiBjb25zdCB2ZXJpZmljYXRpb25JZCA9IGF3YWl0IHByb3ZpZGVyLnZlcmlmeVBob25lTnVtYmVyKG51bWJlciwgdmVyaWZpZXIpO1xyXG4gICAgICogdHJ5IHtcclxuICAgICAqICAgY29uc3QgY29kZSA9ICcnOyAvLyBQcm9tcHQgdGhlIHVzZXIgZm9yIHRoZSB2ZXJpZmljYXRpb24gY29kZVxyXG4gICAgICogICBhd2FpdCB1cGRhdGVQaG9uZU51bWJlcihcclxuICAgICAqICAgICAgIGF1dGguY3VycmVudFVzZXIsXHJcbiAgICAgKiAgICAgICBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsKHZlcmlmaWNhdGlvbklkLCBjb2RlKSk7XHJcbiAgICAgKiB9IGNhdGNoIChlKSB7XHJcbiAgICAgKiAgIGlmIChlLmNvZGUgPT09ICdhdXRoL2FjY291bnQtZXhpc3RzLXdpdGgtZGlmZmVyZW50LWNyZWRlbnRpYWwnKSB7XHJcbiAgICAgKiAgICAgY29uc3QgY3JlZCA9IFBob25lQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tRXJyb3IoZSk7XHJcbiAgICAgKiAgICAgYXdhaXQgbGlua1dpdGhDcmVkZW50aWFsKGF1dGguY3VycmVudFVzZXIsIGNyZWQpO1xyXG4gICAgICogICB9XHJcbiAgICAgKiB9XHJcbiAgICAgKlxyXG4gICAgICogLy8gQXQgdGhpcyBwb2ludCwgYXV0aC5jdXJyZW50VXNlci5waG9uZU51bWJlciA9PT0gbnVtYmVyLlxyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGVycm9yIC0gVGhlIGVycm9yIHRvIGdlbmVyYXRlIGEgY3JlZGVudGlhbCBmcm9tLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCgoZXJyb3IuY3VzdG9tRGF0YSB8fCB7fSkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHsgX3Rva2VuUmVzcG9uc2U6IHRva2VuUmVzcG9uc2UgfSkge1xyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeyBwaG9uZU51bWJlciwgdGVtcG9yYXJ5UHJvb2YgfSA9IHRva2VuUmVzcG9uc2U7XHJcbiAgICAgICAgaWYgKHBob25lTnVtYmVyICYmIHRlbXBvcmFyeVByb29mKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQaG9uZUF1dGhDcmVkZW50aWFsLl9mcm9tVG9rZW5SZXNwb25zZShwaG9uZU51bWJlciwgdGVtcG9yYXJ5UHJvb2YpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufVxyXG4vKiogQWx3YXlzIHNldCB0byB7QGxpbmsgUHJvdmlkZXJJZH0uUEhPTkUuICovXHJcblBob25lQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lEID0gXCJwaG9uZVwiIC8qIFBIT05FICovO1xyXG4vKiogQWx3YXlzIHNldCB0byB7QGxpbmsgU2lnbkluTWV0aG9kfS5QSE9ORS4gKi9cclxuUGhvbmVBdXRoUHJvdmlkZXIuUEhPTkVfU0lHTl9JTl9NRVRIT0QgPSBcInBob25lXCIgLyogUEhPTkUgKi87XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDaG9vc2VzIGEgcG9wdXAvcmVkaXJlY3QgcmVzb2x2ZXIgdG8gdXNlLiBUaGlzIHByZWZlcnMgdGhlIG92ZXJyaWRlICh3aGljaFxyXG4gKiBpcyBkaXJlY3RseSBwYXNzZWQgaW4pLCBhbmQgZmFsbHMgYmFjayB0byB0aGUgcHJvcGVydHkgc2V0IG9uIHRoZSBhdXRoXHJcbiAqIG9iamVjdC4gSWYgbmVpdGhlciBhcmUgYXZhaWxhYmxlLCB0aGlzIGZ1bmN0aW9uIGVycm9ycyB3LyBhbiBhcmd1bWVudCBlcnJvci5cclxuICovXHJcbmZ1bmN0aW9uIF93aXRoRGVmYXVsdFJlc29sdmVyKGF1dGgsIHJlc29sdmVyT3ZlcnJpZGUpIHtcclxuICAgIGlmIChyZXNvbHZlck92ZXJyaWRlKSB7XHJcbiAgICAgICAgcmV0dXJuIF9nZXRJbnN0YW5jZShyZXNvbHZlck92ZXJyaWRlKTtcclxuICAgIH1cclxuICAgIF9hc3NlcnQoYXV0aC5fcG9wdXBSZWRpcmVjdFJlc29sdmVyLCBhdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgcmV0dXJuIGF1dGguX3BvcHVwUmVkaXJlY3RSZXNvbHZlcjtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBJZHBDcmVkZW50aWFsIGV4dGVuZHMgQXV0aENyZWRlbnRpYWwge1xyXG4gICAgY29uc3RydWN0b3IocGFyYW1zKSB7XHJcbiAgICAgICAgc3VwZXIoXCJjdXN0b21cIiAvKiBDVVNUT00gKi8sIFwiY3VzdG9tXCIgLyogQ1VTVE9NICovKTtcclxuICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcclxuICAgIH1cclxuICAgIF9nZXRJZFRva2VuUmVzcG9uc2UoYXV0aCkge1xyXG4gICAgICAgIHJldHVybiBzaWduSW5XaXRoSWRwKGF1dGgsIHRoaXMuX2J1aWxkSWRwUmVxdWVzdCgpKTtcclxuICAgIH1cclxuICAgIF9saW5rVG9JZFRva2VuKGF1dGgsIGlkVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aElkcChhdXRoLCB0aGlzLl9idWlsZElkcFJlcXVlc3QoaWRUb2tlbikpO1xyXG4gICAgfVxyXG4gICAgX2dldFJlYXV0aGVudGljYXRpb25SZXNvbHZlcihhdXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhJZHAoYXV0aCwgdGhpcy5fYnVpbGRJZHBSZXF1ZXN0KCkpO1xyXG4gICAgfVxyXG4gICAgX2J1aWxkSWRwUmVxdWVzdChpZFRva2VuKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICAgICAgcmVxdWVzdFVyaTogdGhpcy5wYXJhbXMucmVxdWVzdFVyaSxcclxuICAgICAgICAgICAgc2Vzc2lvbklkOiB0aGlzLnBhcmFtcy5zZXNzaW9uSWQsXHJcbiAgICAgICAgICAgIHBvc3RCb2R5OiB0aGlzLnBhcmFtcy5wb3N0Qm9keSxcclxuICAgICAgICAgICAgdGVuYW50SWQ6IHRoaXMucGFyYW1zLnRlbmFudElkLFxyXG4gICAgICAgICAgICBwZW5kaW5nVG9rZW46IHRoaXMucGFyYW1zLnBlbmRpbmdUb2tlbixcclxuICAgICAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWUsXHJcbiAgICAgICAgICAgIHJldHVybklkcENyZWRlbnRpYWw6IHRydWVcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmIChpZFRva2VuKSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3QuaWRUb2tlbiA9IGlkVG9rZW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXF1ZXN0O1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIF9zaWduSW4ocGFyYW1zKSB7XHJcbiAgICByZXR1cm4gX3NpZ25JbldpdGhDcmVkZW50aWFsKHBhcmFtcy5hdXRoLCBuZXcgSWRwQ3JlZGVudGlhbChwYXJhbXMpLCBwYXJhbXMuYnlwYXNzQXV0aFN0YXRlKTtcclxufVxyXG5mdW5jdGlvbiBfcmVhdXRoKHBhcmFtcykge1xyXG4gICAgY29uc3QgeyBhdXRoLCB1c2VyIH0gPSBwYXJhbXM7XHJcbiAgICBfYXNzZXJ0KHVzZXIsIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICByZXR1cm4gX3JlYXV0aGVudGljYXRlKHVzZXIsIG5ldyBJZHBDcmVkZW50aWFsKHBhcmFtcyksIHBhcmFtcy5ieXBhc3NBdXRoU3RhdGUpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9saW5rKHBhcmFtcykge1xyXG4gICAgY29uc3QgeyBhdXRoLCB1c2VyIH0gPSBwYXJhbXM7XHJcbiAgICBfYXNzZXJ0KHVzZXIsIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICByZXR1cm4gX2xpbmskMSh1c2VyLCBuZXcgSWRwQ3JlZGVudGlhbChwYXJhbXMpLCBwYXJhbXMuYnlwYXNzQXV0aFN0YXRlKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUG9wdXAgZXZlbnQgbWFuYWdlci4gSGFuZGxlcyB0aGUgcG9wdXAncyBlbnRpcmUgbGlmZWN5Y2xlOyBsaXN0ZW5zIHRvIGF1dGhcclxuICogZXZlbnRzXHJcbiAqL1xyXG5jbGFzcyBBYnN0cmFjdFBvcHVwUmVkaXJlY3RPcGVyYXRpb24ge1xyXG4gICAgY29uc3RydWN0b3IoYXV0aCwgZmlsdGVyLCByZXNvbHZlciwgdXNlciwgYnlwYXNzQXV0aFN0YXRlID0gZmFsc2UpIHtcclxuICAgICAgICB0aGlzLmF1dGggPSBhdXRoO1xyXG4gICAgICAgIHRoaXMucmVzb2x2ZXIgPSByZXNvbHZlcjtcclxuICAgICAgICB0aGlzLnVzZXIgPSB1c2VyO1xyXG4gICAgICAgIHRoaXMuYnlwYXNzQXV0aFN0YXRlID0gYnlwYXNzQXV0aFN0YXRlO1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1Byb21pc2UgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyID0gbnVsbDtcclxuICAgICAgICB0aGlzLmZpbHRlciA9IEFycmF5LmlzQXJyYXkoZmlsdGVyKSA/IGZpbHRlciA6IFtmaWx0ZXJdO1xyXG4gICAgfVxyXG4gICAgZXhlY3V0ZSgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdQcm9taXNlID0geyByZXNvbHZlLCByZWplY3QgfTtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyID0gYXdhaXQgdGhpcy5yZXNvbHZlci5faW5pdGlhbGl6ZSh0aGlzLmF1dGgpO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5vbkV4ZWN1dGlvbigpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudE1hbmFnZXIucmVnaXN0ZXJDb25zdW1lcih0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWplY3QoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGFzeW5jIG9uQXV0aEV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyB1cmxSZXNwb25zZSwgc2Vzc2lvbklkLCBwb3N0Qm9keSwgdGVuYW50SWQsIGVycm9yLCB0eXBlIH0gPSBldmVudDtcclxuICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgdGhpcy5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgICAgICAgYXV0aDogdGhpcy5hdXRoLFxyXG4gICAgICAgICAgICByZXF1ZXN0VXJpOiB1cmxSZXNwb25zZSxcclxuICAgICAgICAgICAgc2Vzc2lvbklkOiBzZXNzaW9uSWQsXHJcbiAgICAgICAgICAgIHRlbmFudElkOiB0ZW5hbnRJZCB8fCB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIHBvc3RCb2R5OiBwb3N0Qm9keSB8fCB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIHVzZXI6IHRoaXMudXNlcixcclxuICAgICAgICAgICAgYnlwYXNzQXV0aFN0YXRlOiB0aGlzLmJ5cGFzc0F1dGhTdGF0ZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGhpcy5yZXNvbHZlKGF3YWl0IHRoaXMuZ2V0SWRwVGFzayh0eXBlKShwYXJhbXMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhpcy5yZWplY3QoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgb25FcnJvcihlcnJvcikge1xyXG4gICAgICAgIHRoaXMucmVqZWN0KGVycm9yKTtcclxuICAgIH1cclxuICAgIGdldElkcFRhc2sodHlwZSkge1xyXG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwic2lnbkluVmlhUG9wdXBcIiAvKiBTSUdOX0lOX1ZJQV9QT1BVUCAqLzpcclxuICAgICAgICAgICAgY2FzZSBcInNpZ25JblZpYVJlZGlyZWN0XCIgLyogU0lHTl9JTl9WSUFfUkVESVJFQ1QgKi86XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3NpZ25JbjtcclxuICAgICAgICAgICAgY2FzZSBcImxpbmtWaWFQb3B1cFwiIC8qIExJTktfVklBX1BPUFVQICovOlxyXG4gICAgICAgICAgICBjYXNlIFwibGlua1ZpYVJlZGlyZWN0XCIgLyogTElOS19WSUFfUkVESVJFQ1QgKi86XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX2xpbms7XHJcbiAgICAgICAgICAgIGNhc2UgXCJyZWF1dGhWaWFQb3B1cFwiIC8qIFJFQVVUSF9WSUFfUE9QVVAgKi86XHJcbiAgICAgICAgICAgIGNhc2UgXCJyZWF1dGhWaWFSZWRpcmVjdFwiIC8qIFJFQVVUSF9WSUFfUkVESVJFQ1QgKi86XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3JlYXV0aDtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIF9mYWlsKHRoaXMuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXNvbHZlKGNyZWQpIHtcclxuICAgICAgICBkZWJ1Z0Fzc2VydCh0aGlzLnBlbmRpbmdQcm9taXNlLCAnUGVuZGluZyBwcm9taXNlIHdhcyBuZXZlciBzZXQnKTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdQcm9taXNlLnJlc29sdmUoY3JlZCk7XHJcbiAgICAgICAgdGhpcy51bnJlZ2lzdGVyQW5kQ2xlYW5VcCgpO1xyXG4gICAgfVxyXG4gICAgcmVqZWN0KGVycm9yKSB7XHJcbiAgICAgICAgZGVidWdBc3NlcnQodGhpcy5wZW5kaW5nUHJvbWlzZSwgJ1BlbmRpbmcgcHJvbWlzZSB3YXMgbmV2ZXIgc2V0Jyk7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgIHRoaXMudW5yZWdpc3RlckFuZENsZWFuVXAoKTtcclxuICAgIH1cclxuICAgIHVucmVnaXN0ZXJBbmRDbGVhblVwKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmV2ZW50TWFuYWdlcikge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50TWFuYWdlci51bnJlZ2lzdGVyQ29uc3VtZXIodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucGVuZGluZ1Byb21pc2UgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuY2xlYW5VcCgpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IF9QT0xMX1dJTkRPV19DTE9TRV9USU1FT1VUID0gbmV3IERlbGF5KDIwMDAsIDEwMDAwKTtcclxuLyoqXHJcbiAqIEF1dGhlbnRpY2F0ZXMgYSBGaXJlYmFzZSBjbGllbnQgdXNpbmcgYSBwb3B1cC1iYXNlZCBPQXV0aCBhdXRoZW50aWNhdGlvbiBmbG93LlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJZiBzdWNjZWVkcywgcmV0dXJucyB0aGUgc2lnbmVkIGluIHVzZXIgYWxvbmcgd2l0aCB0aGUgcHJvdmlkZXIncyBjcmVkZW50aWFsLiBJZiBzaWduIGluIHdhc1xyXG4gKiB1bnN1Y2Nlc3NmdWwsIHJldHVybnMgYW4gZXJyb3Igb2JqZWN0IGNvbnRhaW5pbmcgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgZXJyb3IuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHBvcHVwLlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBGYWNlYm9va0F1dGhQcm92aWRlcigpO1xyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKlxyXG4gKiAvLyBUaGUgc2lnbmVkLWluIHVzZXIgaW5mby5cclxuICogY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAvLyBUaGlzIGdpdmVzIHlvdSBhIEZhY2Vib29rIEFjY2VzcyBUb2tlbi5cclxuICogY29uc3QgY3JlZGVudGlhbCA9IHByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KGF1dGgsIHJlc3VsdCk7XHJcbiAqIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIHByb3ZpZGVyIC0gVGhlIHByb3ZpZGVyIHRvIGF1dGhlbnRpY2F0ZS4gVGhlIHByb3ZpZGVyIGhhcyB0byBiZSBhbiB7QGxpbmsgT0F1dGhQcm92aWRlcn0uXHJcbiAqIE5vbi1PQXV0aCBwcm92aWRlcnMgbGlrZSB7QGxpbmsgRW1haWxBdXRoUHJvdmlkZXJ9IHdpbGwgdGhyb3cgYW4gZXJyb3IuXHJcbiAqIEBwYXJhbSByZXNvbHZlciAtIEFuIGluc3RhbmNlIG9mIHtAbGluayBQb3B1cFJlZGlyZWN0UmVzb2x2ZXJ9LCBvcHRpb25hbFxyXG4gKiBpZiBhbHJlYWR5IHN1cHBsaWVkIHRvIHtAbGluayBpbml0aWFsaXplQXV0aH0gb3IgcHJvdmlkZWQgYnkge0BsaW5rIGdldEF1dGh9LlxyXG4gKlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIsIHJlc29sdmVyKSB7XHJcbiAgICBjb25zdCBhdXRoSW50ZXJuYWwgPSBfY2FzdEF1dGgoYXV0aCk7XHJcbiAgICBfYXNzZXJ0SW5zdGFuY2VPZihhdXRoLCBwcm92aWRlciwgRmVkZXJhdGVkQXV0aFByb3ZpZGVyKTtcclxuICAgIGNvbnN0IHJlc29sdmVySW50ZXJuYWwgPSBfd2l0aERlZmF1bHRSZXNvbHZlcihhdXRoSW50ZXJuYWwsIHJlc29sdmVyKTtcclxuICAgIGNvbnN0IGFjdGlvbiA9IG5ldyBQb3B1cE9wZXJhdGlvbihhdXRoSW50ZXJuYWwsIFwic2lnbkluVmlhUG9wdXBcIiAvKiBTSUdOX0lOX1ZJQV9QT1BVUCAqLywgcHJvdmlkZXIsIHJlc29sdmVySW50ZXJuYWwpO1xyXG4gICAgcmV0dXJuIGFjdGlvbi5leGVjdXRlTm90TnVsbCgpO1xyXG59XHJcbi8qKlxyXG4gKiBSZWF1dGhlbnRpY2F0ZXMgdGhlIGN1cnJlbnQgdXNlciB3aXRoIHRoZSBzcGVjaWZpZWQge0BsaW5rIE9BdXRoUHJvdmlkZXJ9IHVzaW5nIGEgcG9wLXVwIGJhc2VkXHJcbiAqIE9BdXRoIGZsb3cuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIElmIHRoZSByZWF1dGhlbnRpY2F0aW9uIGlzIHN1Y2Nlc3NmdWwsIHRoZSByZXR1cm5lZCByZXN1bHQgd2lsbCBjb250YWluIHRoZSB1c2VyIGFuZCB0aGVcclxuICogcHJvdmlkZXIncyBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSBwb3B1cC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aFBvcHVwKGF1dGgsIHByb3ZpZGVyKTtcclxuICogLy8gUmVhdXRoZW50aWNhdGUgdXNpbmcgYSBwb3B1cC5cclxuICogYXdhaXQgcmVhdXRoZW50aWNhdGVXaXRoUG9wdXAocmVzdWx0LnVzZXIsIHByb3ZpZGVyKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBwcm92aWRlciAtIFRoZSBwcm92aWRlciB0byBhdXRoZW50aWNhdGUuIFRoZSBwcm92aWRlciBoYXMgdG8gYmUgYW4ge0BsaW5rIE9BdXRoUHJvdmlkZXJ9LlxyXG4gKiBOb24tT0F1dGggcHJvdmlkZXJzIGxpa2Uge0BsaW5rIEVtYWlsQXV0aFByb3ZpZGVyfSB3aWxsIHRocm93IGFuIGVycm9yLlxyXG4gKiBAcGFyYW0gcmVzb2x2ZXIgLSBBbiBpbnN0YW5jZSBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSwgb3B0aW9uYWxcclxuICogaWYgYWxyZWFkeSBzdXBwbGllZCB0byB7QGxpbmsgaW5pdGlhbGl6ZUF1dGh9IG9yIHByb3ZpZGVkIGJ5IHtAbGluayBnZXRBdXRofS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gcmVhdXRoZW50aWNhdGVXaXRoUG9wdXAodXNlciwgcHJvdmlkZXIsIHJlc29sdmVyKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBfYXNzZXJ0SW5zdGFuY2VPZih1c2VySW50ZXJuYWwuYXV0aCwgcHJvdmlkZXIsIEZlZGVyYXRlZEF1dGhQcm92aWRlcik7XHJcbiAgICBjb25zdCByZXNvbHZlckludGVybmFsID0gX3dpdGhEZWZhdWx0UmVzb2x2ZXIodXNlckludGVybmFsLmF1dGgsIHJlc29sdmVyKTtcclxuICAgIGNvbnN0IGFjdGlvbiA9IG5ldyBQb3B1cE9wZXJhdGlvbih1c2VySW50ZXJuYWwuYXV0aCwgXCJyZWF1dGhWaWFQb3B1cFwiIC8qIFJFQVVUSF9WSUFfUE9QVVAgKi8sIHByb3ZpZGVyLCByZXNvbHZlckludGVybmFsLCB1c2VySW50ZXJuYWwpO1xyXG4gICAgcmV0dXJuIGFjdGlvbi5leGVjdXRlTm90TnVsbCgpO1xyXG59XHJcbi8qKlxyXG4gKiBMaW5rcyB0aGUgYXV0aGVudGljYXRlZCBwcm92aWRlciB0byB0aGUgdXNlciBhY2NvdW50IHVzaW5nIGEgcG9wLXVwIGJhc2VkIE9BdXRoIGZsb3cuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIElmIHRoZSBsaW5raW5nIGlzIHN1Y2Nlc3NmdWwsIHRoZSByZXR1cm5lZCByZXN1bHQgd2lsbCBjb250YWluIHRoZSB1c2VyIGFuZCB0aGUgcHJvdmlkZXIncyBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgc29tZSBvdGhlciBwcm92aWRlci5cclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQoYXV0aCwgZW1haWwsIHBhc3N3b3JkKTtcclxuICogLy8gTGluayB1c2luZyBhIHBvcHVwLlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBGYWNlYm9va0F1dGhQcm92aWRlcigpO1xyXG4gKiBhd2FpdCBsaW5rV2l0aFBvcHVwKHJlc3VsdC51c2VyLCBwcm92aWRlcik7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gcHJvdmlkZXIgLSBUaGUgcHJvdmlkZXIgdG8gYXV0aGVudGljYXRlLiBUaGUgcHJvdmlkZXIgaGFzIHRvIGJlIGFuIHtAbGluayBPQXV0aFByb3ZpZGVyfS5cclxuICogTm9uLU9BdXRoIHByb3ZpZGVycyBsaWtlIHtAbGluayBFbWFpbEF1dGhQcm92aWRlcn0gd2lsbCB0aHJvdyBhbiBlcnJvci5cclxuICogQHBhcmFtIHJlc29sdmVyIC0gQW4gaW5zdGFuY2Ugb2Yge0BsaW5rIFBvcHVwUmVkaXJlY3RSZXNvbHZlcn0sIG9wdGlvbmFsXHJcbiAqIGlmIGFscmVhZHkgc3VwcGxpZWQgdG8ge0BsaW5rIGluaXRpYWxpemVBdXRofSBvciBwcm92aWRlZCBieSB7QGxpbmsgZ2V0QXV0aH0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGxpbmtXaXRoUG9wdXAodXNlciwgcHJvdmlkZXIsIHJlc29sdmVyKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBfYXNzZXJ0SW5zdGFuY2VPZih1c2VySW50ZXJuYWwuYXV0aCwgcHJvdmlkZXIsIEZlZGVyYXRlZEF1dGhQcm92aWRlcik7XHJcbiAgICBjb25zdCByZXNvbHZlckludGVybmFsID0gX3dpdGhEZWZhdWx0UmVzb2x2ZXIodXNlckludGVybmFsLmF1dGgsIHJlc29sdmVyKTtcclxuICAgIGNvbnN0IGFjdGlvbiA9IG5ldyBQb3B1cE9wZXJhdGlvbih1c2VySW50ZXJuYWwuYXV0aCwgXCJsaW5rVmlhUG9wdXBcIiAvKiBMSU5LX1ZJQV9QT1BVUCAqLywgcHJvdmlkZXIsIHJlc29sdmVySW50ZXJuYWwsIHVzZXJJbnRlcm5hbCk7XHJcbiAgICByZXR1cm4gYWN0aW9uLmV4ZWN1dGVOb3ROdWxsKCk7XHJcbn1cclxuLyoqXHJcbiAqIFBvcHVwIGV2ZW50IG1hbmFnZXIuIEhhbmRsZXMgdGhlIHBvcHVwJ3MgZW50aXJlIGxpZmVjeWNsZTsgbGlzdGVucyB0byBhdXRoXHJcbiAqIGV2ZW50c1xyXG4gKlxyXG4gKi9cclxuY2xhc3MgUG9wdXBPcGVyYXRpb24gZXh0ZW5kcyBBYnN0cmFjdFBvcHVwUmVkaXJlY3RPcGVyYXRpb24ge1xyXG4gICAgY29uc3RydWN0b3IoYXV0aCwgZmlsdGVyLCBwcm92aWRlciwgcmVzb2x2ZXIsIHVzZXIpIHtcclxuICAgICAgICBzdXBlcihhdXRoLCBmaWx0ZXIsIHJlc29sdmVyLCB1c2VyKTtcclxuICAgICAgICB0aGlzLnByb3ZpZGVyID0gcHJvdmlkZXI7XHJcbiAgICAgICAgdGhpcy5hdXRoV2luZG93ID0gbnVsbDtcclxuICAgICAgICB0aGlzLnBvbGxJZCA9IG51bGw7XHJcbiAgICAgICAgaWYgKFBvcHVwT3BlcmF0aW9uLmN1cnJlbnRQb3B1cEFjdGlvbikge1xyXG4gICAgICAgICAgICBQb3B1cE9wZXJhdGlvbi5jdXJyZW50UG9wdXBBY3Rpb24uY2FuY2VsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFBvcHVwT3BlcmF0aW9uLmN1cnJlbnRQb3B1cEFjdGlvbiA9IHRoaXM7XHJcbiAgICB9XHJcbiAgICBhc3luYyBleGVjdXRlTm90TnVsbCgpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWN1dGUoKTtcclxuICAgICAgICBfYXNzZXJ0KHJlc3VsdCwgdGhpcy5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgICBhc3luYyBvbkV4ZWN1dGlvbigpIHtcclxuICAgICAgICBkZWJ1Z0Fzc2VydCh0aGlzLmZpbHRlci5sZW5ndGggPT09IDEsICdQb3B1cCBvcGVyYXRpb25zIG9ubHkgaGFuZGxlIG9uZSBldmVudCcpO1xyXG4gICAgICAgIGNvbnN0IGV2ZW50SWQgPSBfZ2VuZXJhdGVFdmVudElkKCk7XHJcbiAgICAgICAgdGhpcy5hdXRoV2luZG93ID0gYXdhaXQgdGhpcy5yZXNvbHZlci5fb3BlblBvcHVwKHRoaXMuYXV0aCwgdGhpcy5wcm92aWRlciwgdGhpcy5maWx0ZXJbMF0sIC8vIFRoZXJlJ3MgYWx3YXlzIG9uZSwgc2VlIGNvbnN0cnVjdG9yXHJcbiAgICAgICAgZXZlbnRJZCk7XHJcbiAgICAgICAgdGhpcy5hdXRoV2luZG93LmFzc29jaWF0ZWRFdmVudCA9IGV2ZW50SWQ7XHJcbiAgICAgICAgLy8gQ2hlY2sgZm9yIHdlYiBzdG9yYWdlIHN1cHBvcnQgYW5kIG9yaWdpbiB2YWxpZGF0aW9uIF9hZnRlcl8gdGhlIHBvcHVwIGlzXHJcbiAgICAgICAgLy8gbG9hZGVkLiBUaGVzZSBvcGVyYXRpb25zIGFyZSBzbG93ICh+MSBzZWNvbmQgb3Igc28pIFJhdGhlciB0aGFuXHJcbiAgICAgICAgLy8gd2FpdGluZyBvbiB0aGVtIGJlZm9yZSBvcGVuaW5nIHRoZSB3aW5kb3csIG9wdGltaXN0aWNhbGx5IG9wZW4gdGhlIHBvcHVwXHJcbiAgICAgICAgLy8gYW5kIGNoZWNrIGZvciBzdG9yYWdlIHN1cHBvcnQgYXQgdGhlIHNhbWUgdGltZS4gSWYgc3RvcmFnZSBzdXBwb3J0IGlzXHJcbiAgICAgICAgLy8gbm90IGF2YWlsYWJsZSwgdGhpcyB3aWxsIGNhdXNlIHRoZSB3aG9sZSB0aGluZyB0byByZWplY3QgcHJvcGVybHkuIEl0XHJcbiAgICAgICAgLy8gd2lsbCBhbHNvIGNsb3NlIHRoZSBwb3B1cCwgYnV0IHNpbmNlIHRoZSBwcm9taXNlIGhhcyBhbHJlYWR5IHJlamVjdGVkLFxyXG4gICAgICAgIC8vIHRoZSBwb3B1cCBjbG9zZWQgYnkgdXNlciBwb2xsIHdpbGwgcmVqZWN0IGludG8gdGhlIHZvaWQuXHJcbiAgICAgICAgdGhpcy5yZXNvbHZlci5fb3JpZ2luVmFsaWRhdGlvbih0aGlzLmF1dGgpLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlamVjdChlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnJlc29sdmVyLl9pc0lmcmFtZVdlYlN0b3JhZ2VTdXBwb3J0ZWQodGhpcy5hdXRoLCBpc1N1cHBvcnRlZCA9PiB7XHJcbiAgICAgICAgICAgIGlmICghaXNTdXBwb3J0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVqZWN0KF9jcmVhdGVFcnJvcih0aGlzLmF1dGgsIFwid2ViLXN0b3JhZ2UtdW5zdXBwb3J0ZWRcIiAvKiBXRUJfU1RPUkFHRV9VTlNVUFBPUlRFRCAqLykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gSGFuZGxlIHVzZXIgY2xvc3VyZS4gTm90aWNlIHRoaXMgZG9lcyAqbm90KiB1c2UgYXdhaXRcclxuICAgICAgICB0aGlzLnBvbGxVc2VyQ2FuY2VsbGF0aW9uKCk7XHJcbiAgICB9XHJcbiAgICBnZXQgZXZlbnRJZCgpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgcmV0dXJuICgoX2EgPSB0aGlzLmF1dGhXaW5kb3cpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5hc3NvY2lhdGVkRXZlbnQpIHx8IG51bGw7XHJcbiAgICB9XHJcbiAgICBjYW5jZWwoKSB7XHJcbiAgICAgICAgdGhpcy5yZWplY3QoX2NyZWF0ZUVycm9yKHRoaXMuYXV0aCwgXCJjYW5jZWxsZWQtcG9wdXAtcmVxdWVzdFwiIC8qIEVYUElSRURfUE9QVVBfUkVRVUVTVCAqLykpO1xyXG4gICAgfVxyXG4gICAgY2xlYW5VcCgpIHtcclxuICAgICAgICBpZiAodGhpcy5hdXRoV2luZG93KSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0aFdpbmRvdy5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5wb2xsSWQpIHtcclxuICAgICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLnBvbGxJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYXV0aFdpbmRvdyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5wb2xsSWQgPSBudWxsO1xyXG4gICAgICAgIFBvcHVwT3BlcmF0aW9uLmN1cnJlbnRQb3B1cEFjdGlvbiA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBwb2xsVXNlckNhbmNlbGxhdGlvbigpIHtcclxuICAgICAgICBjb25zdCBwb2xsID0gKCkgPT4ge1xyXG4gICAgICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgICAgICBpZiAoKF9iID0gKF9hID0gdGhpcy5hdXRoV2luZG93KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eud2luZG93KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2xvc2VkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCB0aGVyZSBpcyBzdWZmaWNpZW50IHRpbWUgZm9yIHdoYXRldmVyIGFjdGlvbiB0b1xyXG4gICAgICAgICAgICAgICAgLy8gY29tcGxldGUuIFRoZSB3aW5kb3cgY291bGQgaGF2ZSBjbG9zZWQgYnV0IHRoZSBzaWduIGluIG5ldHdvcmtcclxuICAgICAgICAgICAgICAgIC8vIGNhbGwgY291bGQgc3RpbGwgYmUgaW4gZmxpZ2h0LlxyXG4gICAgICAgICAgICAgICAgdGhpcy5wb2xsSWQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb2xsSWQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVqZWN0KF9jcmVhdGVFcnJvcih0aGlzLmF1dGgsIFwicG9wdXAtY2xvc2VkLWJ5LXVzZXJcIiAvKiBQT1BVUF9DTE9TRURfQllfVVNFUiAqLykpO1xyXG4gICAgICAgICAgICAgICAgfSwgMjAwMCAvKiBBVVRIX0VWRU5UICovKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnBvbGxJZCA9IHdpbmRvdy5zZXRUaW1lb3V0KHBvbGwsIF9QT0xMX1dJTkRPV19DTE9TRV9USU1FT1VULmdldCgpKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHBvbGwoKTtcclxuICAgIH1cclxufVxyXG4vLyBPbmx5IG9uZSBwb3B1cCBpcyBldmVyIHNob3duIGF0IG9uY2UuIFRoZSBsaWZlY3ljbGUgb2YgdGhlIGN1cnJlbnQgcG9wdXBcclxuLy8gY2FuIGJlIG1hbmFnZWQgLyBjYW5jZWxsZWQgYnkgdGhlIGNvbnN0cnVjdG9yLlxyXG5Qb3B1cE9wZXJhdGlvbi5jdXJyZW50UG9wdXBBY3Rpb24gPSBudWxsO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBQRU5ESU5HX1JFRElSRUNUX0tFWSA9ICdwZW5kaW5nUmVkaXJlY3QnO1xyXG4vLyBXZSBvbmx5IGdldCBvbmUgcmVkaXJlY3Qgb3V0Y29tZSBmb3IgYW55IG9uZSBhdXRoLCBzbyBqdXN0IHN0b3JlIGl0XHJcbi8vIGluIGhlcmUuXHJcbmNvbnN0IHJlZGlyZWN0T3V0Y29tZU1hcCA9IG5ldyBNYXAoKTtcclxuY2xhc3MgUmVkaXJlY3RBY3Rpb24gZXh0ZW5kcyBBYnN0cmFjdFBvcHVwUmVkaXJlY3RPcGVyYXRpb24ge1xyXG4gICAgY29uc3RydWN0b3IoYXV0aCwgcmVzb2x2ZXIsIGJ5cGFzc0F1dGhTdGF0ZSA9IGZhbHNlKSB7XHJcbiAgICAgICAgc3VwZXIoYXV0aCwgW1xyXG4gICAgICAgICAgICBcInNpZ25JblZpYVJlZGlyZWN0XCIgLyogU0lHTl9JTl9WSUFfUkVESVJFQ1QgKi8sXHJcbiAgICAgICAgICAgIFwibGlua1ZpYVJlZGlyZWN0XCIgLyogTElOS19WSUFfUkVESVJFQ1QgKi8sXHJcbiAgICAgICAgICAgIFwicmVhdXRoVmlhUmVkaXJlY3RcIiAvKiBSRUFVVEhfVklBX1JFRElSRUNUICovLFxyXG4gICAgICAgICAgICBcInVua25vd25cIiAvKiBVTktOT1dOICovXHJcbiAgICAgICAgXSwgcmVzb2x2ZXIsIHVuZGVmaW5lZCwgYnlwYXNzQXV0aFN0YXRlKTtcclxuICAgICAgICB0aGlzLmV2ZW50SWQgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBPdmVycmlkZSB0aGUgZXhlY3V0ZSBmdW5jdGlvbjsgaWYgd2UgYWxyZWFkeSBoYXZlIGEgcmVkaXJlY3QgcmVzdWx0LCB0aGVuXHJcbiAgICAgKiBqdXN0IHJldHVybiBpdC5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgZXhlY3V0ZSgpIHtcclxuICAgICAgICBsZXQgcmVhZHlPdXRjb21lID0gcmVkaXJlY3RPdXRjb21lTWFwLmdldCh0aGlzLmF1dGguX2tleSgpKTtcclxuICAgICAgICBpZiAoIXJlYWR5T3V0Y29tZSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaGFzUGVuZGluZ1JlZGlyZWN0ID0gYXdhaXQgX2dldEFuZENsZWFyUGVuZGluZ1JlZGlyZWN0U3RhdHVzKHRoaXMucmVzb2x2ZXIsIHRoaXMuYXV0aCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBoYXNQZW5kaW5nUmVkaXJlY3QgPyBhd2FpdCBzdXBlci5leGVjdXRlKCkgOiBudWxsO1xyXG4gICAgICAgICAgICAgICAgcmVhZHlPdXRjb21lID0gKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIHJlYWR5T3V0Y29tZSA9ICgpID0+IFByb21pc2UucmVqZWN0KGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlZGlyZWN0T3V0Y29tZU1hcC5zZXQodGhpcy5hdXRoLl9rZXkoKSwgcmVhZHlPdXRjb21lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgd2UncmUgbm90IGJ5cGFzc2luZyBhdXRoIHN0YXRlLCB0aGUgcmVhZHkgb3V0Y29tZSBzaG91bGQgYmUgc2V0IHRvXHJcbiAgICAgICAgLy8gbnVsbC5cclxuICAgICAgICBpZiAoIXRoaXMuYnlwYXNzQXV0aFN0YXRlKSB7XHJcbiAgICAgICAgICAgIHJlZGlyZWN0T3V0Y29tZU1hcC5zZXQodGhpcy5hdXRoLl9rZXkoKSwgKCkgPT4gUHJvbWlzZS5yZXNvbHZlKG51bGwpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlYWR5T3V0Y29tZSgpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgb25BdXRoRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gXCJzaWduSW5WaWFSZWRpcmVjdFwiIC8qIFNJR05fSU5fVklBX1JFRElSRUNUICovKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5vbkF1dGhFdmVudChldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGV2ZW50LnR5cGUgPT09IFwidW5rbm93blwiIC8qIFVOS05PV04gKi8pIHtcclxuICAgICAgICAgICAgLy8gVGhpcyBpcyBhIHNlbnRpbmVsIHZhbHVlIGluZGljYXRpbmcgdGhlcmUncyBubyBwZW5kaW5nIHJlZGlyZWN0XHJcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZShudWxsKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZXZlbnQuZXZlbnRJZCkge1xyXG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgdGhpcy5hdXRoLl9yZWRpcmVjdFVzZXJGb3JJZChldmVudC5ldmVudElkKTtcclxuICAgICAgICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXNlciA9IHVzZXI7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIub25BdXRoRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNvbHZlKG51bGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYXN5bmMgb25FeGVjdXRpb24oKSB7IH1cclxuICAgIGNsZWFuVXAoKSB7IH1cclxufVxyXG5hc3luYyBmdW5jdGlvbiBfZ2V0QW5kQ2xlYXJQZW5kaW5nUmVkaXJlY3RTdGF0dXMocmVzb2x2ZXIsIGF1dGgpIHtcclxuICAgIGNvbnN0IGtleSA9IHBlbmRpbmdSZWRpcmVjdEtleShhdXRoKTtcclxuICAgIGNvbnN0IHBlcnNpc3RlbmNlID0gcmVzb2x2ZXJQZXJzaXN0ZW5jZShyZXNvbHZlcik7XHJcbiAgICBpZiAoIShhd2FpdCBwZXJzaXN0ZW5jZS5faXNBdmFpbGFibGUoKSkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBjb25zdCBoYXNQZW5kaW5nUmVkaXJlY3QgPSAoYXdhaXQgcGVyc2lzdGVuY2UuX2dldChrZXkpKSA9PT0gJ3RydWUnO1xyXG4gICAgYXdhaXQgcGVyc2lzdGVuY2UuX3JlbW92ZShrZXkpO1xyXG4gICAgcmV0dXJuIGhhc1BlbmRpbmdSZWRpcmVjdDtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfc2V0UGVuZGluZ1JlZGlyZWN0U3RhdHVzKHJlc29sdmVyLCBhdXRoKSB7XHJcbiAgICByZXR1cm4gcmVzb2x2ZXJQZXJzaXN0ZW5jZShyZXNvbHZlcikuX3NldChwZW5kaW5nUmVkaXJlY3RLZXkoYXV0aCksICd0cnVlJyk7XHJcbn1cclxuZnVuY3Rpb24gX2NsZWFyUmVkaXJlY3RPdXRjb21lcygpIHtcclxuICAgIHJlZGlyZWN0T3V0Y29tZU1hcC5jbGVhcigpO1xyXG59XHJcbmZ1bmN0aW9uIHJlc29sdmVyUGVyc2lzdGVuY2UocmVzb2x2ZXIpIHtcclxuICAgIHJldHVybiBfZ2V0SW5zdGFuY2UocmVzb2x2ZXIuX3JlZGlyZWN0UGVyc2lzdGVuY2UpO1xyXG59XHJcbmZ1bmN0aW9uIHBlbmRpbmdSZWRpcmVjdEtleShhdXRoKSB7XHJcbiAgICByZXR1cm4gX3BlcnNpc3RlbmNlS2V5TmFtZShQRU5ESU5HX1JFRElSRUNUX0tFWSwgYXV0aC5jb25maWcuYXBpS2V5LCBhdXRoLm5hbWUpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBdXRoZW50aWNhdGVzIGEgRmlyZWJhc2UgY2xpZW50IHVzaW5nIGEgZnVsbC1wYWdlIHJlZGlyZWN0IGZsb3cuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRvIGhhbmRsZSB0aGUgcmVzdWx0cyBhbmQgZXJyb3JzIGZvciB0aGlzIG9wZXJhdGlvbiwgcmVmZXIgdG8ge0BsaW5rIGdldFJlZGlyZWN0UmVzdWx0fS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEZhY2Vib29rQXV0aFByb3ZpZGVyKCk7XHJcbiAqIC8vIFlvdSBjYW4gYWRkIGFkZGl0aW9uYWwgc2NvcGVzIHRvIHRoZSBwcm92aWRlcjpcclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3VzZXJfYmlydGhkYXknKTtcclxuICogLy8gU3RhcnQgYSBzaWduIGluIHByb2Nlc3MgZm9yIGFuIHVuYXV0aGVudGljYXRlZCB1c2VyLlxyXG4gKiBhd2FpdCBzaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogaWYgKHJlc3VsdCkge1xyXG4gKiAgIC8vIFRoaXMgaXMgdGhlIHNpZ25lZC1pbiB1c2VyXHJcbiAqICAgY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAgIC8vIFRoaXMgZ2l2ZXMgeW91IGEgRmFjZWJvb2sgQWNjZXNzIFRva2VuLlxyXG4gKiAgIGNvbnN0IGNyZWRlbnRpYWwgPSBwcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChhdXRoLCByZXN1bHQpO1xyXG4gKiAgIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogfVxyXG4gKiAvLyBBcyB0aGlzIEFQSSBjYW4gYmUgdXNlZCBmb3Igc2lnbi1pbiwgbGlua2luZyBhbmQgcmVhdXRoZW50aWNhdGlvbixcclxuICogLy8gY2hlY2sgdGhlIG9wZXJhdGlvblR5cGUgdG8gZGV0ZXJtaW5lIHdoYXQgdHJpZ2dlcmVkIHRoaXMgcmVkaXJlY3RcclxuICogLy8gb3BlcmF0aW9uLlxyXG4gKiBjb25zdCBvcGVyYXRpb25UeXBlID0gcmVzdWx0Lm9wZXJhdGlvblR5cGU7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBwcm92aWRlciAtIFRoZSBwcm92aWRlciB0byBhdXRoZW50aWNhdGUuIFRoZSBwcm92aWRlciBoYXMgdG8gYmUgYW4ge0BsaW5rIE9BdXRoUHJvdmlkZXJ9LlxyXG4gKiBOb24tT0F1dGggcHJvdmlkZXJzIGxpa2Uge0BsaW5rIEVtYWlsQXV0aFByb3ZpZGVyfSB3aWxsIHRocm93IGFuIGVycm9yLlxyXG4gKiBAcGFyYW0gcmVzb2x2ZXIgLSBBbiBpbnN0YW5jZSBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSwgb3B0aW9uYWxcclxuICogaWYgYWxyZWFkeSBzdXBwbGllZCB0byB7QGxpbmsgaW5pdGlhbGl6ZUF1dGh9IG9yIHByb3ZpZGVkIGJ5IHtAbGluayBnZXRBdXRofS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgcmV0dXJuIF9zaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIsIHJlc29sdmVyKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgY29uc3QgYXV0aEludGVybmFsID0gX2Nhc3RBdXRoKGF1dGgpO1xyXG4gICAgX2Fzc2VydEluc3RhbmNlT2YoYXV0aCwgcHJvdmlkZXIsIEZlZGVyYXRlZEF1dGhQcm92aWRlcik7XHJcbiAgICBjb25zdCByZXNvbHZlckludGVybmFsID0gX3dpdGhEZWZhdWx0UmVzb2x2ZXIoYXV0aEludGVybmFsLCByZXNvbHZlcik7XHJcbiAgICBhd2FpdCBfc2V0UGVuZGluZ1JlZGlyZWN0U3RhdHVzKHJlc29sdmVySW50ZXJuYWwsIGF1dGhJbnRlcm5hbCk7XHJcbiAgICByZXR1cm4gcmVzb2x2ZXJJbnRlcm5hbC5fb3BlblJlZGlyZWN0KGF1dGhJbnRlcm5hbCwgcHJvdmlkZXIsIFwic2lnbkluVmlhUmVkaXJlY3RcIiAvKiBTSUdOX0lOX1ZJQV9SRURJUkVDVCAqLyk7XHJcbn1cclxuLyoqXHJcbiAqIFJlYXV0aGVudGljYXRlcyB0aGUgY3VycmVudCB1c2VyIHdpdGggdGhlIHNwZWNpZmllZCB7QGxpbmsgT0F1dGhQcm92aWRlcn0gdXNpbmcgYSBmdWxsLXBhZ2UgcmVkaXJlY3QgZmxvdy5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEZhY2Vib29rQXV0aFByb3ZpZGVyKCk7XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlcik7XHJcbiAqIC8vIFRoaXMgd2lsbCB0cmlnZ2VyIGEgZnVsbCBwYWdlIHJlZGlyZWN0IGF3YXkgZnJvbSB5b3VyIGFwcFxyXG4gKlxyXG4gKiAvLyBBZnRlciByZXR1cm5pbmcgZnJvbSB0aGUgcmVkaXJlY3Qgd2hlbiB5b3VyIGFwcCBpbml0aWFsaXplcyB5b3UgY2FuIG9idGFpbiB0aGUgcmVzdWx0XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJlZGlyZWN0UmVzdWx0KGF1dGgpO1xyXG4gKiAvLyBMaW5rIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGF3YWl0IGxpbmtXaXRoUmVkaXJlY3QocmVzdWx0LnVzZXIsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIGFnYWluIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gcHJvdmlkZXIgLSBUaGUgcHJvdmlkZXIgdG8gYXV0aGVudGljYXRlLiBUaGUgcHJvdmlkZXIgaGFzIHRvIGJlIGFuIHtAbGluayBPQXV0aFByb3ZpZGVyfS5cclxuICogTm9uLU9BdXRoIHByb3ZpZGVycyBsaWtlIHtAbGluayBFbWFpbEF1dGhQcm92aWRlcn0gd2lsbCB0aHJvdyBhbiBlcnJvci5cclxuICogQHBhcmFtIHJlc29sdmVyIC0gQW4gaW5zdGFuY2Ugb2Yge0BsaW5rIFBvcHVwUmVkaXJlY3RSZXNvbHZlcn0sIG9wdGlvbmFsXHJcbiAqIGlmIGFscmVhZHkgc3VwcGxpZWQgdG8ge0BsaW5rIGluaXRpYWxpemVBdXRofSBvciBwcm92aWRlZCBieSB7QGxpbmsgZ2V0QXV0aH0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHJlYXV0aGVudGljYXRlV2l0aFJlZGlyZWN0KHVzZXIsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgcmV0dXJuIF9yZWF1dGhlbnRpY2F0ZVdpdGhSZWRpcmVjdCh1c2VyLCBwcm92aWRlciwgcmVzb2x2ZXIpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9yZWF1dGhlbnRpY2F0ZVdpdGhSZWRpcmVjdCh1c2VyLCBwcm92aWRlciwgcmVzb2x2ZXIpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIF9hc3NlcnRJbnN0YW5jZU9mKHVzZXJJbnRlcm5hbC5hdXRoLCBwcm92aWRlciwgRmVkZXJhdGVkQXV0aFByb3ZpZGVyKTtcclxuICAgIC8vIEFsbG93IHRoZSByZXNvbHZlciB0byBlcnJvciBiZWZvcmUgcGVyc2lzdGluZyB0aGUgcmVkaXJlY3QgdXNlclxyXG4gICAgY29uc3QgcmVzb2x2ZXJJbnRlcm5hbCA9IF93aXRoRGVmYXVsdFJlc29sdmVyKHVzZXJJbnRlcm5hbC5hdXRoLCByZXNvbHZlcik7XHJcbiAgICBhd2FpdCBfc2V0UGVuZGluZ1JlZGlyZWN0U3RhdHVzKHJlc29sdmVySW50ZXJuYWwsIHVzZXJJbnRlcm5hbC5hdXRoKTtcclxuICAgIGNvbnN0IGV2ZW50SWQgPSBhd2FpdCBwcmVwYXJlVXNlckZvclJlZGlyZWN0KHVzZXJJbnRlcm5hbCk7XHJcbiAgICByZXR1cm4gcmVzb2x2ZXJJbnRlcm5hbC5fb3BlblJlZGlyZWN0KHVzZXJJbnRlcm5hbC5hdXRoLCBwcm92aWRlciwgXCJyZWF1dGhWaWFSZWRpcmVjdFwiIC8qIFJFQVVUSF9WSUFfUkVESVJFQ1QgKi8sIGV2ZW50SWQpO1xyXG59XHJcbi8qKlxyXG4gKiBMaW5rcyB0aGUge0BsaW5rIE9BdXRoUHJvdmlkZXJ9IHRvIHRoZSB1c2VyIGFjY291bnQgdXNpbmcgYSBmdWxsLXBhZ2UgcmVkaXJlY3QgZmxvdy5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIHNvbWUgb3RoZXIgcHJvdmlkZXIuXHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLCBwYXNzd29yZCk7XHJcbiAqIC8vIExpbmsgdXNpbmcgYSByZWRpcmVjdC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcclxuICogYXdhaXQgbGlua1dpdGhSZWRpcmVjdChyZXN1bHQudXNlciwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBwcm92aWRlciAtIFRoZSBwcm92aWRlciB0byBhdXRoZW50aWNhdGUuIFRoZSBwcm92aWRlciBoYXMgdG8gYmUgYW4ge0BsaW5rIE9BdXRoUHJvdmlkZXJ9LlxyXG4gKiBOb24tT0F1dGggcHJvdmlkZXJzIGxpa2Uge0BsaW5rIEVtYWlsQXV0aFByb3ZpZGVyfSB3aWxsIHRocm93IGFuIGVycm9yLlxyXG4gKiBAcGFyYW0gcmVzb2x2ZXIgLSBBbiBpbnN0YW5jZSBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSwgb3B0aW9uYWxcclxuICogaWYgYWxyZWFkeSBzdXBwbGllZCB0byB7QGxpbmsgaW5pdGlhbGl6ZUF1dGh9IG9yIHByb3ZpZGVkIGJ5IHtAbGluayBnZXRBdXRofS5cclxuICpcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gbGlua1dpdGhSZWRpcmVjdCh1c2VyLCBwcm92aWRlciwgcmVzb2x2ZXIpIHtcclxuICAgIHJldHVybiBfbGlua1dpdGhSZWRpcmVjdCh1c2VyLCBwcm92aWRlciwgcmVzb2x2ZXIpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9saW5rV2l0aFJlZGlyZWN0KHVzZXIsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgX2Fzc2VydEluc3RhbmNlT2YodXNlckludGVybmFsLmF1dGgsIHByb3ZpZGVyLCBGZWRlcmF0ZWRBdXRoUHJvdmlkZXIpO1xyXG4gICAgLy8gQWxsb3cgdGhlIHJlc29sdmVyIHRvIGVycm9yIGJlZm9yZSBwZXJzaXN0aW5nIHRoZSByZWRpcmVjdCB1c2VyXHJcbiAgICBjb25zdCByZXNvbHZlckludGVybmFsID0gX3dpdGhEZWZhdWx0UmVzb2x2ZXIodXNlckludGVybmFsLmF1dGgsIHJlc29sdmVyKTtcclxuICAgIGF3YWl0IF9hc3NlcnRMaW5rZWRTdGF0dXMoZmFsc2UsIHVzZXJJbnRlcm5hbCwgcHJvdmlkZXIucHJvdmlkZXJJZCk7XHJcbiAgICBhd2FpdCBfc2V0UGVuZGluZ1JlZGlyZWN0U3RhdHVzKHJlc29sdmVySW50ZXJuYWwsIHVzZXJJbnRlcm5hbC5hdXRoKTtcclxuICAgIGNvbnN0IGV2ZW50SWQgPSBhd2FpdCBwcmVwYXJlVXNlckZvclJlZGlyZWN0KHVzZXJJbnRlcm5hbCk7XHJcbiAgICByZXR1cm4gcmVzb2x2ZXJJbnRlcm5hbC5fb3BlblJlZGlyZWN0KHVzZXJJbnRlcm5hbC5hdXRoLCBwcm92aWRlciwgXCJsaW5rVmlhUmVkaXJlY3RcIiAvKiBMSU5LX1ZJQV9SRURJUkVDVCAqLywgZXZlbnRJZCk7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgYSB7QGxpbmsgVXNlckNyZWRlbnRpYWx9IGZyb20gdGhlIHJlZGlyZWN0LWJhc2VkIHNpZ24taW4gZmxvdy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogSWYgc2lnbi1pbiBzdWNjZWVkZWQsIHJldHVybnMgdGhlIHNpZ25lZCBpbiB1c2VyLiBJZiBzaWduLWluIHdhcyB1bnN1Y2Nlc3NmdWwsIGZhaWxzIHdpdGggYW5cclxuICogZXJyb3IuIElmIG5vIHJlZGlyZWN0IG9wZXJhdGlvbiB3YXMgY2FsbGVkLCByZXR1cm5zIGEge0BsaW5rIFVzZXJDcmVkZW50aWFsfVxyXG4gKiB3aXRoIGEgbnVsbCBgdXNlcmAuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBGYWNlYm9va0F1dGhQcm92aWRlcigpO1xyXG4gKiAvLyBZb3UgY2FuIGFkZCBhZGRpdGlvbmFsIHNjb3BlcyB0byB0aGUgcHJvdmlkZXI6XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCd1c2VyX2JpcnRoZGF5Jyk7XHJcbiAqIC8vIFN0YXJ0IGEgc2lnbiBpbiBwcm9jZXNzIGZvciBhbiB1bmF1dGhlbnRpY2F0ZWQgdXNlci5cclxuICogYXdhaXQgc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIGlmIChyZXN1bHQpIHtcclxuICogICAvLyBUaGlzIGlzIHRoZSBzaWduZWQtaW4gdXNlclxyXG4gKiAgIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogICAvLyBUaGlzIGdpdmVzIHlvdSBhIEZhY2Vib29rIEFjY2VzcyBUb2tlbi5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gcHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQoYXV0aCwgcmVzdWx0KTtcclxuICogICBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIH1cclxuICogLy8gQXMgdGhpcyBBUEkgY2FuIGJlIHVzZWQgZm9yIHNpZ24taW4sIGxpbmtpbmcgYW5kIHJlYXV0aGVudGljYXRpb24sXHJcbiAqIC8vIGNoZWNrIHRoZSBvcGVyYXRpb25UeXBlIHRvIGRldGVybWluZSB3aGF0IHRyaWdnZXJlZCB0aGlzIHJlZGlyZWN0XHJcbiAqIC8vIG9wZXJhdGlvbi5cclxuICogY29uc3Qgb3BlcmF0aW9uVHlwZSA9IHJlc3VsdC5vcGVyYXRpb25UeXBlO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gcmVzb2x2ZXIgLSBBbiBpbnN0YW5jZSBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSwgb3B0aW9uYWxcclxuICogaWYgYWxyZWFkeSBzdXBwbGllZCB0byB7QGxpbmsgaW5pdGlhbGl6ZUF1dGh9IG9yIHByb3ZpZGVkIGJ5IHtAbGluayBnZXRBdXRofS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCwgcmVzb2x2ZXIpIHtcclxuICAgIGF3YWl0IF9jYXN0QXV0aChhdXRoKS5faW5pdGlhbGl6YXRpb25Qcm9taXNlO1xyXG4gICAgcmV0dXJuIF9nZXRSZWRpcmVjdFJlc3VsdChhdXRoLCByZXNvbHZlciwgZmFsc2UpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9nZXRSZWRpcmVjdFJlc3VsdChhdXRoLCByZXNvbHZlckV4dGVybiwgYnlwYXNzQXV0aFN0YXRlID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IGF1dGhJbnRlcm5hbCA9IF9jYXN0QXV0aChhdXRoKTtcclxuICAgIGNvbnN0IHJlc29sdmVyID0gX3dpdGhEZWZhdWx0UmVzb2x2ZXIoYXV0aEludGVybmFsLCByZXNvbHZlckV4dGVybik7XHJcbiAgICBjb25zdCBhY3Rpb24gPSBuZXcgUmVkaXJlY3RBY3Rpb24oYXV0aEludGVybmFsLCByZXNvbHZlciwgYnlwYXNzQXV0aFN0YXRlKTtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFjdGlvbi5leGVjdXRlKCk7XHJcbiAgICBpZiAocmVzdWx0ICYmICFieXBhc3NBdXRoU3RhdGUpIHtcclxuICAgICAgICBkZWxldGUgcmVzdWx0LnVzZXIuX3JlZGlyZWN0RXZlbnRJZDtcclxuICAgICAgICBhd2FpdCBhdXRoSW50ZXJuYWwuX3BlcnNpc3RVc2VySWZDdXJyZW50KHJlc3VsdC51c2VyKTtcclxuICAgICAgICBhd2FpdCBhdXRoSW50ZXJuYWwuX3NldFJlZGlyZWN0VXNlcihudWxsLCByZXNvbHZlckV4dGVybik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHByZXBhcmVVc2VyRm9yUmVkaXJlY3QodXNlcikge1xyXG4gICAgY29uc3QgZXZlbnRJZCA9IF9nZW5lcmF0ZUV2ZW50SWQoYCR7dXNlci51aWR9Ojo6YCk7XHJcbiAgICB1c2VyLl9yZWRpcmVjdEV2ZW50SWQgPSBldmVudElkO1xyXG4gICAgYXdhaXQgdXNlci5hdXRoLl9zZXRSZWRpcmVjdFVzZXIodXNlcik7XHJcbiAgICBhd2FpdCB1c2VyLmF1dGguX3BlcnNpc3RVc2VySWZDdXJyZW50KHVzZXIpO1xyXG4gICAgcmV0dXJuIGV2ZW50SWQ7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gVGhlIGFtb3VudCBvZiB0aW1lIHRvIHN0b3JlIHRoZSBVSURzIG9mIHNlZW4gZXZlbnRzOyB0aGlzIGlzXHJcbi8vIHNldCB0byAxMCBtaW4gYnkgZGVmYXVsdFxyXG5jb25zdCBFVkVOVF9EVVBMSUNBVElPTl9DQUNIRV9EVVJBVElPTl9NUyA9IDEwICogNjAgKiAxMDAwO1xyXG5jbGFzcyBBdXRoRXZlbnRNYW5hZ2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgpIHtcclxuICAgICAgICB0aGlzLmF1dGggPSBhdXRoO1xyXG4gICAgICAgIHRoaXMuY2FjaGVkRXZlbnRVaWRzID0gbmV3IFNldCgpO1xyXG4gICAgICAgIHRoaXMuY29uc3VtZXJzID0gbmV3IFNldCgpO1xyXG4gICAgICAgIHRoaXMucXVldWVkUmVkaXJlY3RFdmVudCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5oYXNIYW5kbGVkUG90ZW50aWFsUmVkaXJlY3QgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmxhc3RQcm9jZXNzZWRFdmVudFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgfVxyXG4gICAgcmVnaXN0ZXJDb25zdW1lcihhdXRoRXZlbnRDb25zdW1lcikge1xyXG4gICAgICAgIHRoaXMuY29uc3VtZXJzLmFkZChhdXRoRXZlbnRDb25zdW1lcik7XHJcbiAgICAgICAgaWYgKHRoaXMucXVldWVkUmVkaXJlY3RFdmVudCAmJlxyXG4gICAgICAgICAgICB0aGlzLmlzRXZlbnRGb3JDb25zdW1lcih0aGlzLnF1ZXVlZFJlZGlyZWN0RXZlbnQsIGF1dGhFdmVudENvbnN1bWVyKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbmRUb0NvbnN1bWVyKHRoaXMucXVldWVkUmVkaXJlY3RFdmVudCwgYXV0aEV2ZW50Q29uc3VtZXIpO1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVFdmVudFRvQ2FjaGUodGhpcy5xdWV1ZWRSZWRpcmVjdEV2ZW50KTtcclxuICAgICAgICAgICAgdGhpcy5xdWV1ZWRSZWRpcmVjdEV2ZW50ID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB1bnJlZ2lzdGVyQ29uc3VtZXIoYXV0aEV2ZW50Q29uc3VtZXIpIHtcclxuICAgICAgICB0aGlzLmNvbnN1bWVycy5kZWxldGUoYXV0aEV2ZW50Q29uc3VtZXIpO1xyXG4gICAgfVxyXG4gICAgb25FdmVudChldmVudCkge1xyXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBldmVudCBoYXMgYWxyZWFkeSBiZWVuIGhhbmRsZWRcclxuICAgICAgICBpZiAodGhpcy5oYXNFdmVudEJlZW5IYW5kbGVkKGV2ZW50KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBoYW5kbGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jb25zdW1lcnMuZm9yRWFjaChjb25zdW1lciA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRXZlbnRGb3JDb25zdW1lcihldmVudCwgY29uc3VtZXIpKSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VuZFRvQ29uc3VtZXIoZXZlbnQsIGNvbnN1bWVyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2F2ZUV2ZW50VG9DYWNoZShldmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAodGhpcy5oYXNIYW5kbGVkUG90ZW50aWFsUmVkaXJlY3QgfHwgIWlzUmVkaXJlY3RFdmVudChldmVudCkpIHtcclxuICAgICAgICAgICAgLy8gSWYgd2UndmUgYWxyZWFkeSBzZWVuIGEgcmVkaXJlY3QgYmVmb3JlLCBvciB0aGlzIGlzIGEgcG9wdXAgZXZlbnQsXHJcbiAgICAgICAgICAgIC8vIGJhaWwgbm93XHJcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmhhc0hhbmRsZWRQb3RlbnRpYWxSZWRpcmVjdCA9IHRydWU7XHJcbiAgICAgICAgLy8gSWYgdGhlIHJlZGlyZWN0IHdhc24ndCBoYW5kbGVkLCBoYW5nIG9uIHRvIGl0XHJcbiAgICAgICAgaWYgKCFoYW5kbGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMucXVldWVkUmVkaXJlY3RFdmVudCA9IGV2ZW50O1xyXG4gICAgICAgICAgICBoYW5kbGVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGhhbmRsZWQ7XHJcbiAgICB9XHJcbiAgICBzZW5kVG9Db25zdW1lcihldmVudCwgY29uc3VtZXIpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgaWYgKGV2ZW50LmVycm9yICYmICFpc051bGxSZWRpcmVjdEV2ZW50KGV2ZW50KSkge1xyXG4gICAgICAgICAgICBjb25zdCBjb2RlID0gKChfYSA9IGV2ZW50LmVycm9yLmNvZGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zcGxpdCgnYXV0aC8nKVsxXSkgfHxcclxuICAgICAgICAgICAgICAgIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLztcclxuICAgICAgICAgICAgY29uc3VtZXIub25FcnJvcihfY3JlYXRlRXJyb3IodGhpcy5hdXRoLCBjb2RlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdW1lci5vbkF1dGhFdmVudChldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaXNFdmVudEZvckNvbnN1bWVyKGV2ZW50LCBjb25zdW1lcikge1xyXG4gICAgICAgIGNvbnN0IGV2ZW50SWRNYXRjaGVzID0gY29uc3VtZXIuZXZlbnRJZCA9PT0gbnVsbCB8fFxyXG4gICAgICAgICAgICAoISFldmVudC5ldmVudElkICYmIGV2ZW50LmV2ZW50SWQgPT09IGNvbnN1bWVyLmV2ZW50SWQpO1xyXG4gICAgICAgIHJldHVybiBjb25zdW1lci5maWx0ZXIuaW5jbHVkZXMoZXZlbnQudHlwZSkgJiYgZXZlbnRJZE1hdGNoZXM7XHJcbiAgICB9XHJcbiAgICBoYXNFdmVudEJlZW5IYW5kbGVkKGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKERhdGUubm93KCkgLSB0aGlzLmxhc3RQcm9jZXNzZWRFdmVudFRpbWUgPj1cclxuICAgICAgICAgICAgRVZFTlRfRFVQTElDQVRJT05fQ0FDSEVfRFVSQVRJT05fTVMpIHtcclxuICAgICAgICAgICAgdGhpcy5jYWNoZWRFdmVudFVpZHMuY2xlYXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVkRXZlbnRVaWRzLmhhcyhldmVudFVpZChldmVudCkpO1xyXG4gICAgfVxyXG4gICAgc2F2ZUV2ZW50VG9DYWNoZShldmVudCkge1xyXG4gICAgICAgIHRoaXMuY2FjaGVkRXZlbnRVaWRzLmFkZChldmVudFVpZChldmVudCkpO1xyXG4gICAgICAgIHRoaXMubGFzdFByb2Nlc3NlZEV2ZW50VGltZSA9IERhdGUubm93KCk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZXZlbnRVaWQoZSkge1xyXG4gICAgcmV0dXJuIFtlLnR5cGUsIGUuZXZlbnRJZCwgZS5zZXNzaW9uSWQsIGUudGVuYW50SWRdLmZpbHRlcih2ID0+IHYpLmpvaW4oJy0nKTtcclxufVxyXG5mdW5jdGlvbiBpc051bGxSZWRpcmVjdEV2ZW50KHsgdHlwZSwgZXJyb3IgfSkge1xyXG4gICAgcmV0dXJuICh0eXBlID09PSBcInVua25vd25cIiAvKiBVTktOT1dOICovICYmXHJcbiAgICAgICAgKGVycm9yID09PSBudWxsIHx8IGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvci5jb2RlKSA9PT0gYGF1dGgvJHtcIm5vLWF1dGgtZXZlbnRcIiAvKiBOT19BVVRIX0VWRU5UICovfWApO1xyXG59XHJcbmZ1bmN0aW9uIGlzUmVkaXJlY3RFdmVudChldmVudCkge1xyXG4gICAgc3dpdGNoIChldmVudC50eXBlKSB7XHJcbiAgICAgICAgY2FzZSBcInNpZ25JblZpYVJlZGlyZWN0XCIgLyogU0lHTl9JTl9WSUFfUkVESVJFQ1QgKi86XHJcbiAgICAgICAgY2FzZSBcImxpbmtWaWFSZWRpcmVjdFwiIC8qIExJTktfVklBX1JFRElSRUNUICovOlxyXG4gICAgICAgIGNhc2UgXCJyZWF1dGhWaWFSZWRpcmVjdFwiIC8qIFJFQVVUSF9WSUFfUkVESVJFQ1QgKi86XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGNhc2UgXCJ1bmtub3duXCIgLyogVU5LTk9XTiAqLzpcclxuICAgICAgICAgICAgcmV0dXJuIGlzTnVsbFJlZGlyZWN0RXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBfZ2V0UHJvamVjdENvbmZpZyhhdXRoLCByZXF1ZXN0ID0ge30pIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJHRVRcIiAvKiBHRVQgKi8sIFwiL3YxL3Byb2plY3RzXCIgLyogR0VUX1BST0pFQ1RfQ09ORklHICovLCByZXF1ZXN0KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBJUF9BRERSRVNTX1JFR0VYID0gL15cXGR7MSwzfVxcLlxcZHsxLDN9XFwuXFxkezEsM31cXC5cXGR7MSwzfSQvO1xyXG5jb25zdCBIVFRQX1JFR0VYID0gL15odHRwcz8vO1xyXG5hc3luYyBmdW5jdGlvbiBfdmFsaWRhdGVPcmlnaW4oYXV0aCkge1xyXG4gICAgLy8gU2tpcCBvcmlnaW4gdmFsaWRhdGlvbiBpZiB3ZSBhcmUgaW4gYW4gZW11bGF0ZWQgZW52aXJvbm1lbnRcclxuICAgIGlmIChhdXRoLmNvbmZpZy5lbXVsYXRvcikge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IHsgYXV0aG9yaXplZERvbWFpbnMgfSA9IGF3YWl0IF9nZXRQcm9qZWN0Q29uZmlnKGF1dGgpO1xyXG4gICAgZm9yIChjb25zdCBkb21haW4gb2YgYXV0aG9yaXplZERvbWFpbnMpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAobWF0Y2hEb21haW4oZG9tYWluKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICAvLyBEbyBub3RoaW5nIGlmIHRoZXJlJ3MgYSBVUkwgZXJyb3I7IGp1c3QgY29udGludWUgc2VhcmNoaW5nXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gSW4gdGhlIG9sZCBTREssIHRoaXMgZXJyb3IgYWxzbyBwcm92aWRlcyBoZWxwZnVsIG1lc3NhZ2VzLlxyXG4gICAgX2ZhaWwoYXV0aCwgXCJ1bmF1dGhvcml6ZWQtZG9tYWluXCIgLyogSU5WQUxJRF9PUklHSU4gKi8pO1xyXG59XHJcbmZ1bmN0aW9uIG1hdGNoRG9tYWluKGV4cGVjdGVkKSB7XHJcbiAgICBjb25zdCBjdXJyZW50VXJsID0gX2dldEN1cnJlbnRVcmwoKTtcclxuICAgIGNvbnN0IHsgcHJvdG9jb2wsIGhvc3RuYW1lIH0gPSBuZXcgVVJMKGN1cnJlbnRVcmwpO1xyXG4gICAgaWYgKGV4cGVjdGVkLnN0YXJ0c1dpdGgoJ2Nocm9tZS1leHRlbnNpb246Ly8nKSkge1xyXG4gICAgICAgIGNvbnN0IGNlVXJsID0gbmV3IFVSTChleHBlY3RlZCk7XHJcbiAgICAgICAgaWYgKGNlVXJsLmhvc3RuYW1lID09PSAnJyAmJiBob3N0bmFtZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgLy8gRm9yIHNvbWUgcmVhc29uIHdlJ3JlIG5vdCBwYXJzaW5nIGNocm9tZSBVUkxzIHByb3Blcmx5XHJcbiAgICAgICAgICAgIHJldHVybiAocHJvdG9jb2wgPT09ICdjaHJvbWUtZXh0ZW5zaW9uOicgJiZcclxuICAgICAgICAgICAgICAgIGV4cGVjdGVkLnJlcGxhY2UoJ2Nocm9tZS1leHRlbnNpb246Ly8nLCAnJykgPT09XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFVybC5yZXBsYWNlKCdjaHJvbWUtZXh0ZW5zaW9uOi8vJywgJycpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHByb3RvY29sID09PSAnY2hyb21lLWV4dGVuc2lvbjonICYmIGNlVXJsLmhvc3RuYW1lID09PSBob3N0bmFtZTtcclxuICAgIH1cclxuICAgIGlmICghSFRUUF9SRUdFWC50ZXN0KHByb3RvY29sKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmIChJUF9BRERSRVNTX1JFR0VYLnRlc3QoZXhwZWN0ZWQpKSB7XHJcbiAgICAgICAgLy8gVGhlIGRvbWFpbiBoYXMgdG8gYmUgZXhhY3RseSBlcXVhbCB0byB0aGUgcGF0dGVybiwgYXMgYW4gSVAgZG9tYWluIHdpbGxcclxuICAgICAgICAvLyBvbmx5IGNvbnRhaW4gdGhlIElQLCBubyBleHRyYSBjaGFyYWN0ZXIuXHJcbiAgICAgICAgcmV0dXJuIGhvc3RuYW1lID09PSBleHBlY3RlZDtcclxuICAgIH1cclxuICAgIC8vIERvdHMgaW4gcGF0dGVybiBzaG91bGQgYmUgZXNjYXBlZC5cclxuICAgIGNvbnN0IGVzY2FwZWREb21haW5QYXR0ZXJuID0gZXhwZWN0ZWQucmVwbGFjZSgvXFwuL2csICdcXFxcLicpO1xyXG4gICAgLy8gTm9uIGlwIGFkZHJlc3MgZG9tYWlucy5cclxuICAgIC8vIGRvbWFpbi5jb20gPSAqLmRvbWFpbi5jb20gT1IgZG9tYWluLmNvbVxyXG4gICAgY29uc3QgcmUgPSBuZXcgUmVnRXhwKCdeKC4rXFxcXC4nICsgZXNjYXBlZERvbWFpblBhdHRlcm4gKyAnfCcgKyBlc2NhcGVkRG9tYWluUGF0dGVybiArICcpJCcsICdpJyk7XHJcbiAgICByZXR1cm4gcmUudGVzdChob3N0bmFtZSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IE5FVFdPUktfVElNRU9VVCA9IG5ldyBEZWxheSgzMDAwMCwgNjAwMDApO1xyXG4vKipcclxuICogUmVzZXQgdW5sYW9kZWQgR0FwaSBtb2R1bGVzLiBJZiBnYXBpLmxvYWQgZmFpbHMgZHVlIHRvIGEgbmV0d29yayBlcnJvcixcclxuICogaXQgd2lsbCBzdG9wIHdvcmtpbmcgYWZ0ZXIgYSByZXRyaWFsLiBUaGlzIGlzIGEgaGFjayB0byBmaXggdGhpcyBpc3N1ZS5cclxuICovXHJcbmZ1bmN0aW9uIHJlc2V0VW5sb2FkZWRHYXBpTW9kdWxlcygpIHtcclxuICAgIC8vIENsZWFyIGxhc3QgZmFpbGVkIGdhcGkubG9hZCBzdGF0ZSB0byBmb3JjZSBuZXh0IGdhcGkubG9hZCB0byBmaXJzdFxyXG4gICAgLy8gbG9hZCB0aGUgZmFpbGVkIGdhcGkuaWZyYW1lcyBtb2R1bGUuXHJcbiAgICAvLyBHZXQgZ2FwaXguYmVhY29uIGNvbnRleHQuXHJcbiAgICBjb25zdCBiZWFjb24gPSBfd2luZG93KCkuX19fanNsO1xyXG4gICAgLy8gR2V0IGN1cnJlbnQgaGludC5cclxuICAgIGlmIChiZWFjb24gPT09IG51bGwgfHwgYmVhY29uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBiZWFjb24uSCkge1xyXG4gICAgICAgIC8vIEdldCBnYXBpIGhpbnQuXHJcbiAgICAgICAgZm9yIChjb25zdCBoaW50IG9mIE9iamVjdC5rZXlzKGJlYWNvbi5IKSkge1xyXG4gICAgICAgICAgICAvLyBSZXF1ZXN0ZWQgbW9kdWxlcy5cclxuICAgICAgICAgICAgYmVhY29uLkhbaGludF0uciA9IGJlYWNvbi5IW2hpbnRdLnIgfHwgW107XHJcbiAgICAgICAgICAgIC8vIExvYWRlZCBtb2R1bGVzLlxyXG4gICAgICAgICAgICBiZWFjb24uSFtoaW50XS5MID0gYmVhY29uLkhbaGludF0uTCB8fCBbXTtcclxuICAgICAgICAgICAgLy8gU2V0IHJlcXVlc3RlZCBtb2R1bGVzIHRvIGEgY29weSBvZiB0aGUgbG9hZGVkIG1vZHVsZXMuXHJcbiAgICAgICAgICAgIGJlYWNvbi5IW2hpbnRdLnIgPSBbLi4uYmVhY29uLkhbaGludF0uTF07XHJcbiAgICAgICAgICAgIC8vIENsZWFyIHBlbmRpbmcgY2FsbGJhY2tzLlxyXG4gICAgICAgICAgICBpZiAoYmVhY29uLkNQKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJlYWNvbi5DUC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBhbGwgZmFpbGVkIHBlbmRpbmcgY2FsbGJhY2tzLlxyXG4gICAgICAgICAgICAgICAgICAgIGJlYWNvbi5DUFtpXSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gbG9hZEdhcGkoYXV0aCkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICB2YXIgX2EsIF9iLCBfYztcclxuICAgICAgICAvLyBGdW5jdGlvbiB0byBydW4gd2hlbiBnYXBpLmxvYWQgaXMgcmVhZHkuXHJcbiAgICAgICAgZnVuY3Rpb24gbG9hZEdhcGlJZnJhbWUoKSB7XHJcbiAgICAgICAgICAgIC8vIFRoZSBkZXZlbG9wZXIgbWF5IGhhdmUgdHJpZWQgdG8gcHJldmlvdXNseSBydW4gZ2FwaS5sb2FkIGFuZCBmYWlsZWQuXHJcbiAgICAgICAgICAgIC8vIFJ1biB0aGlzIHRvIGZpeCB0aGF0LlxyXG4gICAgICAgICAgICByZXNldFVubG9hZGVkR2FwaU1vZHVsZXMoKTtcclxuICAgICAgICAgICAgZ2FwaS5sb2FkKCdnYXBpLmlmcmFtZXMnLCB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZ2FwaS5pZnJhbWVzLmdldENvbnRleHQoKSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb250aW1lb3V0OiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGFib3ZlIHJlc2V0IG1heSBiZSBzdWZmaWNpZW50LCBidXQgaGF2aW5nIHRoaXMgcmVzZXQgYWZ0ZXJcclxuICAgICAgICAgICAgICAgICAgICAvLyBmYWlsdXJlIGVuc3VyZXMgdGhhdCBpZiB0aGUgZGV2ZWxvcGVyIGNhbGxzIGdhcGkubG9hZCBhZnRlciB0aGVcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25uZWN0aW9uIGlzIHJlLWVzdGFibGlzaGVkIGFuZCBiZWZvcmUgYW5vdGhlciBhdHRlbXB0IHRvIGVtYmVkXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGlmcmFtZSwgaXQgd291bGQgd29yayBhbmQgd291bGQgbm90IGJlIGJyb2tlbiBiZWNhdXNlIG9mIG91clxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGZhaWxlZCBhdHRlbXB0LlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRpbWVvdXQgd2hlbiBnYXBpLmlmcmFtZXMuSWZyYW1lIG5vdCBsb2FkZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzZXRVbmxvYWRlZEdhcGlNb2R1bGVzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KF9jcmVhdGVFcnJvcihhdXRoLCBcIm5ldHdvcmstcmVxdWVzdC1mYWlsZWRcIiAvKiBORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovKSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdGltZW91dDogTkVUV09SS19USU1FT1VULmdldCgpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKF9iID0gKF9hID0gX3dpbmRvdygpLmdhcGkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pZnJhbWVzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuSWZyYW1lKSB7XHJcbiAgICAgICAgICAgIC8vIElmIGdhcGkuaWZyYW1lcy5JZnJhbWUgYXZhaWxhYmxlLCByZXNvbHZlLlxyXG4gICAgICAgICAgICByZXNvbHZlKGdhcGkuaWZyYW1lcy5nZXRDb250ZXh0KCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICghISgoX2MgPSBfd2luZG93KCkuZ2FwaSkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmxvYWQpKSB7XHJcbiAgICAgICAgICAgIC8vIEdhcGkgbG9hZGVyIHJlYWR5LCBsb2FkIGdhcGkuaWZyYW1lcy5cclxuICAgICAgICAgICAgbG9hZEdhcGlJZnJhbWUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyBpZnJhbWUgY2FsbGJhY2sgd2hlbiB0aGlzIGlzIGNhbGxlZCBzbyBhcyBub3QgdG8gb3ZlcndyaXRlXHJcbiAgICAgICAgICAgIC8vIGFueSBwcmV2aW91cyBkZWZpbmVkIGNhbGxiYWNrLiBUaGlzIGhhcHBlbnMgaWYgdGhpcyBtZXRob2QgaXMgY2FsbGVkXHJcbiAgICAgICAgICAgIC8vIG11bHRpcGxlIHRpbWVzIGluIHBhcmFsbGVsIGFuZCBjb3VsZCByZXN1bHQgaW4gdGhlIGxhdGVyIGNhbGxiYWNrXHJcbiAgICAgICAgICAgIC8vIG92ZXJ3cml0aW5nIHRoZSBwcmV2aW91cyBvbmUuIFRoaXMgd291bGQgZW5kIHVwIHdpdGggYSBpZnJhbWVcclxuICAgICAgICAgICAgLy8gdGltZW91dC5cclxuICAgICAgICAgICAgY29uc3QgY2JOYW1lID0gX2dlbmVyYXRlQ2FsbGJhY2tOYW1lKCdpZnJhbWVmY2InKTtcclxuICAgICAgICAgICAgLy8gR0FwaSBsb2FkZXIgbm90IGF2YWlsYWJsZSwgZHluYW1pY2FsbHkgbG9hZCBwbGF0Zm9ybS5qcy5cclxuICAgICAgICAgICAgX3dpbmRvdygpW2NiTmFtZV0gPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBHQXBpIGxvYWRlciBzaG91bGQgYmUgcmVhZHkuXHJcbiAgICAgICAgICAgICAgICBpZiAoISFnYXBpLmxvYWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2FkR2FwaUlmcmFtZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gR2FwaSBsb2FkZXIgZmFpbGVkLCB0aHJvdyBlcnJvci5cclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoX2NyZWF0ZUVycm9yKGF1dGgsIFwibmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiIC8qIE5FVFdPUktfUkVRVUVTVF9GQUlMRUQgKi8pKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gTG9hZCBHQXBpIGxvYWRlci5cclxuICAgICAgICAgICAgcmV0dXJuIF9sb2FkSlMoYGh0dHBzOi8vYXBpcy5nb29nbGUuY29tL2pzL2FwaS5qcz9vbmxvYWQ9JHtjYk5hbWV9YCkuY2F0Y2goZSA9PiByZWplY3QoZSkpO1xyXG4gICAgICAgIH1cclxuICAgIH0pLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAvLyBSZXNldCBjYWNoZWQgcHJvbWlzZSB0byBhbGxvdyBmb3IgcmV0cmlhbC5cclxuICAgICAgICBjYWNoZWRHQXBpTG9hZGVyID0gbnVsbDtcclxuICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH0pO1xyXG59XHJcbmxldCBjYWNoZWRHQXBpTG9hZGVyID0gbnVsbDtcclxuZnVuY3Rpb24gX2xvYWRHYXBpKGF1dGgpIHtcclxuICAgIGNhY2hlZEdBcGlMb2FkZXIgPSBjYWNoZWRHQXBpTG9hZGVyIHx8IGxvYWRHYXBpKGF1dGgpO1xyXG4gICAgcmV0dXJuIGNhY2hlZEdBcGlMb2FkZXI7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IFBJTkdfVElNRU9VVCA9IG5ldyBEZWxheSg1MDAwLCAxNTAwMCk7XHJcbmNvbnN0IElGUkFNRV9QQVRIID0gJ19fL2F1dGgvaWZyYW1lJztcclxuY29uc3QgRU1VTEFURURfSUZSQU1FX1BBVEggPSAnZW11bGF0b3IvYXV0aC9pZnJhbWUnO1xyXG5jb25zdCBJRlJBTUVfQVRUUklCVVRFUyA9IHtcclxuICAgIHN0eWxlOiB7XHJcbiAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXHJcbiAgICAgICAgdG9wOiAnLTEwMHB4JyxcclxuICAgICAgICB3aWR0aDogJzFweCcsXHJcbiAgICAgICAgaGVpZ2h0OiAnMXB4J1xyXG4gICAgfSxcclxuICAgICdhcmlhLWhpZGRlbic6ICd0cnVlJyxcclxuICAgIHRhYmluZGV4OiAnLTEnXHJcbn07XHJcbi8vIE1hcCBmcm9tIGFwaUhvc3QgdG8gZW5kcG9pbnQgSUQgZm9yIHBhc3NpbmcgaW50byBpZnJhbWUuIEluIGN1cnJlbnQgU0RLLCBhcGlIb3N0IGNhbiBiZSBzZXQgdG9cclxuLy8gYW55dGhpbmcgKG5vdCBmcm9tIGEgbGlzdCBvZiBlbmRwb2ludHMgd2l0aCBJRHMgYXMgaW4gbGVnYWN5KSwgc28gdGhpcyBpcyB0aGUgY2xvc2VzdCB3ZSBjYW4gZ2V0LlxyXG5jb25zdCBFSURfRlJPTV9BUElIT1NUID0gbmV3IE1hcChbXHJcbiAgICBbXCJpZGVudGl0eXRvb2xraXQuZ29vZ2xlYXBpcy5jb21cIiAvKiBBUElfSE9TVCAqLywgJ3AnXSxcclxuICAgIFsnc3RhZ2luZy1pZGVudGl0eXRvb2xraXQuc2FuZGJveC5nb29nbGVhcGlzLmNvbScsICdzJ10sXHJcbiAgICBbJ3Rlc3QtaWRlbnRpdHl0b29sa2l0LnNhbmRib3guZ29vZ2xlYXBpcy5jb20nLCAndCddIC8vIHRlc3RcclxuXSk7XHJcbmZ1bmN0aW9uIGdldElmcmFtZVVybChhdXRoKSB7XHJcbiAgICBjb25zdCBjb25maWcgPSBhdXRoLmNvbmZpZztcclxuICAgIF9hc3NlcnQoY29uZmlnLmF1dGhEb21haW4sIGF1dGgsIFwiYXV0aC1kb21haW4tY29uZmlnLXJlcXVpcmVkXCIgLyogTUlTU0lOR19BVVRIX0RPTUFJTiAqLyk7XHJcbiAgICBjb25zdCB1cmwgPSBjb25maWcuZW11bGF0b3JcclxuICAgICAgICA/IF9lbXVsYXRvclVybChjb25maWcsIEVNVUxBVEVEX0lGUkFNRV9QQVRIKVxyXG4gICAgICAgIDogYGh0dHBzOi8vJHthdXRoLmNvbmZpZy5hdXRoRG9tYWlufS8ke0lGUkFNRV9QQVRIfWA7XHJcbiAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgICAgYXBpS2V5OiBjb25maWcuYXBpS2V5LFxyXG4gICAgICAgIGFwcE5hbWU6IGF1dGgubmFtZSxcclxuICAgICAgICB2OiBTREtfVkVSU0lPTlxyXG4gICAgfTtcclxuICAgIGNvbnN0IGVpZCA9IEVJRF9GUk9NX0FQSUhPU1QuZ2V0KGF1dGguY29uZmlnLmFwaUhvc3QpO1xyXG4gICAgaWYgKGVpZCkge1xyXG4gICAgICAgIHBhcmFtcy5laWQgPSBlaWQ7XHJcbiAgICB9XHJcbiAgICBjb25zdCBmcmFtZXdvcmtzID0gYXV0aC5fZ2V0RnJhbWV3b3JrcygpO1xyXG4gICAgaWYgKGZyYW1ld29ya3MubGVuZ3RoKSB7XHJcbiAgICAgICAgcGFyYW1zLmZ3ID0gZnJhbWV3b3Jrcy5qb2luKCcsJyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYCR7dXJsfT8ke3F1ZXJ5c3RyaW5nKHBhcmFtcykuc2xpY2UoMSl9YDtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfb3BlbklmcmFtZShhdXRoKSB7XHJcbiAgICBjb25zdCBjb250ZXh0ID0gYXdhaXQgX2xvYWRHYXBpKGF1dGgpO1xyXG4gICAgY29uc3QgZ2FwaSA9IF93aW5kb3coKS5nYXBpO1xyXG4gICAgX2Fzc2VydChnYXBpLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgcmV0dXJuIGNvbnRleHQub3Blbih7XHJcbiAgICAgICAgd2hlcmU6IGRvY3VtZW50LmJvZHksXHJcbiAgICAgICAgdXJsOiBnZXRJZnJhbWVVcmwoYXV0aCksXHJcbiAgICAgICAgbWVzc2FnZUhhbmRsZXJzRmlsdGVyOiBnYXBpLmlmcmFtZXMuQ1JPU1NfT1JJR0lOX0lGUkFNRVNfRklMVEVSLFxyXG4gICAgICAgIGF0dHJpYnV0ZXM6IElGUkFNRV9BVFRSSUJVVEVTLFxyXG4gICAgICAgIGRvbnRjbGVhcjogdHJ1ZVxyXG4gICAgfSwgKGlmcmFtZSkgPT4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIGF3YWl0IGlmcmFtZS5yZXN0eWxlKHtcclxuICAgICAgICAgICAgLy8gUHJldmVudCBpZnJhbWUgZnJvbSBjbG9zaW5nIG9uIG1vdXNlIG91dC5cclxuICAgICAgICAgICAgc2V0SGlkZU9uTGVhdmU6IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgbmV0d29ya0Vycm9yID0gX2NyZWF0ZUVycm9yKGF1dGgsIFwibmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiIC8qIE5FVFdPUktfUkVRVUVTVF9GQUlMRUQgKi8pO1xyXG4gICAgICAgIC8vIENvbmZpcm0gaWZyYW1lIGlzIGNvcnJlY3RseSBsb2FkZWQuXHJcbiAgICAgICAgLy8gVG8gZmFsbGJhY2sgb24gZmFpbHVyZSwgc2V0IGEgdGltZW91dC5cclxuICAgICAgICBjb25zdCBuZXR3b3JrRXJyb3JUaW1lciA9IF93aW5kb3coKS5zZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgcmVqZWN0KG5ldHdvcmtFcnJvcik7XHJcbiAgICAgICAgfSwgUElOR19USU1FT1VULmdldCgpKTtcclxuICAgICAgICAvLyBDbGVhciB0aW1lciBhbmQgcmVzb2x2ZSBwZW5kaW5nIGlmcmFtZSByZWFkeSBwcm9taXNlLlxyXG4gICAgICAgIGZ1bmN0aW9uIGNsZWFyVGltZXJBbmRSZXNvbHZlKCkge1xyXG4gICAgICAgICAgICBfd2luZG93KCkuY2xlYXJUaW1lb3V0KG5ldHdvcmtFcnJvclRpbWVyKTtcclxuICAgICAgICAgICAgcmVzb2x2ZShpZnJhbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBUaGlzIHJldHVybnMgYW4gSVRoZW5hYmxlLiBIb3dldmVyIHRoZSByZWplY3QgcGFydCBkb2VzIG5vdCBjYWxsXHJcbiAgICAgICAgLy8gd2hlbiB0aGUgaWZyYW1lIGlzIG5vdCBsb2FkZWQuXHJcbiAgICAgICAgaWZyYW1lLnBpbmcoY2xlYXJUaW1lckFuZFJlc29sdmUpLnRoZW4oY2xlYXJUaW1lckFuZFJlc29sdmUsICgpID0+IHtcclxuICAgICAgICAgICAgcmVqZWN0KG5ldHdvcmtFcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IEJBU0VfUE9QVVBfT1BUSU9OUyA9IHtcclxuICAgIGxvY2F0aW9uOiAneWVzJyxcclxuICAgIHJlc2l6YWJsZTogJ3llcycsXHJcbiAgICBzdGF0dXNiYXI6ICd5ZXMnLFxyXG4gICAgdG9vbGJhcjogJ25vJ1xyXG59O1xyXG5jb25zdCBERUZBVUxUX1dJRFRIID0gNTAwO1xyXG5jb25zdCBERUZBVUxUX0hFSUdIVCA9IDYwMDtcclxuY29uc3QgVEFSR0VUX0JMQU5LID0gJ19ibGFuayc7XHJcbmNvbnN0IEZJUkVGT1hfRU1QVFlfVVJMID0gJ2h0dHA6Ly9sb2NhbGhvc3QnO1xyXG5jbGFzcyBBdXRoUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3Iod2luZG93KSB7XHJcbiAgICAgICAgdGhpcy53aW5kb3cgPSB3aW5kb3c7XHJcbiAgICAgICAgdGhpcy5hc3NvY2lhdGVkRXZlbnQgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMud2luZG93KSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndpbmRvdy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7IH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gX29wZW4oYXV0aCwgdXJsLCBuYW1lLCB3aWR0aCA9IERFRkFVTFRfV0lEVEgsIGhlaWdodCA9IERFRkFVTFRfSEVJR0hUKSB7XHJcbiAgICBjb25zdCB0b3AgPSBNYXRoLm1heCgod2luZG93LnNjcmVlbi5hdmFpbEhlaWdodCAtIGhlaWdodCkgLyAyLCAwKS50b1N0cmluZygpO1xyXG4gICAgY29uc3QgbGVmdCA9IE1hdGgubWF4KCh3aW5kb3cuc2NyZWVuLmF2YWlsV2lkdGggLSB3aWR0aCkgLyAyLCAwKS50b1N0cmluZygpO1xyXG4gICAgbGV0IHRhcmdldCA9ICcnO1xyXG4gICAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgQkFTRV9QT1BVUF9PUFRJT05TKSwgeyB3aWR0aDogd2lkdGgudG9TdHJpbmcoKSwgaGVpZ2h0OiBoZWlnaHQudG9TdHJpbmcoKSwgdG9wLFxyXG4gICAgICAgIGxlZnQgfSk7XHJcbiAgICAvLyBDaHJvbWUgaU9TIDcgYW5kIDggaXMgcmV0dXJuaW5nIGFuIHVuZGVmaW5lZCBwb3B1cCB3aW4gd2hlbiB0YXJnZXQgaXNcclxuICAgIC8vIHNwZWNpZmllZCwgZXZlbiB0aG91Z2ggdGhlIHBvcHVwIGlzIG5vdCBuZWNlc3NhcmlseSBibG9ja2VkLlxyXG4gICAgY29uc3QgdWEgPSBnZXRVQSgpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBpZiAobmFtZSkge1xyXG4gICAgICAgIHRhcmdldCA9IF9pc0Nocm9tZUlPUyh1YSkgPyBUQVJHRVRfQkxBTksgOiBuYW1lO1xyXG4gICAgfVxyXG4gICAgaWYgKF9pc0ZpcmVmb3godWEpKSB7XHJcbiAgICAgICAgLy8gRmlyZWZveCBjb21wbGFpbnMgd2hlbiBpbnZhbGlkIFVSTHMgYXJlIHBvcHBlZCBvdXQuIEhhY2t5IHdheSB0byBieXBhc3MuXHJcbiAgICAgICAgdXJsID0gdXJsIHx8IEZJUkVGT1hfRU1QVFlfVVJMO1xyXG4gICAgICAgIC8vIEZpcmVmb3ggZGlzYWJsZXMgYnkgZGVmYXVsdCBzY3JvbGxpbmcgb24gcG9wdXAgd2luZG93cywgd2hpY2ggY2FuIGNyZWF0ZVxyXG4gICAgICAgIC8vIGlzc3VlcyB3aGVuIHRoZSB1c2VyIGhhcyBtYW55IEdvb2dsZSBhY2NvdW50cywgZm9yIGluc3RhbmNlLlxyXG4gICAgICAgIG9wdGlvbnMuc2Nyb2xsYmFycyA9ICd5ZXMnO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgb3B0aW9uc1N0cmluZyA9IE9iamVjdC5lbnRyaWVzKG9wdGlvbnMpLnJlZHVjZSgoYWNjdW0sIFtrZXksIHZhbHVlXSkgPT4gYCR7YWNjdW19JHtrZXl9PSR7dmFsdWV9LGAsICcnKTtcclxuICAgIGlmIChfaXNJT1NTdGFuZGFsb25lKHVhKSAmJiB0YXJnZXQgIT09ICdfc2VsZicpIHtcclxuICAgICAgICBvcGVuQXNOZXdXaW5kb3dJT1ModXJsIHx8ICcnLCB0YXJnZXQpO1xyXG4gICAgICAgIHJldHVybiBuZXcgQXV0aFBvcHVwKG51bGwpO1xyXG4gICAgfVxyXG4gICAgLy8gYWJvdXQ6YmxhbmsgZ2V0dGluZyBzYW5pdGl6ZWQgY2F1c2luZyBicm93c2VycyBsaWtlIElFL0VkZ2UgdG8gZGlzcGxheVxyXG4gICAgLy8gYnJpZWYgZXJyb3IgbWVzc2FnZSBiZWZvcmUgcmVkaXJlY3RpbmcgdG8gaGFuZGxlci5cclxuICAgIGNvbnN0IG5ld1dpbiA9IHdpbmRvdy5vcGVuKHVybCB8fCAnJywgdGFyZ2V0LCBvcHRpb25zU3RyaW5nKTtcclxuICAgIF9hc3NlcnQobmV3V2luLCBhdXRoLCBcInBvcHVwLWJsb2NrZWRcIiAvKiBQT1BVUF9CTE9DS0VEICovKTtcclxuICAgIC8vIEZsYWt5IG9uIElFIGVkZ2UsIGVuY2Fwc3VsYXRlIHdpdGggYSB0cnkgYW5kIGNhdGNoLlxyXG4gICAgdHJ5IHtcclxuICAgICAgICBuZXdXaW4uZm9jdXMoKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7IH1cclxuICAgIHJldHVybiBuZXcgQXV0aFBvcHVwKG5ld1dpbik7XHJcbn1cclxuZnVuY3Rpb24gb3BlbkFzTmV3V2luZG93SU9TKHVybCwgdGFyZ2V0KSB7XHJcbiAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgIGVsLmhyZWYgPSB1cmw7XHJcbiAgICBlbC50YXJnZXQgPSB0YXJnZXQ7XHJcbiAgICBjb25zdCBjbGljayA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdNb3VzZUV2ZW50Jyk7XHJcbiAgICBjbGljay5pbml0TW91c2VFdmVudCgnY2xpY2snLCB0cnVlLCB0cnVlLCB3aW5kb3csIDEsIDAsIDAsIDAsIDAsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCAxLCBudWxsKTtcclxuICAgIGVsLmRpc3BhdGNoRXZlbnQoY2xpY2spO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBVUkwgZm9yIEF1dGhlbnRpY2F0aW9uIHdpZGdldCB3aGljaCB3aWxsIGluaXRpYXRlIHRoZSBPQXV0aCBoYW5kc2hha2VcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBXSURHRVRfUEFUSCA9ICdfXy9hdXRoL2hhbmRsZXInO1xyXG4vKipcclxuICogVVJMIGZvciBlbXVsYXRlZCBlbnZpcm9ubWVudFxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNvbnN0IEVNVUxBVE9SX1dJREdFVF9QQVRIID0gJ2VtdWxhdG9yL2F1dGgvaGFuZGxlcic7XHJcbmZ1bmN0aW9uIF9nZXRSZWRpcmVjdFVybChhdXRoLCBwcm92aWRlciwgYXV0aFR5cGUsIHJlZGlyZWN0VXJsLCBldmVudElkLCBhZGRpdGlvbmFsUGFyYW1zKSB7XHJcbiAgICBfYXNzZXJ0KGF1dGguY29uZmlnLmF1dGhEb21haW4sIGF1dGgsIFwiYXV0aC1kb21haW4tY29uZmlnLXJlcXVpcmVkXCIgLyogTUlTU0lOR19BVVRIX0RPTUFJTiAqLyk7XHJcbiAgICBfYXNzZXJ0KGF1dGguY29uZmlnLmFwaUtleSwgYXV0aCwgXCJpbnZhbGlkLWFwaS1rZXlcIiAvKiBJTlZBTElEX0FQSV9LRVkgKi8pO1xyXG4gICAgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgICAgIGFwaUtleTogYXV0aC5jb25maWcuYXBpS2V5LFxyXG4gICAgICAgIGFwcE5hbWU6IGF1dGgubmFtZSxcclxuICAgICAgICBhdXRoVHlwZSxcclxuICAgICAgICByZWRpcmVjdFVybCxcclxuICAgICAgICB2OiBTREtfVkVSU0lPTixcclxuICAgICAgICBldmVudElkXHJcbiAgICB9O1xyXG4gICAgaWYgKHByb3ZpZGVyIGluc3RhbmNlb2YgRmVkZXJhdGVkQXV0aFByb3ZpZGVyKSB7XHJcbiAgICAgICAgcHJvdmlkZXIuc2V0RGVmYXVsdExhbmd1YWdlKGF1dGgubGFuZ3VhZ2VDb2RlKTtcclxuICAgICAgICBwYXJhbXMucHJvdmlkZXJJZCA9IHByb3ZpZGVyLnByb3ZpZGVySWQgfHwgJyc7XHJcbiAgICAgICAgaWYgKCFpc0VtcHR5KHByb3ZpZGVyLmdldEN1c3RvbVBhcmFtZXRlcnMoKSkpIHtcclxuICAgICAgICAgICAgcGFyYW1zLmN1c3RvbVBhcmFtZXRlcnMgPSBKU09OLnN0cmluZ2lmeShwcm92aWRlci5nZXRDdXN0b21QYXJhbWV0ZXJzKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBUT0RPIHNldCBhZGRpdGlvbmFsUGFyYW1zIGZyb20gdGhlIHByb3ZpZGVyIGFzIHdlbGw/XHJcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoYWRkaXRpb25hbFBhcmFtcyB8fCB7fSkpIHtcclxuICAgICAgICAgICAgcGFyYW1zW2tleV0gPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAocHJvdmlkZXIgaW5zdGFuY2VvZiBCYXNlT0F1dGhQcm92aWRlcikge1xyXG4gICAgICAgIGNvbnN0IHNjb3BlcyA9IHByb3ZpZGVyLmdldFNjb3BlcygpLmZpbHRlcihzY29wZSA9PiBzY29wZSAhPT0gJycpO1xyXG4gICAgICAgIGlmIChzY29wZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBwYXJhbXMuc2NvcGVzID0gc2NvcGVzLmpvaW4oJywnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoYXV0aC50ZW5hbnRJZCkge1xyXG4gICAgICAgIHBhcmFtcy50aWQgPSBhdXRoLnRlbmFudElkO1xyXG4gICAgfVxyXG4gICAgLy8gVE9ETzogbWF5YmUgc2V0IGVpZCBhcyBlbmRpcG9pbnRJZFxyXG4gICAgLy8gVE9ETzogbWF5YmUgc2V0IGZ3IGFzIEZyYW1ld29ya3Muam9pbihcIixcIilcclxuICAgIGNvbnN0IHBhcmFtc0RpY3QgPSBwYXJhbXM7XHJcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhwYXJhbXNEaWN0KSkge1xyXG4gICAgICAgIGlmIChwYXJhbXNEaWN0W2tleV0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBkZWxldGUgcGFyYW1zRGljdFtrZXldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBgJHtnZXRIYW5kbGVyQmFzZShhdXRoKX0/JHtxdWVyeXN0cmluZyhwYXJhbXNEaWN0KS5zbGljZSgxKX1gO1xyXG59XHJcbmZ1bmN0aW9uIGdldEhhbmRsZXJCYXNlKHsgY29uZmlnIH0pIHtcclxuICAgIGlmICghY29uZmlnLmVtdWxhdG9yKSB7XHJcbiAgICAgICAgcmV0dXJuIGBodHRwczovLyR7Y29uZmlnLmF1dGhEb21haW59LyR7V0lER0VUX1BBVEh9YDtcclxuICAgIH1cclxuICAgIHJldHVybiBfZW11bGF0b3JVcmwoY29uZmlnLCBFTVVMQVRPUl9XSURHRVRfUEFUSCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBzcGVjaWFsIHdlYiBzdG9yYWdlIGV2ZW50XHJcbiAqXHJcbiAqL1xyXG5jb25zdCBXRUJfU1RPUkFHRV9TVVBQT1JUX0tFWSA9ICd3ZWJTdG9yYWdlU3VwcG9ydCc7XHJcbmNsYXNzIEJyb3dzZXJQb3B1cFJlZGlyZWN0UmVzb2x2ZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXJzID0ge307XHJcbiAgICAgICAgdGhpcy5pZnJhbWVzID0ge307XHJcbiAgICAgICAgdGhpcy5vcmlnaW5WYWxpZGF0aW9uUHJvbWlzZXMgPSB7fTtcclxuICAgICAgICB0aGlzLl9yZWRpcmVjdFBlcnNpc3RlbmNlID0gYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZTtcclxuICAgICAgICB0aGlzLl9jb21wbGV0ZVJlZGlyZWN0Rm4gPSBfZ2V0UmVkaXJlY3RSZXN1bHQ7XHJcbiAgICB9XHJcbiAgICAvLyBXcmFwcGluZyBpbiBhc3luYyBldmVuIHRob3VnaCB3ZSBkb24ndCBhd2FpdCBhbnl3aGVyZSBpbiBvcmRlclxyXG4gICAgLy8gdG8gbWFrZSBzdXJlIGVycm9ycyBhcmUgcmFpc2VkIGFzIHByb21pc2UgcmVqZWN0aW9uc1xyXG4gICAgYXN5bmMgX29wZW5Qb3B1cChhdXRoLCBwcm92aWRlciwgYXV0aFR5cGUsIGV2ZW50SWQpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgZGVidWdBc3NlcnQoKF9hID0gdGhpcy5ldmVudE1hbmFnZXJzW2F1dGguX2tleSgpXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1hbmFnZXIsICdfaW5pdGlhbGl6ZSgpIG5vdCBjYWxsZWQgYmVmb3JlIF9vcGVuUG9wdXAoKScpO1xyXG4gICAgICAgIGNvbnN0IHVybCA9IF9nZXRSZWRpcmVjdFVybChhdXRoLCBwcm92aWRlciwgYXV0aFR5cGUsIF9nZXRDdXJyZW50VXJsKCksIGV2ZW50SWQpO1xyXG4gICAgICAgIHJldHVybiBfb3BlbihhdXRoLCB1cmwsIF9nZW5lcmF0ZUV2ZW50SWQoKSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfb3BlblJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyLCBhdXRoVHlwZSwgZXZlbnRJZCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuX29yaWdpblZhbGlkYXRpb24oYXV0aCk7XHJcbiAgICAgICAgX3NldFdpbmRvd0xvY2F0aW9uKF9nZXRSZWRpcmVjdFVybChhdXRoLCBwcm92aWRlciwgYXV0aFR5cGUsIF9nZXRDdXJyZW50VXJsKCksIGV2ZW50SWQpKTtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKCkgPT4geyB9KTtcclxuICAgIH1cclxuICAgIF9pbml0aWFsaXplKGF1dGgpIHtcclxuICAgICAgICBjb25zdCBrZXkgPSBhdXRoLl9rZXkoKTtcclxuICAgICAgICBpZiAodGhpcy5ldmVudE1hbmFnZXJzW2tleV0pIHtcclxuICAgICAgICAgICAgY29uc3QgeyBtYW5hZ2VyLCBwcm9taXNlIH0gPSB0aGlzLmV2ZW50TWFuYWdlcnNba2V5XTtcclxuICAgICAgICAgICAgaWYgKG1hbmFnZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobWFuYWdlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkZWJ1Z0Fzc2VydChwcm9taXNlLCAnSWYgbWFuYWdlciBpcyBub3Qgc2V0LCBwcm9taXNlIHNob3VsZCBiZScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMuaW5pdEFuZEdldE1hbmFnZXIoYXV0aCk7XHJcbiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXJzW2tleV0gPSB7IHByb21pc2UgfTtcclxuICAgICAgICAvLyBJZiB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCwgdGhlIGtleSBzaG91bGQgYmUgcmVtb3ZlZCBzbyB0aGF0IHRoZVxyXG4gICAgICAgIC8vIG9wZXJhdGlvbiBjYW4gYmUgcmV0cmllZCBsYXRlci5cclxuICAgICAgICBwcm9taXNlLmNhdGNoKCgpID0+IHtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuZXZlbnRNYW5hZ2Vyc1trZXldO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgaW5pdEFuZEdldE1hbmFnZXIoYXV0aCkge1xyXG4gICAgICAgIGNvbnN0IGlmcmFtZSA9IGF3YWl0IF9vcGVuSWZyYW1lKGF1dGgpO1xyXG4gICAgICAgIGNvbnN0IG1hbmFnZXIgPSBuZXcgQXV0aEV2ZW50TWFuYWdlcihhdXRoKTtcclxuICAgICAgICBpZnJhbWUucmVnaXN0ZXIoJ2F1dGhFdmVudCcsIChpZnJhbWVFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBfYXNzZXJ0KGlmcmFtZUV2ZW50ID09PSBudWxsIHx8IGlmcmFtZUV2ZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpZnJhbWVFdmVudC5hdXRoRXZlbnQsIGF1dGgsIFwiaW52YWxpZC1hdXRoLWV2ZW50XCIgLyogSU5WQUxJRF9BVVRIX0VWRU5UICovKTtcclxuICAgICAgICAgICAgLy8gVE9ETzogQ29uc2lkZXIgc3BsaXR0aW5nIHJlZGlyZWN0IGFuZCBwb3B1cCBldmVudHMgZWFybGllciBvblxyXG4gICAgICAgICAgICBjb25zdCBoYW5kbGVkID0gbWFuYWdlci5vbkV2ZW50KGlmcmFtZUV2ZW50LmF1dGhFdmVudCk7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogaGFuZGxlZCA/IFwiQUNLXCIgLyogQUNLICovIDogXCJFUlJPUlwiIC8qIEVSUk9SICovIH07XHJcbiAgICAgICAgfSwgZ2FwaS5pZnJhbWVzLkNST1NTX09SSUdJTl9JRlJBTUVTX0ZJTFRFUik7XHJcbiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXJzW2F1dGguX2tleSgpXSA9IHsgbWFuYWdlciB9O1xyXG4gICAgICAgIHRoaXMuaWZyYW1lc1thdXRoLl9rZXkoKV0gPSBpZnJhbWU7XHJcbiAgICAgICAgcmV0dXJuIG1hbmFnZXI7XHJcbiAgICB9XHJcbiAgICBfaXNJZnJhbWVXZWJTdG9yYWdlU3VwcG9ydGVkKGF1dGgsIGNiKSB7XHJcbiAgICAgICAgY29uc3QgaWZyYW1lID0gdGhpcy5pZnJhbWVzW2F1dGguX2tleSgpXTtcclxuICAgICAgICBpZnJhbWUuc2VuZChXRUJfU1RPUkFHRV9TVVBQT1JUX0tFWSwgeyB0eXBlOiBXRUJfU1RPUkFHRV9TVVBQT1JUX0tFWSB9LCByZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzU3VwcG9ydGVkID0gKF9hID0gcmVzdWx0ID09PSBudWxsIHx8IHJlc3VsdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzdWx0WzBdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbV0VCX1NUT1JBR0VfU1VQUE9SVF9LRVldO1xyXG4gICAgICAgICAgICBpZiAoaXNTdXBwb3J0ZWQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgY2IoISFpc1N1cHBvcnRlZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX2ZhaWwoYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICB9LCBnYXBpLmlmcmFtZXMuQ1JPU1NfT1JJR0lOX0lGUkFNRVNfRklMVEVSKTtcclxuICAgIH1cclxuICAgIF9vcmlnaW5WYWxpZGF0aW9uKGF1dGgpIHtcclxuICAgICAgICBjb25zdCBrZXkgPSBhdXRoLl9rZXkoKTtcclxuICAgICAgICBpZiAoIXRoaXMub3JpZ2luVmFsaWRhdGlvblByb21pc2VzW2tleV0pIHtcclxuICAgICAgICAgICAgdGhpcy5vcmlnaW5WYWxpZGF0aW9uUHJvbWlzZXNba2V5XSA9IF92YWxpZGF0ZU9yaWdpbihhdXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3JpZ2luVmFsaWRhdGlvblByb21pc2VzW2tleV07XHJcbiAgICB9XHJcbiAgICBnZXQgX3Nob3VsZEluaXRQcm9hY3RpdmVseSgpIHtcclxuICAgICAgICAvLyBNb2JpbGUgYnJvd3NlcnMgYW5kIFNhZmFyaSBuZWVkIHRvIG9wdGltaXN0aWNhbGx5IGluaXRpYWxpemVcclxuICAgICAgICByZXR1cm4gX2lzTW9iaWxlQnJvd3NlcigpIHx8IF9pc1NhZmFyaSgpIHx8IF9pc0lPUygpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSBzdWl0YWJsZSBmb3IgYnJvd3NlclxyXG4gKiBiYXNlZCBhcHBsaWNhdGlvbnMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGJyb3dzZXJQb3B1cFJlZGlyZWN0UmVzb2x2ZXIgPSBCcm93c2VyUG9wdXBSZWRpcmVjdFJlc29sdmVyO1xuXG5jbGFzcyBNdWx0aUZhY3RvckFzc2VydGlvbkltcGwge1xyXG4gICAgY29uc3RydWN0b3IoZmFjdG9ySWQpIHtcclxuICAgICAgICB0aGlzLmZhY3RvcklkID0gZmFjdG9ySWQ7XHJcbiAgICB9XHJcbiAgICBfcHJvY2VzcyhhdXRoLCBzZXNzaW9uLCBkaXNwbGF5TmFtZSkge1xyXG4gICAgICAgIHN3aXRjaCAoc2Vzc2lvbi50eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJlbnJvbGxcIiAvKiBFTlJPTEwgKi86XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZmluYWxpemVFbnJvbGwoYXV0aCwgc2Vzc2lvbi5jcmVkZW50aWFsLCBkaXNwbGF5TmFtZSk7XHJcbiAgICAgICAgICAgIGNhc2UgXCJzaWduaW5cIiAvKiBTSUdOX0lOICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ZpbmFsaXplU2lnbkluKGF1dGgsIHNlc3Npb24uY3JlZGVudGlhbCk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVidWdGYWlsKCd1bmV4cGVjdGVkIE11bHRpRmFjdG9yU2Vzc2lvblR5cGUnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIHtAaW5oZXJpdGRvYyBQaG9uZU11bHRpRmFjdG9yQXNzZXJ0aW9ufVxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBQaG9uZU11bHRpRmFjdG9yQXNzZXJ0aW9uSW1wbCBleHRlbmRzIE11bHRpRmFjdG9yQXNzZXJ0aW9uSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgc3VwZXIoXCJwaG9uZVwiIC8qIFBIT05FICovKTtcclxuICAgICAgICB0aGlzLmNyZWRlbnRpYWwgPSBjcmVkZW50aWFsO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgc3RhdGljIF9mcm9tQ3JlZGVudGlhbChjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQaG9uZU11bHRpRmFjdG9yQXNzZXJ0aW9uSW1wbChjcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9maW5hbGl6ZUVucm9sbChhdXRoLCBpZFRva2VuLCBkaXNwbGF5TmFtZSkge1xyXG4gICAgICAgIHJldHVybiBmaW5hbGl6ZUVucm9sbFBob25lTWZhKGF1dGgsIHtcclxuICAgICAgICAgICAgaWRUb2tlbixcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUsXHJcbiAgICAgICAgICAgIHBob25lVmVyaWZpY2F0aW9uSW5mbzogdGhpcy5jcmVkZW50aWFsLl9tYWtlVmVyaWZpY2F0aW9uUmVxdWVzdCgpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZmluYWxpemVTaWduSW4oYXV0aCwgbWZhUGVuZGluZ0NyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gZmluYWxpemVTaWduSW5QaG9uZU1mYShhdXRoLCB7XHJcbiAgICAgICAgICAgIG1mYVBlbmRpbmdDcmVkZW50aWFsLFxyXG4gICAgICAgICAgICBwaG9uZVZlcmlmaWNhdGlvbkluZm86IHRoaXMuY3JlZGVudGlhbC5fbWFrZVZlcmlmaWNhdGlvblJlcXVlc3QoKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgZ2VuZXJhdGluZyBhIHtAbGluayBQaG9uZU11bHRpRmFjdG9yQXNzZXJ0aW9ufS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgUGhvbmVNdWx0aUZhY3RvckdlbmVyYXRvciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBQcm92aWRlcyBhIHtAbGluayBQaG9uZU11bHRpRmFjdG9yQXNzZXJ0aW9ufSB0byBjb25maXJtIG93bmVyc2hpcCBvZiB0aGUgcGhvbmUgc2Vjb25kIGZhY3Rvci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcGhvbmVBdXRoQ3JlZGVudGlhbCAtIEEgY3JlZGVudGlhbCBwcm92aWRlZCBieSB7QGxpbmsgUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbH0uXHJcbiAgICAgKiBAcmV0dXJucyBBIHtAbGluayBQaG9uZU11bHRpRmFjdG9yQXNzZXJ0aW9ufSB3aGljaCBjYW4gYmUgdXNlZCB3aXRoXHJcbiAgICAgKiB7QGxpbmsgTXVsdGlGYWN0b3JSZXNvbHZlci5yZXNvbHZlU2lnbklufVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYXNzZXJ0aW9uKGNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gUGhvbmVNdWx0aUZhY3RvckFzc2VydGlvbkltcGwuX2Zyb21DcmVkZW50aWFsKGNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBUaGUgaWRlbnRpZmllciBvZiB0aGUgcGhvbmUgc2Vjb25kIGZhY3RvcjogYHBob25lYC5cclxuICovXHJcblBob25lTXVsdGlGYWN0b3JHZW5lcmF0b3IuRkFDVE9SX0lEID0gJ3Bob25lJztcblxudmFyIG5hbWUgPSBcIkBmaXJlYmFzZS9hdXRoXCI7XG52YXIgdmVyc2lvbiA9IFwiMC4xOS40XCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIEF1dGhJbnRlcm9wIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgpIHtcclxuICAgICAgICB0aGlzLmF1dGggPSBhdXRoO1xyXG4gICAgICAgIHRoaXMuaW50ZXJuYWxMaXN0ZW5lcnMgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICBnZXRVaWQoKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0QXV0aENvbmZpZ3VyZWQoKTtcclxuICAgICAgICByZXR1cm4gKChfYSA9IHRoaXMuYXV0aC5jdXJyZW50VXNlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnVpZCkgfHwgbnVsbDtcclxuICAgIH1cclxuICAgIGFzeW5jIGdldFRva2VuKGZvcmNlUmVmcmVzaCkge1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0QXV0aENvbmZpZ3VyZWQoKTtcclxuICAgICAgICBhd2FpdCB0aGlzLmF1dGguX2luaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgICAgICBpZiAoIXRoaXMuYXV0aC5jdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYWNjZXNzVG9rZW4gPSBhd2FpdCB0aGlzLmF1dGguY3VycmVudFVzZXIuZ2V0SWRUb2tlbihmb3JjZVJlZnJlc2gpO1xyXG4gICAgICAgIHJldHVybiB7IGFjY2Vzc1Rva2VuIH07XHJcbiAgICB9XHJcbiAgICBhZGRBdXRoVG9rZW5MaXN0ZW5lcihsaXN0ZW5lcikge1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0QXV0aENvbmZpZ3VyZWQoKTtcclxuICAgICAgICBpZiAodGhpcy5pbnRlcm5hbExpc3RlbmVycy5oYXMobGlzdGVuZXIpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdW5zdWJzY3JpYmUgPSB0aGlzLmF1dGgub25JZFRva2VuQ2hhbmdlZCh1c2VyID0+IHtcclxuICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICBsaXN0ZW5lcigoKF9hID0gdXNlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnN0c1Rva2VuTWFuYWdlci5hY2Nlc3NUb2tlbikgfHwgbnVsbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5pbnRlcm5hbExpc3RlbmVycy5zZXQobGlzdGVuZXIsIHVuc3Vic2NyaWJlKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVByb2FjdGl2ZVJlZnJlc2goKTtcclxuICAgIH1cclxuICAgIHJlbW92ZUF1dGhUb2tlbkxpc3RlbmVyKGxpc3RlbmVyKSB7XHJcbiAgICAgICAgdGhpcy5hc3NlcnRBdXRoQ29uZmlndXJlZCgpO1xyXG4gICAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gdGhpcy5pbnRlcm5hbExpc3RlbmVycy5nZXQobGlzdGVuZXIpO1xyXG4gICAgICAgIGlmICghdW5zdWJzY3JpYmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmludGVybmFsTGlzdGVuZXJzLmRlbGV0ZShsaXN0ZW5lcik7XHJcbiAgICAgICAgdW5zdWJzY3JpYmUoKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVByb2FjdGl2ZVJlZnJlc2goKTtcclxuICAgIH1cclxuICAgIGFzc2VydEF1dGhDb25maWd1cmVkKCkge1xyXG4gICAgICAgIF9hc3NlcnQodGhpcy5hdXRoLl9pbml0aWFsaXphdGlvblByb21pc2UsIFwiZGVwZW5kZW50LXNkay1pbml0aWFsaXplZC1iZWZvcmUtYXV0aFwiIC8qIERFUEVOREVOVF9TREtfSU5JVF9CRUZPUkVfQVVUSCAqLyk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGVQcm9hY3RpdmVSZWZyZXNoKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmludGVybmFsTGlzdGVuZXJzLnNpemUgPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0aC5fc3RhcnRQcm9hY3RpdmVSZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmF1dGguX3N0b3BQcm9hY3RpdmVSZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGdldFZlcnNpb25Gb3JQbGF0Zm9ybShjbGllbnRQbGF0Zm9ybSkge1xyXG4gICAgc3dpdGNoIChjbGllbnRQbGF0Zm9ybSkge1xyXG4gICAgICAgIGNhc2UgXCJOb2RlXCIgLyogTk9ERSAqLzpcclxuICAgICAgICAgICAgcmV0dXJuICdub2RlJztcclxuICAgICAgICBjYXNlIFwiUmVhY3ROYXRpdmVcIiAvKiBSRUFDVF9OQVRJVkUgKi86XHJcbiAgICAgICAgICAgIHJldHVybiAncm4nO1xyXG4gICAgICAgIGNhc2UgXCJXb3JrZXJcIiAvKiBXT1JLRVIgKi86XHJcbiAgICAgICAgICAgIHJldHVybiAnd2Vid29ya2VyJztcclxuICAgICAgICBjYXNlIFwiQ29yZG92YVwiIC8qIENPUkRPVkEgKi86XHJcbiAgICAgICAgICAgIHJldHVybiAnY29yZG92YSc7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxufVxyXG4vKiogQGludGVybmFsICovXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyQXV0aChjbGllbnRQbGF0Zm9ybSkge1xyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoXCJhdXRoXCIgLyogQVVUSCAqLywgKGNvbnRhaW5lciwgeyBvcHRpb25zOiBkZXBzIH0pID0+IHtcclxuICAgICAgICBjb25zdCBhcHAgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcCcpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIGNvbnN0IHsgYXBpS2V5LCBhdXRoRG9tYWluIH0gPSBhcHAub3B0aW9ucztcclxuICAgICAgICByZXR1cm4gKGFwcCA9PiB7XHJcbiAgICAgICAgICAgIF9hc3NlcnQoYXBpS2V5ICYmICFhcGlLZXkuaW5jbHVkZXMoJzonKSwgXCJpbnZhbGlkLWFwaS1rZXlcIiAvKiBJTlZBTElEX0FQSV9LRVkgKi8sIHsgYXBwTmFtZTogYXBwLm5hbWUgfSk7XHJcbiAgICAgICAgICAgIC8vIEF1dGggZG9tYWluIGlzIG9wdGlvbmFsIGlmIElkUCBzaWduIGluIGlzbid0IGJlaW5nIHVzZWRcclxuICAgICAgICAgICAgX2Fzc2VydCghKGF1dGhEb21haW4gPT09IG51bGwgfHwgYXV0aERvbWFpbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogYXV0aERvbWFpbi5pbmNsdWRlcygnOicpKSwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovLCB7XHJcbiAgICAgICAgICAgICAgICBhcHBOYW1lOiBhcHAubmFtZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29uc3QgY29uZmlnID0ge1xyXG4gICAgICAgICAgICAgICAgYXBpS2V5LFxyXG4gICAgICAgICAgICAgICAgYXV0aERvbWFpbixcclxuICAgICAgICAgICAgICAgIGNsaWVudFBsYXRmb3JtLFxyXG4gICAgICAgICAgICAgICAgYXBpSG9zdDogXCJpZGVudGl0eXRvb2xraXQuZ29vZ2xlYXBpcy5jb21cIiAvKiBBUElfSE9TVCAqLyxcclxuICAgICAgICAgICAgICAgIHRva2VuQXBpSG9zdDogXCJzZWN1cmV0b2tlbi5nb29nbGVhcGlzLmNvbVwiIC8qIFRPS0VOX0FQSV9IT1NUICovLFxyXG4gICAgICAgICAgICAgICAgYXBpU2NoZW1lOiBcImh0dHBzXCIgLyogQVBJX1NDSEVNRSAqLyxcclxuICAgICAgICAgICAgICAgIHNka0NsaWVudFZlcnNpb246IF9nZXRDbGllbnRWZXJzaW9uKGNsaWVudFBsYXRmb3JtKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjb25zdCBhdXRoSW5zdGFuY2UgPSBuZXcgQXV0aEltcGwoYXBwLCBjb25maWcpO1xyXG4gICAgICAgICAgICBfaW5pdGlhbGl6ZUF1dGhJbnN0YW5jZShhdXRoSW5zdGFuY2UsIGRlcHMpO1xyXG4gICAgICAgICAgICByZXR1cm4gYXV0aEluc3RhbmNlO1xyXG4gICAgICAgIH0pKGFwcCk7XHJcbiAgICB9LCBcIlBVQkxJQ1wiIC8qIFBVQkxJQyAqLylcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBdXRoIGNhbiBvbmx5IGJlIGluaXRpYWxpemVkIGJ5IGV4cGxpY2l0bHkgY2FsbGluZyBnZXRBdXRoKCkgb3IgaW5pdGlhbGl6ZUF1dGgoKVxyXG4gICAgICAgICAqIEZvciB3aHkgd2UgZG8gdGhpcywgU2VlIGdvL2ZpcmViYXNlLW5leHQtYXV0aC1pbml0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgLnNldEluc3RhbnRpYXRpb25Nb2RlKFwiRVhQTElDSVRcIiAvKiBFWFBMSUNJVCAqLylcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBCZWNhdXNlIGFsbCBmaXJlYmFzZSBwcm9kdWN0cyB0aGF0IGRlcGVuZCBvbiBhdXRoIGRlcGVuZCBvbiBhdXRoLWludGVybmFsIGRpcmVjdGx5LFxyXG4gICAgICAgICAqIHdlIG5lZWQgdG8gaW5pdGlhbGl6ZSBhdXRoLWludGVybmFsIGFmdGVyIGF1dGggaXMgaW5pdGlhbGl6ZWQgdG8gbWFrZSBpdCBhdmFpbGFibGUgdG8gb3RoZXIgZmlyZWJhc2UgcHJvZHVjdHMuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgLnNldEluc3RhbmNlQ3JlYXRlZENhbGxiYWNrKChjb250YWluZXIsIF9pbnN0YW5jZUlkZW50aWZpZXIsIF9pbnN0YW5jZSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGF1dGhJbnRlcm5hbFByb3ZpZGVyID0gY29udGFpbmVyLmdldFByb3ZpZGVyKFwiYXV0aC1pbnRlcm5hbFwiIC8qIEFVVEhfSU5URVJOQUwgKi8pO1xyXG4gICAgICAgIGF1dGhJbnRlcm5hbFByb3ZpZGVyLmluaXRpYWxpemUoKTtcclxuICAgIH0pKTtcclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KFwiYXV0aC1pbnRlcm5hbFwiIC8qIEFVVEhfSU5URVJOQUwgKi8sIGNvbnRhaW5lciA9PiB7XHJcbiAgICAgICAgY29uc3QgYXV0aCA9IF9jYXN0QXV0aChjb250YWluZXIuZ2V0UHJvdmlkZXIoXCJhdXRoXCIgLyogQVVUSCAqLykuZ2V0SW1tZWRpYXRlKCkpO1xyXG4gICAgICAgIHJldHVybiAoYXV0aCA9PiBuZXcgQXV0aEludGVyb3AoYXV0aCkpKGF1dGgpO1xyXG4gICAgfSwgXCJQUklWQVRFXCIgLyogUFJJVkFURSAqLykuc2V0SW5zdGFudGlhdGlvbk1vZGUoXCJFWFBMSUNJVFwiIC8qIEVYUExJQ0lUICovKSk7XHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbiwgZ2V0VmVyc2lvbkZvclBsYXRmb3JtKGNsaWVudFBsYXRmb3JtKSk7XHJcbiAgICAvLyBCVUlMRF9UQVJHRVQgd2lsbCBiZSByZXBsYWNlZCBieSB2YWx1ZXMgbGlrZSBlc201LCBlc20yMDE3LCBjanM1LCBldGMgZHVyaW5nIHRoZSBjb21waWxhdGlvblxyXG4gICAgcmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24sICdlc20yMDE3Jyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIEF1dGggaW5zdGFuY2UgYXNzb2NpYXRlZCB3aXRoIHRoZSBwcm92aWRlZCB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0uXHJcbiAqIElmIG5vIGluc3RhbmNlIGV4aXN0cywgaW5pdGlhbGl6ZXMgYW4gQXV0aCBpbnN0YW5jZSB3aXRoIHBsYXRmb3JtLXNwZWNpZmljIGRlZmF1bHQgZGVwZW5kZW5jaWVzLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXBwIC0gVGhlIEZpcmViYXNlIEFwcC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QXV0aChhcHAgPSBnZXRBcHAoKSkge1xyXG4gICAgY29uc3QgcHJvdmlkZXIgPSBfZ2V0UHJvdmlkZXIoYXBwLCAnYXV0aCcpO1xyXG4gICAgaWYgKHByb3ZpZGVyLmlzSW5pdGlhbGl6ZWQoKSkge1xyXG4gICAgICAgIHJldHVybiBwcm92aWRlci5nZXRJbW1lZGlhdGUoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBpbml0aWFsaXplQXV0aChhcHAsIHtcclxuICAgICAgICBwb3B1cFJlZGlyZWN0UmVzb2x2ZXI6IGJyb3dzZXJQb3B1cFJlZGlyZWN0UmVzb2x2ZXIsXHJcbiAgICAgICAgcGVyc2lzdGVuY2U6IFtcclxuICAgICAgICAgICAgaW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZSxcclxuICAgICAgICAgICAgYnJvd3NlckxvY2FsUGVyc2lzdGVuY2UsXHJcbiAgICAgICAgICAgIGJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2VcclxuICAgICAgICBdXHJcbiAgICB9KTtcclxufVxyXG5yZWdpc3RlckF1dGgoXCJCcm93c2VyXCIgLyogQlJPV1NFUiAqLyk7XG5cbmV4cG9ydCB7IHNlbmRQYXNzd29yZFJlc2V0RW1haWwgYXMgJCwgQWN0aW9uQ29kZU9wZXJhdGlvbiBhcyBBLCBwcm9kRXJyb3JNYXAgYXMgQiwgQVVUSF9FUlJPUl9DT0RFU19NQVBfRE9fTk9UX1VTRV9JTlRFUk5BTExZIGFzIEMsIGluaXRpYWxpemVBdXRoIGFzIEQsIGNvbm5lY3RBdXRoRW11bGF0b3IgYXMgRSwgRmFjdG9ySWQgYXMgRiwgQXV0aENyZWRlbnRpYWwgYXMgRywgRW1haWxBdXRoQ3JlZGVudGlhbCBhcyBILCBPQXV0aENyZWRlbnRpYWwgYXMgSSwgUGhvbmVBdXRoQ3JlZGVudGlhbCBhcyBKLCBpbk1lbW9yeVBlcnNpc3RlbmNlIGFzIEssIEVtYWlsQXV0aFByb3ZpZGVyIGFzIEwsIEZhY2Vib29rQXV0aFByb3ZpZGVyIGFzIE0sIEdvb2dsZUF1dGhQcm92aWRlciBhcyBOLCBPcGVyYXRpb25UeXBlIGFzIE8sIFBob25lQXV0aFByb3ZpZGVyIGFzIFAsIEdpdGh1YkF1dGhQcm92aWRlciBhcyBRLCBSZWNhcHRjaGFWZXJpZmllciBhcyBSLCBTaWduSW5NZXRob2QgYXMgUywgT0F1dGhQcm92aWRlciBhcyBULCBTQU1MQXV0aFByb3ZpZGVyIGFzIFUsIFR3aXR0ZXJBdXRoUHJvdmlkZXIgYXMgViwgc2lnbkluQW5vbnltb3VzbHkgYXMgVywgc2lnbkluV2l0aENyZWRlbnRpYWwgYXMgWCwgbGlua1dpdGhDcmVkZW50aWFsIGFzIFksIHJlYXV0aGVudGljYXRlV2l0aENyZWRlbnRpYWwgYXMgWiwgc2lnbkluV2l0aEN1c3RvbVRva2VuIGFzIF8sIGJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UgYXMgYSwgY29uZmlybVBhc3N3b3JkUmVzZXQgYXMgYTAsIGFwcGx5QWN0aW9uQ29kZSBhcyBhMSwgY2hlY2tBY3Rpb25Db2RlIGFzIGEyLCB2ZXJpZnlQYXNzd29yZFJlc2V0Q29kZSBhcyBhMywgY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkIGFzIGE0LCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZCBhcyBhNSwgc2VuZFNpZ25JbkxpbmtUb0VtYWlsIGFzIGE2LCBpc1NpZ25JbldpdGhFbWFpbExpbmsgYXMgYTcsIHNpZ25JbldpdGhFbWFpbExpbmsgYXMgYTgsIGZldGNoU2lnbkluTWV0aG9kc0ZvckVtYWlsIGFzIGE5LCBfZ2V0UmVkaXJlY3RSZXN1bHQgYXMgYUEsIF9jbGVhclJlZGlyZWN0T3V0Y29tZXMgYXMgYUIsIF9jYXN0QXV0aCBhcyBhQywgVXNlckltcGwgYXMgYUQsIEF1dGhJbXBsIGFzIGFFLCBfZ2V0Q2xpZW50VmVyc2lvbiBhcyBhRiwgX2dlbmVyYXRlRXZlbnRJZCBhcyBhRywgQXV0aFBvcHVwIGFzIGFILCBGZXRjaFByb3ZpZGVyIGFzIGFJLCBTQU1MQXV0aENyZWRlbnRpYWwgYXMgYUosIHNlbmRFbWFpbFZlcmlmaWNhdGlvbiBhcyBhYSwgdmVyaWZ5QmVmb3JlVXBkYXRlRW1haWwgYXMgYWIsIEFjdGlvbkNvZGVVUkwgYXMgYWMsIHBhcnNlQWN0aW9uQ29kZVVSTCBhcyBhZCwgdXBkYXRlUHJvZmlsZSBhcyBhZSwgdXBkYXRlRW1haWwgYXMgYWYsIHVwZGF0ZVBhc3N3b3JkIGFzIGFnLCBnZXRJZFRva2VuIGFzIGFoLCBnZXRJZFRva2VuUmVzdWx0IGFzIGFpLCB1bmxpbmsgYXMgYWosIGdldEFkZGl0aW9uYWxVc2VySW5mbyBhcyBhaywgcmVsb2FkIGFzIGFsLCBnZXRNdWx0aUZhY3RvclJlc29sdmVyIGFzIGFtLCBtdWx0aUZhY3RvciBhcyBhbiwgX2lzSU9TN09yOCBhcyBhbywgZGVidWdBc3NlcnQgYXMgYXAsIF9pc0lPUyBhcyBhcSwgX2lzQW5kcm9pZCBhcyBhciwgX2ZhaWwgYXMgYXMsIF9nZXRSZWRpcmVjdFVybCBhcyBhdCwgX2dldFByb2plY3RDb25maWcgYXMgYXUsIF9jcmVhdGVFcnJvciBhcyBhdiwgX2Fzc2VydCBhcyBhdywgX2dldEluc3RhbmNlIGFzIGF4LCBfcGVyc2lzdGVuY2VLZXlOYW1lIGFzIGF5LCBBdXRoRXZlbnRNYW5hZ2VyIGFzIGF6LCBicm93c2VyTG9jYWxQZXJzaXN0ZW5jZSBhcyBiLCBzaWduSW5XaXRoUG9wdXAgYXMgYywgbGlua1dpdGhQb3B1cCBhcyBkLCByZWF1dGhlbnRpY2F0ZVdpdGhQb3B1cCBhcyBlLCBzaWduSW5XaXRoUmVkaXJlY3QgYXMgZiwgbGlua1dpdGhSZWRpcmVjdCBhcyBnLCByZWF1dGhlbnRpY2F0ZVdpdGhSZWRpcmVjdCBhcyBoLCBpbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlIGFzIGksIGdldFJlZGlyZWN0UmVzdWx0IGFzIGosIGJyb3dzZXJQb3B1cFJlZGlyZWN0UmVzb2x2ZXIgYXMgaywgbGlua1dpdGhQaG9uZU51bWJlciBhcyBsLCBQaG9uZU11bHRpRmFjdG9yR2VuZXJhdG9yIGFzIG0sIGdldEF1dGggYXMgbiwgUHJvdmlkZXJJZCBhcyBvLCBzZXRQZXJzaXN0ZW5jZSBhcyBwLCBvbklkVG9rZW5DaGFuZ2VkIGFzIHEsIHJlYXV0aGVudGljYXRlV2l0aFBob25lTnVtYmVyIGFzIHIsIHNpZ25JbldpdGhQaG9uZU51bWJlciBhcyBzLCBvbkF1dGhTdGF0ZUNoYW5nZWQgYXMgdCwgdXBkYXRlUGhvbmVOdW1iZXIgYXMgdSwgdXNlRGV2aWNlTGFuZ3VhZ2UgYXMgdiwgdXBkYXRlQ3VycmVudFVzZXIgYXMgdywgc2lnbk91dCBhcyB4LCBkZWxldGVVc2VyIGFzIHksIGRlYnVnRXJyb3JNYXAgYXMgeiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgtODM5ZGU1MTAuanMubWFwXG4iLCJpbXBvcnQgeyBhbyBhcyBfaXNJT1M3T3I4LCBhcCBhcyBkZWJ1Z0Fzc2VydCwgYXEgYXMgX2lzSU9TLCBhciBhcyBfaXNBbmRyb2lkLCBhcyBhcyBfZmFpbCwgYXQgYXMgX2dldFJlZGlyZWN0VXJsLCBhdSBhcyBfZ2V0UHJvamVjdENvbmZpZywgYXYgYXMgX2NyZWF0ZUVycm9yLCBhdyBhcyBfYXNzZXJ0LCBheCBhcyBfZ2V0SW5zdGFuY2UsIGIgYXMgYnJvd3NlckxvY2FsUGVyc2lzdGVuY2UsIGF5IGFzIF9wZXJzaXN0ZW5jZUtleU5hbWUsIGF6IGFzIEF1dGhFdmVudE1hbmFnZXIsIGEgYXMgYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZSwgYUEgYXMgX2dldFJlZGlyZWN0UmVzdWx0LCBhQiBhcyBfY2xlYXJSZWRpcmVjdE91dGNvbWVzLCBhQyBhcyBfY2FzdEF1dGggfSBmcm9tICcuL2luZGV4LTgzOWRlNTEwLmpzJztcbmV4cG9ydCB7IEEgYXMgQWN0aW9uQ29kZU9wZXJhdGlvbiwgYWMgYXMgQWN0aW9uQ29kZVVSTCwgRyBhcyBBdXRoQ3JlZGVudGlhbCwgQyBhcyBBdXRoRXJyb3JDb2RlcywgYUUgYXMgQXV0aEltcGwsIGFIIGFzIEF1dGhQb3B1cCwgSCBhcyBFbWFpbEF1dGhDcmVkZW50aWFsLCBMIGFzIEVtYWlsQXV0aFByb3ZpZGVyLCBNIGFzIEZhY2Vib29rQXV0aFByb3ZpZGVyLCBGIGFzIEZhY3RvcklkLCBhSSBhcyBGZXRjaFByb3ZpZGVyLCBRIGFzIEdpdGh1YkF1dGhQcm92aWRlciwgTiBhcyBHb29nbGVBdXRoUHJvdmlkZXIsIEkgYXMgT0F1dGhDcmVkZW50aWFsLCBUIGFzIE9BdXRoUHJvdmlkZXIsIE8gYXMgT3BlcmF0aW9uVHlwZSwgSiBhcyBQaG9uZUF1dGhDcmVkZW50aWFsLCBQIGFzIFBob25lQXV0aFByb3ZpZGVyLCBtIGFzIFBob25lTXVsdGlGYWN0b3JHZW5lcmF0b3IsIG8gYXMgUHJvdmlkZXJJZCwgUiBhcyBSZWNhcHRjaGFWZXJpZmllciwgYUogYXMgU0FNTEF1dGhDcmVkZW50aWFsLCBVIGFzIFNBTUxBdXRoUHJvdmlkZXIsIFMgYXMgU2lnbkluTWV0aG9kLCBWIGFzIFR3aXR0ZXJBdXRoUHJvdmlkZXIsIGFEIGFzIFVzZXJJbXBsLCBhdyBhcyBfYXNzZXJ0LCBhQyBhcyBfY2FzdEF1dGgsIGFzIGFzIF9mYWlsLCBhRyBhcyBfZ2VuZXJhdGVFdmVudElkLCBhRiBhcyBfZ2V0Q2xpZW50VmVyc2lvbiwgYXggYXMgX2dldEluc3RhbmNlLCBhQSBhcyBfZ2V0UmVkaXJlY3RSZXN1bHQsIGF5IGFzIF9wZXJzaXN0ZW5jZUtleU5hbWUsIGExIGFzIGFwcGx5QWN0aW9uQ29kZSwgYiBhcyBicm93c2VyTG9jYWxQZXJzaXN0ZW5jZSwgayBhcyBicm93c2VyUG9wdXBSZWRpcmVjdFJlc29sdmVyLCBhIGFzIGJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UsIGEyIGFzIGNoZWNrQWN0aW9uQ29kZSwgYTAgYXMgY29uZmlybVBhc3N3b3JkUmVzZXQsIEUgYXMgY29ubmVjdEF1dGhFbXVsYXRvciwgYTQgYXMgY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkLCB6IGFzIGRlYnVnRXJyb3JNYXAsIHkgYXMgZGVsZXRlVXNlciwgYTkgYXMgZmV0Y2hTaWduSW5NZXRob2RzRm9yRW1haWwsIGFrIGFzIGdldEFkZGl0aW9uYWxVc2VySW5mbywgbiBhcyBnZXRBdXRoLCBhaCBhcyBnZXRJZFRva2VuLCBhaSBhcyBnZXRJZFRva2VuUmVzdWx0LCBhbSBhcyBnZXRNdWx0aUZhY3RvclJlc29sdmVyLCBqIGFzIGdldFJlZGlyZWN0UmVzdWx0LCBLIGFzIGluTWVtb3J5UGVyc2lzdGVuY2UsIGkgYXMgaW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZSwgRCBhcyBpbml0aWFsaXplQXV0aCwgYTcgYXMgaXNTaWduSW5XaXRoRW1haWxMaW5rLCBZIGFzIGxpbmtXaXRoQ3JlZGVudGlhbCwgbCBhcyBsaW5rV2l0aFBob25lTnVtYmVyLCBkIGFzIGxpbmtXaXRoUG9wdXAsIGcgYXMgbGlua1dpdGhSZWRpcmVjdCwgYW4gYXMgbXVsdGlGYWN0b3IsIHQgYXMgb25BdXRoU3RhdGVDaGFuZ2VkLCBxIGFzIG9uSWRUb2tlbkNoYW5nZWQsIGFkIGFzIHBhcnNlQWN0aW9uQ29kZVVSTCwgQiBhcyBwcm9kRXJyb3JNYXAsIFogYXMgcmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbCwgciBhcyByZWF1dGhlbnRpY2F0ZVdpdGhQaG9uZU51bWJlciwgZSBhcyByZWF1dGhlbnRpY2F0ZVdpdGhQb3B1cCwgaCBhcyByZWF1dGhlbnRpY2F0ZVdpdGhSZWRpcmVjdCwgYWwgYXMgcmVsb2FkLCBhYSBhcyBzZW5kRW1haWxWZXJpZmljYXRpb24sICQgYXMgc2VuZFBhc3N3b3JkUmVzZXRFbWFpbCwgYTYgYXMgc2VuZFNpZ25JbkxpbmtUb0VtYWlsLCBwIGFzIHNldFBlcnNpc3RlbmNlLCBXIGFzIHNpZ25JbkFub255bW91c2x5LCBYIGFzIHNpZ25JbldpdGhDcmVkZW50aWFsLCBfIGFzIHNpZ25JbldpdGhDdXN0b21Ub2tlbiwgYTUgYXMgc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQsIGE4IGFzIHNpZ25JbldpdGhFbWFpbExpbmssIHMgYXMgc2lnbkluV2l0aFBob25lTnVtYmVyLCBjIGFzIHNpZ25JbldpdGhQb3B1cCwgZiBhcyBzaWduSW5XaXRoUmVkaXJlY3QsIHggYXMgc2lnbk91dCwgYWogYXMgdW5saW5rLCB3IGFzIHVwZGF0ZUN1cnJlbnRVc2VyLCBhZiBhcyB1cGRhdGVFbWFpbCwgYWcgYXMgdXBkYXRlUGFzc3dvcmQsIHUgYXMgdXBkYXRlUGhvbmVOdW1iZXIsIGFlIGFzIHVwZGF0ZVByb2ZpbGUsIHYgYXMgdXNlRGV2aWNlTGFuZ3VhZ2UsIGFiIGFzIHZlcmlmeUJlZm9yZVVwZGF0ZUVtYWlsLCBhMyBhcyB2ZXJpZnlQYXNzd29yZFJlc2V0Q29kZSB9IGZyb20gJy4vaW5kZXgtODM5ZGU1MTAuanMnO1xuaW1wb3J0IHsgcXVlcnlzdHJpbmdEZWNvZGUgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgJ0BmaXJlYmFzZS9hcHAnO1xuaW1wb3J0ICd0c2xpYic7XG5pbXBvcnQgJ0BmaXJlYmFzZS9sb2dnZXInO1xuaW1wb3J0ICdAZmlyZWJhc2UvY29tcG9uZW50JztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX2NvcmRvdmFXaW5kb3coKSB7XHJcbiAgICByZXR1cm4gd2luZG93O1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBIb3cgbG9uZyB0byB3YWl0IGFmdGVyIHRoZSBhcHAgY29tZXMgYmFjayBpbnRvIGZvY3VzIGJlZm9yZSBjb25jbHVkaW5nIHRoYXRcclxuICogdGhlIHVzZXIgY2xvc2VkIHRoZSBzaWduIGluIHRhYi5cclxuICovXHJcbmNvbnN0IFJFRElSRUNUX1RJTUVPVVRfTVMgPSAyMDAwO1xyXG4vKipcclxuICogR2VuZXJhdGVzIHRoZSBVUkwgZm9yIHRoZSBPQXV0aCBoYW5kbGVyLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX2dlbmVyYXRlSGFuZGxlclVybChhdXRoLCBldmVudCwgcHJvdmlkZXIpIHtcclxuICAgIHZhciBfYTtcclxuICAgIC8vIEdldCB0aGUgY29yZG92YSBwbHVnaW5zXHJcbiAgICBjb25zdCB7IEJ1aWxkSW5mbyB9ID0gX2NvcmRvdmFXaW5kb3coKTtcclxuICAgIGRlYnVnQXNzZXJ0KGV2ZW50LnNlc3Npb25JZCwgJ0F1dGhFdmVudCBkaWQgbm90IGNvbnRhaW4gYSBzZXNzaW9uIElEJyk7XHJcbiAgICBjb25zdCBzZXNzaW9uRGlnZXN0ID0gYXdhaXQgY29tcHV0ZVNoYTI1NihldmVudC5zZXNzaW9uSWQpO1xyXG4gICAgY29uc3QgYWRkaXRpb25hbFBhcmFtcyA9IHt9O1xyXG4gICAgaWYgKF9pc0lPUygpKSB7XHJcbiAgICAgICAgLy8gaU9TIGFwcCBpZGVudGlmaWVyXHJcbiAgICAgICAgYWRkaXRpb25hbFBhcmFtc1snaWJpJ10gPSBCdWlsZEluZm8ucGFja2FnZU5hbWU7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChfaXNBbmRyb2lkKCkpIHtcclxuICAgICAgICAvLyBBbmRyb2lkIGFwcCBpZGVudGlmaWVyXHJcbiAgICAgICAgYWRkaXRpb25hbFBhcmFtc1snYXBuJ10gPSBCdWlsZEluZm8ucGFja2FnZU5hbWU7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBfZmFpbChhdXRoLCBcIm9wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnRcIiAvKiBPUEVSQVRJT05fTk9UX1NVUFBPUlRFRCAqLyk7XHJcbiAgICB9XHJcbiAgICAvLyBBZGQgdGhlIGRpc3BsYXkgbmFtZSBpZiBhdmFpbGFibGVcclxuICAgIGlmIChCdWlsZEluZm8uZGlzcGxheU5hbWUpIHtcclxuICAgICAgICBhZGRpdGlvbmFsUGFyYW1zWydhcHBEaXNwbGF5TmFtZSddID0gQnVpbGRJbmZvLmRpc3BsYXlOYW1lO1xyXG4gICAgfVxyXG4gICAgLy8gQXR0YWNoZWQgdGhlIGhhc2hlZCBzZXNzaW9uIElEXHJcbiAgICBhZGRpdGlvbmFsUGFyYW1zWydzZXNzaW9uSWQnXSA9IHNlc3Npb25EaWdlc3Q7XHJcbiAgICByZXR1cm4gX2dldFJlZGlyZWN0VXJsKGF1dGgsIHByb3ZpZGVyLCBldmVudC50eXBlLCB1bmRlZmluZWQsIChfYSA9IGV2ZW50LmV2ZW50SWQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHVuZGVmaW5lZCwgYWRkaXRpb25hbFBhcmFtcyk7XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkYXRlcyB0aGF0IHRoaXMgYXBwIGlzIHZhbGlkIGZvciB0aGlzIHByb2plY3QgY29uZmlndXJhdGlvblxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX3ZhbGlkYXRlT3JpZ2luKGF1dGgpIHtcclxuICAgIGNvbnN0IHsgQnVpbGRJbmZvIH0gPSBfY29yZG92YVdpbmRvdygpO1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IHt9O1xyXG4gICAgaWYgKF9pc0lPUygpKSB7XHJcbiAgICAgICAgcmVxdWVzdC5pb3NCdW5kbGVJZCA9IEJ1aWxkSW5mby5wYWNrYWdlTmFtZTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKF9pc0FuZHJvaWQoKSkge1xyXG4gICAgICAgIHJlcXVlc3QuYW5kcm9pZFBhY2thZ2VOYW1lID0gQnVpbGRJbmZvLnBhY2thZ2VOYW1lO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgX2ZhaWwoYXV0aCwgXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIgLyogT1BFUkFUSU9OX05PVF9TVVBQT1JURUQgKi8pO1xyXG4gICAgfVxyXG4gICAgLy8gV2lsbCBmYWlsIGF1dG9tYXRpY2FsbHkgaWYgcGFja2FnZSBuYW1lIGlzIG5vdCBhdXRob3JpemVkXHJcbiAgICBhd2FpdCBfZ2V0UHJvamVjdENvbmZpZyhhdXRoLCByZXF1ZXN0KTtcclxufVxyXG5mdW5jdGlvbiBfcGVyZm9ybVJlZGlyZWN0KGhhbmRsZXJVcmwpIHtcclxuICAgIC8vIEdldCB0aGUgY29yZG92YSBwbHVnaW5zXHJcbiAgICBjb25zdCB7IGNvcmRvdmEgfSA9IF9jb3Jkb3ZhV2luZG93KCk7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgY29yZG92YS5wbHVnaW5zLmJyb3dzZXJ0YWIuaXNBdmFpbGFibGUoYnJvd3NlclRhYklzQXZhaWxhYmxlID0+IHtcclxuICAgICAgICAgICAgbGV0IGlhYlJlZiA9IG51bGw7XHJcbiAgICAgICAgICAgIGlmIChicm93c2VyVGFiSXNBdmFpbGFibGUpIHtcclxuICAgICAgICAgICAgICAgIGNvcmRvdmEucGx1Z2lucy5icm93c2VydGFiLm9wZW5VcmwoaGFuZGxlclVybCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBSZXR1cm4gdGhlIGluYXBwYnJvd3NlciByZWYgdGhhdCdzIHJldHVybmVkIGZyb20gdGhlIG9wZW4gY2FsbFxyXG4gICAgICAgICAgICAgICAgaWFiUmVmID0gY29yZG92YS5JbkFwcEJyb3dzZXIub3BlbihoYW5kbGVyVXJsLCBfaXNJT1M3T3I4KCkgPyAnX2JsYW5rJyA6ICdfc3lzdGVtJywgJ2xvY2F0aW9uPXllcycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlc29sdmUoaWFiUmVmKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbi8qKlxyXG4gKiBUaGlzIGZ1bmN0aW9uIHdhaXRzIGZvciBhcHAgYWN0aXZpdHkgdG8gYmUgc2VlbiBiZWZvcmUgcmVzb2x2aW5nLiBJdCBkb2VzXHJcbiAqIHRoaXMgYnkgYXR0YWNoaW5nIGxpc3RlbmVycyB0byB2YXJpb3VzIGRvbSBldmVudHMuIE9uY2UgdGhlIGFwcCBpcyBkZXRlcm1pbmVkXHJcbiAqIHRvIGJlIHZpc2libGUsIHRoaXMgcHJvbWlzZSByZXNvbHZlcy4gQUZURVIgdGhhdCByZXNvbHV0aW9uLCB0aGUgbGlzdGVuZXJzXHJcbiAqIGFyZSBkZXRhY2hlZCBhbmQgYW55IGJyb3dzZXIgdGFicyBsZWZ0IG9wZW4gd2lsbCBiZSBjbG9zZWQuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBfd2FpdEZvckFwcFJlc3VtZShhdXRoLCBldmVudExpc3RlbmVyLCBpYWJSZWYpIHtcclxuICAgIC8vIEdldCB0aGUgY29yZG92YSBwbHVnaW5zXHJcbiAgICBjb25zdCB7IGNvcmRvdmEgfSA9IF9jb3Jkb3ZhV2luZG93KCk7XHJcbiAgICBsZXQgY2xlYW51cCA9ICgpID0+IHsgfTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgb25DbG9zZVRpbWVyID0gbnVsbDtcclxuICAgICAgICAgICAgLy8gREVGSU5FIEFMTCBUSEUgQ0FMTEJBQ0tTID09PT09XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGF1dGhFdmVudFNlZW4oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgICAgICAgICAvLyBBdXRoIGV2ZW50IHdhcyBkZXRlY3RlZC4gUmVzb2x2ZSB0aGlzIHByb21pc2UgYW5kIGNsb3NlIHRoZSBleHRyYVxyXG4gICAgICAgICAgICAgICAgLy8gd2luZG93IGlmIGl0J3Mgc3RpbGwgb3Blbi5cclxuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNsb3NlQnJvd3NlclRhYiA9IChfYSA9IGNvcmRvdmEucGx1Z2lucy5icm93c2VydGFiKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2xvc2U7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNsb3NlQnJvd3NlclRhYiA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsb3NlQnJvd3NlclRhYigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gQ2xvc2UgaW5hcHBicm93c2VyIGVtZWJlZGRlZCB3ZWJ2aWV3IGluIGlPUzcgYW5kIDggY2FzZSBpZiBzdGlsbFxyXG4gICAgICAgICAgICAgICAgLy8gb3Blbi5cclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKGlhYlJlZiA9PT0gbnVsbCB8fCBpYWJSZWYgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGlhYlJlZi5jbG9zZSkgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBpYWJSZWYuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmdW5jdGlvbiByZXN1bWVkKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9uQ2xvc2VUaW1lcikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgY29kZSBhbHJlYWR5IHJhbjsgZG8gbm90IHJlcnVuLlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG9uQ2xvc2VUaW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBXYWl0IHR3byBzZWVjb25kcyBhZnRlciByZXN1bWUgdGhlbiByZWplY3QuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KF9jcmVhdGVFcnJvcihhdXRoLCBcInJlZGlyZWN0LWNhbmNlbGxlZC1ieS11c2VyXCIgLyogUkVESVJFQ1RfQ0FOQ0VMTEVEX0JZX1VTRVIgKi8pKTtcclxuICAgICAgICAgICAgICAgIH0sIFJFRElSRUNUX1RJTUVPVVRfTVMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHZpc2liaWxpdHlDaGFuZ2VkKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKChkb2N1bWVudCA9PT0gbnVsbCB8fCBkb2N1bWVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlKSA9PT0gJ3Zpc2libGUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdW1lZCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIEFUVEFDSCBBTEwgVEhFIExJU1RFTkVSUyA9PT09PVxyXG4gICAgICAgICAgICAvLyBMaXN0ZW4gZm9yIHRoZSBhdXRoIGV2ZW50XHJcbiAgICAgICAgICAgIGV2ZW50TGlzdGVuZXIuYWRkUGFzc2l2ZUxpc3RlbmVyKGF1dGhFdmVudFNlZW4pO1xyXG4gICAgICAgICAgICAvLyBMaXN0ZW4gZm9yIHJlc3VtZSBhbmQgdmlzaWJpbGl0eSBldmVudHNcclxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncmVzdW1lJywgcmVzdW1lZCwgZmFsc2UpO1xyXG4gICAgICAgICAgICBpZiAoX2lzQW5kcm9pZCgpKSB7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd2aXNpYmlsaXR5Y2hhbmdlJywgdmlzaWJpbGl0eUNoYW5nZWQsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBTRVRVUCBUSEUgQ0xFQU5VUCBGVU5DVElPTiA9PT09PVxyXG4gICAgICAgICAgICBjbGVhbnVwID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZXZlbnRMaXN0ZW5lci5yZW1vdmVQYXNzaXZlTGlzdGVuZXIoYXV0aEV2ZW50U2Vlbik7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXN1bWUnLCByZXN1bWVkLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd2aXNpYmlsaXR5Y2hhbmdlJywgdmlzaWJpbGl0eUNoYW5nZWQsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIGlmIChvbkNsb3NlVGltZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KG9uQ2xvc2VUaW1lcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICBjbGVhbnVwKCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIENoZWNrcyB0aGUgY29uZmlndXJhdGlvbiBvZiB0aGUgQ29yZG92YSBlbnZpcm9ubWVudC4gVGhpcyBoYXMgbm8gc2lkZSBlZmZlY3RcclxuICogaWYgdGhlIGNvbmZpZ3VyYXRpb24gaXMgY29ycmVjdDsgb3RoZXJ3aXNlIGl0IHRocm93cyBhbiBlcnJvciB3aXRoIHRoZVxyXG4gKiBtaXNzaW5nIHBsdWdpbi5cclxuICovXHJcbmZ1bmN0aW9uIF9jaGVja0NvcmRvdmFDb25maWd1cmF0aW9uKGF1dGgpIHtcclxuICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2gsIF9qLCBfaztcclxuICAgIGNvbnN0IHdpbiA9IF9jb3Jkb3ZhV2luZG93KCk7XHJcbiAgICAvLyBDaGVjayBhbGwgZGVwZW5kZW5jaWVzIGluc3RhbGxlZC5cclxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ub3JkbmV0L2NvcmRvdmEtdW5pdmVyc2FsLWxpbmtzLXBsdWdpblxyXG4gICAgLy8gTm90ZSB0aGF0IGNvcmRvdmEtdW5pdmVyc2FsLWxpbmtzLXBsdWdpbiBoYXMgYmVlbiBhYmFuZG9uZWQuXHJcbiAgICAvLyBBIGZvcmsgd2l0aCBsYXRlc3QgZml4ZXMgaXMgYXZhaWxhYmxlIGF0OlxyXG4gICAgLy8gaHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvY29yZG92YS11bml2ZXJzYWwtbGlua3MtcGx1Z2luLWZpeFxyXG4gICAgX2Fzc2VydCh0eXBlb2YgKChfYSA9IHdpbiA9PT0gbnVsbCB8fCB3aW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHdpbi51bml2ZXJzYWxMaW5rcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnN1YnNjcmliZSkgPT09ICdmdW5jdGlvbicsIGF1dGgsIFwiaW52YWxpZC1jb3Jkb3ZhLWNvbmZpZ3VyYXRpb25cIiAvKiBJTlZBTElEX0NPUkRPVkFfQ09ORklHVVJBVElPTiAqLywge1xyXG4gICAgICAgIG1pc3NpbmdQbHVnaW46ICdjb3Jkb3ZhLXVuaXZlcnNhbC1saW5rcy1wbHVnaW4tZml4J1xyXG4gICAgfSk7XHJcbiAgICAvLyBodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9jb3Jkb3ZhLXBsdWdpbi1idWlsZGluZm9cclxuICAgIF9hc3NlcnQodHlwZW9mICgoX2IgPSB3aW4gPT09IG51bGwgfHwgd2luID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3aW4uQnVpbGRJbmZvKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IucGFja2FnZU5hbWUpICE9PSAndW5kZWZpbmVkJywgYXV0aCwgXCJpbnZhbGlkLWNvcmRvdmEtY29uZmlndXJhdGlvblwiIC8qIElOVkFMSURfQ09SRE9WQV9DT05GSUdVUkFUSU9OICovLCB7XHJcbiAgICAgICAgbWlzc2luZ1BsdWdpbjogJ2NvcmRvdmEtcGx1Z2luLWJ1aWxkSW5mbydcclxuICAgIH0pO1xyXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9jb3Jkb3ZhLXBsdWdpbi1icm93c2VydGFiXHJcbiAgICBfYXNzZXJ0KHR5cGVvZiAoKF9lID0gKF9kID0gKF9jID0gd2luID09PSBudWxsIHx8IHdpbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogd2luLmNvcmRvdmEpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5wbHVnaW5zKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QuYnJvd3NlcnRhYikgPT09IG51bGwgfHwgX2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lLm9wZW5VcmwpID09PSAnZnVuY3Rpb24nLCBhdXRoLCBcImludmFsaWQtY29yZG92YS1jb25maWd1cmF0aW9uXCIgLyogSU5WQUxJRF9DT1JET1ZBX0NPTkZJR1VSQVRJT04gKi8sIHtcclxuICAgICAgICBtaXNzaW5nUGx1Z2luOiAnY29yZG92YS1wbHVnaW4tYnJvd3NlcnRhYidcclxuICAgIH0pO1xyXG4gICAgX2Fzc2VydCh0eXBlb2YgKChfaCA9IChfZyA9IChfZiA9IHdpbiA9PT0gbnVsbCB8fCB3aW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHdpbi5jb3Jkb3ZhKSA9PT0gbnVsbCB8fCBfZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2YucGx1Z2lucykgPT09IG51bGwgfHwgX2cgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9nLmJyb3dzZXJ0YWIpID09PSBudWxsIHx8IF9oID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfaC5pc0F2YWlsYWJsZSkgPT09ICdmdW5jdGlvbicsIGF1dGgsIFwiaW52YWxpZC1jb3Jkb3ZhLWNvbmZpZ3VyYXRpb25cIiAvKiBJTlZBTElEX0NPUkRPVkFfQ09ORklHVVJBVElPTiAqLywge1xyXG4gICAgICAgIG1pc3NpbmdQbHVnaW46ICdjb3Jkb3ZhLXBsdWdpbi1icm93c2VydGFiJ1xyXG4gICAgfSk7XHJcbiAgICAvLyBodHRwczovL2NvcmRvdmEuYXBhY2hlLm9yZy9kb2NzL2VuL2xhdGVzdC9yZWZlcmVuY2UvY29yZG92YS1wbHVnaW4taW5hcHBicm93c2VyL1xyXG4gICAgX2Fzc2VydCh0eXBlb2YgKChfayA9IChfaiA9IHdpbiA9PT0gbnVsbCB8fCB3aW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHdpbi5jb3Jkb3ZhKSA9PT0gbnVsbCB8fCBfaiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2ouSW5BcHBCcm93c2VyKSA9PT0gbnVsbCB8fCBfayA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2sub3BlbikgPT09ICdmdW5jdGlvbicsIGF1dGgsIFwiaW52YWxpZC1jb3Jkb3ZhLWNvbmZpZ3VyYXRpb25cIiAvKiBJTlZBTElEX0NPUkRPVkFfQ09ORklHVVJBVElPTiAqLywge1xyXG4gICAgICAgIG1pc3NpbmdQbHVnaW46ICdjb3Jkb3ZhLXBsdWdpbi1pbmFwcGJyb3dzZXInXHJcbiAgICB9KTtcclxufVxyXG4vKipcclxuICogQ29tcHV0ZXMgdGhlIFNIQS0yNTYgb2YgYSBzZXNzaW9uIElELiBUaGUgU3VidGxlQ3J5cHRvIGludGVyZmFjZSBpcyBvbmx5XHJcbiAqIGF2YWlsYWJsZSBpbiBcInNlY3VyZVwiIGNvbnRleHRzLCB3aGljaCBjb3ZlcnMgQ29yZG92YSAod2hpY2ggaXMgc2VydmVkIG9uIGEgZmlsZVxyXG4gKiBwcm90b2NvbCkuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBjb21wdXRlU2hhMjU2KHNlc3Npb25JZCkge1xyXG4gICAgY29uc3QgYnl0ZXMgPSBzdHJpbmdUb0FycmF5QnVmZmVyKHNlc3Npb25JZCk7XHJcbiAgICAvLyBUT0RPOiBGb3IgSUUxMSBjcnlwdG8gaGFzIGEgZGlmZmVyZW50IG5hbWUgYW5kIHRoaXMgb3BlcmF0aW9uIGNvbWVzIGJhY2tcclxuICAgIC8vICAgICAgIGFzIGFuIG9iamVjdCwgbm90IGEgcHJvbWlzZS4gVGhpcyBpcyB0aGUgb2xkIHByb3Bvc2VkIHN0YW5kYXJkIHRoYXRcclxuICAgIC8vICAgICAgIGlzIHVzZWQgYnkgSUUxMTpcclxuICAgIC8vIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDEzL1dELVdlYkNyeXB0b0FQSS0yMDEzMDEwOC8jY3J5cHRvb3BlcmF0aW9uLWludGVyZmFjZVxyXG4gICAgY29uc3QgYnVmID0gYXdhaXQgY3J5cHRvLnN1YnRsZS5kaWdlc3QoJ1NIQS0yNTYnLCBieXRlcyk7XHJcbiAgICBjb25zdCBhcnIgPSBBcnJheS5mcm9tKG5ldyBVaW50OEFycmF5KGJ1ZikpO1xyXG4gICAgcmV0dXJuIGFyci5tYXAobnVtID0+IG51bS50b1N0cmluZygxNikucGFkU3RhcnQoMiwgJzAnKSkuam9pbignJyk7XHJcbn1cclxuZnVuY3Rpb24gc3RyaW5nVG9BcnJheUJ1ZmZlcihzdHIpIHtcclxuICAgIC8vIFRoaXMgZnVuY3Rpb24gaXMgb25seSBtZWFudCB0byBkZWFsIHdpdGggYW4gQVNDSUkgY2hhcnNldCBhbmQgbWFrZXNcclxuICAgIC8vIGNlcnRhaW4gc2ltcGxpZnlpbmcgYXNzdW1wdGlvbnMuXHJcbiAgICBkZWJ1Z0Fzc2VydCgvWzAtOWEtekEtWl0rLy50ZXN0KHN0ciksICdDYW4gb25seSBjb252ZXJ0IGFscGhhLW51bWVyaWMgc3RyaW5ncycpO1xyXG4gICAgaWYgKHR5cGVvZiBUZXh0RW5jb2RlciAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHN0cik7XHJcbiAgICB9XHJcbiAgICBjb25zdCBidWZmID0gbmV3IEFycmF5QnVmZmVyKHN0ci5sZW5ndGgpO1xyXG4gICAgY29uc3QgdmlldyA9IG5ldyBVaW50OEFycmF5KGJ1ZmYpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2aWV3W2ldID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdmlldztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBTRVNTSU9OX0lEX0xFTkdUSCA9IDIwO1xyXG4vKiogQ3VzdG9tIEF1dGhFdmVudE1hbmFnZXIgdGhhdCBhZGRzIHBhc3NpdmUgbGlzdGVuZXJzIHRvIGV2ZW50cyAqL1xyXG5jbGFzcyBDb3Jkb3ZhQXV0aEV2ZW50TWFuYWdlciBleHRlbmRzIEF1dGhFdmVudE1hbmFnZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcclxuICAgICAgICB0aGlzLnBhc3NpdmVMaXN0ZW5lcnMgPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgdGhpcy5pbml0UHJvbWlzZSA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlc29sdmVJbmlhbGl6ZWQgPSByZXNvbHZlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgYWRkUGFzc2l2ZUxpc3RlbmVyKGNiKSB7XHJcbiAgICAgICAgdGhpcy5wYXNzaXZlTGlzdGVuZXJzLmFkZChjYik7XHJcbiAgICB9XHJcbiAgICByZW1vdmVQYXNzaXZlTGlzdGVuZXIoY2IpIHtcclxuICAgICAgICB0aGlzLnBhc3NpdmVMaXN0ZW5lcnMuZGVsZXRlKGNiKTtcclxuICAgIH1cclxuICAgIC8vIEluIGEgQ29yZG92YSBlbnZpcm9ubWVudCwgdGhpcyBtYW5hZ2VyIGNhbiBsaXZlIHRocm91Z2ggbXVsdGlwbGUgcmVkaXJlY3RcclxuICAgIC8vIG9wZXJhdGlvbnNcclxuICAgIHJlc2V0UmVkaXJlY3QoKSB7XHJcbiAgICAgICAgdGhpcy5xdWV1ZWRSZWRpcmVjdEV2ZW50ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmhhc0hhbmRsZWRQb3RlbnRpYWxSZWRpcmVjdCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgLyoqIE92ZXJyaWRlIHRoZSBvbkV2ZW50IG1ldGhvZCAqL1xyXG4gICAgb25FdmVudChldmVudCkge1xyXG4gICAgICAgIHRoaXMucmVzb2x2ZUluaWFsaXplZCgpO1xyXG4gICAgICAgIHRoaXMucGFzc2l2ZUxpc3RlbmVycy5mb3JFYWNoKGNiID0+IGNiKGV2ZW50KSk7XHJcbiAgICAgICAgcmV0dXJuIHN1cGVyLm9uRXZlbnQoZXZlbnQpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgaW5pdGlhbGl6ZWQoKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5pbml0UHJvbWlzZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogR2VuZXJhdGVzIGEgKHBhcnRpYWwpIHtAbGluayBBdXRoRXZlbnR9LlxyXG4gKi9cclxuZnVuY3Rpb24gX2dlbmVyYXRlTmV3RXZlbnQoYXV0aCwgdHlwZSwgZXZlbnRJZCA9IG51bGwpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdHlwZSxcclxuICAgICAgICBldmVudElkLFxyXG4gICAgICAgIHVybFJlc3BvbnNlOiBudWxsLFxyXG4gICAgICAgIHNlc3Npb25JZDogZ2VuZXJhdGVTZXNzaW9uSWQoKSxcclxuICAgICAgICBwb3N0Qm9keTogbnVsbCxcclxuICAgICAgICB0ZW5hbnRJZDogYXV0aC50ZW5hbnRJZCxcclxuICAgICAgICBlcnJvcjogX2NyZWF0ZUVycm9yKGF1dGgsIFwibm8tYXV0aC1ldmVudFwiIC8qIE5PX0FVVEhfRVZFTlQgKi8pXHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIF9zYXZlUGFydGlhbEV2ZW50KGF1dGgsIGV2ZW50KSB7XHJcbiAgICByZXR1cm4gc3RvcmFnZSgpLl9zZXQocGVyc2lzdGVuY2VLZXkoYXV0aCksIGV2ZW50KTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfZ2V0QW5kUmVtb3ZlRXZlbnQoYXV0aCkge1xyXG4gICAgY29uc3QgZXZlbnQgPSAoYXdhaXQgc3RvcmFnZSgpLl9nZXQocGVyc2lzdGVuY2VLZXkoYXV0aCkpKTtcclxuICAgIGlmIChldmVudCkge1xyXG4gICAgICAgIGF3YWl0IHN0b3JhZ2UoKS5fcmVtb3ZlKHBlcnNpc3RlbmNlS2V5KGF1dGgpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBldmVudDtcclxufVxyXG5mdW5jdGlvbiBfZXZlbnRGcm9tUGFydGlhbEFuZFVybChwYXJ0aWFsRXZlbnQsIHVybCkge1xyXG4gICAgdmFyIF9hLCBfYjtcclxuICAgIC8vIFBhcnNlIHRoZSBkZWVwIGxpbmsgd2l0aGluIHRoZSBkeW5hbWljIGxpbmsgVVJMLlxyXG4gICAgY29uc3QgY2FsbGJhY2tVcmwgPSBfZ2V0RGVlcExpbmtGcm9tQ2FsbGJhY2sodXJsKTtcclxuICAgIC8vIENvbmZpcm0gaXQgaXMgYWN0dWFsbHkgYSBjYWxsYmFjayBVUkwuXHJcbiAgICAvLyBDdXJyZW50bHkgdGhlIHVuaXZlcnNhbCBsaW5rIHdpbGwgYmUgb2YgdGhpcyBmb3JtYXQ6XHJcbiAgICAvLyBodHRwczovLzxBVVRIX0RPTUFJTj4vX18vYXV0aC9jYWxsYmFjazxPQVVUSF9SRVNQT05TRT5cclxuICAgIC8vIFRoaXMgaXMgYSBmYWtlIFVSTCBidXQgaXMgbm90IGludGVuZGVkIHRvIHRha2UgdGhlIHVzZXIgYW55d2hlcmVcclxuICAgIC8vIGFuZCBqdXN0IHJlZGlyZWN0IHRvIHRoZSBhcHAuXHJcbiAgICBpZiAoY2FsbGJhY2tVcmwuaW5jbHVkZXMoJy9fXy9hdXRoL2NhbGxiYWNrJykpIHtcclxuICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhbiBlcnJvciBpbiB0aGUgVVJMLlxyXG4gICAgICAgIC8vIFRoaXMgbWVjaGFuaXNtIGlzIGFsc28gdXNlZCB0byBwYXNzIGVycm9ycyBiYWNrIHRvIHRoZSBhcHA6XHJcbiAgICAgICAgLy8gaHR0cHM6Ly88QVVUSF9ET01BSU4+L19fL2F1dGgvY2FsbGJhY2s/ZmlyZWJhc2VFcnJvcj08U1RSSU5HSUZJRURfRVJST1I+XHJcbiAgICAgICAgY29uc3QgcGFyYW1zID0gc2VhcmNoUGFyYW1zT3JFbXB0eShjYWxsYmFja1VybCk7XHJcbiAgICAgICAgLy8gR2V0IHRoZSBlcnJvciBvYmplY3QgY29ycmVzcG9uZGluZyB0byB0aGUgc3RyaW5naWZpZWQgZXJyb3IgaWYgZm91bmQuXHJcbiAgICAgICAgY29uc3QgZXJyb3JPYmplY3QgPSBwYXJhbXNbJ2ZpcmViYXNlRXJyb3InXVxyXG4gICAgICAgICAgICA/IHBhcnNlSnNvbk9yTnVsbChkZWNvZGVVUklDb21wb25lbnQocGFyYW1zWydmaXJlYmFzZUVycm9yJ10pKVxyXG4gICAgICAgICAgICA6IG51bGw7XHJcbiAgICAgICAgY29uc3QgY29kZSA9IChfYiA9IChfYSA9IGVycm9yT2JqZWN0ID09PSBudWxsIHx8IGVycm9yT2JqZWN0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvck9iamVjdFsnY29kZSddKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc3BsaXQoJ2F1dGgvJykpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYlsxXTtcclxuICAgICAgICBjb25zdCBlcnJvciA9IGNvZGUgPyBfY3JlYXRlRXJyb3IoY29kZSkgOiBudWxsO1xyXG4gICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogcGFydGlhbEV2ZW50LnR5cGUsXHJcbiAgICAgICAgICAgICAgICBldmVudElkOiBwYXJ0aWFsRXZlbnQuZXZlbnRJZCxcclxuICAgICAgICAgICAgICAgIHRlbmFudElkOiBwYXJ0aWFsRXZlbnQudGVuYW50SWQsXHJcbiAgICAgICAgICAgICAgICBlcnJvcixcclxuICAgICAgICAgICAgICAgIHVybFJlc3BvbnNlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgc2Vzc2lvbklkOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgcG9zdEJvZHk6IG51bGxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBwYXJ0aWFsRXZlbnQudHlwZSxcclxuICAgICAgICAgICAgICAgIGV2ZW50SWQ6IHBhcnRpYWxFdmVudC5ldmVudElkLFxyXG4gICAgICAgICAgICAgICAgdGVuYW50SWQ6IHBhcnRpYWxFdmVudC50ZW5hbnRJZCxcclxuICAgICAgICAgICAgICAgIHNlc3Npb25JZDogcGFydGlhbEV2ZW50LnNlc3Npb25JZCxcclxuICAgICAgICAgICAgICAgIHVybFJlc3BvbnNlOiBjYWxsYmFja1VybCxcclxuICAgICAgICAgICAgICAgIHBvc3RCb2R5OiBudWxsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn1cclxuZnVuY3Rpb24gZ2VuZXJhdGVTZXNzaW9uSWQoKSB7XHJcbiAgICBjb25zdCBjaGFycyA9IFtdO1xyXG4gICAgY29uc3QgYWxsb3dlZENoYXJzID0gJzEyMzQ1Njc4OTBhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaJztcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgU0VTU0lPTl9JRF9MRU5HVEg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGlkeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGFsbG93ZWRDaGFycy5sZW5ndGgpO1xyXG4gICAgICAgIGNoYXJzLnB1c2goYWxsb3dlZENoYXJzLmNoYXJBdChpZHgpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBjaGFycy5qb2luKCcnKTtcclxufVxyXG5mdW5jdGlvbiBzdG9yYWdlKCkge1xyXG4gICAgcmV0dXJuIF9nZXRJbnN0YW5jZShicm93c2VyTG9jYWxQZXJzaXN0ZW5jZSk7XHJcbn1cclxuZnVuY3Rpb24gcGVyc2lzdGVuY2VLZXkoYXV0aCkge1xyXG4gICAgcmV0dXJuIF9wZXJzaXN0ZW5jZUtleU5hbWUoXCJhdXRoRXZlbnRcIiAvKiBBVVRIX0VWRU5UICovLCBhdXRoLmNvbmZpZy5hcGlLZXksIGF1dGgubmFtZSk7XHJcbn1cclxuZnVuY3Rpb24gcGFyc2VKc29uT3JOdWxsKGpzb24pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoanNvbik7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59XHJcbi8vIEV4cG9ydGVkIGZvciB0ZXN0aW5nXHJcbmZ1bmN0aW9uIF9nZXREZWVwTGlua0Zyb21DYWxsYmFjayh1cmwpIHtcclxuICAgIGNvbnN0IHBhcmFtcyA9IHNlYXJjaFBhcmFtc09yRW1wdHkodXJsKTtcclxuICAgIGNvbnN0IGxpbmsgPSBwYXJhbXNbJ2xpbmsnXSA/IGRlY29kZVVSSUNvbXBvbmVudChwYXJhbXNbJ2xpbmsnXSkgOiB1bmRlZmluZWQ7XHJcbiAgICAvLyBEb3VibGUgbGluayBjYXNlIChhdXRvbWF0aWMgcmVkaXJlY3QpXHJcbiAgICBjb25zdCBkb3VibGVEZWVwTGluayA9IHNlYXJjaFBhcmFtc09yRW1wdHkobGluaylbJ2xpbmsnXTtcclxuICAgIC8vIGlPUyBjdXN0b20gc2NoZW1lIGxpbmtzLlxyXG4gICAgY29uc3QgaU9TRGVlcExpbmsgPSBwYXJhbXNbJ2RlZXBfbGlua19pZCddXHJcbiAgICAgICAgPyBkZWNvZGVVUklDb21wb25lbnQocGFyYW1zWydkZWVwX2xpbmtfaWQnXSlcclxuICAgICAgICA6IHVuZGVmaW5lZDtcclxuICAgIGNvbnN0IGlPU0RvdWJsZURlZXBMaW5rID0gc2VhcmNoUGFyYW1zT3JFbXB0eShpT1NEZWVwTGluaylbJ2xpbmsnXTtcclxuICAgIHJldHVybiBpT1NEb3VibGVEZWVwTGluayB8fCBpT1NEZWVwTGluayB8fCBkb3VibGVEZWVwTGluayB8fCBsaW5rIHx8IHVybDtcclxufVxyXG4vKipcclxuICogT3B0aW1pc3RpY2FsbHkgdHJpZXMgdG8gZ2V0IHNlYXJjaCBwYXJhbXMgZnJvbSBhIHN0cmluZywgb3IgZWxzZSByZXR1cm5zIGFuXHJcbiAqIGVtcHR5IHNlYXJjaCBwYXJhbXMgb2JqZWN0LlxyXG4gKi9cclxuZnVuY3Rpb24gc2VhcmNoUGFyYW1zT3JFbXB0eSh1cmwpIHtcclxuICAgIGlmICghKHVybCA9PT0gbnVsbCB8fCB1cmwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHVybC5pbmNsdWRlcygnPycpKSkge1xyXG4gICAgICAgIHJldHVybiB7fTtcclxuICAgIH1cclxuICAgIGNvbnN0IFtfLCAuLi5yZXN0XSA9IHVybC5zcGxpdCgnPycpO1xyXG4gICAgcmV0dXJuIHF1ZXJ5c3RyaW5nRGVjb2RlKHJlc3Quam9pbignPycpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogSG93IGxvbmcgdG8gd2FpdCBmb3IgdGhlIGluaXRpYWwgYXV0aCBldmVudCBiZWZvcmUgY29uY2x1ZGluZyBub1xyXG4gKiByZWRpcmVjdCBwZW5kaW5nXHJcbiAqL1xyXG5jb25zdCBJTklUSUFMX0VWRU5UX1RJTUVPVVRfTVMgPSA1MDA7XHJcbmNsYXNzIENvcmRvdmFQb3B1cFJlZGlyZWN0UmVzb2x2ZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5fcmVkaXJlY3RQZXJzaXN0ZW5jZSA9IGJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2U7XHJcbiAgICAgICAgdGhpcy5fc2hvdWxkSW5pdFByb2FjdGl2ZWx5ID0gdHJ1ZTsgLy8gVGhpcyBpcyBsaWdodHdlaWdodCBmb3IgQ29yZG92YVxyXG4gICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VycyA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLm9yaWdpblZhbGlkYXRpb25Qcm9taXNlcyA9IHt9O1xyXG4gICAgICAgIHRoaXMuX2NvbXBsZXRlUmVkaXJlY3RGbiA9IF9nZXRSZWRpcmVjdFJlc3VsdDtcclxuICAgIH1cclxuICAgIGFzeW5jIF9pbml0aWFsaXplKGF1dGgpIHtcclxuICAgICAgICBjb25zdCBrZXkgPSBhdXRoLl9rZXkoKTtcclxuICAgICAgICBsZXQgbWFuYWdlciA9IHRoaXMuZXZlbnRNYW5hZ2Vycy5nZXQoa2V5KTtcclxuICAgICAgICBpZiAoIW1hbmFnZXIpIHtcclxuICAgICAgICAgICAgbWFuYWdlciA9IG5ldyBDb3Jkb3ZhQXV0aEV2ZW50TWFuYWdlcihhdXRoKTtcclxuICAgICAgICAgICAgdGhpcy5ldmVudE1hbmFnZXJzLnNldChrZXksIG1hbmFnZXIpO1xyXG4gICAgICAgICAgICB0aGlzLmF0dGFjaENhbGxiYWNrTGlzdGVuZXJzKGF1dGgsIG1hbmFnZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWFuYWdlcjtcclxuICAgIH1cclxuICAgIF9vcGVuUG9wdXAoYXV0aCkge1xyXG4gICAgICAgIF9mYWlsKGF1dGgsIFwib3BlcmF0aW9uLW5vdC1zdXBwb3J0ZWQtaW4tdGhpcy1lbnZpcm9ubWVudFwiIC8qIE9QRVJBVElPTl9OT1RfU1VQUE9SVEVEICovKTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9vcGVuUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIsIGF1dGhUeXBlLCBldmVudElkKSB7XHJcbiAgICAgICAgX2NoZWNrQ29yZG92YUNvbmZpZ3VyYXRpb24oYXV0aCk7XHJcbiAgICAgICAgY29uc3QgbWFuYWdlciA9IGF3YWl0IHRoaXMuX2luaXRpYWxpemUoYXV0aCk7XHJcbiAgICAgICAgYXdhaXQgbWFuYWdlci5pbml0aWFsaXplZCgpO1xyXG4gICAgICAgIC8vIFJlc2V0IHRoZSBwZXJzaXN0ZWQgcmVkaXJlY3Qgc3RhdGVzLiBUaGlzIGRvZXMgbm90IG1hdHRlciBvbiBXZWIgd2hlcmVcclxuICAgICAgICAvLyB0aGUgcmVkaXJlY3QgYWx3YXlzIGJsb3dzIGF3YXkgYXBwbGljYXRpb24gc3RhdGUgZW50aXJlbHkuIE9uIENvcmRvdmEsXHJcbiAgICAgICAgLy8gdGhlIGFwcCBtYWludGFpbnMgY29udHJvbCBmbG93IHRocm91Z2ggdGhlIHJlZGlyZWN0LlxyXG4gICAgICAgIG1hbmFnZXIucmVzZXRSZWRpcmVjdCgpO1xyXG4gICAgICAgIF9jbGVhclJlZGlyZWN0T3V0Y29tZXMoKTtcclxuICAgICAgICBhd2FpdCB0aGlzLl9vcmlnaW5WYWxpZGF0aW9uKGF1dGgpO1xyXG4gICAgICAgIGNvbnN0IGV2ZW50ID0gX2dlbmVyYXRlTmV3RXZlbnQoYXV0aCwgYXV0aFR5cGUsIGV2ZW50SWQpO1xyXG4gICAgICAgIGF3YWl0IF9zYXZlUGFydGlhbEV2ZW50KGF1dGgsIGV2ZW50KTtcclxuICAgICAgICBjb25zdCB1cmwgPSBhd2FpdCBfZ2VuZXJhdGVIYW5kbGVyVXJsKGF1dGgsIGV2ZW50LCBwcm92aWRlcik7XHJcbiAgICAgICAgY29uc3QgaWFiUmVmID0gYXdhaXQgX3BlcmZvcm1SZWRpcmVjdCh1cmwpO1xyXG4gICAgICAgIHJldHVybiBfd2FpdEZvckFwcFJlc3VtZShhdXRoLCBtYW5hZ2VyLCBpYWJSZWYpO1xyXG4gICAgfVxyXG4gICAgX2lzSWZyYW1lV2ViU3RvcmFnZVN1cHBvcnRlZChfYXV0aCwgX2NiKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNZXRob2Qgbm90IGltcGxlbWVudGVkLicpO1xyXG4gICAgfVxyXG4gICAgX29yaWdpblZhbGlkYXRpb24oYXV0aCkge1xyXG4gICAgICAgIGNvbnN0IGtleSA9IGF1dGguX2tleSgpO1xyXG4gICAgICAgIGlmICghdGhpcy5vcmlnaW5WYWxpZGF0aW9uUHJvbWlzZXNba2V5XSkge1xyXG4gICAgICAgICAgICB0aGlzLm9yaWdpblZhbGlkYXRpb25Qcm9taXNlc1trZXldID0gX3ZhbGlkYXRlT3JpZ2luKGF1dGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5vcmlnaW5WYWxpZGF0aW9uUHJvbWlzZXNba2V5XTtcclxuICAgIH1cclxuICAgIGF0dGFjaENhbGxiYWNrTGlzdGVuZXJzKGF1dGgsIG1hbmFnZXIpIHtcclxuICAgICAgICAvLyBHZXQgdGhlIGdsb2JhbCBwbHVnaW5zXHJcbiAgICAgICAgY29uc3QgeyB1bml2ZXJzYWxMaW5rcywgaGFuZGxlT3BlblVSTCwgQnVpbGRJbmZvIH0gPSBfY29yZG92YVdpbmRvdygpO1xyXG4gICAgICAgIGNvbnN0IG5vRXZlbnRUaW1lb3V0ID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIFdlIGRpZG4ndCBzZWUgdGhhdCBpbml0aWFsIGV2ZW50LiBDbGVhciBhbnkgcGVuZGluZyBvYmplY3QgYW5kXHJcbiAgICAgICAgICAgIC8vIGRpc3BhdGNoIG5vIGV2ZW50XHJcbiAgICAgICAgICAgIGF3YWl0IF9nZXRBbmRSZW1vdmVFdmVudChhdXRoKTtcclxuICAgICAgICAgICAgbWFuYWdlci5vbkV2ZW50KGdlbmVyYXRlTm9FdmVudCgpKTtcclxuICAgICAgICB9LCBJTklUSUFMX0VWRU5UX1RJTUVPVVRfTVMpO1xyXG4gICAgICAgIGNvbnN0IHVuaXZlcnNhbExpbmtzQ2IgPSBhc3luYyAoZXZlbnREYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIFdlIGhhdmUgYW4gZXZlbnQgc28gd2UgY2FuIGNsZWFyIHRoZSBubyBldmVudCB0aW1lb3V0XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChub0V2ZW50VGltZW91dCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcnRpYWxFdmVudCA9IGF3YWl0IF9nZXRBbmRSZW1vdmVFdmVudChhdXRoKTtcclxuICAgICAgICAgICAgbGV0IGZpbmFsRXZlbnQgPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAocGFydGlhbEV2ZW50ICYmIChldmVudERhdGEgPT09IG51bGwgfHwgZXZlbnREYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBldmVudERhdGFbJ3VybCddKSkge1xyXG4gICAgICAgICAgICAgICAgZmluYWxFdmVudCA9IF9ldmVudEZyb21QYXJ0aWFsQW5kVXJsKHBhcnRpYWxFdmVudCwgZXZlbnREYXRhWyd1cmwnXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gSWYgZmluYWxFdmVudCBpcyBuZXZlciBmaWxsZWQsIHRyaWdnZXIgd2l0aCBubyBldmVudFxyXG4gICAgICAgICAgICBtYW5hZ2VyLm9uRXZlbnQoZmluYWxFdmVudCB8fCBnZW5lcmF0ZU5vRXZlbnQoKSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyBVbml2ZXJzYWwgbGlua3Mgc3Vic2NyaWJlciBkb2Vzbid0IGV4aXN0IGZvciBpT1MsIHNvIHdlIG5lZWQgdG8gY2hlY2tcclxuICAgICAgICBpZiAodHlwZW9mIHVuaXZlcnNhbExpbmtzICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgICAgICB0eXBlb2YgdW5pdmVyc2FsTGlua3Muc3Vic2NyaWJlID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHVuaXZlcnNhbExpbmtzLnN1YnNjcmliZShudWxsLCB1bml2ZXJzYWxMaW5rc0NiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaU9TIDcgb3IgOCBjdXN0b20gVVJMIHNjaGVtZXMuXHJcbiAgICAgICAgLy8gVGhpcyBpcyBhbHNvIHRoZSBjdXJyZW50IGRlZmF1bHQgYmVoYXZpb3IgZm9yIGlPUyA5Ky5cclxuICAgICAgICAvLyBGb3IgdGhpcyB0byB3b3JrLCBjb3Jkb3ZhLXBsdWdpbi1jdXN0b211cmxzY2hlbWUgbmVlZHMgdG8gYmUgaW5zdGFsbGVkLlxyXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9FZGR5VmVyYnJ1Z2dlbi9DdXN0b20tVVJMLXNjaGVtZVxyXG4gICAgICAgIC8vIERvIG5vdCBvdmVyd3JpdGUgdGhlIGV4aXN0aW5nIGRldmVsb3BlcidzIFVSTCBoYW5kbGVyLlxyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nSGFuZGxlT3BlblVSTCA9IGhhbmRsZU9wZW5VUkw7XHJcbiAgICAgICAgY29uc3QgcGFja2FnZVByZWZpeCA9IGAke0J1aWxkSW5mby5wYWNrYWdlTmFtZS50b0xvd2VyQ2FzZSgpfTovL2A7XHJcbiAgICAgICAgX2NvcmRvdmFXaW5kb3coKS5oYW5kbGVPcGVuVVJMID0gYXN5bmMgKHVybCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodXJsLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChwYWNrYWdlUHJlZml4KSkge1xyXG4gICAgICAgICAgICAgICAgLy8gV2Ugd2FudCB0aGlzIGludGVudGlvbmFsbHkgdG8gZmxvYXRcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICAgICAgICAgIHVuaXZlcnNhbExpbmtzQ2IoeyB1cmwgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQ2FsbCB0aGUgZGV2ZWxvcGVyJ3MgaGFuZGxlciBpZiBpdCBpcyBwcmVzZW50LlxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGV4aXN0aW5nSGFuZGxlT3BlblVSTCA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0hhbmRsZU9wZW5VUkwodXJsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhIGRldmVsb3BlciBlcnJvci4gRG9uJ3Qgc3RvcCB0aGUgZmxvdyBvZiB0aGUgU0RLLlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSBzdWl0YWJsZSBmb3IgQ29yZG92YVxyXG4gKiBiYXNlZCBhcHBsaWNhdGlvbnMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGNvcmRvdmFQb3B1cFJlZGlyZWN0UmVzb2x2ZXIgPSBDb3Jkb3ZhUG9wdXBSZWRpcmVjdFJlc29sdmVyO1xyXG5mdW5jdGlvbiBnZW5lcmF0ZU5vRXZlbnQoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHR5cGU6IFwidW5rbm93blwiIC8qIFVOS05PV04gKi8sXHJcbiAgICAgICAgZXZlbnRJZDogbnVsbCxcclxuICAgICAgICBzZXNzaW9uSWQ6IG51bGwsXHJcbiAgICAgICAgdXJsUmVzcG9uc2U6IG51bGwsXHJcbiAgICAgICAgcG9zdEJvZHk6IG51bGwsXHJcbiAgICAgICAgdGVuYW50SWQ6IG51bGwsXHJcbiAgICAgICAgZXJyb3I6IF9jcmVhdGVFcnJvcihcIm5vLWF1dGgtZXZlbnRcIiAvKiBOT19BVVRIX0VWRU5UICovKVxyXG4gICAgfTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBUaGlzIGZ1bmN0aW9uIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBieSBmcmFtZXdvcmtzIChlLmcuIEZpcmViYXNlVUktd2ViKSB0byBsb2cgdGhlaXIgdXNhZ2UuXHJcbi8vIEl0IGlzIG5vdCBpbnRlbmRlZCBmb3IgZGlyZWN0IHVzZSBieSBkZXZlbG9wZXIgYXBwcy4gTk8ganNkb2MgaGVyZSB0byBpbnRlbnRpb25hbGx5IGxlYXZlIGl0IG91dFxyXG4vLyBvZiBhdXRvZ2VuZXJhdGVkIGRvY3VtZW50YXRpb24gcGFnZXMgdG8gcmVkdWNlIGFjY2lkZW50YWwgbWlzdXNlLlxyXG5mdW5jdGlvbiBhZGRGcmFtZXdvcmtGb3JMb2dnaW5nKGF1dGgsIGZyYW1ld29yaykge1xyXG4gICAgX2Nhc3RBdXRoKGF1dGgpLl9sb2dGcmFtZXdvcmsoZnJhbWV3b3JrKTtcclxufVxuXG5leHBvcnQgeyBhZGRGcmFtZXdvcmtGb3JMb2dnaW5nLCBjb3Jkb3ZhUG9wdXBSZWRpcmVjdFJlc29sdmVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcm5hbC5qcy5tYXBcbiIsImltcG9ydCB7IF9yZWdpc3RlckNvbXBvbmVudCwgcmVnaXN0ZXJWZXJzaW9uLCBfZ2V0UHJvdmlkZXIsIGdldEFwcCwgX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSwgU0RLX1ZFUlNJT04gfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuaW1wb3J0IHsgTG9nZ2VyLCBMb2dMZXZlbCB9IGZyb20gJ0BmaXJlYmFzZS9sb2dnZXInO1xuaW1wb3J0IHsgY3JlYXRlTW9ja1VzZXJUb2tlbiwgZ2V0TW9kdWxhckluc3RhbmNlLCBkZWVwRXF1YWwsIGdldFVBLCBpc0luZGV4ZWREQkF2YWlsYWJsZSwgaXNTYWZhcmksIGlzTW9iaWxlQ29yZG92YSwgaXNSZWFjdE5hdGl2ZSwgaXNFbGVjdHJvbiwgaXNJRSwgaXNVV1AsIGlzQnJvd3NlckV4dGVuc2lvbiB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IFhocklvLCBFdmVudFR5cGUsIEVycm9yQ29kZSwgY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCwgZ2V0U3RhdEV2ZW50VGFyZ2V0LCBGZXRjaFhtbEh0dHBGYWN0b3J5LCBXZWJDaGFubmVsLCBFdmVudCwgU3RhdCB9IGZyb20gJ0BmaXJlYmFzZS93ZWJjaGFubmVsLXdyYXBwZXInO1xuXG5jb25zdCBTID0gXCJAZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFNpbXBsZSB3cmFwcGVyIGFyb3VuZCBhIG51bGxhYmxlIFVJRC4gTW9zdGx5IGV4aXN0cyB0byBtYWtlIGNvZGUgbW9yZVxuICogcmVhZGFibGUuXG4gKi9cbmNsYXNzIEQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy51aWQgPSB0O1xuICAgIH1cbiAgICBpc0F1dGhlbnRpY2F0ZWQoKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9IHRoaXMudWlkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEga2V5IHJlcHJlc2VudGluZyB0aGlzIHVzZXIsIHN1aXRhYmxlIGZvciBpbmNsdXNpb24gaW4gYVxuICAgICAqIGRpY3Rpb25hcnkuXG4gICAgICovICAgIHRvS2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0F1dGhlbnRpY2F0ZWQoKSA/IFwidWlkOlwiICsgdGhpcy51aWQgOiBcImFub255bW91cy11c2VyXCI7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdC51aWQgPT09IHRoaXMudWlkO1xuICAgIH1cbn1cblxuLyoqIEEgdXNlciB3aXRoIGEgbnVsbCBVSUQuICovIEQuVU5BVVRIRU5USUNBVEVEID0gbmV3IEQobnVsbCksIFxuLy8gVE9ETyhtaWtlbGVoZW4pOiBMb29rIGludG8gZ2V0dGluZyBhIHByb3BlciB1aWQtZXF1aXZhbGVudCBmb3Jcbi8vIG5vbi1GaXJlYmFzZUF1dGggcHJvdmlkZXJzLlxuRC5HT09HTEVfQ1JFREVOVElBTFMgPSBuZXcgRChcImdvb2dsZS1jcmVkZW50aWFscy11aWRcIiksIEQuRklSU1RfUEFSVFkgPSBuZXcgRChcImZpcnN0LXBhcnR5LXVpZFwiKSwgXG5ELk1PQ0tfVVNFUiA9IG5ldyBEKFwibW9jay11c2VyXCIpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xubGV0IEMgPSBcIjkuNi4xXCI7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jb25zdCBOID0gbmV3IExvZ2dlcihcIkBmaXJlYmFzZS9maXJlc3RvcmVcIik7XG5cbi8vIEhlbHBlciBtZXRob2RzIGFyZSBuZWVkZWQgYmVjYXVzZSB2YXJpYWJsZXMgY2FuJ3QgYmUgZXhwb3J0ZWQgYXMgcmVhZC93cml0ZVxuZnVuY3Rpb24gaygpIHtcbiAgICByZXR1cm4gTi5sb2dMZXZlbDtcbn1cblxuLyoqXG4gKiBTZXRzIHRoZSB2ZXJib3NpdHkgb2YgQ2xvdWQgRmlyZXN0b3JlIGxvZ3MgKGRlYnVnLCBlcnJvciwgb3Igc2lsZW50KS5cbiAqXG4gKiBAcGFyYW0gbG9nTGV2ZWwgLSBUaGUgdmVyYm9zaXR5IHlvdSBzZXQgZm9yIGFjdGl2aXR5IGFuZCBlcnJvciBsb2dnaW5nLiBDYW5cbiAqICAgYmUgYW55IG9mIHRoZSBmb2xsb3dpbmcgdmFsdWVzOlxuICpcbiAqICAgPHVsPlxuICogICAgIDxsaT5gZGVidWdgIGZvciB0aGUgbW9zdCB2ZXJib3NlIGxvZ2dpbmcgbGV2ZWwsIHByaW1hcmlseSBmb3JcbiAqICAgICBkZWJ1Z2dpbmcuPC9saT5cbiAqICAgICA8bGk+YGVycm9yYCB0byBsb2cgZXJyb3JzIG9ubHkuPC9saT5cbiAqICAgICA8bGk+PGNvZGU+YHNpbGVudGAgdG8gdHVybiBvZmYgbG9nZ2luZy48L2xpPlxuICogICA8L3VsPlxuICovIGZ1bmN0aW9uIHgodCkge1xuICAgIE4uc2V0TG9nTGV2ZWwodCk7XG59XG5cbmZ1bmN0aW9uICQodCwgLi4uZSkge1xuICAgIGlmIChOLmxvZ0xldmVsIDw9IExvZ0xldmVsLkRFQlVHKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLm1hcChNKTtcbiAgICAgICAgTi5kZWJ1ZyhgRmlyZXN0b3JlICgke0N9KTogJHt0fWAsIC4uLm4pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gRih0LCAuLi5lKSB7XG4gICAgaWYgKE4ubG9nTGV2ZWwgPD0gTG9nTGV2ZWwuRVJST1IpIHtcbiAgICAgICAgY29uc3QgbiA9IGUubWFwKE0pO1xuICAgICAgICBOLmVycm9yKGBGaXJlc3RvcmUgKCR7Q30pOiAke3R9YCwgLi4ubik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIE8odCwgLi4uZSkge1xuICAgIGlmIChOLmxvZ0xldmVsIDw9IExvZ0xldmVsLldBUk4pIHtcbiAgICAgICAgY29uc3QgbiA9IGUubWFwKE0pO1xuICAgICAgICBOLndhcm4oYEZpcmVzdG9yZSAoJHtDfSk6ICR7dH1gLCAuLi5uKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ29udmVydHMgYW4gYWRkaXRpb25hbCBsb2cgcGFyYW1ldGVyIHRvIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uLlxuICovIGZ1bmN0aW9uIE0odCkge1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiB0KSByZXR1cm4gdDtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gZSA9IHQsIEpTT04uc3RyaW5naWZ5KGUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gQ29udmVydGluZyB0byBKU09OIGZhaWxlZCwganVzdCBsb2cgdGhlIG9iamVjdCBkaXJlY3RseVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAvKiogRm9ybWF0cyBhbiBvYmplY3QgYXMgYSBKU09OIHN0cmluZywgc3VpdGFibGUgZm9yIGxvZ2dpbmcuICovXG4gICAgdmFyIGU7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFVuY29uZGl0aW9uYWxseSBmYWlscywgdGhyb3dpbmcgYW4gRXJyb3Igd2l0aCB0aGUgZ2l2ZW4gbWVzc2FnZS5cbiAqIE1lc3NhZ2VzIGFyZSBzdHJpcHBlZCBpbiBwcm9kdWN0aW9uIGJ1aWxkcy5cbiAqXG4gKiBSZXR1cm5zIGBuZXZlcmAgYW5kIGNhbiBiZSB1c2VkIGluIGV4cHJlc3Npb25zOlxuICogQGV4YW1wbGVcbiAqIGxldCBmdXR1cmVWYXIgPSBmYWlsKCdub3QgaW1wbGVtZW50ZWQgeWV0Jyk7XG4gKi8gZnVuY3Rpb24gTCh0ID0gXCJVbmV4cGVjdGVkIHN0YXRlXCIpIHtcbiAgICAvLyBMb2cgdGhlIGZhaWx1cmUgaW4gYWRkaXRpb24gdG8gdGhyb3cgYW4gZXhjZXB0aW9uLCBqdXN0IGluIGNhc2UgdGhlXG4gICAgLy8gZXhjZXB0aW9uIGlzIHN3YWxsb3dlZC5cbiAgICBjb25zdCBlID0gYEZJUkVTVE9SRSAoJHtDfSkgSU5URVJOQUwgQVNTRVJUSU9OIEZBSUxFRDogYCArIHQ7XG4gICAgLy8gTk9URTogV2UgZG9uJ3QgdXNlIEZpcmVzdG9yZUVycm9yIGhlcmUgYmVjYXVzZSB0aGVzZSBhcmUgaW50ZXJuYWwgZmFpbHVyZXNcbiAgICAvLyB0aGF0IGNhbm5vdCBiZSBoYW5kbGVkIGJ5IHRoZSB1c2VyLiAoQWxzbyBpdCB3b3VsZCBjcmVhdGUgYSBjaXJjdWxhclxuICAgIC8vIGRlcGVuZGVuY3kgYmV0d2VlbiB0aGUgZXJyb3IgYW5kIGFzc2VydCBtb2R1bGVzIHdoaWNoIGRvZXNuJ3Qgd29yay4pXG4gICAgdGhyb3cgRihlKSwgbmV3IEVycm9yKGUpO1xufVxuXG4vKipcbiAqIEZhaWxzIGlmIHRoZSBnaXZlbiBhc3NlcnRpb24gY29uZGl0aW9uIGlzIGZhbHNlLCB0aHJvd2luZyBhbiBFcnJvciB3aXRoIHRoZVxuICogZ2l2ZW4gbWVzc2FnZSBpZiBpdCBkaWQuXG4gKlxuICogTWVzc2FnZXMgYXJlIHN0cmlwcGVkIGluIHByb2R1Y3Rpb24gYnVpbGRzLlxuICovIGZ1bmN0aW9uIEIodCwgZSkge1xuICAgIHQgfHwgTCgpO1xufVxuXG4vKipcbiAqIEZhaWxzIGlmIHRoZSBnaXZlbiBhc3NlcnRpb24gY29uZGl0aW9uIGlzIGZhbHNlLCB0aHJvd2luZyBhbiBFcnJvciB3aXRoIHRoZVxuICogZ2l2ZW4gbWVzc2FnZSBpZiBpdCBkaWQuXG4gKlxuICogVGhlIGNvZGUgb2YgY2FsbHNpdGVzIGludm9raW5nIHRoaXMgZnVuY3Rpb24gYXJlIHN0cmlwcGVkIG91dCBpbiBwcm9kdWN0aW9uXG4gKiBidWlsZHMuIEFueSBzaWRlLWVmZmVjdHMgb2YgY29kZSB3aXRoaW4gdGhlIGRlYnVnQXNzZXJ0KCkgaW52b2NhdGlvbiB3aWxsIG5vdFxuICogaGFwcGVuIGluIHRoaXMgY2FzZS5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBVKHQsIGUpIHtcbiAgICB0IHx8IEwoKTtcbn1cblxuLyoqXG4gKiBDYXN0cyBgb2JqYCB0byBgVGAuIEluIG5vbi1wcm9kdWN0aW9uIGJ1aWxkcywgdmVyaWZpZXMgdGhhdCBgb2JqYCBpcyBhblxuICogaW5zdGFuY2Ugb2YgYFRgIGJlZm9yZSBjYXN0aW5nLlxuICovIGZ1bmN0aW9uIHEodCwgXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZSkge1xuICAgIHJldHVybiB0O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBLID0ge1xuICAgIC8vIENhdXNlcyBhcmUgY29waWVkIGZyb206XG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2dycGMvZ3JwYy9ibG9iL2JjZWVjOTRlYTRmYzVmMDA4NWQ4MTIzNWQ4ZTFjMDY3OThkYzM0MWEvaW5jbHVkZS9ncnBjJTJCJTJCL2ltcGwvY29kZWdlbi9zdGF0dXNfY29kZV9lbnVtLmhcbiAgICAvKiogTm90IGFuIGVycm9yOyByZXR1cm5lZCBvbiBzdWNjZXNzLiAqL1xuICAgIE9LOiBcIm9rXCIsXG4gICAgLyoqIFRoZSBvcGVyYXRpb24gd2FzIGNhbmNlbGxlZCAodHlwaWNhbGx5IGJ5IHRoZSBjYWxsZXIpLiAqL1xuICAgIENBTkNFTExFRDogXCJjYW5jZWxsZWRcIixcbiAgICAvKiogVW5rbm93biBlcnJvciBvciBhbiBlcnJvciBmcm9tIGEgZGlmZmVyZW50IGVycm9yIGRvbWFpbi4gKi9cbiAgICBVTktOT1dOOiBcInVua25vd25cIixcbiAgICAvKipcbiAgICAgKiBDbGllbnQgc3BlY2lmaWVkIGFuIGludmFsaWQgYXJndW1lbnQuIE5vdGUgdGhhdCB0aGlzIGRpZmZlcnMgZnJvbVxuICAgICAqIEZBSUxFRF9QUkVDT05ESVRJT04uIElOVkFMSURfQVJHVU1FTlQgaW5kaWNhdGVzIGFyZ3VtZW50cyB0aGF0IGFyZVxuICAgICAqIHByb2JsZW1hdGljIHJlZ2FyZGxlc3Mgb2YgdGhlIHN0YXRlIG9mIHRoZSBzeXN0ZW0gKGUuZy4sIGEgbWFsZm9ybWVkIGZpbGVcbiAgICAgKiBuYW1lKS5cbiAgICAgKi9cbiAgICBJTlZBTElEX0FSR1VNRU5UOiBcImludmFsaWQtYXJndW1lbnRcIixcbiAgICAvKipcbiAgICAgKiBEZWFkbGluZSBleHBpcmVkIGJlZm9yZSBvcGVyYXRpb24gY291bGQgY29tcGxldGUuIEZvciBvcGVyYXRpb25zIHRoYXRcbiAgICAgKiBjaGFuZ2UgdGhlIHN0YXRlIG9mIHRoZSBzeXN0ZW0sIHRoaXMgZXJyb3IgbWF5IGJlIHJldHVybmVkIGV2ZW4gaWYgdGhlXG4gICAgICogb3BlcmF0aW9uIGhhcyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5LiBGb3IgZXhhbXBsZSwgYSBzdWNjZXNzZnVsIHJlc3BvbnNlXG4gICAgICogZnJvbSBhIHNlcnZlciBjb3VsZCBoYXZlIGJlZW4gZGVsYXllZCBsb25nIGVub3VnaCBmb3IgdGhlIGRlYWRsaW5lIHRvXG4gICAgICogZXhwaXJlLlxuICAgICAqL1xuICAgIERFQURMSU5FX0VYQ0VFREVEOiBcImRlYWRsaW5lLWV4Y2VlZGVkXCIsXG4gICAgLyoqIFNvbWUgcmVxdWVzdGVkIGVudGl0eSAoZS5nLiwgZmlsZSBvciBkaXJlY3RvcnkpIHdhcyBub3QgZm91bmQuICovXG4gICAgTk9UX0ZPVU5EOiBcIm5vdC1mb3VuZFwiLFxuICAgIC8qKlxuICAgICAqIFNvbWUgZW50aXR5IHRoYXQgd2UgYXR0ZW1wdGVkIHRvIGNyZWF0ZSAoZS5nLiwgZmlsZSBvciBkaXJlY3RvcnkpIGFscmVhZHlcbiAgICAgKiBleGlzdHMuXG4gICAgICovXG4gICAgQUxSRUFEWV9FWElTVFM6IFwiYWxyZWFkeS1leGlzdHNcIixcbiAgICAvKipcbiAgICAgKiBUaGUgY2FsbGVyIGRvZXMgbm90IGhhdmUgcGVybWlzc2lvbiB0byBleGVjdXRlIHRoZSBzcGVjaWZpZWQgb3BlcmF0aW9uLlxuICAgICAqIFBFUk1JU1NJT05fREVOSUVEIG11c3Qgbm90IGJlIHVzZWQgZm9yIHJlamVjdGlvbnMgY2F1c2VkIGJ5IGV4aGF1c3RpbmdcbiAgICAgKiBzb21lIHJlc291cmNlICh1c2UgUkVTT1VSQ0VfRVhIQVVTVEVEIGluc3RlYWQgZm9yIHRob3NlIGVycm9ycykuXG4gICAgICogUEVSTUlTU0lPTl9ERU5JRUQgbXVzdCBub3QgYmUgdXNlZCBpZiB0aGUgY2FsbGVyIGNhbiBub3QgYmUgaWRlbnRpZmllZFxuICAgICAqICh1c2UgVU5BVVRIRU5USUNBVEVEIGluc3RlYWQgZm9yIHRob3NlIGVycm9ycykuXG4gICAgICovXG4gICAgUEVSTUlTU0lPTl9ERU5JRUQ6IFwicGVybWlzc2lvbi1kZW5pZWRcIixcbiAgICAvKipcbiAgICAgKiBUaGUgcmVxdWVzdCBkb2VzIG5vdCBoYXZlIHZhbGlkIGF1dGhlbnRpY2F0aW9uIGNyZWRlbnRpYWxzIGZvciB0aGVcbiAgICAgKiBvcGVyYXRpb24uXG4gICAgICovXG4gICAgVU5BVVRIRU5USUNBVEVEOiBcInVuYXV0aGVudGljYXRlZFwiLFxuICAgIC8qKlxuICAgICAqIFNvbWUgcmVzb3VyY2UgaGFzIGJlZW4gZXhoYXVzdGVkLCBwZXJoYXBzIGEgcGVyLXVzZXIgcXVvdGEsIG9yIHBlcmhhcHMgdGhlXG4gICAgICogZW50aXJlIGZpbGUgc3lzdGVtIGlzIG91dCBvZiBzcGFjZS5cbiAgICAgKi9cbiAgICBSRVNPVVJDRV9FWEhBVVNURUQ6IFwicmVzb3VyY2UtZXhoYXVzdGVkXCIsXG4gICAgLyoqXG4gICAgICogT3BlcmF0aW9uIHdhcyByZWplY3RlZCBiZWNhdXNlIHRoZSBzeXN0ZW0gaXMgbm90IGluIGEgc3RhdGUgcmVxdWlyZWQgZm9yXG4gICAgICogdGhlIG9wZXJhdGlvbidzIGV4ZWN1dGlvbi4gRm9yIGV4YW1wbGUsIGRpcmVjdG9yeSB0byBiZSBkZWxldGVkIG1heSBiZVxuICAgICAqIG5vbi1lbXB0eSwgYW4gcm1kaXIgb3BlcmF0aW9uIGlzIGFwcGxpZWQgdG8gYSBub24tZGlyZWN0b3J5LCBldGMuXG4gICAgICpcbiAgICAgKiBBIGxpdG11cyB0ZXN0IHRoYXQgbWF5IGhlbHAgYSBzZXJ2aWNlIGltcGxlbWVudG9yIGluIGRlY2lkaW5nXG4gICAgICogYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OLCBBQk9SVEVELCBhbmQgVU5BVkFJTEFCTEU6XG4gICAgICogIChhKSBVc2UgVU5BVkFJTEFCTEUgaWYgdGhlIGNsaWVudCBjYW4gcmV0cnkganVzdCB0aGUgZmFpbGluZyBjYWxsLlxuICAgICAqICAoYikgVXNlIEFCT1JURUQgaWYgdGhlIGNsaWVudCBzaG91bGQgcmV0cnkgYXQgYSBoaWdoZXItbGV2ZWxcbiAgICAgKiAgICAgIChlLmcuLCByZXN0YXJ0aW5nIGEgcmVhZC1tb2RpZnktd3JpdGUgc2VxdWVuY2UpLlxuICAgICAqICAoYykgVXNlIEZBSUxFRF9QUkVDT05ESVRJT04gaWYgdGhlIGNsaWVudCBzaG91bGQgbm90IHJldHJ5IHVudGlsXG4gICAgICogICAgICB0aGUgc3lzdGVtIHN0YXRlIGhhcyBiZWVuIGV4cGxpY2l0bHkgZml4ZWQuIEUuZy4sIGlmIGFuIFwicm1kaXJcIlxuICAgICAqICAgICAgZmFpbHMgYmVjYXVzZSB0aGUgZGlyZWN0b3J5IGlzIG5vbi1lbXB0eSwgRkFJTEVEX1BSRUNPTkRJVElPTlxuICAgICAqICAgICAgc2hvdWxkIGJlIHJldHVybmVkIHNpbmNlIHRoZSBjbGllbnQgc2hvdWxkIG5vdCByZXRyeSB1bmxlc3NcbiAgICAgKiAgICAgIHRoZXkgaGF2ZSBmaXJzdCBmaXhlZCB1cCB0aGUgZGlyZWN0b3J5IGJ5IGRlbGV0aW5nIGZpbGVzIGZyb20gaXQuXG4gICAgICogIChkKSBVc2UgRkFJTEVEX1BSRUNPTkRJVElPTiBpZiB0aGUgY2xpZW50IHBlcmZvcm1zIGNvbmRpdGlvbmFsXG4gICAgICogICAgICBSRVNUIEdldC9VcGRhdGUvRGVsZXRlIG9uIGEgcmVzb3VyY2UgYW5kIHRoZSByZXNvdXJjZSBvbiB0aGVcbiAgICAgKiAgICAgIHNlcnZlciBkb2VzIG5vdCBtYXRjaCB0aGUgY29uZGl0aW9uLiBFLmcuLCBjb25mbGljdGluZ1xuICAgICAqICAgICAgcmVhZC1tb2RpZnktd3JpdGUgb24gdGhlIHNhbWUgcmVzb3VyY2UuXG4gICAgICovXG4gICAgRkFJTEVEX1BSRUNPTkRJVElPTjogXCJmYWlsZWQtcHJlY29uZGl0aW9uXCIsXG4gICAgLyoqXG4gICAgICogVGhlIG9wZXJhdGlvbiB3YXMgYWJvcnRlZCwgdHlwaWNhbGx5IGR1ZSB0byBhIGNvbmN1cnJlbmN5IGlzc3VlIGxpa2VcbiAgICAgKiBzZXF1ZW5jZXIgY2hlY2sgZmFpbHVyZXMsIHRyYW5zYWN0aW9uIGFib3J0cywgZXRjLlxuICAgICAqXG4gICAgICogU2VlIGxpdG11cyB0ZXN0IGFib3ZlIGZvciBkZWNpZGluZyBiZXR3ZWVuIEZBSUxFRF9QUkVDT05ESVRJT04sIEFCT1JURUQsXG4gICAgICogYW5kIFVOQVZBSUxBQkxFLlxuICAgICAqL1xuICAgIEFCT1JURUQ6IFwiYWJvcnRlZFwiLFxuICAgIC8qKlxuICAgICAqIE9wZXJhdGlvbiB3YXMgYXR0ZW1wdGVkIHBhc3QgdGhlIHZhbGlkIHJhbmdlLiBFLmcuLCBzZWVraW5nIG9yIHJlYWRpbmdcbiAgICAgKiBwYXN0IGVuZCBvZiBmaWxlLlxuICAgICAqXG4gICAgICogVW5saWtlIElOVkFMSURfQVJHVU1FTlQsIHRoaXMgZXJyb3IgaW5kaWNhdGVzIGEgcHJvYmxlbSB0aGF0IG1heSBiZSBmaXhlZFxuICAgICAqIGlmIHRoZSBzeXN0ZW0gc3RhdGUgY2hhbmdlcy4gRm9yIGV4YW1wbGUsIGEgMzItYml0IGZpbGUgc3lzdGVtIHdpbGxcbiAgICAgKiBnZW5lcmF0ZSBJTlZBTElEX0FSR1VNRU5UIGlmIGFza2VkIHRvIHJlYWQgYXQgYW4gb2Zmc2V0IHRoYXQgaXMgbm90IGluIHRoZVxuICAgICAqIHJhbmdlIFswLDJeMzItMV0sIGJ1dCBpdCB3aWxsIGdlbmVyYXRlIE9VVF9PRl9SQU5HRSBpZiBhc2tlZCB0byByZWFkIGZyb21cbiAgICAgKiBhbiBvZmZzZXQgcGFzdCB0aGUgY3VycmVudCBmaWxlIHNpemUuXG4gICAgICpcbiAgICAgKiBUaGVyZSBpcyBhIGZhaXIgYml0IG9mIG92ZXJsYXAgYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OIGFuZFxuICAgICAqIE9VVF9PRl9SQU5HRS4gV2UgcmVjb21tZW5kIHVzaW5nIE9VVF9PRl9SQU5HRSAodGhlIG1vcmUgc3BlY2lmaWMgZXJyb3IpXG4gICAgICogd2hlbiBpdCBhcHBsaWVzIHNvIHRoYXQgY2FsbGVycyB3aG8gYXJlIGl0ZXJhdGluZyB0aHJvdWdoIGEgc3BhY2UgY2FuXG4gICAgICogZWFzaWx5IGxvb2sgZm9yIGFuIE9VVF9PRl9SQU5HRSBlcnJvciB0byBkZXRlY3Qgd2hlbiB0aGV5IGFyZSBkb25lLlxuICAgICAqL1xuICAgIE9VVF9PRl9SQU5HRTogXCJvdXQtb2YtcmFuZ2VcIixcbiAgICAvKiogT3BlcmF0aW9uIGlzIG5vdCBpbXBsZW1lbnRlZCBvciBub3Qgc3VwcG9ydGVkL2VuYWJsZWQgaW4gdGhpcyBzZXJ2aWNlLiAqL1xuICAgIFVOSU1QTEVNRU5URUQ6IFwidW5pbXBsZW1lbnRlZFwiLFxuICAgIC8qKlxuICAgICAqIEludGVybmFsIGVycm9ycy4gTWVhbnMgc29tZSBpbnZhcmlhbnRzIGV4cGVjdGVkIGJ5IHVuZGVybHlpbmcgU3lzdGVtIGhhc1xuICAgICAqIGJlZW4gYnJva2VuLiBJZiB5b3Ugc2VlIG9uZSBvZiB0aGVzZSBlcnJvcnMsIFNvbWV0aGluZyBpcyB2ZXJ5IGJyb2tlbi5cbiAgICAgKi9cbiAgICBJTlRFUk5BTDogXCJpbnRlcm5hbFwiLFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXJ2aWNlIGlzIGN1cnJlbnRseSB1bmF2YWlsYWJsZS4gVGhpcyBpcyBhIG1vc3QgbGlrZWx5IGEgdHJhbnNpZW50XG4gICAgICogY29uZGl0aW9uIGFuZCBtYXkgYmUgY29ycmVjdGVkIGJ5IHJldHJ5aW5nIHdpdGggYSBiYWNrb2ZmLlxuICAgICAqXG4gICAgICogU2VlIGxpdG11cyB0ZXN0IGFib3ZlIGZvciBkZWNpZGluZyBiZXR3ZWVuIEZBSUxFRF9QUkVDT05ESVRJT04sIEFCT1JURUQsXG4gICAgICogYW5kIFVOQVZBSUxBQkxFLlxuICAgICAqL1xuICAgIFVOQVZBSUxBQkxFOiBcInVuYXZhaWxhYmxlXCIsXG4gICAgLyoqIFVucmVjb3ZlcmFibGUgZGF0YSBsb3NzIG9yIGNvcnJ1cHRpb24uICovXG4gICAgREFUQV9MT1NTOiBcImRhdGEtbG9zc1wiXG59O1xuXG4vKiogQW4gZXJyb3IgcmV0dXJuZWQgYnkgYSBGaXJlc3RvcmUgb3BlcmF0aW9uLiAqLyBjbGFzcyBqIGV4dGVuZHMgRXJyb3Ige1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIGJhY2tlbmQgZXJyb3IgY29kZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBlcnJvci5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBBIGN1c3RvbSBlcnJvciBkZXNjcmlwdGlvbi5cbiAgICAgKi9cbiAgICBlKSB7XG4gICAgICAgIHN1cGVyKGUpLCB0aGlzLmNvZGUgPSB0LCB0aGlzLm1lc3NhZ2UgPSBlLCBcbiAgICAgICAgLyoqIFRoZSBjdXN0b20gbmFtZSBmb3IgYWxsIEZpcmVzdG9yZUVycm9ycy4gKi9cbiAgICAgICAgdGhpcy5uYW1lID0gXCJGaXJlYmFzZUVycm9yXCIsIFxuICAgICAgICAvLyBIQUNLOiBXZSB3cml0ZSBhIHRvU3RyaW5nIHByb3BlcnR5IGRpcmVjdGx5IGJlY2F1c2UgRXJyb3IgaXMgbm90IGEgcmVhbFxuICAgICAgICAvLyBjbGFzcyBhbmQgc28gaW5oZXJpdGFuY2UgZG9lcyBub3Qgd29yayBjb3JyZWN0bHkuIFdlIGNvdWxkIGFsdGVybmF0aXZlbHlcbiAgICAgICAgLy8gZG8gdGhlIHNhbWUgXCJiYWNrLWRvb3IgaW5oZXJpdGFuY2VcIiB0cmljayB0aGF0IEZpcmViYXNlRXJyb3IgZG9lcy5cbiAgICAgICAgdGhpcy50b1N0cmluZyA9ICgpID0+IGAke3RoaXMubmFtZX06IFtjb2RlPSR7dGhpcy5jb2RlfV06ICR7dGhpcy5tZXNzYWdlfWA7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBRIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmUgPSB0LCB0aGlzLnJlamVjdCA9IGU7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIFcge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy51c2VyID0gZSwgdGhpcy50eXBlID0gXCJPQXV0aFwiLCB0aGlzLmhlYWRlcnMgPSBuZXcgTWFwLCB0aGlzLmhlYWRlcnMuc2V0KFwiQXV0aG9yaXphdGlvblwiLCBgQmVhcmVyICR7dH1gKTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBDcmVkZW50aWFsc1Byb3ZpZGVyIHRoYXQgYWx3YXlzIHlpZWxkcyBhbiBlbXB0eSB0b2tlbi5cbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIEcge1xuICAgIGdldFRva2VuKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7fVxuICAgIHN0YXJ0KHQsIGUpIHtcbiAgICAgICAgLy8gRmlyZSB3aXRoIGluaXRpYWwgdXNlci5cbiAgICAgICAgdC5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiBlKEQuVU5BVVRIRU5USUNBVEVEKSkpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHt9XG59XG5cbi8qKlxuICogQSBDcmVkZW50aWFsc1Byb3ZpZGVyIHRoYXQgYWx3YXlzIHJldHVybnMgYSBjb25zdGFudCB0b2tlbi4gVXNlZCBmb3JcbiAqIGVtdWxhdG9yIHRva2VuIG1vY2tpbmcuXG4gKi8gY2xhc3MgeiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnRva2VuID0gdCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdG9yZXMgdGhlIGxpc3RlbmVyIHJlZ2lzdGVyZWQgd2l0aCBzZXRDaGFuZ2VMaXN0ZW5lcigpXG4gICAgICAgICAqIFRoaXMgaXNuJ3QgYWN0dWFsbHkgbmVjZXNzYXJ5IHNpbmNlIHRoZSBVSUQgbmV2ZXIgY2hhbmdlcywgYnV0IHdlIHVzZSB0aGlzXG4gICAgICAgICAqIHRvIHZlcmlmeSB0aGUgbGlzdGVuIGNvbnRyYWN0IGlzIGFkaGVyZWQgdG8gaW4gdGVzdHMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNoYW5nZUxpc3RlbmVyID0gbnVsbDtcbiAgICB9XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy50b2tlbik7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb2tlbigpIHt9XG4gICAgc3RhcnQodCwgZSkge1xuICAgICAgICB0aGlzLmNoYW5nZUxpc3RlbmVyID0gZSwgXG4gICAgICAgIC8vIEZpcmUgd2l0aCBpbml0aWFsIHVzZXIuXG4gICAgICAgIHQuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gZSh0aGlzLnRva2VuLnVzZXIpKSk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB0aGlzLmNoYW5nZUxpc3RlbmVyID0gbnVsbDtcbiAgICB9XG59XG5cbmNsYXNzIEgge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy50ID0gdCwgXG4gICAgICAgIC8qKiBUcmFja3MgdGhlIGN1cnJlbnQgVXNlci4gKi9cbiAgICAgICAgdGhpcy5jdXJyZW50VXNlciA9IEQuVU5BVVRIRU5USUNBVEVELCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvdW50ZXIgdXNlZCB0byBkZXRlY3QgaWYgdGhlIHRva2VuIGNoYW5nZWQgd2hpbGUgYSBnZXRUb2tlbiByZXF1ZXN0IHdhc1xuICAgICAgICAgKiBvdXRzdGFuZGluZy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaSA9IDAsIHRoaXMuZm9yY2VSZWZyZXNoID0gITEsIHRoaXMuYXV0aCA9IG51bGw7XG4gICAgfVxuICAgIHN0YXJ0KHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSB0aGlzLmk7XG4gICAgICAgIC8vIEEgY2hhbmdlIGxpc3RlbmVyIHRoYXQgcHJldmVudHMgZG91YmxlLWZpcmluZyBmb3IgdGhlIHNhbWUgdG9rZW4gY2hhbmdlLlxuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSB0ID0+IHRoaXMuaSAhPT0gbiA/IChuID0gdGhpcy5pLCBlKHQpKSA6IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAvLyBBIHByb21pc2UgdGhhdCBjYW4gYmUgd2FpdGVkIG9uIHRvIGJsb2NrIG9uIHRoZSBuZXh0IHRva2VuIGNoYW5nZS5cbiAgICAgICAgLy8gVGhpcyBwcm9taXNlIGlzIHJlLWNyZWF0ZWQgYWZ0ZXIgZWFjaCBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgbGV0IGkgPSBuZXcgUTtcbiAgICAgICAgdGhpcy5vID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5pKyssIHRoaXMuY3VycmVudFVzZXIgPSB0aGlzLnUoKSwgaS5yZXNvbHZlKCksIGkgPSBuZXcgUSwgdC5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiBzKHRoaXMuY3VycmVudFVzZXIpKSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHIgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gaTtcbiAgICAgICAgICAgIHQuZW5xdWV1ZVJldHJ5YWJsZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IGUucHJvbWlzZSwgYXdhaXQgcyh0aGlzLmN1cnJlbnRVc2VyKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSwgbyA9IHQgPT4ge1xuICAgICAgICAgICAgJChcIkZpcmViYXNlQXV0aENyZWRlbnRpYWxzUHJvdmlkZXJcIiwgXCJBdXRoIGRldGVjdGVkXCIpLCB0aGlzLmF1dGggPSB0LCB0aGlzLmF1dGguYWRkQXV0aFRva2VuTGlzdGVuZXIodGhpcy5vKSwgXG4gICAgICAgICAgICByKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudC5vbkluaXQoKHQgPT4gbyh0KSkpLCBcbiAgICAgICAgLy8gT3VyIHVzZXJzIGNhbiBpbml0aWFsaXplIEF1dGggcmlnaHQgYWZ0ZXIgRmlyZXN0b3JlLCBzbyB3ZSBnaXZlIGl0XG4gICAgICAgIC8vIGEgY2hhbmNlIHRvIHJlZ2lzdGVyIGl0c2VsZiB3aXRoIHRoZSBjb21wb25lbnQgZnJhbWV3b3JrIGJlZm9yZSB3ZVxuICAgICAgICAvLyBkZXRlcm1pbmUgd2hldGhlciB0byBzdGFydCB1cCBpbiB1bmF1dGhlbnRpY2F0ZWQgbW9kZS5cbiAgICAgICAgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmF1dGgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy50LmdldEltbWVkaWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiAhMFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHQgPyBvKHQpIDogKFxuICAgICAgICAgICAgICAgIC8vIElmIGF1dGggaXMgc3RpbGwgbm90IGF2YWlsYWJsZSwgcHJvY2VlZCB3aXRoIGBudWxsYCB1c2VyXG4gICAgICAgICAgICAgICAgJChcIkZpcmViYXNlQXV0aENyZWRlbnRpYWxzUHJvdmlkZXJcIiwgXCJBdXRoIG5vdCB5ZXQgZGV0ZWN0ZWRcIiksIGkucmVzb2x2ZSgpLCBpID0gbmV3IFEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSwgMCksIHIoKTtcbiAgICB9XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIC8vIFRha2Ugbm90ZSBvZiB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgdG9rZW5Db3VudGVyIHNvIHRoYXQgdGhpcyBtZXRob2RcbiAgICAgICAgLy8gY2FuIGZhaWwgKHdpdGggYW4gQUJPUlRFRCBlcnJvcikgaWYgdGhlcmUgaXMgYSB0b2tlbiBjaGFuZ2Ugd2hpbGUgdGhlXG4gICAgICAgIC8vIHJlcXVlc3QgaXMgb3V0c3RhbmRpbmcuXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmksIGUgPSB0aGlzLmZvcmNlUmVmcmVzaDtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yY2VSZWZyZXNoID0gITEsIHRoaXMuYXV0aCA/IHRoaXMuYXV0aC5nZXRUb2tlbihlKS50aGVuKChlID0+IFxuICAgICAgICAvLyBDYW5jZWwgdGhlIHJlcXVlc3Qgc2luY2UgdGhlIHRva2VuIGNoYW5nZWQgd2hpbGUgdGhlIHJlcXVlc3Qgd2FzXG4gICAgICAgIC8vIG91dHN0YW5kaW5nIHNvIHRoZSByZXNwb25zZSBpcyBwb3RlbnRpYWxseSBmb3IgYSBwcmV2aW91cyB1c2VyICh3aGljaFxuICAgICAgICAvLyB1c2VyLCB3ZSBjYW4ndCBiZSBzdXJlKS5cbiAgICAgICAgdGhpcy5pICE9PSB0ID8gKCQoXCJGaXJlYmFzZUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyXCIsIFwiZ2V0VG9rZW4gYWJvcnRlZCBkdWUgdG8gdG9rZW4gY2hhbmdlLlwiKSwgXG4gICAgICAgIHRoaXMuZ2V0VG9rZW4oKSkgOiBlID8gKEIoXCJzdHJpbmdcIiA9PSB0eXBlb2YgZS5hY2Nlc3NUb2tlbiksIG5ldyBXKGUuYWNjZXNzVG9rZW4sIHRoaXMuY3VycmVudFVzZXIpKSA6IG51bGwpKSA6IFByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICB9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge1xuICAgICAgICB0aGlzLmZvcmNlUmVmcmVzaCA9ICEwO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgdGhpcy5hdXRoICYmIHRoaXMuYXV0aC5yZW1vdmVBdXRoVG9rZW5MaXN0ZW5lcih0aGlzLm8pO1xuICAgIH1cbiAgICAvLyBBdXRoLmdldFVpZCgpIGNhbiByZXR1cm4gbnVsbCBldmVuIHdpdGggYSB1c2VyIGxvZ2dlZCBpbi4gSXQgaXMgYmVjYXVzZVxuICAgIC8vIGdldFVpZCgpIGlzIHN5bmNocm9ub3VzLCBidXQgdGhlIGF1dGggY29kZSBwb3B1bGF0aW5nIFVpZCBpcyBhc3luY2hyb25vdXMuXG4gICAgLy8gVGhpcyBtZXRob2Qgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGluIHRoZSBBdXRoVG9rZW5MaXN0ZW5lciBjYWxsYmFja1xuICAgIC8vIHRvIGd1YXJhbnRlZSB0byBnZXQgdGhlIGFjdHVhbCB1c2VyLlxuICAgIHUoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmF1dGggJiYgdGhpcy5hdXRoLmdldFVpZCgpO1xuICAgICAgICByZXR1cm4gQihudWxsID09PSB0IHx8IFwic3RyaW5nXCIgPT0gdHlwZW9mIHQpLCBuZXcgRCh0KTtcbiAgICB9XG59XG5cbi8qXG4gKiBGaXJzdFBhcnR5VG9rZW4gcHJvdmlkZXMgYSBmcmVzaCB0b2tlbiBlYWNoIHRpbWUgaXRzIHZhbHVlXG4gKiBpcyByZXF1ZXN0ZWQsIGJlY2F1c2UgaWYgdGhlIHRva2VuIGlzIHRvbyBvbGQsIHJlcXVlc3RzIHdpbGwgYmUgcmVqZWN0ZWQuXG4gKiBUZWNobmljYWxseSB0aGlzIG1heSBubyBsb25nZXIgYmUgbmVjZXNzYXJ5IHNpbmNlIHRoZSBTREsgc2hvdWxkIGdyYWNlZnVsbHlcbiAqIHJlY292ZXIgZnJvbSB1bmF1dGhlbnRpY2F0ZWQgZXJyb3JzIChzZWUgYi8zMzE0NzgxOCBmb3IgY29udGV4dCksIGJ1dCBpdCdzXG4gKiBzYWZlciB0byBrZWVwIHRoZSBpbXBsZW1lbnRhdGlvbiBhcy1pcy5cbiAqLyBjbGFzcyBKIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMudHlwZSA9IFwiRmlyc3RQYXJ0eVwiLCB0aGlzLnVzZXIgPSBELkZJUlNUX1BBUlRZLCB0aGlzLmhlYWRlcnMgPSBuZXcgTWFwLCB0aGlzLmhlYWRlcnMuc2V0KFwiWC1Hb29nLUF1dGhVc2VyXCIsIGUpO1xuICAgICAgICBjb25zdCBzID0gdC5hdXRoLmdldEF1dGhIZWFkZXJWYWx1ZUZvckZpcnN0UGFydHkoW10pO1xuICAgICAgICBzICYmIHRoaXMuaGVhZGVycy5zZXQoXCJBdXRob3JpemF0aW9uXCIsIHMpLCBuICYmIHRoaXMuaGVhZGVycy5zZXQoXCJYLUdvb2ctSWFtLUF1dGhvcml6YXRpb24tVG9rZW5cIiwgbik7XG4gICAgfVxufVxuXG4vKlxuICogUHJvdmlkZXMgdXNlciBjcmVkZW50aWFscyByZXF1aXJlZCBmb3IgdGhlIEZpcmVzdG9yZSBKYXZhU2NyaXB0IFNES1xuICogdG8gYXV0aGVudGljYXRlIHRoZSB1c2VyLCB1c2luZyB0ZWNobmlxdWUgdGhhdCBpcyBvbmx5IGF2YWlsYWJsZVxuICogdG8gYXBwbGljYXRpb25zIGhvc3RlZCBieSBHb29nbGUuXG4gKi8gY2xhc3MgWSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLmggPSB0LCB0aGlzLmwgPSBlLCB0aGlzLm0gPSBuO1xuICAgIH1cbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgSih0aGlzLmgsIHRoaXMubCwgdGhpcy5tKSk7XG4gICAgfVxuICAgIHN0YXJ0KHQsIGUpIHtcbiAgICAgICAgLy8gRmlyZSB3aXRoIGluaXRpYWwgdWlkLlxuICAgICAgICB0LmVucXVldWVSZXRyeWFibGUoKCgpID0+IGUoRC5GSVJTVF9QQVJUWSkpKTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7fVxuICAgIGludmFsaWRhdGVUb2tlbigpIHt9XG59XG5cbmNsYXNzIFgge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHQsIHRoaXMudHlwZSA9IFwiQXBwQ2hlY2tcIiwgdGhpcy5oZWFkZXJzID0gbmV3IE1hcCwgdCAmJiB0Lmxlbmd0aCA+IDAgJiYgdGhpcy5oZWFkZXJzLnNldChcIngtZmlyZWJhc2UtYXBwY2hlY2tcIiwgdGhpcy52YWx1ZSk7XG4gICAgfVxufVxuXG5jbGFzcyBaIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuZyA9IHQsIHRoaXMuZm9yY2VSZWZyZXNoID0gITEsIHRoaXMuYXBwQ2hlY2sgPSBudWxsO1xuICAgIH1cbiAgICBzdGFydCh0LCBlKSB7XG4gICAgICAgIHRoaXMubyA9IG4gPT4ge1xuICAgICAgICAgICAgdC5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiAodCA9PiAobnVsbCAhPSB0LmVycm9yICYmICQoXCJGaXJlYmFzZUFwcENoZWNrVG9rZW5Qcm92aWRlclwiLCBgRXJyb3IgZ2V0dGluZyBBcHAgQ2hlY2sgdG9rZW47IHVzaW5nIHBsYWNlaG9sZGVyIHRva2VuIGluc3RlYWQuIEVycm9yOiAke3QuZXJyb3IubWVzc2FnZX1gKSwgXG4gICAgICAgICAgICBlKHQudG9rZW4pKSkobikpKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgbiA9IHQgPT4ge1xuICAgICAgICAgICAgJChcIkZpcmViYXNlQXBwQ2hlY2tUb2tlblByb3ZpZGVyXCIsIFwiQXBwQ2hlY2sgZGV0ZWN0ZWRcIiksIHRoaXMuYXBwQ2hlY2sgPSB0LCB0aGlzLmFwcENoZWNrLmFkZFRva2VuTGlzdGVuZXIodGhpcy5vKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nLm9uSW5pdCgodCA9PiBuKHQpKSksIFxuICAgICAgICAvLyBPdXIgdXNlcnMgY2FuIGluaXRpYWxpemUgQXBwQ2hlY2sgYWZ0ZXIgRmlyZXN0b3JlLCBzbyB3ZSBnaXZlIGl0XG4gICAgICAgIC8vIGEgY2hhbmNlIHRvIHJlZ2lzdGVyIGl0c2VsZiB3aXRoIHRoZSBjb21wb25lbnQgZnJhbWV3b3JrLlxuICAgICAgICBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYXBwQ2hlY2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5nLmdldEltbWVkaWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiAhMFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHQgPyBuKHQpIDogXG4gICAgICAgICAgICAgICAgLy8gSWYgQXBwQ2hlY2sgaXMgc3RpbGwgbm90IGF2YWlsYWJsZSwgcHJvY2VlZCB3aXRob3V0IGl0LlxuICAgICAgICAgICAgICAgICQoXCJGaXJlYmFzZUFwcENoZWNrVG9rZW5Qcm92aWRlclwiLCBcIkFwcENoZWNrIG5vdCB5ZXQgZGV0ZWN0ZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLCAwKTtcbiAgICB9XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmZvcmNlUmVmcmVzaDtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yY2VSZWZyZXNoID0gITEsIHRoaXMuYXBwQ2hlY2sgPyB0aGlzLmFwcENoZWNrLmdldFRva2VuKHQpLnRoZW4oKHQgPT4gdCA/IChCKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQudG9rZW4pLCBcbiAgICAgICAgbmV3IFgodC50b2tlbikpIDogbnVsbCkpIDogUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7XG4gICAgICAgIHRoaXMuZm9yY2VSZWZyZXNoID0gITA7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB0aGlzLmFwcENoZWNrICYmIHRoaXMuYXBwQ2hlY2sucmVtb3ZlVG9rZW5MaXN0ZW5lcih0aGlzLm8pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBbiBBcHBDaGVjayB0b2tlbiBwcm92aWRlciB0aGF0IGFsd2F5cyB5aWVsZHMgYW4gZW1wdHkgdG9rZW4uXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyB0dCB7XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IFgoXCJcIikpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7fVxuICAgIHN0YXJ0KHQsIGUpIHt9XG4gICAgc2h1dGRvd24oKSB7fVxufVxuXG4vKipcbiAqIEJ1aWxkcyBhIENyZWRlbnRpYWxzUHJvdmlkZXIgZGVwZW5kaW5nIG9uIHRoZSB0eXBlIG9mXG4gKiB0aGUgY3JlZGVudGlhbHMgcGFzc2VkIGluLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBgTGlzdGVuU2VxdWVuY2VgIGlzIGEgbW9ub3RvbmljIHNlcXVlbmNlLiBJdCBpcyBpbml0aWFsaXplZCB3aXRoIGEgbWluaW11bSB2YWx1ZSB0b1xuICogZXhjZWVkLiBBbGwgc3Vic2VxdWVudCBjYWxscyB0byBuZXh0IHdpbGwgcmV0dXJuIGluY3JlYXNpbmcgdmFsdWVzLiBJZiBwcm92aWRlZCB3aXRoIGFcbiAqIGBTZXF1ZW5jZU51bWJlclN5bmNlcmAsIGl0IHdpbGwgYWRkaXRpb25hbGx5IGJ1bXAgaXRzIG5leHQgdmFsdWUgd2hlbiB0b2xkIG9mIGEgbmV3IHZhbHVlLCBhc1xuICogd2VsbCBhcyB3cml0ZSBvdXQgc2VxdWVuY2UgbnVtYmVycyB0aGF0IGl0IHByb2R1Y2VzIHZpYSBgbmV4dCgpYC5cbiAqL1xuY2xhc3MgZXQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5wcmV2aW91c1ZhbHVlID0gdCwgZSAmJiAoZS5zZXF1ZW5jZU51bWJlckhhbmRsZXIgPSB0ID0+IHRoaXMucCh0KSwgdGhpcy5UID0gdCA9PiBlLndyaXRlU2VxdWVuY2VOdW1iZXIodCkpO1xuICAgIH1cbiAgICBwKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJldmlvdXNWYWx1ZSA9IE1hdGgubWF4KHQsIHRoaXMucHJldmlvdXNWYWx1ZSksIHRoaXMucHJldmlvdXNWYWx1ZTtcbiAgICB9XG4gICAgbmV4dCgpIHtcbiAgICAgICAgY29uc3QgdCA9ICsrdGhpcy5wcmV2aW91c1ZhbHVlO1xuICAgICAgICByZXR1cm4gdGhpcy5UICYmIHRoaXMuVCh0KSwgdDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEdlbmVyYXRlcyBgbkJ5dGVzYCBvZiByYW5kb20gYnl0ZXMuXG4gKlxuICogSWYgYG5CeXRlcyA8IDBgICwgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd24uXG4gKi9cbmZ1bmN0aW9uIG50KHQpIHtcbiAgICAvLyBQb2x5ZmlsbHMgZm9yIElFIGFuZCBXZWJXb3JrZXIgYnkgdXNpbmcgYHNlbGZgIGFuZCBgbXNDcnlwdG9gIHdoZW4gYGNyeXB0b2AgaXMgbm90IGF2YWlsYWJsZS5cbiAgICBjb25zdCBlID0gXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBzZWxmICYmIChzZWxmLmNyeXB0byB8fCBzZWxmLm1zQ3J5cHRvKSwgbiA9IG5ldyBVaW50OEFycmF5KHQpO1xuICAgIGlmIChlICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZS5nZXRSYW5kb21WYWx1ZXMpIGUuZ2V0UmFuZG9tVmFsdWVzKG4pOyBlbHNlIFxuICAgIC8vIEZhbGxzIGJhY2sgdG8gTWF0aC5yYW5kb21cbiAgICBmb3IgKGxldCBlID0gMDsgZSA8IHQ7IGUrKykgbltlXSA9IE1hdGguZmxvb3IoMjU2ICogTWF0aC5yYW5kb20oKSk7XG4gICAgcmV0dXJuIG47XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGV0LkkgPSAtMTtcblxuY2xhc3Mgc3Qge1xuICAgIHN0YXRpYyBBKCkge1xuICAgICAgICAvLyBBbHBoYW51bWVyaWMgY2hhcmFjdGVyc1xuICAgICAgICBjb25zdCB0ID0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OVwiLCBlID0gTWF0aC5mbG9vcigyNTYgLyB0Lmxlbmd0aCkgKiB0Lmxlbmd0aDtcbiAgICAgICAgLy8gVGhlIGxhcmdlc3QgYnl0ZSB2YWx1ZSB0aGF0IGlzIGEgbXVsdGlwbGUgb2YgYGNoYXIubGVuZ3RoYC5cbiAgICAgICAgICAgICAgICBsZXQgbiA9IFwiXCI7XG4gICAgICAgIGZvciAoO24ubGVuZ3RoIDwgMjA7ICkge1xuICAgICAgICAgICAgY29uc3QgcyA9IG50KDQwKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcy5sZW5ndGg7ICsraSkgXG4gICAgICAgICAgICAvLyBPbmx5IGFjY2VwdCB2YWx1ZXMgdGhhdCBhcmUgWzAsIG1heE11bHRpcGxlKSwgdGhpcyBlbnN1cmVzIHRoZXkgY2FuXG4gICAgICAgICAgICAvLyBiZSBldmVubHkgbWFwcGVkIHRvIGluZGljZXMgb2YgYGNoYXJzYCB2aWEgYSBtb2R1bG8gb3BlcmF0aW9uLlxuICAgICAgICAgICAgbi5sZW5ndGggPCAyMCAmJiBzW2ldIDwgZSAmJiAobiArPSB0LmNoYXJBdChzW2ldICUgdC5sZW5ndGgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbjtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGl0KHQsIGUpIHtcbiAgICByZXR1cm4gdCA8IGUgPyAtMSA6IHQgPiBlID8gMSA6IDA7XG59XG5cbi8qKiBIZWxwZXIgdG8gY29tcGFyZSBhcnJheXMgdXNpbmcgaXNFcXVhbCgpLiAqLyBmdW5jdGlvbiBydCh0LCBlLCBuKSB7XG4gICAgcmV0dXJuIHQubGVuZ3RoID09PSBlLmxlbmd0aCAmJiB0LmV2ZXJ5KCgodCwgcykgPT4gbih0LCBlW3NdKSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGltbWVkaWF0ZSBsZXhpY29ncmFwaGljYWxseS1mb2xsb3dpbmcgc3RyaW5nLiBUaGlzIGlzIHVzZWZ1bCB0b1xuICogY29uc3RydWN0IGFuIGluY2x1c2l2ZSByYW5nZSBmb3IgaW5kZXhlZGRiIGl0ZXJhdG9ycy5cbiAqLyBmdW5jdGlvbiBvdCh0KSB7XG4gICAgLy8gUmV0dXJuIHRoZSBpbnB1dCBzdHJpbmcsIHdpdGggYW4gYWRkaXRpb25hbCBOVUwgYnl0ZSBhcHBlbmRlZC5cbiAgICByZXR1cm4gdCArIFwiXFwwXCI7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBUaGUgZWFybGllc3QgZGF0ZSBzdXBwb3J0ZWQgYnkgRmlyZXN0b3JlIHRpbWVzdGFtcHMgKDAwMDEtMDEtMDFUMDA6MDA6MDBaKS5cbi8qKlxuICogQSBgVGltZXN0YW1wYCByZXByZXNlbnRzIGEgcG9pbnQgaW4gdGltZSBpbmRlcGVuZGVudCBvZiBhbnkgdGltZSB6b25lIG9yXG4gKiBjYWxlbmRhciwgcmVwcmVzZW50ZWQgYXMgc2Vjb25kcyBhbmQgZnJhY3Rpb25zIG9mIHNlY29uZHMgYXQgbmFub3NlY29uZFxuICogcmVzb2x1dGlvbiBpbiBVVEMgRXBvY2ggdGltZS5cbiAqXG4gKiBJdCBpcyBlbmNvZGVkIHVzaW5nIHRoZSBQcm9sZXB0aWMgR3JlZ29yaWFuIENhbGVuZGFyIHdoaWNoIGV4dGVuZHMgdGhlXG4gKiBHcmVnb3JpYW4gY2FsZW5kYXIgYmFja3dhcmRzIHRvIHllYXIgb25lLiBJdCBpcyBlbmNvZGVkIGFzc3VtaW5nIGFsbCBtaW51dGVzXG4gKiBhcmUgNjAgc2Vjb25kcyBsb25nLCBpLmUuIGxlYXAgc2Vjb25kcyBhcmUgXCJzbWVhcmVkXCIgc28gdGhhdCBubyBsZWFwIHNlY29uZFxuICogdGFibGUgaXMgbmVlZGVkIGZvciBpbnRlcnByZXRhdGlvbi4gUmFuZ2UgaXMgZnJvbSAwMDAxLTAxLTAxVDAwOjAwOjAwWiB0b1xuICogOTk5OS0xMi0zMVQyMzo1OTo1OS45OTk5OTk5OTlaLlxuICpcbiAqIEZvciBleGFtcGxlcyBhbmQgZnVydGhlciBzcGVjaWZpY2F0aW9ucywgcmVmZXIgdG8gdGhlXG4gKiB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9wcm90b2J1Zi9ibG9iL21hc3Rlci9zcmMvZ29vZ2xlL3Byb3RvYnVmL3RpbWVzdGFtcC5wcm90byB8IFRpbWVzdGFtcCBkZWZpbml0aW9ufS5cbiAqL1xuY2xhc3MgYXQge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGltZXN0YW1wLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNlY29uZHMgLSBUaGUgbnVtYmVyIG9mIHNlY29uZHMgb2YgVVRDIHRpbWUgc2luY2UgVW5peCBlcG9jaFxuICAgICAqICAgICAxOTcwLTAxLTAxVDAwOjAwOjAwWi4gTXVzdCBiZSBmcm9tIDAwMDEtMDEtMDFUMDA6MDA6MDBaIHRvXG4gICAgICogICAgIDk5OTktMTItMzFUMjM6NTk6NTlaIGluY2x1c2l2ZS5cbiAgICAgKiBAcGFyYW0gbmFub3NlY29uZHMgLSBUaGUgbm9uLW5lZ2F0aXZlIGZyYWN0aW9ucyBvZiBhIHNlY29uZCBhdCBuYW5vc2Vjb25kXG4gICAgICogICAgIHJlc29sdXRpb24uIE5lZ2F0aXZlIHNlY29uZCB2YWx1ZXMgd2l0aCBmcmFjdGlvbnMgbXVzdCBzdGlsbCBoYXZlXG4gICAgICogICAgIG5vbi1uZWdhdGl2ZSBuYW5vc2Vjb25kcyB2YWx1ZXMgdGhhdCBjb3VudCBmb3J3YXJkIGluIHRpbWUuIE11c3QgYmVcbiAgICAgKiAgICAgZnJvbSAwIHRvIDk5OSw5OTksOTk5IGluY2x1c2l2ZS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIHNlY29uZHMgb2YgVVRDIHRpbWUgc2luY2UgVW5peCBlcG9jaCAxOTcwLTAxLTAxVDAwOjAwOjAwWi5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgZnJhY3Rpb25zIG9mIGEgc2Vjb25kIGF0IG5hbm9zZWNvbmQgcmVzb2x1dGlvbi4qXG4gICAgICovXG4gICAgZSkge1xuICAgICAgICBpZiAodGhpcy5zZWNvbmRzID0gdCwgdGhpcy5uYW5vc2Vjb25kcyA9IGUsIGUgPCAwKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiVGltZXN0YW1wIG5hbm9zZWNvbmRzIG91dCBvZiByYW5nZTogXCIgKyBlKTtcbiAgICAgICAgaWYgKGUgPj0gMWU5KSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiVGltZXN0YW1wIG5hbm9zZWNvbmRzIG91dCBvZiByYW5nZTogXCIgKyBlKTtcbiAgICAgICAgaWYgKHQgPCAtNjIxMzU1OTY4MDApIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJUaW1lc3RhbXAgc2Vjb25kcyBvdXQgb2YgcmFuZ2U6IFwiICsgdCk7XG4gICAgICAgIC8vIFRoaXMgd2lsbCBicmVhayBpbiB0aGUgeWVhciAxMCwwMDAuXG4gICAgICAgICAgICAgICAgaWYgKHQgPj0gMjUzNDAyMzAwODAwKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiVGltZXN0YW1wIHNlY29uZHMgb3V0IG9mIHJhbmdlOiBcIiArIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRpbWVzdGFtcCB3aXRoIHRoZSBjdXJyZW50IGRhdGUsIHdpdGggbWlsbGlzZWNvbmQgcHJlY2lzaW9uLlxuICAgICAqXG4gICAgICogQHJldHVybnMgYSBuZXcgdGltZXN0YW1wIHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBkYXRlLlxuICAgICAqLyAgICBzdGF0aWMgbm93KCkge1xuICAgICAgICByZXR1cm4gYXQuZnJvbU1pbGxpcyhEYXRlLm5vdygpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0aW1lc3RhbXAgZnJvbSB0aGUgZ2l2ZW4gZGF0ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXRlIC0gVGhlIGRhdGUgdG8gaW5pdGlhbGl6ZSB0aGUgYFRpbWVzdGFtcGAgZnJvbS5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBgVGltZXN0YW1wYCByZXByZXNlbnRpbmcgdGhlIHNhbWUgcG9pbnQgaW4gdGltZSBhcyB0aGUgZ2l2ZW5cbiAgICAgKiAgICAgZGF0ZS5cbiAgICAgKi8gICAgc3RhdGljIGZyb21EYXRlKHQpIHtcbiAgICAgICAgcmV0dXJuIGF0LmZyb21NaWxsaXModC5nZXRUaW1lKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRpbWVzdGFtcCBmcm9tIHRoZSBnaXZlbiBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG1pbGxpc2Vjb25kcyAtIE51bWJlciBvZiBtaWxsaXNlY29uZHMgc2luY2UgVW5peCBlcG9jaFxuICAgICAqICAgICAxOTcwLTAxLTAxVDAwOjAwOjAwWi5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBgVGltZXN0YW1wYCByZXByZXNlbnRpbmcgdGhlIHNhbWUgcG9pbnQgaW4gdGltZSBhcyB0aGUgZ2l2ZW5cbiAgICAgKiAgICAgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcy5cbiAgICAgKi8gICAgc3RhdGljIGZyb21NaWxsaXModCkge1xuICAgICAgICBjb25zdCBlID0gTWF0aC5mbG9vcih0IC8gMWUzKSwgbiA9IE1hdGguZmxvb3IoMWU2ICogKHQgLSAxZTMgKiBlKSk7XG4gICAgICAgIHJldHVybiBuZXcgYXQoZSwgbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGEgYFRpbWVzdGFtcGAgdG8gYSBKYXZhU2NyaXB0IGBEYXRlYCBvYmplY3QuIFRoaXMgY29udmVyc2lvblxuICAgICAqIGNhdXNlcyBhIGxvc3Mgb2YgcHJlY2lzaW9uIHNpbmNlIGBEYXRlYCBvYmplY3RzIG9ubHkgc3VwcG9ydCBtaWxsaXNlY29uZFxuICAgICAqIHByZWNpc2lvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEphdmFTY3JpcHQgYERhdGVgIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHNhbWUgcG9pbnQgaW4gdGltZSBhc1xuICAgICAqICAgICB0aGlzIGBUaW1lc3RhbXBgLCB3aXRoIG1pbGxpc2Vjb25kIHByZWNpc2lvbi5cbiAgICAgKi8gICAgdG9EYXRlKCkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUodGhpcy50b01pbGxpcygpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYSBgVGltZXN0YW1wYCB0byBhIG51bWVyaWMgdGltZXN0YW1wIChpbiBtaWxsaXNlY29uZHMgc2luY2VcbiAgICAgKiBlcG9jaCkuIFRoaXMgb3BlcmF0aW9uIGNhdXNlcyBhIGxvc3Mgb2YgcHJlY2lzaW9uLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIHBvaW50IGluIHRpbWUgY29ycmVzcG9uZGluZyB0byB0aGlzIHRpbWVzdGFtcCwgcmVwcmVzZW50ZWQgYXNcbiAgICAgKiAgICAgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgc2luY2UgVW5peCBlcG9jaCAxOTcwLTAxLTAxVDAwOjAwOjAwWi5cbiAgICAgKi8gICAgdG9NaWxsaXMoKSB7XG4gICAgICAgIHJldHVybiAxZTMgKiB0aGlzLnNlY29uZHMgKyB0aGlzLm5hbm9zZWNvbmRzIC8gMWU2O1xuICAgIH1cbiAgICBfY29tcGFyZVRvKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2Vjb25kcyA9PT0gdC5zZWNvbmRzID8gaXQodGhpcy5uYW5vc2Vjb25kcywgdC5uYW5vc2Vjb25kcykgOiBpdCh0aGlzLnNlY29uZHMsIHQuc2Vjb25kcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGBUaW1lc3RhbXBgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgYFRpbWVzdGFtcGAgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhpcyBgVGltZXN0YW1wYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqLyAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHQuc2Vjb25kcyA9PT0gdGhpcy5zZWNvbmRzICYmIHQubmFub3NlY29uZHMgPT09IHRoaXMubmFub3NlY29uZHM7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgdGV4dHVhbCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGBUaW1lc3RhbXBgLiAqLyAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFwiVGltZXN0YW1wKHNlY29uZHM9XCIgKyB0aGlzLnNlY29uZHMgKyBcIiwgbmFub3NlY29uZHM9XCIgKyB0aGlzLm5hbm9zZWNvbmRzICsgXCIpXCI7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgSlNPTi1zZXJpYWxpemFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBgVGltZXN0YW1wYC4gKi8gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2Vjb25kczogdGhpcy5zZWNvbmRzLFxuICAgICAgICAgICAgbmFub3NlY29uZHM6IHRoaXMubmFub3NlY29uZHNcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhpcyBvYmplY3QgdG8gYSBwcmltaXRpdmUgc3RyaW5nLCB3aGljaCBhbGxvd3MgYFRpbWVzdGFtcGAgb2JqZWN0c1xuICAgICAqIHRvIGJlIGNvbXBhcmVkIHVzaW5nIHRoZSBgPmAsIGA8PWAsIGA+PWAgYW5kIGA+YCBvcGVyYXRvcnMuXG4gICAgICovICAgIHZhbHVlT2YoKSB7XG4gICAgICAgIC8vIFRoaXMgbWV0aG9kIHJldHVybnMgYSBzdHJpbmcgb2YgdGhlIGZvcm0gPHNlY29uZHM+LjxuYW5vc2Vjb25kcz4gd2hlcmVcbiAgICAgICAgLy8gPHNlY29uZHM+IGlzIHRyYW5zbGF0ZWQgdG8gaGF2ZSBhIG5vbi1uZWdhdGl2ZSB2YWx1ZSBhbmQgYm90aCA8c2Vjb25kcz5cbiAgICAgICAgLy8gYW5kIDxuYW5vc2Vjb25kcz4gYXJlIGxlZnQtcGFkZGVkIHdpdGggemVyb2VzIHRvIGJlIGEgY29uc2lzdGVudCBsZW5ndGguXG4gICAgICAgIC8vIFN0cmluZ3Mgd2l0aCB0aGlzIGZvcm1hdCB0aGVuIGhhdmUgYSBsZXhpb2dyYXBoaWNhbCBvcmRlcmluZyB0aGF0IG1hdGNoZXNcbiAgICAgICAgLy8gdGhlIGV4cGVjdGVkIG9yZGVyaW5nLiBUaGUgPHNlY29uZHM+IHRyYW5zbGF0aW9uIGlzIGRvbmUgdG8gYXZvaWQgaGF2aW5nXG4gICAgICAgIC8vIGEgbGVhZGluZyBuZWdhdGl2ZSBzaWduIChpLmUuIGEgbGVhZGluZyAnLScgY2hhcmFjdGVyKSBpbiBpdHMgc3RyaW5nXG4gICAgICAgIC8vIHJlcHJlc2VudGF0aW9uLCB3aGljaCB3b3VsZCBhZmZlY3QgaXRzIGxleGlvZ3JhcGhpY2FsIG9yZGVyaW5nLlxuICAgICAgICBjb25zdCB0ID0gdGhpcy5zZWNvbmRzIC0gLTYyMTM1NTk2ODAwO1xuICAgICAgICAvLyBOb3RlOiBVcCB0byAxMiBkZWNpbWFsIGRpZ2l0cyBhcmUgcmVxdWlyZWQgdG8gcmVwcmVzZW50IGFsbCB2YWxpZFxuICAgICAgICAvLyAnc2Vjb25kcycgdmFsdWVzLlxuICAgICAgICAgICAgICAgIHJldHVybiBTdHJpbmcodCkucGFkU3RhcnQoMTIsIFwiMFwiKSArIFwiLlwiICsgU3RyaW5nKHRoaXMubmFub3NlY29uZHMpLnBhZFN0YXJ0KDksIFwiMFwiKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgdmVyc2lvbiBvZiBhIGRvY3VtZW50IGluIEZpcmVzdG9yZS4gVGhpcyBjb3JyZXNwb25kcyB0byB0aGUgdmVyc2lvblxuICogdGltZXN0YW1wLCBzdWNoIGFzIHVwZGF0ZV90aW1lIG9yIHJlYWRfdGltZS5cbiAqLyBjbGFzcyBjdCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnRpbWVzdGFtcCA9IHQ7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tVGltZXN0YW1wKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBjdCh0KTtcbiAgICB9XG4gICAgc3RhdGljIG1pbigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBjdChuZXcgYXQoMCwgMCkpO1xuICAgIH1cbiAgICBjb21wYXJlVG8odCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aW1lc3RhbXAuX2NvbXBhcmVUbyh0LnRpbWVzdGFtcCk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aW1lc3RhbXAuaXNFcXVhbCh0LnRpbWVzdGFtcCk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgbnVtYmVyIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB2ZXJzaW9uIGZvciB1c2UgaW4gc3BlYyB0ZXN0cy4gKi8gICAgdG9NaWNyb3NlY29uZHMoKSB7XG4gICAgICAgIC8vIENvbnZlcnQgdG8gbWljcm9zZWNvbmRzLlxuICAgICAgICByZXR1cm4gMWU2ICogdGhpcy50aW1lc3RhbXAuc2Vjb25kcyArIHRoaXMudGltZXN0YW1wLm5hbm9zZWNvbmRzIC8gMWUzO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFwiU25hcHNob3RWZXJzaW9uKFwiICsgdGhpcy50aW1lc3RhbXAudG9TdHJpbmcoKSArIFwiKVwiO1xuICAgIH1cbiAgICB0b1RpbWVzdGFtcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gZnVuY3Rpb24gdXQodCkge1xuICAgIGxldCBlID0gMDtcbiAgICBmb3IgKGNvbnN0IG4gaW4gdCkgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsIG4pICYmIGUrKztcbiAgICByZXR1cm4gZTtcbn1cblxuZnVuY3Rpb24gaHQodCwgZSkge1xuICAgIGZvciAoY29uc3QgbiBpbiB0KSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCwgbikgJiYgZShuLCB0W25dKTtcbn1cblxuZnVuY3Rpb24gbHQodCkge1xuICAgIGZvciAoY29uc3QgZSBpbiB0KSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsIGUpKSByZXR1cm4gITE7XG4gICAgcmV0dXJuICEwO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBQYXRoIHJlcHJlc2VudHMgYW4gb3JkZXJlZCBzZXF1ZW5jZSBvZiBzdHJpbmcgc2VnbWVudHMuXG4gKi9cbmNsYXNzIGZ0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHZvaWQgMCA9PT0gZSA/IGUgPSAwIDogZSA+IHQubGVuZ3RoICYmIEwoKSwgdm9pZCAwID09PSBuID8gbiA9IHQubGVuZ3RoIC0gZSA6IG4gPiB0Lmxlbmd0aCAtIGUgJiYgTCgpLCBcbiAgICAgICAgdGhpcy5zZWdtZW50cyA9IHQsIHRoaXMub2Zmc2V0ID0gZSwgdGhpcy5sZW4gPSBuO1xuICAgIH1cbiAgICBnZXQgbGVuZ3RoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sZW47XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gMCA9PT0gZnQuY29tcGFyYXRvcih0aGlzLCB0KTtcbiAgICB9XG4gICAgY2hpbGQodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5zZWdtZW50cy5zbGljZSh0aGlzLm9mZnNldCwgdGhpcy5saW1pdCgpKTtcbiAgICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBmdCA/IHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBlLnB1c2godCk7XG4gICAgICAgIH0pKSA6IGUucHVzaCh0KSwgdGhpcy5jb25zdHJ1Y3QoZSk7XG4gICAgfVxuICAgIC8qKiBUaGUgaW5kZXggb2Ygb25lIHBhc3QgdGhlIGxhc3Qgc2VnbWVudCBvZiB0aGUgcGF0aC4gKi8gICAgbGltaXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9mZnNldCArIHRoaXMubGVuZ3RoO1xuICAgIH1cbiAgICBwb3BGaXJzdCh0KSB7XG4gICAgICAgIHJldHVybiB0ID0gdm9pZCAwID09PSB0ID8gMSA6IHQsIHRoaXMuY29uc3RydWN0KHRoaXMuc2VnbWVudHMsIHRoaXMub2Zmc2V0ICsgdCwgdGhpcy5sZW5ndGggLSB0KTtcbiAgICB9XG4gICAgcG9wTGFzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0KHRoaXMuc2VnbWVudHMsIHRoaXMub2Zmc2V0LCB0aGlzLmxlbmd0aCAtIDEpO1xuICAgIH1cbiAgICBmaXJzdFNlZ21lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRzW3RoaXMub2Zmc2V0XTtcbiAgICB9XG4gICAgbGFzdFNlZ21lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldCh0aGlzLmxlbmd0aCAtIDEpO1xuICAgIH1cbiAgICBnZXQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWdtZW50c1t0aGlzLm9mZnNldCArIHRdO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gMCA9PT0gdGhpcy5sZW5ndGg7XG4gICAgfVxuICAgIGlzUHJlZml4T2YodCkge1xuICAgICAgICBpZiAodC5sZW5ndGggPCB0aGlzLmxlbmd0aCkgcmV0dXJuICExO1xuICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHRoaXMubGVuZ3RoOyBlKyspIGlmICh0aGlzLmdldChlKSAhPT0gdC5nZXQoZSkpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICBpc0ltbWVkaWF0ZVBhcmVudE9mKHQpIHtcbiAgICAgICAgaWYgKHRoaXMubGVuZ3RoICsgMSAhPT0gdC5sZW5ndGgpIHJldHVybiAhMTtcbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0aGlzLmxlbmd0aDsgZSsrKSBpZiAodGhpcy5nZXQoZSkgIT09IHQuZ2V0KGUpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgZm9yRWFjaCh0KSB7XG4gICAgICAgIGZvciAobGV0IGUgPSB0aGlzLm9mZnNldCwgbiA9IHRoaXMubGltaXQoKTsgZSA8IG47IGUrKykgdCh0aGlzLnNlZ21lbnRzW2VdKTtcbiAgICB9XG4gICAgdG9BcnJheSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VnbWVudHMuc2xpY2UodGhpcy5vZmZzZXQsIHRoaXMubGltaXQoKSk7XG4gICAgfVxuICAgIHN0YXRpYyBjb21wYXJhdG9yKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IE1hdGgubWluKHQubGVuZ3RoLCBlLmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IHMgPSAwOyBzIDwgbjsgcysrKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5nZXQocyksIGkgPSBlLmdldChzKTtcbiAgICAgICAgICAgIGlmIChuIDwgaSkgcmV0dXJuIC0xO1xuICAgICAgICAgICAgaWYgKG4gPiBpKSByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdC5sZW5ndGggPCBlLmxlbmd0aCA/IC0xIDogdC5sZW5ndGggPiBlLmxlbmd0aCA/IDEgOiAwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIHNsYXNoLXNlcGFyYXRlZCBwYXRoIGZvciBuYXZpZ2F0aW5nIHJlc291cmNlcyAoZG9jdW1lbnRzIGFuZCBjb2xsZWN0aW9ucylcbiAqIHdpdGhpbiBGaXJlc3RvcmUuXG4gKlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgZHQgZXh0ZW5kcyBmdCB7XG4gICAgY29uc3RydWN0KHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBkdCh0LCBlLCBuKTtcbiAgICB9XG4gICAgY2Fub25pY2FsU3RyaW5nKCkge1xuICAgICAgICAvLyBOT1RFOiBUaGUgY2xpZW50IGlzIGlnbm9yYW50IG9mIGFueSBwYXRoIHNlZ21lbnRzIGNvbnRhaW5pbmcgZXNjYXBlXG4gICAgICAgIC8vIHNlcXVlbmNlcyAoZS5nLiBfX2lkMTIzX18pIGFuZCBqdXN0IHBhc3NlcyB0aGVtIHRocm91Z2ggcmF3ICh0aGV5IGV4aXN0XG4gICAgICAgIC8vIGZvciBsZWdhY3kgcmVhc29ucyBhbmQgc2hvdWxkIG5vdCBiZSB1c2VkIGZyZXF1ZW50bHkpLlxuICAgICAgICByZXR1cm4gdGhpcy50b0FycmF5KCkuam9pbihcIi9cIik7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHJlc291cmNlIHBhdGggZnJvbSB0aGUgZ2l2ZW4gc2xhc2gtZGVsaW1pdGVkIHN0cmluZy4gSWYgbXVsdGlwbGVcbiAgICAgKiBhcmd1bWVudHMgYXJlIHByb3ZpZGVkLCBhbGwgY29tcG9uZW50cyBhcmUgY29tYmluZWQuIExlYWRpbmcgYW5kIHRyYWlsaW5nXG4gICAgICogc2xhc2hlcyBmcm9tIGFsbCBjb21wb25lbnRzIGFyZSBpZ25vcmVkLlxuICAgICAqLyAgICBzdGF0aWMgZnJvbVN0cmluZyguLi50KSB7XG4gICAgICAgIC8vIE5PVEU6IFRoZSBjbGllbnQgaXMgaWdub3JhbnQgb2YgYW55IHBhdGggc2VnbWVudHMgY29udGFpbmluZyBlc2NhcGVcbiAgICAgICAgLy8gc2VxdWVuY2VzIChlLmcuIF9faWQxMjNfXykgYW5kIGp1c3QgcGFzc2VzIHRoZW0gdGhyb3VnaCByYXcgKHRoZXkgZXhpc3RcbiAgICAgICAgLy8gZm9yIGxlZ2FjeSByZWFzb25zIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZnJlcXVlbnRseSkuXG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIHQpIHtcbiAgICAgICAgICAgIGlmIChuLmluZGV4T2YoXCIvL1wiKSA+PSAwKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHNlZ21lbnQgKCR7bn0pLiBQYXRocyBtdXN0IG5vdCBjb250YWluIC8vIGluIHRoZW0uYCk7XG4gICAgICAgICAgICAvLyBTdHJpcCBsZWFkaW5nIGFuZCB0cmFsaW5nIHNsYXNoZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnB1c2goLi4ubi5zcGxpdChcIi9cIikuZmlsdGVyKCh0ID0+IHQubGVuZ3RoID4gMCkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IGR0KGUpO1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHlQYXRoKCkge1xuICAgICAgICByZXR1cm4gbmV3IGR0KFtdKTtcbiAgICB9XG59XG5cbmNvbnN0IHd0ID0gL15bX2EtekEtWl1bX2EtekEtWjAtOV0qJC87XG5cbi8qKlxuICogQSBkb3Qtc2VwYXJhdGVkIHBhdGggZm9yIG5hdmlnYXRpbmcgc3ViLW9iamVjdHMgd2l0aGluIGEgZG9jdW1lbnQuXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBfdCBleHRlbmRzIGZ0IHtcbiAgICBjb25zdHJ1Y3QodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gbmV3IF90KHQsIGUsIG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHN0cmluZyBjb3VsZCBiZSB1c2VkIGFzIGEgc2VnbWVudCBpbiBhIGZpZWxkIHBhdGhcbiAgICAgKiB3aXRob3V0IGVzY2FwaW5nLlxuICAgICAqLyAgICBzdGF0aWMgaXNWYWxpZElkZW50aWZpZXIodCkge1xuICAgICAgICByZXR1cm4gd3QudGVzdCh0KTtcbiAgICB9XG4gICAgY2Fub25pY2FsU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b0FycmF5KCkubWFwKCh0ID0+ICh0ID0gdC5yZXBsYWNlKC9cXFxcL2csIFwiXFxcXFxcXFxcIikucmVwbGFjZSgvYC9nLCBcIlxcXFxgXCIpLCBcbiAgICAgICAgX3QuaXNWYWxpZElkZW50aWZpZXIodCkgfHwgKHQgPSBcImBcIiArIHQgKyBcImBcIiksIHQpKSkuam9pbihcIi5cIik7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgZmllbGQgcmVmZXJlbmNlcyB0aGUga2V5IG9mIGEgZG9jdW1lbnQuXG4gICAgICovICAgIGlzS2V5RmllbGQoKSB7XG4gICAgICAgIHJldHVybiAxID09PSB0aGlzLmxlbmd0aCAmJiBcIl9fbmFtZV9fXCIgPT09IHRoaXMuZ2V0KDApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZmllbGQgZGVzaWduYXRpbmcgdGhlIGtleSBvZiBhIGRvY3VtZW50LlxuICAgICAqLyAgICBzdGF0aWMga2V5RmllbGQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgX3QoWyBcIl9fbmFtZV9fXCIgXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIGZpZWxkIHN0cmluZyBmcm9tIHRoZSBnaXZlbiBzZXJ2ZXItZm9ybWF0dGVkIHN0cmluZy5cbiAgICAgKlxuICAgICAqIC0gU3BsaXR0aW5nIHRoZSBlbXB0eSBzdHJpbmcgaXMgbm90IGFsbG93ZWQgKGZvciBub3cgYXQgbGVhc3QpLlxuICAgICAqIC0gRW1wdHkgc2VnbWVudHMgd2l0aGluIHRoZSBzdHJpbmcgKGUuZy4gaWYgdGhlcmUgYXJlIHR3byBjb25zZWN1dGl2ZVxuICAgICAqICAgc2VwYXJhdG9ycykgYXJlIG5vdCBhbGxvd2VkLlxuICAgICAqXG4gICAgICogVE9ETyhiLzM3MjQ0MTU3KTogd2Ugc2hvdWxkIG1ha2UgdGhpcyBtb3JlIHN0cmljdC4gUmlnaHQgbm93LCBpdCBhbGxvd3NcbiAgICAgKiBub24taWRlbnRpZmllciBwYXRoIGNvbXBvbmVudHMsIGV2ZW4gaWYgdGhleSBhcmVuJ3QgZXNjYXBlZC5cbiAgICAgKi8gICAgc3RhdGljIGZyb21TZXJ2ZXJGb3JtYXQodCkge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIGxldCBuID0gXCJcIiwgcyA9IDA7XG4gICAgICAgIGNvbnN0IGkgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoMCA9PT0gbi5sZW5ndGgpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgZmllbGQgcGF0aCAoJHt0fSkuIFBhdGhzIG11c3Qgbm90IGJlIGVtcHR5LCBiZWdpbiB3aXRoICcuJywgZW5kIHdpdGggJy4nLCBvciBjb250YWluICcuLidgKTtcbiAgICAgICAgICAgIGUucHVzaChuKSwgbiA9IFwiXCI7XG4gICAgICAgIH07XG4gICAgICAgIGxldCByID0gITE7XG4gICAgICAgIGZvciAoO3MgPCB0Lmxlbmd0aDsgKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdFtzXTtcbiAgICAgICAgICAgIGlmIChcIlxcXFxcIiA9PT0gZSkge1xuICAgICAgICAgICAgICAgIGlmIChzICsgMSA9PT0gdC5sZW5ndGgpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJQYXRoIGhhcyB0cmFpbGluZyBlc2NhcGUgY2hhcmFjdGVyOiBcIiArIHQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0W3MgKyAxXTtcbiAgICAgICAgICAgICAgICBpZiAoXCJcXFxcXCIgIT09IGUgJiYgXCIuXCIgIT09IGUgJiYgXCJgXCIgIT09IGUpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJQYXRoIGhhcyBpbnZhbGlkIGVzY2FwZSBzZXF1ZW5jZTogXCIgKyB0KTtcbiAgICAgICAgICAgICAgICBuICs9IGUsIHMgKz0gMjtcbiAgICAgICAgICAgIH0gZWxzZSBcImBcIiA9PT0gZSA/IChyID0gIXIsIHMrKykgOiBcIi5cIiAhPT0gZSB8fCByID8gKG4gKz0gZSwgcysrKSA6IChpKCksIHMrKyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGkoKSwgcikgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIlVudGVybWluYXRlZCBgIGluIHBhdGg6IFwiICsgdCk7XG4gICAgICAgIHJldHVybiBuZXcgX3QoZSk7XG4gICAgfVxuICAgIHN0YXRpYyBlbXB0eVBhdGgoKSB7XG4gICAgICAgIHJldHVybiBuZXcgX3QoW10pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUHJvdmlkZXMgYSBzZXQgb2YgZmllbGRzIHRoYXQgY2FuIGJlIHVzZWQgdG8gcGFydGlhbGx5IHBhdGNoIGEgZG9jdW1lbnQuXG4gKiBGaWVsZE1hc2sgaXMgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIE9iamVjdFZhbHVlLlxuICogRXhhbXBsZXM6XG4gKiAgIGZvbyAtIE92ZXJ3cml0ZXMgZm9vIGVudGlyZWx5IHdpdGggdGhlIHByb3ZpZGVkIHZhbHVlLiBJZiBmb28gaXMgbm90XG4gKiAgICAgICAgIHByZXNlbnQgaW4gdGhlIGNvbXBhbmlvbiBPYmplY3RWYWx1ZSwgdGhlIGZpZWxkIGlzIGRlbGV0ZWQuXG4gKiAgIGZvby5iYXIgLSBPdmVyd3JpdGVzIG9ubHkgdGhlIGZpZWxkIGJhciBvZiB0aGUgb2JqZWN0IGZvby5cbiAqICAgICAgICAgICAgIElmIGZvbyBpcyBub3QgYW4gb2JqZWN0LCBmb28gaXMgcmVwbGFjZWQgd2l0aCBhbiBvYmplY3RcbiAqICAgICAgICAgICAgIGNvbnRhaW5pbmcgZm9vXG4gKi8gY2xhc3MgbXQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5maWVsZHMgPSB0LCBcbiAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiB2YWxpZGF0aW9uIG9mIEZpZWxkTWFza1xuICAgICAgICAvLyBTb3J0IHRoZSBmaWVsZCBtYXNrIHRvIHN1cHBvcnQgYEZpZWxkTWFzay5pc0VxdWFsKClgIGFuZCBhc3NlcnQgYmVsb3cuXG4gICAgICAgIHQuc29ydChfdC5jb21wYXJhdG9yKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVmVyaWZpZXMgdGhhdCBgZmllbGRQYXRoYCBpcyBpbmNsdWRlZCBieSBhdCBsZWFzdCBvbmUgZmllbGQgaW4gdGhpcyBmaWVsZFxuICAgICAqIG1hc2suXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIGFuIE8obikgb3BlcmF0aW9uLCB3aGVyZSBgbmAgaXMgdGhlIHNpemUgb2YgdGhlIGZpZWxkIG1hc2suXG4gICAgICovICAgIGNvdmVycyh0KSB7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLmZpZWxkcykgaWYgKGUuaXNQcmVmaXhPZih0KSkgcmV0dXJuICEwO1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gcnQodGhpcy5maWVsZHMsIHQuZmllbGRzLCAoKHQsIGUpID0+IHQuaXNFcXVhbChlKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBDb252ZXJ0cyBhIEJhc2U2NCBlbmNvZGVkIHN0cmluZyB0byBhIGJpbmFyeSBzdHJpbmcuICovXG4vKiogVHJ1ZSBpZiBhbmQgb25seSBpZiB0aGUgQmFzZTY0IGNvbnZlcnNpb24gZnVuY3Rpb25zIGFyZSBhdmFpbGFibGUuICovXG5mdW5jdGlvbiBndCgpIHtcbiAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgYXRvYjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSW1tdXRhYmxlIGNsYXNzIHRoYXQgcmVwcmVzZW50cyBhIFwicHJvdG9cIiBieXRlIHN0cmluZy5cbiAqXG4gKiBQcm90byBieXRlIHN0cmluZ3MgY2FuIGVpdGhlciBiZSBCYXNlNjQtZW5jb2RlZCBzdHJpbmdzIG9yIFVpbnQ4QXJyYXlzIHdoZW5cbiAqIHNlbnQgb24gdGhlIHdpcmUuIFRoaXMgY2xhc3MgYWJzdHJhY3RzIGF3YXkgdGhpcyBkaWZmZXJlbnRpYXRpb24gYnkgaG9sZGluZ1xuICogdGhlIHByb3RvIGJ5dGUgc3RyaW5nIGluIGEgY29tbW9uIGNsYXNzIHRoYXQgbXVzdCBiZSBjb252ZXJ0ZWQgaW50byBhIHN0cmluZ1xuICogYmVmb3JlIGJlaW5nIHNlbnQgYXMgYSBwcm90by5cbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIHl0IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuYmluYXJ5U3RyaW5nID0gdDtcbiAgICB9XG4gICAgc3RhdGljIGZyb21CYXNlNjRTdHJpbmcodCkge1xuICAgICAgICBjb25zdCBlID0gYXRvYih0KTtcbiAgICAgICAgcmV0dXJuIG5ldyB5dChlKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21VaW50OEFycmF5KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFxuICAgICAgICAvKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBjb252ZXJ0IGFuIFVpbnQ4YXJyYXkgdG8gYSBiaW5hcnkgc3RyaW5nLlxuICovXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGxldCBlID0gXCJcIjtcbiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5sZW5ndGg7ICsrbikgZSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHRbbl0pO1xuICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gY29udmVydCBhIGJpbmFyeSBzdHJpbmcgdG8gYW4gVWludDhBcnJheS5cbiAqLyAodCk7XG4gICAgICAgIHJldHVybiBuZXcgeXQoZSk7XG4gICAgfVxuICAgIHRvQmFzZTY0KCkge1xuICAgICAgICByZXR1cm4gdCA9IHRoaXMuYmluYXJ5U3RyaW5nLCBidG9hKHQpO1xuICAgICAgICAvKiogQ29udmVydHMgYSBiaW5hcnkgc3RyaW5nIHRvIGEgQmFzZTY0IGVuY29kZWQgc3RyaW5nLiAqL1xuICAgICAgICB2YXIgdDtcbiAgICB9XG4gICAgdG9VaW50OEFycmF5KCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBVaW50OEFycmF5KHQubGVuZ3RoKTtcbiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5sZW5ndGg7IG4rKykgZVtuXSA9IHQuY2hhckNvZGVBdChuKTtcbiAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgICAgIC8vIEEgUmVnRXhwIG1hdGNoaW5nIElTTyA4NjAxIFVUQyB0aW1lc3RhbXBzIHdpdGggb3B0aW9uYWwgZnJhY3Rpb24uXG4gICAgICAgICh0aGlzLmJpbmFyeVN0cmluZyk7XG4gICAgfVxuICAgIGFwcHJveGltYXRlQnl0ZVNpemUoKSB7XG4gICAgICAgIHJldHVybiAyICogdGhpcy5iaW5hcnlTdHJpbmcubGVuZ3RoO1xuICAgIH1cbiAgICBjb21wYXJlVG8odCkge1xuICAgICAgICByZXR1cm4gaXQodGhpcy5iaW5hcnlTdHJpbmcsIHQuYmluYXJ5U3RyaW5nKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJpbmFyeVN0cmluZyA9PT0gdC5iaW5hcnlTdHJpbmc7XG4gICAgfVxufVxuXG55dC5FTVBUWV9CWVRFX1NUUklORyA9IG5ldyB5dChcIlwiKTtcblxuY29uc3QgcHQgPSBuZXcgUmVnRXhwKC9eXFxkezR9LVxcZFxcZC1cXGRcXGRUXFxkXFxkOlxcZFxcZDpcXGRcXGQoPzpcXC4oXFxkKykpP1okLyk7XG5cbi8qKlxuICogQ29udmVydHMgdGhlIHBvc3NpYmxlIFByb3RvIHZhbHVlcyBmb3IgYSB0aW1lc3RhbXAgdmFsdWUgaW50byBhIFwic2Vjb25kcyBhbmRcbiAqIG5hbm9zXCIgcmVwcmVzZW50YXRpb24uXG4gKi8gZnVuY3Rpb24gVHQodCkge1xuICAgIC8vIFRoZSBqc29uIGludGVyZmFjZSAoZm9yIHRoZSBicm93c2VyKSB3aWxsIHJldHVybiBhbiBpc28gdGltZXN0YW1wIHN0cmluZyxcbiAgICAvLyB3aGlsZSB0aGUgcHJvdG8ganMgbGlicmFyeSAoZm9yIG5vZGUpIHdpbGwgcmV0dXJuIGFcbiAgICAvLyBnb29nbGUucHJvdG9idWYuVGltZXN0YW1wIGluc3RhbmNlLlxuICAgIGlmIChCKCEhdCksIFwic3RyaW5nXCIgPT0gdHlwZW9mIHQpIHtcbiAgICAgICAgLy8gVGhlIGRhdGUgc3RyaW5nIGNhbiBoYXZlIGhpZ2hlciBwcmVjaXNpb24gKG5hbm9zKSB0aGFuIHRoZSBEYXRlIGNsYXNzXG4gICAgICAgIC8vIChtaWxsaXMpLCBzbyB3ZSBkbyBzb21lIGN1c3RvbSBwYXJzaW5nIGhlcmUuXG4gICAgICAgIC8vIFBhcnNlIHRoZSBuYW5vcyByaWdodCBvdXQgb2YgdGhlIHN0cmluZy5cbiAgICAgICAgbGV0IGUgPSAwO1xuICAgICAgICBjb25zdCBuID0gcHQuZXhlYyh0KTtcbiAgICAgICAgaWYgKEIoISFuKSwgblsxXSkge1xuICAgICAgICAgICAgLy8gUGFkIHRoZSBmcmFjdGlvbiBvdXQgdG8gOSBkaWdpdHMgKG5hbm9zKS5cbiAgICAgICAgICAgIGxldCB0ID0gblsxXTtcbiAgICAgICAgICAgIHQgPSAodCArIFwiMDAwMDAwMDAwXCIpLnN1YnN0cigwLCA5KSwgZSA9IE51bWJlcih0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBQYXJzZSB0aGUgZGF0ZSB0byBnZXQgdGhlIHNlY29uZHMuXG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IG5ldyBEYXRlKHQpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2Vjb25kczogTWF0aC5mbG9vcihzLmdldFRpbWUoKSAvIDFlMyksXG4gICAgICAgICAgICBuYW5vczogZVxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBzZWNvbmRzOiBFdCh0LnNlY29uZHMpLFxuICAgICAgICBuYW5vczogRXQodC5uYW5vcylcbiAgICB9O1xufVxuXG4vKipcbiAqIENvbnZlcnRzIHRoZSBwb3NzaWJsZSBQcm90byB0eXBlcyBmb3IgbnVtYmVycyBpbnRvIGEgSmF2YVNjcmlwdCBudW1iZXIuXG4gKiBSZXR1cm5zIDAgaWYgdGhlIHZhbHVlIGlzIG5vdCBudW1lcmljLlxuICovIGZ1bmN0aW9uIEV0KHQpIHtcbiAgICAvLyBUT0RPKGJqb3JuaWNrKTogSGFuZGxlIGludDY0IGdyZWF0ZXIgdGhhbiA1MyBiaXRzLlxuICAgIHJldHVybiBcIm51bWJlclwiID09IHR5cGVvZiB0ID8gdCA6IFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgPyBOdW1iZXIodCkgOiAwO1xufVxuXG4vKiogQ29udmVydHMgdGhlIHBvc3NpYmxlIFByb3RvIHR5cGVzIGZvciBCbG9icyBpbnRvIGEgQnl0ZVN0cmluZy4gKi8gZnVuY3Rpb24gSXQodCkge1xuICAgIHJldHVybiBcInN0cmluZ1wiID09IHR5cGVvZiB0ID8geXQuZnJvbUJhc2U2NFN0cmluZyh0KSA6IHl0LmZyb21VaW50OEFycmF5KHQpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgbG9jYWxseS1hcHBsaWVkIFNlcnZlclRpbWVzdGFtcC5cbiAqXG4gKiBTZXJ2ZXIgVGltZXN0YW1wcyBhcmUgYmFja2VkIGJ5IE1hcFZhbHVlcyB0aGF0IGNvbnRhaW4gYW4gaW50ZXJuYWwgZmllbGRcbiAqIGBfX3R5cGVfX2Agd2l0aCBhIHZhbHVlIG9mIGBzZXJ2ZXJfdGltZXN0YW1wYC4gVGhlIHByZXZpb3VzIHZhbHVlIGFuZCBsb2NhbFxuICogd3JpdGUgdGltZSBhcmUgc3RvcmVkIGluIGl0cyBgX19wcmV2aW91c192YWx1ZV9fYCBhbmQgYF9fbG9jYWxfd3JpdGVfdGltZV9fYFxuICogZmllbGRzIHJlc3BlY3RpdmVseS5cbiAqXG4gKiBOb3RlczpcbiAqIC0gU2VydmVyVGltZXN0YW1wVmFsdWUgaW5zdGFuY2VzIGFyZSBjcmVhdGVkIGFzIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYVxuICogICB0cmFuc2Zvcm0uIFRoZXkgY2FuIG9ubHkgZXhpc3QgaW4gdGhlIGxvY2FsIHZpZXcgb2YgYSBkb2N1bWVudC4gVGhlcmVmb3JlXG4gKiAgIHRoZXkgZG8gbm90IG5lZWQgdG8gYmUgcGFyc2VkIG9yIHNlcmlhbGl6ZWQuXG4gKiAtIFdoZW4gZXZhbHVhdGVkIGxvY2FsbHkgKGUuZy4gZm9yIHNuYXBzaG90LmRhdGEoKSksIHRoZXkgYnkgZGVmYXVsdFxuICogICBldmFsdWF0ZSB0byBgbnVsbGAuIFRoaXMgYmVoYXZpb3IgY2FuIGJlIGNvbmZpZ3VyZWQgYnkgcGFzc2luZyBjdXN0b21cbiAqICAgRmllbGRWYWx1ZU9wdGlvbnMgdG8gdmFsdWUoKS5cbiAqIC0gV2l0aCByZXNwZWN0IHRvIG90aGVyIFNlcnZlclRpbWVzdGFtcFZhbHVlcywgdGhleSBzb3J0IGJ5IHRoZWlyXG4gKiAgIGxvY2FsV3JpdGVUaW1lLlxuICovIGZ1bmN0aW9uIEF0KHQpIHtcbiAgICB2YXIgZSwgbjtcbiAgICByZXR1cm4gXCJzZXJ2ZXJfdGltZXN0YW1wXCIgPT09IChudWxsID09PSAobiA9ICgobnVsbCA9PT0gKGUgPSBudWxsID09IHQgPyB2b2lkIDAgOiB0Lm1hcFZhbHVlKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmZpZWxkcykgfHwge30pLl9fdHlwZV9fKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLnN0cmluZ1ZhbHVlKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IFNlcnZlclRpbWVzdGFtcCBwcm90byB2YWx1ZSAodXNpbmcgdGhlIGludGVybmFsIGZvcm1hdCkuXG4gKi9cbi8qKlxuICogUmV0dXJucyB0aGUgdmFsdWUgb2YgdGhlIGZpZWxkIGJlZm9yZSB0aGlzIFNlcnZlclRpbWVzdGFtcCB3YXMgc2V0LlxuICpcbiAqIFByZXNlcnZpbmcgdGhlIHByZXZpb3VzIHZhbHVlcyBhbGxvd3MgdGhlIHVzZXIgdG8gZGlzcGxheSB0aGUgbGFzdCByZXNvbGVkXG4gKiB2YWx1ZSB1bnRpbCB0aGUgYmFja2VuZCByZXNwb25kcyB3aXRoIHRoZSB0aW1lc3RhbXAuXG4gKi9cbmZ1bmN0aW9uIFJ0KHQpIHtcbiAgICBjb25zdCBlID0gdC5tYXBWYWx1ZS5maWVsZHMuX19wcmV2aW91c192YWx1ZV9fO1xuICAgIHJldHVybiBBdChlKSA/IFJ0KGUpIDogZTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBsb2NhbCB0aW1lIGF0IHdoaWNoIHRoaXMgdGltZXN0YW1wIHdhcyBmaXJzdCBzZXQuXG4gKi8gZnVuY3Rpb24gUHQodCkge1xuICAgIGNvbnN0IGUgPSBUdCh0Lm1hcFZhbHVlLmZpZWxkcy5fX2xvY2FsX3dyaXRlX3RpbWVfXy50aW1lc3RhbXBWYWx1ZSk7XG4gICAgcmV0dXJuIG5ldyBhdChlLnNlY29uZHMsIGUubmFub3MpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFNlbnRpbmVsIHZhbHVlIHRoYXQgc29ydHMgYmVmb3JlIGFueSBNdXRhdGlvbiBCYXRjaCBJRC4gKi9cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIGEgdmFyaWFibGUgaXMgZWl0aGVyIHVuZGVmaW5lZCBvciBudWxsLlxuICovXG5mdW5jdGlvbiBidCh0KSB7XG4gICAgcmV0dXJuIG51bGwgPT0gdDtcbn1cblxuLyoqIFJldHVybnMgd2hldGhlciB0aGUgdmFsdWUgcmVwcmVzZW50cyAtMC4gKi8gZnVuY3Rpb24gdnQodCkge1xuICAgIC8vIERldGVjdCBpZiB0aGUgdmFsdWUgaXMgLTAuMC4gQmFzZWQgb24gcG9seWZpbGwgZnJvbVxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9pc1xuICAgIHJldHVybiAwID09PSB0ICYmIDEgLyB0ID09IC0xIC8gMDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgYSB2YWx1ZSBpcyBhbiBpbnRlZ2VyIGFuZCBpbiB0aGUgc2FmZSBpbnRlZ2VyIHJhbmdlXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gdGVzdCBmb3IgYmVpbmcgYW4gaW50ZWdlciBhbmQgaW4gdGhlIHNhZmUgcmFuZ2VcbiAqLyBmdW5jdGlvbiBWdCh0KSB7XG4gICAgcmV0dXJuIFwibnVtYmVyXCIgPT0gdHlwZW9mIHQgJiYgTnVtYmVyLmlzSW50ZWdlcih0KSAmJiAhdnQodCkgJiYgdCA8PSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiAmJiB0ID49IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBTdCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnBhdGggPSB0O1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVBhdGgodCkge1xuICAgICAgICByZXR1cm4gbmV3IFN0KGR0LmZyb21TdHJpbmcodCkpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbU5hbWUodCkge1xuICAgICAgICByZXR1cm4gbmV3IFN0KGR0LmZyb21TdHJpbmcodCkucG9wRmlyc3QoNSkpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIHRoZSBkb2N1bWVudCBpcyBpbiB0aGUgc3BlY2lmaWVkIGNvbGxlY3Rpb25JZC4gKi8gICAgaGFzQ29sbGVjdGlvbklkKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aC5sZW5ndGggPj0gMiAmJiB0aGlzLnBhdGguZ2V0KHRoaXMucGF0aC5sZW5ndGggLSAyKSA9PT0gdDtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0ICYmIDAgPT09IGR0LmNvbXBhcmF0b3IodGhpcy5wYXRoLCB0LnBhdGgpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aC50b1N0cmluZygpO1xuICAgIH1cbiAgICBzdGF0aWMgY29tcGFyYXRvcih0LCBlKSB7XG4gICAgICAgIHJldHVybiBkdC5jb21wYXJhdG9yKHQucGF0aCwgZS5wYXRoKTtcbiAgICB9XG4gICAgc3RhdGljIGlzRG9jdW1lbnRLZXkodCkge1xuICAgICAgICByZXR1cm4gdC5sZW5ndGggJSAyID09IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBuZXcgZG9jdW1lbnQga2V5IHdpdGggdGhlIGdpdmVuIHNlZ21lbnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNlZ21lbnRzIC0gVGhlIHNlZ21lbnRzIG9mIHRoZSBwYXRoIHRvIHRoZSBkb2N1bWVudFxuICAgICAqIEByZXR1cm5zIEEgbmV3IGluc3RhbmNlIG9mIERvY3VtZW50S2V5XG4gICAgICovICAgIHN0YXRpYyBmcm9tU2VnbWVudHModCkge1xuICAgICAgICByZXR1cm4gbmV3IFN0KG5ldyBkdCh0LnNsaWNlKCkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogRXh0cmFjdHMgdGhlIGJhY2tlbmQncyB0eXBlIG9yZGVyIGZvciB0aGUgcHJvdmlkZWQgdmFsdWUuICovIGZ1bmN0aW9uIER0KHQpIHtcbiAgICByZXR1cm4gXCJudWxsVmFsdWVcIiBpbiB0ID8gMCAvKiBOdWxsVmFsdWUgKi8gOiBcImJvb2xlYW5WYWx1ZVwiIGluIHQgPyAxIC8qIEJvb2xlYW5WYWx1ZSAqLyA6IFwiaW50ZWdlclZhbHVlXCIgaW4gdCB8fCBcImRvdWJsZVZhbHVlXCIgaW4gdCA/IDIgLyogTnVtYmVyVmFsdWUgKi8gOiBcInRpbWVzdGFtcFZhbHVlXCIgaW4gdCA/IDMgLyogVGltZXN0YW1wVmFsdWUgKi8gOiBcInN0cmluZ1ZhbHVlXCIgaW4gdCA/IDUgLyogU3RyaW5nVmFsdWUgKi8gOiBcImJ5dGVzVmFsdWVcIiBpbiB0ID8gNiAvKiBCbG9iVmFsdWUgKi8gOiBcInJlZmVyZW5jZVZhbHVlXCIgaW4gdCA/IDcgLyogUmVmVmFsdWUgKi8gOiBcImdlb1BvaW50VmFsdWVcIiBpbiB0ID8gOCAvKiBHZW9Qb2ludFZhbHVlICovIDogXCJhcnJheVZhbHVlXCIgaW4gdCA/IDkgLyogQXJyYXlWYWx1ZSAqLyA6IFwibWFwVmFsdWVcIiBpbiB0ID8gQXQodCkgPyA0IC8qIFNlcnZlclRpbWVzdGFtcFZhbHVlICovIDogMTAgLyogT2JqZWN0VmFsdWUgKi8gOiBMKCk7XG59XG5cbi8qKiBUZXN0cyBgbGVmdGAgYW5kIGByaWdodGAgZm9yIGVxdWFsaXR5IGJhc2VkIG9uIHRoZSBiYWNrZW5kIHNlbWFudGljcy4gKi8gZnVuY3Rpb24gQ3QodCwgZSkge1xuICAgIGNvbnN0IG4gPSBEdCh0KTtcbiAgICBpZiAobiAhPT0gRHQoZSkpIHJldHVybiAhMTtcbiAgICBzd2l0Y2ggKG4pIHtcbiAgICAgIGNhc2UgMCAvKiBOdWxsVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gITA7XG5cbiAgICAgIGNhc2UgMSAvKiBCb29sZWFuVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gdC5ib29sZWFuVmFsdWUgPT09IGUuYm9vbGVhblZhbHVlO1xuXG4gICAgICBjYXNlIDQgLyogU2VydmVyVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gUHQodCkuaXNFcXVhbChQdChlKSk7XG5cbiAgICAgIGNhc2UgMyAvKiBUaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdC50aW1lc3RhbXBWYWx1ZSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiBlLnRpbWVzdGFtcFZhbHVlICYmIHQudGltZXN0YW1wVmFsdWUubGVuZ3RoID09PSBlLnRpbWVzdGFtcFZhbHVlLmxlbmd0aCkgXG4gICAgICAgICAgICAvLyBVc2Ugc3RyaW5nIGVxdWFsaXR5IGZvciBJU08gODYwMSB0aW1lc3RhbXBzXG4gICAgICAgICAgICByZXR1cm4gdC50aW1lc3RhbXBWYWx1ZSA9PT0gZS50aW1lc3RhbXBWYWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBUdCh0LnRpbWVzdGFtcFZhbHVlKSwgcyA9IFR0KGUudGltZXN0YW1wVmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIG4uc2Vjb25kcyA9PT0gcy5zZWNvbmRzICYmIG4ubmFub3MgPT09IHMubmFub3M7XG4gICAgICAgIH0odCwgZSk7XG5cbiAgICAgIGNhc2UgNSAvKiBTdHJpbmdWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiB0LnN0cmluZ1ZhbHVlID09PSBlLnN0cmluZ1ZhbHVlO1xuXG4gICAgICBjYXNlIDYgLyogQmxvYlZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiBJdCh0LmJ5dGVzVmFsdWUpLmlzRXF1YWwoSXQoZS5ieXRlc1ZhbHVlKSk7XG4gICAgICAgIH0odCwgZSk7XG5cbiAgICAgIGNhc2UgNyAvKiBSZWZWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiB0LnJlZmVyZW5jZVZhbHVlID09PSBlLnJlZmVyZW5jZVZhbHVlO1xuXG4gICAgICBjYXNlIDggLyogR2VvUG9pbnRWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gRXQodC5nZW9Qb2ludFZhbHVlLmxhdGl0dWRlKSA9PT0gRXQoZS5nZW9Qb2ludFZhbHVlLmxhdGl0dWRlKSAmJiBFdCh0Lmdlb1BvaW50VmFsdWUubG9uZ2l0dWRlKSA9PT0gRXQoZS5nZW9Qb2ludFZhbHVlLmxvbmdpdHVkZSk7XG4gICAgICAgIH0odCwgZSk7XG5cbiAgICAgIGNhc2UgMiAvKiBOdW1iZXJWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBpZiAoXCJpbnRlZ2VyVmFsdWVcIiBpbiB0ICYmIFwiaW50ZWdlclZhbHVlXCIgaW4gZSkgcmV0dXJuIEV0KHQuaW50ZWdlclZhbHVlKSA9PT0gRXQoZS5pbnRlZ2VyVmFsdWUpO1xuICAgICAgICAgICAgaWYgKFwiZG91YmxlVmFsdWVcIiBpbiB0ICYmIFwiZG91YmxlVmFsdWVcIiBpbiBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IEV0KHQuZG91YmxlVmFsdWUpLCBzID0gRXQoZS5kb3VibGVWYWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4gPT09IHMgPyB2dChuKSA9PT0gdnQocykgOiBpc05hTihuKSAmJiBpc05hTihzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgfSh0LCBlKTtcblxuICAgICAgY2FzZSA5IC8qIEFycmF5VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gcnQodC5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXSwgZS5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXSwgQ3QpO1xuXG4gICAgICBjYXNlIDEwIC8qIE9iamVjdFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0Lm1hcFZhbHVlLmZpZWxkcyB8fCB7fSwgcyA9IGUubWFwVmFsdWUuZmllbGRzIHx8IHt9O1xuICAgICAgICAgICAgaWYgKHV0KG4pICE9PSB1dChzKSkgcmV0dXJuICExO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IGluIG4pIGlmIChuLmhhc093blByb3BlcnR5KHQpICYmICh2b2lkIDAgPT09IHNbdF0gfHwgIUN0KG5bdF0sIHNbdF0pKSkgcmV0dXJuICExO1xuICAgICAgICAgICAgcmV0dXJuICEwO1xuICAgICAgICB9XG4gICAgICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIEFycmF5VmFsdWUgY29udGFpbnMgdGhlIHNwZWNpZmllZCBlbGVtZW50LiAqLyAodCwgZSk7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBMKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBOdCh0LCBlKSB7XG4gICAgcmV0dXJuIHZvaWQgMCAhPT0gKHQudmFsdWVzIHx8IFtdKS5maW5kKCh0ID0+IEN0KHQsIGUpKSk7XG59XG5cbmZ1bmN0aW9uIGt0KHQsIGUpIHtcbiAgICBjb25zdCBuID0gRHQodCksIHMgPSBEdChlKTtcbiAgICBpZiAobiAhPT0gcykgcmV0dXJuIGl0KG4sIHMpO1xuICAgIHN3aXRjaCAobikge1xuICAgICAgY2FzZSAwIC8qIE51bGxWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiAwO1xuXG4gICAgICBjYXNlIDEgLyogQm9vbGVhblZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGl0KHQuYm9vbGVhblZhbHVlLCBlLmJvb2xlYW5WYWx1ZSk7XG5cbiAgICAgIGNhc2UgMiAvKiBOdW1iZXJWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gRXQodC5pbnRlZ2VyVmFsdWUgfHwgdC5kb3VibGVWYWx1ZSksIHMgPSBFdChlLmludGVnZXJWYWx1ZSB8fCBlLmRvdWJsZVZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBuIDwgcyA/IC0xIDogbiA+IHMgPyAxIDogbiA9PT0gcyA/IDAgOiBcbiAgICAgICAgICAgIC8vIG9uZSBvciBib3RoIGFyZSBOYU4uXG4gICAgICAgICAgICBpc05hTihuKSA/IGlzTmFOKHMpID8gMCA6IC0xIDogMTtcbiAgICAgICAgfSh0LCBlKTtcblxuICAgICAgY2FzZSAzIC8qIFRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIHh0KHQudGltZXN0YW1wVmFsdWUsIGUudGltZXN0YW1wVmFsdWUpO1xuXG4gICAgICBjYXNlIDQgLyogU2VydmVyVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4geHQoUHQodCksIFB0KGUpKTtcblxuICAgICAgY2FzZSA1IC8qIFN0cmluZ1ZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGl0KHQuc3RyaW5nVmFsdWUsIGUuc3RyaW5nVmFsdWUpO1xuXG4gICAgICBjYXNlIDYgLyogQmxvYlZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBJdCh0KSwgcyA9IEl0KGUpO1xuICAgICAgICAgICAgcmV0dXJuIG4uY29tcGFyZVRvKHMpO1xuICAgICAgICB9KHQuYnl0ZXNWYWx1ZSwgZS5ieXRlc1ZhbHVlKTtcblxuICAgICAgY2FzZSA3IC8qIFJlZlZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LnNwbGl0KFwiL1wiKSwgcyA9IGUuc3BsaXQoXCIvXCIpO1xuICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBuLmxlbmd0aCAmJiB0IDwgcy5sZW5ndGg7IHQrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBpdChuW3RdLCBzW3RdKTtcbiAgICAgICAgICAgICAgICBpZiAoMCAhPT0gZSkgcmV0dXJuIGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXQobi5sZW5ndGgsIHMubGVuZ3RoKTtcbiAgICAgICAgfSh0LnJlZmVyZW5jZVZhbHVlLCBlLnJlZmVyZW5jZVZhbHVlKTtcblxuICAgICAgY2FzZSA4IC8qIEdlb1BvaW50VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IGl0KEV0KHQubGF0aXR1ZGUpLCBFdChlLmxhdGl0dWRlKSk7XG4gICAgICAgICAgICBpZiAoMCAhPT0gbikgcmV0dXJuIG47XG4gICAgICAgICAgICByZXR1cm4gaXQoRXQodC5sb25naXR1ZGUpLCBFdChlLmxvbmdpdHVkZSkpO1xuICAgICAgICB9KHQuZ2VvUG9pbnRWYWx1ZSwgZS5nZW9Qb2ludFZhbHVlKTtcblxuICAgICAgY2FzZSA5IC8qIEFycmF5VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQudmFsdWVzIHx8IFtdLCBzID0gZS52YWx1ZXMgfHwgW107XG4gICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IG4ubGVuZ3RoICYmIHQgPCBzLmxlbmd0aDsgKyt0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IGt0KG5bdF0sIHNbdF0pO1xuICAgICAgICAgICAgICAgIGlmIChlKSByZXR1cm4gZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpdChuLmxlbmd0aCwgcy5sZW5ndGgpO1xuICAgICAgICB9KHQuYXJyYXlWYWx1ZSwgZS5hcnJheVZhbHVlKTtcblxuICAgICAgY2FzZSAxMCAvKiBPYmplY3RWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5maWVsZHMgfHwge30sIHMgPSBPYmplY3Qua2V5cyhuKSwgaSA9IGUuZmllbGRzIHx8IHt9LCByID0gT2JqZWN0LmtleXMoaSk7XG4gICAgICAgICAgICAvLyBFdmVuIHRob3VnaCBNYXBWYWx1ZXMgYXJlIGxpa2VseSBzb3J0ZWQgY29ycmVjdGx5IGJhc2VkIG9uIHRoZWlyIGluc2VydGlvblxuICAgICAgICAgICAgLy8gb3JkZXIgKGUuZy4gd2hlbiByZWNlaXZlZCBmcm9tIHRoZSBiYWNrZW5kKSwgbG9jYWwgbW9kaWZpY2F0aW9ucyBjYW4gYnJpbmdcbiAgICAgICAgICAgIC8vIGVsZW1lbnRzIG91dCBvZiBvcmRlci4gV2UgbmVlZCB0byByZS1zb3J0IHRoZSBlbGVtZW50cyB0byBlbnN1cmUgdGhhdFxuICAgICAgICAgICAgLy8gY2Fub25pY2FsIElEcyBhcmUgaW5kZXBlbmRlbnQgb2YgaW5zZXJ0aW9uIG9yZGVyLlxuICAgICAgICAgICAgcy5zb3J0KCksIHIuc29ydCgpO1xuICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBzLmxlbmd0aCAmJiB0IDwgci5sZW5ndGg7ICsrdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBpdChzW3RdLCByW3RdKTtcbiAgICAgICAgICAgICAgICBpZiAoMCAhPT0gZSkgcmV0dXJuIGU7XG4gICAgICAgICAgICAgICAgY29uc3QgbyA9IGt0KG5bc1t0XV0sIGlbclt0XV0pO1xuICAgICAgICAgICAgICAgIGlmICgwICE9PSBvKSByZXR1cm4gbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpdChzLmxlbmd0aCwgci5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogR2VuZXJhdGVzIHRoZSBjYW5vbmljYWwgSUQgZm9yIHRoZSBwcm92aWRlZCBmaWVsZCB2YWx1ZSAoYXMgdXNlZCBpbiBUYXJnZXRcbiAqIHNlcmlhbGl6YXRpb24pLlxuICovICh0Lm1hcFZhbHVlLCBlLm1hcFZhbHVlKTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgTCgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24geHQodCwgZSkge1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiB0ICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgJiYgdC5sZW5ndGggPT09IGUubGVuZ3RoKSByZXR1cm4gaXQodCwgZSk7XG4gICAgY29uc3QgbiA9IFR0KHQpLCBzID0gVHQoZSksIGkgPSBpdChuLnNlY29uZHMsIHMuc2Vjb25kcyk7XG4gICAgcmV0dXJuIDAgIT09IGkgPyBpIDogaXQobi5uYW5vcywgcy5uYW5vcyk7XG59XG5cbmZ1bmN0aW9uICR0KHQpIHtcbiAgICByZXR1cm4gRnQodCk7XG59XG5cbmZ1bmN0aW9uIEZ0KHQpIHtcbiAgICByZXR1cm4gXCJudWxsVmFsdWVcIiBpbiB0ID8gXCJudWxsXCIgOiBcImJvb2xlYW5WYWx1ZVwiIGluIHQgPyBcIlwiICsgdC5ib29sZWFuVmFsdWUgOiBcImludGVnZXJWYWx1ZVwiIGluIHQgPyBcIlwiICsgdC5pbnRlZ2VyVmFsdWUgOiBcImRvdWJsZVZhbHVlXCIgaW4gdCA/IFwiXCIgKyB0LmRvdWJsZVZhbHVlIDogXCJ0aW1lc3RhbXBWYWx1ZVwiIGluIHQgPyBmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBUdCh0KTtcbiAgICAgICAgcmV0dXJuIGB0aW1lKCR7ZS5zZWNvbmRzfSwke2UubmFub3N9KWA7XG4gICAgfSh0LnRpbWVzdGFtcFZhbHVlKSA6IFwic3RyaW5nVmFsdWVcIiBpbiB0ID8gdC5zdHJpbmdWYWx1ZSA6IFwiYnl0ZXNWYWx1ZVwiIGluIHQgPyBJdCh0LmJ5dGVzVmFsdWUpLnRvQmFzZTY0KCkgOiBcInJlZmVyZW5jZVZhbHVlXCIgaW4gdCA/IChuID0gdC5yZWZlcmVuY2VWYWx1ZSwgXG4gICAgU3QuZnJvbU5hbWUobikudG9TdHJpbmcoKSkgOiBcImdlb1BvaW50VmFsdWVcIiBpbiB0ID8gYGdlbygkeyhlID0gdC5nZW9Qb2ludFZhbHVlKS5sYXRpdHVkZX0sJHtlLmxvbmdpdHVkZX0pYCA6IFwiYXJyYXlWYWx1ZVwiIGluIHQgPyBmdW5jdGlvbih0KSB7XG4gICAgICAgIGxldCBlID0gXCJbXCIsIG4gPSAhMDtcbiAgICAgICAgZm9yIChjb25zdCBzIG9mIHQudmFsdWVzIHx8IFtdKSBuID8gbiA9ICExIDogZSArPSBcIixcIiwgZSArPSBGdChzKTtcbiAgICAgICAgcmV0dXJuIGUgKyBcIl1cIjtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSByZWZlcmVuY2UgdmFsdWUgZm9yIHRoZSBwcm92aWRlZCBkYXRhYmFzZSBhbmQga2V5LiAqLyAodC5hcnJheVZhbHVlKSA6IFwibWFwVmFsdWVcIiBpbiB0ID8gZnVuY3Rpb24odCkge1xuICAgICAgICAvLyBJdGVyYXRpb24gb3JkZXIgaW4gSmF2YVNjcmlwdCBpcyBub3QgZ3VhcmFudGVlZC4gVG8gZW5zdXJlIHRoYXQgd2UgZ2VuZXJhdGVcbiAgICAgICAgLy8gbWF0Y2hpbmcgY2Fub25pY2FsIElEcyBmb3IgaWRlbnRpY2FsIG1hcHMsIHdlIG5lZWQgdG8gc29ydCB0aGUga2V5cy5cbiAgICAgICAgY29uc3QgZSA9IE9iamVjdC5rZXlzKHQuZmllbGRzIHx8IHt9KS5zb3J0KCk7XG4gICAgICAgIGxldCBuID0gXCJ7XCIsIHMgPSAhMDtcbiAgICAgICAgZm9yIChjb25zdCBpIG9mIGUpIHMgPyBzID0gITEgOiBuICs9IFwiLFwiLCBuICs9IGAke2l9OiR7RnQodC5maWVsZHNbaV0pfWA7XG4gICAgICAgIHJldHVybiBuICsgXCJ9XCI7XG4gICAgfSh0Lm1hcFZhbHVlKSA6IEwoKTtcbiAgICB2YXIgZSwgbjtcbn1cblxuZnVuY3Rpb24gT3QodCwgZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlZmVyZW5jZVZhbHVlOiBgcHJvamVjdHMvJHt0LnByb2plY3RJZH0vZGF0YWJhc2VzLyR7dC5kYXRhYmFzZX0vZG9jdW1lbnRzLyR7ZS5wYXRoLmNhbm9uaWNhbFN0cmluZygpfWBcbiAgICB9O1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgYW4gSW50ZWdlclZhbHVlIC4gKi8gZnVuY3Rpb24gTXQodCkge1xuICAgIHJldHVybiAhIXQgJiYgXCJpbnRlZ2VyVmFsdWVcIiBpbiB0O1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgYSBEb3VibGVWYWx1ZS4gKi9cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhbiBBcnJheVZhbHVlLiAqL1xuZnVuY3Rpb24gTHQodCkge1xuICAgIHJldHVybiAhIXQgJiYgXCJhcnJheVZhbHVlXCIgaW4gdDtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGEgTnVsbFZhbHVlLiAqLyBmdW5jdGlvbiBCdCh0KSB7XG4gICAgcmV0dXJuICEhdCAmJiBcIm51bGxWYWx1ZVwiIGluIHQ7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBOYU4uICovIGZ1bmN0aW9uIFV0KHQpIHtcbiAgICByZXR1cm4gISF0ICYmIFwiZG91YmxlVmFsdWVcIiBpbiB0ICYmIGlzTmFOKE51bWJlcih0LmRvdWJsZVZhbHVlKSk7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhIE1hcFZhbHVlLiAqLyBmdW5jdGlvbiBxdCh0KSB7XG4gICAgcmV0dXJuICEhdCAmJiBcIm1hcFZhbHVlXCIgaW4gdDtcbn1cblxuLyoqIENyZWF0ZXMgYSBkZWVwIGNvcHkgb2YgYHNvdXJjZWAuICovIGZ1bmN0aW9uIEt0KHQpIHtcbiAgICBpZiAodC5nZW9Qb2ludFZhbHVlKSByZXR1cm4ge1xuICAgICAgICBnZW9Qb2ludFZhbHVlOiBPYmplY3QuYXNzaWduKHt9LCB0Lmdlb1BvaW50VmFsdWUpXG4gICAgfTtcbiAgICBpZiAodC50aW1lc3RhbXBWYWx1ZSAmJiBcIm9iamVjdFwiID09IHR5cGVvZiB0LnRpbWVzdGFtcFZhbHVlKSByZXR1cm4ge1xuICAgICAgICB0aW1lc3RhbXBWYWx1ZTogT2JqZWN0LmFzc2lnbih7fSwgdC50aW1lc3RhbXBWYWx1ZSlcbiAgICB9O1xuICAgIGlmICh0Lm1hcFZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgIGZpZWxkczoge31cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGh0KHQubWFwVmFsdWUuZmllbGRzLCAoKHQsIG4pID0+IGUubWFwVmFsdWUuZmllbGRzW3RdID0gS3QobikpKSwgZTtcbiAgICB9XG4gICAgaWYgKHQuYXJyYXlWYWx1ZSkge1xuICAgICAgICBjb25zdCBlID0ge1xuICAgICAgICAgICAgYXJyYXlWYWx1ZToge1xuICAgICAgICAgICAgICAgIHZhbHVlczogW11cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCAodC5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXSkubGVuZ3RoOyArK24pIGUuYXJyYXlWYWx1ZS52YWx1ZXNbbl0gPSBLdCh0LmFycmF5VmFsdWUudmFsdWVzW25dKTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCB0KTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gT2JqZWN0VmFsdWUgcmVwcmVzZW50cyBhIE1hcFZhbHVlIGluIHRoZSBGaXJlc3RvcmUgUHJvdG8gYW5kIG9mZmVycyB0aGVcbiAqIGFiaWxpdHkgdG8gYWRkIGFuZCByZW1vdmUgZmllbGRzICh2aWEgdGhlIE9iamVjdFZhbHVlQnVpbGRlcikuXG4gKi8gY2xhc3MganQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHQ7XG4gICAgfVxuICAgIHN0YXRpYyBlbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBqdCh7XG4gICAgICAgICAgICBtYXBWYWx1ZToge31cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHZhbHVlIGF0IHRoZSBnaXZlbiBwYXRoIG9yIG51bGwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aCAtIHRoZSBwYXRoIHRvIHNlYXJjaFxuICAgICAqIEByZXR1cm5zIFRoZSB2YWx1ZSBhdCB0aGUgcGF0aCBvciBudWxsIGlmIHRoZSBwYXRoIGlzIG5vdCBzZXQuXG4gICAgICovICAgIGZpZWxkKHQpIHtcbiAgICAgICAgaWYgKHQuaXNFbXB0eSgpKSByZXR1cm4gdGhpcy52YWx1ZTtcbiAgICAgICAge1xuICAgICAgICAgICAgbGV0IGUgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lmxlbmd0aCAtIDE7ICsrbikgaWYgKGUgPSAoZS5tYXBWYWx1ZS5maWVsZHMgfHwge30pW3QuZ2V0KG4pXSwgXG4gICAgICAgICAgICAhcXQoZSkpIHJldHVybiBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIGUgPSAoZS5tYXBWYWx1ZS5maWVsZHMgfHwge30pW3QubGFzdFNlZ21lbnQoKV0sIGUgfHwgbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBmaWVsZCB0byB0aGUgcHJvdmlkZWQgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aCAtIFRoZSBmaWVsZCBwYXRoIHRvIHNldC5cbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gc2V0LlxuICAgICAqLyAgICBzZXQodCwgZSkge1xuICAgICAgICB0aGlzLmdldEZpZWxkc01hcCh0LnBvcExhc3QoKSlbdC5sYXN0U2VnbWVudCgpXSA9IEt0KGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBwcm92aWRlZCBmaWVsZHMgdG8gdGhlIHByb3ZpZGVkIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXRhIC0gQSBtYXAgb2YgZmllbGRzIHRvIHZhbHVlcyAob3IgbnVsbCBmb3IgZGVsZXRlcykuXG4gICAgICovICAgIHNldEFsbCh0KSB7XG4gICAgICAgIGxldCBlID0gX3QuZW1wdHlQYXRoKCksIG4gPSB7fSwgcyA9IFtdO1xuICAgICAgICB0LmZvckVhY2goKCh0LCBpKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWUuaXNJbW1lZGlhdGVQYXJlbnRPZihpKSkge1xuICAgICAgICAgICAgICAgIC8vIEluc2VydCB0aGUgYWNjdW11bGF0ZWQgY2hhbmdlcyBhdCB0aGlzIHBhcmVudCBsb2NhdGlvblxuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmdldEZpZWxkc01hcChlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGx5Q2hhbmdlcyh0LCBuLCBzKSwgbiA9IHt9LCBzID0gW10sIGUgPSBpLnBvcExhc3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHQgPyBuW2kubGFzdFNlZ21lbnQoKV0gPSBLdCh0KSA6IHMucHVzaChpLmxhc3RTZWdtZW50KCkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLmdldEZpZWxkc01hcChlKTtcbiAgICAgICAgdGhpcy5hcHBseUNoYW5nZXMoaSwgbiwgcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIGZpZWxkIGF0IHRoZSBzcGVjaWZpZWQgcGF0aC4gSWYgdGhlcmUgaXMgbm8gZmllbGQgYXQgdGhlXG4gICAgICogc3BlY2lmaWVkIHBhdGgsIG5vdGhpbmcgaXMgY2hhbmdlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXRoIC0gVGhlIGZpZWxkIHBhdGggdG8gcmVtb3ZlLlxuICAgICAqLyAgICBkZWxldGUodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5maWVsZCh0LnBvcExhc3QoKSk7XG4gICAgICAgIHF0KGUpICYmIGUubWFwVmFsdWUuZmllbGRzICYmIGRlbGV0ZSBlLm1hcFZhbHVlLmZpZWxkc1t0Lmxhc3RTZWdtZW50KCldO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIEN0KHRoaXMudmFsdWUsIHQudmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBtYXAgdGhhdCBjb250YWlucyB0aGUgbGVhZiBlbGVtZW50IG9mIGBwYXRoYC4gSWYgdGhlIHBhcmVudFxuICAgICAqIGVudHJ5IGRvZXMgbm90IHlldCBleGlzdCwgb3IgaWYgaXQgaXMgbm90IGEgbWFwLCBhIG5ldyBtYXAgd2lsbCBiZSBjcmVhdGVkLlxuICAgICAqLyAgICBnZXRGaWVsZHNNYXAodCkge1xuICAgICAgICBsZXQgZSA9IHRoaXMudmFsdWU7XG4gICAgICAgIGUubWFwVmFsdWUuZmllbGRzIHx8IChlLm1hcFZhbHVlID0ge1xuICAgICAgICAgICAgZmllbGRzOiB7fVxuICAgICAgICB9KTtcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lmxlbmd0aDsgKytuKSB7XG4gICAgICAgICAgICBsZXQgcyA9IGUubWFwVmFsdWUuZmllbGRzW3QuZ2V0KG4pXTtcbiAgICAgICAgICAgIHF0KHMpICYmIHMubWFwVmFsdWUuZmllbGRzIHx8IChzID0ge1xuICAgICAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkczoge31cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBlLm1hcFZhbHVlLmZpZWxkc1t0LmdldChuKV0gPSBzKSwgZSA9IHM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGUubWFwVmFsdWUuZmllbGRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNb2RpZmllcyBgZmllbGRzTWFwYCBieSBhZGRpbmcsIHJlcGxhY2luZyBvciBkZWxldGluZyB0aGUgc3BlY2lmaWVkXG4gICAgICogZW50cmllcy5cbiAgICAgKi8gICAgYXBwbHlDaGFuZ2VzKHQsIGUsIG4pIHtcbiAgICAgICAgaHQoZSwgKChlLCBuKSA9PiB0W2VdID0gbikpO1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgbikgZGVsZXRlIHRbZV07XG4gICAgfVxuICAgIGNsb25lKCkge1xuICAgICAgICByZXR1cm4gbmV3IGp0KEt0KHRoaXMudmFsdWUpKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIEZpZWxkTWFzayBidWlsdCBmcm9tIGFsbCBmaWVsZHMgaW4gYSBNYXBWYWx1ZS5cbiAqLyBmdW5jdGlvbiBRdCh0KSB7XG4gICAgY29uc3QgZSA9IFtdO1xuICAgIHJldHVybiBodCh0LmZpZWxkcywgKCh0LCBuKSA9PiB7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgX3QoWyB0IF0pO1xuICAgICAgICBpZiAocXQobikpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBRdChuLm1hcFZhbHVlKS5maWVsZHM7XG4gICAgICAgICAgICBpZiAoMCA9PT0gdC5sZW5ndGgpIFxuICAgICAgICAgICAgLy8gUHJlc2VydmUgdGhlIGVtcHR5IG1hcCBieSBhZGRpbmcgaXQgdG8gdGhlIEZpZWxkTWFzay5cbiAgICAgICAgICAgIGUucHVzaChzKTsgZWxzZSBcbiAgICAgICAgICAgIC8vIEZvciBuZXN0ZWQgYW5kIG5vbi1lbXB0eSBPYmplY3RWYWx1ZXMsIGFkZCB0aGUgRmllbGRQYXRoIG9mIHRoZVxuICAgICAgICAgICAgLy8gbGVhZiBub2Rlcy5cbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiB0KSBlLnB1c2gocy5jaGlsZChuKSk7XG4gICAgICAgIH0gZWxzZSBcbiAgICAgICAgLy8gRm9yIG5lc3RlZCBhbmQgbm9uLWVtcHR5IE9iamVjdFZhbHVlcywgYWRkIHRoZSBGaWVsZFBhdGggb2YgdGhlIGxlYWZcbiAgICAgICAgLy8gbm9kZXMuXG4gICAgICAgIGUucHVzaChzKTtcbiAgICB9KSksIG5ldyBtdChlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhIGRvY3VtZW50IGluIEZpcmVzdG9yZSB3aXRoIGEga2V5LCB2ZXJzaW9uLCBkYXRhIGFuZCB3aGV0aGVyIGl0XG4gKiBoYXMgbG9jYWwgbXV0YXRpb25zIGFwcGxpZWQgdG8gaXQuXG4gKlxuICogRG9jdW1lbnRzIGNhbiB0cmFuc2l0aW9uIGJldHdlZW4gc3RhdGVzIHZpYSBgY29udmVydFRvRm91bmREb2N1bWVudCgpYCxcbiAqIGBjb252ZXJ0VG9Ob0RvY3VtZW50KClgIGFuZCBgY29udmVydFRvVW5rbm93bkRvY3VtZW50KClgLiBJZiBhIGRvY3VtZW50IGRvZXNcbiAqIG5vdCB0cmFuc2l0aW9uIHRvIG9uZSBvZiB0aGVzZSBzdGF0ZXMgZXZlbiBhZnRlciBhbGwgbXV0YXRpb25zIGhhdmUgYmVlblxuICogYXBwbGllZCwgYGlzVmFsaWREb2N1bWVudCgpYCByZXR1cm5zIGZhbHNlIGFuZCB0aGUgZG9jdW1lbnQgc2hvdWxkIGJlIHJlbW92ZWRcbiAqIGZyb20gYWxsIHZpZXdzLlxuICovIGNsYXNzIFd0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHRoaXMua2V5ID0gdCwgdGhpcy5kb2N1bWVudFR5cGUgPSBlLCB0aGlzLnZlcnNpb24gPSBuLCB0aGlzLmRhdGEgPSBzLCB0aGlzLmRvY3VtZW50U3RhdGUgPSBpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZG9jdW1lbnQgd2l0aCBubyBrbm93biB2ZXJzaW9uIG9yIGRhdGEsIGJ1dCB3aGljaCBjYW4gc2VydmUgYXNcbiAgICAgKiBiYXNlIGRvY3VtZW50IGZvciBtdXRhdGlvbnMuXG4gICAgICovICAgIHN0YXRpYyBuZXdJbnZhbGlkRG9jdW1lbnQodCkge1xuICAgICAgICByZXR1cm4gbmV3IFd0KHQsIDAgLyogSU5WQUxJRCAqLyAsIGN0Lm1pbigpLCBqdC5lbXB0eSgpLCAwIC8qIFNZTkNFRCAqLyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgZG9jdW1lbnQgdGhhdCBpcyBrbm93biB0byBleGlzdCB3aXRoIHRoZSBnaXZlbiBkYXRhIGF0IHRoZVxuICAgICAqIGdpdmVuIHZlcnNpb24uXG4gICAgICovICAgIHN0YXRpYyBuZXdGb3VuZERvY3VtZW50KHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBXdCh0LCAxIC8qIEZPVU5EX0RPQ1VNRU5UICovICwgZSwgbiwgMCAvKiBTWU5DRUQgKi8pO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyBkb2N1bWVudCB0aGF0IGlzIGtub3duIHRvIG5vdCBleGlzdCBhdCB0aGUgZ2l2ZW4gdmVyc2lvbi4gKi8gICAgc3RhdGljIG5ld05vRG9jdW1lbnQodCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IFd0KHQsIDIgLyogTk9fRE9DVU1FTlQgKi8gLCBlLCBqdC5lbXB0eSgpLCAwIC8qIFNZTkNFRCAqLyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgZG9jdW1lbnQgdGhhdCBpcyBrbm93biB0byBleGlzdCBhdCB0aGUgZ2l2ZW4gdmVyc2lvbiBidXRcbiAgICAgKiB3aG9zZSBkYXRhIGlzIG5vdCBrbm93biAoZS5nLiBhIGRvY3VtZW50IHRoYXQgd2FzIHVwZGF0ZWQgd2l0aG91dCBhIGtub3duXG4gICAgICogYmFzZSBkb2N1bWVudCkuXG4gICAgICovICAgIHN0YXRpYyBuZXdVbmtub3duRG9jdW1lbnQodCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IFd0KHQsIDMgLyogVU5LTk9XTl9ET0NVTUVOVCAqLyAsIGUsIGp0LmVtcHR5KCksIDIgLyogSEFTX0NPTU1JVFRFRF9NVVRBVElPTlMgKi8pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGFuZ2VzIHRoZSBkb2N1bWVudCB0eXBlIHRvIGluZGljYXRlIHRoYXQgaXQgZXhpc3RzIGFuZCB0aGF0IGl0cyB2ZXJzaW9uXG4gICAgICogYW5kIGRhdGEgYXJlIGtub3duLlxuICAgICAqLyAgICBjb252ZXJ0VG9Gb3VuZERvY3VtZW50KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmVyc2lvbiA9IHQsIHRoaXMuZG9jdW1lbnRUeXBlID0gMSAvKiBGT1VORF9ET0NVTUVOVCAqLyAsIHRoaXMuZGF0YSA9IGUsIFxuICAgICAgICB0aGlzLmRvY3VtZW50U3RhdGUgPSAwIC8qIFNZTkNFRCAqLyAsIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZXMgdGhlIGRvY3VtZW50IHR5cGUgdG8gaW5kaWNhdGUgdGhhdCBpdCBkb2Vzbid0IGV4aXN0IGF0IHRoZSBnaXZlblxuICAgICAqIHZlcnNpb24uXG4gICAgICovICAgIGNvbnZlcnRUb05vRG9jdW1lbnQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uID0gdCwgdGhpcy5kb2N1bWVudFR5cGUgPSAyIC8qIE5PX0RPQ1VNRU5UICovICwgdGhpcy5kYXRhID0ganQuZW1wdHkoKSwgXG4gICAgICAgIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IDAgLyogU1lOQ0VEICovICwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hhbmdlcyB0aGUgZG9jdW1lbnQgdHlwZSB0byBpbmRpY2F0ZSB0aGF0IGl0IGV4aXN0cyBhdCBhIGdpdmVuIHZlcnNpb24gYnV0XG4gICAgICogdGhhdCBpdHMgZGF0YSBpcyBub3Qga25vd24gKGUuZy4gYSBkb2N1bWVudCB0aGF0IHdhcyB1cGRhdGVkIHdpdGhvdXQgYSBrbm93blxuICAgICAqIGJhc2UgZG9jdW1lbnQpLlxuICAgICAqLyAgICBjb252ZXJ0VG9Vbmtub3duRG9jdW1lbnQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uID0gdCwgdGhpcy5kb2N1bWVudFR5cGUgPSAzIC8qIFVOS05PV05fRE9DVU1FTlQgKi8gLCB0aGlzLmRhdGEgPSBqdC5lbXB0eSgpLCBcbiAgICAgICAgdGhpcy5kb2N1bWVudFN0YXRlID0gMiAvKiBIQVNfQ09NTUlUVEVEX01VVEFUSU9OUyAqLyAsIHRoaXM7XG4gICAgfVxuICAgIHNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IDIgLyogSEFTX0NPTU1JVFRFRF9NVVRBVElPTlMgKi8gLCB0aGlzO1xuICAgIH1cbiAgICBzZXRIYXNMb2NhbE11dGF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IDEgLyogSEFTX0xPQ0FMX01VVEFUSU9OUyAqLyAsIHRoaXM7XG4gICAgfVxuICAgIGdldCBoYXNMb2NhbE11dGF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIDEgLyogSEFTX0xPQ0FMX01VVEFUSU9OUyAqLyA9PT0gdGhpcy5kb2N1bWVudFN0YXRlO1xuICAgIH1cbiAgICBnZXQgaGFzQ29tbWl0dGVkTXV0YXRpb25zKCkge1xuICAgICAgICByZXR1cm4gMiAvKiBIQVNfQ09NTUlUVEVEX01VVEFUSU9OUyAqLyA9PT0gdGhpcy5kb2N1bWVudFN0YXRlO1xuICAgIH1cbiAgICBnZXQgaGFzUGVuZGluZ1dyaXRlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzTG9jYWxNdXRhdGlvbnMgfHwgdGhpcy5oYXNDb21taXR0ZWRNdXRhdGlvbnM7XG4gICAgfVxuICAgIGlzVmFsaWREb2N1bWVudCgpIHtcbiAgICAgICAgcmV0dXJuIDAgLyogSU5WQUxJRCAqLyAhPT0gdGhpcy5kb2N1bWVudFR5cGU7XG4gICAgfVxuICAgIGlzRm91bmREb2N1bWVudCgpIHtcbiAgICAgICAgcmV0dXJuIDEgLyogRk9VTkRfRE9DVU1FTlQgKi8gPT09IHRoaXMuZG9jdW1lbnRUeXBlO1xuICAgIH1cbiAgICBpc05vRG9jdW1lbnQoKSB7XG4gICAgICAgIHJldHVybiAyIC8qIE5PX0RPQ1VNRU5UICovID09PSB0aGlzLmRvY3VtZW50VHlwZTtcbiAgICB9XG4gICAgaXNVbmtub3duRG9jdW1lbnQoKSB7XG4gICAgICAgIHJldHVybiAzIC8qIFVOS05PV05fRE9DVU1FTlQgKi8gPT09IHRoaXMuZG9jdW1lbnRUeXBlO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBXdCAmJiB0aGlzLmtleS5pc0VxdWFsKHQua2V5KSAmJiB0aGlzLnZlcnNpb24uaXNFcXVhbCh0LnZlcnNpb24pICYmIHRoaXMuZG9jdW1lbnRUeXBlID09PSB0LmRvY3VtZW50VHlwZSAmJiB0aGlzLmRvY3VtZW50U3RhdGUgPT09IHQuZG9jdW1lbnRTdGF0ZSAmJiB0aGlzLmRhdGEuaXNFcXVhbCh0LmRhdGEpO1xuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBXdCh0aGlzLmtleSwgdGhpcy5kb2N1bWVudFR5cGUsIHRoaXMudmVyc2lvbiwgdGhpcy5kYXRhLmNsb25lKCksIHRoaXMuZG9jdW1lbnRTdGF0ZSk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gYERvY3VtZW50KCR7dGhpcy5rZXl9LCAke3RoaXMudmVyc2lvbn0sICR7SlNPTi5zdHJpbmdpZnkodGhpcy5kYXRhLnZhbHVlKX0sIHtkb2N1bWVudFR5cGU6ICR7dGhpcy5kb2N1bWVudFR5cGV9fSksIHtkb2N1bWVudFN0YXRlOiAke3RoaXMuZG9jdW1lbnRTdGF0ZX19KWA7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbXBhcmVzIHRoZSB2YWx1ZSBmb3IgZmllbGQgYGZpZWxkYCBpbiB0aGUgcHJvdmlkZWQgZG9jdW1lbnRzLiBUaHJvd3MgaWZcbiAqIHRoZSBmaWVsZCBkb2VzIG5vdCBleGlzdCBpbiBib3RoIGRvY3VtZW50cy5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIFZpc2libGUgZm9yIHRlc3RpbmdcbmNsYXNzIEd0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlID0gbnVsbCwgbiA9IFtdLCBzID0gW10sIGkgPSBudWxsLCByID0gbnVsbCwgbyA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5wYXRoID0gdCwgdGhpcy5jb2xsZWN0aW9uR3JvdXAgPSBlLCB0aGlzLm9yZGVyQnkgPSBuLCB0aGlzLmZpbHRlcnMgPSBzLCB0aGlzLmxpbWl0ID0gaSwgXG4gICAgICAgIHRoaXMuc3RhcnRBdCA9IHIsIHRoaXMuZW5kQXQgPSBvLCB0aGlzLlIgPSBudWxsO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbml0aWFsaXplcyBhIFRhcmdldCB3aXRoIGEgcGF0aCBhbmQgb3B0aW9uYWwgYWRkaXRpb25hbCBxdWVyeSBjb25zdHJhaW50cy5cbiAqIFBhdGggbXVzdCBjdXJyZW50bHkgYmUgZW1wdHkgaWYgdGhpcyBpcyBhIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcnkuXG4gKlxuICogTk9URTogeW91IHNob3VsZCBhbHdheXMgY29uc3RydWN0IGBUYXJnZXRgIGZyb20gYFF1ZXJ5LnRvVGFyZ2V0YCBpbnN0ZWFkIG9mXG4gKiB1c2luZyB0aGlzIGZhY3RvcnkgbWV0aG9kLCBiZWNhdXNlIGBRdWVyeWAgcHJvdmlkZXMgYW4gaW1wbGljaXQgYG9yZGVyQnlgXG4gKiBwcm9wZXJ0eS5cbiAqLyBmdW5jdGlvbiB6dCh0LCBlID0gbnVsbCwgbiA9IFtdLCBzID0gW10sIGkgPSBudWxsLCByID0gbnVsbCwgbyA9IG51bGwpIHtcbiAgICByZXR1cm4gbmV3IEd0KHQsIGUsIG4sIHMsIGksIHIsIG8pO1xufVxuXG5mdW5jdGlvbiBIdCh0KSB7XG4gICAgY29uc3QgZSA9IHEodCk7XG4gICAgaWYgKG51bGwgPT09IGUuUikge1xuICAgICAgICBsZXQgdCA9IGUucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICAgICAgbnVsbCAhPT0gZS5jb2xsZWN0aW9uR3JvdXAgJiYgKHQgKz0gXCJ8Y2c6XCIgKyBlLmNvbGxlY3Rpb25Hcm91cCksIHQgKz0gXCJ8ZjpcIiwgdCArPSBlLmZpbHRlcnMubWFwKCh0ID0+IHRlKHQpKSkuam9pbihcIixcIiksIFxuICAgICAgICB0ICs9IFwifG9iOlwiLCB0ICs9IGUub3JkZXJCeS5tYXAoKHQgPT4gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgLy8gVE9ETyhiLzI5MTgzMTY1KTogTWFrZSB0aGlzIGNvbGxpc2lvbiByb2J1c3QuXG4gICAgICAgICAgICByZXR1cm4gdC5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSArIHQuZGlyO1xuICAgICAgICB9KHQpKSkuam9pbihcIixcIiksIGJ0KGUubGltaXQpIHx8ICh0ICs9IFwifGw6XCIsIHQgKz0gZS5saW1pdCksIGUuc3RhcnRBdCAmJiAodCArPSBcInxsYjpcIiwgXG4gICAgICAgIHQgKz0gaGUoZS5zdGFydEF0KSksIGUuZW5kQXQgJiYgKHQgKz0gXCJ8dWI6XCIsIHQgKz0gaGUoZS5lbmRBdCkpLCBlLlIgPSB0O1xuICAgIH1cbiAgICByZXR1cm4gZS5SO1xufVxuXG5mdW5jdGlvbiBKdCh0KSB7XG4gICAgbGV0IGUgPSB0LnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgcmV0dXJuIG51bGwgIT09IHQuY29sbGVjdGlvbkdyb3VwICYmIChlICs9IFwiIGNvbGxlY3Rpb25Hcm91cD1cIiArIHQuY29sbGVjdGlvbkdyb3VwKSwgXG4gICAgdC5maWx0ZXJzLmxlbmd0aCA+IDAgJiYgKGUgKz0gYCwgZmlsdGVyczogWyR7dC5maWx0ZXJzLm1hcCgodCA9PiB7XG4gICAgICAgIHJldHVybiBgJHsoZSA9IHQpLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpfSAke2Uub3B9ICR7JHQoZS52YWx1ZSl9YDtcbiAgICAgICAgLyoqIFJldHVybnMgYSBkZWJ1ZyBkZXNjcmlwdGlvbiBmb3IgYGZpbHRlcmAuICovXG4gICAgICAgIHZhciBlO1xuICAgICAgICAvKiogRmlsdGVyIHRoYXQgbWF0Y2hlcyBvbiBrZXkgZmllbGRzIChpLmUuICdfX25hbWVfXycpLiAqLyAgICB9KSkuam9pbihcIiwgXCIpfV1gKSwgXG4gICAgYnQodC5saW1pdCkgfHwgKGUgKz0gXCIsIGxpbWl0OiBcIiArIHQubGltaXQpLCB0Lm9yZGVyQnkubGVuZ3RoID4gMCAmJiAoZSArPSBgLCBvcmRlckJ5OiBbJHt0Lm9yZGVyQnkubWFwKCh0ID0+IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIGAke3QuZmllbGQuY2Fub25pY2FsU3RyaW5nKCl9ICgke3QuZGlyfSlgO1xuICAgIH0odCkpKS5qb2luKFwiLCBcIil9XWApLCB0LnN0YXJ0QXQgJiYgKGUgKz0gXCIsIHN0YXJ0QXQ6IFwiICsgaGUodC5zdGFydEF0KSksIHQuZW5kQXQgJiYgKGUgKz0gXCIsIGVuZEF0OiBcIiArIGhlKHQuZW5kQXQpKSwgXG4gICAgYFRhcmdldCgke2V9KWA7XG59XG5cbmZ1bmN0aW9uIFl0KHQsIGUpIHtcbiAgICBpZiAodC5saW1pdCAhPT0gZS5saW1pdCkgcmV0dXJuICExO1xuICAgIGlmICh0Lm9yZGVyQnkubGVuZ3RoICE9PSBlLm9yZGVyQnkubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lm9yZGVyQnkubGVuZ3RoOyBuKyspIGlmICghZmUodC5vcmRlckJ5W25dLCBlLm9yZGVyQnlbbl0pKSByZXR1cm4gITE7XG4gICAgaWYgKHQuZmlsdGVycy5sZW5ndGggIT09IGUuZmlsdGVycy5sZW5ndGgpIHJldHVybiAhMTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHQuZmlsdGVycy5sZW5ndGg7IGkrKykgaWYgKG4gPSB0LmZpbHRlcnNbaV0sIHMgPSBlLmZpbHRlcnNbaV0sIFxuICAgIG4ub3AgIT09IHMub3AgfHwgIW4uZmllbGQuaXNFcXVhbChzLmZpZWxkKSB8fCAhQ3Qobi52YWx1ZSwgcy52YWx1ZSkpIHJldHVybiAhMTtcbiAgICB2YXIgbiwgcztcbiAgICByZXR1cm4gdC5jb2xsZWN0aW9uR3JvdXAgPT09IGUuY29sbGVjdGlvbkdyb3VwICYmICghIXQucGF0aC5pc0VxdWFsKGUucGF0aCkgJiYgKCEhd2UodC5zdGFydEF0LCBlLnN0YXJ0QXQpICYmIHdlKHQuZW5kQXQsIGUuZW5kQXQpKSk7XG59XG5cbmZ1bmN0aW9uIFh0KHQpIHtcbiAgICByZXR1cm4gU3QuaXNEb2N1bWVudEtleSh0LnBhdGgpICYmIG51bGwgPT09IHQuY29sbGVjdGlvbkdyb3VwICYmIDAgPT09IHQuZmlsdGVycy5sZW5ndGg7XG59XG5cbmNsYXNzIFp0IGV4dGVuZHMgY2xhc3Mge30ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5maWVsZCA9IHQsIHRoaXMub3AgPSBlLCB0aGlzLnZhbHVlID0gbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZpbHRlciBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgYXJndW1lbnRzLlxuICAgICAqLyAgICBzdGF0aWMgY3JlYXRlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHQuaXNLZXlGaWVsZCgpID8gXCJpblwiIC8qIElOICovID09PSBlIHx8IFwibm90LWluXCIgLyogTk9UX0lOICovID09PSBlID8gdGhpcy5QKHQsIGUsIG4pIDogbmV3IGVlKHQsIGUsIG4pIDogXCJhcnJheS1jb250YWluc1wiIC8qIEFSUkFZX0NPTlRBSU5TICovID09PSBlID8gbmV3IHJlKHQsIG4pIDogXCJpblwiIC8qIElOICovID09PSBlID8gbmV3IG9lKHQsIG4pIDogXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gPT09IGUgPyBuZXcgYWUodCwgbikgOiBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyA9PT0gZSA/IG5ldyBjZSh0LCBuKSA6IG5ldyBadCh0LCBlLCBuKTtcbiAgICB9XG4gICAgc3RhdGljIFAodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gXCJpblwiIC8qIElOICovID09PSBlID8gbmV3IG5lKHQsIG4pIDogbmV3IHNlKHQsIG4pO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgLy8gVHlwZXMgZG8gbm90IGhhdmUgdG8gbWF0Y2ggaW4gTk9UX0VRVUFMIGZpbHRlcnMuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gPT09IHRoaXMub3AgPyBudWxsICE9PSBlICYmIHRoaXMudihrdChlLCB0aGlzLnZhbHVlKSkgOiBudWxsICE9PSBlICYmIER0KHRoaXMudmFsdWUpID09PSBEdChlKSAmJiB0aGlzLnYoa3QoZSwgdGhpcy52YWx1ZSkpO1xuICAgICAgICAvLyBPbmx5IGNvbXBhcmUgdHlwZXMgd2l0aCBtYXRjaGluZyBiYWNrZW5kIG9yZGVyIChzdWNoIGFzIGRvdWJsZSBhbmQgaW50KS5cbiAgICAgICAgfVxuICAgIHYodCkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMub3ApIHtcbiAgICAgICAgICBjYXNlIFwiPFwiIC8qIExFU1NfVEhBTiAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdCA8IDA7XG5cbiAgICAgICAgICBjYXNlIFwiPD1cIiAvKiBMRVNTX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHQgPD0gMDtcblxuICAgICAgICAgIGNhc2UgXCI9PVwiIC8qIEVRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiAwID09PSB0O1xuXG4gICAgICAgICAgY2FzZSBcIiE9XCIgLyogTk9UX0VRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiAwICE9PSB0O1xuXG4gICAgICAgICAgY2FzZSBcIj5cIiAvKiBHUkVBVEVSX1RIQU4gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHQgPiAwO1xuXG4gICAgICAgICAgY2FzZSBcIj49XCIgLyogR1JFQVRFUl9USEFOX09SX0VRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiB0ID49IDA7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIEwoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBWKCkge1xuICAgICAgICByZXR1cm4gWyBcIjxcIiAvKiBMRVNTX1RIQU4gKi8gLCBcIjw9XCIgLyogTEVTU19USEFOX09SX0VRVUFMICovICwgXCI+XCIgLyogR1JFQVRFUl9USEFOICovICwgXCI+PVwiIC8qIEdSRUFURVJfVEhBTl9PUl9FUVVBTCAqLyAsIFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gLCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyBdLmluZGV4T2YodGhpcy5vcCkgPj0gMDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHRlKHQpIHtcbiAgICAvLyBUT0RPKGIvMjkxODMxNjUpOiBUZWNobmljYWxseSwgdGhpcyB3b24ndCBiZSB1bmlxdWUgaWYgdHdvIHZhbHVlcyBoYXZlXG4gICAgLy8gdGhlIHNhbWUgZGVzY3JpcHRpb24sIHN1Y2ggYXMgdGhlIGludCAzIGFuZCB0aGUgc3RyaW5nIFwiM1wiLiBTbyB3ZSBzaG91bGRcbiAgICAvLyBhZGQgdGhlIHR5cGVzIGluIGhlcmUgc29tZWhvdywgdG9vLlxuICAgIHJldHVybiB0LmZpZWxkLmNhbm9uaWNhbFN0cmluZygpICsgdC5vcC50b1N0cmluZygpICsgJHQodC52YWx1ZSk7XG59XG5cbmNsYXNzIGVlIGV4dGVuZHMgWnQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIodCwgZSwgbiksIHRoaXMua2V5ID0gU3QuZnJvbU5hbWUobi5yZWZlcmVuY2VWYWx1ZSk7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICBjb25zdCBlID0gU3QuY29tcGFyYXRvcih0LmtleSwgdGhpcy5rZXkpO1xuICAgICAgICByZXR1cm4gdGhpcy52KGUpO1xuICAgIH1cbn1cblxuLyoqIEZpbHRlciB0aGF0IG1hdGNoZXMgb24ga2V5IGZpZWxkcyB3aXRoaW4gYW4gYXJyYXkuICovIGNsYXNzIG5lIGV4dGVuZHMgWnQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgXCJpblwiIC8qIElOICovICwgZSksIHRoaXMua2V5cyA9IGllKFwiaW5cIiAvKiBJTiAqLyAsIGUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua2V5cy5zb21lKChlID0+IGUuaXNFcXVhbCh0LmtleSkpKTtcbiAgICB9XG59XG5cbi8qKiBGaWx0ZXIgdGhhdCBtYXRjaGVzIG9uIGtleSBmaWVsZHMgbm90IHByZXNlbnQgd2l0aGluIGFuIGFycmF5LiAqLyBjbGFzcyBzZSBleHRlbmRzIFp0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIFwibm90LWluXCIgLyogTk9UX0lOICovICwgZSksIHRoaXMua2V5cyA9IGllKFwibm90LWluXCIgLyogTk9UX0lOICovICwgZSk7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICByZXR1cm4gIXRoaXMua2V5cy5zb21lKChlID0+IGUuaXNFcXVhbCh0LmtleSkpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGllKHQsIGUpIHtcbiAgICB2YXIgbjtcbiAgICByZXR1cm4gKChudWxsID09PSAobiA9IGUuYXJyYXlWYWx1ZSkgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi52YWx1ZXMpIHx8IFtdKS5tYXAoKHQgPT4gU3QuZnJvbU5hbWUodC5yZWZlcmVuY2VWYWx1ZSkpKTtcbn1cblxuLyoqIEEgRmlsdGVyIHRoYXQgaW1wbGVtZW50cyB0aGUgYXJyYXktY29udGFpbnMgb3BlcmF0b3IuICovIGNsYXNzIHJlIGV4dGVuZHMgWnQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgXCJhcnJheS1jb250YWluc1wiIC8qIEFSUkFZX0NPTlRBSU5TICovICwgZSk7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICBjb25zdCBlID0gdC5kYXRhLmZpZWxkKHRoaXMuZmllbGQpO1xuICAgICAgICByZXR1cm4gTHQoZSkgJiYgTnQoZS5hcnJheVZhbHVlLCB0aGlzLnZhbHVlKTtcbiAgICB9XG59XG5cbi8qKiBBIEZpbHRlciB0aGF0IGltcGxlbWVudHMgdGhlIElOIG9wZXJhdG9yLiAqLyBjbGFzcyBvZSBleHRlbmRzIFp0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIFwiaW5cIiAvKiBJTiAqLyAsIGUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IGUgJiYgTnQodGhpcy52YWx1ZS5hcnJheVZhbHVlLCBlKTtcbiAgICB9XG59XG5cbi8qKiBBIEZpbHRlciB0aGF0IGltcGxlbWVudHMgdGhlIG5vdC1pbiBvcGVyYXRvci4gKi8gY2xhc3MgYWUgZXh0ZW5kcyBadCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyAsIGUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgaWYgKE50KHRoaXMudmFsdWUuYXJyYXlWYWx1ZSwge1xuICAgICAgICAgICAgbnVsbFZhbHVlOiBcIk5VTExfVkFMVUVcIlxuICAgICAgICB9KSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBlID0gdC5kYXRhLmZpZWxkKHRoaXMuZmllbGQpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gZSAmJiAhTnQodGhpcy52YWx1ZS5hcnJheVZhbHVlLCBlKTtcbiAgICB9XG59XG5cbi8qKiBBIEZpbHRlciB0aGF0IGltcGxlbWVudHMgdGhlIGFycmF5LWNvbnRhaW5zLWFueSBvcGVyYXRvci4gKi8gY2xhc3MgY2UgZXh0ZW5kcyBadCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyAsIGUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuICEoIUx0KGUpIHx8ICFlLmFycmF5VmFsdWUudmFsdWVzKSAmJiBlLmFycmF5VmFsdWUudmFsdWVzLnNvbWUoKHQgPT4gTnQodGhpcy52YWx1ZS5hcnJheVZhbHVlLCB0KSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgYm91bmQgb2YgYSBxdWVyeS5cbiAqXG4gKiBUaGUgYm91bmQgaXMgc3BlY2lmaWVkIHdpdGggdGhlIGdpdmVuIGNvbXBvbmVudHMgcmVwcmVzZW50aW5nIGEgcG9zaXRpb24gYW5kXG4gKiB3aGV0aGVyIGl0J3MganVzdCBiZWZvcmUgb3IganVzdCBhZnRlciB0aGUgcG9zaXRpb24gKHJlbGF0aXZlIHRvIHdoYXRldmVyIHRoZVxuICogcXVlcnkgb3JkZXIgaXMpLlxuICpcbiAqIFRoZSBwb3NpdGlvbiByZXByZXNlbnRzIGEgbG9naWNhbCBpbmRleCBwb3NpdGlvbiBmb3IgYSBxdWVyeS4gSXQncyBhIHByZWZpeFxuICogb2YgdmFsdWVzIGZvciB0aGUgKHBvdGVudGlhbGx5IGltcGxpY2l0KSBvcmRlciBieSBjbGF1c2VzIG9mIGEgcXVlcnkuXG4gKlxuICogQm91bmQgcHJvdmlkZXMgYSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgd2hldGhlciBhIGRvY3VtZW50IGNvbWVzIGJlZm9yZSBvclxuICogYWZ0ZXIgYSBib3VuZC4gVGhpcyBpcyBpbmZsdWVuY2VkIGJ5IHdoZXRoZXIgdGhlIHBvc2l0aW9uIGlzIGp1c3QgYmVmb3JlIG9yXG4gKiBqdXN0IGFmdGVyIHRoZSBwcm92aWRlZCB2YWx1ZXMuXG4gKi8gY2xhc3MgdWUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHQsIHRoaXMuYmVmb3JlID0gZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGhlKHQpIHtcbiAgICAvLyBUT0RPKGIvMjkxODMxNjUpOiBNYWtlIHRoaXMgY29sbGlzaW9uIHJvYnVzdC5cbiAgICByZXR1cm4gYCR7dC5iZWZvcmUgPyBcImJcIiA6IFwiYVwifToke3QucG9zaXRpb24ubWFwKCh0ID0+ICR0KHQpKSkuam9pbihcIixcIil9YDtcbn1cblxuLyoqXG4gKiBBbiBvcmRlcmluZyBvbiBhIGZpZWxkLCBpbiBzb21lIERpcmVjdGlvbi4gRGlyZWN0aW9uIGRlZmF1bHRzIHRvIEFTQ0VORElORy5cbiAqLyBjbGFzcyBsZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSA9IFwiYXNjXCIgLyogQVNDRU5ESU5HICovKSB7XG4gICAgICAgIHRoaXMuZmllbGQgPSB0LCB0aGlzLmRpciA9IGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBmZSh0LCBlKSB7XG4gICAgcmV0dXJuIHQuZGlyID09PSBlLmRpciAmJiB0LmZpZWxkLmlzRXF1YWwoZS5maWVsZCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGEgZG9jdW1lbnQgc29ydHMgYmVmb3JlIGEgYm91bmQgdXNpbmcgdGhlIHByb3ZpZGVkIHNvcnRcbiAqIG9yZGVyLlxuICovIGZ1bmN0aW9uIGRlKHQsIGUsIG4pIHtcbiAgICBsZXQgcyA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0LnBvc2l0aW9uLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHIgPSBlW2ldLCBvID0gdC5wb3NpdGlvbltpXTtcbiAgICAgICAgaWYgKHIuZmllbGQuaXNLZXlGaWVsZCgpKSBzID0gU3QuY29tcGFyYXRvcihTdC5mcm9tTmFtZShvLnJlZmVyZW5jZVZhbHVlKSwgbi5rZXkpOyBlbHNlIHtcbiAgICAgICAgICAgIHMgPSBrdChvLCBuLmRhdGEuZmllbGQoci5maWVsZCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChcImRlc2NcIiAvKiBERVNDRU5ESU5HICovID09PSByLmRpciAmJiAocyAqPSAtMSksIDAgIT09IHMpIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gdC5iZWZvcmUgPyBzIDw9IDAgOiBzIDwgMDtcbn1cblxuZnVuY3Rpb24gd2UodCwgZSkge1xuICAgIGlmIChudWxsID09PSB0KSByZXR1cm4gbnVsbCA9PT0gZTtcbiAgICBpZiAobnVsbCA9PT0gZSkgcmV0dXJuICExO1xuICAgIGlmICh0LmJlZm9yZSAhPT0gZS5iZWZvcmUgfHwgdC5wb3NpdGlvbi5sZW5ndGggIT09IGUucG9zaXRpb24ubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0LnBvc2l0aW9uLmxlbmd0aDsgbisrKSB7XG4gICAgICAgIGlmICghQ3QodC5wb3NpdGlvbltuXSwgZS5wb3NpdGlvbltuXSkpIHJldHVybiAhMTtcbiAgICB9XG4gICAgcmV0dXJuICEwO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBRdWVyeSBlbmNhcHN1bGF0ZXMgYWxsIHRoZSBxdWVyeSBhdHRyaWJ1dGVzIHdlIHN1cHBvcnQgaW4gdGhlIFNESy4gSXQgY2FuXG4gKiBiZSBydW4gYWdhaW5zdCB0aGUgTG9jYWxTdG9yZSwgYXMgd2VsbCBhcyBiZSBjb252ZXJ0ZWQgdG8gYSBgVGFyZ2V0YCB0b1xuICogcXVlcnkgdGhlIFJlbW90ZVN0b3JlIHJlc3VsdHMuXG4gKlxuICogVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAqLyBjbGFzcyBfZSB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgYSBRdWVyeSB3aXRoIGEgcGF0aCBhbmQgb3B0aW9uYWwgYWRkaXRpb25hbCBxdWVyeSBjb25zdHJhaW50cy5cbiAgICAgKiBQYXRoIG11c3QgY3VycmVudGx5IGJlIGVtcHR5IGlmIHRoaXMgaXMgYSBjb2xsZWN0aW9uIGdyb3VwIHF1ZXJ5LlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUgPSBudWxsLCBuID0gW10sIHMgPSBbXSwgaSA9IG51bGwsIHIgPSBcIkZcIiAvKiBGaXJzdCAqLyAsIG8gPSBudWxsLCBhID0gbnVsbCkge1xuICAgICAgICB0aGlzLnBhdGggPSB0LCB0aGlzLmNvbGxlY3Rpb25Hcm91cCA9IGUsIHRoaXMuZXhwbGljaXRPcmRlckJ5ID0gbiwgdGhpcy5maWx0ZXJzID0gcywgXG4gICAgICAgIHRoaXMubGltaXQgPSBpLCB0aGlzLmxpbWl0VHlwZSA9IHIsIHRoaXMuc3RhcnRBdCA9IG8sIHRoaXMuZW5kQXQgPSBhLCB0aGlzLlMgPSBudWxsLCBcbiAgICAgICAgLy8gVGhlIGNvcnJlc3BvbmRpbmcgYFRhcmdldGAgb2YgdGhpcyBgUXVlcnlgIGluc3RhbmNlLlxuICAgICAgICB0aGlzLkQgPSBudWxsLCB0aGlzLnN0YXJ0QXQsIHRoaXMuZW5kQXQ7XG4gICAgfVxufVxuXG4vKiogQ3JlYXRlcyBhIG5ldyBRdWVyeSBpbnN0YW5jZSB3aXRoIHRoZSBvcHRpb25zIHByb3ZpZGVkLiAqLyBmdW5jdGlvbiBtZSh0LCBlLCBuLCBzLCBpLCByLCBvLCBhKSB7XG4gICAgcmV0dXJuIG5ldyBfZSh0LCBlLCBuLCBzLCBpLCByLCBvLCBhKTtcbn1cblxuLyoqIENyZWF0ZXMgYSBuZXcgUXVlcnkgZm9yIGEgcXVlcnkgdGhhdCBtYXRjaGVzIGFsbCBkb2N1bWVudHMgYXQgYHBhdGhgICovIGZ1bmN0aW9uIGdlKHQpIHtcbiAgICByZXR1cm4gbmV3IF9lKHQpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBjb252ZXJ0IGEgY29sbGVjdGlvbiBncm91cCBxdWVyeSBpbnRvIGEgY29sbGVjdGlvbiBxdWVyeSBhdCBhXG4gKiBzcGVjaWZpYyBwYXRoLiBUaGlzIGlzIHVzZWQgd2hlbiBleGVjdXRpbmcgY29sbGVjdGlvbiBncm91cCBxdWVyaWVzLCBzaW5jZVxuICogd2UgaGF2ZSB0byBzcGxpdCB0aGUgcXVlcnkgaW50byBhIHNldCBvZiBjb2xsZWN0aW9uIHF1ZXJpZXMgYXQgbXVsdGlwbGVcbiAqIHBhdGhzLlxuICovIGZ1bmN0aW9uIHllKHQpIHtcbiAgICByZXR1cm4gIWJ0KHQubGltaXQpICYmIFwiRlwiIC8qIEZpcnN0ICovID09PSB0LmxpbWl0VHlwZTtcbn1cblxuZnVuY3Rpb24gcGUodCkge1xuICAgIHJldHVybiAhYnQodC5saW1pdCkgJiYgXCJMXCIgLyogTGFzdCAqLyA9PT0gdC5saW1pdFR5cGU7XG59XG5cbmZ1bmN0aW9uIFRlKHQpIHtcbiAgICByZXR1cm4gdC5leHBsaWNpdE9yZGVyQnkubGVuZ3RoID4gMCA/IHQuZXhwbGljaXRPcmRlckJ5WzBdLmZpZWxkIDogbnVsbDtcbn1cblxuZnVuY3Rpb24gRWUodCkge1xuICAgIGZvciAoY29uc3QgZSBvZiB0LmZpbHRlcnMpIGlmIChlLlYoKSkgcmV0dXJuIGUuZmllbGQ7XG4gICAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGFueSBvZiB0aGUgcHJvdmlkZWQgT3BlcmF0b3JzIGFyZSBpbmNsdWRlZCBpbiB0aGUgcXVlcnkgYW5kXG4gKiByZXR1cm5zIHRoZSBmaXJzdCBvbmUgdGhhdCBpcywgb3IgbnVsbCBpZiBub25lIGFyZS5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHF1ZXJ5IG1hdGNoZXMgYSBjb2xsZWN0aW9uIGdyb3VwIHJhdGhlciB0aGFuIGEgc3BlY2lmaWNcbiAqIGNvbGxlY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIEllKHQpIHtcbiAgICByZXR1cm4gbnVsbCAhPT0gdC5jb2xsZWN0aW9uR3JvdXA7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgaW1wbGljaXQgb3JkZXIgYnkgY29uc3RyYWludCB0aGF0IGlzIHVzZWQgdG8gZXhlY3V0ZSB0aGUgUXVlcnksXG4gKiB3aGljaCBjYW4gYmUgZGlmZmVyZW50IGZyb20gdGhlIG9yZGVyIGJ5IGNvbnN0cmFpbnRzIHRoZSB1c2VyIHByb3ZpZGVkIChlLmcuXG4gKiB0aGUgU0RLIGFuZCBiYWNrZW5kIGFsd2F5cyBvcmRlcnMgYnkgYF9fbmFtZV9fYCkuXG4gKi8gZnVuY3Rpb24gQWUodCkge1xuICAgIGNvbnN0IGUgPSBxKHQpO1xuICAgIGlmIChudWxsID09PSBlLlMpIHtcbiAgICAgICAgZS5TID0gW107XG4gICAgICAgIGNvbnN0IHQgPSBFZShlKSwgbiA9IFRlKGUpO1xuICAgICAgICBpZiAobnVsbCAhPT0gdCAmJiBudWxsID09PSBuKSBcbiAgICAgICAgLy8gSW4gb3JkZXIgdG8gaW1wbGljaXRseSBhZGQga2V5IG9yZGVyaW5nLCB3ZSBtdXN0IGFsc28gYWRkIHRoZVxuICAgICAgICAvLyBpbmVxdWFsaXR5IGZpbHRlciBmaWVsZCBmb3IgaXQgdG8gYmUgYSB2YWxpZCBxdWVyeS5cbiAgICAgICAgLy8gTm90ZSB0aGF0IHRoZSBkZWZhdWx0IGluZXF1YWxpdHkgZmllbGQgYW5kIGtleSBvcmRlcmluZyBpcyBhc2NlbmRpbmcuXG4gICAgICAgIHQuaXNLZXlGaWVsZCgpIHx8IGUuUy5wdXNoKG5ldyBsZSh0KSksIGUuUy5wdXNoKG5ldyBsZShfdC5rZXlGaWVsZCgpLCBcImFzY1wiIC8qIEFTQ0VORElORyAqLykpOyBlbHNlIHtcbiAgICAgICAgICAgIGxldCB0ID0gITE7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgZS5leHBsaWNpdE9yZGVyQnkpIGUuUy5wdXNoKG4pLCBuLmZpZWxkLmlzS2V5RmllbGQoKSAmJiAodCA9ICEwKTtcbiAgICAgICAgICAgIGlmICghdCkge1xuICAgICAgICAgICAgICAgIC8vIFRoZSBvcmRlciBvZiB0aGUgaW1wbGljaXQga2V5IG9yZGVyaW5nIGFsd2F5cyBtYXRjaGVzIHRoZSBsYXN0XG4gICAgICAgICAgICAgICAgLy8gZXhwbGljaXQgb3JkZXIgYnlcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZS5leHBsaWNpdE9yZGVyQnkubGVuZ3RoID4gMCA/IGUuZXhwbGljaXRPcmRlckJ5W2UuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCAtIDFdLmRpciA6IFwiYXNjXCIgLyogQVNDRU5ESU5HICovO1xuICAgICAgICAgICAgICAgIGUuUy5wdXNoKG5ldyBsZShfdC5rZXlGaWVsZCgpLCB0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGUuUztcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyB0aGlzIGBRdWVyeWAgaW5zdGFuY2UgdG8gaXQncyBjb3JyZXNwb25kaW5nIGBUYXJnZXRgIHJlcHJlc2VudGF0aW9uLlxuICovIGZ1bmN0aW9uIFJlKHQpIHtcbiAgICBjb25zdCBlID0gcSh0KTtcbiAgICBpZiAoIWUuRCkgaWYgKFwiRlwiIC8qIEZpcnN0ICovID09PSBlLmxpbWl0VHlwZSkgZS5EID0genQoZS5wYXRoLCBlLmNvbGxlY3Rpb25Hcm91cCwgQWUoZSksIGUuZmlsdGVycywgZS5saW1pdCwgZS5zdGFydEF0LCBlLmVuZEF0KTsgZWxzZSB7XG4gICAgICAgIC8vIEZsaXAgdGhlIG9yZGVyQnkgZGlyZWN0aW9ucyBzaW5jZSB3ZSB3YW50IHRoZSBsYXN0IHJlc3VsdHNcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgQWUoZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBcImRlc2NcIiAvKiBERVNDRU5ESU5HICovID09PSBuLmRpciA/IFwiYXNjXCIgLyogQVNDRU5ESU5HICovIDogXCJkZXNjXCIgLyogREVTQ0VORElORyAqLztcbiAgICAgICAgICAgIHQucHVzaChuZXcgbGUobi5maWVsZCwgZSkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdlIG5lZWQgdG8gc3dhcCB0aGUgY3Vyc29ycyB0byBtYXRjaCB0aGUgbm93LWZsaXBwZWQgcXVlcnkgb3JkZXJpbmcuXG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IGUuZW5kQXQgPyBuZXcgdWUoZS5lbmRBdC5wb3NpdGlvbiwgIWUuZW5kQXQuYmVmb3JlKSA6IG51bGwsIHMgPSBlLnN0YXJ0QXQgPyBuZXcgdWUoZS5zdGFydEF0LnBvc2l0aW9uLCAhZS5zdGFydEF0LmJlZm9yZSkgOiBudWxsO1xuICAgICAgICAvLyBOb3cgcmV0dXJuIGFzIGEgTGltaXRUeXBlLkZpcnN0IHF1ZXJ5LlxuICAgICAgICBlLkQgPSB6dChlLnBhdGgsIGUuY29sbGVjdGlvbkdyb3VwLCB0LCBlLmZpbHRlcnMsIGUubGltaXQsIG4sIHMpO1xuICAgIH1cbiAgICByZXR1cm4gZS5EO1xufVxuXG5mdW5jdGlvbiBQZSh0LCBlLCBuKSB7XG4gICAgcmV0dXJuIG5ldyBfZSh0LnBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCB0LmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCB0LmZpbHRlcnMuc2xpY2UoKSwgZSwgbiwgdC5zdGFydEF0LCB0LmVuZEF0KTtcbn1cblxuZnVuY3Rpb24gYmUodCwgZSkge1xuICAgIHJldHVybiBZdChSZSh0KSwgUmUoZSkpICYmIHQubGltaXRUeXBlID09PSBlLmxpbWl0VHlwZTtcbn1cblxuLy8gVE9ETyhiLzI5MTgzMTY1KTogVGhpcyBpcyB1c2VkIHRvIGdldCBhIHVuaXF1ZSBzdHJpbmcgZnJvbSBhIHF1ZXJ5IHRvLCBmb3Jcbi8vIGV4YW1wbGUsIHVzZSBhcyBhIGRpY3Rpb25hcnkga2V5LCBidXQgdGhlIGltcGxlbWVudGF0aW9uIGlzIHN1YmplY3QgdG9cbi8vIGNvbGxpc2lvbnMuIE1ha2UgaXQgY29sbGlzaW9uLWZyZWUuXG5mdW5jdGlvbiB2ZSh0KSB7XG4gICAgcmV0dXJuIGAke0h0KFJlKHQpKX18bHQ6JHt0LmxpbWl0VHlwZX1gO1xufVxuXG5mdW5jdGlvbiBWZSh0KSB7XG4gICAgcmV0dXJuIGBRdWVyeSh0YXJnZXQ9JHtKdChSZSh0KSl9OyBsaW1pdFR5cGU9JHt0LmxpbWl0VHlwZX0pYDtcbn1cblxuLyoqIFJldHVybnMgd2hldGhlciBgZG9jYCBtYXRjaGVzIHRoZSBjb25zdHJhaW50cyBvZiBgcXVlcnlgLiAqLyBmdW5jdGlvbiBTZSh0LCBlKSB7XG4gICAgcmV0dXJuIGUuaXNGb3VuZERvY3VtZW50KCkgJiYgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZS5rZXkucGF0aDtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHQuY29sbGVjdGlvbkdyb3VwID8gZS5rZXkuaGFzQ29sbGVjdGlvbklkKHQuY29sbGVjdGlvbkdyb3VwKSAmJiB0LnBhdGguaXNQcmVmaXhPZihuKSA6IFN0LmlzRG9jdW1lbnRLZXkodC5wYXRoKSA/IHQucGF0aC5pc0VxdWFsKG4pIDogdC5wYXRoLmlzSW1tZWRpYXRlUGFyZW50T2Yobik7XG4gICAgfVxuICAgIC8qKlxuICogQSBkb2N1bWVudCBtdXN0IGhhdmUgYSB2YWx1ZSBmb3IgZXZlcnkgb3JkZXJpbmcgY2xhdXNlIGluIG9yZGVyIHRvIHNob3cgdXBcbiAqIGluIHRoZSByZXN1bHRzLlxuICovICh0LCBlKSAmJiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiB0LmV4cGxpY2l0T3JkZXJCeSkgXG4gICAgICAgIC8vIG9yZGVyIGJ5IGtleSBhbHdheXMgbWF0Y2hlc1xuICAgICAgICBpZiAoIW4uZmllbGQuaXNLZXlGaWVsZCgpICYmIG51bGwgPT09IGUuZGF0YS5maWVsZChuLmZpZWxkKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfSh0LCBlKSAmJiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiB0LmZpbHRlcnMpIGlmICghbi5tYXRjaGVzKGUpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgLyoqIE1ha2VzIHN1cmUgYSBkb2N1bWVudCBpcyB3aXRoaW4gdGhlIGJvdW5kcywgaWYgcHJvdmlkZWQuICovICh0LCBlKSAmJiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGlmICh0LnN0YXJ0QXQgJiYgIWRlKHQuc3RhcnRBdCwgQWUodCksIGUpKSByZXR1cm4gITE7XG4gICAgICAgIGlmICh0LmVuZEF0ICYmIGRlKHQuZW5kQXQsIEFlKHQpLCBlKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIC8qKlxuICogUmV0dXJucyBhIG5ldyBjb21wYXJhdG9yIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gY29tcGFyZSB0d28gZG9jdW1lbnRzXG4gKiBiYXNlZCBvbiB0aGUgUXVlcnkncyBvcmRlcmluZyBjb25zdHJhaW50LlxuICovICh0LCBlKTtcbn1cblxuZnVuY3Rpb24gRGUodCkge1xuICAgIHJldHVybiAoZSwgbikgPT4ge1xuICAgICAgICBsZXQgcyA9ICExO1xuICAgICAgICBmb3IgKGNvbnN0IGkgb2YgQWUodCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBDZShpLCBlLCBuKTtcbiAgICAgICAgICAgIGlmICgwICE9PSB0KSByZXR1cm4gdDtcbiAgICAgICAgICAgIHMgPSBzIHx8IGkuZmllbGQuaXNLZXlGaWVsZCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIENlKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gdC5maWVsZC5pc0tleUZpZWxkKCkgPyBTdC5jb21wYXJhdG9yKGUua2V5LCBuLmtleSkgOiBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBlLmRhdGEuZmllbGQodCksIGkgPSBuLmRhdGEuZmllbGQodCk7XG4gICAgICAgIHJldHVybiBudWxsICE9PSBzICYmIG51bGwgIT09IGkgPyBrdChzLCBpKSA6IEwoKTtcbiAgICB9KHQuZmllbGQsIGUsIG4pO1xuICAgIHN3aXRjaCAodC5kaXIpIHtcbiAgICAgIGNhc2UgXCJhc2NcIiAvKiBBU0NFTkRJTkcgKi8gOlxuICAgICAgICByZXR1cm4gcztcblxuICAgICAgY2FzZSBcImRlc2NcIiAvKiBERVNDRU5ESU5HICovIDpcbiAgICAgICAgcmV0dXJuIC0xICogcztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIEwoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJldHVybnMgYW4gRG91YmxlVmFsdWUgZm9yIGB2YWx1ZWAgdGhhdCBpcyBlbmNvZGVkIGJhc2VkIHRoZSBzZXJpYWxpemVyJ3NcbiAqIGB1c2VQcm90bzNKc29uYCBzZXR0aW5nLlxuICovIGZ1bmN0aW9uIE5lKHQsIGUpIHtcbiAgICBpZiAodC5DKSB7XG4gICAgICAgIGlmIChpc05hTihlKSkgcmV0dXJuIHtcbiAgICAgICAgICAgIGRvdWJsZVZhbHVlOiBcIk5hTlwiXG4gICAgICAgIH07XG4gICAgICAgIGlmIChlID09PSAxIC8gMCkgcmV0dXJuIHtcbiAgICAgICAgICAgIGRvdWJsZVZhbHVlOiBcIkluZmluaXR5XCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGUgPT09IC0xIC8gMCkgcmV0dXJuIHtcbiAgICAgICAgICAgIGRvdWJsZVZhbHVlOiBcIi1JbmZpbml0eVwiXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGRvdWJsZVZhbHVlOiB2dChlKSA/IFwiLTBcIiA6IGVcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYW4gSW50ZWdlclZhbHVlIGZvciBgdmFsdWVgLlxuICovIGZ1bmN0aW9uIGtlKHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBpbnRlZ2VyVmFsdWU6IFwiXCIgKyB0XG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGEgbnVtYmVyIHRoYXQncyBhcHByb3ByaWF0ZSB0byBwdXQgaW50byBhIHByb3RvLlxuICogVGhlIHJldHVybiB2YWx1ZSBpcyBhbiBJbnRlZ2VyVmFsdWUgaWYgaXQgY2FuIHNhZmVseSByZXByZXNlbnQgdGhlIHZhbHVlLFxuICogb3RoZXJ3aXNlIGEgRG91YmxlVmFsdWUgaXMgcmV0dXJuZWQuXG4gKi8gZnVuY3Rpb24geGUodCwgZSkge1xuICAgIHJldHVybiBWdChlKSA/IGtlKGUpIDogTmUodCwgZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogVXNlZCB0byByZXByZXNlbnQgYSBmaWVsZCB0cmFuc2Zvcm0gb24gYSBtdXRhdGlvbi4gKi8gY2xhc3MgJGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCB0aGUgc3RydWN0dXJhbCB0eXBlIG9mIGBUcmFuc2Zvcm1PcGVyYXRpb25gIGlzIHVuaXF1ZS5cbiAgICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvNTQ1MVxuICAgICAgICB0aGlzLl8gPSB2b2lkIDA7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbXB1dGVzIHRoZSBsb2NhbCB0cmFuc2Zvcm0gcmVzdWx0IGFnYWluc3QgdGhlIHByb3ZpZGVkIGBwcmV2aW91c1ZhbHVlYCxcbiAqIG9wdGlvbmFsbHkgdXNpbmcgdGhlIHByb3ZpZGVkIGxvY2FsV3JpdGVUaW1lLlxuICovIGZ1bmN0aW9uIEZlKHQsIGUsIG4pIHtcbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIExlID8gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0ge1xuICAgICAgICAgICAgZmllbGRzOiB7XG4gICAgICAgICAgICAgICAgX190eXBlX186IHtcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nVmFsdWU6IFwic2VydmVyX3RpbWVzdGFtcFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBfX2xvY2FsX3dyaXRlX3RpbWVfXzoge1xuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXBWYWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kczogdC5zZWNvbmRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFub3M6IHQubmFub3NlY29uZHNcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGUgJiYgKG4uZmllbGRzLl9fcHJldmlvdXNfdmFsdWVfXyA9IGUpLCB7XG4gICAgICAgICAgICBtYXBWYWx1ZTogblxuICAgICAgICB9O1xuICAgIH0obiwgZSkgOiB0IGluc3RhbmNlb2YgQmUgPyBVZSh0LCBlKSA6IHQgaW5zdGFuY2VvZiBxZSA/IEtlKHQsIGUpIDogZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IFNpbmNlIEphdmFTY3JpcHQncyBpbnRlZ2VyIGFyaXRobWV0aWMgaXMgbGltaXRlZCB0byA1MyBiaXRcbiAgICAgICAgLy8gcHJlY2lzaW9uIGFuZCByZXNvbHZlcyBvdmVyZmxvd3MgYnkgcmVkdWNpbmcgcHJlY2lzaW9uLCB3ZSBkbyBub3RcbiAgICAgICAgLy8gbWFudWFsbHkgY2FwIG92ZXJmbG93cyBhdCAyXjYzLlxuICAgICAgICBjb25zdCBuID0gTWUodCwgZSksIHMgPSBRZShuKSArIFFlKHQuTik7XG4gICAgICAgIHJldHVybiBNdChuKSAmJiBNdCh0Lk4pID8ga2UocykgOiBOZSh0LmssIHMpO1xuICAgIH0odCwgZSk7XG59XG5cbi8qKlxuICogQ29tcHV0ZXMgYSBmaW5hbCB0cmFuc2Zvcm0gcmVzdWx0IGFmdGVyIHRoZSB0cmFuc2Zvcm0gaGFzIGJlZW4gYWNrbm93bGVkZ2VkXG4gKiBieSB0aGUgc2VydmVyLCBwb3RlbnRpYWxseSB1c2luZyB0aGUgc2VydmVyLXByb3ZpZGVkIHRyYW5zZm9ybVJlc3VsdC5cbiAqLyBmdW5jdGlvbiBPZSh0LCBlLCBuKSB7XG4gICAgLy8gVGhlIHNlcnZlciBqdXN0IHNlbmRzIG51bGwgYXMgdGhlIHRyYW5zZm9ybSByZXN1bHQgZm9yIGFycmF5IG9wZXJhdGlvbnMsXG4gICAgLy8gc28gd2UgaGF2ZSB0byBjYWxjdWxhdGUgYSByZXN1bHQgdGhlIHNhbWUgYXMgd2UgZG8gZm9yIGxvY2FsXG4gICAgLy8gYXBwbGljYXRpb25zLlxuICAgIHJldHVybiB0IGluc3RhbmNlb2YgQmUgPyBVZSh0LCBlKSA6IHQgaW5zdGFuY2VvZiBxZSA/IEtlKHQsIGUpIDogbjtcbn1cblxuLyoqXG4gKiBJZiB0aGlzIHRyYW5zZm9ybSBvcGVyYXRpb24gaXMgbm90IGlkZW1wb3RlbnQsIHJldHVybnMgdGhlIGJhc2UgdmFsdWUgdG9cbiAqIHBlcnNpc3QgZm9yIHRoaXMgdHJhbnNmb3JtLiBJZiBhIGJhc2UgdmFsdWUgaXMgcmV0dXJuZWQsIHRoZSB0cmFuc2Zvcm1cbiAqIG9wZXJhdGlvbiBpcyBhbHdheXMgYXBwbGllZCB0byB0aGlzIGJhc2UgdmFsdWUsIGV2ZW4gaWYgZG9jdW1lbnQgaGFzXG4gKiBhbHJlYWR5IGJlZW4gdXBkYXRlZC5cbiAqXG4gKiBCYXNlIHZhbHVlcyBwcm92aWRlIGNvbnNpc3RlbnQgYmVoYXZpb3IgZm9yIG5vbi1pZGVtcG90ZW50IHRyYW5zZm9ybXMgYW5kXG4gKiBhbGxvdyB1cyB0byByZXR1cm4gdGhlIHNhbWUgbGF0ZW5jeS1jb21wZW5zYXRlZCB2YWx1ZSBldmVuIGlmIHRoZSBiYWNrZW5kXG4gKiBoYXMgYWxyZWFkeSBhcHBsaWVkIHRoZSB0cmFuc2Zvcm0gb3BlcmF0aW9uLiBUaGUgYmFzZSB2YWx1ZSBpcyBudWxsIGZvclxuICogaWRlbXBvdGVudCB0cmFuc2Zvcm1zLCBhcyB0aGV5IGNhbiBiZSByZS1wbGF5ZWQgZXZlbiBpZiB0aGUgYmFja2VuZCBoYXNcbiAqIGFscmVhZHkgYXBwbGllZCB0aGVtLlxuICpcbiAqIEByZXR1cm5zIGEgYmFzZSB2YWx1ZSB0byBzdG9yZSBhbG9uZyB3aXRoIHRoZSBtdXRhdGlvbiwgb3IgbnVsbCBmb3JcbiAqIGlkZW1wb3RlbnQgdHJhbnNmb3Jtcy5cbiAqLyBmdW5jdGlvbiBNZSh0LCBlKSB7XG4gICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBqZSA/IE10KG4gPSBlKSB8fCBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiAhIXQgJiYgXCJkb3VibGVWYWx1ZVwiIGluIHQ7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBlaXRoZXIgYW4gSW50ZWdlclZhbHVlIG9yIGEgRG91YmxlVmFsdWUuICovIChuKSA/IGUgOiB7XG4gICAgICAgIGludGVnZXJWYWx1ZTogMFxuICAgIH0gOiBudWxsO1xuICAgIHZhciBuO1xufVxuXG4vKiogVHJhbnNmb3JtcyBhIHZhbHVlIGludG8gYSBzZXJ2ZXItZ2VuZXJhdGVkIHRpbWVzdGFtcC4gKi9cbmNsYXNzIExlIGV4dGVuZHMgJGUge31cblxuLyoqIFRyYW5zZm9ybXMgYW4gYXJyYXkgdmFsdWUgdmlhIGEgdW5pb24gb3BlcmF0aW9uLiAqLyBjbGFzcyBCZSBleHRlbmRzICRlIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZWxlbWVudHMgPSB0O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gVWUodCwgZSkge1xuICAgIGNvbnN0IG4gPSBXZShlKTtcbiAgICBmb3IgKGNvbnN0IGUgb2YgdC5lbGVtZW50cykgbi5zb21lKCh0ID0+IEN0KHQsIGUpKSkgfHwgbi5wdXNoKGUpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgIHZhbHVlczogblxuICAgICAgICB9XG4gICAgfTtcbn1cblxuLyoqIFRyYW5zZm9ybXMgYW4gYXJyYXkgdmFsdWUgdmlhIGEgcmVtb3ZlIG9wZXJhdGlvbi4gKi8gY2xhc3MgcWUgZXh0ZW5kcyAkZSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmVsZW1lbnRzID0gdDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEtlKHQsIGUpIHtcbiAgICBsZXQgbiA9IFdlKGUpO1xuICAgIGZvciAoY29uc3QgZSBvZiB0LmVsZW1lbnRzKSBuID0gbi5maWx0ZXIoKHQgPT4gIUN0KHQsIGUpKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYXJyYXlWYWx1ZToge1xuICAgICAgICAgICAgdmFsdWVzOiBuXG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vKipcbiAqIEltcGxlbWVudHMgdGhlIGJhY2tlbmQgc2VtYW50aWNzIGZvciBsb2NhbGx5IGNvbXB1dGVkIE5VTUVSSUNfQUREIChpbmNyZW1lbnQpXG4gKiB0cmFuc2Zvcm1zLiBDb252ZXJ0cyBhbGwgZmllbGQgdmFsdWVzIHRvIGludGVnZXJzIG9yIGRvdWJsZXMsIGJ1dCB1bmxpa2UgdGhlXG4gKiBiYWNrZW5kIGRvZXMgbm90IGNhcCBpbnRlZ2VyIHZhbHVlcyBhdCAyXjYzLiBJbnN0ZWFkLCBKYXZhU2NyaXB0IG51bWJlclxuICogYXJpdGhtZXRpYyBpcyB1c2VkIGFuZCBwcmVjaXNpb24gbG9zcyBjYW4gb2NjdXIgZm9yIHZhbHVlcyBncmVhdGVyIHRoYW4gMl41My5cbiAqLyBjbGFzcyBqZSBleHRlbmRzICRlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuayA9IHQsIHRoaXMuTiA9IGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBRZSh0KSB7XG4gICAgcmV0dXJuIEV0KHQuaW50ZWdlclZhbHVlIHx8IHQuZG91YmxlVmFsdWUpO1xufVxuXG5mdW5jdGlvbiBXZSh0KSB7XG4gICAgcmV0dXJuIEx0KHQpICYmIHQuYXJyYXlWYWx1ZS52YWx1ZXMgPyB0LmFycmF5VmFsdWUudmFsdWVzLnNsaWNlKCkgOiBbXTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBBIGZpZWxkIHBhdGggYW5kIHRoZSBUcmFuc2Zvcm1PcGVyYXRpb24gdG8gcGVyZm9ybSB1cG9uIGl0LiAqLyBjbGFzcyBHZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmZpZWxkID0gdCwgdGhpcy50cmFuc2Zvcm0gPSBlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gemUodCwgZSkge1xuICAgIHJldHVybiB0LmZpZWxkLmlzRXF1YWwoZS5maWVsZCkgJiYgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIEJlICYmIGUgaW5zdGFuY2VvZiBCZSB8fCB0IGluc3RhbmNlb2YgcWUgJiYgZSBpbnN0YW5jZW9mIHFlID8gcnQodC5lbGVtZW50cywgZS5lbGVtZW50cywgQ3QpIDogdCBpbnN0YW5jZW9mIGplICYmIGUgaW5zdGFuY2VvZiBqZSA/IEN0KHQuTiwgZS5OKSA6IHQgaW5zdGFuY2VvZiBMZSAmJiBlIGluc3RhbmNlb2YgTGU7XG4gICAgfSh0LnRyYW5zZm9ybSwgZS50cmFuc2Zvcm0pO1xufVxuXG4vKiogVGhlIHJlc3VsdCBvZiBzdWNjZXNzZnVsbHkgYXBwbHlpbmcgYSBtdXRhdGlvbiB0byB0aGUgYmFja2VuZC4gKi9cbmNsYXNzIEhlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgdmVyc2lvbiBhdCB3aGljaCB0aGUgbXV0YXRpb24gd2FzIGNvbW1pdHRlZDpcbiAgICAgKlxuICAgICAqIC0gRm9yIG1vc3Qgb3BlcmF0aW9ucywgdGhpcyBpcyB0aGUgdXBkYXRlVGltZSBpbiB0aGUgV3JpdGVSZXN1bHQuXG4gICAgICogLSBGb3IgZGVsZXRlcywgdGhlIGNvbW1pdFRpbWUgb2YgdGhlIFdyaXRlUmVzcG9uc2UgKGJlY2F1c2UgZGVsZXRlcyBhcmVcbiAgICAgKiAgIG5vdCBzdG9yZWQgYW5kIGhhdmUgbm8gdXBkYXRlVGltZSkuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgdGhlc2UgdmVyc2lvbnMgY2FuIGJlIGRpZmZlcmVudDogTm8tb3Agd3JpdGVzIHdpbGwgbm90IGNoYW5nZVxuICAgICAqIHRoZSB1cGRhdGVUaW1lIGV2ZW4gdGhvdWdoIHRoZSBjb21taXRUaW1lIGFkdmFuY2VzLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSByZXN1bHRpbmcgZmllbGRzIHJldHVybmVkIGZyb20gdGhlIGJhY2tlbmQgYWZ0ZXIgYSBtdXRhdGlvblxuICAgICAqIGNvbnRhaW5pbmcgZmllbGQgdHJhbnNmb3JtcyBoYXMgYmVlbiBjb21taXR0ZWQuIENvbnRhaW5zIG9uZSBGaWVsZFZhbHVlXG4gICAgICogZm9yIGVhY2ggRmllbGRUcmFuc2Zvcm0gdGhhdCB3YXMgaW4gdGhlIG11dGF0aW9uLlxuICAgICAqXG4gICAgICogV2lsbCBiZSBlbXB0eSBpZiB0aGUgbXV0YXRpb24gZGlkIG5vdCBjb250YWluIGFueSBmaWVsZCB0cmFuc2Zvcm1zLlxuICAgICAqL1xuICAgIGUpIHtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gdCwgdGhpcy50cmFuc2Zvcm1SZXN1bHRzID0gZTtcbiAgICB9XG59XG5cbi8qKlxuICogRW5jb2RlcyBhIHByZWNvbmRpdGlvbiBmb3IgYSBtdXRhdGlvbi4gVGhpcyBmb2xsb3dzIHRoZSBtb2RlbCB0aGF0IHRoZVxuICogYmFja2VuZCBhY2NlcHRzIHdpdGggdGhlIHNwZWNpYWwgY2FzZSBvZiBhbiBleHBsaWNpdCBcImVtcHR5XCIgcHJlY29uZGl0aW9uXG4gKiAobWVhbmluZyBubyBwcmVjb25kaXRpb24pLlxuICovIGNsYXNzIEplIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMudXBkYXRlVGltZSA9IHQsIHRoaXMuZXhpc3RzID0gZTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgZW1wdHkgUHJlY29uZGl0aW9uLiAqLyAgICBzdGF0aWMgbm9uZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBKZTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgUHJlY29uZGl0aW9uIHdpdGggYW4gZXhpc3RzIGZsYWcuICovICAgIHN0YXRpYyBleGlzdHModCkge1xuICAgICAgICByZXR1cm4gbmV3IEplKHZvaWQgMCwgdCk7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IFByZWNvbmRpdGlvbiBiYXNlZCBvbiBhIHZlcnNpb24gYSBkb2N1bWVudCBleGlzdHMgYXQuICovICAgIHN0YXRpYyB1cGRhdGVUaW1lKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBKZSh0KTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgd2hldGhlciB0aGlzIFByZWNvbmRpdGlvbiBpcyBlbXB0eS4gKi8gICAgZ2V0IGlzTm9uZSgpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gdGhpcy51cGRhdGVUaW1lICYmIHZvaWQgMCA9PT0gdGhpcy5leGlzdHM7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5leGlzdHMgPT09IHQuZXhpc3RzICYmICh0aGlzLnVwZGF0ZVRpbWUgPyAhIXQudXBkYXRlVGltZSAmJiB0aGlzLnVwZGF0ZVRpbWUuaXNFcXVhbCh0LnVwZGF0ZVRpbWUpIDogIXQudXBkYXRlVGltZSk7XG4gICAgfVxufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIHRoZSBwcmVjb25kaXRpb25zIGlzIHZhbGlkIGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnQuICovIGZ1bmN0aW9uIFllKHQsIGUpIHtcbiAgICByZXR1cm4gdm9pZCAwICE9PSB0LnVwZGF0ZVRpbWUgPyBlLmlzRm91bmREb2N1bWVudCgpICYmIGUudmVyc2lvbi5pc0VxdWFsKHQudXBkYXRlVGltZSkgOiB2b2lkIDAgPT09IHQuZXhpc3RzIHx8IHQuZXhpc3RzID09PSBlLmlzRm91bmREb2N1bWVudCgpO1xufVxuXG4vKipcbiAqIEEgbXV0YXRpb24gZGVzY3JpYmVzIGEgc2VsZi1jb250YWluZWQgY2hhbmdlIHRvIGEgZG9jdW1lbnQuIE11dGF0aW9ucyBjYW5cbiAqIGNyZWF0ZSwgcmVwbGFjZSwgZGVsZXRlLCBhbmQgdXBkYXRlIHN1YnNldHMgb2YgZG9jdW1lbnRzLlxuICpcbiAqIE11dGF0aW9ucyBub3Qgb25seSBhY3Qgb24gdGhlIHZhbHVlIG9mIHRoZSBkb2N1bWVudCBidXQgYWxzbyBpdHMgdmVyc2lvbi5cbiAqXG4gKiBGb3IgbG9jYWwgbXV0YXRpb25zIChtdXRhdGlvbnMgdGhhdCBoYXZlbid0IGJlZW4gY29tbWl0dGVkIHlldCksIHdlIHByZXNlcnZlXG4gKiB0aGUgZXhpc3RpbmcgdmVyc2lvbiBmb3IgU2V0IGFuZCBQYXRjaCBtdXRhdGlvbnMuIEZvciBEZWxldGUgbXV0YXRpb25zLCB3ZVxuICogcmVzZXQgdGhlIHZlcnNpb24gdG8gMC5cbiAqXG4gKiBIZXJlJ3MgdGhlIGV4cGVjdGVkIHRyYW5zaXRpb24gdGFibGUuXG4gKlxuICogTVVUQVRJT04gICAgICAgICAgIEFQUExJRUQgVE8gICAgICAgICAgICBSRVNVTFRTIElOXG4gKlxuICogU2V0TXV0YXRpb24gICAgICAgIERvY3VtZW50KHYzKSAgICAgICAgICBEb2N1bWVudCh2MylcbiAqIFNldE11dGF0aW9uICAgICAgICBOb0RvY3VtZW50KHYzKSAgICAgICAgRG9jdW1lbnQodjApXG4gKiBTZXRNdXRhdGlvbiAgICAgICAgSW52YWxpZERvY3VtZW50KHYwKSAgIERvY3VtZW50KHYwKVxuICogUGF0Y2hNdXRhdGlvbiAgICAgIERvY3VtZW50KHYzKSAgICAgICAgICBEb2N1bWVudCh2MylcbiAqIFBhdGNoTXV0YXRpb24gICAgICBOb0RvY3VtZW50KHYzKSAgICAgICAgTm9Eb2N1bWVudCh2MylcbiAqIFBhdGNoTXV0YXRpb24gICAgICBJbnZhbGlkRG9jdW1lbnQodjApICAgVW5rbm93bkRvY3VtZW50KHYzKVxuICogRGVsZXRlTXV0YXRpb24gICAgIERvY3VtZW50KHYzKSAgICAgICAgICBOb0RvY3VtZW50KHYwKVxuICogRGVsZXRlTXV0YXRpb24gICAgIE5vRG9jdW1lbnQodjMpICAgICAgICBOb0RvY3VtZW50KHYwKVxuICogRGVsZXRlTXV0YXRpb24gICAgIEludmFsaWREb2N1bWVudCh2MCkgICBOb0RvY3VtZW50KHYwKVxuICpcbiAqIEZvciBhY2tub3dsZWRnZWQgbXV0YXRpb25zLCB3ZSB1c2UgdGhlIHVwZGF0ZVRpbWUgb2YgdGhlIFdyaXRlUmVzcG9uc2UgYXNcbiAqIHRoZSByZXN1bHRpbmcgdmVyc2lvbiBmb3IgU2V0IGFuZCBQYXRjaCBtdXRhdGlvbnMuIEFzIGRlbGV0ZXMgaGF2ZSBub1xuICogZXhwbGljaXQgdXBkYXRlIHRpbWUsIHdlIHVzZSB0aGUgY29tbWl0VGltZSBvZiB0aGUgV3JpdGVSZXNwb25zZSBmb3JcbiAqIERlbGV0ZSBtdXRhdGlvbnMuXG4gKlxuICogSWYgYSBtdXRhdGlvbiBpcyBhY2tub3dsZWRnZWQgYnkgdGhlIGJhY2tlbmQgYnV0IGZhaWxzIHRoZSBwcmVjb25kaXRpb24gY2hlY2tcbiAqIGxvY2FsbHksIHdlIHRyYW5zaXRpb24gdG8gYW4gYFVua25vd25Eb2N1bWVudGAgYW5kIHJlbHkgb24gV2F0Y2ggdG8gc2VuZCB1c1xuICogdGhlIHVwZGF0ZWQgdmVyc2lvbi5cbiAqXG4gKiBGaWVsZCB0cmFuc2Zvcm1zIGFyZSB1c2VkIG9ubHkgd2l0aCBQYXRjaCBhbmQgU2V0IE11dGF0aW9ucy4gV2UgdXNlIHRoZVxuICogYHVwZGF0ZVRyYW5zZm9ybXNgIG1lc3NhZ2UgdG8gc3RvcmUgdHJhbnNmb3JtcywgcmF0aGVyIHRoYW4gdGhlIGB0cmFuc2Zvcm1zYHNcbiAqIG1lc3NhZ2VzLlxuICpcbiAqICMjIFN1YmNsYXNzaW5nIE5vdGVzXG4gKlxuICogRXZlcnkgdHlwZSBvZiBtdXRhdGlvbiBuZWVkcyB0byBpbXBsZW1lbnQgaXRzIG93biBhcHBseVRvUmVtb3RlRG9jdW1lbnQoKSBhbmRcbiAqIGFwcGx5VG9Mb2NhbFZpZXcoKSB0byBpbXBsZW1lbnQgdGhlIGFjdHVhbCBiZWhhdmlvciBvZiBhcHBseWluZyB0aGUgbXV0YXRpb25cbiAqIHRvIHNvbWUgc291cmNlIGRvY3VtZW50IChzZWUgYHNldE11dGF0aW9uQXBwbHlUb1JlbW90ZURvY3VtZW50KClgIGZvciBhblxuICogZXhhbXBsZSkuXG4gKi8gY2xhc3MgWGUge31cblxuLyoqXG4gKiBBcHBsaWVzIHRoaXMgbXV0YXRpb24gdG8gdGhlIGdpdmVuIGRvY3VtZW50IGZvciB0aGUgcHVycG9zZXMgb2YgY29tcHV0aW5nIGFcbiAqIG5ldyByZW1vdGUgZG9jdW1lbnQuIElmIHRoZSBpbnB1dCBkb2N1bWVudCBkb2Vzbid0IG1hdGNoIHRoZSBleHBlY3RlZCBzdGF0ZVxuICogKGUuZy4gaXQgaXMgaW52YWxpZCBvciBvdXRkYXRlZCksIHRoZSBkb2N1bWVudCB0eXBlIG1heSB0cmFuc2l0aW9uIHRvXG4gKiB1bmtub3duLlxuICpcbiAqIEBwYXJhbSBtdXRhdGlvbiAtIFRoZSBtdXRhdGlvbiB0byBhcHBseS5cbiAqIEBwYXJhbSBkb2N1bWVudCAtIFRoZSBkb2N1bWVudCB0byBtdXRhdGUuIFRoZSBpbnB1dCBkb2N1bWVudCBjYW4gYmUgYW5cbiAqICAgICBpbnZhbGlkIGRvY3VtZW50IGlmIHRoZSBjbGllbnQgaGFzIG5vIGtub3dsZWRnZSBvZiB0aGUgcHJlLW11dGF0aW9uIHN0YXRlXG4gKiAgICAgb2YgdGhlIGRvY3VtZW50LlxuICogQHBhcmFtIG11dGF0aW9uUmVzdWx0IC0gVGhlIHJlc3VsdCBvZiBhcHBseWluZyB0aGUgbXV0YXRpb24gZnJvbSB0aGUgYmFja2VuZC5cbiAqLyBmdW5jdGlvbiBaZSh0LCBlLCBuKSB7XG4gICAgdCBpbnN0YW5jZW9mIHJuID8gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAvLyBVbmxpa2Ugc2V0TXV0YXRpb25BcHBseVRvTG9jYWxWaWV3LCBpZiB3ZSdyZSBhcHBseWluZyBhIG11dGF0aW9uIHRvIGFcbiAgICAgICAgLy8gcmVtb3RlIGRvY3VtZW50IHRoZSBzZXJ2ZXIgaGFzIGFjY2VwdGVkIHRoZSBtdXRhdGlvbiBzbyB0aGUgcHJlY29uZGl0aW9uXG4gICAgICAgIC8vIG11c3QgaGF2ZSBoZWxkLlxuICAgICAgICBjb25zdCBzID0gdC52YWx1ZS5jbG9uZSgpLCBpID0gY24odC5maWVsZFRyYW5zZm9ybXMsIGUsIG4udHJhbnNmb3JtUmVzdWx0cyk7XG4gICAgICAgIHMuc2V0QWxsKGkpLCBlLmNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQobi52ZXJzaW9uLCBzKS5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKTtcbiAgICB9KHQsIGUsIG4pIDogdCBpbnN0YW5jZW9mIG9uID8gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBpZiAoIVllKHQucHJlY29uZGl0aW9uLCBlKSkgXG4gICAgICAgIC8vIFNpbmNlIHRoZSBtdXRhdGlvbiB3YXMgbm90IHJlamVjdGVkLCB3ZSBrbm93IHRoYXQgdGhlIHByZWNvbmRpdGlvblxuICAgICAgICAvLyBtYXRjaGVkIG9uIHRoZSBiYWNrZW5kLiBXZSB0aGVyZWZvcmUgbXVzdCBub3QgaGF2ZSB0aGUgZXhwZWN0ZWQgdmVyc2lvblxuICAgICAgICAvLyBvZiB0aGUgZG9jdW1lbnQgaW4gb3VyIGNhY2hlIGFuZCBjb252ZXJ0IHRvIGFuIFVua25vd25Eb2N1bWVudCB3aXRoIGFcbiAgICAgICAgLy8ga25vd24gdXBkYXRlVGltZS5cbiAgICAgICAgcmV0dXJuIHZvaWQgZS5jb252ZXJ0VG9Vbmtub3duRG9jdW1lbnQobi52ZXJzaW9uKTtcbiAgICAgICAgY29uc3QgcyA9IGNuKHQuZmllbGRUcmFuc2Zvcm1zLCBlLCBuLnRyYW5zZm9ybVJlc3VsdHMpLCBpID0gZS5kYXRhO1xuICAgICAgICBpLnNldEFsbChhbih0KSksIGkuc2V0QWxsKHMpLCBlLmNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQobi52ZXJzaW9uLCBpKS5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKTtcbiAgICB9KHQsIGUsIG4pIDogZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAvLyBVbmxpa2UgYXBwbHlUb0xvY2FsVmlldywgaWYgd2UncmUgYXBwbHlpbmcgYSBtdXRhdGlvbiB0byBhIHJlbW90ZVxuICAgICAgICAvLyBkb2N1bWVudCB0aGUgc2VydmVyIGhhcyBhY2NlcHRlZCB0aGUgbXV0YXRpb24gc28gdGhlIHByZWNvbmRpdGlvbiBtdXN0XG4gICAgICAgIC8vIGhhdmUgaGVsZC5cbiAgICAgICAgZS5jb252ZXJ0VG9Ob0RvY3VtZW50KG4udmVyc2lvbikuc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCk7XG4gICAgfSgwLCBlLCBuKTtcbn1cblxuLyoqXG4gKiBBcHBsaWVzIHRoaXMgbXV0YXRpb24gdG8gdGhlIGdpdmVuIGRvY3VtZW50IGZvciB0aGUgcHVycG9zZXMgb2YgY29tcHV0aW5nXG4gKiB0aGUgbmV3IGxvY2FsIHZpZXcgb2YgYSBkb2N1bWVudC4gSWYgdGhlIGlucHV0IGRvY3VtZW50IGRvZXNuJ3QgbWF0Y2ggdGhlXG4gKiBleHBlY3RlZCBzdGF0ZSwgdGhlIGRvY3VtZW50IGlzIG5vdCBtb2RpZmllZC5cbiAqXG4gKiBAcGFyYW0gbXV0YXRpb24gLSBUaGUgbXV0YXRpb24gdG8gYXBwbHkuXG4gKiBAcGFyYW0gZG9jdW1lbnQgLSBUaGUgZG9jdW1lbnQgdG8gbXV0YXRlLiBUaGUgaW5wdXQgZG9jdW1lbnQgY2FuIGJlIGFuXG4gKiAgICAgaW52YWxpZCBkb2N1bWVudCBpZiB0aGUgY2xpZW50IGhhcyBubyBrbm93bGVkZ2Ugb2YgdGhlIHByZS1tdXRhdGlvbiBzdGF0ZVxuICogICAgIG9mIHRoZSBkb2N1bWVudC5cbiAqIEBwYXJhbSBsb2NhbFdyaXRlVGltZSAtIEEgdGltZXN0YW1wIGluZGljYXRpbmcgdGhlIGxvY2FsIHdyaXRlIHRpbWUgb2YgdGhlXG4gKiAgICAgYmF0Y2ggdGhpcyBtdXRhdGlvbiBpcyBhIHBhcnQgb2YuXG4gKi8gZnVuY3Rpb24gdG4odCwgZSwgbikge1xuICAgIHQgaW5zdGFuY2VvZiBybiA/IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgaWYgKCFZZSh0LnByZWNvbmRpdGlvbiwgZSkpIFxuICAgICAgICAvLyBUaGUgbXV0YXRpb24gZmFpbGVkIHRvIGFwcGx5IChlLmcuIGEgZG9jdW1lbnQgSUQgY3JlYXRlZCB3aXRoIGFkZCgpXG4gICAgICAgIC8vIGNhdXNlZCBhIG5hbWUgY29sbGlzaW9uKS5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBzID0gdC52YWx1ZS5jbG9uZSgpLCBpID0gdW4odC5maWVsZFRyYW5zZm9ybXMsIG4sIGUpO1xuICAgICAgICBzLnNldEFsbChpKSwgZS5jb252ZXJ0VG9Gb3VuZERvY3VtZW50KHNuKGUpLCBzKS5zZXRIYXNMb2NhbE11dGF0aW9ucygpO1xuICAgIH1cbiAgICAvKipcbiAqIEEgbXV0YXRpb24gdGhhdCBtb2RpZmllcyBmaWVsZHMgb2YgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkgd2l0aCB0aGVcbiAqIGdpdmVuIHZhbHVlcy4gVGhlIHZhbHVlcyBhcmUgYXBwbGllZCB0aHJvdWdoIGEgZmllbGQgbWFzazpcbiAqXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgaW4gYm90aCB0aGUgbWFzayBhbmQgdGhlIHZhbHVlcywgdGhlIGNvcnJlc3BvbmRpbmcgZmllbGRcbiAqICAgIGlzIHVwZGF0ZWQuXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgaW4gbmVpdGhlciB0aGUgbWFzayBub3IgdGhlIHZhbHVlcywgdGhlIGNvcnJlc3BvbmRpbmdcbiAqICAgIGZpZWxkIGlzIHVubW9kaWZpZWQuXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgaW4gdGhlIG1hc2sgYnV0IG5vdCBpbiB0aGUgdmFsdWVzLCB0aGUgY29ycmVzcG9uZGluZyBmaWVsZFxuICogICAgaXMgZGVsZXRlZC5cbiAqICAqIFdoZW4gYSBmaWVsZCBpcyBub3QgaW4gdGhlIG1hc2sgYnV0IGlzIGluIHRoZSB2YWx1ZXMsIHRoZSB2YWx1ZXMgbWFwIGlzXG4gKiAgICBpZ25vcmVkLlxuICovICh0LCBlLCBuKSA6IHQgaW5zdGFuY2VvZiBvbiA/IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgaWYgKCFZZSh0LnByZWNvbmRpdGlvbiwgZSkpIHJldHVybjtcbiAgICAgICAgY29uc3QgcyA9IHVuKHQuZmllbGRUcmFuc2Zvcm1zLCBuLCBlKSwgaSA9IGUuZGF0YTtcbiAgICAgICAgaS5zZXRBbGwoYW4odCkpLCBpLnNldEFsbChzKSwgZS5jb252ZXJ0VG9Gb3VuZERvY3VtZW50KHNuKGUpLCBpKS5zZXRIYXNMb2NhbE11dGF0aW9ucygpO1xuICAgIH1cbiAgICAvKipcbiAqIFJldHVybnMgYSBGaWVsZFBhdGgvVmFsdWUgbWFwIHdpdGggdGhlIGNvbnRlbnQgb2YgdGhlIFBhdGNoTXV0YXRpb24uXG4gKi8gKHQsIGUsIG4pIDogZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBZZSh0LnByZWNvbmRpdGlvbiwgZSkgJiYgXG4gICAgICAgIC8vIFdlIGRvbid0IGNhbGwgYHNldEhhc0xvY2FsTXV0YXRpb25zKClgIHNpbmNlIHdlIHdhbnQgdG8gYmUgYmFja3dhcmRzXG4gICAgICAgIC8vIGNvbXBhdGlibGUgd2l0aCB0aGUgZXhpc3RpbmcgU0RLIGJlaGF2aW9yLlxuICAgICAgICBlLmNvbnZlcnRUb05vRG9jdW1lbnQoY3QubWluKCkpO1xuICAgIH1cbiAgICAvKipcbiAqIEEgbXV0YXRpb24gdGhhdCB2ZXJpZmllcyB0aGUgZXhpc3RlbmNlIG9mIHRoZSBkb2N1bWVudCBhdCB0aGUgZ2l2ZW4ga2V5IHdpdGhcbiAqIHRoZSBwcm92aWRlZCBwcmVjb25kaXRpb24uXG4gKlxuICogVGhlIGB2ZXJpZnlgIG9wZXJhdGlvbiBpcyBvbmx5IHVzZWQgaW4gVHJhbnNhY3Rpb25zLCBhbmQgdGhpcyBjbGFzcyBzZXJ2ZXNcbiAqIHByaW1hcmlseSB0byBmYWNpbGl0YXRlIHNlcmlhbGl6YXRpb24gaW50byBwcm90b3MuXG4gKi8gKHQsIGUpO1xufVxuXG4vKipcbiAqIElmIHRoaXMgbXV0YXRpb24gaXMgbm90IGlkZW1wb3RlbnQsIHJldHVybnMgdGhlIGJhc2UgdmFsdWUgdG8gcGVyc2lzdCB3aXRoXG4gKiB0aGlzIG11dGF0aW9uLiBJZiBhIGJhc2UgdmFsdWUgaXMgcmV0dXJuZWQsIHRoZSBtdXRhdGlvbiBpcyBhbHdheXMgYXBwbGllZFxuICogdG8gdGhpcyBiYXNlIHZhbHVlLCBldmVuIGlmIGRvY3VtZW50IGhhcyBhbHJlYWR5IGJlZW4gdXBkYXRlZC5cbiAqXG4gKiBUaGUgYmFzZSB2YWx1ZSBpcyBhIHNwYXJzZSBvYmplY3QgdGhhdCBjb25zaXN0cyBvZiBvbmx5IHRoZSBkb2N1bWVudFxuICogZmllbGRzIGZvciB3aGljaCB0aGlzIG11dGF0aW9uIGNvbnRhaW5zIGEgbm9uLWlkZW1wb3RlbnQgdHJhbnNmb3JtYXRpb25cbiAqIChlLmcuIGEgbnVtZXJpYyBpbmNyZW1lbnQpLiBUaGUgcHJvdmlkZWQgdmFsdWUgZ3VhcmFudGVlcyBjb25zaXN0ZW50XG4gKiBiZWhhdmlvciBmb3Igbm9uLWlkZW1wb3RlbnQgdHJhbnNmb3JtcyBhbmQgYWxsb3cgdXMgdG8gcmV0dXJuIHRoZSBzYW1lXG4gKiBsYXRlbmN5LWNvbXBlbnNhdGVkIHZhbHVlIGV2ZW4gaWYgdGhlIGJhY2tlbmQgaGFzIGFscmVhZHkgYXBwbGllZCB0aGVcbiAqIG11dGF0aW9uLiBUaGUgYmFzZSB2YWx1ZSBpcyBudWxsIGZvciBpZGVtcG90ZW50IG11dGF0aW9ucywgYXMgdGhleSBjYW4gYmVcbiAqIHJlLXBsYXllZCBldmVuIGlmIHRoZSBiYWNrZW5kIGhhcyBhbHJlYWR5IGFwcGxpZWQgdGhlbS5cbiAqXG4gKiBAcmV0dXJucyBhIGJhc2UgdmFsdWUgdG8gc3RvcmUgYWxvbmcgd2l0aCB0aGUgbXV0YXRpb24sIG9yIG51bGwgZm9yXG4gKiBpZGVtcG90ZW50IG11dGF0aW9ucy5cbiAqLyBmdW5jdGlvbiBlbih0LCBlKSB7XG4gICAgbGV0IG4gPSBudWxsO1xuICAgIGZvciAoY29uc3QgcyBvZiB0LmZpZWxkVHJhbnNmb3Jtcykge1xuICAgICAgICBjb25zdCB0ID0gZS5kYXRhLmZpZWxkKHMuZmllbGQpLCBpID0gTWUocy50cmFuc2Zvcm0sIHQgfHwgbnVsbCk7XG4gICAgICAgIG51bGwgIT0gaSAmJiAobnVsbCA9PSBuICYmIChuID0ganQuZW1wdHkoKSksIG4uc2V0KHMuZmllbGQsIGkpKTtcbiAgICB9XG4gICAgcmV0dXJuIG4gfHwgbnVsbDtcbn1cblxuZnVuY3Rpb24gbm4odCwgZSkge1xuICAgIHJldHVybiB0LnR5cGUgPT09IGUudHlwZSAmJiAoISF0LmtleS5pc0VxdWFsKGUua2V5KSAmJiAoISF0LnByZWNvbmRpdGlvbi5pc0VxdWFsKGUucHJlY29uZGl0aW9uKSAmJiAoISFmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgPT09IHQgJiYgdm9pZCAwID09PSBlIHx8ICEoIXQgfHwgIWUpICYmIHJ0KHQsIGUsICgodCwgZSkgPT4gemUodCwgZSkpKTtcbiAgICB9KHQuZmllbGRUcmFuc2Zvcm1zLCBlLmZpZWxkVHJhbnNmb3JtcykgJiYgKDAgLyogU2V0ICovID09PSB0LnR5cGUgPyB0LnZhbHVlLmlzRXF1YWwoZS52YWx1ZSkgOiAxIC8qIFBhdGNoICovICE9PSB0LnR5cGUgfHwgdC5kYXRhLmlzRXF1YWwoZS5kYXRhKSAmJiB0LmZpZWxkTWFzay5pc0VxdWFsKGUuZmllbGRNYXNrKSkpKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgdmVyc2lvbiBmcm9tIHRoZSBnaXZlbiBkb2N1bWVudCBmb3IgdXNlIGFzIHRoZSByZXN1bHQgb2YgYVxuICogbXV0YXRpb24uIE11dGF0aW9ucyBhcmUgZGVmaW5lZCB0byByZXR1cm4gdGhlIHZlcnNpb24gb2YgdGhlIGJhc2UgZG9jdW1lbnRcbiAqIG9ubHkgaWYgaXQgaXMgYW4gZXhpc3RpbmcgZG9jdW1lbnQuIERlbGV0ZWQgYW5kIHVua25vd24gZG9jdW1lbnRzIGhhdmUgYVxuICogcG9zdC1tdXRhdGlvbiB2ZXJzaW9uIG9mIFNuYXBzaG90VmVyc2lvbi5taW4oKS5cbiAqLyBmdW5jdGlvbiBzbih0KSB7XG4gICAgcmV0dXJuIHQuaXNGb3VuZERvY3VtZW50KCkgPyB0LnZlcnNpb24gOiBjdC5taW4oKTtcbn1cblxuLyoqXG4gKiBBIG11dGF0aW9uIHRoYXQgY3JlYXRlcyBvciByZXBsYWNlcyB0aGUgZG9jdW1lbnQgYXQgdGhlIGdpdmVuIGtleSB3aXRoIHRoZVxuICogb2JqZWN0IHZhbHVlIGNvbnRlbnRzLlxuICovIGNsYXNzIHJuIGV4dGVuZHMgWGUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMgPSBbXSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmtleSA9IHQsIHRoaXMudmFsdWUgPSBlLCB0aGlzLnByZWNvbmRpdGlvbiA9IG4sIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gcywgXG4gICAgICAgIHRoaXMudHlwZSA9IDAgLyogU2V0ICovO1xuICAgIH1cbn1cblxuY2xhc3Mgb24gZXh0ZW5kcyBYZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSA9IFtdKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMua2V5ID0gdCwgdGhpcy5kYXRhID0gZSwgdGhpcy5maWVsZE1hc2sgPSBuLCB0aGlzLnByZWNvbmRpdGlvbiA9IHMsIFxuICAgICAgICB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IGksIHRoaXMudHlwZSA9IDEgLyogUGF0Y2ggKi87XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhbih0KSB7XG4gICAgY29uc3QgZSA9IG5ldyBNYXA7XG4gICAgcmV0dXJuIHQuZmllbGRNYXNrLmZpZWxkcy5mb3JFYWNoKChuID0+IHtcbiAgICAgICAgaWYgKCFuLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgY29uc3QgcyA9IHQuZGF0YS5maWVsZChuKTtcbiAgICAgICAgICAgIGUuc2V0KG4sIHMpO1xuICAgICAgICB9XG4gICAgfSkpLCBlO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBsaXN0IG9mIFwidHJhbnNmb3JtIHJlc3VsdHNcIiAoYSB0cmFuc2Zvcm0gcmVzdWx0IGlzIGEgZmllbGQgdmFsdWVcbiAqIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIGEgdHJhbnNmb3JtKSBmb3IgdXNlIGFmdGVyIGEgbXV0YXRpb25cbiAqIGNvbnRhaW5pbmcgdHJhbnNmb3JtcyBoYXMgYmVlbiBhY2tub3dsZWRnZWQgYnkgdGhlIHNlcnZlci5cbiAqXG4gKiBAcGFyYW0gZmllbGRUcmFuc2Zvcm1zIC0gVGhlIGZpZWxkIHRyYW5zZm9ybXMgdG8gYXBwbHkgdGhlIHJlc3VsdCB0by5cbiAqIEBwYXJhbSBtdXRhYmxlRG9jdW1lbnQgLSBUaGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQgYWZ0ZXIgYXBwbHlpbmcgYWxsXG4gKiBwcmV2aW91cyBtdXRhdGlvbnMuXG4gKiBAcGFyYW0gc2VydmVyVHJhbnNmb3JtUmVzdWx0cyAtIFRoZSB0cmFuc2Zvcm0gcmVzdWx0cyByZWNlaXZlZCBieSB0aGUgc2VydmVyLlxuICogQHJldHVybnMgVGhlIHRyYW5zZm9ybSByZXN1bHRzIGxpc3QuXG4gKi8gZnVuY3Rpb24gY24odCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBuZXcgTWFwO1xuICAgIEIodC5sZW5ndGggPT09IG4ubGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgciA9IHRbaV0sIG8gPSByLnRyYW5zZm9ybSwgYSA9IGUuZGF0YS5maWVsZChyLmZpZWxkKTtcbiAgICAgICAgcy5zZXQoci5maWVsZCwgT2UobywgYSwgbltpXSkpO1xuICAgIH1cbiAgICByZXR1cm4gcztcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbGlzdCBvZiBcInRyYW5zZm9ybSByZXN1bHRzXCIgKGEgdHJhbnNmb3JtIHJlc3VsdCBpcyBhIGZpZWxkIHZhbHVlXG4gKiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdCBvZiBhcHBseWluZyBhIHRyYW5zZm9ybSkgZm9yIHVzZSB3aGVuIGFwcGx5aW5nIGFcbiAqIHRyYW5zZm9ybSBsb2NhbGx5LlxuICpcbiAqIEBwYXJhbSBmaWVsZFRyYW5zZm9ybXMgLSBUaGUgZmllbGQgdHJhbnNmb3JtcyB0byBhcHBseSB0aGUgcmVzdWx0IHRvLlxuICogQHBhcmFtIGxvY2FsV3JpdGVUaW1lIC0gVGhlIGxvY2FsIHRpbWUgb2YgdGhlIG11dGF0aW9uICh1c2VkIHRvXG4gKiAgICAgZ2VuZXJhdGUgU2VydmVyVGltZXN0YW1wVmFsdWVzKS5cbiAqIEBwYXJhbSBtdXRhYmxlRG9jdW1lbnQgLSBUaGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQgYWZ0ZXIgYXBwbHlpbmcgYWxsXG4gKiAgICAgcHJldmlvdXMgbXV0YXRpb25zLlxuICogQHJldHVybnMgVGhlIHRyYW5zZm9ybSByZXN1bHRzIGxpc3QuXG4gKi8gZnVuY3Rpb24gdW4odCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBuZXcgTWFwO1xuICAgIGZvciAoY29uc3QgaSBvZiB0KSB7XG4gICAgICAgIGNvbnN0IHQgPSBpLnRyYW5zZm9ybSwgciA9IG4uZGF0YS5maWVsZChpLmZpZWxkKTtcbiAgICAgICAgcy5zZXQoaS5maWVsZCwgRmUodCwgciwgZSkpO1xuICAgIH1cbiAgICByZXR1cm4gcztcbn1cblxuLyoqIEEgbXV0YXRpb24gdGhhdCBkZWxldGVzIHRoZSBkb2N1bWVudCBhdCB0aGUgZ2l2ZW4ga2V5LiAqLyBjbGFzcyBobiBleHRlbmRzIFhlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMua2V5ID0gdCwgdGhpcy5wcmVjb25kaXRpb24gPSBlLCB0aGlzLnR5cGUgPSAyIC8qIERlbGV0ZSAqLyAsIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gW107XG4gICAgfVxufVxuXG5jbGFzcyBsbiBleHRlbmRzIFhlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMua2V5ID0gdCwgdGhpcy5wcmVjb25kaXRpb24gPSBlLCB0aGlzLnR5cGUgPSAzIC8qIFZlcmlmeSAqLyAsIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gW107XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBmbiB7XG4gICAgLy8gVE9ETyhiLzMzMDc4MTYzKToganVzdCB1c2Ugc2ltcGxlc3QgZm9ybSBvZiBleGlzdGVuY2UgZmlsdGVyIGZvciBub3dcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuY291bnQgPSB0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRXJyb3IgQ29kZXMgZGVzY3JpYmluZyB0aGUgZGlmZmVyZW50IHdheXMgR1JQQyBjYW4gZmFpbC4gVGhlc2UgYXJlIGNvcGllZFxuICogZGlyZWN0bHkgZnJvbSBHUlBDJ3Mgc291cmNlcyBoZXJlOlxuICpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ncnBjL2dycGMvYmxvYi9iY2VlYzk0ZWE0ZmM1ZjAwODVkODEyMzVkOGUxYzA2Nzk4ZGMzNDFhL2luY2x1ZGUvZ3JwYyUyQiUyQi9pbXBsL2NvZGVnZW4vc3RhdHVzX2NvZGVfZW51bS5oXG4gKlxuICogSW1wb3J0YW50ISBUaGUgbmFtZXMgb2YgdGhlc2UgaWRlbnRpZmllcnMgbWF0dGVyIGJlY2F1c2UgdGhlIHN0cmluZyBmb3Jtc1xuICogYXJlIHVzZWQgZm9yIHJldmVyc2UgbG9va3VwcyBmcm9tIHRoZSB3ZWJjaGFubmVsIHN0cmVhbS4gRG8gTk9UIGNoYW5nZSB0aGVcbiAqIG5hbWVzIG9mIHRoZXNlIGlkZW50aWZpZXJzIG9yIGNoYW5nZSB0aGlzIGludG8gYSBjb25zdCBlbnVtLlxuICovIHZhciBkbiwgd247XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIGFuIGVycm9yIGNvZGUgcmVwcmVzZW50cyBhIHBlcm1hbmVudCBlcnJvciB3aGVuIHJlY2VpdmVkXG4gKiBpbiByZXNwb25zZSB0byBhIG5vbi13cml0ZSBvcGVyYXRpb24uXG4gKlxuICogU2VlIGlzUGVybWFuZW50V3JpdGVFcnJvciBmb3IgY2xhc3NpZnlpbmcgd3JpdGUgZXJyb3JzLlxuICovXG5mdW5jdGlvbiBfbih0KSB7XG4gICAgc3dpdGNoICh0KSB7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gTCgpO1xuXG4gICAgICBjYXNlIEsuQ0FOQ0VMTEVEOlxuICAgICAgY2FzZSBLLlVOS05PV046XG4gICAgICBjYXNlIEsuREVBRExJTkVfRVhDRUVERUQ6XG4gICAgICBjYXNlIEsuUkVTT1VSQ0VfRVhIQVVTVEVEOlxuICAgICAgY2FzZSBLLklOVEVSTkFMOlxuICAgICAgY2FzZSBLLlVOQVZBSUxBQkxFOlxuIC8vIFVuYXV0aGVudGljYXRlZCBtZWFucyBzb21ldGhpbmcgd2VudCB3cm9uZyB3aXRoIG91ciB0b2tlbiBhbmQgd2UgbmVlZFxuICAgICAgICAvLyB0byByZXRyeSB3aXRoIG5ldyBjcmVkZW50aWFscyB3aGljaCB3aWxsIGhhcHBlbiBhdXRvbWF0aWNhbGx5LlxuICAgICAgICAgICAgICBjYXNlIEsuVU5BVVRIRU5USUNBVEVEOlxuICAgICAgICByZXR1cm4gITE7XG5cbiAgICAgIGNhc2UgSy5JTlZBTElEX0FSR1VNRU5UOlxuICAgICAgY2FzZSBLLk5PVF9GT1VORDpcbiAgICAgIGNhc2UgSy5BTFJFQURZX0VYSVNUUzpcbiAgICAgIGNhc2UgSy5QRVJNSVNTSU9OX0RFTklFRDpcbiAgICAgIGNhc2UgSy5GQUlMRURfUFJFQ09ORElUSU9OOlxuIC8vIEFib3J0ZWQgbWlnaHQgYmUgcmV0cmllZCBpbiBzb21lIHNjZW5hcmlvcywgYnV0IHRoYXQgaXMgZGVwZW5kYW50IG9uXG4gICAgICAgIC8vIHRoZSBjb250ZXh0IGFuZCBzaG91bGQgaGFuZGxlZCBpbmRpdmlkdWFsbHkgYnkgdGhlIGNhbGxpbmcgY29kZS5cbiAgICAgICAgLy8gU2VlIGh0dHBzOi8vY2xvdWQuZ29vZ2xlLmNvbS9hcGlzL2Rlc2lnbi9lcnJvcnMuXG4gICAgICAgICAgICAgIGNhc2UgSy5BQk9SVEVEOlxuICAgICAgY2FzZSBLLk9VVF9PRl9SQU5HRTpcbiAgICAgIGNhc2UgSy5VTklNUExFTUVOVEVEOlxuICAgICAgY2FzZSBLLkRBVEFfTE9TUzpcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgYW4gZXJyb3IgY29kZSByZXByZXNlbnRzIGEgcGVybWFuZW50IGVycm9yIHdoZW4gcmVjZWl2ZWRcbiAqIGluIHJlc3BvbnNlIHRvIGEgd3JpdGUgb3BlcmF0aW9uLlxuICpcbiAqIFdyaXRlIG9wZXJhdGlvbnMgbXVzdCBiZSBoYW5kbGVkIHNwZWNpYWxseSBiZWNhdXNlIGFzIG9mIGIvMTE5NDM3NzY0LCBBQk9SVEVEXG4gKiBlcnJvcnMgb24gdGhlIHdyaXRlIHN0cmVhbSBzaG91bGQgYmUgcmV0cmllZCB0b28gKGV2ZW4gdGhvdWdoIEFCT1JURUQgZXJyb3JzXG4gKiBhcmUgbm90IGdlbmVyYWxseSByZXRyeWFibGUpLlxuICpcbiAqIE5vdGUgdGhhdCBkdXJpbmcgdGhlIGluaXRpYWwgaGFuZHNoYWtlIG9uIHRoZSB3cml0ZSBzdHJlYW0gYW4gQUJPUlRFRCBlcnJvclxuICogc2lnbmFscyB0aGF0IHdlIHNob3VsZCBkaXNjYXJkIG91ciBzdHJlYW0gdG9rZW4gKGkuZS4gaXQgaXMgcGVybWFuZW50KS4gVGhpc1xuICogbWVhbnMgYSBoYW5kc2hha2UgZXJyb3Igc2hvdWxkIGJlIGNsYXNzaWZpZWQgd2l0aCBpc1Blcm1hbmVudEVycm9yLCBhYm92ZS5cbiAqL1xuLyoqXG4gKiBNYXBzIGFuIGVycm9yIENvZGUgZnJvbSBHUlBDIHN0YXR1cyBjb2RlIG51bWJlciwgbGlrZSAwLCAxLCBvciAxNC4gVGhlc2VcbiAqIGFyZSBub3QgdGhlIHNhbWUgYXMgSFRUUCBzdGF0dXMgY29kZXMuXG4gKlxuICogQHJldHVybnMgVGhlIENvZGUgZXF1aXZhbGVudCB0byB0aGUgZ2l2ZW4gR1JQQyBzdGF0dXMgY29kZS4gRmFpbHMgaWYgdGhlcmVcbiAqICAgICBpcyBubyBtYXRjaC5cbiAqL1xuZnVuY3Rpb24gbW4odCkge1xuICAgIGlmICh2b2lkIDAgPT09IHQpIFxuICAgIC8vIFRoaXMgc2hvdWxkbid0IG5vcm1hbGx5IGhhcHBlbiwgYnV0IGluIGNlcnRhaW4gZXJyb3IgY2FzZXMgKGxpa2UgdHJ5aW5nXG4gICAgLy8gdG8gc2VuZCBpbnZhbGlkIHByb3RvIG1lc3NhZ2VzKSB3ZSBtYXkgZ2V0IGFuIGVycm9yIHdpdGggbm8gR1JQQyBjb2RlLlxuICAgIHJldHVybiBGKFwiR1JQQyBlcnJvciBoYXMgbm8gLmNvZGVcIiksIEsuVU5LTk9XTjtcbiAgICBzd2l0Y2ggKHQpIHtcbiAgICAgIGNhc2UgZG4uT0s6XG4gICAgICAgIHJldHVybiBLLk9LO1xuXG4gICAgICBjYXNlIGRuLkNBTkNFTExFRDpcbiAgICAgICAgcmV0dXJuIEsuQ0FOQ0VMTEVEO1xuXG4gICAgICBjYXNlIGRuLlVOS05PV046XG4gICAgICAgIHJldHVybiBLLlVOS05PV047XG5cbiAgICAgIGNhc2UgZG4uREVBRExJTkVfRVhDRUVERUQ6XG4gICAgICAgIHJldHVybiBLLkRFQURMSU5FX0VYQ0VFREVEO1xuXG4gICAgICBjYXNlIGRuLlJFU09VUkNFX0VYSEFVU1RFRDpcbiAgICAgICAgcmV0dXJuIEsuUkVTT1VSQ0VfRVhIQVVTVEVEO1xuXG4gICAgICBjYXNlIGRuLklOVEVSTkFMOlxuICAgICAgICByZXR1cm4gSy5JTlRFUk5BTDtcblxuICAgICAgY2FzZSBkbi5VTkFWQUlMQUJMRTpcbiAgICAgICAgcmV0dXJuIEsuVU5BVkFJTEFCTEU7XG5cbiAgICAgIGNhc2UgZG4uVU5BVVRIRU5USUNBVEVEOlxuICAgICAgICByZXR1cm4gSy5VTkFVVEhFTlRJQ0FURUQ7XG5cbiAgICAgIGNhc2UgZG4uSU5WQUxJRF9BUkdVTUVOVDpcbiAgICAgICAgcmV0dXJuIEsuSU5WQUxJRF9BUkdVTUVOVDtcblxuICAgICAgY2FzZSBkbi5OT1RfRk9VTkQ6XG4gICAgICAgIHJldHVybiBLLk5PVF9GT1VORDtcblxuICAgICAgY2FzZSBkbi5BTFJFQURZX0VYSVNUUzpcbiAgICAgICAgcmV0dXJuIEsuQUxSRUFEWV9FWElTVFM7XG5cbiAgICAgIGNhc2UgZG4uUEVSTUlTU0lPTl9ERU5JRUQ6XG4gICAgICAgIHJldHVybiBLLlBFUk1JU1NJT05fREVOSUVEO1xuXG4gICAgICBjYXNlIGRuLkZBSUxFRF9QUkVDT05ESVRJT046XG4gICAgICAgIHJldHVybiBLLkZBSUxFRF9QUkVDT05ESVRJT047XG5cbiAgICAgIGNhc2UgZG4uQUJPUlRFRDpcbiAgICAgICAgcmV0dXJuIEsuQUJPUlRFRDtcblxuICAgICAgY2FzZSBkbi5PVVRfT0ZfUkFOR0U6XG4gICAgICAgIHJldHVybiBLLk9VVF9PRl9SQU5HRTtcblxuICAgICAgY2FzZSBkbi5VTklNUExFTUVOVEVEOlxuICAgICAgICByZXR1cm4gSy5VTklNUExFTUVOVEVEO1xuXG4gICAgICBjYXNlIGRuLkRBVEFfTE9TUzpcbiAgICAgICAgcmV0dXJuIEsuREFUQV9MT1NTO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gTCgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhbiBIVFRQIHJlc3BvbnNlJ3MgZXJyb3Igc3RhdHVzIHRvIHRoZSBlcXVpdmFsZW50IGVycm9yIGNvZGUuXG4gKlxuICogQHBhcmFtIHN0YXR1cyAtIEFuIEhUVFAgZXJyb3IgcmVzcG9uc2Ugc3RhdHVzIChcIkZBSUxFRF9QUkVDT05ESVRJT05cIixcbiAqIFwiVU5LTk9XTlwiLCBldGMuKVxuICogQHJldHVybnMgVGhlIGVxdWl2YWxlbnQgQ29kZS4gTm9uLW1hdGNoaW5nIHJlc3BvbnNlcyBhcmUgbWFwcGVkIHRvXG4gKiAgICAgQ29kZS5VTktOT1dOLlxuICovICh3biA9IGRuIHx8IChkbiA9IHt9KSlbd24uT0sgPSAwXSA9IFwiT0tcIiwgd25bd24uQ0FOQ0VMTEVEID0gMV0gPSBcIkNBTkNFTExFRFwiLCBcbnduW3duLlVOS05PV04gPSAyXSA9IFwiVU5LTk9XTlwiLCB3blt3bi5JTlZBTElEX0FSR1VNRU5UID0gM10gPSBcIklOVkFMSURfQVJHVU1FTlRcIiwgXG53blt3bi5ERUFETElORV9FWENFRURFRCA9IDRdID0gXCJERUFETElORV9FWENFRURFRFwiLCB3blt3bi5OT1RfRk9VTkQgPSA1XSA9IFwiTk9UX0ZPVU5EXCIsIFxud25bd24uQUxSRUFEWV9FWElTVFMgPSA2XSA9IFwiQUxSRUFEWV9FWElTVFNcIiwgd25bd24uUEVSTUlTU0lPTl9ERU5JRUQgPSA3XSA9IFwiUEVSTUlTU0lPTl9ERU5JRURcIiwgXG53blt3bi5VTkFVVEhFTlRJQ0FURUQgPSAxNl0gPSBcIlVOQVVUSEVOVElDQVRFRFwiLCB3blt3bi5SRVNPVVJDRV9FWEhBVVNURUQgPSA4XSA9IFwiUkVTT1VSQ0VfRVhIQVVTVEVEXCIsIFxud25bd24uRkFJTEVEX1BSRUNPTkRJVElPTiA9IDldID0gXCJGQUlMRURfUFJFQ09ORElUSU9OXCIsIHduW3duLkFCT1JURUQgPSAxMF0gPSBcIkFCT1JURURcIiwgXG53blt3bi5PVVRfT0ZfUkFOR0UgPSAxMV0gPSBcIk9VVF9PRl9SQU5HRVwiLCB3blt3bi5VTklNUExFTUVOVEVEID0gMTJdID0gXCJVTklNUExFTUVOVEVEXCIsIFxud25bd24uSU5URVJOQUwgPSAxM10gPSBcIklOVEVSTkFMXCIsIHduW3duLlVOQVZBSUxBQkxFID0gMTRdID0gXCJVTkFWQUlMQUJMRVwiLCB3blt3bi5EQVRBX0xPU1MgPSAxNV0gPSBcIkRBVEFfTE9TU1wiO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gQW4gaW1tdXRhYmxlIHNvcnRlZCBtYXAgaW1wbGVtZW50YXRpb24sIGJhc2VkIG9uIGEgTGVmdC1sZWFuaW5nIFJlZC1CbGFja1xuLy8gdHJlZS5cbmNsYXNzIGduIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuY29tcGFyYXRvciA9IHQsIHRoaXMucm9vdCA9IGUgfHwgcG4uRU1QVFk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSBtYXAsIHdpdGggdGhlIHNwZWNpZmllZCBrZXkvdmFsdWUgYWRkZWQgb3IgcmVwbGFjZWQuXG4gICAgaW5zZXJ0KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBnbih0aGlzLmNvbXBhcmF0b3IsIHRoaXMucm9vdC5pbnNlcnQodCwgZSwgdGhpcy5jb21wYXJhdG9yKS5jb3B5KG51bGwsIG51bGwsIHBuLkJMQUNLLCBudWxsLCBudWxsKSk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSBtYXAsIHdpdGggdGhlIHNwZWNpZmllZCBrZXkgcmVtb3ZlZC5cbiAgICByZW1vdmUodCkge1xuICAgICAgICByZXR1cm4gbmV3IGduKHRoaXMuY29tcGFyYXRvciwgdGhpcy5yb290LnJlbW92ZSh0LCB0aGlzLmNvbXBhcmF0b3IpLmNvcHkobnVsbCwgbnVsbCwgcG4uQkxBQ0ssIG51bGwsIG51bGwpKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgdmFsdWUgb2YgdGhlIG5vZGUgd2l0aCB0aGUgZ2l2ZW4ga2V5LCBvciBudWxsLlxuICAgIGdldCh0KSB7XG4gICAgICAgIGxldCBlID0gdGhpcy5yb290O1xuICAgICAgICBmb3IgKDshZS5pc0VtcHR5KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuY29tcGFyYXRvcih0LCBlLmtleSk7XG4gICAgICAgICAgICBpZiAoMCA9PT0gbikgcmV0dXJuIGUudmFsdWU7XG4gICAgICAgICAgICBuIDwgMCA/IGUgPSBlLmxlZnQgOiBuID4gMCAmJiAoZSA9IGUucmlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZWxlbWVudCBpbiB0aGlzIHNvcnRlZCBtYXAsIG9yIC0xIGlmIGl0IGRvZXNuJ3RcbiAgICAvLyBleGlzdC5cbiAgICBpbmRleE9mKHQpIHtcbiAgICAgICAgLy8gTnVtYmVyIG9mIG5vZGVzIHRoYXQgd2VyZSBwcnVuZWQgd2hlbiBkZXNjZW5kaW5nIHJpZ2h0XG4gICAgICAgIGxldCBlID0gMCwgbiA9IHRoaXMucm9vdDtcbiAgICAgICAgZm9yICg7IW4uaXNFbXB0eSgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0aGlzLmNvbXBhcmF0b3IodCwgbi5rZXkpO1xuICAgICAgICAgICAgaWYgKDAgPT09IHMpIHJldHVybiBlICsgbi5sZWZ0LnNpemU7XG4gICAgICAgICAgICBzIDwgMCA/IG4gPSBuLmxlZnQgOiAoXG4gICAgICAgICAgICAvLyBDb3VudCBhbGwgbm9kZXMgbGVmdCBvZiB0aGUgbm9kZSBwbHVzIHRoZSBub2RlIGl0c2VsZlxuICAgICAgICAgICAgZSArPSBuLmxlZnQuc2l6ZSArIDEsIG4gPSBuLnJpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBOb2RlIG5vdCBmb3VuZFxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5pc0VtcHR5KCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIHRvdGFsIG51bWJlciBvZiBub2RlcyBpbiB0aGUgbWFwLlxuICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290LnNpemU7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIG1pbmltdW0ga2V5IGluIHRoZSBtYXAuXG4gICAgbWluS2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290Lm1pbktleSgpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtYXhpbXVtIGtleSBpbiB0aGUgbWFwLlxuICAgIG1heEtleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5tYXhLZXkoKTtcbiAgICB9XG4gICAgLy8gVHJhdmVyc2VzIHRoZSBtYXAgaW4ga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvbiBmdW5jdGlvblxuICAgIC8vIGZvciBlYWNoIGtleS92YWx1ZSBwYWlyLiBJZiBhY3Rpb24gcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXMgYWJvcnRlZC5cbiAgICAvLyBSZXR1cm5zIHRoZSBmaXJzdCB0cnV0aHkgdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLCBvciB0aGUgbGFzdCBmYWxzZXlcbiAgICAvLyB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24uXG4gICAgaW5vcmRlclRyYXZlcnNhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QuaW5vcmRlclRyYXZlcnNhbCh0KTtcbiAgICB9XG4gICAgZm9yRWFjaCh0KSB7XG4gICAgICAgIHRoaXMuaW5vcmRlclRyYXZlcnNhbCgoKGUsIG4pID0+ICh0KGUsIG4pLCAhMSkpKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5vcmRlclRyYXZlcnNhbCgoKGUsIG4pID0+ICh0LnB1c2goYCR7ZX06JHtufWApLCAhMSkpKSwgYHske3Quam9pbihcIiwgXCIpfX1gO1xuICAgIH1cbiAgICAvLyBUcmF2ZXJzZXMgdGhlIG1hcCBpbiByZXZlcnNlIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb25cbiAgICAvLyBmdW5jdGlvbiBmb3IgZWFjaCBrZXkvdmFsdWUgcGFpci4gSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzXG4gICAgLy8gYWJvcnRlZC5cbiAgICAvLyBSZXR1cm5zIHRoZSBmaXJzdCB0cnV0aHkgdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLCBvciB0aGUgbGFzdCBmYWxzZXlcbiAgICAvLyB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24uXG4gICAgcmV2ZXJzZVRyYXZlcnNhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QucmV2ZXJzZVRyYXZlcnNhbCh0KTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhbiBpdGVyYXRvciBvdmVyIHRoZSBTb3J0ZWRNYXAuXG4gICAgZ2V0SXRlcmF0b3IoKSB7XG4gICAgICAgIHJldHVybiBuZXcgeW4odGhpcy5yb290LCBudWxsLCB0aGlzLmNvbXBhcmF0b3IsICExKTtcbiAgICB9XG4gICAgZ2V0SXRlcmF0b3JGcm9tKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB5bih0aGlzLnJvb3QsIHQsIHRoaXMuY29tcGFyYXRvciwgITEpO1xuICAgIH1cbiAgICBnZXRSZXZlcnNlSXRlcmF0b3IoKSB7XG4gICAgICAgIHJldHVybiBuZXcgeW4odGhpcy5yb290LCBudWxsLCB0aGlzLmNvbXBhcmF0b3IsICEwKTtcbiAgICB9XG4gICAgZ2V0UmV2ZXJzZUl0ZXJhdG9yRnJvbSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgeW4odGhpcy5yb290LCB0LCB0aGlzLmNvbXBhcmF0b3IsICEwKTtcbiAgICB9XG59XG5cbiAvLyBlbmQgU29ydGVkTWFwXG4vLyBBbiBpdGVyYXRvciBvdmVyIGFuIExMUkJOb2RlLlxuY2xhc3MgeW4ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy5pc1JldmVyc2UgPSBzLCB0aGlzLm5vZGVTdGFjayA9IFtdO1xuICAgICAgICBsZXQgaSA9IDE7XG4gICAgICAgIGZvciAoOyF0LmlzRW1wdHkoKTsgKSBpZiAoaSA9IGUgPyBuKHQua2V5LCBlKSA6IDEsIFxuICAgICAgICAvLyBmbGlwIHRoZSBjb21wYXJpc29uIGlmIHdlJ3JlIGdvaW5nIGluIHJldmVyc2VcbiAgICAgICAgcyAmJiAoaSAqPSAtMSksIGkgPCAwKSBcbiAgICAgICAgLy8gVGhpcyBub2RlIGlzIGxlc3MgdGhhbiBvdXIgc3RhcnQga2V5LiBpZ25vcmUgaXRcbiAgICAgICAgdCA9IHRoaXMuaXNSZXZlcnNlID8gdC5sZWZ0IDogdC5yaWdodDsgZWxzZSB7XG4gICAgICAgICAgICBpZiAoMCA9PT0gaSkge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgbm9kZSBpcyBleGFjdGx5IGVxdWFsIHRvIG91ciBzdGFydCBrZXkuIFB1c2ggaXQgb24gdGhlIHN0YWNrLFxuICAgICAgICAgICAgICAgIC8vIGJ1dCBzdG9wIGl0ZXJhdGluZztcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVTdGFjay5wdXNoKHQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVGhpcyBub2RlIGlzIGdyZWF0ZXIgdGhhbiBvdXIgc3RhcnQga2V5LCBhZGQgaXQgdG8gdGhlIHN0YWNrIGFuZCBtb3ZlXG4gICAgICAgICAgICAvLyB0byB0aGUgbmV4dCBvbmVcbiAgICAgICAgICAgIHRoaXMubm9kZVN0YWNrLnB1c2godCksIHQgPSB0aGlzLmlzUmV2ZXJzZSA/IHQucmlnaHQgOiB0LmxlZnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0TmV4dCgpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzLm5vZGVTdGFjay5wb3AoKTtcbiAgICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgICAgIGtleTogdC5rZXksXG4gICAgICAgICAgICB2YWx1ZTogdC52YWx1ZVxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5pc1JldmVyc2UpIGZvciAodCA9IHQubGVmdDsgIXQuaXNFbXB0eSgpOyApIHRoaXMubm9kZVN0YWNrLnB1c2godCksIHQgPSB0LnJpZ2h0OyBlbHNlIGZvciAodCA9IHQucmlnaHQ7ICF0LmlzRW1wdHkoKTsgKSB0aGlzLm5vZGVTdGFjay5wdXNoKHQpLCBcbiAgICAgICAgdCA9IHQubGVmdDtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIGhhc05leHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vZGVTdGFjay5sZW5ndGggPiAwO1xuICAgIH1cbiAgICBwZWVrKCkge1xuICAgICAgICBpZiAoMCA9PT0gdGhpcy5ub2RlU3RhY2subGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMubm9kZVN0YWNrW3RoaXMubm9kZVN0YWNrLmxlbmd0aCAtIDFdO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2V5OiB0LmtleSxcbiAgICAgICAgICAgIHZhbHVlOiB0LnZhbHVlXG4gICAgICAgIH07XG4gICAgfVxufVxuXG4gLy8gZW5kIFNvcnRlZE1hcEl0ZXJhdG9yXG4vLyBSZXByZXNlbnRzIGEgbm9kZSBpbiBhIExlZnQtbGVhbmluZyBSZWQtQmxhY2sgdHJlZS5cbmNsYXNzIHBuIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHRoaXMua2V5ID0gdCwgdGhpcy52YWx1ZSA9IGUsIHRoaXMuY29sb3IgPSBudWxsICE9IG4gPyBuIDogcG4uUkVELCB0aGlzLmxlZnQgPSBudWxsICE9IHMgPyBzIDogcG4uRU1QVFksIFxuICAgICAgICB0aGlzLnJpZ2h0ID0gbnVsbCAhPSBpID8gaSA6IHBuLkVNUFRZLCB0aGlzLnNpemUgPSB0aGlzLmxlZnQuc2l6ZSArIDEgKyB0aGlzLnJpZ2h0LnNpemU7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSBjdXJyZW50IG5vZGUsIG9wdGlvbmFsbHkgcmVwbGFjaW5nIHBpZWNlcyBvZiBpdC5cbiAgICBjb3B5KHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBwbihudWxsICE9IHQgPyB0IDogdGhpcy5rZXksIG51bGwgIT0gZSA/IGUgOiB0aGlzLnZhbHVlLCBudWxsICE9IG4gPyBuIDogdGhpcy5jb2xvciwgbnVsbCAhPSBzID8gcyA6IHRoaXMubGVmdCwgbnVsbCAhPSBpID8gaSA6IHRoaXMucmlnaHQpO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIC8vIFRyYXZlcnNlcyB0aGUgdHJlZSBpbiBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uIGZ1bmN0aW9uXG4gICAgLy8gZm9yIGVhY2ggbm9kZS4gSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxuICAgIGlub3JkZXJUcmF2ZXJzYWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sZWZ0Lmlub3JkZXJUcmF2ZXJzYWwodCkgfHwgdCh0aGlzLmtleSwgdGhpcy52YWx1ZSkgfHwgdGhpcy5yaWdodC5pbm9yZGVyVHJhdmVyc2FsKHQpO1xuICAgIH1cbiAgICAvLyBUcmF2ZXJzZXMgdGhlIHRyZWUgaW4gcmV2ZXJzZSBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uXG4gICAgLy8gZnVuY3Rpb24gZm9yIGVhY2ggbm9kZS4gSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxuICAgIHJldmVyc2VUcmF2ZXJzYWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yaWdodC5yZXZlcnNlVHJhdmVyc2FsKHQpIHx8IHQodGhpcy5rZXksIHRoaXMudmFsdWUpIHx8IHRoaXMubGVmdC5yZXZlcnNlVHJhdmVyc2FsKHQpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtaW5pbXVtIG5vZGUgaW4gdGhlIHRyZWUuXG4gICAgbWluKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmlzRW1wdHkoKSA/IHRoaXMgOiB0aGlzLmxlZnQubWluKCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIG1heGltdW0ga2V5IGluIHRoZSB0cmVlLlxuICAgIG1pbktleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKCkua2V5O1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtYXhpbXVtIGtleSBpbiB0aGUgdHJlZS5cbiAgICBtYXhLZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJpZ2h0LmlzRW1wdHkoKSA/IHRoaXMua2V5IDogdGhpcy5yaWdodC5tYXhLZXkoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBuZXcgdHJlZSwgd2l0aCB0aGUga2V5L3ZhbHVlIGFkZGVkLlxuICAgIGluc2VydCh0LCBlLCBuKSB7XG4gICAgICAgIGxldCBzID0gdGhpcztcbiAgICAgICAgY29uc3QgaSA9IG4odCwgcy5rZXkpO1xuICAgICAgICByZXR1cm4gcyA9IGkgPCAwID8gcy5jb3B5KG51bGwsIG51bGwsIG51bGwsIHMubGVmdC5pbnNlcnQodCwgZSwgbiksIG51bGwpIDogMCA9PT0gaSA/IHMuY29weShudWxsLCBlLCBudWxsLCBudWxsLCBudWxsKSA6IHMuY29weShudWxsLCBudWxsLCBudWxsLCBudWxsLCBzLnJpZ2h0Lmluc2VydCh0LCBlLCBuKSksIFxuICAgICAgICBzLmZpeFVwKCk7XG4gICAgfVxuICAgIHJlbW92ZU1pbigpIHtcbiAgICAgICAgaWYgKHRoaXMubGVmdC5pc0VtcHR5KCkpIHJldHVybiBwbi5FTVBUWTtcbiAgICAgICAgbGV0IHQgPSB0aGlzO1xuICAgICAgICByZXR1cm4gdC5sZWZ0LmlzUmVkKCkgfHwgdC5sZWZ0LmxlZnQuaXNSZWQoKSB8fCAodCA9IHQubW92ZVJlZExlZnQoKSksIHQgPSB0LmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgdC5sZWZ0LnJlbW92ZU1pbigpLCBudWxsKSwgXG4gICAgICAgIHQuZml4VXAoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBuZXcgdHJlZSwgd2l0aCB0aGUgc3BlY2lmaWVkIGl0ZW0gcmVtb3ZlZC5cbiAgICByZW1vdmUodCwgZSkge1xuICAgICAgICBsZXQgbiwgcyA9IHRoaXM7XG4gICAgICAgIGlmIChlKHQsIHMua2V5KSA8IDApIHMubGVmdC5pc0VtcHR5KCkgfHwgcy5sZWZ0LmlzUmVkKCkgfHwgcy5sZWZ0LmxlZnQuaXNSZWQoKSB8fCAocyA9IHMubW92ZVJlZExlZnQoKSksIFxuICAgICAgICBzID0gcy5jb3B5KG51bGwsIG51bGwsIG51bGwsIHMubGVmdC5yZW1vdmUodCwgZSksIG51bGwpOyBlbHNlIHtcbiAgICAgICAgICAgIGlmIChzLmxlZnQuaXNSZWQoKSAmJiAocyA9IHMucm90YXRlUmlnaHQoKSksIHMucmlnaHQuaXNFbXB0eSgpIHx8IHMucmlnaHQuaXNSZWQoKSB8fCBzLnJpZ2h0LmxlZnQuaXNSZWQoKSB8fCAocyA9IHMubW92ZVJlZFJpZ2h0KCkpLCBcbiAgICAgICAgICAgIDAgPT09IGUodCwgcy5rZXkpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHMucmlnaHQuaXNFbXB0eSgpKSByZXR1cm4gcG4uRU1QVFk7XG4gICAgICAgICAgICAgICAgbiA9IHMucmlnaHQubWluKCksIHMgPSBzLmNvcHkobi5rZXksIG4udmFsdWUsIG51bGwsIG51bGwsIHMucmlnaHQucmVtb3ZlTWluKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcyA9IHMuY29weShudWxsLCBudWxsLCBudWxsLCBudWxsLCBzLnJpZ2h0LnJlbW92ZSh0LCBlKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHMuZml4VXAoKTtcbiAgICB9XG4gICAgaXNSZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbG9yO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIG5ldyB0cmVlIGFmdGVyIHBlcmZvcm1pbmcgYW55IG5lZWRlZCByb3RhdGlvbnMuXG4gICAgZml4VXAoKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHQucmlnaHQuaXNSZWQoKSAmJiAhdC5sZWZ0LmlzUmVkKCkgJiYgKHQgPSB0LnJvdGF0ZUxlZnQoKSksIHQubGVmdC5pc1JlZCgpICYmIHQubGVmdC5sZWZ0LmlzUmVkKCkgJiYgKHQgPSB0LnJvdGF0ZVJpZ2h0KCkpLCBcbiAgICAgICAgdC5sZWZ0LmlzUmVkKCkgJiYgdC5yaWdodC5pc1JlZCgpICYmICh0ID0gdC5jb2xvckZsaXAoKSksIHQ7XG4gICAgfVxuICAgIG1vdmVSZWRMZWZ0KCkge1xuICAgICAgICBsZXQgdCA9IHRoaXMuY29sb3JGbGlwKCk7XG4gICAgICAgIHJldHVybiB0LnJpZ2h0LmxlZnQuaXNSZWQoKSAmJiAodCA9IHQuY29weShudWxsLCBudWxsLCBudWxsLCBudWxsLCB0LnJpZ2h0LnJvdGF0ZVJpZ2h0KCkpLCBcbiAgICAgICAgdCA9IHQucm90YXRlTGVmdCgpLCB0ID0gdC5jb2xvckZsaXAoKSksIHQ7XG4gICAgfVxuICAgIG1vdmVSZWRSaWdodCgpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzLmNvbG9yRmxpcCgpO1xuICAgICAgICByZXR1cm4gdC5sZWZ0LmxlZnQuaXNSZWQoKSAmJiAodCA9IHQucm90YXRlUmlnaHQoKSwgdCA9IHQuY29sb3JGbGlwKCkpLCB0O1xuICAgIH1cbiAgICByb3RhdGVMZWZ0KCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5jb3B5KG51bGwsIG51bGwsIHBuLlJFRCwgbnVsbCwgdGhpcy5yaWdodC5sZWZ0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMucmlnaHQuY29weShudWxsLCBudWxsLCB0aGlzLmNvbG9yLCB0LCBudWxsKTtcbiAgICB9XG4gICAgcm90YXRlUmlnaHQoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmNvcHkobnVsbCwgbnVsbCwgcG4uUkVELCB0aGlzLmxlZnQucmlnaHQsIG51bGwpO1xuICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmNvcHkobnVsbCwgbnVsbCwgdGhpcy5jb2xvciwgbnVsbCwgdCk7XG4gICAgfVxuICAgIGNvbG9yRmxpcCgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMubGVmdC5jb3B5KG51bGwsIG51bGwsICF0aGlzLmxlZnQuY29sb3IsIG51bGwsIG51bGwpLCBlID0gdGhpcy5yaWdodC5jb3B5KG51bGwsIG51bGwsICF0aGlzLnJpZ2h0LmNvbG9yLCBudWxsLCBudWxsKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29weShudWxsLCBudWxsLCAhdGhpcy5jb2xvciwgdCwgZSk7XG4gICAgfVxuICAgIC8vIEZvciB0ZXN0aW5nLlxuICAgIGNoZWNrTWF4RGVwdGgoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmNoZWNrKCk7XG4gICAgICAgIHJldHVybiBNYXRoLnBvdygyLCB0KSA8PSB0aGlzLnNpemUgKyAxO1xuICAgIH1cbiAgICAvLyBJbiBhIGJhbGFuY2VkIFJCIHRyZWUsIHRoZSBibGFjay1kZXB0aCAobnVtYmVyIG9mIGJsYWNrIG5vZGVzKSBmcm9tIHJvb3QgdG9cbiAgICAvLyBsZWF2ZXMgaXMgZXF1YWwgb24gYm90aCBzaWRlcy4gIFRoaXMgZnVuY3Rpb24gdmVyaWZpZXMgdGhhdCBvciBhc3NlcnRzLlxuICAgIGNoZWNrKCkge1xuICAgICAgICBpZiAodGhpcy5pc1JlZCgpICYmIHRoaXMubGVmdC5pc1JlZCgpKSB0aHJvdyBMKCk7XG4gICAgICAgIGlmICh0aGlzLnJpZ2h0LmlzUmVkKCkpIHRocm93IEwoKTtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMubGVmdC5jaGVjaygpO1xuICAgICAgICBpZiAodCAhPT0gdGhpcy5yaWdodC5jaGVjaygpKSB0aHJvdyBMKCk7XG4gICAgICAgIHJldHVybiB0ICsgKHRoaXMuaXNSZWQoKSA/IDAgOiAxKTtcbiAgICB9XG59XG5cbiAvLyBlbmQgTExSQk5vZGVcbi8vIEVtcHR5IG5vZGUgaXMgc2hhcmVkIGJldHdlZW4gYWxsIExMUkIgdHJlZXMuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxucG4uRU1QVFkgPSBudWxsLCBwbi5SRUQgPSAhMCwgcG4uQkxBQ0sgPSAhMTtcblxuLy8gZW5kIExMUkJFbXB0eU5vZGVcbnBuLkVNUFRZID0gbmV3IFxuLy8gUmVwcmVzZW50cyBhbiBlbXB0eSBub2RlIChhIGxlYWYgbm9kZSBpbiB0aGUgUmVkLUJsYWNrIFRyZWUpLlxuY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnNpemUgPSAwO1xuICAgIH1cbiAgICBnZXQga2V5KCkge1xuICAgICAgICB0aHJvdyBMKCk7XG4gICAgfVxuICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgdGhyb3cgTCgpO1xuICAgIH1cbiAgICBnZXQgY29sb3IoKSB7XG4gICAgICAgIHRocm93IEwoKTtcbiAgICB9XG4gICAgZ2V0IGxlZnQoKSB7XG4gICAgICAgIHRocm93IEwoKTtcbiAgICB9XG4gICAgZ2V0IHJpZ2h0KCkge1xuICAgICAgICB0aHJvdyBMKCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSBjdXJyZW50IG5vZGUuXG4gICAgY29weSh0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgdHJlZSwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleS92YWx1ZSBhZGRlZC5cbiAgICBpbnNlcnQodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gbmV3IHBuKHQsIGUpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgdHJlZSwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSByZW1vdmVkLlxuICAgIHJlbW92ZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIGlub3JkZXJUcmF2ZXJzYWwodCkge1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIHJldmVyc2VUcmF2ZXJzYWwodCkge1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIG1pbktleSgpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIG1heEtleSgpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlzUmVkKCkge1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIC8vIEZvciB0ZXN0aW5nLlxuICAgIGNoZWNrTWF4RGVwdGgoKSB7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgY2hlY2soKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFNvcnRlZFNldCBpcyBhbiBpbW11dGFibGUgKGNvcHktb24td3JpdGUpIGNvbGxlY3Rpb24gdGhhdCBob2xkcyBlbGVtZW50c1xuICogaW4gb3JkZXIgc3BlY2lmaWVkIGJ5IHRoZSBwcm92aWRlZCBjb21wYXJhdG9yLlxuICpcbiAqIE5PVEU6IGlmIHByb3ZpZGVkIGNvbXBhcmF0b3IgcmV0dXJucyAwIGZvciB0d28gZWxlbWVudHMsIHdlIGNvbnNpZGVyIHRoZW0gdG9cbiAqIGJlIGVxdWFsIVxuICovXG5jbGFzcyBUbiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmNvbXBhcmF0b3IgPSB0LCB0aGlzLmRhdGEgPSBuZXcgZ24odGhpcy5jb21wYXJhdG9yKTtcbiAgICB9XG4gICAgaGFzKHQpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHRoaXMuZGF0YS5nZXQodCk7XG4gICAgfVxuICAgIGZpcnN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLm1pbktleSgpO1xuICAgIH1cbiAgICBsYXN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLm1heEtleSgpO1xuICAgIH1cbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5zaXplO1xuICAgIH1cbiAgICBpbmRleE9mKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5pbmRleE9mKHQpO1xuICAgIH1cbiAgICAvKiogSXRlcmF0ZXMgZWxlbWVudHMgaW4gb3JkZXIgZGVmaW5lZCBieSBcImNvbXBhcmF0b3JcIiAqLyAgICBmb3JFYWNoKHQpIHtcbiAgICAgICAgdGhpcy5kYXRhLmlub3JkZXJUcmF2ZXJzYWwoKChlLCBuKSA9PiAodChlKSwgITEpKSk7XG4gICAgfVxuICAgIC8qKiBJdGVyYXRlcyBvdmVyIGBlbGVtYHMgc3VjaCB0aGF0OiByYW5nZVswXSAmbHQ7PSBlbGVtICZsdDsgcmFuZ2VbMV0uICovICAgIGZvckVhY2hJblJhbmdlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuZGF0YS5nZXRJdGVyYXRvckZyb20odFswXSk7XG4gICAgICAgIGZvciAoO24uaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBuLmdldE5leHQoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbXBhcmF0b3Iocy5rZXksIHRbMV0pID49IDApIHJldHVybjtcbiAgICAgICAgICAgIGUocy5rZXkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEl0ZXJhdGVzIG92ZXIgYGVsZW1gcyBzdWNoIHRoYXQ6IHN0YXJ0ICZsdDs9IGVsZW0gdW50aWwgZmFsc2UgaXMgcmV0dXJuZWQuXG4gICAgICovICAgIGZvckVhY2hXaGlsZSh0LCBlKSB7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBmb3IgKG4gPSB2b2lkIDAgIT09IGUgPyB0aGlzLmRhdGEuZ2V0SXRlcmF0b3JGcm9tKGUpIDogdGhpcy5kYXRhLmdldEl0ZXJhdG9yKCk7IG4uaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGlmICghdChuLmdldE5leHQoKS5rZXkpKSByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEZpbmRzIHRoZSBsZWFzdCBlbGVtZW50IGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byBgZWxlbWAuICovICAgIGZpcnN0QWZ0ZXJPckVxdWFsKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZGF0YS5nZXRJdGVyYXRvckZyb20odCk7XG4gICAgICAgIHJldHVybiBlLmhhc05leHQoKSA/IGUuZ2V0TmV4dCgpLmtleSA6IG51bGw7XG4gICAgfVxuICAgIGdldEl0ZXJhdG9yKCkge1xuICAgICAgICByZXR1cm4gbmV3IEVuKHRoaXMuZGF0YS5nZXRJdGVyYXRvcigpKTtcbiAgICB9XG4gICAgZ2V0SXRlcmF0b3JGcm9tKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBFbih0aGlzLmRhdGEuZ2V0SXRlcmF0b3JGcm9tKHQpKTtcbiAgICB9XG4gICAgLyoqIEluc2VydHMgb3IgdXBkYXRlcyBhbiBlbGVtZW50ICovICAgIGFkZCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvcHkodGhpcy5kYXRhLnJlbW92ZSh0KS5pbnNlcnQodCwgITApKTtcbiAgICB9XG4gICAgLyoqIERlbGV0ZXMgYW4gZWxlbWVudCAqLyAgICBkZWxldGUodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYXModCkgPyB0aGlzLmNvcHkodGhpcy5kYXRhLnJlbW92ZSh0KSkgOiB0aGlzO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmlzRW1wdHkoKTtcbiAgICB9XG4gICAgdW5pb25XaXRoKHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzO1xuICAgICAgICAvLyBNYWtlIHN1cmUgYHJlc3VsdGAgYWx3YXlzIHJlZmVycyB0byB0aGUgbGFyZ2VyIG9uZSBvZiB0aGUgdHdvIHNldHMuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuc2l6ZSA8IHQuc2l6ZSAmJiAoZSA9IHQsIHQgPSB0aGlzKSwgdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGUgPSBlLmFkZCh0KTtcbiAgICAgICAgfSkpLCBlO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgaWYgKCEodCBpbnN0YW5jZW9mIFRuKSkgcmV0dXJuICExO1xuICAgICAgICBpZiAodGhpcy5zaXplICE9PSB0LnNpemUpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZGF0YS5nZXRJdGVyYXRvcigpLCBuID0gdC5kYXRhLmdldEl0ZXJhdG9yKCk7XG4gICAgICAgIGZvciAoO2UuaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLmdldE5leHQoKS5rZXksIHMgPSBuLmdldE5leHQoKS5rZXk7XG4gICAgICAgICAgICBpZiAoMCAhPT0gdGhpcy5jb21wYXJhdG9yKHQsIHMpKSByZXR1cm4gITE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICB0b0FycmF5KCkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdC5wdXNoKGUpO1xuICAgICAgICB9KSksIHQ7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmZvckVhY2goKGUgPT4gdC5wdXNoKGUpKSksIFwiU29ydGVkU2V0KFwiICsgdC50b1N0cmluZygpICsgXCIpXCI7XG4gICAgfVxuICAgIGNvcHkodCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IFRuKHRoaXMuY29tcGFyYXRvcik7XG4gICAgICAgIHJldHVybiBlLmRhdGEgPSB0LCBlO1xuICAgIH1cbn1cblxuY2xhc3MgRW4ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5pdGVyID0gdDtcbiAgICB9XG4gICAgZ2V0TmV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlci5nZXROZXh0KCkua2V5O1xuICAgIH1cbiAgICBoYXNOZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVyLmhhc05leHQoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IEluID0gbmV3IGduKFN0LmNvbXBhcmF0b3IpO1xuXG5mdW5jdGlvbiBBbigpIHtcbiAgICByZXR1cm4gSW47XG59XG5cbmNvbnN0IFJuID0gbmV3IGduKFN0LmNvbXBhcmF0b3IpO1xuXG5mdW5jdGlvbiBQbigpIHtcbiAgICByZXR1cm4gUm47XG59XG5cbmNvbnN0IGJuID0gbmV3IGduKFN0LmNvbXBhcmF0b3IpO1xuXG5mdW5jdGlvbiB2bigpIHtcbiAgICByZXR1cm4gYm47XG59XG5cbmNvbnN0IFZuID0gbmV3IFRuKFN0LmNvbXBhcmF0b3IpO1xuXG5mdW5jdGlvbiBTbiguLi50KSB7XG4gICAgbGV0IGUgPSBWbjtcbiAgICBmb3IgKGNvbnN0IG4gb2YgdCkgZSA9IGUuYWRkKG4pO1xuICAgIHJldHVybiBlO1xufVxuXG5jb25zdCBEbiA9IG5ldyBUbihpdCk7XG5cbmZ1bmN0aW9uIENuKCkge1xuICAgIHJldHVybiBEbjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gZXZlbnQgZnJvbSB0aGUgUmVtb3RlU3RvcmUuIEl0IGlzIHNwbGl0IGludG8gdGFyZ2V0Q2hhbmdlcyAoY2hhbmdlcyB0byB0aGVcbiAqIHN0YXRlIG9yIHRoZSBzZXQgb2YgZG9jdW1lbnRzIGluIG91ciB3YXRjaGVkIHRhcmdldHMpIGFuZCBkb2N1bWVudFVwZGF0ZXNcbiAqIChjaGFuZ2VzIHRvIHRoZSBhY3R1YWwgZG9jdW1lbnRzKS5cbiAqLyBjbGFzcyBObiB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIHNuYXBzaG90IHZlcnNpb24gdGhpcyBldmVudCBicmluZ3MgdXMgdXAgdG8sIG9yIE1JTiBpZiBub3Qgc2V0LlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIEEgbWFwIGZyb20gdGFyZ2V0IHRvIGNoYW5nZXMgdG8gdGhlIHRhcmdldC4gU2VlIFRhcmdldENoYW5nZS5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBBIHNldCBvZiB0YXJnZXRzIHRoYXQgaXMga25vd24gdG8gYmUgaW5jb25zaXN0ZW50LiBMaXN0ZW5zIGZvciB0aGVzZVxuICAgICAqIHRhcmdldHMgc2hvdWxkIGJlIHJlLWVzdGFibGlzaGVkIHdpdGhvdXQgcmVzdW1lIHRva2Vucy5cbiAgICAgKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBBIHNldCBvZiB3aGljaCBkb2N1bWVudHMgaGF2ZSBjaGFuZ2VkIG9yIGJlZW4gZGVsZXRlZCwgYWxvbmcgd2l0aCB0aGVcbiAgICAgKiBkb2MncyBuZXcgdmFsdWVzIChpZiBub3QgZGVsZXRlZCkuXG4gICAgICovXG4gICAgcywgXG4gICAgLyoqXG4gICAgICogQSBzZXQgb2Ygd2hpY2ggZG9jdW1lbnQgdXBkYXRlcyBhcmUgZHVlIG9ubHkgdG8gbGltYm8gcmVzb2x1dGlvbiB0YXJnZXRzLlxuICAgICAqL1xuICAgIGkpIHtcbiAgICAgICAgdGhpcy5zbmFwc2hvdFZlcnNpb24gPSB0LCB0aGlzLnRhcmdldENoYW5nZXMgPSBlLCB0aGlzLnRhcmdldE1pc21hdGNoZXMgPSBuLCB0aGlzLmRvY3VtZW50VXBkYXRlcyA9IHMsIFxuICAgICAgICB0aGlzLnJlc29sdmVkTGltYm9Eb2N1bWVudHMgPSBpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIQUNLOiBWaWV3cyByZXF1aXJlIFJlbW90ZUV2ZW50cyBpbiBvcmRlciB0byBkZXRlcm1pbmUgd2hldGhlciB0aGUgdmlldyBpc1xuICAgICAqIENVUlJFTlQsIGJ1dCBzZWNvbmRhcnkgdGFicyBkb24ndCByZWNlaXZlIHJlbW90ZSBldmVudHMuIFNvIHRoaXMgbWV0aG9kIGlzXG4gICAgICogdXNlZCB0byBjcmVhdGUgYSBzeW50aGVzaXplZCBSZW1vdGVFdmVudCB0aGF0IGNhbiBiZSB1c2VkIHRvIGFwcGx5IGFcbiAgICAgKiBDVVJSRU5UIHN0YXR1cyBjaGFuZ2UgdG8gYSBWaWV3LCBmb3IgcXVlcmllcyBleGVjdXRlZCBpbiBhIGRpZmZlcmVudCB0YWIuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seVxuICAgIHN0YXRpYyBjcmVhdGVTeW50aGVzaXplZFJlbW90ZUV2ZW50Rm9yQ3VycmVudENoYW5nZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgTWFwO1xuICAgICAgICByZXR1cm4gbi5zZXQodCwga24uY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlKHQsIGUpKSwgbmV3IE5uKGN0Lm1pbigpLCBuLCBDbigpLCBBbigpLCBTbigpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBUYXJnZXRDaGFuZ2Ugc3BlY2lmaWVzIHRoZSBzZXQgb2YgY2hhbmdlcyBmb3IgYSBzcGVjaWZpYyB0YXJnZXQgYXMgcGFydCBvZlxuICogYSBSZW1vdGVFdmVudC4gVGhlc2UgY2hhbmdlcyB0cmFjayB3aGljaCBkb2N1bWVudHMgYXJlIGFkZGVkLCBtb2RpZmllZCBvclxuICogcmVtb3ZlZCwgYXMgd2VsbCBhcyB0aGUgdGFyZ2V0J3MgcmVzdW1lIHRva2VuIGFuZCB3aGV0aGVyIHRoZSB0YXJnZXQgaXNcbiAqIG1hcmtlZCBDVVJSRU5ULlxuICogVGhlIGFjdHVhbCBjaGFuZ2VzICp0byogZG9jdW1lbnRzIGFyZSBub3QgcGFydCBvZiB0aGUgVGFyZ2V0Q2hhbmdlIHNpbmNlXG4gKiBkb2N1bWVudHMgbWF5IGJlIHBhcnQgb2YgbXVsdGlwbGUgdGFyZ2V0cy5cbiAqLyBjbGFzcyBrbiB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogQW4gb3BhcXVlLCBzZXJ2ZXItYXNzaWduZWQgdG9rZW4gdGhhdCBhbGxvd3Mgd2F0Y2hpbmcgYSBxdWVyeSB0byBiZSByZXN1bWVkXG4gICAgICogYWZ0ZXIgZGlzY29ubmVjdGluZyB3aXRob3V0IHJldHJhbnNtaXR0aW5nIGFsbCB0aGUgZGF0YSB0aGF0IG1hdGNoZXMgdGhlXG4gICAgICogcXVlcnkuIFRoZSByZXN1bWUgdG9rZW4gZXNzZW50aWFsbHkgaWRlbnRpZmllcyBhIHBvaW50IGluIHRpbWUgZnJvbSB3aGljaFxuICAgICAqIHRoZSBzZXJ2ZXIgc2hvdWxkIHJlc3VtZSBzZW5kaW5nIHJlc3VsdHMuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIFwiY3VycmVudFwiIChzeW5jZWQpIHN0YXR1cyBvZiB0aGlzIHRhcmdldC4gTm90ZSB0aGF0IFwiY3VycmVudFwiXG4gICAgICogaGFzIHNwZWNpYWwgbWVhbmluZyBpbiB0aGUgUlBDIHByb3RvY29sIHRoYXQgaW1wbGllcyB0aGF0IGEgdGFyZ2V0IGlzXG4gICAgICogYm90aCB1cC10by1kYXRlIGFuZCBjb25zaXN0ZW50IHdpdGggdGhlIHJlc3Qgb2YgdGhlIHdhdGNoIHN0cmVhbS5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBUaGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IHdlcmUgbmV3bHkgYXNzaWduZWQgdG8gdGhpcyB0YXJnZXQgYXMgcGFydCBvZlxuICAgICAqIHRoaXMgcmVtb3RlIGV2ZW50LlxuICAgICAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgd2VyZSBhbHJlYWR5IGFzc2lnbmVkIHRvIHRoaXMgdGFyZ2V0IGJ1dCByZWNlaXZlZFxuICAgICAqIGFuIHVwZGF0ZSBkdXJpbmcgdGhpcyByZW1vdGUgZXZlbnQuXG4gICAgICovXG4gICAgcywgXG4gICAgLyoqXG4gICAgICogVGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCB3ZXJlIHJlbW92ZWQgZnJvbSB0aGlzIHRhcmdldCBhcyBwYXJ0IG9mIHRoaXNcbiAgICAgKiByZW1vdGUgZXZlbnQuXG4gICAgICovXG4gICAgaSkge1xuICAgICAgICB0aGlzLnJlc3VtZVRva2VuID0gdCwgdGhpcy5jdXJyZW50ID0gZSwgdGhpcy5hZGRlZERvY3VtZW50cyA9IG4sIHRoaXMubW9kaWZpZWREb2N1bWVudHMgPSBzLCBcbiAgICAgICAgdGhpcy5yZW1vdmVkRG9jdW1lbnRzID0gaTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgdXNlZCB0byBjcmVhdGUgYSBzeW50aGVzaXplZCBUYXJnZXRDaGFuZ2VzIHRoYXQgY2FuIGJlIHVzZWQgdG9cbiAgICAgKiBhcHBseSBhIENVUlJFTlQgc3RhdHVzIGNoYW5nZSB0byBhIFZpZXcgKGZvciBxdWVyaWVzIGV4ZWN1dGVkIGluIGEgZGlmZmVyZW50XG4gICAgICogdGFiKSBvciBmb3IgbmV3IHF1ZXJpZXMgKHRvIHJhaXNlIHNuYXBzaG90cyB3aXRoIGNvcnJlY3QgQ1VSUkVOVCBzdGF0dXMpLlxuICAgICAqLyAgICBzdGF0aWMgY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBrbih5dC5FTVBUWV9CWVRFX1NUUklORywgZSwgU24oKSwgU24oKSwgU24oKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2hhbmdlZCBkb2N1bWVudCBhbmQgYSBsaXN0IG9mIHRhcmdldCBpZHMgdG8gd2hpY2ggdGhpcyBjaGFuZ2VcbiAqIGFwcGxpZXMuXG4gKlxuICogSWYgZG9jdW1lbnQgaGFzIGJlZW4gZGVsZXRlZCBOb0RvY3VtZW50IHdpbGwgYmUgcHJvdmlkZWQuXG4gKi8gY2xhc3MgeG4ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgbmV3IGRvY3VtZW50IGFwcGxpZXMgdG8gYWxsIG9mIHRoZXNlIHRhcmdldHMuICovXG4gICAgdCwgXG4gICAgLyoqIFRoZSBuZXcgZG9jdW1lbnQgaXMgcmVtb3ZlZCBmcm9tIGFsbCBvZiB0aGVzZSB0YXJnZXRzLiAqL1xuICAgIGUsIFxuICAgIC8qKiBUaGUga2V5IG9mIHRoZSBkb2N1bWVudCBmb3IgdGhpcyBjaGFuZ2UuICovXG4gICAgbiwgXG4gICAgLyoqXG4gICAgICogVGhlIG5ldyBkb2N1bWVudCBvciBOb0RvY3VtZW50IGlmIGl0IHdhcyBkZWxldGVkLiBJcyBudWxsIGlmIHRoZVxuICAgICAqIGRvY3VtZW50IHdlbnQgb3V0IG9mIHZpZXcgd2l0aG91dCB0aGUgc2VydmVyIHNlbmRpbmcgYSBuZXcgZG9jdW1lbnQuXG4gICAgICovXG4gICAgcykge1xuICAgICAgICB0aGlzLiQgPSB0LCB0aGlzLnJlbW92ZWRUYXJnZXRJZHMgPSBlLCB0aGlzLmtleSA9IG4sIHRoaXMuRiA9IHM7XG4gICAgfVxufVxuXG5jbGFzcyAkbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnRhcmdldElkID0gdCwgdGhpcy5PID0gZTtcbiAgICB9XG59XG5cbmNsYXNzIEZuIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogV2hhdCBraW5kIG9mIGNoYW5nZSBvY2N1cnJlZCB0byB0aGUgd2F0Y2ggdGFyZ2V0LiAqL1xuICAgIHQsIFxuICAgIC8qKiBUaGUgdGFyZ2V0IElEcyB0aGF0IHdlcmUgYWRkZWQvcmVtb3ZlZC9zZXQuICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogQW4gb3BhcXVlLCBzZXJ2ZXItYXNzaWduZWQgdG9rZW4gdGhhdCBhbGxvd3Mgd2F0Y2hpbmcgYSB0YXJnZXQgdG8gYmVcbiAgICAgKiByZXN1bWVkIGFmdGVyIGRpc2Nvbm5lY3Rpbmcgd2l0aG91dCByZXRyYW5zbWl0dGluZyBhbGwgdGhlIGRhdGEgdGhhdFxuICAgICAqIG1hdGNoZXMgdGhlIHRhcmdldC4gVGhlIHJlc3VtZSB0b2tlbiBlc3NlbnRpYWxseSBpZGVudGlmaWVzIGEgcG9pbnQgaW5cbiAgICAgKiB0aW1lIGZyb20gd2hpY2ggdGhlIHNlcnZlciBzaG91bGQgcmVzdW1lIHNlbmRpbmcgcmVzdWx0cy5cbiAgICAgKi9cbiAgICBuID0geXQuRU1QVFlfQllURV9TVFJJTkdcbiAgICAvKiogQW4gUlBDIGVycm9yIGluZGljYXRpbmcgd2h5IHRoZSB3YXRjaCBmYWlsZWQuICovICwgcyA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHQsIHRoaXMudGFyZ2V0SWRzID0gZSwgdGhpcy5yZXN1bWVUb2tlbiA9IG4sIHRoaXMuY2F1c2UgPSBzO1xuICAgIH1cbn1cblxuLyoqIFRyYWNrcyB0aGUgaW50ZXJuYWwgc3RhdGUgb2YgYSBXYXRjaCB0YXJnZXQuICovIGNsYXNzIE9uIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBudW1iZXIgb2YgcGVuZGluZyByZXNwb25zZXMgKGFkZHMgb3IgcmVtb3ZlcykgdGhhdCB3ZSBhcmUgd2FpdGluZyBvbi5cbiAgICAgICAgICogV2Ugb25seSBjb25zaWRlciB0YXJnZXRzIGFjdGl2ZSB0aGF0IGhhdmUgbm8gcGVuZGluZyByZXNwb25zZXMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLk0gPSAwLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEtlZXBzIHRyYWNrIG9mIHRoZSBkb2N1bWVudCBjaGFuZ2VzIHNpbmNlIHRoZSBsYXN0IHJhaXNlZCBzbmFwc2hvdC5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlc2UgY2hhbmdlcyBhcmUgY29udGludW91c2x5IHVwZGF0ZWQgYXMgd2UgcmVjZWl2ZSBkb2N1bWVudCB1cGRhdGVzIGFuZFxuICAgICAgICAgKiBhbHdheXMgcmVmbGVjdCB0aGUgY3VycmVudCBzZXQgb2YgY2hhbmdlcyBhZ2FpbnN0IHRoZSBsYXN0IGlzc3VlZCBzbmFwc2hvdC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuTCA9IEJuKCksIFxuICAgICAgICAvKiogU2VlIHB1YmxpYyBnZXR0ZXJzIGZvciBleHBsYW5hdGlvbnMgb2YgdGhlc2UgZmllbGRzLiAqL1xuICAgICAgICB0aGlzLkIgPSB5dC5FTVBUWV9CWVRFX1NUUklORywgdGhpcy5VID0gITEsIFxuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB0aGlzIHRhcmdldCBzdGF0ZSBzaG91bGQgYmUgaW5jbHVkZWQgaW4gdGhlIG5leHQgc25hcHNob3QuIFdlXG4gICAgICAgICAqIGluaXRpYWxpemUgdG8gdHJ1ZSBzbyB0aGF0IG5ld2x5LWFkZGVkIHRhcmdldHMgYXJlIGluY2x1ZGVkIGluIHRoZSBuZXh0XG4gICAgICAgICAqIFJlbW90ZUV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5xID0gITA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhpcyB0YXJnZXQgaGFzIGJlZW4gbWFya2VkICdjdXJyZW50Jy5cbiAgICAgKlxuICAgICAqICdDdXJyZW50JyBoYXMgc3BlY2lhbCBtZWFuaW5nIGluIHRoZSBSUEMgcHJvdG9jb2w6IEl0IGltcGxpZXMgdGhhdCB0aGVcbiAgICAgKiBXYXRjaCBiYWNrZW5kIGhhcyBzZW50IHVzIGFsbCBjaGFuZ2VzIHVwIHRvIHRoZSBwb2ludCBhdCB3aGljaCB0aGUgdGFyZ2V0XG4gICAgICogd2FzIGFkZGVkIGFuZCB0aGF0IHRoZSB0YXJnZXQgaXMgY29uc2lzdGVudCB3aXRoIHRoZSByZXN0IG9mIHRoZSB3YXRjaFxuICAgICAqIHN0cmVhbS5cbiAgICAgKi8gICAgZ2V0IGN1cnJlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlU7XG4gICAgfVxuICAgIC8qKiBUaGUgbGFzdCByZXN1bWUgdG9rZW4gc2VudCB0byB1cyBmb3IgdGhpcyB0YXJnZXQuICovICAgIGdldCByZXN1bWVUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQjtcbiAgICB9XG4gICAgLyoqIFdoZXRoZXIgdGhpcyB0YXJnZXQgaGFzIHBlbmRpbmcgdGFyZ2V0IGFkZHMgb3IgdGFyZ2V0IHJlbW92ZXMuICovICAgIGdldCBLKCkge1xuICAgICAgICByZXR1cm4gMCAhPT0gdGhpcy5NO1xuICAgIH1cbiAgICAvKiogV2hldGhlciB3ZSBoYXZlIG1vZGlmaWVkIGFueSBzdGF0ZSB0aGF0IHNob3VsZCB0cmlnZ2VyIGEgc25hcHNob3QuICovICAgIGdldCBqKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5xO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHRoZSByZXN1bWUgdG9rZW4gdG8gdGhlIFRhcmdldENoYW5nZSwgYnV0IG9ubHkgd2hlbiBpdCBoYXMgYSBuZXdcbiAgICAgKiB2YWx1ZS4gRW1wdHkgcmVzdW1lVG9rZW5zIGFyZSBkaXNjYXJkZWQuXG4gICAgICovICAgIFcodCkge1xuICAgICAgICB0LmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDAgJiYgKHRoaXMucSA9ICEwLCB0aGlzLkIgPSB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHRhcmdldCBjaGFuZ2UgZnJvbSB0aGUgY3VycmVudCBzZXQgb2YgY2hhbmdlcy5cbiAgICAgKlxuICAgICAqIFRvIHJlc2V0IHRoZSBkb2N1bWVudCBjaGFuZ2VzIGFmdGVyIHJhaXNpbmcgdGhpcyBzbmFwc2hvdCwgY2FsbFxuICAgICAqIGBjbGVhclBlbmRpbmdDaGFuZ2VzKClgLlxuICAgICAqLyAgICBHKCkge1xuICAgICAgICBsZXQgdCA9IFNuKCksIGUgPSBTbigpLCBuID0gU24oKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuTC5mb3JFYWNoKCgocywgaSkgPT4ge1xuICAgICAgICAgICAgc3dpdGNoIChpKSB7XG4gICAgICAgICAgICAgIGNhc2UgMCAvKiBBZGRlZCAqLyA6XG4gICAgICAgICAgICAgICAgdCA9IHQuYWRkKHMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMiAvKiBNb2RpZmllZCAqLyA6XG4gICAgICAgICAgICAgICAgZSA9IGUuYWRkKHMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMSAvKiBSZW1vdmVkICovIDpcbiAgICAgICAgICAgICAgICBuID0gbi5hZGQocyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBMKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSwgbmV3IGtuKHRoaXMuQiwgdGhpcy5VLCB0LCBlLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBkb2N1bWVudCBjaGFuZ2VzIGFuZCBzZXRzIGBoYXNQZW5kaW5nQ2hhbmdlc2AgdG8gZmFsc2UuXG4gICAgICovICAgIEgoKSB7XG4gICAgICAgIHRoaXMucSA9ICExLCB0aGlzLkwgPSBCbigpO1xuICAgIH1cbiAgICBKKHQsIGUpIHtcbiAgICAgICAgdGhpcy5xID0gITAsIHRoaXMuTCA9IHRoaXMuTC5pbnNlcnQodCwgZSk7XG4gICAgfVxuICAgIFkodCkge1xuICAgICAgICB0aGlzLnEgPSAhMCwgdGhpcy5MID0gdGhpcy5MLnJlbW92ZSh0KTtcbiAgICB9XG4gICAgWCgpIHtcbiAgICAgICAgdGhpcy5NICs9IDE7XG4gICAgfVxuICAgIFooKSB7XG4gICAgICAgIHRoaXMuTSAtPSAxO1xuICAgIH1cbiAgICB0dCgpIHtcbiAgICAgICAgdGhpcy5xID0gITAsIHRoaXMuVSA9ICEwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGhlbHBlciBjbGFzcyB0byBhY2N1bXVsYXRlIHdhdGNoIGNoYW5nZXMgaW50byBhIFJlbW90ZUV2ZW50LlxuICovXG5jbGFzcyBNbiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmV0ID0gdCwgXG4gICAgICAgIC8qKiBUaGUgaW50ZXJuYWwgc3RhdGUgb2YgYWxsIHRyYWNrZWQgdGFyZ2V0cy4gKi9cbiAgICAgICAgdGhpcy5udCA9IG5ldyBNYXAsIFxuICAgICAgICAvKiogS2VlcHMgdHJhY2sgb2YgdGhlIGRvY3VtZW50cyB0byB1cGRhdGUgc2luY2UgdGhlIGxhc3QgcmFpc2VkIHNuYXBzaG90LiAqL1xuICAgICAgICB0aGlzLnN0ID0gQW4oKSwgXG4gICAgICAgIC8qKiBBIG1hcHBpbmcgb2YgZG9jdW1lbnQga2V5cyB0byB0aGVpciBzZXQgb2YgdGFyZ2V0IElEcy4gKi9cbiAgICAgICAgdGhpcy5pdCA9IExuKCksIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBsaXN0IG9mIHRhcmdldHMgd2l0aCBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoZXMuIFRoZXNlIHRhcmdldHMgYXJlXG4gICAgICAgICAqIGtub3duIHRvIGJlIGluY29uc2lzdGVudCBhbmQgdGhlaXIgbGlzdGVucyBuZWVkcyB0byBiZSByZS1lc3RhYmxpc2hlZCBieVxuICAgICAgICAgKiBSZW1vdGVTdG9yZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucnQgPSBuZXcgVG4oaXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzZXMgYW5kIGFkZHMgdGhlIERvY3VtZW50V2F0Y2hDaGFuZ2UgdG8gdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMuXG4gICAgICovICAgIG90KHQpIHtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHQuJCkgdC5GICYmIHQuRi5pc0ZvdW5kRG9jdW1lbnQoKSA/IHRoaXMuYXQoZSwgdC5GKSA6IHRoaXMuY3QoZSwgdC5rZXksIHQuRik7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0LnJlbW92ZWRUYXJnZXRJZHMpIHRoaXMuY3QoZSwgdC5rZXksIHQuRik7XG4gICAgfVxuICAgIC8qKiBQcm9jZXNzZXMgYW5kIGFkZHMgdGhlIFdhdGNoVGFyZ2V0Q2hhbmdlIHRvIHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzLiAqLyAgICB1dCh0KSB7XG4gICAgICAgIHRoaXMuZm9yRWFjaFRhcmdldCh0LCAoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5odChlKTtcbiAgICAgICAgICAgIHN3aXRjaCAodC5zdGF0ZSkge1xuICAgICAgICAgICAgICBjYXNlIDAgLyogTm9DaGFuZ2UgKi8gOlxuICAgICAgICAgICAgICAgIHRoaXMubHQoZSkgJiYgbi5XKHQucmVzdW1lVG9rZW4pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMSAvKiBBZGRlZCAqLyA6XG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBkZWNyZW1lbnQgdGhlIG51bWJlciBvZiBwZW5kaW5nIGFja3MgbmVlZGVkIGZyb20gd2F0Y2hcbiAgICAgICAgICAgICAgICAvLyBmb3IgdGhpcyB0YXJnZXRJZC5cbiAgICAgICAgICAgICAgICBuLlooKSwgbi5LIHx8IFxuICAgICAgICAgICAgICAgIC8vIFdlIGhhdmUgYSBmcmVzaGx5IGFkZGVkIHRhcmdldCwgc28gd2UgbmVlZCB0byByZXNldCBhbnkgc3RhdGVcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHdlIGhhZCBwcmV2aW91c2x5LiBUaGlzIGNhbiBoYXBwZW4gZS5nLiB3aGVuIHJlbW92ZSBhbmQgYWRkXG4gICAgICAgICAgICAgICAgLy8gYmFjayBhIHRhcmdldCBmb3IgZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaGVzLlxuICAgICAgICAgICAgICAgIG4uSCgpLCBuLlcodC5yZXN1bWVUb2tlbik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAyIC8qIFJlbW92ZWQgKi8gOlxuICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8ga2VlcCB0cmFjayBvZiByZW1vdmVkIHRhcmdldHMgdG8gd2UgY2FuIHBvc3QtZmlsdGVyIGFuZFxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBhbnkgdGFyZ2V0IGNoYW5nZXMuXG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBkZWNyZW1lbnQgdGhlIG51bWJlciBvZiBwZW5kaW5nIGFja3MgbmVlZGVkIGZyb20gd2F0Y2hcbiAgICAgICAgICAgICAgICAvLyBmb3IgdGhpcyB0YXJnZXRJZC5cbiAgICAgICAgICAgICAgICBuLlooKSwgbi5LIHx8IHRoaXMucmVtb3ZlVGFyZ2V0KGUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMyAvKiBDdXJyZW50ICovIDpcbiAgICAgICAgICAgICAgICB0aGlzLmx0KGUpICYmIChuLnR0KCksIG4uVyh0LnJlc3VtZVRva2VuKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSA0IC8qIFJlc2V0ICovIDpcbiAgICAgICAgICAgICAgICB0aGlzLmx0KGUpICYmIChcbiAgICAgICAgICAgICAgICAvLyBSZXNldCB0aGUgdGFyZ2V0IGFuZCBzeW50aGVzaXplcyByZW1vdmVzIGZvciBhbGwgZXhpc3RpbmdcbiAgICAgICAgICAgICAgICAvLyBkb2N1bWVudHMuIFRoZSBiYWNrZW5kIHdpbGwgcmUtYWRkIGFueSBkb2N1bWVudHMgdGhhdCBzdGlsbFxuICAgICAgICAgICAgICAgIC8vIG1hdGNoIHRoZSB0YXJnZXQgYmVmb3JlIGl0IHNlbmRzIHRoZSBuZXh0IGdsb2JhbCBzbmFwc2hvdC5cbiAgICAgICAgICAgICAgICB0aGlzLmZ0KGUpLCBuLlcodC5yZXN1bWVUb2tlbikpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgTCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEl0ZXJhdGVzIG92ZXIgYWxsIHRhcmdldElkcyB0aGF0IHRoZSB3YXRjaCBjaGFuZ2UgYXBwbGllcyB0bzogZWl0aGVyIHRoZVxuICAgICAqIHRhcmdldElkcyBleHBsaWNpdGx5IGxpc3RlZCBpbiB0aGUgY2hhbmdlIG9yIHRoZSB0YXJnZXRJZHMgb2YgYWxsIGN1cnJlbnRseVxuICAgICAqIGFjdGl2ZSB0YXJnZXRzLlxuICAgICAqLyAgICBmb3JFYWNoVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgdC50YXJnZXRJZHMubGVuZ3RoID4gMCA/IHQudGFyZ2V0SWRzLmZvckVhY2goZSkgOiB0aGlzLm50LmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmx0KG4pICYmIGUobik7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyBleGlzdGVuY2UgZmlsdGVycyBhbmQgc3ludGhlc2l6ZXMgZGVsZXRlcyBmb3IgZmlsdGVyIG1pc21hdGNoZXMuXG4gICAgICogVGFyZ2V0cyB0aGF0IGFyZSBpbnZhbGlkYXRlZCBieSBmaWx0ZXIgbWlzbWF0Y2hlcyBhcmUgYWRkZWQgdG9cbiAgICAgKiBgcGVuZGluZ1RhcmdldFJlc2V0c2AuXG4gICAgICovICAgIGR0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQudGFyZ2V0SWQsIG4gPSB0Lk8uY291bnQsIHMgPSB0aGlzLnd0KGUpO1xuICAgICAgICBpZiAocykge1xuICAgICAgICAgICAgY29uc3QgdCA9IHMudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKFh0KHQpKSBpZiAoMCA9PT0gbikge1xuICAgICAgICAgICAgICAgIC8vIFRoZSBleGlzdGVuY2UgZmlsdGVyIHRvbGQgdXMgdGhlIGRvY3VtZW50IGRvZXMgbm90IGV4aXN0LiBXZSBkZWR1Y2VcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHRoaXMgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3QgYW5kIGFwcGx5IGEgZGVsZXRlZCBkb2N1bWVudCB0b1xuICAgICAgICAgICAgICAgIC8vIG91ciB1cGRhdGVzLiBXaXRob3V0IGFwcGx5aW5nIHRoaXMgZGVsZXRlZCBkb2N1bWVudCB0aGVyZSBtaWdodCBiZVxuICAgICAgICAgICAgICAgIC8vIGFub3RoZXIgcXVlcnkgdGhhdCB3aWxsIHJhaXNlIHRoaXMgZG9jdW1lbnQgYXMgcGFydCBvZiBhIHNuYXBzaG90XG4gICAgICAgICAgICAgICAgLy8gdW50aWwgaXQgaXMgcmVzb2x2ZWQsIGVzc2VudGlhbGx5IGV4cG9zaW5nIGluY29uc2lzdGVuY3kgYmV0d2VlblxuICAgICAgICAgICAgICAgIC8vIHF1ZXJpZXMuXG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBTdCh0LnBhdGgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3QoZSwgbiwgV3QubmV3Tm9Eb2N1bWVudChuLCBjdC5taW4oKSkpO1xuICAgICAgICAgICAgfSBlbHNlIEIoMSA9PT0gbik7IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX3QoZSkgIT09IG4gJiYgKFxuICAgICAgICAgICAgICAgIC8vIEV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2g6IFdlIHJlc2V0IHRoZSBtYXBwaW5nIGFuZCByYWlzZSBhIG5ld1xuICAgICAgICAgICAgICAgIC8vIHNuYXBzaG90IHdpdGggYGlzRnJvbUNhY2hlOnRydWVgLlxuICAgICAgICAgICAgICAgIHRoaXMuZnQoZSksIHRoaXMucnQgPSB0aGlzLnJ0LmFkZChlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhlIGN1cnJlbnRseSBhY2N1bXVsYXRlZCBzdGF0ZSBpbnRvIGEgcmVtb3RlIGV2ZW50IGF0IHRoZVxuICAgICAqIHByb3ZpZGVkIHNuYXBzaG90IHZlcnNpb24uIFJlc2V0cyB0aGUgYWNjdW11bGF0ZWQgY2hhbmdlcyBiZWZvcmUgcmV0dXJuaW5nLlxuICAgICAqLyAgICBndCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgTWFwO1xuICAgICAgICB0aGlzLm50LmZvckVhY2goKChuLCBzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gdGhpcy53dChzKTtcbiAgICAgICAgICAgIGlmIChpKSB7XG4gICAgICAgICAgICAgICAgaWYgKG4uY3VycmVudCAmJiBYdChpLnRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRG9jdW1lbnQgcXVlcmllcyBmb3IgZG9jdW1lbnQgdGhhdCBkb24ndCBleGlzdCBjYW4gcHJvZHVjZSBhbiBlbXB0eVxuICAgICAgICAgICAgICAgICAgICAvLyByZXN1bHQgc2V0LiBUbyB1cGRhdGUgb3VyIGxvY2FsIGNhY2hlLCB3ZSBzeW50aGVzaXplIGEgZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLy8gZGVsZXRlIGlmIHdlIGhhdmUgbm90IHByZXZpb3VzbHkgcmVjZWl2ZWQgdGhlIGRvY3VtZW50LiBUaGlzXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc29sdmVzIHRoZSBsaW1ibyBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQsIHJlbW92aW5nIGl0IGZyb21cbiAgICAgICAgICAgICAgICAgICAgLy8gbGltYm9Eb2N1bWVudFJlZnMuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogSWRlYWxseSB3ZSB3b3VsZCBoYXZlIGFuIGV4cGxpY2l0IGxvb2t1cCB0YXJnZXRcbiAgICAgICAgICAgICAgICAgICAgLy8gaW5zdGVhZCByZXN1bHRpbmcgaW4gYW4gZXhwbGljaXQgZGVsZXRlIG1lc3NhZ2UgYW5kIHdlIGNvdWxkXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSB0aGlzIHNwZWNpYWwgbG9naWMuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgU3QoaS50YXJnZXQucGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIG51bGwgIT09IHRoaXMuc3QuZ2V0KGUpIHx8IHRoaXMueXQocywgZSkgfHwgdGhpcy5jdChzLCBlLCBXdC5uZXdOb0RvY3VtZW50KGUsIHQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbi5qICYmIChlLnNldChzLCBuLkcoKSksIG4uSCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBsZXQgbiA9IFNuKCk7XG4gICAgICAgIC8vIFdlIGV4dHJhY3QgdGhlIHNldCBvZiBsaW1iby1vbmx5IGRvY3VtZW50IHVwZGF0ZXMgYXMgdGhlIEdDIGxvZ2ljXG4gICAgICAgIC8vIHNwZWNpYWwtY2FzZXMgZG9jdW1lbnRzIHRoYXQgZG8gbm90IGFwcGVhciBpbiB0aGUgdGFyZ2V0IGNhY2hlLlxuICAgICAgICBcbiAgICAgICAgLy8gVE9ETyhnc29sdGlzKTogRXhwYW5kIG9uIHRoaXMgY29tbWVudCBvbmNlIEdDIGlzIGF2YWlsYWJsZSBpbiB0aGUgSlNcbiAgICAgICAgLy8gY2xpZW50LlxuICAgICAgICAgICAgICAgIHRoaXMuaXQuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGxldCBzID0gITA7XG4gICAgICAgICAgICBlLmZvckVhY2hXaGlsZSgodCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMud3QodCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuICFlIHx8IDIgLyogTGltYm9SZXNvbHV0aW9uICovID09PSBlLnB1cnBvc2UgfHwgKHMgPSAhMSwgITEpO1xuICAgICAgICAgICAgfSkpLCBzICYmIChuID0gbi5hZGQodCkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgTm4odCwgZSwgdGhpcy5ydCwgdGhpcy5zdCwgbik7XG4gICAgICAgIHJldHVybiB0aGlzLnN0ID0gQW4oKSwgdGhpcy5pdCA9IExuKCksIHRoaXMucnQgPSBuZXcgVG4oaXQpLCBzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIHRoZSBwcm92aWRlZCBkb2N1bWVudCB0byB0aGUgaW50ZXJuYWwgbGlzdCBvZiBkb2N1bWVudCB1cGRhdGVzIGFuZFxuICAgICAqIGl0cyBkb2N1bWVudCBrZXkgdG8gdGhlIGdpdmVuIHRhcmdldCdzIG1hcHBpbmcuXG4gICAgICovXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAgICBhdCh0LCBlKSB7XG4gICAgICAgIGlmICghdGhpcy5sdCh0KSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBuID0gdGhpcy55dCh0LCBlLmtleSkgPyAyIC8qIE1vZGlmaWVkICovIDogMCAvKiBBZGRlZCAqLztcbiAgICAgICAgdGhpcy5odCh0KS5KKGUua2V5LCBuKSwgdGhpcy5zdCA9IHRoaXMuc3QuaW5zZXJ0KGUua2V5LCBlKSwgdGhpcy5pdCA9IHRoaXMuaXQuaW5zZXJ0KGUua2V5LCB0aGlzLlR0KGUua2V5KS5hZGQodCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBwcm92aWRlZCBkb2N1bWVudCBmcm9tIHRoZSB0YXJnZXQgbWFwcGluZy4gSWYgdGhlXG4gICAgICogZG9jdW1lbnQgbm8gbG9uZ2VyIG1hdGNoZXMgdGhlIHRhcmdldCwgYnV0IHRoZSBkb2N1bWVudCdzIHN0YXRlIGlzIHN0aWxsXG4gICAgICoga25vd24gKGUuZy4gd2Uga25vdyB0aGF0IHRoZSBkb2N1bWVudCB3YXMgZGVsZXRlZCBvciB3ZSByZWNlaXZlZCB0aGUgY2hhbmdlXG4gICAgICogdGhhdCBjYXVzZWQgdGhlIGZpbHRlciBtaXNtYXRjaCksIHRoZSBuZXcgZG9jdW1lbnQgY2FuIGJlIHByb3ZpZGVkXG4gICAgICogdG8gdXBkYXRlIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUuXG4gICAgICovXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAgICBjdCh0LCBlLCBuKSB7XG4gICAgICAgIGlmICghdGhpcy5sdCh0KSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5odCh0KTtcbiAgICAgICAgdGhpcy55dCh0LCBlKSA/IHMuSihlLCAxIC8qIFJlbW92ZWQgKi8pIDogXG4gICAgICAgIC8vIFRoZSBkb2N1bWVudCBtYXkgaGF2ZSBlbnRlcmVkIGFuZCBsZWZ0IHRoZSB0YXJnZXQgYmVmb3JlIHdlIHJhaXNlZCBhXG4gICAgICAgIC8vIHNuYXBzaG90LCBzbyB3ZSBjYW4ganVzdCBpZ25vcmUgdGhlIGNoYW5nZS5cbiAgICAgICAgcy5ZKGUpLCB0aGlzLml0ID0gdGhpcy5pdC5pbnNlcnQoZSwgdGhpcy5UdChlKS5kZWxldGUodCkpLCBuICYmICh0aGlzLnN0ID0gdGhpcy5zdC5pbnNlcnQoZSwgbikpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXQodCkge1xuICAgICAgICB0aGlzLm50LmRlbGV0ZSh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBjb3VudCBvZiBkb2N1bWVudHMgaW4gdGhlIHRhcmdldC4gVGhpcyBpbmNsdWRlcyBib3RoXG4gICAgICogdGhlIG51bWJlciBvZiBkb2N1bWVudHMgdGhhdCB0aGUgTG9jYWxTdG9yZSBjb25zaWRlcnMgdG8gYmUgcGFydCBvZiB0aGVcbiAgICAgKiB0YXJnZXQgYXMgd2VsbCBhcyBhbnkgYWNjdW11bGF0ZWQgY2hhbmdlcy5cbiAgICAgKi8gICAgX3QodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5odCh0KS5HKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmV0LmdldFJlbW90ZUtleXNGb3JUYXJnZXQodCkuc2l6ZSArIGUuYWRkZWREb2N1bWVudHMuc2l6ZSAtIGUucmVtb3ZlZERvY3VtZW50cy5zaXplO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbmNyZW1lbnQgdGhlIG51bWJlciBvZiBhY2tzIG5lZWRlZCBmcm9tIHdhdGNoIGJlZm9yZSB3ZSBjYW4gY29uc2lkZXIgdGhlXG4gICAgICogc2VydmVyIHRvIGJlICdpbi1zeW5jJyB3aXRoIHRoZSBjbGllbnQncyBhY3RpdmUgdGFyZ2V0cy5cbiAgICAgKi8gICAgWCh0KSB7XG4gICAgICAgIHRoaXMuaHQodCkuWCgpO1xuICAgIH1cbiAgICBodCh0KSB7XG4gICAgICAgIGxldCBlID0gdGhpcy5udC5nZXQodCk7XG4gICAgICAgIHJldHVybiBlIHx8IChlID0gbmV3IE9uLCB0aGlzLm50LnNldCh0LCBlKSksIGU7XG4gICAgfVxuICAgIFR0KHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLml0LmdldCh0KTtcbiAgICAgICAgcmV0dXJuIGUgfHwgKGUgPSBuZXcgVG4oaXQpLCB0aGlzLml0ID0gdGhpcy5pdC5pbnNlcnQodCwgZSkpLCBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBWZXJpZmllcyB0aGF0IHRoZSB1c2VyIGlzIHN0aWxsIGludGVyZXN0ZWQgaW4gdGhpcyB0YXJnZXQgKGJ5IGNhbGxpbmdcbiAgICAgKiBgZ2V0VGFyZ2V0RGF0YUZvclRhcmdldCgpYCkgYW5kIHRoYXQgd2UgYXJlIG5vdCB3YWl0aW5nIGZvciBwZW5kaW5nIEFERHNcbiAgICAgKiBmcm9tIHdhdGNoLlxuICAgICAqLyAgICBsdCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBudWxsICE9PSB0aGlzLnd0KHQpO1xuICAgICAgICByZXR1cm4gZSB8fCAkKFwiV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yXCIsIFwiRGV0ZWN0ZWQgaW5hY3RpdmUgdGFyZ2V0XCIsIHQpLCBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBUYXJnZXREYXRhIGZvciBhbiBhY3RpdmUgdGFyZ2V0IChpLmUuIGEgdGFyZ2V0IHRoYXQgdGhlIHVzZXJcbiAgICAgKiBpcyBzdGlsbCBpbnRlcmVzdGVkIGluIHRoYXQgaGFzIG5vIG91dHN0YW5kaW5nIHRhcmdldCBjaGFuZ2UgcmVxdWVzdHMpLlxuICAgICAqLyAgICB3dCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLm50LmdldCh0KTtcbiAgICAgICAgcmV0dXJuIGUgJiYgZS5LID8gbnVsbCA6IHRoaXMuZXQuRXQodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgc3RhdGUgb2YgYSBXYXRjaCB0YXJnZXQgdG8gaXRzIGluaXRpYWwgc3RhdGUgKGUuZy4gc2V0c1xuICAgICAqICdjdXJyZW50JyB0byBmYWxzZSwgY2xlYXJzIHRoZSByZXN1bWUgdG9rZW4gYW5kIHJlbW92ZXMgaXRzIHRhcmdldCBtYXBwaW5nXG4gICAgICogZnJvbSBhbGwgZG9jdW1lbnRzKS5cbiAgICAgKi8gICAgZnQodCkge1xuICAgICAgICB0aGlzLm50LnNldCh0LCBuZXcgT24pO1xuICAgICAgICB0aGlzLmV0LmdldFJlbW90ZUtleXNGb3JUYXJnZXQodCkuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmN0KHQsIGUsIC8qdXBkYXRlZERvY3VtZW50PSovIG51bGwpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciB0aGUgTG9jYWxTdG9yZSBjb25zaWRlcnMgdGhlIGRvY3VtZW50IHRvIGJlIHBhcnQgb2YgdGhlXG4gICAgICogc3BlY2lmaWVkIHRhcmdldC5cbiAgICAgKi8gICAgeXQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5ldC5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KHQpLmhhcyhlKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIExuKCkge1xuICAgIHJldHVybiBuZXcgZ24oU3QuY29tcGFyYXRvcik7XG59XG5cbmZ1bmN0aW9uIEJuKCkge1xuICAgIHJldHVybiBuZXcgZ24oU3QuY29tcGFyYXRvcik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IFVuID0gKCgpID0+IHtcbiAgICBjb25zdCB0ID0ge1xuICAgICAgICBhc2M6IFwiQVNDRU5ESU5HXCIsXG4gICAgICAgIGRlc2M6IFwiREVTQ0VORElOR1wiXG4gICAgfTtcbiAgICByZXR1cm4gdDtcbn0pKCksIHFuID0gKCgpID0+IHtcbiAgICBjb25zdCB0ID0ge1xuICAgICAgICBcIjxcIjogXCJMRVNTX1RIQU5cIixcbiAgICAgICAgXCI8PVwiOiBcIkxFU1NfVEhBTl9PUl9FUVVBTFwiLFxuICAgICAgICBcIj5cIjogXCJHUkVBVEVSX1RIQU5cIixcbiAgICAgICAgXCI+PVwiOiBcIkdSRUFURVJfVEhBTl9PUl9FUVVBTFwiLFxuICAgICAgICBcIj09XCI6IFwiRVFVQUxcIixcbiAgICAgICAgXCIhPVwiOiBcIk5PVF9FUVVBTFwiLFxuICAgICAgICBcImFycmF5LWNvbnRhaW5zXCI6IFwiQVJSQVlfQ09OVEFJTlNcIixcbiAgICAgICAgaW46IFwiSU5cIixcbiAgICAgICAgXCJub3QtaW5cIjogXCJOT1RfSU5cIixcbiAgICAgICAgXCJhcnJheS1jb250YWlucy1hbnlcIjogXCJBUlJBWV9DT05UQUlOU19BTllcIlxuICAgIH07XG4gICAgcmV0dXJuIHQ7XG59KSgpO1xuXG4vKipcbiAqIFRoaXMgY2xhc3MgZ2VuZXJhdGVzIEpzb25PYmplY3QgdmFsdWVzIGZvciB0aGUgRGF0YXN0b3JlIEFQSSBzdWl0YWJsZSBmb3JcbiAqIHNlbmRpbmcgdG8gZWl0aGVyIEdSUEMgc3R1YiBtZXRob2RzIG9yIHZpYSB0aGUgSlNPTi9IVFRQIFJFU1QgQVBJLlxuICpcbiAqIFRoZSBzZXJpYWxpemVyIHN1cHBvcnRzIGJvdGggUHJvdG9idWYuanMgYW5kIFByb3RvMyBKU09OIGZvcm1hdHMuIEJ5XG4gKiBzZXR0aW5nIGB1c2VQcm90bzNKc29uYCB0byB0cnVlLCB0aGUgc2VyaWFsaXplciB3aWxsIHVzZSB0aGUgUHJvdG8zIEpTT05cbiAqIGZvcm1hdC5cbiAqXG4gKiBGb3IgYSBkZXNjcmlwdGlvbiBvZiB0aGUgUHJvdG8zIEpTT04gZm9ybWF0IGNoZWNrXG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9wcm90b2NvbC1idWZmZXJzL2RvY3MvcHJvdG8zI2pzb25cbiAqXG4gKiBUT0RPKGtsaW10KTogV2UgY2FuIHJlbW92ZSB0aGUgZGF0YWJhc2VJZCBhcmd1bWVudCBpZiB3ZSBrZWVwIHRoZSBmdWxsXG4gKiByZXNvdXJjZSBuYW1lIGluIGRvY3VtZW50cy5cbiAqL1xuY2xhc3MgS24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5kYXRhYmFzZUlkID0gdCwgdGhpcy5DID0gZTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHZhbHVlIGZvciBhIERhdGUgdGhhdCdzIGFwcHJvcHJpYXRlIHRvIHB1dCBpbnRvIGEgcHJvdG8uXG4gKi9cbmZ1bmN0aW9uIGpuKHQsIGUpIHtcbiAgICBpZiAodC5DKSB7XG4gICAgICAgIHJldHVybiBgJHtuZXcgRGF0ZSgxZTMgKiBlLnNlY29uZHMpLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgvXFwuXFxkKi8sIFwiXCIpLnJlcGxhY2UoXCJaXCIsIFwiXCIpfS4keyhcIjAwMDAwMDAwMFwiICsgZS5uYW5vc2Vjb25kcykuc2xpY2UoLTkpfVpgO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBzZWNvbmRzOiBcIlwiICsgZS5zZWNvbmRzLFxuICAgICAgICBuYW5vczogZS5uYW5vc2Vjb25kc1xuICAgIH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHZhbHVlIGZvciBieXRlcyB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGluIGEgcHJvdG8uXG4gKlxuICogVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAqL1xuZnVuY3Rpb24gUW4odCwgZSkge1xuICAgIHJldHVybiB0LkMgPyBlLnRvQmFzZTY0KCkgOiBlLnRvVWludDhBcnJheSgpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBCeXRlU3RyaW5nIGJhc2VkIG9uIHRoZSBwcm90byBzdHJpbmcgdmFsdWUuXG4gKi8gZnVuY3Rpb24gV24odCwgZSkge1xuICAgIHJldHVybiBqbih0LCBlLnRvVGltZXN0YW1wKCkpO1xufVxuXG5mdW5jdGlvbiBHbih0KSB7XG4gICAgcmV0dXJuIEIoISF0KSwgY3QuZnJvbVRpbWVzdGFtcChmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBUdCh0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBhdChlLnNlY29uZHMsIGUubmFub3MpO1xuICAgIH0odCkpO1xufVxuXG5mdW5jdGlvbiB6bih0LCBlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBkdChbIFwicHJvamVjdHNcIiwgdC5wcm9qZWN0SWQsIFwiZGF0YWJhc2VzXCIsIHQuZGF0YWJhc2UgXSk7XG4gICAgfSh0KS5jaGlsZChcImRvY3VtZW50c1wiKS5jaGlsZChlKS5jYW5vbmljYWxTdHJpbmcoKTtcbn1cblxuZnVuY3Rpb24gSG4odCkge1xuICAgIGNvbnN0IGUgPSBkdC5mcm9tU3RyaW5nKHQpO1xuICAgIHJldHVybiBCKEFzKGUpKSwgZTtcbn1cblxuZnVuY3Rpb24gSm4odCwgZSkge1xuICAgIHJldHVybiB6bih0LmRhdGFiYXNlSWQsIGUucGF0aCk7XG59XG5cbmZ1bmN0aW9uIFluKHQsIGUpIHtcbiAgICBjb25zdCBuID0gSG4oZSk7XG4gICAgaWYgKG4uZ2V0KDEpICE9PSB0LmRhdGFiYXNlSWQucHJvamVjdElkKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiVHJpZWQgdG8gZGVzZXJpYWxpemUga2V5IGZyb20gZGlmZmVyZW50IHByb2plY3Q6IFwiICsgbi5nZXQoMSkgKyBcIiB2cyBcIiArIHQuZGF0YWJhc2VJZC5wcm9qZWN0SWQpO1xuICAgIGlmIChuLmdldCgzKSAhPT0gdC5kYXRhYmFzZUlkLmRhdGFiYXNlKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiVHJpZWQgdG8gZGVzZXJpYWxpemUga2V5IGZyb20gZGlmZmVyZW50IGRhdGFiYXNlOiBcIiArIG4uZ2V0KDMpICsgXCIgdnMgXCIgKyB0LmRhdGFiYXNlSWQuZGF0YWJhc2UpO1xuICAgIHJldHVybiBuZXcgU3QoZXMobikpO1xufVxuXG5mdW5jdGlvbiBYbih0LCBlKSB7XG4gICAgcmV0dXJuIHpuKHQuZGF0YWJhc2VJZCwgZSk7XG59XG5cbmZ1bmN0aW9uIFpuKHQpIHtcbiAgICBjb25zdCBlID0gSG4odCk7XG4gICAgLy8gSW4gdjFiZXRhMSBxdWVyaWVzIGZvciBjb2xsZWN0aW9ucyBhdCB0aGUgcm9vdCBkaWQgbm90IGhhdmUgYSB0cmFpbGluZ1xuICAgIC8vIFwiL2RvY3VtZW50c1wiLiBJbiB2MSBhbGwgcmVzb3VyY2UgcGF0aHMgY29udGFpbiBcIi9kb2N1bWVudHNcIi4gUHJlc2VydmUgdGhlXG4gICAgLy8gYWJpbGl0eSB0byByZWFkIHRoZSB2MWJldGExIGZvcm0gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBxdWVyaWVzIHBlcnNpc3RlZFxuICAgIC8vIGluIHRoZSBsb2NhbCB0YXJnZXQgY2FjaGUuXG4gICAgICAgIHJldHVybiA0ID09PSBlLmxlbmd0aCA/IGR0LmVtcHR5UGF0aCgpIDogZXMoZSk7XG59XG5cbmZ1bmN0aW9uIHRzKHQpIHtcbiAgICByZXR1cm4gbmV3IGR0KFsgXCJwcm9qZWN0c1wiLCB0LmRhdGFiYXNlSWQucHJvamVjdElkLCBcImRhdGFiYXNlc1wiLCB0LmRhdGFiYXNlSWQuZGF0YWJhc2UgXSkuY2Fub25pY2FsU3RyaW5nKCk7XG59XG5cbmZ1bmN0aW9uIGVzKHQpIHtcbiAgICByZXR1cm4gQih0Lmxlbmd0aCA+IDQgJiYgXCJkb2N1bWVudHNcIiA9PT0gdC5nZXQoNCkpLCB0LnBvcEZpcnN0KDUpO1xufVxuXG4vKiogQ3JlYXRlcyBhIERvY3VtZW50IHByb3RvIGZyb20ga2V5IGFuZCBmaWVsZHMgKGJ1dCBubyBjcmVhdGUvdXBkYXRlIHRpbWUpICovIGZ1bmN0aW9uIG5zKHQsIGUsIG4pIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBKbih0LCBlKSxcbiAgICAgICAgZmllbGRzOiBuLnZhbHVlLm1hcFZhbHVlLmZpZWxkc1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIHNzKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gWW4odCwgZS5uYW1lKSwgaSA9IEduKGUudXBkYXRlVGltZSksIHIgPSBuZXcganQoe1xuICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgZmllbGRzOiBlLmZpZWxkc1xuICAgICAgICB9XG4gICAgfSksIG8gPSBXdC5uZXdGb3VuZERvY3VtZW50KHMsIGksIHIpO1xuICAgIHJldHVybiBuICYmIG8uc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCksIG4gPyBvLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpIDogbztcbn1cblxuZnVuY3Rpb24gaXModCwgZSkge1xuICAgIHJldHVybiBcImZvdW5kXCIgaW4gZSA/IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgQighIWUuZm91bmQpLCBlLmZvdW5kLm5hbWUsIGUuZm91bmQudXBkYXRlVGltZTtcbiAgICAgICAgY29uc3QgbiA9IFluKHQsIGUuZm91bmQubmFtZSksIHMgPSBHbihlLmZvdW5kLnVwZGF0ZVRpbWUpLCBpID0gbmV3IGp0KHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiBlLmZvdW5kLmZpZWxkc1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFd0Lm5ld0ZvdW5kRG9jdW1lbnQobiwgcywgaSk7XG4gICAgfSh0LCBlKSA6IFwibWlzc2luZ1wiIGluIGUgPyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIEIoISFlLm1pc3NpbmcpLCBCKCEhZS5yZWFkVGltZSk7XG4gICAgICAgIGNvbnN0IG4gPSBZbih0LCBlLm1pc3NpbmcpLCBzID0gR24oZS5yZWFkVGltZSk7XG4gICAgICAgIHJldHVybiBXdC5uZXdOb0RvY3VtZW50KG4sIHMpO1xuICAgIH0odCwgZSkgOiBMKCk7XG59XG5cbmZ1bmN0aW9uIHJzKHQsIGUpIHtcbiAgICBsZXQgbjtcbiAgICBpZiAoXCJ0YXJnZXRDaGFuZ2VcIiBpbiBlKSB7XG4gICAgICAgIGUudGFyZ2V0Q2hhbmdlO1xuICAgICAgICAvLyBwcm90bzMgZGVmYXVsdCB2YWx1ZSBpcyB1bnNldCBpbiBKU09OICh1bmRlZmluZWQpLCBzbyB1c2UgJ05PX0NIQU5HRSdcbiAgICAgICAgLy8gaWYgdW5zZXRcbiAgICAgICAgY29uc3QgcyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBcIk5PX0NIQU5HRVwiID09PSB0ID8gMCAvKiBOb0NoYW5nZSAqLyA6IFwiQUREXCIgPT09IHQgPyAxIC8qIEFkZGVkICovIDogXCJSRU1PVkVcIiA9PT0gdCA/IDIgLyogUmVtb3ZlZCAqLyA6IFwiQ1VSUkVOVFwiID09PSB0ID8gMyAvKiBDdXJyZW50ICovIDogXCJSRVNFVFwiID09PSB0ID8gNCAvKiBSZXNldCAqLyA6IEwoKTtcbiAgICAgICAgfShlLnRhcmdldENoYW5nZS50YXJnZXRDaGFuZ2VUeXBlIHx8IFwiTk9fQ0hBTkdFXCIpLCBpID0gZS50YXJnZXRDaGFuZ2UudGFyZ2V0SWRzIHx8IFtdLCByID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIHQuQyA/IChCKHZvaWQgMCA9PT0gZSB8fCBcInN0cmluZ1wiID09IHR5cGVvZiBlKSwgeXQuZnJvbUJhc2U2NFN0cmluZyhlIHx8IFwiXCIpKSA6IChCKHZvaWQgMCA9PT0gZSB8fCBlIGluc3RhbmNlb2YgVWludDhBcnJheSksIFxuICAgICAgICAgICAgeXQuZnJvbVVpbnQ4QXJyYXkoZSB8fCBuZXcgVWludDhBcnJheSkpO1xuICAgICAgICB9KHQsIGUudGFyZ2V0Q2hhbmdlLnJlc3VtZVRva2VuKSwgbyA9IGUudGFyZ2V0Q2hhbmdlLmNhdXNlLCBhID0gbyAmJiBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdm9pZCAwID09PSB0LmNvZGUgPyBLLlVOS05PV04gOiBtbih0LmNvZGUpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBqKGUsIHQubWVzc2FnZSB8fCBcIlwiKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFJldHVybnMgYSB2YWx1ZSBmb3IgYSBudW1iZXIgKG9yIG51bGwpIHRoYXQncyBhcHByb3ByaWF0ZSB0byBwdXQgaW50b1xuICogYSBnb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZSBwcm90by5cbiAqIERPIE5PVCBVU0UgVEhJUyBGT1IgQU5ZVEhJTkcgRUxTRS5cbiAqIFRoaXMgbWV0aG9kIGNoZWF0cy4gSXQncyB0eXBlZCBhcyByZXR1cm5pbmcgXCJudW1iZXJcIiBiZWNhdXNlIHRoYXQncyB3aGF0XG4gKiBvdXIgZ2VuZXJhdGVkIHByb3RvIGludGVyZmFjZXMgc2F5IEludDMyVmFsdWUgbXVzdCBiZS4gQnV0IEdSUEMgYWN0dWFsbHlcbiAqIGV4cGVjdHMgYSB7IHZhbHVlOiA8bnVtYmVyPiB9IHN0cnVjdC5cbiAqLyAobyk7XG4gICAgICAgIG4gPSBuZXcgRm4ocywgaSwgciwgYSB8fCBudWxsKTtcbiAgICB9IGVsc2UgaWYgKFwiZG9jdW1lbnRDaGFuZ2VcIiBpbiBlKSB7XG4gICAgICAgIGUuZG9jdW1lbnRDaGFuZ2U7XG4gICAgICAgIGNvbnN0IHMgPSBlLmRvY3VtZW50Q2hhbmdlO1xuICAgICAgICBzLmRvY3VtZW50LCBzLmRvY3VtZW50Lm5hbWUsIHMuZG9jdW1lbnQudXBkYXRlVGltZTtcbiAgICAgICAgY29uc3QgaSA9IFluKHQsIHMuZG9jdW1lbnQubmFtZSksIHIgPSBHbihzLmRvY3VtZW50LnVwZGF0ZVRpbWUpLCBvID0gbmV3IGp0KHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiBzLmRvY3VtZW50LmZpZWxkc1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSwgYSA9IFd0Lm5ld0ZvdW5kRG9jdW1lbnQoaSwgciwgbyksIGMgPSBzLnRhcmdldElkcyB8fCBbXSwgdSA9IHMucmVtb3ZlZFRhcmdldElkcyB8fCBbXTtcbiAgICAgICAgbiA9IG5ldyB4bihjLCB1LCBhLmtleSwgYSk7XG4gICAgfSBlbHNlIGlmIChcImRvY3VtZW50RGVsZXRlXCIgaW4gZSkge1xuICAgICAgICBlLmRvY3VtZW50RGVsZXRlO1xuICAgICAgICBjb25zdCBzID0gZS5kb2N1bWVudERlbGV0ZTtcbiAgICAgICAgcy5kb2N1bWVudDtcbiAgICAgICAgY29uc3QgaSA9IFluKHQsIHMuZG9jdW1lbnQpLCByID0gcy5yZWFkVGltZSA/IEduKHMucmVhZFRpbWUpIDogY3QubWluKCksIG8gPSBXdC5uZXdOb0RvY3VtZW50KGksIHIpLCBhID0gcy5yZW1vdmVkVGFyZ2V0SWRzIHx8IFtdO1xuICAgICAgICBuID0gbmV3IHhuKFtdLCBhLCBvLmtleSwgbyk7XG4gICAgfSBlbHNlIGlmIChcImRvY3VtZW50UmVtb3ZlXCIgaW4gZSkge1xuICAgICAgICBlLmRvY3VtZW50UmVtb3ZlO1xuICAgICAgICBjb25zdCBzID0gZS5kb2N1bWVudFJlbW92ZTtcbiAgICAgICAgcy5kb2N1bWVudDtcbiAgICAgICAgY29uc3QgaSA9IFluKHQsIHMuZG9jdW1lbnQpLCByID0gcy5yZW1vdmVkVGFyZ2V0SWRzIHx8IFtdO1xuICAgICAgICBuID0gbmV3IHhuKFtdLCByLCBpLCBudWxsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIShcImZpbHRlclwiIGluIGUpKSByZXR1cm4gTCgpO1xuICAgICAgICB7XG4gICAgICAgICAgICBlLmZpbHRlcjtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLmZpbHRlcjtcbiAgICAgICAgICAgIHQudGFyZ2V0SWQ7XG4gICAgICAgICAgICBjb25zdCBzID0gdC5jb3VudCB8fCAwLCBpID0gbmV3IGZuKHMpLCByID0gdC50YXJnZXRJZDtcbiAgICAgICAgICAgIG4gPSBuZXcgJG4ociwgaSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG47XG59XG5cbmZ1bmN0aW9uIG9zKHQsIGUpIHtcbiAgICBsZXQgbjtcbiAgICBpZiAoZSBpbnN0YW5jZW9mIHJuKSBuID0ge1xuICAgICAgICB1cGRhdGU6IG5zKHQsIGUua2V5LCBlLnZhbHVlKVxuICAgIH07IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBobikgbiA9IHtcbiAgICAgICAgZGVsZXRlOiBKbih0LCBlLmtleSlcbiAgICB9OyBlbHNlIGlmIChlIGluc3RhbmNlb2Ygb24pIG4gPSB7XG4gICAgICAgIHVwZGF0ZTogbnModCwgZS5rZXksIGUuZGF0YSksXG4gICAgICAgIHVwZGF0ZU1hc2s6IElzKGUuZmllbGRNYXNrKVxuICAgIH07IGVsc2Uge1xuICAgICAgICBpZiAoIShlIGluc3RhbmNlb2YgbG4pKSByZXR1cm4gTCgpO1xuICAgICAgICBuID0ge1xuICAgICAgICAgICAgdmVyaWZ5OiBKbih0LCBlLmtleSlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGUuZmllbGRUcmFuc2Zvcm1zLmxlbmd0aCA+IDAgJiYgKG4udXBkYXRlVHJhbnNmb3JtcyA9IGUuZmllbGRUcmFuc2Zvcm1zLm1hcCgodCA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLnRyYW5zZm9ybTtcbiAgICAgICAgaWYgKG4gaW5zdGFuY2VvZiBMZSkgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpZWxkUGF0aDogZS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxcbiAgICAgICAgICAgIHNldFRvU2VydmVyVmFsdWU6IFwiUkVRVUVTVF9USU1FXCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG4gaW5zdGFuY2VvZiBCZSkgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpZWxkUGF0aDogZS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxcbiAgICAgICAgICAgIGFwcGVuZE1pc3NpbmdFbGVtZW50czoge1xuICAgICAgICAgICAgICAgIHZhbHVlczogbi5lbGVtZW50c1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIHFlKSByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiBlLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxuICAgICAgICAgICAgcmVtb3ZlQWxsRnJvbUFycmF5OiB7XG4gICAgICAgICAgICAgICAgdmFsdWVzOiBuLmVsZW1lbnRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgamUpIHJldHVybiB7XG4gICAgICAgICAgICBmaWVsZFBhdGg6IGUuZmllbGQuY2Fub25pY2FsU3RyaW5nKCksXG4gICAgICAgICAgICBpbmNyZW1lbnQ6IG4uTlxuICAgICAgICB9O1xuICAgICAgICB0aHJvdyBMKCk7XG4gICAgfSgwLCB0KSkpKSwgZS5wcmVjb25kaXRpb24uaXNOb25lIHx8IChuLmN1cnJlbnREb2N1bWVudCA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gZS51cGRhdGVUaW1lID8ge1xuICAgICAgICAgICAgdXBkYXRlVGltZTogV24odCwgZS51cGRhdGVUaW1lKVxuICAgICAgICB9IDogdm9pZCAwICE9PSBlLmV4aXN0cyA/IHtcbiAgICAgICAgICAgIGV4aXN0czogZS5leGlzdHNcbiAgICAgICAgfSA6IEwoKTtcbiAgICB9KHQsIGUucHJlY29uZGl0aW9uKSksIG47XG59XG5cbmZ1bmN0aW9uIGFzKHQsIGUpIHtcbiAgICBjb25zdCBuID0gZS5jdXJyZW50RG9jdW1lbnQgPyBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHQudXBkYXRlVGltZSA/IEplLnVwZGF0ZVRpbWUoR24odC51cGRhdGVUaW1lKSkgOiB2b2lkIDAgIT09IHQuZXhpc3RzID8gSmUuZXhpc3RzKHQuZXhpc3RzKSA6IEplLm5vbmUoKTtcbiAgICB9KGUuY3VycmVudERvY3VtZW50KSA6IEplLm5vbmUoKSwgcyA9IGUudXBkYXRlVHJhbnNmb3JtcyA/IGUudXBkYXRlVHJhbnNmb3Jtcy5tYXAoKGUgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBsZXQgbiA9IG51bGw7XG4gICAgICAgIGlmIChcInNldFRvU2VydmVyVmFsdWVcIiBpbiBlKSBCKFwiUkVRVUVTVF9USU1FXCIgPT09IGUuc2V0VG9TZXJ2ZXJWYWx1ZSksIG4gPSBuZXcgTGU7IGVsc2UgaWYgKFwiYXBwZW5kTWlzc2luZ0VsZW1lbnRzXCIgaW4gZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUuYXBwZW5kTWlzc2luZ0VsZW1lbnRzLnZhbHVlcyB8fCBbXTtcbiAgICAgICAgICAgIG4gPSBuZXcgQmUodCk7XG4gICAgICAgIH0gZWxzZSBpZiAoXCJyZW1vdmVBbGxGcm9tQXJyYXlcIiBpbiBlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5yZW1vdmVBbGxGcm9tQXJyYXkudmFsdWVzIHx8IFtdO1xuICAgICAgICAgICAgbiA9IG5ldyBxZSh0KTtcbiAgICAgICAgfSBlbHNlIFwiaW5jcmVtZW50XCIgaW4gZSA/IG4gPSBuZXcgamUodCwgZS5pbmNyZW1lbnQpIDogTCgpO1xuICAgICAgICBjb25zdCBzID0gX3QuZnJvbVNlcnZlckZvcm1hdChlLmZpZWxkUGF0aCk7XG4gICAgICAgIHJldHVybiBuZXcgR2Uocywgbik7XG4gICAgfSh0LCBlKSkpIDogW107XG4gICAgaWYgKGUudXBkYXRlKSB7XG4gICAgICAgIGUudXBkYXRlLm5hbWU7XG4gICAgICAgIGNvbnN0IGkgPSBZbih0LCBlLnVwZGF0ZS5uYW1lKSwgciA9IG5ldyBqdCh7XG4gICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgIGZpZWxkczogZS51cGRhdGUuZmllbGRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoZS51cGRhdGVNYXNrKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0LmZpZWxkUGF0aHMgfHwgW107XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBtdChlLm1hcCgodCA9PiBfdC5mcm9tU2VydmVyRm9ybWF0KHQpKSkpO1xuICAgICAgICAgICAgfShlLnVwZGF0ZU1hc2spO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBvbihpLCByLCB0LCBuLCBzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IHJuKGksIHIsIG4sIHMpO1xuICAgIH1cbiAgICBpZiAoZS5kZWxldGUpIHtcbiAgICAgICAgY29uc3QgcyA9IFluKHQsIGUuZGVsZXRlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBobihzLCBuKTtcbiAgICB9XG4gICAgaWYgKGUudmVyaWZ5KSB7XG4gICAgICAgIGNvbnN0IHMgPSBZbih0LCBlLnZlcmlmeSk7XG4gICAgICAgIHJldHVybiBuZXcgbG4ocywgbik7XG4gICAgfVxuICAgIHJldHVybiBMKCk7XG59XG5cbmZ1bmN0aW9uIGNzKHQsIGUpIHtcbiAgICByZXR1cm4gdCAmJiB0Lmxlbmd0aCA+IDAgPyAoQih2b2lkIDAgIT09IGUpLCB0Lm1hcCgodCA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIC8vIE5PVEU6IERlbGV0ZXMgZG9uJ3QgaGF2ZSBhbiB1cGRhdGVUaW1lLlxuICAgICAgICBsZXQgbiA9IHQudXBkYXRlVGltZSA/IEduKHQudXBkYXRlVGltZSkgOiBHbihlKTtcbiAgICAgICAgcmV0dXJuIG4uaXNFcXVhbChjdC5taW4oKSkgJiYgKFxuICAgICAgICAvLyBUaGUgRmlyZXN0b3JlIEVtdWxhdG9yIGN1cnJlbnRseSByZXR1cm5zIGFuIHVwZGF0ZSB0aW1lIG9mIDAgZm9yXG4gICAgICAgIC8vIGRlbGV0ZXMgb2Ygbm9uLWV4aXN0aW5nIGRvY3VtZW50cyAocmF0aGVyIHRoYW4gbnVsbCkuIFRoaXMgYnJlYWtzIHRoZVxuICAgICAgICAvLyB0ZXN0IFwiZ2V0IGRlbGV0ZWQgZG9jIHdoaWxlIG9mZmxpbmUgd2l0aCBzb3VyY2U9Y2FjaGVcIiBhcyBOb0RvY3VtZW50c1xuICAgICAgICAvLyB3aXRoIHZlcnNpb24gMCBhcmUgZmlsdGVyZWQgYnkgSW5kZXhlZERiJ3MgUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAgICAgICAgLy8gVE9ETygjMjE0OSk6IFJlbW92ZSB0aGlzIHdoZW4gRW11bGF0b3IgaXMgZml4ZWRcbiAgICAgICAgbiA9IEduKGUpKSwgbmV3IEhlKG4sIHQudHJhbnNmb3JtUmVzdWx0cyB8fCBbXSk7XG4gICAgfSh0LCBlKSkpKSA6IFtdO1xufVxuXG5mdW5jdGlvbiB1cyh0LCBlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZG9jdW1lbnRzOiBbIFhuKHQsIGUucGF0aCkgXVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGhzKHQsIGUpIHtcbiAgICAvLyBEaXNzZWN0IHRoZSBwYXRoIGludG8gcGFyZW50LCBjb2xsZWN0aW9uSWQsIGFuZCBvcHRpb25hbCBrZXkgZmlsdGVyLlxuICAgIGNvbnN0IG4gPSB7XG4gICAgICAgIHN0cnVjdHVyZWRRdWVyeToge31cbiAgICB9LCBzID0gZS5wYXRoO1xuICAgIG51bGwgIT09IGUuY29sbGVjdGlvbkdyb3VwID8gKG4ucGFyZW50ID0gWG4odCwgcyksIG4uc3RydWN0dXJlZFF1ZXJ5LmZyb20gPSBbIHtcbiAgICAgICAgY29sbGVjdGlvbklkOiBlLmNvbGxlY3Rpb25Hcm91cCxcbiAgICAgICAgYWxsRGVzY2VuZGFudHM6ICEwXG4gICAgfSBdKSA6IChuLnBhcmVudCA9IFhuKHQsIHMucG9wTGFzdCgpKSwgbi5zdHJ1Y3R1cmVkUXVlcnkuZnJvbSA9IFsge1xuICAgICAgICBjb2xsZWN0aW9uSWQ6IHMubGFzdFNlZ21lbnQoKVxuICAgIH0gXSk7XG4gICAgY29uc3QgaSA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgaWYgKDAgPT09IHQubGVuZ3RoKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGUgPSB0Lm1hcCgodCA9PiBcbiAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBpZiAoXCI9PVwiIC8qIEVRVUFMICovID09PSB0Lm9wKSB7XG4gICAgICAgICAgICAgICAgaWYgKFV0KHQudmFsdWUpKSByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHlzKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwiSVNfTkFOXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKEJ0KHQudmFsdWUpKSByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHlzKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwiSVNfTlVMTFwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcIiE9XCIgLyogTk9UX0VRVUFMICovID09PSB0Lm9wKSB7XG4gICAgICAgICAgICAgICAgaWYgKFV0KHQudmFsdWUpKSByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHlzKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwiSVNfTk9UX05BTlwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChCdCh0LnZhbHVlKSkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdW5hcnlGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkOiB5cyh0LmZpZWxkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wOiBcIklTX05PVF9OVUxMXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGZpZWxkRmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkOiB5cyh0LmZpZWxkKSxcbiAgICAgICAgICAgICAgICAgICAgb3A6IGdzKHQub3ApLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdC52YWx1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0odCkpKTtcbiAgICAgICAgaWYgKDEgPT09IGUubGVuZ3RoKSByZXR1cm4gZVswXTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNvbXBvc2l0ZUZpbHRlcjoge1xuICAgICAgICAgICAgICAgIG9wOiBcIkFORFwiLFxuICAgICAgICAgICAgICAgIGZpbHRlcnM6IGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KGUuZmlsdGVycyk7XG4gICAgaSAmJiAobi5zdHJ1Y3R1cmVkUXVlcnkud2hlcmUgPSBpKTtcbiAgICBjb25zdCByID0gZnVuY3Rpb24odCkge1xuICAgICAgICBpZiAoMCA9PT0gdC5sZW5ndGgpIHJldHVybjtcbiAgICAgICAgcmV0dXJuIHQubWFwKCh0ID0+IFxuICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZmllbGQ6IHlzKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogbXModC5kaXIpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KHQpKSk7XG4gICAgfShlLm9yZGVyQnkpO1xuICAgIHIgJiYgKG4uc3RydWN0dXJlZFF1ZXJ5Lm9yZGVyQnkgPSByKTtcbiAgICBjb25zdCBvID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gdC5DIHx8IGJ0KGUpID8gZSA6IHtcbiAgICAgICAgICAgIHZhbHVlOiBlXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICogUmV0dXJucyBhIG51bWJlciAob3IgbnVsbCkgZnJvbSBhIGdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlIHByb3RvLlxuICovICh0LCBlLmxpbWl0KTtcbiAgICByZXR1cm4gbnVsbCAhPT0gbyAmJiAobi5zdHJ1Y3R1cmVkUXVlcnkubGltaXQgPSBvKSwgZS5zdGFydEF0ICYmIChuLnN0cnVjdHVyZWRRdWVyeS5zdGFydEF0ID0gd3MoZS5zdGFydEF0KSksIFxuICAgIGUuZW5kQXQgJiYgKG4uc3RydWN0dXJlZFF1ZXJ5LmVuZEF0ID0gd3MoZS5lbmRBdCkpLCBuO1xufVxuXG5mdW5jdGlvbiBscyh0KSB7XG4gICAgbGV0IGUgPSBabih0LnBhcmVudCk7XG4gICAgY29uc3QgbiA9IHQuc3RydWN0dXJlZFF1ZXJ5LCBzID0gbi5mcm9tID8gbi5mcm9tLmxlbmd0aCA6IDA7XG4gICAgbGV0IGkgPSBudWxsO1xuICAgIGlmIChzID4gMCkge1xuICAgICAgICBCKDEgPT09IHMpO1xuICAgICAgICBjb25zdCB0ID0gbi5mcm9tWzBdO1xuICAgICAgICB0LmFsbERlc2NlbmRhbnRzID8gaSA9IHQuY29sbGVjdGlvbklkIDogZSA9IGUuY2hpbGQodC5jb2xsZWN0aW9uSWQpO1xuICAgIH1cbiAgICBsZXQgciA9IFtdO1xuICAgIG4ud2hlcmUgJiYgKHIgPSBkcyhuLndoZXJlKSk7XG4gICAgbGV0IG8gPSBbXTtcbiAgICBuLm9yZGVyQnkgJiYgKG8gPSBuLm9yZGVyQnkubWFwKCh0ID0+IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBsZShwcyh0LmZpZWxkKSwgXG4gICAgICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgc3dpdGNoICh0KSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJBU0NFTkRJTkdcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJhc2NcIiAvKiBBU0NFTkRJTkcgKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIkRFU0NFTkRJTkdcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJkZXNjXCIgLyogREVTQ0VORElORyAqLztcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgICh0LmRpcmVjdGlvbikpO1xuICAgIH0odCkpKSk7XG4gICAgbGV0IGEgPSBudWxsO1xuICAgIG4ubGltaXQgJiYgKGEgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIGxldCBlO1xuICAgICAgICByZXR1cm4gZSA9IFwib2JqZWN0XCIgPT0gdHlwZW9mIHQgPyB0LnZhbHVlIDogdCwgYnQoZSkgPyBudWxsIDogZTtcbiAgICB9KG4ubGltaXQpKTtcbiAgICBsZXQgYyA9IG51bGw7XG4gICAgbi5zdGFydEF0ICYmIChjID0gX3Mobi5zdGFydEF0KSk7XG4gICAgbGV0IHUgPSBudWxsO1xuICAgIHJldHVybiBuLmVuZEF0ICYmICh1ID0gX3Mobi5lbmRBdCkpLCBtZShlLCBpLCBvLCByLCBhLCBcIkZcIiAvKiBGaXJzdCAqLyAsIGMsIHUpO1xufVxuXG5mdW5jdGlvbiBmcyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgc3dpdGNoIChlKSB7XG4gICAgICAgICAgY2FzZSAwIC8qIExpc3RlbiAqLyA6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcblxuICAgICAgICAgIGNhc2UgMSAvKiBFeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaCAqLyA6XG4gICAgICAgICAgICByZXR1cm4gXCJleGlzdGVuY2UtZmlsdGVyLW1pc21hdGNoXCI7XG5cbiAgICAgICAgICBjYXNlIDIgLyogTGltYm9SZXNvbHV0aW9uICovIDpcbiAgICAgICAgICAgIHJldHVybiBcImxpbWJvLWRvY3VtZW50XCI7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIEwoKTtcbiAgICAgICAgfVxuICAgIH0oMCwgZS5wdXJwb3NlKTtcbiAgICByZXR1cm4gbnVsbCA9PSBuID8gbnVsbCA6IHtcbiAgICAgICAgXCJnb29nLWxpc3Rlbi10YWdzXCI6IG5cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBkcyh0KSB7XG4gICAgcmV0dXJuIHQgPyB2b2lkIDAgIT09IHQudW5hcnlGaWx0ZXIgPyBbIEVzKHQpIF0gOiB2b2lkIDAgIT09IHQuZmllbGRGaWx0ZXIgPyBbIFRzKHQpIF0gOiB2b2lkIDAgIT09IHQuY29tcG9zaXRlRmlsdGVyID8gdC5jb21wb3NpdGVGaWx0ZXIuZmlsdGVycy5tYXAoKHQgPT4gZHModCkpKS5yZWR1Y2UoKCh0LCBlKSA9PiB0LmNvbmNhdChlKSkpIDogTCgpIDogW107XG59XG5cbmZ1bmN0aW9uIHdzKHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBiZWZvcmU6IHQuYmVmb3JlLFxuICAgICAgICB2YWx1ZXM6IHQucG9zaXRpb25cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBfcyh0KSB7XG4gICAgY29uc3QgZSA9ICEhdC5iZWZvcmUsIG4gPSB0LnZhbHVlcyB8fCBbXTtcbiAgICByZXR1cm4gbmV3IHVlKG4sIGUpO1xufVxuXG4vLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG5mdW5jdGlvbiBtcyh0KSB7XG4gICAgcmV0dXJuIFVuW3RdO1xufVxuXG5mdW5jdGlvbiBncyh0KSB7XG4gICAgcmV0dXJuIHFuW3RdO1xufVxuXG5mdW5jdGlvbiB5cyh0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZmllbGRQYXRoOiB0LmNhbm9uaWNhbFN0cmluZygpXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gcHModCkge1xuICAgIHJldHVybiBfdC5mcm9tU2VydmVyRm9ybWF0KHQuZmllbGRQYXRoKTtcbn1cblxuZnVuY3Rpb24gVHModCkge1xuICAgIHJldHVybiBadC5jcmVhdGUocHModC5maWVsZEZpbHRlci5maWVsZCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgc3dpdGNoICh0KSB7XG4gICAgICAgICAgY2FzZSBcIkVRVUFMXCI6XG4gICAgICAgICAgICByZXR1cm4gXCI9PVwiIC8qIEVRVUFMICovO1xuXG4gICAgICAgICAgY2FzZSBcIk5PVF9FUVVBTFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiIT1cIiAvKiBOT1RfRVFVQUwgKi87XG5cbiAgICAgICAgICBjYXNlIFwiR1JFQVRFUl9USEFOXCI6XG4gICAgICAgICAgICByZXR1cm4gXCI+XCIgLyogR1JFQVRFUl9USEFOICovO1xuXG4gICAgICAgICAgY2FzZSBcIkdSRUFURVJfVEhBTl9PUl9FUVVBTFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiPj1cIiAvKiBHUkVBVEVSX1RIQU5fT1JfRVFVQUwgKi87XG5cbiAgICAgICAgICBjYXNlIFwiTEVTU19USEFOXCI6XG4gICAgICAgICAgICByZXR1cm4gXCI8XCIgLyogTEVTU19USEFOICovO1xuXG4gICAgICAgICAgY2FzZSBcIkxFU1NfVEhBTl9PUl9FUVVBTFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiPD1cIiAvKiBMRVNTX1RIQU5fT1JfRVFVQUwgKi87XG5cbiAgICAgICAgICBjYXNlIFwiQVJSQVlfQ09OVEFJTlNcIjpcbiAgICAgICAgICAgIHJldHVybiBcImFycmF5LWNvbnRhaW5zXCIgLyogQVJSQVlfQ09OVEFJTlMgKi87XG5cbiAgICAgICAgICBjYXNlIFwiSU5cIjpcbiAgICAgICAgICAgIHJldHVybiBcImluXCIgLyogSU4gKi87XG5cbiAgICAgICAgICBjYXNlIFwiTk9UX0lOXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJub3QtaW5cIiAvKiBOT1RfSU4gKi87XG5cbiAgICAgICAgICBjYXNlIFwiQVJSQVlfQ09OVEFJTlNfQU5ZXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi87XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIEwoKTtcbiAgICAgICAgfVxuICAgIH0odC5maWVsZEZpbHRlci5vcCksIHQuZmllbGRGaWx0ZXIudmFsdWUpO1xufVxuXG5mdW5jdGlvbiBFcyh0KSB7XG4gICAgc3dpdGNoICh0LnVuYXJ5RmlsdGVyLm9wKSB7XG4gICAgICBjYXNlIFwiSVNfTkFOXCI6XG4gICAgICAgIGNvbnN0IGUgPSBwcyh0LnVuYXJ5RmlsdGVyLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIFp0LmNyZWF0ZShlLCBcIj09XCIgLyogRVFVQUwgKi8gLCB7XG4gICAgICAgICAgICBkb3VibGVWYWx1ZTogTmFOXG4gICAgICAgIH0pO1xuXG4gICAgICBjYXNlIFwiSVNfTlVMTFwiOlxuICAgICAgICBjb25zdCBuID0gcHModC51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgIHJldHVybiBadC5jcmVhdGUobiwgXCI9PVwiIC8qIEVRVUFMICovICwge1xuICAgICAgICAgICAgbnVsbFZhbHVlOiBcIk5VTExfVkFMVUVcIlxuICAgICAgICB9KTtcblxuICAgICAgY2FzZSBcIklTX05PVF9OQU5cIjpcbiAgICAgICAgY29uc3QgcyA9IHBzKHQudW5hcnlGaWx0ZXIuZmllbGQpO1xuICAgICAgICByZXR1cm4gWnQuY3JlYXRlKHMsIFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gLCB7XG4gICAgICAgICAgICBkb3VibGVWYWx1ZTogTmFOXG4gICAgICAgIH0pO1xuXG4gICAgICBjYXNlIFwiSVNfTk9UX05VTExcIjpcbiAgICAgICAgY29uc3QgaSA9IHBzKHQudW5hcnlGaWx0ZXIuZmllbGQpO1xuICAgICAgICByZXR1cm4gWnQuY3JlYXRlKGksIFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gLCB7XG4gICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgIH0pO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gTCgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gSXModCkge1xuICAgIGNvbnN0IGUgPSBbXTtcbiAgICByZXR1cm4gdC5maWVsZHMuZm9yRWFjaCgodCA9PiBlLnB1c2godC5jYW5vbmljYWxTdHJpbmcoKSkpKSwge1xuICAgICAgICBmaWVsZFBhdGhzOiBlXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gQXModCkge1xuICAgIC8vIFJlc291cmNlIG5hbWVzIGhhdmUgYXQgbGVhc3QgNCBjb21wb25lbnRzIChwcm9qZWN0IElELCBkYXRhYmFzZSBJRClcbiAgICByZXR1cm4gdC5sZW5ndGggPj0gNCAmJiBcInByb2plY3RzXCIgPT09IHQuZ2V0KDApICYmIFwiZGF0YWJhc2VzXCIgPT09IHQuZ2V0KDIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBFbmNvZGVzIGEgcmVzb3VyY2UgcGF0aCBpbnRvIGEgSW5kZXhlZERiLWNvbXBhdGlibGUgc3RyaW5nIGZvcm0uXG4gKi9cbmZ1bmN0aW9uIFJzKHQpIHtcbiAgICBsZXQgZSA9IFwiXCI7XG4gICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lmxlbmd0aDsgbisrKSBlLmxlbmd0aCA+IDAgJiYgKGUgPSBicyhlKSksIGUgPSBQcyh0LmdldChuKSwgZSk7XG4gICAgcmV0dXJuIGJzKGUpO1xufVxuXG4vKiogRW5jb2RlcyBhIHNpbmdsZSBzZWdtZW50IG9mIGEgcmVzb3VyY2UgcGF0aCBpbnRvIHRoZSBnaXZlbiByZXN1bHQgKi8gZnVuY3Rpb24gUHModCwgZSkge1xuICAgIGxldCBuID0gZTtcbiAgICBjb25zdCBzID0gdC5sZW5ndGg7XG4gICAgZm9yIChsZXQgZSA9IDA7IGUgPCBzOyBlKyspIHtcbiAgICAgICAgY29uc3QgcyA9IHQuY2hhckF0KGUpO1xuICAgICAgICBzd2l0Y2ggKHMpIHtcbiAgICAgICAgICBjYXNlIFwiXFwwXCI6XG4gICAgICAgICAgICBuICs9IFwiXHUwMDAxXHUwMDEwXCI7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJcdTAwMDFcIjpcbiAgICAgICAgICAgIG4gKz0gXCJcdTAwMDFcdTAwMTFcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIG4gKz0gcztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbjtcbn1cblxuLyoqIEVuY29kZXMgYSBwYXRoIHNlcGFyYXRvciBpbnRvIHRoZSBnaXZlbiByZXN1bHQgKi8gZnVuY3Rpb24gYnModCkge1xuICAgIHJldHVybiB0ICsgXCJcdTAwMDFcdTAwMDFcIjtcbn1cblxuLyoqXG4gKiBEZWNvZGVzIHRoZSBnaXZlbiBJbmRleGVkRGItY29tcGF0aWJsZSBzdHJpbmcgZm9ybSBvZiBhIHJlc291cmNlIHBhdGggaW50b1xuICogYSBSZXNvdXJjZVBhdGggaW5zdGFuY2UuIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBpcyBub3Qgc3VpdGFibGUgZm9yIHVzZSB3aXRoXG4gKiBkZWNvZGluZyByZXNvdXJjZSBuYW1lcyBmcm9tIHRoZSBzZXJ2ZXI7IHRob3NlIGFyZSBPbmUgUGxhdGZvcm0gZm9ybWF0XG4gKiBzdHJpbmdzLlxuICovIGZ1bmN0aW9uIHZzKHQpIHtcbiAgICAvLyBFdmVudCB0aGUgZW1wdHkgcGF0aCBtdXN0IGVuY29kZSBhcyBhIHBhdGggb2YgYXQgbGVhc3QgbGVuZ3RoIDIuIEEgcGF0aFxuICAgIC8vIHdpdGggZXhhY3RseSAyIG11c3QgYmUgdGhlIGVtcHR5IHBhdGguXG4gICAgY29uc3QgZSA9IHQubGVuZ3RoO1xuICAgIGlmIChCKGUgPj0gMiksIDIgPT09IGUpIHJldHVybiBCKFwiXHUwMDAxXCIgPT09IHQuY2hhckF0KDApICYmIFwiXHUwMDAxXCIgPT09IHQuY2hhckF0KDEpKSwgZHQuZW1wdHlQYXRoKCk7XG4gICAgLy8gRXNjYXBlIGNoYXJhY3RlcnMgY2Fubm90IGV4aXN0IHBhc3QgdGhlIHNlY29uZC10by1sYXN0IHBvc2l0aW9uIGluIHRoZVxuICAgIC8vIHNvdXJjZSB2YWx1ZS5cbiAgICAgICAgY29uc3QgbiA9IGUgLSAyLCBzID0gW107XG4gICAgbGV0IGkgPSBcIlwiO1xuICAgIGZvciAobGV0IHIgPSAwOyByIDwgZTsgKSB7XG4gICAgICAgIC8vIFRoZSBsYXN0IHR3byBjaGFyYWN0ZXJzIG9mIGEgdmFsaWQgZW5jb2RlZCBwYXRoIG11c3QgYmUgYSBzZXBhcmF0b3IsIHNvXG4gICAgICAgIC8vIHRoZXJlIG11c3QgYmUgYW4gZW5kIHRvIHRoaXMgc2VnbWVudC5cbiAgICAgICAgY29uc3QgZSA9IHQuaW5kZXhPZihcIlx1MDAwMVwiLCByKTtcbiAgICAgICAgKGUgPCAwIHx8IGUgPiBuKSAmJiBMKCk7XG4gICAgICAgIHN3aXRjaCAodC5jaGFyQXQoZSArIDEpKSB7XG4gICAgICAgICAgY2FzZSBcIlx1MDAwMVwiOlxuICAgICAgICAgICAgY29uc3QgbiA9IHQuc3Vic3RyaW5nKHIsIGUpO1xuICAgICAgICAgICAgbGV0IG87XG4gICAgICAgICAgICAwID09PSBpLmxlbmd0aCA/IFxuICAgICAgICAgICAgLy8gQXZvaWQgY29weWluZyBmb3IgdGhlIGNvbW1vbiBjYXNlIG9mIGEgc2VnbWVudCB0aGF0IGV4Y2x1ZGVzIFxcMFxuICAgICAgICAgICAgLy8gYW5kIFxcMDAxXG4gICAgICAgICAgICBvID0gbiA6IChpICs9IG4sIG8gPSBpLCBpID0gXCJcIiksIHMucHVzaChvKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIlx1MDAxMFwiOlxuICAgICAgICAgICAgaSArPSB0LnN1YnN0cmluZyhyLCBlKSwgaSArPSBcIlxcMFwiO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiXHUwMDExXCI6XG4gICAgICAgICAgICAvLyBUaGUgZXNjYXBlIGNoYXJhY3RlciBjYW4gYmUgdXNlZCBpbiB0aGUgb3V0cHV0IHRvIGVuY29kZSBpdHNlbGYuXG4gICAgICAgICAgICBpICs9IHQuc3Vic3RyaW5nKHIsIGUgKyAxKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIEwoKTtcbiAgICAgICAgfVxuICAgICAgICByID0gZSArIDI7XG4gICAgfVxuICAgIHJldHVybiBuZXcgZHQocyk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFNjaGVtYSBWZXJzaW9uIGZvciB0aGUgV2ViIGNsaWVudDpcbiAqIDEuICBJbml0aWFsIHZlcnNpb24gaW5jbHVkaW5nIE11dGF0aW9uIFF1ZXVlLCBRdWVyeSBDYWNoZSwgYW5kIFJlbW90ZVxuICogICAgIERvY3VtZW50IENhY2hlXG4gKiAyLiAgVXNlZCB0byBlbnN1cmUgYSB0YXJnZXRHbG9iYWwgb2JqZWN0IGV4aXN0cyBhbmQgYWRkIHRhcmdldENvdW50IHRvIGl0LiBOb1xuICogICAgIGxvbmdlciByZXF1aXJlZCBiZWNhdXNlIG1pZ3JhdGlvbiAzIHVuY29uZGl0aW9uYWxseSBjbGVhcnMgaXQuXG4gKiAzLiAgRHJvcHBlZCBhbmQgcmUtY3JlYXRlZCBRdWVyeSBDYWNoZSB0byBkZWFsIHdpdGggY2FjaGUgY29ycnVwdGlvbiByZWxhdGVkXG4gKiAgICAgdG8gbGltYm8gcmVzb2x1dGlvbi4gQWRkcmVzc2VzXG4gKiAgICAgaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWlvcy1zZGsvaXNzdWVzLzE1NDhcbiAqIDQuICBNdWx0aS1UYWIgU3VwcG9ydC5cbiAqIDUuICBSZW1vdmFsIG9mIGhlbGQgd3JpdGUgYWNrcy5cbiAqIDYuICBDcmVhdGUgZG9jdW1lbnQgZ2xvYmFsIGZvciB0cmFja2luZyBkb2N1bWVudCBjYWNoZSBzaXplLlxuICogNy4gIEVuc3VyZSBldmVyeSBjYWNoZWQgZG9jdW1lbnQgaGFzIGEgc2VudGluZWwgcm93IHdpdGggYSBzZXF1ZW5jZSBudW1iZXIuXG4gKiA4LiAgQWRkIGNvbGxlY3Rpb24tcGFyZW50IGluZGV4IGZvciBDb2xsZWN0aW9uIEdyb3VwIHF1ZXJpZXMuXG4gKiA5LiAgQ2hhbmdlIFJlbW90ZURvY3VtZW50Q2hhbmdlcyBzdG9yZSB0byBiZSBrZXllZCBieSByZWFkVGltZSByYXRoZXIgdGhhblxuICogICAgIGFuIGF1dG8taW5jcmVtZW50aW5nIElELiBUaGlzIGlzIHJlcXVpcmVkIGZvciBJbmRleC1GcmVlIHF1ZXJpZXMuXG4gKiAxMC4gUmV3cml0ZSB0aGUgY2Fub25pY2FsIElEcyB0byB0aGUgZXhwbGljaXQgUHJvdG9idWYtYmFzZWQgZm9ybWF0LlxuICogMTEuIEFkZCBidW5kbGVzIGFuZCBuYW1lZF9xdWVyaWVzIGZvciBidW5kbGUgc3VwcG9ydC5cbiAqL1xuLyoqXG4gKiBXcmFwcGVyIGNsYXNzIHRvIHN0b3JlIHRpbWVzdGFtcHMgKHNlY29uZHMgYW5kIG5hbm9zKSBpbiBJbmRleGVkRGIgb2JqZWN0cy5cbiAqL1xuY2xhc3MgVnMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5zZWNvbmRzID0gdCwgdGhpcy5uYW5vc2Vjb25kcyA9IGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgc2luZ2xldG9uIG9iamVjdCB0byBiZSBzdG9yZWQgaW4gdGhlICdvd25lcicgc3RvcmUgaW4gSW5kZXhlZERiLlxuICpcbiAqIEEgZ2l2ZW4gZGF0YWJhc2UgY2FuIGhhdmUgYSBzaW5nbGUgcHJpbWFyeSB0YWIgYXNzaWduZWQgYXQgYSBnaXZlbiB0aW1lLiBUaGF0XG4gKiB0YWIgbXVzdCB2YWxpZGF0ZSB0aGF0IGl0IGlzIHN0aWxsIGhvbGRpbmcgdGhlIHByaW1hcnkgbGVhc2UgYmVmb3JlIGV2ZXJ5XG4gKiBvcGVyYXRpb24gdGhhdCByZXF1aXJlcyBsb2NrZWQgYWNjZXNzLiBUaGUgcHJpbWFyeSB0YWIgc2hvdWxkIHJlZ3VsYXJseVxuICogd3JpdGUgYW4gdXBkYXRlZCB0aW1lc3RhbXAgdG8gdGhpcyBsZWFzZSB0byBwcmV2ZW50IG90aGVyIHRhYnMgZnJvbVxuICogXCJzdGVhbGluZ1wiIHRoZSBwcmltYXJ5IGxlYXNlXG4gKi8gY2xhc3MgU3Mge1xuICAgIGNvbnN0cnVjdG9yKHQsIFxuICAgIC8qKiBXaGV0aGVyIHRvIGFsbG93IHNoYXJlZCBhY2Nlc3MgZnJvbSBtdWx0aXBsZSB0YWJzLiAqL1xuICAgIGUsIG4pIHtcbiAgICAgICAgdGhpcy5vd25lcklkID0gdCwgdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbiA9IGUsIHRoaXMubGVhc2VUaW1lc3RhbXBNcyA9IG47XG4gICAgfVxufVxuXG4vKipcbiAqIE5hbWUgb2YgdGhlIEluZGV4ZWREYiBvYmplY3Qgc3RvcmUuXG4gKlxuICogTm90ZSB0aGF0IHRoZSBuYW1lICdvd25lcicgaXMgY2hvc2VuIHRvIGVuc3VyZSBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSB3aXRoXG4gKiBvbGRlciBjbGllbnRzIHRoYXQgb25seSBzdXBwb3J0ZWQgc2luZ2xlIGxvY2tlZCBhY2Nlc3MgdG8gdGhlIHBlcnNpc3RlbmNlXG4gKiBsYXllci5cbiAqLyBTcy5zdG9yZSA9IFwib3duZXJcIiwgXG4vKipcbiAqIFRoZSBrZXkgc3RyaW5nIHVzZWQgZm9yIHRoZSBzaW5nbGUgb2JqZWN0IHRoYXQgZXhpc3RzIGluIHRoZVxuICogRGJQcmltYXJ5Q2xpZW50IHN0b3JlLlxuICovXG5Tcy5rZXkgPSBcIm93bmVyXCI7XG5cbi8qKlxuICogQW4gb2JqZWN0IHRvIGJlIHN0b3JlZCBpbiB0aGUgJ211dGF0aW9uUXVldWVzJyBzdG9yZSBpbiBJbmRleGVkRGIuXG4gKlxuICogRWFjaCB1c2VyIGdldHMgYSBzaW5nbGUgcXVldWUgb2YgTXV0YXRpb25CYXRjaGVzIHRvIGFwcGx5IHRvIHRoZSBzZXJ2ZXIuXG4gKiBEYk11dGF0aW9uUXVldWUgdHJhY2tzIHRoZSBtZXRhZGF0YSBhYm91dCB0aGUgcXVldWUuXG4gKi9cbmNsYXNzIERzIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgbm9ybWFsaXplZCB1c2VyIElEIHRvIHdoaWNoIHRoaXMgcXVldWUgYmVsb25ncy5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBBbiBpZGVudGlmaWVyIGZvciB0aGUgaGlnaGVzdCBudW1iZXJlZCBiYXRjaCB0aGF0IGhhcyBiZWVuIGFja25vd2xlZGdlZFxuICAgICAqIGJ5IHRoZSBzZXJ2ZXIuIEFsbCBNdXRhdGlvbkJhdGNoZXMgaW4gdGhpcyBxdWV1ZSB3aXRoIGJhdGNoSWRzIGxlc3NcbiAgICAgKiB0aGFuIG9yIGVxdWFsIHRvIHRoaXMgdmFsdWUgYXJlIGNvbnNpZGVyZWQgdG8gaGF2ZSBiZWVuIGFja25vd2xlZGdlZCBieVxuICAgICAqIHRoZSBzZXJ2ZXIuXG4gICAgICpcbiAgICAgKiBOT1RFOiB0aGlzIGlzIGRlcHJlY2F0ZWQgYW5kIG5vIGxvbmdlciB1c2VkIGJ5IHRoZSBjb2RlLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIEEgc3RyZWFtIHRva2VuIHRoYXQgd2FzIHByZXZpb3VzbHkgc2VudCBieSB0aGUgc2VydmVyLlxuICAgICAqXG4gICAgICogU2VlIFN0cmVhbWluZ1dyaXRlUmVxdWVzdCBpbiBkYXRhc3RvcmUucHJvdG8gZm9yIG1vcmUgZGV0YWlscyBhYm91dFxuICAgICAqIHVzYWdlLlxuICAgICAqXG4gICAgICogQWZ0ZXIgc2VuZGluZyB0aGlzIHRva2VuLCBlYXJsaWVyIHRva2VucyBtYXkgbm90IGJlIHVzZWQgYW55bW9yZSBzb1xuICAgICAqIG9ubHkgYSBzaW5nbGUgc3RyZWFtIHRva2VuIGlzIHJldGFpbmVkLlxuICAgICAqXG4gICAgICogTk9URTogdGhpcyBpcyBkZXByZWNhdGVkIGFuZCBubyBsb25nZXIgdXNlZCBieSB0aGUgY29kZS5cbiAgICAgKi9cbiAgICBuKSB7XG4gICAgICAgIHRoaXMudXNlcklkID0gdCwgdGhpcy5sYXN0QWNrbm93bGVkZ2VkQmF0Y2hJZCA9IGUsIHRoaXMubGFzdFN0cmVhbVRva2VuID0gbjtcbiAgICB9XG59XG5cbi8qKiBOYW1lIG9mIHRoZSBJbmRleGVkRGIgb2JqZWN0IHN0b3JlLiAgKi8gRHMuc3RvcmUgPSBcIm11dGF0aW9uUXVldWVzXCIsIFxuLyoqIEtleXMgYXJlIGF1dG9tYXRpY2FsbHkgYXNzaWduZWQgdmlhIHRoZSB1c2VySWQgcHJvcGVydHkuICovXG5Ecy5rZXlQYXRoID0gXCJ1c2VySWRcIjtcblxuLyoqXG4gKiBBbiBvYmplY3QgdG8gYmUgc3RvcmVkIGluIHRoZSAnbXV0YXRpb25zJyBzdG9yZSBpbiBJbmRleGVkRGIuXG4gKlxuICogUmVwcmVzZW50cyBhIGJhdGNoIG9mIHVzZXItbGV2ZWwgbXV0YXRpb25zIGludGVuZGVkIHRvIGJlIHNlbnQgdG8gdGhlIHNlcnZlclxuICogaW4gYSBzaW5nbGUgd3JpdGUuIEVhY2ggdXNlci1sZXZlbCBiYXRjaCBnZXRzIGEgc2VwYXJhdGUgRGJNdXRhdGlvbkJhdGNoXG4gKiB3aXRoIGEgbmV3IGJhdGNoSWQuXG4gKi9cbmNsYXNzIENzIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgbm9ybWFsaXplZCB1c2VyIElEIHRvIHdoaWNoIHRoaXMgYmF0Y2ggYmVsb25ncy5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBBbiBpZGVudGlmaWVyIGZvciB0aGlzIGJhdGNoLCBhbGxvY2F0ZWQgdXNpbmcgYW4gYXV0by1nZW5lcmF0ZWQga2V5LlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSBsb2NhbCB3cml0ZSB0aW1lIG9mIHRoZSBiYXRjaCwgc3RvcmVkIGFzIG1pbGxpc2Vjb25kcyBzaW5jZSB0aGVcbiAgICAgKiBlcG9jaC5cbiAgICAgKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBBIGxpc3Qgb2YgXCJtdXRhdGlvbnNcIiB0aGF0IHJlcHJlc2VudCBhIHBhcnRpYWwgYmFzZSBzdGF0ZSBmcm9tIHdoZW4gdGhpc1xuICAgICAqIHdyaXRlIGJhdGNoIHdhcyBpbml0aWFsbHkgY3JlYXRlZC4gRHVyaW5nIGxvY2FsIGFwcGxpY2F0aW9uIG9mIHRoZSB3cml0ZVxuICAgICAqIGJhdGNoLCB0aGVzZSBiYXNlTXV0YXRpb25zIGFyZSBhcHBsaWVkIHByaW9yIHRvIHRoZSByZWFsIHdyaXRlcyBpbiBvcmRlclxuICAgICAqIHRvIG92ZXJyaWRlIGNlcnRhaW4gZG9jdW1lbnQgZmllbGRzIGZyb20gdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZS4gVGhpc1xuICAgICAqIGlzIG5lY2Vzc2FyeSBpbiB0aGUgY2FzZSBvZiBub24taWRlbXBvdGVudCB3cml0ZXMgKGUuZy4gYGluY3JlbWVudCgpYFxuICAgICAqIHRyYW5zZm9ybXMpIHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSBsb2NhbCB2aWV3IG9mIHRoZSBtb2RpZmllZCBkb2N1bWVudHNcbiAgICAgKiBkb2Vzbid0IGZsaWNrZXIgaWYgdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZSByZWNlaXZlcyB0aGUgcmVzdWx0IG9mIHRoZVxuICAgICAqIG5vbi1pZGVtcG90ZW50IHdyaXRlIGJlZm9yZSB0aGUgd3JpdGUgaXMgcmVtb3ZlZCBmcm9tIHRoZSBxdWV1ZS5cbiAgICAgKlxuICAgICAqIFRoZXNlIG11dGF0aW9ucyBhcmUgbmV2ZXIgc2VudCB0byB0aGUgYmFja2VuZC5cbiAgICAgKi9cbiAgICBzLCBcbiAgICAvKipcbiAgICAgKiBBIGxpc3Qgb2YgbXV0YXRpb25zIHRvIGFwcGx5LiBBbGwgbXV0YXRpb25zIHdpbGwgYmUgYXBwbGllZCBhdG9taWNhbGx5LlxuICAgICAqXG4gICAgICogTXV0YXRpb25zIGFyZSBzZXJpYWxpemVkIHZpYSB0b011dGF0aW9uKCkuXG4gICAgICovXG4gICAgaSkge1xuICAgICAgICB0aGlzLnVzZXJJZCA9IHQsIHRoaXMuYmF0Y2hJZCA9IGUsIHRoaXMubG9jYWxXcml0ZVRpbWVNcyA9IG4sIHRoaXMuYmFzZU11dGF0aW9ucyA9IHMsIFxuICAgICAgICB0aGlzLm11dGF0aW9ucyA9IGk7XG4gICAgfVxufVxuXG4vKiogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS4gICovIENzLnN0b3JlID0gXCJtdXRhdGlvbnNcIiwgXG4vKiogS2V5cyBhcmUgYXV0b21hdGljYWxseSBhc3NpZ25lZCB2aWEgdGhlIHVzZXJJZCwgYmF0Y2hJZCBwcm9wZXJ0aWVzLiAqL1xuQ3Mua2V5UGF0aCA9IFwiYmF0Y2hJZFwiLCBcbi8qKiBUaGUgaW5kZXggbmFtZSBmb3IgbG9va3VwIG9mIG11dGF0aW9ucyBieSB1c2VyLiAqL1xuQ3MudXNlck11dGF0aW9uc0luZGV4ID0gXCJ1c2VyTXV0YXRpb25zSW5kZXhcIiwgXG4vKiogVGhlIHVzZXIgbXV0YXRpb25zIGluZGV4IGlzIGtleWVkIGJ5IFt1c2VySWQsIGJhdGNoSWRdIHBhaXJzLiAqL1xuQ3MudXNlck11dGF0aW9uc0tleVBhdGggPSBbIFwidXNlcklkXCIsIFwiYmF0Y2hJZFwiIF07XG5cbi8qKlxuICogQW4gb2JqZWN0IHRvIGJlIHN0b3JlZCBpbiB0aGUgJ2RvY3VtZW50TXV0YXRpb25zJyBzdG9yZSBpbiBJbmRleGVkRGIuXG4gKlxuICogQSBtYW51YWxseSBtYWludGFpbmVkIGluZGV4IG9mIGFsbCB0aGUgbXV0YXRpb24gYmF0Y2hlcyB0aGF0IGFmZmVjdCBhIGdpdmVuXG4gKiBkb2N1bWVudCBrZXkuIFRoZSByb3dzIGluIHRoaXMgdGFibGUgYXJlIHJlZmVyZW5jZXMgYmFzZWQgb24gdGhlIGNvbnRlbnRzIG9mXG4gKiBEYk11dGF0aW9uQmF0Y2gubXV0YXRpb25zLlxuICovXG5jbGFzcyBOcyB7XG4gICAgY29uc3RydWN0b3IoKSB7fVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBbdXNlcklkXSBrZXkgZm9yIHVzZSBpbiB0aGUgRGJEb2N1bWVudE11dGF0aW9ucyBpbmRleCB0byBpdGVyYXRlXG4gICAgICogb3ZlciBhbGwgb2YgYSB1c2VyJ3MgZG9jdW1lbnQgbXV0YXRpb25zLlxuICAgICAqLyAgICBzdGF0aWMgcHJlZml4Rm9yVXNlcih0KSB7XG4gICAgICAgIHJldHVybiBbIHQgXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIFt1c2VySWQsIGVuY29kZWRQYXRoXSBrZXkgZm9yIHVzZSBpbiB0aGUgRGJEb2N1bWVudE11dGF0aW9uc1xuICAgICAqIGluZGV4IHRvIGl0ZXJhdGUgb3ZlciBhbGwgYXQgZG9jdW1lbnQgbXV0YXRpb25zIGZvciBhIGdpdmVuIHBhdGggb3IgbG93ZXIuXG4gICAgICovICAgIHN0YXRpYyBwcmVmaXhGb3JQYXRoKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIFsgdCwgUnMoZSkgXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZ1bGwgaW5kZXgga2V5IG9mIFt1c2VySWQsIGVuY29kZWRQYXRoLCBiYXRjaElkXSBmb3IgaW5zZXJ0aW5nXG4gICAgICogYW5kIGRlbGV0aW5nIGludG8gdGhlIERiRG9jdW1lbnRNdXRhdGlvbnMgaW5kZXguXG4gICAgICovICAgIHN0YXRpYyBrZXkodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gWyB0LCBScyhlKSwgbiBdO1xuICAgIH1cbn1cblxuTnMuc3RvcmUgPSBcImRvY3VtZW50TXV0YXRpb25zXCIsIFxuLyoqXG4gKiBCZWNhdXNlIHdlIHN0b3JlIGFsbCB0aGUgdXNlZnVsIGluZm9ybWF0aW9uIGZvciB0aGlzIHN0b3JlIGluIHRoZSBrZXksXG4gKiB0aGVyZSBpcyBubyB1c2VmdWwgaW5mb3JtYXRpb24gdG8gc3RvcmUgYXMgdGhlIHZhbHVlLiBUaGUgcmF3ICh1bmVuY29kZWQpXG4gKiBwYXRoIGNhbm5vdCBiZSBzdG9yZWQgYmVjYXVzZSBJbmRleGVkRGIgZG9lc24ndCBzdG9yZSBwcm90b3R5cGVcbiAqIGluZm9ybWF0aW9uLlxuICovXG5Ocy5QTEFDRUhPTERFUiA9IG5ldyBOcztcblxuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBrbm93biBhYnNlbmNlIG9mIGEgZG9jdW1lbnQgYXQgYSBwYXJ0aWN1bGFyIHZlcnNpb24uXG4gKiBTdG9yZWQgaW4gSW5kZXhlZERiIGFzIHBhcnQgb2YgYSBEYlJlbW90ZURvY3VtZW50IG9iamVjdC5cbiAqL1xuY2xhc3Mga3Mge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5wYXRoID0gdCwgdGhpcy5yZWFkVGltZSA9IGU7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlcHJlc2VudHMgYSBkb2N1bWVudCB0aGF0IGlzIGtub3duIHRvIGV4aXN0IGJ1dCB3aG9zZSBkYXRhIGlzIHVua25vd24uXG4gKiBTdG9yZWQgaW4gSW5kZXhlZERiIGFzIHBhcnQgb2YgYSBEYlJlbW90ZURvY3VtZW50IG9iamVjdC5cbiAqLyBjbGFzcyB4cyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnBhdGggPSB0LCB0aGlzLnZlcnNpb24gPSBlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBbiBvYmplY3QgdG8gYmUgc3RvcmVkIGluIHRoZSAncmVtb3RlRG9jdW1lbnRzJyBzdG9yZSBpbiBJbmRleGVkRGIuXG4gKiBJdCByZXByZXNlbnRzIGVpdGhlcjpcbiAqXG4gKiAtIEEgY29tcGxldGUgZG9jdW1lbnQuXG4gKiAtIEEgXCJubyBkb2N1bWVudFwiIHJlcHJlc2VudGluZyBhIGRvY3VtZW50IHRoYXQgaXMga25vd24gbm90IHRvIGV4aXN0IChhdFxuICogc29tZSB2ZXJzaW9uKS5cbiAqIC0gQW4gXCJ1bmtub3duIGRvY3VtZW50XCIgcmVwcmVzZW50aW5nIGEgZG9jdW1lbnQgdGhhdCBpcyBrbm93biB0byBleGlzdCAoYXRcbiAqIHNvbWUgdmVyc2lvbikgYnV0IHdob3NlIGNvbnRlbnRzIGFyZSB1bmtub3duLlxuICpcbiAqIE5vdGU6IFRoaXMgaXMgdGhlIHBlcnNpc3RlZCBlcXVpdmFsZW50IG9mIGEgTWF5YmVEb2N1bWVudCBhbmQgY291bGQgcGVyaGFwc1xuICogYmUgbWFkZSBtb3JlIGdlbmVyYWwgaWYgbmVjZXNzYXJ5LlxuICovIGNsYXNzICRzIHtcbiAgICAvLyBUT0RPOiBXZSBhcmUgY3VycmVudGx5IHN0b3JpbmcgZnVsbCBkb2N1bWVudCBrZXlzIGFsbW9zdCB0aHJlZSB0aW1lc1xuICAgIC8vIChvbmNlIGFzIHBhcnQgb2YgdGhlIHByaW1hcnkga2V5LCBvbmNlIC0gcGFydGx5IC0gYXMgYHBhcmVudFBhdGhgIGFuZCBvbmNlXG4gICAgLy8gaW5zaWRlIHRoZSBlbmNvZGVkIGRvY3VtZW50cykuIER1cmluZyBvdXIgbmV4dCBtaWdyYXRpb24sIHdlIHNob3VsZFxuICAgIC8vIHJld3JpdGUgdGhlIHByaW1hcnkga2V5IGFzIHBhcmVudFBhdGggKyBkb2N1bWVudCBJRCB3aGljaCB3b3VsZCBhbGxvdyB1c1xuICAgIC8vIHRvIGRyb3Agb25lIHZhbHVlLlxuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFNldCB0byBhbiBpbnN0YW5jZSBvZiBEYlVua25vd25Eb2N1bWVudCBpZiB0aGUgZGF0YSBmb3IgYSBkb2N1bWVudCBpc1xuICAgICAqIG5vdCBrbm93biwgYnV0IGl0IGlzIGtub3duIHRoYXQgYSBkb2N1bWVudCBleGlzdHMgYXQgdGhlIHNwZWNpZmllZFxuICAgICAqIHZlcnNpb24gKGUuZy4gaXQgaGFkIGEgc3VjY2Vzc2Z1bCB1cGRhdGUgYXBwbGllZCB0byBpdClcbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBTZXQgdG8gYW4gaW5zdGFuY2Ugb2YgYSBEYk5vRG9jdW1lbnQgaWYgaXQgaXMga25vd24gdGhhdCBubyBkb2N1bWVudFxuICAgICAqIGV4aXN0cy5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBTZXQgdG8gYW4gaW5zdGFuY2Ugb2YgYSBEb2N1bWVudCBpZiB0aGVyZSdzIGEgY2FjaGVkIHZlcnNpb24gb2YgdGhlXG4gICAgICogZG9jdW1lbnQuXG4gICAgICovXG4gICAgbiwgXG4gICAgLyoqXG4gICAgICogRG9jdW1lbnRzIHRoYXQgd2VyZSB3cml0dGVuIHRvIHRoZSByZW1vdGUgZG9jdW1lbnQgc3RvcmUgYmFzZWQgb25cbiAgICAgKiBhIHdyaXRlIGFja25vd2xlZGdtZW50IGFyZSBtYXJrZWQgd2l0aCBgaGFzQ29tbWl0dGVkTXV0YXRpb25zYC4gVGhlc2VcbiAgICAgKiBkb2N1bWVudHMgYXJlIHBvdGVudGlhbGx5IGluY29uc2lzdGVudCB3aXRoIHRoZSBiYWNrZW5kJ3MgY29weSBhbmQgdXNlXG4gICAgICogdGhlIHdyaXRlJ3MgY29tbWl0IHZlcnNpb24gYXMgdGhlaXIgZG9jdW1lbnQgdmVyc2lvbi5cbiAgICAgKi9cbiAgICBzLCBcbiAgICAvKipcbiAgICAgKiBXaGVuIHRoZSBkb2N1bWVudCB3YXMgcmVhZCBmcm9tIHRoZSBiYWNrZW5kLiBVbmRlZmluZWQgZm9yIGRhdGEgd3JpdHRlblxuICAgICAqIHByaW9yIHRvIHNjaGVtYSB2ZXJzaW9uIDkuXG4gICAgICovXG4gICAgaSwgXG4gICAgLyoqXG4gICAgICogVGhlIHBhdGggb2YgdGhlIGNvbGxlY3Rpb24gdGhpcyBkb2N1bWVudCBpcyBwYXJ0IG9mLiBVbmRlZmluZWQgZm9yIGRhdGFcbiAgICAgKiB3cml0dGVuIHByaW9yIHRvIHNjaGVtYSB2ZXJzaW9uIDkuXG4gICAgICovXG4gICAgcikge1xuICAgICAgICB0aGlzLnVua25vd25Eb2N1bWVudCA9IHQsIHRoaXMubm9Eb2N1bWVudCA9IGUsIHRoaXMuZG9jdW1lbnQgPSBuLCB0aGlzLmhhc0NvbW1pdHRlZE11dGF0aW9ucyA9IHMsIFxuICAgICAgICB0aGlzLnJlYWRUaW1lID0gaSwgdGhpcy5wYXJlbnRQYXRoID0gcjtcbiAgICB9XG59XG5cbiRzLnN0b3JlID0gXCJyZW1vdGVEb2N1bWVudHNcIiwgXG4vKipcbiAqIEFuIGluZGV4IHRoYXQgcHJvdmlkZXMgYWNjZXNzIHRvIGFsbCBlbnRyaWVzIHNvcnRlZCBieSByZWFkIHRpbWUgKHdoaWNoXG4gKiBjb3JyZXNwb25kcyB0byB0aGUgbGFzdCBtb2RpZmljYXRpb24gdGltZSBvZiBlYWNoIHJvdykuXG4gKlxuICogVGhpcyBpbmRleCBpcyB1c2VkIHRvIHByb3ZpZGUgYSBjaGFuZ2Vsb2cgZm9yIE11bHRpLVRhYi5cbiAqL1xuJHMucmVhZFRpbWVJbmRleCA9IFwicmVhZFRpbWVJbmRleFwiLCAkcy5yZWFkVGltZUluZGV4UGF0aCA9IFwicmVhZFRpbWVcIiwgXG4vKipcbiAqIEFuIGluZGV4IHRoYXQgcHJvdmlkZXMgYWNjZXNzIHRvIGRvY3VtZW50cyBpbiBhIGNvbGxlY3Rpb24gc29ydGVkIGJ5IHJlYWRcbiAqIHRpbWUuXG4gKlxuICogVGhpcyBpbmRleCBpcyB1c2VkIHRvIGFsbG93IHRoZSBSZW1vdGVEb2N1bWVudENhY2hlIHRvIGZldGNoIG5ld2x5IGNoYW5nZWRcbiAqIGRvY3VtZW50cyBpbiBhIGNvbGxlY3Rpb24uXG4gKi9cbiRzLmNvbGxlY3Rpb25SZWFkVGltZUluZGV4ID0gXCJjb2xsZWN0aW9uUmVhZFRpbWVJbmRleFwiLCAkcy5jb2xsZWN0aW9uUmVhZFRpbWVJbmRleFBhdGggPSBbIFwicGFyZW50UGF0aFwiLCBcInJlYWRUaW1lXCIgXTtcblxuLyoqXG4gKiBDb250YWlucyBhIHNpbmdsZSBlbnRyeSB0aGF0IGhhcyBtZXRhZGF0YSBhYm91dCB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlLlxuICovXG5jbGFzcyBGcyB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGJ5dGVTaXplIC0gQXBwcm94aW1hdGVseSB0aGUgdG90YWwgc2l6ZSBpbiBieXRlcyBvZiBhbGwgdGhlXG4gICAgICogZG9jdW1lbnRzIGluIHRoZSBkb2N1bWVudCBjYWNoZS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuYnl0ZVNpemUgPSB0O1xuICAgIH1cbn1cblxuRnMuc3RvcmUgPSBcInJlbW90ZURvY3VtZW50R2xvYmFsXCIsIEZzLmtleSA9IFwicmVtb3RlRG9jdW1lbnRHbG9iYWxLZXlcIjtcblxuLyoqXG4gKiBBbiBvYmplY3QgdG8gYmUgc3RvcmVkIGluIHRoZSAndGFyZ2V0cycgc3RvcmUgaW4gSW5kZXhlZERiLlxuICpcbiAqIFRoaXMgaXMgYmFzZWQgb24gYW5kIHNob3VsZCBiZSBrZXB0IGluIHN5bmMgd2l0aCB0aGUgcHJvdG8gdXNlZCBpbiB0aGUgaU9TXG4gKiBjbGllbnQuXG4gKlxuICogRWFjaCBxdWVyeSB0aGUgY2xpZW50IGxpc3RlbnMgdG8gYWdhaW5zdCB0aGUgc2VydmVyIGlzIHRyYWNrZWQgb24gZGlzayBzb1xuICogdGhhdCB0aGUgcXVlcnkgY2FuIGJlIGVmZmljaWVudGx5IHJlc3VtZWQgb24gcmVzdGFydC5cbiAqL1xuY2xhc3MgT3Mge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIEFuIGF1dG8tZ2VuZXJhdGVkIHNlcXVlbnRpYWwgbnVtZXJpYyBpZGVudGlmaWVyIGZvciB0aGUgcXVlcnkuXG4gICAgICpcbiAgICAgKiBRdWVyaWVzIGFyZSBzdG9yZWQgdXNpbmcgdGhlaXIgY2Fub25pY2FsSWQgYXMgdGhlIGtleSwgYnV0IHRoZXNlXG4gICAgICogY2Fub25pY2FsSWRzIGNhbiBiZSBxdWl0ZSBsb25nIHNvIHdlIGFkZGl0aW9uYWxseSBhc3NpZ24gYSB1bmlxdWVcbiAgICAgKiBxdWVyeUlkIHdoaWNoIGNhbiBiZSB1c2VkIGJ5IHJlZmVyZW5jZWQgZGF0YSBzdHJ1Y3R1cmVzIChlLmcuXG4gICAgICogaW5kZXhlcykgdG8gbWluaW1pemUgdGhlIG9uLWRpc2sgY29zdC5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgY2Fub25pY2FsIHN0cmluZyByZXByZXNlbnRpbmcgdGhpcyBxdWVyeS4gVGhpcyBpcyBub3QgdW5pcXVlLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSBsYXN0IHJlYWRUaW1lIHJlY2VpdmVkIGZyb20gdGhlIFdhdGNoIFNlcnZpY2UgZm9yIHRoaXMgcXVlcnkuXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIHRoZSBzYW1lIHZhbHVlIGFzIFRhcmdldENoYW5nZS5yZWFkX3RpbWUgaW4gdGhlIHByb3Rvcy5cbiAgICAgKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBBbiBvcGFxdWUsIHNlcnZlci1hc3NpZ25lZCB0b2tlbiB0aGF0IGFsbG93cyB3YXRjaGluZyBhIHF1ZXJ5IHRvIGJlXG4gICAgICogcmVzdW1lZCBhZnRlciBkaXNjb25uZWN0aW5nIHdpdGhvdXQgcmV0cmFuc21pdHRpbmcgYWxsIHRoZSBkYXRhXG4gICAgICogdGhhdCBtYXRjaGVzIHRoZSBxdWVyeS4gVGhlIHJlc3VtZSB0b2tlbiBlc3NlbnRpYWxseSBpZGVudGlmaWVzIGFcbiAgICAgKiBwb2ludCBpbiB0aW1lIGZyb20gd2hpY2ggdGhlIHNlcnZlciBzaG91bGQgcmVzdW1lIHNlbmRpbmcgcmVzdWx0cy5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgcmVsYXRlZCB0byB0aGUgc25hcHNob3RWZXJzaW9uIGluIHRoYXQgdGhlIHJlc3VtZVRva2VuXG4gICAgICogZWZmZWN0aXZlbHkgYWxzbyBlbmNvZGVzIHRoYXQgdmFsdWUsIGJ1dCB0aGUgcmVzdW1lVG9rZW4gaXMgb3BhcXVlXG4gICAgICogYW5kIHNvbWV0aW1lcyBlbmNvZGVzIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24uXG4gICAgICpcbiAgICAgKiBBIGNvbnNlcXVlbmNlIG9mIHRoaXMgaXMgdGhhdCB0aGUgcmVzdW1lVG9rZW4gc2hvdWxkIGJlIHVzZWQgd2hlblxuICAgICAqIGFza2luZyB0aGUgc2VydmVyIHRvIHJlYXNvbiBhYm91dCB3aGVyZSB0aGlzIGNsaWVudCBpcyBpbiB0aGUgd2F0Y2hcbiAgICAgKiBzdHJlYW0sIGJ1dCB0aGUgY2xpZW50IHNob3VsZCB1c2UgdGhlIHNuYXBzaG90VmVyc2lvbiBmb3IgaXRzIG93blxuICAgICAqIHB1cnBvc2VzLlxuICAgICAqXG4gICAgICogVGhpcyBpcyB0aGUgc2FtZSB2YWx1ZSBhcyBUYXJnZXRDaGFuZ2UucmVzdW1lX3Rva2VuIGluIHRoZSBwcm90b3MuXG4gICAgICovXG4gICAgcywgXG4gICAgLyoqXG4gICAgICogQSBzZXF1ZW5jZSBudW1iZXIgcmVwcmVzZW50aW5nIHRoZSBsYXN0IHRpbWUgdGhpcyBxdWVyeSB3YXNcbiAgICAgKiBsaXN0ZW5lZCB0bywgdXNlZCBmb3IgZ2FyYmFnZSBjb2xsZWN0aW9uIHB1cnBvc2VzLlxuICAgICAqXG4gICAgICogQ29udmVudGlvbmFsbHkgdGhpcyB3b3VsZCBiZSBhIHRpbWVzdGFtcCB2YWx1ZSwgYnV0IGRldmljZS1sb2NhbFxuICAgICAqIGNsb2NrcyBhcmUgdW5yZWxpYWJsZSBhbmQgdGhleSBtdXN0IGJlIGFibGUgdG8gY3JlYXRlIG5ldyBsaXN0ZW5zXG4gICAgICogZXZlbiB3aGlsZSBkaXNjb25uZWN0ZWQuIEluc3RlYWQgdGhpcyBzaG91bGQgYmUgYSBtb25vdG9uaWNhbGx5XG4gICAgICogaW5jcmVhc2luZyBudW1iZXIgdGhhdCdzIGluY3JlbWVudGVkIG9uIGVhY2ggbGlzdGVuIGNhbGwuXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIGRpZmZlcmVudCBmcm9tIHRoZSBxdWVyeUlkIHNpbmNlIHRoZSBxdWVyeUlkIGlzIGFuXG4gICAgICogaW1tdXRhYmxlIGlkZW50aWZpZXIgYXNzaWduZWQgdG8gdGhlIFF1ZXJ5IG9uIGZpcnN0IHVzZSB3aGlsZVxuICAgICAqIGxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciBpcyB1cGRhdGVkIGV2ZXJ5IHRpbWUgdGhlIHF1ZXJ5IGlzXG4gICAgICogbGlzdGVuZWQgdG8uXG4gICAgICovXG4gICAgaSwgXG4gICAgLyoqXG4gICAgICogRGVub3RlcyB0aGUgbWF4aW11bSBzbmFwc2hvdCB2ZXJzaW9uIGF0IHdoaWNoIHRoZSBhc3NvY2lhdGVkIHF1ZXJ5IHZpZXdcbiAgICAgKiBjb250YWluZWQgbm8gbGltYm8gZG9jdW1lbnRzLiAgVW5kZWZpbmVkIGZvciBkYXRhIHdyaXR0ZW4gcHJpb3IgdG9cbiAgICAgKiBzY2hlbWEgdmVyc2lvbiA5LlxuICAgICAqL1xuICAgIHIsIFxuICAgIC8qKlxuICAgICAqIFRoZSBxdWVyeSBmb3IgdGhpcyB0YXJnZXQuXG4gICAgICpcbiAgICAgKiBCZWNhdXNlIGNhbm9uaWNhbCBpZHMgYXJlIG5vdCB1bmlxdWUgd2UgbXVzdCBzdG9yZSB0aGUgYWN0dWFsIHF1ZXJ5LiBXZVxuICAgICAqIHVzZSB0aGUgcHJvdG8gdG8gaGF2ZSBhbiBvYmplY3Qgd2UgY2FuIHBlcnNpc3Qgd2l0aG91dCBoYXZpbmcgdG9cbiAgICAgKiBkdXBsaWNhdGUgdHJhbnNsYXRpb24gbG9naWMgdG8gYW5kIGZyb20gYSBgUXVlcnlgIG9iamVjdC5cbiAgICAgKi9cbiAgICBvKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSB0LCB0aGlzLmNhbm9uaWNhbElkID0gZSwgdGhpcy5yZWFkVGltZSA9IG4sIHRoaXMucmVzdW1lVG9rZW4gPSBzLCBcbiAgICAgICAgdGhpcy5sYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgPSBpLCB0aGlzLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gPSByLCB0aGlzLnF1ZXJ5ID0gbztcbiAgICB9XG59XG5cbk9zLnN0b3JlID0gXCJ0YXJnZXRzXCIsIFxuLyoqIEtleXMgYXJlIGF1dG9tYXRpY2FsbHkgYXNzaWduZWQgdmlhIHRoZSB0YXJnZXRJZCBwcm9wZXJ0eS4gKi9cbk9zLmtleVBhdGggPSBcInRhcmdldElkXCIsIFxuLyoqIFRoZSBuYW1lIG9mIHRoZSBxdWVyeVRhcmdldHMgaW5kZXguICovXG5Pcy5xdWVyeVRhcmdldHNJbmRleE5hbWUgPSBcInF1ZXJ5VGFyZ2V0c0luZGV4XCIsIFxuLyoqXG4gKiBUaGUgaW5kZXggb2YgYWxsIGNhbm9uaWNhbElkcyB0byB0aGUgdGFyZ2V0cyB0aGF0IHRoZXkgbWF0Y2guIFRoaXMgaXMgbm90XG4gKiBhIHVuaXF1ZSBtYXBwaW5nIGJlY2F1c2UgY2Fub25pY2FsSWQgZG9lcyBub3QgcHJvbWlzZSBhIHVuaXF1ZSBuYW1lIGZvciBhbGxcbiAqIHBvc3NpYmxlIHF1ZXJpZXMsIHNvIHdlIGFwcGVuZCB0aGUgdGFyZ2V0SWQgdG8gbWFrZSB0aGUgbWFwcGluZyB1bmlxdWUuXG4gKi9cbk9zLnF1ZXJ5VGFyZ2V0c0tleVBhdGggPSBbIFwiY2Fub25pY2FsSWRcIiwgXCJ0YXJnZXRJZFwiIF07XG5cbi8qKlxuICogQW4gb2JqZWN0IHJlcHJlc2VudGluZyBhbiBhc3NvY2lhdGlvbiBiZXR3ZWVuIGEgdGFyZ2V0IGFuZCBhIGRvY3VtZW50LCBvciBhXG4gKiBzZW50aW5lbCByb3cgbWFya2luZyB0aGUgbGFzdCBzZXF1ZW5jZSBudW1iZXIgYXQgd2hpY2ggYSBkb2N1bWVudCB3YXMgdXNlZC5cbiAqIEVhY2ggZG9jdW1lbnQgY2FjaGVkIG11c3QgaGF2ZSBhIGNvcnJlc3BvbmRpbmcgc2VudGluZWwgcm93IGJlZm9yZSBscnVcbiAqIGdhcmJhZ2UgY29sbGVjdGlvbiBpcyBlbmFibGVkLlxuICpcbiAqIFRoZSB0YXJnZXQgYXNzb2NpYXRpb25zIGFuZCBzZW50aW5lbCByb3dzIGFyZSBjby1sb2NhdGVkIHNvIHRoYXQgb3JwaGFuZWRcbiAqIGRvY3VtZW50cyBhbmQgdGhlaXIgc2VxdWVuY2UgbnVtYmVycyBjYW4gYmUgaWRlbnRpZmllZCBlZmZpY2llbnRseSB2aWEgYSBzY2FuXG4gKiBvZiB0aGlzIHN0b3JlLlxuICovXG5jbGFzcyBNcyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIHRhcmdldElkIGlkZW50aWZ5aW5nIGEgdGFyZ2V0IG9yIDAgZm9yIGEgc2VudGluZWwgcm93LlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBwYXRoIHRvIHRoZSBkb2N1bWVudCwgYXMgZW5jb2RlZCBpbiB0aGUga2V5LlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIElmIHRoaXMgaXMgYSBzZW50aW5lbCByb3csIHRoaXMgc2hvdWxkIGJlIHRoZSBzZXF1ZW5jZSBudW1iZXIgb2YgdGhlIGxhc3RcbiAgICAgKiB0aW1lIHRoZSBkb2N1bWVudCBzcGVjaWZpZWQgYnkgYHBhdGhgIHdhcyB1c2VkLiBPdGhlcndpc2UsIGl0IHNob3VsZCBiZVxuICAgICAqIGB1bmRlZmluZWRgLlxuICAgICAqL1xuICAgIG4pIHtcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHQsIHRoaXMucGF0aCA9IGUsIHRoaXMuc2VxdWVuY2VOdW1iZXIgPSBuO1xuICAgIH1cbn1cblxuLyoqIE5hbWUgb2YgdGhlIEluZGV4ZWREYiBvYmplY3Qgc3RvcmUuICAqLyBNcy5zdG9yZSA9IFwidGFyZ2V0RG9jdW1lbnRzXCIsIFxuLyoqIEtleXMgYXJlIGF1dG9tYXRpY2FsbHkgYXNzaWduZWQgdmlhIHRoZSB0YXJnZXRJZCwgcGF0aCBwcm9wZXJ0aWVzLiAqL1xuTXMua2V5UGF0aCA9IFsgXCJ0YXJnZXRJZFwiLCBcInBhdGhcIiBdLCBcbi8qKiBUaGUgaW5kZXggbmFtZSBmb3IgdGhlIHJldmVyc2UgaW5kZXguICovXG5Ncy5kb2N1bWVudFRhcmdldHNJbmRleCA9IFwiZG9jdW1lbnRUYXJnZXRzSW5kZXhcIiwgXG4vKiogV2UgYWxzbyBuZWVkIHRvIGNyZWF0ZSB0aGUgcmV2ZXJzZSBpbmRleCBmb3IgdGhlc2UgcHJvcGVydGllcy4gKi9cbk1zLmRvY3VtZW50VGFyZ2V0c0tleVBhdGggPSBbIFwicGF0aFwiLCBcInRhcmdldElkXCIgXTtcblxuLyoqXG4gKiBBIHJlY29yZCBvZiBnbG9iYWwgc3RhdGUgdHJhY2tlZCBhY3Jvc3MgYWxsIFRhcmdldHMsIHRyYWNrZWQgc2VwYXJhdGVseVxuICogdG8gYXZvaWQgdGhlIG5lZWQgZm9yIGV4dHJhIGluZGV4ZXMuXG4gKlxuICogVGhpcyBzaG91bGQgYmUga2VwdCBpbi1zeW5jIHdpdGggdGhlIHByb3RvIHVzZWQgaW4gdGhlIGlPUyBjbGllbnQuXG4gKi9cbmNsYXNzIExzIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgaGlnaGVzdCBudW1iZXJlZCB0YXJnZXQgaWQgYWNyb3NzIGFsbCB0YXJnZXRzLlxuICAgICAqXG4gICAgICogU2VlIERiVGFyZ2V0LnRhcmdldElkLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBoaWdoZXN0IG51bWJlcmVkIGxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciBhY3Jvc3MgYWxsIHRhcmdldHMuXG4gICAgICpcbiAgICAgKiBTZWUgRGJUYXJnZXQubGFzdExpc3RlblNlcXVlbmNlTnVtYmVyLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIEEgZ2xvYmFsIHNuYXBzaG90IHZlcnNpb24gcmVwcmVzZW50aW5nIHRoZSBsYXN0IGNvbnNpc3RlbnQgc25hcHNob3Qgd2VcbiAgICAgKiByZWNlaXZlZCBmcm9tIHRoZSBiYWNrZW5kLiBUaGlzIGlzIG1vbm90b25pY2FsbHkgaW5jcmVhc2luZyBhbmQgYW55XG4gICAgICogc25hcHNob3RzIHJlY2VpdmVkIGZyb20gdGhlIGJhY2tlbmQgcHJpb3IgdG8gdGhpcyB2ZXJzaW9uIChlLmcuIGZvclxuICAgICAqIHRhcmdldHMgcmVzdW1lZCB3aXRoIGEgcmVzdW1lVG9rZW4pIHNob3VsZCBiZSBzdXBwcmVzc2VkIChidWZmZXJlZClcbiAgICAgKiB1bnRpbCB0aGUgYmFja2VuZCBoYXMgY2F1Z2h0IHVwIHRvIHRoaXMgc25hcHNob3QgdmVyc2lvbiBhZ2Fpbi4gVGhpc1xuICAgICAqIHByZXZlbnRzIG91ciBjYWNoZSBmcm9tIGV2ZXIgZ29pbmcgYmFja3dhcmRzIGluIHRpbWUuXG4gICAgICovXG4gICAgbiwgXG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiB0YXJnZXRzIHBlcnNpc3RlZC5cbiAgICAgKi9cbiAgICBzKSB7XG4gICAgICAgIHRoaXMuaGlnaGVzdFRhcmdldElkID0gdCwgdGhpcy5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgPSBlLCB0aGlzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSBuLCBcbiAgICAgICAgdGhpcy50YXJnZXRDb3VudCA9IHM7XG4gICAgfVxufVxuXG4vKipcbiAqIFRoZSBrZXkgc3RyaW5nIHVzZWQgZm9yIHRoZSBzaW5nbGUgb2JqZWN0IHRoYXQgZXhpc3RzIGluIHRoZVxuICogRGJUYXJnZXRHbG9iYWwgc3RvcmUuXG4gKi8gTHMua2V5ID0gXCJ0YXJnZXRHbG9iYWxLZXlcIiwgTHMuc3RvcmUgPSBcInRhcmdldEdsb2JhbFwiO1xuXG4vKipcbiAqIEFuIG9iamVjdCByZXByZXNlbnRpbmcgYW4gYXNzb2NpYXRpb24gYmV0d2VlbiBhIENvbGxlY3Rpb24gaWQgKGUuZy4gJ21lc3NhZ2VzJylcbiAqIHRvIGEgcGFyZW50IHBhdGggKGUuZy4gJy9jaGF0cy8xMjMnKSB0aGF0IGNvbnRhaW5zIGl0IGFzIGEgKHN1Yiljb2xsZWN0aW9uLlxuICogVGhpcyBpcyB1c2VkIHRvIGVmZmljaWVudGx5IGZpbmQgYWxsIGNvbGxlY3Rpb25zIHRvIHF1ZXJ5IHdoZW4gcGVyZm9ybWluZ1xuICogYSBDb2xsZWN0aW9uIEdyb3VwIHF1ZXJ5LlxuICovXG5jbGFzcyBCcyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIGNvbGxlY3Rpb25JZCAoZS5nLiAnbWVzc2FnZXMnKVxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBwYXRoIHRvIHRoZSBwYXJlbnQgKGVpdGhlciBhIGRvY3VtZW50IGxvY2F0aW9uIG9yIGFuIGVtcHR5IHBhdGggZm9yXG4gICAgICogYSByb290LWxldmVsIGNvbGxlY3Rpb24pLlxuICAgICAqL1xuICAgIGUpIHtcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uSWQgPSB0LCB0aGlzLnBhcmVudCA9IGU7XG4gICAgfVxufVxuXG4vKiogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS4gKi8gQnMuc3RvcmUgPSBcImNvbGxlY3Rpb25QYXJlbnRzXCIsIFxuLyoqIEtleXMgYXJlIGF1dG9tYXRpY2FsbHkgYXNzaWduZWQgdmlhIHRoZSBjb2xsZWN0aW9uSWQsIHBhcmVudCBwcm9wZXJ0aWVzLiAqL1xuQnMua2V5UGF0aCA9IFsgXCJjb2xsZWN0aW9uSWRcIiwgXCJwYXJlbnRcIiBdO1xuXG4vKipcbiAqIEEgcmVjb3JkIG9mIHRoZSBtZXRhZGF0YSBzdGF0ZSBvZiBlYWNoIGNsaWVudC5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgdXNlZCB0byBzeW5jaHJvbml6ZSBtdWx0aS10YWIgc3RhdGUgYW5kIGRvZXMgbm90IG5lZWRcbiAqIHRvIGJlIHBvcnRlZCB0byBpT1Mgb3IgQW5kcm9pZC5cbiAqL1xuY2xhc3MgVXMge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8vIE5vdGU6IFByZXZpb3VzIHNjaGVtYSB2ZXJzaW9ucyBpbmNsdWRlZCBhIGZpZWxkXG4gICAgLy8gXCJsYXN0UHJvY2Vzc2VkRG9jdW1lbnRDaGFuZ2VJZFwiLiBEb24ndCB1c2UgYW55bW9yZS5cbiAgICAvKiogVGhlIGF1dG8tZ2VuZXJhdGVkIGNsaWVudCBpZCBhc3NpZ25lZCBhdCBjbGllbnQgc3RhcnR1cC4gKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIGxhc3QgdGltZSB0aGlzIHN0YXRlIHdhcyB1cGRhdGVkLiAqL1xuICAgIGUsIFxuICAgIC8qKiBXaGV0aGVyIHRoZSBjbGllbnQncyBuZXR3b3JrIGNvbm5lY3Rpb24gaXMgZW5hYmxlZC4gKi9cbiAgICBuLCBcbiAgICAvKiogV2hldGhlciB0aGlzIGNsaWVudCBpcyBydW5uaW5nIGluIGEgZm9yZWdyb3VuZCB0YWIuICovXG4gICAgcykge1xuICAgICAgICB0aGlzLmNsaWVudElkID0gdCwgdGhpcy51cGRhdGVUaW1lTXMgPSBlLCB0aGlzLm5ldHdvcmtFbmFibGVkID0gbiwgdGhpcy5pbkZvcmVncm91bmQgPSBzO1xuICAgIH1cbn1cblxuLyoqIE5hbWUgb2YgdGhlIEluZGV4ZWREYiBvYmplY3Qgc3RvcmUuICovIFVzLnN0b3JlID0gXCJjbGllbnRNZXRhZGF0YVwiLCBcbi8qKiBLZXlzIGFyZSBhdXRvbWF0aWNhbGx5IGFzc2lnbmVkIHZpYSB0aGUgY2xpZW50SWQgcHJvcGVydGllcy4gKi9cblVzLmtleVBhdGggPSBcImNsaWVudElkXCI7XG5cbi8qKlxuICogQSBvYmplY3QgcmVwcmVzZW50aW5nIGEgYnVuZGxlIGxvYWRlZCBieSB0aGUgU0RLLlxuICovXG5jbGFzcyBxcyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSBJRCBvZiB0aGUgbG9hZGVkIGJ1bmRsZS4gKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIGNyZWF0ZSB0aW1lIG9mIHRoZSBsb2FkZWQgYnVuZGxlLiAqL1xuICAgIGUsIFxuICAgIC8qKiBUaGUgc2NoZW1hIHZlcnNpb24gb2YgdGhlIGxvYWRlZCBidW5kbGUuICovXG4gICAgbikge1xuICAgICAgICB0aGlzLmJ1bmRsZUlkID0gdCwgdGhpcy5jcmVhdGVUaW1lID0gZSwgdGhpcy52ZXJzaW9uID0gbjtcbiAgICB9XG59XG5cbi8qKiBOYW1lIG9mIHRoZSBJbmRleGVkRGIgb2JqZWN0IHN0b3JlLiAqLyBxcy5zdG9yZSA9IFwiYnVuZGxlc1wiLCBxcy5rZXlQYXRoID0gXCJidW5kbGVJZFwiO1xuXG4vKipcbiAqIEEgb2JqZWN0IHJlcHJlc2VudGluZyBhIG5hbWVkIHF1ZXJ5IGxvYWRlZCBieSB0aGUgU0RLIHZpYSBhIGJ1bmRsZS5cbiAqL1xuY2xhc3MgS3Mge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgbmFtZSBvZiB0aGUgcXVlcnkuICovXG4gICAgdCwgXG4gICAgLyoqIFRoZSByZWFkIHRpbWUgb2YgdGhlIHJlc3VsdHMgc2F2ZWQgaW4gdGhlIGJ1bmRsZSBmcm9tIHRoZSBuYW1lZCBxdWVyeS4gKi9cbiAgICBlLCBcbiAgICAvKiogVGhlIHF1ZXJ5IHNhdmVkIGluIHRoZSBidW5kbGUuICovXG4gICAgbikge1xuICAgICAgICB0aGlzLm5hbWUgPSB0LCB0aGlzLnJlYWRUaW1lID0gZSwgdGhpcy5idW5kbGVkUXVlcnkgPSBuO1xuICAgIH1cbn1cblxuLyoqIE5hbWUgb2YgdGhlIEluZGV4ZWREYiBvYmplY3Qgc3RvcmUuICovIEtzLnN0b3JlID0gXCJuYW1lZFF1ZXJpZXNcIiwgS3Mua2V5UGF0aCA9IFwibmFtZVwiO1xuXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXG5jb25zdCBqcyA9IFsgLi4uWyAuLi5bIC4uLlsgLi4uWyBEcy5zdG9yZSwgQ3Muc3RvcmUsIE5zLnN0b3JlLCAkcy5zdG9yZSwgT3Muc3RvcmUsIFNzLnN0b3JlLCBMcy5zdG9yZSwgTXMuc3RvcmUgXSwgVXMuc3RvcmUgXSwgRnMuc3RvcmUgXSwgQnMuc3RvcmUgXSwgcXMuc3RvcmUsIEtzLnN0b3JlIF0sIFFzID0gXCJUaGUgY3VycmVudCB0YWIgaXMgbm90IGluIHRoZSByZXF1aXJlZCBzdGF0ZSB0byBwZXJmb3JtIHRoaXMgb3BlcmF0aW9uLiBJdCBtaWdodCBiZSBuZWNlc3NhcnkgdG8gcmVmcmVzaCB0aGUgYnJvd3NlciB0YWIuXCI7XG5cbi8vIFYyIGlzIG5vIGxvbmdlciB1c2FibGUgKHNlZSBjb21tZW50IGF0IHRvcCBvZiBmaWxlKVxuLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xuLyoqXG4gKiBBIGJhc2UgY2xhc3MgcmVwcmVzZW50aW5nIGEgcGVyc2lzdGVuY2UgdHJhbnNhY3Rpb24sIGVuY2Fwc3VsYXRpbmcgYm90aCB0aGVcbiAqIHRyYW5zYWN0aW9uJ3Mgc2VxdWVuY2UgbnVtYmVycyBhcyB3ZWxsIGFzIGEgbGlzdCBvZiBvbkNvbW1pdHRlZCBsaXN0ZW5lcnMuXG4gKlxuICogV2hlbiB5b3UgY2FsbCBQZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbigpLCBpdCB3aWxsIGNyZWF0ZSBhIHRyYW5zYWN0aW9uIGFuZFxuICogcGFzcyBpdCB0byB5b3VyIGNhbGxiYWNrLiBZb3UgdGhlbiBwYXNzIGl0IHRvIGFueSBtZXRob2QgdGhhdCBvcGVyYXRlc1xuICogb24gcGVyc2lzdGVuY2UuXG4gKi9cbmNsYXNzIFdzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5vbkNvbW1pdHRlZExpc3RlbmVycyA9IFtdO1xuICAgIH1cbiAgICBhZGRPbkNvbW1pdHRlZExpc3RlbmVyKHQpIHtcbiAgICAgICAgdGhpcy5vbkNvbW1pdHRlZExpc3RlbmVycy5wdXNoKHQpO1xuICAgIH1cbiAgICByYWlzZU9uQ29tbWl0dGVkRXZlbnQoKSB7XG4gICAgICAgIHRoaXMub25Db21taXR0ZWRMaXN0ZW5lcnMuZm9yRWFjaCgodCA9PiB0KCkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFBlcnNpc3RlbmNlUHJvbWlzZSBpcyBlc3NlbnRpYWxseSBhIHJlLWltcGxlbWVudGF0aW9uIG9mIFByb21pc2UgZXhjZXB0XG4gKiBpdCBoYXMgYSAubmV4dCgpIG1ldGhvZCBpbnN0ZWFkIG9mIC50aGVuKCkgYW5kIC5uZXh0KCkgYW5kIC5jYXRjaCgpIGNhbGxiYWNrc1xuICogYXJlIGV4ZWN1dGVkIHN5bmNocm9ub3VzbHkgd2hlbiBhIFBlcnNpc3RlbmNlUHJvbWlzZSByZXNvbHZlcyByYXRoZXIgdGhhblxuICogYXN5bmNocm9ub3VzbHkgKFByb21pc2UgaW1wbGVtZW50YXRpb25zIHVzZSBzZXRJbW1lZGlhdGUoKSBvciBzaW1pbGFyKS5cbiAqXG4gKiBUaGlzIGlzIG5lY2Vzc2FyeSB0byBpbnRlcm9wZXJhdGUgd2l0aCBJbmRleGVkREIgd2hpY2ggd2lsbCBhdXRvbWF0aWNhbGx5XG4gKiBjb21taXQgdHJhbnNhY3Rpb25zIGlmIGNvbnRyb2wgaXMgcmV0dXJuZWQgdG8gdGhlIGV2ZW50IGxvb3Agd2l0aG91dFxuICogc3luY2hyb25vdXNseSBpbml0aWF0aW5nIGFub3RoZXIgb3BlcmF0aW9uIG9uIHRoZSB0cmFuc2FjdGlvbi5cbiAqXG4gKiBOT1RFOiAudGhlbigpIGFuZCAuY2F0Y2goKSBvbmx5IGFsbG93IGEgc2luZ2xlIGNvbnN1bWVyLCB1bmxpa2Ugbm9ybWFsXG4gKiBQcm9taXNlcy5cbiAqLyBjbGFzcyBHcyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICAvLyBOT1RFOiBuZXh0L2NhdGNoQ2FsbGJhY2sgd2lsbCBhbHdheXMgcG9pbnQgdG8gb3VyIG93biB3cmFwcGVyIGZ1bmN0aW9ucyxcbiAgICAgICAgLy8gbm90IHRoZSB1c2VyJ3MgcmF3IG5leHQoKSBvciBjYXRjaCgpIGNhbGxiYWNrcy5cbiAgICAgICAgdGhpcy5uZXh0Q2FsbGJhY2sgPSBudWxsLCB0aGlzLmNhdGNoQ2FsbGJhY2sgPSBudWxsLCBcbiAgICAgICAgLy8gV2hlbiB0aGUgb3BlcmF0aW9uIHJlc29sdmVzLCB3ZSdsbCBzZXQgcmVzdWx0IG9yIGVycm9yIGFuZCBtYXJrIGlzRG9uZS5cbiAgICAgICAgdGhpcy5yZXN1bHQgPSB2b2lkIDAsIHRoaXMuZXJyb3IgPSB2b2lkIDAsIHRoaXMuaXNEb25lID0gITEsIFxuICAgICAgICAvLyBTZXQgdG8gdHJ1ZSB3aGVuIC50aGVuKCkgb3IgLmNhdGNoKCkgYXJlIGNhbGxlZCBhbmQgcHJldmVudHMgYWRkaXRpb25hbFxuICAgICAgICAvLyBjaGFpbmluZy5cbiAgICAgICAgdGhpcy5jYWxsYmFja0F0dGFjaGVkID0gITEsIHQoKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc0RvbmUgPSAhMCwgdGhpcy5yZXN1bHQgPSB0LCB0aGlzLm5leHRDYWxsYmFjayAmJiBcbiAgICAgICAgICAgIC8vIHZhbHVlIHNob3VsZCBiZSBkZWZpbmVkIHVubGVzcyBUIGlzIFZvaWQsIGJ1dCB3ZSBjYW4ndCBleHByZXNzXG4gICAgICAgICAgICAvLyB0aGF0IGluIHRoZSB0eXBlIHN5c3RlbS5cbiAgICAgICAgICAgIHRoaXMubmV4dENhbGxiYWNrKHQpO1xuICAgICAgICB9KSwgKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc0RvbmUgPSAhMCwgdGhpcy5lcnJvciA9IHQsIHRoaXMuY2F0Y2hDYWxsYmFjayAmJiB0aGlzLmNhdGNoQ2FsbGJhY2sodCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgY2F0Y2godCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uZXh0KHZvaWQgMCwgdCk7XG4gICAgfVxuICAgIG5leHQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxsYmFja0F0dGFjaGVkICYmIEwoKSwgdGhpcy5jYWxsYmFja0F0dGFjaGVkID0gITAsIHRoaXMuaXNEb25lID8gdGhpcy5lcnJvciA/IHRoaXMud3JhcEZhaWx1cmUoZSwgdGhpcy5lcnJvcikgOiB0aGlzLndyYXBTdWNjZXNzKHQsIHRoaXMucmVzdWx0KSA6IG5ldyBHcygoKG4sIHMpID0+IHtcbiAgICAgICAgICAgIHRoaXMubmV4dENhbGxiYWNrID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy53cmFwU3VjY2Vzcyh0LCBlKS5uZXh0KG4sIHMpO1xuICAgICAgICAgICAgfSwgdGhpcy5jYXRjaENhbGxiYWNrID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy53cmFwRmFpbHVyZShlLCB0KS5uZXh0KG4sIHMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b1Byb21pc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMubmV4dCh0LCBlKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB3cmFwVXNlckZ1bmN0aW9uKHQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0KCk7XG4gICAgICAgICAgICByZXR1cm4gZSBpbnN0YW5jZW9mIEdzID8gZSA6IEdzLnJlc29sdmUoZSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBHcy5yZWplY3QodCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgd3JhcFN1Y2Nlc3ModCwgZSkge1xuICAgICAgICByZXR1cm4gdCA/IHRoaXMud3JhcFVzZXJGdW5jdGlvbigoKCkgPT4gdChlKSkpIDogR3MucmVzb2x2ZShlKTtcbiAgICB9XG4gICAgd3JhcEZhaWx1cmUodCwgZSkge1xuICAgICAgICByZXR1cm4gdCA/IHRoaXMud3JhcFVzZXJGdW5jdGlvbigoKCkgPT4gdChlKSkpIDogR3MucmVqZWN0KGUpO1xuICAgIH1cbiAgICBzdGF0aWMgcmVzb2x2ZSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgR3MoKChlLCBuKSA9PiB7XG4gICAgICAgICAgICBlKHQpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHN0YXRpYyByZWplY3QodCkge1xuICAgICAgICByZXR1cm4gbmV3IEdzKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgbih0KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzdGF0aWMgd2FpdEZvcihcbiAgICAvLyBBY2NlcHQgYWxsIFByb21pc2UgdHlwZXMgaW4gd2FpdEZvcigpLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgdCkge1xuICAgICAgICByZXR1cm4gbmV3IEdzKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgbGV0IHMgPSAwLCBpID0gMCwgciA9ICExO1xuICAgICAgICAgICAgdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICArK3MsIHQubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICArK2ksIHIgJiYgaSA9PT0gcyAmJiBlKCk7XG4gICAgICAgICAgICAgICAgfSksICh0ID0+IG4odCkpKTtcbiAgICAgICAgICAgIH0pKSwgciA9ICEwLCBpID09PSBzICYmIGUoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHaXZlbiBhbiBhcnJheSBvZiBwcmVkaWNhdGUgZnVuY3Rpb25zIHRoYXQgYXN5bmNocm9ub3VzbHkgZXZhbHVhdGUgdG8gYVxuICAgICAqIGJvb2xlYW4sIGltcGxlbWVudHMgYSBzaG9ydC1jaXJjdWl0aW5nIGBvcmAgYmV0d2VlbiB0aGUgcmVzdWx0cy4gUHJlZGljYXRlc1xuICAgICAqIHdpbGwgYmUgZXZhbHVhdGVkIHVudGlsIG9uZSBvZiB0aGVtIHJldHVybnMgYHRydWVgLCB0aGVuIHN0b3AuIFRoZSBmaW5hbFxuICAgICAqIHJlc3VsdCB3aWxsIGJlIHdoZXRoZXIgYW55IG9mIHRoZW0gcmV0dXJuZWQgYHRydWVgLlxuICAgICAqLyAgICBzdGF0aWMgb3IodCkge1xuICAgICAgICBsZXQgZSA9IEdzLnJlc29sdmUoITEpO1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdCkgZSA9IGUubmV4dCgodCA9PiB0ID8gR3MucmVzb2x2ZSh0KSA6IG4oKSkpO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgc3RhdGljIGZvckVhY2godCwgZSkge1xuICAgICAgICBjb25zdCBuID0gW107XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKCh0LCBzKSA9PiB7XG4gICAgICAgICAgICBuLnB1c2goZS5jYWxsKHRoaXMsIHQsIHMpKTtcbiAgICAgICAgfSkpLCB0aGlzLndhaXRGb3Iobik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gUmVmZXJlbmNlcyB0byBgd2luZG93YCBhcmUgZ3VhcmRlZCBieSBTaW1wbGVEYi5pc0F2YWlsYWJsZSgpXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1yZXN0cmljdGVkLWdsb2JhbHMgKi9cbi8qKlxuICogV3JhcHMgYW4gSURCVHJhbnNhY3Rpb24gYW5kIGV4cG9zZXMgYSBzdG9yZSgpIG1ldGhvZCB0byBnZXQgYSBoYW5kbGUgdG8gYVxuICogc3BlY2lmaWMgb2JqZWN0IHN0b3JlLlxuICovXG5jbGFzcyB6cyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmFjdGlvbiA9IHQsIHRoaXMudHJhbnNhY3Rpb24gPSBlLCB0aGlzLmFib3J0ZWQgPSAhMSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGBQcm9taXNlYCB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHJlc3VsdCBvZiB0aGUgSW5kZXhlZERiIHRyYW5zYWN0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5JdCA9IG5ldyBRLCB0aGlzLnRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLkl0LnJlc29sdmUoKTtcbiAgICAgICAgfSwgdGhpcy50cmFuc2FjdGlvbi5vbmFib3J0ID0gKCkgPT4ge1xuICAgICAgICAgICAgZS5lcnJvciA/IHRoaXMuSXQucmVqZWN0KG5ldyBZcyh0LCBlLmVycm9yKSkgOiB0aGlzLkl0LnJlc29sdmUoKTtcbiAgICAgICAgfSwgdGhpcy50cmFuc2FjdGlvbi5vbmVycm9yID0gZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gbmkoZS50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy5JdC5yZWplY3QobmV3IFlzKHQsIG4pKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgc3RhdGljIG9wZW4odCwgZSwgbiwgcykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyB6cyhlLCB0LnRyYW5zYWN0aW9uKHMsIG4pKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFlzKGUsIHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBBdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSXQucHJvbWlzZTtcbiAgICB9XG4gICAgYWJvcnQodCkge1xuICAgICAgICB0ICYmIHRoaXMuSXQucmVqZWN0KHQpLCB0aGlzLmFib3J0ZWQgfHwgKCQoXCJTaW1wbGVEYlwiLCBcIkFib3J0aW5nIHRyYW5zYWN0aW9uOlwiLCB0ID8gdC5tZXNzYWdlIDogXCJDbGllbnQtaW5pdGlhdGVkIGFib3J0XCIpLCBcbiAgICAgICAgdGhpcy5hYm9ydGVkID0gITAsIHRoaXMudHJhbnNhY3Rpb24uYWJvcnQoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBTaW1wbGVEYlN0b3JlPEtleVR5cGUsIFZhbHVlVHlwZT4gZm9yIHRoZSBzcGVjaWZpZWQgc3RvcmUuIEFsbFxuICAgICAqIG9wZXJhdGlvbnMgcGVyZm9ybWVkIG9uIHRoZSBTaW1wbGVEYlN0b3JlIGhhcHBlbiB3aXRoaW4gdGhlIGNvbnRleHQgb2YgdGhpc1xuICAgICAqIHRyYW5zYWN0aW9uIGFuZCBpdCBjYW5ub3QgYmUgdXNlZCBhbnltb3JlIG9uY2UgdGhlIHRyYW5zYWN0aW9uIGlzXG4gICAgICogY29tcGxldGVkLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IHdlIGNhbid0IGFjdHVhbGx5IGVuZm9yY2UgdGhhdCB0aGUgS2V5VHlwZSBhbmQgVmFsdWVUeXBlIGFyZVxuICAgICAqIGNvcnJlY3QsIGJ1dCB0aGV5IGFsbG93IHR5cGUgc2FmZXR5IHRocm91Z2ggdGhlIHJlc3Qgb2YgdGhlIGNvbnN1bWluZyBjb2RlLlxuICAgICAqLyAgICBzdG9yZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHQpO1xuICAgICAgICByZXR1cm4gbmV3IFpzKGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBQcm92aWRlcyBhIHdyYXBwZXIgYXJvdW5kIEluZGV4ZWREYiB3aXRoIGEgc2ltcGxpZmllZCBpbnRlcmZhY2UgdGhhdCB1c2VzXG4gKiBQcm9taXNlLWxpa2UgcmV0dXJuIHZhbHVlcyB0byBjaGFpbiBvcGVyYXRpb25zLiBSZWFsIHByb21pc2VzIGNhbm5vdCBiZSB1c2VkXG4gKiBzaW5jZSAudGhlbigpIGNvbnRpbnVhdGlvbnMgYXJlIGV4ZWN1dGVkIGFzeW5jaHJvbm91c2x5IChlLmcuIHZpYVxuICogLnNldEltbWVkaWF0ZSksIHdoaWNoIHdvdWxkIGNhdXNlIEluZGV4ZWREQiB0byBlbmQgdGhlIHRyYW5zYWN0aW9uLlxuICogU2VlIFBlcnNpc3RlbmNlUHJvbWlzZSBmb3IgbW9yZSBkZXRhaWxzLlxuICovIGNsYXNzIEhzIHtcbiAgICAvKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgU2ltcGxlRGIgd3JhcHBlciBmb3IgSW5kZXhlZERiIGRhdGFiYXNlIGBuYW1lYC5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCBgdmVyc2lvbmAgbXVzdCBub3QgYmUgYSBkb3duZ3JhZGUuIEluZGV4ZWREQiBkb2VzIG5vdCBzdXBwb3J0XG4gICAgICogZG93bmdyYWRpbmcgdGhlIHNjaGVtYSB2ZXJzaW9uLiBXZSBjdXJyZW50bHkgZG8gbm90IHN1cHBvcnQgYW55IHdheSB0byBkb1xuICAgICAqIHZlcnNpb25pbmcgb3V0c2lkZSBvZiBJbmRleGVkREIncyB2ZXJzaW9uaW5nIG1lY2hhbmlzbSwgYXMgb25seVxuICAgICAqIHZlcnNpb24tdXBncmFkZSB0cmFuc2FjdGlvbnMgYXJlIGFsbG93ZWQgdG8gZG8gdGhpbmdzIGxpa2UgY3JlYXRlXG4gICAgICogb2JqZWN0c3RvcmVzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5uYW1lID0gdCwgdGhpcy52ZXJzaW9uID0gZSwgdGhpcy5SdCA9IG47XG4gICAgICAgIC8vIE5PVEU6IEFjY29yZGluZyB0byBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTk3MDUwLCB0aGVcbiAgICAgICAgLy8gYnVnIHdlJ3JlIGNoZWNraW5nIGZvciBzaG91bGQgZXhpc3QgaW4gaU9TID49IDEyLjIgYW5kIDwgMTMsIGJ1dCBmb3JcbiAgICAgICAgLy8gd2hhdGV2ZXIgcmVhc29uIGl0J3MgbXVjaCBoYXJkZXIgdG8gaGl0IGFmdGVyIDEyLjIgc28gd2Ugb25seSBwcm9hY3RpdmVseVxuICAgICAgICAvLyBsb2cgb24gMTIuMi5cbiAgICAgICAgMTIuMiA9PT0gSHMuUHQoZ2V0VUEoKSkgJiYgRihcIkZpcmVzdG9yZSBwZXJzaXN0ZW5jZSBzdWZmZXJzIGZyb20gYSBidWcgaW4gaU9TIDEyLjIgU2FmYXJpIHRoYXQgbWF5IGNhdXNlIHlvdXIgYXBwIHRvIHN0b3Agd29ya2luZy4gU2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcS81NjQ5NjI5Ni8xMTA5MTUgZm9yIGRldGFpbHMgYW5kIGEgcG90ZW50aWFsIHdvcmthcm91bmQuXCIpO1xuICAgIH1cbiAgICAvKiogRGVsZXRlcyB0aGUgc3BlY2lmaWVkIGRhdGFiYXNlLiAqLyAgICBzdGF0aWMgZGVsZXRlKHQpIHtcbiAgICAgICAgcmV0dXJuICQoXCJTaW1wbGVEYlwiLCBcIlJlbW92aW5nIGRhdGFiYXNlOlwiLCB0KSwgdGkod2luZG93LmluZGV4ZWREQi5kZWxldGVEYXRhYmFzZSh0KSkudG9Qcm9taXNlKCk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgSW5kZXhlZERCIGlzIGF2YWlsYWJsZSBpbiB0aGUgY3VycmVudCBlbnZpcm9ubWVudC4gKi8gICAgc3RhdGljIGJ0KCkge1xuICAgICAgICBpZiAoIWlzSW5kZXhlZERCQXZhaWxhYmxlKCkpIHJldHVybiAhMTtcbiAgICAgICAgaWYgKEhzLnZ0KCkpIHJldHVybiAhMDtcbiAgICAgICAgLy8gV2UgZXh0ZW5zaXZlbHkgdXNlIGluZGV4ZWQgYXJyYXkgdmFsdWVzIGFuZCBjb21wb3VuZCBrZXlzLFxuICAgICAgICAvLyB3aGljaCBJRSBhbmQgRWRnZSBkbyBub3Qgc3VwcG9ydC4gSG93ZXZlciwgdGhleSBzdGlsbCBoYXZlIGluZGV4ZWREQlxuICAgICAgICAvLyBkZWZpbmVkIG9uIHRoZSB3aW5kb3csIHNvIHdlIG5lZWQgdG8gY2hlY2sgZm9yIHRoZW0gaGVyZSBhbmQgbWFrZSBzdXJlXG4gICAgICAgIC8vIHRvIHJldHVybiB0aGF0IHBlcnNpc3RlbmNlIGlzIG5vdCBlbmFibGVkIGZvciB0aG9zZSBicm93c2Vycy5cbiAgICAgICAgLy8gRm9yIHRyYWNraW5nIHN1cHBvcnQgb2YgdGhpcyBmZWF0dXJlLCBzZWUgaGVyZTpcbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubWljcm9zb2Z0LmNvbS9lbi11cy9taWNyb3NvZnQtZWRnZS9wbGF0Zm9ybS9zdGF0dXMvaW5kZXhlZGRiYXJyYXlzYW5kbXVsdGllbnRyeXN1cHBvcnQvXG4gICAgICAgIC8vIENoZWNrIHRoZSBVQSBzdHJpbmcgdG8gZmluZCBvdXQgdGhlIGJyb3dzZXIuXG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGdldFVBKCksIGUgPSBIcy5QdCh0KSwgbiA9IDAgPCBlICYmIGUgPCAxMCwgcyA9IEhzLlZ0KHQpLCBpID0gMCA8IHMgJiYgcyA8IDQuNTtcbiAgICAgICAgLy8gSUUgMTBcbiAgICAgICAgLy8gdWEgPSAnTW96aWxsYS81LjAgKGNvbXBhdGlibGU7IE1TSUUgMTAuMDsgV2luZG93cyBOVCA2LjI7IFRyaWRlbnQvNi4wKSc7XG4gICAgICAgIC8vIElFIDExXG4gICAgICAgIC8vIHVhID0gJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDYuMzsgVHJpZGVudC83LjA7IHJ2OjExLjApIGxpa2UgR2Vja28nO1xuICAgICAgICAvLyBFZGdlXG4gICAgICAgIC8vIHVhID0gJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdPVzY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLFxuICAgICAgICAvLyBsaWtlIEdlY2tvKSBDaHJvbWUvMzkuMC4yMTcxLjcxIFNhZmFyaS81MzcuMzYgRWRnZS8xMi4wJztcbiAgICAgICAgLy8gaU9TIFNhZmFyaTogRGlzYWJsZSBmb3IgdXNlcnMgcnVubmluZyBpT1MgdmVyc2lvbiA8IDEwLlxuICAgICAgICAgICAgICAgIHJldHVybiAhKHQuaW5kZXhPZihcIk1TSUUgXCIpID4gMCB8fCB0LmluZGV4T2YoXCJUcmlkZW50L1wiKSA+IDAgfHwgdC5pbmRleE9mKFwiRWRnZS9cIikgPiAwIHx8IG4gfHwgaSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgYmFja2luZyBJbmRleGVkREIgc3RvcmUgaXMgdGhlIE5vZGUgSW5kZXhlZERCU2hpbVxuICAgICAqIChzZWUgaHR0cHM6Ly9naXRodWIuY29tL2F4ZW1jbGlvbi9JbmRleGVkREJTaGltKS5cbiAgICAgKi8gICAgc3RhdGljIHZ0KCkge1xuICAgICAgICB2YXIgdDtcbiAgICAgICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHByb2Nlc3MgJiYgXCJZRVNcIiA9PT0gKG51bGwgPT09ICh0ID0gcHJvY2Vzcy5lbnYpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuU3QpO1xuICAgIH1cbiAgICAvKiogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZnJvbSBhIHRyYW5zYWN0aW9uLiAqLyAgICBzdGF0aWMgRHQodCwgZSkge1xuICAgICAgICByZXR1cm4gdC5zdG9yZShlKTtcbiAgICB9XG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgIC8qKiBQYXJzZSBVc2VyIEFnZW50IHRvIGRldGVybWluZSBpT1MgdmVyc2lvbi4gUmV0dXJucyAtMSBpZiBub3QgZm91bmQuICovXG4gICAgc3RhdGljIFB0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQubWF0Y2goL2koPzpwaG9uZXxwYWR8cG9kKSBvcyAoW1xcZF9dKykvaSksIG4gPSBlID8gZVsxXS5zcGxpdChcIl9cIikuc2xpY2UoMCwgMikuam9pbihcIi5cIikgOiBcIi0xXCI7XG4gICAgICAgIHJldHVybiBOdW1iZXIobik7XG4gICAgfVxuICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAvKiogUGFyc2UgVXNlciBBZ2VudCB0byBkZXRlcm1pbmUgQW5kcm9pZCB2ZXJzaW9uLiBSZXR1cm5zIC0xIGlmIG5vdCBmb3VuZC4gKi9cbiAgICBzdGF0aWMgVnQodCkge1xuICAgICAgICBjb25zdCBlID0gdC5tYXRjaCgvQW5kcm9pZCAoW1xcZC5dKykvaSksIG4gPSBlID8gZVsxXS5zcGxpdChcIi5cIikuc2xpY2UoMCwgMikuam9pbihcIi5cIikgOiBcIi0xXCI7XG4gICAgICAgIHJldHVybiBOdW1iZXIobik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE9wZW5zIHRoZSBzcGVjaWZpZWQgZGF0YWJhc2UsIGNyZWF0aW5nIG9yIHVwZ3JhZGluZyBpdCBpZiBuZWNlc3NhcnkuXG4gICAgICovICAgIGFzeW5jIEN0KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIgfHwgKCQoXCJTaW1wbGVEYlwiLCBcIk9wZW5pbmcgZGF0YWJhc2U6XCIsIHRoaXMubmFtZSksIHRoaXMuZGIgPSBhd2FpdCBuZXcgUHJvbWlzZSgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIC8vIFRPRE8obWlrZWxlaGVuKTogSW52ZXN0aWdhdGUgYnJvd3NlciBjb21wYXRpYmlsaXR5LlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0luZGV4ZWREQl9BUEkvVXNpbmdfSW5kZXhlZERCXG4gICAgICAgICAgICAvLyBzdWdnZXN0cyBJRTkgYW5kIG9sZGVyIFdlYktpdCBicm93c2VycyBoYW5kbGUgdXBncmFkZVxuICAgICAgICAgICAgLy8gZGlmZmVyZW50bHkuIFRoZXkgZXhwZWN0IHNldFZlcnNpb24sIGFzIGRlc2NyaWJlZCBoZXJlOlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0lEQlZlcnNpb25DaGFuZ2VSZXF1ZXN0L3NldFZlcnNpb25cbiAgICAgICAgICAgIGNvbnN0IHMgPSBpbmRleGVkREIub3Blbih0aGlzLm5hbWUsIHRoaXMudmVyc2lvbik7XG4gICAgICAgICAgICBzLm9uc3VjY2VzcyA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0LnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgZShuKTtcbiAgICAgICAgICAgIH0sIHMub25ibG9ja2VkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIG4obmV3IFlzKHQsIFwiQ2Fubm90IHVwZ3JhZGUgSW5kZXhlZERCIHNjaGVtYSB3aGlsZSBhbm90aGVyIHRhYiBpcyBvcGVuLiBDbG9zZSBhbGwgdGFicyB0aGF0IGFjY2VzcyBGaXJlc3RvcmUgYW5kIHJlbG9hZCB0aGlzIHBhZ2UgdG8gcHJvY2VlZC5cIikpO1xuICAgICAgICAgICAgfSwgcy5vbmVycm9yID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IGUudGFyZ2V0LmVycm9yO1xuICAgICAgICAgICAgICAgIFwiVmVyc2lvbkVycm9yXCIgPT09IHMubmFtZSA/IG4obmV3IGooSy5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkEgbmV3ZXIgdmVyc2lvbiBvZiB0aGUgRmlyZXN0b3JlIFNESyB3YXMgcHJldmlvdXNseSB1c2VkIGFuZCBzbyB0aGUgcGVyc2lzdGVkIGRhdGEgaXMgbm90IGNvbXBhdGlibGUgd2l0aCB0aGUgdmVyc2lvbiBvZiB0aGUgU0RLIHlvdSBhcmUgbm93IHVzaW5nLiBUaGUgU0RLIHdpbGwgb3BlcmF0ZSB3aXRoIHBlcnNpc3RlbmNlIGRpc2FibGVkLiBJZiB5b3UgbmVlZCBwZXJzaXN0ZW5jZSwgcGxlYXNlIHJlLXVwZ3JhZGUgdG8gYSBuZXdlciB2ZXJzaW9uIG9mIHRoZSBTREsgb3IgZWxzZSBjbGVhciB0aGUgcGVyc2lzdGVkIEluZGV4ZWREQiBkYXRhIGZvciB5b3VyIGFwcCB0byBzdGFydCBmcmVzaC5cIikpIDogXCJJbnZhbGlkU3RhdGVFcnJvclwiID09PSBzLm5hbWUgPyBuKG5ldyBqKEsuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJVbmFibGUgdG8gb3BlbiBhbiBJbmRleGVkREIgY29ubmVjdGlvbi4gVGhpcyBjb3VsZCBiZSBkdWUgdG8gcnVubmluZyBpbiBhIHByaXZhdGUgYnJvd3Npbmcgc2Vzc2lvbiBvbiBhIGJyb3dzZXIgd2hvc2UgcHJpdmF0ZSBicm93c2luZyBzZXNzaW9ucyBkbyBub3Qgc3VwcG9ydCBJbmRleGVkREI6IFwiICsgcykpIDogbihuZXcgWXModCwgcykpO1xuICAgICAgICAgICAgfSwgcy5vbnVwZ3JhZGVuZWVkZWQgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICAkKFwiU2ltcGxlRGJcIiwgJ0RhdGFiYXNlIFwiJyArIHRoaXMubmFtZSArICdcIiByZXF1aXJlcyB1cGdyYWRlIGZyb20gdmVyc2lvbjonLCB0Lm9sZFZlcnNpb24pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0LnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgdGhpcy5SdC5OdChlLCBzLnRyYW5zYWN0aW9uLCB0Lm9sZFZlcnNpb24sIHRoaXMudmVyc2lvbikubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAkKFwiU2ltcGxlRGJcIiwgXCJEYXRhYmFzZSB1cGdyYWRlIHRvIHZlcnNpb24gXCIgKyB0aGlzLnZlcnNpb24gKyBcIiBjb21wbGV0ZVwiKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSkpLCB0aGlzLmt0ICYmICh0aGlzLmRiLm9udmVyc2lvbmNoYW5nZSA9IHQgPT4gdGhpcy5rdCh0KSksIHRoaXMuZGI7XG4gICAgfVxuICAgIHh0KHQpIHtcbiAgICAgICAgdGhpcy5rdCA9IHQsIHRoaXMuZGIgJiYgKHRoaXMuZGIub252ZXJzaW9uY2hhbmdlID0gZSA9PiB0KGUpKTtcbiAgICB9XG4gICAgYXN5bmMgcnVuVHJhbnNhY3Rpb24odCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0gXCJyZWFkb25seVwiID09PSBlO1xuICAgICAgICBsZXQgciA9IDA7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgICsrcjtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYiA9IGF3YWl0IHRoaXMuQ3QodCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHpzLm9wZW4odGhpcy5kYiwgdCwgaSA/IFwicmVhZG9ubHlcIiA6IFwicmVhZHdyaXRlXCIsIG4pLCByID0gcyhlKS5jYXRjaCgodCA9PiAoXG4gICAgICAgICAgICAgICAgLy8gQWJvcnQgdGhlIHRyYW5zYWN0aW9uIGlmIHRoZXJlIHdhcyBhbiBlcnJvci5cbiAgICAgICAgICAgICAgICBlLmFib3J0KHQpLCBHcy5yZWplY3QodCkpKSkudG9Qcm9taXNlKCk7XG4gICAgICAgICAgICAgICAgLy8gQXMgbm90ZWQgYWJvdmUsIGVycm9ycyBhcmUgcHJvcGFnYXRlZCBieSBhYm9ydGluZyB0aGUgdHJhbnNhY3Rpb24uIFNvXG4gICAgICAgICAgICAgICAgLy8gd2Ugc3dhbGxvdyBhbnkgZXJyb3IgaGVyZSB0byBhdm9pZCB0aGUgYnJvd3NlciBsb2dnaW5nIGl0IGFzIHVuaGFuZGxlZC5cbiAgICAgICAgICAgICAgICByZXR1cm4gci5jYXRjaCgoKCkgPT4ge30pKSwgXG4gICAgICAgICAgICAgICAgLy8gV2FpdCBmb3IgdGhlIHRyYW5zYWN0aW9uIHRvIGNvbXBsZXRlIChpLmUuIEluZGV4ZWREYidzIG9uc3VjY2VzcyBldmVudCB0b1xuICAgICAgICAgICAgICAgIC8vIGZpcmUpLCBidXQgc3RpbGwgcmV0dXJuIHRoZSBvcmlnaW5hbCB0cmFuc2FjdGlvbkZuUmVzdWx0IGJhY2sgdG8gdGhlXG4gICAgICAgICAgICAgICAgLy8gY2FsbGVyLlxuICAgICAgICAgICAgICAgIGF3YWl0IGUuQXQsIHI7XG4gICAgICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyhzY2htaWR0LXNlYmFzdGlhbik6IFdlIGNvdWxkIHByb2JhYmx5IGJlIHNtYXJ0ZXIgYWJvdXQgdGhpcyBhbmRcbiAgICAgICAgICAgICAgICAvLyBub3QgcmV0cnkgZXhjZXB0aW9ucyB0aGF0IGFyZSBsaWtlbHkgdW5yZWNvdmVyYWJsZSAoc3VjaCBhcyBxdW90YVxuICAgICAgICAgICAgICAgIC8vIGV4Y2VlZGVkIGVycm9ycykuXG4gICAgICAgICAgICAgICAgLy8gTm90ZTogV2UgY2Fubm90IHVzZSBhbiBpbnN0YW5jZW9mIGNoZWNrIGZvciBGaXJlc3RvcmVFeGNlcHRpb24sIHNpbmNlIHRoZVxuICAgICAgICAgICAgICAgIC8vIGV4Y2VwdGlvbiBpcyB3cmFwcGVkIGluIGEgZ2VuZXJpYyBlcnJvciBieSBvdXIgYXN5bmMvYXdhaXQgaGFuZGxpbmcuXG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IFwiRmlyZWJhc2VFcnJvclwiICE9PSB0Lm5hbWUgJiYgciA8IDM7XG4gICAgICAgICAgICAgICAgaWYgKCQoXCJTaW1wbGVEYlwiLCBcIlRyYW5zYWN0aW9uIGZhaWxlZCB3aXRoIGVycm9yOlwiLCB0Lm1lc3NhZ2UsIFwiUmV0cnlpbmc6XCIsIGUpLCBcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCksICFlKSByZXR1cm4gUHJvbWlzZS5yZWplY3QodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuZGIgJiYgdGhpcy5kYi5jbG9zZSgpLCB0aGlzLmRiID0gdm9pZCAwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGNvbnRyb2xsZXIgZm9yIGl0ZXJhdGluZyBvdmVyIGEga2V5IHJhbmdlIG9yIGluZGV4LiBJdCBhbGxvd3MgYW4gaXRlcmF0ZVxuICogY2FsbGJhY2sgdG8gZGVsZXRlIHRoZSBjdXJyZW50bHktcmVmZXJlbmNlZCBvYmplY3QsIG9yIGp1bXAgdG8gYSBuZXcga2V5XG4gKiB3aXRoaW4gdGhlIGtleSByYW5nZSBvciBpbmRleC5cbiAqLyBjbGFzcyBKcyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLiR0ID0gdCwgdGhpcy5GdCA9ICExLCB0aGlzLk90ID0gbnVsbDtcbiAgICB9XG4gICAgZ2V0IGlzRG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuRnQ7XG4gICAgfVxuICAgIGdldCBNdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuT3Q7XG4gICAgfVxuICAgIHNldCBjdXJzb3IodCkge1xuICAgICAgICB0aGlzLiR0ID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBjYW4gYmUgY2FsbGVkIHRvIHN0b3AgaXRlcmF0aW9uIGF0IGFueSBwb2ludC5cbiAgICAgKi8gICAgZG9uZSgpIHtcbiAgICAgICAgdGhpcy5GdCA9ICEwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGNhbiBiZSBjYWxsZWQgdG8gc2tpcCB0byB0aGF0IG5leHQga2V5LCB3aGljaCBjb3VsZCBiZVxuICAgICAqIGFuIGluZGV4IG9yIGEgcHJpbWFyeSBrZXkuXG4gICAgICovICAgIEx0KHQpIHtcbiAgICAgICAgdGhpcy5PdCA9IHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZSB0aGUgY3VycmVudCBjdXJzb3IgdmFsdWUgZnJvbSB0aGUgb2JqZWN0IHN0b3JlLlxuICAgICAqXG4gICAgICogTk9URTogWW91IENBTk5PVCBkbyB0aGlzIHdpdGggYSBrZXlzT25seSBxdWVyeS5cbiAgICAgKi8gICAgZGVsZXRlKCkge1xuICAgICAgICByZXR1cm4gdGkodGhpcy4kdC5kZWxldGUoKSk7XG4gICAgfVxufVxuXG4vKiogQW4gZXJyb3IgdGhhdCB3cmFwcyBleGNlcHRpb25zIHRoYXQgdGhyb3duIGR1cmluZyBJbmRleGVkREIgZXhlY3V0aW9uLiAqLyBjbGFzcyBZcyBleHRlbmRzIGoge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIoSy5VTkFWQUlMQUJMRSwgYEluZGV4ZWREQiB0cmFuc2FjdGlvbiAnJHt0fScgZmFpbGVkOiAke2V9YCksIHRoaXMubmFtZSA9IFwiSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvclwiO1xuICAgIH1cbn1cblxuLyoqIFZlcmlmaWVzIHdoZXRoZXIgYGVgIGlzIGFuIEluZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IuICovIGZ1bmN0aW9uIFhzKHQpIHtcbiAgICAvLyBVc2UgbmFtZSBlcXVhbGl0eSwgYXMgaW5zdGFuY2VvZiBjaGVja3Mgb24gZXJyb3JzIGRvbid0IHdvcmsgd2l0aCBlcnJvcnNcbiAgICAvLyB0aGF0IHdyYXAgb3RoZXIgZXJyb3JzLlxuICAgIHJldHVybiBcIkluZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3JcIiA9PT0gdC5uYW1lO1xufVxuXG4vKipcbiAqIEEgd3JhcHBlciBhcm91bmQgYW4gSURCT2JqZWN0U3RvcmUgcHJvdmlkaW5nIGFuIEFQSSB0aGF0OlxuICpcbiAqIDEpIEhhcyBnZW5lcmljIEtleVR5cGUgLyBWYWx1ZVR5cGUgcGFyYW1ldGVycyB0byBwcm92aWRlIHN0cm9uZ2x5LXR5cGVkXG4gKiBtZXRob2RzIGZvciBhY3RpbmcgYWdhaW5zdCB0aGUgb2JqZWN0IHN0b3JlLlxuICogMikgRGVhbHMgd2l0aCBJbmRleGVkREIncyBvbnN1Y2Nlc3MgLyBvbmVycm9yIGV2ZW50IGNhbGxiYWNrcywgbWFraW5nIGV2ZXJ5XG4gKiBtZXRob2QgcmV0dXJuIGEgUGVyc2lzdGVuY2VQcm9taXNlIGluc3RlYWQuXG4gKiAzKSBQcm92aWRlcyBhIGhpZ2hlci1sZXZlbCBBUEkgdG8gYXZvaWQgbmVlZGluZyB0byBkbyBleGNlc3NpdmUgd3JhcHBpbmcgb2ZcbiAqIGludGVybWVkaWF0ZSBJbmRleGVkREIgdHlwZXMgKElEQkN1cnNvcldpdGhWYWx1ZSwgZXRjLilcbiAqLyBjbGFzcyBacyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnN0b3JlID0gdDtcbiAgICB9XG4gICAgcHV0KHQsIGUpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IGUgPyAoJChcIlNpbXBsZURiXCIsIFwiUFVUXCIsIHRoaXMuc3RvcmUubmFtZSwgdCwgZSksIG4gPSB0aGlzLnN0b3JlLnB1dChlLCB0KSkgOiAoJChcIlNpbXBsZURiXCIsIFwiUFVUXCIsIHRoaXMuc3RvcmUubmFtZSwgXCI8YXV0by1rZXk+XCIsIHQpLCBcbiAgICAgICAgbiA9IHRoaXMuc3RvcmUucHV0KHQpKSwgdGkobik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBuZXcgdmFsdWUgaW50byBhbiBPYmplY3QgU3RvcmUgYW5kIHJldHVybnMgdGhlIG5ldyBrZXkuIFNpbWlsYXIgdG9cbiAgICAgKiBJbmRleGVkRGIncyBgYWRkKClgLCB0aGlzIG1ldGhvZCB3aWxsIGZhaWwgb24gcHJpbWFyeSBrZXkgY29sbGlzaW9ucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSBvYmplY3QgdG8gd3JpdGUuXG4gICAgICogQHJldHVybnMgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gYWRkLlxuICAgICAqLyAgICBhZGQodCkge1xuICAgICAgICAkKFwiU2ltcGxlRGJcIiwgXCJBRERcIiwgdGhpcy5zdG9yZS5uYW1lLCB0LCB0KTtcbiAgICAgICAgcmV0dXJuIHRpKHRoaXMuc3RvcmUuYWRkKHQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgb2JqZWN0IHdpdGggdGhlIHNwZWNpZmllZCBrZXkgZnJvbSB0aGUgc3BlY2lmaWVkIHN0b3JlLCBvciBudWxsXG4gICAgICogaWYgbm8gb2JqZWN0IGV4aXN0cyB3aXRoIHRoZSBzcGVjaWZpZWQga2V5LlxuICAgICAqXG4gICAgICogQGtleSBUaGUga2V5IG9mIHRoZSBvYmplY3QgdG8gZ2V0LlxuICAgICAqIEByZXR1cm5zIFRoZSBvYmplY3Qgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSBvciBudWxsIGlmIG5vIG9iamVjdCBleGlzdHMuXG4gICAgICovICAgIGdldCh0KSB7XG4gICAgICAgIC8vIFdlJ3JlIGRvaW5nIGFuIHVuc2FmZSBjYXN0IHRvIFZhbHVlVHlwZS5cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIHRpKHRoaXMuc3RvcmUuZ2V0KHQpKS5uZXh0KChlID0+IChcbiAgICAgICAgLy8gTm9ybWFsaXplIG5vbmV4aXN0ZW5jZSB0byBudWxsLlxuICAgICAgICB2b2lkIDAgPT09IGUgJiYgKGUgPSBudWxsKSwgJChcIlNpbXBsZURiXCIsIFwiR0VUXCIsIHRoaXMuc3RvcmUubmFtZSwgdCwgZSksIGUpKSk7XG4gICAgfVxuICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgICQoXCJTaW1wbGVEYlwiLCBcIkRFTEVURVwiLCB0aGlzLnN0b3JlLm5hbWUsIHQpO1xuICAgICAgICByZXR1cm4gdGkodGhpcy5zdG9yZS5kZWxldGUodCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJZiB3ZSBldmVyIG5lZWQgbW9yZSBvZiB0aGUgY291bnQgdmFyaWFudHMsIHdlIGNhbiBhZGQgb3ZlcmxvYWRzLiBGb3Igbm93LFxuICAgICAqIGFsbCB3ZSBuZWVkIGlzIHRvIGNvdW50IGV2ZXJ5dGhpbmcgaW4gYSBzdG9yZS5cbiAgICAgKlxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiByb3dzIGluIHRoZSBzdG9yZS5cbiAgICAgKi8gICAgY291bnQoKSB7XG4gICAgICAgICQoXCJTaW1wbGVEYlwiLCBcIkNPVU5UXCIsIHRoaXMuc3RvcmUubmFtZSk7XG4gICAgICAgIHJldHVybiB0aSh0aGlzLnN0b3JlLmNvdW50KCkpO1xuICAgIH1cbiAgICBCdCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmN1cnNvcih0aGlzLm9wdGlvbnModCwgZSkpLCBzID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLlV0KG4sICgodCwgZSkgPT4ge1xuICAgICAgICAgICAgcy5wdXNoKGUpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gcykpO1xuICAgIH1cbiAgICBxdCh0LCBlKSB7XG4gICAgICAgICQoXCJTaW1wbGVEYlwiLCBcIkRFTEVURSBBTExcIiwgdGhpcy5zdG9yZS5uYW1lKTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMub3B0aW9ucyh0LCBlKTtcbiAgICAgICAgbi5LdCA9ICExO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5jdXJzb3Iobik7XG4gICAgICAgIHJldHVybiB0aGlzLlV0KHMsICgodCwgZSwgbikgPT4gbi5kZWxldGUoKSkpO1xuICAgIH1cbiAgICBqdCh0LCBlKSB7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBlID8gbiA9IHQgOiAobiA9IHt9LCBlID0gdCk7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLmN1cnNvcihuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuVXQocywgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEl0ZXJhdGVzIG92ZXIgYSBzdG9yZSwgYnV0IHdhaXRzIGZvciB0aGUgZ2l2ZW4gY2FsbGJhY2sgdG8gY29tcGxldGUgZm9yXG4gICAgICogZWFjaCBlbnRyeSBiZWZvcmUgaXRlcmF0aW5nIHRoZSBuZXh0IGVudHJ5LiBUaGlzIGFsbG93cyB0aGUgY2FsbGJhY2sgdG8gZG9cbiAgICAgKiBhc3luY2hyb25vdXMgd29yayB0byBkZXRlcm1pbmUgaWYgdGhpcyBpdGVyYXRpb24gc2hvdWxkIGNvbnRpbnVlLlxuICAgICAqXG4gICAgICogVGhlIHByb3ZpZGVkIGNhbGxiYWNrIHNob3VsZCByZXR1cm4gYHRydWVgIHRvIGNvbnRpbnVlIGl0ZXJhdGlvbiwgYW5kXG4gICAgICogYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICovICAgIFF0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuY3Vyc29yKHt9KTtcbiAgICAgICAgcmV0dXJuIG5ldyBHcygoKG4sIHMpID0+IHtcbiAgICAgICAgICAgIGUub25lcnJvciA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuaSh0LnRhcmdldC5lcnJvcik7XG4gICAgICAgICAgICAgICAgcyhlKTtcbiAgICAgICAgICAgIH0sIGUub25zdWNjZXNzID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IGUudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICBzID8gdChzLnByaW1hcnlLZXksIHMudmFsdWUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0ID8gcy5jb250aW51ZSgpIDogbigpO1xuICAgICAgICAgICAgICAgIH0pKSA6IG4oKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgVXQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gW107XG4gICAgICAgIHJldHVybiBuZXcgR3MoKChzLCBpKSA9PiB7XG4gICAgICAgICAgICB0Lm9uZXJyb3IgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBpKHQudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgIH0sIHQub25zdWNjZXNzID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IHQudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICBpZiAoIWkpIHJldHVybiB2b2lkIHMoKTtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gbmV3IEpzKGkpLCBvID0gZShpLnByaW1hcnlLZXksIGkudmFsdWUsIHIpO1xuICAgICAgICAgICAgICAgIGlmIChvIGluc3RhbmNlb2YgR3MpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IG8uY2F0Y2goKHQgPT4gKHIuZG9uZSgpLCBHcy5yZWplY3QodCkpKSk7XG4gICAgICAgICAgICAgICAgICAgIG4ucHVzaCh0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgci5pc0RvbmUgPyBzKCkgOiBudWxsID09PSByLk10ID8gaS5jb250aW51ZSgpIDogaS5jb250aW51ZShyLk10KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBHcy53YWl0Rm9yKG4pKSk7XG4gICAgfVxuICAgIG9wdGlvbnModCwgZSkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdCAmJiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCA/IG4gPSB0IDogZSA9IHQpLCB7XG4gICAgICAgICAgICBpbmRleDogbixcbiAgICAgICAgICAgIHJhbmdlOiBlXG4gICAgICAgIH07XG4gICAgfVxuICAgIGN1cnNvcih0KSB7XG4gICAgICAgIGxldCBlID0gXCJuZXh0XCI7XG4gICAgICAgIGlmICh0LnJldmVyc2UgJiYgKGUgPSBcInByZXZcIiksIHQuaW5kZXgpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLnN0b3JlLmluZGV4KHQuaW5kZXgpO1xuICAgICAgICAgICAgcmV0dXJuIHQuS3QgPyBuLm9wZW5LZXlDdXJzb3IodC5yYW5nZSwgZSkgOiBuLm9wZW5DdXJzb3IodC5yYW5nZSwgZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuc3RvcmUub3BlbkN1cnNvcih0LnJhbmdlLCBlKTtcbiAgICB9XG59XG5cbi8qKlxuICogV3JhcHMgYW4gSURCUmVxdWVzdCBpbiBhIFBlcnNpc3RlbmNlUHJvbWlzZSwgdXNpbmcgdGhlIG9uc3VjY2VzcyAvIG9uZXJyb3JcbiAqIGhhbmRsZXJzIHRvIHJlc29sdmUgLyByZWplY3QgdGhlIFBlcnNpc3RlbmNlUHJvbWlzZSBhcyBhcHByb3ByaWF0ZS5cbiAqLyBmdW5jdGlvbiB0aSh0KSB7XG4gICAgcmV0dXJuIG5ldyBHcygoKGUsIG4pID0+IHtcbiAgICAgICAgdC5vbnN1Y2Nlc3MgPSB0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICBlKG4pO1xuICAgICAgICB9LCB0Lm9uZXJyb3IgPSB0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuaSh0LnRhcmdldC5lcnJvcik7XG4gICAgICAgICAgICBuKGUpO1xuICAgICAgICB9O1xuICAgIH0pKTtcbn1cblxuLy8gR3VhcmQgc28gd2Ugb25seSByZXBvcnQgdGhlIGVycm9yIG9uY2UuXG5sZXQgZWkgPSAhMTtcblxuZnVuY3Rpb24gbmkodCkge1xuICAgIGNvbnN0IGUgPSBIcy5QdChnZXRVQSgpKTtcbiAgICBpZiAoZSA+PSAxMi4yICYmIGUgPCAxMykge1xuICAgICAgICBjb25zdCBlID0gXCJBbiBpbnRlcm5hbCBlcnJvciB3YXMgZW5jb3VudGVyZWQgaW4gdGhlIEluZGV4ZWQgRGF0YWJhc2Ugc2VydmVyXCI7XG4gICAgICAgIGlmICh0Lm1lc3NhZ2UuaW5kZXhPZihlKSA+PSAwKSB7XG4gICAgICAgICAgICAvLyBXcmFwIGVycm9yIGluIGEgbW9yZSBkZXNjcmlwdGl2ZSBvbmUuXG4gICAgICAgICAgICBjb25zdCB0ID0gbmV3IGooXCJpbnRlcm5hbFwiLCBgSU9TX0lOREVYRUREQl9CVUcxOiBJbmRleGVkRGIgaGFzIHRocm93biAnJHtlfScuIFRoaXMgaXMgbGlrZWx5IGR1ZSB0byBhbiB1bmF2b2lkYWJsZSBidWcgaW4gaU9TLiBTZWUgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xLzU2NDk2Mjk2LzExMDkxNSBmb3IgZGV0YWlscyBhbmQgYSBwb3RlbnRpYWwgd29ya2Fyb3VuZC5gKTtcbiAgICAgICAgICAgIHJldHVybiBlaSB8fCAoZWkgPSAhMCwgXG4gICAgICAgICAgICAvLyBUaHJvdyBhIGdsb2JhbCBleGNlcHRpb24gb3V0c2lkZSBvZiB0aGlzIHByb21pc2UgY2hhaW4sIGZvciB0aGUgdXNlciB0b1xuICAgICAgICAgICAgLy8gcG90ZW50aWFsbHkgY2F0Y2guXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhyb3cgdDtcbiAgICAgICAgICAgIH0pLCAwKSksIHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHQ7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIHNpIGV4dGVuZHMgV3Mge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5XdCA9IHQsIHRoaXMuY3VycmVudFNlcXVlbmNlTnVtYmVyID0gZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGlpKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KTtcbiAgICByZXR1cm4gSHMuRHQobi5XdCwgZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYmF0Y2ggb2YgbXV0YXRpb25zIHRoYXQgd2lsbCBiZSBzZW50IGFzIG9uZSB1bml0IHRvIHRoZSBiYWNrZW5kLlxuICovIGNsYXNzIHJpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gYmF0Y2hJZCAtIFRoZSB1bmlxdWUgSUQgb2YgdGhpcyBtdXRhdGlvbiBiYXRjaC5cbiAgICAgKiBAcGFyYW0gbG9jYWxXcml0ZVRpbWUgLSBUaGUgb3JpZ2luYWwgd3JpdGUgdGltZSBvZiB0aGlzIG11dGF0aW9uLlxuICAgICAqIEBwYXJhbSBiYXNlTXV0YXRpb25zIC0gTXV0YXRpb25zIHRoYXQgYXJlIHVzZWQgdG8gcG9wdWxhdGUgdGhlIGJhc2VcbiAgICAgKiB2YWx1ZXMgd2hlbiB0aGlzIG11dGF0aW9uIGlzIGFwcGxpZWQgbG9jYWxseS4gVGhpcyBjYW4gYmUgdXNlZCB0byBsb2NhbGx5XG4gICAgICogb3ZlcndyaXRlIHZhbHVlcyB0aGF0IGFyZSBwZXJzaXN0ZWQgaW4gdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZS4gQmFzZVxuICAgICAqIG11dGF0aW9ucyBhcmUgbmV2ZXIgc2VudCB0byB0aGUgYmFja2VuZC5cbiAgICAgKiBAcGFyYW0gbXV0YXRpb25zIC0gVGhlIHVzZXItcHJvdmlkZWQgbXV0YXRpb25zIGluIHRoaXMgbXV0YXRpb24gYmF0Y2guXG4gICAgICogVXNlci1wcm92aWRlZCBtdXRhdGlvbnMgYXJlIGFwcGxpZWQgYm90aCBsb2NhbGx5IGFuZCByZW1vdGVseSBvbiB0aGVcbiAgICAgKiBiYWNrZW5kLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy5iYXRjaElkID0gdCwgdGhpcy5sb2NhbFdyaXRlVGltZSA9IGUsIHRoaXMuYmFzZU11dGF0aW9ucyA9IG4sIHRoaXMubXV0YXRpb25zID0gcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBhbGwgdGhlIG11dGF0aW9ucyBpbiB0aGlzIE11dGF0aW9uQmF0Y2ggdG8gdGhlIHNwZWNpZmllZCBkb2N1bWVudFxuICAgICAqIHRvIGNvbXB1dGUgdGhlIHN0YXRlIG9mIHRoZSByZW1vdGUgZG9jdW1lbnRcbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudCAtIFRoZSBkb2N1bWVudCB0byBhcHBseSBtdXRhdGlvbnMgdG8uXG4gICAgICogQHBhcmFtIGJhdGNoUmVzdWx0IC0gVGhlIHJlc3VsdCBvZiBhcHBseWluZyB0aGUgTXV0YXRpb25CYXRjaCB0byB0aGVcbiAgICAgKiBiYWNrZW5kLlxuICAgICAqLyAgICBhcHBseVRvUmVtb3RlRG9jdW1lbnQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZS5tdXRhdGlvblJlc3VsdHM7XG4gICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdGhpcy5tdXRhdGlvbnMubGVuZ3RoOyBlKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0aGlzLm11dGF0aW9uc1tlXTtcbiAgICAgICAgICAgIGlmIChzLmtleS5pc0VxdWFsKHQua2V5KSkge1xuICAgICAgICAgICAgICAgIFplKHMsIHQsIG5bZV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXB1dGVzIHRoZSBsb2NhbCB2aWV3IG9mIGEgZG9jdW1lbnQgZ2l2ZW4gYWxsIHRoZSBtdXRhdGlvbnMgaW4gdGhpc1xuICAgICAqIGJhdGNoLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIGFwcGx5IG11dGF0aW9ucyB0by5cbiAgICAgKi8gICAgYXBwbHlUb0xvY2FsVmlldyh0KSB7XG4gICAgICAgIC8vIEZpcnN0LCBhcHBseSB0aGUgYmFzZSBzdGF0ZS4gVGhpcyBhbGxvd3MgdXMgdG8gYXBwbHkgbm9uLWlkZW1wb3RlbnRcbiAgICAgICAgLy8gdHJhbnNmb3JtIGFnYWluc3QgYSBjb25zaXN0ZW50IHNldCBvZiB2YWx1ZXMuXG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLmJhc2VNdXRhdGlvbnMpIGUua2V5LmlzRXF1YWwodC5rZXkpICYmIHRuKGUsIHQsIHRoaXMubG9jYWxXcml0ZVRpbWUpO1xuICAgICAgICAvLyBTZWNvbmQsIGFwcGx5IGFsbCB1c2VyLXByb3ZpZGVkIG11dGF0aW9ucy5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy5tdXRhdGlvbnMpIGUua2V5LmlzRXF1YWwodC5rZXkpICYmIHRuKGUsIHQsIHRoaXMubG9jYWxXcml0ZVRpbWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wdXRlcyB0aGUgbG9jYWwgdmlldyBmb3IgYWxsIHByb3ZpZGVkIGRvY3VtZW50cyBnaXZlbiB0aGUgbXV0YXRpb25zIGluXG4gICAgICogdGhpcyBiYXRjaC5cbiAgICAgKi8gICAgYXBwbHlUb0xvY2FsRG9jdW1lbnRTZXQodCkge1xuICAgICAgICAvLyBUT0RPKG1yc2NobWlkdCk6IFRoaXMgaW1wbGVtZW50YXRpb24gaXMgTyhuXjIpLiBJZiB3ZSBhcHBseSB0aGUgbXV0YXRpb25zXG4gICAgICAgIC8vIGRpcmVjdGx5IChhcyBkb25lIGluIGBhcHBseVRvTG9jYWxWaWV3KClgKSwgd2UgY2FuIHJlZHVjZSB0aGUgY29tcGxleGl0eVxuICAgICAgICAvLyB0byBPKG4pLlxuICAgICAgICB0aGlzLm11dGF0aW9ucy5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LmdldChlLmtleSksIHMgPSBuO1xuICAgICAgICAgICAgLy8gVE9ETyhtdXRhYmxlZG9jdW1lbnRzKTogVGhpcyBtZXRob2Qgc2hvdWxkIHRha2UgYSBNdXRhYmxlRG9jdW1lbnRNYXBcbiAgICAgICAgICAgIC8vIGFuZCB3ZSBzaG91bGQgcmVtb3ZlIHRoaXMgY2FzdC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlUb0xvY2FsVmlldyhzKSwgbi5pc1ZhbGlkRG9jdW1lbnQoKSB8fCBzLmNvbnZlcnRUb05vRG9jdW1lbnQoY3QubWluKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGtleXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9ucy5yZWR1Y2UoKCh0LCBlKSA9PiB0LmFkZChlLmtleSkpLCBTbigpKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJhdGNoSWQgPT09IHQuYmF0Y2hJZCAmJiBydCh0aGlzLm11dGF0aW9ucywgdC5tdXRhdGlvbnMsICgodCwgZSkgPT4gbm4odCwgZSkpKSAmJiBydCh0aGlzLmJhc2VNdXRhdGlvbnMsIHQuYmFzZU11dGF0aW9ucywgKCh0LCBlKSA9PiBubih0LCBlKSkpO1xuICAgIH1cbn1cblxuLyoqIFRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYSBtdXRhdGlvbiBiYXRjaCB0byB0aGUgYmFja2VuZC4gKi8gY2xhc3Mgb2kge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIFxuICAgIC8qKlxuICAgICAqIEEgcHJlLWNvbXB1dGVkIG1hcHBpbmcgZnJvbSBlYWNoIG11dGF0ZWQgZG9jdW1lbnQgdG8gdGhlIHJlc3VsdGluZ1xuICAgICAqIHZlcnNpb24uXG4gICAgICovXG4gICAgcykge1xuICAgICAgICB0aGlzLmJhdGNoID0gdCwgdGhpcy5jb21taXRWZXJzaW9uID0gZSwgdGhpcy5tdXRhdGlvblJlc3VsdHMgPSBuLCB0aGlzLmRvY1ZlcnNpb25zID0gcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBNdXRhdGlvbkJhdGNoUmVzdWx0IGZvciB0aGUgZ2l2ZW4gYmF0Y2ggYW5kIHJlc3VsdHMuIFRoZXJlXG4gICAgICogbXVzdCBiZSBvbmUgcmVzdWx0IGZvciBlYWNoIG11dGF0aW9uIGluIHRoZSBiYXRjaC4gVGhpcyBzdGF0aWMgZmFjdG9yeVxuICAgICAqIGNhY2hlcyBhIGRvY3VtZW50PSZndDt2ZXJzaW9uIG1hcHBpbmcgKGRvY1ZlcnNpb25zKS5cbiAgICAgKi8gICAgc3RhdGljIGZyb20odCwgZSwgbikge1xuICAgICAgICBCKHQubXV0YXRpb25zLmxlbmd0aCA9PT0gbi5sZW5ndGgpO1xuICAgICAgICBsZXQgcyA9IHZuKCk7XG4gICAgICAgIGNvbnN0IGkgPSB0Lm11dGF0aW9ucztcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBpLmxlbmd0aDsgdCsrKSBzID0gcy5pbnNlcnQoaVt0XS5rZXksIG5bdF0udmVyc2lvbik7XG4gICAgICAgIHJldHVybiBuZXcgb2kodCwgZSwgbiwgcyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbW11dGFibGUgc2V0IG9mIG1ldGFkYXRhIHRoYXQgdGhlIGxvY2FsIHN0b3JlIHRyYWNrcyBmb3IgZWFjaCB0YXJnZXQuXG4gKi8gY2xhc3MgYWkge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgdGFyZ2V0IGJlaW5nIGxpc3RlbmVkIHRvLiAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSB0YXJnZXQgSUQgdG8gd2hpY2ggdGhlIHRhcmdldCBjb3JyZXNwb25kczsgQXNzaWduZWQgYnkgdGhlXG4gICAgICogTG9jYWxTdG9yZSBmb3IgdXNlciBsaXN0ZW5zIGFuZCBieSB0aGUgU3luY0VuZ2luZSBmb3IgbGltYm8gd2F0Y2hlcy5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKiogVGhlIHB1cnBvc2Ugb2YgdGhlIHRhcmdldC4gKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBUaGUgc2VxdWVuY2UgbnVtYmVyIG9mIHRoZSBsYXN0IHRyYW5zYWN0aW9uIGR1cmluZyB3aGljaCB0aGlzIHRhcmdldCBkYXRhXG4gICAgICogd2FzIG1vZGlmaWVkLlxuICAgICAqL1xuICAgIHMsIFxuICAgIC8qKiBUaGUgbGF0ZXN0IHNuYXBzaG90IHZlcnNpb24gc2VlbiBmb3IgdGhpcyB0YXJnZXQuICovXG4gICAgaSA9IGN0Lm1pbigpXG4gICAgLyoqXG4gICAgICogVGhlIG1heGltdW0gc25hcHNob3QgdmVyc2lvbiBhdCB3aGljaCB0aGUgYXNzb2NpYXRlZCB2aWV3XG4gICAgICogY29udGFpbmVkIG5vIGxpbWJvIGRvY3VtZW50cy5cbiAgICAgKi8gLCByID0gY3QubWluKClcbiAgICAvKipcbiAgICAgKiBBbiBvcGFxdWUsIHNlcnZlci1hc3NpZ25lZCB0b2tlbiB0aGF0IGFsbG93cyB3YXRjaGluZyBhIHRhcmdldCB0byBiZVxuICAgICAqIHJlc3VtZWQgYWZ0ZXIgZGlzY29ubmVjdGluZyB3aXRob3V0IHJldHJhbnNtaXR0aW5nIGFsbCB0aGUgZGF0YSB0aGF0XG4gICAgICogbWF0Y2hlcyB0aGUgdGFyZ2V0LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYSBwb2ludCBpblxuICAgICAqIHRpbWUgZnJvbSB3aGljaCB0aGUgc2VydmVyIHNob3VsZCByZXN1bWUgc2VuZGluZyByZXN1bHRzLlxuICAgICAqLyAsIG8gPSB5dC5FTVBUWV9CWVRFX1NUUklORykge1xuICAgICAgICB0aGlzLnRhcmdldCA9IHQsIHRoaXMudGFyZ2V0SWQgPSBlLCB0aGlzLnB1cnBvc2UgPSBuLCB0aGlzLnNlcXVlbmNlTnVtYmVyID0gcywgdGhpcy5zbmFwc2hvdFZlcnNpb24gPSBpLCBcbiAgICAgICAgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uID0gciwgdGhpcy5yZXN1bWVUb2tlbiA9IG87XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IHRhcmdldCBkYXRhIGluc3RhbmNlIHdpdGggYW4gdXBkYXRlZCBzZXF1ZW5jZSBudW1iZXIuICovICAgIHdpdGhTZXF1ZW5jZU51bWJlcih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgYWkodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgdCwgdGhpcy5zbmFwc2hvdFZlcnNpb24sIHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiwgdGhpcy5yZXN1bWVUb2tlbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IGRhdGEgaW5zdGFuY2Ugd2l0aCBhbiB1cGRhdGVkIHJlc3VtZSB0b2tlbiBhbmRcbiAgICAgKiBzbmFwc2hvdCB2ZXJzaW9uLlxuICAgICAqLyAgICB3aXRoUmVzdW1lVG9rZW4odCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IGFpKHRoaXMudGFyZ2V0LCB0aGlzLnRhcmdldElkLCB0aGlzLnB1cnBvc2UsIHRoaXMuc2VxdWVuY2VOdW1iZXIsIGUsIHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IGRhdGEgaW5zdGFuY2Ugd2l0aCBhbiB1cGRhdGVkIGxhc3QgbGltYm8gZnJlZVxuICAgICAqIHNuYXBzaG90IHZlcnNpb24gbnVtYmVyLlxuICAgICAqLyAgICB3aXRoTGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgYWkodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgdGhpcy5zZXF1ZW5jZU51bWJlciwgdGhpcy5zbmFwc2hvdFZlcnNpb24sIHQsIHRoaXMucmVzdW1lVG9rZW4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBTZXJpYWxpemVyIGZvciB2YWx1ZXMgc3RvcmVkIGluIHRoZSBMb2NhbFN0b3JlLiAqLyBjbGFzcyBjaSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLkd0ID0gdDtcbiAgICB9XG59XG5cbi8qKiBEZWNvZGVzIGEgcmVtb3RlIGRvY3VtZW50IGZyb20gc3RvcmFnZSBsb2NhbGx5IHRvIGEgRG9jdW1lbnQuICovIGZ1bmN0aW9uIHVpKHQsIGUpIHtcbiAgICBpZiAoZS5kb2N1bWVudCkgcmV0dXJuIHNzKHQuR3QsIGUuZG9jdW1lbnQsICEhZS5oYXNDb21taXR0ZWRNdXRhdGlvbnMpO1xuICAgIGlmIChlLm5vRG9jdW1lbnQpIHtcbiAgICAgICAgY29uc3QgdCA9IFN0LmZyb21TZWdtZW50cyhlLm5vRG9jdW1lbnQucGF0aCksIG4gPSB3aShlLm5vRG9jdW1lbnQucmVhZFRpbWUpLCBzID0gV3QubmV3Tm9Eb2N1bWVudCh0LCBuKTtcbiAgICAgICAgcmV0dXJuIGUuaGFzQ29tbWl0dGVkTXV0YXRpb25zID8gcy5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKSA6IHM7XG4gICAgfVxuICAgIGlmIChlLnVua25vd25Eb2N1bWVudCkge1xuICAgICAgICBjb25zdCB0ID0gU3QuZnJvbVNlZ21lbnRzKGUudW5rbm93bkRvY3VtZW50LnBhdGgpLCBuID0gd2koZS51bmtub3duRG9jdW1lbnQudmVyc2lvbik7XG4gICAgICAgIHJldHVybiBXdC5uZXdVbmtub3duRG9jdW1lbnQodCwgbik7XG4gICAgfVxuICAgIHJldHVybiBMKCk7XG59XG5cbi8qKiBFbmNvZGVzIGEgZG9jdW1lbnQgZm9yIHN0b3JhZ2UgbG9jYWxseS4gKi8gZnVuY3Rpb24gaGkodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBsaShuKSwgaSA9IGUua2V5LnBhdGgucG9wTGFzdCgpLnRvQXJyYXkoKTtcbiAgICBpZiAoZS5pc0ZvdW5kRG9jdW1lbnQoKSkge1xuICAgICAgICBjb25zdCBuID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBKbih0LCBlLmtleSksXG4gICAgICAgICAgICAgICAgZmllbGRzOiBlLmRhdGEudmFsdWUubWFwVmFsdWUuZmllbGRzLFxuICAgICAgICAgICAgICAgIHVwZGF0ZVRpbWU6IGpuKHQsIGUudmVyc2lvbi50b1RpbWVzdGFtcCgpKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSh0Lkd0LCBlKSwgciA9IGUuaGFzQ29tbWl0dGVkTXV0YXRpb25zO1xuICAgICAgICByZXR1cm4gbmV3ICRzKFxuICAgICAgICAvKiB1bmtub3duRG9jdW1lbnQ9ICovIG51bGwsIFxuICAgICAgICAvKiBub0RvY3VtZW50PSAqLyBudWxsLCBuLCByLCBzLCBpKTtcbiAgICB9XG4gICAgaWYgKGUuaXNOb0RvY3VtZW50KCkpIHtcbiAgICAgICAgY29uc3QgdCA9IGUua2V5LnBhdGgudG9BcnJheSgpLCBuID0gZGkoZS52ZXJzaW9uKSwgciA9IGUuaGFzQ29tbWl0dGVkTXV0YXRpb25zO1xuICAgICAgICByZXR1cm4gbmV3ICRzKFxuICAgICAgICAvKiB1bmtub3duRG9jdW1lbnQ9ICovIG51bGwsIG5ldyBrcyh0LCBuKSwgXG4gICAgICAgIC8qIGRvY3VtZW50PSAqLyBudWxsLCByLCBzLCBpKTtcbiAgICB9XG4gICAgaWYgKGUuaXNVbmtub3duRG9jdW1lbnQoKSkge1xuICAgICAgICBjb25zdCB0ID0gZS5rZXkucGF0aC50b0FycmF5KCksIG4gPSBkaShlLnZlcnNpb24pO1xuICAgICAgICByZXR1cm4gbmV3ICRzKG5ldyB4cyh0LCBuKSwgXG4gICAgICAgIC8qIG5vRG9jdW1lbnQ9ICovIG51bGwsIFxuICAgICAgICAvKiBkb2N1bWVudD0gKi8gbnVsbCwgXG4gICAgICAgIC8qIGhhc0NvbW1pdHRlZE11dGF0aW9ucz0gKi8gITAsIHMsIGkpO1xuICAgIH1cbiAgICByZXR1cm4gTCgpO1xufVxuXG5mdW5jdGlvbiBsaSh0KSB7XG4gICAgY29uc3QgZSA9IHQudG9UaW1lc3RhbXAoKTtcbiAgICByZXR1cm4gWyBlLnNlY29uZHMsIGUubmFub3NlY29uZHMgXTtcbn1cblxuZnVuY3Rpb24gZmkodCkge1xuICAgIGNvbnN0IGUgPSBuZXcgYXQodFswXSwgdFsxXSk7XG4gICAgcmV0dXJuIGN0LmZyb21UaW1lc3RhbXAoZSk7XG59XG5cbmZ1bmN0aW9uIGRpKHQpIHtcbiAgICBjb25zdCBlID0gdC50b1RpbWVzdGFtcCgpO1xuICAgIHJldHVybiBuZXcgVnMoZS5zZWNvbmRzLCBlLm5hbm9zZWNvbmRzKTtcbn1cblxuZnVuY3Rpb24gd2kodCkge1xuICAgIGNvbnN0IGUgPSBuZXcgYXQodC5zZWNvbmRzLCB0Lm5hbm9zZWNvbmRzKTtcbiAgICByZXR1cm4gY3QuZnJvbVRpbWVzdGFtcChlKTtcbn1cblxuLyoqIEVuY29kZXMgYSBiYXRjaCBvZiBtdXRhdGlvbnMgaW50byBhIERiTXV0YXRpb25CYXRjaCBmb3IgbG9jYWwgc3RvcmFnZS4gKi9cbi8qKiBEZWNvZGVzIGEgRGJNdXRhdGlvbkJhdGNoIGludG8gYSBNdXRhdGlvbkJhdGNoICovXG5mdW5jdGlvbiBfaSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IChlLmJhc2VNdXRhdGlvbnMgfHwgW10pLm1hcCgoZSA9PiBhcyh0Lkd0LCBlKSkpO1xuICAgIC8vIFNxdWFzaCBvbGQgdHJhbnNmb3JtIG11dGF0aW9ucyBpbnRvIGV4aXN0aW5nIHBhdGNoIG9yIHNldCBtdXRhdGlvbnMuXG4gICAgLy8gVGhlIHJlcGxhY2VtZW50IG9mIHJlcHJlc2VudGluZyBgdHJhbnNmb3Jtc2Agd2l0aCBgdXBkYXRlX3RyYW5zZm9ybXNgXG4gICAgLy8gb24gdGhlIFNESyBtZWFucyB0aGF0IG9sZCBgdHJhbnNmb3JtYCBtdXRhdGlvbnMgc3RvcmVkIGluIEluZGV4ZWREQiBuZWVkXG4gICAgLy8gdG8gYmUgdXBkYXRlZCB0byBgdXBkYXRlX3RyYW5zZm9ybXNgLlxuICAgIC8vIFRPRE8oYi8xNzQ2MDgzNzQpOiBSZW1vdmUgdGhpcyBjb2RlIG9uY2Ugd2UgcGVyZm9ybSBhIHNjaGVtYSBtaWdyYXRpb24uXG4gICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgZS5tdXRhdGlvbnMubGVuZ3RoIC0gMTsgKyt0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLm11dGF0aW9uc1t0XTtcbiAgICAgICAgaWYgKHQgKyAxIDwgZS5tdXRhdGlvbnMubGVuZ3RoICYmIHZvaWQgMCAhPT0gZS5tdXRhdGlvbnNbdCArIDFdLnRyYW5zZm9ybSkge1xuICAgICAgICAgICAgY29uc3QgcyA9IGUubXV0YXRpb25zW3QgKyAxXTtcbiAgICAgICAgICAgIG4udXBkYXRlVHJhbnNmb3JtcyA9IHMudHJhbnNmb3JtLmZpZWxkVHJhbnNmb3JtcywgZS5tdXRhdGlvbnMuc3BsaWNlKHQgKyAxLCAxKSwgXG4gICAgICAgICAgICArK3Q7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcyA9IGUubXV0YXRpb25zLm1hcCgoZSA9PiBhcyh0Lkd0LCBlKSkpLCBpID0gYXQuZnJvbU1pbGxpcyhlLmxvY2FsV3JpdGVUaW1lTXMpO1xuICAgIHJldHVybiBuZXcgcmkoZS5iYXRjaElkLCBpLCBuLCBzKTtcbn1cblxuLyoqIERlY29kZXMgYSBEYlRhcmdldCBpbnRvIFRhcmdldERhdGEgKi8gZnVuY3Rpb24gbWkodCkge1xuICAgIGNvbnN0IGUgPSB3aSh0LnJlYWRUaW1lKSwgbiA9IHZvaWQgMCAhPT0gdC5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uID8gd2kodC5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKSA6IGN0Lm1pbigpO1xuICAgIGxldCBzO1xuICAgIHZhciBpO1xuICAgIHJldHVybiB2b2lkIDAgIT09IHQucXVlcnkuZG9jdW1lbnRzID8gKEIoMSA9PT0gKGkgPSB0LnF1ZXJ5KS5kb2N1bWVudHMubGVuZ3RoKSwgXG4gICAgcyA9IFJlKGdlKFpuKGkuZG9jdW1lbnRzWzBdKSkpKSA6IHMgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBSZShscyh0KSk7XG4gICAgfSh0LnF1ZXJ5KSwgbmV3IGFpKHMsIHQudGFyZ2V0SWQsIDAgLyogTGlzdGVuICovICwgdC5sYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIsIGUsIG4sIHl0LmZyb21CYXNlNjRTdHJpbmcodC5yZXN1bWVUb2tlbikpO1xufVxuXG4vKiogRW5jb2RlcyBUYXJnZXREYXRhIGludG8gYSBEYlRhcmdldCBmb3Igc3RvcmFnZSBsb2NhbGx5LiAqLyBmdW5jdGlvbiBnaSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IGRpKGUuc25hcHNob3RWZXJzaW9uKSwgcyA9IGRpKGUubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbik7XG4gICAgbGV0IGk7XG4gICAgaSA9IFh0KGUudGFyZ2V0KSA/IHVzKHQuR3QsIGUudGFyZ2V0KSA6IGhzKHQuR3QsIGUudGFyZ2V0KTtcbiAgICAvLyBXZSBjYW4ndCBzdG9yZSB0aGUgcmVzdW1lVG9rZW4gYXMgYSBCeXRlU3RyaW5nIGluIEluZGV4ZWREYiwgc28gd2VcbiAgICAvLyBjb252ZXJ0IGl0IHRvIGEgYmFzZTY0IHN0cmluZyBmb3Igc3RvcmFnZS5cbiAgICAgICAgY29uc3QgciA9IGUucmVzdW1lVG9rZW4udG9CYXNlNjQoKTtcbiAgICAvLyBsYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgaXMgYWx3YXlzIDAgdW50aWwgd2UgZG8gcmVhbCBHQy5cbiAgICAgICAgcmV0dXJuIG5ldyBPcyhlLnRhcmdldElkLCBIdChlLnRhcmdldCksIG4sIHIsIGUuc2VxdWVuY2VOdW1iZXIsIHMsIGkpO1xufVxuXG4vKipcbiAqIEEgaGVscGVyIGZ1bmN0aW9uIGZvciBmaWd1cmluZyBvdXQgd2hhdCBraW5kIG9mIHF1ZXJ5IGhhcyBiZWVuIHN0b3JlZC5cbiAqL1xuLyoqXG4gKiBFbmNvZGVzIGEgYEJ1bmRsZWRRdWVyeWAgZnJvbSBidW5kbGUgcHJvdG8gdG8gYSBRdWVyeSBvYmplY3QuXG4gKlxuICogVGhpcyByZWNvbnN0cnVjdHMgdGhlIG9yaWdpbmFsIHF1ZXJ5IHVzZWQgdG8gYnVpbGQgdGhlIGJ1bmRsZSBiZWluZyBsb2FkZWQsXG4gKiBpbmNsdWRpbmcgZmVhdHVyZXMgZXhpc3RzIG9ubHkgaW4gU0RLcyAoZm9yIGV4YW1wbGU6IGxpbWl0LXRvLWxhc3QpLlxuICovXG5mdW5jdGlvbiB5aSh0KSB7XG4gICAgY29uc3QgZSA9IGxzKHtcbiAgICAgICAgcGFyZW50OiB0LnBhcmVudCxcbiAgICAgICAgc3RydWN0dXJlZFF1ZXJ5OiB0LnN0cnVjdHVyZWRRdWVyeVxuICAgIH0pO1xuICAgIHJldHVybiBcIkxBU1RcIiA9PT0gdC5saW1pdFR5cGUgPyBQZShlLCBlLmxpbWl0LCBcIkxcIiAvKiBMYXN0ICovKSA6IGU7XG59XG5cbi8qKiBFbmNvZGVzIGEgTmFtZWRRdWVyeSBwcm90byBvYmplY3QgdG8gYSBOYW1lZFF1ZXJ5IG1vZGVsIG9iamVjdC4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jbGFzcyBwaSB7XG4gICAgZ2V0QnVuZGxlTWV0YWRhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gVGkodCkuZ2V0KGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKHQpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaWQ6IChlID0gdCkuYnVuZGxlSWQsXG4gICAgICAgICAgICAgICAgY3JlYXRlVGltZTogd2koZS5jcmVhdGVUaW1lKSxcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiBlLnZlcnNpb25cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvKiogRW5jb2RlcyBhIERiQnVuZGxlIHRvIGEgQnVuZGxlTWV0YWRhdGEgb2JqZWN0LiAqL1xuICAgICAgICAgICAgdmFyIGU7XG4gICAgICAgICAgICAvKiogRW5jb2RlcyBhIEJ1bmRsZU1ldGFkYXRhIHRvIGEgRGJCdW5kbGUuICovICAgICAgICB9KSk7XG4gICAgfVxuICAgIHNhdmVCdW5kbGVNZXRhZGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBUaSh0KS5wdXQoe1xuICAgICAgICAgICAgYnVuZGxlSWQ6IChuID0gZSkuaWQsXG4gICAgICAgICAgICBjcmVhdGVUaW1lOiBkaShHbihuLmNyZWF0ZVRpbWUpKSxcbiAgICAgICAgICAgIHZlcnNpb246IG4udmVyc2lvblxuICAgICAgICB9KTtcbiAgICAgICAgdmFyIG47XG4gICAgICAgIC8qKiBFbmNvZGVzIGEgRGJOYW1lZFF1ZXJ5IHRvIGEgTmFtZWRRdWVyeS4gKi8gICAgfVxuICAgIGdldE5hbWVkUXVlcnkodCwgZSkge1xuICAgICAgICByZXR1cm4gRWkodCkuZ2V0KGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKHQpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbmFtZTogKGUgPSB0KS5uYW1lLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiB5aShlLmJ1bmRsZWRRdWVyeSksXG4gICAgICAgICAgICAgICAgcmVhZFRpbWU6IHdpKGUucmVhZFRpbWUpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGU7XG4gICAgICAgICAgICAvKiogRW5jb2RlcyBhIE5hbWVkUXVlcnkgZnJvbSBhIGJ1bmRsZSBwcm90byB0byBhIERiTmFtZWRRdWVyeS4gKi8gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc2F2ZU5hbWVkUXVlcnkodCwgZSkge1xuICAgICAgICByZXR1cm4gRWkodCkucHV0KGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbmFtZTogdC5uYW1lLFxuICAgICAgICAgICAgICAgIHJlYWRUaW1lOiBkaShHbih0LnJlYWRUaW1lKSksXG4gICAgICAgICAgICAgICAgYnVuZGxlZFF1ZXJ5OiB0LmJ1bmRsZWRRdWVyeVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfShlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgYnVuZGxlcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gVGkodCkge1xuICAgIHJldHVybiBpaSh0LCBxcy5zdG9yZSk7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBuYW1lZFF1ZXJpZXMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIEVpKHQpIHtcbiAgICByZXR1cm4gaWkodCwgS3Muc3RvcmUpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbi1tZW1vcnkgaW1wbGVtZW50YXRpb24gb2YgSW5kZXhNYW5hZ2VyLlxuICovIGNsYXNzIElpIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy56dCA9IG5ldyBBaTtcbiAgICB9XG4gICAgYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy56dC5hZGQoZSksIEdzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0Q29sbGVjdGlvblBhcmVudHModCwgZSkge1xuICAgICAgICByZXR1cm4gR3MucmVzb2x2ZSh0aGlzLnp0LmdldEVudHJpZXMoZSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbnRlcm5hbCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgY29sbGVjdGlvbi1wYXJlbnQgaW5kZXggZXhwb3NlZCBieSBNZW1vcnlJbmRleE1hbmFnZXIuXG4gKiBBbHNvIHVzZWQgZm9yIGluLW1lbW9yeSBjYWNoaW5nIGJ5IEluZGV4ZWREYkluZGV4TWFuYWdlciBhbmQgaW5pdGlhbCBpbmRleCBwb3B1bGF0aW9uXG4gKiBpbiBpbmRleGVkZGJfc2NoZW1hLnRzXG4gKi8gY2xhc3MgQWkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmluZGV4ID0ge307XG4gICAgfVxuICAgIC8vIFJldHVybnMgZmFsc2UgaWYgdGhlIGVudHJ5IGFscmVhZHkgZXhpc3RlZC5cbiAgICBhZGQodCkge1xuICAgICAgICBjb25zdCBlID0gdC5sYXN0U2VnbWVudCgpLCBuID0gdC5wb3BMYXN0KCksIHMgPSB0aGlzLmluZGV4W2VdIHx8IG5ldyBUbihkdC5jb21wYXJhdG9yKSwgaSA9ICFzLmhhcyhuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhbZV0gPSBzLmFkZChuKSwgaTtcbiAgICB9XG4gICAgaGFzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQubGFzdFNlZ21lbnQoKSwgbiA9IHQucG9wTGFzdCgpLCBzID0gdGhpcy5pbmRleFtlXTtcbiAgICAgICAgcmV0dXJuIHMgJiYgcy5oYXMobik7XG4gICAgfVxuICAgIGdldEVudHJpZXModCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuaW5kZXhbdF0gfHwgbmV3IFRuKGR0LmNvbXBhcmF0b3IpKS50b0FycmF5KCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHBlcnNpc3RlZCBpbXBsZW1lbnRhdGlvbiBvZiBJbmRleE1hbmFnZXIuXG4gKi8gY2xhc3MgUmkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogQW4gaW4tbWVtb3J5IGNvcHkgb2YgdGhlIGluZGV4IGVudHJpZXMgd2UndmUgYWxyZWFkeSB3cml0dGVuIHNpbmNlIHRoZSBTREtcbiAgICAgICAgICogbGF1bmNoZWQuIFVzZWQgdG8gYXZvaWQgcmUtd3JpdGluZyB0aGUgc2FtZSBlbnRyeSByZXBlYXRlZGx5LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGlzIGlzICpOT1QqIGEgY29tcGxldGUgY2FjaGUgb2Ygd2hhdCdzIGluIHBlcnNpc3RlbmNlIGFuZCBzbyBjYW4gbmV2ZXIgYmUgdXNlZCB0b1xuICAgICAgICAgKiBzYXRpc2Z5IHJlYWRzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5IdCA9IG5ldyBBaTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIG5ldyBlbnRyeSB0byB0aGUgY29sbGVjdGlvbiBwYXJlbnQgaW5kZXguXG4gICAgICpcbiAgICAgKiBSZXBlYXRlZCBjYWxscyBmb3IgdGhlIHNhbWUgY29sbGVjdGlvblBhdGggc2hvdWxkIGJlIGF2b2lkZWQgd2l0aGluIGFcbiAgICAgKiB0cmFuc2FjdGlvbiBhcyBJbmRleGVkRGJJbmRleE1hbmFnZXIgb25seSBjYWNoZXMgd3JpdGVzIG9uY2UgYSB0cmFuc2FjdGlvblxuICAgICAqIGhhcyBiZWVuIGNvbW1pdHRlZC5cbiAgICAgKi8gICAgYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodCwgZSkge1xuICAgICAgICBpZiAoIXRoaXMuSHQuaGFzKGUpKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5sYXN0U2VnbWVudCgpLCBzID0gZS5wb3BMYXN0KCk7XG4gICAgICAgICAgICB0LmFkZE9uQ29tbWl0dGVkTGlzdGVuZXIoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIGNvbGxlY3Rpb24gdG8gdGhlIGluIG1lbW9yeSBjYWNoZSBvbmx5IGlmIHRoZSB0cmFuc2FjdGlvbiB3YXNcbiAgICAgICAgICAgICAgICAvLyBzdWNjZXNzZnVsbHkgY29tbWl0dGVkLlxuICAgICAgICAgICAgICAgIHRoaXMuSHQuYWRkKGUpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgY29uc3QgaSA9IHtcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uSWQ6IG4sXG4gICAgICAgICAgICAgICAgcGFyZW50OiBScyhzKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBQaSh0KS5wdXQoaSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEdzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0Q29sbGVjdGlvblBhcmVudHModCwgZSkge1xuICAgICAgICBjb25zdCBuID0gW10sIHMgPSBJREJLZXlSYW5nZS5ib3VuZChbIGUsIFwiXCIgXSwgWyBvdChlKSwgXCJcIiBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCk7XG4gICAgICAgIHJldHVybiBQaSh0KS5CdChzKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiB0KSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBjb2xsZWN0aW9uSWQgZ3VhcmQgc2hvdWxkbid0IGJlIG5lY2Vzc2FyeSAoYW5kIGlzbid0IGFzIGxvbmdcbiAgICAgICAgICAgICAgICAvLyBhcyB3ZSdyZSBydW5uaW5nIGluIGEgcmVhbCBicm93c2VyKSwgYnV0IHRoZXJlJ3MgYSBidWcgaW5cbiAgICAgICAgICAgICAgICAvLyBpbmRleGVkZGJzaGltIHRoYXQgYnJlYWtzIG91ciByYW5nZSBpbiBvdXIgdGVzdHMgcnVubmluZyBpbiBub2RlOlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9heGVtY2xpb24vSW5kZXhlZERCU2hpbS9pc3N1ZXMvMzM0XG4gICAgICAgICAgICAgICAgaWYgKHMuY29sbGVjdGlvbklkICE9PSBlKSBicmVhaztcbiAgICAgICAgICAgICAgICBuLnB1c2godnMocy5wYXJlbnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgY29sbGVjdGlvblBhcmVudHNcbiAqIGRvY3VtZW50IHN0b3JlLlxuICovIGZ1bmN0aW9uIFBpKHQpIHtcbiAgICByZXR1cm4gaWkodCwgQnMuc3RvcmUpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBiaSA9IHtcbiAgICBkaWRSdW46ICExLFxuICAgIHNlcXVlbmNlTnVtYmVyc0NvbGxlY3RlZDogMCxcbiAgICB0YXJnZXRzUmVtb3ZlZDogMCxcbiAgICBkb2N1bWVudHNSZW1vdmVkOiAwXG59O1xuXG5jbGFzcyB2aSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLy8gV2hlbiB3ZSBhdHRlbXB0IHRvIGNvbGxlY3QsIHdlIHdpbGwgb25seSBkbyBzbyBpZiB0aGUgY2FjaGUgc2l6ZSBpcyBncmVhdGVyIHRoYW4gdGhpc1xuICAgIC8vIHRocmVzaG9sZC4gUGFzc2luZyBgQ09MTEVDVElPTl9ESVNBQkxFRGAgaGVyZSB3aWxsIGNhdXNlIGNvbGxlY3Rpb24gdG8gYWx3YXlzIGJlIHNraXBwZWQuXG4gICAgdCwgXG4gICAgLy8gVGhlIHBlcmNlbnRhZ2Ugb2Ygc2VxdWVuY2UgbnVtYmVycyB0aGF0IHdlIHdpbGwgYXR0ZW1wdCB0byBjb2xsZWN0XG4gICAgZSwgXG4gICAgLy8gQSBjYXAgb24gdGhlIHRvdGFsIG51bWJlciBvZiBzZXF1ZW5jZSBudW1iZXJzIHRoYXQgd2lsbCBiZSBjb2xsZWN0ZWQuIFRoaXMgcHJldmVudHNcbiAgICAvLyB1cyBmcm9tIGNvbGxlY3RpbmcgYSBodWdlIG51bWJlciBvZiBzZXF1ZW5jZSBudW1iZXJzIGlmIHRoZSBjYWNoZSBoYXMgZ3Jvd24gdmVyeSBsYXJnZS5cbiAgICBuKSB7XG4gICAgICAgIHRoaXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCA9IHQsIHRoaXMucGVyY2VudGlsZVRvQ29sbGVjdCA9IGUsIHRoaXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCA9IG47XG4gICAgfVxuICAgIHN0YXRpYyB3aXRoQ2FjaGVTaXplKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB2aSh0LCB2aS5ERUZBVUxUX0NPTExFQ1RJT05fUEVSQ0VOVElMRSwgdmkuREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIERlbGV0ZSBhIG11dGF0aW9uIGJhdGNoIGFuZCB0aGUgYXNzb2NpYXRlZCBkb2N1bWVudCBtdXRhdGlvbnMuXG4gKiBAcmV0dXJucyBBIFBlcnNpc3RlbmNlUHJvbWlzZSBvZiB0aGUgZG9jdW1lbnQgbXV0YXRpb25zIHRoYXQgd2VyZSByZW1vdmVkLlxuICovXG5mdW5jdGlvbiBWaSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHQuc3RvcmUoQ3Muc3RvcmUpLCBpID0gdC5zdG9yZShOcy5zdG9yZSksIHIgPSBbXSwgbyA9IElEQktleVJhbmdlLm9ubHkobi5iYXRjaElkKTtcbiAgICBsZXQgYSA9IDA7XG4gICAgY29uc3QgYyA9IHMuanQoe1xuICAgICAgICByYW5nZTogb1xuICAgIH0sICgodCwgZSwgbikgPT4gKGErKywgbi5kZWxldGUoKSkpKTtcbiAgICByLnB1c2goYy5uZXh0KCgoKSA9PiB7XG4gICAgICAgIEIoMSA9PT0gYSk7XG4gICAgfSkpKTtcbiAgICBjb25zdCB1ID0gW107XG4gICAgZm9yIChjb25zdCB0IG9mIG4ubXV0YXRpb25zKSB7XG4gICAgICAgIGNvbnN0IHMgPSBOcy5rZXkoZSwgdC5rZXkucGF0aCwgbi5iYXRjaElkKTtcbiAgICAgICAgci5wdXNoKGkuZGVsZXRlKHMpKSwgdS5wdXNoKHQua2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIEdzLndhaXRGb3IocikubmV4dCgoKCkgPT4gdSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYW4gYXBwcm94aW1hdGUgc2l6ZSBmb3IgdGhlIGdpdmVuIGRvY3VtZW50LlxuICovIGZ1bmN0aW9uIFNpKHQpIHtcbiAgICBpZiAoIXQpIHJldHVybiAwO1xuICAgIGxldCBlO1xuICAgIGlmICh0LmRvY3VtZW50KSBlID0gdC5kb2N1bWVudDsgZWxzZSBpZiAodC51bmtub3duRG9jdW1lbnQpIGUgPSB0LnVua25vd25Eb2N1bWVudDsgZWxzZSB7XG4gICAgICAgIGlmICghdC5ub0RvY3VtZW50KSB0aHJvdyBMKCk7XG4gICAgICAgIGUgPSB0Lm5vRG9jdW1lbnQ7XG4gICAgfVxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShlKS5sZW5ndGg7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogQSBtdXRhdGlvbiBxdWV1ZSBmb3IgYSBzcGVjaWZpYyB1c2VyLCBiYWNrZWQgYnkgSW5kZXhlZERCLiAqLyB2aS5ERUZBVUxUX0NPTExFQ1RJT05fUEVSQ0VOVElMRSA9IDEwLCBcbnZpLkRFRkFVTFRfTUFYX1NFUVVFTkNFX05VTUJFUlNfVE9fQ09MTEVDVCA9IDFlMywgdmkuREVGQVVMVCA9IG5ldyB2aSg0MTk0MzA0MCwgdmkuREVGQVVMVF9DT0xMRUNUSU9OX1BFUkNFTlRJTEUsIHZpLkRFRkFVTFRfTUFYX1NFUVVFTkNFX05VTUJFUlNfVE9fQ09MTEVDVCksIFxudmkuRElTQUJMRUQgPSBuZXcgdmkoLTEsIDAsIDApO1xuXG5jbGFzcyBEaSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIG5vcm1hbGl6ZWQgdXNlcklkIChlLmcuIG51bGwgVUlEID0+IFwiXCIgdXNlcklkKSB1c2VkIHRvIHN0b3JlIC9cbiAgICAgKiByZXRyaWV2ZSBtdXRhdGlvbnMuXG4gICAgICovXG4gICAgdCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLnVzZXJJZCA9IHQsIHRoaXMuayA9IGUsIHRoaXMuSnQgPSBuLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gcywgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWNoZXMgdGhlIGRvY3VtZW50IGtleXMgZm9yIHBlbmRpbmcgbXV0YXRpb24gYmF0Y2hlcy4gSWYgdGhlIG11dGF0aW9uXG4gICAgICAgICAqIGhhcyBiZWVuIHJlbW92ZWQgZnJvbSBJbmRleGVkRGIsIHRoZSBjYWNoZWQgdmFsdWUgbWF5IGNvbnRpbnVlIHRvXG4gICAgICAgICAqIGJlIHVzZWQgdG8gcmV0cmlldmUgdGhlIGJhdGNoJ3MgZG9jdW1lbnQga2V5cy4gVG8gcmVtb3ZlIGEgY2FjaGVkIHZhbHVlXG4gICAgICAgICAqIGxvY2FsbHksIGByZW1vdmVDYWNoZWRNdXRhdGlvbktleXMoKWAgc2hvdWxkIGJlIGludm9rZWQgZWl0aGVyIGRpcmVjdGx5XG4gICAgICAgICAqIG9yIHRocm91Z2ggYHJlbW92ZU11dGF0aW9uQmF0Y2hlcygpYC5cbiAgICAgICAgICpcbiAgICAgICAgICogV2l0aCBtdWx0aS10YWIsIHdoZW4gdGhlIHByaW1hcnkgY2xpZW50IGFja25vd2xlZGdlcyBvciByZWplY3RzIGEgbXV0YXRpb24sXG4gICAgICAgICAqIHRoaXMgY2FjaGUgaXMgdXNlZCBieSBzZWNvbmRhcnkgY2xpZW50cyB0byBpbnZhbGlkYXRlIHRoZSBsb2NhbFxuICAgICAgICAgKiB2aWV3IG9mIHRoZSBkb2N1bWVudHMgdGhhdCB3ZXJlIHByZXZpb3VzbHkgYWZmZWN0ZWQgYnkgdGhlIG11dGF0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICAgICAgdGhpcy5ZdCA9IHt9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IG11dGF0aW9uIHF1ZXVlIGZvciB0aGUgZ2l2ZW4gdXNlci5cbiAgICAgKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyIGZvciB3aGljaCB0byBjcmVhdGUgYSBtdXRhdGlvbiBxdWV1ZS5cbiAgICAgKiBAcGFyYW0gc2VyaWFsaXplciAtIFRoZSBzZXJpYWxpemVyIHRvIHVzZSB3aGVuIHBlcnNpc3RpbmcgdG8gSW5kZXhlZERiLlxuICAgICAqLyAgICBzdGF0aWMgWHQodCwgZSwgbiwgcykge1xuICAgICAgICAvLyBUT0RPKG1jZyk6IEZpZ3VyZSBvdXQgd2hhdCBjb25zdHJhaW50cyB0aGVyZSBhcmUgb24gdXNlcklEc1xuICAgICAgICAvLyBJbiBwYXJ0aWN1bGFyLCBhcmUgdGhlcmUgYW55IHJlc2VydmVkIGNoYXJhY3RlcnM/IGFyZSBlbXB0eSBpZHMgYWxsb3dlZD9cbiAgICAgICAgLy8gRm9yIHRoZSBtb21lbnQgc3RvcmUgdGhlc2UgdG9nZXRoZXIgaW4gdGhlIHNhbWUgbXV0YXRpb25zIHRhYmxlIGFzc3VtaW5nXG4gICAgICAgIC8vIHRoYXQgZW1wdHkgdXNlcklEcyBhcmVuJ3QgYWxsb3dlZC5cbiAgICAgICAgQihcIlwiICE9PSB0LnVpZCk7XG4gICAgICAgIGNvbnN0IGkgPSB0LmlzQXV0aGVudGljYXRlZCgpID8gdC51aWQgOiBcIlwiO1xuICAgICAgICByZXR1cm4gbmV3IERpKGksIGUsIG4sIHMpO1xuICAgIH1cbiAgICBjaGVja0VtcHR5KHQpIHtcbiAgICAgICAgbGV0IGUgPSAhMDtcbiAgICAgICAgY29uc3QgbiA9IElEQktleVJhbmdlLmJvdW5kKFsgdGhpcy51c2VySWQsIE51bWJlci5ORUdBVElWRV9JTkZJTklUWSBdLCBbIHRoaXMudXNlcklkLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSk7XG4gICAgICAgIHJldHVybiBOaSh0KS5qdCh7XG4gICAgICAgICAgICBpbmRleDogQ3MudXNlck11dGF0aW9uc0luZGV4LFxuICAgICAgICAgICAgcmFuZ2U6IG5cbiAgICAgICAgfSwgKCh0LCBuLCBzKSA9PiB7XG4gICAgICAgICAgICBlID0gITEsIHMuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gZSkpO1xuICAgIH1cbiAgICBhZGRNdXRhdGlvbkJhdGNoKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IGtpKHQpLCByID0gTmkodCk7XG4gICAgICAgIC8vIFRoZSBJbmRleGVkRGIgaW1wbGVtZW50YXRpb24gaW4gQ2hyb21lIChhbmQgRmlyZWZveCkgZG9lcyBub3QgaGFuZGxlXG4gICAgICAgIC8vIGNvbXBvdW5kIGluZGljZXMgdGhhdCBpbmNsdWRlIGF1dG8tZ2VuZXJhdGVkIGtleXMgY29ycmVjdGx5LiBUbyBlbnN1cmVcbiAgICAgICAgLy8gdGhhdCB0aGUgaW5kZXggZW50cnkgaXMgYWRkZWQgY29ycmVjdGx5IGluIGFsbCBicm93c2Vycywgd2UgcGVyZm9ybSB0d29cbiAgICAgICAgLy8gd3JpdGVzOiBUaGUgZmlyc3Qgd3JpdGUgaXMgdXNlZCB0byByZXRyaWV2ZSB0aGUgbmV4dCBhdXRvLWdlbmVyYXRlZCBCYXRjaFxuICAgICAgICAvLyBJRCwgYW5kIHRoZSBzZWNvbmQgd3JpdGUgcG9wdWxhdGVzIHRoZSBpbmRleCBhbmQgc3RvcmVzIHRoZSBhY3R1YWxcbiAgICAgICAgLy8gbXV0YXRpb24gYmF0Y2guXG4gICAgICAgIC8vIFNlZTogaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NzAxOTcyXG4gICAgICAgIC8vIFdlIHdyaXRlIGFuIGVtcHR5IG9iamVjdCB0byBvYnRhaW4ga2V5XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiByLmFkZCh7fSkubmV4dCgobyA9PiB7XG4gICAgICAgICAgICBCKFwibnVtYmVyXCIgPT0gdHlwZW9mIG8pO1xuICAgICAgICAgICAgY29uc3QgYSA9IG5ldyByaShvLCBlLCBuLCBzKSwgYyA9IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gbi5iYXNlTXV0YXRpb25zLm1hcCgoZSA9PiBvcyh0Lkd0LCBlKSkpLCBpID0gbi5tdXRhdGlvbnMubWFwKChlID0+IG9zKHQuR3QsIGUpKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDcyhlLCBuLmJhdGNoSWQsIG4ubG9jYWxXcml0ZVRpbWUudG9NaWxsaXMoKSwgcywgaSk7XG4gICAgICAgICAgICB9KHRoaXMuaywgdGhpcy51c2VySWQsIGEpLCB1ID0gW107XG4gICAgICAgICAgICBsZXQgaCA9IG5ldyBUbigoKHQsIGUpID0+IGl0KHQuY2Fub25pY2FsU3RyaW5nKCksIGUuY2Fub25pY2FsU3RyaW5nKCkpKSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2Ygcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBOcy5rZXkodGhpcy51c2VySWQsIHQua2V5LnBhdGgsIG8pO1xuICAgICAgICAgICAgICAgIGggPSBoLmFkZCh0LmtleS5wYXRoLnBvcExhc3QoKSksIHUucHVzaChyLnB1dChjKSksIHUucHVzaChpLnB1dChlLCBOcy5QTEFDRUhPTERFUikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGguZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgdS5wdXNoKHRoaXMuSnQuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodCwgZSkpO1xuICAgICAgICAgICAgfSkpLCB0LmFkZE9uQ29tbWl0dGVkTGlzdGVuZXIoKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLll0W29dID0gYS5rZXlzKCk7XG4gICAgICAgICAgICB9KSksIEdzLndhaXRGb3IodSkubmV4dCgoKCkgPT4gYSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGxvb2t1cE11dGF0aW9uQmF0Y2godCwgZSkge1xuICAgICAgICByZXR1cm4gTmkodCkuZ2V0KGUpLm5leHQoKHQgPT4gdCA/IChCKHQudXNlcklkID09PSB0aGlzLnVzZXJJZCksIF9pKHRoaXMuaywgdCkpIDogbnVsbCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBkb2N1bWVudCBrZXlzIGZvciB0aGUgbXV0YXRpb24gYmF0Y2ggd2l0aCB0aGUgZ2l2ZW4gYmF0Y2hJZC5cbiAgICAgKiBGb3IgcHJpbWFyeSBjbGllbnRzLCB0aGlzIG1ldGhvZCByZXR1cm5zIGBudWxsYCBhZnRlclxuICAgICAqIGByZW1vdmVNdXRhdGlvbkJhdGNoZXMoKWAgaGFzIGJlZW4gY2FsbGVkLiBTZWNvbmRhcnkgY2xpZW50cyByZXR1cm4gYVxuICAgICAqIGNhY2hlZCByZXN1bHQgdW50aWwgYHJlbW92ZUNhY2hlZE11dGF0aW9uS2V5cygpYCBpcyBpbnZva2VkLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgWnQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5ZdFtlXSA/IEdzLnJlc29sdmUodGhpcy5ZdFtlXSkgOiB0aGlzLmxvb2t1cE11dGF0aW9uQmF0Y2godCwgZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0LmtleXMoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5ZdFtlXSA9IG4sIG47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXROZXh0TXV0YXRpb25CYXRjaEFmdGVyQmF0Y2hJZCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlICsgMSwgcyA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoWyB0aGlzLnVzZXJJZCwgbiBdKTtcbiAgICAgICAgbGV0IGkgPSBudWxsO1xuICAgICAgICByZXR1cm4gTmkodCkuanQoe1xuICAgICAgICAgICAgaW5kZXg6IENzLnVzZXJNdXRhdGlvbnNJbmRleCxcbiAgICAgICAgICAgIHJhbmdlOiBzXG4gICAgICAgIH0sICgodCwgZSwgcykgPT4ge1xuICAgICAgICAgICAgZS51c2VySWQgPT09IHRoaXMudXNlcklkICYmIChCKGUuYmF0Y2hJZCA+PSBuKSwgaSA9IF9pKHRoaXMuaywgZSkpLCBzLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBJREJLZXlSYW5nZS51cHBlckJvdW5kKFsgdGhpcy51c2VySWQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdKTtcbiAgICAgICAgbGV0IG4gPSAtMTtcbiAgICAgICAgcmV0dXJuIE5pKHQpLmp0KHtcbiAgICAgICAgICAgIGluZGV4OiBDcy51c2VyTXV0YXRpb25zSW5kZXgsXG4gICAgICAgICAgICByYW5nZTogZSxcbiAgICAgICAgICAgIHJldmVyc2U6ICEwXG4gICAgICAgIH0sICgodCwgZSwgcykgPT4ge1xuICAgICAgICAgICAgbiA9IGUuYmF0Y2hJZCwgcy5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBJREJLZXlSYW5nZS5ib3VuZChbIHRoaXMudXNlcklkLCAtMSBdLCBbIHRoaXMudXNlcklkLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSk7XG4gICAgICAgIHJldHVybiBOaSh0KS5CdChDcy51c2VyTXV0YXRpb25zSW5kZXgsIGUpLm5leHQoKHQgPT4gdC5tYXAoKHQgPT4gX2kodGhpcy5rLCB0KSkpKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5KHQsIGUpIHtcbiAgICAgICAgLy8gU2NhbiB0aGUgZG9jdW1lbnQtbXV0YXRpb24gaW5kZXggc3RhcnRpbmcgd2l0aCBhIHByZWZpeCBzdGFydGluZyB3aXRoXG4gICAgICAgIC8vIHRoZSBnaXZlbiBkb2N1bWVudEtleS5cbiAgICAgICAgY29uc3QgbiA9IE5zLnByZWZpeEZvclBhdGgodGhpcy51c2VySWQsIGUucGF0aCksIHMgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKG4pLCBpID0gW107XG4gICAgICAgIHJldHVybiBraSh0KS5qdCh7XG4gICAgICAgICAgICByYW5nZTogc1xuICAgICAgICB9LCAoKG4sIHMsIHIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IFtvLCBhLCBjXSA9IG4sIHUgPSB2cyhhKTtcbiAgICAgICAgICAgIC8vIE9ubHkgY29uc2lkZXIgcm93cyBtYXRjaGluZyBleGFjdGx5IHRoZSBzcGVjaWZpYyBrZXkgb2ZcbiAgICAgICAgICAgIC8vIGludGVyZXN0LiBOb3RlIHRoYXQgYmVjYXVzZSB3ZSBvcmRlciBieSBwYXRoIGZpcnN0LCBhbmQgd2VcbiAgICAgICAgICAgIC8vIG9yZGVyIHRlcm1pbmF0b3JzIGJlZm9yZSBwYXRoIHNlcGFyYXRvcnMsIHdlJ2xsIGVuY291bnRlciBhbGxcbiAgICAgICAgICAgIC8vIHRoZSBpbmRleCByb3dzIGZvciBkb2N1bWVudEtleSBjb250aWd1b3VzbHkuIEluIHBhcnRpY3VsYXIsIGFsbFxuICAgICAgICAgICAgLy8gdGhlIHJvd3MgZm9yIGRvY3VtZW50S2V5IHdpbGwgb2NjdXIgYmVmb3JlIGFueSByb3dzIGZvclxuICAgICAgICAgICAgLy8gZG9jdW1lbnRzIG5lc3RlZCBpbiBhIHN1YmNvbGxlY3Rpb24gYmVuZWF0aCBkb2N1bWVudEtleSBzbyB3ZVxuICAgICAgICAgICAgLy8gY2FuIHN0b3AgYXMgc29vbiBhcyB3ZSBoaXQgYW55IHN1Y2ggcm93LlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8gPT09IHRoaXMudXNlcklkICYmIGUucGF0aC5pc0VxdWFsKHUpKSBcbiAgICAgICAgICAgIC8vIExvb2sgdXAgdGhlIG11dGF0aW9uIGJhdGNoIGluIHRoZSBzdG9yZS5cbiAgICAgICAgICAgIHJldHVybiBOaSh0KS5nZXQoYykubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0KSB0aHJvdyBMKCk7XG4gICAgICAgICAgICAgICAgQih0LnVzZXJJZCA9PT0gdGhpcy51c2VySWQpLCBpLnB1c2goX2kodGhpcy5rLCB0KSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICByLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBuZXcgVG4oaXQpO1xuICAgICAgICBjb25zdCBzID0gW107XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IE5zLnByZWZpeEZvclBhdGgodGhpcy51c2VySWQsIGUucGF0aCksIHIgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKGkpLCBvID0ga2kodCkuanQoe1xuICAgICAgICAgICAgICAgIHJhbmdlOiByXG4gICAgICAgICAgICB9LCAoKHQsIHMsIGkpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBbciwgbywgYV0gPSB0LCBjID0gdnMobyk7XG4gICAgICAgICAgICAgICAgLy8gT25seSBjb25zaWRlciByb3dzIG1hdGNoaW5nIGV4YWN0bHkgdGhlIHNwZWNpZmljIGtleSBvZlxuICAgICAgICAgICAgICAgIC8vIGludGVyZXN0LiBOb3RlIHRoYXQgYmVjYXVzZSB3ZSBvcmRlciBieSBwYXRoIGZpcnN0LCBhbmQgd2VcbiAgICAgICAgICAgICAgICAvLyBvcmRlciB0ZXJtaW5hdG9ycyBiZWZvcmUgcGF0aCBzZXBhcmF0b3JzLCB3ZSdsbCBlbmNvdW50ZXIgYWxsXG4gICAgICAgICAgICAgICAgLy8gdGhlIGluZGV4IHJvd3MgZm9yIGRvY3VtZW50S2V5IGNvbnRpZ3VvdXNseS4gSW4gcGFydGljdWxhciwgYWxsXG4gICAgICAgICAgICAgICAgLy8gdGhlIHJvd3MgZm9yIGRvY3VtZW50S2V5IHdpbGwgb2NjdXIgYmVmb3JlIGFueSByb3dzIGZvclxuICAgICAgICAgICAgICAgIC8vIGRvY3VtZW50cyBuZXN0ZWQgaW4gYSBzdWJjb2xsZWN0aW9uIGJlbmVhdGggZG9jdW1lbnRLZXkgc28gd2VcbiAgICAgICAgICAgICAgICAvLyBjYW4gc3RvcCBhcyBzb29uIGFzIHdlIGhpdCBhbnkgc3VjaCByb3cuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPT09IHRoaXMudXNlcklkICYmIGUucGF0aC5pc0VxdWFsKGMpID8gbiA9IG4uYWRkKGEpIDogaS5kb25lKCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBzLnB1c2gobyk7XG4gICAgICAgIH0pKSwgR3Mud2FpdEZvcihzKS5uZXh0KCgoKSA9PiB0aGlzLnRlKHQsIG4pKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ1F1ZXJ5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUucGF0aCwgcyA9IG4ubGVuZ3RoICsgMSwgaSA9IE5zLnByZWZpeEZvclBhdGgodGhpcy51c2VySWQsIG4pLCByID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChpKTtcbiAgICAgICAgLy8gQ29sbGVjdCB1cCB1bmlxdWUgYmF0Y2hJRHMgZW5jb3VudGVyZWQgZHVyaW5nIGEgc2NhbiBvZiB0aGUgaW5kZXguIFVzZSBhXG4gICAgICAgIC8vIFNvcnRlZFNldCB0byBhY2N1bXVsYXRlIGJhdGNoIElEcyBzbyB0aGV5IGNhbiBiZSB0cmF2ZXJzZWQgaW4gb3JkZXIgaW4gYVxuICAgICAgICAvLyBzY2FuIG9mIHRoZSBtYWluIHRhYmxlLlxuICAgICAgICBsZXQgbyA9IG5ldyBUbihpdCk7XG4gICAgICAgIHJldHVybiBraSh0KS5qdCh7XG4gICAgICAgICAgICByYW5nZTogclxuICAgICAgICB9LCAoKHQsIGUsIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IFtyLCBhLCBjXSA9IHQsIHUgPSB2cyhhKTtcbiAgICAgICAgICAgIHIgPT09IHRoaXMudXNlcklkICYmIG4uaXNQcmVmaXhPZih1KSA/IFxuICAgICAgICAgICAgLy8gUm93cyB3aXRoIGRvY3VtZW50IGtleXMgbW9yZSB0aGFuIG9uZSBzZWdtZW50IGxvbmdlciB0aGFuIHRoZVxuICAgICAgICAgICAgLy8gcXVlcnkgcGF0aCBjYW4ndCBiZSBtYXRjaGVzLiBGb3IgZXhhbXBsZSwgYSBxdWVyeSBvbiAncm9vbXMnXG4gICAgICAgICAgICAvLyBjYW4ndCBtYXRjaCB0aGUgZG9jdW1lbnQgL3Jvb21zL2FiYy9tZXNzYWdlcy94eXguXG4gICAgICAgICAgICAvLyBUT0RPKG1jZyk6IHdlJ2xsIG5lZWQgYSBkaWZmZXJlbnQgc2Nhbm5lciB3aGVuIHdlIGltcGxlbWVudFxuICAgICAgICAgICAgLy8gYW5jZXN0b3IgcXVlcmllcy5cbiAgICAgICAgICAgIHUubGVuZ3RoID09PSBzICYmIChvID0gby5hZGQoYykpIDogaS5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB0aGlzLnRlKHQsIG8pKSk7XG4gICAgfVxuICAgIHRlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IFtdLCBzID0gW107XG4gICAgICAgIC8vIFRPRE8ocm9ja3dvb2QpOiBJbXBsZW1lbnQgdGhpcyB1c2luZyBpdGVyYXRlLlxuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHMucHVzaChOaSh0KS5nZXQoZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IHQpIHRocm93IEwoKTtcbiAgICAgICAgICAgICAgICBCKHQudXNlcklkID09PSB0aGlzLnVzZXJJZCksIG4ucHVzaChfaSh0aGlzLmssIHQpKTtcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIH0pKSwgR3Mud2FpdEZvcihzKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIHJlbW92ZU11dGF0aW9uQmF0Y2godCwgZSkge1xuICAgICAgICByZXR1cm4gVmkodC5XdCwgdGhpcy51c2VySWQsIGUpLm5leHQoKG4gPT4gKHQuYWRkT25Db21taXR0ZWRMaXN0ZW5lcigoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lZShlLmJhdGNoSWQpO1xuICAgICAgICB9KSksIEdzLmZvckVhY2gobiwgKGUgPT4gdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5tYXJrUG90ZW50aWFsbHlPcnBoYW5lZCh0LCBlKSkpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGVhcnMgdGhlIGNhY2hlZCBrZXlzIGZvciBhIG11dGF0aW9uIGJhdGNoLiBUaGlzIG1ldGhvZCBzaG91bGQgYmVcbiAgICAgKiBjYWxsZWQgYnkgc2Vjb25kYXJ5IGNsaWVudHMgYWZ0ZXIgdGhleSBwcm9jZXNzIG11dGF0aW9uIHVwZGF0ZXMuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgdGhpcyBtZXRob2QgZG9lcyBub3QgaGF2ZSB0byBiZSBjYWxsZWQgZnJvbSBwcmltYXJ5IGNsaWVudHMgYXNcbiAgICAgKiB0aGUgY29ycmVzcG9uZGluZyBjYWNoZSBlbnRyaWVzIGFyZSBjbGVhcmVkIHdoZW4gYW4gYWNrbm93bGVkZ2VkIG9yXG4gICAgICogcmVqZWN0ZWQgYmF0Y2ggaXMgcmVtb3ZlZCBmcm9tIHRoZSBtdXRhdGlvbiBxdWV1ZS5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5XG4gICAgZWUodCkge1xuICAgICAgICBkZWxldGUgdGhpcy5ZdFt0XTtcbiAgICB9XG4gICAgcGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2sodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGVja0VtcHR5KHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgaWYgKCFlKSByZXR1cm4gR3MucmVzb2x2ZSgpO1xuICAgICAgICAgICAgLy8gVmVyaWZ5IHRoYXQgdGhlcmUgYXJlIG5vIGVudHJpZXMgaW4gdGhlIGRvY3VtZW50TXV0YXRpb25zIGluZGV4IGlmXG4gICAgICAgICAgICAvLyB0aGUgcXVldWUgaXMgZW1wdHkuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChOcy5wcmVmaXhGb3JVc2VyKHRoaXMudXNlcklkKSksIHMgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiBraSh0KS5qdCh7XG4gICAgICAgICAgICAgICAgcmFuZ2U6IG5cbiAgICAgICAgICAgIH0sICgodCwgZSwgbikgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0WzBdID09PSB0aGlzLnVzZXJJZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gdnModFsxXSk7XG4gICAgICAgICAgICAgICAgICAgIHMucHVzaChlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Ugbi5kb25lKCk7XG4gICAgICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgIEIoMCA9PT0gcy5sZW5ndGgpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGNvbnRhaW5zS2V5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIENpKHQsIHRoaXMudXNlcklkLCBlKTtcbiAgICB9XG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seSAoc3RhdGUgaXMgaGVsZCBpbiBtZW1vcnkgaW4gb3RoZXIgY2xpZW50cykuXG4gICAgLyoqIFJldHVybnMgdGhlIG11dGF0aW9uIHF1ZXVlJ3MgbWV0YWRhdGEgZnJvbSBJbmRleGVkRGIuICovXG4gICAgbmUodCkge1xuICAgICAgICByZXR1cm4geGkodCkuZ2V0KHRoaXMudXNlcklkKS5uZXh0KCh0ID0+IHQgfHwgbmV3IERzKHRoaXMudXNlcklkLCAtMSwgXG4gICAgICAgIC8qbGFzdFN0cmVhbVRva2VuPSovIFwiXCIpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIG11dGF0aW9uIHF1ZXVlIGZvciB0aGUgZ2l2ZW4gdXNlciBjb250YWlucyBhIHBlbmRpbmdcbiAqICAgICAgICAgbXV0YXRpb24gZm9yIHRoZSBnaXZlbiBrZXkuXG4gKi8gZnVuY3Rpb24gQ2kodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBOcy5wcmVmaXhGb3JQYXRoKGUsIG4ucGF0aCksIGkgPSBzWzFdLCByID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChzKTtcbiAgICBsZXQgbyA9ICExO1xuICAgIHJldHVybiBraSh0KS5qdCh7XG4gICAgICAgIHJhbmdlOiByLFxuICAgICAgICBLdDogITBcbiAgICB9LCAoKHQsIG4sIHMpID0+IHtcbiAgICAgICAgY29uc3QgW3IsIGEsIC8qYmF0Y2hJRCovIGNdID0gdDtcbiAgICAgICAgciA9PT0gZSAmJiBhID09PSBpICYmIChvID0gITApLCBzLmRvbmUoKTtcbiAgICB9KSkubmV4dCgoKCkgPT4gbykpO1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGFueSBtdXRhdGlvbiBxdWV1ZSBjb250YWlucyB0aGUgZ2l2ZW4gZG9jdW1lbnQuICovXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgbXV0YXRpb25zIG9iamVjdCBzdG9yZS5cbiAqL1xuZnVuY3Rpb24gTmkodCkge1xuICAgIHJldHVybiBpaSh0LCBDcy5zdG9yZSk7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBtdXRhdGlvblF1ZXVlcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24ga2kodCkge1xuICAgIHJldHVybiBpaSh0LCBOcy5zdG9yZSk7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBtdXRhdGlvblF1ZXVlcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24geGkodCkge1xuICAgIHJldHVybiBpaSh0LCBEcy5zdG9yZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogT2Zmc2V0IHRvIGVuc3VyZSBub24tb3ZlcmxhcHBpbmcgdGFyZ2V0IGlkcy4gKi9cbi8qKlxuICogR2VuZXJhdGVzIG1vbm90b25pY2FsbHkgaW5jcmVhc2luZyB0YXJnZXQgSURzIGZvciBzZW5kaW5nIHRhcmdldHMgdG8gdGhlXG4gKiB3YXRjaCBzdHJlYW0uXG4gKlxuICogVGhlIGNsaWVudCBjb25zdHJ1Y3RzIHR3byBnZW5lcmF0b3JzLCBvbmUgZm9yIHRoZSB0YXJnZXQgY2FjaGUsIGFuZCBvbmUgZm9yXG4gKiBmb3IgdGhlIHN5bmMgZW5naW5lICh0byBnZW5lcmF0ZSBsaW1ibyBkb2N1bWVudHMgdGFyZ2V0cykuIFRoZXNlXG4gKiBnZW5lcmF0b3JzIHByb2R1Y2Ugbm9uLW92ZXJsYXBwaW5nIElEcyAoYnkgdXNpbmcgZXZlbiBhbmQgb2RkIElEc1xuICogcmVzcGVjdGl2ZWx5KS5cbiAqXG4gKiBCeSBzZXBhcmF0aW5nIHRoZSB0YXJnZXQgSUQgc3BhY2UsIHRoZSBxdWVyeSBjYWNoZSBjYW4gZ2VuZXJhdGUgdGFyZ2V0IElEc1xuICogdGhhdCBwZXJzaXN0IGFjcm9zcyBjbGllbnQgcmVzdGFydHMsIHdoaWxlIHN5bmMgZW5naW5lIGNhbiBpbmRlcGVuZGVudGx5XG4gKiBnZW5lcmF0ZSBpbi1tZW1vcnkgdGFyZ2V0IElEcyB0aGF0IGFyZSB0cmFuc2llbnQgYW5kIGNhbiBiZSByZXVzZWQgYWZ0ZXIgYVxuICogcmVzdGFydC5cbiAqL1xuY2xhc3MgJGkge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5zZSA9IHQ7XG4gICAgfVxuICAgIG5leHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlICs9IDIsIHRoaXMuc2U7XG4gICAgfVxuICAgIHN0YXRpYyBpZSgpIHtcbiAgICAgICAgLy8gVGhlIHRhcmdldCBjYWNoZSBnZW5lcmF0b3IgbXVzdCByZXR1cm4gJzInIGluIGl0cyBmaXJzdCBjYWxsIHRvIGBuZXh0KClgXG4gICAgICAgIC8vIGFzIHRoZXJlIGlzIG5vIGRpZmZlcmVudGlhdGlvbiBpbiB0aGUgcHJvdG9jb2wgbGF5ZXIgYmV0d2VlbiBhbiB1bnNldFxuICAgICAgICAvLyBudW1iZXIgYW5kIHRoZSBudW1iZXIgJzAnLiBJZiB3ZSB3ZXJlIHRvIHNlbnQgYSB0YXJnZXQgd2l0aCB0YXJnZXQgSURcbiAgICAgICAgLy8gJzAnLCB0aGUgYmFja2VuZCB3b3VsZCBjb25zaWRlciBpdCB1bnNldCBhbmQgcmVwbGFjZSBpdCB3aXRoIGl0cyBvd24gSUQuXG4gICAgICAgIHJldHVybiBuZXcgJGkoMCk7XG4gICAgfVxuICAgIHN0YXRpYyByZSgpIHtcbiAgICAgICAgLy8gU3luYyBlbmdpbmUgYXNzaWducyB0YXJnZXQgSURzIGZvciBsaW1ibyBkb2N1bWVudCBkZXRlY3Rpb24uXG4gICAgICAgIHJldHVybiBuZXcgJGkoLTEpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgRmkge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IHQsIHRoaXMuayA9IGU7XG4gICAgfVxuICAgIC8vIFBPUlRJTkcgTk9URTogV2UgZG9uJ3QgY2FjaGUgZ2xvYmFsIG1ldGFkYXRhIGZvciB0aGUgdGFyZ2V0IGNhY2hlLCBzaW5jZVxuICAgIC8vIHNvbWUgb2YgaXQgKGluIHBhcnRpY3VsYXIgYGhpZ2hlc3RUYXJnZXRJZGApIGNhbiBiZSBtb2RpZmllZCBieSBzZWNvbmRhcnlcbiAgICAvLyB0YWJzLiBXZSBjb3VsZCBwZXJoYXBzIGJlIG1vcmUgZ3JhbnVsYXIgKGFuZCBlLmcuIHN0aWxsIGNhY2hlXG4gICAgLy8gYGxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb25gIGluIG1lbW9yeSkgYnV0IGZvciBzaW1wbGljaXR5IHdlIGN1cnJlbnRseSBnb1xuICAgIC8vIHRvIEluZGV4ZWREYiB3aGVuZXZlciB3ZSBuZWVkIHRvIHJlYWQgbWV0YWRhdGEuIFdlIGNhbiByZXZpc2l0IGlmIGl0IHR1cm5zXG4gICAgLy8gb3V0IHRvIGhhdmUgYSBtZWFuaW5nZnVsIHBlcmZvcm1hbmNlIGltcGFjdC5cbiAgICBhbGxvY2F0ZVRhcmdldElkKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2UodCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gbmV3ICRpKGUuaGlnaGVzdFRhcmdldElkKTtcbiAgICAgICAgICAgIHJldHVybiBlLmhpZ2hlc3RUYXJnZXRJZCA9IG4ubmV4dCgpLCB0aGlzLmFlKHQsIGUpLm5leHQoKCgpID0+IGUuaGlnaGVzdFRhcmdldElkKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbih0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9lKHQpLm5leHQoKHQgPT4gY3QuZnJvbVRpbWVzdGFtcChuZXcgYXQodC5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uLnNlY29uZHMsIHQubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbi5uYW5vc2Vjb25kcykpKSk7XG4gICAgfVxuICAgIGdldEhpZ2hlc3RTZXF1ZW5jZU51bWJlcih0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9lKHQpLm5leHQoKHQgPT4gdC5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIpKTtcbiAgICB9XG4gICAgc2V0VGFyZ2V0c01ldGFkYXRhKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2UodCkubmV4dCgocyA9PiAocy5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgPSBlLCBuICYmIChzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSBuLnRvVGltZXN0YW1wKCkpLCBcbiAgICAgICAgZSA+IHMuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyICYmIChzLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IGUpLCB0aGlzLmFlKHQsIHMpKSkpO1xuICAgIH1cbiAgICBhZGRUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2UodCwgZSkubmV4dCgoKCkgPT4gdGhpcy5vZSh0KS5uZXh0KChuID0+IChuLnRhcmdldENvdW50ICs9IDEsIHRoaXMudWUoZSwgbiksIFxuICAgICAgICB0aGlzLmFlKHQsIG4pKSkpKSk7XG4gICAgfVxuICAgIHVwZGF0ZVRhcmdldERhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jZSh0LCBlKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGUudGFyZ2V0SWQpLm5leHQoKCgpID0+IE9pKHQpLmRlbGV0ZShlLnRhcmdldElkKSkpLm5leHQoKCgpID0+IHRoaXMub2UodCkpKS5uZXh0KChlID0+IChCKGUudGFyZ2V0Q291bnQgPiAwKSwgXG4gICAgICAgIGUudGFyZ2V0Q291bnQgLT0gMSwgdGhpcy5hZSh0LCBlKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRHJvcHMgYW55IHRhcmdldHMgd2l0aCBzZXF1ZW5jZSBudW1iZXIgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHRoZSB1cHBlciBib3VuZCwgZXhjZXB0aW5nIHRob3NlXG4gICAgICogcHJlc2VudCBpbiBgYWN0aXZlVGFyZ2V0SWRzYC4gRG9jdW1lbnQgYXNzb2NpYXRpb25zIGZvciB0aGUgcmVtb3ZlZCB0YXJnZXRzIGFyZSBhbHNvIHJlbW92ZWQuXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHRhcmdldHMgcmVtb3ZlZC5cbiAgICAgKi8gICAgcmVtb3ZlVGFyZ2V0cyh0LCBlLCBuKSB7XG4gICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICByZXR1cm4gT2kodCkuanQoKChyLCBvKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhID0gbWkobyk7XG4gICAgICAgICAgICBhLnNlcXVlbmNlTnVtYmVyIDw9IGUgJiYgbnVsbCA9PT0gbi5nZXQoYS50YXJnZXRJZCkgJiYgKHMrKywgaS5wdXNoKHRoaXMucmVtb3ZlVGFyZ2V0RGF0YSh0LCBhKSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gR3Mud2FpdEZvcihpKSkpLm5leHQoKCgpID0+IHMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbCBwcm92aWRlZCBmdW5jdGlvbiB3aXRoIGVhY2ggYFRhcmdldERhdGFgIHRoYXQgd2UgaGF2ZSBjYWNoZWQuXG4gICAgICovICAgIGZvckVhY2hUYXJnZXQodCwgZSkge1xuICAgICAgICByZXR1cm4gT2kodCkuanQoKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gbWkobik7XG4gICAgICAgICAgICBlKHMpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIG9lKHQpIHtcbiAgICAgICAgcmV0dXJuIE1pKHQpLmdldChMcy5rZXkpLm5leHQoKHQgPT4gKEIobnVsbCAhPT0gdCksIHQpKSk7XG4gICAgfVxuICAgIGFlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIE1pKHQpLnB1dChMcy5rZXksIGUpO1xuICAgIH1cbiAgICBjZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBPaSh0KS5wdXQoZ2kodGhpcy5rLCBlKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluLXBsYWNlIHVwZGF0ZXMgdGhlIHByb3ZpZGVkIG1ldGFkYXRhIHRvIGFjY291bnQgZm9yIHZhbHVlcyBpbiB0aGUgZ2l2ZW5cbiAgICAgKiBUYXJnZXREYXRhLiBTYXZpbmcgaXMgZG9uZSBzZXBhcmF0ZWx5LiBSZXR1cm5zIHRydWUgaWYgdGhlcmUgd2VyZSBhbnlcbiAgICAgKiBjaGFuZ2VzIHRvIHRoZSBtZXRhZGF0YS5cbiAgICAgKi8gICAgdWUodCwgZSkge1xuICAgICAgICBsZXQgbiA9ICExO1xuICAgICAgICByZXR1cm4gdC50YXJnZXRJZCA+IGUuaGlnaGVzdFRhcmdldElkICYmIChlLmhpZ2hlc3RUYXJnZXRJZCA9IHQudGFyZ2V0SWQsIG4gPSAhMCksIFxuICAgICAgICB0LnNlcXVlbmNlTnVtYmVyID4gZS5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgJiYgKGUuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyID0gdC5zZXF1ZW5jZU51bWJlciwgXG4gICAgICAgIG4gPSAhMCksIG47XG4gICAgfVxuICAgIGdldFRhcmdldENvdW50KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2UodCkubmV4dCgodCA9PiB0LnRhcmdldENvdW50KSk7XG4gICAgfVxuICAgIGdldFRhcmdldERhdGEodCwgZSkge1xuICAgICAgICAvLyBJdGVyYXRpbmcgYnkgdGhlIGNhbm9uaWNhbElkIG1heSB5aWVsZCBtb3JlIHRoYW4gb25lIHJlc3VsdCBiZWNhdXNlXG4gICAgICAgIC8vIGNhbm9uaWNhbElkIHZhbHVlcyBhcmUgbm90IHJlcXVpcmVkIHRvIGJlIHVuaXF1ZSBwZXIgdGFyZ2V0LiBUaGlzIHF1ZXJ5XG4gICAgICAgIC8vIGRlcGVuZHMgb24gdGhlIHF1ZXJ5VGFyZ2V0cyBpbmRleCB0byBiZSBlZmZpY2llbnQuXG4gICAgICAgIGNvbnN0IG4gPSBIdChlKSwgcyA9IElEQktleVJhbmdlLmJvdW5kKFsgbiwgTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZIF0sIFsgbiwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIF0pO1xuICAgICAgICBsZXQgaSA9IG51bGw7XG4gICAgICAgIHJldHVybiBPaSh0KS5qdCh7XG4gICAgICAgICAgICByYW5nZTogcyxcbiAgICAgICAgICAgIGluZGV4OiBPcy5xdWVyeVRhcmdldHNJbmRleE5hbWVcbiAgICAgICAgfSwgKCh0LCBuLCBzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gbWkobik7XG4gICAgICAgICAgICAvLyBBZnRlciBmaW5kaW5nIGEgcG90ZW50aWFsIG1hdGNoLCBjaGVjayB0aGF0IHRoZSB0YXJnZXQgaXNcbiAgICAgICAgICAgIC8vIGFjdHVhbGx5IGVxdWFsIHRvIHRoZSByZXF1ZXN0ZWQgdGFyZ2V0LlxuICAgICAgICAgICAgICAgICAgICAgICAgWXQoZSwgci50YXJnZXQpICYmIChpID0gciwgcy5kb25lKCkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICBhZGRNYXRjaGluZ0tleXModCwgZSwgbikge1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IFRoZSByZXZlcnNlIGluZGV4IChkb2N1bWVudHNUYXJnZXRzKSBpcyBtYWludGFpbmVkIGJ5XG4gICAgICAgIC8vIEluZGV4ZWREYi5cbiAgICAgICAgY29uc3QgcyA9IFtdLCBpID0gTGkodCk7XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IFJzKGUucGF0aCk7XG4gICAgICAgICAgICBzLnB1c2goaS5wdXQobmV3IE1zKG4sIHIpKSksIHMucHVzaCh0aGlzLnJlZmVyZW5jZURlbGVnYXRlLmFkZFJlZmVyZW5jZSh0LCBuLCBlKSk7XG4gICAgICAgIH0pKSwgR3Mud2FpdEZvcihzKTtcbiAgICB9XG4gICAgcmVtb3ZlTWF0Y2hpbmdLZXlzKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBUaGUgcmV2ZXJzZSBpbmRleCAoZG9jdW1lbnRzVGFyZ2V0cykgaXMgbWFpbnRhaW5lZCBieVxuICAgICAgICAvLyBJbmRleGVkRGIuXG4gICAgICAgIGNvbnN0IHMgPSBMaSh0KTtcbiAgICAgICAgcmV0dXJuIEdzLmZvckVhY2goZSwgKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IFJzKGUucGF0aCk7XG4gICAgICAgICAgICByZXR1cm4gR3Mud2FpdEZvcihbIHMuZGVsZXRlKFsgbiwgaSBdKSwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5yZW1vdmVSZWZlcmVuY2UodCwgbiwgZSkgXSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgcmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gTGkodCksIHMgPSBJREJLZXlSYW5nZS5ib3VuZChbIGUgXSwgWyBlICsgMSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCk7XG4gICAgICAgIHJldHVybiBuLmRlbGV0ZShzKTtcbiAgICB9XG4gICAgZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gSURCS2V5UmFuZ2UuYm91bmQoWyBlIF0sIFsgZSArIDEgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gITApLCBzID0gTGkodCk7XG4gICAgICAgIGxldCBpID0gU24oKTtcbiAgICAgICAgcmV0dXJuIHMuanQoe1xuICAgICAgICAgICAgcmFuZ2U6IG4sXG4gICAgICAgICAgICBLdDogITBcbiAgICAgICAgfSwgKCh0LCBlLCBuKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gdnModFsxXSksIHIgPSBuZXcgU3Qocyk7XG4gICAgICAgICAgICBpID0gaS5hZGQocik7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIGNvbnRhaW5zS2V5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IFJzKGUucGF0aCksIHMgPSBJREJLZXlSYW5nZS5ib3VuZChbIG4gXSwgWyBvdChuKSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCk7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgcmV0dXJuIExpKHQpLmp0KHtcbiAgICAgICAgICAgIGluZGV4OiBNcy5kb2N1bWVudFRhcmdldHNJbmRleCxcbiAgICAgICAgICAgIEt0OiAhMCxcbiAgICAgICAgICAgIHJhbmdlOiBzXG4gICAgICAgIH0sICgoW3QsIGVdLCBuLCBzKSA9PiB7XG4gICAgICAgICAgICAvLyBIYXZpbmcgYSBzZW50aW5lbCByb3cgZm9yIGEgZG9jdW1lbnQgZG9lcyBub3QgY291bnQgYXMgY29udGFpbmluZyB0aGF0IGRvY3VtZW50O1xuICAgICAgICAgICAgLy8gRm9yIHRoZSB0YXJnZXQgY2FjaGUsIGNvbnRhaW5pbmcgdGhlIGRvY3VtZW50IG1lYW5zIHRoZSBkb2N1bWVudCBpcyBwYXJ0IG9mIHNvbWVcbiAgICAgICAgICAgIC8vIHRhcmdldC5cbiAgICAgICAgICAgIDAgIT09IHQgJiYgKGkrKywgcy5kb25lKCkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSA+IDApKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgYSBUYXJnZXREYXRhIGVudHJ5IGJ5IHRhcmdldCBJRC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0YXJnZXRJZCAtIFRoZSB0YXJnZXQgSUQgb2YgdGhlIFRhcmdldERhdGEgZW50cnkgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBUaGUgY2FjaGVkIFRhcmdldERhdGEgZW50cnksIG9yIG51bGwgaWYgdGhlIGNhY2hlIGhhcyBubyBlbnRyeSBmb3JcbiAgICAgKiB0aGUgdGFyZ2V0LlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgRXQodCwgZSkge1xuICAgICAgICByZXR1cm4gT2kodCkuZ2V0KGUpLm5leHQoKHQgPT4gdCA/IG1pKHQpIDogbnVsbCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIHF1ZXJpZXMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIE9pKHQpIHtcbiAgICByZXR1cm4gaWkodCwgT3Muc3RvcmUpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgdGFyZ2V0IGdsb2JhbHMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIE1pKHQpIHtcbiAgICByZXR1cm4gaWkodCwgTHMuc3RvcmUpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgZG9jdW1lbnQgdGFyZ2V0IG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBMaSh0KSB7XG4gICAgcmV0dXJuIGlpKHQsIE1zLnN0b3JlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVmVyaWZpZXMgdGhlIGVycm9yIHRocm93biBieSBhIExvY2FsU3RvcmUgb3BlcmF0aW9uLiBJZiBhIExvY2FsU3RvcmVcbiAqIG9wZXJhdGlvbiBmYWlscyBiZWNhdXNlIHRoZSBwcmltYXJ5IGxlYXNlIGhhcyBiZWVuIHRha2VuIGJ5IGFub3RoZXIgY2xpZW50LFxuICogd2UgaWdub3JlIHRoZSBlcnJvciAodGhlIHBlcnNpc3RlbmNlIGxheWVyIHdpbGwgaW1tZWRpYXRlbHkgY2FsbFxuICogYGFwcGx5UHJpbWFyeUxlYXNlYCB0byBwcm9wYWdhdGUgdGhlIHByaW1hcnkgc3RhdGUgY2hhbmdlKS4gQWxsIG90aGVyIGVycm9yc1xuICogYXJlIHJlLXRocm93bi5cbiAqXG4gKiBAcGFyYW0gZXJyIC0gQW4gZXJyb3IgcmV0dXJuZWQgYnkgYSBMb2NhbFN0b3JlIG9wZXJhdGlvbi5cbiAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIGFmdGVyIHdlIHJlY292ZXJlZCwgb3IgdGhlIG9yaWdpbmFsIGVycm9yLlxuICovIGFzeW5jIGZ1bmN0aW9uIEJpKHQpIHtcbiAgICBpZiAodC5jb2RlICE9PSBLLkZBSUxFRF9QUkVDT05ESVRJT04gfHwgdC5tZXNzYWdlICE9PSBRcykgdGhyb3cgdDtcbiAgICAkKFwiTG9jYWxTdG9yZVwiLCBcIlVuZXhwZWN0ZWRseSBsb3N0IHByaW1hcnkgbGVhc2VcIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIFVpKFt0LCBlXSwgW24sIHNdKSB7XG4gICAgY29uc3QgaSA9IGl0KHQsIG4pO1xuICAgIHJldHVybiAwID09PSBpID8gaXQoZSwgcykgOiBpO1xufVxuXG4vKipcbiAqIFVzZWQgdG8gY2FsY3VsYXRlIHRoZSBudGggc2VxdWVuY2UgbnVtYmVyLiBLZWVwcyBhIHJvbGxpbmcgYnVmZmVyIG9mIHRoZVxuICogbG93ZXN0IG4gdmFsdWVzIHBhc3NlZCB0byBgYWRkRWxlbWVudGAsIGFuZCBmaW5hbGx5IHJlcG9ydHMgdGhlIGxhcmdlc3Qgb2ZcbiAqIHRoZW0gaW4gYG1heFZhbHVlYC5cbiAqLyBjbGFzcyBxaSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmhlID0gdCwgdGhpcy5idWZmZXIgPSBuZXcgVG4oVWkpLCB0aGlzLmxlID0gMDtcbiAgICB9XG4gICAgZmUoKSB7XG4gICAgICAgIHJldHVybiArK3RoaXMubGU7XG4gICAgfVxuICAgIGRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFsgdCwgdGhpcy5mZSgpIF07XG4gICAgICAgIGlmICh0aGlzLmJ1ZmZlci5zaXplIDwgdGhpcy5oZSkgdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5hZGQoZSk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuYnVmZmVyLmxhc3QoKTtcbiAgICAgICAgICAgIFVpKGUsIHQpIDwgMCAmJiAodGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5kZWxldGUodCkuYWRkKGUpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgbWF4VmFsdWUoKSB7XG4gICAgICAgIC8vIEd1YXJhbnRlZWQgdG8gYmUgbm9uLWVtcHR5LiBJZiB3ZSBkZWNpZGUgd2UgYXJlIG5vdCBjb2xsZWN0aW5nIGFueVxuICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXJzLCBudGhTZXF1ZW5jZU51bWJlciBiZWxvdyBzaG9ydC1jaXJjdWl0cy4gSWYgd2UgaGF2ZVxuICAgICAgICAvLyBkZWNpZGVkIHRoYXQgd2UgYXJlIGNvbGxlY3RpbmcgbiBzZXF1ZW5jZSBudW1iZXJzLCBpdCdzIGJlY2F1c2UgbiBpcyBzb21lXG4gICAgICAgIC8vIHBlcmNlbnRhZ2Ugb2YgdGhlIGV4aXN0aW5nIHNlcXVlbmNlIG51bWJlcnMuIFRoYXQgbWVhbnMgd2Ugc2hvdWxkIG5ldmVyXG4gICAgICAgIC8vIGJlIGluIGEgc2l0dWF0aW9uIHdoZXJlIHdlIGFyZSBjb2xsZWN0aW5nIHNlcXVlbmNlIG51bWJlcnMgYnV0IGRvbid0XG4gICAgICAgIC8vIGFjdHVhbGx5IGhhdmUgYW55LlxuICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIubGFzdCgpWzBdO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIGlzIHJlc3BvbnNpYmxlIGZvciB0aGUgc2NoZWR1bGluZyBvZiBMUlUgZ2FyYmFnZSBjb2xsZWN0aW9uLiBJdCBoYW5kbGVzIGNoZWNraW5nXG4gKiB3aGV0aGVyIG9yIG5vdCBHQyBpcyBlbmFibGVkLCBhcyB3ZWxsIGFzIHdoaWNoIGRlbGF5IHRvIHVzZSBiZWZvcmUgdGhlIG5leHQgcnVuLlxuICovIGNsYXNzIEtpIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZ2FyYmFnZUNvbGxlY3RvciA9IHQsIHRoaXMuYXN5bmNRdWV1ZSA9IGUsIHRoaXMud2UgPSAhMSwgdGhpcy5fZSA9IG51bGw7XG4gICAgfVxuICAgIHN0YXJ0KHQpIHtcbiAgICAgICAgLTEgIT09IHRoaXMuZ2FyYmFnZUNvbGxlY3Rvci5wYXJhbXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCAmJiB0aGlzLm1lKHQpO1xuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICB0aGlzLl9lICYmICh0aGlzLl9lLmNhbmNlbCgpLCB0aGlzLl9lID0gbnVsbCk7XG4gICAgfVxuICAgIGdldCBzdGFydGVkKCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy5fZTtcbiAgICB9XG4gICAgbWUodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy53ZSA/IDNlNSA6IDZlNDtcbiAgICAgICAgJChcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgYEdhcmJhZ2UgY29sbGVjdGlvbiBzY2hlZHVsZWQgaW4gJHtlfW1zYCksIHRoaXMuX2UgPSB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFmdGVyRGVsYXkoXCJscnVfZ2FyYmFnZV9jb2xsZWN0aW9uXCIgLyogTHJ1R2FyYmFnZUNvbGxlY3Rpb24gKi8gLCBlLCAoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fZSA9IG51bGwsIHRoaXMud2UgPSAhMDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdC5jb2xsZWN0R2FyYmFnZSh0aGlzLmdhcmJhZ2VDb2xsZWN0b3IpO1xuICAgICAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgICAgIFhzKHQpID8gJChcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgXCJJZ25vcmluZyBJbmRleGVkREIgZXJyb3IgZHVyaW5nIGdhcmJhZ2UgY29sbGVjdGlvbjogXCIsIHQpIDogYXdhaXQgQmkodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLm1lKHQpO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKiogSW1wbGVtZW50cyB0aGUgc3RlcHMgZm9yIExSVSBnYXJiYWdlIGNvbGxlY3Rpb24uICovIGNsYXNzIGppIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZ2UgPSB0LCB0aGlzLnBhcmFtcyA9IGU7XG4gICAgfVxuICAgIGNhbGN1bGF0ZVRhcmdldENvdW50KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2UueWUodCkubmV4dCgodCA9PiBNYXRoLmZsb29yKGUgLyAxMDAgKiB0KSkpO1xuICAgIH1cbiAgICBudGhTZXF1ZW5jZU51bWJlcih0LCBlKSB7XG4gICAgICAgIGlmICgwID09PSBlKSByZXR1cm4gR3MucmVzb2x2ZShldC5JKTtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBxaShlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2UuZm9yRWFjaFRhcmdldCh0LCAodCA9PiBuLmRlKHQuc2VxdWVuY2VOdW1iZXIpKSkubmV4dCgoKCkgPT4gdGhpcy5nZS5wZSh0LCAodCA9PiBuLmRlKHQpKSkpKS5uZXh0KCgoKSA9PiBuLm1heFZhbHVlKSk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldHModCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5nZS5yZW1vdmVUYXJnZXRzKHQsIGUsIG4pO1xuICAgIH1cbiAgICByZW1vdmVPcnBoYW5lZERvY3VtZW50cyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdlLnJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzKHQsIGUpO1xuICAgIH1cbiAgICBjb2xsZWN0KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIC0xID09PSB0aGlzLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkID8gKCQoXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIFwiR2FyYmFnZSBjb2xsZWN0aW9uIHNraXBwZWQ7IGRpc2FibGVkXCIpLCBcbiAgICAgICAgR3MucmVzb2x2ZShiaSkpIDogdGhpcy5nZXRDYWNoZVNpemUodCkubmV4dCgobiA9PiBuIDwgdGhpcy5wYXJhbXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCA/ICgkKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBgR2FyYmFnZSBjb2xsZWN0aW9uIHNraXBwZWQ7IENhY2hlIHNpemUgJHtufSBpcyBsb3dlciB0aGFuIHRocmVzaG9sZCAke3RoaXMucGFyYW1zLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGR9YCksIFxuICAgICAgICBiaSkgOiB0aGlzLlRlKHQsIGUpKSk7XG4gICAgfVxuICAgIGdldENhY2hlU2l6ZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdlLmdldENhY2hlU2l6ZSh0KTtcbiAgICB9XG4gICAgVGUodCwgZSkge1xuICAgICAgICBsZXQgbiwgcywgaSwgciwgbywgYywgdTtcbiAgICAgICAgY29uc3QgaCA9IERhdGUubm93KCk7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGN1bGF0ZVRhcmdldENvdW50KHQsIHRoaXMucGFyYW1zLnBlcmNlbnRpbGVUb0NvbGxlY3QpLm5leHQoKGUgPT4gKFxuICAgICAgICAvLyBDYXAgYXQgdGhlIGNvbmZpZ3VyZWQgbWF4XG4gICAgICAgIGUgPiB0aGlzLnBhcmFtcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0ID8gKCQoXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIGBDYXBwaW5nIHNlcXVlbmNlIG51bWJlcnMgdG8gY29sbGVjdCBkb3duIHRvIHRoZSBtYXhpbXVtIG9mICR7dGhpcy5wYXJhbXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdH0gZnJvbSAke2V9YCksIFxuICAgICAgICBzID0gdGhpcy5wYXJhbXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCkgOiBzID0gZSwgciA9IERhdGUubm93KCksIHRoaXMubnRoU2VxdWVuY2VOdW1iZXIodCwgcykpKSkubmV4dCgocyA9PiAobiA9IHMsIFxuICAgICAgICBvID0gRGF0ZS5ub3coKSwgdGhpcy5yZW1vdmVUYXJnZXRzKHQsIG4sIGUpKSkpLm5leHQoKGUgPT4gKGkgPSBlLCBjID0gRGF0ZS5ub3coKSwgXG4gICAgICAgIHRoaXMucmVtb3ZlT3JwaGFuZWREb2N1bWVudHModCwgbikpKSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBpZiAodSA9IERhdGUubm93KCksIGsoKSA8PSBMb2dMZXZlbC5ERUJVRykge1xuICAgICAgICAgICAgICAgICQoXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIGBMUlUgR2FyYmFnZSBDb2xsZWN0aW9uXFxuXFx0Q291bnRlZCB0YXJnZXRzIGluICR7ciAtIGh9bXNcXG5cXHREZXRlcm1pbmVkIGxlYXN0IHJlY2VudGx5IHVzZWQgJHtzfSBpbiBgICsgKG8gLSByKSArIFwibXNcXG5cIiArIGBcXHRSZW1vdmVkICR7aX0gdGFyZ2V0cyBpbiBgICsgKGMgLSBvKSArIFwibXNcXG5cIiArIGBcXHRSZW1vdmVkICR7dH0gZG9jdW1lbnRzIGluIGAgKyAodSAtIGMpICsgXCJtc1xcblwiICsgYFRvdGFsIER1cmF0aW9uOiAke3UgLSBofW1zYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gR3MucmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgZGlkUnVuOiAhMCxcbiAgICAgICAgICAgICAgICBzZXF1ZW5jZU51bWJlcnNDb2xsZWN0ZWQ6IHMsXG4gICAgICAgICAgICAgICAgdGFyZ2V0c1JlbW92ZWQ6IGksXG4gICAgICAgICAgICAgICAgZG9jdW1lbnRzUmVtb3ZlZDogdFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogUHJvdmlkZXMgTFJVIGZ1bmN0aW9uYWxpdHkgZm9yIEluZGV4ZWREQiBwZXJzaXN0ZW5jZS4gKi9cbmNsYXNzIFFpIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZGIgPSB0LCB0aGlzLmdhcmJhZ2VDb2xsZWN0b3IgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IGppKHQsIGUpO1xuICAgICAgICB9KHRoaXMsIGUpO1xuICAgIH1cbiAgICB5ZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLkVlKHQpO1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLmdldFRhcmdldENvdW50KHQpLm5leHQoKHQgPT4gZS5uZXh0KChlID0+IHQgKyBlKSkpKTtcbiAgICB9XG4gICAgRWUodCkge1xuICAgICAgICBsZXQgZSA9IDA7XG4gICAgICAgIHJldHVybiB0aGlzLnBlKHQsICh0ID0+IHtcbiAgICAgICAgICAgIGUrKztcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGUpKTtcbiAgICB9XG4gICAgZm9yRWFjaFRhcmdldCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFRhcmdldENhY2hlKCkuZm9yRWFjaFRhcmdldCh0LCBlKTtcbiAgICB9XG4gICAgcGUodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5JZSh0LCAoKHQsIG4pID0+IGUobikpKTtcbiAgICB9XG4gICAgYWRkUmVmZXJlbmNlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIFdpKHQsIG4pO1xuICAgIH1cbiAgICByZW1vdmVSZWZlcmVuY2UodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gV2kodCwgbik7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldHModCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLnJlbW92ZVRhcmdldHModCwgZSwgbik7XG4gICAgfVxuICAgIG1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIFdpKHQsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgYW55dGhpbmcgd291bGQgcHJldmVudCB0aGlzIGRvY3VtZW50IGZyb20gYmVpbmcgZ2FyYmFnZVxuICAgICAqIGNvbGxlY3RlZCwgZ2l2ZW4gdGhhdCB0aGUgZG9jdW1lbnQgaW4gcXVlc3Rpb24gaXMgbm90IHByZXNlbnQgaW4gYW55XG4gICAgICogdGFyZ2V0cyBhbmQgaGFzIGEgc2VxdWVuY2UgbnVtYmVyIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgdXBwZXIgYm91bmQgZm9yXG4gICAgICogdGhlIGNvbGxlY3Rpb24gcnVuLlxuICAgICAqLyAgICBBZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBsZXQgbiA9ICExO1xuICAgICAgICAgICAgcmV0dXJuIHhpKHQpLlF0KChzID0+IENpKHQsIHMsIGUpLm5leHQoKHQgPT4gKHQgJiYgKG4gPSAhMCksIEdzLnJlc29sdmUoIXQpKSkpKSkubmV4dCgoKCkgPT4gbikpO1xuICAgICAgICB9KHQsIGUpO1xuICAgIH1cbiAgICByZW1vdmVPcnBoYW5lZERvY3VtZW50cyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmRiLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKS5uZXdDaGFuZ2VCdWZmZXIoKSwgcyA9IFtdO1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIHJldHVybiB0aGlzLkllKHQsICgociwgbykgPT4ge1xuICAgICAgICAgICAgaWYgKG8gPD0gZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLkFlKHQsIHIpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWUpIFxuICAgICAgICAgICAgICAgICAgICAvLyBPdXIgc2l6ZSBhY2NvdW50aW5nIHJlcXVpcmVzIHVzIHRvIHJlYWQgYWxsIGRvY3VtZW50cyBiZWZvcmVcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZpbmcgdGhlbS5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkrKywgbi5nZXRFbnRyeSh0LCByKS5uZXh0KCgoKSA9PiAobi5yZW1vdmVFbnRyeShyKSwgTGkodCkuZGVsZXRlKFsgMCwgUnMoci5wYXRoKSBdKSkpKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgcy5wdXNoKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSkubmV4dCgoKCkgPT4gR3Mud2FpdEZvcihzKSkpLm5leHQoKCgpID0+IG4uYXBwbHkodCkpKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLndpdGhTZXF1ZW5jZU51bWJlcih0LmN1cnJlbnRTZXF1ZW5jZU51bWJlcik7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFRhcmdldENhY2hlKCkudXBkYXRlVGFyZ2V0RGF0YSh0LCBuKTtcbiAgICB9XG4gICAgdXBkYXRlTGltYm9Eb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBXaSh0LCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbCBwcm92aWRlZCBmdW5jdGlvbiBmb3IgZWFjaCBkb2N1bWVudCBpbiB0aGUgY2FjaGUgdGhhdCBpcyAnb3JwaGFuZWQnLiBPcnBoYW5lZFxuICAgICAqIG1lYW5zIG5vdCBhIHBhcnQgb2YgYW55IHRhcmdldCwgc28gdGhlIG9ubHkgZW50cnkgaW4gdGhlIHRhcmdldC1kb2N1bWVudCBpbmRleCBmb3JcbiAgICAgKiB0aGF0IGRvY3VtZW50IHdpbGwgYmUgdGhlIHNlbnRpbmVsIHJvdyAodGFyZ2V0SWQgMCksIHdoaWNoIHdpbGwgYWxzbyBoYXZlIHRoZSBzZXF1ZW5jZVxuICAgICAqIG51bWJlciBmb3IgdGhlIGxhc3QgdGltZSB0aGUgZG9jdW1lbnQgd2FzIGFjY2Vzc2VkLlxuICAgICAqLyAgICBJZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBMaSh0KTtcbiAgICAgICAgbGV0IHMsIGkgPSBldC5JO1xuICAgICAgICByZXR1cm4gbi5qdCh7XG4gICAgICAgICAgICBpbmRleDogTXMuZG9jdW1lbnRUYXJnZXRzSW5kZXhcbiAgICAgICAgfSwgKChbdCwgbl0sIHtwYXRoOiByLCBzZXF1ZW5jZU51bWJlcjogb30pID0+IHtcbiAgICAgICAgICAgIDAgPT09IHQgPyAoXG4gICAgICAgICAgICAvLyBpZiBuZXh0VG9SZXBvcnQgaXMgdmFsaWQsIHJlcG9ydCBpdCwgdGhpcyBpcyBhIG5ldyBrZXkgc28gdGhlXG4gICAgICAgICAgICAvLyBsYXN0IG9uZSBtdXN0IG5vdCBiZSBhIG1lbWJlciBvZiBhbnkgdGFyZ2V0cy5cbiAgICAgICAgICAgIGkgIT09IGV0LkkgJiYgZShuZXcgU3QodnMocykpLCBpKSwgXG4gICAgICAgICAgICAvLyBzZXQgbmV4dFRvUmVwb3J0IHRvIGJlIHRoaXMgc2VxdWVuY2UgbnVtYmVyLiBJdCdzIHRoZSBuZXh0IG9uZSB3ZVxuICAgICAgICAgICAgLy8gbWlnaHQgcmVwb3J0LCBpZiB3ZSBkb24ndCBmaW5kIGFueSB0YXJnZXRzIGZvciB0aGlzIGRvY3VtZW50LlxuICAgICAgICAgICAgLy8gTm90ZSB0aGF0IHRoZSBzZXF1ZW5jZSBudW1iZXIgbXVzdCBiZSBkZWZpbmVkIHdoZW4gdGhlIHRhcmdldElkXG4gICAgICAgICAgICAvLyBpcyAwLlxuICAgICAgICAgICAgaSA9IG8sIHMgPSByKSA6IFxuICAgICAgICAgICAgLy8gc2V0IG5leHRUb1JlcG9ydCB0byBiZSBpbnZhbGlkLCB3ZSBrbm93IHdlIGRvbid0IG5lZWQgdG8gcmVwb3J0XG4gICAgICAgICAgICAvLyB0aGlzIG9uZSBzaW5jZSB3ZSBmb3VuZCBhIHRhcmdldCBmb3IgaXQuXG4gICAgICAgICAgICBpID0gZXQuSTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIFNpbmNlIHdlIHJlcG9ydCBzZXF1ZW5jZSBudW1iZXJzIGFmdGVyIGdldHRpbmcgdG8gdGhlIG5leHQga2V5LCB3ZVxuICAgICAgICAgICAgLy8gbmVlZCB0byBjaGVjayBpZiB0aGUgbGFzdCBrZXkgd2UgaXRlcmF0ZWQgb3ZlciB3YXMgYW4gb3JwaGFuZWRcbiAgICAgICAgICAgIC8vIGRvY3VtZW50IGFuZCByZXBvcnQgaXQuXG4gICAgICAgICAgICBpICE9PSBldC5JICYmIGUobmV3IFN0KHZzKHMpKSwgaSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0Q2FjaGVTaXplKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLmdldFNpemUodCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBXaSh0LCBlKSB7XG4gICAgcmV0dXJuIExpKHQpLnB1dChcbiAgICAvKipcbiAqIEByZXR1cm5zIEEgdmFsdWUgc3VpdGFibGUgZm9yIHdyaXRpbmcgYSBzZW50aW5lbCByb3cgaW4gdGhlIHRhcmdldC1kb2N1bWVudFxuICogc3RvcmUuXG4gKi9cbiAgICBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgTXMoMCwgUnModC5wYXRoKSwgZSk7XG4gICAgfShlLCB0LmN1cnJlbnRTZXF1ZW5jZU51bWJlcikpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIG1hcCBpbXBsZW1lbnRhdGlvbiB0aGF0IHVzZXMgb2JqZWN0cyBhcyBrZXlzLiBPYmplY3RzIG11c3QgaGF2ZSBhblxuICogYXNzb2NpYXRlZCBlcXVhbHMgZnVuY3Rpb24gYW5kIG11c3QgYmUgaW1tdXRhYmxlLiBFbnRyaWVzIGluIHRoZSBtYXAgYXJlXG4gKiBzdG9yZWQgdG9nZXRoZXIgd2l0aCB0aGUga2V5IGJlaW5nIHByb2R1Y2VkIGZyb20gdGhlIG1hcEtleUZuLiBUaGlzIG1hcFxuICogYXV0b21hdGljYWxseSBoYW5kbGVzIGNvbGxpc2lvbnMgb2Yga2V5cy5cbiAqLyBjbGFzcyBHaSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLm1hcEtleUZuID0gdCwgdGhpcy5lcXVhbHNGbiA9IGUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGlubmVyIG1hcCBmb3IgYSBrZXkvdmFsdWUgcGFpci4gRHVlIHRvIHRoZSBwb3NzaWJpbGl0eSBvZiBjb2xsaXNpb25zIHdlXG4gICAgICAgICAqIGtlZXAgYSBsaXN0IG9mIGVudHJpZXMgdGhhdCB3ZSBkbyBhIGxpbmVhciBzZWFyY2ggdGhyb3VnaCB0byBmaW5kIGFuIGFjdHVhbFxuICAgICAgICAgKiBtYXRjaC4gTm90ZSB0aGF0IGNvbGxpc2lvbnMgc2hvdWxkIGJlIHJhcmUsIHNvIHdlIHN0aWxsIGV4cGVjdCBuZWFyXG4gICAgICAgICAqIGNvbnN0YW50IHRpbWUgbG9va3VwcyBpbiBwcmFjdGljZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaW5uZXIgPSB7fTtcbiAgICB9XG4gICAgLyoqIEdldCBhIHZhbHVlIGZvciB0aGlzIGtleSwgb3IgdW5kZWZpbmVkIGlmIGl0IGRvZXMgbm90IGV4aXN0LiAqLyAgICBnZXQodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5tYXBLZXlGbih0KSwgbiA9IHRoaXMuaW5uZXJbZV07XG4gICAgICAgIGlmICh2b2lkIDAgIT09IG4pIGZvciAoY29uc3QgW2UsIHNdIG9mIG4pIGlmICh0aGlzLmVxdWFsc0ZuKGUsIHQpKSByZXR1cm4gcztcbiAgICB9XG4gICAgaGFzKHQpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdGhpcy5nZXQodCk7XG4gICAgfVxuICAgIC8qKiBQdXQgdGhpcyBrZXkgYW5kIHZhbHVlIGluIHRoZSBtYXAuICovICAgIHNldCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLm1hcEtleUZuKHQpLCBzID0gdGhpcy5pbm5lcltuXTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gcykge1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBzLmxlbmd0aDsgbisrKSBpZiAodGhpcy5lcXVhbHNGbihzW25dWzBdLCB0KSkgcmV0dXJuIHZvaWQgKHNbbl0gPSBbIHQsIGUgXSk7XG4gICAgICAgICAgICBzLnB1c2goWyB0LCBlIF0pO1xuICAgICAgICB9IGVsc2UgdGhpcy5pbm5lcltuXSA9IFsgWyB0LCBlIF0gXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoaXMga2V5IGZyb20gdGhlIG1hcC4gUmV0dXJucyBhIGJvb2xlYW4gaWYgYW55dGhpbmcgd2FzIGRlbGV0ZWQuXG4gICAgICovICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLm1hcEtleUZuKHQpLCBuID0gdGhpcy5pbm5lcltlXTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gbikgcmV0dXJuICExO1xuICAgICAgICBmb3IgKGxldCBzID0gMDsgcyA8IG4ubGVuZ3RoOyBzKyspIGlmICh0aGlzLmVxdWFsc0ZuKG5bc11bMF0sIHQpKSByZXR1cm4gMSA9PT0gbi5sZW5ndGggPyBkZWxldGUgdGhpcy5pbm5lcltlXSA6IG4uc3BsaWNlKHMsIDEpLCBcbiAgICAgICAgITA7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgZm9yRWFjaCh0KSB7XG4gICAgICAgIGh0KHRoaXMuaW5uZXIsICgoZSwgbikgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBbZSwgc10gb2YgbikgdChlLCBzKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gbHQodGhpcy5pbm5lcik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbi1tZW1vcnkgYnVmZmVyIG9mIGVudHJpZXMgdG8gYmUgd3JpdHRlbiB0byBhIFJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKiBJdCBjYW4gYmUgdXNlZCB0byBiYXRjaCB1cCBhIHNldCBvZiBjaGFuZ2VzIHRvIGJlIHdyaXR0ZW4gdG8gdGhlIGNhY2hlLCBidXRcbiAqIGFkZGl0aW9uYWxseSBzdXBwb3J0cyByZWFkaW5nIGVudHJpZXMgYmFjayB3aXRoIHRoZSBgZ2V0RW50cnkoKWAgbWV0aG9kLFxuICogZmFsbGluZyBiYWNrIHRvIHRoZSB1bmRlcmx5aW5nIFJlbW90ZURvY3VtZW50Q2FjaGUgaWYgbm8gZW50cnkgaXNcbiAqIGJ1ZmZlcmVkLlxuICpcbiAqIEVudHJpZXMgYWRkZWQgdG8gdGhlIGNhY2hlICptdXN0KiBiZSByZWFkIGZpcnN0LiBUaGlzIGlzIHRvIGZhY2lsaXRhdGVcbiAqIGNhbGN1bGF0aW5nIHRoZSBzaXplIGRlbHRhIG9mIHRoZSBwZW5kaW5nIGNoYW5nZXMuXG4gKlxuICogUE9SVElORyBOT1RFOiBUaGlzIGNsYXNzIHdhcyBpbXBsZW1lbnRlZCB0aGVuIHJlbW92ZWQgZnJvbSBvdGhlciBwbGF0Zm9ybXMuXG4gKiBJZiBieXRlLWNvdW50aW5nIGVuZHMgdXAgYmVpbmcgbmVlZGVkIG9uIHRoZSBvdGhlciBwbGF0Zm9ybXMsIGNvbnNpZGVyXG4gKiBwb3J0aW5nIHRoaXMgY2xhc3MgYXMgcGFydCBvZiB0aGF0IGltcGxlbWVudGF0aW9uIHdvcmsuXG4gKi8gY2xhc3Mgemkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBBIG1hcHBpbmcgb2YgZG9jdW1lbnQga2V5IHRvIHRoZSBuZXcgY2FjaGUgZW50cnkgdGhhdCBzaG91bGQgYmUgd3JpdHRlbiAob3IgbnVsbCBpZiBhbnlcbiAgICAgICAgLy8gZXhpc3RpbmcgY2FjaGUgZW50cnkgc2hvdWxkIGJlIHJlbW92ZWQpLlxuICAgICAgICB0aGlzLmNoYW5nZXMgPSBuZXcgR2koKHQgPT4gdC50b1N0cmluZygpKSwgKCh0LCBlKSA9PiB0LmlzRXF1YWwoZSkpKSwgdGhpcy5jaGFuZ2VzQXBwbGllZCA9ICExO1xuICAgIH1cbiAgICBnZXRSZWFkVGltZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmNoYW5nZXMuZ2V0KHQpO1xuICAgICAgICByZXR1cm4gZSA/IGUucmVhZFRpbWUgOiBjdC5taW4oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQnVmZmVycyBhIGBSZW1vdGVEb2N1bWVudENhY2hlLmFkZEVudHJ5KClgIGNhbGwuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIG9ubHkgbW9kaWZ5IGRvY3VtZW50cyB0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIHJldHJpZXZlZCB2aWFcbiAgICAgKiBgZ2V0RW50cnkoKS9nZXRFbnRyaWVzKClgIChlbmZvcmNlZCB2aWEgSW5kZXhlZERicyBgYXBwbHkoKWApLlxuICAgICAqLyAgICBhZGRFbnRyeSh0LCBlKSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpLCB0aGlzLmNoYW5nZXMuc2V0KHQua2V5LCB7XG4gICAgICAgICAgICBkb2N1bWVudDogdCxcbiAgICAgICAgICAgIHJlYWRUaW1lOiBlXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCdWZmZXJzIGEgYFJlbW90ZURvY3VtZW50Q2FjaGUucmVtb3ZlRW50cnkoKWAgY2FsbC5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gb25seSByZW1vdmUgZG9jdW1lbnRzIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gcmV0cmlldmVkIHZpYVxuICAgICAqIGBnZXRFbnRyeSgpL2dldEVudHJpZXMoKWAgKGVuZm9yY2VkIHZpYSBJbmRleGVkRGJzIGBhcHBseSgpYCkuXG4gICAgICovICAgIHJlbW92ZUVudHJ5KHQsIGUgPSBudWxsKSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpLCB0aGlzLmNoYW5nZXMuc2V0KHQsIHtcbiAgICAgICAgICAgIGRvY3VtZW50OiBXdC5uZXdJbnZhbGlkRG9jdW1lbnQodCksXG4gICAgICAgICAgICByZWFkVGltZTogZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgYW4gZW50cnkgaW4gdGhlIGNhY2hlLiBUaGUgYnVmZmVyZWQgY2hhbmdlcyB3aWxsIGZpcnN0IGJlIGNoZWNrZWQsXG4gICAgICogYW5kIGlmIG5vIGJ1ZmZlcmVkIGNoYW5nZSBhcHBsaWVzLCB0aGlzIHdpbGwgZm9yd2FyZCB0b1xuICAgICAqIGBSZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJ5KClgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uIC0gVGhlIHRyYW5zYWN0aW9uIGluIHdoaWNoIHRvIHBlcmZvcm0gYW55IHBlcnNpc3RlbmNlXG4gICAgICogICAgIG9wZXJhdGlvbnMuXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5IC0gVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBUaGUgY2FjaGVkIGRvY3VtZW50IG9yIGFuIGludmFsaWQgZG9jdW1lbnQgaWYgd2UgaGF2ZSBub3RoaW5nXG4gICAgICogY2FjaGVkLlxuICAgICAqLyAgICBnZXRFbnRyeSh0LCBlKSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5jaGFuZ2VzLmdldChlKTtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gbiA/IEdzLnJlc29sdmUobi5kb2N1bWVudCkgOiB0aGlzLmdldEZyb21DYWNoZSh0LCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgc2V2ZXJhbCBlbnRyaWVzIGluIHRoZSBjYWNoZSwgZm9yd2FyZGluZyB0b1xuICAgICAqIGBSZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJ5KClgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uIC0gVGhlIHRyYW5zYWN0aW9uIGluIHdoaWNoIHRvIHBlcmZvcm0gYW55IHBlcnNpc3RlbmNlXG4gICAgICogICAgIG9wZXJhdGlvbnMuXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5cyAtIFRoZSBrZXlzIG9mIHRoZSBlbnRyaWVzIHRvIGxvb2sgdXAuXG4gICAgICogQHJldHVybnMgQSBtYXAgb2YgY2FjaGVkIGRvY3VtZW50cywgaW5kZXhlZCBieSBrZXkuIElmIGFuIGVudHJ5IGNhbm5vdCBiZVxuICAgICAqICAgICBmb3VuZCwgdGhlIGNvcnJlc3BvbmRpbmcga2V5IHdpbGwgYmUgbWFwcGVkIHRvIGFuIGludmFsaWQgZG9jdW1lbnQuXG4gICAgICovICAgIGdldEVudHJpZXModCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRBbGxGcm9tQ2FjaGUodCwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgYnVmZmVyZWQgY2hhbmdlcyB0byB0aGUgdW5kZXJseWluZyBSZW1vdGVEb2N1bWVudENhY2hlLCB1c2luZ1xuICAgICAqIHRoZSBwcm92aWRlZCB0cmFuc2FjdGlvbi5cbiAgICAgKi8gICAgYXBwbHkodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hc3NlcnROb3RBcHBsaWVkKCksIHRoaXMuY2hhbmdlc0FwcGxpZWQgPSAhMCwgdGhpcy5hcHBseUNoYW5nZXModCk7XG4gICAgfVxuICAgIC8qKiBIZWxwZXIgdG8gYXNzZXJ0IHRoaXMuY2hhbmdlcyBpcyBub3QgbnVsbCAgKi8gICAgYXNzZXJ0Tm90QXBwbGllZCgpIHt9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRoZSBSZW1vdGVEb2N1bWVudENhY2hlIGZvciBJbmRleGVkRGIuIFRvIGNvbnN0cnVjdCwgaW52b2tlXG4gKiBgbmV3SW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZSgpYC5cbiAqLyBjbGFzcyBIaSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHNlcmlhbGl6ZXIgLSBUaGUgZG9jdW1lbnQgc2VyaWFsaXplci5cbiAgICAgKiBAcGFyYW0gaW5kZXhNYW5hZ2VyIC0gVGhlIHF1ZXJ5IGluZGV4ZXMgdGhhdCBuZWVkIHRvIGJlIG1haW50YWluZWQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmsgPSB0LCB0aGlzLkp0ID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyB0aGUgc3VwcGxpZWQgZW50cmllcyB0byB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBBbGwgY2FsbHMgb2YgYGFkZEVudHJ5YCBhcmUgcmVxdWlyZWQgdG8gZ28gdGhyb3VnaCB0aGUgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgIHRvIGVuc3VyZSBwcm9wZXIgYWNjb3VudGluZyBvZiBtZXRhZGF0YS5cbiAgICAgKi8gICAgYWRkRW50cnkodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gWGkodCkucHV0KFppKGUpLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIGRvY3VtZW50IGZyb20gdGhlIGNhY2hlLlxuICAgICAqXG4gICAgICogQWxsIGNhbGxzIG9mIGByZW1vdmVFbnRyeWAgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxuICAgICAqIHJldHVybmVkIGJ5IGBuZXdDaGFuZ2VCdWZmZXIoKWAgdG8gZW5zdXJlIHByb3BlciBhY2NvdW50aW5nIG9mIG1ldGFkYXRhLlxuICAgICAqLyAgICByZW1vdmVFbnRyeSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBYaSh0KSwgcyA9IFppKGUpO1xuICAgICAgICByZXR1cm4gbi5kZWxldGUocyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGN1cnJlbnQgY2FjaGUgc2l6ZS5cbiAgICAgKlxuICAgICAqIENhbGxlcnMgdG8gYGFkZEVudHJ5KClgIGFuZCBgcmVtb3ZlRW50cnkoKWAgKm11c3QqIGNhbGwgdGhpcyBhZnRlcndhcmRzIHRvIHVwZGF0ZSB0aGVcbiAgICAgKiBjYWNoZSdzIG1ldGFkYXRhLlxuICAgICAqLyAgICB1cGRhdGVNZXRhZGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE1ldGFkYXRhKHQpLm5leHQoKG4gPT4gKG4uYnl0ZVNpemUgKz0gZSwgdGhpcy5SZSh0LCBuKSkpKTtcbiAgICB9XG4gICAgZ2V0RW50cnkodCwgZSkge1xuICAgICAgICByZXR1cm4gWGkodCkuZ2V0KFppKGUpKS5uZXh0KCh0ID0+IHRoaXMuUGUoZSwgdCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgYW4gZW50cnkgaW4gdGhlIGNhY2hlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5IC0gVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBUaGUgY2FjaGVkIGRvY3VtZW50IGVudHJ5IGFuZCBpdHMgc2l6ZS5cbiAgICAgKi8gICAgYmUodCwgZSkge1xuICAgICAgICByZXR1cm4gWGkodCkuZ2V0KFppKGUpKS5uZXh0KCh0ID0+ICh7XG4gICAgICAgICAgICBkb2N1bWVudDogdGhpcy5QZShlLCB0KSxcbiAgICAgICAgICAgIHNpemU6IFNpKHQpXG4gICAgICAgIH0pKSk7XG4gICAgfVxuICAgIGdldEVudHJpZXModCwgZSkge1xuICAgICAgICBsZXQgbiA9IEFuKCk7XG4gICAgICAgIHJldHVybiB0aGlzLnZlKHQsIGUsICgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMuUGUodCwgZSk7XG4gICAgICAgICAgICBuID0gbi5pbnNlcnQodCwgcyk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvb2tzIHVwIHNldmVyYWwgZW50cmllcyBpbiB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRLZXlzIC0gVGhlIHNldCBvZiBrZXlzIGVudHJpZXMgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBBIG1hcCBvZiBkb2N1bWVudHMgaW5kZXhlZCBieSBrZXkgYW5kIGEgbWFwIG9mIHNpemVzIGluZGV4ZWQgYnlcbiAgICAgKiAgICAga2V5ICh6ZXJvIGlmIHRoZSBkb2N1bWVudCBkb2VzIG5vdCBleGlzdCkuXG4gICAgICovICAgIFZlKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBBbigpLCBzID0gbmV3IGduKFN0LmNvbXBhcmF0b3IpO1xuICAgICAgICByZXR1cm4gdGhpcy52ZSh0LCBlLCAoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLlBlKHQsIGUpO1xuICAgICAgICAgICAgbiA9IG4uaW5zZXJ0KHQsIGkpLCBzID0gcy5pbnNlcnQodCwgU2koZSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gKHtcbiAgICAgICAgICAgIGRvY3VtZW50czogbixcbiAgICAgICAgICAgIFNlOiBzXG4gICAgICAgIH0pKSk7XG4gICAgfVxuICAgIHZlKHQsIGUsIG4pIHtcbiAgICAgICAgaWYgKGUuaXNFbXB0eSgpKSByZXR1cm4gR3MucmVzb2x2ZSgpO1xuICAgICAgICBjb25zdCBzID0gSURCS2V5UmFuZ2UuYm91bmQoZS5maXJzdCgpLnBhdGgudG9BcnJheSgpLCBlLmxhc3QoKS5wYXRoLnRvQXJyYXkoKSksIGkgPSBlLmdldEl0ZXJhdG9yKCk7XG4gICAgICAgIGxldCByID0gaS5nZXROZXh0KCk7XG4gICAgICAgIHJldHVybiBYaSh0KS5qdCh7XG4gICAgICAgICAgICByYW5nZTogc1xuICAgICAgICB9LCAoKHQsIGUsIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG8gPSBTdC5mcm9tU2VnbWVudHModCk7XG4gICAgICAgICAgICAvLyBHbyB0aHJvdWdoIGtleXMgbm90IGZvdW5kIGluIGNhY2hlLlxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7ciAmJiBTdC5jb21wYXJhdG9yKHIsIG8pIDwgMDsgKSBuKHIsIG51bGwpLCByID0gaS5nZXROZXh0KCk7XG4gICAgICAgICAgICByICYmIHIuaXNFcXVhbChvKSAmJiAoXG4gICAgICAgICAgICAvLyBLZXkgZm91bmQgaW4gY2FjaGUuXG4gICAgICAgICAgICBuKHIsIGUpLCByID0gaS5oYXNOZXh0KCkgPyBpLmdldE5leHQoKSA6IG51bGwpLCBcbiAgICAgICAgICAgIC8vIFNraXAgdG8gdGhlIG5leHQga2V5IChpZiB0aGVyZSBpcyBvbmUpLlxuICAgICAgICAgICAgciA/IHMuTHQoci5wYXRoLnRvQXJyYXkoKSkgOiBzLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIFRoZSByZXN0IG9mIHRoZSBrZXlzIGFyZSBub3QgaW4gdGhlIGNhY2hlLiBPbmUgY2FzZSB3aGVyZSBgaXRlcmF0ZWBcbiAgICAgICAgICAgIC8vIGFib3ZlIHdvbid0IGdvIHRocm91Z2ggdGhlbSBpcyB3aGVuIHRoZSBjYWNoZSBpcyBlbXB0eS5cbiAgICAgICAgICAgIGZvciAoO3I7ICkgbihyLCBudWxsKSwgciA9IGkuaGFzTmV4dCgpID8gaS5nZXROZXh0KCkgOiBudWxsO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbikge1xuICAgICAgICBsZXQgcyA9IEFuKCk7XG4gICAgICAgIGNvbnN0IGkgPSBlLnBhdGgubGVuZ3RoICsgMSwgciA9IHt9O1xuICAgICAgICBpZiAobi5pc0VxdWFsKGN0Lm1pbigpKSkge1xuICAgICAgICAgICAgLy8gRG9jdW1lbnRzIGFyZSBvcmRlcmVkIGJ5IGtleSwgc28gd2UgY2FuIHVzZSBhIHByZWZpeCBzY2FuIHRvIG5hcnJvd1xuICAgICAgICAgICAgLy8gZG93biB0aGUgZG9jdW1lbnRzIHdlIG5lZWQgdG8gbWF0Y2ggdGhlIHF1ZXJ5IGFnYWluc3QuXG4gICAgICAgICAgICBjb25zdCB0ID0gZS5wYXRoLnRvQXJyYXkoKTtcbiAgICAgICAgICAgIHIucmFuZ2UgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gRXhlY3V0ZSBhbiBpbmRleC1mcmVlIHF1ZXJ5IGFuZCBmaWx0ZXIgYnkgcmVhZCB0aW1lLiBUaGlzIGlzIHNhZmVcbiAgICAgICAgICAgIC8vIHNpbmNlIGFsbCBkb2N1bWVudCBjaGFuZ2VzIHRvIHF1ZXJpZXMgdGhhdCBoYXZlIGFcbiAgICAgICAgICAgIC8vIGxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gKGBzaW5jZVJlYWRUaW1lYCkgaGF2ZSBhIHJlYWQgdGltZSBzZXQuXG4gICAgICAgICAgICBjb25zdCB0ID0gZS5wYXRoLnRvQXJyYXkoKSwgcyA9IGxpKG4pO1xuICAgICAgICAgICAgci5yYW5nZSA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoWyB0LCBzIF0sIFxuICAgICAgICAgICAgLyogb3Blbj0gKi8gITApLCByLmluZGV4ID0gJHMuY29sbGVjdGlvblJlYWRUaW1lSW5kZXg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFhpKHQpLmp0KHIsICgodCwgbiwgcikgPT4ge1xuICAgICAgICAgICAgLy8gVGhlIHF1ZXJ5IGlzIGFjdHVhbGx5IHJldHVybmluZyBhbnkgcGF0aCB0aGF0IHN0YXJ0cyB3aXRoIHRoZSBxdWVyeVxuICAgICAgICAgICAgLy8gcGF0aCBwcmVmaXggd2hpY2ggbWF5IGluY2x1ZGUgZG9jdW1lbnRzIGluIHN1YmNvbGxlY3Rpb25zLiBGb3JcbiAgICAgICAgICAgIC8vIGV4YW1wbGUsIGEgcXVlcnkgb24gJ3Jvb21zJyB3aWxsIHJldHVybiByb29tcy9hYmMvbWVzc2FnZXMveHl4IGJ1dCB3ZVxuICAgICAgICAgICAgLy8gc2hvdWxkbid0IG1hdGNoIGl0LiBGaXggdGhpcyBieSBkaXNjYXJkaW5nIHJvd3Mgd2l0aCBkb2N1bWVudCBrZXlzXG4gICAgICAgICAgICAvLyBtb3JlIHRoYW4gb25lIHNlZ21lbnQgbG9uZ2VyIHRoYW4gdGhlIHF1ZXJ5IHBhdGguXG4gICAgICAgICAgICBpZiAodC5sZW5ndGggIT09IGkpIHJldHVybjtcbiAgICAgICAgICAgIGNvbnN0IG8gPSB1aSh0aGlzLmssIG4pO1xuICAgICAgICAgICAgZS5wYXRoLmlzUHJlZml4T2Yoby5rZXkucGF0aCkgPyBTZShlLCBvKSAmJiAocyA9IHMuaW5zZXJ0KG8ua2V5LCBvKSkgOiByLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHMpKTtcbiAgICB9XG4gICAgbmV3Q2hhbmdlQnVmZmVyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBKaSh0aGlzLCAhIXQgJiYgdC50cmFja1JlbW92YWxzKTtcbiAgICB9XG4gICAgZ2V0U2l6ZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE1ldGFkYXRhKHQpLm5leHQoKHQgPT4gdC5ieXRlU2l6ZSkpO1xuICAgIH1cbiAgICBnZXRNZXRhZGF0YSh0KSB7XG4gICAgICAgIHJldHVybiBZaSh0KS5nZXQoRnMua2V5KS5uZXh0KCh0ID0+IChCKCEhdCksIHQpKSk7XG4gICAgfVxuICAgIFJlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIFlpKHQpLnB1dChGcy5rZXksIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWNvZGVzIGByZW1vdGVEb2NgIGFuZCByZXR1cm5zIHRoZSBkb2N1bWVudCAob3IgbnVsbCwgaWYgdGhlIGRvY3VtZW50XG4gICAgICogY29ycmVzcG9uZHMgdG8gdGhlIGZvcm1hdCB1c2VkIGZvciBzZW50aW5lbCBkZWxldGVzKS5cbiAgICAgKi8gICAgUGUodCwgZSkge1xuICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHVpKHRoaXMuaywgZSk7XG4gICAgICAgICAgICAvLyBXaGV0aGVyIHRoZSBkb2N1bWVudCBpcyBhIHNlbnRpbmVsIHJlbW92YWwgYW5kIHNob3VsZCBvbmx5IGJlIHVzZWQgaW4gdGhlXG4gICAgICAgICAgICAvLyBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0LmlzTm9Eb2N1bWVudCgpICYmIHQudmVyc2lvbi5pc0VxdWFsKGN0Lm1pbigpKSkpIHJldHVybiB0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBXdC5uZXdJbnZhbGlkRG9jdW1lbnQodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqXG4gKiBAcGFyYW0gc2VyaWFsaXplciAtIFRoZSBkb2N1bWVudCBzZXJpYWxpemVyLlxuICogQHBhcmFtIGluZGV4TWFuYWdlciAtIFRoZSBxdWVyeSBpbmRleGVzIHRoYXQgbmVlZCB0byBiZSBtYWludGFpbmVkLlxuICovXG4vKipcbiAqIEhhbmRsZXMgdGhlIGRldGFpbHMgb2YgYWRkaW5nIGFuZCB1cGRhdGluZyBkb2N1bWVudHMgaW4gdGhlIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKlxuICogVW5saWtlIHRoZSBNZW1vcnlSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciwgdGhlIEluZGV4ZWREYiBpbXBsZW1lbnRhdGlvbiBjb21wdXRlcyB0aGUgc2l6ZVxuICogZGVsdGEgZm9yIGFsbCBzdWJtaXR0ZWQgY2hhbmdlcy4gVGhpcyBhdm9pZHMgaGF2aW5nIHRvIHJlLXJlYWQgYWxsIGRvY3VtZW50cyBmcm9tIEluZGV4ZWREYlxuICogd2hlbiB3ZSBhcHBseSB0aGUgY2hhbmdlcy5cbiAqL1xuY2xhc3MgSmkgZXh0ZW5kcyB6aSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGRvY3VtZW50Q2FjaGUgLSBUaGUgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZSB0byBhcHBseSB0aGUgY2hhbmdlcyB0by5cbiAgICAgKiBAcGFyYW0gdHJhY2tSZW1vdmFscyAtIFdoZXRoZXIgdG8gY3JlYXRlIHNlbnRpbmVsIGRlbGV0ZXMgdGhhdCBjYW4gYmUgdHJhY2tlZCBieVxuICAgICAqIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWAuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLkRlID0gdCwgdGhpcy50cmFja1JlbW92YWxzID0gZSwgXG4gICAgICAgIC8vIEEgbWFwIG9mIGRvY3VtZW50IHNpemVzIHByaW9yIHRvIGFwcGx5aW5nIHRoZSBjaGFuZ2VzIGluIHRoaXMgYnVmZmVyLlxuICAgICAgICB0aGlzLkNlID0gbmV3IEdpKCh0ID0+IHQudG9TdHJpbmcoKSksICgodCwgZSkgPT4gdC5pc0VxdWFsKGUpKSk7XG4gICAgfVxuICAgIGFwcGx5Q2hhbmdlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgbGV0IG4gPSAwLCBzID0gbmV3IFRuKCgodCwgZSkgPT4gaXQodC5jYW5vbmljYWxTdHJpbmcoKSwgZS5jYW5vbmljYWxTdHJpbmcoKSkpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhbmdlcy5mb3JFYWNoKCgoaSwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgbyA9IHRoaXMuQ2UuZ2V0KGkpO1xuICAgICAgICAgICAgaWYgKHIuZG9jdW1lbnQuaXNWYWxpZERvY3VtZW50KCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhID0gaGkodGhpcy5EZS5rLCByLmRvY3VtZW50LCB0aGlzLmdldFJlYWRUaW1lKGkpKTtcbiAgICAgICAgICAgICAgICBzID0gcy5hZGQoaS5wYXRoLnBvcExhc3QoKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYyA9IFNpKGEpO1xuICAgICAgICAgICAgICAgIG4gKz0gYyAtIG8sIGUucHVzaCh0aGlzLkRlLmFkZEVudHJ5KHQsIGksIGEpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobiAtPSBvLCB0aGlzLnRyYWNrUmVtb3ZhbHMpIHtcbiAgICAgICAgICAgICAgICAvLyBJbiBvcmRlciB0byB0cmFjayByZW1vdmFscywgd2Ugc3RvcmUgYSBcInNlbnRpbmVsIGRlbGV0ZVwiIGluIHRoZVxuICAgICAgICAgICAgICAgIC8vIFJlbW90ZURvY3VtZW50Q2FjaGUuIFRoaXMgZW50cnkgaXMgcmVwcmVzZW50ZWQgYnkgYSBOb0RvY3VtZW50XG4gICAgICAgICAgICAgICAgLy8gd2l0aCBhIHZlcnNpb24gb2YgMCBhbmQgaWdub3JlZCBieSBgbWF5YmVEZWNvZGVEb2N1bWVudCgpYCBidXRcbiAgICAgICAgICAgICAgICAvLyBwcmVzZXJ2ZWQgaW4gYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYC5cbiAgICAgICAgICAgICAgICBjb25zdCBuID0gaGkodGhpcy5EZS5rLCBXdC5uZXdOb0RvY3VtZW50KGksIGN0Lm1pbigpKSwgdGhpcy5nZXRSZWFkVGltZShpKSk7XG4gICAgICAgICAgICAgICAgZS5wdXNoKHRoaXMuRGUuYWRkRW50cnkodCwgaSwgbikpO1xuICAgICAgICAgICAgfSBlbHNlIGUucHVzaCh0aGlzLkRlLnJlbW92ZUVudHJ5KHQsIGkpKTtcbiAgICAgICAgfSkpLCBzLmZvckVhY2goKG4gPT4ge1xuICAgICAgICAgICAgZS5wdXNoKHRoaXMuRGUuSnQuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodCwgbikpO1xuICAgICAgICB9KSksIGUucHVzaCh0aGlzLkRlLnVwZGF0ZU1ldGFkYXRhKHQsIG4pKSwgR3Mud2FpdEZvcihlKTtcbiAgICB9XG4gICAgZ2V0RnJvbUNhY2hlKHQsIGUpIHtcbiAgICAgICAgLy8gUmVjb3JkIHRoZSBzaXplIG9mIGV2ZXJ5dGhpbmcgd2UgbG9hZCBmcm9tIHRoZSBjYWNoZSBzbyB3ZSBjYW4gY29tcHV0ZSBhIGRlbHRhIGxhdGVyLlxuICAgICAgICByZXR1cm4gdGhpcy5EZS5iZSh0LCBlKS5uZXh0KCh0ID0+ICh0aGlzLkNlLnNldChlLCB0LnNpemUpLCB0LmRvY3VtZW50KSkpO1xuICAgIH1cbiAgICBnZXRBbGxGcm9tQ2FjaGUodCwgZSkge1xuICAgICAgICAvLyBSZWNvcmQgdGhlIHNpemUgb2YgZXZlcnl0aGluZyB3ZSBsb2FkIGZyb20gdGhlIGNhY2hlIHNvIHdlIGNhbiBjb21wdXRlXG4gICAgICAgIC8vIGEgZGVsdGEgbGF0ZXIuXG4gICAgICAgIHJldHVybiB0aGlzLkRlLlZlKHQsIGUpLm5leHQoKCh7ZG9jdW1lbnRzOiB0LCBTZTogZX0pID0+IChcbiAgICAgICAgLy8gTm90ZTogYGdldEFsbEZyb21DYWNoZWAgcmV0dXJucyB0d28gbWFwcyBpbnN0ZWFkIG9mIGEgc2luZ2xlIG1hcCBmcm9tXG4gICAgICAgIC8vIGtleXMgdG8gYERvY3VtZW50U2l6ZUVudHJ5YHMuIFRoaXMgaXMgdG8gYWxsb3cgcmV0dXJuaW5nIHRoZVxuICAgICAgICAvLyBgTXV0YWJsZURvY3VtZW50TWFwYCBkaXJlY3RseSwgd2l0aG91dCBhIGNvbnZlcnNpb24uXG4gICAgICAgIGUuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuQ2Uuc2V0KHQsIGUpO1xuICAgICAgICB9KSksIHQpKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBZaSh0KSB7XG4gICAgcmV0dXJuIGlpKHQsIEZzLnN0b3JlKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIHJlbW90ZURvY3VtZW50cyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gWGkodCkge1xuICAgIHJldHVybiBpaSh0LCAkcy5zdG9yZSk7XG59XG5cbmZ1bmN0aW9uIFppKHQpIHtcbiAgICByZXR1cm4gdC5wYXRoLnRvQXJyYXkoKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBQZXJmb3JtcyBkYXRhYmFzZSBjcmVhdGlvbiBhbmQgc2NoZW1hIHVwZ3JhZGVzLiAqLyBjbGFzcyB0ciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmsgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBkYXRhYmFzZSBjcmVhdGlvbiBhbmQgc2NoZW1hIHVwZ3JhZGVzLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IGluIHByb2R1Y3Rpb24sIHRoaXMgbWV0aG9kIGlzIG9ubHkgZXZlciB1c2VkIHRvIHVwZ3JhZGUgdGhlIHNjaGVtYVxuICAgICAqIHRvIFNDSEVNQV9WRVJTSU9OLiBEaWZmZXJlbnQgdmFsdWVzIG9mIHRvVmVyc2lvbiBhcmUgb25seSB1c2VkIGZvciB0ZXN0aW5nXG4gICAgICogYW5kIGxvY2FsIGZlYXR1cmUgZGV2ZWxvcG1lbnQuXG4gICAgICovICAgIE50KHQsIGUsIG4sIHMpIHtcbiAgICAgICAgQihuIDwgcyAmJiBuID49IDAgJiYgcyA8PSAxMSk7XG4gICAgICAgIGNvbnN0IGkgPSBuZXcgenMoXCJjcmVhdGVPclVwZ3JhZGVcIiwgZSk7XG4gICAgICAgIG4gPCAxICYmIHMgPj0gMSAmJiAoZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShTcy5zdG9yZSk7XG4gICAgICAgIH0odCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoRHMuc3RvcmUsIHtcbiAgICAgICAgICAgICAgICBrZXlQYXRoOiBEcy5rZXlQYXRoXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoQ3Muc3RvcmUsIHtcbiAgICAgICAgICAgICAgICBrZXlQYXRoOiBDcy5rZXlQYXRoLFxuICAgICAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6ICEwXG4gICAgICAgICAgICB9KS5jcmVhdGVJbmRleChDcy51c2VyTXV0YXRpb25zSW5kZXgsIENzLnVzZXJNdXRhdGlvbnNLZXlQYXRoLCB7XG4gICAgICAgICAgICAgICAgdW5pcXVlOiAhMFxuICAgICAgICAgICAgfSksIHQuY3JlYXRlT2JqZWN0U3RvcmUoTnMuc3RvcmUpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogVXBncmFkZSBmdW5jdGlvbiB0byBtaWdyYXRlIHRoZSAnbXV0YXRpb25zJyBzdG9yZSBmcm9tIFYxIHRvIFYzLiBMb2Fkc1xuICogYW5kIHJld3JpdGVzIGFsbCBkYXRhLlxuICovICh0KSwgZXIodCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoJHMuc3RvcmUpO1xuICAgICAgICB9KHQpKTtcbiAgICAgICAgLy8gTWlncmF0aW9uIDIgdG8gcG9wdWxhdGUgdGhlIHRhcmdldEdsb2JhbCBvYmplY3Qgbm8gbG9uZ2VyIG5lZWRlZCBzaW5jZVxuICAgICAgICAvLyBtaWdyYXRpb24gMyB1bmNvbmRpdGlvbmFsbHkgY2xlYXJzIGl0LlxuICAgICAgICAgICAgICAgIGxldCByID0gR3MucmVzb2x2ZSgpO1xuICAgICAgICByZXR1cm4gbiA8IDMgJiYgcyA+PSAzICYmIChcbiAgICAgICAgLy8gQnJhbmQgbmV3IGNsaWVudHMgZG9uJ3QgbmVlZCB0byBkcm9wIGFuZCByZWNyZWF0ZS0tb25seSBjbGllbnRzIHRoYXRcbiAgICAgICAgLy8gcG90ZW50aWFsbHkgaGF2ZSBjb3JydXB0IGRhdGEuXG4gICAgICAgIDAgIT09IG4gJiYgKCFmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICB0LmRlbGV0ZU9iamVjdFN0b3JlKE1zLnN0b3JlKSwgdC5kZWxldGVPYmplY3RTdG9yZShPcy5zdG9yZSksIHQuZGVsZXRlT2JqZWN0U3RvcmUoTHMuc3RvcmUpO1xuICAgICAgICB9KHQpLCBlcih0KSksIHIgPSByLm5leHQoKCgpID0+IFxuICAgICAgICAvKipcbiAqIENyZWF0ZXMgdGhlIHRhcmdldCBnbG9iYWwgc2luZ2xldG9uIHJvdy5cbiAqXG4gKiBAcGFyYW0gdHhuIC0gVGhlIHZlcnNpb24gdXBncmFkZSB0cmFuc2FjdGlvbiBmb3IgaW5kZXhlZGRiXG4gKi9cbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQuc3RvcmUoTHMuc3RvcmUpLCBuID0gbmV3IExzKFxuICAgICAgICAgICAgLypoaWdoZXN0VGFyZ2V0SWQ9Ki8gMCwgXG4gICAgICAgICAgICAvKmxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcj0qLyAwLCBjdC5taW4oKS50b1RpbWVzdGFtcCgpLCBcbiAgICAgICAgICAgIC8qdGFyZ2V0Q291bnQ9Ki8gMCk7XG4gICAgICAgICAgICByZXR1cm4gZS5wdXQoTHMua2V5LCBuKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIENyZWF0ZXMgaW5kaWNlcyBvbiB0aGUgUmVtb3RlRG9jdW1lbnRzIHN0b3JlIHVzZWQgZm9yIGJvdGggbXVsdGktdGFiXG4gKiBhbmQgSW5kZXgtRnJlZSBxdWVyaWVzLlxuICovIChpKSkpKSwgbiA8IDQgJiYgcyA+PSA0ICYmICgwICE9PSBuICYmIChcbiAgICAgICAgLy8gU2NoZW1hIHZlcnNpb24gMyB1c2VzIGF1dG8tZ2VuZXJhdGVkIGtleXMgdG8gZ2VuZXJhdGUgZ2xvYmFsbHkgdW5pcXVlXG4gICAgICAgIC8vIG11dGF0aW9uIGJhdGNoIElEcyAodGhpcyB3YXMgcHJldmlvdXNseSBlbnN1cmVkIGludGVybmFsbHkgYnkgdGhlXG4gICAgICAgIC8vIGNsaWVudCkuIFRvIG1pZ3JhdGUgdG8gdGhlIG5ldyBzY2hlbWEsIHdlIGhhdmUgdG8gcmVhZCBhbGwgbXV0YXRpb25zXG4gICAgICAgIC8vIGFuZCB3cml0ZSB0aGVtIGJhY2sgb3V0LiBXZSBwcmVzZXJ2ZSB0aGUgZXhpc3RpbmcgYmF0Y2ggSURzIHRvIGd1YXJhbnRlZVxuICAgICAgICAvLyBjb25zaXN0ZW5jeSB3aXRoIG90aGVyIG9iamVjdCBzdG9yZXMuIEFueSBmdXJ0aGVyIG11dGF0aW9uIGJhdGNoIElEcyB3aWxsXG4gICAgICAgIC8vIGJlIGF1dG8tZ2VuZXJhdGVkLlxuICAgICAgICByID0gci5uZXh0KCgoKSA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gZS5zdG9yZShDcy5zdG9yZSkuQnQoKS5uZXh0KChuID0+IHtcbiAgICAgICAgICAgICAgICB0LmRlbGV0ZU9iamVjdFN0b3JlKENzLnN0b3JlKTtcbiAgICAgICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKENzLnN0b3JlLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IENzLmtleVBhdGgsXG4gICAgICAgICAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6ICEwXG4gICAgICAgICAgICAgICAgfSkuY3JlYXRlSW5kZXgoQ3MudXNlck11dGF0aW9uc0luZGV4LCBDcy51c2VyTXV0YXRpb25zS2V5UGF0aCwge1xuICAgICAgICAgICAgICAgICAgICB1bmlxdWU6ICEwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IGUuc3RvcmUoQ3Muc3RvcmUpLCBpID0gbi5tYXAoKHQgPT4gcy5wdXQodCkpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gR3Mud2FpdEZvcihpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSh0LCBpKSkpKSwgciA9IHIubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFVzLnN0b3JlLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IFVzLmtleVBhdGhcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0odCk7XG4gICAgICAgIH0pKSksIG4gPCA1ICYmIHMgPj0gNSAmJiAociA9IHIubmV4dCgoKCkgPT4gdGhpcy5OZShpKSkpKSwgbiA8IDYgJiYgcyA+PSA2ICYmIChyID0gci5uZXh0KCgoKSA9PiAoZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShGcy5zdG9yZSk7XG4gICAgICAgIH0odCksIHRoaXMua2UoaSkpKSkpLCBuIDwgNyAmJiBzID49IDcgJiYgKHIgPSByLm5leHQoKCgpID0+IHRoaXMueGUoaSkpKSksIG4gPCA4ICYmIHMgPj0gOCAmJiAociA9IHIubmV4dCgoKCkgPT4gdGhpcy4kZSh0LCBpKSkpKSwgXG4gICAgICAgIG4gPCA5ICYmIHMgPj0gOSAmJiAociA9IHIubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgLy8gTXVsdGktVGFiIHVzZWQgdG8gbWFuYWdlIGl0cyBvd24gY2hhbmdlbG9nLCBidXQgdGhpcyBoYXMgYmVlbiBtb3ZlZFxuICAgICAgICAgICAgLy8gdG8gdGhlIERiUmVtb3RlRG9jdW1lbnQgb2JqZWN0IHN0b3JlIGl0c2VsZi4gU2luY2UgdGhlIHByZXZpb3VzIGNoYW5nZVxuICAgICAgICAgICAgLy8gbG9nIG9ubHkgY29udGFpbmVkIHRyYW5zaWVudCBkYXRhLCB3ZSBjYW4gZHJvcCBpdHMgb2JqZWN0IHN0b3JlLlxuICAgICAgICAgICAgIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICB0Lm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoXCJyZW1vdGVEb2N1bWVudENoYW5nZXNcIikgJiYgdC5kZWxldGVPYmplY3RTdG9yZShcInJlbW90ZURvY3VtZW50Q2hhbmdlc1wiKTtcbiAgICAgICAgICAgIH0odCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdC5vYmplY3RTdG9yZSgkcy5zdG9yZSk7XG4gICAgICAgICAgICAgICAgZS5jcmVhdGVJbmRleCgkcy5yZWFkVGltZUluZGV4LCAkcy5yZWFkVGltZUluZGV4UGF0aCwge1xuICAgICAgICAgICAgICAgICAgICB1bmlxdWU6ICExXG4gICAgICAgICAgICAgICAgfSksIGUuY3JlYXRlSW5kZXgoJHMuY29sbGVjdGlvblJlYWRUaW1lSW5kZXgsICRzLmNvbGxlY3Rpb25SZWFkVGltZUluZGV4UGF0aCwge1xuICAgICAgICAgICAgICAgICAgICB1bmlxdWU6ICExXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KGUpO1xuICAgICAgICB9KSkpLCBuIDwgMTAgJiYgcyA+PSAxMCAmJiAociA9IHIubmV4dCgoKCkgPT4gdGhpcy5GZShpKSkpKSwgbiA8IDExICYmIHMgPj0gMTEgJiYgKHIgPSByLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICFmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShxcy5zdG9yZSwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBxcy5rZXlQYXRoXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KHQpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShLcy5zdG9yZSwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBLcy5rZXlQYXRoXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAodCk7XG4gICAgICAgIH0pKSksIHI7XG4gICAgfVxuICAgIGtlKHQpIHtcbiAgICAgICAgbGV0IGUgPSAwO1xuICAgICAgICByZXR1cm4gdC5zdG9yZSgkcy5zdG9yZSkuanQoKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBlICs9IFNpKG4pO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBGcyhlKTtcbiAgICAgICAgICAgIHJldHVybiB0LnN0b3JlKEZzLnN0b3JlKS5wdXQoRnMua2V5LCBuKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBOZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LnN0b3JlKERzLnN0b3JlKSwgbiA9IHQuc3RvcmUoQ3Muc3RvcmUpO1xuICAgICAgICByZXR1cm4gZS5CdCgpLm5leHQoKGUgPT4gR3MuZm9yRWFjaChlLCAoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gSURCS2V5UmFuZ2UuYm91bmQoWyBlLnVzZXJJZCwgLTEgXSwgWyBlLnVzZXJJZCwgZS5sYXN0QWNrbm93bGVkZ2VkQmF0Y2hJZCBdKTtcbiAgICAgICAgICAgIHJldHVybiBuLkJ0KENzLnVzZXJNdXRhdGlvbnNJbmRleCwgcykubmV4dCgobiA9PiBHcy5mb3JFYWNoKG4sIChuID0+IHtcbiAgICAgICAgICAgICAgICBCKG4udXNlcklkID09PSBlLnVzZXJJZCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IF9pKHRoaXMuaywgbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFZpKHQsIGUudXNlcklkLCBzKS5uZXh0KCgoKSA9PiB7fSkpO1xuICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgIH0pKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbnN1cmVzIHRoYXQgZXZlcnkgZG9jdW1lbnQgaW4gdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZSBoYXMgYSBjb3JyZXNwb25kaW5nIHNlbnRpbmVsIHJvd1xuICAgICAqIHdpdGggYSBzZXF1ZW5jZSBudW1iZXIuIE1pc3Npbmcgcm93cyBhcmUgZ2l2ZW4gdGhlIG1vc3QgcmVjZW50bHkgdXNlZCBzZXF1ZW5jZSBudW1iZXIuXG4gICAgICovICAgIHhlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuc3RvcmUoTXMuc3RvcmUpLCBuID0gdC5zdG9yZSgkcy5zdG9yZSk7XG4gICAgICAgIHJldHVybiB0LnN0b3JlKExzLnN0b3JlKS5nZXQoTHMua2V5KS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiBuLmp0KCgobiwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgZHQobiksIG8gPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbIDAsIFJzKHQpIF07XG4gICAgICAgICAgICAgICAgfShyKTtcbiAgICAgICAgICAgICAgICBzLnB1c2goZS5nZXQobykubmV4dCgobiA9PiBuID8gR3MucmVzb2x2ZSgpIDogKG4gPT4gZS5wdXQobmV3IE1zKDAsIFJzKG4pLCB0LmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcikpKShyKSkpKTtcbiAgICAgICAgICAgIH0pKS5uZXh0KCgoKSA9PiBHcy53YWl0Rm9yKHMpKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgJGUodCwgZSkge1xuICAgICAgICAvLyBDcmVhdGUgdGhlIGluZGV4LlxuICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKEJzLnN0b3JlLCB7XG4gICAgICAgICAgICBrZXlQYXRoOiBCcy5rZXlQYXRoXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBuID0gZS5zdG9yZShCcy5zdG9yZSksIHMgPSBuZXcgQWksIGkgPSB0ID0+IHtcbiAgICAgICAgICAgIGlmIChzLmFkZCh0KSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0Lmxhc3RTZWdtZW50KCksIHMgPSB0LnBvcExhc3QoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5wdXQoe1xuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uSWQ6IGUsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogUnMocylcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gSGVscGVyIHRvIGFkZCBhbiBpbmRleCBlbnRyeSBpZmYgd2UgaGF2ZW4ndCBhbHJlYWR5IHdyaXR0ZW4gaXQuXG4gICAgICAgICAgICAgICAgLy8gSW5kZXggZXhpc3RpbmcgcmVtb3RlIGRvY3VtZW50cy5cbiAgICAgICAgcmV0dXJuIGUuc3RvcmUoJHMuc3RvcmUpLmp0KHtcbiAgICAgICAgICAgIEt0OiAhMFxuICAgICAgICB9LCAoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgZHQodCk7XG4gICAgICAgICAgICByZXR1cm4gaShuLnBvcExhc3QoKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBlLnN0b3JlKE5zLnN0b3JlKS5qdCh7XG4gICAgICAgICAgICBLdDogITBcbiAgICAgICAgfSwgKChbdCwgZSwgbl0sIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSB2cyhlKTtcbiAgICAgICAgICAgIHJldHVybiBpKHIucG9wTGFzdCgpKTtcbiAgICAgICAgfSkpKSk7XG4gICAgfVxuICAgIEZlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuc3RvcmUoT3Muc3RvcmUpO1xuICAgICAgICByZXR1cm4gZS5qdCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBtaShuKSwgaSA9IGdpKHRoaXMuaywgcyk7XG4gICAgICAgICAgICByZXR1cm4gZS5wdXQoaSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGVyKHQpIHtcbiAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKE1zLnN0b3JlLCB7XG4gICAgICAgIGtleVBhdGg6IE1zLmtleVBhdGhcbiAgICB9KS5jcmVhdGVJbmRleChNcy5kb2N1bWVudFRhcmdldHNJbmRleCwgTXMuZG9jdW1lbnRUYXJnZXRzS2V5UGF0aCwge1xuICAgICAgICB1bmlxdWU6ICEwXG4gICAgfSk7XG4gICAgLy8gTk9URTogVGhpcyBpcyB1bmlxdWUgb25seSBiZWNhdXNlIHRoZSBUYXJnZXRJZCBpcyB0aGUgc3VmZml4LlxuICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoT3Muc3RvcmUsIHtcbiAgICAgICAga2V5UGF0aDogT3Mua2V5UGF0aFxuICAgIH0pLmNyZWF0ZUluZGV4KE9zLnF1ZXJ5VGFyZ2V0c0luZGV4TmFtZSwgT3MucXVlcnlUYXJnZXRzS2V5UGF0aCwge1xuICAgICAgICB1bmlxdWU6ICEwXG4gICAgfSksIHQuY3JlYXRlT2JqZWN0U3RvcmUoTHMuc3RvcmUpO1xufVxuXG5jb25zdCBuciA9IFwiRmFpbGVkIHRvIG9idGFpbiBleGNsdXNpdmUgYWNjZXNzIHRvIHRoZSBwZXJzaXN0ZW5jZSBsYXllci4gVG8gYWxsb3cgc2hhcmVkIGFjY2VzcywgbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbiBoYXMgdG8gYmUgZW5hYmxlZCBpbiBhbGwgdGFicy4gSWYgeW91IGFyZSB1c2luZyBgZXhwZXJpbWVudGFsRm9yY2VPd25pbmdUYWI6dHJ1ZWAsIG1ha2Ugc3VyZSB0aGF0IG9ubHkgb25lIHRhYiBoYXMgcGVyc2lzdGVuY2UgZW5hYmxlZCBhdCBhbnkgZ2l2ZW4gdGltZS5cIjtcblxuLyoqXG4gKiBPbGRlc3QgYWNjZXB0YWJsZSBhZ2UgaW4gbWlsbGlzZWNvbmRzIGZvciBjbGllbnQgbWV0YWRhdGEgYmVmb3JlIHRoZSBjbGllbnRcbiAqIGlzIGNvbnNpZGVyZWQgaW5hY3RpdmUgYW5kIGl0cyBhc3NvY2lhdGVkIGRhdGEgaXMgZ2FyYmFnZSBjb2xsZWN0ZWQuXG4gKi9cbi8qKlxuICogQW4gSW5kZXhlZERCLWJhY2tlZCBpbnN0YW5jZSBvZiBQZXJzaXN0ZW5jZS4gRGF0YSBpcyBzdG9yZWQgcGVyc2lzdGVudGx5XG4gKiBhY3Jvc3Mgc2Vzc2lvbnMuXG4gKlxuICogT24gV2ViIG9ubHksIHRoZSBGaXJlc3RvcmUgU0RLcyBzdXBwb3J0IHNoYXJlZCBhY2Nlc3MgdG8gaXRzIHBlcnNpc3RlbmNlXG4gKiBsYXllci4gVGhpcyBhbGxvd3MgbXVsdGlwbGUgYnJvd3NlciB0YWJzIHRvIHJlYWQgYW5kIHdyaXRlIHRvIEluZGV4ZWREYiBhbmRcbiAqIHRvIHN5bmNocm9uaXplIHN0YXRlIGV2ZW4gd2l0aG91dCBuZXR3b3JrIGNvbm5lY3Rpdml0eS4gU2hhcmVkIGFjY2VzcyBpc1xuICogY3VycmVudGx5IG9wdGlvbmFsIGFuZCBub3QgZW5hYmxlZCB1bmxlc3MgYWxsIGNsaWVudHMgaW52b2tlXG4gKiBgZW5hYmxlUGVyc2lzdGVuY2UoKWAgd2l0aCBge3N5bmNocm9uaXplVGFiczp0cnVlfWAuXG4gKlxuICogSW4gbXVsdGktdGFiIG1vZGUsIGlmIG11bHRpcGxlIGNsaWVudHMgYXJlIGFjdGl2ZSBhdCB0aGUgc2FtZSB0aW1lLCB0aGUgU0RLXG4gKiB3aWxsIGRlc2lnbmF0ZSBvbmUgY2xpZW50IGFzIHRoZSDigJxwcmltYXJ5IGNsaWVudOKAnS4gQW4gZWZmb3J0IGlzIG1hZGUgdG8gcGlja1xuICogYSB2aXNpYmxlLCBuZXR3b3JrLWNvbm5lY3RlZCBhbmQgYWN0aXZlIGNsaWVudCwgYW5kIHRoaXMgY2xpZW50IGlzXG4gKiByZXNwb25zaWJsZSBmb3IgbGV0dGluZyBvdGhlciBjbGllbnRzIGtub3cgYWJvdXQgaXRzIHByZXNlbmNlLiBUaGUgcHJpbWFyeVxuICogY2xpZW50IHdyaXRlcyBhIHVuaXF1ZSBjbGllbnQtZ2VuZXJhdGVkIGlkZW50aWZpZXIgKHRoZSBjbGllbnQgSUQpIHRvXG4gKiBJbmRleGVkRGLigJlzIOKAnG93bmVy4oCdIHN0b3JlIGV2ZXJ5IDQgc2Vjb25kcy4gSWYgdGhlIHByaW1hcnkgY2xpZW50IGZhaWxzIHRvXG4gKiB1cGRhdGUgdGhpcyBlbnRyeSwgYW5vdGhlciBjbGllbnQgY2FuIGFjcXVpcmUgdGhlIGxlYXNlIGFuZCB0YWtlIG92ZXIgYXNcbiAqIHByaW1hcnkuXG4gKlxuICogU29tZSBwZXJzaXN0ZW5jZSBvcGVyYXRpb25zIGluIHRoZSBTREsgYXJlIGRlc2lnbmF0ZWQgYXMgcHJpbWFyeS1jbGllbnQgb25seVxuICogb3BlcmF0aW9ucy4gVGhpcyBpbmNsdWRlcyB0aGUgYWNrbm93bGVkZ21lbnQgb2YgbXV0YXRpb25zIGFuZCBhbGwgdXBkYXRlcyBvZlxuICogcmVtb3RlIGRvY3VtZW50cy4gVGhlIGVmZmVjdHMgb2YgdGhlc2Ugb3BlcmF0aW9ucyBhcmUgd3JpdHRlbiB0byBwZXJzaXN0ZW5jZVxuICogYW5kIHRoZW4gYnJvYWRjYXN0IHRvIG90aGVyIHRhYnMgdmlhIExvY2FsU3RvcmFnZSAoc2VlXG4gKiBgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlYCksIHdoaWNoIHRoZW4gcmVmcmVzaCB0aGVpciBzdGF0ZSBmcm9tXG4gKiBwZXJzaXN0ZW5jZS5cbiAqXG4gKiBTaW1pbGFybHksIHRoZSBwcmltYXJ5IGNsaWVudCBsaXN0ZW5zIHRvIG5vdGlmaWNhdGlvbnMgc2VudCBieSBzZWNvbmRhcnlcbiAqIGNsaWVudHMgdG8gZGlzY292ZXIgcGVyc2lzdGVuY2UgY2hhbmdlcyB3cml0dGVuIGJ5IHNlY29uZGFyeSBjbGllbnRzLCBzdWNoIGFzXG4gKiB0aGUgYWRkaXRpb24gb2YgbmV3IG11dGF0aW9ucyBhbmQgcXVlcnkgdGFyZ2V0cy5cbiAqXG4gKiBJZiBtdWx0aS10YWIgaXMgbm90IGVuYWJsZWQgYW5kIGFub3RoZXIgdGFiIGFscmVhZHkgb2J0YWluZWQgdGhlIHByaW1hcnlcbiAqIGxlYXNlLCBJbmRleGVkRGJQZXJzaXN0ZW5jZSBlbnRlcnMgYSBmYWlsZWQgc3RhdGUgYW5kIGFsbCBzdWJzZXF1ZW50XG4gKiBvcGVyYXRpb25zIHdpbGwgYXV0b21hdGljYWxseSBmYWlsLlxuICpcbiAqIEFkZGl0aW9uYWxseSwgdGhlcmUgaXMgYW4gb3B0aW1pemF0aW9uIHNvIHRoYXQgd2hlbiBhIHRhYiBpcyBjbG9zZWQsIHRoZVxuICogcHJpbWFyeSBsZWFzZSBpcyByZWxlYXNlZCBpbW1lZGlhdGVseSAodGhpcyBpcyBlc3BlY2lhbGx5IGltcG9ydGFudCB0byBtYWtlXG4gKiBzdXJlIHRoYXQgYSByZWZyZXNoZWQgdGFiIGlzIGFibGUgdG8gaW1tZWRpYXRlbHkgcmUtYWNxdWlyZSB0aGUgcHJpbWFyeVxuICogbGVhc2UpLiBVbmZvcnR1bmF0ZWx5LCBJbmRleGVkREIgY2Fubm90IGJlIHJlbGlhYmx5IHVzZWQgaW4gd2luZG93LnVubG9hZFxuICogc2luY2UgaXQgaXMgYW4gYXN5bmNocm9ub3VzIEFQSS4gU28gaW4gYWRkaXRpb24gdG8gYXR0ZW1wdGluZyB0byBnaXZlIHVwIHRoZVxuICogbGVhc2UsIHRoZSBsZWFzZWhvbGRlciB3cml0ZXMgaXRzIGNsaWVudCBJRCB0byBhIFwiem9tYmllZENsaWVudFwiIGVudHJ5IGluXG4gKiBMb2NhbFN0b3JhZ2Ugd2hpY2ggYWN0cyBhcyBhbiBpbmRpY2F0b3IgdGhhdCBhbm90aGVyIHRhYiBzaG91bGQgZ28gYWhlYWQgYW5kXG4gKiB0YWtlIHRoZSBwcmltYXJ5IGxlYXNlIGltbWVkaWF0ZWx5IHJlZ2FyZGxlc3Mgb2YgdGhlIGN1cnJlbnQgbGVhc2UgdGltZXN0YW1wLlxuICpcbiAqIFRPRE8oYi8xMTQyMjYyMzQpOiBSZW1vdmUgYHN5bmNocm9uaXplVGFic2Agc2VjdGlvbiB3aGVuIG11bHRpLXRhYiBpcyBub1xuICogbG9uZ2VyIG9wdGlvbmFsLlxuICovXG5jbGFzcyBzciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogV2hldGhlciB0byBzeW5jaHJvbml6ZSB0aGUgaW4tbWVtb3J5IHN0YXRlIG9mIG11bHRpcGxlIHRhYnMgYW5kIHNoYXJlXG4gICAgICogYWNjZXNzIHRvIGxvY2FsIHBlcnNpc3RlbmNlLlxuICAgICAqL1xuICAgIHQsIGUsIG4sIHMsIGksIHIsIG8sIGEsIGMsIFxuICAgIC8qKlxuICAgICAqIElmIHNldCB0byB0cnVlLCBmb3JjZWZ1bGx5IG9idGFpbnMgZGF0YWJhc2UgYWNjZXNzLiBFeGlzdGluZyB0YWJzIHdpbGxcbiAgICAgKiBubyBsb25nZXIgYmUgYWJsZSB0byBhY2Nlc3MgSW5kZXhlZERCLlxuICAgICAqL1xuICAgIHUpIHtcbiAgICAgICAgaWYgKHRoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24gPSB0LCB0aGlzLnBlcnNpc3RlbmNlS2V5ID0gZSwgdGhpcy5jbGllbnRJZCA9IG4sIFxuICAgICAgICB0aGlzLk9lID0gaSwgdGhpcy53aW5kb3cgPSByLCB0aGlzLmRvY3VtZW50ID0gbywgdGhpcy5NZSA9IGMsIHRoaXMuTGUgPSB1LCB0aGlzLkJlID0gbnVsbCwgXG4gICAgICAgIHRoaXMuVWUgPSAhMSwgdGhpcy5pc1ByaW1hcnkgPSAhMSwgdGhpcy5uZXR3b3JrRW5hYmxlZCA9ICEwLCBcbiAgICAgICAgLyoqIE91ciB3aW5kb3cudW5sb2FkIGhhbmRsZXIsIGlmIHJlZ2lzdGVyZWQuICovXG4gICAgICAgIHRoaXMucWUgPSBudWxsLCB0aGlzLmluRm9yZWdyb3VuZCA9ICExLCBcbiAgICAgICAgLyoqIE91ciAndmlzaWJpbGl0eWNoYW5nZScgbGlzdGVuZXIgaWYgcmVnaXN0ZXJlZC4gKi9cbiAgICAgICAgdGhpcy5LZSA9IG51bGwsIFxuICAgICAgICAvKiogVGhlIGNsaWVudCBtZXRhZGF0YSByZWZyZXNoIHRhc2suICovXG4gICAgICAgIHRoaXMuamUgPSBudWxsLCBcbiAgICAgICAgLyoqIFRoZSBsYXN0IHRpbWUgd2UgZ2FyYmFnZSBjb2xsZWN0ZWQgdGhlIGNsaWVudCBtZXRhZGF0YSBvYmplY3Qgc3RvcmUuICovXG4gICAgICAgIHRoaXMuUWUgPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksIFxuICAgICAgICAvKiogQSBsaXN0ZW5lciB0byBub3RpZnkgb24gcHJpbWFyeSBzdGF0ZSBjaGFuZ2VzLiAqL1xuICAgICAgICB0aGlzLldlID0gdCA9PiBQcm9taXNlLnJlc29sdmUoKSwgIXNyLmJ0KCkpIHRocm93IG5ldyBqKEsuVU5JTVBMRU1FTlRFRCwgXCJUaGlzIHBsYXRmb3JtIGlzIGVpdGhlciBtaXNzaW5nIEluZGV4ZWREQiBvciBpcyBrbm93biB0byBoYXZlIGFuIGluY29tcGxldGUgaW1wbGVtZW50YXRpb24uIE9mZmxpbmUgcGVyc2lzdGVuY2UgaGFzIGJlZW4gZGlzYWJsZWQuXCIpO1xuICAgICAgICB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gbmV3IFFpKHRoaXMsIHMpLCB0aGlzLkdlID0gZSArIFwibWFpblwiLCB0aGlzLmsgPSBuZXcgY2koYSksIFxuICAgICAgICB0aGlzLnplID0gbmV3IEhzKHRoaXMuR2UsIDExLCBuZXcgdHIodGhpcy5rKSksIHRoaXMuSGUgPSBuZXcgRmkodGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSwgdGhpcy5rKSwgXG4gICAgICAgIHRoaXMuSnQgPSBuZXcgUmksIHRoaXMuSmUgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEhpKHQsIGUpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmV0dXJucyB0aGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IGhhdmUgY2hhbmdlZCBzaW5jZSB0aGUgc3BlY2lmaWVkIHJlYWRcbiAqIHRpbWUuXG4gKi9cbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbi5cbiAgICAgICAgKHRoaXMuaywgdGhpcy5KdCksIHRoaXMuWWUgPSBuZXcgcGksIHRoaXMud2luZG93ICYmIHRoaXMud2luZG93LmxvY2FsU3RvcmFnZSA/IHRoaXMuWGUgPSB0aGlzLndpbmRvdy5sb2NhbFN0b3JhZ2UgOiAodGhpcy5YZSA9IG51bGwsIFxuICAgICAgICAhMSA9PT0gdSAmJiBGKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJMb2NhbFN0b3JhZ2UgaXMgdW5hdmFpbGFibGUuIEFzIGEgcmVzdWx0LCBwZXJzaXN0ZW5jZSBtYXkgbm90IHdvcmsgcmVsaWFibHkuIEluIHBhcnRpY3VsYXIgZW5hYmxlUGVyc2lzdGVuY2UoKSBjb3VsZCBmYWlsIGltbWVkaWF0ZWx5IGFmdGVyIHJlZnJlc2hpbmcgdGhlIHBhZ2UuXCIpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXR0ZW1wdCB0byBzdGFydCBJbmRleGVkRGIgcGVyc2lzdGVuY2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIHBlcnNpc3RlbmNlIHdhcyBlbmFibGVkLlxuICAgICAqLyAgICBzdGFydCgpIHtcbiAgICAgICAgLy8gTk9URTogVGhpcyBpcyBleHBlY3RlZCB0byBmYWlsIHNvbWV0aW1lcyAoaW4gdGhlIGNhc2Ugb2YgYW5vdGhlciB0YWJcbiAgICAgICAgLy8gYWxyZWFkeSBoYXZpbmcgdGhlIHBlcnNpc3RlbmNlIGxvY2spLCBzbyBpdCdzIHRoZSBmaXJzdCB0aGluZyB3ZSBzaG91bGRcbiAgICAgICAgLy8gZG8uXG4gICAgICAgIHJldHVybiB0aGlzLlplKCkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzUHJpbWFyeSAmJiAhdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbikgXG4gICAgICAgICAgICAvLyBGYWlsIGBzdGFydCgpYCBpZiBgc3luY2hyb25pemVUYWJzYCBpcyBkaXNhYmxlZCBhbmQgd2UgY2Fubm90XG4gICAgICAgICAgICAvLyBvYnRhaW4gdGhlIHByaW1hcnkgbGVhc2UuXG4gICAgICAgICAgICB0aHJvdyBuZXcgaihLLkZBSUxFRF9QUkVDT05ESVRJT04sIG5yKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRuKCksIHRoaXMuZW4oKSwgdGhpcy5ubigpLCB0aGlzLnJ1blRyYW5zYWN0aW9uKFwiZ2V0SGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gdGhpcy5IZS5nZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIodCkpKTtcbiAgICAgICAgfSkpLnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5CZSA9IG5ldyBldCh0LCB0aGlzLk1lKTtcbiAgICAgICAgfSkpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuVWUgPSAhMDtcbiAgICAgICAgfSkpLmNhdGNoKCh0ID0+ICh0aGlzLnplICYmIHRoaXMuemUuY2xvc2UoKSwgUHJvbWlzZS5yZWplY3QodCkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIGxpc3RlbmVyIHRoYXQgZ2V0cyBjYWxsZWQgd2hlbiB0aGUgcHJpbWFyeSBzdGF0ZSBvZiB0aGVcbiAgICAgKiBpbnN0YW5jZSBjaGFuZ2VzLiBVcG9uIHJlZ2lzdGVyaW5nLCB0aGlzIGxpc3RlbmVyIGlzIGludm9rZWQgaW1tZWRpYXRlbHlcbiAgICAgKiB3aXRoIHRoZSBjdXJyZW50IHByaW1hcnkgc3RhdGUuXG4gICAgICpcbiAgICAgKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBXZWIgbXVsdGktdGFiLlxuICAgICAqLyAgICBzbih0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLldlID0gYXN5bmMgZSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGFydGVkKSByZXR1cm4gdChlKTtcbiAgICAgICAgfSwgdCh0aGlzLmlzUHJpbWFyeSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIGxpc3RlbmVyIHRoYXQgZ2V0cyBjYWxsZWQgd2hlbiB0aGUgZGF0YWJhc2UgcmVjZWl2ZXMgYVxuICAgICAqIHZlcnNpb24gY2hhbmdlIGV2ZW50IGluZGljYXRpbmcgdGhhdCBpdCBoYXMgZGVsZXRlZC5cbiAgICAgKlxuICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIFdlYiBtdWx0aS10YWIuXG4gICAgICovICAgIHNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyKHQpIHtcbiAgICAgICAgdGhpcy56ZS54dCgoYXN5bmMgZSA9PiB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiBhbiBhdHRlbXB0IGlzIG1hZGUgdG8gZGVsZXRlIEluZGV4ZWREQi5cbiAgICAgICAgICAgIG51bGwgPT09IGUubmV3VmVyc2lvbiAmJiBhd2FpdCB0KCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRqdXN0cyB0aGUgY3VycmVudCBuZXR3b3JrIHN0YXRlIGluIHRoZSBjbGllbnQncyBtZXRhZGF0YSwgcG90ZW50aWFsbHlcbiAgICAgKiBhZmZlY3RpbmcgdGhlIHByaW1hcnkgbGVhc2UuXG4gICAgICpcbiAgICAgKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBXZWIgbXVsdGktdGFiLlxuICAgICAqLyAgICBzZXROZXR3b3JrRW5hYmxlZCh0KSB7XG4gICAgICAgIHRoaXMubmV0d29ya0VuYWJsZWQgIT09IHQgJiYgKHRoaXMubmV0d29ya0VuYWJsZWQgPSB0LCBcbiAgICAgICAgLy8gU2NoZWR1bGUgYSBwcmltYXJ5IGxlYXNlIHJlZnJlc2ggZm9yIGltbWVkaWF0ZSBleGVjdXRpb24uIFRoZSBldmVudHVhbFxuICAgICAgICAvLyBsZWFzZSB1cGRhdGUgd2lsbCBiZSBwcm9wYWdhdGVkIHZpYSBgcHJpbWFyeVN0YXRlTGlzdGVuZXJgLlxuICAgICAgICB0aGlzLk9lLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRlZCAmJiBhd2FpdCB0aGlzLlplKCk7XG4gICAgICAgIH0pKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGNsaWVudCBtZXRhZGF0YSBpbiBJbmRleGVkRGIgYW5kIGF0dGVtcHRzIHRvIGVpdGhlciBvYnRhaW4gb3JcbiAgICAgKiBleHRlbmQgdGhlIHByaW1hcnkgbGVhc2UgZm9yIHRoZSBsb2NhbCBjbGllbnQuIEFzeW5jaHJvbm91c2x5IG5vdGlmaWVzIHRoZVxuICAgICAqIHByaW1hcnkgc3RhdGUgbGlzdGVuZXIgaWYgdGhlIGNsaWVudCBlaXRoZXIgbmV3bHkgb2J0YWluZWQgb3IgcmVsZWFzZWQgaXRzXG4gICAgICogcHJpbWFyeSBsZWFzZS5cbiAgICAgKi8gICAgWmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJ1blRyYW5zYWN0aW9uKFwidXBkYXRlQ2xpZW50TWV0YWRhdGFBbmRUcnlCZWNvbWVQcmltYXJ5XCIsIFwicmVhZHdyaXRlXCIsICh0ID0+IHJyKHQpLnB1dChuZXcgVXModGhpcy5jbGllbnRJZCwgRGF0ZS5ub3coKSwgdGhpcy5uZXR3b3JrRW5hYmxlZCwgdGhpcy5pbkZvcmVncm91bmQpKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1ByaW1hcnkpIHJldHVybiB0aGlzLnJuKHQpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgIHQgfHwgKHRoaXMuaXNQcmltYXJ5ID0gITEsIHRoaXMuT2UuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gdGhpcy5XZSghMSkpKSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB0aGlzLm9uKHQpKSkubmV4dCgoZSA9PiB0aGlzLmlzUHJpbWFyeSAmJiAhZSA/IHRoaXMuYW4odCkubmV4dCgoKCkgPT4gITEpKSA6ICEhZSAmJiB0aGlzLmNuKHQpLm5leHQoKCgpID0+ICEwKSkpKSkpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgIGlmIChYcyh0KSkgXG4gICAgICAgICAgICAvLyBQcm9jZWVkIHdpdGggdGhlIGV4aXN0aW5nIHN0YXRlLiBBbnkgc3Vic2VxdWVudCBhY2Nlc3MgdG9cbiAgICAgICAgICAgIC8vIEluZGV4ZWREQiB3aWxsIHZlcmlmeSB0aGUgbGVhc2UuXG4gICAgICAgICAgICByZXR1cm4gJChcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIFwiRmFpbGVkIHRvIGV4dGVuZCBvd25lciBsZWFzZTogXCIsIHQpLCB0aGlzLmlzUHJpbWFyeTtcbiAgICAgICAgICAgIGlmICghdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbikgdGhyb3cgdDtcbiAgICAgICAgICAgIHJldHVybiAkKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJSZWxlYXNpbmcgb3duZXIgbGVhc2UgYWZ0ZXIgZXJyb3IgZHVyaW5nIGxlYXNlIHJlZnJlc2hcIiwgdCksIFxuICAgICAgICAgICAgLyogaXNQcmltYXJ5PSAqLyAhMTtcbiAgICAgICAgfSkpLnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc1ByaW1hcnkgIT09IHQgJiYgdGhpcy5PZS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiB0aGlzLldlKHQpKSksIHRoaXMuaXNQcmltYXJ5ID0gdDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBybih0KSB7XG4gICAgICAgIHJldHVybiBpcih0KS5nZXQoU3Mua2V5KS5uZXh0KCh0ID0+IEdzLnJlc29sdmUodGhpcy51bih0KSkpKTtcbiAgICB9XG4gICAgaG4odCkge1xuICAgICAgICByZXR1cm4gcnIodCkuZGVsZXRlKHRoaXMuY2xpZW50SWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJZiB0aGUgZ2FyYmFnZSBjb2xsZWN0aW9uIHRocmVzaG9sZCBoYXMgcGFzc2VkLCBwcnVuZXMgdGhlXG4gICAgICogUmVtb3RlRG9jdW1lbnRDaGFuZ2VzIGFuZCB0aGUgQ2xpZW50TWV0YWRhdGEgc3RvcmUgYmFzZWQgb24gdGhlIGxhc3QgdXBkYXRlXG4gICAgICogdGltZSBvZiBhbGwgY2xpZW50cy5cbiAgICAgKi8gICAgYXN5bmMgbG4oKSB7XG4gICAgICAgIGlmICh0aGlzLmlzUHJpbWFyeSAmJiAhdGhpcy5mbih0aGlzLlFlLCAxOGU1KSkge1xuICAgICAgICAgICAgdGhpcy5RZSA9IERhdGUubm93KCk7XG4gICAgICAgICAgICBjb25zdCB0ID0gYXdhaXQgdGhpcy5ydW5UcmFuc2FjdGlvbihcIm1heWJlR2FyYmFnZUNvbGxlY3RNdWx0aUNsaWVudFN0YXRlXCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBpaSh0LCBVcy5zdG9yZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuQnQoKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuZG4odCwgMThlNSksIHMgPSB0LmZpbHRlcigodCA9PiAtMSA9PT0gbi5pbmRleE9mKHQpKSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBtZXRhZGF0YSBmb3IgY2xpZW50cyB0aGF0IGFyZSBubyBsb25nZXIgY29uc2lkZXJlZCBhY3RpdmUuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBHcy5mb3JFYWNoKHMsICh0ID0+IGUuZGVsZXRlKHQuY2xpZW50SWQpKSkubmV4dCgoKCkgPT4gcykpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKS5jYXRjaCgoKCkgPT4gW10pKTtcbiAgICAgICAgICAgIC8vIERlbGV0ZSBwb3RlbnRpYWwgbGVmdG92ZXIgZW50cmllcyB0aGF0IG1heSBjb250aW51ZSB0byBtYXJrIHRoZVxuICAgICAgICAgICAgLy8gaW5hY3RpdmUgY2xpZW50cyBhcyB6b21iaWVkIGluIExvY2FsU3RvcmFnZS5cbiAgICAgICAgICAgIC8vIElkZWFsbHkgd2UnZCBkZWxldGUgdGhlIEluZGV4ZWREYiBhbmQgTG9jYWxTdG9yYWdlIHpvbWJpZSBlbnRyaWVzIGZvclxuICAgICAgICAgICAgLy8gdGhlIGNsaWVudCBhdG9taWNhbGx5LCBidXQgd2UgY2FuJ3QuIFNvIHdlIG9wdCB0byBkZWxldGUgdGhlIEluZGV4ZWREYlxuICAgICAgICAgICAgLy8gZW50cmllcyBmaXJzdCB0byBhdm9pZCBwb3RlbnRpYWxseSByZXZpdmluZyBhIHpvbWJpZWQgY2xpZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuWGUpIGZvciAoY29uc3QgZSBvZiB0KSB0aGlzLlhlLnJlbW92ZUl0ZW0odGhpcy53bihlLmNsaWVudElkKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2NoZWR1bGVzIGEgcmVjdXJyaW5nIHRpbWVyIHRvIHVwZGF0ZSB0aGUgY2xpZW50IG1ldGFkYXRhIGFuZCB0byBlaXRoZXJcbiAgICAgKiBleHRlbmQgb3IgYWNxdWlyZSB0aGUgcHJpbWFyeSBsZWFzZSBpZiB0aGUgY2xpZW50IGlzIGVsaWdpYmxlLlxuICAgICAqLyAgICBubigpIHtcbiAgICAgICAgdGhpcy5qZSA9IHRoaXMuT2UuZW5xdWV1ZUFmdGVyRGVsYXkoXCJjbGllbnRfbWV0YWRhdGFfcmVmcmVzaFwiIC8qIENsaWVudE1ldGFkYXRhUmVmcmVzaCAqLyAsIDRlMywgKCgpID0+IHRoaXMuWmUoKS50aGVuKCgoKSA9PiB0aGlzLmxuKCkpKS50aGVuKCgoKSA9PiB0aGlzLm5uKCkpKSkpO1xuICAgIH1cbiAgICAvKiogQ2hlY2tzIHdoZXRoZXIgYGNsaWVudGAgaXMgdGhlIGxvY2FsIGNsaWVudC4gKi8gICAgdW4odCkge1xuICAgICAgICByZXR1cm4gISF0ICYmIHQub3duZXJJZCA9PT0gdGhpcy5jbGllbnRJZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXZhbHVhdGUgdGhlIHN0YXRlIG9mIGFsbCBhY3RpdmUgY2xpZW50cyBhbmQgZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIGxvY2FsXG4gICAgICogY2xpZW50IGlzIG9yIGNhbiBhY3QgYXMgdGhlIGhvbGRlciBvZiB0aGUgcHJpbWFyeSBsZWFzZS4gUmV0dXJucyB3aGV0aGVyXG4gICAgICogdGhlIGNsaWVudCBpcyBlbGlnaWJsZSBmb3IgdGhlIGxlYXNlLCBidXQgZG9lcyBub3QgYWN0dWFsbHkgYWNxdWlyZSBpdC5cbiAgICAgKiBNYXkgcmV0dXJuICdmYWxzZScgZXZlbiBpZiB0aGVyZSBpcyBubyBhY3RpdmUgbGVhc2Vob2xkZXIgYW5kIGFub3RoZXJcbiAgICAgKiAoZm9yZWdyb3VuZCkgY2xpZW50IHNob3VsZCBiZWNvbWUgbGVhc2Vob2xkZXIgaW5zdGVhZC5cbiAgICAgKi8gICAgb24odCkge1xuICAgICAgICBpZiAodGhpcy5MZSkgcmV0dXJuIEdzLnJlc29sdmUoITApO1xuICAgICAgICByZXR1cm4gaXIodCkuZ2V0KFNzLmtleSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAvLyBBIGNsaWVudCBpcyBlbGlnaWJsZSBmb3IgdGhlIHByaW1hcnkgbGVhc2UgaWY6XG4gICAgICAgICAgICAvLyAtIGl0cyBuZXR3b3JrIGlzIGVuYWJsZWQgYW5kIHRoZSBjbGllbnQncyB0YWIgaXMgaW4gdGhlIGZvcmVncm91bmQuXG4gICAgICAgICAgICAvLyAtIGl0cyBuZXR3b3JrIGlzIGVuYWJsZWQgYW5kIG5vIG90aGVyIGNsaWVudCdzIHRhYiBpcyBpbiB0aGVcbiAgICAgICAgICAgIC8vICAgZm9yZWdyb3VuZC5cbiAgICAgICAgICAgIC8vIC0gZXZlcnkgY2xpZW50cyBuZXR3b3JrIGlzIGRpc2FibGVkIGFuZCB0aGUgY2xpZW50J3MgdGFiIGlzIGluIHRoZVxuICAgICAgICAgICAgLy8gICBmb3JlZ3JvdW5kLlxuICAgICAgICAgICAgLy8gLSBldmVyeSBjbGllbnRzIG5ldHdvcmsgaXMgZGlzYWJsZWQgYW5kIG5vIG90aGVyIGNsaWVudCdzIHRhYiBpcyBpblxuICAgICAgICAgICAgLy8gICB0aGUgZm9yZWdyb3VuZC5cbiAgICAgICAgICAgIC8vIC0gdGhlIGBmb3JjZU93bmluZ1RhYmAgc2V0dGluZyB3YXMgcGFzc2VkIGluLlxuICAgICAgICAgICAgaWYgKG51bGwgIT09IGUgJiYgdGhpcy5mbihlLmxlYXNlVGltZXN0YW1wTXMsIDVlMykgJiYgIXRoaXMuX24oZS5vd25lcklkKSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnVuKGUpICYmIHRoaXMubmV0d29ya0VuYWJsZWQpIHJldHVybiAhMDtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMudW4oZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlLmFsbG93VGFiU3luY2hyb25pemF0aW9uKSBcbiAgICAgICAgICAgICAgICAgICAgLy8gRmFpbCB0aGUgYGNhbkFjdEFzUHJpbWFyeWAgY2hlY2sgaWYgdGhlIGN1cnJlbnQgbGVhc2Vob2xkZXIgaGFzXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdCBvcHRlZCBpbnRvIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24uIElmIHRoaXMgaGFwcGVucyBhdFxuICAgICAgICAgICAgICAgICAgICAvLyBjbGllbnQgc3RhcnR1cCwgd2UgcmVqZWN0IHRoZSBQcm9taXNlIHJldHVybmVkIGJ5XG4gICAgICAgICAgICAgICAgICAgIC8vIGBlbmFibGVQZXJzaXN0ZW5jZSgpYCBhbmQgdGhlIHVzZXIgY2FuIGNvbnRpbnVlIHRvIHVzZSBGaXJlc3RvcmVcbiAgICAgICAgICAgICAgICAgICAgLy8gd2l0aCBpbi1tZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgZmFpbHMgZHVyaW5nIGEgbGVhc2UgcmVmcmVzaCwgd2Ugd2lsbCBpbnN0ZWFkIGJsb2NrIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBBc3luY1F1ZXVlIGZyb20gZXhlY3V0aW5nIGZ1cnRoZXIgb3BlcmF0aW9ucy4gTm90ZSB0aGF0IHRoaXMgaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gYWNjZXB0YWJsZSBzaW5jZSBtaXhpbmcgJiBtYXRjaGluZyBkaWZmZXJlbnQgYHN5bmNocm9uaXplVGFic2BcbiAgICAgICAgICAgICAgICAgICAgLy8gc2V0dGluZ3MgaXMgbm90IHN1cHBvcnRlZC5cbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyhiLzExNDIyNjIzNCk6IFJlbW92ZSB0aGlzIGNoZWNrIHdoZW4gYHN5bmNocm9uaXplVGFic2AgY2FuXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vIGxvbmdlciBiZSB0dXJuZWQgb2ZmLlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgaihLLkZBSUxFRF9QUkVDT05ESVRJT04sIG5yKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAhKCF0aGlzLm5ldHdvcmtFbmFibGVkIHx8ICF0aGlzLmluRm9yZWdyb3VuZCkgfHwgcnIodCkuQnQoKS5uZXh0KCh0ID0+IHZvaWQgMCA9PT0gdGhpcy5kbih0LCA1ZTMpLmZpbmQoKHQgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNsaWVudElkICE9PSB0LmNsaWVudElkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSAhdGhpcy5uZXR3b3JrRW5hYmxlZCAmJiB0Lm5ldHdvcmtFbmFibGVkLCBuID0gIXRoaXMuaW5Gb3JlZ3JvdW5kICYmIHQuaW5Gb3JlZ3JvdW5kLCBzID0gdGhpcy5uZXR3b3JrRW5hYmxlZCA9PT0gdC5uZXR3b3JrRW5hYmxlZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUgfHwgbiAmJiBzKSByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgICAgIH0pKSkpO1xuICAgICAgICB9KSkubmV4dCgodCA9PiAodGhpcy5pc1ByaW1hcnkgIT09IHQgJiYgJChcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIGBDbGllbnQgJHt0ID8gXCJpc1wiIDogXCJpcyBub3RcIn0gZWxpZ2libGUgZm9yIGEgcHJpbWFyeSBsZWFzZS5gKSwgXG4gICAgICAgIHQpKSk7XG4gICAgfVxuICAgIGFzeW5jIHNodXRkb3duKCkge1xuICAgICAgICAvLyBUaGUgc2h1dGRvd24oKSBvcGVyYXRpb25zIGFyZSBpZGVtcG90ZW50IGFuZCBjYW4gYmUgY2FsbGVkIGV2ZW4gd2hlblxuICAgICAgICAvLyBzdGFydCgpIGFib3J0ZWQgKGUuZy4gYmVjYXVzZSBpdCBjb3VsZG4ndCBhY3F1aXJlIHRoZSBwZXJzaXN0ZW5jZSBsZWFzZSkuXG4gICAgICAgIHRoaXMuVWUgPSAhMSwgdGhpcy5tbigpLCB0aGlzLmplICYmICh0aGlzLmplLmNhbmNlbCgpLCB0aGlzLmplID0gbnVsbCksIHRoaXMuZ24oKSwgXG4gICAgICAgIHRoaXMueW4oKSwgXG4gICAgICAgIC8vIFVzZSBgU2ltcGxlRGIucnVuVHJhbnNhY3Rpb25gIGRpcmVjdGx5IHRvIGF2b2lkIGZhaWxpbmcgaWYgYW5vdGhlciB0YWJcbiAgICAgICAgLy8gaGFzIG9idGFpbmVkIHRoZSBwcmltYXJ5IGxlYXNlLlxuICAgICAgICBhd2FpdCB0aGlzLnplLnJ1blRyYW5zYWN0aW9uKFwic2h1dGRvd25cIiwgXCJyZWFkd3JpdGVcIiwgWyBTcy5zdG9yZSwgVXMuc3RvcmUgXSwgKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBzaSh0LCBldC5JKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFuKGUpLm5leHQoKCgpID0+IHRoaXMuaG4oZSkpKTtcbiAgICAgICAgfSkpLCB0aGlzLnplLmNsb3NlKCksIFxuICAgICAgICAvLyBSZW1vdmUgdGhlIGVudHJ5IG1hcmtpbmcgdGhlIGNsaWVudCBhcyB6b21iaWVkIGZyb20gTG9jYWxTdG9yYWdlIHNpbmNlXG4gICAgICAgIC8vIHdlIHN1Y2Nlc3NmdWxseSBkZWxldGVkIGl0cyBtZXRhZGF0YSBmcm9tIEluZGV4ZWREYi5cbiAgICAgICAgdGhpcy5wbigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGNsaWVudHMgdGhhdCBhcmUgbm90IHpvbWJpZWQgYW5kIGhhdmUgYW4gdXBkYXRlVGltZSB3aXRoaW4gdGhlXG4gICAgICogcHJvdmlkZWQgdGhyZXNob2xkLlxuICAgICAqLyAgICBkbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB0LmZpbHRlcigodCA9PiB0aGlzLmZuKHQudXBkYXRlVGltZU1zLCBlKSAmJiAhdGhpcy5fbih0LmNsaWVudElkKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBJRHMgb2YgdGhlIGNsaWVudHMgdGhhdCBhcmUgY3VycmVudGx5IGFjdGl2ZS4gSWYgbXVsdGktdGFiXG4gICAgICogaXMgbm90IHN1cHBvcnRlZCwgcmV0dXJucyBhbiBhcnJheSB0aGF0IG9ubHkgY29udGFpbnMgdGhlIGxvY2FsIGNsaWVudCdzXG4gICAgICogSUQuXG4gICAgICpcbiAgICAgKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBXZWIgbXVsdGktdGFiLlxuICAgICAqLyAgICBUbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucnVuVHJhbnNhY3Rpb24oXCJnZXRBY3RpdmVDbGllbnRzXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gcnIodCkuQnQoKS5uZXh0KCh0ID0+IHRoaXMuZG4odCwgMThlNSkubWFwKCh0ID0+IHQuY2xpZW50SWQpKSkpKSk7XG4gICAgfVxuICAgIGdldCBzdGFydGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5VZTtcbiAgICB9XG4gICAgZ2V0TXV0YXRpb25RdWV1ZSh0KSB7XG4gICAgICAgIHJldHVybiBEaS5YdCh0LCB0aGlzLmssIHRoaXMuSnQsIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUpO1xuICAgIH1cbiAgICBnZXRUYXJnZXRDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSGU7XG4gICAgfVxuICAgIGdldFJlbW90ZURvY3VtZW50Q2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkplO1xuICAgIH1cbiAgICBnZXRJbmRleE1hbmFnZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkp0O1xuICAgIH1cbiAgICBnZXRCdW5kbGVDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuWWU7XG4gICAgfVxuICAgIHJ1blRyYW5zYWN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgJChcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIFwiU3RhcnRpbmcgdHJhbnNhY3Rpb246XCIsIHQpO1xuICAgICAgICBjb25zdCBzID0gXCJyZWFkb25seVwiID09PSBlID8gXCJyZWFkb25seVwiIDogXCJyZWFkd3JpdGVcIjtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIC8vIERvIGFsbCB0cmFuc2FjdGlvbnMgYXMgcmVhZHdyaXRlIGFnYWluc3QgYWxsIG9iamVjdCBzdG9yZXMsIHNpbmNlIHdlXG4gICAgICAgIC8vIGFyZSB0aGUgb25seSByZWFkZXIvd3JpdGVyLlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnplLnJ1blRyYW5zYWN0aW9uKHQsIHMsIGpzLCAocyA9PiAoaSA9IG5ldyBzaShzLCB0aGlzLkJlID8gdGhpcy5CZS5uZXh0KCkgOiBldC5JKSwgXG4gICAgICAgIFwicmVhZHdyaXRlLXByaW1hcnlcIiA9PT0gZSA/IHRoaXMucm4oaSkubmV4dCgodCA9PiAhIXQgfHwgdGhpcy5vbihpKSkpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgaWYgKCFlKSB0aHJvdyBGKGBGYWlsZWQgdG8gb2J0YWluIHByaW1hcnkgbGVhc2UgZm9yIGFjdGlvbiAnJHt0fScuYCksIHRoaXMuaXNQcmltYXJ5ID0gITEsIFxuICAgICAgICAgICAgdGhpcy5PZS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiB0aGlzLldlKCExKSkpLCBuZXcgaihLLkZBSUxFRF9QUkVDT05ESVRJT04sIFFzKTtcbiAgICAgICAgICAgIHJldHVybiBuKGkpO1xuICAgICAgICB9KSkubmV4dCgodCA9PiB0aGlzLmNuKGkpLm5leHQoKCgpID0+IHQpKSkpIDogdGhpcy5FbihpKS5uZXh0KCgoKSA9PiBuKGkpKSkpKSkudGhlbigodCA9PiAoaS5yYWlzZU9uQ29tbWl0dGVkRXZlbnQoKSwgXG4gICAgICAgIHQpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIHRoYXQgdGhlIGN1cnJlbnQgdGFiIGlzIHRoZSBwcmltYXJ5IGxlYXNlaG9sZGVyIG9yIGFsdGVybmF0aXZlbHlcbiAgICAgKiB0aGF0IHRoZSBsZWFzZWhvbGRlciBoYXMgb3B0ZWQgaW50byBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uLlxuICAgICAqL1xuICAgIC8vIFRPRE8oYi8xMTQyMjYyMzQpOiBSZW1vdmUgdGhpcyBjaGVjayB3aGVuIGBzeW5jaHJvbml6ZVRhYnNgIGNhbiBubyBsb25nZXJcbiAgICAvLyBiZSB0dXJuZWQgb2ZmLlxuICAgIEVuKHQpIHtcbiAgICAgICAgcmV0dXJuIGlyKHQpLmdldChTcy5rZXkpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IHQgJiYgdGhpcy5mbih0LmxlYXNlVGltZXN0YW1wTXMsIDVlMykgJiYgIXRoaXMuX24odC5vd25lcklkKSAmJiAhdGhpcy51bih0KSAmJiAhKHRoaXMuTGUgfHwgdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbiAmJiB0LmFsbG93VGFiU3luY2hyb25pemF0aW9uKSkgdGhyb3cgbmV3IGooSy5GQUlMRURfUFJFQ09ORElUSU9OLCBucik7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT2J0YWlucyBvciBleHRlbmRzIHRoZSBuZXcgcHJpbWFyeSBsZWFzZSBmb3IgdGhlIGxvY2FsIGNsaWVudC4gVGhpc1xuICAgICAqIG1ldGhvZCBkb2VzIG5vdCB2ZXJpZnkgdGhhdCB0aGUgY2xpZW50IGlzIGVsaWdpYmxlIGZvciB0aGlzIGxlYXNlLlxuICAgICAqLyAgICBjbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgU3ModGhpcy5jbGllbnRJZCwgdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbiwgRGF0ZS5ub3coKSk7XG4gICAgICAgIHJldHVybiBpcih0KS5wdXQoU3Mua2V5LCBlKTtcbiAgICB9XG4gICAgc3RhdGljIGJ0KCkge1xuICAgICAgICByZXR1cm4gSHMuYnQoKTtcbiAgICB9XG4gICAgLyoqIENoZWNrcyB0aGUgcHJpbWFyeSBsZWFzZSBhbmQgcmVtb3ZlcyBpdCBpZiB3ZSBhcmUgdGhlIGN1cnJlbnQgcHJpbWFyeS4gKi8gICAgYW4odCkge1xuICAgICAgICBjb25zdCBlID0gaXIodCk7XG4gICAgICAgIHJldHVybiBlLmdldChTcy5rZXkpLm5leHQoKHQgPT4gdGhpcy51bih0KSA/ICgkKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJSZWxlYXNpbmcgcHJpbWFyeSBsZWFzZS5cIiksIFxuICAgICAgICBlLmRlbGV0ZShTcy5rZXkpKSA6IEdzLnJlc29sdmUoKSkpO1xuICAgIH1cbiAgICAvKiogVmVyaWZpZXMgdGhhdCBgdXBkYXRlVGltZU1zYCBpcyB3aXRoaW4gYG1heEFnZU1zYC4gKi8gICAgZm4odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcmV0dXJuICEodCA8IG4gLSBlKSAmJiAoISh0ID4gbikgfHwgKEYoYERldGVjdGVkIGFuIHVwZGF0ZSB0aW1lIHRoYXQgaXMgaW4gdGhlIGZ1dHVyZTogJHt0fSA+ICR7bn1gKSwgXG4gICAgICAgICExKSk7XG4gICAgfVxuICAgIHRuKCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLmRvY3VtZW50ICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdGhpcy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyICYmICh0aGlzLktlID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5PZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiAodGhpcy5pbkZvcmVncm91bmQgPSBcInZpc2libGVcIiA9PT0gdGhpcy5kb2N1bWVudC52aXNpYmlsaXR5U3RhdGUsIFxuICAgICAgICAgICAgdGhpcy5aZSgpKSkpO1xuICAgICAgICB9LCB0aGlzLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMuS2UpLCB0aGlzLmluRm9yZWdyb3VuZCA9IFwidmlzaWJsZVwiID09PSB0aGlzLmRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSk7XG4gICAgfVxuICAgIGduKCkge1xuICAgICAgICB0aGlzLktlICYmICh0aGlzLmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMuS2UpLCB0aGlzLktlID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEF0dGFjaGVzIGEgd2luZG93LnVubG9hZCBoYW5kbGVyIHRoYXQgd2lsbCBzeW5jaHJvbm91c2x5IHdyaXRlIG91clxuICAgICAqIGNsaWVudElkIHRvIGEgXCJ6b21iaWUgY2xpZW50IGlkXCIgbG9jYXRpb24gaW4gTG9jYWxTdG9yYWdlLiBUaGlzIGNhbiBiZSB1c2VkXG4gICAgICogYnkgdGFicyB0cnlpbmcgdG8gYWNxdWlyZSB0aGUgcHJpbWFyeSBsZWFzZSB0byBkZXRlcm1pbmUgdGhhdCB0aGUgbGVhc2VcbiAgICAgKiBpcyBubyBsb25nZXIgdmFsaWQgZXZlbiBpZiB0aGUgdGltZXN0YW1wIGlzIHJlY2VudC4gVGhpcyBpcyBwYXJ0aWN1bGFybHlcbiAgICAgKiBpbXBvcnRhbnQgZm9yIHRoZSByZWZyZXNoIGNhc2UgKHNvIHRoZSB0YWIgY29ycmVjdGx5IHJlLWFjcXVpcmVzIHRoZVxuICAgICAqIHByaW1hcnkgbGVhc2UpLiBMb2NhbFN0b3JhZ2UgaXMgdXNlZCBmb3IgdGhpcyByYXRoZXIgdGhhbiBJbmRleGVkRGIgYmVjYXVzZVxuICAgICAqIGl0IGlzIGEgc3luY2hyb25vdXMgQVBJIGFuZCBzbyBjYW4gYmUgdXNlZCByZWxpYWJseSBmcm9tICBhbiB1bmxvYWRcbiAgICAgKiBoYW5kbGVyLlxuICAgICAqLyAgICBlbigpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgKG51bGwgPT09ICh0ID0gdGhpcy53aW5kb3cpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuYWRkRXZlbnRMaXN0ZW5lcikgJiYgKHRoaXMucWUgPSAoKSA9PiB7XG4gICAgICAgICAgICAvLyBOb3RlOiBJbiB0aGVvcnksIHRoaXMgc2hvdWxkIGJlIHNjaGVkdWxlZCBvbiB0aGUgQXN5bmNRdWV1ZSBzaW5jZSBpdFxuICAgICAgICAgICAgLy8gYWNjZXNzZXMgaW50ZXJuYWwgc3RhdGUuIFdlIGV4ZWN1dGUgdGhpcyBjb2RlIGRpcmVjdGx5IGR1cmluZyBzaHV0ZG93blxuICAgICAgICAgICAgLy8gdG8gbWFrZSBzdXJlIGl0IGdldHMgYSBjaGFuY2UgdG8gcnVuLlxuICAgICAgICAgICAgdGhpcy5tbigpLCBpc1NhZmFyaSgpICYmIG5hdmlnYXRvci5hcHBWZXJzaW9uLm1hdGNoKC9WZXJzaW9uXFwvMVs0NV0vKSAmJiBcbiAgICAgICAgICAgIC8vIE9uIFNhZmFyaSAxNCBhbmQgMTUsIHdlIGRvIG5vdCBydW4gYW55IGNsZWFudXAgYWN0aW9ucyBhcyBpdCBtaWdodFxuICAgICAgICAgICAgLy8gdHJpZ2dlciBhIGJ1ZyB0aGF0IHByZXZlbnRzIFNhZmFyaSBmcm9tIHJlLW9wZW5pbmcgSW5kZXhlZERCIGR1cmluZ1xuICAgICAgICAgICAgLy8gdGhlIG5leHQgcGFnZSBsb2FkLlxuICAgICAgICAgICAgLy8gU2VlIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0yMjY1NDdcbiAgICAgICAgICAgIHRoaXMuT2UuZW50ZXJSZXN0cmljdGVkTW9kZSgvKiBwdXJnZUV4aXN0aW5nVGFza3M9ICovICEwKSwgdGhpcy5PZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiB0aGlzLnNodXRkb3duKCkpKTtcbiAgICAgICAgfSwgdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsIHRoaXMucWUpKTtcbiAgICB9XG4gICAgeW4oKSB7XG4gICAgICAgIHRoaXMucWUgJiYgKHRoaXMud2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwYWdlaGlkZVwiLCB0aGlzLnFlKSwgdGhpcy5xZSA9IG51bGwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgYSBjbGllbnQgaXMgXCJ6b21iaWVkXCIgYmFzZWQgb24gaXRzIExvY2FsU3RvcmFnZSBlbnRyeS5cbiAgICAgKiBDbGllbnRzIGJlY29tZSB6b21iaWVkIHdoZW4gdGhlaXIgdGFiIGNsb3NlcyB3aXRob3V0IHJ1bm5pbmcgYWxsIG9mIHRoZVxuICAgICAqIGNsZWFudXAgbG9naWMgaW4gYHNodXRkb3duKClgLlxuICAgICAqLyAgICBfbih0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgbiA9IG51bGwgIT09IChudWxsID09PSAoZSA9IHRoaXMuWGUpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuZ2V0SXRlbSh0aGlzLnduKHQpKSk7XG4gICAgICAgICAgICByZXR1cm4gJChcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIGBDbGllbnQgJyR7dH0nICR7biA/IFwiaXNcIiA6IFwiaXMgbm90XCJ9IHpvbWJpZWQgaW4gTG9jYWxTdG9yYWdlYCksIFxuICAgICAgICAgICAgbjtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgLy8gR3JhY2VmdWxseSBoYW5kbGUgaWYgTG9jYWxTdG9yYWdlIGlzbid0IHdvcmtpbmcuXG4gICAgICAgICAgICByZXR1cm4gRihcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIFwiRmFpbGVkIHRvIGdldCB6b21iaWVkIGNsaWVudCBpZC5cIiwgdCksICExO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlY29yZCBjbGllbnQgYXMgem9tYmllZCAoYSBjbGllbnQgdGhhdCBoYWQgaXRzIHRhYiBjbG9zZWQpLiBab21iaWVkXG4gICAgICogY2xpZW50cyBhcmUgaWdub3JlZCBkdXJpbmcgcHJpbWFyeSB0YWIgc2VsZWN0aW9uLlxuICAgICAqLyAgICBtbigpIHtcbiAgICAgICAgaWYgKHRoaXMuWGUpIHRyeSB7XG4gICAgICAgICAgICB0aGlzLlhlLnNldEl0ZW0odGhpcy53bih0aGlzLmNsaWVudElkKSwgU3RyaW5nKERhdGUubm93KCkpKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgLy8gR3JhY2VmdWxseSBoYW5kbGUgaWYgTG9jYWxTdG9yYWdlIGlzbid0IGF2YWlsYWJsZSAvIHdvcmtpbmcuXG4gICAgICAgICAgICBGKFwiRmFpbGVkIHRvIHNldCB6b21iaWUgY2xpZW50IGlkLlwiLCB0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogUmVtb3ZlcyB0aGUgem9tYmllZCBjbGllbnQgZW50cnkgaWYgaXQgZXhpc3RzLiAqLyAgICBwbigpIHtcbiAgICAgICAgaWYgKHRoaXMuWGUpIHRyeSB7XG4gICAgICAgICAgICB0aGlzLlhlLnJlbW92ZUl0ZW0odGhpcy53bih0aGlzLmNsaWVudElkKSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIC8vIElnbm9yZVxuICAgICAgICB9XG4gICAgfVxuICAgIHduKHQpIHtcbiAgICAgICAgcmV0dXJuIGBmaXJlc3RvcmVfem9tYmllXyR7dGhpcy5wZXJzaXN0ZW5jZUtleX1fJHt0fWA7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgcHJpbWFyeSBjbGllbnQgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIGlyKHQpIHtcbiAgICByZXR1cm4gaWkodCwgU3Muc3RvcmUpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgY2xpZW50IG1ldGFkYXRhIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBycih0KSB7XG4gICAgcmV0dXJuIGlpKHQsIFVzLnN0b3JlKTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBzdHJpbmcgdXNlZCBhcyBhIHByZWZpeCB3aGVuIHN0b3JpbmcgZGF0YSBpbiBJbmRleGVkREIgYW5kXG4gKiBMb2NhbFN0b3JhZ2UuXG4gKi8gZnVuY3Rpb24gb3IodCwgZSkge1xuICAgIC8vIFVzZSB0d28gZGlmZmVyZW50IHByZWZpeCBmb3JtYXRzOlxuICAgIC8vICAgKiBmaXJlc3RvcmUgLyBwZXJzaXN0ZW5jZUtleSAvIHByb2plY3RJRCAuIGRhdGFiYXNlSUQgLyAuLi5cbiAgICAvLyAgICogZmlyZXN0b3JlIC8gcGVyc2lzdGVuY2VLZXkgLyBwcm9qZWN0SUQgLyAuLi5cbiAgICAvLyBwcm9qZWN0SURzIGFyZSBETlMtY29tcGF0aWJsZSBuYW1lcyBhbmQgY2Fubm90IGNvbnRhaW4gZG90c1xuICAgIC8vIHNvIHRoZXJlJ3Mgbm8gZGFuZ2VyIG9mIGNvbGxpc2lvbnMuXG4gICAgbGV0IG4gPSB0LnByb2plY3RJZDtcbiAgICByZXR1cm4gdC5pc0RlZmF1bHREYXRhYmFzZSB8fCAobiArPSBcIi5cIiArIHQuZGF0YWJhc2UpLCBcImZpcmVzdG9yZS9cIiArIGUgKyBcIi9cIiArIG4gKyBcIi9cIjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNsYXNzIGFyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3MgPSB0LCB0aGlzLkluID0gZTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgcmVhZG9ubHkgdmlldyBvZiB0aGUgbG9jYWwgc3RhdGUgb2YgYWxsIGRvY3VtZW50cyB3ZSdyZSB0cmFja2luZyAoaS5lLiB3ZVxuICogaGF2ZSBhIGNhY2hlZCB2ZXJzaW9uIGluIHJlbW90ZURvY3VtZW50Q2FjaGUgb3IgbG9jYWwgbXV0YXRpb25zIGZvciB0aGVcbiAqIGRvY3VtZW50KS4gVGhlIHZpZXcgaXMgY29tcHV0ZWQgYnkgYXBwbHlpbmcgdGhlIG11dGF0aW9ucyBpbiB0aGVcbiAqIE11dGF0aW9uUXVldWUgdG8gdGhlIFJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKi8gY2xhc3MgY3Ige1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5KZSA9IHQsIHRoaXMuQW4gPSBlLCB0aGlzLkp0ID0gbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsb2NhbCB2aWV3IG9mIHRoZSBkb2N1bWVudCBpZGVudGlmaWVkIGJ5IGBrZXlgLlxuICAgICAqXG4gICAgICogQHJldHVybnMgTG9jYWwgdmlldyBvZiB0aGUgZG9jdW1lbnQgb3IgbnVsbCBpZiB3ZSBkb24ndCBoYXZlIGFueSBjYWNoZWRcbiAgICAgKiBzdGF0ZSBmb3IgaXQuXG4gICAgICovICAgIFJuKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQW4uZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXkodCwgZSkubmV4dCgobiA9PiB0aGlzLlBuKHQsIGUsIG4pKSk7XG4gICAgfVxuICAgIC8qKiBJbnRlcm5hbCB2ZXJzaW9uIG9mIGBnZXREb2N1bWVudGAgdGhhdCBhbGxvd3MgcmV1c2luZyBiYXRjaGVzLiAqLyAgICBQbih0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkplLmdldEVudHJ5KHQsIGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIG4pIGUuYXBwbHlUb0xvY2FsVmlldyh0KTtcbiAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIHZpZXcgb2YgdGhlIGdpdmVuIGBkb2NzYCBhcyB0aGV5IHdvdWxkIGFwcGVhciBhZnRlciBhcHBseWluZ1xuICAgIC8vIGFsbCBtdXRhdGlvbnMgaW4gdGhlIGdpdmVuIGBiYXRjaGVzYC5cbiAgICBibih0LCBlKSB7XG4gICAgICAgIHQuZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSB0LmFwcGx5VG9Mb2NhbFZpZXcobik7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgbG9jYWwgdmlldyBvZiB0aGUgZG9jdW1lbnRzIGlkZW50aWZpZWQgYnkgYGtleXNgLlxuICAgICAqXG4gICAgICogSWYgd2UgZG9uJ3QgaGF2ZSBjYWNoZWQgc3RhdGUgZm9yIGEgZG9jdW1lbnQgaW4gYGtleXNgLCBhIE5vRG9jdW1lbnQgd2lsbFxuICAgICAqIGJlIHN0b3JlZCBmb3IgdGhhdCBrZXkgaW4gdGhlIHJlc3VsdGluZyBzZXQuXG4gICAgICovICAgIHZuKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSmUuZ2V0RW50cmllcyh0LCBlKS5uZXh0KChlID0+IHRoaXMuVm4odCwgZSkubmV4dCgoKCkgPT4gZSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgdGhlIGxvY2FsIHZpZXcgdGhlIGdpdmVuIGBiYXNlRG9jc2Agd2l0aG91dCByZXRyaWV2aW5nIGRvY3VtZW50c1xuICAgICAqIGZyb20gdGhlIGxvY2FsIHN0b3JlLlxuICAgICAqLyAgICBWbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkFuLmdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5cyh0LCBlKS5uZXh0KCh0ID0+IHRoaXMuYm4oZSwgdCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgYSBxdWVyeSBhZ2FpbnN0IHRoZSBsb2NhbCB2aWV3IG9mIGFsbCBkb2N1bWVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb24gLSBUaGUgcGVyc2lzdGVuY2UgdHJhbnNhY3Rpb24uXG4gICAgICogQHBhcmFtIHF1ZXJ5IC0gVGhlIHF1ZXJ5IHRvIG1hdGNoIGRvY3VtZW50cyBhZ2FpbnN0LlxuICAgICAqIEBwYXJhbSBzaW5jZVJlYWRUaW1lIC0gSWYgbm90IHNldCB0byBTbmFwc2hvdFZlcnNpb24ubWluKCksIHJldHVybiBvbmx5XG4gICAgICogICAgIGRvY3VtZW50cyB0aGF0IGhhdmUgYmVlbiByZWFkIHNpbmNlIHRoaXMgc25hcHNob3QgdmVyc2lvbiAoZXhjbHVzaXZlKS5cbiAgICAgKi8gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSh0LCBlLCBuKSB7XG4gICAgICAgIC8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSBxdWVyeSBtYXRjaGVzIGEgc2luZ2xlIGRvY3VtZW50IGJ5IHBhdGggKHJhdGhlciB0aGFuIGFcbiAqIGNvbGxlY3Rpb24pLlxuICovXG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gU3QuaXNEb2N1bWVudEtleSh0LnBhdGgpICYmIG51bGwgPT09IHQuY29sbGVjdGlvbkdyb3VwICYmIDAgPT09IHQuZmlsdGVycy5sZW5ndGg7XG4gICAgICAgIH0oZSkgPyB0aGlzLlNuKHQsIGUucGF0aCkgOiBJZShlKSA/IHRoaXMuRG4odCwgZSwgbikgOiB0aGlzLkNuKHQsIGUsIG4pO1xuICAgIH1cbiAgICBTbih0LCBlKSB7XG4gICAgICAgIC8vIEp1c3QgZG8gYSBzaW1wbGUgZG9jdW1lbnQgbG9va3VwLlxuICAgICAgICByZXR1cm4gdGhpcy5Sbih0LCBuZXcgU3QoZSkpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgbGV0IGUgPSBQbigpO1xuICAgICAgICAgICAgcmV0dXJuIHQuaXNGb3VuZERvY3VtZW50KCkgJiYgKGUgPSBlLmluc2VydCh0LmtleSwgdCkpLCBlO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIERuKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IGUuY29sbGVjdGlvbkdyb3VwO1xuICAgICAgICBsZXQgaSA9IFBuKCk7XG4gICAgICAgIHJldHVybiB0aGlzLkp0LmdldENvbGxlY3Rpb25QYXJlbnRzKHQsIHMpLm5leHQoKHIgPT4gR3MuZm9yRWFjaChyLCAociA9PiB7XG4gICAgICAgICAgICBjb25zdCBvID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgX2UoZSwgXG4gICAgICAgICAgICAgICAgLypjb2xsZWN0aW9uR3JvdXA9Ki8gbnVsbCwgdC5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgdC5maWx0ZXJzLnNsaWNlKCksIHQubGltaXQsIHQubGltaXRUeXBlLCB0LnN0YXJ0QXQsIHQuZW5kQXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBxdWVyeSBkb2VzIG5vdCBzcGVjaWZ5IGFueSBxdWVyeSBjb25zdHJhaW50cyB0aGF0XG4gKiBjb3VsZCByZW1vdmUgcmVzdWx0cy5cbiAqLyAoZSwgci5jaGlsZChzKSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5Dbih0LCBvLCBuKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICB0LmZvckVhY2goKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGkgPSBpLmluc2VydCh0LCBlKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSkpKTtcbiAgICB9XG4gICAgQ24odCwgZSwgbikge1xuICAgICAgICAvLyBRdWVyeSB0aGUgcmVtb3RlIGRvY3VtZW50cyBhbmQgb3ZlcmxheSBtdXRhdGlvbnMuXG4gICAgICAgIGxldCBzLCBpO1xuICAgICAgICByZXR1cm4gdGhpcy5KZS5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIGUsIG4pLm5leHQoKG4gPT4gKHMgPSBuLCB0aGlzLkFuLmdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ1F1ZXJ5KHQsIGUpKSkpLm5leHQoKGUgPT4gKGkgPSBlLCBcbiAgICAgICAgdGhpcy5Obih0LCBpLCBzKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIHMgPSB0O1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGkpIGZvciAoY29uc3QgZSBvZiB0Lm11dGF0aW9ucykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBlLmtleTtcbiAgICAgICAgICAgICAgICBsZXQgaSA9IHMuZ2V0KG4pO1xuICAgICAgICAgICAgICAgIG51bGwgPT0gaSAmJiAoXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGludmFsaWQgZG9jdW1lbnQgdG8gYXBwbHkgbXV0YXRpb25zIG9uIHRvcCBvZlxuICAgICAgICAgICAgICAgIGkgPSBXdC5uZXdJbnZhbGlkRG9jdW1lbnQobiksIHMgPSBzLmluc2VydChuLCBpKSksIHRuKGUsIGksIHQubG9jYWxXcml0ZVRpbWUpLCBpLmlzRm91bmREb2N1bWVudCgpIHx8IChzID0gcy5yZW1vdmUobikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSkpKSkubmV4dCgoKCkgPT4gKFxuICAgICAgICAvLyBGaW5hbGx5LCBmaWx0ZXIgb3V0IGFueSBkb2N1bWVudHMgdGhhdCBkb24ndCBhY3R1YWxseSBtYXRjaFxuICAgICAgICAvLyB0aGUgcXVlcnkuXG4gICAgICAgIHMuZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIFNlKGUsIG4pIHx8IChzID0gcy5yZW1vdmUodCkpO1xuICAgICAgICB9KSksIHMpKSk7XG4gICAgfVxuICAgIE5uKHQsIGUsIG4pIHtcbiAgICAgICAgbGV0IHMgPSBTbigpO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkgZm9yIChjb25zdCBlIG9mIHQubXV0YXRpb25zKSBlIGluc3RhbmNlb2Ygb24gJiYgbnVsbCA9PT0gbi5nZXQoZS5rZXkpICYmIChzID0gcy5hZGQoZS5rZXkpKTtcbiAgICAgICAgbGV0IGkgPSBuO1xuICAgICAgICByZXR1cm4gdGhpcy5KZS5nZXRFbnRyaWVzKHQsIHMpLm5leHQoKHQgPT4gKHQuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGUuaXNGb3VuZERvY3VtZW50KCkgJiYgKGkgPSBpLmluc2VydCh0LCBlKSk7XG4gICAgICAgIH0pKSwgaSkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgc2V0IG9mIGNoYW5nZXMgdG8gd2hhdCBkb2N1bWVudHMgYXJlIGN1cnJlbnRseSBpbiB2aWV3IGFuZCBvdXQgb2YgdmlldyBmb3JcbiAqIGEgZ2l2ZW4gcXVlcnkuIFRoZXNlIGNoYW5nZXMgYXJlIHNlbnQgdG8gdGhlIExvY2FsU3RvcmUgYnkgdGhlIFZpZXcgKHZpYVxuICogdGhlIFN5bmNFbmdpbmUpIGFuZCBhcmUgdXNlZCB0byBwaW4gLyB1bnBpbiBkb2N1bWVudHMgYXMgYXBwcm9wcmlhdGUuXG4gKi8gY2xhc3MgdXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHQsIHRoaXMuZnJvbUNhY2hlID0gZSwgdGhpcy5rbiA9IG4sIHRoaXMueG4gPSBzO1xuICAgIH1cbiAgICBzdGF0aWMgJG4odCwgZSkge1xuICAgICAgICBsZXQgbiA9IFNuKCksIHMgPSBTbigpO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZS5kb2NDaGFuZ2VzKSBzd2l0Y2ggKHQudHlwZSkge1xuICAgICAgICAgIGNhc2UgMCAvKiBBZGRlZCAqLyA6XG4gICAgICAgICAgICBuID0gbi5hZGQodC5kb2Mua2V5KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAxIC8qIFJlbW92ZWQgKi8gOlxuICAgICAgICAgICAgcyA9IHMuYWRkKHQuZG9jLmtleSk7XG4gLy8gZG8gbm90aGluZ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyB1cih0LCBlLmZyb21DYWNoZSwgbiwgcyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHF1ZXJ5IGVuZ2luZSB0aGF0IHRha2VzIGFkdmFudGFnZSBvZiB0aGUgdGFyZ2V0IGRvY3VtZW50IG1hcHBpbmcgaW4gdGhlXG4gKiBRdWVyeUNhY2hlLiBRdWVyeSBleGVjdXRpb24gaXMgb3B0aW1pemVkIGJ5IG9ubHkgcmVhZGluZyB0aGUgZG9jdW1lbnRzIHRoYXRcbiAqIHByZXZpb3VzbHkgbWF0Y2hlZCBhIHF1ZXJ5IHBsdXMgYW55IGRvY3VtZW50cyB0aGF0IHdlcmUgZWRpdGVkIGFmdGVyIHRoZVxuICogcXVlcnkgd2FzIGxhc3QgbGlzdGVuZWQgdG8uXG4gKlxuICogVGhlcmUgYXJlIHNvbWUgY2FzZXMgd2hlbiB0aGlzIG9wdGltaXphdGlvbiBpcyBub3QgZ3VhcmFudGVlZCB0byBwcm9kdWNlXG4gKiB0aGUgc2FtZSByZXN1bHRzIGFzIGZ1bGwgY29sbGVjdGlvbiBzY2Fucy4gSW4gdGhlc2UgY2FzZXMsIHF1ZXJ5XG4gKiBwcm9jZXNzaW5nIGZhbGxzIGJhY2sgdG8gZnVsbCBzY2Fucy4gVGhlc2UgY2FzZXMgYXJlOlxuICpcbiAqIC0gTGltaXQgcXVlcmllcyB3aGVyZSBhIGRvY3VtZW50IHRoYXQgbWF0Y2hlZCB0aGUgcXVlcnkgcHJldmlvdXNseSBubyBsb25nZXJcbiAqICAgbWF0Y2hlcyB0aGUgcXVlcnkuXG4gKlxuICogLSBMaW1pdCBxdWVyaWVzIHdoZXJlIGEgZG9jdW1lbnQgZWRpdCBtYXkgY2F1c2UgdGhlIGRvY3VtZW50IHRvIHNvcnQgYmVsb3dcbiAqICAgYW5vdGhlciBkb2N1bWVudCB0aGF0IGlzIGluIHRoZSBsb2NhbCBjYWNoZS5cbiAqXG4gKiAtIFF1ZXJpZXMgdGhhdCBoYXZlIG5ldmVyIGJlZW4gQ1VSUkVOVCBvciBmcmVlIG9mIGxpbWJvIGRvY3VtZW50cy5cbiAqLyBjbGFzcyBociB7XG4gICAgLyoqIFNldHMgdGhlIGRvY3VtZW50IHZpZXcgdG8gcXVlcnkgYWdhaW5zdC4gKi9cbiAgICBGbih0KSB7XG4gICAgICAgIHRoaXMuT24gPSB0O1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhbGwgbG9jYWwgZG9jdW1lbnRzIG1hdGNoaW5nIHRoZSBzcGVjaWZpZWQgcXVlcnkuICovICAgIGdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbiwgcykge1xuICAgICAgICAvLyBRdWVyaWVzIHRoYXQgbWF0Y2ggYWxsIGRvY3VtZW50cyBkb24ndCBiZW5lZml0IGZyb20gdXNpbmdcbiAgICAgICAgLy8ga2V5LWJhc2VkIGxvb2t1cHMuIEl0IGlzIG1vcmUgZWZmaWNpZW50IHRvIHNjYW4gYWxsIGRvY3VtZW50cyBpbiBhXG4gICAgICAgIC8vIGNvbGxlY3Rpb24sIHJhdGhlciB0aGFuIHRvIHBlcmZvcm0gaW5kaXZpZHVhbCBsb29rdXBzLlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIDAgPT09IHQuZmlsdGVycy5sZW5ndGggJiYgbnVsbCA9PT0gdC5saW1pdCAmJiBudWxsID09IHQuc3RhcnRBdCAmJiBudWxsID09IHQuZW5kQXQgJiYgKDAgPT09IHQuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCB8fCAxID09PSB0LmV4cGxpY2l0T3JkZXJCeS5sZW5ndGggJiYgdC5leHBsaWNpdE9yZGVyQnlbMF0uZmllbGQuaXNLZXlGaWVsZCgpKTtcbiAgICAgICAgfShlKSB8fCBuLmlzRXF1YWwoY3QubWluKCkpID8gdGhpcy5Nbih0LCBlKSA6IHRoaXMuT24udm4odCwgcykubmV4dCgoaSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gdGhpcy5MbihlLCBpKTtcbiAgICAgICAgICAgIHJldHVybiAoeWUoZSkgfHwgcGUoZSkpICYmIHRoaXMuQm4oZS5saW1pdFR5cGUsIHIsIHMsIG4pID8gdGhpcy5Nbih0LCBlKSA6IChrKCkgPD0gTG9nTGV2ZWwuREVCVUcgJiYgJChcIlF1ZXJ5RW5naW5lXCIsIFwiUmUtdXNpbmcgcHJldmlvdXMgcmVzdWx0IGZyb20gJXMgdG8gZXhlY3V0ZSBxdWVyeTogJXNcIiwgbi50b1N0cmluZygpLCBWZShlKSksIFxuICAgICAgICAgICAgdGhpcy5Pbi5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIGUsIG4pLm5leHQoKHQgPT4gKFxuICAgICAgICAgICAgLy8gV2UgbWVyZ2UgYHByZXZpb3VzUmVzdWx0c2AgaW50byBgdXBkYXRlUmVzdWx0c2AsIHNpbmNlXG4gICAgICAgICAgICAvLyBgdXBkYXRlUmVzdWx0c2AgaXMgYWxyZWFkeSBhIERvY3VtZW50TWFwLiBJZiBhIGRvY3VtZW50IGlzXG4gICAgICAgICAgICAvLyBjb250YWluZWQgaW4gYm90aCBsaXN0cywgdGhlbiBpdHMgY29udGVudHMgYXJlIHRoZSBzYW1lLlxuICAgICAgICAgICAgci5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICB0ID0gdC5pbnNlcnQoZS5rZXksIGUpO1xuICAgICAgICAgICAgfSkpLCB0KSkpKTtcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyBRdWVyaWVzIHRoYXQgaGF2ZSBuZXZlciBzZWVuIGEgc25hcHNob3Qgd2l0aG91dCBsaW1ibyBmcmVlIGRvY3VtZW50c1xuICAgICAgICAvLyBzaG91bGQgYWxzbyBiZSBydW4gYXMgYSBmdWxsIGNvbGxlY3Rpb24gc2Nhbi5cbiAgICAgICAgfVxuICAgIC8qKiBBcHBsaWVzIHRoZSBxdWVyeSBmaWx0ZXIgYW5kIHNvcnRpbmcgdG8gdGhlIHByb3ZpZGVkIGRvY3VtZW50cy4gICovICAgIExuKHQsIGUpIHtcbiAgICAgICAgLy8gU29ydCB0aGUgZG9jdW1lbnRzIGFuZCByZS1hcHBseSB0aGUgcXVlcnkgZmlsdGVyIHNpbmNlIHByZXZpb3VzbHlcbiAgICAgICAgLy8gbWF0Y2hpbmcgZG9jdW1lbnRzIGRvIG5vdCBuZWNlc3NhcmlseSBzdGlsbCBtYXRjaCB0aGUgcXVlcnkuXG4gICAgICAgIGxldCBuID0gbmV3IFRuKERlKHQpKTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoKGUsIHMpID0+IHtcbiAgICAgICAgICAgIFNlKHQsIHMpICYmIChuID0gbi5hZGQocykpO1xuICAgICAgICB9KSksIG47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaWYgYSBsaW1pdCBxdWVyeSBuZWVkcyB0byBiZSByZWZpbGxlZCBmcm9tIGNhY2hlLCBtYWtpbmcgaXRcbiAgICAgKiBpbmVsaWdpYmxlIGZvciBpbmRleC1mcmVlIGV4ZWN1dGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzb3J0ZWRQcmV2aW91c1Jlc3VsdHMgLSBUaGUgZG9jdW1lbnRzIHRoYXQgbWF0Y2hlZCB0aGUgcXVlcnkgd2hlbiBpdFxuICAgICAqIHdhcyBsYXN0IHN5bmNocm9uaXplZCwgc29ydGVkIGJ5IHRoZSBxdWVyeSdzIGNvbXBhcmF0b3IuXG4gICAgICogQHBhcmFtIHJlbW90ZUtleXMgLSBUaGUgZG9jdW1lbnQga2V5cyB0aGF0IG1hdGNoZWQgdGhlIHF1ZXJ5IGF0IHRoZSBsYXN0XG4gICAgICogc25hcHNob3QuXG4gICAgICogQHBhcmFtIGxpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiAtIFRoZSB2ZXJzaW9uIG9mIHRoZSBzbmFwc2hvdCB3aGVuIHRoZVxuICAgICAqIHF1ZXJ5IHdhcyBsYXN0IHN5bmNocm9uaXplZC5cbiAgICAgKi8gICAgQm4odCwgZSwgbiwgcykge1xuICAgICAgICAvLyBUaGUgcXVlcnkgbmVlZHMgdG8gYmUgcmVmaWxsZWQgaWYgYSBwcmV2aW91c2x5IG1hdGNoaW5nIGRvY3VtZW50IG5vXG4gICAgICAgIC8vIGxvbmdlciBtYXRjaGVzLlxuICAgICAgICBpZiAobi5zaXplICE9PSBlLnNpemUpIHJldHVybiAhMDtcbiAgICAgICAgLy8gTGltaXQgcXVlcmllcyBhcmUgbm90IGVsaWdpYmxlIGZvciBpbmRleC1mcmVlIHF1ZXJ5IGV4ZWN1dGlvbiBpZiB0aGVyZSBpc1xuICAgICAgICAvLyBhIHBvdGVudGlhbCB0aGF0IGFuIG9sZGVyIGRvY3VtZW50IGZyb20gY2FjaGUgbm93IHNvcnRzIGJlZm9yZSBhIGRvY3VtZW50XG4gICAgICAgIC8vIHRoYXQgd2FzIHByZXZpb3VzbHkgcGFydCBvZiB0aGUgbGltaXQuIFRoaXMsIGhvd2V2ZXIsIGNhbiBvbmx5IGhhcHBlbiBpZlxuICAgICAgICAvLyB0aGUgZG9jdW1lbnQgYXQgdGhlIGVkZ2Ugb2YgdGhlIGxpbWl0IGdvZXMgb3V0IG9mIGxpbWl0LlxuICAgICAgICAvLyBJZiBhIGRvY3VtZW50IHRoYXQgaXMgbm90IHRoZSBsaW1pdCBib3VuZGFyeSBzb3J0cyBkaWZmZXJlbnRseSxcbiAgICAgICAgLy8gdGhlIGJvdW5kYXJ5IG9mIHRoZSBsaW1pdCBpdHNlbGYgZGlkIG5vdCBjaGFuZ2UgYW5kIGRvY3VtZW50cyBmcm9tIGNhY2hlXG4gICAgICAgIC8vIHdpbGwgY29udGludWUgdG8gYmUgXCJyZWplY3RlZFwiIGJ5IHRoaXMgYm91bmRhcnkuIFRoZXJlZm9yZSwgd2UgY2FuIGlnbm9yZVxuICAgICAgICAvLyBhbnkgbW9kaWZpY2F0aW9ucyB0aGF0IGRvbid0IGFmZmVjdCB0aGUgbGFzdCBkb2N1bWVudC5cbiAgICAgICAgICAgICAgICBjb25zdCBpID0gXCJGXCIgLyogRmlyc3QgKi8gPT09IHQgPyBlLmxhc3QoKSA6IGUuZmlyc3QoKTtcbiAgICAgICAgcmV0dXJuICEhaSAmJiAoaS5oYXNQZW5kaW5nV3JpdGVzIHx8IGkudmVyc2lvbi5jb21wYXJlVG8ocykgPiAwKTtcbiAgICB9XG4gICAgTW4odCwgZSkge1xuICAgICAgICByZXR1cm4gaygpIDw9IExvZ0xldmVsLkRFQlVHICYmICQoXCJRdWVyeUVuZ2luZVwiLCBcIlVzaW5nIGZ1bGwgY29sbGVjdGlvbiBzY2FuIHRvIGV4ZWN1dGUgcXVlcnk6XCIsIFZlKGUpKSwgXG4gICAgICAgIHRoaXMuT24uZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSh0LCBlLCBjdC5taW4oKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBJbXBsZW1lbnRzIGBMb2NhbFN0b3JlYCBpbnRlcmZhY2UuXG4gKlxuICogTm90ZTogc29tZSBmaWVsZCBkZWZpbmVkIGluIHRoaXMgY2xhc3MgbWlnaHQgaGF2ZSBwdWJsaWMgYWNjZXNzIGxldmVsLCBidXRcbiAqIHRoZSBjbGFzcyBpcyBub3QgZXhwb3J0ZWQgc28gdGhleSBhcmUgb25seSBhY2Nlc3NpYmxlIGZyb20gdGhpcyBtb2R1bGUuXG4gKiBUaGlzIGlzIHVzZWZ1bCB0byBpbXBsZW1lbnQgb3B0aW9uYWwgZmVhdHVyZXMgKGxpa2UgYnVuZGxlcykgaW4gZnJlZVxuICogZnVuY3Rpb25zLCBzdWNoIHRoYXQgdGhleSBhcmUgdHJlZS1zaGFrZWFibGUuXG4gKi9cbmNsYXNzIGxyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogTWFuYWdlcyBvdXIgaW4tbWVtb3J5IG9yIGR1cmFibGUgcGVyc2lzdGVuY2UuICovXG4gICAgdCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gdCwgdGhpcy5VbiA9IGUsIHRoaXMuayA9IHMsIFxuICAgICAgICAvKipcbiAgICAgICAgICogTWFwcyBhIHRhcmdldElEIHRvIGRhdGEgYWJvdXQgaXRzIHRhcmdldC5cbiAgICAgICAgICpcbiAgICAgICAgICogUE9SVElORyBOT1RFOiBXZSBhcmUgdXNpbmcgYW4gaW1tdXRhYmxlIGRhdGEgc3RydWN0dXJlIG9uIFdlYiB0byBtYWtlIHJlLXJ1bnNcbiAgICAgICAgICogb2YgYGFwcGx5UmVtb3RlRXZlbnQoKWAgaWRlbXBvdGVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucW4gPSBuZXcgZ24oaXQpLCBcbiAgICAgICAgLyoqIE1hcHMgYSB0YXJnZXQgdG8gaXRzIHRhcmdldElELiAqL1xuICAgICAgICAvLyBUT0RPKHd1YW5keSk6IEV2YWx1YXRlIGlmIFRhcmdldElkIGNhbiBiZSBwYXJ0IG9mIFRhcmdldC5cbiAgICAgICAgdGhpcy5LbiA9IG5ldyBHaSgodCA9PiBIdCh0KSksIFl0KSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgcmVhZCB0aW1lIG9mIHRoZSBsYXN0IGVudHJ5IHByb2Nlc3NlZCBieSBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgLlxuICAgICAgICAgKlxuICAgICAgICAgKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5qbiA9IGN0Lm1pbigpLCB0aGlzLkFuID0gdC5nZXRNdXRhdGlvblF1ZXVlKG4pLCB0aGlzLlFuID0gdC5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCksIFxuICAgICAgICB0aGlzLkhlID0gdC5nZXRUYXJnZXRDYWNoZSgpLCB0aGlzLlduID0gbmV3IGNyKHRoaXMuUW4sIHRoaXMuQW4sIHRoaXMucGVyc2lzdGVuY2UuZ2V0SW5kZXhNYW5hZ2VyKCkpLCBcbiAgICAgICAgdGhpcy5ZZSA9IHQuZ2V0QnVuZGxlQ2FjaGUoKSwgdGhpcy5Vbi5Gbih0aGlzLlduKTtcbiAgICB9XG4gICAgY29sbGVjdEdhcmJhZ2UodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkNvbGxlY3QgZ2FyYmFnZVwiLCBcInJlYWR3cml0ZS1wcmltYXJ5XCIsIChlID0+IHQuY29sbGVjdChlLCB0aGlzLnFuKSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZnIoXG4vKiogTWFuYWdlcyBvdXIgaW4tbWVtb3J5IG9yIGR1cmFibGUgcGVyc2lzdGVuY2UuICovXG50LCBlLCBuLCBzKSB7XG4gICAgcmV0dXJuIG5ldyBscih0LCBlLCBuLCBzKTtcbn1cblxuLyoqXG4gKiBUZWxscyB0aGUgTG9jYWxTdG9yZSB0aGF0IHRoZSBjdXJyZW50bHkgYXV0aGVudGljYXRlZCB1c2VyIGhhcyBjaGFuZ2VkLlxuICpcbiAqIEluIHJlc3BvbnNlIHRoZSBsb2NhbCBzdG9yZSBzd2l0Y2hlcyB0aGUgbXV0YXRpb24gcXVldWUgdG8gdGhlIG5ldyB1c2VyIGFuZFxuICogcmV0dXJucyBhbnkgcmVzdWx0aW5nIGRvY3VtZW50IGNoYW5nZXMuXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogQW5kcm9pZCBhbmQgaU9TIG9ubHkgcmV0dXJuIHRoZSBkb2N1bWVudHMgYWZmZWN0ZWQgYnkgdGhlXG4vLyBjaGFuZ2UuXG5hc3luYyBmdW5jdGlvbiBkcih0LCBlKSB7XG4gICAgY29uc3QgbiA9IHEodCk7XG4gICAgbGV0IHMgPSBuLkFuLCBpID0gbi5XbjtcbiAgICBjb25zdCByID0gYXdhaXQgbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkhhbmRsZSB1c2VyIGNoYW5nZVwiLCBcInJlYWRvbmx5XCIsICh0ID0+IHtcbiAgICAgICAgLy8gU3dhcCBvdXQgdGhlIG11dGF0aW9uIHF1ZXVlLCBncmFiYmluZyB0aGUgcGVuZGluZyBtdXRhdGlvbiBiYXRjaGVzXG4gICAgICAgIC8vIGJlZm9yZSBhbmQgYWZ0ZXIuXG4gICAgICAgIGxldCByO1xuICAgICAgICByZXR1cm4gbi5Bbi5nZXRBbGxNdXRhdGlvbkJhdGNoZXModCkubmV4dCgobyA9PiAociA9IG8sIHMgPSBuLnBlcnNpc3RlbmNlLmdldE11dGF0aW9uUXVldWUoZSksIFxuICAgICAgICAvLyBSZWNyZWF0ZSBvdXIgTG9jYWxEb2N1bWVudHNWaWV3IHVzaW5nIHRoZSBuZXdcbiAgICAgICAgLy8gTXV0YXRpb25RdWV1ZS5cbiAgICAgICAgaSA9IG5ldyBjcihuLlFuLCBzLCBuLnBlcnNpc3RlbmNlLmdldEluZGV4TWFuYWdlcigpKSwgcy5nZXRBbGxNdXRhdGlvbkJhdGNoZXModCkpKSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gW10sIHMgPSBbXTtcbiAgICAgICAgICAgIC8vIFVuaW9uIHRoZSBvbGQvbmV3IGNoYW5nZWQga2V5cy5cbiAgICAgICAgICAgIGxldCBvID0gU24oKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiByKSB7XG4gICAgICAgICAgICAgICAgbi5wdXNoKHQuYmF0Y2hJZCk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHQubXV0YXRpb25zKSBvID0gby5hZGQoZS5rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIHtcbiAgICAgICAgICAgICAgICBzLnB1c2godC5iYXRjaElkKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdC5tdXRhdGlvbnMpIG8gPSBvLmFkZChlLmtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBSZXR1cm4gdGhlIHNldCBvZiBhbGwgKHBvdGVudGlhbGx5KSBjaGFuZ2VkIGRvY3VtZW50cyBhbmQgdGhlIGxpc3RcbiAgICAgICAgICAgIC8vIG9mIG11dGF0aW9uIGJhdGNoIElEcyB0aGF0IHdlcmUgYWZmZWN0ZWQgYnkgY2hhbmdlLlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkudm4odCwgbykubmV4dCgodCA9PiAoe1xuICAgICAgICAgICAgICAgIEduOiB0LFxuICAgICAgICAgICAgICAgIHJlbW92ZWRCYXRjaElkczogbixcbiAgICAgICAgICAgICAgICBhZGRlZEJhdGNoSWRzOiBzXG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICB9KSk7XG4gICAgfSkpO1xuICAgIHJldHVybiBuLkFuID0gcywgbi5XbiA9IGksIG4uVW4uRm4obi5XbiksIHI7XG59XG5cbi8qIEFjY2VwdHMgbG9jYWxseSBnZW5lcmF0ZWQgTXV0YXRpb25zIGFuZCBjb21taXQgdGhlbSB0byBzdG9yYWdlLiAqL1xuLyoqXG4gKiBBY2tub3dsZWRnZXMgdGhlIGdpdmVuIGJhdGNoLlxuICpcbiAqIE9uIHRoZSBoYXBweSBwYXRoIHdoZW4gYSBiYXRjaCBpcyBhY2tub3dsZWRnZWQsIHRoZSBsb2NhbCBzdG9yZSB3aWxsXG4gKlxuICogICsgcmVtb3ZlIHRoZSBiYXRjaCBmcm9tIHRoZSBtdXRhdGlvbiBxdWV1ZTtcbiAqICArIGFwcGx5IHRoZSBjaGFuZ2VzIHRvIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGU7XG4gKiAgKyByZWNhbGN1bGF0ZSB0aGUgbGF0ZW5jeSBjb21wZW5zYXRlZCB2aWV3IGltcGxpZWQgYnkgdGhvc2UgY2hhbmdlcyAodGhlcmVcbiAqICAgIG1heSBiZSBtdXRhdGlvbnMgaW4gdGhlIHF1ZXVlIHRoYXQgYWZmZWN0IHRoZSBkb2N1bWVudHMgYnV0IGhhdmVuJ3QgYmVlblxuICogICAgYWNrbm93bGVkZ2VkIHlldCk7IGFuZFxuICogICsgZ2l2ZSB0aGUgY2hhbmdlZCBkb2N1bWVudHMgYmFjayB0aGUgc3luYyBlbmdpbmVcbiAqXG4gKiBAcmV0dXJucyBUaGUgcmVzdWx0aW5nIChtb2RpZmllZCkgZG9jdW1lbnRzLlxuICovXG5mdW5jdGlvbiB3cih0LCBlKSB7XG4gICAgY29uc3QgbiA9IHEodCk7XG4gICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJBY2tub3dsZWRnZSBiYXRjaFwiLCBcInJlYWR3cml0ZS1wcmltYXJ5XCIsICh0ID0+IHtcbiAgICAgICAgY29uc3QgcyA9IGUuYmF0Y2gua2V5cygpLCBpID0gbi5Rbi5uZXdDaGFuZ2VCdWZmZXIoe1xuICAgICAgICAgICAgdHJhY2tSZW1vdmFsczogITBcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlLCBuLCBzKSB7XG4gICAgICAgICAgICBjb25zdCBpID0gbi5iYXRjaCwgciA9IGkua2V5cygpO1xuICAgICAgICAgICAgbGV0IG8gPSBHcy5yZXNvbHZlKCk7XG4gICAgICAgICAgICByZXR1cm4gci5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICBvID0gby5uZXh0KCgoKSA9PiBzLmdldEVudHJ5KGUsIHQpKSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuLmRvY1ZlcnNpb25zLmdldCh0KTtcbiAgICAgICAgICAgICAgICAgICAgQihudWxsICE9PSByKSwgZS52ZXJzaW9uLmNvbXBhcmVUbyhyKSA8IDAgJiYgKGkuYXBwbHlUb1JlbW90ZURvY3VtZW50KGUsIG4pLCBlLmlzVmFsaWREb2N1bWVudCgpICYmIFxuICAgICAgICAgICAgICAgICAgICAvLyBXZSB1c2UgdGhlIGNvbW1pdFZlcnNpb24gYXMgdGhlIHJlYWRUaW1lIHJhdGhlciB0aGFuIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBkb2N1bWVudCdzIHVwZGF0ZVRpbWUgc2luY2UgdGhlIHVwZGF0ZVRpbWUgaXMgbm90IGFkdmFuY2VkXG4gICAgICAgICAgICAgICAgICAgIC8vIGZvciB1cGRhdGVzIHRoYXQgZG8gbm90IG1vZGlmeSB0aGUgdW5kZXJseWluZyBkb2N1bWVudC5cbiAgICAgICAgICAgICAgICAgICAgcy5hZGRFbnRyeShlLCBuLmNvbW1pdFZlcnNpb24pKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSksIG8ubmV4dCgoKCkgPT4gdC5Bbi5yZW1vdmVNdXRhdGlvbkJhdGNoKGUsIGkpKSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqIFJldHVybnMgdGhlIGxvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50cyBhZmZlY3RlZCBieSBhIG11dGF0aW9uIGJhdGNoLiAqL1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgICAgICAobiwgdCwgZSwgaSkubmV4dCgoKCkgPT4gaS5hcHBseSh0KSkpLm5leHQoKCgpID0+IG4uQW4ucGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2sodCkpKS5uZXh0KCgoKSA9PiBuLlduLnZuKHQsIHMpKSk7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgbXV0YXRpb25zIGZyb20gdGhlIE11dGF0aW9uUXVldWUgZm9yIHRoZSBzcGVjaWZpZWQgYmF0Y2g7XG4gKiBMb2NhbERvY3VtZW50cyB3aWxsIGJlIHJlY2FsY3VsYXRlZC5cbiAqXG4gKiBAcmV0dXJucyBUaGUgcmVzdWx0aW5nIG1vZGlmaWVkIGRvY3VtZW50cy5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBsYXN0IGNvbnNpc3RlbnQgc25hcHNob3QgcHJvY2Vzc2VkICh1c2VkIGJ5IHRoZSBSZW1vdGVTdG9yZSB0b1xuICogZGV0ZXJtaW5lIHdoZXRoZXIgdG8gYnVmZmVyIGluY29taW5nIHNuYXBzaG90cyBmcm9tIHRoZSBiYWNrZW5kKS5cbiAqL1xuZnVuY3Rpb24gX3IodCkge1xuICAgIGNvbnN0IGUgPSBxKHQpO1xuICAgIHJldHVybiBlLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IGxhc3QgcmVtb3RlIHNuYXBzaG90IHZlcnNpb25cIiwgXCJyZWFkb25seVwiLCAodCA9PiBlLkhlLmdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24odCkpKTtcbn1cblxuLyoqXG4gKiBVcGRhdGVzIHRoZSBcImdyb3VuZC1zdGF0ZVwiIChyZW1vdGUpIGRvY3VtZW50cy4gV2UgYXNzdW1lIHRoYXQgdGhlIHJlbW90ZVxuICogZXZlbnQgcmVmbGVjdHMgYW55IHdyaXRlIGJhdGNoZXMgdGhhdCBoYXZlIGJlZW4gYWNrbm93bGVkZ2VkIG9yIHJlamVjdGVkXG4gKiAoaS5lLiB3ZSBkbyBub3QgcmUtYXBwbHkgbG9jYWwgbXV0YXRpb25zIHRvIHVwZGF0ZXMgZnJvbSB0aGlzIGV2ZW50KS5cbiAqXG4gKiBMb2NhbERvY3VtZW50cyBhcmUgcmUtY2FsY3VsYXRlZCBpZiB0aGVyZSBhcmUgcmVtYWluaW5nIG11dGF0aW9ucyBpbiB0aGVcbiAqIHF1ZXVlLlxuICovIGZ1bmN0aW9uIG1yKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KSwgcyA9IGUuc25hcHNob3RWZXJzaW9uO1xuICAgIGxldCBpID0gbi5xbjtcbiAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFwcGx5IHJlbW90ZSBldmVudFwiLCBcInJlYWR3cml0ZS1wcmltYXJ5XCIsICh0ID0+IHtcbiAgICAgICAgY29uc3QgciA9IG4uUW4ubmV3Q2hhbmdlQnVmZmVyKHtcbiAgICAgICAgICAgIHRyYWNrUmVtb3ZhbHM6ICEwXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBSZXNldCBuZXdUYXJnZXREYXRhQnlUYXJnZXRNYXAgaW4gY2FzZSB0aGlzIHRyYW5zYWN0aW9uIGdldHMgcmUtcnVuLlxuICAgICAgICAgICAgICAgIGkgPSBuLnFuO1xuICAgICAgICBjb25zdCBvID0gW107XG4gICAgICAgIGUudGFyZ2V0Q2hhbmdlcy5mb3JFYWNoKCgoZSwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgYSA9IGkuZ2V0KHIpO1xuICAgICAgICAgICAgaWYgKCFhKSByZXR1cm47XG4gICAgICAgICAgICAvLyBPbmx5IHVwZGF0ZSB0aGUgcmVtb3RlIGtleXMgaWYgdGhlIHRhcmdldCBpcyBzdGlsbCBhY3RpdmUuIFRoaXNcbiAgICAgICAgICAgIC8vIGVuc3VyZXMgdGhhdCB3ZSBjYW4gcGVyc2lzdCB0aGUgdXBkYXRlZCB0YXJnZXQgZGF0YSBhbG9uZyB3aXRoXG4gICAgICAgICAgICAvLyB0aGUgdXBkYXRlZCBhc3NpZ25tZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgby5wdXNoKG4uSGUucmVtb3ZlTWF0Y2hpbmdLZXlzKHQsIGUucmVtb3ZlZERvY3VtZW50cywgcikubmV4dCgoKCkgPT4gbi5IZS5hZGRNYXRjaGluZ0tleXModCwgZS5hZGRlZERvY3VtZW50cywgcikpKSk7XG4gICAgICAgICAgICBjb25zdCBjID0gZS5yZXN1bWVUb2tlbjtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgcmVzdW1lIHRva2VuIGlmIHRoZSBjaGFuZ2UgaW5jbHVkZXMgb25lLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGMuYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHUgPSBhLndpdGhSZXN1bWVUb2tlbihjLCBzKS53aXRoU2VxdWVuY2VOdW1iZXIodC5jdXJyZW50U2VxdWVuY2VOdW1iZXIpO1xuICAgICAgICAgICAgICAgIGkgPSBpLmluc2VydChyLCB1KSwgXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSB0YXJnZXQgZGF0YSBpZiB0aGVyZSBhcmUgdGFyZ2V0IGNoYW5nZXMgKG9yIGlmXG4gICAgICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0aW1lIGhhcyBwYXNzZWQgc2luY2UgdGhlIGxhc3QgdXBkYXRlKS5cbiAgICAgICAgICAgICAgICAvKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgbmV3VGFyZ2V0RGF0YSBzaG91bGQgYmUgcGVyc2lzdGVkIGR1cmluZyBhbiB1cGRhdGUgb2ZcbiAqIGFuIGFjdGl2ZSB0YXJnZXQuIFRhcmdldERhdGEgc2hvdWxkIGFsd2F5cyBiZSBwZXJzaXN0ZWQgd2hlbiBhIHRhcmdldCBpc1xuICogYmVpbmcgcmVsZWFzZWQgYW5kIHNob3VsZCBub3QgY2FsbCB0aGlzIGZ1bmN0aW9uLlxuICpcbiAqIFdoaWxlIHRoZSB0YXJnZXQgaXMgYWN0aXZlLCBUYXJnZXREYXRhIHVwZGF0ZXMgY2FuIGJlIG9taXR0ZWQgd2hlbiBub3RoaW5nXG4gKiBhYm91dCB0aGUgdGFyZ2V0IGhhcyBjaGFuZ2VkIGV4Y2VwdCBtZXRhZGF0YSBsaWtlIHRoZSByZXN1bWUgdG9rZW4gb3JcbiAqIHNuYXBzaG90IHZlcnNpb24uIE9jY2FzaW9uYWxseSBpdCdzIHdvcnRoIHRoZSBleHRyYSB3cml0ZSB0byBwcmV2ZW50IHRoZXNlXG4gKiB2YWx1ZXMgZnJvbSBnZXR0aW5nIHRvbyBzdGFsZSBhZnRlciBhIGNyYXNoLCBidXQgdGhpcyBkb2Vzbid0IGhhdmUgdG8gYmVcbiAqIHRvbyBmcmVxdWVudC5cbiAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQWx3YXlzIHBlcnNpc3QgdGFyZ2V0IGRhdGEgaWYgd2UgZG9uJ3QgYWxyZWFkeSBoYXZlIGEgcmVzdW1lIHRva2VuLlxuICAgICAgICAgICAgICAgICAgICBpZiAoQihlLnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDApLCAwID09PSB0LnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSkgcmV0dXJuICEwO1xuICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCBhbGxvdyByZXN1bWUgdG9rZW4gY2hhbmdlcyB0byBiZSBidWZmZXJlZCBpbmRlZmluaXRlbHkuIFRoaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gYWxsb3dzIHVzIHRvIGJlIHJlYXNvbmFibHkgdXAtdG8tZGF0ZSBhZnRlciBhIGNyYXNoIGFuZCBhdm9pZHMgbmVlZGluZ1xuICAgICAgICAgICAgICAgICAgICAvLyB0byBsb29wIG92ZXIgYWxsIGFjdGl2ZSBxdWVyaWVzIG9uIHNodXRkb3duLiBFc3BlY2lhbGx5IGluIHRoZSBicm93c2VyXG4gICAgICAgICAgICAgICAgICAgIC8vIHdlIG1heSBub3QgZ2V0IHRpbWUgdG8gZG8gYW55dGhpbmcgaW50ZXJlc3Rpbmcgd2hpbGUgdGhlIGN1cnJlbnQgdGFiIGlzXG4gICAgICAgICAgICAgICAgICAgIC8vIGNsb3NpbmcuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUuc25hcHNob3RWZXJzaW9uLnRvTWljcm9zZWNvbmRzKCkgLSB0LnNuYXBzaG90VmVyc2lvbi50b01pY3Jvc2Vjb25kcygpID49IDNlOCkgcmV0dXJuICEwO1xuICAgICAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UgaWYgdGhlIG9ubHkgdGhpbmcgdGhhdCBoYXMgY2hhbmdlZCBhYm91dCBhIHRhcmdldCBpcyBpdHMgcmVzdW1lXG4gICAgICAgICAgICAgICAgICAgIC8vIHRva2VuIGl0J3Mgbm90IHdvcnRoIHBlcnNpc3RpbmcuIE5vdGUgdGhhdCB0aGUgUmVtb3RlU3RvcmUga2VlcHMgYW5cbiAgICAgICAgICAgICAgICAgICAgLy8gaW4tbWVtb3J5IHZpZXcgb2YgdGhlIGN1cnJlbnRseSBhY3RpdmUgdGFyZ2V0cyB3aGljaCBpbmNsdWRlcyB0aGUgY3VycmVudFxuICAgICAgICAgICAgICAgICAgICAvLyByZXN1bWUgdG9rZW4sIHNvIHN0cmVhbSBmYWlsdXJlIG9yIHVzZXIgY2hhbmdlcyB3aWxsIHN0aWxsIHVzZSBhblxuICAgICAgICAgICAgICAgICAgICAvLyB1cC10by1kYXRlIHJlc3VtZSB0b2tlbiByZWdhcmRsZXNzIG9mIHdoYXQgd2UgZG8gaGVyZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5hZGRlZERvY3VtZW50cy5zaXplICsgbi5tb2RpZmllZERvY3VtZW50cy5zaXplICsgbi5yZW1vdmVkRG9jdW1lbnRzLnNpemUgPiAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvKipcbiAqIE5vdGlmaWVzIGxvY2FsIHN0b3JlIG9mIHRoZSBjaGFuZ2VkIHZpZXdzIHRvIGxvY2FsbHkgcGluIGRvY3VtZW50cy5cbiAqLyAoYSwgdSwgZSkgJiYgby5wdXNoKG4uSGUudXBkYXRlVGFyZ2V0RGF0YSh0LCB1KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgbGV0IGEgPSBBbigpO1xuICAgICAgICAvLyBIQUNLOiBUaGUgb25seSByZWFzb24gd2UgYWxsb3cgYSBudWxsIHNuYXBzaG90IHZlcnNpb24gaXMgc28gdGhhdCB3ZVxuICAgICAgICAvLyBjYW4gc3ludGhlc2l6ZSByZW1vdGUgZXZlbnRzIHdoZW4gd2UgZ2V0IHBlcm1pc3Npb24gZGVuaWVkIGVycm9ycyB3aGlsZVxuICAgICAgICAvLyB0cnlpbmcgdG8gcmVzb2x2ZSB0aGUgc3RhdGUgb2YgYSBsb2NhbGx5IGNhY2hlZCBkb2N1bWVudCB0aGF0IGlzIGluXG4gICAgICAgIC8vIGxpbWJvLlxuICAgICAgICBpZiAoZS5kb2N1bWVudFVwZGF0ZXMuZm9yRWFjaCgoKHMsIGkpID0+IHtcbiAgICAgICAgICAgIGUucmVzb2x2ZWRMaW1ib0RvY3VtZW50cy5oYXMocykgJiYgby5wdXNoKG4ucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUudXBkYXRlTGltYm9Eb2N1bWVudCh0LCBzKSk7XG4gICAgICAgIH0pKSwgXG4gICAgICAgIC8vIEVhY2ggbG9vcCBpdGVyYXRpb24gb25seSBhZmZlY3RzIGl0cyBcIm93blwiIGRvYywgc28gaXQncyBzYWZlIHRvIGdldCBhbGwgdGhlIHJlbW90ZVxuICAgICAgICAvLyBkb2N1bWVudHMgaW4gYWR2YW5jZSBpbiBhIHNpbmdsZSBjYWxsLlxuICAgICAgICBvLnB1c2goZ3IodCwgciwgZS5kb2N1bWVudFVwZGF0ZXMsIHMsIHZvaWQgMCkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBhID0gdDtcbiAgICAgICAgfSkpKSwgIXMuaXNFcXVhbChjdC5taW4oKSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuLkhlLmdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24odCkubmV4dCgoZSA9PiBuLkhlLnNldFRhcmdldHNNZXRhZGF0YSh0LCB0LmN1cnJlbnRTZXF1ZW5jZU51bWJlciwgcykpKTtcbiAgICAgICAgICAgIG8ucHVzaChlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gR3Mud2FpdEZvcihvKS5uZXh0KCgoKSA9PiByLmFwcGx5KHQpKSkubmV4dCgoKCkgPT4gbi5Xbi5Wbih0LCBhKSkpLm5leHQoKCgpID0+IGEpKTtcbiAgICB9KSkudGhlbigodCA9PiAobi5xbiA9IGksIHQpKSk7XG59XG5cbi8qKlxuICogUG9wdWxhdGVzIGRvY3VtZW50IGNoYW5nZSBidWZmZXIgd2l0aCBkb2N1bWVudHMgZnJvbSBiYWNrZW5kIG9yIGEgYnVuZGxlLlxuICogUmV0dXJucyB0aGUgZG9jdW1lbnQgY2hhbmdlcyByZXN1bHRpbmcgZnJvbSBhcHBseWluZyB0aG9zZSBkb2N1bWVudHMuXG4gKlxuICogQHBhcmFtIHR4biAtIFRyYW5zYWN0aW9uIHRvIHVzZSB0byByZWFkIGV4aXN0aW5nIGRvY3VtZW50cyBmcm9tIHN0b3JhZ2UuXG4gKiBAcGFyYW0gZG9jdW1lbnRCdWZmZXIgLSBEb2N1bWVudCBidWZmZXIgdG8gY29sbGVjdCB0aGUgcmVzdWx0ZWQgY2hhbmdlcyB0byBiZVxuICogICAgICAgIGFwcGxpZWQgdG8gc3RvcmFnZS5cbiAqIEBwYXJhbSBkb2N1bWVudHMgLSBEb2N1bWVudHMgdG8gYmUgYXBwbGllZC5cbiAqIEBwYXJhbSBnbG9iYWxWZXJzaW9uIC0gQSBgU25hcHNob3RWZXJzaW9uYCByZXByZXNlbnRpbmcgdGhlIHJlYWQgdGltZSBpZiBhbGxcbiAqICAgICAgICBkb2N1bWVudHMgaGF2ZSB0aGUgc2FtZSByZWFkIHRpbWUuXG4gKiBAcGFyYW0gZG9jdW1lbnRWZXJzaW9ucyAtIEEgRG9jdW1lbnRLZXktdG8tU25hcHNob3RWZXJzaW9uIG1hcCBpZiBkb2N1bWVudHNcbiAqICAgICAgICBoYXZlIHRoZWlyIG93biByZWFkIHRpbWUuXG4gKlxuICogTm90ZTogdGhpcyBmdW5jdGlvbiB3aWxsIHVzZSBgZG9jdW1lbnRWZXJzaW9uc2AgaWYgaXQgaXMgZGVmaW5lZDtcbiAqIHdoZW4gaXQgaXMgbm90IGRlZmluZWQsIHJlc29ydHMgdG8gYGdsb2JhbFZlcnNpb25gLlxuICovIGZ1bmN0aW9uIGdyKHQsIGUsIG4sIHMsIFxuLy8gVE9ETyh3dWFuZHkpOiBXZSBjb3VsZCBhZGQgYHJlYWRUaW1lYCB0byBNYXliZURvY3VtZW50IGluc3RlYWQgdG8gcmVtb3ZlXG4vLyB0aGlzIHBhcmFtZXRlci5cbmkpIHtcbiAgICBsZXQgciA9IFNuKCk7XG4gICAgcmV0dXJuIG4uZm9yRWFjaCgodCA9PiByID0gci5hZGQodCkpKSwgZS5nZXRFbnRyaWVzKHQsIHIpLm5leHQoKHQgPT4ge1xuICAgICAgICBsZXQgciA9IEFuKCk7XG4gICAgICAgIHJldHVybiBuLmZvckVhY2goKChuLCBvKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhID0gdC5nZXQobiksIGMgPSAobnVsbCA9PSBpID8gdm9pZCAwIDogaS5nZXQobikpIHx8IHM7XG4gICAgICAgICAgICAvLyBOb3RlOiBUaGUgb3JkZXIgb2YgdGhlIHN0ZXBzIGJlbG93IGlzIGltcG9ydGFudCwgc2luY2Ugd2Ugd2FudFxuICAgICAgICAgICAgLy8gdG8gZW5zdXJlIHRoYXQgcmVqZWN0ZWQgbGltYm8gcmVzb2x1dGlvbnMgKHdoaWNoIGZhYnJpY2F0ZVxuICAgICAgICAgICAgLy8gTm9Eb2N1bWVudHMgd2l0aCBTbmFwc2hvdFZlcnNpb24ubWluKCkpIG5ldmVyIGFkZCBkb2N1bWVudHMgdG9cbiAgICAgICAgICAgIC8vIGNhY2hlLlxuICAgICAgICAgICAgby5pc05vRG9jdW1lbnQoKSAmJiBvLnZlcnNpb24uaXNFcXVhbChjdC5taW4oKSkgPyAoXG4gICAgICAgICAgICAvLyBOb0RvY3VtZW50cyB3aXRoIFNuYXBzaG90VmVyc2lvbi5taW4oKSBhcmUgdXNlZCBpbiBtYW51ZmFjdHVyZWRcbiAgICAgICAgICAgIC8vIGV2ZW50cy4gV2UgcmVtb3ZlIHRoZXNlIGRvY3VtZW50cyBmcm9tIGNhY2hlIHNpbmNlIHdlIGxvc3RcbiAgICAgICAgICAgIC8vIGFjY2Vzcy5cbiAgICAgICAgICAgIGUucmVtb3ZlRW50cnkobiwgYyksIHIgPSByLmluc2VydChuLCBvKSkgOiAhYS5pc1ZhbGlkRG9jdW1lbnQoKSB8fCBvLnZlcnNpb24uY29tcGFyZVRvKGEudmVyc2lvbikgPiAwIHx8IDAgPT09IG8udmVyc2lvbi5jb21wYXJlVG8oYS52ZXJzaW9uKSAmJiBhLmhhc1BlbmRpbmdXcml0ZXMgPyAoZS5hZGRFbnRyeShvLCBjKSwgXG4gICAgICAgICAgICByID0gci5pbnNlcnQobiwgbykpIDogJChcIkxvY2FsU3RvcmVcIiwgXCJJZ25vcmluZyBvdXRkYXRlZCB3YXRjaCB1cGRhdGUgZm9yIFwiLCBuLCBcIi4gQ3VycmVudCB2ZXJzaW9uOlwiLCBhLnZlcnNpb24sIFwiIFdhdGNoIHZlcnNpb246XCIsIG8udmVyc2lvbik7XG4gICAgICAgIH0pKSwgcjtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgbXV0YXRpb24gYmF0Y2ggYWZ0ZXIgdGhlIHBhc3NlZCBpbiBiYXRjaElkIGluIHRoZSBtdXRhdGlvbiBxdWV1ZVxuICogb3IgbnVsbCBpZiBlbXB0eS5cbiAqIEBwYXJhbSBhZnRlckJhdGNoSWQgLSBJZiBwcm92aWRlZCwgdGhlIGJhdGNoIHRvIHNlYXJjaCBhZnRlci5cbiAqIEByZXR1cm5zIFRoZSBuZXh0IG11dGF0aW9uIG9yIG51bGwgaWYgdGhlcmUgd2Fzbid0IG9uZS5cbiAqL1xuZnVuY3Rpb24geXIodCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IG5leHQgbXV0YXRpb24gYmF0Y2hcIiwgXCJyZWFkb25seVwiLCAodCA9PiAodm9pZCAwID09PSBlICYmIChlID0gLTEpLCBcbiAgICBuLkFuLmdldE5leHRNdXRhdGlvbkJhdGNoQWZ0ZXJCYXRjaElkKHQsIGUpKSkpO1xufVxuXG4vKipcbiAqIFJlYWRzIHRoZSBjdXJyZW50IHZhbHVlIG9mIGEgRG9jdW1lbnQgd2l0aCBhIGdpdmVuIGtleSBvciBudWxsIGlmIG5vdFxuICogZm91bmQgLSB1c2VkIGZvciB0ZXN0aW5nLlxuICovXG4vKipcbiAqIEFzc2lnbnMgdGhlIGdpdmVuIHRhcmdldCBhbiBpbnRlcm5hbCBJRCBzbyB0aGF0IGl0cyByZXN1bHRzIGNhbiBiZSBwaW5uZWQgc29cbiAqIHRoZXkgZG9uJ3QgZ2V0IEdDJ2QuIEEgdGFyZ2V0IG11c3QgYmUgYWxsb2NhdGVkIGluIHRoZSBsb2NhbCBzdG9yZSBiZWZvcmVcbiAqIHRoZSBzdG9yZSBjYW4gYmUgdXNlZCB0byBtYW5hZ2UgaXRzIHZpZXcuXG4gKlxuICogQWxsb2NhdGluZyBhbiBhbHJlYWR5IGFsbG9jYXRlZCBgVGFyZ2V0YCB3aWxsIHJldHVybiB0aGUgZXhpc3RpbmcgYFRhcmdldERhdGFgXG4gKiBmb3IgdGhhdCBgVGFyZ2V0YC5cbiAqL1xuZnVuY3Rpb24gcHIodCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQWxsb2NhdGUgdGFyZ2V0XCIsIFwicmVhZHdyaXRlXCIsICh0ID0+IHtcbiAgICAgICAgbGV0IHM7XG4gICAgICAgIHJldHVybiBuLkhlLmdldFRhcmdldERhdGEodCwgZSkubmV4dCgoaSA9PiBpID8gKFxuICAgICAgICAvLyBUaGlzIHRhcmdldCBoYXMgYmVlbiBsaXN0ZW5lZCB0byBwcmV2aW91c2x5LCBzbyByZXVzZSB0aGVcbiAgICAgICAgLy8gcHJldmlvdXMgdGFyZ2V0SUQuXG4gICAgICAgIC8vIFRPRE8obWNnKTogZnJlc2hlbiBsYXN0IGFjY2Vzc2VkIGRhdGU/XG4gICAgICAgIHMgPSBpLCBHcy5yZXNvbHZlKHMpKSA6IG4uSGUuYWxsb2NhdGVUYXJnZXRJZCh0KS5uZXh0KChpID0+IChzID0gbmV3IGFpKGUsIGksIDAgLyogTGlzdGVuICovICwgdC5jdXJyZW50U2VxdWVuY2VOdW1iZXIpLCBcbiAgICAgICAgbi5IZS5hZGRUYXJnZXREYXRhKHQsIHMpLm5leHQoKCgpID0+IHMpKSkpKSkpO1xuICAgIH0pKS50aGVuKCh0ID0+IHtcbiAgICAgICAgLy8gSWYgTXVsdGktVGFiIGlzIGVuYWJsZWQsIHRoZSBleGlzdGluZyB0YXJnZXQgZGF0YSBtYXkgYmUgbmV3ZXIgdGhhblxuICAgICAgICAvLyB0aGUgaW4tbWVtb3J5IGRhdGFcbiAgICAgICAgY29uc3QgcyA9IG4ucW4uZ2V0KHQudGFyZ2V0SWQpO1xuICAgICAgICByZXR1cm4gKG51bGwgPT09IHMgfHwgdC5zbmFwc2hvdFZlcnNpb24uY29tcGFyZVRvKHMuc25hcHNob3RWZXJzaW9uKSA+IDApICYmIChuLnFuID0gbi5xbi5pbnNlcnQodC50YXJnZXRJZCwgdCksIFxuICAgICAgICBuLktuLnNldChlLCB0LnRhcmdldElkKSksIHQ7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIFRhcmdldERhdGEgYXMgc2VlbiBieSB0aGUgTG9jYWxTdG9yZSwgaW5jbHVkaW5nIHVwZGF0ZXMgdGhhdCBtYXlcbiAqIGhhdmUgbm90IHlldCBiZWVuIHBlcnNpc3RlZCB0byB0aGUgVGFyZ2V0Q2FjaGUuXG4gKi9cbi8vIFZpc2libGUgZm9yIHRlc3RpbmcuXG4vKipcbiAqIFVucGlucyBhbGwgdGhlIGRvY3VtZW50cyBhc3NvY2lhdGVkIHdpdGggdGhlIGdpdmVuIHRhcmdldC4gSWZcbiAqIGBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YWAgaXMgc2V0IHRvIGZhbHNlIGFuZCBFYWdlciBHQyBlbmFibGVkLCB0aGUgbWV0aG9kXG4gKiBkaXJlY3RseSByZW1vdmVzIHRoZSBhc3NvY2lhdGVkIHRhcmdldCBkYXRhIGZyb20gdGhlIHRhcmdldCBjYWNoZS5cbiAqXG4gKiBSZWxlYXNpbmcgYSBub24tZXhpc3RpbmcgYFRhcmdldGAgaXMgYSBuby1vcC5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBga2VlcFBlcnNpc3RlZFRhcmdldERhdGFgIGlzIG11bHRpLXRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gVHIodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBxKHQpLCBpID0gcy5xbi5nZXQoZSksIHIgPSBuID8gXCJyZWFkd3JpdGVcIiA6IFwicmVhZHdyaXRlLXByaW1hcnlcIjtcbiAgICB0cnkge1xuICAgICAgICBuIHx8IGF3YWl0IHMucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJSZWxlYXNlIHRhcmdldFwiLCByLCAodCA9PiBzLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLnJlbW92ZVRhcmdldCh0LCBpKSkpO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgaWYgKCFYcyh0KSkgdGhyb3cgdDtcbiAgICAgICAgLy8gQWxsIGByZWxlYXNlVGFyZ2V0YCBkb2VzIGlzIHJlY29yZCB0aGUgZmluYWwgbWV0YWRhdGEgc3RhdGUgZm9yIHRoZVxuICAgICAgICAvLyB0YXJnZXQsIGJ1dCB3ZSd2ZSBiZWVuIHJlY29yZGluZyB0aGlzIHBlcmlvZGljYWxseSBkdXJpbmcgdGFyZ2V0XG4gICAgICAgIC8vIGFjdGl2aXR5LiBJZiB3ZSBsb3NlIHRoaXMgd3JpdGUgdGhpcyBjb3VsZCBjYXVzZSBhIHZlcnkgc2xpZ2h0XG4gICAgICAgIC8vIGRpZmZlcmVuY2UgaW4gdGhlIG9yZGVyIG9mIHRhcmdldCBkZWxldGlvbiBkdXJpbmcgR0MsIGJ1dCB3ZVxuICAgICAgICAvLyBkb24ndCBkZWZpbmUgZXhhY3QgTFJVIHNlbWFudGljcyBzbyB0aGlzIGlzIGFjY2VwdGFibGUuXG4gICAgICAgICQoXCJMb2NhbFN0b3JlXCIsIGBGYWlsZWQgdG8gdXBkYXRlIHNlcXVlbmNlIG51bWJlcnMgZm9yIHRhcmdldCAke2V9OiAke3R9YCk7XG4gICAgfVxuICAgIHMucW4gPSBzLnFuLnJlbW92ZShlKSwgcy5Lbi5kZWxldGUoaS50YXJnZXQpO1xufVxuXG4vKipcbiAqIFJ1bnMgdGhlIHNwZWNpZmllZCBxdWVyeSBhZ2FpbnN0IHRoZSBsb2NhbCBzdG9yZSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0cyxcbiAqIHBvdGVudGlhbGx5IHRha2luZyBhZHZhbnRhZ2Ugb2YgcXVlcnkgZGF0YSBmcm9tIHByZXZpb3VzIGV4ZWN1dGlvbnMgKHN1Y2hcbiAqIGFzIHRoZSBzZXQgb2YgcmVtb3RlIGtleXMpLlxuICpcbiAqIEBwYXJhbSB1c2VQcmV2aW91c1Jlc3VsdHMgLSBXaGV0aGVyIHJlc3VsdHMgZnJvbSBwcmV2aW91cyBleGVjdXRpb25zIGNhblxuICogYmUgdXNlZCB0byBvcHRpbWl6ZSB0aGlzIHF1ZXJ5IGV4ZWN1dGlvbi5cbiAqLyBmdW5jdGlvbiBFcih0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHEodCk7XG4gICAgbGV0IGkgPSBjdC5taW4oKSwgciA9IFNuKCk7XG4gICAgcmV0dXJuIHMucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJFeGVjdXRlIHF1ZXJ5XCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gcSh0KSwgaSA9IHMuS24uZ2V0KG4pO1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBpID8gR3MucmVzb2x2ZShzLnFuLmdldChpKSkgOiBzLkhlLmdldFRhcmdldERhdGEoZSwgbik7XG4gICAgfShzLCB0LCBSZShlKSkubmV4dCgoZSA9PiB7XG4gICAgICAgIGlmIChlKSByZXR1cm4gaSA9IGUubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiwgcy5IZS5nZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBlLnRhcmdldElkKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIHIgPSB0O1xuICAgICAgICB9KSk7XG4gICAgfSkpLm5leHQoKCgpID0+IHMuVW4uZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSh0LCBlLCBuID8gaSA6IGN0Lm1pbigpLCBuID8gciA6IFNuKCkpKSkubmV4dCgodCA9PiAoe1xuICAgICAgICBkb2N1bWVudHM6IHQsXG4gICAgICAgIHpuOiByXG4gICAgfSkpKSkpO1xufVxuXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuZnVuY3Rpb24gSXIodCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpLCBzID0gcShuLkhlKSwgaSA9IG4ucW4uZ2V0KGUpO1xuICAgIHJldHVybiBpID8gUHJvbWlzZS5yZXNvbHZlKGkudGFyZ2V0KSA6IG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgdGFyZ2V0IGRhdGFcIiwgXCJyZWFkb25seVwiLCAodCA9PiBzLkV0KHQsIGUpLm5leHQoKHQgPT4gdCA/IHQudGFyZ2V0IDogbnVsbCkpKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IGhhdmUgYmVlbiB1cGRhdGVkIHNpbmNlIHRoZSBsYXN0IGNhbGwuXG4gKiBJZiB0aGlzIGlzIHRoZSBmaXJzdCBjYWxsLCByZXR1cm5zIHRoZSBzZXQgb2YgY2hhbmdlcyBzaW5jZSBjbGllbnRcbiAqIGluaXRpYWxpemF0aW9uLiBGdXJ0aGVyIGludm9jYXRpb25zIHdpbGwgcmV0dXJuIGRvY3VtZW50IHRoYXQgaGF2ZSBjaGFuZ2VkXG4gKiBzaW5jZSB0aGUgcHJpb3IgY2FsbC5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmZ1bmN0aW9uIEFyKHQpIHtcbiAgICBjb25zdCBlID0gcSh0KTtcbiAgICByZXR1cm4gZS5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCBuZXcgZG9jdW1lbnQgY2hhbmdlc1wiLCBcInJlYWRvbmx5XCIsICh0ID0+IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IHEodCk7XG4gICAgICAgIGxldCBpID0gQW4oKSwgciA9IGxpKG4pO1xuICAgICAgICBjb25zdCBvID0gWGkoZSksIGEgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKHIsICEwKTtcbiAgICAgICAgcmV0dXJuIG8uanQoe1xuICAgICAgICAgICAgaW5kZXg6ICRzLnJlYWRUaW1lSW5kZXgsXG4gICAgICAgICAgICByYW5nZTogYVxuICAgICAgICB9LCAoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIC8vIFVubGlrZSBgZ2V0RW50cnkoKWAgYW5kIG90aGVycywgYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYCBwYXJzZXNcbiAgICAgICAgICAgIC8vIHRoZSBkb2N1bWVudHMgZGlyZWN0bHkgc2luY2Ugd2Ugd2FudCB0byBrZWVwIHNlbnRpbmVsIGRlbGV0ZXMuXG4gICAgICAgICAgICBjb25zdCBuID0gdWkocy5rLCBlKTtcbiAgICAgICAgICAgIGkgPSBpLmluc2VydChuLmtleSwgbiksIHIgPSBlLnJlYWRUaW1lO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gKHtcbiAgICAgICAgICAgIEluOiBpLFxuICAgICAgICAgICAgcmVhZFRpbWU6IGZpKHIpXG4gICAgICAgIH0pKSk7XG4gICAgfVxuICAgIC8qKlxuICogUmV0dXJucyB0aGUgcmVhZCB0aW1lIG9mIHRoZSBtb3N0IHJlY2VudGx5IHJlYWQgZG9jdW1lbnQgaW4gdGhlIGNhY2hlLCBvclxuICogU25hcHNob3RWZXJzaW9uLm1pbigpIGlmIG5vdCBhdmFpbGFibGUuXG4gKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uLlxuICAgIChlLlFuLCB0LCBlLmpuKSkpLnRoZW4oKCh7SW46IHQsIHJlYWRUaW1lOiBufSkgPT4gKGUuam4gPSBuLCB0KSkpO1xufVxuXG4vKipcbiAqIFJlYWRzIHRoZSBuZXdlc3QgZG9jdW1lbnQgY2hhbmdlIGZyb20gcGVyc2lzdGVuY2UgYW5kIG1vdmVzIHRoZSBpbnRlcm5hbFxuICogc3luY2hyb25pemF0aW9uIG1hcmtlciBmb3J3YXJkIHNvIHRoYXQgY2FsbHMgdG8gYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYFxuICogb25seSByZXR1cm4gY2hhbmdlcyB0aGF0IGhhcHBlbmVkIGFmdGVyIGNsaWVudCBpbml0aWFsaXphdGlvbi5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIFJyKHQpIHtcbiAgICBjb25zdCBlID0gcSh0KTtcbiAgICByZXR1cm4gZS5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlN5bmNocm9uaXplIGxhc3QgZG9jdW1lbnQgY2hhbmdlIHJlYWQgdGltZVwiLCBcInJlYWRvbmx5XCIsICh0ID0+IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFhpKHQpO1xuICAgICAgICAvLyBJZiB0aGVyZSBhcmUgbm8gZXhpc3RpbmcgZW50cmllcywgd2UgcmV0dXJuIFNuYXBzaG90VmVyc2lvbi5taW4oKS5cbiAgICAgICAgICAgICAgICBsZXQgbiA9IGN0Lm1pbigpO1xuICAgICAgICByZXR1cm4gZS5qdCh7XG4gICAgICAgICAgICBpbmRleDogJHMucmVhZFRpbWVJbmRleCxcbiAgICAgICAgICAgIHJldmVyc2U6ICEwXG4gICAgICAgIH0sICgodCwgZSwgcykgPT4ge1xuICAgICAgICAgICAgZS5yZWFkVGltZSAmJiAobiA9IGZpKGUucmVhZFRpbWUpKSwgcy5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfSh0KSkpLnRoZW4oKHQgPT4ge1xuICAgICAgICBlLmpuID0gdDtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgdXNpbmcgdGhlIGdpdmVuIGJ1bmRsZSBuYW1lLCB3aGljaCB3aWxsIGJlIHVzZWQgdG9cbiAqIGhvbGQgdGhlIGtleXMgb2YgYWxsIGRvY3VtZW50cyBmcm9tIHRoZSBidW5kbGUgaW4gcXVlcnktZG9jdW1lbnQgbWFwcGluZ3MuXG4gKiBUaGlzIGVuc3VyZXMgdGhhdCB0aGUgbG9hZGVkIGRvY3VtZW50cyBkbyBub3QgZ2V0IGdhcmJhZ2UgY29sbGVjdGVkXG4gKiByaWdodCBhd2F5LlxuICovXG4vKipcbiAqIEFwcGxpZXMgdGhlIGRvY3VtZW50cyBmcm9tIGEgYnVuZGxlIHRvIHRoZSBcImdyb3VuZC1zdGF0ZVwiIChyZW1vdGUpXG4gKiBkb2N1bWVudHMuXG4gKlxuICogTG9jYWxEb2N1bWVudHMgYXJlIHJlLWNhbGN1bGF0ZWQgaWYgdGhlcmUgYXJlIHJlbWFpbmluZyBtdXRhdGlvbnMgaW4gdGhlXG4gKiBxdWV1ZS5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gUHIodCwgZSwgbiwgcykge1xuICAgIGNvbnN0IGkgPSBxKHQpO1xuICAgIGxldCByID0gU24oKSwgbyA9IEFuKCksIGEgPSB2bigpO1xuICAgIGZvciAoY29uc3QgdCBvZiBuKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLkhuKHQubWV0YWRhdGEubmFtZSk7XG4gICAgICAgIHQuZG9jdW1lbnQgJiYgKHIgPSByLmFkZChuKSksIG8gPSBvLmluc2VydChuLCBlLkpuKHQpKSwgYSA9IGEuaW5zZXJ0KG4sIGUuWW4odC5tZXRhZGF0YS5yZWFkVGltZSkpO1xuICAgIH1cbiAgICBjb25zdCBjID0gaS5Rbi5uZXdDaGFuZ2VCdWZmZXIoe1xuICAgICAgICB0cmFja1JlbW92YWxzOiAhMFxuICAgIH0pLCB1ID0gYXdhaXQgcHIoaSwgZnVuY3Rpb24odCkge1xuICAgICAgICAvLyBJdCBpcyBPSyB0aGF0IHRoZSBwYXRoIHVzZWQgZm9yIHRoZSBxdWVyeSBpcyBub3QgdmFsaWQsIGJlY2F1c2UgdGhpcyB3aWxsXG4gICAgICAgIC8vIG5vdCBiZSByZWFkIGFuZCBxdWVyaWVkLlxuICAgICAgICByZXR1cm4gUmUoZ2UoZHQuZnJvbVN0cmluZyhgX19idW5kbGVfXy9kb2NzLyR7dH1gKSkpO1xuICAgIH0ocykpO1xuICAgIC8vIEFsbG9jYXRlcyBhIHRhcmdldCB0byBob2xkIGFsbCBkb2N1bWVudCBrZXlzIGZyb20gdGhlIGJ1bmRsZSwgc3VjaCB0aGF0XG4gICAgLy8gdGhleSB3aWxsIG5vdCBnZXQgZ2FyYmFnZSBjb2xsZWN0ZWQgcmlnaHQgYXdheS5cbiAgICAgICAgcmV0dXJuIGkucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJBcHBseSBidW5kbGUgZG9jdW1lbnRzXCIsIFwicmVhZHdyaXRlXCIsICh0ID0+IGdyKHQsIGMsIG8sIGN0Lm1pbigpLCBhKS5uZXh0KChlID0+IChjLmFwcGx5KHQpLCBcbiAgICBlKSkpLm5leHQoKGUgPT4gaS5IZS5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCB1LnRhcmdldElkKS5uZXh0KCgoKSA9PiBpLkhlLmFkZE1hdGNoaW5nS2V5cyh0LCByLCB1LnRhcmdldElkKSkpLm5leHQoKCgpID0+IGkuV24uVm4odCwgZSkpKS5uZXh0KCgoKSA9PiBlKSkpKSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIG9mIGEgYm9vbGVhbiB0byBpbmRpY2F0ZSBpZiB0aGUgZ2l2ZW4gYnVuZGxlIGhhcyBhbHJlYWR5XG4gKiBiZWVuIGxvYWRlZCBhbmQgdGhlIGNyZWF0ZSB0aW1lIGlzIG5ld2VyIHRoYW4gdGhlIGN1cnJlbnQgbG9hZGluZyBidW5kbGUuXG4gKi9cbi8qKlxuICogU2F2ZXMgdGhlIGdpdmVuIGBOYW1lZFF1ZXJ5YCB0byBsb2NhbCBwZXJzaXN0ZW5jZS5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gYnIodCwgZSwgbiA9IFNuKCkpIHtcbiAgICAvLyBBbGxvY2F0ZSBhIHRhcmdldCBmb3IgdGhlIG5hbWVkIHF1ZXJ5IHN1Y2ggdGhhdCBpdCBjYW4gYmUgcmVzdW1lZFxuICAgIC8vIGZyb20gYXNzb2NpYXRlZCByZWFkIHRpbWUgaWYgdXNlcnMgdXNlIGl0IHRvIGxpc3Rlbi5cbiAgICAvLyBOT1RFOiB0aGlzIGFsc28gbWVhbnMgaWYgbm8gY29ycmVzcG9uZGluZyB0YXJnZXQgZXhpc3RzLCB0aGUgbmV3IHRhcmdldFxuICAgIC8vIHdpbGwgcmVtYWluIGFjdGl2ZSBhbmQgd2lsbCBub3QgZ2V0IGNvbGxlY3RlZCwgdW5sZXNzIHVzZXJzIGhhcHBlbiB0b1xuICAgIC8vIHVubGlzdGVuIHRoZSBxdWVyeSBzb21laG93LlxuICAgIGNvbnN0IHMgPSBhd2FpdCBwcih0LCBSZSh5aShlLmJ1bmRsZWRRdWVyeSkpKSwgaSA9IHEodCk7XG4gICAgcmV0dXJuIGkucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJTYXZlIG5hbWVkIHF1ZXJ5XCIsIFwicmVhZHdyaXRlXCIsICh0ID0+IHtcbiAgICAgICAgY29uc3QgciA9IEduKGUucmVhZFRpbWUpO1xuICAgICAgICAvLyBTaW1wbHkgc2F2ZSB0aGUgcXVlcnkgaXRzZWxmIGlmIGl0IGlzIG9sZGVyIHRoYW4gd2hhdCB0aGUgU0RLIGFscmVhZHlcbiAgICAgICAgLy8gaGFzLlxuICAgICAgICAgICAgICAgIGlmIChzLnNuYXBzaG90VmVyc2lvbi5jb21wYXJlVG8ocikgPj0gMCkgcmV0dXJuIGkuWWUuc2F2ZU5hbWVkUXVlcnkodCwgZSk7XG4gICAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyB0YXJnZXQgZGF0YSBiZWNhdXNlIHRoZSBxdWVyeSBmcm9tIHRoZSBidW5kbGUgaXMgbmV3ZXIuXG4gICAgICAgICAgICAgICAgY29uc3QgbyA9IHMud2l0aFJlc3VtZVRva2VuKHl0LkVNUFRZX0JZVEVfU1RSSU5HLCByKTtcbiAgICAgICAgcmV0dXJuIGkucW4gPSBpLnFuLmluc2VydChvLnRhcmdldElkLCBvKSwgaS5IZS51cGRhdGVUYXJnZXREYXRhKHQsIG8pLm5leHQoKCgpID0+IGkuSGUucmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgcy50YXJnZXRJZCkpKS5uZXh0KCgoKSA9PiBpLkhlLmFkZE1hdGNoaW5nS2V5cyh0LCBuLCBzLnRhcmdldElkKSkpLm5leHQoKCgpID0+IGkuWWUuc2F2ZU5hbWVkUXVlcnkodCwgZSkpKTtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIHZyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuayA9IHQsIHRoaXMuWG4gPSBuZXcgTWFwLCB0aGlzLlpuID0gbmV3IE1hcDtcbiAgICB9XG4gICAgZ2V0QnVuZGxlTWV0YWRhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gR3MucmVzb2x2ZSh0aGlzLlhuLmdldChlKSk7XG4gICAgfVxuICAgIHNhdmVCdW5kbGVNZXRhZGF0YSh0LCBlKSB7XG4gICAgICAgIC8qKiBEZWNvZGVzIGEgQnVuZGxlTWV0YWRhdGEgcHJvdG8gaW50byBhIEJ1bmRsZU1ldGFkYXRhIG9iamVjdC4gKi9cbiAgICAgICAgdmFyIG47XG4gICAgICAgIHJldHVybiB0aGlzLlhuLnNldChlLmlkLCB7XG4gICAgICAgICAgICBpZDogKG4gPSBlKS5pZCxcbiAgICAgICAgICAgIHZlcnNpb246IG4udmVyc2lvbixcbiAgICAgICAgICAgIGNyZWF0ZVRpbWU6IEduKG4uY3JlYXRlVGltZSlcbiAgICAgICAgfSksIEdzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0TmFtZWRRdWVyeSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBHcy5yZXNvbHZlKHRoaXMuWm4uZ2V0KGUpKTtcbiAgICB9XG4gICAgc2F2ZU5hbWVkUXVlcnkodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5abi5zZXQoZS5uYW1lLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5hbWU6IHQubmFtZSxcbiAgICAgICAgICAgICAgICBxdWVyeTogeWkodC5idW5kbGVkUXVlcnkpLFxuICAgICAgICAgICAgICAgIHJlYWRUaW1lOiBHbih0LnJlYWRUaW1lKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfShlKSksIEdzLnJlc29sdmUoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgY29sbGVjdGlvbiBvZiByZWZlcmVuY2VzIHRvIGEgZG9jdW1lbnQgZnJvbSBzb21lIGtpbmQgb2YgbnVtYmVyZWQgZW50aXR5XG4gKiAoZWl0aGVyIGEgdGFyZ2V0IElEIG9yIGJhdGNoIElEKS4gQXMgcmVmZXJlbmNlcyBhcmUgYWRkZWQgdG8gb3IgcmVtb3ZlZCBmcm9tXG4gKiB0aGUgc2V0IGNvcnJlc3BvbmRpbmcgZXZlbnRzIGFyZSBlbWl0dGVkIHRvIGEgcmVnaXN0ZXJlZCBnYXJiYWdlIGNvbGxlY3Rvci5cbiAqXG4gKiBFYWNoIHJlZmVyZW5jZSBpcyByZXByZXNlbnRlZCBieSBhIERvY3VtZW50UmVmZXJlbmNlIG9iamVjdC4gRWFjaCBvZiB0aGVtXG4gKiBjb250YWlucyBlbm91Z2ggaW5mb3JtYXRpb24gdG8gdW5pcXVlbHkgaWRlbnRpZnkgdGhlIHJlZmVyZW5jZS4gVGhleSBhcmUgYWxsXG4gKiBzdG9yZWQgcHJpbWFyaWx5IGluIGEgc2V0IHNvcnRlZCBieSBrZXkuIEEgZG9jdW1lbnQgaXMgY29uc2lkZXJlZCBnYXJiYWdlIGlmXG4gKiB0aGVyZSdzIG5vIHJlZmVyZW5jZXMgaW4gdGhhdCBzZXQgKHRoaXMgY2FuIGJlIGVmZmljaWVudGx5IGNoZWNrZWQgdGhhbmtzIHRvXG4gKiBzb3J0aW5nIGJ5IGtleSkuXG4gKlxuICogUmVmZXJlbmNlU2V0IGFsc28ga2VlcHMgYSBzZWNvbmRhcnkgc2V0IHRoYXQgY29udGFpbnMgcmVmZXJlbmNlcyBzb3J0ZWQgYnlcbiAqIElEcy4gVGhpcyBvbmUgaXMgdXNlZCB0byBlZmZpY2llbnRseSBpbXBsZW1lbnQgcmVtb3ZhbCBvZiBhbGwgcmVmZXJlbmNlcyBieVxuICogc29tZSB0YXJnZXQgSUQuXG4gKi8gY2xhc3MgVnIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBBIHNldCBvZiBvdXRzdGFuZGluZyByZWZlcmVuY2VzIHRvIGEgZG9jdW1lbnQgc29ydGVkIGJ5IGtleS5cbiAgICAgICAgdGhpcy50cyA9IG5ldyBUbihTci5lcyksIFxuICAgICAgICAvLyBBIHNldCBvZiBvdXRzdGFuZGluZyByZWZlcmVuY2VzIHRvIGEgZG9jdW1lbnQgc29ydGVkIGJ5IHRhcmdldCBpZC5cbiAgICAgICAgdGhpcy5ucyA9IG5ldyBUbihTci5zcyk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIHJlZmVyZW5jZSBzZXQgY29udGFpbnMgbm8gcmVmZXJlbmNlcy4gKi8gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHMuaXNFbXB0eSgpO1xuICAgIH1cbiAgICAvKiogQWRkcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQga2V5IGZvciB0aGUgZ2l2ZW4gSUQuICovICAgIGFkZFJlZmVyZW5jZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgU3IodCwgZSk7XG4gICAgICAgIHRoaXMudHMgPSB0aGlzLnRzLmFkZChuKSwgdGhpcy5ucyA9IHRoaXMubnMuYWRkKG4pO1xuICAgIH1cbiAgICAvKiogQWRkIHJlZmVyZW5jZXMgdG8gdGhlIGdpdmVuIGRvY3VtZW50IGtleXMgZm9yIHRoZSBnaXZlbiBJRC4gKi8gICAgcnModCwgZSkge1xuICAgICAgICB0LmZvckVhY2goKHQgPT4gdGhpcy5hZGRSZWZlcmVuY2UodCwgZSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQga2V5IGZvciB0aGUgZ2l2ZW5cbiAgICAgKiBJRC5cbiAgICAgKi8gICAgcmVtb3ZlUmVmZXJlbmNlKHQsIGUpIHtcbiAgICAgICAgdGhpcy5vcyhuZXcgU3IodCwgZSkpO1xuICAgIH1cbiAgICBjcyh0LCBlKSB7XG4gICAgICAgIHQuZm9yRWFjaCgodCA9PiB0aGlzLnJlbW92ZVJlZmVyZW5jZSh0LCBlKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGVhcnMgYWxsIHJlZmVyZW5jZXMgd2l0aCBhIGdpdmVuIElELiBDYWxscyByZW1vdmVSZWYoKSBmb3IgZWFjaCBrZXlcbiAgICAgKiByZW1vdmVkLlxuICAgICAqLyAgICB1cyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgU3QobmV3IGR0KFtdKSksIG4gPSBuZXcgU3IoZSwgdCksIHMgPSBuZXcgU3IoZSwgdCArIDEpLCBpID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLm5zLmZvckVhY2hJblJhbmdlKFsgbiwgcyBdLCAodCA9PiB7XG4gICAgICAgICAgICB0aGlzLm9zKHQpLCBpLnB1c2godC5rZXkpO1xuICAgICAgICB9KSksIGk7XG4gICAgfVxuICAgIGhzKCkge1xuICAgICAgICB0aGlzLnRzLmZvckVhY2goKHQgPT4gdGhpcy5vcyh0KSkpO1xuICAgIH1cbiAgICBvcyh0KSB7XG4gICAgICAgIHRoaXMudHMgPSB0aGlzLnRzLmRlbGV0ZSh0KSwgdGhpcy5ucyA9IHRoaXMubnMuZGVsZXRlKHQpO1xuICAgIH1cbiAgICBscyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgU3QobmV3IGR0KFtdKSksIG4gPSBuZXcgU3IoZSwgdCksIHMgPSBuZXcgU3IoZSwgdCArIDEpO1xuICAgICAgICBsZXQgaSA9IFNuKCk7XG4gICAgICAgIHJldHVybiB0aGlzLm5zLmZvckVhY2hJblJhbmdlKFsgbiwgcyBdLCAodCA9PiB7XG4gICAgICAgICAgICBpID0gaS5hZGQodC5rZXkpO1xuICAgICAgICB9KSksIGk7XG4gICAgfVxuICAgIGNvbnRhaW5zS2V5KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBTcih0LCAwKSwgbiA9IHRoaXMudHMuZmlyc3RBZnRlck9yRXF1YWwoZSk7XG4gICAgICAgIHJldHVybiBudWxsICE9PSBuICYmIHQuaXNFcXVhbChuLmtleSk7XG4gICAgfVxufVxuXG5jbGFzcyBTciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmtleSA9IHQsIHRoaXMuZnMgPSBlO1xuICAgIH1cbiAgICAvKiogQ29tcGFyZSBieSBrZXkgdGhlbiBieSBJRCAqLyAgICBzdGF0aWMgZXModCwgZSkge1xuICAgICAgICByZXR1cm4gU3QuY29tcGFyYXRvcih0LmtleSwgZS5rZXkpIHx8IGl0KHQuZnMsIGUuZnMpO1xuICAgIH1cbiAgICAvKiogQ29tcGFyZSBieSBJRCB0aGVuIGJ5IGtleSAqLyAgICBzdGF0aWMgc3ModCwgZSkge1xuICAgICAgICByZXR1cm4gaXQodC5mcywgZS5mcykgfHwgU3QuY29tcGFyYXRvcih0LmtleSwgZS5rZXkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgRHIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5KdCA9IHQsIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSBlLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBzZXQgb2YgYWxsIG11dGF0aW9ucyB0aGF0IGhhdmUgYmVlbiBzZW50IGJ1dCBub3QgeWV0IGJlZW4gYXBwbGllZCB0b1xuICAgICAgICAgKiB0aGUgYmFja2VuZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuQW4gPSBbXSwgXG4gICAgICAgIC8qKiBOZXh0IHZhbHVlIHRvIHVzZSB3aGVuIGFzc2lnbmluZyBzZXF1ZW50aWFsIElEcyB0byBlYWNoIG11dGF0aW9uIGJhdGNoLiAqL1xuICAgICAgICB0aGlzLmRzID0gMSwgXG4gICAgICAgIC8qKiBBbiBvcmRlcmVkIG1hcHBpbmcgYmV0d2VlbiBkb2N1bWVudHMgYW5kIHRoZSBtdXRhdGlvbnMgYmF0Y2ggSURzLiAqL1xuICAgICAgICB0aGlzLndzID0gbmV3IFRuKFNyLmVzKTtcbiAgICB9XG4gICAgY2hlY2tFbXB0eSh0KSB7XG4gICAgICAgIHJldHVybiBHcy5yZXNvbHZlKDAgPT09IHRoaXMuQW4ubGVuZ3RoKTtcbiAgICB9XG4gICAgYWRkTXV0YXRpb25CYXRjaCh0LCBlLCBuLCBzKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLmRzO1xuICAgICAgICB0aGlzLmRzKyssIHRoaXMuQW4ubGVuZ3RoID4gMCAmJiB0aGlzLkFuW3RoaXMuQW4ubGVuZ3RoIC0gMV07XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgcmkoaSwgZSwgbiwgcyk7XG4gICAgICAgIHRoaXMuQW4ucHVzaChyKTtcbiAgICAgICAgLy8gVHJhY2sgcmVmZXJlbmNlcyBieSBkb2N1bWVudCBrZXkgYW5kIGluZGV4IGNvbGxlY3Rpb24gcGFyZW50cy5cbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHMpIHRoaXMud3MgPSB0aGlzLndzLmFkZChuZXcgU3IoZS5rZXksIGkpKSwgdGhpcy5KdC5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LCBlLmtleS5wYXRoLnBvcExhc3QoKSk7XG4gICAgICAgIHJldHVybiBHcy5yZXNvbHZlKHIpO1xuICAgIH1cbiAgICBsb29rdXBNdXRhdGlvbkJhdGNoKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIEdzLnJlc29sdmUodGhpcy5fcyhlKSk7XG4gICAgfVxuICAgIGdldE5leHRNdXRhdGlvbkJhdGNoQWZ0ZXJCYXRjaElkKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUgKyAxLCBzID0gdGhpcy5ncyhuKSwgaSA9IHMgPCAwID8gMCA6IHM7XG4gICAgICAgIC8vIFRoZSByZXF1ZXN0ZWQgYmF0Y2hJZCBtYXkgc3RpbGwgYmUgb3V0IG9mIHJhbmdlIHNvIG5vcm1hbGl6ZSBpdCB0byB0aGVcbiAgICAgICAgLy8gc3RhcnQgb2YgdGhlIHF1ZXVlLlxuICAgICAgICAgICAgICAgIHJldHVybiBHcy5yZXNvbHZlKHRoaXMuQW4ubGVuZ3RoID4gaSA/IHRoaXMuQW5baV0gOiBudWxsKTtcbiAgICB9XG4gICAgZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZCgpIHtcbiAgICAgICAgcmV0dXJuIEdzLnJlc29sdmUoMCA9PT0gdGhpcy5Bbi5sZW5ndGggPyAtMSA6IHRoaXMuZHMgLSAxKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzKHQpIHtcbiAgICAgICAgcmV0dXJuIEdzLnJlc29sdmUodGhpcy5Bbi5zbGljZSgpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbmV3IFNyKGUsIDApLCBzID0gbmV3IFNyKGUsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSksIGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMud3MuZm9yRWFjaEluUmFuZ2UoWyBuLCBzIF0sICh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLl9zKHQuZnMpO1xuICAgICAgICAgICAgaS5wdXNoKGUpO1xuICAgICAgICB9KSksIEdzLnJlc29sdmUoaSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5cyh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gbmV3IFRuKGl0KTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gbmV3IFNyKHQsIDApLCBzID0gbmV3IFNyKHQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSk7XG4gICAgICAgICAgICB0aGlzLndzLmZvckVhY2hJblJhbmdlKFsgZSwgcyBdLCAodCA9PiB7XG4gICAgICAgICAgICAgICAgbiA9IG4uYWRkKHQuZnMpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSksIEdzLnJlc29sdmUodGhpcy55cyhuKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ1F1ZXJ5KHQsIGUpIHtcbiAgICAgICAgLy8gVXNlIHRoZSBxdWVyeSBwYXRoIGFzIGEgcHJlZml4IGZvciB0ZXN0aW5nIGlmIGEgZG9jdW1lbnQgbWF0Y2hlcyB0aGVcbiAgICAgICAgLy8gcXVlcnkuXG4gICAgICAgIGNvbnN0IG4gPSBlLnBhdGgsIHMgPSBuLmxlbmd0aCArIDE7XG4gICAgICAgIC8vIENvbnN0cnVjdCBhIGRvY3VtZW50IHJlZmVyZW5jZSBmb3IgYWN0dWFsbHkgc2Nhbm5pbmcgdGhlIGluZGV4LiBVbmxpa2VcbiAgICAgICAgLy8gdGhlIHByZWZpeCB0aGUgZG9jdW1lbnQga2V5IGluIHRoaXMgcmVmZXJlbmNlIG11c3QgaGF2ZSBhbiBldmVuIG51bWJlciBvZlxuICAgICAgICAvLyBzZWdtZW50cy4gVGhlIGVtcHR5IHNlZ21lbnQgY2FuIGJlIHVzZWQgYSBzdWZmaXggb2YgdGhlIHF1ZXJ5IHBhdGhcbiAgICAgICAgLy8gYmVjYXVzZSBpdCBwcmVjZWRlcyBhbGwgb3RoZXIgc2VnbWVudHMgaW4gYW4gb3JkZXJlZCB0cmF2ZXJzYWwuXG4gICAgICAgIGxldCBpID0gbjtcbiAgICAgICAgU3QuaXNEb2N1bWVudEtleShpKSB8fCAoaSA9IGkuY2hpbGQoXCJcIikpO1xuICAgICAgICBjb25zdCByID0gbmV3IFNyKG5ldyBTdChpKSwgMCk7XG4gICAgICAgIC8vIEZpbmQgdW5pcXVlIGJhdGNoSURzIHJlZmVyZW5jZWQgYnkgYWxsIGRvY3VtZW50cyBwb3RlbnRpYWxseSBtYXRjaGluZyB0aGVcbiAgICAgICAgLy8gcXVlcnkuXG4gICAgICAgICAgICAgICAgbGV0IG8gPSBuZXcgVG4oaXQpO1xuICAgICAgICByZXR1cm4gdGhpcy53cy5mb3JFYWNoV2hpbGUoKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQua2V5LnBhdGg7XG4gICAgICAgICAgICByZXR1cm4gISFuLmlzUHJlZml4T2YoZSkgJiYgKFxuICAgICAgICAgICAgLy8gUm93cyB3aXRoIGRvY3VtZW50IGtleXMgbW9yZSB0aGFuIG9uZSBzZWdtZW50IGxvbmdlciB0aGFuIHRoZSBxdWVyeVxuICAgICAgICAgICAgLy8gcGF0aCBjYW4ndCBiZSBtYXRjaGVzLiBGb3IgZXhhbXBsZSwgYSBxdWVyeSBvbiAncm9vbXMnIGNhbid0IG1hdGNoXG4gICAgICAgICAgICAvLyB0aGUgZG9jdW1lbnQgL3Jvb21zL2FiYy9tZXNzYWdlcy94eXguXG4gICAgICAgICAgICAvLyBUT0RPKG1jZyk6IHdlJ2xsIG5lZWQgYSBkaWZmZXJlbnQgc2Nhbm5lciB3aGVuIHdlIGltcGxlbWVudFxuICAgICAgICAgICAgLy8gYW5jZXN0b3IgcXVlcmllcy5cbiAgICAgICAgICAgIGUubGVuZ3RoID09PSBzICYmIChvID0gby5hZGQodC5mcykpLCAhMCk7XG4gICAgICAgIH0pLCByKSwgR3MucmVzb2x2ZSh0aGlzLnlzKG8pKTtcbiAgICB9XG4gICAgeXModCkge1xuICAgICAgICAvLyBDb25zdHJ1Y3QgYW4gYXJyYXkgb2YgbWF0Y2hpbmcgYmF0Y2hlcywgc29ydGVkIGJ5IGJhdGNoSUQgdG8gZW5zdXJlIHRoYXRcbiAgICAgICAgLy8gbXVsdGlwbGUgbXV0YXRpb25zIGFmZmVjdGluZyB0aGUgc2FtZSBkb2N1bWVudCBrZXkgYXJlIGFwcGxpZWQgaW4gb3JkZXIuXG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5fcyh0KTtcbiAgICAgICAgICAgIG51bGwgIT09IG4gJiYgZS5wdXNoKG4pO1xuICAgICAgICB9KSksIGU7XG4gICAgfVxuICAgIHJlbW92ZU11dGF0aW9uQmF0Y2godCwgZSkge1xuICAgICAgICBCKDAgPT09IHRoaXMucHMoZS5iYXRjaElkLCBcInJlbW92ZWRcIikpLCB0aGlzLkFuLnNoaWZ0KCk7XG4gICAgICAgIGxldCBuID0gdGhpcy53cztcbiAgICAgICAgcmV0dXJuIEdzLmZvckVhY2goZS5tdXRhdGlvbnMsIChzID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuZXcgU3Iocy5rZXksIGUuYmF0Y2hJZCk7XG4gICAgICAgICAgICByZXR1cm4gbiA9IG4uZGVsZXRlKGkpLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLm1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKHQsIHMua2V5KTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMud3MgPSBuO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGVlKHQpIHtcbiAgICAgICAgLy8gTm8tb3Agc2luY2UgdGhlIG1lbW9yeSBtdXRhdGlvbiBxdWV1ZSBkb2VzIG5vdCBtYWludGFpbiBhIHNlcGFyYXRlIGNhY2hlLlxuICAgIH1cbiAgICBjb250YWluc0tleSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgU3IoZSwgMCksIHMgPSB0aGlzLndzLmZpcnN0QWZ0ZXJPckVxdWFsKG4pO1xuICAgICAgICByZXR1cm4gR3MucmVzb2x2ZShlLmlzRXF1YWwocyAmJiBzLmtleSkpO1xuICAgIH1cbiAgICBwZXJmb3JtQ29uc2lzdGVuY3lDaGVjayh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLkFuLmxlbmd0aCwgR3MucmVzb2x2ZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaW5kcyB0aGUgaW5kZXggb2YgdGhlIGdpdmVuIGJhdGNoSWQgaW4gdGhlIG11dGF0aW9uIHF1ZXVlIGFuZCBhc3NlcnRzIHRoYXRcbiAgICAgKiB0aGUgcmVzdWx0aW5nIGluZGV4IGlzIHdpdGhpbiB0aGUgYm91bmRzIG9mIHRoZSBxdWV1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiYXRjaElkIC0gVGhlIGJhdGNoSWQgdG8gc2VhcmNoIGZvclxuICAgICAqIEBwYXJhbSBhY3Rpb24gLSBBIGRlc2NyaXB0aW9uIG9mIHdoYXQgdGhlIGNhbGxlciBpcyBkb2luZywgcGhyYXNlZCBpbiBwYXNzaXZlXG4gICAgICogZm9ybSAoZS5nLiBcImFja25vd2xlZGdlZFwiIGluIGEgcm91dGluZSB0aGF0IGFja25vd2xlZGdlcyBiYXRjaGVzKS5cbiAgICAgKi8gICAgcHModCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5ncyh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmluZHMgdGhlIGluZGV4IG9mIHRoZSBnaXZlbiBiYXRjaElkIGluIHRoZSBtdXRhdGlvbiBxdWV1ZS4gVGhpcyBvcGVyYXRpb25cbiAgICAgKiBpcyBPKDEpLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIGNvbXB1dGVkIGluZGV4IG9mIHRoZSBiYXRjaCB3aXRoIHRoZSBnaXZlbiBiYXRjaElkLCBiYXNlZCBvblxuICAgICAqIHRoZSBzdGF0ZSBvZiB0aGUgcXVldWUuIE5vdGUgdGhpcyBpbmRleCBjYW4gYmUgbmVnYXRpdmUgaWYgdGhlIHJlcXVlc3RlZFxuICAgICAqIGJhdGNoSWQgaGFzIGFscmVhZHkgYmVlbiByZW12b2VkIGZyb20gdGhlIHF1ZXVlIG9yIHBhc3QgdGhlIGVuZCBvZiB0aGVcbiAgICAgKiBxdWV1ZSBpZiB0aGUgYmF0Y2hJZCBpcyBsYXJnZXIgdGhhbiB0aGUgbGFzdCBhZGRlZCBiYXRjaC5cbiAgICAgKi8gICAgZ3ModCkge1xuICAgICAgICBpZiAoMCA9PT0gdGhpcy5Bbi5sZW5ndGgpIFxuICAgICAgICAvLyBBcyBhbiBpbmRleCB0aGlzIGlzIHBhc3QgdGhlIGVuZCBvZiB0aGUgcXVldWVcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIC8vIEV4YW1pbmUgdGhlIGZyb250IG9mIHRoZSBxdWV1ZSB0byBmaWd1cmUgb3V0IHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gdGhlXG4gICAgICAgIC8vIGJhdGNoSWQgYW5kIGluZGV4ZXMgaW4gdGhlIGFycmF5LiBOb3RlIHRoYXQgc2luY2UgdGhlIHF1ZXVlIGlzIG9yZGVyZWRcbiAgICAgICAgLy8gYnkgYmF0Y2hJZCwgaWYgdGhlIGZpcnN0IGJhdGNoIGhhcyBhIGxhcmdlciBiYXRjaElkIHRoZW4gdGhlIHJlcXVlc3RlZFxuICAgICAgICAvLyBiYXRjaElkIGRvZXNuJ3QgZXhpc3QgaW4gdGhlIHF1ZXVlLlxuICAgICAgICAgICAgICAgIHJldHVybiB0IC0gdGhpcy5BblswXS5iYXRjaElkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHZlcnNpb24gb2YgbG9va3VwTXV0YXRpb25CYXRjaCB0aGF0IGRvZXNuJ3QgcmV0dXJuIGEgcHJvbWlzZSwgdGhpcyBtYWtlc1xuICAgICAqIG90aGVyIGZ1bmN0aW9ucyB0aGF0IHVzZXMgdGhpcyBjb2RlIGVhc2llciB0byByZWFkIGFuZCBtb3JlIGVmZmljZW50LlxuICAgICAqLyAgICBfcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmdzKHQpO1xuICAgICAgICBpZiAoZSA8IDAgfHwgZSA+PSB0aGlzLkFuLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiB0aGlzLkFuW2VdO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVGhlIG1lbW9yeS1vbmx5IFJlbW90ZURvY3VtZW50Q2FjaGUgZm9yIEluZGV4ZWREYi4gVG8gY29uc3RydWN0LCBpbnZva2VcbiAqIGBuZXdNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlKClgLlxuICovXG5jbGFzcyBDciB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHNpemVyIC0gVXNlZCB0byBhc3Nlc3MgdGhlIHNpemUgb2YgYSBkb2N1bWVudC4gRm9yIGVhZ2VyIEdDLCB0aGlzIGlzXG4gICAgICogZXhwZWN0ZWQgdG8ganVzdCByZXR1cm4gMCB0byBhdm9pZCB1bm5lY2Vzc2FyaWx5IGRvaW5nIHRoZSB3b3JrIG9mXG4gICAgICogY2FsY3VsYXRpbmcgdGhlIHNpemUuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLkp0ID0gdCwgdGhpcy5UcyA9IGUsIFxuICAgICAgICAvKiogVW5kZXJseWluZyBjYWNoZSBvZiBkb2N1bWVudHMgYW5kIHRoZWlyIHJlYWQgdGltZXMuICovXG4gICAgICAgIHRoaXMuZG9jcyA9IG5ldyBnbihTdC5jb21wYXJhdG9yKSwgXG4gICAgICAgIC8qKiBTaXplIG9mIGFsbCBjYWNoZWQgZG9jdW1lbnRzLiAqL1xuICAgICAgICB0aGlzLnNpemUgPSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIHRoZSBzdXBwbGllZCBlbnRyeSB0byB0aGUgY2FjaGUgYW5kIHVwZGF0ZXMgdGhlIGNhY2hlIHNpemUgYXMgYXBwcm9wcmlhdGUuXG4gICAgICpcbiAgICAgKiBBbGwgY2FsbHMgb2YgYGFkZEVudHJ5YCAgYXJlIHJlcXVpcmVkIHRvIGdvIHRocm91Z2ggdGhlIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyXG4gICAgICogcmV0dXJuZWQgYnkgYG5ld0NoYW5nZUJ1ZmZlcigpYC5cbiAgICAgKi8gICAgYWRkRW50cnkodCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gZS5rZXksIGkgPSB0aGlzLmRvY3MuZ2V0KHMpLCByID0gaSA/IGkuc2l6ZSA6IDAsIG8gPSB0aGlzLlRzKGUpO1xuICAgICAgICByZXR1cm4gdGhpcy5kb2NzID0gdGhpcy5kb2NzLmluc2VydChzLCB7XG4gICAgICAgICAgICBkb2N1bWVudDogZS5jbG9uZSgpLFxuICAgICAgICAgICAgc2l6ZTogbyxcbiAgICAgICAgICAgIHJlYWRUaW1lOiBuXG4gICAgICAgIH0pLCB0aGlzLnNpemUgKz0gbyAtIHIsIHRoaXMuSnQuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodCwgcy5wYXRoLnBvcExhc3QoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIHNwZWNpZmllZCBlbnRyeSBmcm9tIHRoZSBjYWNoZSBhbmQgdXBkYXRlcyB0aGUgY2FjaGUgc2l6ZSBhcyBhcHByb3ByaWF0ZS5cbiAgICAgKlxuICAgICAqIEFsbCBjYWxscyBvZiBgcmVtb3ZlRW50cnlgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxuICAgICAqIHJldHVybmVkIGJ5IGBuZXdDaGFuZ2VCdWZmZXIoKWAuXG4gICAgICovICAgIHJlbW92ZUVudHJ5KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZG9jcy5nZXQodCk7XG4gICAgICAgIGUgJiYgKHRoaXMuZG9jcyA9IHRoaXMuZG9jcy5yZW1vdmUodCksIHRoaXMuc2l6ZSAtPSBlLnNpemUpO1xuICAgIH1cbiAgICBnZXRFbnRyeSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmRvY3MuZ2V0KGUpO1xuICAgICAgICByZXR1cm4gR3MucmVzb2x2ZShuID8gbi5kb2N1bWVudC5jbG9uZSgpIDogV3QubmV3SW52YWxpZERvY3VtZW50KGUpKTtcbiAgICB9XG4gICAgZ2V0RW50cmllcyh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gQW4oKTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5kb2NzLmdldCh0KTtcbiAgICAgICAgICAgIG4gPSBuLmluc2VydCh0LCBlID8gZS5kb2N1bWVudC5jbG9uZSgpIDogV3QubmV3SW52YWxpZERvY3VtZW50KHQpKTtcbiAgICAgICAgfSkpLCBHcy5yZXNvbHZlKG4pO1xuICAgIH1cbiAgICBnZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIGUsIG4pIHtcbiAgICAgICAgbGV0IHMgPSBBbigpO1xuICAgICAgICAvLyBEb2N1bWVudHMgYXJlIG9yZGVyZWQgYnkga2V5LCBzbyB3ZSBjYW4gdXNlIGEgcHJlZml4IHNjYW4gdG8gbmFycm93IGRvd25cbiAgICAgICAgLy8gdGhlIGRvY3VtZW50cyB3ZSBuZWVkIHRvIG1hdGNoIHRoZSBxdWVyeSBhZ2FpbnN0LlxuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBuZXcgU3QoZS5wYXRoLmNoaWxkKFwiXCIpKSwgciA9IHRoaXMuZG9jcy5nZXRJdGVyYXRvckZyb20oaSk7XG4gICAgICAgIGZvciAoO3IuaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHtrZXk6IHQsIHZhbHVlOiB7ZG9jdW1lbnQ6IGksIHJlYWRUaW1lOiBvfX0gPSByLmdldE5leHQoKTtcbiAgICAgICAgICAgIGlmICghZS5wYXRoLmlzUHJlZml4T2YodC5wYXRoKSkgYnJlYWs7XG4gICAgICAgICAgICBvLmNvbXBhcmVUbyhuKSA8PSAwIHx8IFNlKGUsIGkpICYmIChzID0gcy5pbnNlcnQoaS5rZXksIGkuY2xvbmUoKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBHcy5yZXNvbHZlKHMpO1xuICAgIH1cbiAgICBFcyh0LCBlKSB7XG4gICAgICAgIHJldHVybiBHcy5mb3JFYWNoKHRoaXMuZG9jcywgKHQgPT4gZSh0KSkpO1xuICAgIH1cbiAgICBuZXdDaGFuZ2VCdWZmZXIodCkge1xuICAgICAgICAvLyBgdHJhY2tSZW1vdmFsc2AgaXMgaWdub3JlcyBzaW5jZSB0aGUgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZSBrZWVwc1xuICAgICAgICAvLyBhIHNlcGFyYXRlIGNoYW5nZWxvZyBhbmQgZG9lcyBub3QgbmVlZCBzcGVjaWFsIGhhbmRsaW5nIGZvciByZW1vdmFscy5cbiAgICAgICAgcmV0dXJuIG5ldyBOcih0aGlzKTtcbiAgICB9XG4gICAgZ2V0U2l6ZSh0KSB7XG4gICAgICAgIHJldHVybiBHcy5yZXNvbHZlKHRoaXMuc2l6ZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgbWVtb3J5LW9ubHkgUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqXG4gKiBAcGFyYW0gaW5kZXhNYW5hZ2VyIC0gQSBjbGFzcyB0aGF0IG1hbmFnZXMgY29sbGVjdGlvbiBncm91cCBpbmRpY2VzLlxuICogQHBhcmFtIHNpemVyIC0gVXNlZCB0byBhc3Nlc3MgdGhlIHNpemUgb2YgYSBkb2N1bWVudC4gRm9yIGVhZ2VyIEdDLCB0aGlzIGlzXG4gKiBleHBlY3RlZCB0byBqdXN0IHJldHVybiAwIHRvIGF2b2lkIHVubmVjZXNzYXJpbHkgZG9pbmcgdGhlIHdvcmsgb2ZcbiAqIGNhbGN1bGF0aW5nIHRoZSBzaXplLlxuICovXG4vKipcbiAqIEhhbmRsZXMgdGhlIGRldGFpbHMgb2YgYWRkaW5nIGFuZCB1cGRhdGluZyBkb2N1bWVudHMgaW4gdGhlIE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKi9cbmNsYXNzIE5yIGV4dGVuZHMgemkge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5EZSA9IHQ7XG4gICAgfVxuICAgIGFwcGx5Q2hhbmdlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhbmdlcy5mb3JFYWNoKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgcy5kb2N1bWVudC5pc1ZhbGlkRG9jdW1lbnQoKSA/IGUucHVzaCh0aGlzLkRlLmFkZEVudHJ5KHQsIHMuZG9jdW1lbnQsIHRoaXMuZ2V0UmVhZFRpbWUobikpKSA6IHRoaXMuRGUucmVtb3ZlRW50cnkobik7XG4gICAgICAgIH0pKSwgR3Mud2FpdEZvcihlKTtcbiAgICB9XG4gICAgZ2V0RnJvbUNhY2hlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuRGUuZ2V0RW50cnkodCwgZSk7XG4gICAgfVxuICAgIGdldEFsbEZyb21DYWNoZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkRlLmdldEVudHJpZXModCwgZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBrciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gdCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXBzIGEgdGFyZ2V0IHRvIHRoZSBkYXRhIGFib3V0IHRoYXQgdGFyZ2V0XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLklzID0gbmV3IEdpKCh0ID0+IEh0KHQpKSwgWXQpLCBcbiAgICAgICAgLyoqIFRoZSBsYXN0IHJlY2VpdmVkIHNuYXBzaG90IHZlcnNpb24uICovXG4gICAgICAgIHRoaXMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IGN0Lm1pbigpLCBcbiAgICAgICAgLyoqIFRoZSBoaWdoZXN0IG51bWJlcmVkIHRhcmdldCBJRCBlbmNvdW50ZXJlZC4gKi9cbiAgICAgICAgdGhpcy5oaWdoZXN0VGFyZ2V0SWQgPSAwLCBcbiAgICAgICAgLyoqIFRoZSBoaWdoZXN0IHNlcXVlbmNlIG51bWJlciBlbmNvdW50ZXJlZC4gKi9cbiAgICAgICAgdGhpcy5BcyA9IDAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBvcmRlcmVkIGJpZGlyZWN0aW9uYWwgbWFwcGluZyBiZXR3ZWVuIGRvY3VtZW50cyBhbmQgdGhlIHJlbW90ZSB0YXJnZXRcbiAgICAgICAgICogSURzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5ScyA9IG5ldyBWciwgdGhpcy50YXJnZXRDb3VudCA9IDAsIHRoaXMuUHMgPSAkaS5pZSgpO1xuICAgIH1cbiAgICBmb3JFYWNoVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSXMuZm9yRWFjaCgoKHQsIG4pID0+IGUobikpKSwgR3MucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIEdzLnJlc29sdmUodGhpcy5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKTtcbiAgICB9XG4gICAgZ2V0SGlnaGVzdFNlcXVlbmNlTnVtYmVyKHQpIHtcbiAgICAgICAgcmV0dXJuIEdzLnJlc29sdmUodGhpcy5Bcyk7XG4gICAgfVxuICAgIGFsbG9jYXRlVGFyZ2V0SWQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oaWdoZXN0VGFyZ2V0SWQgPSB0aGlzLlBzLm5leHQoKSwgR3MucmVzb2x2ZSh0aGlzLmhpZ2hlc3RUYXJnZXRJZCk7XG4gICAgfVxuICAgIHNldFRhcmdldHNNZXRhZGF0YSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBuICYmICh0aGlzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSBuKSwgZSA+IHRoaXMuQXMgJiYgKHRoaXMuQXMgPSBlKSwgXG4gICAgICAgIEdzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgY2UodCkge1xuICAgICAgICB0aGlzLklzLnNldCh0LnRhcmdldCwgdCk7XG4gICAgICAgIGNvbnN0IGUgPSB0LnRhcmdldElkO1xuICAgICAgICBlID4gdGhpcy5oaWdoZXN0VGFyZ2V0SWQgJiYgKHRoaXMuUHMgPSBuZXcgJGkoZSksIHRoaXMuaGlnaGVzdFRhcmdldElkID0gZSksIHQuc2VxdWVuY2VOdW1iZXIgPiB0aGlzLkFzICYmICh0aGlzLkFzID0gdC5zZXF1ZW5jZU51bWJlcik7XG4gICAgfVxuICAgIGFkZFRhcmdldERhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jZShlKSwgdGhpcy50YXJnZXRDb3VudCArPSAxLCBHcy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHVwZGF0ZVRhcmdldERhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jZShlKSwgR3MucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSXMuZGVsZXRlKGUudGFyZ2V0KSwgdGhpcy5Scy51cyhlLnRhcmdldElkKSwgdGhpcy50YXJnZXRDb3VudCAtPSAxLCBcbiAgICAgICAgR3MucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXRzKHQsIGUsIG4pIHtcbiAgICAgICAgbGV0IHMgPSAwO1xuICAgICAgICBjb25zdCBpID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLklzLmZvckVhY2goKChyLCBvKSA9PiB7XG4gICAgICAgICAgICBvLnNlcXVlbmNlTnVtYmVyIDw9IGUgJiYgbnVsbCA9PT0gbi5nZXQoby50YXJnZXRJZCkgJiYgKHRoaXMuSXMuZGVsZXRlKHIpLCBpLnB1c2godGhpcy5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBvLnRhcmdldElkKSksIFxuICAgICAgICAgICAgcysrKTtcbiAgICAgICAgfSkpLCBHcy53YWl0Rm9yKGkpLm5leHQoKCgpID0+IHMpKTtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0Q291bnQodCkge1xuICAgICAgICByZXR1cm4gR3MucmVzb2x2ZSh0aGlzLnRhcmdldENvdW50KTtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLklzLmdldChlKSB8fCBudWxsO1xuICAgICAgICByZXR1cm4gR3MucmVzb2x2ZShuKTtcbiAgICB9XG4gICAgYWRkTWF0Y2hpbmdLZXlzKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuUnMucnMoZSwgbiksIEdzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlTWF0Y2hpbmdLZXlzKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5Scy5jcyhlLCBuKTtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUsIGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIHMgJiYgZS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIGkucHVzaChzLm1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKHQsIGUpKTtcbiAgICAgICAgfSkpLCBHcy53YWl0Rm9yKGkpO1xuICAgIH1cbiAgICByZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlJzLnVzKGUpLCBHcy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuUnMubHMoZSk7XG4gICAgICAgIHJldHVybiBHcy5yZXNvbHZlKG4pO1xuICAgIH1cbiAgICBjb250YWluc0tleSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBHcy5yZXNvbHZlKHRoaXMuUnMuY29udGFpbnNLZXkoZSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBtZW1vcnktYmFja2VkIGluc3RhbmNlIG9mIFBlcnNpc3RlbmNlLiBEYXRhIGlzIHN0b3JlZCBvbmx5IGluIFJBTSBhbmRcbiAqIG5vdCBwZXJzaXN0ZWQgYWNyb3NzIHNlc3Npb25zLlxuICovXG5jbGFzcyB4ciB7XG4gICAgLyoqXG4gICAgICogVGhlIGNvbnN0cnVjdG9yIGFjY2VwdHMgYSBmYWN0b3J5IGZvciBjcmVhdGluZyBhIHJlZmVyZW5jZSBkZWxlZ2F0ZS4gVGhpc1xuICAgICAqIGFsbG93cyBib3RoIHRoZSBkZWxlZ2F0ZSBhbmQgdGhpcyBpbnN0YW5jZSB0byBoYXZlIHN0cm9uZyByZWZlcmVuY2VzIHRvXG4gICAgICogZWFjaCBvdGhlciB3aXRob3V0IGhhdmluZyBudWxsYWJsZSBmaWVsZHMgdGhhdCB3b3VsZCB0aGVuIG5lZWQgdG8gYmVcbiAgICAgKiBjaGVja2VkIG9yIGFzc2VydGVkIG9uIGV2ZXJ5IGFjY2Vzcy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuYnMgPSB7fSwgdGhpcy5CZSA9IG5ldyBldCgwKSwgdGhpcy5VZSA9ICExLCB0aGlzLlVlID0gITAsIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSB0KHRoaXMpLCBcbiAgICAgICAgdGhpcy5IZSA9IG5ldyBrcih0aGlzKTtcbiAgICAgICAgdGhpcy5KdCA9IG5ldyBJaSwgdGhpcy5KZSA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ3IodCwgZSk7XG4gICAgICAgIH0odGhpcy5KdCwgKHQgPT4gdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS52cyh0KSkpLCB0aGlzLmsgPSBuZXcgY2koZSksIHRoaXMuWWUgPSBuZXcgdnIodGhpcy5rKTtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIC8vIE5vIGR1cmFibGUgc3RhdGUgdG8gZW5zdXJlIGlzIGNsb3NlZCBvbiBzaHV0ZG93bi5cbiAgICAgICAgcmV0dXJuIHRoaXMuVWUgPSAhMSwgUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldCBzdGFydGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5VZTtcbiAgICB9XG4gICAgc2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIoKSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICBzZXROZXR3b3JrRW5hYmxlZCgpIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIGdldEluZGV4TWFuYWdlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSnQ7XG4gICAgfVxuICAgIGdldE11dGF0aW9uUXVldWUodCkge1xuICAgICAgICBsZXQgZSA9IHRoaXMuYnNbdC50b0tleSgpXTtcbiAgICAgICAgcmV0dXJuIGUgfHwgKGUgPSBuZXcgRHIodGhpcy5KdCwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSksIHRoaXMuYnNbdC50b0tleSgpXSA9IGUpLCBcbiAgICAgICAgZTtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0Q2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkhlO1xuICAgIH1cbiAgICBnZXRSZW1vdGVEb2N1bWVudENhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5KZTtcbiAgICB9XG4gICAgZ2V0QnVuZGxlQ2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlllO1xuICAgIH1cbiAgICBydW5UcmFuc2FjdGlvbih0LCBlLCBuKSB7XG4gICAgICAgICQoXCJNZW1vcnlQZXJzaXN0ZW5jZVwiLCBcIlN0YXJ0aW5nIHRyYW5zYWN0aW9uOlwiLCB0KTtcbiAgICAgICAgY29uc3QgcyA9IG5ldyAkcih0aGlzLkJlLm5leHQoKSk7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLlZzKCksIG4ocykubmV4dCgodCA9PiB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLlNzKHMpLm5leHQoKCgpID0+IHQpKSkpLnRvUHJvbWlzZSgpLnRoZW4oKHQgPT4gKHMucmFpc2VPbkNvbW1pdHRlZEV2ZW50KCksIFxuICAgICAgICB0KSkpO1xuICAgIH1cbiAgICBEcyh0LCBlKSB7XG4gICAgICAgIHJldHVybiBHcy5vcihPYmplY3QudmFsdWVzKHRoaXMuYnMpLm1hcCgobiA9PiAoKSA9PiBuLmNvbnRhaW5zS2V5KHQsIGUpKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBNZW1vcnkgcGVyc2lzdGVuY2UgaXMgbm90IGFjdHVhbGx5IHRyYW5zYWN0aW9uYWwsIGJ1dCBmdXR1cmUgaW1wbGVtZW50YXRpb25zXG4gKiBtYXkgaGF2ZSB0cmFuc2FjdGlvbi1zY29wZWQgc3RhdGUuXG4gKi8gY2xhc3MgJHIgZXh0ZW5kcyBXcyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmN1cnJlbnRTZXF1ZW5jZU51bWJlciA9IHQ7XG4gICAgfVxufVxuXG5jbGFzcyBGciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gdCwgXG4gICAgICAgIC8qKiBUcmFja3MgYWxsIGRvY3VtZW50cyB0aGF0IGFyZSBhY3RpdmUgaW4gUXVlcnkgdmlld3MuICovXG4gICAgICAgIHRoaXMuQ3MgPSBuZXcgVnIsIFxuICAgICAgICAvKiogVGhlIGxpc3Qgb2YgZG9jdW1lbnRzIHRoYXQgYXJlIHBvdGVudGlhbGx5IEdDZWQgYWZ0ZXIgZWFjaCB0cmFuc2FjdGlvbi4gKi9cbiAgICAgICAgdGhpcy5OcyA9IG51bGw7XG4gICAgfVxuICAgIHN0YXRpYyBrcyh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgRnIodCk7XG4gICAgfVxuICAgIGdldCB4cygpIHtcbiAgICAgICAgaWYgKHRoaXMuTnMpIHJldHVybiB0aGlzLk5zO1xuICAgICAgICB0aHJvdyBMKCk7XG4gICAgfVxuICAgIGFkZFJlZmVyZW5jZSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkNzLmFkZFJlZmVyZW5jZShuLCBlKSwgdGhpcy54cy5kZWxldGUobi50b1N0cmluZygpKSwgR3MucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVSZWZlcmVuY2UodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5Dcy5yZW1vdmVSZWZlcmVuY2UobiwgZSksIHRoaXMueHMuYWRkKG4udG9TdHJpbmcoKSksIEdzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgbWFya1BvdGVudGlhbGx5T3JwaGFuZWQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy54cy5hZGQoZS50b1N0cmluZygpKSwgR3MucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXQodCwgZSkge1xuICAgICAgICB0aGlzLkNzLnVzKGUudGFyZ2V0SWQpLmZvckVhY2goKHQgPT4gdGhpcy54cy5hZGQodC50b1N0cmluZygpKSkpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpO1xuICAgICAgICByZXR1cm4gbi5nZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBlLnRhcmdldElkKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIHQuZm9yRWFjaCgodCA9PiB0aGlzLnhzLmFkZCh0LnRvU3RyaW5nKCkpKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuLnJlbW92ZVRhcmdldERhdGEodCwgZSkpKTtcbiAgICB9XG4gICAgVnMoKSB7XG4gICAgICAgIHRoaXMuTnMgPSBuZXcgU2V0O1xuICAgIH1cbiAgICBTcyh0KSB7XG4gICAgICAgIC8vIFJlbW92ZSBuZXdseSBvcnBoYW5lZCBkb2N1bWVudHMuXG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnBlcnNpc3RlbmNlLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKS5uZXdDaGFuZ2VCdWZmZXIoKTtcbiAgICAgICAgcmV0dXJuIEdzLmZvckVhY2godGhpcy54cywgKG4gPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IFN0LmZyb21QYXRoKG4pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHModCwgcykubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgdCB8fCBlLnJlbW92ZUVudHJ5KHMpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gKHRoaXMuTnMgPSBudWxsLCBlLmFwcGx5KHQpKSkpO1xuICAgIH1cbiAgICB1cGRhdGVMaW1ib0RvY3VtZW50KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJHModCwgZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICB0ID8gdGhpcy54cy5kZWxldGUoZS50b1N0cmluZygpKSA6IHRoaXMueHMuYWRkKGUudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdnModCkge1xuICAgICAgICAvLyBGb3IgZWFnZXIgR0MsIHdlIGRvbid0IGNhcmUgYWJvdXQgdGhlIGRvY3VtZW50IHNpemUsIHRoZXJlIGFyZSBubyBzaXplIHRocmVzaG9sZHMuXG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICAkcyh0LCBlKSB7XG4gICAgICAgIHJldHVybiBHcy5vcihbICgpID0+IEdzLnJlc29sdmUodGhpcy5Dcy5jb250YWluc0tleShlKSksICgpID0+IHRoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKS5jb250YWluc0tleSh0LCBlKSwgKCkgPT4gdGhpcy5wZXJzaXN0ZW5jZS5Ecyh0LCBlKSBdKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBUaGUgZm9ybWF0IG9mIHRoZSBMb2NhbFN0b3JhZ2Uga2V5IHRoYXQgc3RvcmVzIHRoZSBjbGllbnQgc3RhdGUgaXM6XG4vLyAgICAgZmlyZXN0b3JlX2NsaWVudHNfPHBlcnNpc3RlbmNlX3ByZWZpeD5fPGluc3RhbmNlX2tleT5cbi8qKiBBc3NlbWJsZXMgdGhlIGtleSBmb3IgYSBjbGllbnQgc3RhdGUgaW4gV2ViU3RvcmFnZSAqL1xuZnVuY3Rpb24gT3IodCwgZSkge1xuICAgIHJldHVybiBgZmlyZXN0b3JlX2NsaWVudHNfJHt0fV8ke2V9YDtcbn1cblxuLy8gVGhlIGZvcm1hdCBvZiB0aGUgV2ViU3RvcmFnZSBrZXkgdGhhdCBzdG9yZXMgdGhlIG11dGF0aW9uIHN0YXRlIGlzOlxuLy8gICAgIGZpcmVzdG9yZV9tdXRhdGlvbnNfPHBlcnNpc3RlbmNlX3ByZWZpeD5fPGJhdGNoX2lkPlxuLy8gICAgIChmb3IgdW5hdXRoZW50aWNhdGVkIHVzZXJzKVxuLy8gb3I6IGZpcmVzdG9yZV9tdXRhdGlvbnNfPHBlcnNpc3RlbmNlX3ByZWZpeD5fPGJhdGNoX2lkPl88dXNlcl91aWQ+XG5cbi8vICd1c2VyX3VpZCcgaXMgbGFzdCB0byBhdm9pZCBuZWVkaW5nIHRvIGVzY2FwZSAnXycgY2hhcmFjdGVycyB0aGF0IGl0IG1pZ2h0XG4vLyBjb250YWluLlxuLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciBhIG11dGF0aW9uIGJhdGNoIGluIFdlYlN0b3JhZ2UgKi9cbmZ1bmN0aW9uIE1yKHQsIGUsIG4pIHtcbiAgICBsZXQgcyA9IGBmaXJlc3RvcmVfbXV0YXRpb25zXyR7dH1fJHtufWA7XG4gICAgcmV0dXJuIGUuaXNBdXRoZW50aWNhdGVkKCkgJiYgKHMgKz0gYF8ke2UudWlkfWApLCBzO1xufVxuXG4vLyBUaGUgZm9ybWF0IG9mIHRoZSBXZWJTdG9yYWdlIGtleSB0aGF0IHN0b3JlcyBhIHF1ZXJ5IHRhcmdldCdzIG1ldGFkYXRhIGlzOlxuLy8gICAgIGZpcmVzdG9yZV90YXJnZXRzXzxwZXJzaXN0ZW5jZV9wcmVmaXg+Xzx0YXJnZXRfaWQ+XG4vKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIGEgcXVlcnkgc3RhdGUgaW4gV2ViU3RvcmFnZSAqL1xuZnVuY3Rpb24gTHIodCwgZSkge1xuICAgIHJldHVybiBgZmlyZXN0b3JlX3RhcmdldHNfJHt0fV8ke2V9YDtcbn1cblxuLy8gVGhlIFdlYlN0b3JhZ2UgcHJlZml4IHRoYXQgc3RvcmVzIHRoZSBwcmltYXJ5IHRhYidzIG9ubGluZSBzdGF0ZS4gVGhlXG4vLyBmb3JtYXQgb2YgdGhlIGtleSBpczpcbi8vICAgICBmaXJlc3RvcmVfb25saW5lX3N0YXRlXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XG4vKipcbiAqIEhvbGRzIHRoZSBzdGF0ZSBvZiBhIG11dGF0aW9uIGJhdGNoLCBpbmNsdWRpbmcgaXRzIHVzZXIgSUQsIGJhdGNoIElEIGFuZFxuICogd2hldGhlciB0aGUgYmF0Y2ggaXMgJ3BlbmRpbmcnLCAnYWNrbm93bGVkZ2VkJyBvciAncmVqZWN0ZWQnLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXG5jbGFzcyBCciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLnVzZXIgPSB0LCB0aGlzLmJhdGNoSWQgPSBlLCB0aGlzLnN0YXRlID0gbiwgdGhpcy5lcnJvciA9IHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIE11dGF0aW9uTWV0YWRhdGEgZnJvbSBpdHMgSlNPTiByZXByZXNlbnRhdGlvbiBpbiBXZWJTdG9yYWdlLlxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXG4gICAgICovICAgIHN0YXRpYyBGcyh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBKU09OLnBhcnNlKG4pO1xuICAgICAgICBsZXQgaSwgciA9IFwib2JqZWN0XCIgPT0gdHlwZW9mIHMgJiYgLTEgIT09IFsgXCJwZW5kaW5nXCIsIFwiYWNrbm93bGVkZ2VkXCIsIFwicmVqZWN0ZWRcIiBdLmluZGV4T2Yocy5zdGF0ZSkgJiYgKHZvaWQgMCA9PT0gcy5lcnJvciB8fCBcIm9iamVjdFwiID09IHR5cGVvZiBzLmVycm9yKTtcbiAgICAgICAgcmV0dXJuIHIgJiYgcy5lcnJvciAmJiAociA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIHMuZXJyb3IubWVzc2FnZSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiBzLmVycm9yLmNvZGUsIFxuICAgICAgICByICYmIChpID0gbmV3IGoocy5lcnJvci5jb2RlLCBzLmVycm9yLm1lc3NhZ2UpKSksIHIgPyBuZXcgQnIodCwgZSwgcy5zdGF0ZSwgaSkgOiAoRihcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBGYWlsZWQgdG8gcGFyc2UgbXV0YXRpb24gc3RhdGUgZm9yIElEICcke2V9JzogJHtufWApLCBcbiAgICAgICAgbnVsbCk7XG4gICAgfVxuICAgIE9zKCkge1xuICAgICAgICBjb25zdCB0ID0ge1xuICAgICAgICAgICAgc3RhdGU6IHRoaXMuc3RhdGUsXG4gICAgICAgICAgICB1cGRhdGVUaW1lTXM6IERhdGUubm93KClcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3IgJiYgKHQuZXJyb3IgPSB7XG4gICAgICAgICAgICBjb2RlOiB0aGlzLmVycm9yLmNvZGUsXG4gICAgICAgICAgICBtZXNzYWdlOiB0aGlzLmVycm9yLm1lc3NhZ2VcbiAgICAgICAgfSksIEpTT04uc3RyaW5naWZ5KHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIb2xkcyB0aGUgc3RhdGUgb2YgYSBxdWVyeSB0YXJnZXQsIGluY2x1ZGluZyBpdHMgdGFyZ2V0IElEIGFuZCB3aGV0aGVyIHRoZVxuICogdGFyZ2V0IGlzICdub3QtY3VycmVudCcsICdjdXJyZW50JyBvciAncmVqZWN0ZWQnLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXG5jbGFzcyBVciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLnRhcmdldElkID0gdCwgdGhpcy5zdGF0ZSA9IGUsIHRoaXMuZXJyb3IgPSBuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBRdWVyeVRhcmdldE1ldGFkYXRhIGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24gaW4gV2ViU3RvcmFnZS5cbiAgICAgKiBMb2dzIGEgd2FybmluZyBhbmQgcmV0dXJucyBudWxsIGlmIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgaXMgbm90IHZhbGlkLlxuICAgICAqLyAgICBzdGF0aWMgRnModCwgZSkge1xuICAgICAgICBjb25zdCBuID0gSlNPTi5wYXJzZShlKTtcbiAgICAgICAgbGV0IHMsIGkgPSBcIm9iamVjdFwiID09IHR5cGVvZiBuICYmIC0xICE9PSBbIFwibm90LWN1cnJlbnRcIiwgXCJjdXJyZW50XCIsIFwicmVqZWN0ZWRcIiBdLmluZGV4T2Yobi5zdGF0ZSkgJiYgKHZvaWQgMCA9PT0gbi5lcnJvciB8fCBcIm9iamVjdFwiID09IHR5cGVvZiBuLmVycm9yKTtcbiAgICAgICAgcmV0dXJuIGkgJiYgbi5lcnJvciAmJiAoaSA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIG4uZXJyb3IubWVzc2FnZSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiBuLmVycm9yLmNvZGUsIFxuICAgICAgICBpICYmIChzID0gbmV3IGoobi5lcnJvci5jb2RlLCBuLmVycm9yLm1lc3NhZ2UpKSksIGkgPyBuZXcgVXIodCwgbi5zdGF0ZSwgcykgOiAoRihcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBGYWlsZWQgdG8gcGFyc2UgdGFyZ2V0IHN0YXRlIGZvciBJRCAnJHt0fSc6ICR7ZX1gKSwgXG4gICAgICAgIG51bGwpO1xuICAgIH1cbiAgICBPcygpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlLFxuICAgICAgICAgICAgdXBkYXRlVGltZU1zOiBEYXRlLm5vdygpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLmVycm9yICYmICh0LmVycm9yID0ge1xuICAgICAgICAgICAgY29kZTogdGhpcy5lcnJvci5jb2RlLFxuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5lcnJvci5tZXNzYWdlXG4gICAgICAgIH0pLCBKU09OLnN0cmluZ2lmeSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogVGhpcyBjbGFzcyByZXByZXNlbnRzIHRoZSBpbW11dGFibGUgQ2xpZW50U3RhdGUgZm9yIGEgY2xpZW50IHJlYWQgZnJvbVxuICogV2ViU3RvcmFnZSwgY29udGFpbmluZyB0aGUgbGlzdCBvZiBhY3RpdmUgcXVlcnkgdGFyZ2V0cy5cbiAqLyBjbGFzcyBxciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmNsaWVudElkID0gdCwgdGhpcy5hY3RpdmVUYXJnZXRJZHMgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBSZW1vdGVDbGllbnRTdGF0ZSBmcm9tIHRoZSBKU09OIHJlcHJlc2VudGF0aW9uIGluIFdlYlN0b3JhZ2UuXG4gICAgICogTG9ncyBhIHdhcm5pbmcgYW5kIHJldHVybnMgbnVsbCBpZiB0aGUgZm9ybWF0IG9mIHRoZSBkYXRhIGlzIG5vdCB2YWxpZC5cbiAgICAgKi8gICAgc3RhdGljIEZzKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IEpTT04ucGFyc2UoZSk7XG4gICAgICAgIGxldCBzID0gXCJvYmplY3RcIiA9PSB0eXBlb2YgbiAmJiBuLmFjdGl2ZVRhcmdldElkcyBpbnN0YW5jZW9mIEFycmF5LCBpID0gQ24oKTtcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHMgJiYgdCA8IG4uYWN0aXZlVGFyZ2V0SWRzLmxlbmd0aDsgKyt0KSBzID0gVnQobi5hY3RpdmVUYXJnZXRJZHNbdF0pLCBcbiAgICAgICAgaSA9IGkuYWRkKG4uYWN0aXZlVGFyZ2V0SWRzW3RdKTtcbiAgICAgICAgcmV0dXJuIHMgPyBuZXcgcXIodCwgaSkgOiAoRihcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBGYWlsZWQgdG8gcGFyc2UgY2xpZW50IGRhdGEgZm9yIGluc3RhbmNlICcke3R9JzogJHtlfWApLCBcbiAgICAgICAgbnVsbCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgcmVwcmVzZW50cyB0aGUgb25saW5lIHN0YXRlIGZvciBhbGwgY2xpZW50cyBwYXJ0aWNpcGF0aW5nIGluXG4gKiBtdWx0aS10YWIuIFRoZSBvbmxpbmUgc3RhdGUgaXMgb25seSB3cml0dGVuIHRvIGJ5IHRoZSBwcmltYXJ5IGNsaWVudCwgYW5kXG4gKiB1c2VkIGluIHNlY29uZGFyeSBjbGllbnRzIHRvIHVwZGF0ZSB0aGVpciBxdWVyeSB2aWV3cy5cbiAqLyBjbGFzcyBLciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmNsaWVudElkID0gdCwgdGhpcy5vbmxpbmVTdGF0ZSA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIFNoYXJlZE9ubGluZVN0YXRlIGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24gaW4gV2ViU3RvcmFnZS5cbiAgICAgKiBMb2dzIGEgd2FybmluZyBhbmQgcmV0dXJucyBudWxsIGlmIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgaXMgbm90IHZhbGlkLlxuICAgICAqLyAgICBzdGF0aWMgRnModCkge1xuICAgICAgICBjb25zdCBlID0gSlNPTi5wYXJzZSh0KTtcbiAgICAgICAgcmV0dXJuIFwib2JqZWN0XCIgPT0gdHlwZW9mIGUgJiYgLTEgIT09IFsgXCJVbmtub3duXCIsIFwiT25saW5lXCIsIFwiT2ZmbGluZVwiIF0uaW5kZXhPZihlLm9ubGluZVN0YXRlKSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiBlLmNsaWVudElkID8gbmV3IEtyKGUuY2xpZW50SWQsIGUub25saW5lU3RhdGUpIDogKEYoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgRmFpbGVkIHRvIHBhcnNlIG9ubGluZSBzdGF0ZTogJHt0fWApLCBcbiAgICAgICAgbnVsbCk7XG4gICAgfVxufVxuXG4vKipcbiAqIE1ldGFkYXRhIHN0YXRlIG9mIHRoZSBsb2NhbCBjbGllbnQuIFVubGlrZSBgUmVtb3RlQ2xpZW50U3RhdGVgLCB0aGlzIGNsYXNzIGlzXG4gKiBtdXRhYmxlIGFuZCBrZWVwcyB0cmFjayBvZiBhbGwgcGVuZGluZyBtdXRhdGlvbnMsIHdoaWNoIGFsbG93cyB1cyB0b1xuICogdXBkYXRlIHRoZSByYW5nZSBvZiBwZW5kaW5nIG11dGF0aW9uIGJhdGNoIElEcyBhcyBuZXcgbXV0YXRpb25zIGFyZSBhZGRlZCBvclxuICogcmVtb3ZlZC5cbiAqXG4gKiBUaGUgZGF0YSBpbiBgTG9jYWxDbGllbnRTdGF0ZWAgaXMgbm90IHJlYWQgZnJvbSBXZWJTdG9yYWdlIGFuZCBpbnN0ZWFkXG4gKiB1cGRhdGVkIHZpYSBpdHMgaW5zdGFuY2UgbWV0aG9kcy4gVGhlIHVwZGF0ZWQgc3RhdGUgY2FuIGJlIHNlcmlhbGl6ZWQgdmlhXG4gKiBgdG9XZWJTdG9yYWdlSlNPTigpYC5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cbmNsYXNzIGpyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5hY3RpdmVUYXJnZXRJZHMgPSBDbigpO1xuICAgIH1cbiAgICBNcyh0KSB7XG4gICAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gdGhpcy5hY3RpdmVUYXJnZXRJZHMuYWRkKHQpO1xuICAgIH1cbiAgICBMcyh0KSB7XG4gICAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gdGhpcy5hY3RpdmVUYXJnZXRJZHMuZGVsZXRlKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGlzIGVudHJ5IGludG8gYSBKU09OLWVuY29kZWQgZm9ybWF0IHdlIGNhbiB1c2UgZm9yIFdlYlN0b3JhZ2UuXG4gICAgICogRG9lcyBub3QgZW5jb2RlIGBjbGllbnRJZGAgYXMgaXQgaXMgcGFydCBvZiB0aGUga2V5IGluIFdlYlN0b3JhZ2UuXG4gICAgICovICAgIE9zKCkge1xuICAgICAgICBjb25zdCB0ID0ge1xuICAgICAgICAgICAgYWN0aXZlVGFyZ2V0SWRzOiB0aGlzLmFjdGl2ZVRhcmdldElkcy50b0FycmF5KCksXG4gICAgICAgICAgICB1cGRhdGVUaW1lTXM6IERhdGUubm93KClcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlYCB1c2VzIFdlYlN0b3JhZ2UgKHdpbmRvdy5sb2NhbFN0b3JhZ2UpIGFzIHRoZVxuICogYmFja2luZyBzdG9yZSBmb3IgdGhlIFNoYXJlZENsaWVudFN0YXRlLiBJdCBrZWVwcyB0cmFjayBvZiBhbGwgYWN0aXZlXG4gKiBjbGllbnRzIGFuZCBzdXBwb3J0cyBtb2RpZmljYXRpb25zIG9mIHRoZSBsb2NhbCBjbGllbnQncyBkYXRhLlxuICovIGNsYXNzIFFyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHRoaXMud2luZG93ID0gdCwgdGhpcy5PZSA9IGUsIHRoaXMucGVyc2lzdGVuY2VLZXkgPSBuLCB0aGlzLkJzID0gcywgdGhpcy5zeW5jRW5naW5lID0gbnVsbCwgXG4gICAgICAgIHRoaXMub25saW5lU3RhdGVIYW5kbGVyID0gbnVsbCwgdGhpcy5zZXF1ZW5jZU51bWJlckhhbmRsZXIgPSBudWxsLCB0aGlzLlVzID0gdGhpcy5xcy5iaW5kKHRoaXMpLCBcbiAgICAgICAgdGhpcy5LcyA9IG5ldyBnbihpdCksIHRoaXMuc3RhcnRlZCA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhcHR1cmVzIFdlYlN0b3JhZ2UgZXZlbnRzIHRoYXQgb2NjdXIgYmVmb3JlIGBzdGFydCgpYCBpcyBjYWxsZWQuIFRoZXNlXG4gICAgICAgICAqIGV2ZW50cyBhcmUgcmVwbGF5ZWQgb25jZSBgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlYCBpcyBzdGFydGVkLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5qcyA9IFtdO1xuICAgICAgICAvLyBFc2NhcGUgdGhlIHNwZWNpYWwgY2hhcmFjdGVycyBtZW50aW9uZWQgaGVyZTpcbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9HdWlkZS9SZWd1bGFyX0V4cHJlc3Npb25zXG4gICAgICAgIGNvbnN0IHIgPSBuLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCBcIlxcXFwkJlwiKTtcbiAgICAgICAgdGhpcy5zdG9yYWdlID0gdGhpcy53aW5kb3cubG9jYWxTdG9yYWdlLCB0aGlzLmN1cnJlbnRVc2VyID0gaSwgdGhpcy5RcyA9IE9yKHRoaXMucGVyc2lzdGVuY2VLZXksIHRoaXMuQnMpLCBcbiAgICAgICAgdGhpcy5XcyA9IFxuICAgICAgICAvKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIHRoZSBjdXJyZW50IHNlcXVlbmNlIG51bWJlci4gKi9cbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIGBmaXJlc3RvcmVfc2VxdWVuY2VfbnVtYmVyXyR7dH1gO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovICh0aGlzLnBlcnNpc3RlbmNlS2V5KSwgdGhpcy5LcyA9IHRoaXMuS3MuaW5zZXJ0KHRoaXMuQnMsIG5ldyBqciksIHRoaXMuR3MgPSBuZXcgUmVnRXhwKGBeZmlyZXN0b3JlX2NsaWVudHNfJHtyfV8oW15fXSopJGApLCBcbiAgICAgICAgdGhpcy56cyA9IG5ldyBSZWdFeHAoYF5maXJlc3RvcmVfbXV0YXRpb25zXyR7cn1fKFxcXFxkKykoPzpfKC4qKSk/JGApLCB0aGlzLkhzID0gbmV3IFJlZ0V4cChgXmZpcmVzdG9yZV90YXJnZXRzXyR7cn1fKFxcXFxkKykkYCksIFxuICAgICAgICB0aGlzLkpzID0gXG4gICAgICAgIC8qKiBBc3NlbWJsZXMgdGhlIGtleSBmb3IgdGhlIG9ubGluZSBzdGF0ZSBvZiB0aGUgcHJpbWFyeSB0YWIuICovXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBgZmlyZXN0b3JlX29ubGluZV9zdGF0ZV8ke3R9YDtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgV2ViU3RvcmFnZSBwcmVmaXggdGhhdCBwbGF5cyBhcyBhIGV2ZW50IHRvIGluZGljYXRlIHRoZSByZW1vdGUgZG9jdW1lbnRzXG4gICAgICAgIC8vIG1pZ2h0IGhhdmUgY2hhbmdlZCBkdWUgdG8gc29tZSBzZWNvbmRhcnkgdGFicyBsb2FkaW5nIGEgYnVuZGxlLlxuICAgICAgICAvLyBmb3JtYXQgb2YgdGhlIGtleSBpczpcbiAgICAgICAgLy8gICAgIGZpcmVzdG9yZV9idW5kbGVfbG9hZGVkXzxwZXJzaXN0ZW5jZUtleT5cbiAgICAgICAgKHRoaXMucGVyc2lzdGVuY2VLZXkpLCB0aGlzLllzID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIGBmaXJlc3RvcmVfYnVuZGxlX2xvYWRlZF8ke3R9YDtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgV2ViU3RvcmFnZSBrZXkgcHJlZml4IGZvciB0aGUga2V5IHRoYXQgc3RvcmVzIHRoZSBsYXN0IHNlcXVlbmNlIG51bWJlciBhbGxvY2F0ZWQuIFRoZSBrZXlcbiAgICAgICAgLy8gbG9va3MgbGlrZSAnZmlyZXN0b3JlX3NlcXVlbmNlX251bWJlcl88cGVyc2lzdGVuY2VfcHJlZml4PicuXG4gICAgICAgICh0aGlzLnBlcnNpc3RlbmNlS2V5KSwgXG4gICAgICAgIC8vIFJhdGhlciB0aGFuIGFkZGluZyB0aGUgc3RvcmFnZSBvYnNlcnZlciBkdXJpbmcgc3RhcnQoKSwgd2UgYWRkIHRoZVxuICAgICAgICAvLyBzdG9yYWdlIG9ic2VydmVyIGR1cmluZyBpbml0aWFsaXphdGlvbi4gVGhpcyBlbnN1cmVzIHRoYXQgd2UgY29sbGVjdFxuICAgICAgICAvLyBldmVudHMgYmVmb3JlIG90aGVyIGNvbXBvbmVudHMgcG9wdWxhdGUgdGhlaXIgaW5pdGlhbCBzdGF0ZSAoZHVyaW5nIHRoZWlyXG4gICAgICAgIC8vIHJlc3BlY3RpdmUgc3RhcnQoKSBjYWxscykuIE90aGVyd2lzZSwgd2UgbWlnaHQgZm9yIGV4YW1wbGUgbWlzcyBhXG4gICAgICAgIC8vIG11dGF0aW9uIHRoYXQgaXMgYWRkZWQgYWZ0ZXIgTG9jYWxTdG9yZSdzIHN0YXJ0KCkgcHJvY2Vzc2VkIHRoZSBleGlzdGluZ1xuICAgICAgICAvLyBtdXRhdGlvbnMgYnV0IGJlZm9yZSB3ZSBvYnNlcnZlIFdlYlN0b3JhZ2UgZXZlbnRzLlxuICAgICAgICB0aGlzLndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic3RvcmFnZVwiLCB0aGlzLlVzKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgJ3RydWUnIGlmIFdlYlN0b3JhZ2UgaXMgYXZhaWxhYmxlIGluIHRoZSBjdXJyZW50IGVudmlyb25tZW50LiAqLyAgICBzdGF0aWMgYnQodCkge1xuICAgICAgICByZXR1cm4gISghdCB8fCAhdC5sb2NhbFN0b3JhZ2UpO1xuICAgIH1cbiAgICBhc3luYyBzdGFydCgpIHtcbiAgICAgICAgLy8gUmV0cmlldmUgdGhlIGxpc3Qgb2YgZXhpc3RpbmcgY2xpZW50cyB0byBiYWNrZmlsbCB0aGUgZGF0YSBpblxuICAgICAgICAvLyBTaGFyZWRDbGllbnRTdGF0ZS5cbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IHRoaXMuc3luY0VuZ2luZS5UbigpO1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdCkge1xuICAgICAgICAgICAgaWYgKGUgPT09IHRoaXMuQnMpIGNvbnRpbnVlO1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuZ2V0SXRlbShPcih0aGlzLnBlcnNpc3RlbmNlS2V5LCBlKSk7XG4gICAgICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBxci5GcyhlLCB0KTtcbiAgICAgICAgICAgICAgICBuICYmICh0aGlzLktzID0gdGhpcy5Lcy5pbnNlcnQobi5jbGllbnRJZCwgbikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuWHMoKTtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYW4gZXhpc3Rpbmcgb25saW5lIHN0YXRlIGFuZCBjYWxsIHRoZSBjYWxsYmFjayBoYW5kbGVyXG4gICAgICAgIC8vIGlmIGFwcGxpY2FibGUuXG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbSh0aGlzLkpzKTtcbiAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLlpzKGUpO1xuICAgICAgICAgICAgdCAmJiB0aGlzLnRpKHQpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLmpzKSB0aGlzLnFzKHQpO1xuICAgICAgICB0aGlzLmpzID0gW10sIFxuICAgICAgICAvLyBSZWdpc3RlciBhIHdpbmRvdyB1bmxvYWQgaG9vayB0byByZW1vdmUgdGhlIGNsaWVudCBtZXRhZGF0YSBlbnRyeSBmcm9tXG4gICAgICAgIC8vIFdlYlN0b3JhZ2UgZXZlbiBpZiBgc2h1dGRvd24oKWAgd2FzIG5vdCBjYWxsZWQuXG4gICAgICAgIHRoaXMud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwYWdlaGlkZVwiLCAoKCkgPT4gdGhpcy5zaHV0ZG93bigpKSksIHRoaXMuc3RhcnRlZCA9ICEwO1xuICAgIH1cbiAgICB3cml0ZVNlcXVlbmNlTnVtYmVyKHQpIHtcbiAgICAgICAgdGhpcy5zZXRJdGVtKHRoaXMuV3MsIEpTT04uc3RyaW5naWZ5KHQpKTtcbiAgICB9XG4gICAgZ2V0QWxsQWN0aXZlUXVlcnlUYXJnZXRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5laSh0aGlzLktzKTtcbiAgICB9XG4gICAgaXNBY3RpdmVRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIGxldCBlID0gITE7XG4gICAgICAgIHJldHVybiB0aGlzLktzLmZvckVhY2goKChuLCBzKSA9PiB7XG4gICAgICAgICAgICBzLmFjdGl2ZVRhcmdldElkcy5oYXModCkgJiYgKGUgPSAhMCk7XG4gICAgICAgIH0pKSwgZTtcbiAgICB9XG4gICAgYWRkUGVuZGluZ011dGF0aW9uKHQpIHtcbiAgICAgICAgdGhpcy5uaSh0LCBcInBlbmRpbmdcIik7XG4gICAgfVxuICAgIHVwZGF0ZU11dGF0aW9uU3RhdGUodCwgZSwgbikge1xuICAgICAgICB0aGlzLm5pKHQsIGUsIG4pLCBcbiAgICAgICAgLy8gT25jZSBhIGZpbmFsIG11dGF0aW9uIHJlc3VsdCBpcyBvYnNlcnZlZCBieSBvdGhlciBjbGllbnRzLCB0aGV5IG5vIGxvbmdlclxuICAgICAgICAvLyBhY2Nlc3MgdGhlIG11dGF0aW9uJ3MgbWV0YWRhdGEgZW50cnkuIFNpbmNlIFdlYlN0b3JhZ2UgcmVwbGF5cyBldmVudHNcbiAgICAgICAgLy8gaW4gb3JkZXIsIGl0IGlzIHNhZmUgdG8gZGVsZXRlIHRoZSBlbnRyeSByaWdodCBhZnRlciB1cGRhdGluZyBpdC5cbiAgICAgICAgdGhpcy5zaSh0KTtcbiAgICB9XG4gICAgYWRkTG9jYWxRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIGxldCBlID0gXCJub3QtY3VycmVudFwiO1xuICAgICAgICAvLyBMb29rdXAgYW4gZXhpc3RpbmcgcXVlcnkgc3RhdGUgaWYgdGhlIHRhcmdldCBJRCB3YXMgYWxyZWFkeSByZWdpc3RlcmVkXG4gICAgICAgIC8vIGJ5IGFub3RoZXIgdGFiXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNBY3RpdmVRdWVyeVRhcmdldCh0KSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKExyKHRoaXMucGVyc2lzdGVuY2VLZXksIHQpKTtcbiAgICAgICAgICAgIGlmIChuKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IFVyLkZzKHQsIG4pO1xuICAgICAgICAgICAgICAgIHMgJiYgKGUgPSBzLnN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5paS5Ncyh0KSwgdGhpcy5YcygpLCBlO1xuICAgIH1cbiAgICByZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgdGhpcy5paS5Mcyh0KSwgdGhpcy5YcygpO1xuICAgIH1cbiAgICBpc0xvY2FsUXVlcnlUYXJnZXQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5paS5hY3RpdmVUYXJnZXRJZHMuaGFzKHQpO1xuICAgIH1cbiAgICBjbGVhclF1ZXJ5U3RhdGUodCkge1xuICAgICAgICB0aGlzLnJlbW92ZUl0ZW0oTHIodGhpcy5wZXJzaXN0ZW5jZUtleSwgdCkpO1xuICAgIH1cbiAgICB1cGRhdGVRdWVyeVN0YXRlKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5yaSh0LCBlLCBuKTtcbiAgICB9XG4gICAgaGFuZGxlVXNlckNoYW5nZSh0LCBlLCBuKSB7XG4gICAgICAgIGUuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLnNpKHQpO1xuICAgICAgICB9KSksIHRoaXMuY3VycmVudFVzZXIgPSB0LCBuLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5hZGRQZW5kaW5nTXV0YXRpb24odCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc2V0T25saW5lU3RhdGUodCkge1xuICAgICAgICB0aGlzLm9pKHQpO1xuICAgIH1cbiAgICBub3RpZnlCdW5kbGVMb2FkZWQoKSB7XG4gICAgICAgIHRoaXMuYWkoKTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIHRoaXMuc3RhcnRlZCAmJiAodGhpcy53aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN0b3JhZ2VcIiwgdGhpcy5VcyksIHRoaXMucmVtb3ZlSXRlbSh0aGlzLlFzKSwgXG4gICAgICAgIHRoaXMuc3RhcnRlZCA9ICExKTtcbiAgICB9XG4gICAgZ2V0SXRlbSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbSh0KTtcbiAgICAgICAgcmV0dXJuICQoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIlJFQURcIiwgdCwgZSksIGU7XG4gICAgfVxuICAgIHNldEl0ZW0odCwgZSkge1xuICAgICAgICAkKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgXCJTRVRcIiwgdCwgZSksIHRoaXMuc3RvcmFnZS5zZXRJdGVtKHQsIGUpO1xuICAgIH1cbiAgICByZW1vdmVJdGVtKHQpIHtcbiAgICAgICAgJChcIlNoYXJlZENsaWVudFN0YXRlXCIsIFwiUkVNT1ZFXCIsIHQpLCB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbSh0KTtcbiAgICB9XG4gICAgcXModCkge1xuICAgICAgICAvLyBOb3RlOiBUaGUgZnVuY3Rpb24gaXMgdHlwZWQgdG8gdGFrZSBFdmVudCB0byBiZSBpbnRlcmZhY2UtY29tcGF0aWJsZSB3aXRoXG4gICAgICAgIC8vIGBXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcmAuXG4gICAgICAgIGNvbnN0IGUgPSB0O1xuICAgICAgICBpZiAoZS5zdG9yYWdlQXJlYSA9PT0gdGhpcy5zdG9yYWdlKSB7XG4gICAgICAgICAgICBpZiAoJChcIlNoYXJlZENsaWVudFN0YXRlXCIsIFwiRVZFTlRcIiwgZS5rZXksIGUubmV3VmFsdWUpLCBlLmtleSA9PT0gdGhpcy5RcykgcmV0dXJuIHZvaWQgRihcIlJlY2VpdmVkIFdlYlN0b3JhZ2Ugbm90aWZpY2F0aW9uIGZvciBsb2NhbCBjaGFuZ2UuIEFub3RoZXIgY2xpZW50IG1pZ2h0IGhhdmUgZ2FyYmFnZS1jb2xsZWN0ZWQgb3VyIHN0YXRlXCIpO1xuICAgICAgICAgICAgdGhpcy5PZS5lbnF1ZXVlUmV0cnlhYmxlKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gZS5rZXkpIGlmICh0aGlzLkdzLnRlc3QoZS5rZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBlLm5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuY2koZS5rZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnVpKHQsIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmhpKGUua2V5LCBlLm5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodCkgcmV0dXJuIHRoaXMudWkodC5jbGllbnRJZCwgdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy56cy50ZXN0KGUua2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IGUubmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5saShlLmtleSwgZS5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQpIHJldHVybiB0aGlzLmZpKHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuSHMudGVzdChlLmtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBlLm5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuZGkoZS5rZXksIGUubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0KSByZXR1cm4gdGhpcy53aSh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gdGhpcy5Kcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IGUubmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5acyhlLm5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodCkgcmV0dXJuIHRoaXMudGkodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09IHRoaXMuV3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGUgPSBldC5JO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9IHQpIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBKU09OLnBhcnNlKHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCKFwibnVtYmVyXCIgPT0gdHlwZW9mIG4pLCBlID0gbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEYoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIkZhaWxlZCB0byByZWFkIHNlcXVlbmNlIG51bWJlciBmcm9tIFdlYlN0b3JhZ2VcIiwgdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gKiBgTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGVgIGlzIGEgc2ltcGxlIGltcGxlbWVudGF0aW9uIG9mIFNoYXJlZENsaWVudFN0YXRlIGZvclxuICogY2xpZW50cyB1c2luZyBtZW1vcnkgcGVyc2lzdGVuY2UuIFRoZSBzdGF0ZSBpbiB0aGlzIGNsYXNzIHJlbWFpbnMgZnVsbHlcbiAqIGlzb2xhdGVkIGFuZCBubyBzeW5jaHJvbml6YXRpb24gaXMgcGVyZm9ybWVkLlxuICovIChlLm5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHQgIT09IGV0LkkgJiYgdGhpcy5zZXF1ZW5jZU51bWJlckhhbmRsZXIodCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09IHRoaXMuWXMpIHJldHVybiB0aGlzLnN5bmNFbmdpbmUuX2koKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgdGhpcy5qcy5wdXNoKGUpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBpaSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuS3MuZ2V0KHRoaXMuQnMpO1xuICAgIH1cbiAgICBYcygpIHtcbiAgICAgICAgdGhpcy5zZXRJdGVtKHRoaXMuUXMsIHRoaXMuaWkuT3MoKSk7XG4gICAgfVxuICAgIG5pKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBCcih0aGlzLmN1cnJlbnRVc2VyLCB0LCBlLCBuKSwgaSA9IE1yKHRoaXMucGVyc2lzdGVuY2VLZXksIHRoaXMuY3VycmVudFVzZXIsIHQpO1xuICAgICAgICB0aGlzLnNldEl0ZW0oaSwgcy5PcygpKTtcbiAgICB9XG4gICAgc2kodCkge1xuICAgICAgICBjb25zdCBlID0gTXIodGhpcy5wZXJzaXN0ZW5jZUtleSwgdGhpcy5jdXJyZW50VXNlciwgdCk7XG4gICAgICAgIHRoaXMucmVtb3ZlSXRlbShlKTtcbiAgICB9XG4gICAgb2kodCkge1xuICAgICAgICBjb25zdCBlID0ge1xuICAgICAgICAgICAgY2xpZW50SWQ6IHRoaXMuQnMsXG4gICAgICAgICAgICBvbmxpbmVTdGF0ZTogdFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbSh0aGlzLkpzLCBKU09OLnN0cmluZ2lmeShlKSk7XG4gICAgfVxuICAgIHJpKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IExyKHRoaXMucGVyc2lzdGVuY2VLZXksIHQpLCBpID0gbmV3IFVyKHQsIGUsIG4pO1xuICAgICAgICB0aGlzLnNldEl0ZW0ocywgaS5PcygpKTtcbiAgICB9XG4gICAgYWkoKSB7XG4gICAgICAgIHRoaXMuc2V0SXRlbSh0aGlzLllzLCBcInZhbHVlLW5vdC11c2VkXCIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBjbGllbnQgc3RhdGUga2V5IGluIFdlYlN0b3JhZ2UuIFJldHVybnMgbnVsbCBpZiB0aGUga2V5IGRvZXMgbm90XG4gICAgICogbWF0Y2ggdGhlIGV4cGVjdGVkIGtleSBmb3JtYXQuXG4gICAgICovICAgIGNpKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuR3MuZXhlYyh0KTtcbiAgICAgICAgcmV0dXJuIGUgPyBlWzFdIDogbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgY2xpZW50IHN0YXRlIGluIFdlYlN0b3JhZ2UuIFJldHVybnMgJ251bGwnIGlmIHRoZSB2YWx1ZSBjb3VsZCBub3RcbiAgICAgKiBiZSBwYXJzZWQuXG4gICAgICovICAgIGhpKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuY2kodCk7XG4gICAgICAgIHJldHVybiBxci5GcyhuLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgbXV0YXRpb24gYmF0Y2ggc3RhdGUgaW4gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlXG4gICAgICogY291bGQgbm90IGJlIHBhcnNlZC5cbiAgICAgKi8gICAgbGkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy56cy5leGVjKHQpLCBzID0gTnVtYmVyKG5bMV0pLCBpID0gdm9pZCAwICE9PSBuWzJdID8gblsyXSA6IG51bGw7XG4gICAgICAgIHJldHVybiBCci5GcyhuZXcgRChpKSwgcywgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIHF1ZXJ5IHRhcmdldCBzdGF0ZSBmcm9tIFdlYlN0b3JhZ2UuIFJldHVybnMgJ251bGwnIGlmIHRoZSB2YWx1ZVxuICAgICAqIGNvdWxkIG5vdCBiZSBwYXJzZWQuXG4gICAgICovICAgIGRpKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuSHMuZXhlYyh0KSwgcyA9IE51bWJlcihuWzFdKTtcbiAgICAgICAgcmV0dXJuIFVyLkZzKHMsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYW4gb25saW5lIHN0YXRlIGZyb20gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlXG4gICAgICogY291bGQgbm90IGJlIHBhcnNlZC5cbiAgICAgKi8gICAgWnModCkge1xuICAgICAgICByZXR1cm4gS3IuRnModCk7XG4gICAgfVxuICAgIGFzeW5jIGZpKHQpIHtcbiAgICAgICAgaWYgKHQudXNlci51aWQgPT09IHRoaXMuY3VycmVudFVzZXIudWlkKSByZXR1cm4gdGhpcy5zeW5jRW5naW5lLm1pKHQuYmF0Y2hJZCwgdC5zdGF0ZSwgdC5lcnJvcik7XG4gICAgICAgICQoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgSWdub3JpbmcgbXV0YXRpb24gZm9yIG5vbi1hY3RpdmUgdXNlciAke3QudXNlci51aWR9YCk7XG4gICAgfVxuICAgIHdpKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3luY0VuZ2luZS5naSh0LnRhcmdldElkLCB0LnN0YXRlLCB0LmVycm9yKTtcbiAgICB9XG4gICAgdWkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZSA/IHRoaXMuS3MuaW5zZXJ0KHQsIGUpIDogdGhpcy5Lcy5yZW1vdmUodCksIHMgPSB0aGlzLmVpKHRoaXMuS3MpLCBpID0gdGhpcy5laShuKSwgciA9IFtdLCBvID0gW107XG4gICAgICAgIHJldHVybiBpLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgcy5oYXModCkgfHwgci5wdXNoKHQpO1xuICAgICAgICB9KSksIHMuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBpLmhhcyh0KSB8fCBvLnB1c2godCk7XG4gICAgICAgIH0pKSwgdGhpcy5zeW5jRW5naW5lLnlpKHIsIG8pLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuS3MgPSBuO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRpKHQpIHtcbiAgICAgICAgLy8gV2UgY2hlY2sgd2hldGhlciB0aGUgY2xpZW50IHRoYXQgd3JvdGUgdGhpcyBvbmxpbmUgc3RhdGUgaXMgc3RpbGwgYWN0aXZlXG4gICAgICAgIC8vIGJ5IGNvbXBhcmluZyBpdHMgY2xpZW50IElEIHRvIHRoZSBsaXN0IG9mIGNsaWVudHMga2VwdCBhY3RpdmUgaW5cbiAgICAgICAgLy8gSW5kZXhlZERiLiBJZiBhIGNsaWVudCBkb2VzIG5vdCB1cGRhdGUgdGhlaXIgSW5kZXhlZERiIGNsaWVudCBzdGF0ZVxuICAgICAgICAvLyB3aXRoaW4gNSBzZWNvbmRzLCBpdCBpcyBjb25zaWRlcmVkIGluYWN0aXZlIGFuZCB3ZSBkb24ndCBlbWl0IGFuIG9ubGluZVxuICAgICAgICAvLyBzdGF0ZSBldmVudC5cbiAgICAgICAgdGhpcy5Lcy5nZXQodC5jbGllbnRJZCkgJiYgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIodC5vbmxpbmVTdGF0ZSk7XG4gICAgfVxuICAgIGVpKHQpIHtcbiAgICAgICAgbGV0IGUgPSBDbigpO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgZSA9IGUudW5pb25XaXRoKG4uYWN0aXZlVGFyZ2V0SWRzKTtcbiAgICAgICAgfSkpLCBlO1xuICAgIH1cbn1cblxuY2xhc3MgV3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnBpID0gbmV3IGpyLCB0aGlzLlRpID0ge30sIHRoaXMub25saW5lU3RhdGVIYW5kbGVyID0gbnVsbCwgdGhpcy5zZXF1ZW5jZU51bWJlckhhbmRsZXIgPSBudWxsO1xuICAgIH1cbiAgICBhZGRQZW5kaW5nTXV0YXRpb24odCkge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgdXBkYXRlTXV0YXRpb25TdGF0ZSh0LCBlLCBuKSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICBhZGRMb2NhbFF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGkuTXModCksIHRoaXMuVGlbdF0gfHwgXCJub3QtY3VycmVudFwiO1xuICAgIH1cbiAgICB1cGRhdGVRdWVyeVN0YXRlKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5UaVt0XSA9IGU7XG4gICAgfVxuICAgIHJlbW92ZUxvY2FsUXVlcnlUYXJnZXQodCkge1xuICAgICAgICB0aGlzLnBpLkxzKHQpO1xuICAgIH1cbiAgICBpc0xvY2FsUXVlcnlUYXJnZXQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5waS5hY3RpdmVUYXJnZXRJZHMuaGFzKHQpO1xuICAgIH1cbiAgICBjbGVhclF1ZXJ5U3RhdGUodCkge1xuICAgICAgICBkZWxldGUgdGhpcy5UaVt0XTtcbiAgICB9XG4gICAgZ2V0QWxsQWN0aXZlUXVlcnlUYXJnZXRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5waS5hY3RpdmVUYXJnZXRJZHM7XG4gICAgfVxuICAgIGlzQWN0aXZlUXVlcnlUYXJnZXQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5waS5hY3RpdmVUYXJnZXRJZHMuaGFzKHQpO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGkgPSBuZXcganIsIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBoYW5kbGVVc2VyQ2hhbmdlKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIHNldE9ubGluZVN0YXRlKHQpIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIHNodXRkb3duKCkge31cbiAgICB3cml0ZVNlcXVlbmNlTnVtYmVyKHQpIHt9XG4gICAgbm90aWZ5QnVuZGxlTG9hZGVkKCkge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIEdyIHtcbiAgICBFaSh0KSB7XG4gICAgICAgIC8vIE5vLW9wLlxuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgLy8gTm8tb3AuXG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gUmVmZXJlbmNlcyB0byBgd2luZG93YCBhcmUgZ3VhcmRlZCBieSBCcm93c2VyQ29ubmVjdGl2aXR5TW9uaXRvci5pc0F2YWlsYWJsZSgpXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1yZXN0cmljdGVkLWdsb2JhbHMgKi9cbi8qKlxuICogQnJvd3NlciBpbXBsZW1lbnRhdGlvbiBvZiBDb25uZWN0aXZpdHlNb25pdG9yLlxuICovXG5jbGFzcyB6ciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuSWkgPSAoKSA9PiB0aGlzLkFpKCksIHRoaXMuUmkgPSAoKSA9PiB0aGlzLlBpKCksIHRoaXMuYmkgPSBbXSwgdGhpcy52aSgpO1xuICAgIH1cbiAgICBFaSh0KSB7XG4gICAgICAgIHRoaXMuYmkucHVzaCh0KTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwib25saW5lXCIsIHRoaXMuSWkpLCB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIiwgdGhpcy5SaSk7XG4gICAgfVxuICAgIHZpKCkge1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9ubGluZVwiLCB0aGlzLklpKSwgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvZmZsaW5lXCIsIHRoaXMuUmkpO1xuICAgIH1cbiAgICBBaSgpIHtcbiAgICAgICAgJChcIkNvbm5lY3Rpdml0eU1vbml0b3JcIiwgXCJOZXR3b3JrIGNvbm5lY3Rpdml0eSBjaGFuZ2VkOiBBVkFJTEFCTEVcIik7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLmJpKSB0KDAgLyogQVZBSUxBQkxFICovKTtcbiAgICB9XG4gICAgUGkoKSB7XG4gICAgICAgICQoXCJDb25uZWN0aXZpdHlNb25pdG9yXCIsIFwiTmV0d29yayBjb25uZWN0aXZpdHkgY2hhbmdlZDogVU5BVkFJTEFCTEVcIik7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLmJpKSB0KDEgLyogVU5BVkFJTEFCTEUgKi8pO1xuICAgIH1cbiAgICAvLyBUT0RPKGNoZW5icmlhbik6IENvbnNpZGVyIHBhc3NpbmcgaW4gd2luZG93IGVpdGhlciBpbnRvIHRoaXMgY29tcG9uZW50IG9yXG4gICAgLy8gaGVyZSBmb3IgdGVzdGluZyB2aWEgRmFrZVdpbmRvdy5cbiAgICAvKiogQ2hlY2tzIHRoYXQgYWxsIHVzZWQgYXR0cmlidXRlcyBvZiB3aW5kb3cgYXJlIGF2YWlsYWJsZS4gKi9cbiAgICBzdGF0aWMgYnQoKSB7XG4gICAgICAgIHJldHVybiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiB3aW5kb3cgJiYgdm9pZCAwICE9PSB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciAmJiB2b2lkIDAgIT09IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgSHIgPSB7XG4gICAgQmF0Y2hHZXREb2N1bWVudHM6IFwiYmF0Y2hHZXRcIixcbiAgICBDb21taXQ6IFwiY29tbWl0XCIsXG4gICAgUnVuUXVlcnk6IFwicnVuUXVlcnlcIlxufTtcblxuLyoqXG4gKiBNYXBzIFJQQyBuYW1lcyB0byB0aGUgY29ycmVzcG9uZGluZyBSRVNUIGVuZHBvaW50IG5hbWUuXG4gKlxuICogV2UgdXNlIGFycmF5IG5vdGF0aW9uIHRvIGF2b2lkIG1hbmdsaW5nLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBQcm92aWRlcyBhIHNpbXBsZSBoZWxwZXIgY2xhc3MgdGhhdCBpbXBsZW1lbnRzIHRoZSBTdHJlYW0gaW50ZXJmYWNlIHRvXG4gKiBicmlkZ2UgdG8gb3RoZXIgaW1wbGVtZW50YXRpb25zIHRoYXQgYXJlIHN0cmVhbXMgYnV0IGRvIG5vdCBpbXBsZW1lbnQgdGhlXG4gKiBpbnRlcmZhY2UuIFRoZSBzdHJlYW0gY2FsbGJhY2tzIGFyZSBpbnZva2VkIHdpdGggdGhlIGNhbGxPbi4uLiBtZXRob2RzLlxuICovXG5jbGFzcyBKciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLlZpID0gdC5WaSwgdGhpcy5TaSA9IHQuU2k7XG4gICAgfVxuICAgIERpKHQpIHtcbiAgICAgICAgdGhpcy5DaSA9IHQ7XG4gICAgfVxuICAgIE5pKHQpIHtcbiAgICAgICAgdGhpcy5raSA9IHQ7XG4gICAgfVxuICAgIG9uTWVzc2FnZSh0KSB7XG4gICAgICAgIHRoaXMueGkgPSB0O1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5TaSgpO1xuICAgIH1cbiAgICBzZW5kKHQpIHtcbiAgICAgICAgdGhpcy5WaSh0KTtcbiAgICB9XG4gICAgJGkoKSB7XG4gICAgICAgIHRoaXMuQ2koKTtcbiAgICB9XG4gICAgRmkodCkge1xuICAgICAgICB0aGlzLmtpKHQpO1xuICAgIH1cbiAgICBPaSh0KSB7XG4gICAgICAgIHRoaXMueGkodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBZciBleHRlbmRzIFxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBhbGwgUmVzdC1iYXNlZCBjb25uZWN0aW9ucyB0byB0aGUgYmFja2VuZCAoV2ViQ2hhbm5lbCBhbmRcbiAqIEhUVFApLlxuICovXG5jbGFzcyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmRhdGFiYXNlSW5mbyA9IHQsIHRoaXMuZGF0YWJhc2VJZCA9IHQuZGF0YWJhc2VJZDtcbiAgICAgICAgY29uc3QgZSA9IHQuc3NsID8gXCJodHRwc1wiIDogXCJodHRwXCI7XG4gICAgICAgIHRoaXMuTWkgPSBlICsgXCI6Ly9cIiArIHQuaG9zdCwgdGhpcy5MaSA9IFwicHJvamVjdHMvXCIgKyB0aGlzLmRhdGFiYXNlSWQucHJvamVjdElkICsgXCIvZGF0YWJhc2VzL1wiICsgdGhpcy5kYXRhYmFzZUlkLmRhdGFiYXNlICsgXCIvZG9jdW1lbnRzXCI7XG4gICAgfVxuICAgIEJpKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgY29uc3QgciA9IHRoaXMuVWkodCwgZSk7XG4gICAgICAgICQoXCJSZXN0Q29ubmVjdGlvblwiLCBcIlNlbmRpbmc6IFwiLCByLCBuKTtcbiAgICAgICAgY29uc3QgbyA9IHt9O1xuICAgICAgICByZXR1cm4gdGhpcy5xaShvLCBzLCBpKSwgdGhpcy5LaSh0LCByLCBvLCBuKS50aGVuKCh0ID0+ICgkKFwiUmVzdENvbm5lY3Rpb25cIiwgXCJSZWNlaXZlZDogXCIsIHQpLCBcbiAgICAgICAgdCkpLCAoZSA9PiB7XG4gICAgICAgICAgICB0aHJvdyBPKFwiUmVzdENvbm5lY3Rpb25cIiwgYCR7dH0gZmFpbGVkIHdpdGggZXJyb3I6IGAsIGUsIFwidXJsOiBcIiwgciwgXCJyZXF1ZXN0OlwiLCBuKSwgXG4gICAgICAgICAgICBlO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGppKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgLy8gVGhlIFJFU1QgQVBJIGF1dG9tYXRpY2FsbHkgYWdncmVnYXRlcyBhbGwgb2YgdGhlIHN0cmVhbWVkIHJlc3VsdHMsIHNvIHdlXG4gICAgICAgIC8vIGNhbiBqdXN0IHVzZSB0aGUgbm9ybWFsIGludm9rZSgpIG1ldGhvZC5cbiAgICAgICAgcmV0dXJuIHRoaXMuQmkodCwgZSwgbiwgcywgaSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1vZGlmaWVzIHRoZSBoZWFkZXJzIGZvciBhIHJlcXVlc3QsIGFkZGluZyBhbnkgYXV0aG9yaXphdGlvbiB0b2tlbiBpZlxuICAgICAqIHByZXNlbnQgYW5kIGFueSBhZGRpdGlvbmFsIGhlYWRlcnMgZm9yIHRoZSByZXF1ZXN0LlxuICAgICAqLyAgICBxaSh0LCBlLCBuKSB7XG4gICAgICAgIHRbXCJYLUdvb2ctQXBpLUNsaWVudFwiXSA9IFwiZ2wtanMvIGZpcmUvXCIgKyBDLCBcbiAgICAgICAgLy8gQ29udGVudC1UeXBlOiB0ZXh0L3BsYWluIHdpbGwgYXZvaWQgcHJlZmxpZ2h0IHJlcXVlc3RzIHdoaWNoIG1pZ2h0XG4gICAgICAgIC8vIG1lc3Mgd2l0aCBDT1JTIGFuZCByZWRpcmVjdHMgYnkgcHJveGllcy4gSWYgd2UgYWRkIGN1c3RvbSBoZWFkZXJzXG4gICAgICAgIC8vIHdlIHdpbGwgbmVlZCB0byBjaGFuZ2UgdGhpcyBjb2RlIHRvIHBvdGVudGlhbGx5IHVzZSB0aGUgJGh0dHBPdmVyd3JpdGVcbiAgICAgICAgLy8gcGFyYW1ldGVyIHN1cHBvcnRlZCBieSBFU0YgdG8gYXZvaWQgdHJpZ2dlcmluZyBwcmVmbGlnaHQgcmVxdWVzdHMuXG4gICAgICAgIHRbXCJDb250ZW50LVR5cGVcIl0gPSBcInRleHQvcGxhaW5cIiwgdGhpcy5kYXRhYmFzZUluZm8uYXBwSWQgJiYgKHRbXCJYLUZpcmViYXNlLUdNUElEXCJdID0gdGhpcy5kYXRhYmFzZUluZm8uYXBwSWQpLCBcbiAgICAgICAgZSAmJiBlLmhlYWRlcnMuZm9yRWFjaCgoKGUsIG4pID0+IHRbbl0gPSBlKSksIG4gJiYgbi5oZWFkZXJzLmZvckVhY2goKChlLCBuKSA9PiB0W25dID0gZSkpO1xuICAgIH1cbiAgICBVaSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBIclt0XTtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuTWl9L3YxLyR7ZX06JHtufWA7XG4gICAgfVxufSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBzdXBlcih0KSwgdGhpcy5mb3JjZUxvbmdQb2xsaW5nID0gdC5mb3JjZUxvbmdQb2xsaW5nLCB0aGlzLmF1dG9EZXRlY3RMb25nUG9sbGluZyA9IHQuYXV0b0RldGVjdExvbmdQb2xsaW5nLCBcbiAgICAgICAgdGhpcy51c2VGZXRjaFN0cmVhbXMgPSB0LnVzZUZldGNoU3RyZWFtcztcbiAgICB9XG4gICAgS2kodCwgZSwgbiwgcykge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKChpLCByKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvID0gbmV3IFhocklvO1xuICAgICAgICAgICAgby5saXN0ZW5PbmNlKEV2ZW50VHlwZS5DT01QTEVURSwgKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG8uZ2V0TGFzdEVycm9yQ29kZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBFcnJvckNvZGUuTk9fRVJST1I6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gby5nZXRSZXNwb25zZUpzb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCJDb25uZWN0aW9uXCIsIFwiWEhSIHJlY2VpdmVkOlwiLCBKU09OLnN0cmluZ2lmeShlKSksIGkoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRXJyb3JDb2RlLlRJTUVPVVQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiQ29ubmVjdGlvblwiLCAnUlBDIFwiJyArIHQgKyAnXCIgdGltZWQgb3V0JyksIHIobmV3IGooSy5ERUFETElORV9FWENFRURFRCwgXCJSZXF1ZXN0IHRpbWUgb3V0XCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBFcnJvckNvZGUuSFRUUF9FUlJPUjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBvLmdldFN0YXR1cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQoXCJDb25uZWN0aW9uXCIsICdSUEMgXCInICsgdCArICdcIiBmYWlsZWQgd2l0aCBzdGF0dXM6JywgbiwgXCJyZXNwb25zZSB0ZXh0OlwiLCBvLmdldFJlc3BvbnNlVGV4dCgpKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICBuID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBvLmdldFJlc3BvbnNlSnNvbigpLmVycm9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIHQuc3RhdHVzICYmIHQubWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IHQudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9fL2csIFwiLVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QudmFsdWVzKEspLmluZGV4T2YoZSkgPj0gMCA/IGUgOiBLLlVOS05PV047XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0odC5zdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByKG5ldyBqKGUsIHQubWVzc2FnZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSByKG5ldyBqKEsuVU5LTk9XTiwgXCJTZXJ2ZXIgcmVzcG9uZGVkIHdpdGggc3RhdHVzIFwiICsgby5nZXRTdGF0dXMoKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgcmVjZWl2ZWQgYW4gSFRUUF9FUlJPUiBidXQgdGhlcmUncyBubyBzdGF0dXMgY29kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGl0J3MgbW9zdCBwcm9iYWJseSBhIGNvbm5lY3Rpb24gaXNzdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIHIobmV3IGooSy5VTkFWQUlMQUJMRSwgXCJDb25uZWN0aW9uIGZhaWxlZC5cIikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgTCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgJChcIkNvbm5lY3Rpb25cIiwgJ1JQQyBcIicgKyB0ICsgJ1wiIGNvbXBsZXRlZC4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBjb25zdCBhID0gSlNPTi5zdHJpbmdpZnkocyk7XG4gICAgICAgICAgICBvLnNlbmQoZSwgXCJQT1NUXCIsIGEsIG4sIDE1KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBRaSh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBbIHRoaXMuTWksIFwiL1wiLCBcImdvb2dsZS5maXJlc3RvcmUudjEuRmlyZXN0b3JlXCIsIFwiL1wiLCB0LCBcIi9jaGFubmVsXCIgXSwgaSA9IGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQoKSwgciA9IGdldFN0YXRFdmVudFRhcmdldCgpLCBvID0ge1xuICAgICAgICAgICAgLy8gUmVxdWlyZWQgZm9yIGJhY2tlbmQgc3RpY2tpbmVzcywgcm91dGluZyBiZWhhdmlvciBpcyBiYXNlZCBvbiB0aGlzXG4gICAgICAgICAgICAvLyBwYXJhbWV0ZXIuXG4gICAgICAgICAgICBodHRwU2Vzc2lvbklkUGFyYW06IFwiZ3Nlc3Npb25pZFwiLFxuICAgICAgICAgICAgaW5pdE1lc3NhZ2VIZWFkZXJzOiB7fSxcbiAgICAgICAgICAgIG1lc3NhZ2VVcmxQYXJhbXM6IHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIHBhcmFtIGlzIHVzZWQgdG8gaW1wcm92ZSByb3V0aW5nIGFuZCBwcm9qZWN0IGlzb2xhdGlvbiBieSB0aGVcbiAgICAgICAgICAgICAgICAvLyBiYWNrZW5kIGFuZCBtdXN0IGJlIGluY2x1ZGVkIGluIGV2ZXJ5IHJlcXVlc3QuXG4gICAgICAgICAgICAgICAgZGF0YWJhc2U6IGBwcm9qZWN0cy8ke3RoaXMuZGF0YWJhc2VJZC5wcm9qZWN0SWR9L2RhdGFiYXNlcy8ke3RoaXMuZGF0YWJhc2VJZC5kYXRhYmFzZX1gXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2VuZFJhd0pzb246ICEwLFxuICAgICAgICAgICAgc3VwcG9ydHNDcm9zc0RvbWFpblhocjogITAsXG4gICAgICAgICAgICBpbnRlcm5hbENoYW5uZWxQYXJhbXM6IHtcbiAgICAgICAgICAgICAgICAvLyBPdmVycmlkZSB0aGUgZGVmYXVsdCB0aW1lb3V0IChyYW5kb21pemVkIGJldHdlZW4gMTAtMjAgc2Vjb25kcykgc2luY2VcbiAgICAgICAgICAgICAgICAvLyBhIGxhcmdlIHdyaXRlIGJhdGNoIG9uIGEgc2xvdyBpbnRlcm5ldCBjb25uZWN0aW9uIG1heSB0YWtlIGEgbG9uZ1xuICAgICAgICAgICAgICAgIC8vIHRpbWUgdG8gc2VuZCB0byB0aGUgYmFja2VuZC4gUmF0aGVyIHRoYW4gaGF2ZSBXZWJDaGFubmVsIGltcG9zZSBhXG4gICAgICAgICAgICAgICAgLy8gdGlnaHQgdGltZW91dCB3aGljaCBjb3VsZCBsZWFkIHRvIGluZmluaXRlIHRpbWVvdXRzIGFuZCByZXRyaWVzLCB3ZVxuICAgICAgICAgICAgICAgIC8vIHNldCBpdCB2ZXJ5IGxhcmdlICg1LTEwIG1pbnV0ZXMpIGFuZCByZWx5IG9uIHRoZSBicm93c2VyJ3MgYnVpbHRpblxuICAgICAgICAgICAgICAgIC8vIHRpbWVvdXRzIHRvIGtpY2sgaW4gaWYgdGhlIHJlcXVlc3QgaXNuJ3Qgd29ya2luZy5cbiAgICAgICAgICAgICAgICBmb3J3YXJkQ2hhbm5lbFJlcXVlc3RUaW1lb3V0TXM6IDZlNVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZvcmNlTG9uZ1BvbGxpbmc6IHRoaXMuZm9yY2VMb25nUG9sbGluZyxcbiAgICAgICAgICAgIGRldGVjdEJ1ZmZlcmluZ1Byb3h5OiB0aGlzLmF1dG9EZXRlY3RMb25nUG9sbGluZ1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnVzZUZldGNoU3RyZWFtcyAmJiAoby54bWxIdHRwRmFjdG9yeSA9IG5ldyBGZXRjaFhtbEh0dHBGYWN0b3J5KHt9KSksIHRoaXMucWkoby5pbml0TWVzc2FnZUhlYWRlcnMsIGUsIG4pLCBcbiAgICAgICAgLy8gU2VuZGluZyB0aGUgY3VzdG9tIGhlYWRlcnMgd2UganVzdCBhZGRlZCB0byByZXF1ZXN0LmluaXRNZXNzYWdlSGVhZGVyc1xuICAgICAgICAvLyAoQXV0aG9yaXphdGlvbiwgZXRjLikgd2lsbCB0cmlnZ2VyIHRoZSBicm93c2VyIHRvIG1ha2UgYSBDT1JTIHByZWZsaWdodFxuICAgICAgICAvLyByZXF1ZXN0IGJlY2F1c2UgdGhlIFhIUiB3aWxsIG5vIGxvbmdlciBtZWV0IHRoZSBjcml0ZXJpYSBmb3IgYSBcInNpbXBsZVwiXG4gICAgICAgIC8vIENPUlMgcmVxdWVzdDpcbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRUUC9DT1JTI1NpbXBsZV9yZXF1ZXN0c1xuICAgICAgICAvLyBUaGVyZWZvcmUgdG8gYXZvaWQgdGhlIENPUlMgcHJlZmxpZ2h0IHJlcXVlc3QgKGFuIGV4dHJhIG5ldHdvcmtcbiAgICAgICAgLy8gcm91bmR0cmlwKSwgd2UgdXNlIHRoZSBodHRwSGVhZGVyc092ZXJ3cml0ZVBhcmFtIG9wdGlvbiB0byBzcGVjaWZ5IHRoYXRcbiAgICAgICAgLy8gdGhlIGhlYWRlcnMgc2hvdWxkIGluc3RlYWQgYmUgZW5jb2RlZCBpbnRvIGEgc3BlY2lhbCBcIiRodHRwSGVhZGVyc1wiIHF1ZXJ5XG4gICAgICAgIC8vIHBhcmFtZXRlciwgd2hpY2ggaXMgcmVjb2duaXplZCBieSB0aGUgd2ViY2hhbm5lbCBiYWNrZW5kLiBUaGlzIGlzXG4gICAgICAgIC8vIGZvcm1hbGx5IGRlZmluZWQgaGVyZTpcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9jbG9zdXJlLWxpYnJhcnkvYmxvYi9iMGUxODE1YjEzZmI5MmE0NmQ3YzliM2MzMGRlNWQ2YTM5NmEzMjQ1L2Nsb3N1cmUvZ29vZy9uZXQvcnBjL2h0dHBjb3JzLmpzI0wzMlxuICAgICAgICAvLyBUT0RPKGIvMTQ1NjI0NzU2KTogVGhlcmUgaXMgYSBiYWNrZW5kIGJ1ZyB3aGVyZSAkaHR0cEhlYWRlcnMgaXNuJ3QgcmVzcGVjdGVkIGlmIHRoZSByZXF1ZXN0XG4gICAgICAgIC8vIGRvZXNuJ3QgaGF2ZSBhbiBPcmlnaW4gaGVhZGVyLiBTbyB3ZSBoYXZlIHRvIGV4Y2x1ZGUgYSBmZXcgYnJvd3NlciBlbnZpcm9ubWVudHMgdGhhdCBhcmVcbiAgICAgICAgLy8ga25vd24gdG8gKHNvbWV0aW1lcykgbm90IGluY2x1ZGUgYW4gT3JpZ2luLiBTZWVcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWpzLXNkay9pc3N1ZXMvMTQ5MS5cbiAgICAgICAgaXNNb2JpbGVDb3Jkb3ZhKCkgfHwgaXNSZWFjdE5hdGl2ZSgpIHx8IGlzRWxlY3Ryb24oKSB8fCBpc0lFKCkgfHwgaXNVV1AoKSB8fCBpc0Jyb3dzZXJFeHRlbnNpb24oKSB8fCAoby5odHRwSGVhZGVyc092ZXJ3cml0ZVBhcmFtID0gXCIkaHR0cEhlYWRlcnNcIik7XG4gICAgICAgIGNvbnN0IGEgPSBzLmpvaW4oXCJcIik7XG4gICAgICAgICQoXCJDb25uZWN0aW9uXCIsIFwiQ3JlYXRpbmcgV2ViQ2hhbm5lbDogXCIgKyBhLCBvKTtcbiAgICAgICAgY29uc3QgYyA9IGkuY3JlYXRlV2ViQ2hhbm5lbChhLCBvKTtcbiAgICAgICAgLy8gV2ViQ2hhbm5lbCBzdXBwb3J0cyBzZW5kaW5nIHRoZSBmaXJzdCBtZXNzYWdlIHdpdGggdGhlIGhhbmRzaGFrZSAtIHNhdmluZ1xuICAgICAgICAvLyBhIG5ldHdvcmsgcm91bmQgdHJpcC4gSG93ZXZlciwgaXQgd2lsbCBoYXZlIHRvIGNhbGwgc2VuZCBpbiB0aGUgc2FtZVxuICAgICAgICAvLyBKUyBldmVudCBsb29wIGFzIG9wZW4uIEluIG9yZGVyIHRvIGVuZm9yY2UgdGhpcywgd2UgZGVsYXkgYWN0dWFsbHlcbiAgICAgICAgLy8gb3BlbmluZyB0aGUgV2ViQ2hhbm5lbCB1bnRpbCBzZW5kIGlzIGNhbGxlZC4gV2hldGhlciB3ZSBoYXZlIGNhbGxlZFxuICAgICAgICAvLyBvcGVuIGlzIHRyYWNrZWQgd2l0aCB0aGlzIHZhcmlhYmxlLlxuICAgICAgICAgICAgICAgIGxldCB1ID0gITEsIGggPSAhMTtcbiAgICAgICAgLy8gQSBmbGFnIHRvIGRldGVybWluZSB3aGV0aGVyIHRoZSBzdHJlYW0gd2FzIGNsb3NlZCAoYnkgdXMgb3IgdGhyb3VnaCBhblxuICAgICAgICAvLyBlcnJvci9jbG9zZSBldmVudCkgdG8gYXZvaWQgZGVsaXZlcmluZyBtdWx0aXBsZSBjbG9zZSBldmVudHMgb3Igc2VuZGluZ1xuICAgICAgICAvLyBvbiBhIGNsb3NlZCBzdHJlYW1cbiAgICAgICAgICAgICAgICBjb25zdCBnID0gbmV3IEpyKHtcbiAgICAgICAgICAgIFZpOiB0ID0+IHtcbiAgICAgICAgICAgICAgICBoID8gJChcIkNvbm5lY3Rpb25cIiwgXCJOb3Qgc2VuZGluZyBiZWNhdXNlIFdlYkNoYW5uZWwgaXMgY2xvc2VkOlwiLCB0KSA6ICh1IHx8ICgkKFwiQ29ubmVjdGlvblwiLCBcIk9wZW5pbmcgV2ViQ2hhbm5lbCB0cmFuc3BvcnQuXCIpLCBcbiAgICAgICAgICAgICAgICBjLm9wZW4oKSwgdSA9ICEwKSwgJChcIkNvbm5lY3Rpb25cIiwgXCJXZWJDaGFubmVsIHNlbmRpbmc6XCIsIHQpLCBjLnNlbmQodCkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFNpOiAoKSA9PiBjLmNsb3NlKClcbiAgICAgICAgfSksIHkgPSAodCwgZSwgbikgPT4ge1xuICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBjbG9zdXJlIHR5cGluZyBzZWVtcyBicm9rZW4gYmVjYXVzZSBXZWJDaGFubmVsIGRvZXNcbiAgICAgICAgICAgIC8vIG5vdCBpbXBsZW1lbnQgZ29vZy5ldmVudHMuTGlzdGVuYWJsZVxuICAgICAgICAgICAgdC5saXN0ZW4oZSwgKHQgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG4odCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyB0O1xuICAgICAgICAgICAgICAgICAgICB9KSwgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9O1xuICAgICAgICAvLyBDbG9zdXJlIGV2ZW50cyBhcmUgZ3VhcmRlZCBhbmQgZXhjZXB0aW9ucyBhcmUgc3dhbGxvd2VkLCBzbyBjYXRjaCBhbnlcbiAgICAgICAgLy8gZXhjZXB0aW9uIGFuZCByZXRocm93IHVzaW5nIGEgc2V0VGltZW91dCBzbyB0aGV5IGJlY29tZSB2aXNpYmxlIGFnYWluLlxuICAgICAgICAvLyBOb3RlIHRoYXQgZXZlbnR1YWxseSB0aGlzIGZ1bmN0aW9uIGNvdWxkIGdvIGF3YXkgaWYgd2UgYXJlIGNvbmZpZGVudFxuICAgICAgICAvLyBlbm91Z2ggdGhlIGNvZGUgaXMgZXhjZXB0aW9uIGZyZWUuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHkoYywgV2ViQ2hhbm5lbC5FdmVudFR5cGUuT1BFTiwgKCgpID0+IHtcbiAgICAgICAgICAgIGggfHwgJChcIkNvbm5lY3Rpb25cIiwgXCJXZWJDaGFubmVsIHRyYW5zcG9ydCBvcGVuZWQuXCIpO1xuICAgICAgICB9KSksIHkoYywgV2ViQ2hhbm5lbC5FdmVudFR5cGUuQ0xPU0UsICgoKSA9PiB7XG4gICAgICAgICAgICBoIHx8IChoID0gITAsICQoXCJDb25uZWN0aW9uXCIsIFwiV2ViQ2hhbm5lbCB0cmFuc3BvcnQgY2xvc2VkXCIpLCBnLkZpKCkpO1xuICAgICAgICB9KSksIHkoYywgV2ViQ2hhbm5lbC5FdmVudFR5cGUuRVJST1IsICh0ID0+IHtcbiAgICAgICAgICAgIGggfHwgKGggPSAhMCwgTyhcIkNvbm5lY3Rpb25cIiwgXCJXZWJDaGFubmVsIHRyYW5zcG9ydCBlcnJvcmVkOlwiLCB0KSwgZy5GaShuZXcgaihLLlVOQVZBSUxBQkxFLCBcIlRoZSBvcGVyYXRpb24gY291bGQgbm90IGJlIGNvbXBsZXRlZFwiKSkpO1xuICAgICAgICB9KSksIHkoYywgV2ViQ2hhbm5lbC5FdmVudFR5cGUuTUVTU0FHRSwgKHQgPT4ge1xuICAgICAgICAgICAgdmFyIGU7XG4gICAgICAgICAgICBpZiAoIWgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gdC5kYXRhWzBdO1xuICAgICAgICAgICAgICAgIEIoISFuKTtcbiAgICAgICAgICAgICAgICAvLyBUT0RPKGIvMzUxNDM4OTEpOiBUaGVyZSBpcyBhIGJ1ZyBpbiBPbmUgUGxhdGZvcm0gdGhhdCBjYXVzZWQgZXJyb3JzXG4gICAgICAgICAgICAgICAgLy8gKGFuZCBvbmx5IGVycm9ycykgdG8gYmUgd3JhcHBlZCBpbiBhbiBleHRyYSBhcnJheS4gVG8gYmUgZm9yd2FyZFxuICAgICAgICAgICAgICAgIC8vIGNvbXBhdGlibGUgd2l0aCB0aGUgYnVnIHdlIG5lZWQgdG8gY2hlY2sgZWl0aGVyIGNvbmRpdGlvbi4gVGhlIGxhdHRlclxuICAgICAgICAgICAgICAgIC8vIGNhbiBiZSByZW1vdmVkIG9uY2UgdGhlIGZpeCBoYXMgYmVlbiByb2xsZWQgb3V0LlxuICAgICAgICAgICAgICAgIC8vIFVzZSBhbnkgYmVjYXVzZSBtc2dEYXRhLmVycm9yIGlzIG5vdCB0eXBlZC5cbiAgICAgICAgICAgICAgICBjb25zdCBzID0gbiwgaSA9IHMuZXJyb3IgfHwgKG51bGwgPT09IChlID0gc1swXSkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5lcnJvcik7XG4gICAgICAgICAgICAgICAgaWYgKGkpIHtcbiAgICAgICAgICAgICAgICAgICAgJChcIkNvbm5lY3Rpb25cIiwgXCJXZWJDaGFubmVsIHJlY2VpdmVkIGVycm9yOlwiLCBpKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXJyb3Iuc3RhdHVzIHdpbGwgYmUgYSBzdHJpbmcgbGlrZSAnT0snIG9yICdOT1RfRk9VTkQnLlxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gaS5zdGF0dXM7XG4gICAgICAgICAgICAgICAgICAgIGxldCBlID0gXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICogTWFwcyBhbiBlcnJvciBDb2RlIGZyb20gYSBHUlBDIHN0YXR1cyBpZGVudGlmaWVyIGxpa2UgJ05PVF9GT1VORCcuXG4gKlxuICogQHJldHVybnMgVGhlIENvZGUgZXF1aXZhbGVudCB0byB0aGUgZ2l2ZW4gc3RhdHVzIHN0cmluZyBvciB1bmRlZmluZWQgaWZcbiAqICAgICB0aGVyZSBpcyBubyBtYXRjaC5cbiAqL1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBsb29rdXAgYnkgc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IGRuW3RdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gZSkgcmV0dXJuIG1uKGUpO1xuICAgICAgICAgICAgICAgICAgICB9KHQpLCBuID0gaS5tZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICB2b2lkIDAgPT09IGUgJiYgKGUgPSBLLklOVEVSTkFMLCBuID0gXCJVbmtub3duIGVycm9yIHN0YXR1czogXCIgKyB0ICsgXCIgd2l0aCBtZXNzYWdlIFwiICsgaS5tZXNzYWdlKSwgXG4gICAgICAgICAgICAgICAgICAgIC8vIE1hcmsgY2xvc2VkIHNvIG5vIGZ1cnRoZXIgZXZlbnRzIGFyZSBwcm9wYWdhdGVkXG4gICAgICAgICAgICAgICAgICAgIGggPSAhMCwgZy5GaShuZXcgaihlLCBuKSksIGMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgJChcIkNvbm5lY3Rpb25cIiwgXCJXZWJDaGFubmVsIHJlY2VpdmVkOlwiLCBuKSwgZy5PaShuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpLCB5KHIsIEV2ZW50LlNUQVRfRVZFTlQsICh0ID0+IHtcbiAgICAgICAgICAgIHQuc3RhdCA9PT0gU3RhdC5QUk9YWSA/ICQoXCJDb25uZWN0aW9uXCIsIFwiRGV0ZWN0ZWQgYnVmZmVyaW5nIHByb3h5XCIpIDogdC5zdGF0ID09PSBTdGF0Lk5PUFJPWFkgJiYgJChcIkNvbm5lY3Rpb25cIiwgXCJEZXRlY3RlZCBubyBidWZmZXJpbmcgcHJveHlcIik7XG4gICAgICAgIH0pKSwgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgLy8gVGVjaG5pY2FsbHkgd2UgY291bGQvc2hvdWxkIHdhaXQgZm9yIHRoZSBXZWJDaGFubmVsIG9wZW5lZCBldmVudCxcbiAgICAgICAgICAgIC8vIGJ1dCBiZWNhdXNlIHdlIHdhbnQgdG8gc2VuZCB0aGUgZmlyc3QgbWVzc2FnZSB3aXRoIHRoZSBXZWJDaGFubmVsXG4gICAgICAgICAgICAvLyBoYW5kc2hha2Ugd2UgcHJldGVuZCB0aGUgY2hhbm5lbCBvcGVuZWQgaGVyZSAoYXN5bmNocm9ub3VzbHkpLCBhbmRcbiAgICAgICAgICAgIC8vIHRoZW4gZGVsYXkgdGhlIGFjdHVhbCBvcGVuIHVudGlsIHRoZSBmaXJzdCBtZXNzYWdlIGlzIHNlbnQuXG4gICAgICAgICAgICBnLiRpKCk7XG4gICAgICAgIH0pLCAwKSwgZztcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogSW5pdGlhbGl6ZXMgdGhlIFdlYkNoYW5uZWxDb25uZWN0aW9uIGZvciB0aGUgYnJvd3Nlci4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogVGhlIFBsYXRmb3JtJ3MgJ3dpbmRvdycgaW1wbGVtZW50YXRpb24gb3IgbnVsbCBpZiBub3QgYXZhaWxhYmxlLiAqL1xuZnVuY3Rpb24gWHIoKSB7XG4gICAgLy8gYHdpbmRvd2AgaXMgbm90IGFsd2F5cyBhdmFpbGFibGUsIGUuZy4gaW4gUmVhY3ROYXRpdmUgYW5kIFdlYldvcmtlcnMuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFsc1xuICAgIHJldHVybiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiB3aW5kb3cgPyB3aW5kb3cgOiBudWxsO1xufVxuXG4vKiogVGhlIFBsYXRmb3JtJ3MgJ2RvY3VtZW50JyBpbXBsZW1lbnRhdGlvbiBvciBudWxsIGlmIG5vdCBhdmFpbGFibGUuICovIGZ1bmN0aW9uIFpyKCkge1xuICAgIC8vIGBkb2N1bWVudGAgaXMgbm90IGFsd2F5cyBhdmFpbGFibGUsIGUuZy4gaW4gUmVhY3ROYXRpdmUgYW5kIFdlYldvcmtlcnMuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFsc1xuICAgIHJldHVybiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBkb2N1bWVudCA/IGRvY3VtZW50IDogbnVsbDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gZnVuY3Rpb24gdG8odCkge1xuICAgIHJldHVybiBuZXcgS24odCwgLyogdXNlUHJvdG8zSnNvbj0gKi8gITApO1xufVxuXG4vKipcbiAqIEFuIGluc3RhbmNlIG9mIHRoZSBQbGF0Zm9ybSdzICdUZXh0RW5jb2RlcicgaW1wbGVtZW50YXRpb24uXG4gKi9cbi8qKlxuICogQSBoZWxwZXIgZm9yIHJ1bm5pbmcgZGVsYXllZCB0YXNrcyBmb2xsb3dpbmcgYW4gZXhwb25lbnRpYWwgYmFja29mZiBjdXJ2ZVxuICogYmV0d2VlbiBhdHRlbXB0cy5cbiAqXG4gKiBFYWNoIGRlbGF5IGlzIG1hZGUgdXAgb2YgYSBcImJhc2VcIiBkZWxheSB3aGljaCBmb2xsb3dzIHRoZSBleHBvbmVudGlhbFxuICogYmFja29mZiBjdXJ2ZSwgYW5kIGEgKy8tIDUwJSBcImppdHRlclwiIHRoYXQgaXMgY2FsY3VsYXRlZCBhbmQgYWRkZWQgdG8gdGhlXG4gKiBiYXNlIGRlbGF5LiBUaGlzIHByZXZlbnRzIGNsaWVudHMgZnJvbSBhY2NpZGVudGFsbHkgc3luY2hyb25pemluZyB0aGVpclxuICogZGVsYXlzIGNhdXNpbmcgc3Bpa2VzIG9mIGxvYWQgdG8gdGhlIGJhY2tlbmQuXG4gKi9cbmNsYXNzIGVvIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgQXN5bmNRdWV1ZSB0byBydW4gYmFja29mZiBvcGVyYXRpb25zIG9uLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBJRCB0byB1c2Ugd2hlbiBzY2hlZHVsaW5nIGJhY2tvZmYgb3BlcmF0aW9ucyBvbiB0aGUgQXN5bmNRdWV1ZS5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBUaGUgaW5pdGlhbCBkZWxheSAodXNlZCBhcyB0aGUgYmFzZSBkZWxheSBvbiB0aGUgZmlyc3QgcmV0cnkgYXR0ZW1wdCkuXG4gICAgICogTm90ZSB0aGF0IGppdHRlciB3aWxsIHN0aWxsIGJlIGFwcGxpZWQsIHNvIHRoZSBhY3R1YWwgZGVsYXkgY291bGQgYmUgYXNcbiAgICAgKiBsaXR0bGUgYXMgMC41KmluaXRpYWxEZWxheU1zLlxuICAgICAqL1xuICAgIG4gPSAxZTNcbiAgICAvKipcbiAgICAgKiBUaGUgbXVsdGlwbGllciB0byB1c2UgdG8gZGV0ZXJtaW5lIHRoZSBleHRlbmRlZCBiYXNlIGRlbGF5IGFmdGVyIGVhY2hcbiAgICAgKiBhdHRlbXB0LlxuICAgICAqLyAsIHMgPSAxLjVcbiAgICAvKipcbiAgICAgKiBUaGUgbWF4aW11bSBiYXNlIGRlbGF5IGFmdGVyIHdoaWNoIG5vIGZ1cnRoZXIgYmFja29mZiBpcyBwZXJmb3JtZWQuXG4gICAgICogTm90ZSB0aGF0IGppdHRlciB3aWxsIHN0aWxsIGJlIGFwcGxpZWQsIHNvIHRoZSBhY3R1YWwgZGVsYXkgY291bGQgYmUgYXNcbiAgICAgKiBtdWNoIGFzIDEuNSptYXhEZWxheU1zLlxuICAgICAqLyAsIGkgPSA2ZTQpIHtcbiAgICAgICAgdGhpcy5PZSA9IHQsIHRoaXMudGltZXJJZCA9IGUsIHRoaXMuV2kgPSBuLCB0aGlzLkdpID0gcywgdGhpcy56aSA9IGksIHRoaXMuSGkgPSAwLCBcbiAgICAgICAgdGhpcy5KaSA9IG51bGwsIFxuICAgICAgICAvKiogVGhlIGxhc3QgYmFja29mZiBhdHRlbXB0LCBhcyBlcG9jaCBtaWxsaXNlY29uZHMuICovXG4gICAgICAgIHRoaXMuWWkgPSBEYXRlLm5vdygpLCB0aGlzLnJlc2V0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgYmFja29mZiBkZWxheS5cbiAgICAgKlxuICAgICAqIFRoZSB2ZXJ5IG5leHQgYmFja29mZkFuZFdhaXQoKSB3aWxsIGhhdmUgbm8gZGVsYXkuIElmIGl0IGlzIGNhbGxlZCBhZ2FpblxuICAgICAqIChpLmUuIGR1ZSB0byBhbiBlcnJvciksIGluaXRpYWxEZWxheU1zIChwbHVzIGppdHRlcikgd2lsbCBiZSB1c2VkLCBhbmRcbiAgICAgKiBzdWJzZXF1ZW50IG9uZXMgd2lsbCBpbmNyZWFzZSBhY2NvcmRpbmcgdG8gdGhlIGJhY2tvZmZGYWN0b3IuXG4gICAgICovICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLkhpID0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBiYWNrb2ZmIGRlbGF5IHRvIHRoZSBtYXhpbXVtIGRlbGF5IChlLmcuIGZvciB1c2UgYWZ0ZXIgYVxuICAgICAqIFJFU09VUkNFX0VYSEFVU1RFRCBlcnJvcikuXG4gICAgICovICAgIFhpKCkge1xuICAgICAgICB0aGlzLkhpID0gdGhpcy56aTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyBhZnRlciBjdXJyZW50RGVsYXlNcywgYW5kIGluY3JlYXNlcyB0aGVcbiAgICAgKiBkZWxheSBmb3IgYW55IHN1YnNlcXVlbnQgYXR0ZW1wdHMuIElmIHRoZXJlIHdhcyBhIHBlbmRpbmcgYmFja29mZiBvcGVyYXRpb25cbiAgICAgKiBhbHJlYWR5LCBpdCB3aWxsIGJlIGNhbmNlbGVkLlxuICAgICAqLyAgICBaaSh0KSB7XG4gICAgICAgIC8vIENhbmNlbCBhbnkgcGVuZGluZyBiYWNrb2ZmIG9wZXJhdGlvbi5cbiAgICAgICAgdGhpcy5jYW5jZWwoKTtcbiAgICAgICAgLy8gRmlyc3Qgc2NoZWR1bGUgdXNpbmcgdGhlIGN1cnJlbnQgYmFzZSAod2hpY2ggbWF5IGJlIDAgYW5kIHNob3VsZCBiZVxuICAgICAgICAvLyBob25vcmVkIGFzIHN1Y2gpLlxuICAgICAgICBjb25zdCBlID0gTWF0aC5mbG9vcih0aGlzLkhpICsgdGhpcy50cigpKSwgbiA9IE1hdGgubWF4KDAsIERhdGUubm93KCkgLSB0aGlzLllpKSwgcyA9IE1hdGgubWF4KDAsIGUgLSBuKTtcbiAgICAgICAgLy8gR3VhcmQgYWdhaW5zdCBsYXN0QXR0ZW1wdFRpbWUgYmVpbmcgaW4gdGhlIGZ1dHVyZSBkdWUgdG8gYSBjbG9jayBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgcyA+IDAgJiYgJChcIkV4cG9uZW50aWFsQmFja29mZlwiLCBgQmFja2luZyBvZmYgZm9yICR7c30gbXMgKGJhc2UgZGVsYXk6ICR7dGhpcy5IaX0gbXMsIGRlbGF5IHdpdGggaml0dGVyOiAke2V9IG1zLCBsYXN0IGF0dGVtcHQ6ICR7bn0gbXMgYWdvKWApLCBcbiAgICAgICAgdGhpcy5KaSA9IHRoaXMuT2UuZW5xdWV1ZUFmdGVyRGVsYXkodGhpcy50aW1lcklkLCBzLCAoKCkgPT4gKHRoaXMuWWkgPSBEYXRlLm5vdygpLCBcbiAgICAgICAgdCgpKSkpLCBcbiAgICAgICAgLy8gQXBwbHkgYmFja29mZiBmYWN0b3IgdG8gZGV0ZXJtaW5lIG5leHQgZGVsYXkgYW5kIGVuc3VyZSBpdCBpcyB3aXRoaW5cbiAgICAgICAgLy8gYm91bmRzLlxuICAgICAgICB0aGlzLkhpICo9IHRoaXMuR2ksIHRoaXMuSGkgPCB0aGlzLldpICYmICh0aGlzLkhpID0gdGhpcy5XaSksIHRoaXMuSGkgPiB0aGlzLnppICYmICh0aGlzLkhpID0gdGhpcy56aSk7XG4gICAgfVxuICAgIGVyKCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLkppICYmICh0aGlzLkppLnNraXBEZWxheSgpLCB0aGlzLkppID0gbnVsbCk7XG4gICAgfVxuICAgIGNhbmNlbCgpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy5KaSAmJiAodGhpcy5KaS5jYW5jZWwoKSwgdGhpcy5KaSA9IG51bGwpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIHJhbmRvbSB2YWx1ZSBpbiB0aGUgcmFuZ2UgWy1jdXJyZW50QmFzZU1zLzIsIGN1cnJlbnRCYXNlTXMvMl0gKi8gICAgdHIoKSB7XG4gICAgICAgIHJldHVybiAoTWF0aC5yYW5kb20oKSAtIC41KSAqIHRoaXMuSGk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIFBlcnNpc3RlbnRTdHJlYW0gaXMgYW4gYWJzdHJhY3QgYmFzZSBjbGFzcyB0aGF0IHJlcHJlc2VudHMgYSBzdHJlYW1pbmcgUlBDXG4gKiB0byB0aGUgRmlyZXN0b3JlIGJhY2tlbmQuIEl0J3MgYnVpbHQgb24gdG9wIG9mIHRoZSBjb25uZWN0aW9ucyBvd24gc3VwcG9ydFxuICogZm9yIHN0cmVhbWluZyBSUENzLCBhbmQgYWRkcyBzZXZlcmFsIGNyaXRpY2FsIGZlYXR1cmVzIGZvciBvdXIgY2xpZW50czpcbiAqXG4gKiAgIC0gRXhwb25lbnRpYWwgYmFja29mZiBvbiBmYWlsdXJlXG4gKiAgIC0gQXV0aGVudGljYXRpb24gdmlhIENyZWRlbnRpYWxzUHJvdmlkZXJcbiAqICAgLSBEaXNwYXRjaGluZyBhbGwgY2FsbGJhY2tzIGludG8gdGhlIHNoYXJlZCB3b3JrZXIgcXVldWVcbiAqICAgLSBDbG9zaW5nIGlkbGUgc3RyZWFtcyBhZnRlciA2MCBzZWNvbmRzIG9mIGluYWN0aXZpdHlcbiAqXG4gKiBTdWJjbGFzc2VzIG9mIFBlcnNpc3RlbnRTdHJlYW0gaW1wbGVtZW50IHNlcmlhbGl6YXRpb24gb2YgbW9kZWxzIHRvIGFuZFxuICogZnJvbSB0aGUgSlNPTiByZXByZXNlbnRhdGlvbiBvZiB0aGUgcHJvdG9jb2wgYnVmZmVycyBmb3IgYSBzcGVjaWZpY1xuICogc3RyZWFtaW5nIFJQQy5cbiAqXG4gKiAjIyBTdGFydGluZyBhbmQgU3RvcHBpbmdcbiAqXG4gKiBTdHJlYW1pbmcgUlBDcyBhcmUgc3RhdGVmdWwgYW5kIG5lZWQgdG8gYmUgc3RhcnQoKWVkIGJlZm9yZSBtZXNzYWdlcyBjYW5cbiAqIGJlIHNlbnQgYW5kIHJlY2VpdmVkLiBUaGUgUGVyc2lzdGVudFN0cmVhbSB3aWxsIGNhbGwgdGhlIG9uT3BlbigpIGZ1bmN0aW9uXG4gKiBvZiB0aGUgbGlzdGVuZXIgb25jZSB0aGUgc3RyZWFtIGlzIHJlYWR5IHRvIGFjY2VwdCByZXF1ZXN0cy5cbiAqXG4gKiBTaG91bGQgYSBzdGFydCgpIGZhaWwsIFBlcnNpc3RlbnRTdHJlYW0gd2lsbCBjYWxsIHRoZSByZWdpc3RlcmVkIG9uQ2xvc2UoKVxuICogbGlzdGVuZXIgd2l0aCBhIEZpcmVzdG9yZUVycm9yIGluZGljYXRpbmcgd2hhdCB3ZW50IHdyb25nLlxuICpcbiAqIEEgUGVyc2lzdGVudFN0cmVhbSBjYW4gYmUgc3RhcnRlZCBhbmQgc3RvcHBlZCByZXBlYXRlZGx5LlxuICpcbiAqIEdlbmVyaWMgdHlwZXM6XG4gKiAgU2VuZFR5cGU6IFRoZSB0eXBlIG9mIHRoZSBvdXRnb2luZyBtZXNzYWdlIG9mIHRoZSB1bmRlcmx5aW5nXG4gKiAgICBjb25uZWN0aW9uIHN0cmVhbVxuICogIFJlY2VpdmVUeXBlOiBUaGUgdHlwZSBvZiB0aGUgaW5jb21pbmcgbWVzc2FnZSBvZiB0aGUgdW5kZXJseWluZ1xuICogICAgY29ubmVjdGlvbiBzdHJlYW1cbiAqICBMaXN0ZW5lclR5cGU6IFRoZSB0eXBlIG9mIHRoZSBsaXN0ZW5lciB0aGF0IHdpbGwgYmUgdXNlZCBmb3IgY2FsbGJhY2tzXG4gKi9cbmNsYXNzIG5vIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByLCBvLCBhKSB7XG4gICAgICAgIHRoaXMuT2UgPSB0LCB0aGlzLm5yID0gbiwgdGhpcy5zciA9IHMsIHRoaXMuaXIgPSBpLCB0aGlzLmF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyID0gciwgXG4gICAgICAgIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFsc1Byb3ZpZGVyID0gbywgdGhpcy5saXN0ZW5lciA9IGEsIHRoaXMuc3RhdGUgPSAwIC8qIEluaXRpYWwgKi8gLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgY2xvc2UgY291bnQgdGhhdCdzIGluY3JlbWVudGVkIGV2ZXJ5IHRpbWUgdGhlIHN0cmVhbSBpcyBjbG9zZWQ7IHVzZWQgYnlcbiAgICAgICAgICogZ2V0Q2xvc2VHdWFyZGVkRGlzcGF0Y2hlcigpIHRvIGludmFsaWRhdGUgY2FsbGJhY2tzIHRoYXQgaGFwcGVuIGFmdGVyXG4gICAgICAgICAqIGNsb3NlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yciA9IDAsIHRoaXMuYXIgPSBudWxsLCB0aGlzLmNyID0gbnVsbCwgdGhpcy5zdHJlYW0gPSBudWxsLCB0aGlzLnVyID0gbmV3IGVvKHQsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgc3RhcnQoKSBoYXMgYmVlbiBjYWxsZWQgYW5kIG5vIGVycm9yIGhhcyBvY2N1cnJlZC4gVHJ1ZVxuICAgICAqIGluZGljYXRlcyB0aGUgc3RyZWFtIGlzIG9wZW4gb3IgaW4gdGhlIHByb2Nlc3Mgb2Ygb3BlbmluZyAod2hpY2hcbiAgICAgKiBlbmNvbXBhc3NlcyByZXNwZWN0aW5nIGJhY2tvZmYsIGdldHRpbmcgYXV0aCB0b2tlbnMsIGFuZCBzdGFydGluZyB0aGVcbiAgICAgKiBhY3R1YWwgUlBDKS4gVXNlIGlzT3BlbigpIHRvIGRldGVybWluZSBpZiB0aGUgc3RyZWFtIGlzIG9wZW4gYW5kIHJlYWR5IGZvclxuICAgICAqIG91dGJvdW5kIHJlcXVlc3RzLlxuICAgICAqLyAgICBocigpIHtcbiAgICAgICAgcmV0dXJuIDEgLyogU3RhcnRpbmcgKi8gPT09IHRoaXMuc3RhdGUgfHwgNSAvKiBCYWNrb2ZmICovID09PSB0aGlzLnN0YXRlIHx8IHRoaXMubHIoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSB1bmRlcmx5aW5nIFJQQyBpcyBvcGVuICh0aGUgb25PcGVuKCkgbGlzdGVuZXIgaGFzIGJlZW5cbiAgICAgKiBjYWxsZWQpIGFuZCB0aGUgc3RyZWFtIGlzIHJlYWR5IGZvciBvdXRib3VuZCByZXF1ZXN0cy5cbiAgICAgKi8gICAgbHIoKSB7XG4gICAgICAgIHJldHVybiAyIC8qIE9wZW4gKi8gPT09IHRoaXMuc3RhdGUgfHwgMyAvKiBIZWFsdGh5ICovID09PSB0aGlzLnN0YXRlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGFydHMgdGhlIFJQQy4gT25seSBhbGxvd2VkIGlmIGlzU3RhcnRlZCgpIHJldHVybnMgZmFsc2UuIFRoZSBzdHJlYW0gaXNcbiAgICAgKiBub3QgaW1tZWRpYXRlbHkgcmVhZHkgZm9yIHVzZTogb25PcGVuKCkgd2lsbCBiZSBpbnZva2VkIHdoZW4gdGhlIFJQQyBpc1xuICAgICAqIHJlYWR5IGZvciBvdXRib3VuZCByZXF1ZXN0cywgYXQgd2hpY2ggcG9pbnQgaXNPcGVuKCkgd2lsbCByZXR1cm4gdHJ1ZS5cbiAgICAgKlxuICAgICAqIFdoZW4gc3RhcnQgcmV0dXJucywgaXNTdGFydGVkKCkgd2lsbCByZXR1cm4gdHJ1ZS5cbiAgICAgKi8gICAgc3RhcnQoKSB7XG4gICAgICAgIDQgLyogRXJyb3IgKi8gIT09IHRoaXMuc3RhdGUgPyB0aGlzLmF1dGgoKSA6IHRoaXMuZHIoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RvcHMgdGhlIFJQQy4gVGhpcyBjYWxsIGlzIGlkZW1wb3RlbnQgYW5kIGFsbG93ZWQgcmVnYXJkbGVzcyBvZiB0aGVcbiAgICAgKiBjdXJyZW50IGlzU3RhcnRlZCgpIHN0YXRlLlxuICAgICAqXG4gICAgICogV2hlbiBzdG9wIHJldHVybnMsIGlzU3RhcnRlZCgpIGFuZCBpc09wZW4oKSB3aWxsIGJvdGggcmV0dXJuIGZhbHNlLlxuICAgICAqLyAgICBhc3luYyBzdG9wKCkge1xuICAgICAgICB0aGlzLmhyKCkgJiYgYXdhaXQgdGhpcy5jbG9zZSgwIC8qIEluaXRpYWwgKi8pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZnRlciBhbiBlcnJvciB0aGUgc3RyZWFtIHdpbGwgdXN1YWxseSBiYWNrIG9mZiBvbiB0aGUgbmV4dCBhdHRlbXB0IHRvXG4gICAgICogc3RhcnQgaXQuIElmIHRoZSBlcnJvciB3YXJyYW50cyBhbiBpbW1lZGlhdGUgcmVzdGFydCBvZiB0aGUgc3RyZWFtLCB0aGVcbiAgICAgKiBzZW5kZXIgY2FuIHVzZSB0aGlzIHRvIGluZGljYXRlIHRoYXQgdGhlIHJlY2VpdmVyIHNob3VsZCBub3QgYmFjayBvZmYuXG4gICAgICpcbiAgICAgKiBFYWNoIGVycm9yIHdpbGwgY2FsbCB0aGUgb25DbG9zZSgpIGxpc3RlbmVyLiBUaGF0IGZ1bmN0aW9uIGNhbiBkZWNpZGUgdG9cbiAgICAgKiBpbmhpYml0IGJhY2tvZmYgaWYgcmVxdWlyZWQuXG4gICAgICovICAgIHdyKCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gMCAvKiBJbml0aWFsICovICwgdGhpcy51ci5yZXNldCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYXJrcyB0aGlzIHN0cmVhbSBhcyBpZGxlLiBJZiBubyBmdXJ0aGVyIGFjdGlvbnMgYXJlIHBlcmZvcm1lZCBvbiB0aGVcbiAgICAgKiBzdHJlYW0gZm9yIG9uZSBtaW51dGUsIHRoZSBzdHJlYW0gd2lsbCBhdXRvbWF0aWNhbGx5IGNsb3NlIGl0c2VsZiBhbmRcbiAgICAgKiBub3RpZnkgdGhlIHN0cmVhbSdzIG9uQ2xvc2UoKSBoYW5kbGVyIHdpdGggU3RhdHVzLk9LLiBUaGUgc3RyZWFtIHdpbGwgdGhlblxuICAgICAqIGJlIGluIGEgIWlzU3RhcnRlZCgpIHN0YXRlLCByZXF1aXJpbmcgdGhlIGNhbGxlciB0byBzdGFydCB0aGUgc3RyZWFtIGFnYWluXG4gICAgICogYmVmb3JlIGZ1cnRoZXIgdXNlLlxuICAgICAqXG4gICAgICogT25seSBzdHJlYW1zIHRoYXQgYXJlIGluIHN0YXRlICdPcGVuJyBjYW4gYmUgbWFya2VkIGlkbGUsIGFzIGFsbCBvdGhlclxuICAgICAqIHN0YXRlcyBpbXBseSBwZW5kaW5nIG5ldHdvcmsgb3BlcmF0aW9ucy5cbiAgICAgKi8gICAgX3IoKSB7XG4gICAgICAgIC8vIFN0YXJ0cyB0aGUgaWRsZSB0aW1lIGlmIHdlIGFyZSBpbiBzdGF0ZSAnT3BlbicgYW5kIGFyZSBub3QgeWV0IGFscmVhZHlcbiAgICAgICAgLy8gcnVubmluZyBhIHRpbWVyIChpbiB3aGljaCBjYXNlIHRoZSBwcmV2aW91cyBpZGxlIHRpbWVvdXQgc3RpbGwgYXBwbGllcykuXG4gICAgICAgIHRoaXMubHIoKSAmJiBudWxsID09PSB0aGlzLmFyICYmICh0aGlzLmFyID0gdGhpcy5PZS5lbnF1ZXVlQWZ0ZXJEZWxheSh0aGlzLm5yLCA2ZTQsICgoKSA9PiB0aGlzLm1yKCkpKSk7XG4gICAgfVxuICAgIC8qKiBTZW5kcyBhIG1lc3NhZ2UgdG8gdGhlIHVuZGVybHlpbmcgc3RyZWFtLiAqLyAgICBncih0KSB7XG4gICAgICAgIHRoaXMueXIoKSwgdGhpcy5zdHJlYW0uc2VuZCh0KTtcbiAgICB9XG4gICAgLyoqIENhbGxlZCBieSB0aGUgaWRsZSB0aW1lciB3aGVuIHRoZSBzdHJlYW0gc2hvdWxkIGNsb3NlIGR1ZSB0byBpbmFjdGl2aXR5LiAqLyAgICBhc3luYyBtcigpIHtcbiAgICAgICAgaWYgKHRoaXMubHIoKSkgXG4gICAgICAgIC8vIFdoZW4gdGltaW5nIG91dCBhbiBpZGxlIHN0cmVhbSB0aGVyZSdzIG5vIHJlYXNvbiB0byBmb3JjZSB0aGUgc3RyZWFtIGludG8gYmFja29mZiB3aGVuXG4gICAgICAgIC8vIGl0IHJlc3RhcnRzIHNvIHNldCB0aGUgc3RyZWFtIHN0YXRlIHRvIEluaXRpYWwgaW5zdGVhZCBvZiBFcnJvci5cbiAgICAgICAgcmV0dXJuIHRoaXMuY2xvc2UoMCAvKiBJbml0aWFsICovKTtcbiAgICB9XG4gICAgLyoqIE1hcmtzIHRoZSBzdHJlYW0gYXMgYWN0aXZlIGFnYWluLiAqLyAgICB5cigpIHtcbiAgICAgICAgdGhpcy5hciAmJiAodGhpcy5hci5jYW5jZWwoKSwgdGhpcy5hciA9IG51bGwpO1xuICAgIH1cbiAgICAvKiogQ2FuY2VscyB0aGUgaGVhbHRoIGNoZWNrIGRlbGF5ZWQgb3BlcmF0aW9uLiAqLyAgICBwcigpIHtcbiAgICAgICAgdGhpcy5jciAmJiAodGhpcy5jci5jYW5jZWwoKSwgdGhpcy5jciA9IG51bGwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9zZXMgdGhlIHN0cmVhbSBhbmQgY2xlYW5zIHVwIGFzIG5lY2Vzc2FyeTpcbiAgICAgKlxuICAgICAqICogY2xvc2VzIHRoZSB1bmRlcmx5aW5nIEdSUEMgc3RyZWFtO1xuICAgICAqICogY2FsbHMgdGhlIG9uQ2xvc2UgaGFuZGxlciB3aXRoIHRoZSBnaXZlbiAnZXJyb3InO1xuICAgICAqICogc2V0cyBpbnRlcm5hbCBzdHJlYW0gc3RhdGUgdG8gJ2ZpbmFsU3RhdGUnO1xuICAgICAqICogYWRqdXN0cyB0aGUgYmFja29mZiB0aW1lciBiYXNlZCBvbiB0aGUgZXJyb3JcbiAgICAgKlxuICAgICAqIEEgbmV3IHN0cmVhbSBjYW4gYmUgb3BlbmVkIGJ5IGNhbGxpbmcgc3RhcnQoKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaW5hbFN0YXRlIC0gdGhlIGludGVuZGVkIHN0YXRlIG9mIHRoZSBzdHJlYW0gYWZ0ZXIgY2xvc2luZy5cbiAgICAgKiBAcGFyYW0gZXJyb3IgLSB0aGUgZXJyb3IgdGhlIGNvbm5lY3Rpb24gd2FzIGNsb3NlZCB3aXRoLlxuICAgICAqLyAgICBhc3luYyBjbG9zZSh0LCBlKSB7XG4gICAgICAgIC8vIENhbmNlbCBhbnkgb3V0c3RhbmRpbmcgdGltZXJzICh0aGV5J3JlIGd1YXJhbnRlZWQgbm90IHRvIGV4ZWN1dGUpLlxuICAgICAgICB0aGlzLnlyKCksIHRoaXMucHIoKSwgdGhpcy51ci5jYW5jZWwoKSwgXG4gICAgICAgIC8vIEludmFsaWRhdGVzIGFueSBzdHJlYW0tcmVsYXRlZCBjYWxsYmFja3MgKGUuZy4gZnJvbSBhdXRoIG9yIHRoZVxuICAgICAgICAvLyB1bmRlcmx5aW5nIHN0cmVhbSksIGd1YXJhbnRlZWluZyB0aGV5IHdvbid0IGV4ZWN1dGUuXG4gICAgICAgIHRoaXMucnIrKywgNCAvKiBFcnJvciAqLyAhPT0gdCA/IFxuICAgICAgICAvLyBJZiB0aGlzIGlzIGFuIGludGVudGlvbmFsIGNsb3NlIGVuc3VyZSB3ZSBkb24ndCBkZWxheSBvdXIgbmV4dCBjb25uZWN0aW9uIGF0dGVtcHQuXG4gICAgICAgIHRoaXMudXIucmVzZXQoKSA6IGUgJiYgZS5jb2RlID09PSBLLlJFU09VUkNFX0VYSEFVU1RFRCA/IChcbiAgICAgICAgLy8gTG9nIHRoZSBlcnJvci4gKFByb2JhYmx5IGVpdGhlciAncXVvdGEgZXhjZWVkZWQnIG9yICdtYXggcXVldWUgbGVuZ3RoIHJlYWNoZWQnLilcbiAgICAgICAgRihlLnRvU3RyaW5nKCkpLCBGKFwiVXNpbmcgbWF4aW11bSBiYWNrb2ZmIGRlbGF5IHRvIHByZXZlbnQgb3ZlcmxvYWRpbmcgdGhlIGJhY2tlbmQuXCIpLCBcbiAgICAgICAgdGhpcy51ci5YaSgpKSA6IGUgJiYgZS5jb2RlID09PSBLLlVOQVVUSEVOVElDQVRFRCAmJiAzIC8qIEhlYWx0aHkgKi8gIT09IHRoaXMuc3RhdGUgJiYgKFxuICAgICAgICAvLyBcInVuYXV0aGVudGljYXRlZFwiIGVycm9yIG1lYW5zIHRoZSB0b2tlbiB3YXMgcmVqZWN0ZWQuIFRoaXMgc2hvdWxkIHJhcmVseVxuICAgICAgICAvLyBoYXBwZW4gc2luY2UgYm90aCBBdXRoIGFuZCBBcHBDaGVjayBlbnN1cmUgYSBzdWZmaWNpZW50IFRUTCB3aGVuIHdlXG4gICAgICAgIC8vIHJlcXVlc3QgYSB0b2tlbi4gSWYgYSB1c2VyIG1hbnVhbGx5IHJlc2V0cyB0aGVpciBzeXN0ZW0gY2xvY2sgdGhpcyBjYW5cbiAgICAgICAgLy8gZmFpbCwgaG93ZXZlci4gSW4gdGhpcyBjYXNlLCB3ZSBzaG91bGQgZ2V0IGEgQ29kZS5VTkFVVEhFTlRJQ0FURUQgZXJyb3JcbiAgICAgICAgLy8gYmVmb3JlIHdlIHJlY2VpdmVkIHRoZSBmaXJzdCBtZXNzYWdlIGFuZCB3ZSBuZWVkIHRvIGludmFsaWRhdGUgdGhlIHRva2VuXG4gICAgICAgIC8vIHRvIGVuc3VyZSB0aGF0IHdlIGZldGNoIGEgbmV3IHRva2VuLlxuICAgICAgICB0aGlzLmF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyLmludmFsaWRhdGVUb2tlbigpLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHNQcm92aWRlci5pbnZhbGlkYXRlVG9rZW4oKSksIFxuICAgICAgICAvLyBDbGVhbiB1cCB0aGUgdW5kZXJseWluZyBzdHJlYW0gYmVjYXVzZSB3ZSBhcmUgbm8gbG9uZ2VyIGludGVyZXN0ZWQgaW4gZXZlbnRzLlxuICAgICAgICBudWxsICE9PSB0aGlzLnN0cmVhbSAmJiAodGhpcy5UcigpLCB0aGlzLnN0cmVhbS5jbG9zZSgpLCB0aGlzLnN0cmVhbSA9IG51bGwpLCBcbiAgICAgICAgLy8gVGhpcyBzdGF0ZSBtdXN0IGJlIGFzc2lnbmVkIGJlZm9yZSBjYWxsaW5nIG9uQ2xvc2UoKSB0byBhbGxvdyB0aGUgY2FsbGJhY2sgdG9cbiAgICAgICAgLy8gaW5oaWJpdCBiYWNrb2ZmIG9yIG90aGVyd2lzZSBtYW5pcHVsYXRlIHRoZSBzdGF0ZSBpbiBpdHMgbm9uLXN0YXJ0ZWQgc3RhdGUuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB0LCBcbiAgICAgICAgLy8gTm90aWZ5IHRoZSBsaXN0ZW5lciB0aGF0IHRoZSBzdHJlYW0gY2xvc2VkLlxuICAgICAgICBhd2FpdCB0aGlzLmxpc3RlbmVyLk5pKGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYW4gYmUgb3ZlcnJpZGRlbiB0byBwZXJmb3JtIGFkZGl0aW9uYWwgY2xlYW51cCBiZWZvcmUgdGhlIHN0cmVhbSBpcyBjbG9zZWQuXG4gICAgICogQ2FsbGluZyBzdXBlci50ZWFyRG93bigpIGlzIG5vdCByZXF1aXJlZC5cbiAgICAgKi8gICAgVHIoKSB7fVxuICAgIGF1dGgoKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSAxIC8qIFN0YXJ0aW5nICovO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5Fcih0aGlzLnJyKSwgZSA9IHRoaXMucnI7XG4gICAgICAgIC8vIFRPRE8obWlrZWxlaGVuKTogSnVzdCB1c2UgZGlzcGF0Y2hJZk5vdENsb3NlZCwgYnV0IHNlZSBUT0RPIGJlbG93LlxuICAgICAgICAgICAgICAgIFByb21pc2UuYWxsKFsgdGhpcy5hdXRoQ3JlZGVudGlhbHNQcm92aWRlci5nZXRUb2tlbigpLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHNQcm92aWRlci5nZXRUb2tlbigpIF0pLnRoZW4oKChbdCwgbl0pID0+IHtcbiAgICAgICAgICAgIC8vIFN0cmVhbSBjYW4gYmUgc3RvcHBlZCB3aGlsZSB3YWl0aW5nIGZvciBhdXRoZW50aWNhdGlvbi5cbiAgICAgICAgICAgIC8vIFRPRE8obWlrZWxlaGVuKTogV2UgcmVhbGx5IHNob3VsZCBqdXN0IHVzZSBkaXNwYXRjaElmTm90Q2xvc2VkXG4gICAgICAgICAgICAvLyBhbmQgbGV0IHRoaXMgZGlzcGF0Y2ggb250byB0aGUgcXVldWUsIGJ1dCB0aGF0IG9wZW5lZCBhIHNwZWMgdGVzdCBjYW5cbiAgICAgICAgICAgIC8vIG9mIHdvcm1zIHRoYXQgSSBkb24ndCB3YW50IHRvIGRlYWwgd2l0aCBpbiB0aGlzIFBSLlxuICAgICAgICAgICAgdGhpcy5yciA9PT0gZSAmJiBcbiAgICAgICAgICAgIC8vIE5vcm1hbGx5IHdlJ2QgaGF2ZSB0byBzY2hlZHVsZSB0aGUgY2FsbGJhY2sgb24gdGhlIEFzeW5jUXVldWUuXG4gICAgICAgICAgICAvLyBIb3dldmVyLCB0aGUgZm9sbG93aW5nIGNhbGxzIGFyZSBzYWZlIHRvIGJlIGNhbGxlZCBvdXRzaWRlIHRoZVxuICAgICAgICAgICAgLy8gQXN5bmNRdWV1ZSBzaW5jZSB0aGV5IGRvbid0IGNoYWluIGFzeW5jaHJvbm91cyBjYWxsc1xuICAgICAgICAgICAgdGhpcy5Jcih0LCBuKTtcbiAgICAgICAgfSksIChlID0+IHtcbiAgICAgICAgICAgIHQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gbmV3IGooSy5VTktOT1dOLCBcIkZldGNoaW5nIGF1dGggdG9rZW4gZmFpbGVkOiBcIiArIGUubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuQXIodCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgSXIodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5Fcih0aGlzLnJyKTtcbiAgICAgICAgdGhpcy5zdHJlYW0gPSB0aGlzLlJyKHQsIGUpLCB0aGlzLnN0cmVhbS5EaSgoKCkgPT4ge1xuICAgICAgICAgICAgbigoKCkgPT4gKHRoaXMuc3RhdGUgPSAyIC8qIE9wZW4gKi8gLCB0aGlzLmNyID0gdGhpcy5PZS5lbnF1ZXVlQWZ0ZXJEZWxheSh0aGlzLnNyLCAxZTQsICgoKSA9PiAodGhpcy5scigpICYmICh0aGlzLnN0YXRlID0gMyAvKiBIZWFsdGh5ICovKSwgXG4gICAgICAgICAgICBQcm9taXNlLnJlc29sdmUoKSkpKSwgdGhpcy5saXN0ZW5lci5EaSgpKSkpO1xuICAgICAgICB9KSksIHRoaXMuc3RyZWFtLk5pKCh0ID0+IHtcbiAgICAgICAgICAgIG4oKCgpID0+IHRoaXMuQXIodCkpKTtcbiAgICAgICAgfSkpLCB0aGlzLnN0cmVhbS5vbk1lc3NhZ2UoKHQgPT4ge1xuICAgICAgICAgICAgbigoKCkgPT4gdGhpcy5vbk1lc3NhZ2UodCkpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBkcigpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IDUgLyogQmFja29mZiAqLyAsIHRoaXMudXIuWmkoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSAwIC8qIEluaXRpYWwgKi8gLCB0aGlzLnN0YXJ0KCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdHNcbiAgICBBcih0KSB7XG4gICAgICAgIC8vIEluIHRoZW9yeSB0aGUgc3RyZWFtIGNvdWxkIGNsb3NlIGNsZWFubHksIGhvd2V2ZXIsIGluIG91ciBjdXJyZW50IG1vZGVsXG4gICAgICAgIC8vIHdlIG5ldmVyIGV4cGVjdCB0aGlzIHRvIGhhcHBlbiBiZWNhdXNlIGlmIHdlIHN0b3AgYSBzdHJlYW0gb3Vyc2VsdmVzLFxuICAgICAgICAvLyB0aGlzIGNhbGxiYWNrIHdpbGwgbmV2ZXIgYmUgY2FsbGVkLiBUbyBwcmV2ZW50IGNhc2VzIHdoZXJlIHdlIHJldHJ5XG4gICAgICAgIC8vIHdpdGhvdXQgYSBiYWNrb2ZmIGFjY2lkZW50YWxseSwgd2Ugc2V0IHRoZSBzdHJlYW0gdG8gZXJyb3IgaW4gYWxsIGNhc2VzLlxuICAgICAgICByZXR1cm4gJChcIlBlcnNpc3RlbnRTdHJlYW1cIiwgYGNsb3NlIHdpdGggZXJyb3I6ICR7dH1gKSwgdGhpcy5zdHJlYW0gPSBudWxsLCB0aGlzLmNsb3NlKDQgLyogRXJyb3IgKi8gLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIFwiZGlzcGF0Y2hlclwiIGZ1bmN0aW9uIHRoYXQgZGlzcGF0Y2hlcyBvcGVyYXRpb25zIG9udG8gdGhlXG4gICAgICogQXN5bmNRdWV1ZSBidXQgb25seSBydW5zIHRoZW0gaWYgY2xvc2VDb3VudCByZW1haW5zIHVuY2hhbmdlZC4gVGhpcyBhbGxvd3NcbiAgICAgKiB1cyB0byB0dXJuIGF1dGggLyBzdHJlYW0gY2FsbGJhY2tzIGludG8gbm8tb3BzIGlmIHRoZSBzdHJlYW0gaXMgY2xvc2VkIC9cbiAgICAgKiByZS1vcGVuZWQsIGV0Yy5cbiAgICAgKi8gICAgRXIodCkge1xuICAgICAgICByZXR1cm4gZSA9PiB7XG4gICAgICAgICAgICB0aGlzLk9lLmVucXVldWVBbmRGb3JnZXQoKCgpID0+IHRoaXMucnIgPT09IHQgPyBlKCkgOiAoJChcIlBlcnNpc3RlbnRTdHJlYW1cIiwgXCJzdHJlYW0gY2FsbGJhY2sgc2tpcHBlZCBieSBnZXRDbG9zZUd1YXJkZWREaXNwYXRjaGVyLlwiKSwgXG4gICAgICAgICAgICBQcm9taXNlLnJlc29sdmUoKSkpKTtcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBQZXJzaXN0ZW50U3RyZWFtIHRoYXQgaW1wbGVtZW50cyB0aGUgTGlzdGVuIFJQQy5cbiAqXG4gKiBPbmNlIHRoZSBMaXN0ZW4gc3RyZWFtIGhhcyBjYWxsZWQgdGhlIG9uT3BlbigpIGxpc3RlbmVyLCBhbnkgbnVtYmVyIG9mXG4gKiBsaXN0ZW4oKSBhbmQgdW5saXN0ZW4oKSBjYWxscyBjYW4gYmUgbWFkZSB0byBjb250cm9sIHdoYXQgY2hhbmdlcyB3aWxsIGJlXG4gKiBzZW50IGZyb20gdGhlIHNlcnZlciBmb3IgTGlzdGVuUmVzcG9uc2VzLlxuICovIGNsYXNzIHNvIGV4dGVuZHMgbm8ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGksIHIpIHtcbiAgICAgICAgc3VwZXIodCwgXCJsaXN0ZW5fc3RyZWFtX2Nvbm5lY3Rpb25fYmFja29mZlwiIC8qIExpc3RlblN0cmVhbUNvbm5lY3Rpb25CYWNrb2ZmICovICwgXCJsaXN0ZW5fc3RyZWFtX2lkbGVcIiAvKiBMaXN0ZW5TdHJlYW1JZGxlICovICwgXCJoZWFsdGhfY2hlY2tfdGltZW91dFwiIC8qIEhlYWx0aENoZWNrVGltZW91dCAqLyAsIGUsIG4sIHMsIHIpLCBcbiAgICAgICAgdGhpcy5rID0gaTtcbiAgICB9XG4gICAgUnIodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5pci5RaShcIkxpc3RlblwiLCB0LCBlKTtcbiAgICB9XG4gICAgb25NZXNzYWdlKHQpIHtcbiAgICAgICAgLy8gQSBzdWNjZXNzZnVsIHJlc3BvbnNlIG1lYW5zIHRoZSBzdHJlYW0gaXMgaGVhbHRoeVxuICAgICAgICB0aGlzLnVyLnJlc2V0KCk7XG4gICAgICAgIGNvbnN0IGUgPSBycyh0aGlzLmssIHQpLCBuID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgLy8gV2UgaGF2ZSBvbmx5IHJlYWNoZWQgYSBjb25zaXN0ZW50IHNuYXBzaG90IGZvciB0aGUgZW50aXJlIHN0cmVhbSBpZiB0aGVyZVxuICAgICAgICAgICAgLy8gaXMgYSByZWFkX3RpbWUgc2V0IGFuZCBpdCBhcHBsaWVzIHRvIGFsbCB0YXJnZXRzIChpLmUuIHRoZSBsaXN0IG9mXG4gICAgICAgICAgICAvLyB0YXJnZXRzIGlzIGVtcHR5KS4gVGhlIGJhY2tlbmQgaXMgZ3VhcmFudGVlZCB0byBzZW5kIHN1Y2ggcmVzcG9uc2VzLlxuICAgICAgICAgICAgaWYgKCEoXCJ0YXJnZXRDaGFuZ2VcIiBpbiB0KSkgcmV0dXJuIGN0Lm1pbigpO1xuICAgICAgICAgICAgY29uc3QgZSA9IHQudGFyZ2V0Q2hhbmdlO1xuICAgICAgICAgICAgcmV0dXJuIGUudGFyZ2V0SWRzICYmIGUudGFyZ2V0SWRzLmxlbmd0aCA/IGN0Lm1pbigpIDogZS5yZWFkVGltZSA/IEduKGUucmVhZFRpbWUpIDogY3QubWluKCk7XG4gICAgICAgIH0odCk7XG4gICAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLlByKGUsIG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgaW50ZXJlc3QgaW4gdGhlIHJlc3VsdHMgb2YgdGhlIGdpdmVuIHRhcmdldC4gSWYgdGhlIHRhcmdldFxuICAgICAqIGluY2x1ZGVzIGEgcmVzdW1lVG9rZW4gaXQgd2lsbCBiZSBpbmNsdWRlZCBpbiB0aGUgcmVxdWVzdC4gUmVzdWx0cyB0aGF0XG4gICAgICogYWZmZWN0IHRoZSB0YXJnZXQgd2lsbCBiZSBzdHJlYW1lZCBiYWNrIGFzIFdhdGNoQ2hhbmdlIG1lc3NhZ2VzIHRoYXRcbiAgICAgKiByZWZlcmVuY2UgdGhlIHRhcmdldElkLlxuICAgICAqLyAgICBicih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB7fTtcbiAgICAgICAgZS5kYXRhYmFzZSA9IHRzKHRoaXMuayksIGUuYWRkVGFyZ2V0ID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgbGV0IG47XG4gICAgICAgICAgICBjb25zdCBzID0gZS50YXJnZXQ7XG4gICAgICAgICAgICByZXR1cm4gbiA9IFh0KHMpID8ge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50czogdXModCwgcylcbiAgICAgICAgICAgIH0gOiB7XG4gICAgICAgICAgICAgICAgcXVlcnk6IGhzKHQsIHMpXG4gICAgICAgICAgICB9LCBuLnRhcmdldElkID0gZS50YXJnZXRJZCwgZS5yZXN1bWVUb2tlbi5hcHByb3hpbWF0ZUJ5dGVTaXplKCkgPiAwID8gbi5yZXN1bWVUb2tlbiA9IFFuKHQsIGUucmVzdW1lVG9rZW4pIDogZS5zbmFwc2hvdFZlcnNpb24uY29tcGFyZVRvKGN0Lm1pbigpKSA+IDAgJiYgKFxuICAgICAgICAgICAgLy8gVE9ETyh3dWFuZHkpOiBDb25zaWRlciByZW1vdmluZyBhYm92ZSBjaGVjayBiZWNhdXNlIGl0IGlzIG1vc3QgbGlrZWx5IHRydWUuXG4gICAgICAgICAgICAvLyBSaWdodCBub3csIG1hbnkgdGVzdHMgZGVwZW5kIG9uIHRoaXMgYmVoYXZpb3VyIHRob3VnaCAobGVhdmluZyBtaW4oKSBvdXRcbiAgICAgICAgICAgIC8vIG9mIHNlcmlhbGl6YXRpb24pLlxuICAgICAgICAgICAgbi5yZWFkVGltZSA9IGpuKHQsIGUuc25hcHNob3RWZXJzaW9uLnRvVGltZXN0YW1wKCkpKSwgbjtcbiAgICAgICAgfSh0aGlzLmssIHQpO1xuICAgICAgICBjb25zdCBuID0gZnModGhpcy5rLCB0KTtcbiAgICAgICAgbiAmJiAoZS5sYWJlbHMgPSBuKSwgdGhpcy5ncihlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVW5yZWdpc3RlcnMgaW50ZXJlc3QgaW4gdGhlIHJlc3VsdHMgb2YgdGhlIHRhcmdldCBhc3NvY2lhdGVkIHdpdGggdGhlXG4gICAgICogZ2l2ZW4gdGFyZ2V0SWQuXG4gICAgICovICAgIHZyKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHt9O1xuICAgICAgICBlLmRhdGFiYXNlID0gdHModGhpcy5rKSwgZS5yZW1vdmVUYXJnZXQgPSB0LCB0aGlzLmdyKGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIFN0cmVhbSB0aGF0IGltcGxlbWVudHMgdGhlIFdyaXRlIFJQQy5cbiAqXG4gKiBUaGUgV3JpdGUgUlBDIHJlcXVpcmVzIHRoZSBjYWxsZXIgdG8gbWFpbnRhaW4gc3BlY2lhbCBzdHJlYW1Ub2tlblxuICogc3RhdGUgaW4gYmV0d2VlbiBjYWxscywgdG8gaGVscCB0aGUgc2VydmVyIHVuZGVyc3RhbmQgd2hpY2ggcmVzcG9uc2VzIHRoZVxuICogY2xpZW50IGhhcyBwcm9jZXNzZWQgYnkgdGhlIHRpbWUgdGhlIG5leHQgcmVxdWVzdCBpcyBtYWRlLiBFdmVyeSByZXNwb25zZVxuICogd2lsbCBjb250YWluIGEgc3RyZWFtVG9rZW47IHRoaXMgdmFsdWUgbXVzdCBiZSBwYXNzZWQgdG8gdGhlIG5leHRcbiAqIHJlcXVlc3QuXG4gKlxuICogQWZ0ZXIgY2FsbGluZyBzdGFydCgpIG9uIHRoaXMgc3RyZWFtLCB0aGUgbmV4dCByZXF1ZXN0IG11c3QgYmUgYSBoYW5kc2hha2UsXG4gKiBjb250YWluaW5nIHdoYXRldmVyIHN0cmVhbVRva2VuIGlzIG9uIGhhbmQuIE9uY2UgYSByZXNwb25zZSB0byB0aGlzXG4gKiByZXF1ZXN0IGlzIHJlY2VpdmVkLCBhbGwgcGVuZGluZyBtdXRhdGlvbnMgbWF5IGJlIHN1Ym1pdHRlZC4gV2hlblxuICogc3VibWl0dGluZyBtdWx0aXBsZSBiYXRjaGVzIG9mIG11dGF0aW9ucyBhdCB0aGUgc2FtZSB0aW1lLCBpdCdzXG4gKiBva2F5IHRvIHVzZSB0aGUgc2FtZSBzdHJlYW1Ub2tlbiBmb3IgdGhlIGNhbGxzIHRvIHdyaXRlTXV0YXRpb25zLlxuICpcbiAqIFRPRE8oYi8zMzI3MTIzNSk6IFVzZSBwcm90byB0eXBlc1xuICovIGNsYXNzIGlvIGV4dGVuZHMgbm8ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGksIHIpIHtcbiAgICAgICAgc3VwZXIodCwgXCJ3cml0ZV9zdHJlYW1fY29ubmVjdGlvbl9iYWNrb2ZmXCIgLyogV3JpdGVTdHJlYW1Db25uZWN0aW9uQmFja29mZiAqLyAsIFwid3JpdGVfc3RyZWFtX2lkbGVcIiAvKiBXcml0ZVN0cmVhbUlkbGUgKi8gLCBcImhlYWx0aF9jaGVja190aW1lb3V0XCIgLyogSGVhbHRoQ2hlY2tUaW1lb3V0ICovICwgZSwgbiwgcywgciksIFxuICAgICAgICB0aGlzLmsgPSBpLCB0aGlzLlZyID0gITE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyYWNrcyB3aGV0aGVyIG9yIG5vdCBhIGhhbmRzaGFrZSBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgZXhjaGFuZ2VkIGFuZFxuICAgICAqIHRoZSBzdHJlYW0gaXMgcmVhZHkgdG8gYWNjZXB0IG11dGF0aW9ucy5cbiAgICAgKi8gICAgZ2V0IFNyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5WcjtcbiAgICB9XG4gICAgLy8gT3ZlcnJpZGUgb2YgUGVyc2lzdGVudFN0cmVhbS5zdGFydFxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLlZyID0gITEsIHRoaXMubGFzdFN0cmVhbVRva2VuID0gdm9pZCAwLCBzdXBlci5zdGFydCgpO1xuICAgIH1cbiAgICBUcigpIHtcbiAgICAgICAgdGhpcy5WciAmJiB0aGlzLkRyKFtdKTtcbiAgICB9XG4gICAgUnIodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5pci5RaShcIldyaXRlXCIsIHQsIGUpO1xuICAgIH1cbiAgICBvbk1lc3NhZ2UodCkge1xuICAgICAgICBpZiAoXG4gICAgICAgIC8vIEFsd2F5cyBjYXB0dXJlIHRoZSBsYXN0IHN0cmVhbSB0b2tlbi5cbiAgICAgICAgQighIXQuc3RyZWFtVG9rZW4pLCB0aGlzLmxhc3RTdHJlYW1Ub2tlbiA9IHQuc3RyZWFtVG9rZW4sIHRoaXMuVnIpIHtcbiAgICAgICAgICAgIC8vIEEgc3VjY2Vzc2Z1bCBmaXJzdCB3cml0ZSByZXNwb25zZSBtZWFucyB0aGUgc3RyZWFtIGlzIGhlYWx0aHksXG4gICAgICAgICAgICAvLyBOb3RlLCB0aGF0IHdlIGNvdWxkIGNvbnNpZGVyIGEgc3VjY2Vzc2Z1bCBoYW5kc2hha2UgaGVhbHRoeSwgaG93ZXZlcixcbiAgICAgICAgICAgIC8vIHRoZSB3cml0ZSBpdHNlbGYgbWlnaHQgYmUgY2F1c2luZyBhbiBlcnJvciB3ZSB3YW50IHRvIGJhY2sgb2ZmIGZyb20uXG4gICAgICAgICAgICB0aGlzLnVyLnJlc2V0KCk7XG4gICAgICAgICAgICBjb25zdCBlID0gY3ModC53cml0ZVJlc3VsdHMsIHQuY29tbWl0VGltZSksIG4gPSBHbih0LmNvbW1pdFRpbWUpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZXIuQ3IobiwgZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlIGZpcnN0IHJlc3BvbnNlIGlzIGFsd2F5cyB0aGUgaGFuZHNoYWtlIHJlc3BvbnNlXG4gICAgICAgIHJldHVybiBCKCF0LndyaXRlUmVzdWx0cyB8fCAwID09PSB0LndyaXRlUmVzdWx0cy5sZW5ndGgpLCB0aGlzLlZyID0gITAsIHRoaXMubGlzdGVuZXIuTnIoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgYW4gaW5pdGlhbCBzdHJlYW1Ub2tlbiB0byB0aGUgc2VydmVyLCBwZXJmb3JtaW5nIHRoZSBoYW5kc2hha2VcbiAgICAgKiByZXF1aXJlZCB0byBtYWtlIHRoZSBTdHJlYW1pbmdXcml0ZSBSUEMgd29yay4gU3Vic2VxdWVudFxuICAgICAqIGNhbGxzIHNob3VsZCB3YWl0IHVudGlsIG9uSGFuZHNoYWtlQ29tcGxldGUgd2FzIGNhbGxlZC5cbiAgICAgKi8gICAga3IoKSB7XG4gICAgICAgIC8vIFRPRE8oZGltb25kKTogU3VwcG9ydCBzdHJlYW0gcmVzdW1wdGlvbi4gV2UgaW50ZW50aW9uYWxseSBkbyBub3Qgc2V0IHRoZVxuICAgICAgICAvLyBzdHJlYW0gdG9rZW4gb24gdGhlIGhhbmRzaGFrZSwgaWdub3JpbmcgYW55IHN0cmVhbSB0b2tlbiB3ZSBtaWdodCBoYXZlLlxuICAgICAgICBjb25zdCB0ID0ge307XG4gICAgICAgIHQuZGF0YWJhc2UgPSB0cyh0aGlzLmspLCB0aGlzLmdyKHQpO1xuICAgIH1cbiAgICAvKiogU2VuZHMgYSBncm91cCBvZiBtdXRhdGlvbnMgdG8gdGhlIEZpcmVzdG9yZSBiYWNrZW5kIHRvIGFwcGx5LiAqLyAgICBEcih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgICAgICBzdHJlYW1Ub2tlbjogdGhpcy5sYXN0U3RyZWFtVG9rZW4sXG4gICAgICAgICAgICB3cml0ZXM6IHQubWFwKCh0ID0+IG9zKHRoaXMuaywgdCkpKVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdyKGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRGF0YXN0b3JlIGFuZCBpdHMgcmVsYXRlZCBtZXRob2RzIGFyZSBhIHdyYXBwZXIgYXJvdW5kIHRoZSBleHRlcm5hbCBHb29nbGVcbiAqIENsb3VkIERhdGFzdG9yZSBncnBjIEFQSSwgd2hpY2ggcHJvdmlkZXMgYW4gaW50ZXJmYWNlIHRoYXQgaXMgbW9yZSBjb252ZW5pZW50XG4gKiBmb3IgdGhlIHJlc3Qgb2YgdGhlIGNsaWVudCBTREsgYXJjaGl0ZWN0dXJlIHRvIGNvbnN1bWUuXG4gKi9cbi8qKlxuICogQW4gaW1wbGVtZW50YXRpb24gb2YgRGF0YXN0b3JlIHRoYXQgZXhwb3NlcyBhZGRpdGlvbmFsIHN0YXRlIGZvciBpbnRlcm5hbFxuICogY29uc3VtcHRpb24uXG4gKi9cbmNsYXNzIHJvIGV4dGVuZHMgY2xhc3Mge30ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5hdXRoQ3JlZGVudGlhbHMgPSB0LCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMgPSBlLCB0aGlzLmlyID0gbiwgdGhpcy5rID0gcywgXG4gICAgICAgIHRoaXMuJHIgPSAhMTtcbiAgICB9XG4gICAgRnIoKSB7XG4gICAgICAgIGlmICh0aGlzLiRyKSB0aHJvdyBuZXcgaihLLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiVGhlIGNsaWVudCBoYXMgYWxyZWFkeSBiZWVuIHRlcm1pbmF0ZWQuXCIpO1xuICAgIH1cbiAgICAvKiogSW52b2tlcyB0aGUgcHJvdmlkZWQgUlBDIHdpdGggYXV0aCBhbmQgQXBwQ2hlY2sgdG9rZW5zLiAqLyAgICBCaSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkZyKCksIFByb21pc2UuYWxsKFsgdGhpcy5hdXRoQ3JlZGVudGlhbHMuZ2V0VG9rZW4oKSwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzLmdldFRva2VuKCkgXSkudGhlbigoKFtzLCBpXSkgPT4gdGhpcy5pci5CaSh0LCBlLCBuLCBzLCBpKSkpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRocm93IFwiRmlyZWJhc2VFcnJvclwiID09PSB0Lm5hbWUgPyAodC5jb2RlID09PSBLLlVOQVVUSEVOVElDQVRFRCAmJiAodGhpcy5hdXRoQ3JlZGVudGlhbHMuaW52YWxpZGF0ZVRva2VuKCksIFxuICAgICAgICAgICAgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzLmludmFsaWRhdGVUb2tlbigpKSwgdCkgOiBuZXcgaihLLlVOS05PV04sIHQudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqIEludm9rZXMgdGhlIHByb3ZpZGVkIFJQQyB3aXRoIHN0cmVhbWVkIHJlc3VsdHMgd2l0aCBhdXRoIGFuZCBBcHBDaGVjayB0b2tlbnMuICovICAgIGppKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuRnIoKSwgUHJvbWlzZS5hbGwoWyB0aGlzLmF1dGhDcmVkZW50aWFscy5nZXRUb2tlbigpLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuZ2V0VG9rZW4oKSBdKS50aGVuKCgoW3MsIGldKSA9PiB0aGlzLmlyLmppKHQsIGUsIG4sIHMsIGkpKSkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgdGhyb3cgXCJGaXJlYmFzZUVycm9yXCIgPT09IHQubmFtZSA/ICh0LmNvZGUgPT09IEsuVU5BVVRIRU5USUNBVEVEICYmICh0aGlzLmF1dGhDcmVkZW50aWFscy5pbnZhbGlkYXRlVG9rZW4oKSwgXG4gICAgICAgICAgICB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuaW52YWxpZGF0ZVRva2VuKCkpLCB0KSA6IG5ldyBqKEsuVU5LTk9XTiwgdC50b1N0cmluZygpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHRoaXMuJHIgPSAhMDtcbiAgICB9XG59XG5cbi8vIFRPRE8oZmlyZXN0b3JleHApOiBNYWtlIHN1cmUgdGhlcmUgaXMgb25seSBvbmUgRGF0YXN0b3JlIGluc3RhbmNlIHBlclxuLy8gZmlyZXN0b3JlLWV4cCBjbGllbnQuXG4vKipcbiAqIEEgY29tcG9uZW50IHVzZWQgYnkgdGhlIFJlbW90ZVN0b3JlIHRvIHRyYWNrIHRoZSBPbmxpbmVTdGF0ZSAodGhhdCBpcyxcbiAqIHdoZXRoZXIgb3Igbm90IHRoZSBjbGllbnQgYXMgYSB3aG9sZSBzaG91bGQgYmUgY29uc2lkZXJlZCB0byBiZSBvbmxpbmUgb3JcbiAqIG9mZmxpbmUpLCBpbXBsZW1lbnRpbmcgdGhlIGFwcHJvcHJpYXRlIGhldXJpc3RpY3MuXG4gKlxuICogSW4gcGFydGljdWxhciwgd2hlbiB0aGUgY2xpZW50IGlzIHRyeWluZyB0byBjb25uZWN0IHRvIHRoZSBiYWNrZW5kLCB3ZVxuICogYWxsb3cgdXAgdG8gTUFYX1dBVENIX1NUUkVBTV9GQUlMVVJFUyB3aXRoaW4gT05MSU5FX1NUQVRFX1RJTUVPVVRfTVMgZm9yXG4gKiBhIGNvbm5lY3Rpb24gdG8gc3VjY2VlZC4gSWYgd2UgaGF2ZSB0b28gbWFueSBmYWlsdXJlcyBvciB0aGUgdGltZW91dCBlbGFwc2VzLFxuICogdGhlbiB3ZSBzZXQgdGhlIE9ubGluZVN0YXRlIHRvIE9mZmxpbmUsIGFuZCB0aGUgY2xpZW50IHdpbGwgYmVoYXZlIGFzIGlmXG4gKiBpdCBpcyBvZmZsaW5lIChnZXQoKXMgd2lsbCByZXR1cm4gY2FjaGVkIGRhdGEsIGV0Yy4pLlxuICovXG5jbGFzcyBvbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUgPSB0LCB0aGlzLm9ubGluZVN0YXRlSGFuZGxlciA9IGUsIFxuICAgICAgICAvKiogVGhlIGN1cnJlbnQgT25saW5lU3RhdGUuICovXG4gICAgICAgIHRoaXMuc3RhdGUgPSBcIlVua25vd25cIiAvKiBVbmtub3duICovICwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGNvdW50IG9mIGNvbnNlY3V0aXZlIGZhaWx1cmVzIHRvIG9wZW4gdGhlIHN0cmVhbS4gSWYgaXQgcmVhY2hlcyB0aGVcbiAgICAgICAgICogbWF4aW11bSBkZWZpbmVkIGJ5IE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMsIHdlJ2xsIHNldCB0aGUgT25saW5lU3RhdGUgdG9cbiAgICAgICAgICogT2ZmbGluZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuT3IgPSAwLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgdGltZXIgdGhhdCBlbGFwc2VzIGFmdGVyIE9OTElORV9TVEFURV9USU1FT1VUX01TLCBhdCB3aGljaCBwb2ludCB3ZVxuICAgICAgICAgKiB0cmFuc2l0aW9uIGZyb20gT25saW5lU3RhdGUuVW5rbm93biB0byBPbmxpbmVTdGF0ZS5PZmZsaW5lIHdpdGhvdXQgd2FpdGluZ1xuICAgICAgICAgKiBmb3IgdGhlIHN0cmVhbSB0byBhY3R1YWxseSBmYWlsIChNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTIHRpbWVzKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuTXIgPSBudWxsLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgdGhlIGNsaWVudCBzaG91bGQgbG9nIGEgd2FybmluZyBtZXNzYWdlIGlmIGl0IGZhaWxzIHRvIGNvbm5lY3QgdG9cbiAgICAgICAgICogdGhlIGJhY2tlbmQgKGluaXRpYWxseSB0cnVlLCBjbGVhcmVkIGFmdGVyIGEgc3VjY2Vzc2Z1bCBzdHJlYW0sIG9yIGlmIHdlJ3ZlXG4gICAgICAgICAqIGxvZ2dlZCB0aGUgbWVzc2FnZSBhbHJlYWR5KS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuTHIgPSAhMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIGJ5IFJlbW90ZVN0b3JlIHdoZW4gYSB3YXRjaCBzdHJlYW0gaXMgc3RhcnRlZCAoaW5jbHVkaW5nIG9uIGVhY2hcbiAgICAgKiBiYWNrb2ZmIGF0dGVtcHQpLlxuICAgICAqXG4gICAgICogSWYgdGhpcyBpcyB0aGUgZmlyc3QgYXR0ZW1wdCwgaXQgc2V0cyB0aGUgT25saW5lU3RhdGUgdG8gVW5rbm93biBhbmQgc3RhcnRzXG4gICAgICogdGhlIG9ubGluZVN0YXRlVGltZXIuXG4gICAgICovICAgIEJyKCkge1xuICAgICAgICAwID09PSB0aGlzLk9yICYmICh0aGlzLlVyKFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pLCB0aGlzLk1yID0gdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBZnRlckRlbGF5KFwib25saW5lX3N0YXRlX3RpbWVvdXRcIiAvKiBPbmxpbmVTdGF0ZVRpbWVvdXQgKi8gLCAxZTQsICgoKSA9PiAodGhpcy5NciA9IG51bGwsIFxuICAgICAgICB0aGlzLnFyKFwiQmFja2VuZCBkaWRuJ3QgcmVzcG9uZCB3aXRoaW4gMTAgc2Vjb25kcy5cIiksIHRoaXMuVXIoXCJPZmZsaW5lXCIgLyogT2ZmbGluZSAqLyksIFxuICAgICAgICBQcm9taXNlLnJlc29sdmUoKSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgb3VyIE9ubGluZVN0YXRlIGFzIGFwcHJvcHJpYXRlIGFmdGVyIHRoZSB3YXRjaCBzdHJlYW0gcmVwb3J0cyBhXG4gICAgICogZmFpbHVyZS4gVGhlIGZpcnN0IGZhaWx1cmUgbW92ZXMgdXMgdG8gdGhlICdVbmtub3duJyBzdGF0ZS4gV2UgdGhlbiBtYXlcbiAgICAgKiBhbGxvdyBtdWx0aXBsZSBmYWlsdXJlcyAoYmFzZWQgb24gTUFYX1dBVENIX1NUUkVBTV9GQUlMVVJFUykgYmVmb3JlIHdlXG4gICAgICogYWN0dWFsbHkgdHJhbnNpdGlvbiB0byB0aGUgJ09mZmxpbmUnIHN0YXRlLlxuICAgICAqLyAgICBLcih0KSB7XG4gICAgICAgIFwiT25saW5lXCIgLyogT25saW5lICovID09PSB0aGlzLnN0YXRlID8gdGhpcy5VcihcIlVua25vd25cIiAvKiBVbmtub3duICovKSA6ICh0aGlzLk9yKyssIFxuICAgICAgICB0aGlzLk9yID49IDEgJiYgKHRoaXMuanIoKSwgdGhpcy5xcihgQ29ubmVjdGlvbiBmYWlsZWQgMSB0aW1lcy4gTW9zdCByZWNlbnQgZXJyb3I6ICR7dC50b1N0cmluZygpfWApLCBcbiAgICAgICAgdGhpcy5VcihcIk9mZmxpbmVcIiAvKiBPZmZsaW5lICovKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFeHBsaWNpdGx5IHNldHMgdGhlIE9ubGluZVN0YXRlIHRvIHRoZSBzcGVjaWZpZWQgc3RhdGUuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgdGhpcyByZXNldHMgb3VyIHRpbWVycyAvIGZhaWx1cmUgY291bnRlcnMsIGV0Yy4gdXNlZCBieSBvdXJcbiAgICAgKiBPZmZsaW5lIGhldXJpc3RpY3MsIHNvIG11c3Qgbm90IGJlIHVzZWQgaW4gcGxhY2Ugb2ZcbiAgICAgKiBoYW5kbGVXYXRjaFN0cmVhbVN0YXJ0KCkgYW5kIGhhbmRsZVdhdGNoU3RyZWFtRmFpbHVyZSgpLlxuICAgICAqLyAgICBzZXQodCkge1xuICAgICAgICB0aGlzLmpyKCksIHRoaXMuT3IgPSAwLCBcIk9ubGluZVwiIC8qIE9ubGluZSAqLyA9PT0gdCAmJiAoXG4gICAgICAgIC8vIFdlJ3ZlIGNvbm5lY3RlZCB0byB3YXRjaCBhdCBsZWFzdCBvbmNlLiBEb24ndCB3YXJuIHRoZSBkZXZlbG9wZXJcbiAgICAgICAgLy8gYWJvdXQgYmVpbmcgb2ZmbGluZSBnb2luZyBmb3J3YXJkLlxuICAgICAgICB0aGlzLkxyID0gITEpLCB0aGlzLlVyKHQpO1xuICAgIH1cbiAgICBVcih0KSB7XG4gICAgICAgIHQgIT09IHRoaXMuc3RhdGUgJiYgKHRoaXMuc3RhdGUgPSB0LCB0aGlzLm9ubGluZVN0YXRlSGFuZGxlcih0KSk7XG4gICAgfVxuICAgIHFyKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IGBDb3VsZCBub3QgcmVhY2ggQ2xvdWQgRmlyZXN0b3JlIGJhY2tlbmQuICR7dH1cXG5UaGlzIHR5cGljYWxseSBpbmRpY2F0ZXMgdGhhdCB5b3VyIGRldmljZSBkb2VzIG5vdCBoYXZlIGEgaGVhbHRoeSBJbnRlcm5ldCBjb25uZWN0aW9uIGF0IHRoZSBtb21lbnQuIFRoZSBjbGllbnQgd2lsbCBvcGVyYXRlIGluIG9mZmxpbmUgbW9kZSB1bnRpbCBpdCBpcyBhYmxlIHRvIHN1Y2Nlc3NmdWxseSBjb25uZWN0IHRvIHRoZSBiYWNrZW5kLmA7XG4gICAgICAgIHRoaXMuTHIgPyAoRihlKSwgdGhpcy5MciA9ICExKSA6ICQoXCJPbmxpbmVTdGF0ZVRyYWNrZXJcIiwgZSk7XG4gICAgfVxuICAgIGpyKCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLk1yICYmICh0aGlzLk1yLmNhbmNlbCgpLCB0aGlzLk1yID0gbnVsbCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBhbyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIGxvY2FsIHN0b3JlLCB1c2VkIHRvIGZpbGwgdGhlIHdyaXRlIHBpcGVsaW5lIHdpdGggb3V0Ym91bmQgbXV0YXRpb25zLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKiBUaGUgY2xpZW50LXNpZGUgcHJveHkgZm9yIGludGVyYWN0aW5nIHdpdGggdGhlIGJhY2tlbmQuICovXG4gICAgZSwgbiwgcywgaSkge1xuICAgICAgICB0aGlzLmxvY2FsU3RvcmUgPSB0LCB0aGlzLmRhdGFzdG9yZSA9IGUsIHRoaXMuYXN5bmNRdWV1ZSA9IG4sIHRoaXMucmVtb3RlU3luY2VyID0ge30sIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBsaXN0IG9mIHVwIHRvIE1BWF9QRU5ESU5HX1dSSVRFUyB3cml0ZXMgdGhhdCB3ZSBoYXZlIGZldGNoZWQgZnJvbSB0aGVcbiAgICAgICAgICogTG9jYWxTdG9yZSB2aWEgZmlsbFdyaXRlUGlwZWxpbmUoKSBhbmQgaGF2ZSBvciB3aWxsIHNlbmQgdG8gdGhlIHdyaXRlXG4gICAgICAgICAqIHN0cmVhbS5cbiAgICAgICAgICpcbiAgICAgICAgICogV2hlbmV2ZXIgd3JpdGVQaXBlbGluZS5sZW5ndGggPiAwIHRoZSBSZW1vdGVTdG9yZSB3aWxsIGF0dGVtcHQgdG8gc3RhcnQgb3JcbiAgICAgICAgICogcmVzdGFydCB0aGUgd3JpdGUgc3RyZWFtLiBXaGVuIHRoZSBzdHJlYW0gaXMgZXN0YWJsaXNoZWQgdGhlIHdyaXRlcyBpbiB0aGVcbiAgICAgICAgICogcGlwZWxpbmUgd2lsbCBiZSBzZW50IGluIG9yZGVyLlxuICAgICAgICAgKlxuICAgICAgICAgKiBXcml0ZXMgcmVtYWluIGluIHdyaXRlUGlwZWxpbmUgdW50aWwgdGhleSBhcmUgYWNrbm93bGVkZ2VkIGJ5IHRoZSBiYWNrZW5kXG4gICAgICAgICAqIGFuZCB0aHVzIHdpbGwgYXV0b21hdGljYWxseSBiZSByZS1zZW50IGlmIHRoZSBzdHJlYW0gaXMgaW50ZXJydXB0ZWQgL1xuICAgICAgICAgKiByZXN0YXJ0ZWQgYmVmb3JlIHRoZXkncmUgYWNrbm93bGVkZ2VkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBXcml0ZSByZXNwb25zZXMgZnJvbSB0aGUgYmFja2VuZCBhcmUgbGlua2VkIHRvIHRoZWlyIG9yaWdpbmF0aW5nIHJlcXVlc3RcbiAgICAgICAgICogcHVyZWx5IGJhc2VkIG9uIG9yZGVyLCBhbmQgc28gd2UgY2FuIGp1c3Qgc2hpZnQoKSB3cml0ZXMgZnJvbSB0aGUgZnJvbnQgb2ZcbiAgICAgICAgICogdGhlIHdyaXRlUGlwZWxpbmUgYXMgd2UgcmVjZWl2ZSByZXNwb25zZXMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLlFyID0gW10sIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBtYXBwaW5nIG9mIHdhdGNoZWQgdGFyZ2V0cyB0aGF0IHRoZSBjbGllbnQgY2FyZXMgYWJvdXQgdHJhY2tpbmcgYW5kIHRoZVxuICAgICAgICAgKiB1c2VyIGhhcyBleHBsaWNpdGx5IGNhbGxlZCBhICdsaXN0ZW4nIGZvciB0aGlzIHRhcmdldC5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlc2UgdGFyZ2V0cyBtYXkgb3IgbWF5IG5vdCBoYXZlIGJlZW4gc2VudCB0byBvciBhY2tub3dsZWRnZWQgYnkgdGhlXG4gICAgICAgICAqIHNlcnZlci4gT24gcmUtZXN0YWJsaXNoaW5nIHRoZSBsaXN0ZW4gc3RyZWFtLCB0aGVzZSB0YXJnZXRzIHNob3VsZCBiZSBzZW50XG4gICAgICAgICAqIHRvIHRoZSBzZXJ2ZXIuIFRoZSB0YXJnZXRzIHJlbW92ZWQgd2l0aCB1bmxpc3RlbnMgYXJlIHJlbW92ZWQgZWFnZXJseVxuICAgICAgICAgKiB3aXRob3V0IHdhaXRpbmcgZm9yIGNvbmZpcm1hdGlvbiBmcm9tIHRoZSBsaXN0ZW4gc3RyZWFtLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5XciA9IG5ldyBNYXAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBzZXQgb2YgcmVhc29ucyBmb3Igd2h5IHRoZSBSZW1vdGVTdG9yZSBtYXkgYmUgb2ZmbGluZS4gSWYgZW1wdHksIHRoZVxuICAgICAgICAgKiBSZW1vdGVTdG9yZSBtYXkgc3RhcnQgaXRzIG5ldHdvcmsgY29ubmVjdGlvbnMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkdyID0gbmV3IFNldCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFdmVudCBoYW5kbGVycyB0aGF0IGdldCBjYWxsZWQgd2hlbiB0aGUgbmV0d29yayBpcyBkaXNhYmxlZCBvciBlbmFibGVkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBQT1JUSU5HIE5PVEU6IFRoZXNlIGZ1bmN0aW9ucyBhcmUgdXNlZCBvbiB0aGUgV2ViIGNsaWVudCB0byBjcmVhdGUgdGhlXG4gICAgICAgICAqIHVuZGVybHlpbmcgc3RyZWFtcyAodG8gc3VwcG9ydCB0cmVlLXNoYWtlYWJsZSBzdHJlYW1zKS4gT24gQW5kcm9pZCBhbmQgaU9TLFxuICAgICAgICAgKiB0aGUgc3RyZWFtcyBhcmUgY3JlYXRlZCBkdXJpbmcgY29uc3RydWN0aW9uIG9mIFJlbW90ZVN0b3JlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy56ciA9IFtdLCB0aGlzLkhyID0gaSwgdGhpcy5Ici5FaSgodCA9PiB7XG4gICAgICAgICAgICBuLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBQb3J0aW5nIE5vdGU6IFVubGlrZSBpT1MsIGByZXN0YXJ0TmV0d29yaygpYCBpcyBjYWxsZWQgZXZlbiB3aGVuIHRoZVxuICAgICAgICAgICAgICAgIC8vIG5ldHdvcmsgYmVjb21lcyB1bnJlYWNoYWJsZSBhcyB3ZSBkb24ndCBoYXZlIGFueSBvdGhlciB3YXkgdG8gdGVhclxuICAgICAgICAgICAgICAgIC8vIGRvd24gb3VyIHN0cmVhbXMuXG4gICAgICAgICAgICAgICAgZ28odGhpcykgJiYgKCQoXCJSZW1vdGVTdG9yZVwiLCBcIlJlc3RhcnRpbmcgc3RyZWFtcyBmb3IgbmV0d29yayByZWFjaGFiaWxpdHkgY2hhbmdlLlwiKSwgXG4gICAgICAgICAgICAgICAgYXdhaXQgYXN5bmMgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gcSh0KTtcbiAgICAgICAgICAgICAgICAgICAgZS5Hci5hZGQoNCAvKiBDb25uZWN0aXZpdHlDaGFuZ2UgKi8pLCBhd2FpdCB1byhlKSwgZS5Kci5zZXQoXCJVbmtub3duXCIgLyogVW5rbm93biAqLyksIFxuICAgICAgICAgICAgICAgICAgICBlLkdyLmRlbGV0ZSg0IC8qIENvbm5lY3Rpdml0eUNoYW5nZSAqLyksIGF3YWl0IGNvKGUpO1xuICAgICAgICAgICAgICAgIH0odGhpcykpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSksIHRoaXMuSnIgPSBuZXcgb28obiwgcyk7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBjbyh0KSB7XG4gICAgaWYgKGdvKHQpKSBmb3IgKGNvbnN0IGUgb2YgdC56cikgYXdhaXQgZSgvKiBlbmFibGVkPSAqLyAhMCk7XG59XG5cbi8qKlxuICogVGVtcG9yYXJpbHkgZGlzYWJsZXMgdGhlIG5ldHdvcmsuIFRoZSBuZXR3b3JrIGNhbiBiZSByZS1lbmFibGVkIHVzaW5nXG4gKiBlbmFibGVOZXR3b3JrKCkuXG4gKi8gYXN5bmMgZnVuY3Rpb24gdW8odCkge1xuICAgIGZvciAoY29uc3QgZSBvZiB0LnpyKSBhd2FpdCBlKC8qIGVuYWJsZWQ9ICovICExKTtcbn1cblxuLyoqXG4gKiBTdGFydHMgbmV3IGxpc3RlbiBmb3IgdGhlIGdpdmVuIHRhcmdldC4gVXNlcyByZXN1bWUgdG9rZW4gaWYgcHJvdmlkZWQuIEl0XG4gKiBpcyBhIG5vLW9wIGlmIHRoZSB0YXJnZXQgb2YgZ2l2ZW4gYFRhcmdldERhdGFgIGlzIGFscmVhZHkgYmVpbmcgbGlzdGVuZWQgdG8uXG4gKi9cbmZ1bmN0aW9uIGhvKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KTtcbiAgICBuLldyLmhhcyhlLnRhcmdldElkKSB8fCAoXG4gICAgLy8gTWFyayB0aGlzIGFzIHNvbWV0aGluZyB0aGUgY2xpZW50IGlzIGN1cnJlbnRseSBsaXN0ZW5pbmcgZm9yLlxuICAgIG4uV3Iuc2V0KGUudGFyZ2V0SWQsIGUpLCBtbyhuKSA/IFxuICAgIC8vIFRoZSBsaXN0ZW4gd2lsbCBiZSBzZW50IGluIG9uV2F0Y2hTdHJlYW1PcGVuXG4gICAgX28obikgOiB4byhuKS5scigpICYmIGZvKG4sIGUpKTtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIHRoZSBsaXN0ZW4gZnJvbSBzZXJ2ZXIuIEl0IGlzIGEgbm8tb3AgaWYgdGhlIGdpdmVuIHRhcmdldCBpZCBpc1xuICogbm90IGJlaW5nIGxpc3RlbmVkIHRvLlxuICovIGZ1bmN0aW9uIGxvKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KSwgcyA9IHhvKG4pO1xuICAgIG4uV3IuZGVsZXRlKGUpLCBzLmxyKCkgJiYgd28obiwgZSksIDAgPT09IG4uV3Iuc2l6ZSAmJiAocy5scigpID8gcy5fcigpIDogZ28obikgJiYgXG4gICAgLy8gUmV2ZXJ0IHRvIE9ubGluZVN0YXRlLlVua25vd24gaWYgdGhlIHdhdGNoIHN0cmVhbSBpcyBub3Qgb3BlbiBhbmQgd2VcbiAgICAvLyBoYXZlIG5vIGxpc3RlbmVycywgc2luY2Ugd2l0aG91dCBhbnkgbGlzdGVucyB0byBzZW5kIHdlIGNhbm5vdFxuICAgIC8vIGNvbmZpcm0gaWYgdGhlIHN0cmVhbSBpcyBoZWFsdGh5IGFuZCB1cGdyYWRlIHRvIE9ubGluZVN0YXRlLk9ubGluZS5cbiAgICBuLkpyLnNldChcIlVua25vd25cIiAvKiBVbmtub3duICovKSk7XG59XG5cbi8qKlxuICogV2UgbmVlZCB0byBpbmNyZW1lbnQgdGhlIHRoZSBleHBlY3RlZCBudW1iZXIgb2YgcGVuZGluZyByZXNwb25zZXMgd2UncmUgZHVlXG4gKiBmcm9tIHdhdGNoIHNvIHdlIHdhaXQgZm9yIHRoZSBhY2sgdG8gcHJvY2VzcyBhbnkgbWVzc2FnZXMgZnJvbSB0aGlzIHRhcmdldC5cbiAqLyBmdW5jdGlvbiBmbyh0LCBlKSB7XG4gICAgdC5Zci5YKGUudGFyZ2V0SWQpLCB4byh0KS5icihlKTtcbn1cblxuLyoqXG4gKiBXZSBuZWVkIHRvIGluY3JlbWVudCB0aGUgZXhwZWN0ZWQgbnVtYmVyIG9mIHBlbmRpbmcgcmVzcG9uc2VzIHdlJ3JlIGR1ZVxuICogZnJvbSB3YXRjaCBzbyB3ZSB3YWl0IGZvciB0aGUgcmVtb3ZhbCBvbiB0aGUgc2VydmVyIGJlZm9yZSB3ZSBwcm9jZXNzIGFueVxuICogbWVzc2FnZXMgZnJvbSB0aGlzIHRhcmdldC5cbiAqLyBmdW5jdGlvbiB3byh0LCBlKSB7XG4gICAgdC5Zci5YKGUpLCB4byh0KS52cihlKTtcbn1cblxuZnVuY3Rpb24gX28odCkge1xuICAgIHQuWXIgPSBuZXcgTW4oe1xuICAgICAgICBnZXRSZW1vdGVLZXlzRm9yVGFyZ2V0OiBlID0+IHQucmVtb3RlU3luY2VyLmdldFJlbW90ZUtleXNGb3JUYXJnZXQoZSksXG4gICAgICAgIEV0OiBlID0+IHQuV3IuZ2V0KGUpIHx8IG51bGxcbiAgICB9KSwgeG8odCkuc3RhcnQoKSwgdC5Kci5CcigpO1xufVxuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciB0aGUgd2F0Y2ggc3RyZWFtIHNob3VsZCBiZSBzdGFydGVkIGJlY2F1c2UgaXQncyBuZWNlc3NhcnlcbiAqIGFuZCBoYXMgbm90IHlldCBiZWVuIHN0YXJ0ZWQuXG4gKi8gZnVuY3Rpb24gbW8odCkge1xuICAgIHJldHVybiBnbyh0KSAmJiAheG8odCkuaHIoKSAmJiB0LldyLnNpemUgPiAwO1xufVxuXG5mdW5jdGlvbiBnbyh0KSB7XG4gICAgcmV0dXJuIDAgPT09IHEodCkuR3Iuc2l6ZTtcbn1cblxuZnVuY3Rpb24geW8odCkge1xuICAgIHQuWXIgPSB2b2lkIDA7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHBvKHQpIHtcbiAgICB0LldyLmZvckVhY2goKChlLCBuKSA9PiB7XG4gICAgICAgIGZvKHQsIGUpO1xuICAgIH0pKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gVG8odCwgZSkge1xuICAgIHlvKHQpLCBcbiAgICAvLyBJZiB3ZSBzdGlsbCBuZWVkIHRoZSB3YXRjaCBzdHJlYW0sIHJldHJ5IHRoZSBjb25uZWN0aW9uLlxuICAgIG1vKHQpID8gKHQuSnIuS3IoZSksIF9vKHQpKSA6IFxuICAgIC8vIE5vIG5lZWQgdG8gcmVzdGFydCB3YXRjaCBzdHJlYW0gYmVjYXVzZSB0aGVyZSBhcmUgbm8gYWN0aXZlIHRhcmdldHMuXG4gICAgLy8gVGhlIG9ubGluZSBzdGF0ZSBpcyBzZXQgdG8gdW5rbm93biBiZWNhdXNlIHRoZXJlIGlzIG5vIGFjdGl2ZSBhdHRlbXB0XG4gICAgLy8gYXQgZXN0YWJsaXNoaW5nIGEgY29ubmVjdGlvblxuICAgIHQuSnIuc2V0KFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pO1xufVxuXG5hc3luYyBmdW5jdGlvbiBFbyh0LCBlLCBuKSB7XG4gICAgaWYgKFxuICAgIC8vIE1hcmsgdGhlIGNsaWVudCBhcyBvbmxpbmUgc2luY2Ugd2UgZ290IGEgbWVzc2FnZSBmcm9tIHRoZSBzZXJ2ZXJcbiAgICB0LkpyLnNldChcIk9ubGluZVwiIC8qIE9ubGluZSAqLyksIGUgaW5zdGFuY2VvZiBGbiAmJiAyIC8qIFJlbW92ZWQgKi8gPT09IGUuc3RhdGUgJiYgZS5jYXVzZSkgXG4gICAgLy8gVGhlcmUgd2FzIGFuIGVycm9yIG9uIGEgdGFyZ2V0LCBkb24ndCB3YWl0IGZvciBhIGNvbnNpc3RlbnQgc25hcHNob3RcbiAgICAvLyB0byByYWlzZSBldmVudHNcbiAgICB0cnkge1xuICAgICAgICBhd2FpdCBcbiAgICAgICAgLyoqIEhhbmRsZXMgYW4gZXJyb3Igb24gYSB0YXJnZXQgKi9cbiAgICAgICAgYXN5bmMgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IGUuY2F1c2U7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHMgb2YgZS50YXJnZXRJZHMpIFxuICAgICAgICAgICAgLy8gQSB3YXRjaGVkIHRhcmdldCBtaWdodCBoYXZlIGJlZW4gcmVtb3ZlZCBhbHJlYWR5LlxuICAgICAgICAgICAgdC5Xci5oYXMocykgJiYgKGF3YWl0IHQucmVtb3RlU3luY2VyLnJlamVjdExpc3RlbihzLCBuKSwgdC5Xci5kZWxldGUocyksIHQuWXIucmVtb3ZlVGFyZ2V0KHMpKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEF0dGVtcHRzIHRvIGZpbGwgb3VyIHdyaXRlIHBpcGVsaW5lIHdpdGggd3JpdGVzIGZyb20gdGhlIExvY2FsU3RvcmUuXG4gKlxuICogQ2FsbGVkIGludGVybmFsbHkgdG8gYm9vdHN0cmFwIG9yIHJlZmlsbCB0aGUgd3JpdGUgcGlwZWxpbmUgYW5kIGJ5XG4gKiBTeW5jRW5naW5lIHdoZW5ldmVyIHRoZXJlIGFyZSBuZXcgbXV0YXRpb25zIHRvIHByb2Nlc3MuXG4gKlxuICogU3RhcnRzIHRoZSB3cml0ZSBzdHJlYW0gaWYgbmVjZXNzYXJ5LlxuICovICh0LCBlKTtcbiAgICB9IGNhdGNoIChuKSB7XG4gICAgICAgICQoXCJSZW1vdGVTdG9yZVwiLCBcIkZhaWxlZCB0byByZW1vdmUgdGFyZ2V0cyAlczogJXMgXCIsIGUudGFyZ2V0SWRzLmpvaW4oXCIsXCIpLCBuKSwgXG4gICAgICAgIGF3YWl0IElvKHQsIG4pO1xuICAgIH0gZWxzZSBpZiAoZSBpbnN0YW5jZW9mIHhuID8gdC5Zci5vdChlKSA6IGUgaW5zdGFuY2VvZiAkbiA/IHQuWXIuZHQoZSkgOiB0LllyLnV0KGUpLCBcbiAgICAhbi5pc0VxdWFsKGN0Lm1pbigpKSkgdHJ5IHtcbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IF9yKHQubG9jYWxTdG9yZSk7XG4gICAgICAgIG4uY29tcGFyZVRvKGUpID49IDAgJiYgXG4gICAgICAgIC8vIFdlIGhhdmUgcmVjZWl2ZWQgYSB0YXJnZXQgY2hhbmdlIHdpdGggYSBnbG9iYWwgc25hcHNob3QgaWYgdGhlIHNuYXBzaG90XG4gICAgICAgIC8vIHZlcnNpb24gaXMgbm90IGVxdWFsIHRvIFNuYXBzaG90VmVyc2lvbi5taW4oKS5cbiAgICAgICAgYXdhaXQgXG4gICAgICAgIC8qKlxuICogVGFrZXMgYSBiYXRjaCBvZiBjaGFuZ2VzIGZyb20gdGhlIERhdGFzdG9yZSwgcmVwYWNrYWdlcyB0aGVtIGFzIGFcbiAqIFJlbW90ZUV2ZW50LCBhbmQgcGFzc2VzIHRoYXQgb24gdG8gdGhlIGxpc3RlbmVyLCB3aGljaCBpcyB0eXBpY2FsbHkgdGhlXG4gKiBTeW5jRW5naW5lLlxuICovXG4gICAgICAgIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LllyLmd0KGUpO1xuICAgICAgICAgICAgLy8gVXBkYXRlIGluLW1lbW9yeSByZXN1bWUgdG9rZW5zLiBMb2NhbFN0b3JlIHdpbGwgdXBkYXRlIHRoZVxuICAgICAgICAgICAgLy8gcGVyc2lzdGVudCB2aWV3IG9mIHRoZXNlIHdoZW4gYXBwbHlpbmcgdGhlIGNvbXBsZXRlZCBSZW1vdGVFdmVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLnRhcmdldENoYW5nZXMuZm9yRWFjaCgoKG4sIHMpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobi5yZXN1bWVUb2tlbi5hcHByb3hpbWF0ZUJ5dGVTaXplKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGkgPSB0LldyLmdldChzKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQSB3YXRjaGVkIHRhcmdldCBtaWdodCBoYXZlIGJlZW4gcmVtb3ZlZCBhbHJlYWR5LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgJiYgdC5Xci5zZXQocywgaS53aXRoUmVzdW1lVG9rZW4obi5yZXN1bWVUb2tlbiwgZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKSwgXG4gICAgICAgICAgICAvLyBSZS1lc3RhYmxpc2ggbGlzdGVucyBmb3IgdGhlIHRhcmdldHMgdGhhdCBoYXZlIGJlZW4gaW52YWxpZGF0ZWQgYnlcbiAgICAgICAgICAgIC8vIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2hlcy5cbiAgICAgICAgICAgIG4udGFyZ2V0TWlzbWF0Y2hlcy5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gdC5Xci5nZXQoZSk7XG4gICAgICAgICAgICAgICAgaWYgKCFuKSBcbiAgICAgICAgICAgICAgICAvLyBBIHdhdGNoZWQgdGFyZ2V0IG1pZ2h0IGhhdmUgYmVlbiByZW1vdmVkIGFscmVhZHkuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIC8vIENsZWFyIHRoZSByZXN1bWUgdG9rZW4gZm9yIHRoZSB0YXJnZXQsIHNpbmNlIHdlJ3JlIGluIGEga25vd24gbWlzbWF0Y2hcbiAgICAgICAgICAgICAgICAvLyBzdGF0ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5Xci5zZXQoZSwgbi53aXRoUmVzdW1lVG9rZW4oeXQuRU1QVFlfQllURV9TVFJJTkcsIG4uc25hcHNob3RWZXJzaW9uKSksIFxuICAgICAgICAgICAgICAgIC8vIENhdXNlIGEgaGFyZCByZXNldCBieSB1bndhdGNoaW5nIGFuZCByZXdhdGNoaW5nIGltbWVkaWF0ZWx5LCBidXRcbiAgICAgICAgICAgICAgICAvLyBkZWxpYmVyYXRlbHkgZG9uJ3Qgc2VuZCBhIHJlc3VtZSB0b2tlbiBzbyB0aGF0IHdlIGdldCBhIGZ1bGwgdXBkYXRlLlxuICAgICAgICAgICAgICAgIHdvKHQsIGUpO1xuICAgICAgICAgICAgICAgIC8vIE1hcmsgdGhlIHRhcmdldCB3ZSBzZW5kIGFzIGJlaW5nIG9uIGJlaGFsZiBvZiBhbiBleGlzdGVuY2UgZmlsdGVyXG4gICAgICAgICAgICAgICAgLy8gbWlzbWF0Y2gsIGJ1dCBkb24ndCBhY3R1YWxseSByZXRhaW4gdGhhdCBpbiBsaXN0ZW5UYXJnZXRzLiBUaGlzIGVuc3VyZXNcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHdlIGZsYWcgdGhlIGZpcnN0IHJlLWxpc3RlbiB0aGlzIHdheSB3aXRob3V0IGltcGFjdGluZyBmdXR1cmVcbiAgICAgICAgICAgICAgICAvLyBsaXN0ZW5zIG9mIHRoaXMgdGFyZ2V0ICh0aGF0IG1pZ2h0IGhhcHBlbiBlLmcuIG9uIHJlY29ubmVjdCkuXG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IG5ldyBhaShuLnRhcmdldCwgZSwgMSAvKiBFeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaCAqLyAsIG4uc2VxdWVuY2VOdW1iZXIpO1xuICAgICAgICAgICAgICAgIGZvKHQsIHMpO1xuICAgICAgICAgICAgfSkpLCB0LnJlbW90ZVN5bmNlci5hcHBseVJlbW90ZUV2ZW50KG4pO1xuICAgICAgICB9KHQsIG4pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgJChcIlJlbW90ZVN0b3JlXCIsIFwiRmFpbGVkIHRvIHJhaXNlIHNuYXBzaG90OlwiLCBlKSwgYXdhaXQgSW8odCwgZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlY292ZXJ5IGxvZ2ljIGZvciBJbmRleGVkREIgZXJyb3JzIHRoYXQgdGFrZXMgdGhlIG5ldHdvcmsgb2ZmbGluZSB1bnRpbFxuICogYG9wYCBzdWNjZWVkcy4gUmV0cmllcyBhcmUgc2NoZWR1bGVkIHdpdGggYmFja29mZiB1c2luZ1xuICogYGVucXVldWVSZXRyeWFibGUoKWAuIElmIGBvcCgpYCBpcyBub3QgcHJvdmlkZWQsIEluZGV4ZWREQiBhY2Nlc3MgaXNcbiAqIHZhbGlkYXRlZCB2aWEgYSBnZW5lcmljIG9wZXJhdGlvbi5cbiAqXG4gKiBUaGUgcmV0dXJuZWQgUHJvbWlzZSBpcyByZXNvbHZlZCBvbmNlIHRoZSBuZXR3b3JrIGlzIGRpc2FibGVkIGFuZCBiZWZvcmVcbiAqIGFueSByZXRyeSBhdHRlbXB0LlxuICovIGFzeW5jIGZ1bmN0aW9uIElvKHQsIGUsIG4pIHtcbiAgICBpZiAoIVhzKGUpKSB0aHJvdyBlO1xuICAgIHQuR3IuYWRkKDEgLyogSW5kZXhlZERiRmFpbGVkICovKSwgXG4gICAgLy8gRGlzYWJsZSBuZXR3b3JrIGFuZCByYWlzZSBvZmZsaW5lIHNuYXBzaG90c1xuICAgIGF3YWl0IHVvKHQpLCB0LkpyLnNldChcIk9mZmxpbmVcIiAvKiBPZmZsaW5lICovKSwgbiB8fCAoXG4gICAgLy8gVXNlIGEgc2ltcGxlIHJlYWQgb3BlcmF0aW9uIHRvIGRldGVybWluZSBpZiBJbmRleGVkREIgcmVjb3ZlcmVkLlxuICAgIC8vIElkZWFsbHksIHdlIHdvdWxkIGV4cG9zZSBhIGhlYWx0aCBjaGVjayBkaXJlY3RseSBvbiBTaW1wbGVEYiwgYnV0XG4gICAgLy8gUmVtb3RlU3RvcmUgb25seSBoYXMgYWNjZXNzIHRvIHBlcnNpc3RlbmNlIHRocm91Z2ggTG9jYWxTdG9yZS5cbiAgICBuID0gKCkgPT4gX3IodC5sb2NhbFN0b3JlKSksIFxuICAgIC8vIFByb2JlIEluZGV4ZWREQiBwZXJpb2RpY2FsbHkgYW5kIHJlLWVuYWJsZSBuZXR3b3JrXG4gICAgdC5hc3luY1F1ZXVlLmVucXVldWVSZXRyeWFibGUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgJChcIlJlbW90ZVN0b3JlXCIsIFwiUmV0cnlpbmcgSW5kZXhlZERCIGFjY2Vzc1wiKSwgYXdhaXQgbigpLCB0LkdyLmRlbGV0ZSgxIC8qIEluZGV4ZWREYkZhaWxlZCAqLyksIFxuICAgICAgICBhd2FpdCBjbyh0KTtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogRXhlY3V0ZXMgYG9wYC4gSWYgYG9wYCBmYWlscywgdGFrZXMgdGhlIG5ldHdvcmsgb2ZmbGluZSB1bnRpbCBgb3BgXG4gKiBzdWNjZWVkcy4gUmV0dXJucyBhZnRlciB0aGUgZmlyc3QgYXR0ZW1wdC5cbiAqLyBmdW5jdGlvbiBBbyh0LCBlKSB7XG4gICAgcmV0dXJuIGUoKS5jYXRjaCgobiA9PiBJbyh0LCBuLCBlKSkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBSbyh0KSB7XG4gICAgY29uc3QgZSA9IHEodCksIG4gPSAkbyhlKTtcbiAgICBsZXQgcyA9IGUuUXIubGVuZ3RoID4gMCA/IGUuUXJbZS5Rci5sZW5ndGggLSAxXS5iYXRjaElkIDogLTE7XG4gICAgZm9yICg7UG8oZSk7ICkgdHJ5IHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IHlyKGUubG9jYWxTdG9yZSwgcyk7XG4gICAgICAgIGlmIChudWxsID09PSB0KSB7XG4gICAgICAgICAgICAwID09PSBlLlFyLmxlbmd0aCAmJiBuLl9yKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBzID0gdC5iYXRjaElkLCBibyhlLCB0KTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIGF3YWl0IElvKGUsIHQpO1xuICAgIH1cbiAgICB2byhlKSAmJiBWbyhlKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgd2UgY2FuIGFkZCB0byB0aGUgd3JpdGUgcGlwZWxpbmUgKGkuZS4gdGhlIG5ldHdvcmsgaXNcbiAqIGVuYWJsZWQgYW5kIHRoZSB3cml0ZSBwaXBlbGluZSBpcyBub3QgZnVsbCkuXG4gKi8gZnVuY3Rpb24gUG8odCkge1xuICAgIHJldHVybiBnbyh0KSAmJiB0LlFyLmxlbmd0aCA8IDEwO1xufVxuXG4vKipcbiAqIFF1ZXVlcyBhZGRpdGlvbmFsIHdyaXRlcyB0byBiZSBzZW50IHRvIHRoZSB3cml0ZSBzdHJlYW0sIHNlbmRpbmcgdGhlbVxuICogaW1tZWRpYXRlbHkgaWYgdGhlIHdyaXRlIHN0cmVhbSBpcyBlc3RhYmxpc2hlZC5cbiAqLyBmdW5jdGlvbiBibyh0LCBlKSB7XG4gICAgdC5Rci5wdXNoKGUpO1xuICAgIGNvbnN0IG4gPSAkbyh0KTtcbiAgICBuLmxyKCkgJiYgbi5TciAmJiBuLkRyKGUubXV0YXRpb25zKTtcbn1cblxuZnVuY3Rpb24gdm8odCkge1xuICAgIHJldHVybiBnbyh0KSAmJiAhJG8odCkuaHIoKSAmJiB0LlFyLmxlbmd0aCA+IDA7XG59XG5cbmZ1bmN0aW9uIFZvKHQpIHtcbiAgICAkbyh0KS5zdGFydCgpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBTbyh0KSB7XG4gICAgJG8odCkua3IoKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gRG8odCkge1xuICAgIGNvbnN0IGUgPSAkbyh0KTtcbiAgICAvLyBTZW5kIHRoZSB3cml0ZSBwaXBlbGluZSBub3cgdGhhdCB0aGUgc3RyZWFtIGlzIGVzdGFibGlzaGVkLlxuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdC5RcikgZS5EcihuLm11dGF0aW9ucyk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIENvKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gdC5Rci5zaGlmdCgpLCBpID0gb2kuZnJvbShzLCBlLCBuKTtcbiAgICBhd2FpdCBBbyh0LCAoKCkgPT4gdC5yZW1vdGVTeW5jZXIuYXBwbHlTdWNjZXNzZnVsV3JpdGUoaSkpKSwgXG4gICAgLy8gSXQncyBwb3NzaWJsZSB0aGF0IHdpdGggdGhlIGNvbXBsZXRpb24gb2YgdGhpcyBtdXRhdGlvbiBhbm90aGVyXG4gICAgLy8gc2xvdCBoYXMgZnJlZWQgdXAuXG4gICAgYXdhaXQgUm8odCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIE5vKHQsIGUpIHtcbiAgICAvLyBJZiB0aGUgd3JpdGUgc3RyZWFtIGNsb3NlZCBhZnRlciB0aGUgd3JpdGUgaGFuZHNoYWtlIGNvbXBsZXRlcywgYSB3cml0ZVxuICAgIC8vIG9wZXJhdGlvbiBmYWlsZWQgYW5kIHdlIGZhaWwgdGhlIHBlbmRpbmcgb3BlcmF0aW9uLlxuICAgIGUgJiYgJG8odCkuU3IgJiYgXG4gICAgLy8gVGhpcyBlcnJvciBhZmZlY3RzIHRoZSBhY3R1YWwgd3JpdGUuXG4gICAgYXdhaXQgYXN5bmMgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAvLyBPbmx5IGhhbmRsZSBwZXJtYW5lbnQgZXJyb3JzIGhlcmUuIElmIGl0J3MgdHJhbnNpZW50LCBqdXN0IGxldCB0aGUgcmV0cnlcbiAgICAgICAgLy8gbG9naWMga2ljayBpbi5cbiAgICAgICAgaWYgKG4gPSBlLmNvZGUsIF9uKG4pICYmIG4gIT09IEsuQUJPUlRFRCkge1xuICAgICAgICAgICAgLy8gVGhpcyB3YXMgYSBwZXJtYW5lbnQgZXJyb3IsIHRoZSByZXF1ZXN0IGl0c2VsZiB3YXMgdGhlIHByb2JsZW1cbiAgICAgICAgICAgIC8vIHNvIGl0J3Mgbm90IGdvaW5nIHRvIHN1Y2NlZWQgaWYgd2UgcmVzZW5kIGl0LlxuICAgICAgICAgICAgY29uc3QgbiA9IHQuUXIuc2hpZnQoKTtcbiAgICAgICAgICAgIC8vIEluIHRoaXMgY2FzZSBpdCdzIGFsc28gdW5saWtlbHkgdGhhdCB0aGUgc2VydmVyIGl0c2VsZiBpcyBtZWx0aW5nXG4gICAgICAgICAgICAvLyBkb3duIC0tIHRoaXMgd2FzIGp1c3QgYSBiYWQgcmVxdWVzdCBzbyBpbmhpYml0IGJhY2tvZmYgb24gdGhlIG5leHRcbiAgICAgICAgICAgIC8vIHJlc3RhcnQuXG4gICAgICAgICAgICAgICAgICAgICAgICAkbyh0KS53cigpLCBhd2FpdCBBbyh0LCAoKCkgPT4gdC5yZW1vdGVTeW5jZXIucmVqZWN0RmFpbGVkV3JpdGUobi5iYXRjaElkLCBlKSkpLCBcbiAgICAgICAgICAgIC8vIEl0J3MgcG9zc2libGUgdGhhdCB3aXRoIHRoZSBjb21wbGV0aW9uIG9mIHRoaXMgbXV0YXRpb25cbiAgICAgICAgICAgIC8vIGFub3RoZXIgc2xvdCBoYXMgZnJlZWQgdXAuXG4gICAgICAgICAgICBhd2FpdCBSbyh0KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbjtcbiAgICB9KHQsIGUpLCBcbiAgICAvLyBUaGUgd3JpdGUgc3RyZWFtIG1pZ2h0IGhhdmUgYmVlbiBzdGFydGVkIGJ5IHJlZmlsbGluZyB0aGUgd3JpdGVcbiAgICAvLyBwaXBlbGluZSBmb3IgZmFpbGVkIHdyaXRlc1xuICAgIHZvKHQpICYmIFZvKHQpO1xufVxuXG4vKipcbiAqIFRvZ2dsZXMgdGhlIG5ldHdvcmsgc3RhdGUgd2hlbiB0aGUgY2xpZW50IGdhaW5zIG9yIGxvc2VzIGl0cyBwcmltYXJ5IGxlYXNlLlxuICovXG5hc3luYyBmdW5jdGlvbiBrbyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IHEodCk7XG4gICAgZSA/IChuLkdyLmRlbGV0ZSgyIC8qIElzU2Vjb25kYXJ5ICovKSwgYXdhaXQgY28obikpIDogZSB8fCAobi5Hci5hZGQoMiAvKiBJc1NlY29uZGFyeSAqLyksIFxuICAgIGF3YWl0IHVvKG4pLCBuLkpyLnNldChcIlVua25vd25cIiAvKiBVbmtub3duICovKSk7XG59XG5cbi8qKlxuICogSWYgbm90IHlldCBpbml0aWFsaXplZCwgcmVnaXN0ZXJzIHRoZSBXYXRjaFN0cmVhbSBhbmQgaXRzIG5ldHdvcmsgc3RhdGVcbiAqIGNhbGxiYWNrIHdpdGggYHJlbW90ZVN0b3JlSW1wbGAuIFJldHVybnMgdGhlIGV4aXN0aW5nIHN0cmVhbSBpZiBvbmUgaXNcbiAqIGFscmVhZHkgYXZhaWxhYmxlLlxuICpcbiAqIFBPUlRJTkcgTk9URTogT24gaU9TIGFuZCBBbmRyb2lkLCB0aGUgV2F0Y2hTdHJlYW0gZ2V0cyByZWdpc3RlcmVkIG9uIHN0YXJ0dXAuXG4gKiBUaGlzIGlzIG5vdCBkb25lIG9uIFdlYiB0byBhbGxvdyBpdCB0byBiZSB0cmVlLXNoYWtlbi5cbiAqLyBmdW5jdGlvbiB4byh0KSB7XG4gICAgcmV0dXJuIHQuWHIgfHwgKFxuICAgIC8vIENyZWF0ZSBzdHJlYW0gKGJ1dCBub3RlIHRoYXQgaXQgaXMgbm90IHN0YXJ0ZWQgeWV0KS5cbiAgICB0LlhyID0gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gcSh0KTtcbiAgICAgICAgcmV0dXJuIHMuRnIoKSwgbmV3IHNvKGUsIHMuaXIsIHMuYXV0aENyZWRlbnRpYWxzLCBzLmFwcENoZWNrQ3JlZGVudGlhbHMsIHMuaywgbik7XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovICh0LmRhdGFzdG9yZSwgdC5hc3luY1F1ZXVlLCB7XG4gICAgICAgIERpOiBwby5iaW5kKG51bGwsIHQpLFxuICAgICAgICBOaTogVG8uYmluZChudWxsLCB0KSxcbiAgICAgICAgUHI6IEVvLmJpbmQobnVsbCwgdClcbiAgICB9KSwgdC56ci5wdXNoKChhc3luYyBlID0+IHtcbiAgICAgICAgZSA/ICh0LlhyLndyKCksIG1vKHQpID8gX28odCkgOiB0LkpyLnNldChcIlVua25vd25cIiAvKiBVbmtub3duICovKSkgOiAoYXdhaXQgdC5Yci5zdG9wKCksIFxuICAgICAgICB5byh0KSk7XG4gICAgfSkpKSwgdC5Ycjtcbn1cblxuLyoqXG4gKiBJZiBub3QgeWV0IGluaXRpYWxpemVkLCByZWdpc3RlcnMgdGhlIFdyaXRlU3RyZWFtIGFuZCBpdHMgbmV0d29yayBzdGF0ZVxuICogY2FsbGJhY2sgd2l0aCBgcmVtb3RlU3RvcmVJbXBsYC4gUmV0dXJucyB0aGUgZXhpc3Rpbmcgc3RyZWFtIGlmIG9uZSBpc1xuICogYWxyZWFkeSBhdmFpbGFibGUuXG4gKlxuICogUE9SVElORyBOT1RFOiBPbiBpT1MgYW5kIEFuZHJvaWQsIHRoZSBXcml0ZVN0cmVhbSBnZXRzIHJlZ2lzdGVyZWQgb24gc3RhcnR1cC5cbiAqIFRoaXMgaXMgbm90IGRvbmUgb24gV2ViIHRvIGFsbG93IGl0IHRvIGJlIHRyZWUtc2hha2VuLlxuICovIGZ1bmN0aW9uICRvKHQpIHtcbiAgICByZXR1cm4gdC5aciB8fCAoXG4gICAgLy8gQ3JlYXRlIHN0cmVhbSAoYnV0IG5vdGUgdGhhdCBpdCBpcyBub3Qgc3RhcnRlZCB5ZXQpLlxuICAgIHQuWnIgPSBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBxKHQpO1xuICAgICAgICByZXR1cm4gcy5GcigpLCBuZXcgaW8oZSwgcy5pciwgcy5hdXRoQ3JlZGVudGlhbHMsIHMuYXBwQ2hlY2tDcmVkZW50aWFscywgcy5rLCBuKTtcbiAgICB9KHQuZGF0YXN0b3JlLCB0LmFzeW5jUXVldWUsIHtcbiAgICAgICAgRGk6IFNvLmJpbmQobnVsbCwgdCksXG4gICAgICAgIE5pOiBOby5iaW5kKG51bGwsIHQpLFxuICAgICAgICBOcjogRG8uYmluZChudWxsLCB0KSxcbiAgICAgICAgQ3I6IENvLmJpbmQobnVsbCwgdClcbiAgICB9KSwgdC56ci5wdXNoKChhc3luYyBlID0+IHtcbiAgICAgICAgZSA/ICh0LlpyLndyKCksIFxuICAgICAgICAvLyBUaGlzIHdpbGwgc3RhcnQgdGhlIHdyaXRlIHN0cmVhbSBpZiBuZWNlc3NhcnkuXG4gICAgICAgIGF3YWl0IFJvKHQpKSA6IChhd2FpdCB0LlpyLnN0b3AoKSwgdC5Rci5sZW5ndGggPiAwICYmICgkKFwiUmVtb3RlU3RvcmVcIiwgYFN0b3BwaW5nIHdyaXRlIHN0cmVhbSB3aXRoICR7dC5Rci5sZW5ndGh9IHBlbmRpbmcgd3JpdGVzYCksIFxuICAgICAgICB0LlFyID0gW10pKTtcbiAgICB9KSkpLCB0LlpyO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGFuIG9wZXJhdGlvbiBzY2hlZHVsZWQgdG8gYmUgcnVuIGluIHRoZSBmdXR1cmUgb24gYW4gQXN5bmNRdWV1ZS5cbiAqXG4gKiBJdCBpcyBjcmVhdGVkIHZpYSBEZWxheWVkT3BlcmF0aW9uLmNyZWF0ZUFuZFNjaGVkdWxlKCkuXG4gKlxuICogU3VwcG9ydHMgY2FuY2VsbGF0aW9uICh2aWEgY2FuY2VsKCkpIGFuZCBlYXJseSBleGVjdXRpb24gKHZpYSBza2lwRGVsYXkoKSkuXG4gKlxuICogTm90ZTogV2UgaW1wbGVtZW50IGBQcm9taXNlTGlrZWAgaW5zdGVhZCBvZiBgUHJvbWlzZWAsIGFzIHRoZSBgUHJvbWlzZWAgdHlwZVxuICogaW4gbmV3ZXIgdmVyc2lvbnMgb2YgVHlwZVNjcmlwdCBkZWZpbmVzIGBmaW5hbGx5YCwgd2hpY2ggaXMgbm90IGF2YWlsYWJsZSBpblxuICogSUUuXG4gKi9cbmNsYXNzIEZvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IHQsIHRoaXMudGltZXJJZCA9IGUsIHRoaXMudGFyZ2V0VGltZU1zID0gbiwgdGhpcy5vcCA9IHMsIHRoaXMucmVtb3ZhbENhbGxiYWNrID0gaSwgXG4gICAgICAgIHRoaXMuZGVmZXJyZWQgPSBuZXcgUSwgdGhpcy50aGVuID0gdGhpcy5kZWZlcnJlZC5wcm9taXNlLnRoZW4uYmluZCh0aGlzLmRlZmVycmVkLnByb21pc2UpLCBcbiAgICAgICAgLy8gSXQncyBub3JtYWwgZm9yIHRoZSBkZWZlcnJlZCBwcm9taXNlIHRvIGJlIGNhbmNlbGVkIChkdWUgdG8gY2FuY2VsbGF0aW9uKVxuICAgICAgICAvLyBhbmQgc28gd2UgYXR0YWNoIGEgZHVtbXkgY2F0Y2ggY2FsbGJhY2sgdG8gYXZvaWRcbiAgICAgICAgLy8gJ1VuaGFuZGxlZFByb21pc2VSZWplY3Rpb25XYXJuaW5nJyBsb2cgc3BhbS5cbiAgICAgICAgdGhpcy5kZWZlcnJlZC5wcm9taXNlLmNhdGNoKCh0ID0+IHt9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBEZWxheWVkT3BlcmF0aW9uIHRoYXQgaGFzIGJlZW4gc2NoZWR1bGVkIHRvIGJlXG4gICAgICogZXhlY3V0ZWQgb24gdGhlIHByb3ZpZGVkIGFzeW5jUXVldWUgYWZ0ZXIgdGhlIHByb3ZpZGVkIGRlbGF5TXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXN5bmNRdWV1ZSAtIFRoZSBxdWV1ZSB0byBzY2hlZHVsZSB0aGUgb3BlcmF0aW9uIG9uLlxuICAgICAqIEBwYXJhbSBpZCAtIEEgVGltZXIgSUQgaWRlbnRpZnlpbmcgdGhlIHR5cGUgb2Ygb3BlcmF0aW9uIHRoaXMgaXMuXG4gICAgICogQHBhcmFtIGRlbGF5TXMgLSBUaGUgZGVsYXkgKG1zKSBiZWZvcmUgdGhlIG9wZXJhdGlvbiBzaG91bGQgYmUgc2NoZWR1bGVkLlxuICAgICAqIEBwYXJhbSBvcCAtIFRoZSBvcGVyYXRpb24gdG8gcnVuLlxuICAgICAqIEBwYXJhbSByZW1vdmFsQ2FsbGJhY2sgLSBBIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCBzeW5jaHJvbm91c2x5IG9uY2UgdGhlXG4gICAgICogICBvcGVyYXRpb24gaXMgZXhlY3V0ZWQgb3IgY2FuY2VsZWQsIG5vdGlmeWluZyB0aGUgQXN5bmNRdWV1ZSB0byByZW1vdmUgaXRcbiAgICAgKiAgIGZyb20gaXRzIGRlbGF5ZWRPcGVyYXRpb25zIGxpc3QuXG4gICAgICogICBQT1JUSU5HIE5PVEU6IFRoaXMgZXhpc3RzIHRvIHByZXZlbnQgbWFraW5nIHJlbW92ZURlbGF5ZWRPcGVyYXRpb24oKSBhbmRcbiAgICAgKiAgIHRoZSBEZWxheWVkT3BlcmF0aW9uIGNsYXNzIHB1YmxpYy5cbiAgICAgKi8gICAgc3RhdGljIGNyZWF0ZUFuZFNjaGVkdWxlKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgY29uc3QgciA9IERhdGUubm93KCkgKyBuLCBvID0gbmV3IEZvKHQsIGUsIHIsIHMsIGkpO1xuICAgICAgICByZXR1cm4gby5zdGFydChuKSwgbztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHRoZSB0aW1lci4gVGhpcyBpcyBjYWxsZWQgaW1tZWRpYXRlbHkgYWZ0ZXIgY29uc3RydWN0aW9uIGJ5XG4gICAgICogY3JlYXRlQW5kU2NoZWR1bGUoKS5cbiAgICAgKi8gICAgc3RhcnQodCkge1xuICAgICAgICB0aGlzLnRpbWVySGFuZGxlID0gc2V0VGltZW91dCgoKCkgPT4gdGhpcy5oYW5kbGVEZWxheUVsYXBzZWQoKSksIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBRdWV1ZXMgdGhlIG9wZXJhdGlvbiB0byBydW4gaW1tZWRpYXRlbHkgKGlmIGl0IGhhc24ndCBhbHJlYWR5IGJlZW4gcnVuIG9yXG4gICAgICogY2FuY2VsZWQpLlxuICAgICAqLyAgICBza2lwRGVsYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhbmRsZURlbGF5RWxhcHNlZCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYW5jZWxzIHRoZSBvcGVyYXRpb24gaWYgaXQgaGFzbid0IGFscmVhZHkgYmVlbiBleGVjdXRlZCBvciBjYW5jZWxlZC4gVGhlXG4gICAgICogcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkLlxuICAgICAqXG4gICAgICogQXMgbG9uZyBhcyB0aGUgb3BlcmF0aW9uIGhhcyBub3QgeWV0IGJlZW4gcnVuLCBjYWxsaW5nIGNhbmNlbCgpIHByb3ZpZGVzIGFcbiAgICAgKiBndWFyYW50ZWUgdGhhdCB0aGUgb3BlcmF0aW9uIHdpbGwgbm90IGJlIHJ1bi5cbiAgICAgKi8gICAgY2FuY2VsKHQpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy50aW1lckhhbmRsZSAmJiAodGhpcy5jbGVhclRpbWVvdXQoKSwgdGhpcy5kZWZlcnJlZC5yZWplY3QobmV3IGooSy5DQU5DRUxMRUQsIFwiT3BlcmF0aW9uIGNhbmNlbGxlZFwiICsgKHQgPyBcIjogXCIgKyB0IDogXCJcIikpKSk7XG4gICAgfVxuICAgIGhhbmRsZURlbGF5RWxhcHNlZCgpIHtcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKCgpID0+IG51bGwgIT09IHRoaXMudGltZXJIYW5kbGUgPyAodGhpcy5jbGVhclRpbWVvdXQoKSwgXG4gICAgICAgIHRoaXMub3AoKS50aGVuKCh0ID0+IHRoaXMuZGVmZXJyZWQucmVzb2x2ZSh0KSkpKSA6IFByb21pc2UucmVzb2x2ZSgpKSk7XG4gICAgfVxuICAgIGNsZWFyVGltZW91dCgpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy50aW1lckhhbmRsZSAmJiAodGhpcy5yZW1vdmFsQ2FsbGJhY2sodGhpcyksIGNsZWFyVGltZW91dCh0aGlzLnRpbWVySGFuZGxlKSwgXG4gICAgICAgIHRoaXMudGltZXJIYW5kbGUgPSBudWxsKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIEZpcmVzdG9yZUVycm9yIHRoYXQgY2FuIGJlIHN1cmZhY2VkIHRvIHRoZSB1c2VyIGlmIHRoZSBwcm92aWRlZFxuICogZXJyb3IgaXMgYW4gSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvci4gUmUtdGhyb3dzIHRoZSBlcnJvciBvdGhlcndpc2UuXG4gKi8gZnVuY3Rpb24gT28odCwgZSkge1xuICAgIGlmIChGKFwiQXN5bmNRdWV1ZVwiLCBgJHtlfTogJHt0fWApLCBYcyh0KSkgcmV0dXJuIG5ldyBqKEsuVU5BVkFJTEFCTEUsIGAke2V9OiAke3R9YCk7XG4gICAgdGhyb3cgdDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRG9jdW1lbnRTZXQgaXMgYW4gaW1tdXRhYmxlIChjb3B5LW9uLXdyaXRlKSBjb2xsZWN0aW9uIHRoYXQgaG9sZHMgZG9jdW1lbnRzXG4gKiBpbiBvcmRlciBzcGVjaWZpZWQgYnkgdGhlIHByb3ZpZGVkIGNvbXBhcmF0b3IuIFdlIGFsd2F5cyBhZGQgYSBkb2N1bWVudCBrZXlcbiAqIGNvbXBhcmF0b3Igb24gdG9wIG9mIHdoYXQgaXMgcHJvdmlkZWQgdG8gZ3VhcmFudGVlIGRvY3VtZW50IGVxdWFsaXR5IGJhc2VkIG9uXG4gKiB0aGUga2V5LlxuICovIGNsYXNzIE1vIHtcbiAgICAvKiogVGhlIGRlZmF1bHQgb3JkZXJpbmcgaXMgYnkga2V5IGlmIHRoZSBjb21wYXJhdG9yIGlzIG9taXR0ZWQgKi9cbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIC8vIFdlIGFyZSBhZGRpbmcgZG9jdW1lbnQga2V5IGNvbXBhcmF0b3IgdG8gdGhlIGVuZCBhcyBpdCdzIHRoZSBvbmx5XG4gICAgICAgIC8vIGd1YXJhbnRlZWQgdW5pcXVlIHByb3BlcnR5IG9mIGEgZG9jdW1lbnQuXG4gICAgICAgIHRoaXMuY29tcGFyYXRvciA9IHQgPyAoZSwgbikgPT4gdChlLCBuKSB8fCBTdC5jb21wYXJhdG9yKGUua2V5LCBuLmtleSkgOiAodCwgZSkgPT4gU3QuY29tcGFyYXRvcih0LmtleSwgZS5rZXkpLCBcbiAgICAgICAgdGhpcy5rZXllZE1hcCA9IFBuKCksIHRoaXMuc29ydGVkU2V0ID0gbmV3IGduKHRoaXMuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gZW1wdHkgY29weSBvZiB0aGUgZXhpc3RpbmcgRG9jdW1lbnRTZXQsIHVzaW5nIHRoZSBzYW1lXG4gICAgICogY29tcGFyYXRvci5cbiAgICAgKi8gICAgc3RhdGljIGVtcHR5U2V0KHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNbyh0LmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICBoYXModCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPSB0aGlzLmtleWVkTWFwLmdldCh0KTtcbiAgICB9XG4gICAgZ2V0KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua2V5ZWRNYXAuZ2V0KHQpO1xuICAgIH1cbiAgICBmaXJzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydGVkU2V0Lm1pbktleSgpO1xuICAgIH1cbiAgICBsYXN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3J0ZWRTZXQubWF4S2V5KCk7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5pc0VtcHR5KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBwcm92aWRlZCBrZXkgaW4gdGhlIGRvY3VtZW50IHNldCwgb3IgLTEgaWYgdGhlXG4gICAgICogZG9jdW1lbnQga2V5IGlzIG5vdCBwcmVzZW50IGluIHRoZSBzZXQ7XG4gICAgICovICAgIGluZGV4T2YodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5rZXllZE1hcC5nZXQodCk7XG4gICAgICAgIHJldHVybiBlID8gdGhpcy5zb3J0ZWRTZXQuaW5kZXhPZihlKSA6IC0xO1xuICAgIH1cbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydGVkU2V0LnNpemU7XG4gICAgfVxuICAgIC8qKiBJdGVyYXRlcyBkb2N1bWVudHMgaW4gb3JkZXIgZGVmaW5lZCBieSBcImNvbXBhcmF0b3JcIiAqLyAgICBmb3JFYWNoKHQpIHtcbiAgICAgICAgdGhpcy5zb3J0ZWRTZXQuaW5vcmRlclRyYXZlcnNhbCgoKGUsIG4pID0+ICh0KGUpLCAhMSkpKTtcbiAgICB9XG4gICAgLyoqIEluc2VydHMgb3IgdXBkYXRlcyBhIGRvY3VtZW50IHdpdGggdGhlIHNhbWUga2V5ICovICAgIGFkZCh0KSB7XG4gICAgICAgIC8vIEZpcnN0IHJlbW92ZSB0aGUgZWxlbWVudCBpZiB3ZSBoYXZlIGl0LlxuICAgICAgICBjb25zdCBlID0gdGhpcy5kZWxldGUodC5rZXkpO1xuICAgICAgICByZXR1cm4gZS5jb3B5KGUua2V5ZWRNYXAuaW5zZXJ0KHQua2V5LCB0KSwgZS5zb3J0ZWRTZXQuaW5zZXJ0KHQsIG51bGwpKTtcbiAgICB9XG4gICAgLyoqIERlbGV0ZXMgYSBkb2N1bWVudCB3aXRoIGEgZ2l2ZW4ga2V5ICovICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmdldCh0KTtcbiAgICAgICAgcmV0dXJuIGUgPyB0aGlzLmNvcHkodGhpcy5rZXllZE1hcC5yZW1vdmUodCksIHRoaXMuc29ydGVkU2V0LnJlbW92ZShlKSkgOiB0aGlzO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgaWYgKCEodCBpbnN0YW5jZW9mIE1vKSkgcmV0dXJuICExO1xuICAgICAgICBpZiAodGhpcy5zaXplICE9PSB0LnNpemUpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc29ydGVkU2V0LmdldEl0ZXJhdG9yKCksIG4gPSB0LnNvcnRlZFNldC5nZXRJdGVyYXRvcigpO1xuICAgICAgICBmb3IgKDtlLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5nZXROZXh0KCkua2V5LCBzID0gbi5nZXROZXh0KCkua2V5O1xuICAgICAgICAgICAgaWYgKCF0LmlzRXF1YWwocykpIHJldHVybiAhMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdC5wdXNoKGUudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pKSwgMCA9PT0gdC5sZW5ndGggPyBcIkRvY3VtZW50U2V0ICgpXCIgOiBcIkRvY3VtZW50U2V0IChcXG4gIFwiICsgdC5qb2luKFwiICBcXG5cIikgKyBcIlxcbilcIjtcbiAgICB9XG4gICAgY29weSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgTW87XG4gICAgICAgIHJldHVybiBuLmNvbXBhcmF0b3IgPSB0aGlzLmNvbXBhcmF0b3IsIG4ua2V5ZWRNYXAgPSB0LCBuLnNvcnRlZFNldCA9IGUsIG47XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBEb2N1bWVudENoYW5nZVNldCBrZWVwcyB0cmFjayBvZiBhIHNldCBvZiBjaGFuZ2VzIHRvIGRvY3MgaW4gYSBxdWVyeSwgbWVyZ2luZ1xuICogZHVwbGljYXRlIGV2ZW50cyBmb3IgdGhlIHNhbWUgZG9jLlxuICovIGNsYXNzIExvIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5lbyA9IG5ldyBnbihTdC5jb21wYXJhdG9yKTtcbiAgICB9XG4gICAgdHJhY2sodCkge1xuICAgICAgICBjb25zdCBlID0gdC5kb2Mua2V5LCBuID0gdGhpcy5lby5nZXQoZSk7XG4gICAgICAgIG4gPyBcbiAgICAgICAgLy8gTWVyZ2UgdGhlIG5ldyBjaGFuZ2Ugd2l0aCB0aGUgZXhpc3RpbmcgY2hhbmdlLlxuICAgICAgICAwIC8qIEFkZGVkICovICE9PSB0LnR5cGUgJiYgMyAvKiBNZXRhZGF0YSAqLyA9PT0gbi50eXBlID8gdGhpcy5lbyA9IHRoaXMuZW8uaW5zZXJ0KGUsIHQpIDogMyAvKiBNZXRhZGF0YSAqLyA9PT0gdC50eXBlICYmIDEgLyogUmVtb3ZlZCAqLyAhPT0gbi50eXBlID8gdGhpcy5lbyA9IHRoaXMuZW8uaW5zZXJ0KGUsIHtcbiAgICAgICAgICAgIHR5cGU6IG4udHlwZSxcbiAgICAgICAgICAgIGRvYzogdC5kb2NcbiAgICAgICAgfSkgOiAyIC8qIE1vZGlmaWVkICovID09PSB0LnR5cGUgJiYgMiAvKiBNb2RpZmllZCAqLyA9PT0gbi50eXBlID8gdGhpcy5lbyA9IHRoaXMuZW8uaW5zZXJ0KGUsIHtcbiAgICAgICAgICAgIHR5cGU6IDIgLyogTW9kaWZpZWQgKi8gLFxuICAgICAgICAgICAgZG9jOiB0LmRvY1xuICAgICAgICB9KSA6IDIgLyogTW9kaWZpZWQgKi8gPT09IHQudHlwZSAmJiAwIC8qIEFkZGVkICovID09PSBuLnR5cGUgPyB0aGlzLmVvID0gdGhpcy5lby5pbnNlcnQoZSwge1xuICAgICAgICAgICAgdHlwZTogMCAvKiBBZGRlZCAqLyAsXG4gICAgICAgICAgICBkb2M6IHQuZG9jXG4gICAgICAgIH0pIDogMSAvKiBSZW1vdmVkICovID09PSB0LnR5cGUgJiYgMCAvKiBBZGRlZCAqLyA9PT0gbi50eXBlID8gdGhpcy5lbyA9IHRoaXMuZW8ucmVtb3ZlKGUpIDogMSAvKiBSZW1vdmVkICovID09PSB0LnR5cGUgJiYgMiAvKiBNb2RpZmllZCAqLyA9PT0gbi50eXBlID8gdGhpcy5lbyA9IHRoaXMuZW8uaW5zZXJ0KGUsIHtcbiAgICAgICAgICAgIHR5cGU6IDEgLyogUmVtb3ZlZCAqLyAsXG4gICAgICAgICAgICBkb2M6IG4uZG9jXG4gICAgICAgIH0pIDogMCAvKiBBZGRlZCAqLyA9PT0gdC50eXBlICYmIDEgLyogUmVtb3ZlZCAqLyA9PT0gbi50eXBlID8gdGhpcy5lbyA9IHRoaXMuZW8uaW5zZXJ0KGUsIHtcbiAgICAgICAgICAgIHR5cGU6IDIgLyogTW9kaWZpZWQgKi8gLFxuICAgICAgICAgICAgZG9jOiB0LmRvY1xuICAgICAgICB9KSA6IFxuICAgICAgICAvLyBUaGlzIGluY2x1ZGVzIHRoZXNlIGNhc2VzLCB3aGljaCBkb24ndCBtYWtlIHNlbnNlOlxuICAgICAgICAvLyBBZGRlZC0+QWRkZWRcbiAgICAgICAgLy8gUmVtb3ZlZC0+UmVtb3ZlZFxuICAgICAgICAvLyBNb2RpZmllZC0+QWRkZWRcbiAgICAgICAgLy8gUmVtb3ZlZC0+TW9kaWZpZWRcbiAgICAgICAgLy8gTWV0YWRhdGEtPkFkZGVkXG4gICAgICAgIC8vIFJlbW92ZWQtPk1ldGFkYXRhXG4gICAgICAgIEwoKSA6IHRoaXMuZW8gPSB0aGlzLmVvLmluc2VydChlLCB0KTtcbiAgICB9XG4gICAgbm8oKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW8uaW5vcmRlclRyYXZlcnNhbCgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIHQucHVzaChuKTtcbiAgICAgICAgfSkpLCB0O1xuICAgIH1cbn1cblxuY2xhc3MgQm8ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGksIHIsIG8sIGEpIHtcbiAgICAgICAgdGhpcy5xdWVyeSA9IHQsIHRoaXMuZG9jcyA9IGUsIHRoaXMub2xkRG9jcyA9IG4sIHRoaXMuZG9jQ2hhbmdlcyA9IHMsIHRoaXMubXV0YXRlZEtleXMgPSBpLCBcbiAgICAgICAgdGhpcy5mcm9tQ2FjaGUgPSByLCB0aGlzLnN5bmNTdGF0ZUNoYW5nZWQgPSBvLCB0aGlzLmV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzID0gYTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSB2aWV3IHNuYXBzaG90IGFzIGlmIGFsbCBkb2N1bWVudHMgaW4gdGhlIHNuYXBzaG90IHdlcmUgYWRkZWQuICovICAgIHN0YXRpYyBmcm9tSW5pdGlhbERvY3VtZW50cyh0LCBlLCBuLCBzKSB7XG4gICAgICAgIGNvbnN0IGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBpLnB1c2goe1xuICAgICAgICAgICAgICAgIHR5cGU6IDAgLyogQWRkZWQgKi8gLFxuICAgICAgICAgICAgICAgIGRvYzogdFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKSwgbmV3IEJvKHQsIGUsIE1vLmVtcHR5U2V0KGUpLCBpLCBuLCBzLCBcbiAgICAgICAgLyogc3luY1N0YXRlQ2hhbmdlZD0gKi8gITAsIFxuICAgICAgICAvKiBleGNsdWRlc01ldGFkYXRhQ2hhbmdlcz0gKi8gITEpO1xuICAgIH1cbiAgICBnZXQgaGFzUGVuZGluZ1dyaXRlcygpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLm11dGF0ZWRLZXlzLmlzRW1wdHkoKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIGlmICghKHRoaXMuZnJvbUNhY2hlID09PSB0LmZyb21DYWNoZSAmJiB0aGlzLnN5bmNTdGF0ZUNoYW5nZWQgPT09IHQuc3luY1N0YXRlQ2hhbmdlZCAmJiB0aGlzLm11dGF0ZWRLZXlzLmlzRXF1YWwodC5tdXRhdGVkS2V5cykgJiYgYmUodGhpcy5xdWVyeSwgdC5xdWVyeSkgJiYgdGhpcy5kb2NzLmlzRXF1YWwodC5kb2NzKSAmJiB0aGlzLm9sZERvY3MuaXNFcXVhbCh0Lm9sZERvY3MpKSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5kb2NDaGFuZ2VzLCBuID0gdC5kb2NDaGFuZ2VzO1xuICAgICAgICBpZiAoZS5sZW5ndGggIT09IG4ubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgZS5sZW5ndGg7IHQrKykgaWYgKGVbdF0udHlwZSAhPT0gblt0XS50eXBlIHx8ICFlW3RdLmRvYy5pc0VxdWFsKG5bdF0uZG9jKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBIb2xkcyB0aGUgbGlzdGVuZXJzIGFuZCB0aGUgbGFzdCByZWNlaXZlZCBWaWV3U25hcHNob3QgZm9yIGEgcXVlcnkgYmVpbmdcbiAqIHRyYWNrZWQgYnkgRXZlbnRNYW5hZ2VyLlxuICovIGNsYXNzIFVvIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zbyA9IHZvaWQgMCwgdGhpcy5saXN0ZW5lcnMgPSBbXTtcbiAgICB9XG59XG5cbmNsYXNzIHFvIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5xdWVyaWVzID0gbmV3IEdpKCh0ID0+IHZlKHQpKSwgYmUpLCB0aGlzLm9ubGluZVN0YXRlID0gXCJVbmtub3duXCIgLyogVW5rbm93biAqLyAsIFxuICAgICAgICB0aGlzLmlvID0gbmV3IFNldDtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIEtvKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KSwgcyA9IGUucXVlcnk7XG4gICAgbGV0IGkgPSAhMSwgciA9IG4ucXVlcmllcy5nZXQocyk7XG4gICAgaWYgKHIgfHwgKGkgPSAhMCwgciA9IG5ldyBVbyksIGkpIHRyeSB7XG4gICAgICAgIHIuc28gPSBhd2FpdCBuLm9uTGlzdGVuKHMpO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgY29uc3QgbiA9IE9vKHQsIGBJbml0aWFsaXphdGlvbiBvZiBxdWVyeSAnJHtWZShlLnF1ZXJ5KX0nIGZhaWxlZGApO1xuICAgICAgICByZXR1cm4gdm9pZCBlLm9uRXJyb3Iobik7XG4gICAgfVxuICAgIGlmIChuLnF1ZXJpZXMuc2V0KHMsIHIpLCByLmxpc3RlbmVycy5wdXNoKGUpLCBcbiAgICAvLyBSdW4gZ2xvYmFsIHNuYXBzaG90IGxpc3RlbmVycyBpZiBhIGNvbnNpc3RlbnQgc25hcHNob3QgaGFzIGJlZW4gZW1pdHRlZC5cbiAgICBlLnJvKG4ub25saW5lU3RhdGUpLCByLnNvKSB7XG4gICAgICAgIGUub28oci5zbykgJiYgR28obik7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBqbyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IHEodCksIHMgPSBlLnF1ZXJ5O1xuICAgIGxldCBpID0gITE7XG4gICAgY29uc3QgciA9IG4ucXVlcmllcy5nZXQocyk7XG4gICAgaWYgKHIpIHtcbiAgICAgICAgY29uc3QgdCA9IHIubGlzdGVuZXJzLmluZGV4T2YoZSk7XG4gICAgICAgIHQgPj0gMCAmJiAoci5saXN0ZW5lcnMuc3BsaWNlKHQsIDEpLCBpID0gMCA9PT0gci5saXN0ZW5lcnMubGVuZ3RoKTtcbiAgICB9XG4gICAgaWYgKGkpIHJldHVybiBuLnF1ZXJpZXMuZGVsZXRlKHMpLCBuLm9uVW5saXN0ZW4ocyk7XG59XG5cbmZ1bmN0aW9uIFFvKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KTtcbiAgICBsZXQgcyA9ICExO1xuICAgIGZvciAoY29uc3QgdCBvZiBlKSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LnF1ZXJ5LCBpID0gbi5xdWVyaWVzLmdldChlKTtcbiAgICAgICAgaWYgKGkpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiBpLmxpc3RlbmVycykgZS5vbyh0KSAmJiAocyA9ICEwKTtcbiAgICAgICAgICAgIGkuc28gPSB0O1xuICAgICAgICB9XG4gICAgfVxuICAgIHMgJiYgR28obik7XG59XG5cbmZ1bmN0aW9uIFdvKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gcSh0KSwgaSA9IHMucXVlcmllcy5nZXQoZSk7XG4gICAgaWYgKGkpIGZvciAoY29uc3QgdCBvZiBpLmxpc3RlbmVycykgdC5vbkVycm9yKG4pO1xuICAgIC8vIFJlbW92ZSBhbGwgbGlzdGVuZXJzLiBOT1RFOiBXZSBkb24ndCBuZWVkIHRvIGNhbGwgc3luY0VuZ2luZS51bmxpc3RlbigpXG4gICAgLy8gYWZ0ZXIgYW4gZXJyb3IuXG4gICAgICAgIHMucXVlcmllcy5kZWxldGUoZSk7XG59XG5cbi8vIENhbGwgYWxsIGdsb2JhbCBzbmFwc2hvdCBsaXN0ZW5lcnMgdGhhdCBoYXZlIGJlZW4gc2V0LlxuZnVuY3Rpb24gR28odCkge1xuICAgIHQuaW8uZm9yRWFjaCgodCA9PiB7XG4gICAgICAgIHQubmV4dCgpO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBRdWVyeUxpc3RlbmVyIHRha2VzIGEgc2VyaWVzIG9mIGludGVybmFsIHZpZXcgc25hcHNob3RzIGFuZCBkZXRlcm1pbmVzXG4gKiB3aGVuIHRvIHJhaXNlIHRoZSBldmVudC5cbiAqXG4gKiBJdCB1c2VzIGFuIE9ic2VydmVyIHRvIGRpc3BhdGNoIGV2ZW50cy5cbiAqLyBjbGFzcyB6byB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gdCwgdGhpcy5hbyA9IGUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogSW5pdGlhbCBzbmFwc2hvdHMgKGUuZy4gZnJvbSBjYWNoZSkgbWF5IG5vdCBiZSBwcm9wYWdhdGVkIHRvIHRoZSB3cmFwcGVkXG4gICAgICAgICAqIG9ic2VydmVyLiBUaGlzIGZsYWcgaXMgc2V0IHRvIHRydWUgb25jZSB3ZSd2ZSBhY3R1YWxseSByYWlzZWQgYW4gZXZlbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNvID0gITEsIHRoaXMudW8gPSBudWxsLCB0aGlzLm9ubGluZVN0YXRlID0gXCJVbmtub3duXCIgLyogVW5rbm93biAqLyAsIHRoaXMub3B0aW9ucyA9IG4gfHwge307XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgdGhlIG5ldyBWaWV3U25hcHNob3QgdG8gdGhpcyBsaXN0ZW5lciwgcmFpc2luZyBhIHVzZXItZmFjaW5nIGV2ZW50XG4gICAgICogaWYgYXBwbGljYWJsZSAoZGVwZW5kaW5nIG9uIHdoYXQgY2hhbmdlZCwgd2hldGhlciB0aGUgdXNlciBoYXMgb3B0ZWQgaW50b1xuICAgICAqIG1ldGFkYXRhLW9ubHkgY2hhbmdlcywgZXRjLikuIFJldHVybnMgdHJ1ZSBpZiBhIHVzZXItZmFjaW5nIGV2ZW50IHdhc1xuICAgICAqIGluZGVlZCByYWlzZWQuXG4gICAgICovICAgIG9vKHQpIHtcbiAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcykge1xuICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBtZXRhZGF0YSBvbmx5IGNoYW5nZXMuXG4gICAgICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdC5kb2NDaGFuZ2VzKSAzIC8qIE1ldGFkYXRhICovICE9PSBuLnR5cGUgJiYgZS5wdXNoKG4pO1xuICAgICAgICAgICAgdCA9IG5ldyBCbyh0LnF1ZXJ5LCB0LmRvY3MsIHQub2xkRG9jcywgZSwgdC5tdXRhdGVkS2V5cywgdC5mcm9tQ2FjaGUsIHQuc3luY1N0YXRlQ2hhbmdlZCwgXG4gICAgICAgICAgICAvKiBleGNsdWRlc01ldGFkYXRhQ2hhbmdlcz0gKi8gITApO1xuICAgICAgICB9XG4gICAgICAgIGxldCBlID0gITE7XG4gICAgICAgIHJldHVybiB0aGlzLmNvID8gdGhpcy5obyh0KSAmJiAodGhpcy5hby5uZXh0KHQpLCBlID0gITApIDogdGhpcy5sbyh0LCB0aGlzLm9ubGluZVN0YXRlKSAmJiAodGhpcy5mbyh0KSwgXG4gICAgICAgIGUgPSAhMCksIHRoaXMudW8gPSB0LCBlO1xuICAgIH1cbiAgICBvbkVycm9yKHQpIHtcbiAgICAgICAgdGhpcy5hby5lcnJvcih0KTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgd2hldGhlciBhIHNuYXBzaG90IHdhcyByYWlzZWQuICovICAgIHJvKHQpIHtcbiAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZSA9IHQ7XG4gICAgICAgIGxldCBlID0gITE7XG4gICAgICAgIHJldHVybiB0aGlzLnVvICYmICF0aGlzLmNvICYmIHRoaXMubG8odGhpcy51bywgdCkgJiYgKHRoaXMuZm8odGhpcy51byksIGUgPSAhMCksIFxuICAgICAgICBlO1xuICAgIH1cbiAgICBsbyh0LCBlKSB7XG4gICAgICAgIC8vIEFsd2F5cyByYWlzZSB0aGUgZmlyc3QgZXZlbnQgd2hlbiB3ZSdyZSBzeW5jZWRcbiAgICAgICAgaWYgKCF0LmZyb21DYWNoZSkgcmV0dXJuICEwO1xuICAgICAgICAvLyBOT1RFOiBXZSBjb25zaWRlciBPbmxpbmVTdGF0ZS5Vbmtub3duIGFzIG9ubGluZSAoaXQgc2hvdWxkIGJlY29tZSBPZmZsaW5lXG4gICAgICAgIC8vIG9yIE9ubGluZSBpZiB3ZSB3YWl0IGxvbmcgZW5vdWdoKS5cbiAgICAgICAgICAgICAgICBjb25zdCBuID0gXCJPZmZsaW5lXCIgLyogT2ZmbGluZSAqLyAhPT0gZTtcbiAgICAgICAgLy8gRG9uJ3QgcmFpc2UgdGhlIGV2ZW50IGlmIHdlJ3JlIG9ubGluZSwgYXJlbid0IHN5bmNlZCB5ZXQgKGNoZWNrZWRcbiAgICAgICAgLy8gYWJvdmUpIGFuZCBhcmUgd2FpdGluZyBmb3IgYSBzeW5jLlxuICAgICAgICAgICAgICAgIHJldHVybiAoIXRoaXMub3B0aW9ucy53byB8fCAhbikgJiYgKCF0LmRvY3MuaXNFbXB0eSgpIHx8IFwiT2ZmbGluZVwiIC8qIE9mZmxpbmUgKi8gPT09IGUpO1xuICAgICAgICAvLyBSYWlzZSBkYXRhIGZyb20gY2FjaGUgaWYgd2UgaGF2ZSBhbnkgZG9jdW1lbnRzIG9yIHdlIGFyZSBvZmZsaW5lXG4gICAgICAgIH1cbiAgICBobyh0KSB7XG4gICAgICAgIC8vIFdlIGRvbid0IG5lZWQgdG8gaGFuZGxlIGluY2x1ZGVEb2N1bWVudE1ldGFkYXRhQ2hhbmdlcyBoZXJlIGJlY2F1c2VcbiAgICAgICAgLy8gdGhlIE1ldGFkYXRhIG9ubHkgY2hhbmdlcyBoYXZlIGFscmVhZHkgYmVlbiBzdHJpcHBlZCBvdXQgaWYgbmVlZGVkLlxuICAgICAgICAvLyBBdCB0aGlzIHBvaW50IHRoZSBvbmx5IGNoYW5nZXMgd2Ugd2lsbCBzZWUgYXJlIHRoZSBvbmVzIHdlIHNob3VsZFxuICAgICAgICAvLyBwcm9wYWdhdGUuXG4gICAgICAgIGlmICh0LmRvY0NoYW5nZXMubGVuZ3RoID4gMCkgcmV0dXJuICEwO1xuICAgICAgICBjb25zdCBlID0gdGhpcy51byAmJiB0aGlzLnVvLmhhc1BlbmRpbmdXcml0ZXMgIT09IHQuaGFzUGVuZGluZ1dyaXRlcztcbiAgICAgICAgcmV0dXJuICEoIXQuc3luY1N0YXRlQ2hhbmdlZCAmJiAhZSkgJiYgITAgPT09IHRoaXMub3B0aW9ucy5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzO1xuICAgICAgICAvLyBHZW5lcmFsbHkgd2Ugc2hvdWxkIGhhdmUgaGl0IG9uZSBvZiB0aGUgY2FzZXMgYWJvdmUsIGJ1dCBpdCdzIHBvc3NpYmxlXG4gICAgICAgIC8vIHRvIGdldCBoZXJlIGlmIHRoZXJlIHdlcmUgb25seSBtZXRhZGF0YSBkb2NDaGFuZ2VzIGFuZCB0aGV5IGdvdFxuICAgICAgICAvLyBzdHJpcHBlZCBvdXQuXG4gICAgICAgIH1cbiAgICBmbyh0KSB7XG4gICAgICAgIHQgPSBCby5mcm9tSW5pdGlhbERvY3VtZW50cyh0LnF1ZXJ5LCB0LmRvY3MsIHQubXV0YXRlZEtleXMsIHQuZnJvbUNhY2hlKSwgdGhpcy5jbyA9ICEwLCBcbiAgICAgICAgdGhpcy5hby5uZXh0KHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBjb21wbGV0ZSBlbGVtZW50IGluIHRoZSBidW5kbGUgc3RyZWFtLCB0b2dldGhlciB3aXRoIHRoZSBieXRlIGxlbmd0aCBpdFxuICogb2NjdXBpZXMgaW4gdGhlIHN0cmVhbS5cbiAqLyBjbGFzcyBIbyB7XG4gICAgY29uc3RydWN0b3IodCwgXG4gICAgLy8gSG93IG1hbnkgYnl0ZXMgdGhpcyBlbGVtZW50IHRha2VzIHRvIHN0b3JlIGluIHRoZSBidW5kbGUuXG4gICAgZSkge1xuICAgICAgICB0aGlzLnBheWxvYWQgPSB0LCB0aGlzLmJ5dGVMZW5ndGggPSBlO1xuICAgIH1cbiAgICBfbygpIHtcbiAgICAgICAgcmV0dXJuIFwibWV0YWRhdGFcIiBpbiB0aGlzLnBheWxvYWQ7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBIZWxwZXIgdG8gY29udmVydCBvYmplY3RzIGZyb20gYnVuZGxlcyB0byBtb2RlbCBvYmplY3RzIGluIHRoZSBTREsuXG4gKi8gY2xhc3MgSm8ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5rID0gdDtcbiAgICB9XG4gICAgSG4odCkge1xuICAgICAgICByZXR1cm4gWW4odGhpcy5rLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYSBCdW5kbGVEb2N1bWVudCB0byBhIE11dGFibGVEb2N1bWVudC5cbiAgICAgKi8gICAgSm4odCkge1xuICAgICAgICByZXR1cm4gdC5tZXRhZGF0YS5leGlzdHMgPyBzcyh0aGlzLmssIHQuZG9jdW1lbnQsICExKSA6IFd0Lm5ld05vRG9jdW1lbnQodGhpcy5Ibih0Lm1ldGFkYXRhLm5hbWUpLCB0aGlzLlluKHQubWV0YWRhdGEucmVhZFRpbWUpKTtcbiAgICB9XG4gICAgWW4odCkge1xuICAgICAgICByZXR1cm4gR24odCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgY2xhc3MgdG8gcHJvY2VzcyB0aGUgZWxlbWVudHMgZnJvbSBhIGJ1bmRsZSwgbG9hZCB0aGVtIGludG8gbG9jYWxcbiAqIHN0b3JhZ2UgYW5kIHByb3ZpZGUgcHJvZ3Jlc3MgdXBkYXRlIHdoaWxlIGxvYWRpbmcuXG4gKi8gY2xhc3MgWW8ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5tbyA9IHQsIHRoaXMubG9jYWxTdG9yZSA9IGUsIHRoaXMuayA9IG4sIFxuICAgICAgICAvKiogQmF0Y2hlZCBxdWVyaWVzIHRvIGJlIHNhdmVkIGludG8gc3RvcmFnZSAqL1xuICAgICAgICB0aGlzLnF1ZXJpZXMgPSBbXSwgXG4gICAgICAgIC8qKiBCYXRjaGVkIGRvY3VtZW50cyB0byBiZSBzYXZlZCBpbnRvIHN0b3JhZ2UgKi9cbiAgICAgICAgdGhpcy5kb2N1bWVudHMgPSBbXSwgdGhpcy5wcm9ncmVzcyA9IFhvKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGFuIGVsZW1lbnQgZnJvbSB0aGUgYnVuZGxlIHRvIHRoZSBsb2FkZXIuXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIGEgbmV3IHByb2dyZXNzIGlmIGFkZGluZyB0aGUgZWxlbWVudCBsZWFkcyB0byBhIG5ldyBwcm9ncmVzcyxcbiAgICAgKiBvdGhlcndpc2UgcmV0dXJucyBudWxsLlxuICAgICAqLyAgICB5byh0KSB7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3MuYnl0ZXNMb2FkZWQgKz0gdC5ieXRlTGVuZ3RoO1xuICAgICAgICBsZXQgZSA9IHRoaXMucHJvZ3Jlc3MuZG9jdW1lbnRzTG9hZGVkO1xuICAgICAgICByZXR1cm4gdC5wYXlsb2FkLm5hbWVkUXVlcnkgPyB0aGlzLnF1ZXJpZXMucHVzaCh0LnBheWxvYWQubmFtZWRRdWVyeSkgOiB0LnBheWxvYWQuZG9jdW1lbnRNZXRhZGF0YSA/ICh0aGlzLmRvY3VtZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG1ldGFkYXRhOiB0LnBheWxvYWQuZG9jdW1lbnRNZXRhZGF0YVxuICAgICAgICB9KSwgdC5wYXlsb2FkLmRvY3VtZW50TWV0YWRhdGEuZXhpc3RzIHx8ICsrZSkgOiB0LnBheWxvYWQuZG9jdW1lbnQgJiYgKHRoaXMuZG9jdW1lbnRzW3RoaXMuZG9jdW1lbnRzLmxlbmd0aCAtIDFdLmRvY3VtZW50ID0gdC5wYXlsb2FkLmRvY3VtZW50LCBcbiAgICAgICAgKytlKSwgZSAhPT0gdGhpcy5wcm9ncmVzcy5kb2N1bWVudHNMb2FkZWQgPyAodGhpcy5wcm9ncmVzcy5kb2N1bWVudHNMb2FkZWQgPSBlLCBcbiAgICAgICAgT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5wcm9ncmVzcykpIDogbnVsbDtcbiAgICB9XG4gICAgcG8odCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IE1hcCwgbiA9IG5ldyBKbyh0aGlzLmspO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2YgdCkgaWYgKHMubWV0YWRhdGEucXVlcmllcykge1xuICAgICAgICAgICAgY29uc3QgdCA9IG4uSG4ocy5tZXRhZGF0YS5uYW1lKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiBzLm1ldGFkYXRhLnF1ZXJpZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gKGUuZ2V0KG4pIHx8IFNuKCkpLmFkZCh0KTtcbiAgICAgICAgICAgICAgICBlLnNldChuLCBzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBwcm9ncmVzcyB0byAnU3VjY2VzcycgYW5kIHJldHVybiB0aGUgdXBkYXRlZCBwcm9ncmVzcy5cbiAgICAgKi8gICAgYXN5bmMgY29tcGxldGUoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBQcih0aGlzLmxvY2FsU3RvcmUsIG5ldyBKbyh0aGlzLmspLCB0aGlzLmRvY3VtZW50cywgdGhpcy5tby5pZCksIGUgPSB0aGlzLnBvKHRoaXMuZG9jdW1lbnRzKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMucXVlcmllcykgYXdhaXQgYnIodGhpcy5sb2NhbFN0b3JlLCB0LCBlLmdldCh0Lm5hbWUpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvZ3Jlc3MudGFza1N0YXRlID0gXCJTdWNjZXNzXCIsIG5ldyBhcihPYmplY3QuYXNzaWduKHt9LCB0aGlzLnByb2dyZXNzKSwgdCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSBgTG9hZEJ1bmRsZVRhc2tQcm9ncmVzc2AgcmVwcmVzZW50aW5nIHRoZSBpbml0aWFsIHByb2dyZXNzIG9mXG4gKiBsb2FkaW5nIGEgYnVuZGxlLlxuICovIGZ1bmN0aW9uIFhvKHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0YXNrU3RhdGU6IFwiUnVubmluZ1wiLFxuICAgICAgICBkb2N1bWVudHNMb2FkZWQ6IDAsXG4gICAgICAgIGJ5dGVzTG9hZGVkOiAwLFxuICAgICAgICB0b3RhbERvY3VtZW50czogdC50b3RhbERvY3VtZW50cyxcbiAgICAgICAgdG90YWxCeXRlczogdC50b3RhbEJ5dGVzXG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgYExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3NgIHJlcHJlc2VudGluZyB0aGUgcHJvZ3Jlc3MgdGhhdCB0aGUgbG9hZGluZ1xuICogaGFzIHN1Y2NlZWRlZC5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNsYXNzIFpvIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMua2V5ID0gdDtcbiAgICB9XG59XG5cbmNsYXNzIHRhIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMua2V5ID0gdDtcbiAgICB9XG59XG5cbi8qKlxuICogVmlldyBpcyByZXNwb25zaWJsZSBmb3IgY29tcHV0aW5nIHRoZSBmaW5hbCBtZXJnZWQgdHJ1dGggb2Ygd2hhdCBkb2NzIGFyZSBpblxuICogYSBxdWVyeS4gSXQgZ2V0cyBub3RpZmllZCBvZiBsb2NhbCBhbmQgcmVtb3RlIGNoYW5nZXMgdG8gZG9jcywgYW5kIGFwcGxpZXNcbiAqIHRoZSBxdWVyeSBmaWx0ZXJzIGFuZCBsaW1pdHMgdG8gZGV0ZXJtaW5lIHRoZSBtb3N0IGNvcnJlY3QgcG9zc2libGUgcmVzdWx0cy5cbiAqLyBjbGFzcyBlYSB7XG4gICAgY29uc3RydWN0b3IodCwgXG4gICAgLyoqIERvY3VtZW50cyBpbmNsdWRlZCBpbiB0aGUgcmVtb3RlIHRhcmdldCAqL1xuICAgIGUpIHtcbiAgICAgICAgdGhpcy5xdWVyeSA9IHQsIHRoaXMuVG8gPSBlLCB0aGlzLkVvID0gbnVsbCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGZsYWcgd2hldGhlciB0aGUgdmlldyBpcyBjdXJyZW50IHdpdGggdGhlIGJhY2tlbmQuIEEgdmlldyBpcyBjb25zaWRlcmVkXG4gICAgICAgICAqIGN1cnJlbnQgYWZ0ZXIgaXQgaGFzIHNlZW4gdGhlIGN1cnJlbnQgZmxhZyBmcm9tIHRoZSBiYWNrZW5kIGFuZCBkaWQgbm90XG4gICAgICAgICAqIGxvc2UgY29uc2lzdGVuY3kgd2l0aGluIHRoZSB3YXRjaCBzdHJlYW0gKGUuZy4gYmVjYXVzZSBvZiBhbiBleGlzdGVuY2VcbiAgICAgICAgICogZmlsdGVyIG1pc21hdGNoKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY3VycmVudCA9ICExLCBcbiAgICAgICAgLyoqIERvY3VtZW50cyBpbiB0aGUgdmlldyBidXQgbm90IGluIHRoZSByZW1vdGUgdGFyZ2V0ICovXG4gICAgICAgIHRoaXMuSW8gPSBTbigpLCBcbiAgICAgICAgLyoqIERvY3VtZW50IEtleXMgdGhhdCBoYXZlIGxvY2FsIGNoYW5nZXMgKi9cbiAgICAgICAgdGhpcy5tdXRhdGVkS2V5cyA9IFNuKCksIHRoaXMuQW8gPSBEZSh0KSwgdGhpcy5SbyA9IG5ldyBNbyh0aGlzLkFvKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHNldCBvZiByZW1vdGUgZG9jdW1lbnRzIHRoYXQgdGhlIHNlcnZlciBoYXMgdG9sZCB1cyBiZWxvbmdzIHRvIHRoZSB0YXJnZXQgYXNzb2NpYXRlZCB3aXRoXG4gICAgICogdGhpcyB2aWV3LlxuICAgICAqLyAgICBnZXQgUG8oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlRvO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGEgc2V0IG9mIGRvYyBjaGFuZ2VzLCBhcHBsaWVzIHRoZSBxdWVyeSBsaW1pdCwgYW5kIGNvbXB1dGVzXG4gICAgICogd2hhdCB0aGUgbmV3IHJlc3VsdHMgc2hvdWxkIGJlLCB3aGF0IHRoZSBjaGFuZ2VzIHdlcmUsIGFuZCB3aGV0aGVyIHdlIG1heVxuICAgICAqIG5lZWQgdG8gZ28gYmFjayB0byB0aGUgbG9jYWwgY2FjaGUgZm9yIG1vcmUgcmVzdWx0cy4gRG9lcyBub3QgbWFrZSBhbnlcbiAgICAgKiBjaGFuZ2VzIHRvIHRoZSB2aWV3LlxuICAgICAqIEBwYXJhbSBkb2NDaGFuZ2VzIC0gVGhlIGRvYyBjaGFuZ2VzIHRvIGFwcGx5IHRvIHRoaXMgdmlldy5cbiAgICAgKiBAcGFyYW0gcHJldmlvdXNDaGFuZ2VzIC0gSWYgdGhpcyBpcyBiZWluZyBjYWxsZWQgd2l0aCBhIHJlZmlsbCwgdGhlbiBzdGFydFxuICAgICAqICAgICAgICB3aXRoIHRoaXMgc2V0IG9mIGRvY3MgYW5kIGNoYW5nZXMgaW5zdGVhZCBvZiB0aGUgY3VycmVudCB2aWV3LlxuICAgICAqIEByZXR1cm5zIGEgbmV3IHNldCBvZiBkb2NzLCBjaGFuZ2VzLCBhbmQgcmVmaWxsIGZsYWcuXG4gICAgICovICAgIGJvKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUgPyBlLnZvIDogbmV3IExvLCBzID0gZSA/IGUuUm8gOiB0aGlzLlJvO1xuICAgICAgICBsZXQgaSA9IGUgPyBlLm11dGF0ZWRLZXlzIDogdGhpcy5tdXRhdGVkS2V5cywgciA9IHMsIG8gPSAhMTtcbiAgICAgICAgLy8gVHJhY2sgdGhlIGxhc3QgZG9jIGluIGEgKGZ1bGwpIGxpbWl0LiBUaGlzIGlzIG5lY2Vzc2FyeSwgYmVjYXVzZSBzb21lXG4gICAgICAgIC8vIHVwZGF0ZSAoYSBkZWxldGUsIG9yIGFuIHVwZGF0ZSBtb3ZpbmcgYSBkb2MgcGFzdCB0aGUgb2xkIGxpbWl0KSBtaWdodFxuICAgICAgICAvLyBtZWFuIHRoZXJlIGlzIHNvbWUgb3RoZXIgZG9jdW1lbnQgaW4gdGhlIGxvY2FsIGNhY2hlIHRoYXQgZWl0aGVyIHNob3VsZFxuICAgICAgICAvLyBjb21lICgxKSBiZXR3ZWVuIHRoZSBvbGQgbGFzdCBsaW1pdCBkb2MgYW5kIHRoZSBuZXcgbGFzdCBkb2N1bWVudCwgaW4gdGhlXG4gICAgICAgIC8vIGNhc2Ugb2YgdXBkYXRlcywgb3IgKDIpIGFmdGVyIHRoZSBuZXcgbGFzdCBkb2N1bWVudCwgaW4gdGhlIGNhc2Ugb2ZcbiAgICAgICAgLy8gZGVsZXRlcy4gU28gd2Uga2VlcCB0aGlzIGRvYyBhdCB0aGUgb2xkIGxpbWl0IHRvIGNvbXBhcmUgdGhlIHVwZGF0ZXMgdG8uXG4gICAgICAgIC8vIE5vdGUgdGhhdCB0aGlzIHNob3VsZCBuZXZlciBnZXQgdXNlZCBpbiBhIHJlZmlsbCAod2hlbiBwcmV2aW91c0NoYW5nZXMgaXNcbiAgICAgICAgLy8gc2V0KSwgYmVjYXVzZSB0aGVyZSB3aWxsIG9ubHkgYmUgYWRkcyAtLSBubyBkZWxldGVzIG9yIHVwZGF0ZXMuXG4gICAgICAgIGNvbnN0IGEgPSB5ZSh0aGlzLnF1ZXJ5KSAmJiBzLnNpemUgPT09IHRoaXMucXVlcnkubGltaXQgPyBzLmxhc3QoKSA6IG51bGwsIGMgPSBwZSh0aGlzLnF1ZXJ5KSAmJiBzLnNpemUgPT09IHRoaXMucXVlcnkubGltaXQgPyBzLmZpcnN0KCkgOiBudWxsO1xuICAgICAgICAvLyBEcm9wIGRvY3VtZW50cyBvdXQgdG8gbWVldCBsaW1pdC9saW1pdFRvTGFzdCByZXF1aXJlbWVudC5cbiAgICAgICAgaWYgKHQuaW5vcmRlclRyYXZlcnNhbCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHUgPSBzLmdldCh0KSwgaCA9IFNlKHRoaXMucXVlcnksIGUpID8gZSA6IG51bGwsIGwgPSAhIXUgJiYgdGhpcy5tdXRhdGVkS2V5cy5oYXModS5rZXkpLCBmID0gISFoICYmIChoLmhhc0xvY2FsTXV0YXRpb25zIHx8IFxuICAgICAgICAgICAgLy8gV2Ugb25seSBjb25zaWRlciBjb21taXR0ZWQgbXV0YXRpb25zIGZvciBkb2N1bWVudHMgdGhhdCB3ZXJlXG4gICAgICAgICAgICAvLyBtdXRhdGVkIGR1cmluZyB0aGUgbGlmZXRpbWUgb2YgdGhlIHZpZXcuXG4gICAgICAgICAgICB0aGlzLm11dGF0ZWRLZXlzLmhhcyhoLmtleSkgJiYgaC5oYXNDb21taXR0ZWRNdXRhdGlvbnMpO1xuICAgICAgICAgICAgbGV0IGQgPSAhMTtcbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBjaGFuZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1ICYmIGgpIHtcbiAgICAgICAgICAgICAgICB1LmRhdGEuaXNFcXVhbChoLmRhdGEpID8gbCAhPT0gZiAmJiAobi50cmFjayh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IDMgLyogTWV0YWRhdGEgKi8gLFxuICAgICAgICAgICAgICAgICAgICBkb2M6IGhcbiAgICAgICAgICAgICAgICB9KSwgZCA9ICEwKSA6IHRoaXMuVm8odSwgaCkgfHwgKG4udHJhY2soe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAyIC8qIE1vZGlmaWVkICovICxcbiAgICAgICAgICAgICAgICAgICAgZG9jOiBoXG4gICAgICAgICAgICAgICAgfSksIGQgPSAhMCwgKGEgJiYgdGhpcy5BbyhoLCBhKSA+IDAgfHwgYyAmJiB0aGlzLkFvKGgsIGMpIDwgMCkgJiYgKFxuICAgICAgICAgICAgICAgIC8vIFRoaXMgZG9jIG1vdmVkIGZyb20gaW5zaWRlIHRoZSBsaW1pdCB0byBvdXRzaWRlIHRoZSBsaW1pdC5cbiAgICAgICAgICAgICAgICAvLyBUaGF0IG1lYW5zIHRoZXJlIG1heSBiZSBzb21lIG90aGVyIGRvYyBpbiB0aGUgbG9jYWwgY2FjaGVcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHNob3VsZCBiZSBpbmNsdWRlZCBpbnN0ZWFkLlxuICAgICAgICAgICAgICAgIG8gPSAhMCkpO1xuICAgICAgICAgICAgfSBlbHNlICF1ICYmIGggPyAobi50cmFjayh7XG4gICAgICAgICAgICAgICAgdHlwZTogMCAvKiBBZGRlZCAqLyAsXG4gICAgICAgICAgICAgICAgZG9jOiBoXG4gICAgICAgICAgICB9KSwgZCA9ICEwKSA6IHUgJiYgIWggJiYgKG4udHJhY2soe1xuICAgICAgICAgICAgICAgIHR5cGU6IDEgLyogUmVtb3ZlZCAqLyAsXG4gICAgICAgICAgICAgICAgZG9jOiB1XG4gICAgICAgICAgICB9KSwgZCA9ICEwLCAoYSB8fCBjKSAmJiAoXG4gICAgICAgICAgICAvLyBBIGRvYyB3YXMgcmVtb3ZlZCBmcm9tIGEgZnVsbCBsaW1pdCBxdWVyeS4gV2UnbGwgbmVlZCB0b1xuICAgICAgICAgICAgLy8gcmVxdWVyeSBmcm9tIHRoZSBsb2NhbCBjYWNoZSB0byBzZWUgaWYgd2Uga25vdyBhYm91dCBzb21lIG90aGVyXG4gICAgICAgICAgICAvLyBkb2MgdGhhdCBzaG91bGQgYmUgaW4gdGhlIHJlc3VsdHMuXG4gICAgICAgICAgICBvID0gITApKTtcbiAgICAgICAgICAgIGQgJiYgKGggPyAociA9IHIuYWRkKGgpLCBpID0gZiA/IGkuYWRkKHQpIDogaS5kZWxldGUodCkpIDogKHIgPSByLmRlbGV0ZSh0KSwgaSA9IGkuZGVsZXRlKHQpKSk7XG4gICAgICAgIH0pKSwgeWUodGhpcy5xdWVyeSkgfHwgcGUodGhpcy5xdWVyeSkpIGZvciAoO3Iuc2l6ZSA+IHRoaXMucXVlcnkubGltaXQ7ICkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHllKHRoaXMucXVlcnkpID8gci5sYXN0KCkgOiByLmZpcnN0KCk7XG4gICAgICAgICAgICByID0gci5kZWxldGUodC5rZXkpLCBpID0gaS5kZWxldGUodC5rZXkpLCBuLnRyYWNrKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAxIC8qIFJlbW92ZWQgKi8gLFxuICAgICAgICAgICAgICAgIGRvYzogdFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFJvOiByLFxuICAgICAgICAgICAgdm86IG4sXG4gICAgICAgICAgICBCbjogbyxcbiAgICAgICAgICAgIG11dGF0ZWRLZXlzOiBpXG4gICAgICAgIH07XG4gICAgfVxuICAgIFZvKHQsIGUpIHtcbiAgICAgICAgLy8gV2Ugc3VwcHJlc3MgdGhlIGluaXRpYWwgY2hhbmdlIGV2ZW50IGZvciBkb2N1bWVudHMgdGhhdCB3ZXJlIG1vZGlmaWVkIGFzXG4gICAgICAgIC8vIHBhcnQgb2YgYSB3cml0ZSBhY2tub3dsZWRnbWVudCAoZS5nLiB3aGVuIHRoZSB2YWx1ZSBvZiBhIHNlcnZlciB0cmFuc2Zvcm1cbiAgICAgICAgLy8gaXMgYXBwbGllZCkgYXMgV2F0Y2ggd2lsbCBzZW5kIHVzIHRoZSBzYW1lIGRvY3VtZW50IGFnYWluLlxuICAgICAgICAvLyBCeSBzdXBwcmVzc2luZyB0aGUgZXZlbnQsIHdlIG9ubHkgcmFpc2UgdHdvIHVzZXIgdmlzaWJsZSBldmVudHMgKG9uZSB3aXRoXG4gICAgICAgIC8vIGBoYXNQZW5kaW5nV3JpdGVzYCBhbmQgdGhlIGZpbmFsIHN0YXRlIG9mIHRoZSBkb2N1bWVudCkgaW5zdGVhZCBvZiB0aHJlZVxuICAgICAgICAvLyAob25lIHdpdGggYGhhc1BlbmRpbmdXcml0ZXNgLCB0aGUgbW9kaWZpZWQgZG9jdW1lbnQgd2l0aFxuICAgICAgICAvLyBgaGFzUGVuZGluZ1dyaXRlc2AgYW5kIHRoZSBmaW5hbCBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQpLlxuICAgICAgICByZXR1cm4gdC5oYXNMb2NhbE11dGF0aW9ucyAmJiBlLmhhc0NvbW1pdHRlZE11dGF0aW9ucyAmJiAhZS5oYXNMb2NhbE11dGF0aW9ucztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgdmlldyB3aXRoIHRoZSBnaXZlbiBWaWV3RG9jdW1lbnRDaGFuZ2VzIGFuZCBvcHRpb25hbGx5IHVwZGF0ZXNcbiAgICAgKiBsaW1ibyBkb2NzIGFuZCBzeW5jIHN0YXRlIGZyb20gdGhlIHByb3ZpZGVkIHRhcmdldCBjaGFuZ2UuXG4gICAgICogQHBhcmFtIGRvY0NoYW5nZXMgLSBUaGUgc2V0IG9mIGNoYW5nZXMgdG8gbWFrZSB0byB0aGUgdmlldydzIGRvY3MuXG4gICAgICogQHBhcmFtIHVwZGF0ZUxpbWJvRG9jdW1lbnRzIC0gV2hldGhlciB0byB1cGRhdGUgbGltYm8gZG9jdW1lbnRzIGJhc2VkIG9uXG4gICAgICogICAgICAgIHRoaXMgY2hhbmdlLlxuICAgICAqIEBwYXJhbSB0YXJnZXRDaGFuZ2UgLSBBIHRhcmdldCBjaGFuZ2UgdG8gYXBwbHkgZm9yIGNvbXB1dGluZyBsaW1ibyBkb2NzIGFuZFxuICAgICAqICAgICAgICBzeW5jIHN0YXRlLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IFZpZXdDaGFuZ2Ugd2l0aCB0aGUgZ2l2ZW4gZG9jcywgY2hhbmdlcywgYW5kIHN5bmMgc3RhdGUuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBUaGUgaU9TL0FuZHJvaWQgY2xpZW50cyBhbHdheXMgY29tcHV0ZSBsaW1ibyBkb2N1bWVudCBjaGFuZ2VzLlxuICAgIGFwcGx5Q2hhbmdlcyh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLlJvO1xuICAgICAgICB0aGlzLlJvID0gdC5SbywgdGhpcy5tdXRhdGVkS2V5cyA9IHQubXV0YXRlZEtleXM7XG4gICAgICAgIC8vIFNvcnQgY2hhbmdlcyBiYXNlZCBvbiB0eXBlIGFuZCBxdWVyeSBjb21wYXJhdG9yXG4gICAgICAgIGNvbnN0IGkgPSB0LnZvLm5vKCk7XG4gICAgICAgIGkuc29ydCgoKHQsIGUpID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICAgIGNhc2UgMCAvKiBBZGRlZCAqLyA6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuXG4gICAgICAgICAgICAgICAgICBjYXNlIDIgLyogTW9kaWZpZWQgKi8gOlxuICAgICAgICAgICAgICAgICAgY2FzZSAzIC8qIE1ldGFkYXRhICovIDpcbiAgICAgICAgICAgICAgICAgICAgLy8gQSBtZXRhZGF0YSBjaGFuZ2UgaXMgY29udmVydGVkIHRvIGEgbW9kaWZpZWQgY2hhbmdlIGF0IHRoZSBwdWJsaWNcbiAgICAgICAgICAgICAgICAgICAgLy8gYXBpIGxheWVyLiAgU2luY2Ugd2Ugc29ydCBieSBkb2N1bWVudCBrZXkgYW5kIHRoZW4gY2hhbmdlIHR5cGUsXG4gICAgICAgICAgICAgICAgICAgIC8vIG1ldGFkYXRhIGFuZCBtb2RpZmllZCBjaGFuZ2VzIG11c3QgYmUgc29ydGVkIGVxdWl2YWxlbnRseS5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDI7XG5cbiAgICAgICAgICAgICAgICAgIGNhc2UgMSAvKiBSZW1vdmVkICovIDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XG5cbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBMKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBuKHQpIC0gbihlKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAodC50eXBlLCBlLnR5cGUpIHx8IHRoaXMuQW8odC5kb2MsIGUuZG9jKSkpLCB0aGlzLlNvKG4pO1xuICAgICAgICBjb25zdCByID0gZSA/IHRoaXMuRG8oKSA6IFtdLCBvID0gMCA9PT0gdGhpcy5Jby5zaXplICYmIHRoaXMuY3VycmVudCA/IDEgLyogU3luY2VkICovIDogMCAvKiBMb2NhbCAqLyAsIGEgPSBvICE9PSB0aGlzLkVvO1xuICAgICAgICBpZiAodGhpcy5FbyA9IG8sIDAgIT09IGkubGVuZ3RoIHx8IGEpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc25hcHNob3Q6IG5ldyBCbyh0aGlzLnF1ZXJ5LCB0LlJvLCBzLCBpLCB0Lm11dGF0ZWRLZXlzLCAwIC8qIExvY2FsICovID09PSBvLCBhLCBcbiAgICAgICAgICAgICAgICAvKiBleGNsdWRlc01ldGFkYXRhQ2hhbmdlcz0gKi8gITEpLFxuICAgICAgICAgICAgICAgIENvOiByXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIC8vIG5vIGNoYW5nZXNcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIENvOiByXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgYW4gT25saW5lU3RhdGUgY2hhbmdlIHRvIHRoZSB2aWV3LCBwb3RlbnRpYWxseSBnZW5lcmF0aW5nIGFcbiAgICAgKiBWaWV3Q2hhbmdlIGlmIHRoZSB2aWV3J3Mgc3luY1N0YXRlIGNoYW5nZXMgYXMgYSByZXN1bHQuXG4gICAgICovICAgIHJvKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudCAmJiBcIk9mZmxpbmVcIiAvKiBPZmZsaW5lICovID09PSB0ID8gKFxuICAgICAgICAvLyBJZiB3ZSdyZSBvZmZsaW5lLCBzZXQgYGN1cnJlbnRgIHRvIGZhbHNlIGFuZCB0aGVuIGNhbGwgYXBwbHlDaGFuZ2VzKClcbiAgICAgICAgLy8gdG8gcmVmcmVzaCBvdXIgc3luY1N0YXRlIGFuZCBnZW5lcmF0ZSBhIFZpZXdDaGFuZ2UgYXMgYXBwcm9wcmlhdGUuIFdlXG4gICAgICAgIC8vIGFyZSBndWFyYW50ZWVkIHRvIGdldCBhIG5ldyBUYXJnZXRDaGFuZ2UgdGhhdCBzZXRzIGBjdXJyZW50YCBiYWNrIHRvXG4gICAgICAgIC8vIHRydWUgb25jZSB0aGUgY2xpZW50IGlzIGJhY2sgb25saW5lLlxuICAgICAgICB0aGlzLmN1cnJlbnQgPSAhMSwgdGhpcy5hcHBseUNoYW5nZXMoe1xuICAgICAgICAgICAgUm86IHRoaXMuUm8sXG4gICAgICAgICAgICB2bzogbmV3IExvLFxuICAgICAgICAgICAgbXV0YXRlZEtleXM6IHRoaXMubXV0YXRlZEtleXMsXG4gICAgICAgICAgICBCbjogITFcbiAgICAgICAgfSwgXG4gICAgICAgIC8qIHVwZGF0ZUxpbWJvRG9jdW1lbnRzPSAqLyAhMSkpIDoge1xuICAgICAgICAgICAgQ286IFtdXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciB0aGUgZG9jIGZvciB0aGUgZ2l2ZW4ga2V5IHNob3VsZCBiZSBpbiBsaW1iby5cbiAgICAgKi8gICAgTm8odCkge1xuICAgICAgICAvLyBJZiB0aGUgcmVtb3RlIGVuZCBzYXlzIGl0J3MgcGFydCBvZiB0aGlzIHF1ZXJ5LCBpdCdzIG5vdCBpbiBsaW1iby5cbiAgICAgICAgcmV0dXJuICF0aGlzLlRvLmhhcyh0KSAmJiAoXG4gICAgICAgIC8vIFRoZSBsb2NhbCBzdG9yZSBkb2Vzbid0IHRoaW5rIGl0J3MgYSByZXN1bHQsIHNvIGl0IHNob3VsZG4ndCBiZSBpbiBsaW1iby5cbiAgICAgICAgISF0aGlzLlJvLmhhcyh0KSAmJiAhdGhpcy5Sby5nZXQodCkuaGFzTG9jYWxNdXRhdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHN5bmNlZERvY3VtZW50cywgY3VycmVudCwgYW5kIGxpbWJvIGRvY3MgYmFzZWQgb24gdGhlIGdpdmVuIGNoYW5nZS5cbiAgICAgKiBSZXR1cm5zIHRoZSBsaXN0IG9mIGNoYW5nZXMgdG8gd2hpY2ggZG9jcyBhcmUgaW4gbGltYm8uXG4gICAgICovICAgIFNvKHQpIHtcbiAgICAgICAgdCAmJiAodC5hZGRlZERvY3VtZW50cy5mb3JFYWNoKCh0ID0+IHRoaXMuVG8gPSB0aGlzLlRvLmFkZCh0KSkpLCB0Lm1vZGlmaWVkRG9jdW1lbnRzLmZvckVhY2goKHQgPT4ge30pKSwgXG4gICAgICAgIHQucmVtb3ZlZERvY3VtZW50cy5mb3JFYWNoKCh0ID0+IHRoaXMuVG8gPSB0aGlzLlRvLmRlbGV0ZSh0KSkpLCB0aGlzLmN1cnJlbnQgPSB0LmN1cnJlbnQpO1xuICAgIH1cbiAgICBEbygpIHtcbiAgICAgICAgLy8gV2UgY2FuIG9ubHkgZGV0ZXJtaW5lIGxpbWJvIGRvY3VtZW50cyB3aGVuIHdlJ3JlIGluLXN5bmMgd2l0aCB0aGUgc2VydmVyLlxuICAgICAgICBpZiAoIXRoaXMuY3VycmVudCkgcmV0dXJuIFtdO1xuICAgICAgICAvLyBUT0RPKGtsaW10KTogRG8gdGhpcyBpbmNyZW1lbnRhbGx5IHNvIHRoYXQgaXQncyBub3QgcXVhZHJhdGljIHdoZW5cbiAgICAgICAgLy8gdXBkYXRpbmcgbWFueSBkb2N1bWVudHMuXG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuSW87XG4gICAgICAgIHRoaXMuSW8gPSBTbigpLCB0aGlzLlJvLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5Obyh0LmtleSkgJiYgKHRoaXMuSW8gPSB0aGlzLklvLmFkZCh0LmtleSkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIC8vIERpZmYgdGhlIG5ldyBsaW1ibyBkb2NzIHdpdGggdGhlIG9sZCBsaW1ibyBkb2NzLlxuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5Jby5oYXModCkgfHwgZS5wdXNoKG5ldyB0YSh0KSk7XG4gICAgICAgIH0pKSwgdGhpcy5Jby5mb3JFYWNoKChuID0+IHtcbiAgICAgICAgICAgIHQuaGFzKG4pIHx8IGUucHVzaChuZXcgWm8obikpO1xuICAgICAgICB9KSksIGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgaW4tbWVtb3J5IHN0YXRlIG9mIHRoZSBjdXJyZW50IHZpZXcgd2l0aCB0aGUgc3RhdGUgcmVhZCBmcm9tXG4gICAgICogcGVyc2lzdGVuY2UuXG4gICAgICpcbiAgICAgKiBXZSB1cGRhdGUgdGhlIHF1ZXJ5IHZpZXcgd2hlbmV2ZXIgYSBjbGllbnQncyBwcmltYXJ5IHN0YXR1cyBjaGFuZ2VzOlxuICAgICAqIC0gV2hlbiBhIGNsaWVudCB0cmFuc2l0aW9ucyBmcm9tIHByaW1hcnkgdG8gc2Vjb25kYXJ5LCBpdCBjYW4gbWlzc1xuICAgICAqICAgTG9jYWxTdG9yYWdlIHVwZGF0ZXMgYW5kIGl0cyBxdWVyeSB2aWV3cyBtYXkgdGVtcG9yYXJpbHkgbm90IGJlXG4gICAgICogICBzeW5jaHJvbml6ZWQgd2l0aCB0aGUgc3RhdGUgb24gZGlzay5cbiAgICAgKiAtIEZvciBzZWNvbmRhcnkgdG8gcHJpbWFyeSB0cmFuc2l0aW9ucywgdGhlIGNsaWVudCBuZWVkcyB0byB1cGRhdGUgdGhlIGxpc3RcbiAgICAgKiAgIG9mIGBzeW5jZWREb2N1bWVudHNgIHNpbmNlIHNlY29uZGFyeSBjbGllbnRzIHVwZGF0ZSB0aGVpciBxdWVyeSB2aWV3c1xuICAgICAqICAgYmFzZWQgcHVyZWx5IG9uIHN5bnRoZXNpemVkIFJlbW90ZUV2ZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBxdWVyeVJlc3VsdC5kb2N1bWVudHMgLSBUaGUgZG9jdW1lbnRzIHRoYXQgbWF0Y2ggdGhlIHF1ZXJ5IGFjY29yZGluZ1xuICAgICAqIHRvIHRoZSBMb2NhbFN0b3JlLlxuICAgICAqIEBwYXJhbSBxdWVyeVJlc3VsdC5yZW1vdGVLZXlzIC0gVGhlIGtleXMgb2YgdGhlIGRvY3VtZW50cyB0aGF0IG1hdGNoIHRoZVxuICAgICAqIHF1ZXJ5IGFjY29yZGluZyB0byB0aGUgYmFja2VuZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBWaWV3Q2hhbmdlIHRoYXQgcmVzdWx0ZWQgZnJvbSB0aGlzIHN5bmNocm9uaXphdGlvbi5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgIGtvKHQpIHtcbiAgICAgICAgdGhpcy5UbyA9IHQuem4sIHRoaXMuSW8gPSBTbigpO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5ibyh0LmRvY3VtZW50cyk7XG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5Q2hhbmdlcyhlLCAvKnVwZGF0ZUxpbWJvRG9jdW1lbnRzPSovICEwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHZpZXcgc25hcHNob3QgYXMgaWYgdGhpcyBxdWVyeSB3YXMganVzdCBsaXN0ZW5lZCB0by4gQ29udGFpbnNcbiAgICAgKiBhIGRvY3VtZW50IGFkZCBmb3IgZXZlcnkgZXhpc3RpbmcgZG9jdW1lbnQgYW5kIHRoZSBgZnJvbUNhY2hlYCBhbmRcbiAgICAgKiBgaGFzUGVuZGluZ1dyaXRlc2Agc3RhdHVzIG9mIHRoZSBhbHJlYWR5IGVzdGFibGlzaGVkIHZpZXcuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICB4bygpIHtcbiAgICAgICAgcmV0dXJuIEJvLmZyb21Jbml0aWFsRG9jdW1lbnRzKHRoaXMucXVlcnksIHRoaXMuUm8sIHRoaXMubXV0YXRlZEtleXMsIDAgLyogTG9jYWwgKi8gPT09IHRoaXMuRW8pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBRdWVyeVZpZXcgY29udGFpbnMgYWxsIG9mIHRoZSBkYXRhIHRoYXQgU3luY0VuZ2luZSBuZWVkcyB0byBrZWVwIHRyYWNrIG9mIGZvclxuICogYSBwYXJ0aWN1bGFyIHF1ZXJ5LlxuICovXG5jbGFzcyBuYSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIHF1ZXJ5IGl0c2VsZi5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgdGFyZ2V0IG51bWJlciBjcmVhdGVkIGJ5IHRoZSBjbGllbnQgdGhhdCBpcyB1c2VkIGluIHRoZSB3YXRjaFxuICAgICAqIHN0cmVhbSB0byBpZGVudGlmeSB0aGlzIHF1ZXJ5LlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSB2aWV3IGlzIHJlc3BvbnNpYmxlIGZvciBjb21wdXRpbmcgdGhlIGZpbmFsIG1lcmdlZCB0cnV0aCBvZiB3aGF0XG4gICAgICogZG9jcyBhcmUgaW4gdGhlIHF1ZXJ5LiBJdCBnZXRzIG5vdGlmaWVkIG9mIGxvY2FsIGFuZCByZW1vdGUgY2hhbmdlcyxcbiAgICAgKiBhbmQgYXBwbGllcyB0aGUgcXVlcnkgZmlsdGVycyBhbmQgbGltaXRzIHRvIGRldGVybWluZSB0aGUgbW9zdCBjb3JyZWN0XG4gICAgICogcG9zc2libGUgcmVzdWx0cy5cbiAgICAgKi9cbiAgICBuKSB7XG4gICAgICAgIHRoaXMucXVlcnkgPSB0LCB0aGlzLnRhcmdldElkID0gZSwgdGhpcy52aWV3ID0gbjtcbiAgICB9XG59XG5cbi8qKiBUcmFja3MgYSBsaW1ibyByZXNvbHV0aW9uLiAqLyBjbGFzcyBzYSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmtleSA9IHQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IHRvIHRydWUgb25jZSB3ZSd2ZSByZWNlaXZlZCBhIGRvY3VtZW50LiBUaGlzIGlzIHVzZWQgaW5cbiAgICAgICAgICogZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCgpIGFuZCB1bHRpbWF0ZWx5IHVzZWQgYnkgV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yIHRvXG4gICAgICAgICAqIGRlY2lkZSB3aGV0aGVyIGl0IG5lZWRzIHRvIG1hbnVmYWN0dXJlIGEgZGVsZXRlIGV2ZW50IGZvciB0aGUgdGFyZ2V0IG9uY2VcbiAgICAgICAgICogdGhlIHRhcmdldCBpcyBDVVJSRU5ULlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy4kbyA9ICExO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiBgU3luY0VuZ2luZWAgY29vcmRpbmF0aW5nIHdpdGggb3RoZXIgcGFydHMgb2YgU0RLLlxuICpcbiAqIFRoZSBwYXJ0cyBvZiBTeW5jRW5naW5lIHRoYXQgYWN0IGFzIGEgY2FsbGJhY2sgdG8gUmVtb3RlU3RvcmUgbmVlZCB0byBiZVxuICogcmVnaXN0ZXJlZCBpbmRpdmlkdWFsbHkuIFRoaXMgaXMgZG9uZSBpbiBgc3luY0VuZ2luZVdyaXRlKClgIGFuZFxuICogYHN5bmNFbmdpbmVMaXN0ZW4oKWAgKGFzIHdlbGwgYXMgYGFwcGx5UHJpbWFyeVN0YXRlKClgKSBhcyB0aGVzZSBtZXRob2RzXG4gKiBzZXJ2ZSBhcyBlbnRyeSBwb2ludHMgdG8gUmVtb3RlU3RvcmUncyBmdW5jdGlvbmFsaXR5LlxuICpcbiAqIE5vdGU6IHNvbWUgZmllbGQgZGVmaW5lZCBpbiB0aGlzIGNsYXNzIG1pZ2h0IGhhdmUgcHVibGljIGFjY2VzcyBsZXZlbCwgYnV0XG4gKiB0aGUgY2xhc3MgaXMgbm90IGV4cG9ydGVkIHNvIHRoZXkgYXJlIG9ubHkgYWNjZXNzaWJsZSBmcm9tIHRoaXMgbW9kdWxlLlxuICogVGhpcyBpcyB1c2VmdWwgdG8gaW1wbGVtZW50IG9wdGlvbmFsIGZlYXR1cmVzIChsaWtlIGJ1bmRsZXMpIGluIGZyZWVcbiAqIGZ1bmN0aW9ucywgc3VjaCB0aGF0IHRoZXkgYXJlIHRyZWUtc2hha2VhYmxlLlxuICovIGNsYXNzIGlhIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE1hbmFnZXMgc3RhdGUgc3luY2hyb25pemF0aW9uIGluIG11bHRpLXRhYiBlbnZpcm9ubWVudHMuXG4gICAgcywgaSwgcikge1xuICAgICAgICB0aGlzLmxvY2FsU3RvcmUgPSB0LCB0aGlzLnJlbW90ZVN0b3JlID0gZSwgdGhpcy5ldmVudE1hbmFnZXIgPSBuLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlID0gcywgXG4gICAgICAgIHRoaXMuY3VycmVudFVzZXIgPSBpLCB0aGlzLm1heENvbmN1cnJlbnRMaW1ib1Jlc29sdXRpb25zID0gciwgdGhpcy5GbyA9IHt9LCB0aGlzLk9vID0gbmV3IEdpKCh0ID0+IHZlKHQpKSwgYmUpLCBcbiAgICAgICAgdGhpcy5NbyA9IG5ldyBNYXAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGtleXMgb2YgZG9jdW1lbnRzIHRoYXQgYXJlIGluIGxpbWJvIGZvciB3aGljaCB3ZSBoYXZlbid0IHlldCBzdGFydGVkIGFcbiAgICAgICAgICogbGltYm8gcmVzb2x1dGlvbiBxdWVyeS4gVGhlIHN0cmluZ3MgaW4gdGhpcyBzZXQgYXJlIHRoZSByZXN1bHQgb2YgY2FsbGluZ1xuICAgICAgICAgKiBga2V5LnBhdGguY2Fub25pY2FsU3RyaW5nKClgIHdoZXJlIGBrZXlgIGlzIGEgYERvY3VtZW50S2V5YCBvYmplY3QuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSBgU2V0YCB0eXBlIHdhcyBjaG9zZW4gYmVjYXVzZSBpdCBwcm92aWRlcyBlZmZpY2llbnQgbG9va3VwIGFuZCByZW1vdmFsXG4gICAgICAgICAqIG9mIGFyYml0cmFyeSBlbGVtZW50cyBhbmQgaXQgYWxzbyBtYWludGFpbnMgaW5zZXJ0aW9uIG9yZGVyLCBwcm92aWRpbmcgdGhlXG4gICAgICAgICAqIGRlc2lyZWQgcXVldWUtbGlrZSBGSUZPIHNlbWFudGljcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuTG8gPSBuZXcgU2V0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEtlZXBzIHRyYWNrIG9mIHRoZSB0YXJnZXQgSUQgZm9yIGVhY2ggZG9jdW1lbnQgdGhhdCBpcyBpbiBsaW1ibyB3aXRoIGFuXG4gICAgICAgICAqIGFjdGl2ZSB0YXJnZXQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkJvID0gbmV3IGduKFN0LmNvbXBhcmF0b3IpLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEtlZXBzIHRyYWNrIG9mIHRoZSBpbmZvcm1hdGlvbiBhYm91dCBhbiBhY3RpdmUgbGltYm8gcmVzb2x1dGlvbiBmb3IgZWFjaFxuICAgICAgICAgKiBhY3RpdmUgdGFyZ2V0IElEIHRoYXQgd2FzIHN0YXJ0ZWQgZm9yIHRoZSBwdXJwb3NlIG9mIGxpbWJvIHJlc29sdXRpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLlVvID0gbmV3IE1hcCwgdGhpcy5xbyA9IG5ldyBWciwgXG4gICAgICAgIC8qKiBTdG9yZXMgdXNlciBjb21wbGV0aW9uIGhhbmRsZXJzLCBpbmRleGVkIGJ5IFVzZXIgYW5kIEJhdGNoSWQuICovXG4gICAgICAgIHRoaXMuS28gPSB7fSwgXG4gICAgICAgIC8qKiBTdG9yZXMgdXNlciBjYWxsYmFja3Mgd2FpdGluZyBmb3IgYWxsIHBlbmRpbmcgd3JpdGVzIHRvIGJlIGFja25vd2xlZGdlZC4gKi9cbiAgICAgICAgdGhpcy5qbyA9IG5ldyBNYXAsIHRoaXMuUW8gPSAkaS5yZSgpLCB0aGlzLm9ubGluZVN0YXRlID0gXCJVbmtub3duXCIgLyogVW5rbm93biAqLyAsIFxuICAgICAgICAvLyBUaGUgcHJpbWFyeSBzdGF0ZSBpcyBzZXQgdG8gYHRydWVgIG9yIGBmYWxzZWAgaW1tZWRpYXRlbHkgYWZ0ZXIgRmlyZXN0b3JlXG4gICAgICAgIC8vIHN0YXJ0dXAuIEluIHRoZSBpbnRlcmltLCBhIGNsaWVudCBzaG91bGQgb25seSBiZSBjb25zaWRlcmVkIHByaW1hcnkgaWZcbiAgICAgICAgLy8gYGlzUHJpbWFyeWAgaXMgdHJ1ZS5cbiAgICAgICAgdGhpcy5XbyA9IHZvaWQgMDtcbiAgICB9XG4gICAgZ2V0IGlzUHJpbWFyeUNsaWVudCgpIHtcbiAgICAgICAgcmV0dXJuICEwID09PSB0aGlzLldvO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbml0aWF0ZXMgdGhlIG5ldyBsaXN0ZW4sIHJlc29sdmVzIHByb21pc2Ugd2hlbiBsaXN0ZW4gZW5xdWV1ZWQgdG8gdGhlXG4gKiBzZXJ2ZXIuIEFsbCB0aGUgc3Vic2VxdWVudCB2aWV3IHNuYXBzaG90cyBvciBlcnJvcnMgYXJlIHNlbnQgdG8gdGhlXG4gKiBzdWJzY3JpYmVkIGhhbmRsZXJzLiBSZXR1cm5zIHRoZSBpbml0aWFsIHNuYXBzaG90LlxuICovXG5hc3luYyBmdW5jdGlvbiByYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IHhhKHQpO1xuICAgIGxldCBzLCBpO1xuICAgIGNvbnN0IHIgPSBuLk9vLmdldChlKTtcbiAgICBpZiAocikgXG4gICAgLy8gUE9SVElORyBOT1RFOiBXaXRoIE11bHRpLVRhYiBXZWIsIGl0IGlzIHBvc3NpYmxlIHRoYXQgYSBxdWVyeSB2aWV3XG4gICAgLy8gYWxyZWFkeSBleGlzdHMgd2hlbiBFdmVudE1hbmFnZXIgY2FsbHMgdXMgZm9yIHRoZSBmaXJzdCB0aW1lLiBUaGlzXG4gICAgLy8gaGFwcGVucyB3aGVuIHRoZSBwcmltYXJ5IHRhYiBpcyBhbHJlYWR5IGxpc3RlbmluZyB0byB0aGlzIHF1ZXJ5IG9uXG4gICAgLy8gYmVoYWxmIG9mIGFub3RoZXIgdGFiIGFuZCB0aGUgdXNlciBvZiB0aGUgcHJpbWFyeSBhbHNvIHN0YXJ0cyBsaXN0ZW5pbmdcbiAgICAvLyB0byB0aGUgcXVlcnkuIEV2ZW50TWFuYWdlciB3aWxsIG5vdCBoYXZlIGFuIGFzc2lnbmVkIHRhcmdldCBJRCBpbiB0aGlzXG4gICAgLy8gY2FzZSBhbmQgY2FsbHMgYGxpc3RlbmAgdG8gb2J0YWluIHRoaXMgSUQuXG4gICAgcyA9IHIudGFyZ2V0SWQsIG4uc2hhcmVkQ2xpZW50U3RhdGUuYWRkTG9jYWxRdWVyeVRhcmdldChzKSwgaSA9IHIudmlldy54bygpOyBlbHNlIHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IHByKG4ubG9jYWxTdG9yZSwgUmUoZSkpLCByID0gbi5zaGFyZWRDbGllbnRTdGF0ZS5hZGRMb2NhbFF1ZXJ5VGFyZ2V0KHQudGFyZ2V0SWQpO1xuICAgICAgICBzID0gdC50YXJnZXRJZCwgaSA9IGF3YWl0IG9hKG4sIGUsIHMsIFwiY3VycmVudFwiID09PSByKSwgbi5pc1ByaW1hcnlDbGllbnQgJiYgaG8obi5yZW1vdGVTdG9yZSwgdCk7XG4gICAgfVxuICAgIHJldHVybiBpO1xufVxuXG4vKipcbiAqIFJlZ2lzdGVycyBhIHZpZXcgZm9yIGEgcHJldmlvdXNseSB1bmtub3duIHF1ZXJ5IGFuZCBjb21wdXRlcyBpdHMgaW5pdGlhbFxuICogc25hcHNob3QuXG4gKi8gYXN5bmMgZnVuY3Rpb24gb2EodCwgZSwgbiwgcykge1xuICAgIC8vIFBPUlRJTkcgTk9URTogT24gV2ViIG9ubHksIHdlIGluamVjdCB0aGUgY29kZSB0aGF0IHJlZ2lzdGVycyBuZXcgTGltYm9cbiAgICAvLyB0YXJnZXRzIGJhc2VkIG9uIHZpZXcgY2hhbmdlcy4gVGhpcyBhbGxvd3MgdXMgdG8gb25seSBkZXBlbmQgb24gTGltYm9cbiAgICAvLyBjaGFuZ2VzIHdoZW4gdXNlciBjb2RlIGluY2x1ZGVzIHF1ZXJpZXMuXG4gICAgdC5HbyA9IChlLCBuLCBzKSA9PiBhc3luYyBmdW5jdGlvbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIGxldCBpID0gZS52aWV3LmJvKG4pO1xuICAgICAgICBpLkJuICYmIChcbiAgICAgICAgLy8gVGhlIHF1ZXJ5IGhhcyBhIGxpbWl0IGFuZCBzb21lIGRvY3Mgd2VyZSByZW1vdmVkLCBzbyB3ZSBuZWVkXG4gICAgICAgIC8vIHRvIHJlLXJ1biB0aGUgcXVlcnkgYWdhaW5zdCB0aGUgbG9jYWwgc3RvcmUgdG8gbWFrZSBzdXJlIHdlXG4gICAgICAgIC8vIGRpZG4ndCBsb3NlIGFueSBnb29kIGRvY3MgdGhhdCBoYWQgYmVlbiBwYXN0IHRoZSBsaW1pdC5cbiAgICAgICAgaSA9IGF3YWl0IEVyKHQubG9jYWxTdG9yZSwgZS5xdWVyeSwgXG4gICAgICAgIC8qIHVzZVByZXZpb3VzUmVzdWx0cz0gKi8gITEpLnRoZW4oKCh7ZG9jdW1lbnRzOiB0fSkgPT4gZS52aWV3LmJvKHQsIGkpKSkpO1xuICAgICAgICBjb25zdCByID0gcyAmJiBzLnRhcmdldENoYW5nZXMuZ2V0KGUudGFyZ2V0SWQpLCBvID0gZS52aWV3LmFwcGx5Q2hhbmdlcyhpLCBcbiAgICAgICAgLyogdXBkYXRlTGltYm9Eb2N1bWVudHM9ICovIHQuaXNQcmltYXJ5Q2xpZW50LCByKTtcbiAgICAgICAgcmV0dXJuIHBhKHQsIGUudGFyZ2V0SWQsIG8uQ28pLCBvLnNuYXBzaG90O1xuICAgIH0odCwgZSwgbiwgcyk7XG4gICAgY29uc3QgaSA9IGF3YWl0IEVyKHQubG9jYWxTdG9yZSwgZSwgXG4gICAgLyogdXNlUHJldmlvdXNSZXN1bHRzPSAqLyAhMCksIHIgPSBuZXcgZWEoZSwgaS56biksIG8gPSByLmJvKGkuZG9jdW1lbnRzKSwgYSA9IGtuLmNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZShuLCBzICYmIFwiT2ZmbGluZVwiIC8qIE9mZmxpbmUgKi8gIT09IHQub25saW5lU3RhdGUpLCBjID0gci5hcHBseUNoYW5nZXMobywgXG4gICAgLyogdXBkYXRlTGltYm9Eb2N1bWVudHM9ICovIHQuaXNQcmltYXJ5Q2xpZW50LCBhKTtcbiAgICBwYSh0LCBuLCBjLkNvKTtcbiAgICBjb25zdCB1ID0gbmV3IG5hKGUsIG4sIHIpO1xuICAgIHJldHVybiB0Lk9vLnNldChlLCB1KSwgdC5Nby5oYXMobikgPyB0Lk1vLmdldChuKS5wdXNoKGUpIDogdC5Nby5zZXQobiwgWyBlIF0pLCBjLnNuYXBzaG90O1xufVxuXG4vKiogU3RvcHMgbGlzdGVuaW5nIHRvIHRoZSBxdWVyeS4gKi8gYXN5bmMgZnVuY3Rpb24gYWEodCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpLCBzID0gbi5Pby5nZXQoZSksIGkgPSBuLk1vLmdldChzLnRhcmdldElkKTtcbiAgICBpZiAoaS5sZW5ndGggPiAxKSByZXR1cm4gbi5Nby5zZXQocy50YXJnZXRJZCwgaS5maWx0ZXIoKHQgPT4gIWJlKHQsIGUpKSkpLCB2b2lkIG4uT28uZGVsZXRlKGUpO1xuICAgIC8vIE5vIG90aGVyIHF1ZXJpZXMgYXJlIG1hcHBlZCB0byB0aGUgdGFyZ2V0LCBjbGVhbiB1cCB0aGUgcXVlcnkgYW5kIHRoZSB0YXJnZXQuXG4gICAgICAgIGlmIChuLmlzUHJpbWFyeUNsaWVudCkge1xuICAgICAgICAvLyBXZSBuZWVkIHRvIHJlbW92ZSB0aGUgbG9jYWwgcXVlcnkgdGFyZ2V0IGZpcnN0IHRvIGFsbG93IHVzIHRvIHZlcmlmeVxuICAgICAgICAvLyB3aGV0aGVyIGFueSBvdGhlciBjbGllbnQgaXMgc3RpbGwgaW50ZXJlc3RlZCBpbiB0aGlzIHRhcmdldC5cbiAgICAgICAgbi5zaGFyZWRDbGllbnRTdGF0ZS5yZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0KHMudGFyZ2V0SWQpO1xuICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLmlzQWN0aXZlUXVlcnlUYXJnZXQocy50YXJnZXRJZCkgfHwgYXdhaXQgVHIobi5sb2NhbFN0b3JlLCBzLnRhcmdldElkLCBcbiAgICAgICAgLyprZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YT0qLyAhMSkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgbi5zaGFyZWRDbGllbnRTdGF0ZS5jbGVhclF1ZXJ5U3RhdGUocy50YXJnZXRJZCksIGxvKG4ucmVtb3RlU3RvcmUsIHMudGFyZ2V0SWQpLCBcbiAgICAgICAgICAgIGdhKG4sIHMudGFyZ2V0SWQpO1xuICAgICAgICB9KSkuY2F0Y2goQmkpO1xuICAgIH0gZWxzZSBnYShuLCBzLnRhcmdldElkKSwgYXdhaXQgVHIobi5sb2NhbFN0b3JlLCBzLnRhcmdldElkLCBcbiAgICAvKmtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhPSovICEwKTtcbn1cblxuLyoqXG4gKiBJbml0aWF0ZXMgdGhlIHdyaXRlIG9mIGxvY2FsIG11dGF0aW9uIGJhdGNoIHdoaWNoIGludm9sdmVzIGFkZGluZyB0aGVcbiAqIHdyaXRlcyB0byB0aGUgbXV0YXRpb24gcXVldWUsIG5vdGlmeWluZyB0aGUgcmVtb3RlIHN0b3JlIGFib3V0IG5ld1xuICogbXV0YXRpb25zIGFuZCByYWlzaW5nIGV2ZW50cyBmb3IgYW55IGNoYW5nZXMgdGhpcyB3cml0ZSBjYXVzZWQuXG4gKlxuICogVGhlIHByb21pc2UgcmV0dXJuZWQgYnkgdGhpcyBjYWxsIGlzIHJlc29sdmVkIHdoZW4gdGhlIGFib3ZlIHN0ZXBzXG4gKiBoYXZlIGNvbXBsZXRlZCwgKm5vdCogd2hlbiB0aGUgd3JpdGUgd2FzIGFja2VkIGJ5IHRoZSBiYWNrZW5kLiBUaGVcbiAqIHVzZXJDYWxsYmFjayBpcyByZXNvbHZlZCBvbmNlIHRoZSB3cml0ZSB3YXMgYWNrZWQvcmVqZWN0ZWQgYnkgdGhlXG4gKiBiYWNrZW5kIChvciBmYWlsZWQgbG9jYWxseSBmb3IgYW55IG90aGVyIHJlYXNvbikuXG4gKi8gYXN5bmMgZnVuY3Rpb24gY2EodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSAkYSh0KTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHEodCksIHMgPSBhdC5ub3coKSwgaSA9IGUucmVkdWNlKCgodCwgZSkgPT4gdC5hZGQoZS5rZXkpKSwgU24oKSk7XG4gICAgICAgICAgICBsZXQgcjtcbiAgICAgICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiTG9jYWxseSB3cml0ZSBtdXRhdGlvbnNcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4gbi5Xbi52bih0LCBpKS5uZXh0KChpID0+IHtcbiAgICAgICAgICAgICAgICByID0gaTtcbiAgICAgICAgICAgICAgICAvLyBGb3Igbm9uLWlkZW1wb3RlbnQgbXV0YXRpb25zIChzdWNoIGFzIGBGaWVsZFZhbHVlLmluY3JlbWVudCgpYCksXG4gICAgICAgICAgICAgICAgLy8gd2UgcmVjb3JkIHRoZSBiYXNlIHN0YXRlIGluIGEgc2VwYXJhdGUgcGF0Y2ggbXV0YXRpb24uIFRoaXMgaXNcbiAgICAgICAgICAgICAgICAvLyBsYXRlciB1c2VkIHRvIGd1YXJhbnRlZSBjb25zaXN0ZW50IHZhbHVlcyBhbmQgcHJldmVudHMgZmxpY2tlclxuICAgICAgICAgICAgICAgIC8vIGV2ZW4gaWYgdGhlIGJhY2tlbmQgc2VuZHMgdXMgYW4gdXBkYXRlIHRoYXQgYWxyZWFkeSBpbmNsdWRlcyBvdXJcbiAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0uXG4gICAgICAgICAgICAgICAgY29uc3QgbyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBlbih0LCByLmdldCh0LmtleSkpO1xuICAgICAgICAgICAgICAgICAgICBudWxsICE9IGUgJiYgXG4gICAgICAgICAgICAgICAgICAgIC8vIE5PVEU6IFRoZSBiYXNlIHN0YXRlIHNob3VsZCBvbmx5IGJlIGFwcGxpZWQgaWYgdGhlcmUncyBzb21lXG4gICAgICAgICAgICAgICAgICAgIC8vIGV4aXN0aW5nIGRvY3VtZW50IHRvIG92ZXJyaWRlLCBzbyB1c2UgYSBQcmVjb25kaXRpb24gb2ZcbiAgICAgICAgICAgICAgICAgICAgLy8gZXhpc3RzPXRydWVcbiAgICAgICAgICAgICAgICAgICAgby5wdXNoKG5ldyBvbih0LmtleSwgZSwgUXQoZS52YWx1ZS5tYXBWYWx1ZSksIEplLmV4aXN0cyghMCkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4uQW4uYWRkTXV0YXRpb25CYXRjaCh0LCBzLCBvLCBlKTtcbiAgICAgICAgICAgIH0pKSkpLnRoZW4oKHQgPT4gKHQuYXBwbHlUb0xvY2FsRG9jdW1lbnRTZXQociksIHtcbiAgICAgICAgICAgICAgICBiYXRjaElkOiB0LmJhdGNoSWQsXG4gICAgICAgICAgICAgICAgY2hhbmdlczogclxuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgfShzLmxvY2FsU3RvcmUsIGUpO1xuICAgICAgICBzLnNoYXJlZENsaWVudFN0YXRlLmFkZFBlbmRpbmdNdXRhdGlvbih0LmJhdGNoSWQpLCBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgICAgICBsZXQgcyA9IHQuS29bdC5jdXJyZW50VXNlci50b0tleSgpXTtcbiAgICAgICAgICAgIHMgfHwgKHMgPSBuZXcgZ24oaXQpKTtcbiAgICAgICAgICAgIHMgPSBzLmluc2VydChlLCBuKSwgdC5Lb1t0LmN1cnJlbnRVc2VyLnRvS2V5KCldID0gcztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFJlc29sdmVzIG9yIHJlamVjdHMgdGhlIHVzZXIgY2FsbGJhY2sgZm9yIHRoZSBnaXZlbiBiYXRjaCBhbmQgdGhlbiBkaXNjYXJkc1xuICogaXQuXG4gKi8gKHMsIHQuYmF0Y2hJZCwgbiksIGF3YWl0IElhKHMsIHQuY2hhbmdlcyksIGF3YWl0IFJvKHMucmVtb3RlU3RvcmUpO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgLy8gSWYgd2UgY2FuJ3QgcGVyc2lzdCB0aGUgbXV0YXRpb24sIHdlIHJlamVjdCB0aGUgdXNlciBjYWxsYmFjayBhbmRcbiAgICAgICAgLy8gZG9uJ3Qgc2VuZCB0aGUgbXV0YXRpb24uIFRoZSB1c2VyIGNhbiB0aGVuIHJldHJ5IHRoZSB3cml0ZS5cbiAgICAgICAgY29uc3QgZSA9IE9vKHQsIFwiRmFpbGVkIHRvIHBlcnNpc3Qgd3JpdGVcIik7XG4gICAgICAgIG4ucmVqZWN0KGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBcHBsaWVzIG9uZSByZW1vdGUgZXZlbnQgdG8gdGhlIHN5bmMgZW5naW5lLCBub3RpZnlpbmcgYW55IHZpZXdzIG9mIHRoZVxuICogY2hhbmdlcywgYW5kIHJlbGVhc2luZyBhbnkgcGVuZGluZyBtdXRhdGlvbiBiYXRjaGVzIHRoYXQgd291bGQgYmVjb21lXG4gKiB2aXNpYmxlIGJlY2F1c2Ugb2YgdGhlIHNuYXBzaG90IHZlcnNpb24gdGhlIHJlbW90ZSBldmVudCBjb250YWlucy5cbiAqLyBhc3luYyBmdW5jdGlvbiB1YSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IHEodCk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IG1yKG4ubG9jYWxTdG9yZSwgZSk7XG4gICAgICAgIC8vIFVwZGF0ZSBgcmVjZWl2ZWREb2N1bWVudGAgYXMgYXBwcm9wcmlhdGUgZm9yIGFueSBsaW1ibyB0YXJnZXRzLlxuICAgICAgICAgICAgICAgIGUudGFyZ2V0Q2hhbmdlcy5mb3JFYWNoKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IG4uVW8uZ2V0KGUpO1xuICAgICAgICAgICAgcyAmJiAoXG4gICAgICAgICAgICAvLyBTaW5jZSB0aGlzIGlzIGEgbGltYm8gcmVzb2x1dGlvbiBsb29rdXAsIGl0J3MgZm9yIGEgc2luZ2xlIGRvY3VtZW50XG4gICAgICAgICAgICAvLyBhbmQgaXQgY291bGQgYmUgYWRkZWQsIG1vZGlmaWVkLCBvciByZW1vdmVkLCBidXQgbm90IGEgY29tYmluYXRpb24uXG4gICAgICAgICAgICBCKHQuYWRkZWREb2N1bWVudHMuc2l6ZSArIHQubW9kaWZpZWREb2N1bWVudHMuc2l6ZSArIHQucmVtb3ZlZERvY3VtZW50cy5zaXplIDw9IDEpLCBcbiAgICAgICAgICAgIHQuYWRkZWREb2N1bWVudHMuc2l6ZSA+IDAgPyBzLiRvID0gITAgOiB0Lm1vZGlmaWVkRG9jdW1lbnRzLnNpemUgPiAwID8gQihzLiRvKSA6IHQucmVtb3ZlZERvY3VtZW50cy5zaXplID4gMCAmJiAoQihzLiRvKSwgXG4gICAgICAgICAgICBzLiRvID0gITEpKTtcbiAgICAgICAgfSkpLCBhd2FpdCBJYShuLCB0LCBlKTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIGF3YWl0IEJpKHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBcHBsaWVzIGFuIE9ubGluZVN0YXRlIGNoYW5nZSB0byB0aGUgc3luYyBlbmdpbmUgYW5kIG5vdGlmaWVzIGFueSB2aWV3cyBvZlxuICogdGhlIGNoYW5nZS5cbiAqLyBmdW5jdGlvbiBoYSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHEodCk7XG4gICAgLy8gSWYgd2UgYXJlIHRoZSBzZWNvbmRhcnkgY2xpZW50LCB3ZSBleHBsaWNpdGx5IGlnbm9yZSB0aGUgcmVtb3RlIHN0b3JlJ3NcbiAgICAvLyBvbmxpbmUgc3RhdGUgKHRoZSBsb2NhbCBjbGllbnQgbWF5IGdvIG9mZmxpbmUsIGV2ZW4gdGhvdWdoIHRoZSBwcmltYXJ5XG4gICAgLy8gdGFiIHJlbWFpbnMgb25saW5lKSBhbmQgb25seSBhcHBseSB0aGUgcHJpbWFyeSB0YWIncyBvbmxpbmUgc3RhdGUgZnJvbVxuICAgIC8vIFNoYXJlZENsaWVudFN0YXRlLlxuICAgICAgICBpZiAocy5pc1ByaW1hcnlDbGllbnQgJiYgMCAvKiBSZW1vdGVTdG9yZSAqLyA9PT0gbiB8fCAhcy5pc1ByaW1hcnlDbGllbnQgJiYgMSAvKiBTaGFyZWRDbGllbnRTdGF0ZSAqLyA9PT0gbikge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHMuT28uZm9yRWFjaCgoKG4sIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBzLnZpZXcucm8oZSk7XG4gICAgICAgICAgICBpLnNuYXBzaG90ICYmIHQucHVzaChpLnNuYXBzaG90KTtcbiAgICAgICAgfSkpLCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gcSh0KTtcbiAgICAgICAgICAgIG4ub25saW5lU3RhdGUgPSBlO1xuICAgICAgICAgICAgbGV0IHMgPSAhMTtcbiAgICAgICAgICAgIG4ucXVlcmllcy5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBuLmxpc3RlbmVycykgXG4gICAgICAgICAgICAgICAgLy8gUnVuIGdsb2JhbCBzbmFwc2hvdCBsaXN0ZW5lcnMgaWYgYSBjb25zaXN0ZW50IHNuYXBzaG90IGhhcyBiZWVuIGVtaXR0ZWQuXG4gICAgICAgICAgICAgICAgdC5ybyhlKSAmJiAocyA9ICEwKTtcbiAgICAgICAgICAgIH0pKSwgcyAmJiBHbyhuKTtcbiAgICAgICAgfShzLmV2ZW50TWFuYWdlciwgZSksIHQubGVuZ3RoICYmIHMuRm8uUHIodCksIHMub25saW5lU3RhdGUgPSBlLCBzLmlzUHJpbWFyeUNsaWVudCAmJiBzLnNoYXJlZENsaWVudFN0YXRlLnNldE9ubGluZVN0YXRlKGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZWplY3RzIHRoZSBsaXN0ZW4gZm9yIHRoZSBnaXZlbiB0YXJnZXRJRC4gVGhpcyBjYW4gYmUgdHJpZ2dlcmVkIGJ5IHRoZVxuICogYmFja2VuZCBmb3IgYW55IGFjdGl2ZSB0YXJnZXQuXG4gKlxuICogQHBhcmFtIHN5bmNFbmdpbmUgLSBUaGUgc3luYyBlbmdpbmUgaW1wbGVtZW50YXRpb24uXG4gKiBAcGFyYW0gdGFyZ2V0SWQgLSBUaGUgdGFyZ2V0SUQgY29ycmVzcG9uZHMgdG8gb25lIHByZXZpb3VzbHkgaW5pdGlhdGVkIGJ5IHRoZVxuICogdXNlciBhcyBwYXJ0IG9mIFRhcmdldERhdGEgcGFzc2VkIHRvIGxpc3RlbigpIG9uIFJlbW90ZVN0b3JlLlxuICogQHBhcmFtIGVyciAtIEEgZGVzY3JpcHRpb24gb2YgdGhlIGNvbmRpdGlvbiB0aGF0IGhhcyBmb3JjZWQgdGhlIHJlamVjdGlvbi5cbiAqIE5lYXJseSBhbHdheXMgdGhpcyB3aWxsIGJlIGFuIGluZGljYXRpb24gdGhhdCB0aGUgdXNlciBpcyBubyBsb25nZXJcbiAqIGF1dGhvcml6ZWQgdG8gc2VlIHRoZSBkYXRhIG1hdGNoaW5nIHRoZSB0YXJnZXQuXG4gKi8gYXN5bmMgZnVuY3Rpb24gbGEodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBxKHQpO1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgICAgIHMuc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlUXVlcnlTdGF0ZShlLCBcInJlamVjdGVkXCIsIG4pO1xuICAgIGNvbnN0IGkgPSBzLlVvLmdldChlKSwgciA9IGkgJiYgaS5rZXk7XG4gICAgaWYgKHIpIHtcbiAgICAgICAgLy8gVE9ETyhrbGltdCk6IFdlIHJlYWxseSBvbmx5IHNob3VsZCBkbyB0aGUgZm9sbG93aW5nIG9uIHBlcm1pc3Npb25cbiAgICAgICAgLy8gZGVuaWVkIGVycm9ycywgYnV0IHdlIGRvbid0IGhhdmUgdGhlIGNhdXNlIGNvZGUgaGVyZS5cbiAgICAgICAgLy8gSXQncyBhIGxpbWJvIGRvYy4gQ3JlYXRlIGEgc3ludGhldGljIGV2ZW50IHNheWluZyBpdCB3YXMgZGVsZXRlZC5cbiAgICAgICAgLy8gVGhpcyBpcyBraW5kIG9mIGEgaGFjay4gSWRlYWxseSwgd2Ugd291bGQgaGF2ZSBhIG1ldGhvZCBpbiB0aGUgbG9jYWxcbiAgICAgICAgLy8gc3RvcmUgdG8gcHVyZ2UgYSBkb2N1bWVudC4gSG93ZXZlciwgaXQgd291bGQgYmUgdHJpY2t5IHRvIGtlZXAgYWxsIG9mXG4gICAgICAgIC8vIHRoZSBsb2NhbCBzdG9yZSdzIGludmFyaWFudHMgd2l0aCBhbm90aGVyIG1ldGhvZC5cbiAgICAgICAgbGV0IHQgPSBuZXcgZ24oU3QuY29tcGFyYXRvcik7XG4gICAgICAgIHQgPSB0Lmluc2VydChyLCBXdC5uZXdOb0RvY3VtZW50KHIsIGN0Lm1pbigpKSk7XG4gICAgICAgIGNvbnN0IG4gPSBTbigpLmFkZChyKSwgaSA9IG5ldyBObihjdC5taW4oKSwgXG4gICAgICAgIC8qIHRhcmdldENoYW5nZXM9ICovIG5ldyBNYXAsIFxuICAgICAgICAvKiB0YXJnZXRNaXNtYXRjaGVzPSAqLyBuZXcgVG4oaXQpLCB0LCBuKTtcbiAgICAgICAgYXdhaXQgdWEocywgaSksIFxuICAgICAgICAvLyBTaW5jZSB0aGlzIHF1ZXJ5IGZhaWxlZCwgd2Ugd29uJ3Qgd2FudCB0byBtYW51YWxseSB1bmxpc3RlbiB0byBpdC5cbiAgICAgICAgLy8gV2Ugb25seSByZW1vdmUgaXQgZnJvbSBib29ra2VlcGluZyBhZnRlciB3ZSBzdWNjZXNzZnVsbHkgYXBwbGllZCB0aGVcbiAgICAgICAgLy8gUmVtb3RlRXZlbnQuIElmIGBhcHBseVJlbW90ZUV2ZW50KClgIHRocm93cywgd2Ugd2FudCB0byByZS1saXN0ZW4gdG9cbiAgICAgICAgLy8gdGhpcyBxdWVyeSB3aGVuIHRoZSBSZW1vdGVTdG9yZSByZXN0YXJ0cyB0aGUgV2F0Y2ggc3RyZWFtLCB3aGljaCBzaG91bGRcbiAgICAgICAgLy8gcmUtdHJpZ2dlciB0aGUgdGFyZ2V0IGZhaWx1cmUuXG4gICAgICAgIHMuQm8gPSBzLkJvLnJlbW92ZShyKSwgcy5Vby5kZWxldGUoZSksIEVhKHMpO1xuICAgIH0gZWxzZSBhd2FpdCBUcihzLmxvY2FsU3RvcmUsIGUsIFxuICAgIC8qIGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhICovICExKS50aGVuKCgoKSA9PiBnYShzLCBlLCBuKSkpLmNhdGNoKEJpKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZmEodCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpLCBzID0gZS5iYXRjaC5iYXRjaElkO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCB3cihuLmxvY2FsU3RvcmUsIGUpO1xuICAgICAgICAvLyBUaGUgbG9jYWwgc3RvcmUgbWF5IG9yIG1heSBub3QgYmUgYWJsZSB0byBhcHBseSB0aGUgd3JpdGUgcmVzdWx0IGFuZFxuICAgICAgICAvLyByYWlzZSBldmVudHMgaW1tZWRpYXRlbHkgKGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSB3YXRjaGVyIGlzIGNhdWdodFxuICAgICAgICAvLyB1cCksIHNvIHdlIHJhaXNlIHVzZXIgY2FsbGJhY2tzIGZpcnN0IHNvIHRoYXQgdGhleSBjb25zaXN0ZW50bHkgaGFwcGVuXG4gICAgICAgIC8vIGJlZm9yZSBsaXN0ZW4gZXZlbnRzLlxuICAgICAgICAgICAgICAgIG1hKG4sIHMsIC8qZXJyb3I9Ki8gbnVsbCksIF9hKG4sIHMpLCBuLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZU11dGF0aW9uU3RhdGUocywgXCJhY2tub3dsZWRnZWRcIiksIFxuICAgICAgICBhd2FpdCBJYShuLCB0KTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIGF3YWl0IEJpKHQpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gZGEodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBxKHQpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gcSh0KTtcbiAgICAgICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiUmVqZWN0IGJhdGNoXCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKHQgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBzO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLkFuLmxvb2t1cE11dGF0aW9uQmF0Y2godCwgZSkubmV4dCgoZSA9PiAoQihudWxsICE9PSBlKSwgcyA9IGUua2V5cygpLCBuLkFuLnJlbW92ZU11dGF0aW9uQmF0Y2godCwgZSkpKSkubmV4dCgoKCkgPT4gbi5Bbi5wZXJmb3JtQ29uc2lzdGVuY3lDaGVjayh0KSkpLm5leHQoKCgpID0+IG4uV24udm4odCwgcykpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFJldHVybnMgdGhlIGxhcmdlc3QgKGxhdGVzdCkgYmF0Y2ggaWQgaW4gbXV0YXRpb24gcXVldWUgdGhhdCBpcyBwZW5kaW5nXG4gKiBzZXJ2ZXIgcmVzcG9uc2UuXG4gKlxuICogUmV0dXJucyBgQkFUQ0hJRF9VTktOT1dOYCBpZiB0aGUgcXVldWUgaXMgZW1wdHkuXG4gKi8gKHMubG9jYWxTdG9yZSwgZSk7XG4gICAgICAgIC8vIFRoZSBsb2NhbCBzdG9yZSBtYXkgb3IgbWF5IG5vdCBiZSBhYmxlIHRvIGFwcGx5IHRoZSB3cml0ZSByZXN1bHQgYW5kXG4gICAgICAgIC8vIHJhaXNlIGV2ZW50cyBpbW1lZGlhdGVseSAoZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIHdhdGNoZXIgaXMgY2F1Z2h0IHVwKSxcbiAgICAgICAgLy8gc28gd2UgcmFpc2UgdXNlciBjYWxsYmFja3MgZmlyc3Qgc28gdGhhdCB0aGV5IGNvbnNpc3RlbnRseSBoYXBwZW4gYmVmb3JlXG4gICAgICAgIC8vIGxpc3RlbiBldmVudHMuXG4gICAgICAgICAgICAgICAgbWEocywgZSwgbiksIF9hKHMsIGUpLCBzLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZU11dGF0aW9uU3RhdGUoZSwgXCJyZWplY3RlZFwiLCBuKSwgXG4gICAgICAgIGF3YWl0IElhKHMsIHQpO1xuICAgIH0gY2F0Y2ggKG4pIHtcbiAgICAgICAgYXdhaXQgQmkobik7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlZ2lzdGVycyBhIHVzZXIgY2FsbGJhY2sgdGhhdCByZXNvbHZlcyB3aGVuIGFsbCBwZW5kaW5nIG11dGF0aW9ucyBhdCB0aGUgbW9tZW50IG9mIGNhbGxpbmdcbiAqIGFyZSBhY2tub3dsZWRnZWQgLlxuICovIGFzeW5jIGZ1bmN0aW9uIHdhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KTtcbiAgICBnbyhuLnJlbW90ZVN0b3JlKSB8fCAkKFwiU3luY0VuZ2luZVwiLCBcIlRoZSBuZXR3b3JrIGlzIGRpc2FibGVkLiBUaGUgdGFzayByZXR1cm5lZCBieSAnYXdhaXRQZW5kaW5nV3JpdGVzKCknIHdpbGwgbm90IGNvbXBsZXRlIHVudGlsIHRoZSBuZXR3b3JrIGlzIGVuYWJsZWQuXCIpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gcSh0KTtcbiAgICAgICAgICAgIHJldHVybiBlLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IGhpZ2hlc3QgdW5hY2tub3dsZWRnZWQgYmF0Y2ggaWRcIiwgXCJyZWFkb25seVwiLCAodCA9PiBlLkFuLmdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQodCkpKTtcbiAgICAgICAgfShuLmxvY2FsU3RvcmUpO1xuICAgICAgICBpZiAoLTEgPT09IHQpIFxuICAgICAgICAvLyBUcmlnZ2VyIHRoZSBjYWxsYmFjayByaWdodCBhd2F5IGlmIHRoZXJlIGlzIG5vIHBlbmRpbmcgd3JpdGVzIGF0IHRoZSBtb21lbnQuXG4gICAgICAgIHJldHVybiB2b2lkIGUucmVzb2x2ZSgpO1xuICAgICAgICBjb25zdCBzID0gbi5qby5nZXQodCkgfHwgW107XG4gICAgICAgIHMucHVzaChlKSwgbi5qby5zZXQodCwgcyk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICBjb25zdCBuID0gT28odCwgXCJJbml0aWFsaXphdGlvbiBvZiB3YWl0Rm9yUGVuZGluZ1dyaXRlcygpIG9wZXJhdGlvbiBmYWlsZWRcIik7XG4gICAgICAgIGUucmVqZWN0KG4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUcmlnZ2VycyB0aGUgY2FsbGJhY2tzIHRoYXQgYXJlIHdhaXRpbmcgZm9yIHRoaXMgYmF0Y2ggaWQgdG8gZ2V0IGFja25vd2xlZGdlZCBieSBzZXJ2ZXIsXG4gKiBpZiB0aGVyZSBhcmUgYW55LlxuICovIGZ1bmN0aW9uIF9hKHQsIGUpIHtcbiAgICAodC5qby5nZXQoZSkgfHwgW10pLmZvckVhY2goKHQgPT4ge1xuICAgICAgICB0LnJlc29sdmUoKTtcbiAgICB9KSksIHQuam8uZGVsZXRlKGUpO1xufVxuXG4vKiogUmVqZWN0IGFsbCBvdXRzdGFuZGluZyBjYWxsYmFja3Mgd2FpdGluZyBmb3IgcGVuZGluZyB3cml0ZXMgdG8gY29tcGxldGUuICovIGZ1bmN0aW9uIG1hKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gcSh0KTtcbiAgICBsZXQgaSA9IHMuS29bcy5jdXJyZW50VXNlci50b0tleSgpXTtcbiAgICAvLyBOT1RFOiBNdXRhdGlvbnMgcmVzdG9yZWQgZnJvbSBwZXJzaXN0ZW5jZSB3b24ndCBoYXZlIGNhbGxiYWNrcywgc28gaXQnc1xuICAgIC8vIG9rYXkgZm9yIHRoZXJlIHRvIGJlIG5vIGNhbGxiYWNrIGZvciB0aGlzIElELlxuICAgICAgICBpZiAoaSkge1xuICAgICAgICBjb25zdCB0ID0gaS5nZXQoZSk7XG4gICAgICAgIHQgJiYgKG4gPyB0LnJlamVjdChuKSA6IHQucmVzb2x2ZSgpLCBpID0gaS5yZW1vdmUoZSkpLCBzLktvW3MuY3VycmVudFVzZXIudG9LZXkoKV0gPSBpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2EodCwgZSwgbiA9IG51bGwpIHtcbiAgICB0LnNoYXJlZENsaWVudFN0YXRlLnJlbW92ZUxvY2FsUXVlcnlUYXJnZXQoZSk7XG4gICAgZm9yIChjb25zdCBzIG9mIHQuTW8uZ2V0KGUpKSB0Lk9vLmRlbGV0ZShzKSwgbiAmJiB0LkZvLnpvKHMsIG4pO1xuICAgIGlmICh0Lk1vLmRlbGV0ZShlKSwgdC5pc1ByaW1hcnlDbGllbnQpIHtcbiAgICAgICAgdC5xby51cyhlKS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHQucW8uY29udGFpbnNLZXkoZSkgfHwgXG4gICAgICAgICAgICAvLyBXZSByZW1vdmVkIHRoZSBsYXN0IHJlZmVyZW5jZSBmb3IgdGhpcyBrZXlcbiAgICAgICAgICAgIHlhKHQsIGUpO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB5YSh0LCBlKSB7XG4gICAgdC5Mby5kZWxldGUoZS5wYXRoLmNhbm9uaWNhbFN0cmluZygpKTtcbiAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgdGhlIHRhcmdldCBhbHJlYWR5IGdvdCByZW1vdmVkIGJlY2F1c2UgdGhlIHF1ZXJ5IGZhaWxlZC4gSW4gdGhhdCBjYXNlLFxuICAgIC8vIHRoZSBrZXkgd29uJ3QgZXhpc3QgaW4gYGxpbWJvVGFyZ2V0c0J5S2V5YC4gT25seSBkbyB0aGUgY2xlYW51cCBpZiB3ZSBzdGlsbCBoYXZlIHRoZSB0YXJnZXQuXG4gICAgY29uc3QgbiA9IHQuQm8uZ2V0KGUpO1xuICAgIG51bGwgIT09IG4gJiYgKGxvKHQucmVtb3RlU3RvcmUsIG4pLCB0LkJvID0gdC5Cby5yZW1vdmUoZSksIHQuVW8uZGVsZXRlKG4pLCBFYSh0KSk7XG59XG5cbmZ1bmN0aW9uIHBhKHQsIGUsIG4pIHtcbiAgICBmb3IgKGNvbnN0IHMgb2YgbikgaWYgKHMgaW5zdGFuY2VvZiBabykgdC5xby5hZGRSZWZlcmVuY2Uocy5rZXksIGUpLCBUYSh0LCBzKTsgZWxzZSBpZiAocyBpbnN0YW5jZW9mIHRhKSB7XG4gICAgICAgICQoXCJTeW5jRW5naW5lXCIsIFwiRG9jdW1lbnQgbm8gbG9uZ2VyIGluIGxpbWJvOiBcIiArIHMua2V5KSwgdC5xby5yZW1vdmVSZWZlcmVuY2Uocy5rZXksIGUpO1xuICAgICAgICB0LnFvLmNvbnRhaW5zS2V5KHMua2V5KSB8fCBcbiAgICAgICAgLy8gV2UgcmVtb3ZlZCB0aGUgbGFzdCByZWZlcmVuY2UgZm9yIHRoaXMga2V5XG4gICAgICAgIHlhKHQsIHMua2V5KTtcbiAgICB9IGVsc2UgTCgpO1xufVxuXG5mdW5jdGlvbiBUYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IGUua2V5LCBzID0gbi5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIHQuQm8uZ2V0KG4pIHx8IHQuTG8uaGFzKHMpIHx8ICgkKFwiU3luY0VuZ2luZVwiLCBcIk5ldyBkb2N1bWVudCBpbiBsaW1ibzogXCIgKyBuKSwgdC5Mby5hZGQocyksIFxuICAgIEVhKHQpKTtcbn1cblxuLyoqXG4gKiBTdGFydHMgbGlzdGVucyBmb3IgZG9jdW1lbnRzIGluIGxpbWJvIHRoYXQgYXJlIGVucXVldWVkIGZvciByZXNvbHV0aW9uLFxuICogc3ViamVjdCB0byBhIG1heGltdW0gbnVtYmVyIG9mIGNvbmN1cnJlbnQgcmVzb2x1dGlvbnMuXG4gKlxuICogV2l0aG91dCBib3VuZGluZyB0aGUgbnVtYmVyIG9mIGNvbmN1cnJlbnQgcmVzb2x1dGlvbnMsIHRoZSBzZXJ2ZXIgY2FuIGZhaWxcbiAqIHdpdGggXCJyZXNvdXJjZSBleGhhdXN0ZWRcIiBlcnJvcnMgd2hpY2ggY2FuIGxlYWQgdG8gcGF0aG9sb2dpY2FsIGNsaWVudFxuICogYmVoYXZpb3IgYXMgc2VlbiBpbiBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtanMtc2RrL2lzc3Vlcy8yNjgzLlxuICovIGZ1bmN0aW9uIEVhKHQpIHtcbiAgICBmb3IgKDt0LkxvLnNpemUgPiAwICYmIHQuQm8uc2l6ZSA8IHQubWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnM7ICkge1xuICAgICAgICBjb25zdCBlID0gdC5Mby52YWx1ZXMoKS5uZXh0KCkudmFsdWU7XG4gICAgICAgIHQuTG8uZGVsZXRlKGUpO1xuICAgICAgICBjb25zdCBuID0gbmV3IFN0KGR0LmZyb21TdHJpbmcoZSkpLCBzID0gdC5Rby5uZXh0KCk7XG4gICAgICAgIHQuVW8uc2V0KHMsIG5ldyBzYShuKSksIHQuQm8gPSB0LkJvLmluc2VydChuLCBzKSwgaG8odC5yZW1vdGVTdG9yZSwgbmV3IGFpKFJlKGdlKG4ucGF0aCkpLCBzLCAyIC8qIExpbWJvUmVzb2x1dGlvbiAqLyAsIGV0LkkpKTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIElhKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gcSh0KSwgaSA9IFtdLCByID0gW10sIG8gPSBbXTtcbiAgICBzLk9vLmlzRW1wdHkoKSB8fCAocy5Pby5mb3JFYWNoKCgodCwgYSkgPT4ge1xuICAgICAgICBvLnB1c2gocy5HbyhhLCBlLCBuKS50aGVuKCh0ID0+IHtcbiAgICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICAgICAgcy5pc1ByaW1hcnlDbGllbnQgJiYgcy5zaGFyZWRDbGllbnRTdGF0ZS51cGRhdGVRdWVyeVN0YXRlKGEudGFyZ2V0SWQsIHQuZnJvbUNhY2hlID8gXCJub3QtY3VycmVudFwiIDogXCJjdXJyZW50XCIpLCBcbiAgICAgICAgICAgICAgICBpLnB1c2godCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHVyLiRuKGEudGFyZ2V0SWQsIHQpO1xuICAgICAgICAgICAgICAgIHIucHVzaChlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpKTtcbiAgICB9KSksIGF3YWl0IFByb21pc2UuYWxsKG8pLCBzLkZvLlByKGkpLCBhd2FpdCBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIm5vdGlmeUxvY2FsVmlld0NoYW5nZXNcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4gR3MuZm9yRWFjaChlLCAoZSA9PiBHcy5mb3JFYWNoKGUua24sIChzID0+IG4ucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUuYWRkUmVmZXJlbmNlKHQsIGUudGFyZ2V0SWQsIHMpKSkubmV4dCgoKCkgPT4gR3MuZm9yRWFjaChlLnhuLCAocyA9PiBuLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLnJlbW92ZVJlZmVyZW5jZSh0LCBlLnRhcmdldElkLCBzKSkpKSkpKSkpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICBpZiAoIVhzKHQpKSB0aHJvdyB0O1xuICAgICAgICAgICAgLy8gSWYgYG5vdGlmeUxvY2FsVmlld0NoYW5nZXNgIGZhaWxzLCB3ZSBkaWQgbm90IGFkdmFuY2UgdGhlIHNlcXVlbmNlXG4gICAgICAgICAgICAvLyBudW1iZXIgZm9yIHRoZSBkb2N1bWVudHMgdGhhdCB3ZXJlIGluY2x1ZGVkIGluIHRoaXMgdHJhbnNhY3Rpb24uXG4gICAgICAgICAgICAvLyBUaGlzIG1pZ2h0IHRyaWdnZXIgdGhlbSB0byBiZSBkZWxldGVkIGVhcmxpZXIgdGhhbiB0aGV5IG90aGVyd2lzZVxuICAgICAgICAgICAgLy8gd291bGQgaGF2ZSwgYnV0IGl0IHNob3VsZCBub3QgaW52YWxpZGF0ZSB0aGUgaW50ZWdyaXR5IG9mIHRoZSBkYXRhLlxuICAgICAgICAgICAgJChcIkxvY2FsU3RvcmVcIiwgXCJGYWlsZWQgdG8gdXBkYXRlIHNlcXVlbmNlIG51bWJlcnM6IFwiICsgdCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LnRhcmdldElkO1xuICAgICAgICAgICAgaWYgKCF0LmZyb21DYWNoZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuLnFuLmdldChlKSwgcyA9IHQuc25hcHNob3RWZXJzaW9uLCBpID0gdC53aXRoTGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbihzKTtcbiAgICAgICAgICAgICAgICAvLyBBZHZhbmNlIHRoZSBsYXN0IGxpbWJvIGZyZWUgc25hcHNob3QgdmVyc2lvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnFuID0gbi5xbi5pbnNlcnQoZSwgaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KHMubG9jYWxTdG9yZSwgcikpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBBYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IHEodCk7XG4gICAgaWYgKCFuLmN1cnJlbnRVc2VyLmlzRXF1YWwoZSkpIHtcbiAgICAgICAgJChcIlN5bmNFbmdpbmVcIiwgXCJVc2VyIGNoYW5nZS4gTmV3IHVzZXI6XCIsIGUudG9LZXkoKSk7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBkcihuLmxvY2FsU3RvcmUsIGUpO1xuICAgICAgICBuLmN1cnJlbnRVc2VyID0gZSwgXG4gICAgICAgIC8vIEZhaWxzIHRhc2tzIHdhaXRpbmcgZm9yIHBlbmRpbmcgd3JpdGVzIHJlcXVlc3RlZCBieSBwcmV2aW91cyB1c2VyLlxuICAgICAgICBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICB0LmpvLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHQucmVqZWN0KG5ldyBqKEsuQ0FOQ0VMTEVELCBlKSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSkpLCB0LmpvLmNsZWFyKCk7XG4gICAgICAgIH0obiwgXCInd2FpdEZvclBlbmRpbmdXcml0ZXMnIHByb21pc2UgaXMgcmVqZWN0ZWQgZHVlIHRvIGEgdXNlciBjaGFuZ2UuXCIpLCBcbiAgICAgICAgLy8gVE9ETyhiLzExNDIyNjQxNyk6IENvbnNpZGVyIGNhbGxpbmcgdGhpcyBvbmx5IGluIHRoZSBwcmltYXJ5IHRhYi5cbiAgICAgICAgbi5zaGFyZWRDbGllbnRTdGF0ZS5oYW5kbGVVc2VyQ2hhbmdlKGUsIHQucmVtb3ZlZEJhdGNoSWRzLCB0LmFkZGVkQmF0Y2hJZHMpLCBhd2FpdCBJYShuLCB0LkduKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFJhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KSwgcyA9IG4uVW8uZ2V0KGUpO1xuICAgIGlmIChzICYmIHMuJG8pIHJldHVybiBTbigpLmFkZChzLmtleSk7XG4gICAge1xuICAgICAgICBsZXQgdCA9IFNuKCk7XG4gICAgICAgIGNvbnN0IHMgPSBuLk1vLmdldChlKTtcbiAgICAgICAgaWYgKCFzKSByZXR1cm4gdDtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBuLk9vLmdldChlKTtcbiAgICAgICAgICAgIHQgPSB0LnVuaW9uV2l0aChzLnZpZXcuUG8pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZWNvbmNpbGUgdGhlIGxpc3Qgb2Ygc3luY2VkIGRvY3VtZW50cyBpbiBhbiBleGlzdGluZyB2aWV3IHdpdGggdGhvc2VcbiAqIGZyb20gcGVyc2lzdGVuY2UuXG4gKi8gYXN5bmMgZnVuY3Rpb24gUGEodCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpLCBzID0gYXdhaXQgRXIobi5sb2NhbFN0b3JlLCBlLnF1ZXJ5LCBcbiAgICAvKiB1c2VQcmV2aW91c1Jlc3VsdHM9ICovICEwKSwgaSA9IGUudmlldy5rbyhzKTtcbiAgICByZXR1cm4gbi5pc1ByaW1hcnlDbGllbnQgJiYgcGEobiwgZS50YXJnZXRJZCwgaS5DbyksIGk7XG59XG5cbi8qKlxuICogUmV0cmlldmVzIG5ld2x5IGNoYW5nZWQgZG9jdW1lbnRzIGZyb20gcmVtb3RlIGRvY3VtZW50IGNhY2hlIGFuZCByYWlzZXNcbiAqIHNuYXBzaG90cyBpZiBuZWVkZWQuXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5hc3luYyBmdW5jdGlvbiBiYSh0KSB7XG4gICAgY29uc3QgZSA9IHEodCk7XG4gICAgcmV0dXJuIEFyKGUubG9jYWxTdG9yZSkudGhlbigodCA9PiBJYShlLCB0KSkpO1xufVxuXG4vKiogQXBwbGllcyBhIG11dGF0aW9uIHN0YXRlIHRvIGFuIGV4aXN0aW5nIGJhdGNoLiAgKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5hc3luYyBmdW5jdGlvbiB2YSh0LCBlLCBuLCBzKSB7XG4gICAgY29uc3QgaSA9IHEodCksIHIgPSBhd2FpdCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBxKHQpLCBzID0gcShuLkFuKTtcbiAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJMb29rdXAgbXV0YXRpb24gZG9jdW1lbnRzXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gcy5adCh0LCBlKS5uZXh0KChlID0+IGUgPyBuLlduLnZuKHQsIGUpIDogR3MucmVzb2x2ZShudWxsKSkpKSk7XG4gICAgfVxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG4gICAgKGkubG9jYWxTdG9yZSwgZSk7XG4gICAgbnVsbCAhPT0gciA/IChcInBlbmRpbmdcIiA9PT0gbiA/IFxuICAgIC8vIElmIHdlIGFyZSB0aGUgcHJpbWFyeSBjbGllbnQsIHdlIG5lZWQgdG8gc2VuZCB0aGlzIHdyaXRlIHRvIHRoZVxuICAgIC8vIGJhY2tlbmQuIFNlY29uZGFyeSBjbGllbnRzIHdpbGwgaWdub3JlIHRoZXNlIHdyaXRlcyBzaW5jZSB0aGVpciByZW1vdGVcbiAgICAvLyBjb25uZWN0aW9uIGlzIGRpc2FibGVkLlxuICAgIGF3YWl0IFJvKGkucmVtb3RlU3RvcmUpIDogXCJhY2tub3dsZWRnZWRcIiA9PT0gbiB8fCBcInJlamVjdGVkXCIgPT09IG4gPyAoXG4gICAgLy8gTk9URTogQm90aCB0aGVzZSBtZXRob2RzIGFyZSBuby1vcHMgZm9yIGJhdGNoZXMgdGhhdCBvcmlnaW5hdGVkIGZyb21cbiAgICAvLyBvdGhlciBjbGllbnRzLlxuICAgIG1hKGksIGUsIHMgfHwgbnVsbCksIF9hKGksIGUpLCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHEocSh0KS5BbikuZWUoZSk7XG4gICAgfVxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG4gICAgKGkubG9jYWxTdG9yZSwgZSkpIDogTCgpLCBhd2FpdCBJYShpLCByKSkgOiBcbiAgICAvLyBBIHRocm90dGxlZCB0YWIgbWF5IG5vdCBoYXZlIHNlZW4gdGhlIG11dGF0aW9uIGJlZm9yZSBpdCB3YXMgY29tcGxldGVkXG4gICAgLy8gYW5kIHJlbW92ZWQgZnJvbSB0aGUgbXV0YXRpb24gcXVldWUsIGluIHdoaWNoIGNhc2Ugd2Ugd29uJ3QgaGF2ZSBjYWNoZWRcbiAgICAvLyB0aGUgYWZmZWN0ZWQgZG9jdW1lbnRzLiBJbiB0aGlzIGNhc2Ugd2UgY2FuIHNhZmVseSBpZ25vcmUgdGhlIHVwZGF0ZVxuICAgIC8vIHNpbmNlIHRoYXQgbWVhbnMgd2UgZGlkbid0IGFwcGx5IHRoZSBtdXRhdGlvbiBsb2NhbGx5IGF0IGFsbCAoaWYgd2VcbiAgICAvLyBoYWQsIHdlIHdvdWxkIGhhdmUgY2FjaGVkIHRoZSBhZmZlY3RlZCBkb2N1bWVudHMpLCBhbmQgc28gd2Ugd2lsbCBqdXN0XG4gICAgLy8gc2VlIGFueSByZXN1bHRpbmcgZG9jdW1lbnQgY2hhbmdlcyB2aWEgbm9ybWFsIHJlbW90ZSBkb2N1bWVudCB1cGRhdGVzXG4gICAgLy8gYXMgYXBwbGljYWJsZS5cbiAgICAkKFwiU3luY0VuZ2luZVwiLCBcIkNhbm5vdCBhcHBseSBtdXRhdGlvbiBiYXRjaCB3aXRoIGlkOiBcIiArIGUpO1xufVxuXG4vKiogQXBwbGllcyBhIHF1ZXJ5IHRhcmdldCBjaGFuZ2UgZnJvbSBhIGRpZmZlcmVudCB0YWIuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gVmEodCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgIGlmICh4YShuKSwgJGEobiksICEwID09PSBlICYmICEwICE9PSBuLldvKSB7XG4gICAgICAgIC8vIFNlY29uZGFyeSB0YWJzIG9ubHkgbWFpbnRhaW4gVmlld3MgZm9yIHRoZWlyIGxvY2FsIGxpc3RlbmVycyBhbmQgdGhlXG4gICAgICAgIC8vIFZpZXdzIGludGVybmFsIHN0YXRlIG1heSBub3QgYmUgMTAwJSBwb3B1bGF0ZWQgKGluIHBhcnRpY3VsYXJcbiAgICAgICAgLy8gc2Vjb25kYXJ5IHRhYnMgZG9uJ3QgdHJhY2sgc3luY2VkRG9jdW1lbnRzLCB0aGUgc2V0IG9mIGRvY3VtZW50cyB0aGVcbiAgICAgICAgLy8gc2VydmVyIGNvbnNpZGVycyB0byBiZSBpbiB0aGUgdGFyZ2V0KS4gU28gd2hlbiBhIHNlY29uZGFyeSBiZWNvbWVzXG4gICAgICAgIC8vIHByaW1hcnksIHdlIG5lZWQgdG8gbmVlZCB0byBtYWtlIHN1cmUgdGhhdCBhbGwgdmlld3MgZm9yIGFsbCB0YXJnZXRzXG4gICAgICAgIC8vIG1hdGNoIHRoZSBzdGF0ZSBvbiBkaXNrLlxuICAgICAgICBjb25zdCB0ID0gbi5zaGFyZWRDbGllbnRTdGF0ZS5nZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMoKSwgZSA9IGF3YWl0IFNhKG4sIHQudG9BcnJheSgpKTtcbiAgICAgICAgbi5XbyA9ICEwLCBhd2FpdCBrbyhuLnJlbW90ZVN0b3JlLCAhMCk7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSBobyhuLnJlbW90ZVN0b3JlLCB0KTtcbiAgICB9IGVsc2UgaWYgKCExID09PSBlICYmICExICE9PSBuLldvKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgbGV0IGUgPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgbi5Nby5mb3JFYWNoKCgocywgaSkgPT4ge1xuICAgICAgICAgICAgbi5zaGFyZWRDbGllbnRTdGF0ZS5pc0xvY2FsUXVlcnlUYXJnZXQoaSkgPyB0LnB1c2goaSkgOiBlID0gZS50aGVuKCgoKSA9PiAoZ2EobiwgaSksIFxuICAgICAgICAgICAgVHIobi5sb2NhbFN0b3JlLCBpLCBcbiAgICAgICAgICAgIC8qa2VlcFBlcnNpc3RlZFRhcmdldERhdGE9Ki8gITApKSkpLCBsbyhuLnJlbW90ZVN0b3JlLCBpKTtcbiAgICAgICAgfSkpLCBhd2FpdCBlLCBhd2FpdCBTYShuLCB0KSwgXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBxKHQpO1xuICAgICAgICAgICAgZS5Vby5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgICAgIGxvKGUucmVtb3RlU3RvcmUsIG4pO1xuICAgICAgICAgICAgfSkpLCBlLnFvLmhzKCksIGUuVW8gPSBuZXcgTWFwLCBlLkJvID0gbmV3IGduKFN0LmNvbXBhcmF0b3IpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmVjb25jaWxlIHRoZSBxdWVyeSB2aWV3cyBvZiB0aGUgcHJvdmlkZWQgcXVlcnkgdGFyZ2V0cyB3aXRoIHRoZSBzdGF0ZSBmcm9tXG4gKiBwZXJzaXN0ZW5jZS4gUmFpc2VzIHNuYXBzaG90cyBmb3IgYW55IGNoYW5nZXMgdGhhdCBhZmZlY3QgdGhlIGxvY2FsXG4gKiBjbGllbnQgYW5kIHJldHVybnMgdGhlIHVwZGF0ZWQgc3RhdGUgb2YgYWxsIHRhcmdldCdzIHF1ZXJ5IGRhdGEuXG4gKlxuICogQHBhcmFtIHN5bmNFbmdpbmUgLSBUaGUgc3luYyBlbmdpbmUgaW1wbGVtZW50YXRpb25cbiAqIEBwYXJhbSB0YXJnZXRzIC0gdGhlIGxpc3Qgb2YgdGFyZ2V0cyB3aXRoIHZpZXdzIHRoYXQgbmVlZCB0byBiZSByZWNvbXB1dGVkXG4gKiBAcGFyYW0gdHJhbnNpdGlvblRvUHJpbWFyeSAtIGB0cnVlYCBpZmYgdGhlIHRhYiB0cmFuc2l0aW9ucyBmcm9tIGEgc2Vjb25kYXJ5XG4gKiB0YWIgdG8gYSBwcmltYXJ5IHRhYlxuICovXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG4gICAgICAgIChuKSwgbi5XbyA9ICExLCBhd2FpdCBrbyhuLnJlbW90ZVN0b3JlLCAhMSk7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBTYSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHEodCksIGkgPSBbXSwgciA9IFtdO1xuICAgIGZvciAoY29uc3QgdCBvZiBlKSB7XG4gICAgICAgIGxldCBlO1xuICAgICAgICBjb25zdCBuID0gcy5Nby5nZXQodCk7XG4gICAgICAgIGlmIChuICYmIDAgIT09IG4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBGb3IgcXVlcmllcyB0aGF0IGhhdmUgYSBsb2NhbCBWaWV3LCB3ZSBmZXRjaCB0aGVpciBjdXJyZW50IHN0YXRlXG4gICAgICAgICAgICAvLyBmcm9tIExvY2FsU3RvcmUgKGFzIHRoZSByZXN1bWUgdG9rZW4gYW5kIHRoZSBzbmFwc2hvdCB2ZXJzaW9uXG4gICAgICAgICAgICAvLyBtaWdodCBoYXZlIGNoYW5nZWQpIGFuZCByZWNvbmNpbGUgdGhlaXIgdmlld3Mgd2l0aCB0aGUgcGVyc2lzdGVkXG4gICAgICAgICAgICAvLyBzdGF0ZSAodGhlIGxpc3Qgb2Ygc3luY2VkRG9jdW1lbnRzIG1heSBoYXZlIGdvdHRlbiBvdXQgb2Ygc3luYykuXG4gICAgICAgICAgICBlID0gYXdhaXQgcHIocy5sb2NhbFN0b3JlLCBSZShuWzBdKSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2Ygbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBzLk9vLmdldCh0KSwgbiA9IGF3YWl0IFBhKHMsIGUpO1xuICAgICAgICAgICAgICAgIG4uc25hcHNob3QgJiYgci5wdXNoKG4uc25hcHNob3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gRm9yIHF1ZXJpZXMgdGhhdCBuZXZlciBleGVjdXRlZCBvbiB0aGlzIGNsaWVudCwgd2UgbmVlZCB0b1xuICAgICAgICAgICAgLy8gYWxsb2NhdGUgdGhlIHRhcmdldCBpbiBMb2NhbFN0b3JlIGFuZCBpbml0aWFsaXplIGEgbmV3IFZpZXcuXG4gICAgICAgICAgICBjb25zdCBuID0gYXdhaXQgSXIocy5sb2NhbFN0b3JlLCB0KTtcbiAgICAgICAgICAgIGUgPSBhd2FpdCBwcihzLmxvY2FsU3RvcmUsIG4pLCBhd2FpdCBvYShzLCBEYShuKSwgdCwgXG4gICAgICAgICAgICAvKmN1cnJlbnQ9Ki8gITEpO1xuICAgICAgICB9XG4gICAgICAgIGkucHVzaChlKTtcbiAgICB9XG4gICAgcmV0dXJuIHMuRm8uUHIociksIGk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGBRdWVyeWAgb2JqZWN0IGZyb20gdGhlIHNwZWNpZmllZCBgVGFyZ2V0YC4gVGhlcmUgaXMgbm8gd2F5IHRvXG4gKiBvYnRhaW4gdGhlIG9yaWdpbmFsIGBRdWVyeWAsIHNvIHdlIHN5bnRoZXNpemUgYSBgUXVlcnlgIGZyb20gdGhlIGBUYXJnZXRgXG4gKiBvYmplY3QuXG4gKlxuICogVGhlIHN5bnRoZXNpemVkIHJlc3VsdCBtaWdodCBiZSBkaWZmZXJlbnQgZnJvbSB0aGUgb3JpZ2luYWwgYFF1ZXJ5YCwgYnV0XG4gKiBzaW5jZSB0aGUgc3ludGhlc2l6ZWQgYFF1ZXJ5YCBzaG91bGQgcmV0dXJuIHRoZSBzYW1lIHJlc3VsdHMgYXMgdGhlXG4gKiBvcmlnaW5hbCBvbmUgKG9ubHkgdGhlIHByZXNlbnRhdGlvbiBvZiByZXN1bHRzIG1pZ2h0IGRpZmZlciksIHRoZSBwb3RlbnRpYWxcbiAqIGRpZmZlcmVuY2Ugd2lsbCBub3QgY2F1c2UgaXNzdWVzLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuZnVuY3Rpb24gRGEodCkge1xuICAgIHJldHVybiBtZSh0LnBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCB0Lm9yZGVyQnksIHQuZmlsdGVycywgdC5saW1pdCwgXCJGXCIgLyogRmlyc3QgKi8gLCB0LnN0YXJ0QXQsIHQuZW5kQXQpO1xufVxuXG4vKiogUmV0dXJucyB0aGUgSURzIG9mIHRoZSBjbGllbnRzIHRoYXQgYXJlIGN1cnJlbnRseSBhY3RpdmUuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuZnVuY3Rpb24gQ2EodCkge1xuICAgIGNvbnN0IGUgPSBxKHQpO1xuICAgIHJldHVybiBxKHEoZS5sb2NhbFN0b3JlKS5wZXJzaXN0ZW5jZSkuVG4oKTtcbn1cblxuLyoqIEFwcGxpZXMgYSBxdWVyeSB0YXJnZXQgY2hhbmdlIGZyb20gYSBkaWZmZXJlbnQgdGFiLiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIE5hKHQsIGUsIG4sIHMpIHtcbiAgICBjb25zdCBpID0gcSh0KTtcbiAgICBpZiAoaS5XbykgXG4gICAgLy8gSWYgd2UgcmVjZWl2ZSBhIHRhcmdldCBzdGF0ZSBub3RpZmljYXRpb24gdmlhIFdlYlN0b3JhZ2UsIHdlIGFyZVxuICAgIC8vIGVpdGhlciBhbHJlYWR5IHNlY29uZGFyeSBvciBhbm90aGVyIHRhYiBoYXMgdGFrZW4gdGhlIHByaW1hcnkgbGVhc2UuXG4gICAgJChcIlN5bmNFbmdpbmVcIiwgXCJJZ25vcmluZyB1bmV4cGVjdGVkIHF1ZXJ5IHN0YXRlIG5vdGlmaWNhdGlvbi5cIik7IGVsc2UgaWYgKGkuTW8uaGFzKGUpKSBzd2l0Y2ggKG4pIHtcbiAgICAgIGNhc2UgXCJjdXJyZW50XCI6XG4gICAgICBjYXNlIFwibm90LWN1cnJlbnRcIjpcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgdCA9IGF3YWl0IEFyKGkubG9jYWxTdG9yZSksIHMgPSBObi5jcmVhdGVTeW50aGVzaXplZFJlbW90ZUV2ZW50Rm9yQ3VycmVudENoYW5nZShlLCBcImN1cnJlbnRcIiA9PT0gbik7XG4gICAgICAgICAgICBhd2FpdCBJYShpLCB0LCBzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgIGNhc2UgXCJyZWplY3RlZFwiOlxuICAgICAgICBhd2FpdCBUcihpLmxvY2FsU3RvcmUsIGUsIFxuICAgICAgICAvKiBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YSAqLyAhMCksIGdhKGksIGUsIHMpO1xuICAgICAgICBicmVhaztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgTCgpO1xuICAgIH1cbn1cblxuLyoqIEFkZHMgb3IgcmVtb3ZlcyBXYXRjaCB0YXJnZXRzIGZvciBxdWVyaWVzIGZyb20gZGlmZmVyZW50IHRhYnMuICovIGFzeW5jIGZ1bmN0aW9uIGthKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0geGEodCk7XG4gICAgaWYgKHMuV28pIHtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIHtcbiAgICAgICAgICAgIGlmIChzLk1vLmhhcyh0KSkge1xuICAgICAgICAgICAgICAgIC8vIEEgdGFyZ2V0IG1pZ2h0IGhhdmUgYmVlbiBhZGRlZCBpbiBhIHByZXZpb3VzIGF0dGVtcHRcbiAgICAgICAgICAgICAgICAkKFwiU3luY0VuZ2luZVwiLCBcIkFkZGluZyBhbiBhbHJlYWR5IGFjdGl2ZSB0YXJnZXQgXCIgKyB0KTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGUgPSBhd2FpdCBJcihzLmxvY2FsU3RvcmUsIHQpLCBuID0gYXdhaXQgcHIocy5sb2NhbFN0b3JlLCBlKTtcbiAgICAgICAgICAgIGF3YWl0IG9hKHMsIERhKGUpLCBuLnRhcmdldElkLCBcbiAgICAgICAgICAgIC8qY3VycmVudD0qLyAhMSksIGhvKHMucmVtb3RlU3RvcmUsIG4pO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBuKSBcbiAgICAgICAgLy8gQ2hlY2sgdGhhdCB0aGUgdGFyZ2V0IGlzIHN0aWxsIGFjdGl2ZSBzaW5jZSB0aGUgdGFyZ2V0IG1pZ2h0IGhhdmUgYmVlblxuICAgICAgICAvLyByZW1vdmVkIGlmIGl0IGhhcyBiZWVuIHJlamVjdGVkIGJ5IHRoZSBiYWNrZW5kLlxuICAgICAgICBzLk1vLmhhcyh0KSAmJiBcbiAgICAgICAgLy8gUmVsZWFzZSBxdWVyaWVzIHRoYXQgYXJlIHN0aWxsIGFjdGl2ZS5cbiAgICAgICAgYXdhaXQgVHIocy5sb2NhbFN0b3JlLCB0LCBcbiAgICAgICAgLyoga2VlcFBlcnNpc3RlZFRhcmdldERhdGEgKi8gITEpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgIGxvKHMucmVtb3RlU3RvcmUsIHQpLCBnYShzLCB0KTtcbiAgICAgICAgfSkpLmNhdGNoKEJpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHhhKHQpIHtcbiAgICBjb25zdCBlID0gcSh0KTtcbiAgICByZXR1cm4gZS5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIuYXBwbHlSZW1vdGVFdmVudCA9IHVhLmJpbmQobnVsbCwgZSksIGUucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLmdldFJlbW90ZUtleXNGb3JUYXJnZXQgPSBSYS5iaW5kKG51bGwsIGUpLCBcbiAgICBlLnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5yZWplY3RMaXN0ZW4gPSBsYS5iaW5kKG51bGwsIGUpLCBlLkZvLlByID0gUW8uYmluZChudWxsLCBlLmV2ZW50TWFuYWdlciksIFxuICAgIGUuRm8uem8gPSBXby5iaW5kKG51bGwsIGUuZXZlbnRNYW5hZ2VyKSwgZTtcbn1cblxuZnVuY3Rpb24gJGEodCkge1xuICAgIGNvbnN0IGUgPSBxKHQpO1xuICAgIHJldHVybiBlLnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5hcHBseVN1Y2Nlc3NmdWxXcml0ZSA9IGZhLmJpbmQobnVsbCwgZSksIGUucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLnJlamVjdEZhaWxlZFdyaXRlID0gZGEuYmluZChudWxsLCBlKSwgXG4gICAgZTtcbn1cblxuLyoqXG4gKiBMb2FkcyBhIEZpcmVzdG9yZSBidW5kbGUgaW50byB0aGUgU0RLLiBUaGUgcmV0dXJuZWQgcHJvbWlzZSByZXNvbHZlcyB3aGVuXG4gKiB0aGUgYnVuZGxlIGZpbmlzaGVkIGxvYWRpbmcuXG4gKlxuICogQHBhcmFtIHN5bmNFbmdpbmUgLSBTeW5jRW5naW5lIHRvIHVzZS5cbiAqIEBwYXJhbSBidW5kbGVSZWFkZXIgLSBCdW5kbGUgdG8gbG9hZCBpbnRvIHRoZSBTREsuXG4gKiBAcGFyYW0gdGFzayAtIExvYWRCdW5kbGVUYXNrIHVzZWQgdG8gdXBkYXRlIHRoZSBsb2FkaW5nIHByb2dyZXNzIHRvIHB1YmxpYyBBUEkuXG4gKi8gZnVuY3Rpb24gRmEodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBxKHQpO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgICAgKGFzeW5jIGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBhd2FpdCBlLmdldE1ldGFkYXRhKCk7XG4gICAgICAgICAgICBpZiAoYXdhaXQgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBxKHQpLCBzID0gR24oZS5jcmVhdGVUaW1lKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcImhhc05ld2VyQnVuZGxlXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gbi5ZZS5nZXRCdW5kbGVNZXRhZGF0YSh0LCBlLmlkKSkpLnRoZW4oKHQgPT4gISF0ICYmIHQuY3JlYXRlVGltZS5jb21wYXJlVG8ocykgPj0gMCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBTYXZlcyB0aGUgZ2l2ZW4gYEJ1bmRsZU1ldGFkYXRhYCB0byBsb2NhbCBwZXJzaXN0ZW5jZS5cbiAqLyAodC5sb2NhbFN0b3JlLCBzKSkgcmV0dXJuIGF3YWl0IGUuY2xvc2UoKSwgdm9pZCBuLl9jb21wbGV0ZVdpdGgoZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tTdGF0ZTogXCJTdWNjZXNzXCIsXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50c0xvYWRlZDogdC50b3RhbERvY3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgYnl0ZXNMb2FkZWQ6IHQudG90YWxCeXRlcyxcbiAgICAgICAgICAgICAgICAgICAgdG90YWxEb2N1bWVudHM6IHQudG90YWxEb2N1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXM6IHQudG90YWxCeXRlc1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KHMpKTtcbiAgICAgICAgICAgIG4uX3VwZGF0ZVByb2dyZXNzKFhvKHMpKTtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuZXcgWW8ocywgdC5sb2NhbFN0b3JlLCBlLmspO1xuICAgICAgICAgICAgbGV0IHIgPSBhd2FpdCBlLkhvKCk7XG4gICAgICAgICAgICBmb3IgKDtyOyApIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gYXdhaXQgaS55byhyKTtcbiAgICAgICAgICAgICAgICB0ICYmIG4uX3VwZGF0ZVByb2dyZXNzKHQpLCByID0gYXdhaXQgZS5IbygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbyA9IGF3YWl0IGkuY29tcGxldGUoKTtcbiAgICAgICAgICAgIC8vIFRPRE8oYi8xNjA4NzY0NDMpOiBUaGlzIGN1cnJlbnRseSByYWlzZXMgc25hcHNob3RzIHdpdGhcbiAgICAgICAgICAgIC8vIGBmcm9tQ2FjaGU9ZmFsc2VgIGlmIHVzZXJzIGFscmVhZHkgbGlzdGVuIHRvIHNvbWUgcXVlcmllcyBhbmQgYnVuZGxlc1xuICAgICAgICAgICAgLy8gaGFzIG5ld2VyIHZlcnNpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBJYSh0LCBvLkluLCBcbiAgICAgICAgICAgIC8qIHJlbW90ZUV2ZW50ICovIHZvaWQgMCksIFxuICAgICAgICAgICAgLy8gU2F2ZSBtZXRhZGF0YSwgc28gbG9hZGluZyB0aGUgc2FtZSBidW5kbGUgd2lsbCBza2lwLlxuICAgICAgICAgICAgYXdhaXQgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiU2F2ZSBidW5kbGVcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4gbi5ZZS5zYXZlQnVuZGxlTWV0YWRhdGEodCwgZSkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogUmV0dXJucyBhIHByb21pc2Ugb2YgYSBgTmFtZWRRdWVyeWAgYXNzb2NpYXRlZCB3aXRoIGdpdmVuIHF1ZXJ5IG5hbWUuIFByb21pc2VcbiAqIHJlc29sdmVzIHRvIHVuZGVmaW5lZCBpZiBubyBwZXJzaXN0ZWQgZGF0YSBjYW4gYmUgZm91bmQuXG4gKi8gKHQubG9jYWxTdG9yZSwgcyksIG4uX2NvbXBsZXRlV2l0aChvLnByb2dyZXNzKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgTyhcIlN5bmNFbmdpbmVcIiwgYExvYWRpbmcgYnVuZGxlIGZhaWxlZCB3aXRoICR7dH1gKSwgbi5fZmFpbFdpdGgodCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAvKipcbiAqIFByb3ZpZGVzIGFsbCBjb21wb25lbnRzIG5lZWRlZCBmb3IgRmlyZXN0b3JlIHdpdGggaW4tbWVtb3J5IHBlcnNpc3RlbmNlLlxuICogVXNlcyBFYWdlckdDIGdhcmJhZ2UgY29sbGVjdGlvbi5cbiAqLykocywgZSwgbikudGhlbigoKCkgPT4ge1xuICAgICAgICBzLnNoYXJlZENsaWVudFN0YXRlLm5vdGlmeUJ1bmRsZUxvYWRlZCgpO1xuICAgIH0pKTtcbn1cblxuY2xhc3MgT2Ege1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnN5bmNocm9uaXplVGFicyA9ICExO1xuICAgIH1cbiAgICBhc3luYyBpbml0aWFsaXplKHQpIHtcbiAgICAgICAgdGhpcy5rID0gdG8odC5kYXRhYmFzZUluZm8uZGF0YWJhc2VJZCksIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUgPSB0aGlzLkpvKHQpLCB0aGlzLnBlcnNpc3RlbmNlID0gdGhpcy5Zbyh0KSwgXG4gICAgICAgIGF3YWl0IHRoaXMucGVyc2lzdGVuY2Uuc3RhcnQoKSwgdGhpcy5nY1NjaGVkdWxlciA9IHRoaXMuWG8odCksIHRoaXMubG9jYWxTdG9yZSA9IHRoaXMuWm8odCk7XG4gICAgfVxuICAgIFhvKHQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFpvKHQpIHtcbiAgICAgICAgcmV0dXJuIGZyKHRoaXMucGVyc2lzdGVuY2UsIG5ldyBociwgdC5pbml0aWFsVXNlciwgdGhpcy5rKTtcbiAgICB9XG4gICAgWW8odCkge1xuICAgICAgICByZXR1cm4gbmV3IHhyKEZyLmtzLCB0aGlzLmspO1xuICAgIH1cbiAgICBKbyh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgV3I7XG4gICAgfVxuICAgIGFzeW5jIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgdGhpcy5nY1NjaGVkdWxlciAmJiB0aGlzLmdjU2NoZWR1bGVyLnN0b3AoKSwgYXdhaXQgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5zaHV0ZG93bigpLCBcbiAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5zaHV0ZG93bigpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBQcm92aWRlcyBhbGwgY29tcG9uZW50cyBuZWVkZWQgZm9yIEZpcmVzdG9yZSB3aXRoIEluZGV4ZWREQiBwZXJzaXN0ZW5jZS5cbiAqLyBjbGFzcyBNYSBleHRlbmRzIE9hIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMudGEgPSB0LCB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gZSwgdGhpcy5mb3JjZU93bmVyc2hpcCA9IG4sIHRoaXMuc3luY2hyb25pemVUYWJzID0gITE7XG4gICAgfVxuICAgIGFzeW5jIGluaXRpYWxpemUodCkge1xuICAgICAgICBhd2FpdCBzdXBlci5pbml0aWFsaXplKHQpLCBhd2FpdCBScih0aGlzLmxvY2FsU3RvcmUpLCBhd2FpdCB0aGlzLnRhLmluaXRpYWxpemUodGhpcywgdCksIFxuICAgICAgICAvLyBFbnF1ZXVlIHdyaXRlcyBmcm9tIGEgcHJldmlvdXMgc2Vzc2lvblxuICAgICAgICBhd2FpdCAkYSh0aGlzLnRhLnN5bmNFbmdpbmUpLCBhd2FpdCBSbyh0aGlzLnRhLnJlbW90ZVN0b3JlKSwgXG4gICAgICAgIC8vIE5PVEU6IFRoaXMgd2lsbCBpbW1lZGlhdGVseSBjYWxsIHRoZSBsaXN0ZW5lciwgc28gd2UgbWFrZSBzdXJlIHRvXG4gICAgICAgIC8vIHNldCBpdCBhZnRlciBsb2NhbFN0b3JlIC8gcmVtb3RlU3RvcmUgYXJlIHN0YXJ0ZWQuXG4gICAgICAgIGF3YWl0IHRoaXMucGVyc2lzdGVuY2Uuc24oKCgpID0+ICh0aGlzLmdjU2NoZWR1bGVyICYmICF0aGlzLmdjU2NoZWR1bGVyLnN0YXJ0ZWQgJiYgdGhpcy5nY1NjaGVkdWxlci5zdGFydCh0aGlzLmxvY2FsU3RvcmUpLCBcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkpKSk7XG4gICAgfVxuICAgIFpvKHQpIHtcbiAgICAgICAgcmV0dXJuIGZyKHRoaXMucGVyc2lzdGVuY2UsIG5ldyBociwgdC5pbml0aWFsVXNlciwgdGhpcy5rKTtcbiAgICB9XG4gICAgWG8odCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5nYXJiYWdlQ29sbGVjdG9yO1xuICAgICAgICByZXR1cm4gbmV3IEtpKGUsIHQuYXN5bmNRdWV1ZSk7XG4gICAgfVxuICAgIFlvKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG9yKHQuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQsIHQuZGF0YWJhc2VJbmZvLnBlcnNpc3RlbmNlS2V5KSwgbiA9IHZvaWQgMCAhPT0gdGhpcy5jYWNoZVNpemVCeXRlcyA/IHZpLndpdGhDYWNoZVNpemUodGhpcy5jYWNoZVNpemVCeXRlcykgOiB2aS5ERUZBVUxUO1xuICAgICAgICByZXR1cm4gbmV3IHNyKHRoaXMuc3luY2hyb25pemVUYWJzLCBlLCB0LmNsaWVudElkLCBuLCB0LmFzeW5jUXVldWUsIFhyKCksIFpyKCksIHRoaXMuaywgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSwgISF0aGlzLmZvcmNlT3duZXJzaGlwKTtcbiAgICB9XG4gICAgSm8odCkge1xuICAgICAgICByZXR1cm4gbmV3IFdyO1xuICAgIH1cbn1cblxuLyoqXG4gKiBQcm92aWRlcyBhbGwgY29tcG9uZW50cyBuZWVkZWQgZm9yIEZpcmVzdG9yZSB3aXRoIG11bHRpLXRhYiBJbmRleGVkREJcbiAqIHBlcnNpc3RlbmNlLlxuICpcbiAqIEluIHRoZSBsZWdhY3kgY2xpZW50LCB0aGlzIHByb3ZpZGVyIGlzIHVzZWQgdG8gcHJvdmlkZSBib3RoIG11bHRpLXRhYiBhbmRcbiAqIG5vbi1tdWx0aS10YWIgcGVyc2lzdGVuY2Ugc2luY2Ugd2UgY2Fubm90IHRlbGwgYXQgYnVpbGQgdGltZSB3aGV0aGVyXG4gKiBgc3luY2hyb25pemVUYWJzYCB3aWxsIGJlIGVuYWJsZWQuXG4gKi8gY2xhc3MgTGEgZXh0ZW5kcyBNYSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBlLCAvKiBmb3JjZU93bmVyc2hpcD0gKi8gITEpLCB0aGlzLnRhID0gdCwgdGhpcy5jYWNoZVNpemVCeXRlcyA9IGUsIHRoaXMuc3luY2hyb25pemVUYWJzID0gITA7XG4gICAgfVxuICAgIGFzeW5jIGluaXRpYWxpemUodCkge1xuICAgICAgICBhd2FpdCBzdXBlci5pbml0aWFsaXplKHQpO1xuICAgICAgICBjb25zdCBlID0gdGhpcy50YS5zeW5jRW5naW5lO1xuICAgICAgICB0aGlzLnNoYXJlZENsaWVudFN0YXRlIGluc3RhbmNlb2YgUXIgJiYgKHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuc3luY0VuZ2luZSA9IHtcbiAgICAgICAgICAgIG1pOiB2YS5iaW5kKG51bGwsIGUpLFxuICAgICAgICAgICAgZ2k6IE5hLmJpbmQobnVsbCwgZSksXG4gICAgICAgICAgICB5aToga2EuYmluZChudWxsLCBlKSxcbiAgICAgICAgICAgIFRuOiBDYS5iaW5kKG51bGwsIGUpLFxuICAgICAgICAgICAgX2k6IGJhLmJpbmQobnVsbCwgZSlcbiAgICAgICAgfSwgYXdhaXQgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5zdGFydCgpKSwgXG4gICAgICAgIC8vIE5PVEU6IFRoaXMgd2lsbCBpbW1lZGlhdGVseSBjYWxsIHRoZSBsaXN0ZW5lciwgc28gd2UgbWFrZSBzdXJlIHRvXG4gICAgICAgIC8vIHNldCBpdCBhZnRlciBsb2NhbFN0b3JlIC8gcmVtb3RlU3RvcmUgYXJlIHN0YXJ0ZWQuXG4gICAgICAgIGF3YWl0IHRoaXMucGVyc2lzdGVuY2Uuc24oKGFzeW5jIHQgPT4ge1xuICAgICAgICAgICAgYXdhaXQgVmEodGhpcy50YS5zeW5jRW5naW5lLCB0KSwgdGhpcy5nY1NjaGVkdWxlciAmJiAodCAmJiAhdGhpcy5nY1NjaGVkdWxlci5zdGFydGVkID8gdGhpcy5nY1NjaGVkdWxlci5zdGFydCh0aGlzLmxvY2FsU3RvcmUpIDogdCB8fCB0aGlzLmdjU2NoZWR1bGVyLnN0b3AoKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgSm8odCkge1xuICAgICAgICBjb25zdCBlID0gWHIoKTtcbiAgICAgICAgaWYgKCFRci5idChlKSkgdGhyb3cgbmV3IGooSy5VTklNUExFTUVOVEVELCBcIkluZGV4ZWREQiBwZXJzaXN0ZW5jZSBpcyBvbmx5IGF2YWlsYWJsZSBvbiBwbGF0Zm9ybXMgdGhhdCBzdXBwb3J0IExvY2FsU3RvcmFnZS5cIik7XG4gICAgICAgIGNvbnN0IG4gPSBvcih0LmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkLCB0LmRhdGFiYXNlSW5mby5wZXJzaXN0ZW5jZUtleSk7XG4gICAgICAgIHJldHVybiBuZXcgUXIoZSwgdC5hc3luY1F1ZXVlLCBuLCB0LmNsaWVudElkLCB0LmluaXRpYWxVc2VyKTtcbiAgICB9XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgYW5kIHdpcmVzIHRoZSBjb21wb25lbnRzIHRoYXQgYXJlIG5lZWRlZCB0byBpbnRlcmZhY2Ugd2l0aCB0aGVcbiAqIG5ldHdvcmsuXG4gKi8gY2xhc3MgQmEge1xuICAgIGFzeW5jIGluaXRpYWxpemUodCwgZSkge1xuICAgICAgICB0aGlzLmxvY2FsU3RvcmUgfHwgKHRoaXMubG9jYWxTdG9yZSA9IHQubG9jYWxTdG9yZSwgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSA9IHQuc2hhcmVkQ2xpZW50U3RhdGUsIFxuICAgICAgICB0aGlzLmRhdGFzdG9yZSA9IHRoaXMuY3JlYXRlRGF0YXN0b3JlKGUpLCB0aGlzLnJlbW90ZVN0b3JlID0gdGhpcy5jcmVhdGVSZW1vdGVTdG9yZShlKSwgXG4gICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyID0gdGhpcy5jcmVhdGVFdmVudE1hbmFnZXIoZSksIHRoaXMuc3luY0VuZ2luZSA9IHRoaXMuY3JlYXRlU3luY0VuZ2luZShlLCBcbiAgICAgICAgLyogc3RhcnRBc1ByaW1hcnk9Ki8gIXQuc3luY2hyb25pemVUYWJzKSwgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5vbmxpbmVTdGF0ZUhhbmRsZXIgPSB0ID0+IGhhKHRoaXMuc3luY0VuZ2luZSwgdCwgMSAvKiBTaGFyZWRDbGllbnRTdGF0ZSAqLyksIFxuICAgICAgICB0aGlzLnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5oYW5kbGVDcmVkZW50aWFsQ2hhbmdlID0gQWEuYmluZChudWxsLCB0aGlzLnN5bmNFbmdpbmUpLCBcbiAgICAgICAgYXdhaXQga28odGhpcy5yZW1vdGVTdG9yZSwgdGhpcy5zeW5jRW5naW5lLmlzUHJpbWFyeUNsaWVudCkpO1xuICAgIH1cbiAgICBjcmVhdGVFdmVudE1hbmFnZXIodCkge1xuICAgICAgICByZXR1cm4gbmV3IHFvO1xuICAgIH1cbiAgICBjcmVhdGVEYXRhc3RvcmUodCkge1xuICAgICAgICBjb25zdCBlID0gdG8odC5kYXRhYmFzZUluZm8uZGF0YWJhc2VJZCksIG4gPSAocyA9IHQuZGF0YWJhc2VJbmZvLCBuZXcgWXIocykpO1xuICAgICAgICB2YXIgcztcbiAgICAgICAgLyoqIFJldHVybiB0aGUgUGxhdGZvcm0tc3BlY2lmaWMgY29ubmVjdGl2aXR5IG1vbml0b3IuICovICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSwgbiwgcykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBybyh0LCBlLCBuLCBzKTtcbiAgICAgICAgfSh0LmF1dGhDcmVkZW50aWFscywgdC5hcHBDaGVja0NyZWRlbnRpYWxzLCBuLCBlKTtcbiAgICB9XG4gICAgY3JlYXRlUmVtb3RlU3RvcmUodCkge1xuICAgICAgICByZXR1cm4gZSA9IHRoaXMubG9jYWxTdG9yZSwgbiA9IHRoaXMuZGF0YXN0b3JlLCBzID0gdC5hc3luY1F1ZXVlLCBpID0gdCA9PiBoYSh0aGlzLnN5bmNFbmdpbmUsIHQsIDAgLyogUmVtb3RlU3RvcmUgKi8pLCBcbiAgICAgICAgciA9IHpyLmJ0KCkgPyBuZXcgenIgOiBuZXcgR3IsIG5ldyBhbyhlLCBuLCBzLCBpLCByKTtcbiAgICAgICAgdmFyIGUsIG4sIHMsIGksIHI7XG4gICAgICAgIC8qKiBSZS1lbmFibGVzIHRoZSBuZXR3b3JrLiBJZGVtcG90ZW50LiAqLyAgICB9XG4gICAgY3JlYXRlU3luY0VuZ2luZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlLCBuLCBcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBNYW5hZ2VzIHN0YXRlIHN5bmNocm9uaXphdGlvbiBpbiBtdWx0aS10YWIgZW52aXJvbm1lbnRzLlxuICAgICAgICBzLCBpLCByLCBvKSB7XG4gICAgICAgICAgICBjb25zdCBhID0gbmV3IGlhKHQsIGUsIG4sIHMsIGksIHIpO1xuICAgICAgICAgICAgcmV0dXJuIG8gJiYgKGEuV28gPSAhMCksIGE7XG4gICAgICAgIH0odGhpcy5sb2NhbFN0b3JlLCB0aGlzLnJlbW90ZVN0b3JlLCB0aGlzLmV2ZW50TWFuYWdlciwgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSwgdC5pbml0aWFsVXNlciwgdC5tYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9ucywgZSk7XG4gICAgfVxuICAgIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIGFzeW5jIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBxKHQpO1xuICAgICAgICAgICAgJChcIlJlbW90ZVN0b3JlXCIsIFwiUmVtb3RlU3RvcmUgc2h1dHRpbmcgZG93bi5cIiksIGUuR3IuYWRkKDUgLyogU2h1dGRvd24gKi8pLCBhd2FpdCB1byhlKSwgXG4gICAgICAgICAgICBlLkhyLnNodXRkb3duKCksIFxuICAgICAgICAgICAgLy8gU2V0IHRoZSBPbmxpbmVTdGF0ZSB0byBVbmtub3duIChyYXRoZXIgdGhhbiBPZmZsaW5lKSB0byBhdm9pZCBwb3RlbnRpYWxseVxuICAgICAgICAgICAgLy8gdHJpZ2dlcmluZyBzcHVyaW91cyBsaXN0ZW5lciBldmVudHMgd2l0aCBjYWNoZWQgZGF0YSwgZXRjLlxuICAgICAgICAgICAgZS5Kci5zZXQoXCJVbmtub3duXCIgLyogVW5rbm93biAqLyk7XG4gICAgICAgIH0odGhpcy5yZW1vdGVTdG9yZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBIb3cgbWFueSBieXRlcyB0byByZWFkIGVhY2ggdGltZSB3aGVuIGBSZWFkYWJsZVN0cmVhbVJlYWRlci5yZWFkKClgIGlzXG4gKiBjYWxsZWQuIE9ubHkgYXBwbGljYWJsZSBmb3IgYnl0ZSBzdHJlYW1zIHRoYXQgd2UgY29udHJvbCAoZS5nLiB0aG9zZSBiYWNrZWRcbiAqIGJ5IGFuIFVJbnQ4QXJyYXkpLlxuICovXG4vKipcbiAqIEJ1aWxkcyBhIGBCeXRlU3RyZWFtUmVhZGVyYCBmcm9tIGEgVUludDhBcnJheS5cbiAqIEBwYXJhbSBzb3VyY2UgLSBUaGUgZGF0YSBzb3VyY2UgdG8gdXNlLlxuICogQHBhcmFtIGJ5dGVzUGVyUmVhZCAtIEhvdyBtYW55IGJ5dGVzIGVhY2ggYHJlYWQoKWAgZnJvbSB0aGUgcmV0dXJuZWQgcmVhZGVyXG4gKiAgICAgICAgd2lsbCByZWFkLlxuICovXG5mdW5jdGlvbiBVYSh0LCBlID0gMTAyNDApIHtcbiAgICBsZXQgbiA9IDA7XG4gICAgLy8gVGhlIFR5cGVTY3JpcHQgZGVmaW5pdGlvbiBmb3IgUmVhZGFibGVTdHJlYW1SZWFkZXIgY2hhbmdlZC4gV2UgdXNlXG4gICAgLy8gYGFueWAgaGVyZSB0byBhbGxvdyB0aGlzIGNvZGUgdG8gY29tcGlsZSB3aXRoIGRpZmZlcmVudCB2ZXJzaW9ucy5cbiAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy80Mjk3MFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGFzeW5jIHJlYWQoKSB7XG4gICAgICAgICAgICBpZiAobiA8IHQuYnl0ZUxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0LnNsaWNlKG4sIG4gKyBlKSxcbiAgICAgICAgICAgICAgICAgICAgZG9uZTogITFcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiBuICs9IGUsIHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGRvbmU6ICEwXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyBjYW5jZWwoKSB7fSxcbiAgICAgICAgcmVsZWFzZUxvY2soKSB7fSxcbiAgICAgICAgY2xvc2VkOiBQcm9taXNlLnJlamVjdChcInVuaW1wbGVtZW50ZWRcIilcbiAgICB9O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBPbiB3ZWIsIGEgYFJlYWRhYmxlU3RyZWFtYCBpcyB3cmFwcGVkIGFyb3VuZCBieSBhIGBCeXRlU3RyZWFtUmVhZGVyYC5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qXG4gKiBBIHdyYXBwZXIgaW1wbGVtZW50YXRpb24gb2YgT2JzZXJ2ZXI8VD4gdGhhdCB3aWxsIGRpc3BhdGNoIGV2ZW50c1xuICogYXN5bmNocm9ub3VzbHkuIFRvIGFsbG93IGltbWVkaWF0ZSBzaWxlbmNpbmcsIGEgbXV0ZSBjYWxsIGlzIGFkZGVkIHdoaWNoXG4gKiBjYXVzZXMgZXZlbnRzIHNjaGVkdWxlZCB0byBubyBsb25nZXIgYmUgcmFpc2VkLlxuICovXG5jbGFzcyBxYSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLm9ic2VydmVyID0gdCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGVuIHNldCB0byB0cnVlLCB3aWxsIG5vdCByYWlzZSBmdXR1cmUgZXZlbnRzLiBOZWNlc3NhcnkgdG8gZGVhbCB3aXRoXG4gICAgICAgICAqIGFzeW5jIGRldGFjaG1lbnQgb2YgbGlzdGVuZXIuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm11dGVkID0gITE7XG4gICAgfVxuICAgIG5leHQodCkge1xuICAgICAgICB0aGlzLm9ic2VydmVyLm5leHQgJiYgdGhpcy5lYSh0aGlzLm9ic2VydmVyLm5leHQsIHQpO1xuICAgIH1cbiAgICBlcnJvcih0KSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIuZXJyb3IgPyB0aGlzLmVhKHRoaXMub2JzZXJ2ZXIuZXJyb3IsIHQpIDogY29uc29sZS5lcnJvcihcIlVuY2F1Z2h0IEVycm9yIGluIHNuYXBzaG90IGxpc3RlbmVyOlwiLCB0KTtcbiAgICB9XG4gICAgbmEoKSB7XG4gICAgICAgIHRoaXMubXV0ZWQgPSAhMDtcbiAgICB9XG4gICAgZWEodCwgZSkge1xuICAgICAgICB0aGlzLm11dGVkIHx8IHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubXV0ZWQgfHwgdChlKTtcbiAgICAgICAgfSksIDApO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBjbGFzcyByZXByZXNlbnRpbmcgYSBidW5kbGUuXG4gKlxuICogVGFrZXMgYSBidW5kbGUgc3RyZWFtIG9yIGJ1ZmZlciwgYW5kIHByZXNlbnRzIGFic3RyYWN0aW9ucyB0byByZWFkIGJ1bmRsZWRcbiAqIGVsZW1lbnRzIG91dCBvZiB0aGUgdW5kZXJseWluZyBjb250ZW50LlxuICovIGNsYXNzIEthIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIHJlYWRlciB0byByZWFkIGZyb20gdW5kZXJseWluZyBiaW5hcnkgYnVuZGxlIGRhdGEgc291cmNlLiAqL1xuICAgIHQsIGUpIHtcbiAgICAgICAgdGhpcy5zYSA9IHQsIHRoaXMuayA9IGUsIFxuICAgICAgICAvKiogQ2FjaGVkIGJ1bmRsZSBtZXRhZGF0YS4gKi9cbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IG5ldyBRLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEludGVybmFsIGJ1ZmZlciB0byBob2xkIGJ1bmRsZSBjb250ZW50LCBhY2N1bXVsYXRpbmcgaW5jb21wbGV0ZSBlbGVtZW50XG4gICAgICAgICAqIGNvbnRlbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IG5ldyBVaW50OEFycmF5LCB0aGlzLmlhID0gbmV3IFRleHREZWNvZGVyKFwidXRmLThcIiksIFxuICAgICAgICAvLyBSZWFkIHRoZSBtZXRhZGF0YSAod2hpY2ggaXMgdGhlIGZpcnN0IGVsZW1lbnQpLlxuICAgICAgICB0aGlzLnJhKCkudGhlbigodCA9PiB7XG4gICAgICAgICAgICB0ICYmIHQuX28oKSA/IHRoaXMubWV0YWRhdGEucmVzb2x2ZSh0LnBheWxvYWQubWV0YWRhdGEpIDogdGhpcy5tZXRhZGF0YS5yZWplY3QobmV3IEVycm9yKGBUaGUgZmlyc3QgZWxlbWVudCBvZiB0aGUgYnVuZGxlIGlzIG5vdCBhIG1ldGFkYXRhLCBpdCBpc1xcbiAgICAgICAgICAgICAke0pTT04uc3RyaW5naWZ5KG51bGwgPT0gdCA/IHZvaWQgMCA6IHQucGF5bG9hZCl9YCkpO1xuICAgICAgICB9KSwgKHQgPT4gdGhpcy5tZXRhZGF0YS5yZWplY3QodCkpKTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNhLmNhbmNlbCgpO1xuICAgIH1cbiAgICBhc3luYyBnZXRNZXRhZGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWV0YWRhdGEucHJvbWlzZTtcbiAgICB9XG4gICAgYXN5bmMgSG8oKSB7XG4gICAgICAgIC8vIE1ha2VzIHN1cmUgbWV0YWRhdGEgaXMgcmVhZCBiZWZvcmUgcHJvY2VlZGluZy5cbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0TWV0YWRhdGEoKSwgdGhpcy5yYSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkcyBmcm9tIHRoZSBoZWFkIG9mIGludGVybmFsIGJ1ZmZlciwgYW5kIHB1bGxpbmcgbW9yZSBkYXRhIGZyb21cbiAgICAgKiB1bmRlcmx5aW5nIHN0cmVhbSBpZiBhIGNvbXBsZXRlIGVsZW1lbnQgY2Fubm90IGJlIGZvdW5kLCB1bnRpbCBhblxuICAgICAqIGVsZW1lbnQoaW5jbHVkaW5nIHRoZSBwcmVmaXhlZCBsZW5ndGggYW5kIHRoZSBKU09OIHN0cmluZykgaXMgZm91bmQuXG4gICAgICpcbiAgICAgKiBPbmNlIGEgY29tcGxldGUgZWxlbWVudCBpcyByZWFkLCBpdCBpcyBkcm9wcGVkIGZyb20gaW50ZXJuYWwgYnVmZmVyLlxuICAgICAqXG4gICAgICogUmV0dXJucyBlaXRoZXIgdGhlIGJ1bmRsZWQgZWxlbWVudCwgb3IgbnVsbCBpZiB3ZSBoYXZlIHJlYWNoZWQgdGhlIGVuZCBvZlxuICAgICAqIHRoZSBzdHJlYW0uXG4gICAgICovICAgIGFzeW5jIHJhKCkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgdGhpcy5vYSgpO1xuICAgICAgICBpZiAobnVsbCA9PT0gdCkgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmlhLmRlY29kZSh0KSwgbiA9IE51bWJlcihlKTtcbiAgICAgICAgaXNOYU4obikgJiYgdGhpcy5hYShgbGVuZ3RoIHN0cmluZyAoJHtlfSkgaXMgbm90IHZhbGlkIG51bWJlcmApO1xuICAgICAgICBjb25zdCBzID0gYXdhaXQgdGhpcy5jYShuKTtcbiAgICAgICAgcmV0dXJuIG5ldyBIbyhKU09OLnBhcnNlKHMpLCB0Lmxlbmd0aCArIG4pO1xuICAgIH1cbiAgICAvKiogRmlyc3QgaW5kZXggb2YgJ3snIGZyb20gdGhlIHVuZGVybHlpbmcgYnVmZmVyLiAqLyAgICB1YSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyLmZpbmRJbmRleCgodCA9PiB0ID09PSBcIntcIi5jaGFyQ29kZUF0KDApKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIGZyb20gdGhlIGJlZ2lubmluZyBvZiB0aGUgaW50ZXJuYWwgYnVmZmVyLCB1bnRpbCB0aGUgZmlyc3QgJ3snLCBhbmRcbiAgICAgKiByZXR1cm4gdGhlIGNvbnRlbnQuXG4gICAgICpcbiAgICAgKiBJZiByZWFjaGVkIGVuZCBvZiB0aGUgc3RyZWFtLCByZXR1cm5zIGEgbnVsbC5cbiAgICAgKi8gICAgYXN5bmMgb2EoKSB7XG4gICAgICAgIGZvciAoO3RoaXMudWEoKSA8IDA7ICkge1xuICAgICAgICAgICAgaWYgKGF3YWl0IHRoaXMuaGEoKSkgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQnJva2Ugb3V0IG9mIHRoZSBsb29wIGJlY2F1c2UgdW5kZXJseWluZyBzdHJlYW0gaXMgY2xvc2VkLCBhbmQgdGhlcmVcbiAgICAgICAgLy8gaGFwcGVucyB0byBiZSBubyBtb3JlIGRhdGEgdG8gcHJvY2Vzcy5cbiAgICAgICAgICAgICAgICBpZiAoMCA9PT0gdGhpcy5idWZmZXIubGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMudWEoKTtcbiAgICAgICAgLy8gQnJva2Ugb3V0IG9mIHRoZSBsb29wIGJlY2F1c2UgdW5kZXJseWluZyBzdHJlYW0gaXMgY2xvc2VkLCBidXQgc3RpbGxcbiAgICAgICAgLy8gY2Fubm90IGZpbmQgYW4gb3BlbiBicmFja2V0LlxuICAgICAgICAgICAgICAgIHQgPCAwICYmIHRoaXMuYWEoXCJSZWFjaGVkIHRoZSBlbmQgb2YgYnVuZGxlIHdoZW4gYSBsZW5ndGggc3RyaW5nIGlzIGV4cGVjdGVkLlwiKTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuYnVmZmVyLnNsaWNlKDAsIHQpO1xuICAgICAgICAvLyBVcGRhdGUgdGhlIGludGVybmFsIGJ1ZmZlciB0byBkcm9wIHRoZSByZWFkIGxlbmd0aC5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5zbGljZSh0KSwgZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgZnJvbSBhIHNwZWNpZmllZCBwb3NpdGlvbiBmcm9tIHRoZSBpbnRlcm5hbCBidWZmZXIsIGZvciBhIHNwZWNpZmllZFxuICAgICAqIG51bWJlciBvZiBieXRlcywgcHVsbGluZyBtb3JlIGRhdGEgZnJvbSB0aGUgdW5kZXJseWluZyBzdHJlYW0gaWYgbmVlZGVkLlxuICAgICAqXG4gICAgICogUmV0dXJucyBhIHN0cmluZyBkZWNvZGVkIGZyb20gdGhlIHJlYWQgYnl0ZXMuXG4gICAgICovICAgIGFzeW5jIGNhKHQpIHtcbiAgICAgICAgZm9yICg7dGhpcy5idWZmZXIubGVuZ3RoIDwgdDsgKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmhhKCkgJiYgdGhpcy5hYShcIlJlYWNoZWQgdGhlIGVuZCBvZiBidW5kbGUgd2hlbiBtb3JlIGlzIGV4cGVjdGVkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlID0gdGhpcy5pYS5kZWNvZGUodGhpcy5idWZmZXIuc2xpY2UoMCwgdCkpO1xuICAgICAgICAvLyBVcGRhdGUgdGhlIGludGVybmFsIGJ1ZmZlciB0byBkcm9wIHRoZSByZWFkIGpzb24gc3RyaW5nLlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKHQpLCBlO1xuICAgIH1cbiAgICBhYSh0KSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgICAgdGhyb3cgdGhpcy5zYS5jYW5jZWwoKSwgbmV3IEVycm9yKGBJbnZhbGlkIGJ1bmRsZSBmb3JtYXQ6ICR7dH1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHVsbHMgbW9yZSBkYXRhIGZyb20gdW5kZXJseWluZyBzdHJlYW0gdG8gaW50ZXJuYWwgYnVmZmVyLlxuICAgICAqIFJldHVybnMgYSBib29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgc3RyZWFtIGlzIGZpbmlzaGVkLlxuICAgICAqLyAgICBhc3luYyBoYSgpIHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IHRoaXMuc2EucmVhZCgpO1xuICAgICAgICBpZiAoIXQuZG9uZSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBVaW50OEFycmF5KHRoaXMuYnVmZmVyLmxlbmd0aCArIHQudmFsdWUubGVuZ3RoKTtcbiAgICAgICAgICAgIGUuc2V0KHRoaXMuYnVmZmVyKSwgZS5zZXQodC52YWx1ZSwgdGhpcy5idWZmZXIubGVuZ3RoKSwgdGhpcy5idWZmZXIgPSBlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0LmRvbmU7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBJbnRlcm5hbCB0cmFuc2FjdGlvbiBvYmplY3QgcmVzcG9uc2libGUgZm9yIGFjY3VtdWxhdGluZyB0aGUgbXV0YXRpb25zIHRvXG4gKiBwZXJmb3JtIGFuZCB0aGUgYmFzZSB2ZXJzaW9ucyBmb3IgYW55IGRvY3VtZW50cyByZWFkLlxuICovXG5jbGFzcyBqYSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmRhdGFzdG9yZSA9IHQsIFxuICAgICAgICAvLyBUaGUgdmVyc2lvbiBvZiBlYWNoIGRvY3VtZW50IHRoYXQgd2FzIHJlYWQgZHVyaW5nIHRoaXMgdHJhbnNhY3Rpb24uXG4gICAgICAgIHRoaXMucmVhZFZlcnNpb25zID0gbmV3IE1hcCwgdGhpcy5tdXRhdGlvbnMgPSBbXSwgdGhpcy5jb21taXR0ZWQgPSAhMSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGRlZmVycmVkIHVzYWdlIGVycm9yIHRoYXQgb2NjdXJyZWQgcHJldmlvdXNseSBpbiB0aGlzIHRyYW5zYWN0aW9uIHRoYXRcbiAgICAgICAgICogd2lsbCBjYXVzZSB0aGUgdHJhbnNhY3Rpb24gdG8gZmFpbCBvbmNlIGl0IGFjdHVhbGx5IGNvbW1pdHMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmxhc3RXcml0ZUVycm9yID0gbnVsbCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgb2YgZG9jdW1lbnRzIHRoYXQgaGF2ZSBiZWVuIHdyaXR0ZW4gaW4gdGhlIHRyYW5zYWN0aW9uLlxuICAgICAgICAgKlxuICAgICAgICAgKiBXaGVuIHRoZXJlJ3MgbW9yZSB0aGFuIG9uZSB3cml0ZSB0byB0aGUgc2FtZSBrZXkgaW4gYSB0cmFuc2FjdGlvbiwgYW55XG4gICAgICAgICAqIHdyaXRlcyBhZnRlciB0aGUgZmlyc3QgYXJlIGhhbmRsZWQgZGlmZmVyZW50bHkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLndyaXR0ZW5Eb2NzID0gbmV3IFNldDtcbiAgICB9XG4gICAgYXN5bmMgbG9va3VwKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuZW5zdXJlQ29tbWl0Tm90Q2FsbGVkKCksIHRoaXMubXV0YXRpb25zLmxlbmd0aCA+IDApIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJGaXJlc3RvcmUgdHJhbnNhY3Rpb25zIHJlcXVpcmUgYWxsIHJlYWRzIHRvIGJlIGV4ZWN1dGVkIGJlZm9yZSBhbGwgd3JpdGVzLlwiKTtcbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IGFzeW5jIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBxKHQpLCBzID0gdHMobi5rKSArIFwiL2RvY3VtZW50c1wiLCBpID0ge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50czogZS5tYXAoKHQgPT4gSm4obi5rLCB0KSkpXG4gICAgICAgICAgICB9LCByID0gYXdhaXQgbi5qaShcIkJhdGNoR2V0RG9jdW1lbnRzXCIsIHMsIGkpLCBvID0gbmV3IE1hcDtcbiAgICAgICAgICAgIHIuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IGlzKG4uaywgdCk7XG4gICAgICAgICAgICAgICAgby5zZXQoZS5rZXkudG9TdHJpbmcoKSwgZSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBjb25zdCBhID0gW107XG4gICAgICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gby5nZXQodC50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICBCKCEhZSksIGEucHVzaChlKTtcbiAgICAgICAgICAgIH0pKSwgYTtcbiAgICAgICAgfSh0aGlzLmRhdGFzdG9yZSwgdCk7XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKHQgPT4gdGhpcy5yZWNvcmRWZXJzaW9uKHQpKSksIGU7XG4gICAgfVxuICAgIHNldCh0LCBlKSB7XG4gICAgICAgIHRoaXMud3JpdGUoZS50b011dGF0aW9uKHQsIHRoaXMucHJlY29uZGl0aW9uKHQpKSksIHRoaXMud3JpdHRlbkRvY3MuYWRkKHQudG9TdHJpbmcoKSk7XG4gICAgfVxuICAgIHVwZGF0ZSh0LCBlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLndyaXRlKGUudG9NdXRhdGlvbih0LCB0aGlzLnByZWNvbmRpdGlvbkZvclVwZGF0ZSh0KSkpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICB0aGlzLmxhc3RXcml0ZUVycm9yID0gdDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLndyaXR0ZW5Eb2NzLmFkZCh0LnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgICBkZWxldGUodCkge1xuICAgICAgICB0aGlzLndyaXRlKG5ldyBobih0LCB0aGlzLnByZWNvbmRpdGlvbih0KSkpLCB0aGlzLndyaXR0ZW5Eb2NzLmFkZCh0LnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgICBhc3luYyBjb21taXQoKSB7XG4gICAgICAgIGlmICh0aGlzLmVuc3VyZUNvbW1pdE5vdENhbGxlZCgpLCB0aGlzLmxhc3RXcml0ZUVycm9yKSB0aHJvdyB0aGlzLmxhc3RXcml0ZUVycm9yO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5yZWFkVmVyc2lvbnM7XG4gICAgICAgIC8vIEZvciBlYWNoIG11dGF0aW9uLCBub3RlIHRoYXQgdGhlIGRvYyB3YXMgd3JpdHRlbi5cbiAgICAgICAgICAgICAgICB0aGlzLm11dGF0aW9ucy5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHQuZGVsZXRlKGUua2V5LnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSksIFxuICAgICAgICAvLyBGb3IgZWFjaCBkb2N1bWVudCB0aGF0IHdhcyByZWFkIGJ1dCBub3Qgd3JpdHRlbiB0bywgd2Ugd2FudCB0byBwZXJmb3JtXG4gICAgICAgIC8vIGEgYHZlcmlmeWAgb3BlcmF0aW9uLlxuICAgICAgICB0LmZvckVhY2goKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gU3QuZnJvbVBhdGgoZSk7XG4gICAgICAgICAgICB0aGlzLm11dGF0aW9ucy5wdXNoKG5ldyBsbihuLCB0aGlzLnByZWNvbmRpdGlvbihuKSkpO1xuICAgICAgICB9KSksIGF3YWl0IGFzeW5jIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBxKHQpLCBzID0gdHMobi5rKSArIFwiL2RvY3VtZW50c1wiLCBpID0ge1xuICAgICAgICAgICAgICAgIHdyaXRlczogZS5tYXAoKHQgPT4gb3Mobi5rLCB0KSkpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYXdhaXQgbi5CaShcIkNvbW1pdFwiLCBzLCBpKTtcbiAgICAgICAgfSh0aGlzLmRhdGFzdG9yZSwgdGhpcy5tdXRhdGlvbnMpLCB0aGlzLmNvbW1pdHRlZCA9ICEwO1xuICAgIH1cbiAgICByZWNvcmRWZXJzaW9uKHQpIHtcbiAgICAgICAgbGV0IGU7XG4gICAgICAgIGlmICh0LmlzRm91bmREb2N1bWVudCgpKSBlID0gdC52ZXJzaW9uOyBlbHNlIHtcbiAgICAgICAgICAgIGlmICghdC5pc05vRG9jdW1lbnQoKSkgdGhyb3cgTCgpO1xuICAgICAgICAgICAgLy8gRm9yIGRlbGV0ZWQgZG9jcywgd2UgbXVzdCB1c2UgYmFzZVZlcnNpb24gMCB3aGVuIHdlIG92ZXJ3cml0ZSB0aGVtLlxuICAgICAgICAgICAgZSA9IGN0Lm1pbigpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnJlYWRWZXJzaW9ucy5nZXQodC5rZXkudG9TdHJpbmcoKSk7XG4gICAgICAgIGlmIChuKSB7XG4gICAgICAgICAgICBpZiAoIWUuaXNFcXVhbChuKSkgXG4gICAgICAgICAgICAvLyBUaGlzIHRyYW5zYWN0aW9uIHdpbGwgZmFpbCBubyBtYXR0ZXIgd2hhdC5cbiAgICAgICAgICAgIHRocm93IG5ldyBqKEsuQUJPUlRFRCwgXCJEb2N1bWVudCB2ZXJzaW9uIGNoYW5nZWQgYmV0d2VlbiB0d28gcmVhZHMuXCIpO1xuICAgICAgICB9IGVsc2UgdGhpcy5yZWFkVmVyc2lvbnMuc2V0KHQua2V5LnRvU3RyaW5nKCksIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB2ZXJzaW9uIG9mIHRoaXMgZG9jdW1lbnQgd2hlbiBpdCB3YXMgcmVhZCBpbiB0aGlzIHRyYW5zYWN0aW9uLFxuICAgICAqIGFzIGEgcHJlY29uZGl0aW9uLCBvciBubyBwcmVjb25kaXRpb24gaWYgaXQgd2FzIG5vdCByZWFkLlxuICAgICAqLyAgICBwcmVjb25kaXRpb24odCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5yZWFkVmVyc2lvbnMuZ2V0KHQudG9TdHJpbmcoKSk7XG4gICAgICAgIHJldHVybiAhdGhpcy53cml0dGVuRG9jcy5oYXModC50b1N0cmluZygpKSAmJiBlID8gSmUudXBkYXRlVGltZShlKSA6IEplLm5vbmUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgcHJlY29uZGl0aW9uIGZvciBhIGRvY3VtZW50IGlmIHRoZSBvcGVyYXRpb24gaXMgYW4gdXBkYXRlLlxuICAgICAqLyAgICBwcmVjb25kaXRpb25Gb3JVcGRhdGUodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5yZWFkVmVyc2lvbnMuZ2V0KHQudG9TdHJpbmcoKSk7XG4gICAgICAgIC8vIFRoZSBmaXJzdCB0aW1lIGEgZG9jdW1lbnQgaXMgd3JpdHRlbiwgd2Ugd2FudCB0byB0YWtlIGludG8gYWNjb3VudCB0aGVcbiAgICAgICAgLy8gcmVhZCB0aW1lIGFuZCBleGlzdGVuY2VcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMud3JpdHRlbkRvY3MuaGFzKHQudG9TdHJpbmcoKSkgJiYgZSkge1xuICAgICAgICAgICAgaWYgKGUuaXNFcXVhbChjdC5taW4oKSkpIFxuICAgICAgICAgICAgLy8gVGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QsIHNvIGZhaWwgdGhlIHRyYW5zYWN0aW9uLlxuICAgICAgICAgICAgLy8gVGhpcyBoYXMgdG8gYmUgdmFsaWRhdGVkIGxvY2FsbHkgYmVjYXVzZSB5b3UgY2FuJ3Qgc2VuZCBhXG4gICAgICAgICAgICAvLyBwcmVjb25kaXRpb24gdGhhdCBhIGRvY3VtZW50IGRvZXMgbm90IGV4aXN0IHdpdGhvdXQgY2hhbmdpbmcgdGhlXG4gICAgICAgICAgICAvLyBzZW1hbnRpY3Mgb2YgdGhlIGJhY2tlbmQgd3JpdGUgdG8gYmUgYW4gaW5zZXJ0LiBUaGlzIGlzIHRoZSByZXZlcnNlXG4gICAgICAgICAgICAvLyBvZiB3aGF0IHdlIHdhbnQsIHNpbmNlIHdlIHdhbnQgdG8gYXNzZXJ0IHRoYXQgdGhlIGRvY3VtZW50IGRvZXNuJ3RcbiAgICAgICAgICAgIC8vIGV4aXN0IGJ1dCB0aGVuIHNlbmQgdGhlIHVwZGF0ZSBhbmQgaGF2ZSBpdCBmYWlsLiBTaW5jZSB3ZSBjYW4ndFxuICAgICAgICAgICAgLy8gZXhwcmVzcyB0aGF0IHRvIHRoZSBiYWNrZW5kLCB3ZSBoYXZlIHRvIHZhbGlkYXRlIGxvY2FsbHkuXG4gICAgICAgICAgICAvLyBOb3RlOiB0aGlzIGNhbiBjaGFuZ2Ugb25jZSB3ZSBjYW4gc2VuZCBzZXBhcmF0ZSB2ZXJpZnkgd3JpdGVzIGluIHRoZVxuICAgICAgICAgICAgLy8gdHJhbnNhY3Rpb24uXG4gICAgICAgICAgICB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiQ2FuJ3QgdXBkYXRlIGEgZG9jdW1lbnQgdGhhdCBkb2Vzbid0IGV4aXN0LlwiKTtcbiAgICAgICAgICAgIC8vIERvY3VtZW50IGV4aXN0cywgYmFzZSBwcmVjb25kaXRpb24gb24gZG9jdW1lbnQgdXBkYXRlIHRpbWUuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSmUudXBkYXRlVGltZShlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBEb2N1bWVudCB3YXMgbm90IHJlYWQsIHNvIHdlIGp1c3QgdXNlIHRoZSBwcmVjb25kaXRpb25zIGZvciBhIGJsaW5kXG4gICAgICAgIC8vIHVwZGF0ZS5cbiAgICAgICAgcmV0dXJuIEplLmV4aXN0cyghMCk7XG4gICAgfVxuICAgIHdyaXRlKHQpIHtcbiAgICAgICAgdGhpcy5lbnN1cmVDb21taXROb3RDYWxsZWQoKSwgdGhpcy5tdXRhdGlvbnMucHVzaCh0KTtcbiAgICB9XG4gICAgZW5zdXJlQ29tbWl0Tm90Q2FsbGVkKCkge31cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVHJhbnNhY3Rpb25SdW5uZXIgZW5jYXBzdWxhdGVzIHRoZSBsb2dpYyBuZWVkZWQgdG8gcnVuIGFuZCByZXRyeSB0cmFuc2FjdGlvbnNcbiAqIHdpdGggYmFja29mZi5cbiAqL1xuY2xhc3MgUWEge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlID0gdCwgdGhpcy5kYXRhc3RvcmUgPSBlLCB0aGlzLnVwZGF0ZUZ1bmN0aW9uID0gbiwgdGhpcy5kZWZlcnJlZCA9IHMsIFxuICAgICAgICB0aGlzLmxhID0gNSwgdGhpcy51ciA9IG5ldyBlbyh0aGlzLmFzeW5jUXVldWUsIFwidHJhbnNhY3Rpb25fcmV0cnlcIiAvKiBUcmFuc2FjdGlvblJldHJ5ICovKTtcbiAgICB9XG4gICAgLyoqIFJ1bnMgdGhlIHRyYW5zYWN0aW9uIGFuZCBzZXRzIHRoZSByZXN1bHQgb24gZGVmZXJyZWQuICovICAgIHJ1bigpIHtcbiAgICAgICAgdGhpcy5sYSAtPSAxLCB0aGlzLmZhKCk7XG4gICAgfVxuICAgIGZhKCkge1xuICAgICAgICB0aGlzLnVyLlppKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gbmV3IGphKHRoaXMuZGF0YXN0b3JlKSwgZSA9IHRoaXMuZGEodCk7XG4gICAgICAgICAgICBlICYmIGUudGhlbigoZSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKCgpID0+IHQuY29tbWl0KCkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmVycmVkLnJlc29sdmUoZSk7XG4gICAgICAgICAgICAgICAgfSkpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53YSh0KTtcbiAgICAgICAgICAgICAgICB9KSkpKTtcbiAgICAgICAgICAgIH0pKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy53YSh0KTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBkYSh0KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy51cGRhdGVGdW5jdGlvbih0KTtcbiAgICAgICAgICAgIHJldHVybiAhYnQoZSkgJiYgZS5jYXRjaCAmJiBlLnRoZW4gPyBlIDogKHRoaXMuZGVmZXJyZWQucmVqZWN0KEVycm9yKFwiVHJhbnNhY3Rpb24gY2FsbGJhY2sgbXVzdCByZXR1cm4gYSBQcm9taXNlXCIpKSwgXG4gICAgICAgICAgICBudWxsKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgLy8gRG8gbm90IHJldHJ5IGVycm9ycyB0aHJvd24gYnkgdXNlciBwcm92aWRlZCB1cGRhdGVGdW5jdGlvbi5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlZmVycmVkLnJlamVjdCh0KSwgbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3YSh0KSB7XG4gICAgICAgIHRoaXMubGEgPiAwICYmIHRoaXMuX2EodCkgPyAodGhpcy5sYSAtPSAxLCB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gKHRoaXMuZmEoKSwgXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpKSA6IHRoaXMuZGVmZXJyZWQucmVqZWN0KHQpO1xuICAgIH1cbiAgICBfYSh0KSB7XG4gICAgICAgIGlmIChcIkZpcmViYXNlRXJyb3JcIiA9PT0gdC5uYW1lKSB7XG4gICAgICAgICAgICAvLyBJbiB0cmFuc2FjdGlvbnMsIHRoZSBiYWNrZW5kIHdpbGwgZmFpbCBvdXRkYXRlZCByZWFkcyB3aXRoIEZBSUxFRF9QUkVDT05ESVRJT04gYW5kXG4gICAgICAgICAgICAvLyBub24tbWF0Y2hpbmcgZG9jdW1lbnQgdmVyc2lvbnMgd2l0aCBBQk9SVEVELiBUaGVzZSBlcnJvcnMgc2hvdWxkIGJlIHJldHJpZWQuXG4gICAgICAgICAgICBjb25zdCBlID0gdC5jb2RlO1xuICAgICAgICAgICAgcmV0dXJuIFwiYWJvcnRlZFwiID09PSBlIHx8IFwiZmFpbGVkLXByZWNvbmRpdGlvblwiID09PSBlIHx8ICFfbihlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBGaXJlc3RvcmVDbGllbnQgaXMgYSB0b3AtbGV2ZWwgY2xhc3MgdGhhdCBjb25zdHJ1Y3RzIGFuZCBvd25zIGFsbCBvZiB0aGVcbiAqIHBpZWNlcyBvZiB0aGUgY2xpZW50IFNESyBhcmNoaXRlY3R1cmUuIEl0IGlzIHJlc3BvbnNpYmxlIGZvciBjcmVhdGluZyB0aGVcbiAqIGFzeW5jIHF1ZXVlIHRoYXQgaXMgc2hhcmVkIGJ5IGFsbCBvZiB0aGUgb3RoZXIgY29tcG9uZW50cyBpbiB0aGUgc3lzdGVtLlxuICovXG5jbGFzcyBXYSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgXG4gICAgLyoqXG4gICAgICogQXN5bmNocm9ub3VzIHF1ZXVlIHJlc3BvbnNpYmxlIGZvciBhbGwgb2Ygb3VyIGludGVybmFsIHByb2Nlc3NpbmcuIFdoZW5cbiAgICAgKiB3ZSBnZXQgaW5jb21pbmcgd29yayBmcm9tIHRoZSB1c2VyICh2aWEgcHVibGljIEFQSSkgb3IgdGhlIG5ldHdvcmtcbiAgICAgKiAoaW5jb21pbmcgR1JQQyBtZXNzYWdlcyksIHdlIHNob3VsZCBhbHdheXMgc2NoZWR1bGUgb250byB0aGlzIHF1ZXVlLlxuICAgICAqIFRoaXMgZW5zdXJlcyBhbGwgb2Ygb3VyIHdvcmsgaXMgcHJvcGVybHkgc2VyaWFsaXplZCAoZS5nLiB3ZSBkb24ndFxuICAgICAqIHN0YXJ0IHByb2Nlc3NpbmcgYSBuZXcgb3BlcmF0aW9uIHdoaWxlIHRoZSBwcmV2aW91cyBvbmUgaXMgd2FpdGluZyBmb3JcbiAgICAgKiBhbiBhc3luYyBJL08gdG8gY29tcGxldGUpLlxuICAgICAqL1xuICAgIG4sIHMpIHtcbiAgICAgICAgdGhpcy5hdXRoQ3JlZGVudGlhbHMgPSB0LCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMgPSBlLCB0aGlzLmFzeW5jUXVldWUgPSBuLCB0aGlzLmRhdGFiYXNlSW5mbyA9IHMsIFxuICAgICAgICB0aGlzLnVzZXIgPSBELlVOQVVUSEVOVElDQVRFRCwgdGhpcy5jbGllbnRJZCA9IHN0LkEoKSwgdGhpcy5hdXRoQ3JlZGVudGlhbExpc3RlbmVyID0gKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCksIFxuICAgICAgICB0aGlzLmF1dGhDcmVkZW50aWFscy5zdGFydChuLCAoYXN5bmMgdCA9PiB7XG4gICAgICAgICAgICAkKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiUmVjZWl2ZWQgdXNlcj1cIiwgdC51aWQpLCBhd2FpdCB0aGlzLmF1dGhDcmVkZW50aWFsTGlzdGVuZXIodCksIFxuICAgICAgICAgICAgdGhpcy51c2VyID0gdDtcbiAgICAgICAgfSkpLCBcbiAgICAgICAgLy8gUmVnaXN0ZXIgYW4gZW1wdHkgY3JlZGVudGlhbHMgY2hhbmdlIGxpc3RlbmVyIHRvIGFjdGl2YXRlIHRva2VuIHJlZnJlc2guXG4gICAgICAgIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5zdGFydChuLCAoKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCkpKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0Q29uZmlndXJhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFzeW5jUXVldWU6IHRoaXMuYXN5bmNRdWV1ZSxcbiAgICAgICAgICAgIGRhdGFiYXNlSW5mbzogdGhpcy5kYXRhYmFzZUluZm8sXG4gICAgICAgICAgICBjbGllbnRJZDogdGhpcy5jbGllbnRJZCxcbiAgICAgICAgICAgIGF1dGhDcmVkZW50aWFsczogdGhpcy5hdXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICBhcHBDaGVja0NyZWRlbnRpYWxzOiB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICBpbml0aWFsVXNlcjogdGhpcy51c2VyLFxuICAgICAgICAgICAgbWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnM6IDEwMFxuICAgICAgICB9O1xuICAgIH1cbiAgICBzZXRDcmVkZW50aWFsQ2hhbmdlTGlzdGVuZXIodCkge1xuICAgICAgICB0aGlzLmF1dGhDcmVkZW50aWFsTGlzdGVuZXIgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVja3MgdGhhdCB0aGUgY2xpZW50IGhhcyBub3QgYmVlbiB0ZXJtaW5hdGVkLiBFbnN1cmVzIHRoYXQgb3RoZXIgbWV0aG9kcyBvblxuICAgICAqIHRoaXMgY2xhc3MgY2Fubm90IGJlIGNhbGxlZCBhZnRlciB0aGUgY2xpZW50IGlzIHRlcm1pbmF0ZWQuXG4gICAgICovICAgIHZlcmlmeU5vdFRlcm1pbmF0ZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLmFzeW5jUXVldWUuaXNTaHV0dGluZ0Rvd24pIHRocm93IG5ldyBqKEsuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJUaGUgY2xpZW50IGhhcyBhbHJlYWR5IGJlZW4gdGVybWluYXRlZC5cIik7XG4gICAgfVxuICAgIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlLmVudGVyUmVzdHJpY3RlZE1vZGUoKTtcbiAgICAgICAgY29uc3QgdCA9IG5ldyBRO1xuICAgICAgICByZXR1cm4gdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXRFdmVuV2hpbGVSZXN0cmljdGVkKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMub25saW5lQ29tcG9uZW50cyAmJiBhd2FpdCB0aGlzLm9ubGluZUNvbXBvbmVudHMudGVybWluYXRlKCksIHRoaXMub2ZmbGluZUNvbXBvbmVudHMgJiYgYXdhaXQgdGhpcy5vZmZsaW5lQ29tcG9uZW50cy50ZXJtaW5hdGUoKSwgXG4gICAgICAgICAgICAgICAgLy8gVGhlIGNyZWRlbnRpYWxzIHByb3ZpZGVyIG11c3QgYmUgdGVybWluYXRlZCBhZnRlciBzaHV0dGluZyBkb3duIHRoZVxuICAgICAgICAgICAgICAgIC8vIFJlbW90ZVN0b3JlIGFzIGl0IHdpbGwgcHJldmVudCB0aGUgUmVtb3RlU3RvcmUgZnJvbSByZXRyaWV2aW5nIGF1dGhcbiAgICAgICAgICAgICAgICAvLyB0b2tlbnMuXG4gICAgICAgICAgICAgICAgdGhpcy5hdXRoQ3JlZGVudGlhbHMuc2h1dGRvd24oKSwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzLnNodXRkb3duKCksIHQucmVzb2x2ZSgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBPbyhlLCBcIkZhaWxlZCB0byBzaHV0ZG93biBwZXJzaXN0ZW5jZVwiKTtcbiAgICAgICAgICAgICAgICB0LnJlamVjdChuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpLCB0LnByb21pc2U7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBHYSh0LCBlKSB7XG4gICAgdC5hc3luY1F1ZXVlLnZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MoKSwgJChcIkZpcmVzdG9yZUNsaWVudFwiLCBcIkluaXRpYWxpemluZyBPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXJcIik7XG4gICAgY29uc3QgbiA9IGF3YWl0IHQuZ2V0Q29uZmlndXJhdGlvbigpO1xuICAgIGF3YWl0IGUuaW5pdGlhbGl6ZShuKTtcbiAgICBsZXQgcyA9IG4uaW5pdGlhbFVzZXI7XG4gICAgdC5zZXRDcmVkZW50aWFsQ2hhbmdlTGlzdGVuZXIoKGFzeW5jIHQgPT4ge1xuICAgICAgICBzLmlzRXF1YWwodCkgfHwgKGF3YWl0IGRyKGUubG9jYWxTdG9yZSwgdCksIHMgPSB0KTtcbiAgICB9KSksIFxuICAgIC8vIFdoZW4gYSB1c2VyIGNhbGxzIGNsZWFyUGVyc2lzdGVuY2UoKSBpbiBvbmUgY2xpZW50LCBhbGwgb3RoZXIgY2xpZW50c1xuICAgIC8vIG5lZWQgdG8gYmUgdGVybWluYXRlZCB0byBhbGxvdyB0aGUgZGVsZXRlIHRvIHN1Y2NlZWQuXG4gICAgZS5wZXJzaXN0ZW5jZS5zZXREYXRhYmFzZURlbGV0ZWRMaXN0ZW5lcigoKCkgPT4gdC50ZXJtaW5hdGUoKSkpLCB0Lm9mZmxpbmVDb21wb25lbnRzID0gZTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gemEodCwgZSkge1xuICAgIHQuYXN5bmNRdWV1ZS52ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzKCk7XG4gICAgY29uc3QgbiA9IGF3YWl0IEhhKHQpO1xuICAgICQoXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJJbml0aWFsaXppbmcgT25saW5lQ29tcG9uZW50UHJvdmlkZXJcIik7XG4gICAgY29uc3QgcyA9IGF3YWl0IHQuZ2V0Q29uZmlndXJhdGlvbigpO1xuICAgIGF3YWl0IGUuaW5pdGlhbGl6ZShuLCBzKSwgXG4gICAgLy8gVGhlIENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lciBvZiB0aGUgb25saW5lIGNvbXBvbmVudCBwcm92aWRlciB0YWtlc1xuICAgIC8vIHByZWNlZGVuY2Ugb3ZlciB0aGUgb2ZmbGluZSBjb21wb25lbnQgcHJvdmlkZXIuXG4gICAgdC5zZXRDcmVkZW50aWFsQ2hhbmdlTGlzdGVuZXIoKHQgPT4gYXN5bmMgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gcSh0KTtcbiAgICAgICAgbi5hc3luY1F1ZXVlLnZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MoKSwgJChcIlJlbW90ZVN0b3JlXCIsIFwiUmVtb3RlU3RvcmUgcmVjZWl2ZWQgbmV3IGNyZWRlbnRpYWxzXCIpO1xuICAgICAgICBjb25zdCBzID0gZ28obik7XG4gICAgICAgIC8vIFRlYXIgZG93biBhbmQgcmUtY3JlYXRlIG91ciBuZXR3b3JrIHN0cmVhbXMuIFRoaXMgd2lsbCBlbnN1cmUgd2UgZ2V0IGFcbiAgICAgICAgLy8gZnJlc2ggYXV0aCB0b2tlbiBmb3IgdGhlIG5ldyB1c2VyIGFuZCByZS1maWxsIHRoZSB3cml0ZSBwaXBlbGluZSB3aXRoXG4gICAgICAgIC8vIG5ldyBtdXRhdGlvbnMgZnJvbSB0aGUgTG9jYWxTdG9yZSAoc2luY2UgbXV0YXRpb25zIGFyZSBwZXItdXNlcikuXG4gICAgICAgICAgICAgICAgbi5Hci5hZGQoMyAvKiBDcmVkZW50aWFsQ2hhbmdlICovKSwgYXdhaXQgdW8obiksIHMgJiYgXG4gICAgICAgIC8vIERvbid0IHNldCB0aGUgbmV0d29yayBzdGF0dXMgdG8gVW5rbm93biBpZiB3ZSBhcmUgb2ZmbGluZS5cbiAgICAgICAgbi5Kci5zZXQoXCJVbmtub3duXCIgLyogVW5rbm93biAqLyksIGF3YWl0IG4ucmVtb3RlU3luY2VyLmhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UoZSksIFxuICAgICAgICBuLkdyLmRlbGV0ZSgzIC8qIENyZWRlbnRpYWxDaGFuZ2UgKi8pLCBhd2FpdCBjbyhuKTtcbiAgICB9KGUucmVtb3RlU3RvcmUsIHQpKSksIHQub25saW5lQ29tcG9uZW50cyA9IGU7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIEhhKHQpIHtcbiAgICByZXR1cm4gdC5vZmZsaW5lQ29tcG9uZW50cyB8fCAoJChcIkZpcmVzdG9yZUNsaWVudFwiLCBcIlVzaW5nIGRlZmF1bHQgT2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyXCIpLCBcbiAgICBhd2FpdCBHYSh0LCBuZXcgT2EpKSwgdC5vZmZsaW5lQ29tcG9uZW50cztcbn1cblxuYXN5bmMgZnVuY3Rpb24gSmEodCkge1xuICAgIHJldHVybiB0Lm9ubGluZUNvbXBvbmVudHMgfHwgKCQoXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJVc2luZyBkZWZhdWx0IE9ubGluZUNvbXBvbmVudFByb3ZpZGVyXCIpLCBcbiAgICBhd2FpdCB6YSh0LCBuZXcgQmEpKSwgdC5vbmxpbmVDb21wb25lbnRzO1xufVxuXG5mdW5jdGlvbiBZYSh0KSB7XG4gICAgcmV0dXJuIEhhKHQpLnRoZW4oKHQgPT4gdC5wZXJzaXN0ZW5jZSkpO1xufVxuXG5mdW5jdGlvbiBYYSh0KSB7XG4gICAgcmV0dXJuIEhhKHQpLnRoZW4oKHQgPT4gdC5sb2NhbFN0b3JlKSk7XG59XG5cbmZ1bmN0aW9uIFphKHQpIHtcbiAgICByZXR1cm4gSmEodCkudGhlbigodCA9PiB0LnJlbW90ZVN0b3JlKSk7XG59XG5cbmZ1bmN0aW9uIHRjKHQpIHtcbiAgICByZXR1cm4gSmEodCkudGhlbigodCA9PiB0LnN5bmNFbmdpbmUpKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZWModCkge1xuICAgIGNvbnN0IGUgPSBhd2FpdCBKYSh0KSwgbiA9IGUuZXZlbnRNYW5hZ2VyO1xuICAgIHJldHVybiBuLm9uTGlzdGVuID0gcmEuYmluZChudWxsLCBlLnN5bmNFbmdpbmUpLCBuLm9uVW5saXN0ZW4gPSBhYS5iaW5kKG51bGwsIGUuc3luY0VuZ2luZSksIFxuICAgIG47XG59XG5cbi8qKiBFbmFibGVzIHRoZSBuZXR3b3JrIGNvbm5lY3Rpb24gYW5kIHJlLWVucXVldWVzIGFsbCBwZW5kaW5nIG9wZXJhdGlvbnMuICovIGZ1bmN0aW9uIG5jKHQpIHtcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IFlhKHQpLCBuID0gYXdhaXQgWmEodCk7XG4gICAgICAgIHJldHVybiBlLnNldE5ldHdvcmtFbmFibGVkKCEwKSwgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHEodCk7XG4gICAgICAgICAgICByZXR1cm4gZS5Hci5kZWxldGUoMCAvKiBVc2VyRGlzYWJsZWQgKi8pLCBjbyhlKTtcbiAgICAgICAgfShuKTtcbiAgICB9KSk7XG59XG5cbi8qKiBEaXNhYmxlcyB0aGUgbmV0d29yayBjb25uZWN0aW9uLiBQZW5kaW5nIG9wZXJhdGlvbnMgd2lsbCBub3QgY29tcGxldGUuICovIGZ1bmN0aW9uIHNjKHQpIHtcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IFlhKHQpLCBuID0gYXdhaXQgWmEodCk7XG4gICAgICAgIHJldHVybiBlLnNldE5ldHdvcmtFbmFibGVkKCExKSwgYXN5bmMgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHEodCk7XG4gICAgICAgICAgICBlLkdyLmFkZCgwIC8qIFVzZXJEaXNhYmxlZCAqLyksIGF3YWl0IHVvKGUpLCBcbiAgICAgICAgICAgIC8vIFNldCB0aGUgT25saW5lU3RhdGUgdG8gT2ZmbGluZSBzbyBnZXQoKXMgcmV0dXJuIGZyb20gY2FjaGUsIGV0Yy5cbiAgICAgICAgICAgIGUuSnIuc2V0KFwiT2ZmbGluZVwiIC8qIE9mZmxpbmUgKi8pO1xuICAgICAgICB9KG4pO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gYWxsIHdyaXRlcyB0aGF0IHdlcmUgcGVuZGluZyBhdCB0aGUgdGltZVxuICogdGhpcyBtZXRob2Qgd2FzIGNhbGxlZCByZWNlaXZlZCBzZXJ2ZXIgYWNrbm93bGVkZ2VtZW50LiBBbiBhY2tub3dsZWRnZW1lbnRcbiAqIGNhbiBiZSBlaXRoZXIgYWNjZXB0YW5jZSBvciByZWplY3Rpb24uXG4gKi8gZnVuY3Rpb24gaWModCwgZSkge1xuICAgIGNvbnN0IG4gPSBuZXcgUTtcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGFzeW5jIGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBhd2FpdCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHEodCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJyZWFkIGRvY3VtZW50XCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gbi5Xbi5Sbih0LCBlKSkpO1xuICAgICAgICAgICAgfSh0LCBlKTtcbiAgICAgICAgICAgIHMuaXNGb3VuZERvY3VtZW50KCkgPyBuLnJlc29sdmUocykgOiBzLmlzTm9Eb2N1bWVudCgpID8gbi5yZXNvbHZlKG51bGwpIDogbi5yZWplY3QobmV3IGooSy5VTkFWQUlMQUJMRSwgXCJGYWlsZWQgdG8gZ2V0IGRvY3VtZW50IGZyb20gY2FjaGUuIChIb3dldmVyLCB0aGlzIGRvY3VtZW50IG1heSBleGlzdCBvbiB0aGUgc2VydmVyLiBSdW4gYWdhaW4gd2l0aG91dCBzZXR0aW5nICdzb3VyY2UnIGluIHRoZSBHZXRPcHRpb25zIHRvIGF0dGVtcHQgdG8gcmV0cmlldmUgdGhlIGRvY3VtZW50IGZyb20gdGhlIHNlcnZlci4pXCIpKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgY29uc3QgcyA9IE9vKHQsIGBGYWlsZWQgdG8gZ2V0IGRvY3VtZW50ICcke2V9IGZyb20gY2FjaGVgKTtcbiAgICAgICAgICAgIG4ucmVqZWN0KHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICogUmV0cmlldmVzIGEgbGF0ZW5jeS1jb21wZW5zYXRlZCBkb2N1bWVudCBmcm9tIHRoZSBiYWNrZW5kIHZpYSBhXG4gKiBTbmFwc2hvdExpc3RlbmVyLlxuICovIChhd2FpdCBYYSh0KSwgZSwgbikpKSwgbi5wcm9taXNlO1xufVxuXG5mdW5jdGlvbiByYyh0LCBlLCBuID0ge30pIHtcbiAgICBjb25zdCBzID0gbmV3IFE7XG4gICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBmdW5jdGlvbih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgcWEoe1xuICAgICAgICAgICAgbmV4dDogciA9PiB7XG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHF1ZXJ5IGZpcnN0IGJlZm9yZSBwYXNzaW5nIGV2ZW50IHRvIHVzZXIgdG8gYXZvaWRcbiAgICAgICAgICAgICAgICAvLyB1c2VyIGFjdGlvbnMgYWZmZWN0aW5nIHRoZSBub3cgc3RhbGUgcXVlcnkuXG4gICAgICAgICAgICAgICAgZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiBqbyh0LCBvKSkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGEgPSByLmRvY3MuaGFzKG4pO1xuICAgICAgICAgICAgICAgICFhICYmIHIuZnJvbUNhY2hlID8gXG4gICAgICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBJZiB3ZSdyZSBvbmxpbmUgYW5kIHRoZSBkb2N1bWVudCBkb2Vzbid0XG4gICAgICAgICAgICAgICAgLy8gZXhpc3QgdGhlbiB3ZSByZXNvbHZlIHdpdGggYSBkb2MuZXhpc3RzIHNldCB0byBmYWxzZS4gSWZcbiAgICAgICAgICAgICAgICAvLyB3ZSdyZSBvZmZsaW5lIGhvd2V2ZXIsIHdlIHJlamVjdCB0aGUgUHJvbWlzZSBpbiB0aGlzXG4gICAgICAgICAgICAgICAgLy8gY2FzZS4gVHdvIG9wdGlvbnM6IDEpIENhY2hlIHRoZSBuZWdhdGl2ZSByZXNwb25zZSBmcm9tXG4gICAgICAgICAgICAgICAgLy8gdGhlIHNlcnZlciBzbyB3ZSBjYW4gZGVsaXZlciB0aGF0IGV2ZW4gd2hlbiB5b3UncmVcbiAgICAgICAgICAgICAgICAvLyBvZmZsaW5lIDIpIEFjdHVhbGx5IHJlamVjdCB0aGUgUHJvbWlzZSBpbiB0aGUgb25saW5lIGNhc2VcbiAgICAgICAgICAgICAgICAvLyBpZiB0aGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cbiAgICAgICAgICAgICAgICBpLnJlamVjdChuZXcgaihLLlVOQVZBSUxBQkxFLCBcIkZhaWxlZCB0byBnZXQgZG9jdW1lbnQgYmVjYXVzZSB0aGUgY2xpZW50IGlzIG9mZmxpbmUuXCIpKSA6IGEgJiYgci5mcm9tQ2FjaGUgJiYgcyAmJiBcInNlcnZlclwiID09PSBzLnNvdXJjZSA/IGkucmVqZWN0KG5ldyBqKEsuVU5BVkFJTEFCTEUsICdGYWlsZWQgdG8gZ2V0IGRvY3VtZW50IGZyb20gc2VydmVyLiAoSG93ZXZlciwgdGhpcyBkb2N1bWVudCBkb2VzIGV4aXN0IGluIHRoZSBsb2NhbCBjYWNoZS4gUnVuIGFnYWluIHdpdGhvdXQgc2V0dGluZyBzb3VyY2UgdG8gXCJzZXJ2ZXJcIiB0byByZXRyaWV2ZSB0aGUgY2FjaGVkIGRvY3VtZW50LiknKSkgOiBpLnJlc29sdmUocik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IHQgPT4gaS5yZWplY3QodClcbiAgICAgICAgfSksIG8gPSBuZXcgem8oZ2Uobi5wYXRoKSwgciwge1xuICAgICAgICAgICAgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczogITAsXG4gICAgICAgICAgICB3bzogITBcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBLbyh0LCBvKTtcbiAgICB9KGF3YWl0IGVjKHQpLCB0LmFzeW5jUXVldWUsIGUsIG4sIHMpKSksIHMucHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gb2ModCwgZSkge1xuICAgIGNvbnN0IG4gPSBuZXcgUTtcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGFzeW5jIGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBhd2FpdCBFcih0LCBlLCBcbiAgICAgICAgICAgIC8qIHVzZVByZXZpb3VzUmVzdWx0cz0gKi8gITApLCBpID0gbmV3IGVhKGUsIHMuem4pLCByID0gaS5ibyhzLmRvY3VtZW50cyksIG8gPSBpLmFwcGx5Q2hhbmdlcyhyLCBcbiAgICAgICAgICAgIC8qIHVwZGF0ZUxpbWJvRG9jdW1lbnRzPSAqLyAhMSk7XG4gICAgICAgICAgICBuLnJlc29sdmUoby5zbmFwc2hvdCk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBPbyh0LCBgRmFpbGVkIHRvIGV4ZWN1dGUgcXVlcnkgJyR7ZX0gYWdhaW5zdCBjYWNoZWApO1xuICAgICAgICAgICAgbi5yZWplY3Qocyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gKiBSZXRyaWV2ZXMgYSBsYXRlbmN5LWNvbXBlbnNhdGVkIHF1ZXJ5IHNuYXBzaG90IGZyb20gdGhlIGJhY2tlbmQgdmlhIGFcbiAqIFNuYXBzaG90TGlzdGVuZXIuXG4gKi8gKGF3YWl0IFhhKHQpLCBlLCBuKSkpLCBuLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIGFjKHQsIGUsIG4gPSB7fSkge1xuICAgIGNvbnN0IHMgPSBuZXcgUTtcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGZ1bmN0aW9uKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgY29uc3QgciA9IG5ldyBxYSh7XG4gICAgICAgICAgICBuZXh0OiBuID0+IHtcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgcXVlcnkgZmlyc3QgYmVmb3JlIHBhc3NpbmcgZXZlbnQgdG8gdXNlciB0byBhdm9pZFxuICAgICAgICAgICAgICAgIC8vIHVzZXIgYWN0aW9ucyBhZmZlY3RpbmcgdGhlIG5vdyBzdGFsZSBxdWVyeS5cbiAgICAgICAgICAgICAgICBlLmVucXVldWVBbmRGb3JnZXQoKCgpID0+IGpvKHQsIG8pKSksIG4uZnJvbUNhY2hlICYmIFwic2VydmVyXCIgPT09IHMuc291cmNlID8gaS5yZWplY3QobmV3IGooSy5VTkFWQUlMQUJMRSwgJ0ZhaWxlZCB0byBnZXQgZG9jdW1lbnRzIGZyb20gc2VydmVyLiAoSG93ZXZlciwgdGhlc2UgZG9jdW1lbnRzIG1heSBleGlzdCBpbiB0aGUgbG9jYWwgY2FjaGUuIFJ1biBhZ2FpbiB3aXRob3V0IHNldHRpbmcgc291cmNlIHRvIFwic2VydmVyXCIgdG8gcmV0cmlldmUgdGhlIGNhY2hlZCBkb2N1bWVudHMuKScpKSA6IGkucmVzb2x2ZShuKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogdCA9PiBpLnJlamVjdCh0KVxuICAgICAgICB9KSwgbyA9IG5ldyB6byhuLCByLCB7XG4gICAgICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiAhMCxcbiAgICAgICAgICAgIHdvOiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIEtvKHQsIG8pO1xuICAgIH0oYXdhaXQgZWModCksIHQuYXN5bmNRdWV1ZSwgZSwgbiwgcykpKSwgcy5wcm9taXNlO1xufVxuXG5mdW5jdGlvbiBjYyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IG5ldyBxYShlKTtcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgcSh0KS5pby5hZGQoZSksIFxuICAgICAgICAvLyBJbW1lZGlhdGVseSBmaXJlIGFuIGluaXRpYWwgZXZlbnQsIGluZGljYXRpbmcgYWxsIGV4aXN0aW5nIGxpc3RlbmVyc1xuICAgICAgICAvLyBhcmUgaW4tc3luYy5cbiAgICAgICAgZS5uZXh0KCk7XG4gICAgfShhd2FpdCBlYyh0KSwgbikpKSwgKCkgPT4ge1xuICAgICAgICBuLm5hKCksIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBxKHQpLmlvLmRlbGV0ZShlKTtcbiAgICAgICAgfShhd2FpdCBlYyh0KSwgbikpKTtcbiAgICB9O1xufVxuXG4vKipcbiAqIFRha2VzIGFuIHVwZGF0ZUZ1bmN0aW9uIGluIHdoaWNoIGEgc2V0IG9mIHJlYWRzIGFuZCB3cml0ZXMgY2FuIGJlIHBlcmZvcm1lZFxuICogYXRvbWljYWxseS4gSW4gdGhlIHVwZGF0ZUZ1bmN0aW9uLCB0aGUgY2xpZW50IGNhbiByZWFkIGFuZCB3cml0ZSB2YWx1ZXNcbiAqIHVzaW5nIHRoZSBzdXBwbGllZCB0cmFuc2FjdGlvbiBvYmplY3QuIEFmdGVyIHRoZSB1cGRhdGVGdW5jdGlvbiwgYWxsXG4gKiBjaGFuZ2VzIHdpbGwgYmUgY29tbWl0dGVkLiBJZiBhIHJldHJ5YWJsZSBlcnJvciBvY2N1cnMgKGV4OiBzb21lIG90aGVyXG4gKiBjbGllbnQgaGFzIGNoYW5nZWQgYW55IG9mIHRoZSBkYXRhIHJlZmVyZW5jZWQpLCB0aGVuIHRoZSB1cGRhdGVGdW5jdGlvblxuICogd2lsbCBiZSBjYWxsZWQgYWdhaW4gYWZ0ZXIgYSBiYWNrb2ZmLiBJZiB0aGUgdXBkYXRlRnVuY3Rpb24gc3RpbGwgZmFpbHNcbiAqIGFmdGVyIGFsbCByZXRyaWVzLCB0aGVuIHRoZSB0cmFuc2FjdGlvbiB3aWxsIGJlIHJlamVjdGVkLlxuICpcbiAqIFRoZSB0cmFuc2FjdGlvbiBvYmplY3QgcGFzc2VkIHRvIHRoZSB1cGRhdGVGdW5jdGlvbiBjb250YWlucyBtZXRob2RzIGZvclxuICogYWNjZXNzaW5nIGRvY3VtZW50cyBhbmQgY29sbGVjdGlvbnMuIFVubGlrZSBvdGhlciBkYXRhc3RvcmUgYWNjZXNzLCBkYXRhXG4gKiBhY2Nlc3NlZCB3aXRoIHRoZSB0cmFuc2FjdGlvbiB3aWxsIG5vdCByZWZsZWN0IGxvY2FsIGNoYW5nZXMgdGhhdCBoYXZlIG5vdFxuICogYmVlbiBjb21taXR0ZWQuIEZvciB0aGlzIHJlYXNvbiwgaXQgaXMgcmVxdWlyZWQgdGhhdCBhbGwgcmVhZHMgYXJlXG4gKiBwZXJmb3JtZWQgYmVmb3JlIGFueSB3cml0ZXMuIFRyYW5zYWN0aW9ucyBtdXN0IGJlIHBlcmZvcm1lZCB3aGlsZSBvbmxpbmUuXG4gKi8gZnVuY3Rpb24gdWModCwgZSkge1xuICAgIGNvbnN0IG4gPSBuZXcgUTtcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgcyA9IGF3YWl0IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBKYSh0KS50aGVuKCh0ID0+IHQuZGF0YXN0b3JlKSk7XG4gICAgICAgIH0odCk7XG4gICAgICAgIG5ldyBRYSh0LmFzeW5jUXVldWUsIHMsIGUsIG4pLnJ1bigpO1xuICAgIH0pKSwgbi5wcm9taXNlO1xufVxuXG5mdW5jdGlvbiBoYyh0LCBlLCBuLCBzKSB7XG4gICAgY29uc3QgaSA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIG4gPSBcInN0cmluZ1wiID09IHR5cGVvZiB0ID8gKG5ldyBUZXh0RW5jb2RlcikuZW5jb2RlKHQpIDogdDtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgS2EodCwgZSk7XG4gICAgICAgIH0oZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBVaW50OEFycmF5KSByZXR1cm4gVWEodCwgZSk7XG4gICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSByZXR1cm4gVWEobmV3IFVpbnQ4QXJyYXkodCksIGUpO1xuICAgICAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBSZWFkYWJsZVN0cmVhbSkgcmV0dXJuIHQuZ2V0UmVhZGVyKCk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTb3VyY2Ugb2YgYHRvQnl0ZVN0cmVhbVJlYWRlcmAgaGFzIHRvIGJlIGEgQXJyYXlCdWZmZXIgb3IgUmVhZGFibGVTdHJlYW1cIik7XG4gICAgICAgIH0obiksIGUpO1xuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAobiwgdG8oZSkpO1xuICAgIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiB7XG4gICAgICAgIEZhKGF3YWl0IHRjKHQpLCBpLCBzKTtcbiAgICB9KSk7XG59XG5cbmZ1bmN0aW9uIGxjKHQsIGUpIHtcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWUoKGFzeW5jICgpID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHEodCk7XG4gICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IG5hbWVkIHF1ZXJ5XCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gbi5ZZS5nZXROYW1lZFF1ZXJ5KHQsIGUpKSk7XG4gICAgfShhd2FpdCBYYSh0KSwgZSkpKTtcbn1cblxuY2xhc3MgZmMge1xuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgYSBEYXRhYmFzZUluZm8gdXNpbmcgdGhlIHByb3ZpZGVkIGhvc3QsIGRhdGFiYXNlSWQgYW5kXG4gICAgICogcGVyc2lzdGVuY2VLZXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGF0YWJhc2VJZCAtIFRoZSBkYXRhYmFzZSB0byB1c2UuXG4gICAgICogQHBhcmFtIGFwcElkIC0gVGhlIEZpcmViYXNlIEFwcCBJZC5cbiAgICAgKiBAcGFyYW0gcGVyc2lzdGVuY2VLZXkgLSBBIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGlzIEZpcmVzdG9yZSdzIGxvY2FsXG4gICAgICogc3RvcmFnZSAodXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIHRoZSBkYXRhYmFzZUlkKS5cbiAgICAgKiBAcGFyYW0gaG9zdCAtIFRoZSBGaXJlc3RvcmUgYmFja2VuZCBob3N0IHRvIGNvbm5lY3QgdG8uXG4gICAgICogQHBhcmFtIHNzbCAtIFdoZXRoZXIgdG8gdXNlIFNTTCB3aGVuIGNvbm5lY3RpbmcuXG4gICAgICogQHBhcmFtIGZvcmNlTG9uZ1BvbGxpbmcgLSBXaGV0aGVyIHRvIHVzZSB0aGUgZm9yY2VMb25nUG9sbGluZyBvcHRpb25cbiAgICAgKiB3aGVuIHVzaW5nIFdlYkNoYW5uZWwgYXMgdGhlIG5ldHdvcmsgdHJhbnNwb3J0LlxuICAgICAqIEBwYXJhbSBhdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgLSBXaGV0aGVyIHRvIHVzZSB0aGUgZGV0ZWN0QnVmZmVyaW5nUHJveHlcbiAgICAgKiBvcHRpb24gd2hlbiB1c2luZyBXZWJDaGFubmVsIGFzIHRoZSBuZXR3b3JrIHRyYW5zcG9ydC5cbiAgICAgKiBAcGFyYW0gdXNlRmV0Y2hTdHJlYW1zIFdoZXRoZXIgdG8gdXNlIHRoZSBGZXRjaCBBUEkgaW5zdGVhZCBvZlxuICAgICAqIFhNTEhUVFBSZXF1ZXN0XG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgciwgbywgYSkge1xuICAgICAgICB0aGlzLmRhdGFiYXNlSWQgPSB0LCB0aGlzLmFwcElkID0gZSwgdGhpcy5wZXJzaXN0ZW5jZUtleSA9IG4sIHRoaXMuaG9zdCA9IHMsIHRoaXMuc3NsID0gaSwgXG4gICAgICAgIHRoaXMuZm9yY2VMb25nUG9sbGluZyA9IHIsIHRoaXMuYXV0b0RldGVjdExvbmdQb2xsaW5nID0gbywgdGhpcy51c2VGZXRjaFN0cmVhbXMgPSBhO1xuICAgIH1cbn1cblxuLyoqIFRoZSBkZWZhdWx0IGRhdGFiYXNlIG5hbWUgZm9yIGEgcHJvamVjdC4gKi9cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgZGF0YWJhc2UgSUQgYSBGaXJlc3RvcmUgY2xpZW50IGlzIGFzc29jaWF0ZWQgd2l0aC5cbiAqIEBpbnRlcm5hbFxuICovXG5jbGFzcyBkYyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnByb2plY3RJZCA9IHQsIHRoaXMuZGF0YWJhc2UgPSBlIHx8IFwiKGRlZmF1bHQpXCI7XG4gICAgfVxuICAgIGdldCBpc0RlZmF1bHREYXRhYmFzZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiKGRlZmF1bHQpXCIgPT09IHRoaXMuZGF0YWJhc2U7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIGRjICYmIHQucHJvamVjdElkID09PSB0aGlzLnByb2plY3RJZCAmJiB0LmRhdGFiYXNlID09PSB0aGlzLmRhdGFiYXNlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3Qgd2MgPSBuZXcgTWFwO1xuXG4vKipcbiAqIEFuIGluc3RhbmNlIG1hcCB0aGF0IGVuc3VyZXMgb25seSBvbmUgRGF0YXN0b3JlIGV4aXN0cyBwZXIgRmlyZXN0b3JlXG4gKiBpbnN0YW5jZS5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmZ1bmN0aW9uIF9jKHQsIGUsIG4pIHtcbiAgICBpZiAoIW4pIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEZ1bmN0aW9uICR7dH0oKSBjYW5ub3QgYmUgY2FsbGVkIHdpdGggYW4gZW1wdHkgJHtlfS5gKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCB0d28gYm9vbGVhbiBvcHRpb25zIGFyZSBub3Qgc2V0IGF0IHRoZSBzYW1lIHRpbWUuXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBtYyh0LCBlLCBuLCBzKSB7XG4gICAgaWYgKCEwID09PSBlICYmICEwID09PSBzKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGAke3R9IGFuZCAke259IGNhbm5vdCBiZSB1c2VkIHRvZ2V0aGVyLmApO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0IGBwYXRoYCByZWZlcnMgdG8gYSBkb2N1bWVudCAoaW5kaWNhdGVkIGJ5IHRoZSBmYWN0IGl0IGNvbnRhaW5zXG4gKiBhbiBldmVuIG51bWJlcnMgb2Ygc2VnbWVudHMpLlxuICovIGZ1bmN0aW9uIGdjKHQpIHtcbiAgICBpZiAoIVN0LmlzRG9jdW1lbnRLZXkodCkpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgZG9jdW1lbnQgcmVmZXJlbmNlLiBEb2N1bWVudCByZWZlcmVuY2VzIG11c3QgaGF2ZSBhbiBldmVuIG51bWJlciBvZiBzZWdtZW50cywgYnV0ICR7dH0gaGFzICR7dC5sZW5ndGh9LmApO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0IGBwYXRoYCByZWZlcnMgdG8gYSBjb2xsZWN0aW9uIChpbmRpY2F0ZWQgYnkgdGhlIGZhY3QgaXRcbiAqIGNvbnRhaW5zIGFuIG9kZCBudW1iZXJzIG9mIHNlZ21lbnRzKS5cbiAqLyBmdW5jdGlvbiB5Yyh0KSB7XG4gICAgaWYgKFN0LmlzRG9jdW1lbnRLZXkodCkpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgY29sbGVjdGlvbiByZWZlcmVuY2UuIENvbGxlY3Rpb24gcmVmZXJlbmNlcyBtdXN0IGhhdmUgYW4gb2RkIG51bWJlciBvZiBzZWdtZW50cywgYnV0ICR7dH0gaGFzICR7dC5sZW5ndGh9LmApO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBpdCdzIGEgbm9uLW51bGwgb2JqZWN0IHdpdGhvdXQgYSBjdXN0b20gcHJvdG90eXBlXG4gKiAoaS5lLiBleGNsdWRlcyBBcnJheSwgRGF0ZSwgZXRjLikuXG4gKi9cbi8qKiBSZXR1cm5zIGEgc3RyaW5nIGRlc2NyaWJpbmcgdGhlIHR5cGUgLyB2YWx1ZSBvZiB0aGUgcHJvdmlkZWQgaW5wdXQuICovXG5mdW5jdGlvbiBwYyh0KSB7XG4gICAgaWYgKHZvaWQgMCA9PT0gdCkgcmV0dXJuIFwidW5kZWZpbmVkXCI7XG4gICAgaWYgKG51bGwgPT09IHQpIHJldHVybiBcIm51bGxcIjtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCkgcmV0dXJuIHQubGVuZ3RoID4gMjAgJiYgKHQgPSBgJHt0LnN1YnN0cmluZygwLCAyMCl9Li4uYCksIFxuICAgIEpTT04uc3RyaW5naWZ5KHQpO1xuICAgIGlmIChcIm51bWJlclwiID09IHR5cGVvZiB0IHx8IFwiYm9vbGVhblwiID09IHR5cGVvZiB0KSByZXR1cm4gXCJcIiArIHQ7XG4gICAgaWYgKFwib2JqZWN0XCIgPT0gdHlwZW9mIHQpIHtcbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBBcnJheSkgcmV0dXJuIFwiYW4gYXJyYXlcIjtcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgZSA9IFxuICAgICAgICAgICAgLyoqIHRyeSB0byBnZXQgdGhlIGNvbnN0cnVjdG9yIG5hbWUgZm9yIGFuIG9iamVjdC4gKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBpZiAodC5jb25zdHJ1Y3RvcikgcmV0dXJuIHQuY29uc3RydWN0b3IubmFtZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogQ2FzdHMgYG9iamAgdG8gYFRgLCBvcHRpb25hbGx5IHVud3JhcHBpbmcgQ29tcGF0IHR5cGVzIHRvIGV4cG9zZSB0aGVcbiAqIHVuZGVybHlpbmcgaW5zdGFuY2UuIFRocm93cyBpZiAgYG9iamAgaXMgbm90IGFuIGluc3RhbmNlIG9mIGBUYC5cbiAqXG4gKiBUaGlzIGNhc3QgaXMgdXNlZCBpbiB0aGUgTGl0ZSBhbmQgRnVsbCBTREsgdG8gdmVyaWZ5IGluc3RhbmNlIHR5cGVzIGZvclxuICogYXJndW1lbnRzIHBhc3NlZCB0byB0aGUgcHVibGljIEFQSS5cbiAqIEBpbnRlcm5hbFxuICovICh0KTtcbiAgICAgICAgICAgIHJldHVybiBlID8gYGEgY3VzdG9tICR7ZX0gb2JqZWN0YCA6IFwiYW4gb2JqZWN0XCI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdCA/IFwiYSBmdW5jdGlvblwiIDogTCgpO1xufVxuXG5mdW5jdGlvbiBUYyh0LCBcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5lKSB7XG4gICAgaWYgKFwiX2RlbGVnYXRlXCIgaW4gdCAmJiAoXG4gICAgLy8gVW53cmFwIENvbXBhdCB0eXBlc1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgdCA9IHQuX2RlbGVnYXRlKSwgISh0IGluc3RhbmNlb2YgZSkpIHtcbiAgICAgICAgaWYgKGUubmFtZSA9PT0gdC5jb25zdHJ1Y3Rvci5uYW1lKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiVHlwZSBkb2VzIG5vdCBtYXRjaCB0aGUgZXhwZWN0ZWQgaW5zdGFuY2UuIERpZCB5b3UgcGFzcyBhIHJlZmVyZW5jZSBmcm9tIGEgZGlmZmVyZW50IEZpcmVzdG9yZSBTREs/XCIpO1xuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBuID0gcGModCk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBFeHBlY3RlZCB0eXBlICcke2UubmFtZX0nLCBidXQgaXQgd2FzOiAke259YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHQ7XG59XG5cbmZ1bmN0aW9uIEVjKHQsIGUpIHtcbiAgICBpZiAoZSA8PSAwKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBGdW5jdGlvbiAke3R9KCkgcmVxdWlyZXMgYSBwb3NpdGl2ZSBudW1iZXIsIGJ1dCBpdCB3YXM6ICR7ZX0uYCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBzZXR0aW5ncygpIGRlZmF1bHRzOlxuLyoqXG4gKiBBIGNvbmNyZXRlIHR5cGUgZGVzY3JpYmluZyBhbGwgdGhlIHZhbHVlcyB0aGF0IGNhbiBiZSBhcHBsaWVkIHZpYSBhXG4gKiB1c2VyLXN1cHBsaWVkIGBGaXJlc3RvcmVTZXR0aW5nc2Agb2JqZWN0LiBUaGlzIGlzIGEgc2VwYXJhdGUgdHlwZSBzbyB0aGF0XG4gKiBkZWZhdWx0cyBjYW4gYmUgc3VwcGxpZWQgYW5kIHRoZSB2YWx1ZSBjYW4gYmUgY2hlY2tlZCBmb3IgZXF1YWxpdHkuXG4gKi9cbmNsYXNzIEljIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBpZiAodm9pZCAwID09PSB0Lmhvc3QpIHtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IHQuc3NsKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiQ2FuJ3QgcHJvdmlkZSBzc2wgb3B0aW9uIGlmIGhvc3Qgb3B0aW9uIGlzIG5vdCBzZXRcIik7XG4gICAgICAgICAgICB0aGlzLmhvc3QgPSBcImZpcmVzdG9yZS5nb29nbGVhcGlzLmNvbVwiLCB0aGlzLnNzbCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB0aGlzLmhvc3QgPSB0Lmhvc3QsIHRoaXMuc3NsID0gbnVsbCA9PT0gKGUgPSB0LnNzbCkgfHwgdm9pZCAwID09PSBlIHx8IGU7XG4gICAgICAgIGlmICh0aGlzLmNyZWRlbnRpYWxzID0gdC5jcmVkZW50aWFscywgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzID0gISF0Lmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMsIFxuICAgICAgICB2b2lkIDAgPT09IHQuY2FjaGVTaXplQnl0ZXMpIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSA0MTk0MzA0MDsgZWxzZSB7XG4gICAgICAgICAgICBpZiAoLTEgIT09IHQuY2FjaGVTaXplQnl0ZXMgJiYgdC5jYWNoZVNpemVCeXRlcyA8IDEwNDg1NzYpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJjYWNoZVNpemVCeXRlcyBtdXN0IGJlIGF0IGxlYXN0IDEwNDg1NzZcIik7XG4gICAgICAgICAgICB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gdC5jYWNoZVNpemVCeXRlcztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcgPSAhIXQuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZywgdGhpcy5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPSAhIXQuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nLCBcbiAgICAgICAgdGhpcy51c2VGZXRjaFN0cmVhbXMgPSAhIXQudXNlRmV0Y2hTdHJlYW1zLCBtYyhcImV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmdcIiwgdC5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nLCBcImV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZ1wiLCB0LmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ob3N0ID09PSB0Lmhvc3QgJiYgdGhpcy5zc2wgPT09IHQuc3NsICYmIHRoaXMuY3JlZGVudGlhbHMgPT09IHQuY3JlZGVudGlhbHMgJiYgdGhpcy5jYWNoZVNpemVCeXRlcyA9PT0gdC5jYWNoZVNpemVCeXRlcyAmJiB0aGlzLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcgPT09IHQuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyAmJiB0aGlzLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyA9PT0gdC5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgJiYgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzID09PSB0Lmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgJiYgdGhpcy51c2VGZXRjaFN0cmVhbXMgPT09IHQudXNlRmV0Y2hTdHJlYW1zO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVGhlIENsb3VkIEZpcmVzdG9yZSBzZXJ2aWNlIGludGVyZmFjZS5cbiAqXG4gKiBEbyBub3QgY2FsbCB0aGlzIGNvbnN0cnVjdG9yIGRpcmVjdGx5LiBJbnN0ZWFkLCB1c2Uge0BsaW5rIGdldEZpcmVzdG9yZX0uXG4gKi8gY2xhc3MgQWMge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLl9hdXRoQ3JlZGVudGlhbHMgPSBlLCB0aGlzLl9hcHBDaGVja0NyZWRlbnRpYWxzID0gbiwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIGl0J3MgYSBGaXJlc3RvcmUgb3IgRmlyZXN0b3JlIExpdGUgaW5zdGFuY2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcImZpcmVzdG9yZS1saXRlXCIsIHRoaXMuX3BlcnNpc3RlbmNlS2V5ID0gXCIobGl0ZSlcIiwgdGhpcy5fc2V0dGluZ3MgPSBuZXcgSWMoe30pLCBcbiAgICAgICAgdGhpcy5fc2V0dGluZ3NGcm96ZW4gPSAhMSwgdCBpbnN0YW5jZW9mIGRjID8gdGhpcy5fZGF0YWJhc2VJZCA9IHQgOiAodGhpcy5fYXBwID0gdCwgXG4gICAgICAgIHRoaXMuX2RhdGFiYXNlSWQgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuYXBwbHkodC5vcHRpb25zLCBbIFwicHJvamVjdElkXCIgXSkpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgJ1wicHJvamVjdElkXCIgbm90IHByb3ZpZGVkIGluIGZpcmViYXNlLmluaXRpYWxpemVBcHAuJyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IGRjKHQub3B0aW9ucy5wcm9qZWN0SWQpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogTW9kaWZ5IHRoaXMgaW5zdGFuY2UgdG8gY29tbXVuaWNhdGUgd2l0aCB0aGUgQ2xvdWQgRmlyZXN0b3JlIGVtdWxhdG9yLlxuICpcbiAqIE5vdGU6IFRoaXMgbXVzdCBiZSBjYWxsZWQgYmVmb3JlIHRoaXMgaW5zdGFuY2UgaGFzIGJlZW4gdXNlZCB0byBkbyBhbnlcbiAqIG9wZXJhdGlvbnMuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSBgRmlyZXN0b3JlYCBpbnN0YW5jZSB0byBjb25maWd1cmUgdG8gY29ubmVjdCB0byB0aGVcbiAqIGVtdWxhdG9yLlxuICogQHBhcmFtIGhvc3QgLSB0aGUgZW11bGF0b3IgaG9zdCAoZXg6IGxvY2FsaG9zdCkuXG4gKiBAcGFyYW0gcG9ydCAtIHRoZSBlbXVsYXRvciBwb3J0IChleDogOTAwMCkuXG4gKiBAcGFyYW0gb3B0aW9ucy5tb2NrVXNlclRva2VuIC0gdGhlIG1vY2sgYXV0aCB0b2tlbiB0byB1c2UgZm9yIHVuaXQgdGVzdGluZ1xuICogU2VjdXJpdHkgUnVsZXMuXG4gKi8gKHQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSBhc3NvY2lhdGVkIHdpdGggdGhpcyBgRmlyZXN0b3JlYCBzZXJ2aWNlXG4gICAgICogaW5zdGFuY2UuXG4gICAgICovICAgIGdldCBhcHAoKSB7XG4gICAgICAgIGlmICghdGhpcy5fYXBwKSB0aHJvdyBuZXcgaihLLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiRmlyZXN0b3JlIHdhcyBub3QgaW5pdGlhbGl6ZWQgdXNpbmcgdGhlIEZpcmViYXNlIFNESy4gJ2FwcCcgaXMgbm90IGF2YWlsYWJsZVwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FwcDtcbiAgICB9XG4gICAgZ2V0IF9pbml0aWFsaXplZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzRnJvemVuO1xuICAgIH1cbiAgICBnZXQgX3Rlcm1pbmF0ZWQoKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHRoaXMuX3Rlcm1pbmF0ZVRhc2s7XG4gICAgfVxuICAgIF9zZXRTZXR0aW5ncyh0KSB7XG4gICAgICAgIGlmICh0aGlzLl9zZXR0aW5nc0Zyb3plbikgdGhyb3cgbmV3IGooSy5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkZpcmVzdG9yZSBoYXMgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQgYW5kIGl0cyBzZXR0aW5ncyBjYW4gbm8gbG9uZ2VyIGJlIGNoYW5nZWQuIFlvdSBjYW4gb25seSBtb2RpZnkgc2V0dGluZ3MgYmVmb3JlIGNhbGxpbmcgYW55IG90aGVyIG1ldGhvZHMgb24gYSBGaXJlc3RvcmUgb2JqZWN0LlwiKTtcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSBuZXcgSWModCksIHZvaWQgMCAhPT0gdC5jcmVkZW50aWFscyAmJiAodGhpcy5fYXV0aENyZWRlbnRpYWxzID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgaWYgKCF0KSByZXR1cm4gbmV3IEc7XG4gICAgICAgICAgICBzd2l0Y2ggKHQudHlwZSkge1xuICAgICAgICAgICAgICBjYXNlIFwiZ2FwaVwiOlxuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0LmNsaWVudDtcbiAgICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhpcyByZWFsbHkgaXMgYSBHYXBpIGNsaWVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEIoIShcIm9iamVjdFwiICE9IHR5cGVvZiBlIHx8IG51bGwgPT09IGUgfHwgIWUuYXV0aCB8fCAhZS5hdXRoLmdldEF1dGhIZWFkZXJWYWx1ZUZvckZpcnN0UGFydHkpKSwgXG4gICAgICAgICAgICAgICAgbmV3IFkoZSwgdC5zZXNzaW9uSW5kZXggfHwgXCIwXCIsIHQuaWFtVG9rZW4gfHwgbnVsbCk7XG5cbiAgICAgICAgICAgICAgY2FzZSBcInByb3ZpZGVyXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHQuY2xpZW50O1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIm1ha2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlciBmYWlsZWQgZHVlIHRvIGludmFsaWQgY3JlZGVudGlhbCB0eXBlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KHQuY3JlZGVudGlhbHMpKTtcbiAgICB9XG4gICAgX2dldFNldHRpbmdzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3M7XG4gICAgfVxuICAgIF9mcmVlemVTZXR0aW5ncygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzRnJvemVuID0gITAsIHRoaXMuX3NldHRpbmdzO1xuICAgIH1cbiAgICBfZGVsZXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGVybWluYXRlVGFzayB8fCAodGhpcy5fdGVybWluYXRlVGFzayA9IHRoaXMuX3Rlcm1pbmF0ZSgpKSwgdGhpcy5fdGVybWluYXRlVGFzaztcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBKU09OLXNlcmlhbGl6YWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGBGaXJlc3RvcmVgIGluc3RhbmNlLiAqLyAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhcHA6IHRoaXMuX2FwcCxcbiAgICAgICAgICAgIGRhdGFiYXNlSWQ6IHRoaXMuX2RhdGFiYXNlSWQsXG4gICAgICAgICAgICBzZXR0aW5nczogdGhpcy5fc2V0dGluZ3NcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGVybWluYXRlcyBhbGwgY29tcG9uZW50cyB1c2VkIGJ5IHRoaXMgY2xpZW50LiBTdWJjbGFzc2VzIGNhbiBvdmVycmlkZVxuICAgICAqIHRoaXMgbWV0aG9kIHRvIGNsZWFuIHVwIHRoZWlyIG93biBkZXBlbmRlbmNpZXMsIGJ1dCBtdXN0IGFsc28gY2FsbCB0aGlzXG4gICAgICogbWV0aG9kLlxuICAgICAqXG4gICAgICogT25seSBldmVyIGNhbGxlZCBvbmNlLlxuICAgICAqLyAgICBfdGVybWluYXRlKCkge1xuICAgICAgICAvKipcbiAqIFJlbW92ZXMgYWxsIGNvbXBvbmVudHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBwcm92aWRlZCBpbnN0YW5jZS4gTXVzdCBiZSBjYWxsZWRcbiAqIHdoZW4gdGhlIGBGaXJlc3RvcmVgIGluc3RhbmNlIGlzIHRlcm1pbmF0ZWQuXG4gKi9cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB3Yy5nZXQodCk7XG4gICAgICAgICAgICBlICYmICgkKFwiQ29tcG9uZW50UHJvdmlkZXJcIiwgXCJSZW1vdmluZyBEYXRhc3RvcmVcIiksIHdjLmRlbGV0ZSh0KSwgZS50ZXJtaW5hdGUoKSk7XG4gICAgICAgIH0odGhpcyksIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gUmModCwgZSwgbiwgcyA9IHt9KSB7XG4gICAgdmFyIGk7XG4gICAgY29uc3QgciA9ICh0ID0gVGModCwgQWMpKS5fZ2V0U2V0dGluZ3MoKTtcbiAgICBpZiAoXCJmaXJlc3RvcmUuZ29vZ2xlYXBpcy5jb21cIiAhPT0gci5ob3N0ICYmIHIuaG9zdCAhPT0gZSAmJiBPKFwiSG9zdCBoYXMgYmVlbiBzZXQgaW4gYm90aCBzZXR0aW5ncygpIGFuZCB1c2VFbXVsYXRvcigpLCBlbXVsYXRvciBob3N0IHdpbGwgYmUgdXNlZFwiKSwgXG4gICAgdC5fc2V0U2V0dGluZ3MoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByKSwge1xuICAgICAgICBob3N0OiBgJHtlfToke259YCxcbiAgICAgICAgc3NsOiAhMVxuICAgIH0pKSwgcy5tb2NrVXNlclRva2VuKSB7XG4gICAgICAgIGxldCBlLCBuO1xuICAgICAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2Ygcy5tb2NrVXNlclRva2VuKSBlID0gcy5tb2NrVXNlclRva2VuLCBuID0gRC5NT0NLX1VTRVI7IGVsc2Uge1xuICAgICAgICAgICAgLy8gTGV0IGNyZWF0ZU1vY2tVc2VyVG9rZW4gdmFsaWRhdGUgZmlyc3QgKGNhdGNoZXMgY29tbW9uIG1pc3Rha2VzIGxpa2VcbiAgICAgICAgICAgIC8vIGludmFsaWQgZmllbGQgXCJ1aWRcIiBhbmQgbWlzc2luZyBmaWVsZCBcInN1YlwiIC8gXCJ1c2VyX2lkXCIuKVxuICAgICAgICAgICAgZSA9IGNyZWF0ZU1vY2tVc2VyVG9rZW4ocy5tb2NrVXNlclRva2VuLCBudWxsID09PSAoaSA9IHQuX2FwcCkgfHwgdm9pZCAwID09PSBpID8gdm9pZCAwIDogaS5vcHRpb25zLnByb2plY3RJZCk7XG4gICAgICAgICAgICBjb25zdCByID0gcy5tb2NrVXNlclRva2VuLnN1YiB8fCBzLm1vY2tVc2VyVG9rZW4udXNlcl9pZDtcbiAgICAgICAgICAgIGlmICghcikgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIm1vY2tVc2VyVG9rZW4gbXVzdCBjb250YWluICdzdWInIG9yICd1c2VyX2lkJyBmaWVsZCFcIik7XG4gICAgICAgICAgICBuID0gbmV3IEQocik7XG4gICAgICAgIH1cbiAgICAgICAgdC5fYXV0aENyZWRlbnRpYWxzID0gbmV3IHoobmV3IFcoZSwgbikpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBgRG9jdW1lbnRSZWZlcmVuY2VgIHJlZmVycyB0byBhIGRvY3VtZW50IGxvY2F0aW9uIGluIGEgRmlyZXN0b3JlIGRhdGFiYXNlXG4gKiBhbmQgY2FuIGJlIHVzZWQgdG8gd3JpdGUsIHJlYWQsIG9yIGxpc3RlbiB0byB0aGUgbG9jYXRpb24uIFRoZSBkb2N1bWVudCBhdFxuICogdGhlIHJlZmVyZW5jZWQgbG9jYXRpb24gbWF5IG9yIG1heSBub3QgZXhpc3QuXG4gKi8gY2xhc3MgUGMge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgXG4gICAgLyoqXG4gICAgICogSWYgcHJvdmlkZWQsIHRoZSBgRmlyZXN0b3JlRGF0YUNvbnZlcnRlcmAgYXNzb2NpYXRlZCB3aXRoIHRoaXMgaW5zdGFuY2UuXG4gICAgICovXG4gICAgZSwgbikge1xuICAgICAgICB0aGlzLmNvbnZlcnRlciA9IGUsIHRoaXMuX2tleSA9IG4sIFxuICAgICAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBGaXJlc3RvcmUgcmVmZXJlbmNlLiAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcImRvY3VtZW50XCIsIHRoaXMuZmlyZXN0b3JlID0gdDtcbiAgICB9XG4gICAgZ2V0IF9wYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fa2V5LnBhdGg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBkb2N1bWVudCdzIGlkZW50aWZpZXIgd2l0aGluIGl0cyBjb2xsZWN0aW9uLlxuICAgICAqLyAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aC5sYXN0U2VnbWVudCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHBhdGggb2YgdGhlIHJlZmVyZW5jZWQgZG9jdW1lbnQgKHJlbGF0aXZlXG4gICAgICogdG8gdGhlIHJvb3Qgb2YgdGhlIGRhdGFiYXNlKS5cbiAgICAgKi8gICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGNvbGxlY3Rpb24gdGhpcyBgRG9jdW1lbnRSZWZlcmVuY2VgIGJlbG9uZ3MgdG8uXG4gICAgICovICAgIGdldCBwYXJlbnQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgdmModGhpcy5maXJlc3RvcmUsIHRoaXMuY29udmVydGVyLCB0aGlzLl9rZXkucGF0aC5wb3BMYXN0KCkpO1xuICAgIH1cbiAgICB3aXRoQ29udmVydGVyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQYyh0aGlzLmZpcmVzdG9yZSwgdCwgdGhpcy5fa2V5KTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBgUXVlcnlgIHJlZmVycyB0byBhIHF1ZXJ5IHdoaWNoIHlvdSBjYW4gcmVhZCBvciBsaXN0ZW4gdG8uIFlvdSBjYW4gYWxzb1xuICogY29uc3RydWN0IHJlZmluZWQgYFF1ZXJ5YCBvYmplY3RzIGJ5IGFkZGluZyBmaWx0ZXJzIGFuZCBvcmRlcmluZy5cbiAqLyBjbGFzcyBiYyB7XG4gICAgLy8gVGhpcyBpcyB0aGUgbGl0ZSB2ZXJzaW9uIG9mIHRoZSBRdWVyeSBjbGFzcyBpbiB0aGUgbWFpbiBTREsuXG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgcHJvdGVjdGVkICovXG4gICAgY29uc3RydWN0b3IodCwgXG4gICAgLyoqXG4gICAgICogSWYgcHJvdmlkZWQsIHRoZSBgRmlyZXN0b3JlRGF0YUNvbnZlcnRlcmAgYXNzb2NpYXRlZCB3aXRoIHRoaXMgaW5zdGFuY2UuXG4gICAgICovXG4gICAgZSwgbikge1xuICAgICAgICB0aGlzLmNvbnZlcnRlciA9IGUsIHRoaXMuX3F1ZXJ5ID0gbiwgXG4gICAgICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIEZpcmVzdG9yZSByZWZlcmVuY2UuICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwicXVlcnlcIiwgdGhpcy5maXJlc3RvcmUgPSB0O1xuICAgIH1cbiAgICB3aXRoQ29udmVydGVyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBiYyh0aGlzLmZpcmVzdG9yZSwgdCwgdGhpcy5fcXVlcnkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBDb2xsZWN0aW9uUmVmZXJlbmNlYCBvYmplY3QgY2FuIGJlIHVzZWQgZm9yIGFkZGluZyBkb2N1bWVudHMsIGdldHRpbmdcbiAqIGRvY3VtZW50IHJlZmVyZW5jZXMsIGFuZCBxdWVyeWluZyBmb3IgZG9jdW1lbnRzICh1c2luZyB7QGxpbmsgcXVlcnl9KS5cbiAqLyBjbGFzcyB2YyBleHRlbmRzIGJjIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIodCwgZSwgZ2UobikpLCB0aGlzLl9wYXRoID0gbiwgXG4gICAgICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIEZpcmVzdG9yZSByZWZlcmVuY2UuICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiY29sbGVjdGlvblwiO1xuICAgIH1cbiAgICAvKiogVGhlIGNvbGxlY3Rpb24ncyBpZGVudGlmaWVyLiAqLyAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWVyeS5wYXRoLmxhc3RTZWdtZW50KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgcGF0aCBvZiB0aGUgcmVmZXJlbmNlZCBjb2xsZWN0aW9uIChyZWxhdGl2ZVxuICAgICAqIHRvIHRoZSByb290IG9mIHRoZSBkYXRhYmFzZSkuXG4gICAgICovICAgIGdldCBwYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcXVlcnkucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSByZWZlcmVuY2UgdG8gdGhlIGNvbnRhaW5pbmcgYERvY3VtZW50UmVmZXJlbmNlYCBpZiB0aGlzIGlzIGFcbiAgICAgKiBzdWJjb2xsZWN0aW9uLiBJZiB0aGlzIGlzbid0IGEgc3ViY29sbGVjdGlvbiwgdGhlIHJlZmVyZW5jZSBpcyBudWxsLlxuICAgICAqLyAgICBnZXQgcGFyZW50KCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5fcGF0aC5wb3BMYXN0KCk7XG4gICAgICAgIHJldHVybiB0LmlzRW1wdHkoKSA/IG51bGwgOiBuZXcgUGModGhpcy5maXJlc3RvcmUsIFxuICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIG5ldyBTdCh0KSk7XG4gICAgfVxuICAgIHdpdGhDb252ZXJ0ZXIodCkge1xuICAgICAgICByZXR1cm4gbmV3IHZjKHRoaXMuZmlyZXN0b3JlLCB0LCB0aGlzLl9wYXRoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFZjKHQsIGUsIC4uLm4pIHtcbiAgICBpZiAodCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSwgX2MoXCJjb2xsZWN0aW9uXCIsIFwicGF0aFwiLCBlKSwgdCBpbnN0YW5jZW9mIEFjKSB7XG4gICAgICAgIGNvbnN0IHMgPSBkdC5mcm9tU3RyaW5nKGUsIC4uLm4pO1xuICAgICAgICByZXR1cm4geWMocyksIG5ldyB2Yyh0LCAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIHMpO1xuICAgIH1cbiAgICB7XG4gICAgICAgIGlmICghKHQgaW5zdGFuY2VvZiBQYyB8fCB0IGluc3RhbmNlb2YgdmMpKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiRXhwZWN0ZWQgZmlyc3QgYXJndW1lbnQgdG8gY29sbGVjdGlvbigpIHRvIGJlIGEgQ29sbGVjdGlvblJlZmVyZW5jZSwgYSBEb2N1bWVudFJlZmVyZW5jZSBvciBGaXJlYmFzZUZpcmVzdG9yZVwiKTtcbiAgICAgICAgY29uc3QgcyA9IHQuX3BhdGguY2hpbGQoZHQuZnJvbVN0cmluZyhlLCAuLi5uKSk7XG4gICAgICAgIHJldHVybiB5YyhzKSwgbmV3IHZjKHQuZmlyZXN0b3JlLCBcbiAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsLCBzKTtcbiAgICB9XG59XG5cbi8vIFRPRE8oZmlyZXN0b3JlbGl0ZSk6IENvbnNpZGVyIHVzaW5nIEVycm9yRmFjdG9yeSAtXG4vLyBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtanMtc2RrL2Jsb2IvMDEzMWUxZi9wYWNrYWdlcy91dGlsL3NyYy9lcnJvcnMudHMjTDEwNlxuLyoqXG4gKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgbmV3IGBRdWVyeWAgaW5zdGFuY2UgdGhhdCBpbmNsdWRlcyBhbGwgZG9jdW1lbnRzIGluIHRoZVxuICogZGF0YWJhc2UgdGhhdCBhcmUgY29udGFpbmVkIGluIGEgY29sbGVjdGlvbiBvciBzdWJjb2xsZWN0aW9uIHdpdGggdGhlXG4gKiBnaXZlbiBgY29sbGVjdGlvbklkYC5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gQSByZWZlcmVuY2UgdG8gdGhlIHJvb3QgYEZpcmVzdG9yZWAgaW5zdGFuY2UuXG4gKiBAcGFyYW0gY29sbGVjdGlvbklkIC0gSWRlbnRpZmllcyB0aGUgY29sbGVjdGlvbnMgdG8gcXVlcnkgb3Zlci4gRXZlcnlcbiAqIGNvbGxlY3Rpb24gb3Igc3ViY29sbGVjdGlvbiB3aXRoIHRoaXMgSUQgYXMgdGhlIGxhc3Qgc2VnbWVudCBvZiBpdHMgcGF0aFxuICogd2lsbCBiZSBpbmNsdWRlZC4gQ2Fubm90IGNvbnRhaW4gYSBzbGFzaC5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIGBRdWVyeWAuXG4gKi8gZnVuY3Rpb24gU2ModCwgZSkge1xuICAgIGlmICh0ID0gVGModCwgQWMpLCBfYyhcImNvbGxlY3Rpb25Hcm91cFwiLCBcImNvbGxlY3Rpb24gaWRcIiwgZSksIGUuaW5kZXhPZihcIi9cIikgPj0gMCkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBjb2xsZWN0aW9uIElEICcke2V9JyBwYXNzZWQgdG8gZnVuY3Rpb24gY29sbGVjdGlvbkdyb3VwKCkuIENvbGxlY3Rpb24gSURzIG11c3Qgbm90IGNvbnRhaW4gJy8nLmApO1xuICAgIHJldHVybiBuZXcgYmModCwgXG4gICAgLyogY29udmVydGVyPSAqLyBudWxsLCBcbiAgICAvKipcbiAqIENyZWF0ZXMgYSBuZXcgUXVlcnkgZm9yIGEgY29sbGVjdGlvbiBncm91cCBxdWVyeSB0aGF0IG1hdGNoZXMgYWxsIGRvY3VtZW50c1xuICogd2l0aGluIHRoZSBwcm92aWRlZCBjb2xsZWN0aW9uIGdyb3VwLlxuICovXG4gICAgZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gbmV3IF9lKGR0LmVtcHR5UGF0aCgpLCB0KTtcbiAgICB9KGUpKTtcbn1cblxuZnVuY3Rpb24gRGModCwgZSwgLi4ubikge1xuICAgIGlmICh0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpLCBcbiAgICAvLyBXZSBhbGxvdyBvbWlzc2lvbiBvZiAncGF0aFN0cmluZycgYnV0IGV4cGxpY2l0bHkgcHJvaGliaXQgcGFzc2luZyBpbiBib3RoXG4gICAgLy8gJ3VuZGVmaW5lZCcgYW5kICdudWxsJy5cbiAgICAxID09PSBhcmd1bWVudHMubGVuZ3RoICYmIChlID0gc3QuQSgpKSwgX2MoXCJkb2NcIiwgXCJwYXRoXCIsIGUpLCB0IGluc3RhbmNlb2YgQWMpIHtcbiAgICAgICAgY29uc3QgcyA9IGR0LmZyb21TdHJpbmcoZSwgLi4ubik7XG4gICAgICAgIHJldHVybiBnYyhzKSwgbmV3IFBjKHQsIFxuICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIG5ldyBTdChzKSk7XG4gICAgfVxuICAgIHtcbiAgICAgICAgaWYgKCEodCBpbnN0YW5jZW9mIFBjIHx8IHQgaW5zdGFuY2VvZiB2YykpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJFeHBlY3RlZCBmaXJzdCBhcmd1bWVudCB0byBjb2xsZWN0aW9uKCkgdG8gYmUgYSBDb2xsZWN0aW9uUmVmZXJlbmNlLCBhIERvY3VtZW50UmVmZXJlbmNlIG9yIEZpcmViYXNlRmlyZXN0b3JlXCIpO1xuICAgICAgICBjb25zdCBzID0gdC5fcGF0aC5jaGlsZChkdC5mcm9tU3RyaW5nKGUsIC4uLm4pKTtcbiAgICAgICAgcmV0dXJuIGdjKHMpLCBuZXcgUGModC5maXJlc3RvcmUsIHQgaW5zdGFuY2VvZiB2YyA/IHQuY29udmVydGVyIDogbnVsbCwgbmV3IFN0KHMpKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBwcm92aWRlZCByZWZlcmVuY2VzIGFyZSBlcXVhbC5cbiAqXG4gKiBAcGFyYW0gbGVmdCAtIEEgcmVmZXJlbmNlIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0gcmlnaHQgLSBBIHJlZmVyZW5jZSB0byBjb21wYXJlLlxuICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgcmVmZXJlbmNlcyBwb2ludCB0byB0aGUgc2FtZSBsb2NhdGlvbiBpbiB0aGUgc2FtZVxuICogRmlyZXN0b3JlIGRhdGFiYXNlLlxuICovIGZ1bmN0aW9uIENjKHQsIGUpIHtcbiAgICByZXR1cm4gdCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSwgZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSwgKHQgaW5zdGFuY2VvZiBQYyB8fCB0IGluc3RhbmNlb2YgdmMpICYmIChlIGluc3RhbmNlb2YgUGMgfHwgZSBpbnN0YW5jZW9mIHZjKSAmJiAodC5maXJlc3RvcmUgPT09IGUuZmlyZXN0b3JlICYmIHQucGF0aCA9PT0gZS5wYXRoICYmIHQuY29udmVydGVyID09PSBlLmNvbnZlcnRlcik7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBwcm92aWRlZCBxdWVyaWVzIHBvaW50IHRvIHRoZSBzYW1lIGNvbGxlY3Rpb24gYW5kIGFwcGx5XG4gKiB0aGUgc2FtZSBjb25zdHJhaW50cy5cbiAqXG4gKiBAcGFyYW0gbGVmdCAtIEEgYFF1ZXJ5YCB0byBjb21wYXJlLlxuICogQHBhcmFtIHJpZ2h0IC0gQSBgUXVlcnlgIHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSByZWZlcmVuY2VzIHBvaW50IHRvIHRoZSBzYW1lIGxvY2F0aW9uIGluIHRoZSBzYW1lXG4gKiBGaXJlc3RvcmUgZGF0YWJhc2UuXG4gKi8gZnVuY3Rpb24gTmModCwgZSkge1xuICAgIHJldHVybiB0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpLCBlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpLCB0IGluc3RhbmNlb2YgYmMgJiYgZSBpbnN0YW5jZW9mIGJjICYmICh0LmZpcmVzdG9yZSA9PT0gZS5maXJlc3RvcmUgJiYgYmUodC5fcXVlcnksIGUuX3F1ZXJ5KSAmJiB0LmNvbnZlcnRlciA9PT0gZS5jb252ZXJ0ZXIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBrYyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIFRoZSBsYXN0IHByb21pc2UgaW4gdGhlIHF1ZXVlLlxuICAgICAgICB0aGlzLm1hID0gUHJvbWlzZS5yZXNvbHZlKCksIFxuICAgICAgICAvLyBBIGxpc3Qgb2YgcmV0cnlhYmxlIG9wZXJhdGlvbnMuIFJldHJ5YWJsZSBvcGVyYXRpb25zIGFyZSBydW4gaW4gb3JkZXIgYW5kXG4gICAgICAgIC8vIHJldHJpZWQgd2l0aCBiYWNrb2ZmLlxuICAgICAgICB0aGlzLmdhID0gW10sIFxuICAgICAgICAvLyBJcyB0aGlzIEFzeW5jUXVldWUgYmVpbmcgc2h1dCBkb3duPyBPbmNlIGl0IGlzIHNldCB0byB0cnVlLCBpdCB3aWxsIG5vdFxuICAgICAgICAvLyBiZSBjaGFuZ2VkIGFnYWluLlxuICAgICAgICB0aGlzLnlhID0gITEsIFxuICAgICAgICAvLyBPcGVyYXRpb25zIHNjaGVkdWxlZCB0byBiZSBxdWV1ZWQgaW4gdGhlIGZ1dHVyZS4gT3BlcmF0aW9ucyBhcmVcbiAgICAgICAgLy8gYXV0b21hdGljYWxseSByZW1vdmVkIGFmdGVyIHRoZXkgYXJlIHJ1biBvciBjYW5jZWxlZC5cbiAgICAgICAgdGhpcy5wYSA9IFtdLCBcbiAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICB0aGlzLlRhID0gbnVsbCwgXG4gICAgICAgIC8vIEZsYWcgc2V0IHdoaWxlIHRoZXJlJ3MgYW4gb3V0c3RhbmRpbmcgQXN5bmNRdWV1ZSBvcGVyYXRpb24sIHVzZWQgZm9yXG4gICAgICAgIC8vIGFzc2VydGlvbiBzYW5pdHktY2hlY2tzLlxuICAgICAgICB0aGlzLkVhID0gITEsIFxuICAgICAgICAvLyBFbmFibGVkIGR1cmluZyBzaHV0ZG93biBvbiBTYWZhcmkgdG8gcHJldmVudCBmdXR1cmUgYWNjZXNzIHRvIEluZGV4ZWREQi5cbiAgICAgICAgdGhpcy5JYSA9ICExLCBcbiAgICAgICAgLy8gTGlzdCBvZiBUaW1lcklkcyB0byBmYXN0LWZvcndhcmQgZGVsYXlzIGZvci5cbiAgICAgICAgdGhpcy5BYSA9IFtdLCBcbiAgICAgICAgLy8gQmFja29mZiB0aW1lciB1c2VkIHRvIHNjaGVkdWxlIHJldHJpZXMgZm9yIHJldHJ5YWJsZSBvcGVyYXRpb25zXG4gICAgICAgIHRoaXMudXIgPSBuZXcgZW8odGhpcywgXCJhc3luY19xdWV1ZV9yZXRyeVwiIC8qIEFzeW5jUXVldWVSZXRyeSAqLyksIFxuICAgICAgICAvLyBWaXNpYmlsaXR5IGhhbmRsZXIgdGhhdCB0cmlnZ2VycyBhbiBpbW1lZGlhdGUgcmV0cnkgb2YgYWxsIHJldHJ5YWJsZVxuICAgICAgICAvLyBvcGVyYXRpb25zLiBNZWFudCB0byBzcGVlZCB1cCByZWNvdmVyeSB3aGVuIHdlIHJlZ2FpbiBmaWxlIHN5c3RlbSBhY2Nlc3NcbiAgICAgICAgLy8gYWZ0ZXIgcGFnZSBjb21lcyBpbnRvIGZvcmVncm91bmQuXG4gICAgICAgIHRoaXMuUmEgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gWnIoKTtcbiAgICAgICAgICAgIHQgJiYgJChcIkFzeW5jUXVldWVcIiwgXCJWaXNpYmlsaXR5IHN0YXRlIGNoYW5nZWQgdG8gXCIgKyB0LnZpc2liaWxpdHlTdGF0ZSksIHRoaXMudXIuZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgdCA9IFpyKCk7XG4gICAgICAgIHQgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiB0LmFkZEV2ZW50TGlzdGVuZXIgJiYgdC5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB0aGlzLlJhKTtcbiAgICB9XG4gICAgZ2V0IGlzU2h1dHRpbmdEb3duKCkge1xuICAgICAgICByZXR1cm4gdGhpcy55YTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIG5ldyBvcGVyYXRpb24gdG8gdGhlIHF1ZXVlIHdpdGhvdXQgd2FpdGluZyBmb3IgaXQgdG8gY29tcGxldGUgKGkuZS5cbiAgICAgKiB3ZSBpZ25vcmUgdGhlIFByb21pc2UgcmVzdWx0KS5cbiAgICAgKi8gICAgZW5xdWV1ZUFuZEZvcmdldCh0KSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgICAgdGhpcy5lbnF1ZXVlKHQpO1xuICAgIH1cbiAgICBlbnF1ZXVlQW5kRm9yZ2V0RXZlbldoaWxlUmVzdHJpY3RlZCh0KSB7XG4gICAgICAgIHRoaXMuUGEoKSwgXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgICAgdGhpcy5iYSh0KTtcbiAgICB9XG4gICAgZW50ZXJSZXN0cmljdGVkTW9kZSh0KSB7XG4gICAgICAgIGlmICghdGhpcy55YSkge1xuICAgICAgICAgICAgdGhpcy55YSA9ICEwLCB0aGlzLklhID0gdCB8fCAhMTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBacigpO1xuICAgICAgICAgICAgZSAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGUucmVtb3ZlRXZlbnRMaXN0ZW5lciAmJiBlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMuUmEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVucXVldWUodCkge1xuICAgICAgICBpZiAodGhpcy5QYSgpLCB0aGlzLnlhKSBcbiAgICAgICAgLy8gUmV0dXJuIGEgUHJvbWlzZSB3aGljaCBuZXZlciByZXNvbHZlcy5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCgoKSA9PiB7fSkpO1xuICAgICAgICAvLyBDcmVhdGUgYSBkZWZlcnJlZCBQcm9taXNlIHRoYXQgd2UgY2FuIHJldHVybiB0byB0aGUgY2FsbGVlLiBUaGlzXG4gICAgICAgIC8vIGFsbG93cyB1cyB0byByZXR1cm4gYSBcImhhbmdpbmcgUHJvbWlzZVwiIG9ubHkgdG8gdGhlIGNhbGxlZSBhbmQgc3RpbGxcbiAgICAgICAgLy8gYWR2YW5jZSB0aGUgcXVldWUgZXZlbiB3aGVuIHRoZSBvcGVyYXRpb24gaXMgbm90IHJ1bi5cbiAgICAgICAgICAgICAgICBjb25zdCBlID0gbmV3IFE7XG4gICAgICAgIHJldHVybiB0aGlzLmJhKCgoKSA9PiB0aGlzLnlhICYmIHRoaXMuSWEgPyBQcm9taXNlLnJlc29sdmUoKSA6ICh0KCkudGhlbihlLnJlc29sdmUsIGUucmVqZWN0KSwgXG4gICAgICAgIGUucHJvbWlzZSkpKS50aGVuKCgoKSA9PiBlLnByb21pc2UpKTtcbiAgICB9XG4gICAgZW5xdWV1ZVJldHJ5YWJsZSh0KSB7XG4gICAgICAgIHRoaXMuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gKHRoaXMuZ2EucHVzaCh0KSwgdGhpcy52YSgpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSdW5zIHRoZSBuZXh0IG9wZXJhdGlvbiBmcm9tIHRoZSByZXRyeWFibGUgcXVldWUuIElmIHRoZSBvcGVyYXRpb24gZmFpbHMsXG4gICAgICogcmVzY2hlZHVsZXMgd2l0aCBiYWNrb2ZmLlxuICAgICAqLyAgICBhc3luYyB2YSgpIHtcbiAgICAgICAgaWYgKDAgIT09IHRoaXMuZ2EubGVuZ3RoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2FbMF0oKSwgdGhpcy5nYS5zaGlmdCgpLCB0aGlzLnVyLnJlc2V0KCk7XG4gICAgICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFYcyh0KSkgdGhyb3cgdDtcbiAvLyBGYWlsdXJlIHdpbGwgYmUgaGFuZGxlZCBieSBBc3luY1F1ZXVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCJBc3luY1F1ZXVlXCIsIFwiT3BlcmF0aW9uIGZhaWxlZCB3aXRoIHJldHJ5YWJsZSBlcnJvcjogXCIgKyB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZ2EubGVuZ3RoID4gMCAmJiBcbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSBhZGRpdGlvbmFsIG9wZXJhdGlvbnMsIHdlIHJlLXNjaGVkdWxlIGByZXRyeU5leHRPcCgpYC5cbiAgICAgICAgICAgIC8vIFRoaXMgaXMgbmVjZXNzYXJ5IHRvIHJ1biByZXRyeWFibGUgb3BlcmF0aW9ucyB0aGF0IGZhaWxlZCBkdXJpbmdcbiAgICAgICAgICAgIC8vIHRoZWlyIGluaXRpYWwgYXR0ZW1wdCBzaW5jZSB3ZSBkb24ndCBrbm93IHdoZXRoZXIgdGhleSBhcmUgYWxyZWFkeVxuICAgICAgICAgICAgLy8gZW5xdWV1ZWQuIElmLCBmb3IgZXhhbXBsZSwgYG9wMWAsIGBvcDJgLCBgb3AzYCBhcmUgZW5xdWV1ZWQgYW5kIGBvcDFgXG4gICAgICAgICAgICAvLyBuZWVkcyB0byAgYmUgcmUtcnVuLCB3ZSB3aWxsIHJ1biBgb3AxYCwgYG9wMWAsIGBvcDJgIHVzaW5nIHRoZVxuICAgICAgICAgICAgLy8gYWxyZWFkeSBlbnF1ZXVlZCBjYWxscyB0byBgcmV0cnlOZXh0T3AoKWAuIGBvcDMoKWAgd2lsbCB0aGVuIHJ1biBpbiB0aGVcbiAgICAgICAgICAgIC8vIGNhbGwgc2NoZWR1bGVkIGhlcmUuXG4gICAgICAgICAgICAvLyBTaW5jZSBgYmFja29mZkFuZFJ1bigpYCBjYW5jZWxzIGFuIGV4aXN0aW5nIGJhY2tvZmYgYW5kIHNjaGVkdWxlcyBhXG4gICAgICAgICAgICAvLyBuZXcgYmFja29mZiBvbiBldmVyeSBjYWxsLCB0aGVyZSBpcyBvbmx5IGV2ZXIgYSBzaW5nbGUgYWRkaXRpb25hbFxuICAgICAgICAgICAgLy8gb3BlcmF0aW9uIGluIHRoZSBxdWV1ZS5cbiAgICAgICAgICAgIHRoaXMudXIuWmkoKCgpID0+IHRoaXMudmEoKSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGJhKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMubWEudGhlbigoKCkgPT4gKHRoaXMuRWEgPSAhMCwgdCgpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuVGEgPSB0LCB0aGlzLkVhID0gITE7XG4gICAgICAgICAgICBjb25zdCBlID0gXG4gICAgICAgICAgICAvKipcbiAqIENocm9tZSBpbmNsdWRlcyBFcnJvci5tZXNzYWdlIGluIEVycm9yLnN0YWNrLiBPdGhlciBicm93c2VycyBkbyBub3QuXG4gKiBUaGlzIHJldHVybnMgZXhwZWN0ZWQgb3V0cHV0IG9mIG1lc3NhZ2UgKyBzdGFjayB3aGVuIGF2YWlsYWJsZS5cbiAqIEBwYXJhbSBlcnJvciAtIEVycm9yIG9yIEZpcmVzdG9yZUVycm9yXG4gKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBsZXQgZSA9IHQubWVzc2FnZSB8fCBcIlwiO1xuICAgICAgICAgICAgICAgIHQuc3RhY2sgJiYgKGUgPSB0LnN0YWNrLmluY2x1ZGVzKHQubWVzc2FnZSkgPyB0LnN0YWNrIDogdC5tZXNzYWdlICsgXCJcXG5cIiArIHQuc3RhY2spO1xuICAgICAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKHQpO1xuICAgICAgICAgICAgLy8gUmUtdGhyb3cgdGhlIGVycm9yIHNvIHRoYXQgdGhpcy50YWlsIGJlY29tZXMgYSByZWplY3RlZCBQcm9taXNlIGFuZFxuICAgICAgICAgICAgLy8gYWxsIGZ1cnRoZXIgYXR0ZW1wdHMgdG8gY2hhaW4gKHZpYSAudGhlbikgd2lsbCBqdXN0IHNob3J0LWNpcmN1aXRcbiAgICAgICAgICAgIC8vIGFuZCByZXR1cm4gdGhlIHJlamVjdGVkIFByb21pc2UuXG4gICAgICAgICAgICB0aHJvdyBGKFwiSU5URVJOQUwgVU5IQU5ETEVEIEVSUk9SOiBcIiwgZSksIHQ7XG4gICAgICAgIH0pKS50aGVuKCh0ID0+ICh0aGlzLkVhID0gITEsIHQpKSkpKSk7XG4gICAgICAgIHJldHVybiB0aGlzLm1hID0gZSwgZTtcbiAgICB9XG4gICAgZW5xdWV1ZUFmdGVyRGVsYXkodCwgZSwgbikge1xuICAgICAgICB0aGlzLlBhKCksIFxuICAgICAgICAvLyBGYXN0LWZvcndhcmQgZGVsYXlzIGZvciB0aW1lcklkcyB0aGF0IGhhdmUgYmVlbiBvdmVycmlkZW4uXG4gICAgICAgIHRoaXMuQWEuaW5kZXhPZih0KSA+IC0xICYmIChlID0gMCk7XG4gICAgICAgIGNvbnN0IHMgPSBGby5jcmVhdGVBbmRTY2hlZHVsZSh0aGlzLCB0LCBlLCBuLCAodCA9PiB0aGlzLlZhKHQpKSk7XG4gICAgICAgIHJldHVybiB0aGlzLnBhLnB1c2gocyksIHM7XG4gICAgfVxuICAgIFBhKCkge1xuICAgICAgICB0aGlzLlRhICYmIEwoKTtcbiAgICB9XG4gICAgdmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpIHt9XG4gICAgLyoqXG4gICAgICogV2FpdHMgdW50aWwgYWxsIGN1cnJlbnRseSBxdWV1ZWQgdGFza3MgYXJlIGZpbmlzaGVkIGV4ZWN1dGluZy4gRGVsYXllZFxuICAgICAqIG9wZXJhdGlvbnMgYXJlIG5vdCBydW4uXG4gICAgICovICAgIGFzeW5jIFNhKCkge1xuICAgICAgICAvLyBPcGVyYXRpb25zIGluIHRoZSBxdWV1ZSBwcmlvciB0byBkcmFpbmluZyBtYXkgaGF2ZSBlbnF1ZXVlZCBhZGRpdGlvbmFsXG4gICAgICAgIC8vIG9wZXJhdGlvbnMuIEtlZXAgZHJhaW5pbmcgdGhlIHF1ZXVlIHVudGlsIHRoZSB0YWlsIGlzIG5vIGxvbmdlciBhZHZhbmNlZCxcbiAgICAgICAgLy8gd2hpY2ggaW5kaWNhdGVzIHRoYXQgbm8gbW9yZSBuZXcgb3BlcmF0aW9ucyB3ZXJlIGVucXVldWVkIGFuZCB0aGF0IGFsbFxuICAgICAgICAvLyBvcGVyYXRpb25zIHdlcmUgZXhlY3V0ZWQuXG4gICAgICAgIGxldCB0O1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICB0ID0gdGhpcy5tYSwgYXdhaXQgdDtcbiAgICAgICAgfSB3aGlsZSAodCAhPT0gdGhpcy5tYSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvciBUZXN0czogRGV0ZXJtaW5lIGlmIGEgZGVsYXllZCBvcGVyYXRpb24gd2l0aCBhIHBhcnRpY3VsYXIgVGltZXJJZFxuICAgICAqIGV4aXN0cy5cbiAgICAgKi8gICAgRGEodCkge1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy5wYSkgaWYgKGUudGltZXJJZCA9PT0gdCkgcmV0dXJuICEwO1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvciBUZXN0czogUnVucyBzb21lIG9yIGFsbCBkZWxheWVkIG9wZXJhdGlvbnMgZWFybHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbGFzdFRpbWVySWQgLSBEZWxheWVkIG9wZXJhdGlvbnMgdXAgdG8gYW5kIGluY2x1ZGluZyB0aGlzIFRpbWVySWRcbiAgICAgKiB3aWxsIGJlIGRyYWluZWQuIFBhc3MgVGltZXJJZC5BbGwgdG8gcnVuIGFsbCBkZWxheWVkIG9wZXJhdGlvbnMuXG4gICAgICogQHJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgb25jZSBhbGwgb3BlcmF0aW9ucyBoYXZlIGJlZW4gcnVuLlxuICAgICAqLyAgICBDYSh0KSB7XG4gICAgICAgIC8vIE5vdGUgdGhhdCBkcmFpbmluZyBtYXkgZ2VuZXJhdGUgbW9yZSBkZWxheWVkIG9wcywgc28gd2UgZG8gdGhhdCBmaXJzdC5cbiAgICAgICAgcmV0dXJuIHRoaXMuU2EoKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBSdW4gb3BzIGluIHRoZSBzYW1lIG9yZGVyIHRoZXknZCBydW4gaWYgdGhleSByYW4gbmF0dXJhbGx5LlxuICAgICAgICAgICAgdGhpcy5wYS5zb3J0KCgodCwgZSkgPT4gdC50YXJnZXRUaW1lTXMgLSBlLnRhcmdldFRpbWVNcykpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMucGEpIGlmIChlLnNraXBEZWxheSgpLCBcImFsbFwiIC8qIEFsbCAqLyAhPT0gdCAmJiBlLnRpbWVySWQgPT09IHQpIGJyZWFrO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuU2EoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3IgVGVzdHM6IFNraXAgYWxsIHN1YnNlcXVlbnQgZGVsYXlzIGZvciBhIHRpbWVyIGlkLlxuICAgICAqLyAgICBOYSh0KSB7XG4gICAgICAgIHRoaXMuQWEucHVzaCh0KTtcbiAgICB9XG4gICAgLyoqIENhbGxlZCBvbmNlIGEgRGVsYXllZE9wZXJhdGlvbiBpcyBydW4gb3IgY2FuY2VsZWQuICovICAgIFZhKHQpIHtcbiAgICAgICAgLy8gTk9URTogaW5kZXhPZiAvIHNsaWNlIGFyZSBPKG4pLCBidXQgZGVsYXllZE9wZXJhdGlvbnMgaXMgZXhwZWN0ZWQgdG8gYmUgc21hbGwuXG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnBhLmluZGV4T2YodCk7XG4gICAgICAgIHRoaXMucGEuc3BsaWNlKGUsIDEpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24geGModCkge1xuICAgIC8qKlxuICogUmV0dXJucyB0cnVlIGlmIG9iaiBpcyBhbiBvYmplY3QgYW5kIGNvbnRhaW5zIGF0IGxlYXN0IG9uZSBvZiB0aGUgc3BlY2lmaWVkXG4gKiBtZXRob2RzLlxuICovXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgaWYgKFwib2JqZWN0XCIgIT0gdHlwZW9mIHQgfHwgbnVsbCA9PT0gdCkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBuID0gdDtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIGlmICh0IGluIG4gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBuW3RdKSByZXR1cm4gITA7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAvKipcbiAqIFJlcHJlc2VudHMgdGhlIHRhc2sgb2YgbG9hZGluZyBhIEZpcmVzdG9yZSBidW5kbGUuIEl0IHByb3ZpZGVzIHByb2dyZXNzIG9mIGJ1bmRsZVxuICogbG9hZGluZywgYXMgd2VsbCBhcyB0YXNrIGNvbXBsZXRpb24gYW5kIGVycm9yIGV2ZW50cy5cbiAqXG4gKiBUaGUgQVBJIGlzIGNvbXBhdGlibGUgd2l0aCBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPmAuXG4gKi8gKHQsIFsgXCJuZXh0XCIsIFwiZXJyb3JcIiwgXCJjb21wbGV0ZVwiIF0pO1xufVxuXG5jbGFzcyAkYyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIgPSB7fSwgdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlciA9IG5ldyBRLCB0aGlzLl9sYXN0UHJvZ3Jlc3MgPSB7XG4gICAgICAgICAgICB0YXNrU3RhdGU6IFwiUnVubmluZ1wiLFxuICAgICAgICAgICAgdG90YWxCeXRlczogMCxcbiAgICAgICAgICAgIHRvdGFsRG9jdW1lbnRzOiAwLFxuICAgICAgICAgICAgYnl0ZXNMb2FkZWQ6IDAsXG4gICAgICAgICAgICBkb2N1bWVudHNMb2FkZWQ6IDBcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGZ1bmN0aW9ucyB0byBsaXN0ZW4gdG8gYnVuZGxlIGxvYWRpbmcgcHJvZ3Jlc3MgZXZlbnRzLlxuICAgICAqIEBwYXJhbSBuZXh0IC0gQ2FsbGVkIHdoZW4gdGhlcmUgaXMgYSBwcm9ncmVzcyB1cGRhdGUgZnJvbSBidW5kbGUgbG9hZGluZy4gVHlwaWNhbGx5IGBuZXh0YCBjYWxscyBvY2N1clxuICAgICAqICAgZWFjaCB0aW1lIGEgRmlyZXN0b3JlIGRvY3VtZW50IGlzIGxvYWRlZCBmcm9tIHRoZSBidW5kbGUuXG4gICAgICogQHBhcmFtIGVycm9yIC0gQ2FsbGVkIHdoZW4gYW4gZXJyb3Igb2NjdXJzIGR1cmluZyBidW5kbGUgbG9hZGluZy4gVGhlIHRhc2sgYWJvcnRzIGFmdGVyIHJlcG9ydGluZyB0aGVcbiAgICAgKiAgIGVycm9yLCBhbmQgdGhlcmUgc2hvdWxkIGJlIG5vIG1vcmUgdXBkYXRlcyBhZnRlciB0aGlzLlxuICAgICAqIEBwYXJhbSBjb21wbGV0ZSAtIENhbGxlZCB3aGVuIHRoZSBsb2FkaW5nIHRhc2sgaXMgY29tcGxldGUuXG4gICAgICovICAgIG9uUHJvZ3Jlc3ModCwgZSwgbikge1xuICAgICAgICB0aGlzLl9wcm9ncmVzc09ic2VydmVyID0ge1xuICAgICAgICAgICAgbmV4dDogdCxcbiAgICAgICAgICAgIGVycm9yOiBlLFxuICAgICAgICAgICAgY29tcGxldGU6IG5cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW1wbGVtZW50cyB0aGUgYFByb21pc2U8TG9hZEJ1bmRsZVRhc2tQcm9ncmVzcz4uY2F0Y2hgIGludGVyZmFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvblJlamVjdGVkIC0gQ2FsbGVkIHdoZW4gYW4gZXJyb3Igb2NjdXJzIGR1cmluZyBidW5kbGUgbG9hZGluZy5cbiAgICAgKi8gICAgY2F0Y2godCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlci5wcm9taXNlLmNhdGNoKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbXBsZW1lbnRzIHRoZSBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPi50aGVuYCBpbnRlcmZhY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb25GdWxmaWxsZWQgLSBDYWxsZWQgb24gdGhlIGNvbXBsZXRpb24gb2YgdGhlIGxvYWRpbmcgdGFzayB3aXRoIGEgZmluYWwgYExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3NgIHVwZGF0ZS5cbiAgICAgKiAgIFRoZSB1cGRhdGUgd2lsbCBhbHdheXMgaGF2ZSBpdHMgYHRhc2tTdGF0ZWAgc2V0IHRvIGBcIlN1Y2Nlc3NcImAuXG4gICAgICogQHBhcmFtIG9uUmVqZWN0ZWQgLSBDYWxsZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMgZHVyaW5nIGJ1bmRsZSBsb2FkaW5nLlxuICAgICAqLyAgICB0aGVuKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIucHJvbWlzZS50aGVuKHQsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBOb3RpZmllcyBhbGwgb2JzZXJ2ZXJzIHRoYXQgYnVuZGxlIGxvYWRpbmcgaGFzIGNvbXBsZXRlZCwgd2l0aCBhIHByb3ZpZGVkXG4gICAgICogYExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3NgIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovICAgIF9jb21wbGV0ZVdpdGgodCkge1xuICAgICAgICB0aGlzLl91cGRhdGVQcm9ncmVzcyh0KSwgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5jb21wbGV0ZSAmJiB0aGlzLl9wcm9ncmVzc09ic2VydmVyLmNvbXBsZXRlKCksIFxuICAgICAgICB0aGlzLl90YXNrQ29tcGxldGlvblJlc29sdmVyLnJlc29sdmUodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vdGlmaWVzIGFsbCBvYnNlcnZlcnMgdGhhdCBidW5kbGUgbG9hZGluZyBoYXMgZmFpbGVkLCB3aXRoIGEgcHJvdmlkZWRcbiAgICAgKiBgRXJyb3JgIGFzIHRoZSByZWFzb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqLyAgICBfZmFpbFdpdGgodCkge1xuICAgICAgICB0aGlzLl9sYXN0UHJvZ3Jlc3MudGFza1N0YXRlID0gXCJFcnJvclwiLCB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQgJiYgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5uZXh0KHRoaXMuX2xhc3RQcm9ncmVzcyksIFxuICAgICAgICB0aGlzLl9wcm9ncmVzc09ic2VydmVyLmVycm9yICYmIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIuZXJyb3IodCksIHRoaXMuX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIucmVqZWN0KHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBOb3RpZmllcyBhIHByb2dyZXNzIHVwZGF0ZSBvZiBsb2FkaW5nIGEgYnVuZGxlLlxuICAgICAqIEBwYXJhbSBwcm9ncmVzcyAtIFRoZSBuZXcgcHJvZ3Jlc3MuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqLyAgICBfdXBkYXRlUHJvZ3Jlc3ModCkge1xuICAgICAgICB0aGlzLl9sYXN0UHJvZ3Jlc3MgPSB0LCB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQgJiYgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5uZXh0KHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBET01FeGNlcHRpb24gZXJyb3IgY29kZSBjb25zdGFudHMuICovIGNvbnN0IEZjID0gLTE7XG5cbi8qKlxuICogVGhlIENsb3VkIEZpcmVzdG9yZSBzZXJ2aWNlIGludGVyZmFjZS5cbiAqXG4gKiBEbyBub3QgY2FsbCB0aGlzIGNvbnN0cnVjdG9yIGRpcmVjdGx5LiBJbnN0ZWFkLCB1c2Uge0BsaW5rIGdldEZpcmVzdG9yZX0uXG4gKi9cbmNsYXNzIE9jIGV4dGVuZHMgQWMge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcih0LCBlLCBuKSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIGl0J3MgYSB7QGxpbmsgRmlyZXN0b3JlfSBvciBGaXJlc3RvcmUgTGl0ZSBpbnN0YW5jZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiZmlyZXN0b3JlXCIsIHRoaXMuX3F1ZXVlID0gbmV3IGtjLCB0aGlzLl9wZXJzaXN0ZW5jZUtleSA9IFwibmFtZVwiIGluIHQgPyB0Lm5hbWUgOiBcIltERUZBVUxUXVwiO1xuICAgIH1cbiAgICBfdGVybWluYXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZmlyZXN0b3JlQ2xpZW50IHx8IFxuICAgICAgICAvLyBUaGUgY2xpZW50IG11c3QgYmUgaW5pdGlhbGl6ZWQgdG8gZW5zdXJlIHRoYXQgYWxsIHN1YnNlcXVlbnQgQVBJXG4gICAgICAgIC8vIHVzYWdlIHRocm93cyBhbiBleGNlcHRpb24uXG4gICAgICAgIFVjKHRoaXMpLCB0aGlzLl9maXJlc3RvcmVDbGllbnQudGVybWluYXRlKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemVzIGEgbmV3IGluc3RhbmNlIG9mIHtAbGluayBGaXJlc3RvcmV9IHdpdGggdGhlIHByb3ZpZGVkIHNldHRpbmdzLlxuICogQ2FuIG9ubHkgYmUgY2FsbGVkIGJlZm9yZSBhbnkgb3RoZXIgZnVuY3Rpb24sIGluY2x1ZGluZ1xuICoge0BsaW5rIGdldEZpcmVzdG9yZX0uIElmIHRoZSBjdXN0b20gc2V0dGluZ3MgYXJlIGVtcHR5LCB0aGlzIGZ1bmN0aW9uIGlzXG4gKiBlcXVpdmFsZW50IHRvIGNhbGxpbmcge0BsaW5rIGdldEZpcmVzdG9yZX0uXG4gKlxuICogQHBhcmFtIGFwcCAtIFRoZSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gd2l0aCB3aGljaCB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2Ugd2lsbFxuICogYmUgYXNzb2NpYXRlZC5cbiAqIEBwYXJhbSBzZXR0aW5ncyAtIEEgc2V0dGluZ3Mgb2JqZWN0IHRvIGNvbmZpZ3VyZSB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UuXG4gKiBAcmV0dXJucyBBIG5ld2x5IGluaXRpYWxpemVkIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlLlxuICovIGZ1bmN0aW9uIE1jKHQsIGUpIHtcbiAgICBjb25zdCBuID0gX2dldFByb3ZpZGVyKHQsIFwiZmlyZXN0b3JlXCIpO1xuICAgIGlmIChuLmlzSW5pdGlhbGl6ZWQoKSkge1xuICAgICAgICBjb25zdCB0ID0gbi5nZXRJbW1lZGlhdGUoKSwgcyA9IG4uZ2V0T3B0aW9ucygpO1xuICAgICAgICBpZiAoZGVlcEVxdWFsKHMsIGUpKSByZXR1cm4gdDtcbiAgICAgICAgdGhyb3cgbmV3IGooSy5GQUlMRURfUFJFQ09ORElUSU9OLCBcImluaXRpYWxpemVGaXJlc3RvcmUoKSBoYXMgYWxyZWFkeSBiZWVuIGNhbGxlZCB3aXRoIGRpZmZlcmVudCBvcHRpb25zLiBUbyBhdm9pZCB0aGlzIGVycm9yLCBjYWxsIGluaXRpYWxpemVGaXJlc3RvcmUoKSB3aXRoIHRoZSBzYW1lIG9wdGlvbnMgYXMgd2hlbiBpdCB3YXMgb3JpZ2luYWxseSBjYWxsZWQsIG9yIGNhbGwgZ2V0RmlyZXN0b3JlKCkgdG8gcmV0dXJuIHRoZSBhbHJlYWR5IGluaXRpYWxpemVkIGluc3RhbmNlLlwiKTtcbiAgICB9XG4gICAgaWYgKHZvaWQgMCAhPT0gZS5jYWNoZVNpemVCeXRlcyAmJiAtMSAhPT0gZS5jYWNoZVNpemVCeXRlcyAmJiBlLmNhY2hlU2l6ZUJ5dGVzIDwgMTA0ODU3NikgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcImNhY2hlU2l6ZUJ5dGVzIG11c3QgYmUgYXQgbGVhc3QgMTA0ODU3NlwiKTtcbiAgICByZXR1cm4gbi5pbml0aWFsaXplKHtcbiAgICAgICAgb3B0aW9uczogZVxuICAgIH0pO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGV4aXN0aW5nIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRoYXQgaXMgYXNzb2NpYXRlZCB3aXRoIHRoZVxuICogcHJvdmlkZWQge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9LiBJZiBubyBpbnN0YW5jZSBleGlzdHMsIGluaXRpYWxpemVzIGEgbmV3XG4gKiBpbnN0YW5jZSB3aXRoIGRlZmF1bHQgc2V0dGluZ3MuXG4gKlxuICogQHBhcmFtIGFwcCAtIFRoZSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gaW5zdGFuY2UgdGhhdCB0aGUgcmV0dXJuZWQge0BsaW5rIEZpcmVzdG9yZX1cbiAqIGluc3RhbmNlIGlzIGFzc29jaWF0ZWQgd2l0aC5cbiAqIEByZXR1cm5zIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSBvZiB0aGUgcHJvdmlkZWQgYXBwLlxuICovIGZ1bmN0aW9uIExjKGUgPSBnZXRBcHAoKSkge1xuICAgIHJldHVybiBfZ2V0UHJvdmlkZXIoZSwgXCJmaXJlc3RvcmVcIikuZ2V0SW1tZWRpYXRlKCk7XG59XG5cbi8qKlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gQmModCkge1xuICAgIHJldHVybiB0Ll9maXJlc3RvcmVDbGllbnQgfHwgVWModCksIHQuX2ZpcmVzdG9yZUNsaWVudC52ZXJpZnlOb3RUZXJtaW5hdGVkKCksIHQuX2ZpcmVzdG9yZUNsaWVudDtcbn1cblxuZnVuY3Rpb24gVWModCkge1xuICAgIHZhciBlO1xuICAgIGNvbnN0IG4gPSB0Ll9mcmVlemVTZXR0aW5ncygpLCBzID0gZnVuY3Rpb24odCwgZSwgbiwgcykge1xuICAgICAgICByZXR1cm4gbmV3IGZjKHQsIGUsIG4sIHMuaG9zdCwgcy5zc2wsIHMuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZywgcy5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcsIHMudXNlRmV0Y2hTdHJlYW1zKTtcbiAgICB9KHQuX2RhdGFiYXNlSWQsIChudWxsID09PSAoZSA9IHQuX2FwcCkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5vcHRpb25zLmFwcElkKSB8fCBcIlwiLCB0Ll9wZXJzaXN0ZW5jZUtleSwgbik7XG4gICAgdC5fZmlyZXN0b3JlQ2xpZW50ID0gbmV3IFdhKHQuX2F1dGhDcmVkZW50aWFscywgdC5fYXBwQ2hlY2tDcmVkZW50aWFscywgdC5fcXVldWUsIHMpO1xufVxuXG4vKipcbiAqIEF0dGVtcHRzIHRvIGVuYWJsZSBwZXJzaXN0ZW50IHN0b3JhZ2UsIGlmIHBvc3NpYmxlLlxuICpcbiAqIE11c3QgYmUgY2FsbGVkIGJlZm9yZSBhbnkgb3RoZXIgZnVuY3Rpb25zIChvdGhlciB0aGFuXG4gKiB7QGxpbmsgaW5pdGlhbGl6ZUZpcmVzdG9yZX0sIHtAbGluayBnZXRGaXJlc3RvcmV9IG9yXG4gKiB7QGxpbmsgY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZX0uXG4gKlxuICogSWYgdGhpcyBmYWlscywgYGVuYWJsZUluZGV4ZWREYlBlcnNpc3RlbmNlKClgIHdpbGwgcmVqZWN0IHRoZSBwcm9taXNlIGl0XG4gKiByZXR1cm5zLiBOb3RlIHRoYXQgZXZlbiBhZnRlciB0aGlzIGZhaWx1cmUsIHRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB3aWxsXG4gKiByZW1haW4gdXNhYmxlLCBob3dldmVyIG9mZmxpbmUgcGVyc2lzdGVuY2Ugd2lsbCBiZSBkaXNhYmxlZC5cbiAqXG4gKiBUaGVyZSBhcmUgc2V2ZXJhbCByZWFzb25zIHdoeSB0aGlzIGNhbiBmYWlsLCB3aGljaCBjYW4gYmUgaWRlbnRpZmllZCBieVxuICogdGhlIGBjb2RlYCBvbiB0aGUgZXJyb3IuXG4gKlxuICogICAqIGZhaWxlZC1wcmVjb25kaXRpb246IFRoZSBhcHAgaXMgYWxyZWFkeSBvcGVuIGluIGFub3RoZXIgYnJvd3NlciB0YWIuXG4gKiAgICogdW5pbXBsZW1lbnRlZDogVGhlIGJyb3dzZXIgaXMgaW5jb21wYXRpYmxlIHdpdGggdGhlIG9mZmxpbmVcbiAqICAgICBwZXJzaXN0ZW5jZSBpbXBsZW1lbnRhdGlvbi5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRvIGVuYWJsZSBwZXJzaXN0ZW5jZSBmb3IuXG4gKiBAcGFyYW0gcGVyc2lzdGVuY2VTZXR0aW5ncyAtIE9wdGlvbmFsIHNldHRpbmdzIG9iamVjdCB0byBjb25maWd1cmVcbiAqIHBlcnNpc3RlbmNlLlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCByZXByZXNlbnRzIHN1Y2Nlc3NmdWxseSBlbmFibGluZyBwZXJzaXN0ZW50IHN0b3JhZ2UuXG4gKi8gZnVuY3Rpb24gcWModCwgZSkge1xuICAgIFhjKHQgPSBUYyh0LCBPYykpO1xuICAgIGNvbnN0IG4gPSBCYyh0KSwgcyA9IHQuX2ZyZWV6ZVNldHRpbmdzKCksIGkgPSBuZXcgQmE7XG4gICAgcmV0dXJuIGpjKG4sIGksIG5ldyBNYShpLCBzLmNhY2hlU2l6ZUJ5dGVzLCBudWxsID09IGUgPyB2b2lkIDAgOiBlLmZvcmNlT3duZXJzaGlwKSk7XG59XG5cbi8qKlxuICogQXR0ZW1wdHMgdG8gZW5hYmxlIG11bHRpLXRhYiBwZXJzaXN0ZW50IHN0b3JhZ2UsIGlmIHBvc3NpYmxlLiBJZiBlbmFibGVkXG4gKiBhY3Jvc3MgYWxsIHRhYnMsIGFsbCBvcGVyYXRpb25zIHNoYXJlIGFjY2VzcyB0byBsb2NhbCBwZXJzaXN0ZW5jZSwgaW5jbHVkaW5nXG4gKiBzaGFyZWQgZXhlY3V0aW9uIG9mIHF1ZXJpZXMgYW5kIGxhdGVuY3ktY29tcGVuc2F0ZWQgbG9jYWwgZG9jdW1lbnQgdXBkYXRlc1xuICogYWNyb3NzIGFsbCBjb25uZWN0ZWQgaW5zdGFuY2VzLlxuICpcbiAqIElmIHRoaXMgZmFpbHMsIGBlbmFibGVNdWx0aVRhYkluZGV4ZWREYlBlcnNpc3RlbmNlKClgIHdpbGwgcmVqZWN0IHRoZSBwcm9taXNlXG4gKiBpdCByZXR1cm5zLiBOb3RlIHRoYXQgZXZlbiBhZnRlciB0aGlzIGZhaWx1cmUsIHRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB3aWxsXG4gKiByZW1haW4gdXNhYmxlLCBob3dldmVyIG9mZmxpbmUgcGVyc2lzdGVuY2Ugd2lsbCBiZSBkaXNhYmxlZC5cbiAqXG4gKiBUaGVyZSBhcmUgc2V2ZXJhbCByZWFzb25zIHdoeSB0aGlzIGNhbiBmYWlsLCB3aGljaCBjYW4gYmUgaWRlbnRpZmllZCBieVxuICogdGhlIGBjb2RlYCBvbiB0aGUgZXJyb3IuXG4gKlxuICogICAqIGZhaWxlZC1wcmVjb25kaXRpb246IFRoZSBhcHAgaXMgYWxyZWFkeSBvcGVuIGluIGFub3RoZXIgYnJvd3NlciB0YWIgYW5kXG4gKiAgICAgbXVsdGktdGFiIGlzIG5vdCBlbmFibGVkLlxuICogICAqIHVuaW1wbGVtZW50ZWQ6IFRoZSBicm93c2VyIGlzIGluY29tcGF0aWJsZSB3aXRoIHRoZSBvZmZsaW5lXG4gKiAgICAgcGVyc2lzdGVuY2UgaW1wbGVtZW50YXRpb24uXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB0byBlbmFibGUgcGVyc2lzdGVuY2UgZm9yLlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCByZXByZXNlbnRzIHN1Y2Nlc3NmdWxseSBlbmFibGluZyBwZXJzaXN0ZW50XG4gKiBzdG9yYWdlLlxuICovIGZ1bmN0aW9uIEtjKHQpIHtcbiAgICBYYyh0ID0gVGModCwgT2MpKTtcbiAgICBjb25zdCBlID0gQmModCksIG4gPSB0Ll9mcmVlemVTZXR0aW5ncygpLCBzID0gbmV3IEJhO1xuICAgIHJldHVybiBqYyhlLCBzLCBuZXcgTGEocywgbi5jYWNoZVNpemVCeXRlcykpO1xufVxuXG4vKipcbiAqIFJlZ2lzdGVycyBib3RoIHRoZSBgT2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyYCBhbmQgYE9ubGluZUNvbXBvbmVudFByb3ZpZGVyYC5cbiAqIElmIHRoZSBvcGVyYXRpb24gZmFpbHMgd2l0aCBhIHJlY292ZXJhYmxlIGVycm9yIChzZWVcbiAqIGBjYW5SZWNvdmVyRnJvbUluZGV4ZWREYkVycm9yKClgIGJlbG93KSwgdGhlIHJldHVybmVkIFByb21pc2UgaXMgcmVqZWN0ZWRcbiAqIGJ1dCB0aGUgY2xpZW50IHJlbWFpbnMgdXNhYmxlLlxuICovIGZ1bmN0aW9uIGpjKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gbmV3IFE7XG4gICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlKChhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBHYSh0LCBuKSwgYXdhaXQgemEodCwgZSksIHMucmVzb2x2ZSgpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICBpZiAoIVxuICAgICAgICAgICAgLyoqXG4gKiBEZWNpZGVzIHdoZXRoZXIgdGhlIHByb3ZpZGVkIGVycm9yIGFsbG93cyB1cyB0byBncmFjZWZ1bGx5IGRpc2FibGVcbiAqIHBlcnNpc3RlbmNlIChhcyBvcHBvc2VkIHRvIGNyYXNoaW5nIHRoZSBjbGllbnQpLlxuICovXG4gICAgICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgaWYgKFwiRmlyZWJhc2VFcnJvclwiID09PSB0Lm5hbWUpIHJldHVybiB0LmNvZGUgPT09IEsuRkFJTEVEX1BSRUNPTkRJVElPTiB8fCB0LmNvZGUgPT09IEsuVU5JTVBMRU1FTlRFRDtcbiAgICAgICAgICAgICAgICBpZiAoXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgRE9NRXhjZXB0aW9uICYmIHQgaW5zdGFuY2VvZiBET01FeGNlcHRpb24pIFxuICAgICAgICAgICAgICAgIC8vIFRoZXJlIGFyZSBhIGZldyBrbm93biBjaXJjdW1zdGFuY2VzIHdoZXJlIHdlIGNhbiBvcGVuIEluZGV4ZWREYiBidXRcbiAgICAgICAgICAgICAgICAvLyB0cnlpbmcgdG8gcmVhZC93cml0ZSB3aWxsIGZhaWwgKGUuZy4gcXVvdGEgZXhjZWVkZWQpLiBGb3JcbiAgICAgICAgICAgICAgICAvLyB3ZWxsLXVuZGVyc3Rvb2QgY2FzZXMsIHdlIGF0dGVtcHQgdG8gZGV0ZWN0IHRoZXNlIGFuZCB0aGVuIGdyYWNlZnVsbHlcbiAgICAgICAgICAgICAgICAvLyBmYWxsIGJhY2sgdG8gbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICAgICAgICAgIC8vIE5PVEU6IFJhdGhlciB0aGFuIGNvbnRpbnVlIHRvIGFkZCB0byB0aGlzIGxpc3QsIHdlIGNvdWxkIGRlY2lkZSB0b1xuICAgICAgICAgICAgICAgIC8vIGFsd2F5cyBmYWxsIGJhY2ssIHdpdGggdGhlIHJpc2sgdGhhdCB3ZSBtaWdodCBhY2NpZGVudGFsbHkgaGlkZSBlcnJvcnNcbiAgICAgICAgICAgICAgICAvLyByZXByZXNlbnRpbmcgYWN0dWFsIFNESyBidWdzLlxuICAgICAgICAgICAgICAgIC8vIFdoZW4gdGhlIGJyb3dzZXIgaXMgb3V0IG9mIHF1b3RhIHdlIGNvdWxkIGdldCBlaXRoZXIgcXVvdGEgZXhjZWVkZWRcbiAgICAgICAgICAgICAgICAvLyBvciBhbiBhYm9ydGVkIGVycm9yIGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSBlcnJvciBoYXBwZW5lZCBkdXJpbmdcbiAgICAgICAgICAgICAgICAvLyBzY2hlbWEgbWlncmF0aW9uLlxuICAgICAgICAgICAgICAgIHJldHVybiAyMiA9PT0gdC5jb2RlIHx8IDIwID09PSB0LmNvZGUgfHwgXG4gICAgICAgICAgICAgICAgLy8gRmlyZWZveCBQcml2YXRlIEJyb3dzaW5nIG1vZGUgZGlzYWJsZXMgSW5kZXhlZERiIGFuZCByZXR1cm5zXG4gICAgICAgICAgICAgICAgLy8gSU5WQUxJRF9TVEFURSBmb3IgYW55IHVzYWdlLlxuICAgICAgICAgICAgICAgIDExID09PSB0LmNvZGU7XG4gICAgICAgICAgICAgICAgcmV0dXJuICEwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBDbGVhcnMgdGhlIHBlcnNpc3RlbnQgc3RvcmFnZS4gVGhpcyBpbmNsdWRlcyBwZW5kaW5nIHdyaXRlcyBhbmQgY2FjaGVkXG4gKiBkb2N1bWVudHMuXG4gKlxuICogTXVzdCBiZSBjYWxsZWQgd2hpbGUgdGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIGlzIG5vdCBzdGFydGVkIChhZnRlciB0aGUgYXBwIGlzXG4gKiB0ZXJtaW5hdGVkIG9yIHdoZW4gdGhlIGFwcCBpcyBmaXJzdCBpbml0aWFsaXplZCkuIE9uIHN0YXJ0dXAsIHRoaXMgZnVuY3Rpb25cbiAqIG11c3QgYmUgY2FsbGVkIGJlZm9yZSBvdGhlciBmdW5jdGlvbnMgKG90aGVyIHRoYW4ge0BsaW5rXG4gKiBpbml0aWFsaXplRmlyZXN0b3JlfSBvciB7QGxpbmsgZ2V0RmlyZXN0b3JlfSkpLiBJZiB0aGUge0BsaW5rIEZpcmVzdG9yZX1cbiAqIGluc3RhbmNlIGlzIHN0aWxsIHJ1bm5pbmcsIHRoZSBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQgd2l0aCB0aGUgZXJyb3IgY29kZVxuICogb2YgYGZhaWxlZC1wcmVjb25kaXRpb25gLlxuICpcbiAqIE5vdGU6IGBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlKClgIGlzIHByaW1hcmlseSBpbnRlbmRlZCB0byBoZWxwIHdyaXRlXG4gKiByZWxpYWJsZSB0ZXN0cyB0aGF0IHVzZSBDbG91ZCBGaXJlc3RvcmUuIEl0IHVzZXMgYW4gZWZmaWNpZW50IG1lY2hhbmlzbSBmb3JcbiAqIGRyb3BwaW5nIGV4aXN0aW5nIGRhdGEgYnV0IGRvZXMgbm90IGF0dGVtcHQgdG8gc2VjdXJlbHkgb3ZlcndyaXRlIG9yXG4gKiBvdGhlcndpc2UgbWFrZSBjYWNoZWQgZGF0YSB1bnJlY292ZXJhYmxlLiBGb3IgYXBwbGljYXRpb25zIHRoYXQgYXJlIHNlbnNpdGl2ZVxuICogdG8gdGhlIGRpc2Nsb3N1cmUgb2YgY2FjaGVkIGRhdGEgaW4gYmV0d2VlbiB1c2VyIHNlc3Npb25zLCB3ZSBzdHJvbmdseVxuICogcmVjb21tZW5kIG5vdCBlbmFibGluZyBwZXJzaXN0ZW5jZSBhdCBhbGwuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB0byBjbGVhciBwZXJzaXN0ZW5jZSBmb3IuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IGlzIHJlc29sdmVkIHdoZW4gdGhlIHBlcnNpc3RlbnQgc3RvcmFnZSBpc1xuICogY2xlYXJlZC4gT3RoZXJ3aXNlLCB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCB3aXRoIGFuIGVycm9yLlxuICovICh0KSkgdGhyb3cgdDtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkVycm9yIGVuYWJsaW5nIG9mZmxpbmUgcGVyc2lzdGVuY2UuIEZhbGxpbmcgYmFjayB0byBwZXJzaXN0ZW5jZSBkaXNhYmxlZDogXCIgKyB0KSwgXG4gICAgICAgICAgICBzLnJlamVjdCh0KTtcbiAgICAgICAgfVxuICAgIH0pKS50aGVuKCgoKSA9PiBzLnByb21pc2UpKTtcbn1cblxuZnVuY3Rpb24gUWModCkge1xuICAgIGlmICh0Ll9pbml0aWFsaXplZCAmJiAhdC5fdGVybWluYXRlZCkgdGhyb3cgbmV3IGooSy5GQUlMRURfUFJFQ09ORElUSU9OLCBcIlBlcnNpc3RlbmNlIGNhbiBvbmx5IGJlIGNsZWFyZWQgYmVmb3JlIGEgRmlyZXN0b3JlIGluc3RhbmNlIGlzIGluaXRpYWxpemVkIG9yIGFmdGVyIGl0IGlzIHRlcm1pbmF0ZWQuXCIpO1xuICAgIGNvbnN0IGUgPSBuZXcgUTtcbiAgICByZXR1cm4gdC5fcXVldWUuZW5xdWV1ZUFuZEZvcmdldEV2ZW5XaGlsZVJlc3RyaWN0ZWQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IGFzeW5jIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIUhzLmJ0KCkpIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdCArIFwibWFpblwiO1xuICAgICAgICAgICAgICAgIGF3YWl0IEhzLmRlbGV0ZShlKTtcbiAgICAgICAgICAgIH0ob3IodC5fZGF0YWJhc2VJZCwgdC5fcGVyc2lzdGVuY2VLZXkpKSwgZS5yZXNvbHZlKCk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIGUucmVqZWN0KHQpO1xuICAgICAgICB9XG4gICAgfSkpLCBlLnByb21pc2U7XG59XG5cbi8qKlxuICogV2FpdHMgdW50aWwgYWxsIGN1cnJlbnRseSBwZW5kaW5nIHdyaXRlcyBmb3IgdGhlIGFjdGl2ZSB1c2VyIGhhdmUgYmVlblxuICogYWNrbm93bGVkZ2VkIGJ5IHRoZSBiYWNrZW5kLlxuICpcbiAqIFRoZSByZXR1cm5lZCBwcm9taXNlIHJlc29sdmVzIGltbWVkaWF0ZWx5IGlmIHRoZXJlIGFyZSBubyBvdXRzdGFuZGluZyB3cml0ZXMuXG4gKiBPdGhlcndpc2UsIHRoZSBwcm9taXNlIHdhaXRzIGZvciBhbGwgcHJldmlvdXNseSBpc3N1ZWQgd3JpdGVzIChpbmNsdWRpbmdcbiAqIHRob3NlIHdyaXR0ZW4gaW4gYSBwcmV2aW91cyBhcHAgc2Vzc2lvbiksIGJ1dCBpdCBkb2VzIG5vdCB3YWl0IGZvciB3cml0ZXNcbiAqIHRoYXQgd2VyZSBhZGRlZCBhZnRlciB0aGUgZnVuY3Rpb24gaXMgY2FsbGVkLiBJZiB5b3Ugd2FudCB0byB3YWl0IGZvclxuICogYWRkaXRpb25hbCB3cml0ZXMsIGNhbGwgYHdhaXRGb3JQZW5kaW5nV3JpdGVzKClgIGFnYWluLlxuICpcbiAqIEFueSBvdXRzdGFuZGluZyBgd2FpdEZvclBlbmRpbmdXcml0ZXMoKWAgcHJvbWlzZXMgYXJlIHJlamVjdGVkIGR1cmluZyB1c2VyXG4gKiBjaGFuZ2VzLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHdoaWNoIHJlc29sdmVzIHdoZW4gYWxsIGN1cnJlbnRseSBwZW5kaW5nIHdyaXRlcyBoYXZlIGJlZW5cbiAqIGFja25vd2xlZGdlZCBieSB0aGUgYmFja2VuZC5cbiAqLyBmdW5jdGlvbiBXYyh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBRO1xuICAgICAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IHdhKGF3YWl0IHRjKHQpLCBlKSkpLCBlLnByb21pc2U7XG4gICAgfShCYyh0ID0gVGModCwgT2MpKSk7XG59XG5cbi8qKlxuICogUmUtZW5hYmxlcyB1c2Ugb2YgdGhlIG5ldHdvcmsgZm9yIHRoaXMge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgYWZ0ZXIgYSBwcmlvclxuICogY2FsbCB0byB7QGxpbmsgZGlzYWJsZU5ldHdvcmt9LlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgaXMgcmVzb2x2ZWQgb25jZSB0aGUgbmV0d29yayBoYXMgYmVlbiBlbmFibGVkLlxuICovIGZ1bmN0aW9uIEdjKHQpIHtcbiAgICByZXR1cm4gbmMoQmModCA9IFRjKHQsIE9jKSkpO1xufVxuXG4vKipcbiAqIERpc2FibGVzIG5ldHdvcmsgdXNhZ2UgZm9yIHRoaXMgaW5zdGFuY2UuIEl0IGNhbiBiZSByZS1lbmFibGVkIHZpYSB7QGxpbmtcbiAqIGVuYWJsZU5ldHdvcmt9LiBXaGlsZSB0aGUgbmV0d29yayBpcyBkaXNhYmxlZCwgYW55IHNuYXBzaG90IGxpc3RlbmVycyxcbiAqIGBnZXREb2MoKWAgb3IgYGdldERvY3MoKWAgY2FsbHMgd2lsbCByZXR1cm4gcmVzdWx0cyBmcm9tIGNhY2hlLCBhbmQgYW55IHdyaXRlXG4gKiBvcGVyYXRpb25zIHdpbGwgYmUgcXVldWVkIHVudGlsIHRoZSBuZXR3b3JrIGlzIHJlc3RvcmVkLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgaXMgcmVzb2x2ZWQgb25jZSB0aGUgbmV0d29yayBoYXMgYmVlbiBkaXNhYmxlZC5cbiAqLyBmdW5jdGlvbiB6Yyh0KSB7XG4gICAgcmV0dXJuIHNjKEJjKHQgPSBUYyh0LCBPYykpKTtcbn1cblxuLyoqXG4gKiBUZXJtaW5hdGVzIHRoZSBwcm92aWRlZCB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZS5cbiAqXG4gKiBBZnRlciBjYWxsaW5nIGB0ZXJtaW5hdGUoKWAgb25seSB0aGUgYGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgZnVuY3Rpb25cbiAqIG1heSBiZSB1c2VkLiBBbnkgb3RoZXIgZnVuY3Rpb24gd2lsbCB0aHJvdyBhIGBGaXJlc3RvcmVFcnJvcmAuXG4gKlxuICogVG8gcmVzdGFydCBhZnRlciB0ZXJtaW5hdGlvbiwgY3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIEZpcmViYXNlRmlyZXN0b3JlIHdpdGhcbiAqIHtAbGluayBnZXRGaXJlc3RvcmV9LlxuICpcbiAqIFRlcm1pbmF0aW9uIGRvZXMgbm90IGNhbmNlbCBhbnkgcGVuZGluZyB3cml0ZXMsIGFuZCBhbnkgcHJvbWlzZXMgdGhhdCBhcmVcbiAqIGF3YWl0aW5nIGEgcmVzcG9uc2UgZnJvbSB0aGUgc2VydmVyIHdpbGwgbm90IGJlIHJlc29sdmVkLiBJZiB5b3UgaGF2ZVxuICogcGVyc2lzdGVuY2UgZW5hYmxlZCwgdGhlIG5leHQgdGltZSB5b3Ugc3RhcnQgdGhpcyBpbnN0YW5jZSwgaXQgd2lsbCByZXN1bWVcbiAqIHNlbmRpbmcgdGhlc2Ugd3JpdGVzIHRvIHRoZSBzZXJ2ZXIuXG4gKlxuICogTm90ZTogVW5kZXIgbm9ybWFsIGNpcmN1bXN0YW5jZXMsIGNhbGxpbmcgYHRlcm1pbmF0ZSgpYCBpcyBub3QgcmVxdWlyZWQuIFRoaXNcbiAqIGZ1bmN0aW9uIGlzIHVzZWZ1bCBvbmx5IHdoZW4geW91IHdhbnQgdG8gZm9yY2UgdGhpcyBpbnN0YW5jZSB0byByZWxlYXNlIGFsbFxuICogb2YgaXRzIHJlc291cmNlcyBvciBpbiBjb21iaW5hdGlvbiB3aXRoIGBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlKClgIHRvXG4gKiBlbnN1cmUgdGhhdCBhbGwgbG9jYWwgc3RhdGUgaXMgZGVzdHJveWVkIGJldHdlZW4gdGVzdCBydW5zLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgaW5zdGFuY2UgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5XG4gKiB0ZXJtaW5hdGVkLlxuICovIGZ1bmN0aW9uIEhjKHQpIHtcbiAgICByZXR1cm4gX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSh0LmFwcCwgXCJmaXJlc3RvcmVcIiksIHQuX2RlbGV0ZSgpO1xufVxuXG4vKipcbiAqIExvYWRzIGEgRmlyZXN0b3JlIGJ1bmRsZSBpbnRvIHRoZSBsb2NhbCBjYWNoZS5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRvIGxvYWQgYnVuZGxlcyBmb3IgZm9yLlxuICogQHBhcmFtIGJ1bmRsZURhdGEgLSBBbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBidW5kbGUgdG8gYmUgbG9hZGVkLiBWYWxpZCBvYmplY3RzIGFyZVxuICogICBgQXJyYXlCdWZmZXJgLCBgUmVhZGFibGVTdHJlYW08VWludDhBcnJheT5gIG9yIGBzdHJpbmdgLlxuICpcbiAqIEByZXR1cm5zXG4gKiAgIEEgYExvYWRCdW5kbGVUYXNrYCBvYmplY3QsIHdoaWNoIG5vdGlmaWVzIGNhbGxlcnMgd2l0aCBwcm9ncmVzcyB1cGRhdGVzLCBhbmQgY29tcGxldGlvblxuICogICBvciBlcnJvciBldmVudHMuIEl0IGNhbiBiZSB1c2VkIGFzIGEgYFByb21pc2U8TG9hZEJ1bmRsZVRhc2tQcm9ncmVzcz5gLlxuICovIGZ1bmN0aW9uIEpjKHQsIGUpIHtcbiAgICBjb25zdCBuID0gQmModCA9IFRjKHQsIE9jKSksIHMgPSBuZXcgJGM7XG4gICAgcmV0dXJuIGhjKG4sIHQuX2RhdGFiYXNlSWQsIGUsIHMpLCBzO1xufVxuXG4vKipcbiAqIFJlYWRzIGEgRmlyZXN0b3JlIHtAbGluayBRdWVyeX0gZnJvbSBsb2NhbCBjYWNoZSwgaWRlbnRpZmllZCBieSB0aGUgZ2l2ZW4gbmFtZS5cbiAqXG4gKiBUaGUgbmFtZWQgcXVlcmllcyBhcmUgcGFja2FnZWQgIGludG8gYnVuZGxlcyBvbiB0aGUgc2VydmVyIHNpZGUgKGFsb25nXG4gKiB3aXRoIHJlc3VsdGluZyBkb2N1bWVudHMpLCBhbmQgbG9hZGVkIHRvIGxvY2FsIGNhY2hlIHVzaW5nIGBsb2FkQnVuZGxlYC4gT25jZSBpbiBsb2NhbFxuICogY2FjaGUsIHVzZSB0aGlzIG1ldGhvZCB0byBleHRyYWN0IGEge0BsaW5rIFF1ZXJ5fSBieSBuYW1lLlxuICovIGZ1bmN0aW9uIFljKHQsIGUpIHtcbiAgICByZXR1cm4gbGMoQmModCA9IFRjKHQsIE9jKSksIGUpLnRoZW4oKGUgPT4gZSA/IG5ldyBiYyh0LCBudWxsLCBlLnF1ZXJ5KSA6IG51bGwpKTtcbn1cblxuZnVuY3Rpb24gWGModCkge1xuICAgIGlmICh0Ll9pbml0aWFsaXplZCB8fCB0Ll90ZXJtaW5hdGVkKSB0aHJvdyBuZXcgaihLLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiRmlyZXN0b3JlIGhhcyBhbHJlYWR5IGJlZW4gc3RhcnRlZCBhbmQgcGVyc2lzdGVuY2UgY2FuIG5vIGxvbmdlciBiZSBlbmFibGVkLiBZb3UgY2FuIG9ubHkgZW5hYmxlIHBlcnNpc3RlbmNlIGJlZm9yZSBjYWxsaW5nIGFueSBvdGhlciBtZXRob2RzIG9uIGEgRmlyZXN0b3JlIG9iamVjdC5cIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGBGaWVsZFBhdGhgIHJlZmVycyB0byBhIGZpZWxkIGluIGEgZG9jdW1lbnQuIFRoZSBwYXRoIG1heSBjb25zaXN0IG9mIGFcbiAqIHNpbmdsZSBmaWVsZCBuYW1lIChyZWZlcnJpbmcgdG8gYSB0b3AtbGV2ZWwgZmllbGQgaW4gdGhlIGRvY3VtZW50KSwgb3IgYVxuICogbGlzdCBvZiBmaWVsZCBuYW1lcyAocmVmZXJyaW5nIHRvIGEgbmVzdGVkIGZpZWxkIGluIHRoZSBkb2N1bWVudCkuXG4gKlxuICogQ3JlYXRlIGEgYEZpZWxkUGF0aGAgYnkgcHJvdmlkaW5nIGZpZWxkIG5hbWVzLiBJZiBtb3JlIHRoYW4gb25lIGZpZWxkXG4gKiBuYW1lIGlzIHByb3ZpZGVkLCB0aGUgcGF0aCB3aWxsIHBvaW50IHRvIGEgbmVzdGVkIGZpZWxkIGluIGEgZG9jdW1lbnQuXG4gKi9cbmNsYXNzIFpjIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgYEZpZWxkUGF0aGAgZnJvbSB0aGUgcHJvdmlkZWQgZmllbGQgbmFtZXMuIElmIG1vcmUgdGhhbiBvbmUgZmllbGRcbiAgICAgKiBuYW1lIGlzIHByb3ZpZGVkLCB0aGUgcGF0aCB3aWxsIHBvaW50IHRvIGEgbmVzdGVkIGZpZWxkIGluIGEgZG9jdW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmllbGROYW1lcyAtIEEgbGlzdCBvZiBmaWVsZCBuYW1lcy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvciguLi50KSB7XG4gICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdC5sZW5ndGg7ICsrZSkgaWYgKDAgPT09IHRbZV0ubGVuZ3RoKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBmaWVsZCBuYW1lIGF0IGFyZ3VtZW50ICQoaSArIDEpLiBGaWVsZCBuYW1lcyBtdXN0IG5vdCBiZSBlbXB0eS5cIik7XG4gICAgICAgIHRoaXMuX2ludGVybmFsUGF0aCA9IG5ldyBfdCh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYEZpZWxkUGF0aGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgRmllbGRQYXRoYCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBGaWVsZFBhdGhgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faW50ZXJuYWxQYXRoLmlzRXF1YWwodC5faW50ZXJuYWxQYXRoKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHNwZWNpYWwgc2VudGluZWwgYEZpZWxkUGF0aGAgdG8gcmVmZXIgdG8gdGhlIElEIG9mIGEgZG9jdW1lbnQuXG4gKiBJdCBjYW4gYmUgdXNlZCBpbiBxdWVyaWVzIHRvIHNvcnQgb3IgZmlsdGVyIGJ5IHRoZSBkb2N1bWVudCBJRC5cbiAqLyBmdW5jdGlvbiB0dSgpIHtcbiAgICByZXR1cm4gbmV3IFpjKFwiX19uYW1lX19cIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGltbXV0YWJsZSBvYmplY3QgcmVwcmVzZW50aW5nIGFuIGFycmF5IG9mIGJ5dGVzLlxuICovIGNsYXNzIGV1IHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5fYnl0ZVN0cmluZyA9IHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgYEJ5dGVzYCBvYmplY3QgZnJvbSB0aGUgZ2l2ZW4gQmFzZTY0IHN0cmluZywgY29udmVydGluZyBpdCB0b1xuICAgICAqIGJ5dGVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGJhc2U2NCAtIFRoZSBCYXNlNjQgc3RyaW5nIHVzZWQgdG8gY3JlYXRlIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKi8gICAgc3RhdGljIGZyb21CYXNlNjRTdHJpbmcodCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBldSh5dC5mcm9tQmFzZTY0U3RyaW5nKHQpKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIkZhaWxlZCB0byBjb25zdHJ1Y3QgZGF0YSBmcm9tIEJhc2U2NCBzdHJpbmc6IFwiICsgdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBgQnl0ZXNgIG9iamVjdCBmcm9tIHRoZSBnaXZlbiBVaW50OEFycmF5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGFycmF5IC0gVGhlIFVpbnQ4QXJyYXkgdXNlZCB0byBjcmVhdGUgdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICBzdGF0aWMgZnJvbVVpbnQ4QXJyYXkodCkge1xuICAgICAgICByZXR1cm4gbmV3IGV1KHl0LmZyb21VaW50OEFycmF5KHQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdW5kZXJseWluZyBieXRlcyBhcyBhIEJhc2U2NC1lbmNvZGVkIHN0cmluZy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBCYXNlNjQtZW5jb2RlZCBzdHJpbmcgY3JlYXRlZCBmcm9tIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKi8gICAgdG9CYXNlNjQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ieXRlU3RyaW5nLnRvQmFzZTY0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHVuZGVybHlpbmcgYnl0ZXMgaW4gYSBuZXcgYFVpbnQ4QXJyYXlgLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIFVpbnQ4QXJyYXkgY3JlYXRlZCBmcm9tIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKi8gICAgdG9VaW50OEFycmF5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnl0ZVN0cmluZy50b1VpbnQ4QXJyYXkoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgYEJ5dGVzYCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgYEJ5dGVzYCBvYmplY3QuXG4gICAgICovICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gXCJCeXRlcyhiYXNlNjQ6IFwiICsgdGhpcy50b0Jhc2U2NCgpICsgXCIpXCI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGBCeXRlc2Agb2JqZWN0IGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgYEJ5dGVzYCBvYmplY3QgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhpcyBgQnl0ZXNgIG9iamVjdCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqLyAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J5dGVTdHJpbmcuaXNFcXVhbCh0Ll9ieXRlU3RyaW5nKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFNlbnRpbmVsIHZhbHVlcyB0aGF0IGNhbiBiZSB1c2VkIHdoZW4gd3JpdGluZyBkb2N1bWVudCBmaWVsZHMgd2l0aCBgc2V0KClgXG4gKiBvciBgdXBkYXRlKClgLlxuICovIGNsYXNzIG51IHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gX21ldGhvZE5hbWUgLSBUaGUgcHVibGljIEFQSSBlbmRwb2ludCB0aGF0IHJldHVybnMgdGhpcyBjbGFzcy5cbiAgICAgKiBAaGlkZWNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLl9tZXRob2ROYW1lID0gdDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGltbXV0YWJsZSBvYmplY3QgcmVwcmVzZW50aW5nIGEgZ2VvZ3JhcGhpYyBsb2NhdGlvbiBpbiBGaXJlc3RvcmUuIFRoZVxuICogbG9jYXRpb24gaXMgcmVwcmVzZW50ZWQgYXMgbGF0aXR1ZGUvbG9uZ2l0dWRlIHBhaXIuXG4gKlxuICogTGF0aXR1ZGUgdmFsdWVzIGFyZSBpbiB0aGUgcmFuZ2Ugb2YgWy05MCwgOTBdLlxuICogTG9uZ2l0dWRlIHZhbHVlcyBhcmUgaW4gdGhlIHJhbmdlIG9mIFstMTgwLCAxODBdLlxuICovIGNsYXNzIHN1IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGltbXV0YWJsZSBgR2VvUG9pbnRgIG9iamVjdCB3aXRoIHRoZSBwcm92aWRlZCBsYXRpdHVkZSBhbmRcbiAgICAgKiBsb25naXR1ZGUgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBsYXRpdHVkZSAtIFRoZSBsYXRpdHVkZSBhcyBudW1iZXIgYmV0d2VlbiAtOTAgYW5kIDkwLlxuICAgICAqIEBwYXJhbSBsb25naXR1ZGUgLSBUaGUgbG9uZ2l0dWRlIGFzIG51bWJlciBiZXR3ZWVuIC0xODAgYW5kIDE4MC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIGlmICghaXNGaW5pdGUodCkgfHwgdCA8IC05MCB8fCB0ID4gOTApIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJMYXRpdHVkZSBtdXN0IGJlIGEgbnVtYmVyIGJldHdlZW4gLTkwIGFuZCA5MCwgYnV0IHdhczogXCIgKyB0KTtcbiAgICAgICAgaWYgKCFpc0Zpbml0ZShlKSB8fCBlIDwgLTE4MCB8fCBlID4gMTgwKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiTG9uZ2l0dWRlIG11c3QgYmUgYSBudW1iZXIgYmV0d2VlbiAtMTgwIGFuZCAxODAsIGJ1dCB3YXM6IFwiICsgZSk7XG4gICAgICAgIHRoaXMuX2xhdCA9IHQsIHRoaXMuX2xvbmcgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbGF0aXR1ZGUgb2YgdGhpcyBgR2VvUG9pbnRgIGluc3RhbmNlLlxuICAgICAqLyAgICBnZXQgbGF0aXR1ZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sYXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBsb25naXR1ZGUgb2YgdGhpcyBgR2VvUG9pbnRgIGluc3RhbmNlLlxuICAgICAqLyAgICBnZXQgbG9uZ2l0dWRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbG9uZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYEdlb1BvaW50YCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBHZW9Qb2ludGAgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhpcyBgR2VvUG9pbnRgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGF0ID09PSB0Ll9sYXQgJiYgdGhpcy5fbG9uZyA9PT0gdC5fbG9uZztcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBKU09OLXNlcmlhbGl6YWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIEdlb1BvaW50LiAqLyAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBsYXRpdHVkZTogdGhpcy5fbGF0LFxuICAgICAgICAgICAgbG9uZ2l0dWRlOiB0aGlzLl9sb25nXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFjdHVhbGx5IHByaXZhdGUgdG8gSlMgY29uc3VtZXJzIG9mIG91ciBBUEksIHNvIHRoaXMgZnVuY3Rpb24gaXMgcHJlZml4ZWRcbiAgICAgKiB3aXRoIGFuIHVuZGVyc2NvcmUuXG4gICAgICovICAgIF9jb21wYXJlVG8odCkge1xuICAgICAgICByZXR1cm4gaXQodGhpcy5fbGF0LCB0Ll9sYXQpIHx8IGl0KHRoaXMuX2xvbmcsIHQuX2xvbmcpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgaXUgPSAvXl9fLipfXyQvO1xuXG4vKiogVGhlIHJlc3VsdCBvZiBwYXJzaW5nIGRvY3VtZW50IGRhdGEgKGUuZy4gZm9yIGEgc2V0RGF0YSBjYWxsKS4gKi8gY2xhc3MgcnUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5kYXRhID0gdCwgdGhpcy5maWVsZE1hc2sgPSBlLCB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IG47XG4gICAgfVxuICAgIHRvTXV0YXRpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy5maWVsZE1hc2sgPyBuZXcgb24odCwgdGhpcy5kYXRhLCB0aGlzLmZpZWxkTWFzaywgZSwgdGhpcy5maWVsZFRyYW5zZm9ybXMpIDogbmV3IHJuKHQsIHRoaXMuZGF0YSwgZSwgdGhpcy5maWVsZFRyYW5zZm9ybXMpO1xuICAgIH1cbn1cblxuLyoqIFRoZSByZXN1bHQgb2YgcGFyc2luZyBcInVwZGF0ZVwiIGRhdGEgKGkuZS4gZm9yIGFuIHVwZGF0ZURhdGEgY2FsbCkuICovIGNsYXNzIG91IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBcbiAgICAvLyBUaGUgZmllbGRNYXNrIGRvZXMgbm90IGluY2x1ZGUgZG9jdW1lbnQgdHJhbnNmb3Jtcy5cbiAgICBlLCBuKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IHQsIHRoaXMuZmllbGRNYXNrID0gZSwgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBuO1xuICAgIH1cbiAgICB0b011dGF0aW9uKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBvbih0LCB0aGlzLmRhdGEsIHRoaXMuZmllbGRNYXNrLCBlLCB0aGlzLmZpZWxkVHJhbnNmb3Jtcyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhdSh0KSB7XG4gICAgc3dpdGNoICh0KSB7XG4gICAgICBjYXNlIDAgLyogU2V0ICovIDpcbiAvLyBmYWxsIHRocm91Z2hcbiAgICAgICAgICAgICAgY2FzZSAyIC8qIE1lcmdlU2V0ICovIDpcbiAvLyBmYWxsIHRocm91Z2hcbiAgICAgICAgICAgICAgY2FzZSAxIC8qIFVwZGF0ZSAqLyA6XG4gICAgICAgIHJldHVybiAhMDtcblxuICAgICAgY2FzZSAzIC8qIEFyZ3VtZW50ICovIDpcbiAgICAgIGNhc2UgNCAvKiBBcnJheUFyZ3VtZW50ICovIDpcbiAgICAgICAgcmV0dXJuICExO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBMKCk7XG4gICAgfVxufVxuXG4vKiogQSBcImNvbnRleHRcIiBvYmplY3QgcGFzc2VkIGFyb3VuZCB3aGlsZSBwYXJzaW5nIHVzZXIgZGF0YS4gKi8gY2xhc3MgY3Uge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIGEgUGFyc2VDb250ZXh0IHdpdGggdGhlIGdpdmVuIHNvdXJjZSBhbmQgcGF0aC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzZXR0aW5ncyAtIFRoZSBzZXR0aW5ncyBmb3IgdGhlIHBhcnNlci5cbiAgICAgKiBAcGFyYW0gZGF0YWJhc2VJZCAtIFRoZSBkYXRhYmFzZSBJRCBvZiB0aGUgRmlyZXN0b3JlIGluc3RhbmNlLlxuICAgICAqIEBwYXJhbSBzZXJpYWxpemVyIC0gVGhlIHNlcmlhbGl6ZXIgdG8gdXNlIHRvIGdlbmVyYXRlIHRoZSBWYWx1ZSBwcm90by5cbiAgICAgKiBAcGFyYW0gaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyAtIFdoZXRoZXIgdG8gaWdub3JlIHVuZGVmaW5lZCBwcm9wZXJ0aWVzXG4gICAgICogcmF0aGVyIHRoYW4gdGhyb3cuXG4gICAgICogQHBhcmFtIGZpZWxkVHJhbnNmb3JtcyAtIEEgbXV0YWJsZSBsaXN0IG9mIGZpZWxkIHRyYW5zZm9ybXMgZW5jb3VudGVyZWRcbiAgICAgKiB3aGlsZSBwYXJzaW5nIHRoZSBkYXRhLlxuICAgICAqIEBwYXJhbSBmaWVsZE1hc2sgLSBBIG11dGFibGUgbGlzdCBvZiBmaWVsZCBwYXRocyBlbmNvdW50ZXJlZCB3aGlsZSBwYXJzaW5nXG4gICAgICogdGhlIGRhdGEuXG4gICAgICpcbiAgICAgKiBUT0RPKGIvMzQ4NzExMzEpOiBXZSBkb24ndCBzdXBwb3J0IGFycmF5IHBhdGhzIHJpZ2h0IG5vdywgc28gcGF0aCBjYW4gYmVcbiAgICAgKiBudWxsIHRvIGluZGljYXRlIHRoZSBjb250ZXh0IHJlcHJlc2VudHMgYW55IGxvY2F0aW9uIHdpdGhpbiBhbiBhcnJheSAoaW5cbiAgICAgKiB3aGljaCBjYXNlIGNlcnRhaW4gZmVhdHVyZXMgd2lsbCBub3Qgd29yayBhbmQgZXJyb3JzIHdpbGwgYmUgc29tZXdoYXRcbiAgICAgKiBjb21wcm9taXNlZCkuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgcikge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gdCwgdGhpcy5kYXRhYmFzZUlkID0gZSwgdGhpcy5rID0gbiwgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzID0gcywgXG4gICAgICAgIC8vIE1pbm9yIGhhY2s6IElmIGZpZWxkVHJhbnNmb3JtcyBpcyB1bmRlZmluZWQsIHdlIGFzc3VtZSB0aGlzIGlzIGFuXG4gICAgICAgIC8vIGV4dGVybmFsIGNhbGwgYW5kIHdlIG5lZWQgdG8gdmFsaWRhdGUgdGhlIGVudGlyZSBwYXRoLlxuICAgICAgICB2b2lkIDAgPT09IGkgJiYgdGhpcy5rYSgpLCB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IGkgfHwgW10sIHRoaXMuZmllbGRNYXNrID0gciB8fCBbXTtcbiAgICB9XG4gICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLnBhdGg7XG4gICAgfVxuICAgIGdldCB4YSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MueGE7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgbmV3IGNvbnRleHQgd2l0aCB0aGUgc3BlY2lmaWVkIHNldHRpbmdzIG92ZXJ3cml0dGVuLiAqLyAgICAkYSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgY3UoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLnNldHRpbmdzKSwgdCksIHRoaXMuZGF0YWJhc2VJZCwgdGhpcy5rLCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMsIHRoaXMuZmllbGRUcmFuc2Zvcm1zLCB0aGlzLmZpZWxkTWFzayk7XG4gICAgfVxuICAgIEZhKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGNvbnN0IG4gPSBudWxsID09PSAoZSA9IHRoaXMucGF0aCkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5jaGlsZCh0KSwgcyA9IHRoaXMuJGEoe1xuICAgICAgICAgICAgcGF0aDogbixcbiAgICAgICAgICAgIE9hOiAhMVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHMuTWEodCksIHM7XG4gICAgfVxuICAgIExhKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGNvbnN0IG4gPSBudWxsID09PSAoZSA9IHRoaXMucGF0aCkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5jaGlsZCh0KSwgcyA9IHRoaXMuJGEoe1xuICAgICAgICAgICAgcGF0aDogbixcbiAgICAgICAgICAgIE9hOiAhMVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHMua2EoKSwgcztcbiAgICB9XG4gICAgQmEodCkge1xuICAgICAgICAvLyBUT0RPKGIvMzQ4NzExMzEpOiBXZSBkb24ndCBzdXBwb3J0IGFycmF5IHBhdGhzIHJpZ2h0IG5vdzsgc28gbWFrZSBwYXRoXG4gICAgICAgIC8vIHVuZGVmaW5lZC5cbiAgICAgICAgcmV0dXJuIHRoaXMuJGEoe1xuICAgICAgICAgICAgcGF0aDogdm9pZCAwLFxuICAgICAgICAgICAgT2E6ICEwXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBVYSh0KSB7XG4gICAgICAgIHJldHVybiBWdSh0LCB0aGlzLnNldHRpbmdzLm1ldGhvZE5hbWUsIHRoaXMuc2V0dGluZ3MucWEgfHwgITEsIHRoaXMucGF0aCwgdGhpcy5zZXR0aW5ncy5LYSk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zICd0cnVlJyBpZiAnZmllbGRQYXRoJyB3YXMgdHJhdmVyc2VkIHdoZW4gY3JlYXRpbmcgdGhpcyBjb250ZXh0LiAqLyAgICBjb250YWlucyh0KSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHRoaXMuZmllbGRNYXNrLmZpbmQoKGUgPT4gdC5pc1ByZWZpeE9mKGUpKSkgfHwgdm9pZCAwICE9PSB0aGlzLmZpZWxkVHJhbnNmb3Jtcy5maW5kKChlID0+IHQuaXNQcmVmaXhPZihlLmZpZWxkKSkpO1xuICAgIH1cbiAgICBrYSgpIHtcbiAgICAgICAgLy8gVE9ETyhiLzM0ODcxMTMxKTogUmVtb3ZlIG51bGwgY2hlY2sgb25jZSB3ZSBoYXZlIHByb3BlciBwYXRocyBmb3IgZmllbGRzXG4gICAgICAgIC8vIHdpdGhpbiBhcnJheXMuXG4gICAgICAgIGlmICh0aGlzLnBhdGgpIGZvciAobGV0IHQgPSAwOyB0IDwgdGhpcy5wYXRoLmxlbmd0aDsgdCsrKSB0aGlzLk1hKHRoaXMucGF0aC5nZXQodCkpO1xuICAgIH1cbiAgICBNYSh0KSB7XG4gICAgICAgIGlmICgwID09PSB0Lmxlbmd0aCkgdGhyb3cgdGhpcy5VYShcIkRvY3VtZW50IGZpZWxkcyBtdXN0IG5vdCBiZSBlbXB0eVwiKTtcbiAgICAgICAgaWYgKGF1KHRoaXMueGEpICYmIGl1LnRlc3QodCkpIHRocm93IHRoaXMuVWEoJ0RvY3VtZW50IGZpZWxkcyBjYW5ub3QgYmVnaW4gYW5kIGVuZCB3aXRoIFwiX19cIicpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgZm9yIHBhcnNpbmcgcmF3IHVzZXIgaW5wdXQgKHByb3ZpZGVkIHZpYSB0aGUgQVBJKSBpbnRvIGludGVybmFsIG1vZGVsXG4gKiBjbGFzc2VzLlxuICovIGNsYXNzIHV1IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuZGF0YWJhc2VJZCA9IHQsIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyA9IGUsIHRoaXMuayA9IG4gfHwgdG8odCk7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IHRvcC1sZXZlbCBwYXJzZSBjb250ZXh0LiAqLyAgICBqYSh0LCBlLCBuLCBzID0gITEpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBjdSh7XG4gICAgICAgICAgICB4YTogdCxcbiAgICAgICAgICAgIG1ldGhvZE5hbWU6IGUsXG4gICAgICAgICAgICBLYTogbixcbiAgICAgICAgICAgIHBhdGg6IF90LmVtcHR5UGF0aCgpLFxuICAgICAgICAgICAgT2E6ICExLFxuICAgICAgICAgICAgcWE6IHNcbiAgICAgICAgfSwgdGhpcy5kYXRhYmFzZUlkLCB0aGlzLmssIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBodSh0KSB7XG4gICAgY29uc3QgZSA9IHQuX2ZyZWV6ZVNldHRpbmdzKCksIG4gPSB0byh0Ll9kYXRhYmFzZUlkKTtcbiAgICByZXR1cm4gbmV3IHV1KHQuX2RhdGFiYXNlSWQsICEhZS5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzLCBuKTtcbn1cblxuLyoqIFBhcnNlIGRvY3VtZW50IGRhdGEgZnJvbSBhIHNldCgpIGNhbGwuICovIGZ1bmN0aW9uIGx1KHQsIGUsIG4sIHMsIGksIHIgPSB7fSkge1xuICAgIGNvbnN0IG8gPSB0LmphKHIubWVyZ2UgfHwgci5tZXJnZUZpZWxkcyA/IDIgLyogTWVyZ2VTZXQgKi8gOiAwIC8qIFNldCAqLyAsIGUsIG4sIGkpO1xuICAgIFJ1KFwiRGF0YSBtdXN0IGJlIGFuIG9iamVjdCwgYnV0IGl0IHdhczpcIiwgbywgcyk7XG4gICAgY29uc3QgYSA9IEl1KHMsIG8pO1xuICAgIGxldCBjLCB1O1xuICAgIGlmIChyLm1lcmdlKSBjID0gbmV3IG10KG8uZmllbGRNYXNrKSwgdSA9IG8uZmllbGRUcmFuc2Zvcm1zOyBlbHNlIGlmIChyLm1lcmdlRmllbGRzKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBzIG9mIHIubWVyZ2VGaWVsZHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBQdShlLCBzLCBuKTtcbiAgICAgICAgICAgIGlmICghby5jb250YWlucyhpKSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgRmllbGQgJyR7aX0nIGlzIHNwZWNpZmllZCBpbiB5b3VyIGZpZWxkIG1hc2sgYnV0IG1pc3NpbmcgZnJvbSB5b3VyIGlucHV0IGRhdGEuYCk7XG4gICAgICAgICAgICBTdSh0LCBpKSB8fCB0LnB1c2goaSk7XG4gICAgICAgIH1cbiAgICAgICAgYyA9IG5ldyBtdCh0KSwgdSA9IG8uZmllbGRUcmFuc2Zvcm1zLmZpbHRlcigodCA9PiBjLmNvdmVycyh0LmZpZWxkKSkpO1xuICAgIH0gZWxzZSBjID0gbnVsbCwgdSA9IG8uZmllbGRUcmFuc2Zvcm1zO1xuICAgIHJldHVybiBuZXcgcnUobmV3IGp0KGEpLCBjLCB1KTtcbn1cblxuY2xhc3MgZnUgZXh0ZW5kcyBudSB7XG4gICAgX3RvRmllbGRUcmFuc2Zvcm0odCkge1xuICAgICAgICBpZiAoMiAvKiBNZXJnZVNldCAqLyAhPT0gdC54YSkgdGhyb3cgMSAvKiBVcGRhdGUgKi8gPT09IHQueGEgPyB0LlVhKGAke3RoaXMuX21ldGhvZE5hbWV9KCkgY2FuIG9ubHkgYXBwZWFyIGF0IHRoZSB0b3AgbGV2ZWwgb2YgeW91ciB1cGRhdGUgZGF0YWApIDogdC5VYShgJHt0aGlzLl9tZXRob2ROYW1lfSgpIGNhbm5vdCBiZSB1c2VkIHdpdGggc2V0KCkgdW5sZXNzIHlvdSBwYXNzIHttZXJnZTp0cnVlfWApO1xuICAgICAgICAvLyBObyB0cmFuc2Zvcm0gdG8gYWRkIGZvciBhIGRlbGV0ZSwgYnV0IHdlIG5lZWQgdG8gYWRkIGl0IHRvIG91clxuICAgICAgICAvLyBmaWVsZE1hc2sgc28gaXQgZ2V0cyBkZWxldGVkLlxuICAgICAgICByZXR1cm4gdC5maWVsZE1hc2sucHVzaCh0LnBhdGgpLCBudWxsO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBmdTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGNoaWxkIGNvbnRleHQgZm9yIHBhcnNpbmcgU2VyaWFsaXphYmxlRmllbGRWYWx1ZXMuXG4gKlxuICogVGhpcyBpcyBkaWZmZXJlbnQgdGhhbiBjYWxsaW5nIGBQYXJzZUNvbnRleHQuY29udGV4dFdpdGhgIGJlY2F1c2UgaXQga2VlcHNcbiAqIHRoZSBmaWVsZFRyYW5zZm9ybXMgYW5kIGZpZWxkTWFzayBzZXBhcmF0ZS5cbiAqXG4gKiBUaGUgY3JlYXRlZCBjb250ZXh0IGhhcyBpdHMgYGRhdGFTb3VyY2VgIHNldCB0byBgVXNlckRhdGFTb3VyY2UuQXJndW1lbnRgLlxuICogQWx0aG91Z2ggdGhlc2UgdmFsdWVzIGFyZSB1c2VkIHdpdGggd3JpdGVzLCBhbnkgZWxlbWVudHMgaW4gdGhlc2UgRmllbGRWYWx1ZXNcbiAqIGFyZSBub3QgY29uc2lkZXJlZCB3cml0ZXMgc2luY2UgdGhleSBjYW5ub3QgY29udGFpbiBhbnkgRmllbGRWYWx1ZSBzZW50aW5lbHMsXG4gKiBldGMuXG4gKlxuICogQHBhcmFtIGZpZWxkVmFsdWUgLSBUaGUgc2VudGluZWwgRmllbGRWYWx1ZSBmb3Igd2hpY2ggdG8gY3JlYXRlIGEgY2hpbGRcbiAqICAgICBjb250ZXh0LlxuICogQHBhcmFtIGNvbnRleHQgLSBUaGUgcGFyZW50IGNvbnRleHQuXG4gKiBAcGFyYW0gYXJyYXlFbGVtZW50IC0gV2hldGhlciBvciBub3QgdGhlIEZpZWxkVmFsdWUgaGFzIGFuIGFycmF5LlxuICovIGZ1bmN0aW9uIGR1KHQsIGUsIG4pIHtcbiAgICByZXR1cm4gbmV3IGN1KHtcbiAgICAgICAgeGE6IDMgLyogQXJndW1lbnQgKi8gLFxuICAgICAgICBLYTogZS5zZXR0aW5ncy5LYSxcbiAgICAgICAgbWV0aG9kTmFtZTogdC5fbWV0aG9kTmFtZSxcbiAgICAgICAgT2E6IG5cbiAgICB9LCBlLmRhdGFiYXNlSWQsIGUuaywgZS5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzKTtcbn1cblxuY2xhc3Mgd3UgZXh0ZW5kcyBudSB7XG4gICAgX3RvRmllbGRUcmFuc2Zvcm0odCkge1xuICAgICAgICByZXR1cm4gbmV3IEdlKHQucGF0aCwgbmV3IExlKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2Ygd3U7XG4gICAgfVxufVxuXG5jbGFzcyBfdSBleHRlbmRzIG51IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQpLCB0aGlzLlFhID0gZTtcbiAgICB9XG4gICAgX3RvRmllbGRUcmFuc2Zvcm0odCkge1xuICAgICAgICBjb25zdCBlID0gZHUodGhpcywgdCwgXG4gICAgICAgIC8qYXJyYXk9Ki8gITApLCBuID0gdGhpcy5RYS5tYXAoKHQgPT4gRXUodCwgZSkpKSwgcyA9IG5ldyBCZShuKTtcbiAgICAgICAgcmV0dXJuIG5ldyBHZSh0LnBhdGgsIHMpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgLy8gVE9ETyhtcnNjaG1pZHQpOiBJbXBsZW1lbnQgaXNFcXVhbHNcbiAgICAgICAgcmV0dXJuIHRoaXMgPT09IHQ7XG4gICAgfVxufVxuXG5jbGFzcyBtdSBleHRlbmRzIG51IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQpLCB0aGlzLlFhID0gZTtcbiAgICB9XG4gICAgX3RvRmllbGRUcmFuc2Zvcm0odCkge1xuICAgICAgICBjb25zdCBlID0gZHUodGhpcywgdCwgXG4gICAgICAgIC8qYXJyYXk9Ki8gITApLCBuID0gdGhpcy5RYS5tYXAoKHQgPT4gRXUodCwgZSkpKSwgcyA9IG5ldyBxZShuKTtcbiAgICAgICAgcmV0dXJuIG5ldyBHZSh0LnBhdGgsIHMpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgLy8gVE9ETyhtcnNjaG1pZHQpOiBJbXBsZW1lbnQgaXNFcXVhbHNcbiAgICAgICAgcmV0dXJuIHRoaXMgPT09IHQ7XG4gICAgfVxufVxuXG5jbGFzcyBndSBleHRlbmRzIG51IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQpLCB0aGlzLldhID0gZTtcbiAgICB9XG4gICAgX3RvRmllbGRUcmFuc2Zvcm0odCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IGplKHQuaywgeGUodC5rLCB0aGlzLldhKSk7XG4gICAgICAgIHJldHVybiBuZXcgR2UodC5wYXRoLCBlKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIC8vIFRPRE8obXJzY2htaWR0KTogSW1wbGVtZW50IGlzRXF1YWxzXG4gICAgICAgIHJldHVybiB0aGlzID09PSB0O1xuICAgIH1cbn1cblxuLyoqIFBhcnNlIHVwZGF0ZSBkYXRhIGZyb20gYW4gdXBkYXRlKCkgY2FsbC4gKi8gZnVuY3Rpb24geXUodCwgZSwgbiwgcykge1xuICAgIGNvbnN0IGkgPSB0LmphKDEgLyogVXBkYXRlICovICwgZSwgbik7XG4gICAgUnUoXCJEYXRhIG11c3QgYmUgYW4gb2JqZWN0LCBidXQgaXQgd2FzOlwiLCBpLCBzKTtcbiAgICBjb25zdCByID0gW10sIG8gPSBqdC5lbXB0eSgpO1xuICAgIGh0KHMsICgodCwgcykgPT4ge1xuICAgICAgICBjb25zdCBhID0gdnUoZSwgdCwgbik7XG4gICAgICAgIC8vIEZvciBDb21wYXQgdHlwZXMsIHdlIGhhdmUgdG8gXCJleHRyYWN0XCIgdGhlIHVuZGVybHlpbmcgdHlwZXMgYmVmb3JlXG4gICAgICAgIC8vIHBlcmZvcm1pbmcgdmFsaWRhdGlvbi5cbiAgICAgICAgICAgICAgICBzID0gZ2V0TW9kdWxhckluc3RhbmNlKHMpO1xuICAgICAgICBjb25zdCBjID0gaS5MYShhKTtcbiAgICAgICAgaWYgKHMgaW5zdGFuY2VvZiBmdSkgXG4gICAgICAgIC8vIEFkZCBpdCB0byB0aGUgZmllbGQgbWFzaywgYnV0IGRvbid0IGFkZCBhbnl0aGluZyB0byB1cGRhdGVEYXRhLlxuICAgICAgICByLnB1c2goYSk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdCA9IEV1KHMsIGMpO1xuICAgICAgICAgICAgbnVsbCAhPSB0ICYmIChyLnB1c2goYSksIG8uc2V0KGEsIHQpKTtcbiAgICAgICAgfVxuICAgIH0pKTtcbiAgICBjb25zdCBhID0gbmV3IG10KHIpO1xuICAgIHJldHVybiBuZXcgb3UobywgYSwgaS5maWVsZFRyYW5zZm9ybXMpO1xufVxuXG4vKiogUGFyc2UgdXBkYXRlIGRhdGEgZnJvbSBhIGxpc3Qgb2YgZmllbGQvdmFsdWUgYXJndW1lbnRzLiAqLyBmdW5jdGlvbiBwdSh0LCBlLCBuLCBzLCBpLCByKSB7XG4gICAgY29uc3QgbyA9IHQuamEoMSAvKiBVcGRhdGUgKi8gLCBlLCBuKSwgYSA9IFsgUHUoZSwgcywgbikgXSwgYyA9IFsgaSBdO1xuICAgIGlmIChyLmxlbmd0aCAlIDIgIT0gMCkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgRnVuY3Rpb24gJHtlfSgpIG5lZWRzIHRvIGJlIGNhbGxlZCB3aXRoIGFuIGV2ZW4gbnVtYmVyIG9mIGFyZ3VtZW50cyB0aGF0IGFsdGVybmF0ZSBiZXR3ZWVuIGZpZWxkIG5hbWVzIGFuZCB2YWx1ZXMuYCk7XG4gICAgZm9yIChsZXQgdCA9IDA7IHQgPCByLmxlbmd0aDsgdCArPSAyKSBhLnB1c2goUHUoZSwgclt0XSkpLCBjLnB1c2goclt0ICsgMV0pO1xuICAgIGNvbnN0IHUgPSBbXSwgaCA9IGp0LmVtcHR5KCk7XG4gICAgLy8gV2UgaXRlcmF0ZSBpbiByZXZlcnNlIG9yZGVyIHRvIHBpY2sgdGhlIGxhc3QgdmFsdWUgZm9yIGEgZmllbGQgaWYgdGhlXG4gICAgLy8gdXNlciBzcGVjaWZpZWQgdGhlIGZpZWxkIG11bHRpcGxlIHRpbWVzLlxuICAgIGZvciAobGV0IHQgPSBhLmxlbmd0aCAtIDE7IHQgPj0gMDsgLS10KSBpZiAoIVN1KHUsIGFbdF0pKSB7XG4gICAgICAgIGNvbnN0IGUgPSBhW3RdO1xuICAgICAgICBsZXQgbiA9IGNbdF07XG4gICAgICAgIC8vIEZvciBDb21wYXQgdHlwZXMsIHdlIGhhdmUgdG8gXCJleHRyYWN0XCIgdGhlIHVuZGVybHlpbmcgdHlwZXMgYmVmb3JlXG4gICAgICAgIC8vIHBlcmZvcm1pbmcgdmFsaWRhdGlvbi5cbiAgICAgICAgICAgICAgICBuID0gZ2V0TW9kdWxhckluc3RhbmNlKG4pO1xuICAgICAgICBjb25zdCBzID0gby5MYShlKTtcbiAgICAgICAgaWYgKG4gaW5zdGFuY2VvZiBmdSkgXG4gICAgICAgIC8vIEFkZCBpdCB0byB0aGUgZmllbGQgbWFzaywgYnV0IGRvbid0IGFkZCBhbnl0aGluZyB0byB1cGRhdGVEYXRhLlxuICAgICAgICB1LnB1c2goZSk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdCA9IEV1KG4sIHMpO1xuICAgICAgICAgICAgbnVsbCAhPSB0ICYmICh1LnB1c2goZSksIGguc2V0KGUsIHQpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBsID0gbmV3IG10KHUpO1xuICAgIHJldHVybiBuZXcgb3UoaCwgbCwgby5maWVsZFRyYW5zZm9ybXMpO1xufVxuXG4vKipcbiAqIFBhcnNlIGEgXCJxdWVyeSB2YWx1ZVwiIChlLmcuIHZhbHVlIGluIGEgd2hlcmUgZmlsdGVyIG9yIGEgdmFsdWUgaW4gYSBjdXJzb3JcbiAqIGJvdW5kKS5cbiAqXG4gKiBAcGFyYW0gYWxsb3dBcnJheXMgLSBXaGV0aGVyIHRoZSBxdWVyeSB2YWx1ZSBpcyBhbiBhcnJheSB0aGF0IG1heSBkaXJlY3RseVxuICogY29udGFpbiBhZGRpdGlvbmFsIGFycmF5cyAoZS5nLiB0aGUgb3BlcmFuZCBvZiBhbiBgaW5gIHF1ZXJ5KS5cbiAqLyBmdW5jdGlvbiBUdSh0LCBlLCBuLCBzID0gITEpIHtcbiAgICByZXR1cm4gRXUobiwgdC5qYShzID8gNCAvKiBBcnJheUFyZ3VtZW50ICovIDogMyAvKiBBcmd1bWVudCAqLyAsIGUpKTtcbn1cblxuLyoqXG4gKiBQYXJzZXMgdXNlciBkYXRhIHRvIFByb3RvYnVmIFZhbHVlcy5cbiAqXG4gKiBAcGFyYW0gaW5wdXQgLSBEYXRhIHRvIGJlIHBhcnNlZC5cbiAqIEBwYXJhbSBjb250ZXh0IC0gQSBjb250ZXh0IG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgcGF0aCBiZWluZyBwYXJzZWQsXG4gKiB0aGUgc291cmNlIG9mIHRoZSBkYXRhIGJlaW5nIHBhcnNlZCwgZXRjLlxuICogQHJldHVybnMgVGhlIHBhcnNlZCB2YWx1ZSwgb3IgbnVsbCBpZiB0aGUgdmFsdWUgd2FzIGEgRmllbGRWYWx1ZSBzZW50aW5lbFxuICogdGhhdCBzaG91bGQgbm90IGJlIGluY2x1ZGVkIGluIHRoZSByZXN1bHRpbmcgcGFyc2VkIGRhdGEuXG4gKi8gZnVuY3Rpb24gRXUodCwgZSkge1xuICAgIGlmIChBdShcbiAgICAvLyBVbndyYXAgdGhlIEFQSSB0eXBlIGZyb20gdGhlIENvbXBhdCBTREsuIFRoaXMgd2lsbCByZXR1cm4gdGhlIEFQSSB0eXBlXG4gICAgLy8gZnJvbSBmaXJlc3RvcmUtZXhwLlxuICAgIHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCkpKSByZXR1cm4gUnUoXCJVbnN1cHBvcnRlZCBmaWVsZCB2YWx1ZTpcIiwgZSwgdCksIEl1KHQsIGUpO1xuICAgIGlmICh0IGluc3RhbmNlb2YgbnUpIFxuICAgIC8vIEZpZWxkVmFsdWVzIHVzdWFsbHkgcGFyc2UgaW50byB0cmFuc2Zvcm1zIChleGNlcHQgRmllbGRWYWx1ZS5kZWxldGUoKSlcbiAgICAvLyBpbiB3aGljaCBjYXNlIHdlIGRvIG5vdCB3YW50IHRvIGluY2x1ZGUgdGhpcyBmaWVsZCBpbiBvdXIgcGFyc2VkIGRhdGFcbiAgICAvLyAoYXMgZG9pbmcgc28gd2lsbCBvdmVyd3JpdGUgdGhlIGZpZWxkIGRpcmVjdGx5IHByaW9yIHRvIHRoZSB0cmFuc2Zvcm1cbiAgICAvLyB0cnlpbmcgdG8gdHJhbnNmb3JtIGl0KS4gU28gd2UgZG9uJ3QgYWRkIHRoaXMgbG9jYXRpb24gdG9cbiAgICAvLyBjb250ZXh0LmZpZWxkTWFzayBhbmQgd2UgcmV0dXJuIG51bGwgYXMgb3VyIHBhcnNpbmcgcmVzdWx0LlxuICAgIC8qKlxuICogXCJQYXJzZXNcIiB0aGUgcHJvdmlkZWQgRmllbGRWYWx1ZUltcGwsIGFkZGluZyBhbnkgbmVjZXNzYXJ5IHRyYW5zZm9ybXMgdG9cbiAqIGNvbnRleHQuZmllbGRUcmFuc2Zvcm1zLlxuICovXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgLy8gU2VudGluZWxzIGFyZSBvbmx5IHN1cHBvcnRlZCB3aXRoIHdyaXRlcywgYW5kIG5vdCB3aXRoaW4gYXJyYXlzLlxuICAgICAgICBpZiAoIWF1KGUueGEpKSB0aHJvdyBlLlVhKGAke3QuX21ldGhvZE5hbWV9KCkgY2FuIG9ubHkgYmUgdXNlZCB3aXRoIHVwZGF0ZSgpIGFuZCBzZXQoKWApO1xuICAgICAgICBpZiAoIWUucGF0aCkgdGhyb3cgZS5VYShgJHt0Ll9tZXRob2ROYW1lfSgpIGlzIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkIGluc2lkZSBhcnJheXNgKTtcbiAgICAgICAgY29uc3QgbiA9IHQuX3RvRmllbGRUcmFuc2Zvcm0oZSk7XG4gICAgICAgIG4gJiYgZS5maWVsZFRyYW5zZm9ybXMucHVzaChuKTtcbiAgICB9XG4gICAgLyoqXG4gKiBIZWxwZXIgdG8gcGFyc2UgYSBzY2FsYXIgdmFsdWUgKGkuZS4gbm90IGFuIE9iamVjdCwgQXJyYXksIG9yIEZpZWxkVmFsdWUpXG4gKlxuICogQHJldHVybnMgVGhlIHBhcnNlZCB2YWx1ZVxuICovICh0LCBlKSwgbnVsbDtcbiAgICBpZiAodm9pZCAwID09PSB0ICYmIGUuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcykgXG4gICAgLy8gSWYgdGhlIGlucHV0IGlzIHVuZGVmaW5lZCBpdCBjYW4gbmV2ZXIgcGFydGljaXBhdGUgaW4gdGhlIGZpZWxkTWFzaywgc29cbiAgICAvLyBkb24ndCBoYW5kbGUgdGhpcyBiZWxvdy4gSWYgYGlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXNgIGlzIGZhbHNlLFxuICAgIC8vIGBwYXJzZVNjYWxhclZhbHVlYCB3aWxsIHJlamVjdCBhbiB1bmRlZmluZWQgdmFsdWUuXG4gICAgcmV0dXJuIG51bGw7XG4gICAgaWYgKFxuICAgIC8vIElmIGNvbnRleHQucGF0aCBpcyBudWxsIHdlIGFyZSBpbnNpZGUgYW4gYXJyYXkgYW5kIHdlIGRvbid0IHN1cHBvcnRcbiAgICAvLyBmaWVsZCBtYXNrIHBhdGhzIG1vcmUgZ3JhbnVsYXIgdGhhbiB0aGUgdG9wLWxldmVsIGFycmF5LlxuICAgIGUucGF0aCAmJiBlLmZpZWxkTWFzay5wdXNoKGUucGF0aCksIHQgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAvLyBUT0RPKGIvMzQ4NzExMzEpOiBJbmNsdWRlIHRoZSBwYXRoIGNvbnRhaW5pbmcgdGhlIGFycmF5IGluIHRoZSBlcnJvclxuICAgICAgICAvLyBtZXNzYWdlLlxuICAgICAgICAvLyBJbiB0aGUgY2FzZSBvZiBJTiBxdWVyaWVzLCB0aGUgcGFyc2VkIGRhdGEgaXMgYW4gYXJyYXkgKHJlcHJlc2VudGluZ1xuICAgICAgICAvLyB0aGUgc2V0IG9mIHZhbHVlcyB0byBiZSBpbmNsdWRlZCBmb3IgdGhlIElOIHF1ZXJ5KSB0aGF0IG1heSBkaXJlY3RseVxuICAgICAgICAvLyBjb250YWluIGFkZGl0aW9uYWwgYXJyYXlzIChlYWNoIHJlcHJlc2VudGluZyBhbiBpbmRpdmlkdWFsIGZpZWxkXG4gICAgICAgIC8vIHZhbHVlKSwgc28gd2UgZGlzYWJsZSB0aGlzIHZhbGlkYXRpb24uXG4gICAgICAgIGlmIChlLnNldHRpbmdzLk9hICYmIDQgLyogQXJyYXlBcmd1bWVudCAqLyAhPT0gZS54YSkgdGhyb3cgZS5VYShcIk5lc3RlZCBhcnJheXMgYXJlIG5vdCBzdXBwb3J0ZWRcIik7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gW107XG4gICAgICAgICAgICBsZXQgcyA9IDA7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGkgb2YgdCkge1xuICAgICAgICAgICAgICAgIGxldCB0ID0gRXUoaSwgZS5CYShzKSk7XG4gICAgICAgICAgICAgICAgbnVsbCA9PSB0ICYmIChcbiAgICAgICAgICAgICAgICAvLyBKdXN0IGluY2x1ZGUgbnVsbHMgaW4gdGhlIGFycmF5IGZvciBmaWVsZHMgYmVpbmcgcmVwbGFjZWQgd2l0aCBhXG4gICAgICAgICAgICAgICAgLy8gc2VudGluZWwuXG4gICAgICAgICAgICAgICAgdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgbnVsbFZhbHVlOiBcIk5VTExfVkFMVUVcIlxuICAgICAgICAgICAgICAgIH0pLCBuLnB1c2godCksIHMrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgYXJyYXlWYWx1ZToge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KHQsIGUpO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBpZiAobnVsbCA9PT0gKHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCkpKSByZXR1cm4ge1xuICAgICAgICAgICAgbnVsbFZhbHVlOiBcIk5VTExfVkFMVUVcIlxuICAgICAgICB9O1xuICAgICAgICBpZiAoXCJudW1iZXJcIiA9PSB0eXBlb2YgdCkgcmV0dXJuIHhlKGUuaywgdCk7XG4gICAgICAgIGlmIChcImJvb2xlYW5cIiA9PSB0eXBlb2YgdCkgcmV0dXJuIHtcbiAgICAgICAgICAgIGJvb2xlYW5WYWx1ZTogdFxuICAgICAgICB9O1xuICAgICAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCkgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0cmluZ1ZhbHVlOiB0XG4gICAgICAgIH07XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IGF0LmZyb21EYXRlKHQpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXBWYWx1ZTogam4oZS5rLCBuKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIGF0KSB7XG4gICAgICAgICAgICAvLyBGaXJlc3RvcmUgYmFja2VuZCB0cnVuY2F0ZXMgcHJlY2lzaW9uIGRvd24gdG8gbWljcm9zZWNvbmRzLiBUbyBlbnN1cmVcbiAgICAgICAgICAgIC8vIG9mZmxpbmUgbW9kZSB3b3JrcyB0aGUgc2FtZSB3aXRoIHJlZ2FyZHMgdG8gdHJ1bmNhdGlvbiwgcGVyZm9ybSB0aGVcbiAgICAgICAgICAgIC8vIHRydW5jYXRpb24gaW1tZWRpYXRlbHkgd2l0aG91dCB3YWl0aW5nIGZvciB0aGUgYmFja2VuZCB0byBkbyB0aGF0LlxuICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBhdCh0LnNlY29uZHMsIDFlMyAqIE1hdGguZmxvb3IodC5uYW5vc2Vjb25kcyAvIDFlMykpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXBWYWx1ZTogam4oZS5rLCBuKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIHN1KSByZXR1cm4ge1xuICAgICAgICAgICAgZ2VvUG9pbnRWYWx1ZToge1xuICAgICAgICAgICAgICAgIGxhdGl0dWRlOiB0LmxhdGl0dWRlLFxuICAgICAgICAgICAgICAgIGxvbmdpdHVkZTogdC5sb25naXR1ZGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBldSkgcmV0dXJuIHtcbiAgICAgICAgICAgIGJ5dGVzVmFsdWU6IFFuKGUuaywgdC5fYnl0ZVN0cmluZylcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBQYykge1xuICAgICAgICAgICAgY29uc3QgbiA9IGUuZGF0YWJhc2VJZCwgcyA9IHQuZmlyZXN0b3JlLl9kYXRhYmFzZUlkO1xuICAgICAgICAgICAgaWYgKCFzLmlzRXF1YWwobikpIHRocm93IGUuVWEoYERvY3VtZW50IHJlZmVyZW5jZSBpcyBmb3IgZGF0YWJhc2UgJHtzLnByb2plY3RJZH0vJHtzLmRhdGFiYXNlfSBidXQgc2hvdWxkIGJlIGZvciBkYXRhYmFzZSAke24ucHJvamVjdElkfS8ke24uZGF0YWJhc2V9YCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHJlZmVyZW5jZVZhbHVlOiB6bih0LmZpcmVzdG9yZS5fZGF0YWJhc2VJZCB8fCBlLmRhdGFiYXNlSWQsIHQuX2tleS5wYXRoKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBlLlVhKGBVbnN1cHBvcnRlZCBmaWVsZCB2YWx1ZTogJHtwYyh0KX1gKTtcbiAgICB9XG4gICAgLyoqXG4gKiBDaGVja3Mgd2hldGhlciBhbiBvYmplY3QgbG9va3MgbGlrZSBhIEpTT04gb2JqZWN0IHRoYXQgc2hvdWxkIGJlIGNvbnZlcnRlZFxuICogaW50byBhIHN0cnVjdC4gTm9ybWFsIGNsYXNzL3Byb3RvdHlwZSBpbnN0YW5jZXMgYXJlIGNvbnNpZGVyZWQgdG8gbG9vayBsaWtlXG4gKiBKU09OIG9iamVjdHMgc2luY2UgdGhleSBzaG91bGQgYmUgY29udmVydGVkIHRvIGEgc3RydWN0IHZhbHVlLiBBcnJheXMsIERhdGVzLFxuICogR2VvUG9pbnRzLCBldGMuIGFyZSBub3QgY29uc2lkZXJlZCB0byBsb29rIGxpa2UgSlNPTiBvYmplY3RzIHNpbmNlIHRoZXkgbWFwXG4gKiB0byBzcGVjaWZpYyBGaWVsZFZhbHVlIHR5cGVzIG90aGVyIHRoYW4gT2JqZWN0VmFsdWUuXG4gKi8gKHQsIGUpO1xufVxuXG5mdW5jdGlvbiBJdSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IHt9O1xuICAgIHJldHVybiBsdCh0KSA/IFxuICAgIC8vIElmIHdlIGVuY291bnRlciBhbiBlbXB0eSBvYmplY3QsIHdlIGV4cGxpY2l0bHkgYWRkIGl0IHRvIHRoZSB1cGRhdGVcbiAgICAvLyBtYXNrIHRvIGVuc3VyZSB0aGF0IHRoZSBzZXJ2ZXIgY3JlYXRlcyBhIG1hcCBlbnRyeS5cbiAgICBlLnBhdGggJiYgZS5wYXRoLmxlbmd0aCA+IDAgJiYgZS5maWVsZE1hc2sucHVzaChlLnBhdGgpIDogaHQodCwgKCh0LCBzKSA9PiB7XG4gICAgICAgIGNvbnN0IGkgPSBFdShzLCBlLkZhKHQpKTtcbiAgICAgICAgbnVsbCAhPSBpICYmIChuW3RdID0gaSk7XG4gICAgfSkpLCB7XG4gICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICBmaWVsZHM6IG5cbiAgICAgICAgfVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIEF1KHQpIHtcbiAgICByZXR1cm4gIShcIm9iamVjdFwiICE9IHR5cGVvZiB0IHx8IG51bGwgPT09IHQgfHwgdCBpbnN0YW5jZW9mIEFycmF5IHx8IHQgaW5zdGFuY2VvZiBEYXRlIHx8IHQgaW5zdGFuY2VvZiBhdCB8fCB0IGluc3RhbmNlb2Ygc3UgfHwgdCBpbnN0YW5jZW9mIGV1IHx8IHQgaW5zdGFuY2VvZiBQYyB8fCB0IGluc3RhbmNlb2YgbnUpO1xufVxuXG5mdW5jdGlvbiBSdSh0LCBlLCBuKSB7XG4gICAgaWYgKCFBdShuKSB8fCAhZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gXCJvYmplY3RcIiA9PSB0eXBlb2YgdCAmJiBudWxsICE9PSB0ICYmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YodCkgPT09IE9iamVjdC5wcm90b3R5cGUgfHwgbnVsbCA9PT0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHQpKTtcbiAgICB9KG4pKSB7XG4gICAgICAgIGNvbnN0IHMgPSBwYyhuKTtcbiAgICAgICAgdGhyb3cgXCJhbiBvYmplY3RcIiA9PT0gcyA/IGUuVWEodCArIFwiIGEgY3VzdG9tIG9iamVjdFwiKSA6IGUuVWEodCArIFwiIFwiICsgcyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0aGF0IGNhbGxzIGZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcoKSBidXQgd3JhcHMgYW55IGVycm9yIHRocm93bi5cbiAqLyBmdW5jdGlvbiBQdSh0LCBlLCBuKSB7XG4gICAgaWYgKChcbiAgICAvLyBJZiByZXF1aXJlZCwgcmVwbGFjZSB0aGUgRmllbGRQYXRoIENvbXBhdCBjbGFzcyB3aXRoIHdpdGggdGhlIGZpcmVzdG9yZS1leHBcbiAgICAvLyBGaWVsZFBhdGguXG4gICAgZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSkgaW5zdGFuY2VvZiBaYykgcmV0dXJuIGUuX2ludGVybmFsUGF0aDtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSkgcmV0dXJuIHZ1KHQsIGUpO1xuICAgIHRocm93IFZ1KFwiRmllbGQgcGF0aCBhcmd1bWVudHMgbXVzdCBiZSBvZiB0eXBlIHN0cmluZyBvciBGaWVsZFBhdGguXCIsIHQsIFxuICAgIC8qIGhhc0NvbnZlcnRlcj0gKi8gITEsIFxuICAgIC8qIHBhdGg9ICovIHZvaWQgMCwgbik7XG59XG5cbi8qKlxuICogTWF0Y2hlcyBhbnkgY2hhcmFjdGVycyBpbiBhIGZpZWxkIHBhdGggc3RyaW5nIHRoYXQgYXJlIHJlc2VydmVkLlxuICovIGNvbnN0IGJ1ID0gbmV3IFJlZ0V4cChcIlt+XFxcXCovXFxcXFtcXFxcXV1cIik7XG5cbi8qKlxuICogV3JhcHMgZnJvbURvdFNlcGFyYXRlZFN0cmluZyB3aXRoIGFuIGVycm9yIG1lc3NhZ2UgYWJvdXQgdGhlIG1ldGhvZCB0aGF0XG4gKiB3YXMgdGhyb3duLlxuICogQHBhcmFtIG1ldGhvZE5hbWUgLSBUaGUgcHVibGljbHkgdmlzaWJsZSBtZXRob2QgbmFtZVxuICogQHBhcmFtIHBhdGggLSBUaGUgZG90LXNlcGFyYXRlZCBzdHJpbmcgZm9ybSBvZiBhIGZpZWxkIHBhdGggd2hpY2ggd2lsbCBiZVxuICogc3BsaXQgb24gZG90cy5cbiAqIEBwYXJhbSB0YXJnZXREb2MgLSBUaGUgZG9jdW1lbnQgYWdhaW5zdCB3aGljaCB0aGUgZmllbGQgcGF0aCB3aWxsIGJlXG4gKiBldmFsdWF0ZWQuXG4gKi8gZnVuY3Rpb24gdnUodCwgZSwgbikge1xuICAgIGlmIChlLnNlYXJjaChidSkgPj0gMCkgdGhyb3cgVnUoYEludmFsaWQgZmllbGQgcGF0aCAoJHtlfSkuIFBhdGhzIG11c3Qgbm90IGNvbnRhaW4gJ34nLCAnKicsICcvJywgJ1snLCBvciAnXSdgLCB0LCBcbiAgICAvKiBoYXNDb252ZXJ0ZXI9ICovICExLCBcbiAgICAvKiBwYXRoPSAqLyB2b2lkIDAsIG4pO1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBuZXcgWmMoLi4uZS5zcGxpdChcIi5cIikpLl9pbnRlcm5hbFBhdGg7XG4gICAgfSBjYXRjaCAocykge1xuICAgICAgICB0aHJvdyBWdShgSW52YWxpZCBmaWVsZCBwYXRoICgke2V9KS4gUGF0aHMgbXVzdCBub3QgYmUgZW1wdHksIGJlZ2luIHdpdGggJy4nLCBlbmQgd2l0aCAnLicsIG9yIGNvbnRhaW4gJy4uJ2AsIHQsIFxuICAgICAgICAvKiBoYXNDb252ZXJ0ZXI9ICovICExLCBcbiAgICAgICAgLyogcGF0aD0gKi8gdm9pZCAwLCBuKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFZ1KHQsIGUsIG4sIHMsIGkpIHtcbiAgICBjb25zdCByID0gcyAmJiAhcy5pc0VtcHR5KCksIG8gPSB2b2lkIDAgIT09IGk7XG4gICAgbGV0IGEgPSBgRnVuY3Rpb24gJHtlfSgpIGNhbGxlZCB3aXRoIGludmFsaWQgZGF0YWA7XG4gICAgbiAmJiAoYSArPSBcIiAodmlhIGB0b0ZpcmVzdG9yZSgpYClcIiksIGEgKz0gXCIuIFwiO1xuICAgIGxldCBjID0gXCJcIjtcbiAgICByZXR1cm4gKHIgfHwgbykgJiYgKGMgKz0gXCIgKGZvdW5kXCIsIHIgJiYgKGMgKz0gYCBpbiBmaWVsZCAke3N9YCksIG8gJiYgKGMgKz0gYCBpbiBkb2N1bWVudCAke2l9YCksIFxuICAgIGMgKz0gXCIpXCIpLCBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGEgKyB0ICsgYyk7XG59XG5cbi8qKiBDaGVja3MgYGhheXN0YWNrYCBpZiBGaWVsZFBhdGggYG5lZWRsZWAgaXMgcHJlc2VudC4gUnVucyBpbiBPKG4pLiAqLyBmdW5jdGlvbiBTdSh0LCBlKSB7XG4gICAgcmV0dXJuIHQuc29tZSgodCA9PiB0LmlzRXF1YWwoZSkpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBgRG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbnMgZGF0YSByZWFkIGZyb20gYSBkb2N1bWVudCBpbiB5b3VyIEZpcmVzdG9yZVxuICogZGF0YWJhc2UuIFRoZSBkYXRhIGNhbiBiZSBleHRyYWN0ZWQgd2l0aCBgLmRhdGEoKWAgb3IgYC5nZXQoPGZpZWxkPilgIHRvXG4gKiBnZXQgYSBzcGVjaWZpYyBmaWVsZC5cbiAqXG4gKiBGb3IgYSBgRG9jdW1lbnRTbmFwc2hvdGAgdGhhdCBwb2ludHMgdG8gYSBub24tZXhpc3RpbmcgZG9jdW1lbnQsIGFueSBkYXRhXG4gKiBhY2Nlc3Mgd2lsbCByZXR1cm4gJ3VuZGVmaW5lZCcuIFlvdSBjYW4gdXNlIHRoZSBgZXhpc3RzKClgIG1ldGhvZCB0b1xuICogZXhwbGljaXRseSB2ZXJpZnkgYSBkb2N1bWVudCdzIGV4aXN0ZW5jZS5cbiAqLyBjbGFzcyBEdSB7XG4gICAgLy8gTm90ZTogVGhpcyBjbGFzcyBpcyBzdHJpcHBlZCBkb3duIHZlcnNpb24gb2YgdGhlIERvY3VtZW50U25hcHNob3QgaW5cbiAgICAvLyB0aGUgbGVnYWN5IFNESy4gVGhlIGNoYW5nZXMgYXJlOlxuICAgIC8vIC0gTm8gc3VwcG9ydCBmb3IgU25hcHNob3RNZXRhZGF0YS5cbiAgICAvLyAtIE5vIHN1cHBvcnQgZm9yIFNuYXBzaG90T3B0aW9ucy5cbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciBwcm90ZWN0ZWQgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IHQsIHRoaXMuX3VzZXJEYXRhV3JpdGVyID0gZSwgdGhpcy5fa2V5ID0gbiwgdGhpcy5fZG9jdW1lbnQgPSBzLCBcbiAgICAgICAgdGhpcy5fY29udmVydGVyID0gaTtcbiAgICB9XG4gICAgLyoqIFByb3BlcnR5IG9mIHRoZSBgRG9jdW1lbnRTbmFwc2hvdGAgdGhhdCBwcm92aWRlcyB0aGUgZG9jdW1lbnQncyBJRC4gKi8gICAgZ2V0IGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fa2V5LnBhdGgubGFzdFNlZ21lbnQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGBEb2N1bWVudFJlZmVyZW5jZWAgZm9yIHRoZSBkb2N1bWVudCBpbmNsdWRlZCBpbiB0aGUgYERvY3VtZW50U25hcHNob3RgLlxuICAgICAqLyAgICBnZXQgcmVmKCkge1xuICAgICAgICByZXR1cm4gbmV3IFBjKHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fY29udmVydGVyLCB0aGlzLl9rZXkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTaWduYWxzIHdoZXRoZXIgb3Igbm90IHRoZSBkb2N1bWVudCBhdCB0aGUgc25hcHNob3QncyBsb2NhdGlvbiBleGlzdHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBkb2N1bWVudCBleGlzdHMuXG4gICAgICovICAgIGV4aXN0cygpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHRoaXMuX2RvY3VtZW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgYXMgYW4gYE9iamVjdGAuIFJldHVybnMgYHVuZGVmaW5lZGAgaWZcbiAgICAgKiB0aGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEFuIGBPYmplY3RgIGNvbnRhaW5pbmcgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgb3IgYHVuZGVmaW5lZGBcbiAgICAgKiBpZiB0aGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cbiAgICAgKi8gICAgZGF0YSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RvY3VtZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fY29udmVydGVyKSB7XG4gICAgICAgICAgICAgICAgLy8gV2Ugb25seSB3YW50IHRvIHVzZSB0aGUgY29udmVydGVyIGFuZCBjcmVhdGUgYSBuZXcgRG9jdW1lbnRTbmFwc2hvdFxuICAgICAgICAgICAgICAgIC8vIGlmIGEgY29udmVydGVyIGhhcyBiZWVuIHByb3ZpZGVkLlxuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgQ3UodGhpcy5fZmlyZXN0b3JlLCB0aGlzLl91c2VyRGF0YVdyaXRlciwgdGhpcy5fa2V5LCB0aGlzLl9kb2N1bWVudCwgXG4gICAgICAgICAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY29udmVydGVyLmZyb21GaXJlc3RvcmUodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydFZhbHVlKHRoaXMuX2RvY3VtZW50LmRhdGEudmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyB0aGUgZmllbGQgc3BlY2lmaWVkIGJ5IGBmaWVsZFBhdGhgLiBSZXR1cm5zIGB1bmRlZmluZWRgIGlmIHRoZVxuICAgICAqIGRvY3VtZW50IG9yIGZpZWxkIGRvZXNuJ3QgZXhpc3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmllbGRQYXRoIC0gVGhlIHBhdGggKGZvciBleGFtcGxlICdmb28nIG9yICdmb28uYmFyJykgdG8gYSBzcGVjaWZpY1xuICAgICAqIGZpZWxkLlxuICAgICAqIEByZXR1cm5zIFRoZSBkYXRhIGF0IHRoZSBzcGVjaWZpZWQgZmllbGQgbG9jYXRpb24gb3IgdW5kZWZpbmVkIGlmIG5vIHN1Y2hcbiAgICAgKiBmaWVsZCBleGlzdHMgaW4gdGhlIGRvY3VtZW50LlxuICAgICAqL1xuICAgIC8vIFdlIGFyZSB1c2luZyBgYW55YCBoZXJlIHRvIGF2b2lkIGFuIGV4cGxpY2l0IGNhc3QgYnkgb3VyIHVzZXJzLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgZ2V0KHQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RvY3VtZW50KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5fZG9jdW1lbnQuZGF0YS5maWVsZChOdShcIkRvY3VtZW50U25hcHNob3QuZ2V0XCIsIHQpKTtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSBlKSByZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydFZhbHVlKGUpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbnMgZGF0YSByZWFkIGZyb20gYSBkb2N1bWVudCBpbiB5b3VyXG4gKiBGaXJlc3RvcmUgZGF0YWJhc2UgYXMgcGFydCBvZiBhIHF1ZXJ5LiBUaGUgZG9jdW1lbnQgaXMgZ3VhcmFudGVlZCB0byBleGlzdFxuICogYW5kIGl0cyBkYXRhIGNhbiBiZSBleHRyYWN0ZWQgd2l0aCBgLmRhdGEoKWAgb3IgYC5nZXQoPGZpZWxkPilgIHRvIGdldCBhXG4gKiBzcGVjaWZpYyBmaWVsZC5cbiAqXG4gKiBBIGBRdWVyeURvY3VtZW50U25hcHNob3RgIG9mZmVycyB0aGUgc2FtZSBBUEkgc3VyZmFjZSBhcyBhXG4gKiBgRG9jdW1lbnRTbmFwc2hvdGAuIFNpbmNlIHF1ZXJ5IHJlc3VsdHMgY29udGFpbiBvbmx5IGV4aXN0aW5nIGRvY3VtZW50cywgdGhlXG4gKiBgZXhpc3RzYCBwcm9wZXJ0eSB3aWxsIGFsd2F5cyBiZSB0cnVlIGFuZCBgZGF0YSgpYCB3aWxsIG5ldmVyIHJldHVyblxuICogJ3VuZGVmaW5lZCcuXG4gKi8gY2xhc3MgQ3UgZXh0ZW5kcyBEdSB7XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IGFzIGFuIGBPYmplY3RgLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHJldHVybnMgQW4gYE9iamVjdGAgY29udGFpbmluZyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKi9cbiAgICBkYXRhKCkge1xuICAgICAgICByZXR1cm4gc3VwZXIuZGF0YSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdGhhdCBjYWxscyBgZnJvbURvdFNlcGFyYXRlZFN0cmluZygpYCBidXQgd3JhcHMgYW55IGVycm9yIHRocm93bi5cbiAqLyBmdW5jdGlvbiBOdSh0LCBlKSB7XG4gICAgcmV0dXJuIFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgPyB2dSh0LCBlKSA6IGUgaW5zdGFuY2VvZiBaYyA/IGUuX2ludGVybmFsUGF0aCA6IGUuX2RlbGVnYXRlLl9pbnRlcm5hbFBhdGg7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIE1ldGFkYXRhIGFib3V0IGEgc25hcHNob3QsIGRlc2NyaWJpbmcgdGhlIHN0YXRlIG9mIHRoZSBzbmFwc2hvdC5cbiAqLyBjbGFzcyBrdSB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuaGFzUGVuZGluZ1dyaXRlcyA9IHQsIHRoaXMuZnJvbUNhY2hlID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYFNuYXBzaG90TWV0YWRhdGFgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgYFNuYXBzaG90TWV0YWRhdGFgIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYFNuYXBzaG90TWV0YWRhdGFgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYXNQZW5kaW5nV3JpdGVzID09PSB0Lmhhc1BlbmRpbmdXcml0ZXMgJiYgdGhpcy5mcm9tQ2FjaGUgPT09IHQuZnJvbUNhY2hlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBEb2N1bWVudFNuYXBzaG90YCBjb250YWlucyBkYXRhIHJlYWQgZnJvbSBhIGRvY3VtZW50IGluIHlvdXIgRmlyZXN0b3JlXG4gKiBkYXRhYmFzZS4gVGhlIGRhdGEgY2FuIGJlIGV4dHJhY3RlZCB3aXRoIGAuZGF0YSgpYCBvciBgLmdldCg8ZmllbGQ+KWAgdG9cbiAqIGdldCBhIHNwZWNpZmljIGZpZWxkLlxuICpcbiAqIEZvciBhIGBEb2N1bWVudFNuYXBzaG90YCB0aGF0IHBvaW50cyB0byBhIG5vbi1leGlzdGluZyBkb2N1bWVudCwgYW55IGRhdGFcbiAqIGFjY2VzcyB3aWxsIHJldHVybiAndW5kZWZpbmVkJy4gWW91IGNhbiB1c2UgdGhlIGBleGlzdHMoKWAgbWV0aG9kIHRvXG4gKiBleHBsaWNpdGx5IHZlcmlmeSBhIGRvY3VtZW50J3MgZXhpc3RlbmNlLlxuICovIGNsYXNzIHh1IGV4dGVuZHMgRHUge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yIHByb3RlY3RlZCAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGksIHIpIHtcbiAgICAgICAgc3VwZXIodCwgZSwgbiwgcywgciksIHRoaXMuX2ZpcmVzdG9yZSA9IHQsIHRoaXMuX2ZpcmVzdG9yZUltcGwgPSB0LCB0aGlzLm1ldGFkYXRhID0gaTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJvcGVydHkgb2YgdGhlIGBEb2N1bWVudFNuYXBzaG90YCB0aGF0IHNpZ25hbHMgd2hldGhlciBvciBub3QgdGhlIGRhdGFcbiAgICAgKiBleGlzdHMuIFRydWUgaWYgdGhlIGRvY3VtZW50IGV4aXN0cy5cbiAgICAgKi8gICAgZXhpc3RzKCkge1xuICAgICAgICByZXR1cm4gc3VwZXIuZXhpc3RzKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBhcyBhbiBgT2JqZWN0YC4gUmV0dXJucyBgdW5kZWZpbmVkYCBpZlxuICAgICAqIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCwgYEZpZWxkVmFsdWUuc2VydmVyVGltZXN0YW1wKClgIHZhbHVlcyB0aGF0IGhhdmUgbm90IHlldCBiZWVuXG4gICAgICogc2V0IHRvIHRoZWlyIGZpbmFsIHZhbHVlIHdpbGwgYmUgcmV0dXJuZWQgYXMgYG51bGxgLiBZb3UgY2FuIG92ZXJyaWRlXG4gICAgICogdGhpcyBieSBwYXNzaW5nIGFuIG9wdGlvbnMgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBbiBvcHRpb25zIG9iamVjdCB0byBjb25maWd1cmUgaG93IGRhdGEgaXMgcmV0cmlldmVkIGZyb21cbiAgICAgKiB0aGUgc25hcHNob3QgKGZvciBleGFtcGxlIHRoZSBkZXNpcmVkIGJlaGF2aW9yIGZvciBzZXJ2ZXIgdGltZXN0YW1wcyB0aGF0XG4gICAgICogaGF2ZSBub3QgeWV0IGJlZW4gc2V0IHRvIHRoZWlyIGZpbmFsIHZhbHVlKS5cbiAgICAgKiBAcmV0dXJucyBBbiBgT2JqZWN0YCBjb250YWluaW5nIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IG9yIGB1bmRlZmluZWRgIGlmXG4gICAgICogdGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QuXG4gICAgICovICAgIGRhdGEodCA9IHt9KSB7XG4gICAgICAgIGlmICh0aGlzLl9kb2N1bWVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2NvbnZlcnRlcikge1xuICAgICAgICAgICAgICAgIC8vIFdlIG9ubHkgd2FudCB0byB1c2UgdGhlIGNvbnZlcnRlciBhbmQgY3JlYXRlIGEgbmV3IERvY3VtZW50U25hcHNob3RcbiAgICAgICAgICAgICAgICAvLyBpZiBhIGNvbnZlcnRlciBoYXMgYmVlbiBwcm92aWRlZC5cbiAgICAgICAgICAgICAgICBjb25zdCBlID0gbmV3ICR1KHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fdXNlckRhdGFXcml0ZXIsIHRoaXMuX2tleSwgdGhpcy5fZG9jdW1lbnQsIHRoaXMubWV0YWRhdGEsIFxuICAgICAgICAgICAgICAgIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnZlcnRlci5mcm9tRmlyZXN0b3JlKGUsIHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJEYXRhV3JpdGVyLmNvbnZlcnRWYWx1ZSh0aGlzLl9kb2N1bWVudC5kYXRhLnZhbHVlLCB0LnNlcnZlclRpbWVzdGFtcHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyB0aGUgZmllbGQgc3BlY2lmaWVkIGJ5IGBmaWVsZFBhdGhgLiBSZXR1cm5zIGB1bmRlZmluZWRgIGlmIHRoZVxuICAgICAqIGRvY3VtZW50IG9yIGZpZWxkIGRvZXNuJ3QgZXhpc3QuXG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0LCBhIGBGaWVsZFZhbHVlLnNlcnZlclRpbWVzdGFtcCgpYCB0aGF0IGhhcyBub3QgeWV0IGJlZW4gc2V0IHRvXG4gICAgICogaXRzIGZpbmFsIHZhbHVlIHdpbGwgYmUgcmV0dXJuZWQgYXMgYG51bGxgLiBZb3UgY2FuIG92ZXJyaWRlIHRoaXMgYnlcbiAgICAgKiBwYXNzaW5nIGFuIG9wdGlvbnMgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpZWxkUGF0aCAtIFRoZSBwYXRoIChmb3IgZXhhbXBsZSAnZm9vJyBvciAnZm9vLmJhcicpIHRvIGEgc3BlY2lmaWNcbiAgICAgKiBmaWVsZC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9wdGlvbnMgb2JqZWN0IHRvIGNvbmZpZ3VyZSBob3cgdGhlIGZpZWxkIGlzIHJldHJpZXZlZFxuICAgICAqIGZyb20gdGhlIHNuYXBzaG90IChmb3IgZXhhbXBsZSB0aGUgZGVzaXJlZCBiZWhhdmlvciBmb3Igc2VydmVyIHRpbWVzdGFtcHNcbiAgICAgKiB0aGF0IGhhdmUgbm90IHlldCBiZWVuIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSkuXG4gICAgICogQHJldHVybnMgVGhlIGRhdGEgYXQgdGhlIHNwZWNpZmllZCBmaWVsZCBsb2NhdGlvbiBvciB1bmRlZmluZWQgaWYgbm8gc3VjaFxuICAgICAqIGZpZWxkIGV4aXN0cyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICovXG4gICAgLy8gV2UgYXJlIHVzaW5nIGBhbnlgIGhlcmUgdG8gYXZvaWQgYW4gZXhwbGljaXQgY2FzdCBieSBvdXIgdXNlcnMuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBnZXQodCwgZSA9IHt9KSB7XG4gICAgICAgIGlmICh0aGlzLl9kb2N1bWVudCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuX2RvY3VtZW50LmRhdGEuZmllbGQoTnUoXCJEb2N1bWVudFNuYXBzaG90LmdldFwiLCB0KSk7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gbikgcmV0dXJuIHRoaXMuX3VzZXJEYXRhV3JpdGVyLmNvbnZlcnRWYWx1ZShuLCBlLnNlcnZlclRpbWVzdGFtcHMpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbnMgZGF0YSByZWFkIGZyb20gYSBkb2N1bWVudCBpbiB5b3VyXG4gKiBGaXJlc3RvcmUgZGF0YWJhc2UgYXMgcGFydCBvZiBhIHF1ZXJ5LiBUaGUgZG9jdW1lbnQgaXMgZ3VhcmFudGVlZCB0byBleGlzdFxuICogYW5kIGl0cyBkYXRhIGNhbiBiZSBleHRyYWN0ZWQgd2l0aCBgLmRhdGEoKWAgb3IgYC5nZXQoPGZpZWxkPilgIHRvIGdldCBhXG4gKiBzcGVjaWZpYyBmaWVsZC5cbiAqXG4gKiBBIGBRdWVyeURvY3VtZW50U25hcHNob3RgIG9mZmVycyB0aGUgc2FtZSBBUEkgc3VyZmFjZSBhcyBhXG4gKiBgRG9jdW1lbnRTbmFwc2hvdGAuIFNpbmNlIHF1ZXJ5IHJlc3VsdHMgY29udGFpbiBvbmx5IGV4aXN0aW5nIGRvY3VtZW50cywgdGhlXG4gKiBgZXhpc3RzYCBwcm9wZXJ0eSB3aWxsIGFsd2F5cyBiZSB0cnVlIGFuZCBgZGF0YSgpYCB3aWxsIG5ldmVyIHJldHVyblxuICogJ3VuZGVmaW5lZCcuXG4gKi8gY2xhc3MgJHUgZXh0ZW5kcyB4dSB7XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IGFzIGFuIGBPYmplY3RgLlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCwgYEZpZWxkVmFsdWUuc2VydmVyVGltZXN0YW1wKClgIHZhbHVlcyB0aGF0IGhhdmUgbm90IHlldCBiZWVuXG4gICAgICogc2V0IHRvIHRoZWlyIGZpbmFsIHZhbHVlIHdpbGwgYmUgcmV0dXJuZWQgYXMgYG51bGxgLiBZb3UgY2FuIG92ZXJyaWRlXG4gICAgICogdGhpcyBieSBwYXNzaW5nIGFuIG9wdGlvbnMgb2JqZWN0LlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBbiBvcHRpb25zIG9iamVjdCB0byBjb25maWd1cmUgaG93IGRhdGEgaXMgcmV0cmlldmVkIGZyb21cbiAgICAgKiB0aGUgc25hcHNob3QgKGZvciBleGFtcGxlIHRoZSBkZXNpcmVkIGJlaGF2aW9yIGZvciBzZXJ2ZXIgdGltZXN0YW1wcyB0aGF0XG4gICAgICogaGF2ZSBub3QgeWV0IGJlZW4gc2V0IHRvIHRoZWlyIGZpbmFsIHZhbHVlKS5cbiAgICAgKiBAcmV0dXJucyBBbiBgT2JqZWN0YCBjb250YWluaW5nIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50LlxuICAgICAqL1xuICAgIGRhdGEodCA9IHt9KSB7XG4gICAgICAgIHJldHVybiBzdXBlci5kYXRhKHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBRdWVyeVNuYXBzaG90YCBjb250YWlucyB6ZXJvIG9yIG1vcmUgYERvY3VtZW50U25hcHNob3RgIG9iamVjdHNcbiAqIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0cyBvZiBhIHF1ZXJ5LiBUaGUgZG9jdW1lbnRzIGNhbiBiZSBhY2Nlc3NlZCBhcyBhblxuICogYXJyYXkgdmlhIHRoZSBgZG9jc2AgcHJvcGVydHkgb3IgZW51bWVyYXRlZCB1c2luZyB0aGUgYGZvckVhY2hgIG1ldGhvZC4gVGhlXG4gKiBudW1iZXIgb2YgZG9jdW1lbnRzIGNhbiBiZSBkZXRlcm1pbmVkIHZpYSB0aGUgYGVtcHR5YCBhbmQgYHNpemVgXG4gKiBwcm9wZXJ0aWVzLlxuICovIGNsYXNzIEZ1IHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gdCwgdGhpcy5fdXNlckRhdGFXcml0ZXIgPSBlLCB0aGlzLl9zbmFwc2hvdCA9IHMsIHRoaXMubWV0YWRhdGEgPSBuZXcga3Uocy5oYXNQZW5kaW5nV3JpdGVzLCBzLmZyb21DYWNoZSksIFxuICAgICAgICB0aGlzLnF1ZXJ5ID0gbjtcbiAgICB9XG4gICAgLyoqIEFuIGFycmF5IG9mIGFsbCB0aGUgZG9jdW1lbnRzIGluIHRoZSBgUXVlcnlTbmFwc2hvdGAuICovICAgIGdldCBkb2NzKCkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmZvckVhY2goKGUgPT4gdC5wdXNoKGUpKSksIHQ7XG4gICAgfVxuICAgIC8qKiBUaGUgbnVtYmVyIG9mIGRvY3VtZW50cyBpbiB0aGUgYFF1ZXJ5U25hcHNob3RgLiAqLyAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NuYXBzaG90LmRvY3Muc2l6ZTtcbiAgICB9XG4gICAgLyoqIFRydWUgaWYgdGhlcmUgYXJlIG5vIGRvY3VtZW50cyBpbiB0aGUgYFF1ZXJ5U25hcHNob3RgLiAqLyAgICBnZXQgZW1wdHkoKSB7XG4gICAgICAgIHJldHVybiAwID09PSB0aGlzLnNpemU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVudW1lcmF0ZXMgYWxsIG9mIHRoZSBkb2N1bWVudHMgaW4gdGhlIGBRdWVyeVNuYXBzaG90YC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjYWxsYmFjayAtIEEgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIHdpdGggYSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBmb3JcbiAgICAgKiBlYWNoIGRvY3VtZW50IGluIHRoZSBzbmFwc2hvdC5cbiAgICAgKiBAcGFyYW0gdGhpc0FyZyAtIFRoZSBgdGhpc2AgYmluZGluZyBmb3IgdGhlIGNhbGxiYWNrLlxuICAgICAqLyAgICBmb3JFYWNoKHQsIGUpIHtcbiAgICAgICAgdGhpcy5fc25hcHNob3QuZG9jcy5mb3JFYWNoKChuID0+IHtcbiAgICAgICAgICAgIHQuY2FsbChlLCBuZXcgJHUodGhpcy5fZmlyZXN0b3JlLCB0aGlzLl91c2VyRGF0YVdyaXRlciwgbi5rZXksIG4sIG5ldyBrdSh0aGlzLl9zbmFwc2hvdC5tdXRhdGVkS2V5cy5oYXMobi5rZXkpLCB0aGlzLl9zbmFwc2hvdC5mcm9tQ2FjaGUpLCB0aGlzLnF1ZXJ5LmNvbnZlcnRlcikpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gYXJyYXkgb2YgdGhlIGRvY3VtZW50cyBjaGFuZ2VzIHNpbmNlIHRoZSBsYXN0IHNuYXBzaG90LiBJZiB0aGlzXG4gICAgICogaXMgdGhlIGZpcnN0IHNuYXBzaG90LCBhbGwgZG9jdW1lbnRzIHdpbGwgYmUgaW4gdGhlIGxpc3QgYXMgJ2FkZGVkJ1xuICAgICAqIGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIGBTbmFwc2hvdExpc3Rlbk9wdGlvbnNgIHRoYXQgY29udHJvbCB3aGV0aGVyIG1ldGFkYXRhLW9ubHlcbiAgICAgKiBjaGFuZ2VzIChpLmUuIG9ubHkgYERvY3VtZW50U25hcHNob3QubWV0YWRhdGFgIGNoYW5nZWQpIHNob3VsZCB0cmlnZ2VyXG4gICAgICogc25hcHNob3QgZXZlbnRzLlxuICAgICAqLyAgICBkb2NDaGFuZ2VzKHQgPSB7fSkge1xuICAgICAgICBjb25zdCBlID0gISF0LmluY2x1ZGVNZXRhZGF0YUNoYW5nZXM7XG4gICAgICAgIGlmIChlICYmIHRoaXMuX3NuYXBzaG90LmV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiVG8gaW5jbHVkZSBtZXRhZGF0YSBjaGFuZ2VzIHdpdGggeW91ciBkb2N1bWVudCBjaGFuZ2VzLCB5b3UgbXVzdCBhbHNvIHBhc3MgeyBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOnRydWUgfSB0byBvblNuYXBzaG90KCkuXCIpO1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVkQ2hhbmdlcyAmJiB0aGlzLl9jYWNoZWRDaGFuZ2VzSW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyA9PT0gZSB8fCAodGhpcy5fY2FjaGVkQ2hhbmdlcyA9IFxuICAgICAgICAvKiogQ2FsY3VsYXRlcyB0aGUgYXJyYXkgb2YgYERvY3VtZW50Q2hhbmdlYHMgZm9yIGEgZ2l2ZW4gYFZpZXdTbmFwc2hvdGAuICovXG4gICAgICAgIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGlmICh0Ll9zbmFwc2hvdC5vbGREb2NzLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIGxldCBlID0gMDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdC5fc25hcHNob3QuZG9jQ2hhbmdlcy5tYXAoKG4gPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhZGRlZFwiLFxuICAgICAgICAgICAgICAgICAgICBkb2M6IG5ldyAkdSh0Ll9maXJlc3RvcmUsIHQuX3VzZXJEYXRhV3JpdGVyLCBuLmRvYy5rZXksIG4uZG9jLCBuZXcga3UodC5fc25hcHNob3QubXV0YXRlZEtleXMuaGFzKG4uZG9jLmtleSksIHQuX3NuYXBzaG90LmZyb21DYWNoZSksIHQucXVlcnkuY29udmVydGVyKSxcbiAgICAgICAgICAgICAgICAgICAgb2xkSW5kZXg6IC0xLFxuICAgICAgICAgICAgICAgICAgICBuZXdJbmRleDogZSsrXG4gICAgICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvLyBBIGBEb2N1bWVudFNldGAgdGhhdCBpcyB1cGRhdGVkIGluY3JlbWVudGFsbHkgYXMgY2hhbmdlcyBhcmUgYXBwbGllZCB0byB1c2VcbiAgICAgICAgICAgICAgICAvLyB0byBsb29rdXAgdGhlIGluZGV4IG9mIGEgZG9jdW1lbnQuXG4gICAgICAgICAgICAgICAgbGV0IG4gPSB0Ll9zbmFwc2hvdC5vbGREb2NzO1xuICAgICAgICAgICAgICAgIHJldHVybiB0Ll9zbmFwc2hvdC5kb2NDaGFuZ2VzLmZpbHRlcigodCA9PiBlIHx8IDMgLyogTWV0YWRhdGEgKi8gIT09IHQudHlwZSkpLm1hcCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgJHUodC5fZmlyZXN0b3JlLCB0Ll91c2VyRGF0YVdyaXRlciwgZS5kb2Mua2V5LCBlLmRvYywgbmV3IGt1KHQuX3NuYXBzaG90Lm11dGF0ZWRLZXlzLmhhcyhlLmRvYy5rZXkpLCB0Ll9zbmFwc2hvdC5mcm9tQ2FjaGUpLCB0LnF1ZXJ5LmNvbnZlcnRlcik7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpID0gLTEsIHIgPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDAgLyogQWRkZWQgKi8gIT09IGUudHlwZSAmJiAoaSA9IG4uaW5kZXhPZihlLmRvYy5rZXkpLCBuID0gbi5kZWxldGUoZS5kb2Mua2V5KSksIFxuICAgICAgICAgICAgICAgICAgICAxIC8qIFJlbW92ZWQgKi8gIT09IGUudHlwZSAmJiAobiA9IG4uYWRkKGUuZG9jKSwgciA9IG4uaW5kZXhPZihlLmRvYy5rZXkpKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogT3UoZS50eXBlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvYzogcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9sZEluZGV4OiBpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3SW5kZXg6IHJcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0odGhpcywgZSksIHRoaXMuX2NhY2hlZENoYW5nZXNJbmNsdWRlTWV0YWRhdGFDaGFuZ2VzID0gZSksIHRoaXMuX2NhY2hlZENoYW5nZXM7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBPdSh0KSB7XG4gICAgc3dpdGNoICh0KSB7XG4gICAgICBjYXNlIDAgLyogQWRkZWQgKi8gOlxuICAgICAgICByZXR1cm4gXCJhZGRlZFwiO1xuXG4gICAgICBjYXNlIDIgLyogTW9kaWZpZWQgKi8gOlxuICAgICAgY2FzZSAzIC8qIE1ldGFkYXRhICovIDpcbiAgICAgICAgcmV0dXJuIFwibW9kaWZpZWRcIjtcblxuICAgICAgY2FzZSAxIC8qIFJlbW92ZWQgKi8gOlxuICAgICAgICByZXR1cm4gXCJyZW1vdmVkXCI7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBMKCk7XG4gICAgfVxufVxuXG4vLyBUT0RPKGZpcmVzdG9yZWV4cCk6IEFkZCB0ZXN0cyBmb3Igc25hcHNob3RFcXVhbCB3aXRoIGRpZmZlcmVudCBzbmFwc2hvdFxuLy8gbWV0YWRhdGFcbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBwcm92aWRlZCBzbmFwc2hvdHMgYXJlIGVxdWFsLlxuICpcbiAqIEBwYXJhbSBsZWZ0IC0gQSBzbmFwc2hvdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHJpZ2h0IC0gQSBzbmFwc2hvdCB0byBjb21wYXJlLlxuICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgc25hcHNob3RzIGFyZSBlcXVhbC5cbiAqLyBmdW5jdGlvbiBNdSh0LCBlKSB7XG4gICAgcmV0dXJuIHQgaW5zdGFuY2VvZiB4dSAmJiBlIGluc3RhbmNlb2YgeHUgPyB0Ll9maXJlc3RvcmUgPT09IGUuX2ZpcmVzdG9yZSAmJiB0Ll9rZXkuaXNFcXVhbChlLl9rZXkpICYmIChudWxsID09PSB0Ll9kb2N1bWVudCA/IG51bGwgPT09IGUuX2RvY3VtZW50IDogdC5fZG9jdW1lbnQuaXNFcXVhbChlLl9kb2N1bWVudCkpICYmIHQuX2NvbnZlcnRlciA9PT0gZS5fY29udmVydGVyIDogdCBpbnN0YW5jZW9mIEZ1ICYmIGUgaW5zdGFuY2VvZiBGdSAmJiAodC5fZmlyZXN0b3JlID09PSBlLl9maXJlc3RvcmUgJiYgTmModC5xdWVyeSwgZS5xdWVyeSkgJiYgdC5tZXRhZGF0YS5pc0VxdWFsKGUubWV0YWRhdGEpICYmIHQuX3NuYXBzaG90LmlzRXF1YWwoZS5fc25hcHNob3QpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gZnVuY3Rpb24gTHUodCkge1xuICAgIGlmIChwZSh0KSAmJiAwID09PSB0LmV4cGxpY2l0T3JkZXJCeS5sZW5ndGgpIHRocm93IG5ldyBqKEsuVU5JTVBMRU1FTlRFRCwgXCJsaW1pdFRvTGFzdCgpIHF1ZXJpZXMgcmVxdWlyZSBzcGVjaWZ5aW5nIGF0IGxlYXN0IG9uZSBvcmRlckJ5KCkgY2xhdXNlXCIpO1xufVxuXG4vKipcbiAqIEEgYFF1ZXJ5Q29uc3RyYWludGAgaXMgdXNlZCB0byBuYXJyb3cgdGhlIHNldCBvZiBkb2N1bWVudHMgcmV0dXJuZWQgYnkgYVxuICogRmlyZXN0b3JlIHF1ZXJ5LiBgUXVlcnlDb25zdHJhaW50YHMgYXJlIGNyZWF0ZWQgYnkgaW52b2tpbmcge0BsaW5rIHdoZXJlfSxcbiAqIHtAbGluayBvcmRlckJ5fSwge0BsaW5rIChzdGFydEF0OjEpfSwge0BsaW5rIChzdGFydEFmdGVyOjEpfSwge0BsaW5rXG4gKiBlbmRCZWZvcmU6MX0sIHtAbGluayAoZW5kQXQ6MSl9LCB7QGxpbmsgbGltaXR9IG9yIHtAbGluayBsaW1pdFRvTGFzdH0gYW5kXG4gKiBjYW4gdGhlbiBiZSBwYXNzZWQgdG8ge0BsaW5rIHF1ZXJ5fSB0byBjcmVhdGUgYSBuZXcgcXVlcnkgaW5zdGFuY2UgdGhhdFxuICogYWxzbyBjb250YWlucyB0aGlzIGBRdWVyeUNvbnN0cmFpbnRgLlxuICovIGNsYXNzIEJ1IHt9XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBpbW11dGFibGUgaW5zdGFuY2Ugb2Yge0BsaW5rIFF1ZXJ5fSB0aGF0IGlzIGV4dGVuZGVkIHRvIGFsc28gaW5jbHVkZVxuICogYWRkaXRpb25hbCBxdWVyeSBjb25zdHJhaW50cy5cbiAqXG4gKiBAcGFyYW0gcXVlcnkgLSBUaGUge0BsaW5rIFF1ZXJ5fSBpbnN0YW5jZSB0byB1c2UgYXMgYSBiYXNlIGZvciB0aGUgbmV3IGNvbnN0cmFpbnRzLlxuICogQHBhcmFtIHF1ZXJ5Q29uc3RyYWludHMgLSBUaGUgbGlzdCBvZiB7QGxpbmsgUXVlcnlDb25zdHJhaW50fXMgdG8gYXBwbHkuXG4gKiBAdGhyb3dzIGlmIGFueSBvZiB0aGUgcHJvdmlkZWQgcXVlcnkgY29uc3RyYWludHMgY2Fubm90IGJlIGNvbWJpbmVkIHdpdGggdGhlXG4gKiBleGlzdGluZyBvciBuZXcgY29uc3RyYWludHMuXG4gKi8gZnVuY3Rpb24gVXUodCwgLi4uZSkge1xuICAgIGZvciAoY29uc3QgbiBvZiBlKSB0ID0gbi5fYXBwbHkodCk7XG4gICAgcmV0dXJuIHQ7XG59XG5cbmNsYXNzIHF1IGV4dGVuZHMgQnUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5HYSA9IHQsIHRoaXMuemEgPSBlLCB0aGlzLkhhID0gbiwgdGhpcy50eXBlID0gXCJ3aGVyZVwiO1xuICAgIH1cbiAgICBfYXBwbHkodCkge1xuICAgICAgICBjb25zdCBlID0gaHUodC5maXJlc3RvcmUpLCBuID0gZnVuY3Rpb24odCwgZSwgbiwgcywgaSwgciwgbykge1xuICAgICAgICAgICAgbGV0IGE7XG4gICAgICAgICAgICBpZiAoaS5pc0tleUZpZWxkKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoXCJhcnJheS1jb250YWluc1wiIC8qIEFSUkFZX0NPTlRBSU5TICovID09PSByIHx8IFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogQVJSQVlfQ09OVEFJTlNfQU5ZICovID09PSByKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIFF1ZXJ5LiBZb3UgY2FuJ3QgcGVyZm9ybSAnJHtyfScgcXVlcmllcyBvbiBGaWVsZFBhdGguZG9jdW1lbnRJZCgpLmApO1xuICAgICAgICAgICAgICAgIGlmIChcImluXCIgLyogSU4gKi8gPT09IHIgfHwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gPT09IHIpIHtcbiAgICAgICAgICAgICAgICAgICAgc2gobywgcik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIG8pIGUucHVzaChuaChzLCB0LCBuKSk7XG4gICAgICAgICAgICAgICAgICAgIGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIGEgPSBuaChzLCB0LCBvKTtcbiAgICAgICAgICAgIH0gZWxzZSBcImluXCIgLyogSU4gKi8gIT09IHIgJiYgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gIT09IHIgJiYgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi8gIT09IHIgfHwgc2gobywgciksIFxuICAgICAgICAgICAgYSA9IFR1KG4sIGUsIG8sIFxuICAgICAgICAgICAgLyogYWxsb3dBcnJheXM9ICovIFwiaW5cIiAvKiBJTiAqLyA9PT0gciB8fCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyA9PT0gcik7XG4gICAgICAgICAgICBjb25zdCBjID0gWnQuY3JlYXRlKGksIHIsIGEpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5WKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IEVlKHQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gbiAmJiAhbi5pc0VxdWFsKGUuZmllbGQpKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBBbGwgd2hlcmUgZmlsdGVycyB3aXRoIGFuIGluZXF1YWxpdHkgKDwsIDw9LCAhPSwgbm90LWluLCA+LCBvciA+PSkgbXVzdCBiZSBvbiB0aGUgc2FtZSBmaWVsZC4gQnV0IHlvdSBoYXZlIGluZXF1YWxpdHkgZmlsdGVycyBvbiAnJHtuLnRvU3RyaW5nKCl9JyBhbmQgJyR7ZS5maWVsZC50b1N0cmluZygpfSdgKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcyA9IFRlKHQpO1xuICAgICAgICAgICAgICAgICAgICBudWxsICE9PSBzICYmIGloKHQsIGUuZmllbGQsIHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBuID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdC5maWx0ZXJzKSBpZiAoZS5pbmRleE9mKG4ub3ApID49IDApIHJldHVybiBuLm9wO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9KHQsIFxuICAgICAgICAgICAgICAgIC8qKlxuICogR2l2ZW4gYW4gb3BlcmF0b3IsIHJldHVybnMgdGhlIHNldCBvZiBvcGVyYXRvcnMgdGhhdCBjYW5ub3QgYmUgdXNlZCB3aXRoIGl0LlxuICpcbiAqIE9wZXJhdG9ycyBpbiBhIHF1ZXJ5IG11c3QgYWRoZXJlIHRvIHRoZSBmb2xsb3dpbmcgc2V0IG9mIHJ1bGVzOlxuICogMS4gT25seSBvbmUgYXJyYXkgb3BlcmF0b3IgaXMgYWxsb3dlZC5cbiAqIDIuIE9ubHkgb25lIGRpc2p1bmN0aXZlIG9wZXJhdG9yIGlzIGFsbG93ZWQuXG4gKiAzLiBgTk9UX0VRVUFMYCBjYW5ub3QgYmUgdXNlZCB3aXRoIGFub3RoZXIgYE5PVF9FUVVBTGAgb3BlcmF0b3IuXG4gKiA0LiBgTk9UX0lOYCBjYW5ub3QgYmUgdXNlZCB3aXRoIGFycmF5LCBkaXNqdW5jdGl2ZSwgb3IgYE5PVF9FUVVBTGAgb3BlcmF0b3JzLlxuICpcbiAqIEFycmF5IG9wZXJhdG9yczogYEFSUkFZX0NPTlRBSU5TYCwgYEFSUkFZX0NPTlRBSU5TX0FOWWBcbiAqIERpc2p1bmN0aXZlIG9wZXJhdG9yczogYElOYCwgYEFSUkFZX0NPTlRBSU5TX0FOWWAsIGBOT1RfSU5gXG4gKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodCkge1xuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIhPVwiIC8qIE5PVF9FUVVBTCAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyBcIiE9XCIgLyogTk9UX0VRVUFMICovICwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gXTtcblxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhcnJheS1jb250YWluc1wiIC8qIEFSUkFZX0NPTlRBSU5TICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbIFwiYXJyYXktY29udGFpbnNcIiAvKiBBUlJBWV9DT05UQUlOUyAqLyAsIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogQVJSQVlfQ09OVEFJTlNfQU5ZICovICwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gXTtcblxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpblwiIC8qIElOICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogQVJSQVlfQ09OVEFJTlNfQU5ZICovICwgXCJpblwiIC8qIElOICovICwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gXTtcblxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgXCJhcnJheS1jb250YWluc1wiIC8qIEFSUkFZX0NPTlRBSU5TICovICwgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi8gLCBcImluXCIgLyogSU4gKi8gLCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyBcImFycmF5LWNvbnRhaW5zXCIgLyogQVJSQVlfQ09OVEFJTlMgKi8gLCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyAsIFwiaW5cIiAvKiBJTiAqLyAsIFwibm90LWluXCIgLyogTk9UX0lOICovICwgXCIhPVwiIC8qIE5PVF9FUVVBTCAqLyBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0oZS5vcCkpO1xuICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBuKSBcbiAgICAgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2Ugd2hlbiBpdCdzIGEgZHVwbGljYXRlIG9wIHRvIGdpdmUgYSBzbGlnaHRseSBjbGVhcmVyIGVycm9yIG1lc3NhZ2UuXG4gICAgICAgICAgICAgICAgdGhyb3cgbiA9PT0gZS5vcCA/IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFlvdSBjYW5ub3QgdXNlIG1vcmUgdGhhbiBvbmUgJyR7ZS5vcC50b1N0cmluZygpfScgZmlsdGVyLmApIDogbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gWW91IGNhbm5vdCB1c2UgJyR7ZS5vcC50b1N0cmluZygpfScgZmlsdGVycyB3aXRoICcke24udG9TdHJpbmcoKX0nIGZpbHRlcnMuYCk7XG4gICAgICAgICAgICB9KHQsIGMpLCBjO1xuICAgICAgICB9KHQuX3F1ZXJ5LCBcIndoZXJlXCIsIGUsIHQuZmlyZXN0b3JlLl9kYXRhYmFzZUlkLCB0aGlzLkdhLCB0aGlzLnphLCB0aGlzLkhhKTtcbiAgICAgICAgcmV0dXJuIG5ldyBiYyh0LmZpcmVzdG9yZSwgdC5jb252ZXJ0ZXIsIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LmZpbHRlcnMuY29uY2F0KFsgZSBdKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgX2UodC5wYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgdC5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgbiwgdC5saW1pdCwgdC5saW1pdFR5cGUsIHQuc3RhcnRBdCwgdC5lbmRBdCk7XG4gICAgICAgIH0odC5fcXVlcnksIG4pKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBRdWVyeUNvbnN0cmFpbnR9IHRoYXQgZW5mb3JjZXMgdGhhdCBkb2N1bWVudHMgbXVzdCBjb250YWluIHRoZVxuICogc3BlY2lmaWVkIGZpZWxkIGFuZCB0aGF0IHRoZSB2YWx1ZSBzaG91bGQgc2F0aXNmeSB0aGUgcmVsYXRpb24gY29uc3RyYWludFxuICogcHJvdmlkZWQuXG4gKlxuICogQHBhcmFtIGZpZWxkUGF0aCAtIFRoZSBwYXRoIHRvIGNvbXBhcmVcbiAqIEBwYXJhbSBvcFN0ciAtIFRoZSBvcGVyYXRpb24gc3RyaW5nIChlLmcgXCImbHQ7XCIsIFwiJmx0Oz1cIiwgXCI9PVwiLCBcIiZsdDtcIixcbiAqICAgXCImbHQ7PVwiLCBcIiE9XCIpLlxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIGZvciBjb21wYXJpc29uXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCB7QGxpbmsgUXVlcnl9LlxuICovIGZ1bmN0aW9uIEt1KHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gZSwgaSA9IE51KFwid2hlcmVcIiwgdCk7XG4gICAgcmV0dXJuIG5ldyBxdShpLCBzLCBuKTtcbn1cblxuY2xhc3MganUgZXh0ZW5kcyBCdSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLkdhID0gdCwgdGhpcy5KYSA9IGUsIHRoaXMudHlwZSA9IFwib3JkZXJCeVwiO1xuICAgIH1cbiAgICBfYXBwbHkodCkge1xuICAgICAgICBjb25zdCBlID0gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IHQuc3RhcnRBdCkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgcXVlcnkuIFlvdSBtdXN0IG5vdCBjYWxsIHN0YXJ0QXQoKSBvciBzdGFydEFmdGVyKCkgYmVmb3JlIGNhbGxpbmcgb3JkZXJCeSgpLlwiKTtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSB0LmVuZEF0KSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBxdWVyeS4gWW91IG11c3Qgbm90IGNhbGwgZW5kQXQoKSBvciBlbmRCZWZvcmUoKSBiZWZvcmUgY2FsbGluZyBvcmRlckJ5KCkuXCIpO1xuICAgICAgICAgICAgY29uc3QgcyA9IG5ldyBsZShlLCBuKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IFRlKHQpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGZpcnN0IG9yZGVyIGJ5LiBJdCBtdXN0IG1hdGNoIGFueSBpbmVxdWFsaXR5LlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gRWUodCk7XG4gICAgICAgICAgICAgICAgICAgIG51bGwgIT09IG4gJiYgaWgodCwgbiwgZS5maWVsZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSh0LCBzKSwgcztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIENyZWF0ZSBhIGBCb3VuZGAgZnJvbSBhIHF1ZXJ5IGFuZCBhIGRvY3VtZW50LlxuICpcbiAqIE5vdGUgdGhhdCB0aGUgYEJvdW5kYCB3aWxsIGFsd2F5cyBpbmNsdWRlIHRoZSBrZXkgb2YgdGhlIGRvY3VtZW50XG4gKiBhbmQgc28gb25seSB0aGUgcHJvdmlkZWQgZG9jdW1lbnQgd2lsbCBjb21wYXJlIGVxdWFsIHRvIHRoZSByZXR1cm5lZFxuICogcG9zaXRpb24uXG4gKlxuICogV2lsbCB0aHJvdyBpZiB0aGUgZG9jdW1lbnQgZG9lcyBub3QgY29udGFpbiBhbGwgZmllbGRzIG9mIHRoZSBvcmRlciBieVxuICogb2YgdGhlIHF1ZXJ5IG9yIGlmIGFueSBvZiB0aGUgZmllbGRzIGluIHRoZSBvcmRlciBieSBhcmUgYW4gdW5jb21taXR0ZWRcbiAqIHNlcnZlciB0aW1lc3RhbXAuXG4gKi8gKHQuX3F1ZXJ5LCB0aGlzLkdhLCB0aGlzLkphKTtcbiAgICAgICAgcmV0dXJuIG5ldyBiYyh0LmZpcmVzdG9yZSwgdC5jb252ZXJ0ZXIsIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogdmFsaWRhdGUgdGhhdCBvcmRlckJ5IGRvZXMgbm90IGxpc3QgdGhlIHNhbWUga2V5IHR3aWNlLlxuICAgICAgICAgICAgY29uc3QgbiA9IHQuZXhwbGljaXRPcmRlckJ5LmNvbmNhdChbIGUgXSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IF9lKHQucGF0aCwgdC5jb2xsZWN0aW9uR3JvdXAsIG4sIHQuZmlsdGVycy5zbGljZSgpLCB0LmxpbWl0LCB0LmxpbWl0VHlwZSwgdC5zdGFydEF0LCB0LmVuZEF0KTtcbiAgICAgICAgfSh0Ll9xdWVyeSwgZSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIFF1ZXJ5Q29uc3RyYWludH0gdGhhdCBzb3J0cyB0aGUgcXVlcnkgcmVzdWx0IGJ5IHRoZVxuICogc3BlY2lmaWVkIGZpZWxkLCBvcHRpb25hbGx5IGluIGRlc2NlbmRpbmcgb3JkZXIgaW5zdGVhZCBvZiBhc2NlbmRpbmcuXG4gKlxuICogQHBhcmFtIGZpZWxkUGF0aCAtIFRoZSBmaWVsZCB0byBzb3J0IGJ5LlxuICogQHBhcmFtIGRpcmVjdGlvblN0ciAtIE9wdGlvbmFsIGRpcmVjdGlvbiB0byBzb3J0IGJ5ICgnYXNjJyBvciAnZGVzYycpLiBJZlxuICogbm90IHNwZWNpZmllZCwgb3JkZXIgd2lsbCBiZSBhc2NlbmRpbmcuXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCB7QGxpbmsgUXVlcnl9LlxuICovIGZ1bmN0aW9uIFF1KHQsIGUgPSBcImFzY1wiKSB7XG4gICAgY29uc3QgbiA9IGUsIHMgPSBOdShcIm9yZGVyQnlcIiwgdCk7XG4gICAgcmV0dXJuIG5ldyBqdShzLCBuKTtcbn1cblxuY2xhc3MgV3UgZXh0ZW5kcyBCdSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLnR5cGUgPSB0LCB0aGlzLllhID0gZSwgdGhpcy5YYSA9IG47XG4gICAgfVxuICAgIF9hcHBseSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgYmModC5maXJlc3RvcmUsIHQuY29udmVydGVyLCBQZSh0Ll9xdWVyeSwgdGhpcy5ZYSwgdGhpcy5YYSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIFF1ZXJ5Q29uc3RyYWludH0gdGhhdCBvbmx5IHJldHVybnMgdGhlIGZpcnN0IG1hdGNoaW5nIGRvY3VtZW50cy5cbiAqXG4gKiBAcGFyYW0gbGltaXQgLSBUaGUgbWF4aW11bSBudW1iZXIgb2YgaXRlbXMgdG8gcmV0dXJuLlxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQge0BsaW5rIFF1ZXJ5fS5cbiAqLyBmdW5jdGlvbiBHdSh0KSB7XG4gICAgcmV0dXJuIEVjKFwibGltaXRcIiwgdCksIG5ldyBXdShcImxpbWl0XCIsIHQsIFwiRlwiIC8qIEZpcnN0ICovKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIFF1ZXJ5Q29uc3RyYWludH0gdGhhdCBvbmx5IHJldHVybnMgdGhlIGxhc3QgbWF0Y2hpbmcgZG9jdW1lbnRzLlxuICpcbiAqIFlvdSBtdXN0IHNwZWNpZnkgYXQgbGVhc3Qgb25lIGBvcmRlckJ5YCBjbGF1c2UgZm9yIGBsaW1pdFRvTGFzdGAgcXVlcmllcyxcbiAqIG90aGVyd2lzZSBhbiBleGNlcHRpb24gd2lsbCBiZSB0aHJvd24gZHVyaW5nIGV4ZWN1dGlvbi5cbiAqXG4gKiBAcGFyYW0gbGltaXQgLSBUaGUgbWF4aW11bSBudW1iZXIgb2YgaXRlbXMgdG8gcmV0dXJuLlxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQge0BsaW5rIFF1ZXJ5fS5cbiAqLyBmdW5jdGlvbiB6dSh0KSB7XG4gICAgcmV0dXJuIEVjKFwibGltaXRUb0xhc3RcIiwgdCksIG5ldyBXdShcImxpbWl0VG9MYXN0XCIsIHQsIFwiTFwiIC8qIExhc3QgKi8pO1xufVxuXG5jbGFzcyBIdSBleHRlbmRzIEJ1IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMudHlwZSA9IHQsIHRoaXMuWmEgPSBlLCB0aGlzLnRjID0gbjtcbiAgICB9XG4gICAgX2FwcGx5KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IGVoKHQsIHRoaXMudHlwZSwgdGhpcy5aYSwgdGhpcy50Yyk7XG4gICAgICAgIHJldHVybiBuZXcgYmModC5maXJlc3RvcmUsIHQuY29udmVydGVyLCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IF9lKHQucGF0aCwgdC5jb2xsZWN0aW9uR3JvdXAsIHQuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIHQuZmlsdGVycy5zbGljZSgpLCB0LmxpbWl0LCB0LmxpbWl0VHlwZSwgZSwgdC5lbmRBdCk7XG4gICAgICAgIH0odC5fcXVlcnksIGUpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEp1KC4uLnQpIHtcbiAgICByZXR1cm4gbmV3IEh1KFwic3RhcnRBdFwiLCB0LCAvKmJlZm9yZT0qLyAhMCk7XG59XG5cbmZ1bmN0aW9uIFl1KC4uLnQpIHtcbiAgICByZXR1cm4gbmV3IEh1KFwic3RhcnRBZnRlclwiLCB0LCBcbiAgICAvKmJlZm9yZT0qLyAhMSk7XG59XG5cbmNsYXNzIFh1IGV4dGVuZHMgQnUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy50eXBlID0gdCwgdGhpcy5aYSA9IGUsIHRoaXMudGMgPSBuO1xuICAgIH1cbiAgICBfYXBwbHkodCkge1xuICAgICAgICBjb25zdCBlID0gZWgodCwgdGhpcy50eXBlLCB0aGlzLlphLCB0aGlzLnRjKTtcbiAgICAgICAgcmV0dXJuIG5ldyBiYyh0LmZpcmVzdG9yZSwgdC5jb252ZXJ0ZXIsIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgX2UodC5wYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgdC5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgdC5maWx0ZXJzLnNsaWNlKCksIHQubGltaXQsIHQubGltaXRUeXBlLCB0LnN0YXJ0QXQsIGUpO1xuICAgICAgICB9KHQuX3F1ZXJ5LCBlKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBadSguLi50KSB7XG4gICAgcmV0dXJuIG5ldyBYdShcImVuZEJlZm9yZVwiLCB0LCAvKmJlZm9yZT0qLyAhMCk7XG59XG5cbmZ1bmN0aW9uIHRoKC4uLnQpIHtcbiAgICByZXR1cm4gbmV3IFh1KFwiZW5kQXRcIiwgdCwgLypiZWZvcmU9Ki8gITEpO1xufVxuXG4vKiogSGVscGVyIGZ1bmN0aW9uIHRvIGNyZWF0ZSBhIGJvdW5kIGZyb20gYSBkb2N1bWVudCBvciBmaWVsZHMgKi8gZnVuY3Rpb24gZWgodCwgZSwgbiwgcykge1xuICAgIGlmIChuWzBdID0gZ2V0TW9kdWxhckluc3RhbmNlKG5bMF0pLCBuWzBdIGluc3RhbmNlb2YgRHUpIHJldHVybiBmdW5jdGlvbih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIGlmICghcykgdGhyb3cgbmV3IGooSy5OT1RfRk9VTkQsIGBDYW4ndCB1c2UgYSBEb2N1bWVudFNuYXBzaG90IHRoYXQgZG9lc24ndCBleGlzdCBmb3IgJHtufSgpLmApO1xuICAgICAgICBjb25zdCByID0gW107XG4gICAgICAgIC8vIEJlY2F1c2UgcGVvcGxlIGV4cGVjdCB0byBjb250aW51ZS9lbmQgYSBxdWVyeSBhdCB0aGUgZXhhY3QgZG9jdW1lbnRcbiAgICAgICAgLy8gcHJvdmlkZWQsIHdlIG5lZWQgdG8gdXNlIHRoZSBpbXBsaWNpdCBzb3J0IG9yZGVyIHJhdGhlciB0aGFuIHRoZSBleHBsaWNpdFxuICAgICAgICAvLyBzb3J0IG9yZGVyLCBiZWNhdXNlIGl0J3MgZ3VhcmFudGVlZCB0byBjb250YWluIHRoZSBkb2N1bWVudCBrZXkuIFRoYXQgd2F5XG4gICAgICAgIC8vIHRoZSBwb3NpdGlvbiBiZWNvbWVzIHVuYW1iaWd1b3VzIGFuZCB0aGUgcXVlcnkgY29udGludWVzL2VuZHMgZXhhY3RseSBhdFxuICAgICAgICAvLyB0aGUgcHJvdmlkZWQgZG9jdW1lbnQuIFdpdGhvdXQgdGhlIGtleSAoYnkgdXNpbmcgdGhlIGV4cGxpY2l0IHNvcnRcbiAgICAgICAgLy8gb3JkZXJzKSwgbXVsdGlwbGUgZG9jdW1lbnRzIGNvdWxkIG1hdGNoIHRoZSBwb3NpdGlvbiwgeWllbGRpbmcgZHVwbGljYXRlXG4gICAgICAgIC8vIHJlc3VsdHMuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIEFlKHQpKSBpZiAobi5maWVsZC5pc0tleUZpZWxkKCkpIHIucHVzaChPdChlLCBzLmtleSkpOyBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBzLmRhdGEuZmllbGQobi5maWVsZCk7XG4gICAgICAgICAgICBpZiAoQXQodCkpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgJ0ludmFsaWQgcXVlcnkuIFlvdSBhcmUgdHJ5aW5nIHRvIHN0YXJ0IG9yIGVuZCBhIHF1ZXJ5IHVzaW5nIGEgZG9jdW1lbnQgZm9yIHdoaWNoIHRoZSBmaWVsZCBcIicgKyBuLmZpZWxkICsgJ1wiIGlzIGFuIHVuY29tbWl0dGVkIHNlcnZlciB0aW1lc3RhbXAuIChTaW5jZSB0aGUgdmFsdWUgb2YgdGhpcyBmaWVsZCBpcyB1bmtub3duLCB5b3UgY2Fubm90IHN0YXJ0L2VuZCBhIHF1ZXJ5IHdpdGggaXQuKScpO1xuICAgICAgICAgICAgaWYgKG51bGwgPT09IHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gbi5maWVsZC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBZb3UgYXJlIHRyeWluZyB0byBzdGFydCBvciBlbmQgYSBxdWVyeSB1c2luZyBhIGRvY3VtZW50IGZvciB3aGljaCB0aGUgZmllbGQgJyR7dH0nICh1c2VkIGFzIHRoZSBvcmRlckJ5KSBkb2VzIG5vdCBleGlzdC5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHIucHVzaCh0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IHVlKHIsIGkpO1xuICAgIH1cbiAgICAvKipcbiAqIENvbnZlcnRzIGEgbGlzdCBvZiBmaWVsZCB2YWx1ZXMgdG8gYSBgQm91bmRgIGZvciB0aGUgZ2l2ZW4gcXVlcnkuXG4gKi8gKHQuX3F1ZXJ5LCB0LmZpcmVzdG9yZS5fZGF0YWJhc2VJZCwgZSwgblswXS5fZG9jdW1lbnQsIHMpO1xuICAgIHtcbiAgICAgICAgY29uc3QgaSA9IGh1KHQuZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIHMsIGksIHIpIHtcbiAgICAgICAgICAgIC8vIFVzZSBleHBsaWNpdCBvcmRlciBieSdzIGJlY2F1c2UgaXQgaGFzIHRvIG1hdGNoIHRoZSBxdWVyeSB0aGUgdXNlciBtYWRlXG4gICAgICAgICAgICBjb25zdCBvID0gdC5leHBsaWNpdE9yZGVyQnk7XG4gICAgICAgICAgICBpZiAoaS5sZW5ndGggPiBvLmxlbmd0aCkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgVG9vIG1hbnkgYXJndW1lbnRzIHByb3ZpZGVkIHRvICR7c30oKS4gVGhlIG51bWJlciBvZiBhcmd1bWVudHMgbXVzdCBiZSBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIG51bWJlciBvZiBvcmRlckJ5KCkgY2xhdXNlc2ApO1xuICAgICAgICAgICAgY29uc3QgYSA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCBpLmxlbmd0aDsgcisrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYyA9IGlbcl07XG4gICAgICAgICAgICAgICAgaWYgKG9bcl0uZmllbGQuaXNLZXlGaWVsZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcInN0cmluZ1wiICE9IHR5cGVvZiBjKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBFeHBlY3RlZCBhIHN0cmluZyBmb3IgZG9jdW1lbnQgSUQgaW4gJHtzfSgpLCBidXQgZ290IGEgJHt0eXBlb2YgY31gKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFJZSh0KSAmJiAtMSAhPT0gYy5pbmRleE9mKFwiL1wiKSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyBhIGNvbGxlY3Rpb24gYW5kIG9yZGVyaW5nIGJ5IEZpZWxkUGF0aC5kb2N1bWVudElkKCksIHRoZSB2YWx1ZSBwYXNzZWQgdG8gJHtzfSgpIG11c3QgYmUgYSBwbGFpbiBkb2N1bWVudCBJRCwgYnV0ICcke2N9JyBjb250YWlucyBhIHNsYXNoLmApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gdC5wYXRoLmNoaWxkKGR0LmZyb21TdHJpbmcoYykpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIVN0LmlzRG9jdW1lbnRLZXkobikpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgYSBjb2xsZWN0aW9uIGdyb3VwIGFuZCBvcmRlcmluZyBieSBGaWVsZFBhdGguZG9jdW1lbnRJZCgpLCB0aGUgdmFsdWUgcGFzc2VkIHRvICR7c30oKSBtdXN0IHJlc3VsdCBpbiBhIHZhbGlkIGRvY3VtZW50IHBhdGgsIGJ1dCAnJHtufScgaXMgbm90IGJlY2F1c2UgaXQgY29udGFpbnMgYW4gb2RkIG51bWJlciBvZiBzZWdtZW50cy5gKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaSA9IG5ldyBTdChuKTtcbiAgICAgICAgICAgICAgICAgICAgYS5wdXNoKE90KGUsIGkpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gVHUobiwgcywgYyk7XG4gICAgICAgICAgICAgICAgICAgIGEucHVzaCh0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IHVlKGEsIHIpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUGFyc2VzIHRoZSBnaXZlbiBgZG9jdW1lbnRJZFZhbHVlYCBpbnRvIGEgYFJlZmVyZW5jZVZhbHVlYCwgdGhyb3dpbmdcbiAqIGFwcHJvcHJpYXRlIGVycm9ycyBpZiB0aGUgdmFsdWUgaXMgYW55dGhpbmcgb3RoZXIgdGhhbiBhIGBEb2N1bWVudFJlZmVyZW5jZWBcbiAqIG9yIGBzdHJpbmdgLCBvciBpZiB0aGUgc3RyaW5nIGlzIG1hbGZvcm1lZC5cbiAqLyAodC5fcXVlcnksIHQuZmlyZXN0b3JlLl9kYXRhYmFzZUlkLCBpLCBlLCBuLCBzKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG5oKHQsIGUsIG4pIHtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgKG4gPSBnZXRNb2R1bGFySW5zdGFuY2UobikpKSB7XG4gICAgICAgIGlmIChcIlwiID09PSBuKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyB3aXRoIEZpZWxkUGF0aC5kb2N1bWVudElkKCksIHlvdSBtdXN0IHByb3ZpZGUgYSB2YWxpZCBkb2N1bWVudCBJRCwgYnV0IGl0IHdhcyBhbiBlbXB0eSBzdHJpbmcuXCIpO1xuICAgICAgICBpZiAoIUllKGUpICYmIC0xICE9PSBuLmluZGV4T2YoXCIvXCIpKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBieSBGaWVsZFBhdGguZG9jdW1lbnRJZCgpLCB5b3UgbXVzdCBwcm92aWRlIGEgcGxhaW4gZG9jdW1lbnQgSUQsIGJ1dCAnJHtufScgY29udGFpbnMgYSAnLycgY2hhcmFjdGVyLmApO1xuICAgICAgICBjb25zdCBzID0gZS5wYXRoLmNoaWxkKGR0LmZyb21TdHJpbmcobikpO1xuICAgICAgICBpZiAoIVN0LmlzRG9jdW1lbnRLZXkocykpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgYSBjb2xsZWN0aW9uIGdyb3VwIGJ5IEZpZWxkUGF0aC5kb2N1bWVudElkKCksIHRoZSB2YWx1ZSBwcm92aWRlZCBtdXN0IHJlc3VsdCBpbiBhIHZhbGlkIGRvY3VtZW50IHBhdGgsIGJ1dCAnJHtzfScgaXMgbm90IGJlY2F1c2UgaXQgaGFzIGFuIG9kZCBudW1iZXIgb2Ygc2VnbWVudHMgKCR7cy5sZW5ndGh9KS5gKTtcbiAgICAgICAgcmV0dXJuIE90KHQsIG5ldyBTdChzKSk7XG4gICAgfVxuICAgIGlmIChuIGluc3RhbmNlb2YgUGMpIHJldHVybiBPdCh0LCBuLl9rZXkpO1xuICAgIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgd2l0aCBGaWVsZFBhdGguZG9jdW1lbnRJZCgpLCB5b3UgbXVzdCBwcm92aWRlIGEgdmFsaWQgc3RyaW5nIG9yIGEgRG9jdW1lbnRSZWZlcmVuY2UsIGJ1dCBpdCB3YXM6ICR7cGMobil9LmApO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0IHRoZSB2YWx1ZSBwYXNzZWQgaW50byBhIGRpc2p1bmN0aXZlIGZpbHRlciBzYXRpc2ZpZXMgYWxsXG4gKiBhcnJheSByZXF1aXJlbWVudHMuXG4gKi8gZnVuY3Rpb24gc2godCwgZSkge1xuICAgIGlmICghQXJyYXkuaXNBcnJheSh0KSB8fCAwID09PSB0Lmxlbmd0aCkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBRdWVyeS4gQSBub24tZW1wdHkgYXJyYXkgaXMgcmVxdWlyZWQgZm9yICcke2UudG9TdHJpbmcoKX0nIGZpbHRlcnMuYCk7XG4gICAgaWYgKHQubGVuZ3RoID4gMTApIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgUXVlcnkuICcke2UudG9TdHJpbmcoKX0nIGZpbHRlcnMgc3VwcG9ydCBhIG1heGltdW0gb2YgMTAgZWxlbWVudHMgaW4gdGhlIHZhbHVlIGFycmF5LmApO1xufVxuXG5mdW5jdGlvbiBpaCh0LCBlLCBuKSB7XG4gICAgaWYgKCFuLmlzRXF1YWwoZSkpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFlvdSBoYXZlIGEgd2hlcmUgZmlsdGVyIHdpdGggYW4gaW5lcXVhbGl0eSAoPCwgPD0sICE9LCBub3QtaW4sID4sIG9yID49KSBvbiBmaWVsZCAnJHtlLnRvU3RyaW5nKCl9JyBhbmQgc28geW91IG11c3QgYWxzbyB1c2UgJyR7ZS50b1N0cmluZygpfScgYXMgeW91ciBmaXJzdCBhcmd1bWVudCB0byBvcmRlckJ5KCksIGJ1dCB5b3VyIGZpcnN0IG9yZGVyQnkoKSBpcyBvbiBmaWVsZCAnJHtuLnRvU3RyaW5nKCl9JyBpbnN0ZWFkLmApO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDb252ZXJ0cyBGaXJlc3RvcmUncyBpbnRlcm5hbCB0eXBlcyB0byB0aGUgSmF2YVNjcmlwdCB0eXBlcyB0aGF0IHdlIGV4cG9zZVxuICogdG8gdGhlIHVzZXIuXG4gKlxuICogQGludGVybmFsXG4gKi8gY2xhc3Mgcmgge1xuICAgIGNvbnZlcnRWYWx1ZSh0LCBlID0gXCJub25lXCIpIHtcbiAgICAgICAgc3dpdGNoIChEdCh0KSkge1xuICAgICAgICAgIGNhc2UgMCAvKiBOdWxsVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgICBjYXNlIDEgLyogQm9vbGVhblZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0LmJvb2xlYW5WYWx1ZTtcblxuICAgICAgICAgIGNhc2UgMiAvKiBOdW1iZXJWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gRXQodC5pbnRlZ2VyVmFsdWUgfHwgdC5kb3VibGVWYWx1ZSk7XG5cbiAgICAgICAgICBjYXNlIDMgLyogVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFRpbWVzdGFtcCh0LnRpbWVzdGFtcFZhbHVlKTtcblxuICAgICAgICAgIGNhc2UgNCAvKiBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0U2VydmVyVGltZXN0YW1wKHQsIGUpO1xuXG4gICAgICAgICAgY2FzZSA1IC8qIFN0cmluZ1ZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0LnN0cmluZ1ZhbHVlO1xuXG4gICAgICAgICAgY2FzZSA2IC8qIEJsb2JWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0Qnl0ZXMoSXQodC5ieXRlc1ZhbHVlKSk7XG5cbiAgICAgICAgICBjYXNlIDcgLyogUmVmVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFJlZmVyZW5jZSh0LnJlZmVyZW5jZVZhbHVlKTtcblxuICAgICAgICAgIGNhc2UgOCAvKiBHZW9Qb2ludFZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRHZW9Qb2ludCh0Lmdlb1BvaW50VmFsdWUpO1xuXG4gICAgICAgICAgY2FzZSA5IC8qIEFycmF5VmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydEFycmF5KHQuYXJyYXlWYWx1ZSwgZSk7XG5cbiAgICAgICAgICBjYXNlIDEwIC8qIE9iamVjdFZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRPYmplY3QodC5tYXBWYWx1ZSwgZSk7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgTCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnZlcnRPYmplY3QodCwgZSkge1xuICAgICAgICBjb25zdCBuID0ge307XG4gICAgICAgIHJldHVybiBodCh0LmZpZWxkcywgKCh0LCBzKSA9PiB7XG4gICAgICAgICAgICBuW3RdID0gdGhpcy5jb252ZXJ0VmFsdWUocywgZSk7XG4gICAgICAgIH0pKSwgbjtcbiAgICB9XG4gICAgY29udmVydEdlb1BvaW50KHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBzdShFdCh0LmxhdGl0dWRlKSwgRXQodC5sb25naXR1ZGUpKTtcbiAgICB9XG4gICAgY29udmVydEFycmF5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuICh0LnZhbHVlcyB8fCBbXSkubWFwKCh0ID0+IHRoaXMuY29udmVydFZhbHVlKHQsIGUpKSk7XG4gICAgfVxuICAgIGNvbnZlcnRTZXJ2ZXJUaW1lc3RhbXAodCwgZSkge1xuICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICBjYXNlIFwicHJldmlvdXNcIjpcbiAgICAgICAgICAgIGNvbnN0IG4gPSBSdCh0KTtcbiAgICAgICAgICAgIHJldHVybiBudWxsID09IG4gPyBudWxsIDogdGhpcy5jb252ZXJ0VmFsdWUobiwgZSk7XG5cbiAgICAgICAgICBjYXNlIFwiZXN0aW1hdGVcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRUaW1lc3RhbXAoUHQodCkpO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnZlcnRUaW1lc3RhbXAodCkge1xuICAgICAgICBjb25zdCBlID0gVHQodCk7XG4gICAgICAgIHJldHVybiBuZXcgYXQoZS5zZWNvbmRzLCBlLm5hbm9zKTtcbiAgICB9XG4gICAgY29udmVydERvY3VtZW50S2V5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGR0LmZyb21TdHJpbmcodCk7XG4gICAgICAgIEIoQXMobikpO1xuICAgICAgICBjb25zdCBzID0gbmV3IGRjKG4uZ2V0KDEpLCBuLmdldCgzKSksIGkgPSBuZXcgU3Qobi5wb3BGaXJzdCg1KSk7XG4gICAgICAgIHJldHVybiBzLmlzRXF1YWwoZSkgfHwgXG4gICAgICAgIC8vIFRPRE8oYi82NDEzMDIwMik6IFNvbWVob3cgc3VwcG9ydCBmb3JlaWduIHJlZmVyZW5jZXMuXG4gICAgICAgIEYoYERvY3VtZW50ICR7aX0gY29udGFpbnMgYSBkb2N1bWVudCByZWZlcmVuY2Ugd2l0aGluIGEgZGlmZmVyZW50IGRhdGFiYXNlICgke3MucHJvamVjdElkfS8ke3MuZGF0YWJhc2V9KSB3aGljaCBpcyBub3Qgc3VwcG9ydGVkLiBJdCB3aWxsIGJlIHRyZWF0ZWQgYXMgYSByZWZlcmVuY2UgaW4gdGhlIGN1cnJlbnQgZGF0YWJhc2UgKCR7ZS5wcm9qZWN0SWR9LyR7ZS5kYXRhYmFzZX0pIGluc3RlYWQuYCksIFxuICAgICAgICBpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQ29udmVydHMgY3VzdG9tIG1vZGVsIG9iamVjdCBvZiB0eXBlIFQgaW50byBgRG9jdW1lbnREYXRhYCBieSBhcHBseWluZyB0aGVcbiAqIGNvbnZlcnRlciBpZiBpdCBleGlzdHMuXG4gKlxuICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHdoZW4gY29udmVydGluZyB1c2VyIG9iamVjdHMgdG8gYERvY3VtZW50RGF0YWBcbiAqIGJlY2F1c2Ugd2Ugd2FudCB0byBwcm92aWRlIHRoZSB1c2VyIHdpdGggYSBtb3JlIHNwZWNpZmljIGVycm9yIG1lc3NhZ2UgaWZcbiAqIHRoZWlyIGBzZXQoKWAgb3IgZmFpbHMgZHVlIHRvIGludmFsaWQgZGF0YSBvcmlnaW5hdGluZyBmcm9tIGEgYHRvRmlyZXN0b3JlKClgXG4gKiBjYWxsLlxuICovIGZ1bmN0aW9uIG9oKHQsIGUsIG4pIHtcbiAgICBsZXQgcztcbiAgICAvLyBDYXN0IHRvIGBhbnlgIGluIG9yZGVyIHRvIHNhdGlzZnkgdGhlIHVuaW9uIHR5cGUgY29uc3RyYWludCBvblxuICAgIC8vIHRvRmlyZXN0b3JlKCkuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICByZXR1cm4gcyA9IHQgPyBuICYmIChuLm1lcmdlIHx8IG4ubWVyZ2VGaWVsZHMpID8gdC50b0ZpcmVzdG9yZShlLCBuKSA6IHQudG9GaXJlc3RvcmUoZSkgOiBlLCBcbiAgICBzO1xufVxuXG5jbGFzcyBhaCBleHRlbmRzIHJoIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZmlyZXN0b3JlID0gdDtcbiAgICB9XG4gICAgY29udmVydEJ5dGVzKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBldSh0KTtcbiAgICB9XG4gICAgY29udmVydFJlZmVyZW5jZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmNvbnZlcnREb2N1bWVudEtleSh0LCB0aGlzLmZpcmVzdG9yZS5fZGF0YWJhc2VJZCk7XG4gICAgICAgIHJldHVybiBuZXcgUGModGhpcy5maXJlc3RvcmUsIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHdyaXRlIGJhdGNoLCB1c2VkIHRvIHBlcmZvcm0gbXVsdGlwbGUgd3JpdGVzIGFzIGEgc2luZ2xlIGF0b21pYyB1bml0LlxuICpcbiAqIEEgYFdyaXRlQmF0Y2hgIG9iamVjdCBjYW4gYmUgYWNxdWlyZWQgYnkgY2FsbGluZyB7QGxpbmsgd3JpdGVCYXRjaH0uIEl0XG4gKiBwcm92aWRlcyBtZXRob2RzIGZvciBhZGRpbmcgd3JpdGVzIHRvIHRoZSB3cml0ZSBiYXRjaC4gTm9uZSBvZiB0aGUgd3JpdGVzXG4gKiB3aWxsIGJlIGNvbW1pdHRlZCAob3IgdmlzaWJsZSBsb2NhbGx5KSB1bnRpbCB7QGxpbmsgV3JpdGVCYXRjaC5jb21taXR9IGlzXG4gKiBjYWxsZWQuXG4gKi8gY2xhc3MgY2gge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSB0LCB0aGlzLl9jb21taXRIYW5kbGVyID0gZSwgdGhpcy5fbXV0YXRpb25zID0gW10sIHRoaXMuX2NvbW1pdHRlZCA9ICExLCBcbiAgICAgICAgdGhpcy5fZGF0YVJlYWRlciA9IGh1KHQpO1xuICAgIH1cbiAgICBzZXQodCwgZSwgbikge1xuICAgICAgICB0aGlzLl92ZXJpZnlOb3RDb21taXR0ZWQoKTtcbiAgICAgICAgY29uc3QgcyA9IHVoKHQsIHRoaXMuX2ZpcmVzdG9yZSksIGkgPSBvaChzLmNvbnZlcnRlciwgZSwgbiksIHIgPSBsdSh0aGlzLl9kYXRhUmVhZGVyLCBcIldyaXRlQmF0Y2guc2V0XCIsIHMuX2tleSwgaSwgbnVsbCAhPT0gcy5jb252ZXJ0ZXIsIG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5fbXV0YXRpb25zLnB1c2goci50b011dGF0aW9uKHMuX2tleSwgSmUubm9uZSgpKSksIHRoaXM7XG4gICAgfVxuICAgIHVwZGF0ZSh0LCBlLCBuLCAuLi5zKSB7XG4gICAgICAgIHRoaXMuX3ZlcmlmeU5vdENvbW1pdHRlZCgpO1xuICAgICAgICBjb25zdCBpID0gdWgodCwgdGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAgICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgICAgICAgICAgICAgIGxldCByO1xuICAgICAgICByZXR1cm4gciA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIChlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpKSB8fCBlIGluc3RhbmNlb2YgWmMgPyBwdSh0aGlzLl9kYXRhUmVhZGVyLCBcIldyaXRlQmF0Y2gudXBkYXRlXCIsIGkuX2tleSwgZSwgbiwgcykgOiB5dSh0aGlzLl9kYXRhUmVhZGVyLCBcIldyaXRlQmF0Y2gudXBkYXRlXCIsIGkuX2tleSwgZSksIFxuICAgICAgICB0aGlzLl9tdXRhdGlvbnMucHVzaChyLnRvTXV0YXRpb24oaS5fa2V5LCBKZS5leGlzdHMoITApKSksIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZXMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoZSBwcm92aWRlZCB7QGxpbmsgRG9jdW1lbnRSZWZlcmVuY2V9LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50UmVmIC0gQSByZWZlcmVuY2UgdG8gdGhlIGRvY3VtZW50IHRvIGJlIGRlbGV0ZWQuXG4gICAgICogQHJldHVybnMgVGhpcyBgV3JpdGVCYXRjaGAgaW5zdGFuY2UuIFVzZWQgZm9yIGNoYWluaW5nIG1ldGhvZCBjYWxscy5cbiAgICAgKi8gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgdGhpcy5fdmVyaWZ5Tm90Q29tbWl0dGVkKCk7XG4gICAgICAgIGNvbnN0IGUgPSB1aCh0LCB0aGlzLl9maXJlc3RvcmUpO1xuICAgICAgICByZXR1cm4gdGhpcy5fbXV0YXRpb25zID0gdGhpcy5fbXV0YXRpb25zLmNvbmNhdChuZXcgaG4oZS5fa2V5LCBKZS5ub25lKCkpKSwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tbWl0cyBhbGwgb2YgdGhlIHdyaXRlcyBpbiB0aGlzIHdyaXRlIGJhdGNoIGFzIGEgc2luZ2xlIGF0b21pYyB1bml0LlxuICAgICAqXG4gICAgICogVGhlIHJlc3VsdCBvZiB0aGVzZSB3cml0ZXMgd2lsbCBvbmx5IGJlIHJlZmxlY3RlZCBpbiBkb2N1bWVudCByZWFkcyB0aGF0XG4gICAgICogb2NjdXIgYWZ0ZXIgdGhlIHJldHVybmVkIHByb21pc2UgcmVzb2x2ZXMuIElmIHRoZSBjbGllbnQgaXMgb2ZmbGluZSwgdGhlXG4gICAgICogd3JpdGUgZmFpbHMuIElmIHlvdSB3b3VsZCBsaWtlIHRvIHNlZSBsb2NhbCBtb2RpZmljYXRpb25zIG9yIGJ1ZmZlciB3cml0ZXNcbiAgICAgKiB1bnRpbCB0aGUgY2xpZW50IGlzIG9ubGluZSwgdXNlIHRoZSBmdWxsIEZpcmVzdG9yZSBTREsuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBIGBQcm9taXNlYCByZXNvbHZlZCBvbmNlIGFsbCBvZiB0aGUgd3JpdGVzIGluIHRoZSBiYXRjaCBoYXZlIGJlZW5cbiAgICAgKiBzdWNjZXNzZnVsbHkgd3JpdHRlbiB0byB0aGUgYmFja2VuZCBhcyBhbiBhdG9taWMgdW5pdCAobm90ZSB0aGF0IGl0IHdvbid0XG4gICAgICogcmVzb2x2ZSB3aGlsZSB5b3UncmUgb2ZmbGluZSkuXG4gICAgICovICAgIGNvbW1pdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZlcmlmeU5vdENvbW1pdHRlZCgpLCB0aGlzLl9jb21taXR0ZWQgPSAhMCwgdGhpcy5fbXV0YXRpb25zLmxlbmd0aCA+IDAgPyB0aGlzLl9jb21taXRIYW5kbGVyKHRoaXMuX211dGF0aW9ucykgOiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgX3ZlcmlmeU5vdENvbW1pdHRlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NvbW1pdHRlZCkgdGhyb3cgbmV3IGooSy5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkEgd3JpdGUgYmF0Y2ggY2FuIG5vIGxvbmdlciBiZSB1c2VkIGFmdGVyIGNvbW1pdCgpIGhhcyBiZWVuIGNhbGxlZC5cIik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB1aCh0LCBlKSB7XG4gICAgaWYgKCh0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpKS5maXJlc3RvcmUgIT09IGUpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJQcm92aWRlZCBkb2N1bWVudCByZWZlcmVuY2UgaXMgZnJvbSBhIGRpZmZlcmVudCBGaXJlc3RvcmUgaW5zdGFuY2UuXCIpO1xuICAgIHJldHVybiB0O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gVE9ETyhtcnNjaG1pZHQpIENvbnNpZGVyIHVzaW5nIGBCYXNlVHJhbnNhY3Rpb25gIGFzIHRoZSBiYXNlIGNsYXNzIGluIHRoZVxuLy8gbGVnYWN5IFNESy5cbi8qKlxuICogQSByZWZlcmVuY2UgdG8gYSB0cmFuc2FjdGlvbi5cbiAqXG4gKiBUaGUgYFRyYW5zYWN0aW9uYCBvYmplY3QgcGFzc2VkIHRvIGEgdHJhbnNhY3Rpb24ncyBgdXBkYXRlRnVuY3Rpb25gIHByb3ZpZGVzXG4gKiB0aGUgbWV0aG9kcyB0byByZWFkIGFuZCB3cml0ZSBkYXRhIHdpdGhpbiB0aGUgdHJhbnNhY3Rpb24gY29udGV4dC4gU2VlXG4gKiB7QGxpbmsgcnVuVHJhbnNhY3Rpb259LlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhpcyBgRG9jdW1lbnRSZWZlcmVuY2VgLlxuICpcbiAqIE5vdGU6IGBnZXREb2MoKWAgYXR0ZW1wdHMgdG8gcHJvdmlkZSB1cC10by1kYXRlIGRhdGEgd2hlbiBwb3NzaWJsZSBieSB3YWl0aW5nXG4gKiBmb3IgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIsIGJ1dCBpdCBtYXkgcmV0dXJuIGNhY2hlZCBkYXRhIG9yIGZhaWwgaWYgeW91IGFyZVxuICogb2ZmbGluZSBhbmQgdGhlIHNlcnZlciBjYW5ub3QgYmUgcmVhY2hlZC4gVG8gc3BlY2lmeSB0aGlzIGJlaGF2aW9yLCBpbnZva2VcbiAqIHtAbGluayBnZXREb2NGcm9tQ2FjaGV9IG9yIHtAbGluayBnZXREb2NGcm9tU2VydmVyfS5cbiAqXG4gKiBAcGFyYW0gcmVmZXJlbmNlIC0gVGhlIHJlZmVyZW5jZSBvZiB0aGUgZG9jdW1lbnQgdG8gZmV0Y2guXG4gKiBAcmV0dXJucyBBIFByb21pc2UgcmVzb2x2ZWQgd2l0aCBhIGBEb2N1bWVudFNuYXBzaG90YCBjb250YWluaW5nIHRoZVxuICogY3VycmVudCBkb2N1bWVudCBjb250ZW50cy5cbiAqL1xuZnVuY3Rpb24gaGgodCkge1xuICAgIHQgPSBUYyh0LCBQYyk7XG4gICAgY29uc3QgZSA9IFRjKHQuZmlyZXN0b3JlLCBPYyk7XG4gICAgcmV0dXJuIHJjKEJjKGUpLCB0Ll9rZXkpLnRoZW4oKG4gPT4gUmgoZSwgdCwgbikpKTtcbn1cblxuY2xhc3MgbGggZXh0ZW5kcyByaCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmZpcmVzdG9yZSA9IHQ7XG4gICAgfVxuICAgIGNvbnZlcnRCeXRlcyh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgZXUodCk7XG4gICAgfVxuICAgIGNvbnZlcnRSZWZlcmVuY2UodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5jb252ZXJ0RG9jdW1lbnRLZXkodCwgdGhpcy5maXJlc3RvcmUuX2RhdGFiYXNlSWQpO1xuICAgICAgICByZXR1cm4gbmV3IFBjKHRoaXMuZmlyZXN0b3JlLCAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhpcyBgRG9jdW1lbnRSZWZlcmVuY2VgIGZyb20gY2FjaGUuXG4gKiBSZXR1cm5zIGFuIGVycm9yIGlmIHRoZSBkb2N1bWVudCBpcyBub3QgY3VycmVudGx5IGNhY2hlZC5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCByZXNvbHZlZCB3aXRoIGEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5pbmcgdGhlXG4gKiBjdXJyZW50IGRvY3VtZW50IGNvbnRlbnRzLlxuICovIGZ1bmN0aW9uIGZoKHQpIHtcbiAgICB0ID0gVGModCwgUGMpO1xuICAgIGNvbnN0IGUgPSBUYyh0LmZpcmVzdG9yZSwgT2MpLCBuID0gQmMoZSksIHMgPSBuZXcgbGgoZSk7XG4gICAgcmV0dXJuIGljKG4sIHQuX2tleSkudGhlbigobiA9PiBuZXcgeHUoZSwgcywgdC5fa2V5LCBuLCBuZXcga3UobnVsbCAhPT0gbiAmJiBuLmhhc0xvY2FsTXV0YXRpb25zLCBcbiAgICAvKiBmcm9tQ2FjaGU9ICovICEwKSwgdC5jb252ZXJ0ZXIpKSk7XG59XG5cbi8qKlxuICogUmVhZHMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoaXMgYERvY3VtZW50UmVmZXJlbmNlYCBmcm9tIHRoZSBzZXJ2ZXIuXG4gKiBSZXR1cm5zIGFuIGVycm9yIGlmIHRoZSBuZXR3b3JrIGlzIG5vdCBhdmFpbGFibGUuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgcmVzb2x2ZWQgd2l0aCBhIGBEb2N1bWVudFNuYXBzaG90YCBjb250YWluaW5nIHRoZVxuICogY3VycmVudCBkb2N1bWVudCBjb250ZW50cy5cbiAqLyBmdW5jdGlvbiBkaCh0KSB7XG4gICAgdCA9IFRjKHQsIFBjKTtcbiAgICBjb25zdCBlID0gVGModC5maXJlc3RvcmUsIE9jKTtcbiAgICByZXR1cm4gcmMoQmMoZSksIHQuX2tleSwge1xuICAgICAgICBzb3VyY2U6IFwic2VydmVyXCJcbiAgICB9KS50aGVuKChuID0+IFJoKGUsIHQsIG4pKSk7XG59XG5cbi8qKlxuICogRXhlY3V0ZXMgdGhlIHF1ZXJ5IGFuZCByZXR1cm5zIHRoZSByZXN1bHRzIGFzIGEgYFF1ZXJ5U25hcHNob3RgLlxuICpcbiAqIE5vdGU6IGBnZXREb2NzKClgIGF0dGVtcHRzIHRvIHByb3ZpZGUgdXAtdG8tZGF0ZSBkYXRhIHdoZW4gcG9zc2libGUgYnlcbiAqIHdhaXRpbmcgZm9yIGRhdGEgZnJvbSB0aGUgc2VydmVyLCBidXQgaXQgbWF5IHJldHVybiBjYWNoZWQgZGF0YSBvciBmYWlsIGlmXG4gKiB5b3UgYXJlIG9mZmxpbmUgYW5kIHRoZSBzZXJ2ZXIgY2Fubm90IGJlIHJlYWNoZWQuIFRvIHNwZWNpZnkgdGhpcyBiZWhhdmlvcixcbiAqIGludm9rZSB7QGxpbmsgZ2V0RG9jc0Zyb21DYWNoZX0gb3Ige0BsaW5rIGdldERvY3NGcm9tU2VydmVyfS5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgd2l0aCB0aGUgcmVzdWx0cyBvZiB0aGUgcXVlcnkuXG4gKi8gZnVuY3Rpb24gd2godCkge1xuICAgIHQgPSBUYyh0LCBiYyk7XG4gICAgY29uc3QgZSA9IFRjKHQuZmlyZXN0b3JlLCBPYyksIG4gPSBCYyhlKSwgcyA9IG5ldyBsaChlKTtcbiAgICByZXR1cm4gTHUodC5fcXVlcnkpLCBhYyhuLCB0Ll9xdWVyeSkudGhlbigobiA9PiBuZXcgRnUoZSwgcywgdCwgbikpKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgcXVlcnkgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMgYXMgYSBgUXVlcnlTbmFwc2hvdGAgZnJvbSBjYWNoZS5cbiAqIFJldHVybnMgYW4gZXJyb3IgaWYgdGhlIGRvY3VtZW50IGlzIG5vdCBjdXJyZW50bHkgY2FjaGVkLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSByZXN1bHRzIG9mIHRoZSBxdWVyeS5cbiAqLyBmdW5jdGlvbiBfaCh0KSB7XG4gICAgdCA9IFRjKHQsIGJjKTtcbiAgICBjb25zdCBlID0gVGModC5maXJlc3RvcmUsIE9jKSwgbiA9IEJjKGUpLCBzID0gbmV3IGxoKGUpO1xuICAgIHJldHVybiBvYyhuLCB0Ll9xdWVyeSkudGhlbigobiA9PiBuZXcgRnUoZSwgcywgdCwgbikpKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgcXVlcnkgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMgYXMgYSBgUXVlcnlTbmFwc2hvdGAgZnJvbSB0aGVcbiAqIHNlcnZlci4gUmV0dXJucyBhbiBlcnJvciBpZiB0aGUgbmV0d29yayBpcyBub3QgYXZhaWxhYmxlLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSByZXN1bHRzIG9mIHRoZSBxdWVyeS5cbiAqLyBmdW5jdGlvbiBtaCh0KSB7XG4gICAgdCA9IFRjKHQsIGJjKTtcbiAgICBjb25zdCBlID0gVGModC5maXJlc3RvcmUsIE9jKSwgbiA9IEJjKGUpLCBzID0gbmV3IGxoKGUpO1xuICAgIHJldHVybiBhYyhuLCB0Ll9xdWVyeSwge1xuICAgICAgICBzb3VyY2U6IFwic2VydmVyXCJcbiAgICB9KS50aGVuKChuID0+IG5ldyBGdShlLCBzLCB0LCBuKSkpO1xufVxuXG5mdW5jdGlvbiBnaCh0LCBlLCBuKSB7XG4gICAgdCA9IFRjKHQsIFBjKTtcbiAgICBjb25zdCBzID0gVGModC5maXJlc3RvcmUsIE9jKSwgaSA9IG9oKHQuY29udmVydGVyLCBlLCBuKTtcbiAgICByZXR1cm4gQWgocywgWyBsdShodShzKSwgXCJzZXREb2NcIiwgdC5fa2V5LCBpLCBudWxsICE9PSB0LmNvbnZlcnRlciwgbikudG9NdXRhdGlvbih0Ll9rZXksIEplLm5vbmUoKSkgXSk7XG59XG5cbmZ1bmN0aW9uIHloKHQsIGUsIG4sIC4uLnMpIHtcbiAgICB0ID0gVGModCwgUGMpO1xuICAgIGNvbnN0IGkgPSBUYyh0LmZpcmVzdG9yZSwgT2MpLCByID0gaHUoaSk7XG4gICAgbGV0IG87XG4gICAgbyA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIChcbiAgICAvLyBGb3IgQ29tcGF0IHR5cGVzLCB3ZSBoYXZlIHRvIFwiZXh0cmFjdFwiIHRoZSB1bmRlcmx5aW5nIHR5cGVzIGJlZm9yZVxuICAgIC8vIHBlcmZvcm1pbmcgdmFsaWRhdGlvbi5cbiAgICBlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpKSB8fCBlIGluc3RhbmNlb2YgWmMgPyBwdShyLCBcInVwZGF0ZURvY1wiLCB0Ll9rZXksIGUsIG4sIHMpIDogeXUociwgXCJ1cGRhdGVEb2NcIiwgdC5fa2V5LCBlKTtcbiAgICByZXR1cm4gQWgoaSwgWyBvLnRvTXV0YXRpb24odC5fa2V5LCBKZS5leGlzdHMoITApKSBdKTtcbn1cblxuLyoqXG4gKiBEZWxldGVzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGUgc3BlY2lmaWVkIGBEb2N1bWVudFJlZmVyZW5jZWAuXG4gKlxuICogQHBhcmFtIHJlZmVyZW5jZSAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBkZWxldGUuXG4gKiBAcmV0dXJucyBBIFByb21pc2UgcmVzb2x2ZWQgb25jZSB0aGUgZG9jdW1lbnQgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5XG4gKiBkZWxldGVkIGZyb20gdGhlIGJhY2tlbmQgKG5vdGUgdGhhdCBpdCB3b24ndCByZXNvbHZlIHdoaWxlIHlvdSdyZSBvZmZsaW5lKS5cbiAqLyBmdW5jdGlvbiBwaCh0KSB7XG4gICAgcmV0dXJuIEFoKFRjKHQuZmlyZXN0b3JlLCBPYyksIFsgbmV3IGhuKHQuX2tleSwgSmUubm9uZSgpKSBdKTtcbn1cblxuLyoqXG4gKiBBZGQgYSBuZXcgZG9jdW1lbnQgdG8gc3BlY2lmaWVkIGBDb2xsZWN0aW9uUmVmZXJlbmNlYCB3aXRoIHRoZSBnaXZlbiBkYXRhLFxuICogYXNzaWduaW5nIGl0IGEgZG9jdW1lbnQgSUQgYXV0b21hdGljYWxseS5cbiAqXG4gKiBAcGFyYW0gcmVmZXJlbmNlIC0gQSByZWZlcmVuY2UgdG8gdGhlIGNvbGxlY3Rpb24gdG8gYWRkIHRoaXMgZG9jdW1lbnQgdG8uXG4gKiBAcGFyYW0gZGF0YSAtIEFuIE9iamVjdCBjb250YWluaW5nIHRoZSBkYXRhIGZvciB0aGUgbmV3IGRvY3VtZW50LlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgcmVzb2x2ZWQgd2l0aCBhIGBEb2N1bWVudFJlZmVyZW5jZWAgcG9pbnRpbmcgdG8gdGhlXG4gKiBuZXdseSBjcmVhdGVkIGRvY3VtZW50IGFmdGVyIGl0IGhhcyBiZWVuIHdyaXR0ZW4gdG8gdGhlIGJhY2tlbmQgKE5vdGUgdGhhdCBpdFxuICogd29uJ3QgcmVzb2x2ZSB3aGlsZSB5b3UncmUgb2ZmbGluZSkuXG4gKi8gZnVuY3Rpb24gVGgodCwgZSkge1xuICAgIGNvbnN0IG4gPSBUYyh0LmZpcmVzdG9yZSwgT2MpLCBzID0gRGModCksIGkgPSBvaCh0LmNvbnZlcnRlciwgZSk7XG4gICAgcmV0dXJuIEFoKG4sIFsgbHUoaHUodC5maXJlc3RvcmUpLCBcImFkZERvY1wiLCBzLl9rZXksIGksIG51bGwgIT09IHQuY29udmVydGVyLCB7fSkudG9NdXRhdGlvbihzLl9rZXksIEplLmV4aXN0cyghMSkpIF0pLnRoZW4oKCgpID0+IHMpKTtcbn1cblxuZnVuY3Rpb24gRWgodCwgLi4uZSkge1xuICAgIHZhciBuLCBzLCBpO1xuICAgIHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCk7XG4gICAgbGV0IHIgPSB7XG4gICAgICAgIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6ICExXG4gICAgfSwgbyA9IDA7XG4gICAgXCJvYmplY3RcIiAhPSB0eXBlb2YgZVtvXSB8fCB4YyhlW29dKSB8fCAociA9IGVbb10sIG8rKyk7XG4gICAgY29uc3QgYSA9IHtcbiAgICAgICAgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczogci5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzXG4gICAgfTtcbiAgICBpZiAoeGMoZVtvXSkpIHtcbiAgICAgICAgY29uc3QgdCA9IGVbb107XG4gICAgICAgIGVbb10gPSBudWxsID09PSAobiA9IHQubmV4dCkgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5iaW5kKHQpLCBlW28gKyAxXSA9IG51bGwgPT09IChzID0gdC5lcnJvcikgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5iaW5kKHQpLCBcbiAgICAgICAgZVtvICsgMl0gPSBudWxsID09PSAoaSA9IHQuY29tcGxldGUpIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGkuYmluZCh0KTtcbiAgICB9XG4gICAgbGV0IGMsIHUsIGg7XG4gICAgaWYgKHQgaW5zdGFuY2VvZiBQYykgdSA9IFRjKHQuZmlyZXN0b3JlLCBPYyksIGggPSBnZSh0Ll9rZXkucGF0aCksIGMgPSB7XG4gICAgICAgIG5leHQ6IG4gPT4ge1xuICAgICAgICAgICAgZVtvXSAmJiBlW29dKFJoKHUsIHQsIG4pKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGVbbyArIDFdLFxuICAgICAgICBjb21wbGV0ZTogZVtvICsgMl1cbiAgICB9OyBlbHNlIHtcbiAgICAgICAgY29uc3QgbiA9IFRjKHQsIGJjKTtcbiAgICAgICAgdSA9IFRjKG4uZmlyZXN0b3JlLCBPYyksIGggPSBuLl9xdWVyeTtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBsaCh1KTtcbiAgICAgICAgYyA9IHtcbiAgICAgICAgICAgIG5leHQ6IHQgPT4ge1xuICAgICAgICAgICAgICAgIGVbb10gJiYgZVtvXShuZXcgRnUodSwgcywgbiwgdCkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBlW28gKyAxXSxcbiAgICAgICAgICAgIGNvbXBsZXRlOiBlW28gKyAyXVxuICAgICAgICB9LCBMdSh0Ll9xdWVyeSk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIGNvbnN0IGkgPSBuZXcgcWEocyksIHIgPSBuZXcgem8oZSwgaSwgbik7XG4gICAgICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gS28oYXdhaXQgZWModCksIHIpKSksICgpID0+IHtcbiAgICAgICAgICAgIGkubmEoKSwgdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGpvKGF3YWl0IGVjKHQpLCByKSkpO1xuICAgICAgICB9O1xuICAgIH0oQmModSksIGgsIGEsIGMpO1xufVxuXG5mdW5jdGlvbiBJaCh0LCBlKSB7XG4gICAgcmV0dXJuIGNjKEJjKHQgPSBUYyh0LCBPYykpLCB4YyhlKSA/IGUgOiB7XG4gICAgICAgIG5leHQ6IGVcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBMb2NhbGx5IHdyaXRlcyBgbXV0YXRpb25zYCBvbiB0aGUgYXN5bmMgcXVldWUuXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBBaCh0LCBlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBRO1xuICAgICAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGNhKGF3YWl0IHRjKHQpLCBlLCBuKSkpLCBuLnByb21pc2U7XG4gICAgfShCYyh0KSwgZSk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYSB7QGxpbmsgVmlld1NuYXBzaG90fSB0aGF0IGNvbnRhaW5zIHRoZSBzaW5nbGUgZG9jdW1lbnQgc3BlY2lmaWVkIGJ5IGByZWZgXG4gKiB0byBhIHtAbGluayBEb2N1bWVudFNuYXBzaG90fS5cbiAqLyBmdW5jdGlvbiBSaCh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IG4uZG9jcy5nZXQoZS5fa2V5KSwgaSA9IG5ldyBsaCh0KTtcbiAgICByZXR1cm4gbmV3IHh1KHQsIGksIGUuX2tleSwgcywgbmV3IGt1KG4uaGFzUGVuZGluZ1dyaXRlcywgbi5mcm9tQ2FjaGUpLCBlLmNvbnZlcnRlcik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgcmVmZXJlbmNlIHRvIGEgdHJhbnNhY3Rpb24uXG4gKlxuICogVGhlIGBUcmFuc2FjdGlvbmAgb2JqZWN0IHBhc3NlZCB0byBhIHRyYW5zYWN0aW9uJ3MgYHVwZGF0ZUZ1bmN0aW9uYCBwcm92aWRlc1xuICogdGhlIG1ldGhvZHMgdG8gcmVhZCBhbmQgd3JpdGUgZGF0YSB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uIGNvbnRleHQuIFNlZVxuICoge0BsaW5rIHJ1blRyYW5zYWN0aW9ufS5cbiAqLyBjbGFzcyBQaCBleHRlbmRzIGNsYXNzIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gdCwgdGhpcy5fdHJhbnNhY3Rpb24gPSBlLCB0aGlzLl9kYXRhUmVhZGVyID0gaHUodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIHRoZSBkb2N1bWVudCByZWZlcmVuY2VkIGJ5IHRoZSBwcm92aWRlZCB7QGxpbmsgRG9jdW1lbnRSZWZlcmVuY2V9LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50UmVmIC0gQSByZWZlcmVuY2UgdG8gdGhlIGRvY3VtZW50IHRvIGJlIHJlYWQuXG4gICAgICogQHJldHVybnMgQSBgRG9jdW1lbnRTbmFwc2hvdGAgd2l0aCB0aGUgcmVhZCBkYXRhLlxuICAgICAqLyAgICBnZXQodCkge1xuICAgICAgICBjb25zdCBlID0gdWgodCwgdGhpcy5fZmlyZXN0b3JlKSwgbiA9IG5ldyBhaCh0aGlzLl9maXJlc3RvcmUpO1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNhY3Rpb24ubG9va3VwKFsgZS5fa2V5IF0pLnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgaWYgKCF0IHx8IDEgIT09IHQubGVuZ3RoKSByZXR1cm4gTCgpO1xuICAgICAgICAgICAgY29uc3QgcyA9IHRbMF07XG4gICAgICAgICAgICBpZiAocy5pc0ZvdW5kRG9jdW1lbnQoKSkgcmV0dXJuIG5ldyBEdSh0aGlzLl9maXJlc3RvcmUsIG4sIHMua2V5LCBzLCBlLmNvbnZlcnRlcik7XG4gICAgICAgICAgICBpZiAocy5pc05vRG9jdW1lbnQoKSkgcmV0dXJuIG5ldyBEdSh0aGlzLl9maXJlc3RvcmUsIG4sIGUuX2tleSwgbnVsbCwgZS5jb252ZXJ0ZXIpO1xuICAgICAgICAgICAgdGhyb3cgTCgpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHNldCh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSB1aCh0LCB0aGlzLl9maXJlc3RvcmUpLCBpID0gb2gocy5jb252ZXJ0ZXIsIGUsIG4pLCByID0gbHUodGhpcy5fZGF0YVJlYWRlciwgXCJUcmFuc2FjdGlvbi5zZXRcIiwgcy5fa2V5LCBpLCBudWxsICE9PSBzLmNvbnZlcnRlciwgbik7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2FjdGlvbi5zZXQocy5fa2V5LCByKSwgdGhpcztcbiAgICB9XG4gICAgdXBkYXRlKHQsIGUsIG4sIC4uLnMpIHtcbiAgICAgICAgY29uc3QgaSA9IHVoKHQsIHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIC8vIEZvciBDb21wYXQgdHlwZXMsIHdlIGhhdmUgdG8gXCJleHRyYWN0XCIgdGhlIHVuZGVybHlpbmcgdHlwZXMgYmVmb3JlXG4gICAgICAgIC8vIHBlcmZvcm1pbmcgdmFsaWRhdGlvbi5cbiAgICAgICAgICAgICAgICBsZXQgcjtcbiAgICAgICAgcmV0dXJuIHIgPSBcInN0cmluZ1wiID09IHR5cGVvZiAoZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSkgfHwgZSBpbnN0YW5jZW9mIFpjID8gcHUodGhpcy5fZGF0YVJlYWRlciwgXCJUcmFuc2FjdGlvbi51cGRhdGVcIiwgaS5fa2V5LCBlLCBuLCBzKSA6IHl1KHRoaXMuX2RhdGFSZWFkZXIsIFwiVHJhbnNhY3Rpb24udXBkYXRlXCIsIGkuX2tleSwgZSksIFxuICAgICAgICB0aGlzLl90cmFuc2FjdGlvbi51cGRhdGUoaS5fa2V5LCByKSwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhlIHByb3ZpZGVkIHtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRSZWYgLSBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmUgZGVsZXRlZC5cbiAgICAgKiBAcmV0dXJucyBUaGlzIGBUcmFuc2FjdGlvbmAgaW5zdGFuY2UuIFVzZWQgZm9yIGNoYWluaW5nIG1ldGhvZCBjYWxscy5cbiAgICAgKi8gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHVoKHQsIHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2FjdGlvbi5kZWxldGUoZS5fa2V5KSwgdGhpcztcbiAgICB9XG59IHtcbiAgICAvLyBUaGlzIGNsYXNzIGltcGxlbWVudHMgdGhlIHNhbWUgbG9naWMgYXMgdGhlIFRyYW5zYWN0aW9uIEFQSSBpbiB0aGUgTGl0ZSBTREtcbiAgICAvLyBidXQgaXMgc3ViY2xhc3NlZCBpbiBvcmRlciB0byByZXR1cm4gaXRzIG93biBEb2N1bWVudFNuYXBzaG90IHR5cGVzLlxuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBlKSwgdGhpcy5fZmlyZXN0b3JlID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgdGhlIGRvY3VtZW50IHJlZmVyZW5jZWQgYnkgdGhlIHByb3ZpZGVkIHtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRSZWYgLSBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmUgcmVhZC5cbiAgICAgKiBAcmV0dXJucyBBIGBEb2N1bWVudFNuYXBzaG90YCB3aXRoIHRoZSByZWFkIGRhdGEuXG4gICAgICovICAgIGdldCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB1aCh0LCB0aGlzLl9maXJlc3RvcmUpLCBuID0gbmV3IGxoKHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiBzdXBlci5nZXQodCkudGhlbigodCA9PiBuZXcgeHUodGhpcy5fZmlyZXN0b3JlLCBuLCBlLl9rZXksIHQuX2RvY3VtZW50LCBuZXcga3UoXG4gICAgICAgIC8qIGhhc1BlbmRpbmdXcml0ZXM9ICovICExLCBcbiAgICAgICAgLyogZnJvbUNhY2hlPSAqLyAhMSksIGUuY29udmVydGVyKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgZ2l2ZW4gYHVwZGF0ZUZ1bmN0aW9uYCBhbmQgdGhlbiBhdHRlbXB0cyB0byBjb21taXQgdGhlIGNoYW5nZXNcbiAqIGFwcGxpZWQgd2l0aGluIHRoZSB0cmFuc2FjdGlvbi4gSWYgYW55IGRvY3VtZW50IHJlYWQgd2l0aGluIHRoZSB0cmFuc2FjdGlvblxuICogaGFzIGNoYW5nZWQsIENsb3VkIEZpcmVzdG9yZSByZXRyaWVzIHRoZSBgdXBkYXRlRnVuY3Rpb25gLiBJZiBpdCBmYWlscyB0b1xuICogY29tbWl0IGFmdGVyIDUgYXR0ZW1wdHMsIHRoZSB0cmFuc2FjdGlvbiBmYWlscy5cbiAqXG4gKiBUaGUgbWF4aW11bSBudW1iZXIgb2Ygd3JpdGVzIGFsbG93ZWQgaW4gYSBzaW5nbGUgdHJhbnNhY3Rpb24gaXMgNTAwLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBBIHJlZmVyZW5jZSB0byB0aGUgRmlyZXN0b3JlIGRhdGFiYXNlIHRvIHJ1biB0aGlzXG4gKiB0cmFuc2FjdGlvbiBhZ2FpbnN0LlxuICogQHBhcmFtIHVwZGF0ZUZ1bmN0aW9uIC0gVGhlIGZ1bmN0aW9uIHRvIGV4ZWN1dGUgd2l0aGluIHRoZSB0cmFuc2FjdGlvblxuICogY29udGV4dC5cbiAqIEByZXR1cm5zIElmIHRoZSB0cmFuc2FjdGlvbiBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5IG9yIHdhcyBleHBsaWNpdGx5IGFib3J0ZWRcbiAqICh0aGUgYHVwZGF0ZUZ1bmN0aW9uYCByZXR1cm5lZCBhIGZhaWxlZCBwcm9taXNlKSwgdGhlIHByb21pc2UgcmV0dXJuZWQgYnkgdGhlXG4gKiBgdXBkYXRlRnVuY3Rpb24gYGlzIHJldHVybmVkIGhlcmUuIE90aGVyd2lzZSwgaWYgdGhlIHRyYW5zYWN0aW9uIGZhaWxlZCwgYVxuICogcmVqZWN0ZWQgcHJvbWlzZSB3aXRoIHRoZSBjb3JyZXNwb25kaW5nIGZhaWx1cmUgZXJyb3IgaXMgcmV0dXJuZWQuXG4gKi8gZnVuY3Rpb24gYmgodCwgZSkge1xuICAgIHJldHVybiB1YyhCYyh0ID0gVGModCwgT2MpKSwgKG4gPT4gZShuZXcgUGgodCwgbikpKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJldHVybnMgYSBzZW50aW5lbCBmb3IgdXNlIHdpdGgge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSModXBkYXRlRG9jOjEpfSBvclxuICoge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSMoc2V0RG9jOjEpfSB3aXRoIGB7bWVyZ2U6IHRydWV9YCB0byBtYXJrIGEgZmllbGQgZm9yIGRlbGV0aW9uLlxuICovIGZ1bmN0aW9uIHZoKCkge1xuICAgIHJldHVybiBuZXcgZnUoXCJkZWxldGVGaWVsZFwiKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc2VudGluZWwgdXNlZCB3aXRoIHtAbGluayBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHNldERvYzoxKX0gb3Ige0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSModXBkYXRlRG9jOjEpfSB0b1xuICogaW5jbHVkZSBhIHNlcnZlci1nZW5lcmF0ZWQgdGltZXN0YW1wIGluIHRoZSB3cml0dGVuIGRhdGEuXG4gKi8gZnVuY3Rpb24gVmgoKSB7XG4gICAgcmV0dXJuIG5ldyB3dShcInNlcnZlclRpbWVzdGFtcFwiKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3BlY2lhbCB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIHdpdGgge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSMoc2V0RG9jOjEpfSBvciB7QGxpbmtcbiAqIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSModXBkYXRlRG9jOjEpfSB0aGF0IHRlbGxzIHRoZSBzZXJ2ZXIgdG8gdW5pb24gdGhlIGdpdmVuIGVsZW1lbnRzIHdpdGggYW55IGFycmF5XG4gKiB2YWx1ZSB0aGF0IGFscmVhZHkgZXhpc3RzIG9uIHRoZSBzZXJ2ZXIuIEVhY2ggc3BlY2lmaWVkIGVsZW1lbnQgdGhhdCBkb2Vzbid0XG4gKiBhbHJlYWR5IGV4aXN0IGluIHRoZSBhcnJheSB3aWxsIGJlIGFkZGVkIHRvIHRoZSBlbmQuIElmIHRoZSBmaWVsZCBiZWluZ1xuICogbW9kaWZpZWQgaXMgbm90IGFscmVhZHkgYW4gYXJyYXkgaXQgd2lsbCBiZSBvdmVyd3JpdHRlbiB3aXRoIGFuIGFycmF5XG4gKiBjb250YWluaW5nIGV4YWN0bHkgdGhlIHNwZWNpZmllZCBlbGVtZW50cy5cbiAqXG4gKiBAcGFyYW0gZWxlbWVudHMgLSBUaGUgZWxlbWVudHMgdG8gdW5pb24gaW50byB0aGUgYXJyYXkuXG4gKiBAcmV0dXJucyBUaGUgYEZpZWxkVmFsdWVgIHNlbnRpbmVsIGZvciB1c2UgaW4gYSBjYWxsIHRvIGBzZXREb2MoKWAgb3JcbiAqIGB1cGRhdGVEb2MoKWAuXG4gKi8gZnVuY3Rpb24gU2goLi4udCkge1xuICAgIC8vIE5PVEU6IFdlIGRvbid0IGFjdHVhbGx5IHBhcnNlIHRoZSBkYXRhIHVudGlsIGl0J3MgdXNlZCBpbiBzZXQoKSBvclxuICAgIC8vIHVwZGF0ZSgpIHNpbmNlIHdlJ2QgbmVlZCB0aGUgRmlyZXN0b3JlIGluc3RhbmNlIHRvIGRvIHRoaXMuXG4gICAgcmV0dXJuIG5ldyBfdShcImFycmF5VW5pb25cIiwgdCk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHNwZWNpYWwgdmFsdWUgdGhhdCBjYW4gYmUgdXNlZCB3aXRoIHtAbGluayAoc2V0RG9jOjEpfSBvciB7QGxpbmtcbiAqIHVwZGF0ZURvYzoxfSB0aGF0IHRlbGxzIHRoZSBzZXJ2ZXIgdG8gcmVtb3ZlIHRoZSBnaXZlbiBlbGVtZW50cyBmcm9tIGFueVxuICogYXJyYXkgdmFsdWUgdGhhdCBhbHJlYWR5IGV4aXN0cyBvbiB0aGUgc2VydmVyLiBBbGwgaW5zdGFuY2VzIG9mIGVhY2ggZWxlbWVudFxuICogc3BlY2lmaWVkIHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHRoZSBhcnJheS4gSWYgdGhlIGZpZWxkIGJlaW5nIG1vZGlmaWVkIGlzIG5vdFxuICogYWxyZWFkeSBhbiBhcnJheSBpdCB3aWxsIGJlIG92ZXJ3cml0dGVuIHdpdGggYW4gZW1wdHkgYXJyYXkuXG4gKlxuICogQHBhcmFtIGVsZW1lbnRzIC0gVGhlIGVsZW1lbnRzIHRvIHJlbW92ZSBmcm9tIHRoZSBhcnJheS5cbiAqIEByZXR1cm5zIFRoZSBgRmllbGRWYWx1ZWAgc2VudGluZWwgZm9yIHVzZSBpbiBhIGNhbGwgdG8gYHNldERvYygpYCBvclxuICogYHVwZGF0ZURvYygpYFxuICovIGZ1bmN0aW9uIERoKC4uLnQpIHtcbiAgICAvLyBOT1RFOiBXZSBkb24ndCBhY3R1YWxseSBwYXJzZSB0aGUgZGF0YSB1bnRpbCBpdCdzIHVzZWQgaW4gc2V0KCkgb3JcbiAgICAvLyB1cGRhdGUoKSBzaW5jZSB3ZSdkIG5lZWQgdGhlIEZpcmVzdG9yZSBpbnN0YW5jZSB0byBkbyB0aGlzLlxuICAgIHJldHVybiBuZXcgbXUoXCJhcnJheVJlbW92ZVwiLCB0KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3BlY2lhbCB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIHdpdGgge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSMoc2V0RG9jOjEpfSBvciB7QGxpbmtcbiAqIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSModXBkYXRlRG9jOjEpfSB0aGF0IHRlbGxzIHRoZSBzZXJ2ZXIgdG8gaW5jcmVtZW50IHRoZSBmaWVsZCdzIGN1cnJlbnQgdmFsdWUgYnlcbiAqIHRoZSBnaXZlbiB2YWx1ZS5cbiAqXG4gKiBJZiBlaXRoZXIgdGhlIG9wZXJhbmQgb3IgdGhlIGN1cnJlbnQgZmllbGQgdmFsdWUgdXNlcyBmbG9hdGluZyBwb2ludFxuICogcHJlY2lzaW9uLCBhbGwgYXJpdGhtZXRpYyBmb2xsb3dzIElFRUUgNzU0IHNlbWFudGljcy4gSWYgYm90aCB2YWx1ZXMgYXJlXG4gKiBpbnRlZ2VycywgdmFsdWVzIG91dHNpZGUgb2YgSmF2YVNjcmlwdCdzIHNhZmUgbnVtYmVyIHJhbmdlXG4gKiAoYE51bWJlci5NSU5fU0FGRV9JTlRFR0VSYCB0byBgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJgKSBhcmUgYWxzbyBzdWJqZWN0IHRvXG4gKiBwcmVjaXNpb24gbG9zcy4gRnVydGhlcm1vcmUsIG9uY2UgcHJvY2Vzc2VkIGJ5IHRoZSBGaXJlc3RvcmUgYmFja2VuZCwgYWxsXG4gKiBpbnRlZ2VyIG9wZXJhdGlvbnMgYXJlIGNhcHBlZCBiZXR3ZWVuIC0yXjYzIGFuZCAyXjYzLTEuXG4gKlxuICogSWYgdGhlIGN1cnJlbnQgZmllbGQgdmFsdWUgaXMgbm90IG9mIHR5cGUgYG51bWJlcmAsIG9yIGlmIHRoZSBmaWVsZCBkb2VzIG5vdFxuICogeWV0IGV4aXN0LCB0aGUgdHJhbnNmb3JtYXRpb24gc2V0cyB0aGUgZmllbGQgdG8gdGhlIGdpdmVuIHZhbHVlLlxuICpcbiAqIEBwYXJhbSBuIC0gVGhlIHZhbHVlIHRvIGluY3JlbWVudCBieS5cbiAqIEByZXR1cm5zIFRoZSBgRmllbGRWYWx1ZWAgc2VudGluZWwgZm9yIHVzZSBpbiBhIGNhbGwgdG8gYHNldERvYygpYCBvclxuICogYHVwZGF0ZURvYygpYFxuICovIGZ1bmN0aW9uIENoKHQpIHtcbiAgICByZXR1cm4gbmV3IGd1KFwiaW5jcmVtZW50XCIsIHQpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDcmVhdGVzIGEgd3JpdGUgYmF0Y2gsIHVzZWQgZm9yIHBlcmZvcm1pbmcgbXVsdGlwbGUgd3JpdGVzIGFzIGEgc2luZ2xlXG4gKiBhdG9taWMgb3BlcmF0aW9uLiBUaGUgbWF4aW11bSBudW1iZXIgb2Ygd3JpdGVzIGFsbG93ZWQgaW4gYSBzaW5nbGUge0BsaW5rIFdyaXRlQmF0Y2h9XG4gKiBpcyA1MDAuXG4gKlxuICogVW5saWtlIHRyYW5zYWN0aW9ucywgd3JpdGUgYmF0Y2hlcyBhcmUgcGVyc2lzdGVkIG9mZmxpbmUgYW5kIHRoZXJlZm9yZSBhcmVcbiAqIHByZWZlcmFibGUgd2hlbiB5b3UgZG9uJ3QgbmVlZCB0byBjb25kaXRpb24geW91ciB3cml0ZXMgb24gcmVhZCBkYXRhLlxuICpcbiAqIEByZXR1cm5zIEEge0BsaW5rIFdyaXRlQmF0Y2h9IHRoYXQgY2FuIGJlIHVzZWQgdG8gYXRvbWljYWxseSBleGVjdXRlIG11bHRpcGxlXG4gKiB3cml0ZXMuXG4gKi8gZnVuY3Rpb24gTmgodCkge1xuICAgIHJldHVybiBCYyh0ID0gVGModCwgT2MpKSwgbmV3IGNoKHQsIChlID0+IEFoKHQsIGUpKSk7XG59XG5cbi8qKlxuICogQ2xvdWQgRmlyZXN0b3JlXG4gKlxuICogQHBhY2thZ2VEb2N1bWVudGF0aW9uXG4gKi8gIWZ1bmN0aW9uKHQsIGUgPSAhMCkge1xuICAgICFmdW5jdGlvbih0KSB7XG4gICAgICAgIEMgPSB0O1xuICAgIH0oU0RLX1ZFUlNJT04pLCBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChcImZpcmVzdG9yZVwiLCAoKHQsIHtvcHRpb25zOiBufSkgPT4ge1xuICAgICAgICBjb25zdCBzID0gdC5nZXRQcm92aWRlcihcImFwcFwiKS5nZXRJbW1lZGlhdGUoKSwgaSA9IG5ldyBPYyhzLCBuZXcgSCh0LmdldFByb3ZpZGVyKFwiYXV0aC1pbnRlcm5hbFwiKSksIG5ldyBaKHQuZ2V0UHJvdmlkZXIoXCJhcHAtY2hlY2staW50ZXJuYWxcIikpKTtcbiAgICAgICAgcmV0dXJuIG4gPSBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgIHVzZUZldGNoU3RyZWFtczogZVxuICAgICAgICB9LCBuKSwgaS5fc2V0U2V0dGluZ3MobiksIGk7XG4gICAgfSksIFwiUFVCTElDXCIpKSwgcmVnaXN0ZXJWZXJzaW9uKFMsIFwiMy40LjFcIiwgdCksIFxuICAgIC8vIEJVSUxEX1RBUkdFVCB3aWxsIGJlIHJlcGxhY2VkIGJ5IHZhbHVlcyBsaWtlIGVzbTUsIGVzbTIwMTcsIGNqczUsIGV0YyBkdXJpbmcgdGhlIGNvbXBpbGF0aW9uXG4gICAgcmVnaXN0ZXJWZXJzaW9uKFMsIFwiMy40LjFcIiwgXCJlc20yMDE3XCIpO1xufSgpO1xuXG5leHBvcnQgeyByaCBhcyBBYnN0cmFjdFVzZXJEYXRhV3JpdGVyLCBldSBhcyBCeXRlcywgRmMgYXMgQ0FDSEVfU0laRV9VTkxJTUlURUQsIHZjIGFzIENvbGxlY3Rpb25SZWZlcmVuY2UsIFBjIGFzIERvY3VtZW50UmVmZXJlbmNlLCB4dSBhcyBEb2N1bWVudFNuYXBzaG90LCBaYyBhcyBGaWVsZFBhdGgsIG51IGFzIEZpZWxkVmFsdWUsIE9jIGFzIEZpcmVzdG9yZSwgaiBhcyBGaXJlc3RvcmVFcnJvciwgc3UgYXMgR2VvUG9pbnQsICRjIGFzIExvYWRCdW5kbGVUYXNrLCBiYyBhcyBRdWVyeSwgQnUgYXMgUXVlcnlDb25zdHJhaW50LCAkdSBhcyBRdWVyeURvY3VtZW50U25hcHNob3QsIEZ1IGFzIFF1ZXJ5U25hcHNob3QsIGt1IGFzIFNuYXBzaG90TWV0YWRhdGEsIGF0IGFzIFRpbWVzdGFtcCwgUGggYXMgVHJhbnNhY3Rpb24sIGNoIGFzIFdyaXRlQmF0Y2gsIGRjIGFzIF9EYXRhYmFzZUlkLCBTdCBhcyBfRG9jdW1lbnRLZXksIHR0IGFzIF9FbXB0eUFwcENoZWNrVG9rZW5Qcm92aWRlciwgRyBhcyBfRW1wdHlBdXRoQ3JlZGVudGlhbHNQcm92aWRlciwgX3QgYXMgX0ZpZWxkUGF0aCwgVGMgYXMgX2Nhc3QsIFUgYXMgX2RlYnVnQXNzZXJ0LCBndCBhcyBfaXNCYXNlNjRBdmFpbGFibGUsIE8gYXMgX2xvZ1dhcm4sIG1jIGFzIF92YWxpZGF0ZUlzTm90VXNlZFRvZ2V0aGVyLCBUaCBhcyBhZGREb2MsIERoIGFzIGFycmF5UmVtb3ZlLCBTaCBhcyBhcnJheVVuaW9uLCBRYyBhcyBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlLCBWYyBhcyBjb2xsZWN0aW9uLCBTYyBhcyBjb2xsZWN0aW9uR3JvdXAsIFJjIGFzIGNvbm5lY3RGaXJlc3RvcmVFbXVsYXRvciwgcGggYXMgZGVsZXRlRG9jLCB2aCBhcyBkZWxldGVGaWVsZCwgemMgYXMgZGlzYWJsZU5ldHdvcmssIERjIGFzIGRvYywgdHUgYXMgZG9jdW1lbnRJZCwgcWMgYXMgZW5hYmxlSW5kZXhlZERiUGVyc2lzdGVuY2UsIEtjIGFzIGVuYWJsZU11bHRpVGFiSW5kZXhlZERiUGVyc2lzdGVuY2UsIEdjIGFzIGVuYWJsZU5ldHdvcmssIHRoIGFzIGVuZEF0LCBadSBhcyBlbmRCZWZvcmUsIEJjIGFzIGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQsIEFoIGFzIGV4ZWN1dGVXcml0ZSwgaGggYXMgZ2V0RG9jLCBmaCBhcyBnZXREb2NGcm9tQ2FjaGUsIGRoIGFzIGdldERvY0Zyb21TZXJ2ZXIsIHdoIGFzIGdldERvY3MsIF9oIGFzIGdldERvY3NGcm9tQ2FjaGUsIG1oIGFzIGdldERvY3NGcm9tU2VydmVyLCBMYyBhcyBnZXRGaXJlc3RvcmUsIENoIGFzIGluY3JlbWVudCwgTWMgYXMgaW5pdGlhbGl6ZUZpcmVzdG9yZSwgR3UgYXMgbGltaXQsIHp1IGFzIGxpbWl0VG9MYXN0LCBKYyBhcyBsb2FkQnVuZGxlLCBZYyBhcyBuYW1lZFF1ZXJ5LCBFaCBhcyBvblNuYXBzaG90LCBJaCBhcyBvblNuYXBzaG90c0luU3luYywgUXUgYXMgb3JkZXJCeSwgVXUgYXMgcXVlcnksIE5jIGFzIHF1ZXJ5RXF1YWwsIENjIGFzIHJlZkVxdWFsLCBiaCBhcyBydW5UcmFuc2FjdGlvbiwgVmggYXMgc2VydmVyVGltZXN0YW1wLCBnaCBhcyBzZXREb2MsIHggYXMgc2V0TG9nTGV2ZWwsIE11IGFzIHNuYXBzaG90RXF1YWwsIFl1IGFzIHN0YXJ0QWZ0ZXIsIEp1IGFzIHN0YXJ0QXQsIEhjIGFzIHRlcm1pbmF0ZSwgeWggYXMgdXBkYXRlRG9jLCBXYyBhcyB3YWl0Rm9yUGVuZGluZ1dyaXRlcywgS3UgYXMgd2hlcmUsIE5oIGFzIHdyaXRlQmF0Y2ggfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIENvbXBvbmVudENvbnRhaW5lciB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuaW1wb3J0IHsgTG9nZ2VyLCBzZXRVc2VyTG9nSGFuZGxlciwgc2V0TG9nTGV2ZWwgYXMgc2V0TG9nTGV2ZWwkMSB9IGZyb20gJ0BmaXJlYmFzZS9sb2dnZXInO1xuaW1wb3J0IHsgRXJyb3JGYWN0b3J5LCBkZWVwRXF1YWwgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5leHBvcnQgeyBGaXJlYmFzZUVycm9yIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBQbGF0Zm9ybUxvZ2dlclNlcnZpY2VJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgfVxyXG4gICAgLy8gSW4gaW5pdGlhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3aWxsIGJlIGNhbGxlZCBieSBpbnN0YWxsYXRpb25zIG9uXHJcbiAgICAvLyBhdXRoIHRva2VuIHJlZnJlc2gsIGFuZCBpbnN0YWxsYXRpb25zIHdpbGwgc2VuZCB0aGlzIHN0cmluZy5cclxuICAgIGdldFBsYXRmb3JtSW5mb1N0cmluZygpIHtcclxuICAgICAgICBjb25zdCBwcm92aWRlcnMgPSB0aGlzLmNvbnRhaW5lci5nZXRQcm92aWRlcnMoKTtcclxuICAgICAgICAvLyBMb29wIHRocm91Z2ggcHJvdmlkZXJzIGFuZCBnZXQgbGlicmFyeS92ZXJzaW9uIHBhaXJzIGZyb20gYW55IHRoYXQgYXJlXHJcbiAgICAgICAgLy8gdmVyc2lvbiBjb21wb25lbnRzLlxyXG4gICAgICAgIHJldHVybiBwcm92aWRlcnNcclxuICAgICAgICAgICAgLm1hcChwcm92aWRlciA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpc1ZlcnNpb25TZXJ2aWNlUHJvdmlkZXIocHJvdmlkZXIpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJ2aWNlID0gcHJvdmlkZXIuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7c2VydmljZS5saWJyYXJ5fS8ke3NlcnZpY2UudmVyc2lvbn1gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZmlsdGVyKGxvZ1N0cmluZyA9PiBsb2dTdHJpbmcpXHJcbiAgICAgICAgICAgIC5qb2luKCcgJyk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBwcm92aWRlciBjaGVjayBpZiB0aGlzIHByb3ZpZGVyIHByb3ZpZGVzIGEgVmVyc2lvblNlcnZpY2VcclxuICpcclxuICogTk9URTogVXNpbmcgUHJvdmlkZXI8J2FwcC12ZXJzaW9uJz4gaXMgYSBoYWNrIHRvIGluZGljYXRlIHRoYXQgdGhlIHByb3ZpZGVyXHJcbiAqIHByb3ZpZGVzIFZlcnNpb25TZXJ2aWNlLiBUaGUgcHJvdmlkZXIgaXMgbm90IG5lY2Vzc2FyaWx5IGEgJ2FwcC12ZXJzaW9uJ1xyXG4gKiBwcm92aWRlci5cclxuICovXHJcbmZ1bmN0aW9uIGlzVmVyc2lvblNlcnZpY2VQcm92aWRlcihwcm92aWRlcikge1xyXG4gICAgY29uc3QgY29tcG9uZW50ID0gcHJvdmlkZXIuZ2V0Q29tcG9uZW50KCk7XHJcbiAgICByZXR1cm4gKGNvbXBvbmVudCA9PT0gbnVsbCB8fCBjb21wb25lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbXBvbmVudC50eXBlKSA9PT0gXCJWRVJTSU9OXCIgLyogVkVSU0lPTiAqLztcclxufVxuXG5jb25zdCBuYW1lJG8gPSBcIkBmaXJlYmFzZS9hcHBcIjtcbmNvbnN0IHZlcnNpb24kMSA9IFwiMC43LjExXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IGxvZ2dlciA9IG5ldyBMb2dnZXIoJ0BmaXJlYmFzZS9hcHAnKTtcblxuY29uc3QgbmFtZSRuID0gXCJAZmlyZWJhc2UvYXBwLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJG0gPSBcIkBmaXJlYmFzZS9hbmFseXRpY3MtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkbCA9IFwiQGZpcmViYXNlL2FuYWx5dGljc1wiO1xuXG5jb25zdCBuYW1lJGsgPSBcIkBmaXJlYmFzZS9hcHAtY2hlY2stY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkaiA9IFwiQGZpcmViYXNlL2FwcC1jaGVja1wiO1xuXG5jb25zdCBuYW1lJGkgPSBcIkBmaXJlYmFzZS9hdXRoXCI7XG5cbmNvbnN0IG5hbWUkaCA9IFwiQGZpcmViYXNlL2F1dGgtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkZyA9IFwiQGZpcmViYXNlL2RhdGFiYXNlXCI7XG5cbmNvbnN0IG5hbWUkZiA9IFwiQGZpcmViYXNlL2RhdGFiYXNlLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGUgPSBcIkBmaXJlYmFzZS9mdW5jdGlvbnNcIjtcblxuY29uc3QgbmFtZSRkID0gXCJAZmlyZWJhc2UvZnVuY3Rpb25zLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGMgPSBcIkBmaXJlYmFzZS9pbnN0YWxsYXRpb25zXCI7XG5cbmNvbnN0IG5hbWUkYiA9IFwiQGZpcmViYXNlL2luc3RhbGxhdGlvbnMtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkYSA9IFwiQGZpcmViYXNlL21lc3NhZ2luZ1wiO1xuXG5jb25zdCBuYW1lJDkgPSBcIkBmaXJlYmFzZS9tZXNzYWdpbmctY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkOCA9IFwiQGZpcmViYXNlL3BlcmZvcm1hbmNlXCI7XG5cbmNvbnN0IG5hbWUkNyA9IFwiQGZpcmViYXNlL3BlcmZvcm1hbmNlLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDYgPSBcIkBmaXJlYmFzZS9yZW1vdGUtY29uZmlnXCI7XG5cbmNvbnN0IG5hbWUkNSA9IFwiQGZpcmViYXNlL3JlbW90ZS1jb25maWctY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkNCA9IFwiQGZpcmViYXNlL3N0b3JhZ2VcIjtcblxuY29uc3QgbmFtZSQzID0gXCJAZmlyZWJhc2Uvc3RvcmFnZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSQyID0gXCJAZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG5cbmNvbnN0IG5hbWUkMSA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSA9IFwiZmlyZWJhc2VcIjtcbmNvbnN0IHZlcnNpb24gPSBcIjkuNi4xXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaGUgZGVmYXVsdCBhcHAgbmFtZVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNvbnN0IERFRkFVTFRfRU5UUllfTkFNRSA9ICdbREVGQVVMVF0nO1xyXG5jb25zdCBQTEFURk9STV9MT0dfU1RSSU5HID0ge1xyXG4gICAgW25hbWUkb106ICdmaXJlLWNvcmUnLFxyXG4gICAgW25hbWUkbl06ICdmaXJlLWNvcmUtY29tcGF0JyxcclxuICAgIFtuYW1lJGxdOiAnZmlyZS1hbmFseXRpY3MnLFxyXG4gICAgW25hbWUkbV06ICdmaXJlLWFuYWx5dGljcy1jb21wYXQnLFxyXG4gICAgW25hbWUkal06ICdmaXJlLWFwcC1jaGVjaycsXHJcbiAgICBbbmFtZSRrXTogJ2ZpcmUtYXBwLWNoZWNrLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRpXTogJ2ZpcmUtYXV0aCcsXHJcbiAgICBbbmFtZSRoXTogJ2ZpcmUtYXV0aC1jb21wYXQnLFxyXG4gICAgW25hbWUkZ106ICdmaXJlLXJ0ZGInLFxyXG4gICAgW25hbWUkZl06ICdmaXJlLXJ0ZGItY29tcGF0JyxcclxuICAgIFtuYW1lJGVdOiAnZmlyZS1mbicsXHJcbiAgICBbbmFtZSRkXTogJ2ZpcmUtZm4tY29tcGF0JyxcclxuICAgIFtuYW1lJGNdOiAnZmlyZS1paWQnLFxyXG4gICAgW25hbWUkYl06ICdmaXJlLWlpZC1jb21wYXQnLFxyXG4gICAgW25hbWUkYV06ICdmaXJlLWZjbScsXHJcbiAgICBbbmFtZSQ5XTogJ2ZpcmUtZmNtLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQ4XTogJ2ZpcmUtcGVyZicsXHJcbiAgICBbbmFtZSQ3XTogJ2ZpcmUtcGVyZi1jb21wYXQnLFxyXG4gICAgW25hbWUkNl06ICdmaXJlLXJjJyxcclxuICAgIFtuYW1lJDVdOiAnZmlyZS1yYy1jb21wYXQnLFxyXG4gICAgW25hbWUkNF06ICdmaXJlLWdjcycsXHJcbiAgICBbbmFtZSQzXTogJ2ZpcmUtZ2NzLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQyXTogJ2ZpcmUtZnN0JyxcclxuICAgIFtuYW1lJDFdOiAnZmlyZS1mc3QtY29tcGF0JyxcclxuICAgICdmaXJlLWpzJzogJ2ZpcmUtanMnLFxyXG4gICAgW25hbWVdOiAnZmlyZS1qcy1hbGwnXHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNvbnN0IF9hcHBzID0gbmV3IE1hcCgpO1xyXG4vKipcclxuICogUmVnaXN0ZXJlZCBjb21wb25lbnRzLlxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbmNvbnN0IF9jb21wb25lbnRzID0gbmV3IE1hcCgpO1xyXG4vKipcclxuICogQHBhcmFtIGNvbXBvbmVudCAtIHRoZSBjb21wb25lbnQgYmVpbmcgYWRkZWQgdG8gdGhpcyBhcHAncyBjb250YWluZXJcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfYWRkQ29tcG9uZW50KGFwcCwgY29tcG9uZW50KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGFwcC5jb250YWluZXIuYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgQ29tcG9uZW50ICR7Y29tcG9uZW50Lm5hbWV9IGZhaWxlZCB0byByZWdpc3RlciB3aXRoIEZpcmViYXNlQXBwICR7YXBwLm5hbWV9YCwgZSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX2FkZE9yT3ZlcndyaXRlQ29tcG9uZW50KGFwcCwgY29tcG9uZW50KSB7XHJcbiAgICBhcHAuY29udGFpbmVyLmFkZE9yT3ZlcndyaXRlQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBjb21wb25lbnQgLSB0aGUgY29tcG9uZW50IHRvIHJlZ2lzdGVyXHJcbiAqIEByZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSBjb21wb25lbnQgaXMgcmVnaXN0ZXJlZCBzdWNjZXNzZnVsbHlcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfcmVnaXN0ZXJDb21wb25lbnQoY29tcG9uZW50KSB7XHJcbiAgICBjb25zdCBjb21wb25lbnROYW1lID0gY29tcG9uZW50Lm5hbWU7XHJcbiAgICBpZiAoX2NvbXBvbmVudHMuaGFzKGNvbXBvbmVudE5hbWUpKSB7XHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBUaGVyZSB3ZXJlIG11bHRpcGxlIGF0dGVtcHRzIHRvIHJlZ2lzdGVyIGNvbXBvbmVudCAke2NvbXBvbmVudE5hbWV9LmApO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIF9jb21wb25lbnRzLnNldChjb21wb25lbnROYW1lLCBjb21wb25lbnQpO1xyXG4gICAgLy8gYWRkIHRoZSBjb21wb25lbnQgdG8gZXhpc3RpbmcgYXBwIGluc3RhbmNlc1xyXG4gICAgZm9yIChjb25zdCBhcHAgb2YgX2FwcHMudmFsdWVzKCkpIHtcclxuICAgICAgICBfYWRkQ29tcG9uZW50KGFwcCwgY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gYXBwIC0gRmlyZWJhc2VBcHAgaW5zdGFuY2VcclxuICogQHBhcmFtIG5hbWUgLSBzZXJ2aWNlIG5hbWVcclxuICpcclxuICogQHJldHVybnMgdGhlIHByb3ZpZGVyIGZvciB0aGUgc2VydmljZSB3aXRoIHRoZSBtYXRjaGluZyBuYW1lXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX2dldFByb3ZpZGVyKGFwcCwgbmFtZSkge1xyXG4gICAgcmV0dXJuIGFwcC5jb250YWluZXIuZ2V0UHJvdmlkZXIobmFtZSk7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBhcHAgLSBGaXJlYmFzZUFwcCBpbnN0YW5jZVxyXG4gKiBAcGFyYW0gbmFtZSAtIHNlcnZpY2UgbmFtZVxyXG4gKiBAcGFyYW0gaW5zdGFuY2VJZGVudGlmaWVyIC0gc2VydmljZSBpbnN0YW5jZSBpZGVudGlmaWVyIGluIGNhc2UgdGhlIHNlcnZpY2Ugc3VwcG9ydHMgbXVsdGlwbGUgaW5zdGFuY2VzXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX3JlbW92ZVNlcnZpY2VJbnN0YW5jZShhcHAsIG5hbWUsIGluc3RhbmNlSWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgX2dldFByb3ZpZGVyKGFwcCwgbmFtZSkuY2xlYXJJbnN0YW5jZShpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG59XHJcbi8qKlxyXG4gKiBUZXN0IG9ubHlcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfY2xlYXJDb21wb25lbnRzKCkge1xyXG4gICAgX2NvbXBvbmVudHMuY2xlYXIoKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBFUlJPUlMgPSB7XHJcbiAgICBbXCJuby1hcHBcIiAvKiBOT19BUFAgKi9dOiBcIk5vIEZpcmViYXNlIEFwcCAneyRhcHBOYW1lfScgaGFzIGJlZW4gY3JlYXRlZCAtIFwiICtcclxuICAgICAgICAnY2FsbCBGaXJlYmFzZSBBcHAuaW5pdGlhbGl6ZUFwcCgpJyxcclxuICAgIFtcImJhZC1hcHAtbmFtZVwiIC8qIEJBRF9BUFBfTkFNRSAqL106IFwiSWxsZWdhbCBBcHAgbmFtZTogJ3skYXBwTmFtZX1cIixcclxuICAgIFtcImR1cGxpY2F0ZS1hcHBcIiAvKiBEVVBMSUNBVEVfQVBQICovXTogXCJGaXJlYmFzZSBBcHAgbmFtZWQgJ3skYXBwTmFtZX0nIGFscmVhZHkgZXhpc3RzIHdpdGggZGlmZmVyZW50IG9wdGlvbnMgb3IgY29uZmlnXCIsXHJcbiAgICBbXCJhcHAtZGVsZXRlZFwiIC8qIEFQUF9ERUxFVEVEICovXTogXCJGaXJlYmFzZSBBcHAgbmFtZWQgJ3skYXBwTmFtZX0nIGFscmVhZHkgZGVsZXRlZFwiLFxyXG4gICAgW1wiaW52YWxpZC1hcHAtYXJndW1lbnRcIiAvKiBJTlZBTElEX0FQUF9BUkdVTUVOVCAqL106ICdmaXJlYmFzZS57JGFwcE5hbWV9KCkgdGFrZXMgZWl0aGVyIG5vIGFyZ3VtZW50IG9yIGEgJyArXHJcbiAgICAgICAgJ0ZpcmViYXNlIEFwcCBpbnN0YW5jZS4nLFxyXG4gICAgW1wiaW52YWxpZC1sb2ctYXJndW1lbnRcIiAvKiBJTlZBTElEX0xPR19BUkdVTUVOVCAqL106ICdGaXJzdCBhcmd1bWVudCB0byBgb25Mb2dgIG11c3QgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLidcclxufTtcclxuY29uc3QgRVJST1JfRkFDVE9SWSA9IG5ldyBFcnJvckZhY3RvcnkoJ2FwcCcsICdGaXJlYmFzZScsIEVSUk9SUyk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIEZpcmViYXNlQXBwSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zLCBjb25maWcsIGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMuX2lzRGVsZXRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zKTtcclxuICAgICAgICB0aGlzLl9jb25maWcgPSBPYmplY3QuYXNzaWduKHt9LCBjb25maWcpO1xyXG4gICAgICAgIHRoaXMuX25hbWUgPSBjb25maWcubmFtZTtcclxuICAgICAgICB0aGlzLl9hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQgPVxyXG4gICAgICAgICAgICBjb25maWcuYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkO1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRDb21wb25lbnQobmV3IENvbXBvbmVudCgnYXBwJywgKCkgPT4gdGhpcywgXCJQVUJMSUNcIiAvKiBQVUJMSUMgKi8pKTtcclxuICAgIH1cclxuICAgIGdldCBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQ7XHJcbiAgICB9XHJcbiAgICBzZXQgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkKHZhbCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICB0aGlzLl9hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQgPSB2YWw7XHJcbiAgICB9XHJcbiAgICBnZXQgbmFtZSgpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX25hbWU7XHJcbiAgICB9XHJcbiAgICBnZXQgb3B0aW9ucygpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX29wdGlvbnM7XHJcbiAgICB9XHJcbiAgICBnZXQgY29uZmlnKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY29uZmlnO1xyXG4gICAgfVxyXG4gICAgZ2V0IGNvbnRhaW5lcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY29udGFpbmVyO1xyXG4gICAgfVxyXG4gICAgZ2V0IGlzRGVsZXRlZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXNEZWxldGVkO1xyXG4gICAgfVxyXG4gICAgc2V0IGlzRGVsZXRlZCh2YWwpIHtcclxuICAgICAgICB0aGlzLl9pc0RlbGV0ZWQgPSB2YWw7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgZnVuY3Rpb24gd2lsbCB0aHJvdyBhbiBFcnJvciBpZiB0aGUgQXBwIGhhcyBhbHJlYWR5IGJlZW4gZGVsZXRlZCAtXHJcbiAgICAgKiB1c2UgYmVmb3JlIHBlcmZvcm1pbmcgQVBJIGFjdGlvbnMgb24gdGhlIEFwcC5cclxuICAgICAqL1xyXG4gICAgY2hlY2tEZXN0cm95ZWQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEZWxldGVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYXBwLWRlbGV0ZWRcIiAvKiBBUFBfREVMRVRFRCAqLywgeyBhcHBOYW1lOiB0aGlzLl9uYW1lIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIGN1cnJlbnQgU0RLIHZlcnNpb24uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IFNES19WRVJTSU9OID0gdmVyc2lvbjtcclxuZnVuY3Rpb24gaW5pdGlhbGl6ZUFwcChvcHRpb25zLCByYXdDb25maWcgPSB7fSkge1xyXG4gICAgaWYgKHR5cGVvZiByYXdDb25maWcgIT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgY29uc3QgbmFtZSA9IHJhd0NvbmZpZztcclxuICAgICAgICByYXdDb25maWcgPSB7IG5hbWUgfTtcclxuICAgIH1cclxuICAgIGNvbnN0IGNvbmZpZyA9IE9iamVjdC5hc3NpZ24oeyBuYW1lOiBERUZBVUxUX0VOVFJZX05BTUUsIGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDogZmFsc2UgfSwgcmF3Q29uZmlnKTtcclxuICAgIGNvbnN0IG5hbWUgPSBjb25maWcubmFtZTtcclxuICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycgfHwgIW5hbWUpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImJhZC1hcHAtbmFtZVwiIC8qIEJBRF9BUFBfTkFNRSAqLywge1xyXG4gICAgICAgICAgICBhcHBOYW1lOiBTdHJpbmcobmFtZSlcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNvbnN0IGV4aXN0aW5nQXBwID0gX2FwcHMuZ2V0KG5hbWUpO1xyXG4gICAgaWYgKGV4aXN0aW5nQXBwKSB7XHJcbiAgICAgICAgLy8gcmV0dXJuIHRoZSBleGlzdGluZyBhcHAgaWYgb3B0aW9ucyBhbmQgY29uZmlnIGRlZXAgZXF1YWwgdGhlIG9uZXMgaW4gdGhlIGV4aXN0aW5nIGFwcC5cclxuICAgICAgICBpZiAoZGVlcEVxdWFsKG9wdGlvbnMsIGV4aXN0aW5nQXBwLm9wdGlvbnMpICYmXHJcbiAgICAgICAgICAgIGRlZXBFcXVhbChjb25maWcsIGV4aXN0aW5nQXBwLmNvbmZpZykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nQXBwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJkdXBsaWNhdGUtYXBwXCIgLyogRFVQTElDQVRFX0FQUCAqLywgeyBhcHBOYW1lOiBuYW1lIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGNvbnRhaW5lciA9IG5ldyBDb21wb25lbnRDb250YWluZXIobmFtZSk7XHJcbiAgICBmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiBfY29tcG9uZW50cy52YWx1ZXMoKSkge1xyXG4gICAgICAgIGNvbnRhaW5lci5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIGNvbnN0IG5ld0FwcCA9IG5ldyBGaXJlYmFzZUFwcEltcGwob3B0aW9ucywgY29uZmlnLCBjb250YWluZXIpO1xyXG4gICAgX2FwcHMuc2V0KG5hbWUsIG5ld0FwcCk7XHJcbiAgICByZXR1cm4gbmV3QXBwO1xyXG59XHJcbi8qKlxyXG4gKiBSZXRyaWV2ZXMgYSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gaW5zdGFuY2UuXHJcbiAqXHJcbiAqIFdoZW4gY2FsbGVkIHdpdGggbm8gYXJndW1lbnRzLCB0aGUgZGVmYXVsdCBhcHAgaXMgcmV0dXJuZWQuIFdoZW4gYW4gYXBwIG5hbWVcclxuICogaXMgcHJvdmlkZWQsIHRoZSBhcHAgY29ycmVzcG9uZGluZyB0byB0aGF0IG5hbWUgaXMgcmV0dXJuZWQuXHJcbiAqXHJcbiAqIEFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gaWYgdGhlIGFwcCBiZWluZyByZXRyaWV2ZWQgaGFzIG5vdCB5ZXQgYmVlblxyXG4gKiBpbml0aWFsaXplZC5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBSZXR1cm4gdGhlIGRlZmF1bHQgYXBwXHJcbiAqIGNvbnN0IGFwcCA9IGdldEFwcCgpO1xyXG4gKiBgYGBcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBSZXR1cm4gYSBuYW1lZCBhcHBcclxuICogY29uc3Qgb3RoZXJBcHAgPSBnZXRBcHAoXCJvdGhlckFwcFwiKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBuYW1lIC0gT3B0aW9uYWwgbmFtZSBvZiB0aGUgYXBwIHRvIHJldHVybi4gSWYgbm8gbmFtZSBpc1xyXG4gKiAgIHByb3ZpZGVkLCB0aGUgZGVmYXVsdCBpcyBgXCJbREVGQVVMVF1cImAuXHJcbiAqXHJcbiAqIEByZXR1cm5zIFRoZSBhcHAgY29ycmVzcG9uZGluZyB0byB0aGUgcHJvdmlkZWQgYXBwIG5hbWUuXHJcbiAqICAgSWYgbm8gYXBwIG5hbWUgaXMgcHJvdmlkZWQsIHRoZSBkZWZhdWx0IGFwcCBpcyByZXR1cm5lZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QXBwKG5hbWUgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgIGNvbnN0IGFwcCA9IF9hcHBzLmdldChuYW1lKTtcclxuICAgIGlmICghYXBwKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJuby1hcHBcIiAvKiBOT19BUFAgKi8sIHsgYXBwTmFtZTogbmFtZSB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBhcHA7XHJcbn1cclxuLyoqXHJcbiAqIEEgKHJlYWQtb25seSkgYXJyYXkgb2YgYWxsIGluaXRpYWxpemVkIGFwcHMuXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGdldEFwcHMoKSB7XHJcbiAgICByZXR1cm4gQXJyYXkuZnJvbShfYXBwcy52YWx1ZXMoKSk7XHJcbn1cclxuLyoqXHJcbiAqIFJlbmRlcnMgdGhpcyBhcHAgdW51c2FibGUgYW5kIGZyZWVzIHRoZSByZXNvdXJjZXMgb2YgYWxsIGFzc29jaWF0ZWRcclxuICogc2VydmljZXMuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogZGVsZXRlQXBwKGFwcClcclxuICogICAudGhlbihmdW5jdGlvbigpIHtcclxuICogICAgIGNvbnNvbGUubG9nKFwiQXBwIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xyXG4gKiAgIH0pXHJcbiAqICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XHJcbiAqICAgICBjb25zb2xlLmxvZyhcIkVycm9yIGRlbGV0aW5nIGFwcDpcIiwgZXJyb3IpO1xyXG4gKiAgIH0pO1xyXG4gKiBgYGBcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlQXBwKGFwcCkge1xyXG4gICAgY29uc3QgbmFtZSA9IGFwcC5uYW1lO1xyXG4gICAgaWYgKF9hcHBzLmhhcyhuYW1lKSkge1xyXG4gICAgICAgIF9hcHBzLmRlbGV0ZShuYW1lKTtcclxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChhcHAuY29udGFpbmVyXHJcbiAgICAgICAgICAgIC5nZXRQcm92aWRlcnMoKVxyXG4gICAgICAgICAgICAubWFwKHByb3ZpZGVyID0+IHByb3ZpZGVyLmRlbGV0ZSgpKSk7XHJcbiAgICAgICAgYXBwLmlzRGVsZXRlZCA9IHRydWU7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFJlZ2lzdGVycyBhIGxpYnJhcnkncyBuYW1lIGFuZCB2ZXJzaW9uIGZvciBwbGF0Zm9ybSBsb2dnaW5nIHB1cnBvc2VzLlxyXG4gKiBAcGFyYW0gbGlicmFyeSAtIE5hbWUgb2YgMXAgb3IgM3AgbGlicmFyeSAoZS5nLiBmaXJlc3RvcmUsIGFuZ3VsYXJmaXJlKVxyXG4gKiBAcGFyYW0gdmVyc2lvbiAtIEN1cnJlbnQgdmVyc2lvbiBvZiB0aGF0IGxpYnJhcnkuXHJcbiAqIEBwYXJhbSB2YXJpYW50IC0gQnVuZGxlIHZhcmlhbnQsIGUuZy4sIG5vZGUsIHJuLCBldGMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyVmVyc2lvbihsaWJyYXJ5S2V5T3JOYW1lLCB2ZXJzaW9uLCB2YXJpYW50KSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICAvLyBUT0RPOiBXZSBjYW4gdXNlIHRoaXMgY2hlY2sgdG8gd2hpdGVsaXN0IHN0cmluZ3Mgd2hlbi9pZiB3ZSBzZXQgdXBcclxuICAgIC8vIGEgZ29vZCB3aGl0ZWxpc3Qgc3lzdGVtLlxyXG4gICAgbGV0IGxpYnJhcnkgPSAoX2EgPSBQTEFURk9STV9MT0dfU1RSSU5HW2xpYnJhcnlLZXlPck5hbWVdKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBsaWJyYXJ5S2V5T3JOYW1lO1xyXG4gICAgaWYgKHZhcmlhbnQpIHtcclxuICAgICAgICBsaWJyYXJ5ICs9IGAtJHt2YXJpYW50fWA7XHJcbiAgICB9XHJcbiAgICBjb25zdCBsaWJyYXJ5TWlzbWF0Y2ggPSBsaWJyYXJ5Lm1hdGNoKC9cXHN8XFwvLyk7XHJcbiAgICBjb25zdCB2ZXJzaW9uTWlzbWF0Y2ggPSB2ZXJzaW9uLm1hdGNoKC9cXHN8XFwvLyk7XHJcbiAgICBpZiAobGlicmFyeU1pc21hdGNoIHx8IHZlcnNpb25NaXNtYXRjaCkge1xyXG4gICAgICAgIGNvbnN0IHdhcm5pbmcgPSBbXHJcbiAgICAgICAgICAgIGBVbmFibGUgdG8gcmVnaXN0ZXIgbGlicmFyeSBcIiR7bGlicmFyeX1cIiB3aXRoIHZlcnNpb24gXCIke3ZlcnNpb259XCI6YFxyXG4gICAgICAgIF07XHJcbiAgICAgICAgaWYgKGxpYnJhcnlNaXNtYXRjaCkge1xyXG4gICAgICAgICAgICB3YXJuaW5nLnB1c2goYGxpYnJhcnkgbmFtZSBcIiR7bGlicmFyeX1cIiBjb250YWlucyBpbGxlZ2FsIGNoYXJhY3RlcnMgKHdoaXRlc3BhY2Ugb3IgXCIvXCIpYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2ggJiYgdmVyc2lvbk1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgIHdhcm5pbmcucHVzaCgnYW5kJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2ZXJzaW9uTWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgd2FybmluZy5wdXNoKGB2ZXJzaW9uIG5hbWUgXCIke3ZlcnNpb259XCIgY29udGFpbnMgaWxsZWdhbCBjaGFyYWN0ZXJzICh3aGl0ZXNwYWNlIG9yIFwiL1wiKWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsb2dnZXIud2Fybih3YXJuaW5nLmpvaW4oJyAnKSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoYCR7bGlicmFyeX0tdmVyc2lvbmAsICgpID0+ICh7IGxpYnJhcnksIHZlcnNpb24gfSksIFwiVkVSU0lPTlwiIC8qIFZFUlNJT04gKi8pKTtcclxufVxyXG4vKipcclxuICogU2V0cyBsb2cgaGFuZGxlciBmb3IgYWxsIEZpcmViYXNlIFNES3MuXHJcbiAqIEBwYXJhbSBsb2dDYWxsYmFjayAtIEFuIG9wdGlvbmFsIGN1c3RvbSBsb2cgaGFuZGxlciB0aGF0IGV4ZWN1dGVzIHVzZXIgY29kZSB3aGVuZXZlclxyXG4gKiB0aGUgRmlyZWJhc2UgU0RLIG1ha2VzIGEgbG9nZ2luZyBjYWxsLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBvbkxvZyhsb2dDYWxsYmFjaywgb3B0aW9ucykge1xyXG4gICAgaWYgKGxvZ0NhbGxiYWNrICE9PSBudWxsICYmIHR5cGVvZiBsb2dDYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW52YWxpZC1sb2ctYXJndW1lbnRcIiAvKiBJTlZBTElEX0xPR19BUkdVTUVOVCAqLyk7XHJcbiAgICB9XHJcbiAgICBzZXRVc2VyTG9nSGFuZGxlcihsb2dDYWxsYmFjaywgb3B0aW9ucyk7XHJcbn1cclxuLyoqXHJcbiAqIFNldHMgbG9nIGxldmVsIGZvciBhbGwgRmlyZWJhc2UgU0RLcy5cclxuICpcclxuICogQWxsIG9mIHRoZSBsb2cgdHlwZXMgYWJvdmUgdGhlIGN1cnJlbnQgbG9nIGxldmVsIGFyZSBjYXB0dXJlZCAoaS5lLiBpZlxyXG4gKiB5b3Ugc2V0IHRoZSBsb2cgbGV2ZWwgdG8gYGluZm9gLCBlcnJvcnMgYXJlIGxvZ2dlZCwgYnV0IGBkZWJ1Z2AgYW5kXHJcbiAqIGB2ZXJib3NlYCBsb2dzIGFyZSBub3QpLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRMb2dMZXZlbChsb2dMZXZlbCkge1xyXG4gICAgc2V0TG9nTGV2ZWwkMShsb2dMZXZlbCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJDb3JlQ29tcG9uZW50cyh2YXJpYW50KSB7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudCgncGxhdGZvcm0tbG9nZ2VyJywgY29udGFpbmVyID0+IG5ldyBQbGF0Zm9ybUxvZ2dlclNlcnZpY2VJbXBsKGNvbnRhaW5lciksIFwiUFJJVkFURVwiIC8qIFBSSVZBVEUgKi8pKTtcclxuICAgIC8vIFJlZ2lzdGVyIGBhcHBgIHBhY2thZ2UuXHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSRvLCB2ZXJzaW9uJDEsIHZhcmlhbnQpO1xyXG4gICAgLy8gQlVJTERfVEFSR0VUIHdpbGwgYmUgcmVwbGFjZWQgYnkgdmFsdWVzIGxpa2UgZXNtNSwgZXNtMjAxNywgY2pzNSwgZXRjIGR1cmluZyB0aGUgY29tcGlsYXRpb25cclxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lJG8sIHZlcnNpb24kMSwgJ2VzbTIwMTcnKTtcclxuICAgIC8vIFJlZ2lzdGVyIHBsYXRmb3JtIFNESyBpZGVudGlmaWVyIChubyB2ZXJzaW9uKS5cclxuICAgIHJlZ2lzdGVyVmVyc2lvbignZmlyZS1qcycsICcnKTtcclxufVxuXG4vKipcclxuICogRmlyZWJhc2UgQXBwXHJcbiAqXHJcbiAqIEByZW1hcmtzIFRoaXMgcGFja2FnZSBjb29yZGluYXRlcyB0aGUgY29tbXVuaWNhdGlvbiBiZXR3ZWVuIHRoZSBkaWZmZXJlbnQgRmlyZWJhc2UgY29tcG9uZW50c1xyXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cclxuICovXHJcbnJlZ2lzdGVyQ29yZUNvbXBvbmVudHMoJycpO1xuXG5leHBvcnQgeyBTREtfVkVSU0lPTiwgREVGQVVMVF9FTlRSWV9OQU1FIGFzIF9ERUZBVUxUX0VOVFJZX05BTUUsIF9hZGRDb21wb25lbnQsIF9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudCwgX2FwcHMsIF9jbGVhckNvbXBvbmVudHMsIF9jb21wb25lbnRzLCBfZ2V0UHJvdmlkZXIsIF9yZWdpc3RlckNvbXBvbmVudCwgX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSwgZGVsZXRlQXBwLCBnZXRBcHAsIGdldEFwcHMsIGluaXRpYWxpemVBcHAsIG9uTG9nLCByZWdpc3RlclZlcnNpb24sIHNldExvZ0xldmVsIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEEgY29udGFpbmVyIGZvciBhbGwgb2YgdGhlIExvZ2dlciBpbnN0YW5jZXNcclxuICovXHJcbmNvbnN0IGluc3RhbmNlcyA9IFtdO1xyXG4vKipcclxuICogVGhlIEpTIFNESyBzdXBwb3J0cyA1IGxvZyBsZXZlbHMgYW5kIGFsc28gYWxsb3dzIGEgdXNlciB0aGUgYWJpbGl0eSB0b1xyXG4gKiBzaWxlbmNlIHRoZSBsb2dzIGFsdG9nZXRoZXIuXHJcbiAqXHJcbiAqIFRoZSBvcmRlciBpcyBhIGZvbGxvd3M6XHJcbiAqIERFQlVHIDwgVkVSQk9TRSA8IElORk8gPCBXQVJOIDwgRVJST1JcclxuICpcclxuICogQWxsIG9mIHRoZSBsb2cgdHlwZXMgYWJvdmUgdGhlIGN1cnJlbnQgbG9nIGxldmVsIHdpbGwgYmUgY2FwdHVyZWQgKGkuZS4gaWZcclxuICogeW91IHNldCB0aGUgbG9nIGxldmVsIHRvIGBJTkZPYCwgZXJyb3JzIHdpbGwgc3RpbGwgYmUgbG9nZ2VkLCBidXQgYERFQlVHYCBhbmRcclxuICogYFZFUkJPU0VgIGxvZ3Mgd2lsbCBub3QpXHJcbiAqL1xyXG52YXIgTG9nTGV2ZWw7XHJcbihmdW5jdGlvbiAoTG9nTGV2ZWwpIHtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiREVCVUdcIl0gPSAwXSA9IFwiREVCVUdcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiVkVSQk9TRVwiXSA9IDFdID0gXCJWRVJCT1NFXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIklORk9cIl0gPSAyXSA9IFwiSU5GT1wiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJXQVJOXCJdID0gM10gPSBcIldBUk5cIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiRVJST1JcIl0gPSA0XSA9IFwiRVJST1JcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiU0lMRU5UXCJdID0gNV0gPSBcIlNJTEVOVFwiO1xyXG59KShMb2dMZXZlbCB8fCAoTG9nTGV2ZWwgPSB7fSkpO1xyXG5jb25zdCBsZXZlbFN0cmluZ1RvRW51bSA9IHtcclxuICAgICdkZWJ1Zyc6IExvZ0xldmVsLkRFQlVHLFxyXG4gICAgJ3ZlcmJvc2UnOiBMb2dMZXZlbC5WRVJCT1NFLFxyXG4gICAgJ2luZm8nOiBMb2dMZXZlbC5JTkZPLFxyXG4gICAgJ3dhcm4nOiBMb2dMZXZlbC5XQVJOLFxyXG4gICAgJ2Vycm9yJzogTG9nTGV2ZWwuRVJST1IsXHJcbiAgICAnc2lsZW50JzogTG9nTGV2ZWwuU0lMRU5UXHJcbn07XHJcbi8qKlxyXG4gKiBUaGUgZGVmYXVsdCBsb2cgbGV2ZWxcclxuICovXHJcbmNvbnN0IGRlZmF1bHRMb2dMZXZlbCA9IExvZ0xldmVsLklORk87XHJcbi8qKlxyXG4gKiBCeSBkZWZhdWx0LCBgY29uc29sZS5kZWJ1Z2AgaXMgbm90IGRpc3BsYXllZCBpbiB0aGUgZGV2ZWxvcGVyIGNvbnNvbGUgKGluXHJcbiAqIGNocm9tZSkuIFRvIGF2b2lkIGZvcmNpbmcgdXNlcnMgdG8gaGF2ZSB0byBvcHQtaW4gdG8gdGhlc2UgbG9ncyB0d2ljZVxyXG4gKiAoaS5lLiBvbmNlIGZvciBmaXJlYmFzZSwgYW5kIG9uY2UgaW4gdGhlIGNvbnNvbGUpLCB3ZSBhcmUgc2VuZGluZyBgREVCVUdgXHJcbiAqIGxvZ3MgdG8gdGhlIGBjb25zb2xlLmxvZ2AgZnVuY3Rpb24uXHJcbiAqL1xyXG5jb25zdCBDb25zb2xlTWV0aG9kID0ge1xyXG4gICAgW0xvZ0xldmVsLkRFQlVHXTogJ2xvZycsXHJcbiAgICBbTG9nTGV2ZWwuVkVSQk9TRV06ICdsb2cnLFxyXG4gICAgW0xvZ0xldmVsLklORk9dOiAnaW5mbycsXHJcbiAgICBbTG9nTGV2ZWwuV0FSTl06ICd3YXJuJyxcclxuICAgIFtMb2dMZXZlbC5FUlJPUl06ICdlcnJvcidcclxufTtcclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGxvZyBoYW5kbGVyIHdpbGwgZm9yd2FyZCBERUJVRywgVkVSQk9TRSwgSU5GTywgV0FSTiwgYW5kIEVSUk9SXHJcbiAqIG1lc3NhZ2VzIG9uIHRvIHRoZWlyIGNvcnJlc3BvbmRpbmcgY29uc29sZSBjb3VudGVycGFydHMgKGlmIHRoZSBsb2cgbWV0aG9kXHJcbiAqIGlzIHN1cHBvcnRlZCBieSB0aGUgY3VycmVudCBsb2cgbGV2ZWwpXHJcbiAqL1xyXG5jb25zdCBkZWZhdWx0TG9nSGFuZGxlciA9IChpbnN0YW5jZSwgbG9nVHlwZSwgLi4uYXJncykgPT4ge1xyXG4gICAgaWYgKGxvZ1R5cGUgPCBpbnN0YW5jZS5sb2dMZXZlbCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgIGNvbnN0IG1ldGhvZCA9IENvbnNvbGVNZXRob2RbbG9nVHlwZV07XHJcbiAgICBpZiAobWV0aG9kKSB7XHJcbiAgICAgICAgY29uc29sZVttZXRob2RdKGBbJHtub3d9XSAgJHtpbnN0YW5jZS5uYW1lfTpgLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQXR0ZW1wdGVkIHRvIGxvZyBhIG1lc3NhZ2Ugd2l0aCBhbiBpbnZhbGlkIGxvZ1R5cGUgKHZhbHVlOiAke2xvZ1R5cGV9KWApO1xyXG4gICAgfVxyXG59O1xyXG5jbGFzcyBMb2dnZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBHaXZlcyB5b3UgYW4gaW5zdGFuY2Ugb2YgYSBMb2dnZXIgdG8gY2FwdHVyZSBtZXNzYWdlcyBhY2NvcmRpbmcgdG9cclxuICAgICAqIEZpcmViYXNlJ3MgbG9nZ2luZyBzY2hlbWUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgdGhhdCB0aGUgbG9ncyB3aWxsIGJlIGFzc29jaWF0ZWQgd2l0aFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbG9nIGxldmVsIG9mIHRoZSBnaXZlbiBMb2dnZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSBkZWZhdWx0TG9nTGV2ZWw7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIG1haW4gKGludGVybmFsKSBsb2cgaGFuZGxlciBmb3IgdGhlIExvZ2dlciBpbnN0YW5jZS5cclxuICAgICAgICAgKiBDYW4gYmUgc2V0IHRvIGEgbmV3IGZ1bmN0aW9uIGluIGludGVybmFsIHBhY2thZ2UgY29kZSBidXQgbm90IGJ5IHVzZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlciA9IGRlZmF1bHRMb2dIYW5kbGVyO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBvcHRpb25hbCwgYWRkaXRpb25hbCwgdXNlci1kZWZpbmVkIGxvZyBoYW5kbGVyIGZvciB0aGUgTG9nZ2VyIGluc3RhbmNlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDYXB0dXJlIHRoZSBjdXJyZW50IGluc3RhbmNlIGZvciBsYXRlciB1c2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBpbnN0YW5jZXMucHVzaCh0aGlzKTtcclxuICAgIH1cclxuICAgIGdldCBsb2dMZXZlbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbG9nTGV2ZWw7XHJcbiAgICB9XHJcbiAgICBzZXQgbG9nTGV2ZWwodmFsKSB7XHJcbiAgICAgICAgaWYgKCEodmFsIGluIExvZ0xldmVsKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIHZhbHVlIFwiJHt2YWx9XCIgYXNzaWduZWQgdG8gXFxgbG9nTGV2ZWxcXGBgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSB2YWw7XHJcbiAgICB9XHJcbiAgICAvLyBXb3JrYXJvdW5kIGZvciBzZXR0ZXIvZ2V0dGVyIGhhdmluZyB0byBiZSB0aGUgc2FtZSB0eXBlLlxyXG4gICAgc2V0TG9nTGV2ZWwodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSB0eXBlb2YgdmFsID09PSAnc3RyaW5nJyA/IGxldmVsU3RyaW5nVG9FbnVtW3ZhbF0gOiB2YWw7XHJcbiAgICB9XHJcbiAgICBnZXQgbG9nSGFuZGxlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbG9nSGFuZGxlcjtcclxuICAgIH1cclxuICAgIHNldCBsb2dIYW5kbGVyKHZhbCkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdmFsICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIGFzc2lnbmVkIHRvIGBsb2dIYW5kbGVyYCBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlciA9IHZhbDtcclxuICAgIH1cclxuICAgIGdldCB1c2VyTG9nSGFuZGxlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdXNlckxvZ0hhbmRsZXI7XHJcbiAgICB9XHJcbiAgICBzZXQgdXNlckxvZ0hhbmRsZXIodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgPSB2YWw7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBmdW5jdGlvbnMgYmVsb3cgYXJlIGFsbCBiYXNlZCBvbiB0aGUgYGNvbnNvbGVgIGludGVyZmFjZVxyXG4gICAgICovXHJcbiAgICBkZWJ1ZyguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuREVCVUcsIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuREVCVUcsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgbG9nKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJlxyXG4gICAgICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5WRVJCT1NFLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLlZFUkJPU0UsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgaW5mbyguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuSU5GTywgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5JTkZPLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIHdhcm4oLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLldBUk4sIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuV0FSTiwgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBlcnJvciguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuRVJST1IsIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuRVJST1IsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHNldExvZ0xldmVsKGxldmVsKSB7XHJcbiAgICBpbnN0YW5jZXMuZm9yRWFjaChpbnN0ID0+IHtcclxuICAgICAgICBpbnN0LnNldExvZ0xldmVsKGxldmVsKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIHNldFVzZXJMb2dIYW5kbGVyKGxvZ0NhbGxiYWNrLCBvcHRpb25zKSB7XHJcbiAgICBmb3IgKGNvbnN0IGluc3RhbmNlIG9mIGluc3RhbmNlcykge1xyXG4gICAgICAgIGxldCBjdXN0b21Mb2dMZXZlbCA9IG51bGw7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5sZXZlbCkge1xyXG4gICAgICAgICAgICBjdXN0b21Mb2dMZXZlbCA9IGxldmVsU3RyaW5nVG9FbnVtW29wdGlvbnMubGV2ZWxdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobG9nQ2FsbGJhY2sgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UudXNlckxvZ0hhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UudXNlckxvZ0hhbmRsZXIgPSAoaW5zdGFuY2UsIGxldmVsLCAuLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXJnc1xyXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoYXJnID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJnID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhcmcgPT09ICdudW1iZXInIHx8IHR5cGVvZiBhcmcgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJnLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFyZyBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmcubWVzc2FnZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYXJnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoaWdub3JlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoYXJnID0+IGFyZylcclxuICAgICAgICAgICAgICAgICAgICAuam9pbignICcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxldmVsID49IChjdXN0b21Mb2dMZXZlbCAhPT0gbnVsbCAmJiBjdXN0b21Mb2dMZXZlbCAhPT0gdm9pZCAwID8gY3VzdG9tTG9nTGV2ZWwgOiBpbnN0YW5jZS5sb2dMZXZlbCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dDYWxsYmFjayh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsOiBMb2dMZXZlbFtsZXZlbF0udG9Mb3dlckNhc2UoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJncyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogaW5zdGFuY2UubmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBMb2dMZXZlbCwgTG9nZ2VyLCBzZXRMb2dMZXZlbCwgc2V0VXNlckxvZ0hhbmRsZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJpbXBvcnQgeyBEZWZlcnJlZCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcblxuLyoqXHJcbiAqIENvbXBvbmVudCBmb3Igc2VydmljZSBuYW1lIFQsIGUuZy4gYGF1dGhgLCBgYXV0aC1pbnRlcm5hbGBcclxuICovXHJcbmNsYXNzIENvbXBvbmVudCB7XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgcHVibGljIHNlcnZpY2UgbmFtZSwgZS5nLiBhcHAsIGF1dGgsIGZpcmVzdG9yZSwgZGF0YWJhc2VcclxuICAgICAqIEBwYXJhbSBpbnN0YW5jZUZhY3RvcnkgU2VydmljZSBmYWN0b3J5IHJlc3BvbnNpYmxlIGZvciBjcmVhdGluZyB0aGUgcHVibGljIGludGVyZmFjZVxyXG4gICAgICogQHBhcmFtIHR5cGUgd2hldGhlciB0aGUgc2VydmljZSBwcm92aWRlZCBieSB0aGUgY29tcG9uZW50IGlzIHB1YmxpYyBvciBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGluc3RhbmNlRmFjdG9yeSwgdHlwZSkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZUZhY3RvcnkgPSBpbnN0YW5jZUZhY3Rvcnk7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLm11bHRpcGxlSW5zdGFuY2VzID0gZmFsc2U7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUHJvcGVydGllcyB0byBiZSBhZGRlZCB0byB0aGUgc2VydmljZSBuYW1lc3BhY2VcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnNlcnZpY2VQcm9wcyA9IHt9O1xyXG4gICAgICAgIHRoaXMuaW5zdGFudGlhdGlvbk1vZGUgPSBcIkxBWllcIiAvKiBMQVpZICovO1xyXG4gICAgICAgIHRoaXMub25JbnN0YW5jZUNyZWF0ZWQgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgc2V0SW5zdGFudGlhdGlvbk1vZGUobW9kZSkge1xyXG4gICAgICAgIHRoaXMuaW5zdGFudGlhdGlvbk1vZGUgPSBtb2RlO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgc2V0TXVsdGlwbGVJbnN0YW5jZXMobXVsdGlwbGVJbnN0YW5jZXMpIHtcclxuICAgICAgICB0aGlzLm11bHRpcGxlSW5zdGFuY2VzID0gbXVsdGlwbGVJbnN0YW5jZXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBzZXRTZXJ2aWNlUHJvcHMocHJvcHMpIHtcclxuICAgICAgICB0aGlzLnNlcnZpY2VQcm9wcyA9IHByb3BzO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgc2V0SW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2soY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLm9uSW5zdGFuY2VDcmVhdGVkID0gY2FsbGJhY2s7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9FTlRSWV9OQU1FID0gJ1tERUZBVUxUXSc7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgaW5zdGFuY2UgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuICdhdXRoJywgJ2F1dGgtaW50ZXJuYWwnXHJcbiAqIE5hbWVTZXJ2aWNlTWFwcGluZ1tUXSBpcyBhbiBhbGlhcyBmb3IgdGhlIHR5cGUgb2YgdGhlIGluc3RhbmNlXHJcbiAqL1xyXG5jbGFzcyBQcm92aWRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmluc3RhbmNlcyA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc0RlZmVycmVkID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzT3B0aW9ucyA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLm9uSW5pdENhbGxiYWNrcyA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGlkZW50aWZpZXIgQSBwcm92aWRlciBjYW4gcHJvdmlkZSBtdWxpdHBsZSBpbnN0YW5jZXMgb2YgYSBzZXJ2aWNlXHJcbiAgICAgKiBpZiB0aGlzLmNvbXBvbmVudC5tdWx0aXBsZUluc3RhbmNlcyBpcyB0cnVlLlxyXG4gICAgICovXHJcbiAgICBnZXQoaWRlbnRpZmllcikge1xyXG4gICAgICAgIC8vIGlmIG11bHRpcGxlSW5zdGFuY2VzIGlzIG5vdCBzdXBwb3J0ZWQsIHVzZSB0aGUgZGVmYXVsdCBuYW1lXHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoIXRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuaGFzKG5vcm1hbGl6ZWRJZGVudGlmaWVyKSkge1xyXG4gICAgICAgICAgICBjb25zdCBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCgpO1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlc0RlZmVycmVkLnNldChub3JtYWxpemVkSWRlbnRpZmllciwgZGVmZXJyZWQpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKG5vcm1hbGl6ZWRJZGVudGlmaWVyKSB8fFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG91bGRBdXRvSW5pdGlhbGl6ZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBpbml0aWFsaXplIHRoZSBzZXJ2aWNlIGlmIGl0IGNhbiBiZSBhdXRvLWluaXRpYWxpemVkXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllclxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIGluc3RhbmNlIGZhY3RvcnkgdGhyb3dzIGFuIGV4Y2VwdGlvbiBkdXJpbmcgZ2V0KCksIGl0IHNob3VsZCBub3QgY2F1c2VcclxuICAgICAgICAgICAgICAgICAgICAvLyBhIGZhdGFsIGVycm9yLiBXZSBqdXN0IHJldHVybiB0aGUgdW5yZXNvbHZlZCBwcm9taXNlIGluIHRoaXMgY2FzZS5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5nZXQobm9ybWFsaXplZElkZW50aWZpZXIpLnByb21pc2U7XHJcbiAgICB9XHJcbiAgICBnZXRJbW1lZGlhdGUob3B0aW9ucykge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICAvLyBpZiBtdWx0aXBsZUluc3RhbmNlcyBpcyBub3Qgc3VwcG9ydGVkLCB1c2UgdGhlIGRlZmF1bHQgbmFtZVxyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmlkZW50aWZpZXIpO1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbmFsID0gKF9hID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLm9wdGlvbmFsKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKG5vcm1hbGl6ZWRJZGVudGlmaWVyKSB8fFxyXG4gICAgICAgICAgICB0aGlzLnNob3VsZEF1dG9Jbml0aWFsaXplKCkpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIEluIGNhc2UgYSBjb21wb25lbnQgaXMgbm90IGluaXRpYWxpemVkIGFuZCBzaG91bGQvY2FuIG5vdCBiZSBhdXRvLWluaXRpYWxpemVkIGF0IHRoZSBtb21lbnQsIHJldHVybiBudWxsIGlmIHRoZSBvcHRpb25hbCBmbGFnIGlzIHNldCwgb3IgdGhyb3dcclxuICAgICAgICAgICAgaWYgKG9wdGlvbmFsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKGBTZXJ2aWNlICR7dGhpcy5uYW1lfSBpcyBub3QgYXZhaWxhYmxlYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXRDb21wb25lbnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50O1xyXG4gICAgfVxyXG4gICAgc2V0Q29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgICAgIGlmIChjb21wb25lbnQubmFtZSAhPT0gdGhpcy5uYW1lKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKGBNaXNtYXRjaGluZyBDb21wb25lbnQgJHtjb21wb25lbnQubmFtZX0gZm9yIFByb3ZpZGVyICR7dGhpcy5uYW1lfS5gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKGBDb21wb25lbnQgZm9yICR7dGhpcy5uYW1lfSBoYXMgYWxyZWFkeSBiZWVuIHByb3ZpZGVkYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29tcG9uZW50ID0gY29tcG9uZW50O1xyXG4gICAgICAgIC8vIHJldHVybiBlYXJseSB3aXRob3V0IGF0dGVtcHRpbmcgdG8gaW5pdGlhbGl6ZSB0aGUgY29tcG9uZW50IGlmIHRoZSBjb21wb25lbnQgcmVxdWlyZXMgZXhwbGljaXQgaW5pdGlhbGl6YXRpb24gKGNhbGxpbmcgYFByb3ZpZGVyLmluaXRpYWxpemUoKWApXHJcbiAgICAgICAgaWYgKCF0aGlzLnNob3VsZEF1dG9Jbml0aWFsaXplKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpZiB0aGUgc2VydmljZSBpcyBlYWdlciwgaW5pdGlhbGl6ZSB0aGUgZGVmYXVsdCBpbnN0YW5jZVxyXG4gICAgICAgIGlmIChpc0NvbXBvbmVudEVhZ2VyKGNvbXBvbmVudCkpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7IGluc3RhbmNlSWRlbnRpZmllcjogREVGQVVMVF9FTlRSWV9OQU1FIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IGZvciBhbiBlYWdlciBDb21wb25lbnQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBkdXJpbmcgdGhlIGVhZ2VyXHJcbiAgICAgICAgICAgICAgICAvLyBpbml0aWFsaXphdGlvbiwgaXQgc2hvdWxkIG5vdCBjYXVzZSBhIGZhdGFsIGVycm9yLlxyXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogSW52ZXN0aWdhdGUgaWYgd2UgbmVlZCB0byBtYWtlIGl0IGNvbmZpZ3VyYWJsZSwgYmVjYXVzZSBzb21lIGNvbXBvbmVudCBtYXkgd2FudCB0byBjYXVzZVxyXG4gICAgICAgICAgICAgICAgLy8gYSBmYXRhbCBlcnJvciBpbiB0aGlzIGNhc2U/XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQ3JlYXRlIHNlcnZpY2UgaW5zdGFuY2VzIGZvciB0aGUgcGVuZGluZyBwcm9taXNlcyBhbmQgcmVzb2x2ZSB0aGVtXHJcbiAgICAgICAgLy8gTk9URTogaWYgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyBpcyBmYWxzZSwgb25seSB0aGUgZGVmYXVsdCBpbnN0YW5jZSB3aWxsIGJlIGNyZWF0ZWRcclxuICAgICAgICAvLyBhbmQgYWxsIHByb21pc2VzIHdpdGggcmVzb2x2ZSB3aXRoIGl0IHJlZ2FyZGxlc3Mgb2YgdGhlIGlkZW50aWZpZXIuXHJcbiAgICAgICAgZm9yIChjb25zdCBbaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZURlZmVycmVkXSBvZiB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmVudHJpZXMoKSkge1xyXG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAvLyBgZ2V0T3JJbml0aWFsaXplU2VydmljZSgpYCBzaG91bGQgYWx3YXlzIHJldHVybiBhIHZhbGlkIGluc3RhbmNlIHNpbmNlIGEgY29tcG9uZW50IGlzIGd1YXJhbnRlZWQuIHVzZSAhIHRvIG1ha2UgdHlwZXNjcmlwdCBoYXBweS5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlRGVmZXJyZWQucmVzb2x2ZShpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIGluc3RhbmNlIGZhY3RvcnkgdGhyb3dzIGFuIGV4Y2VwdGlvbiwgaXQgc2hvdWxkIG5vdCBjYXVzZVxyXG4gICAgICAgICAgICAgICAgLy8gYSBmYXRhbCBlcnJvci4gV2UganVzdCBsZWF2ZSB0aGUgcHJvbWlzZSB1bnJlc29sdmVkLlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2xlYXJJbnN0YW5jZShpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5kZWxldGUoaWRlbnRpZmllcik7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNPcHRpb25zLmRlbGV0ZShpZGVudGlmaWVyKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlcy5kZWxldGUoaWRlbnRpZmllcik7XHJcbiAgICB9XHJcbiAgICAvLyBhcHAuZGVsZXRlKCkgd2lsbCBjYWxsIHRoaXMgbWV0aG9kIG9uIGV2ZXJ5IHByb3ZpZGVyIHRvIGRlbGV0ZSB0aGUgc2VydmljZXNcclxuICAgIC8vIFRPRE86IHNob3VsZCB3ZSBtYXJrIHRoZSBwcm92aWRlciBhcyBkZWxldGVkP1xyXG4gICAgYXN5bmMgZGVsZXRlKCkge1xyXG4gICAgICAgIGNvbnN0IHNlcnZpY2VzID0gQXJyYXkuZnJvbSh0aGlzLmluc3RhbmNlcy52YWx1ZXMoKSk7XHJcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xyXG4gICAgICAgICAgICAuLi5zZXJ2aWNlc1xyXG4gICAgICAgICAgICAgICAgLmZpbHRlcihzZXJ2aWNlID0+ICdJTlRFUk5BTCcgaW4gc2VydmljZSkgLy8gbGVnYWN5IHNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgLm1hcChzZXJ2aWNlID0+IHNlcnZpY2UuSU5URVJOQUwuZGVsZXRlKCkpLFxyXG4gICAgICAgICAgICAuLi5zZXJ2aWNlc1xyXG4gICAgICAgICAgICAgICAgLmZpbHRlcihzZXJ2aWNlID0+ICdfZGVsZXRlJyBpbiBzZXJ2aWNlKSAvLyBtb2R1bGFyaXplZCBzZXJ2aWNlc1xyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgIC5tYXAoc2VydmljZSA9PiBzZXJ2aWNlLl9kZWxldGUoKSlcclxuICAgICAgICBdKTtcclxuICAgIH1cclxuICAgIGlzQ29tcG9uZW50U2V0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudCAhPSBudWxsO1xyXG4gICAgfVxyXG4gICAgaXNJbml0aWFsaXplZChpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzLmhhcyhpZGVudGlmaWVyKTtcclxuICAgIH1cclxuICAgIGdldE9wdGlvbnMoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlc09wdGlvbnMuZ2V0KGlkZW50aWZpZXIpIHx8IHt9O1xyXG4gICAgfVxyXG4gICAgaW5pdGlhbGl6ZShvcHRzID0ge30pIHtcclxuICAgICAgICBjb25zdCB7IG9wdGlvbnMgPSB7fSB9ID0gb3B0cztcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKG9wdHMuaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKG5vcm1hbGl6ZWRJZGVudGlmaWVyKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgJHt0aGlzLm5hbWV9KCR7bm9ybWFsaXplZElkZW50aWZpZXJ9KSBoYXMgYWxyZWFkeSBiZWVuIGluaXRpYWxpemVkYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5pc0NvbXBvbmVudFNldCgpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKGBDb21wb25lbnQgJHt0aGlzLm5hbWV9IGhhcyBub3QgYmVlbiByZWdpc3RlcmVkIHlldGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXIsXHJcbiAgICAgICAgICAgIG9wdGlvbnNcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyByZXNvbHZlIGFueSBwZW5kaW5nIHByb21pc2Ugd2FpdGluZyBmb3IgdGhlIHNlcnZpY2UgaW5zdGFuY2VcclxuICAgICAgICBmb3IgKGNvbnN0IFtpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlRGVmZXJyZWRdIG9mIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZW50cmllcygpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWREZWZlcnJlZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICBpZiAobm9ybWFsaXplZElkZW50aWZpZXIgPT09IG5vcm1hbGl6ZWREZWZlcnJlZElkZW50aWZpZXIpIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlRGVmZXJyZWQucmVzb2x2ZShpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIC0gYSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgaW52b2tlZCAgYWZ0ZXIgdGhlIHByb3ZpZGVyIGhhcyBiZWVuIGluaXRpYWxpemVkIGJ5IGNhbGxpbmcgcHJvdmlkZXIuaW5pdGlhbGl6ZSgpLlxyXG4gICAgICogVGhlIGZ1bmN0aW9uIGlzIGludm9rZWQgU1lOQ0hST05PVVNMWSwgc28gaXQgc2hvdWxkIG5vdCBleGVjdXRlIGFueSBsb25ncnVubmluZyB0YXNrcyBpbiBvcmRlciB0byBub3QgYmxvY2sgdGhlIHByb2dyYW0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlkZW50aWZpZXIgQW4gb3B0aW9uYWwgaW5zdGFuY2UgaWRlbnRpZmllclxyXG4gICAgICogQHJldHVybnMgYSBmdW5jdGlvbiB0byB1bnJlZ2lzdGVyIHRoZSBjYWxsYmFja1xyXG4gICAgICovXHJcbiAgICBvbkluaXQoY2FsbGJhY2ssIGlkZW50aWZpZXIpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpZGVudGlmaWVyKTtcclxuICAgICAgICBjb25zdCBleGlzdGluZ0NhbGxiYWNrcyA9IChfYSA9IHRoaXMub25Jbml0Q2FsbGJhY2tzLmdldChub3JtYWxpemVkSWRlbnRpZmllcikpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IG5ldyBTZXQoKTtcclxuICAgICAgICBleGlzdGluZ0NhbGxiYWNrcy5hZGQoY2FsbGJhY2spO1xyXG4gICAgICAgIHRoaXMub25Jbml0Q2FsbGJhY2tzLnNldChub3JtYWxpemVkSWRlbnRpZmllciwgZXhpc3RpbmdDYWxsYmFja3MpO1xyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nSW5zdGFuY2UgPSB0aGlzLmluc3RhbmNlcy5nZXQobm9ybWFsaXplZElkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmIChleGlzdGluZ0luc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKGV4aXN0aW5nSW5zdGFuY2UsIG5vcm1hbGl6ZWRJZGVudGlmaWVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgZXhpc3RpbmdDYWxsYmFja3MuZGVsZXRlKGNhbGxiYWNrKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbnZva2Ugb25Jbml0IGNhbGxiYWNrcyBzeW5jaHJvbm91c2x5XHJcbiAgICAgKiBAcGFyYW0gaW5zdGFuY2UgdGhlIHNlcnZpY2UgaW5zdGFuY2VgXHJcbiAgICAgKi9cclxuICAgIGludm9rZU9uSW5pdENhbGxiYWNrcyhpbnN0YW5jZSwgaWRlbnRpZmllcikge1xyXG4gICAgICAgIGNvbnN0IGNhbGxiYWNrcyA9IHRoaXMub25Jbml0Q2FsbGJhY2tzLmdldChpZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoIWNhbGxiYWNrcykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAoY29uc3QgY2FsbGJhY2sgb2YgY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhpbnN0YW5jZSwgaWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBpZ25vcmUgZXJyb3JzIGluIHRoZSBvbkluaXQgY2FsbGJhY2tcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldE9ySW5pdGlhbGl6ZVNlcnZpY2UoeyBpbnN0YW5jZUlkZW50aWZpZXIsIG9wdGlvbnMgPSB7fSB9KSB7XHJcbiAgICAgICAgbGV0IGluc3RhbmNlID0gdGhpcy5pbnN0YW5jZXMuZ2V0KGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCFpbnN0YW5jZSAmJiB0aGlzLmNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZSA9IHRoaXMuY29tcG9uZW50Lmluc3RhbmNlRmFjdG9yeSh0aGlzLmNvbnRhaW5lciwge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVJZGVudGlmaWVyRm9yRmFjdG9yeShpbnN0YW5jZUlkZW50aWZpZXIpLFxyXG4gICAgICAgICAgICAgICAgb3B0aW9uc1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXMuc2V0KGluc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlc09wdGlvbnMuc2V0KGluc3RhbmNlSWRlbnRpZmllciwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBJbnZva2Ugb25Jbml0IGxpc3RlbmVycy5cclxuICAgICAgICAgICAgICogTm90ZSB0aGlzLmNvbXBvbmVudC5vbkluc3RhbmNlQ3JlYXRlZCBpcyBkaWZmZXJlbnQsIHdoaWNoIGlzIHVzZWQgYnkgdGhlIGNvbXBvbmVudCBjcmVhdG9yLFxyXG4gICAgICAgICAgICAgKiB3aGlsZSBvbkluaXQgbGlzdGVuZXJzIGFyZSByZWdpc3RlcmVkIGJ5IGNvbnN1bWVycyBvZiB0aGUgcHJvdmlkZXIuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICB0aGlzLmludm9rZU9uSW5pdENhbGxiYWNrcyhpbnN0YW5jZSwgaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIE9yZGVyIGlzIGltcG9ydGFudFxyXG4gICAgICAgICAgICAgKiBvbkluc3RhbmNlQ3JlYXRlZCgpIHNob3VsZCBiZSBjYWxsZWQgYWZ0ZXIgdGhpcy5pbnN0YW5jZXMuc2V0KGluc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2UpOyB3aGljaFxyXG4gICAgICAgICAgICAgKiBtYWtlcyBgaXNJbml0aWFsaXplZCgpYCByZXR1cm4gdHJ1ZS5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbXBvbmVudC5vbkluc3RhbmNlQ3JlYXRlZCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5vbkluc3RhbmNlQ3JlYXRlZCh0aGlzLmNvbnRhaW5lciwgaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBpZ25vcmUgZXJyb3JzIGluIHRoZSBvbkluc3RhbmNlQ3JlYXRlZENhbGxiYWNrXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlIHx8IG51bGw7XHJcbiAgICB9XHJcbiAgICBub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIGlmICh0aGlzLmNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQubXVsdGlwbGVJbnN0YW5jZXMgPyBpZGVudGlmaWVyIDogREVGQVVMVF9FTlRSWV9OQU1FO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGlkZW50aWZpZXI7IC8vIGFzc3VtZSBtdWx0aXBsZSBpbnN0YW5jZXMgYXJlIHN1cHBvcnRlZCBiZWZvcmUgdGhlIGNvbXBvbmVudCBpcyBwcm92aWRlZC5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzaG91bGRBdXRvSW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICByZXR1cm4gKCEhdGhpcy5jb21wb25lbnQgJiZcclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuaW5zdGFudGlhdGlvbk1vZGUgIT09IFwiRVhQTElDSVRcIiAvKiBFWFBMSUNJVCAqLyk7XHJcbiAgICB9XHJcbn1cclxuLy8gdW5kZWZpbmVkIHNob3VsZCBiZSBwYXNzZWQgdG8gdGhlIHNlcnZpY2UgZmFjdG9yeSBmb3IgdGhlIGRlZmF1bHQgaW5zdGFuY2VcclxuZnVuY3Rpb24gbm9ybWFsaXplSWRlbnRpZmllckZvckZhY3RvcnkoaWRlbnRpZmllcikge1xyXG4gICAgcmV0dXJuIGlkZW50aWZpZXIgPT09IERFRkFVTFRfRU5UUllfTkFNRSA/IHVuZGVmaW5lZCA6IGlkZW50aWZpZXI7XHJcbn1cclxuZnVuY3Rpb24gaXNDb21wb25lbnRFYWdlcihjb21wb25lbnQpIHtcclxuICAgIHJldHVybiBjb21wb25lbnQuaW5zdGFudGlhdGlvbk1vZGUgPT09IFwiRUFHRVJcIiAvKiBFQUdFUiAqLztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQ29tcG9uZW50Q29udGFpbmVyIHRoYXQgcHJvdmlkZXMgUHJvdmlkZXJzIGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiBgYXV0aGAsIGBhdXRoLWludGVybmFsYFxyXG4gKi9cclxuY2xhc3MgQ29tcG9uZW50Q29udGFpbmVyIHtcclxuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJzID0gbmV3IE1hcCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNvbXBvbmVudCBDb21wb25lbnQgYmVpbmcgYWRkZWRcclxuICAgICAqIEBwYXJhbSBvdmVyd3JpdGUgV2hlbiBhIGNvbXBvbmVudCB3aXRoIHRoZSBzYW1lIG5hbWUgaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkLFxyXG4gICAgICogaWYgb3ZlcndyaXRlIGlzIHRydWU6IG92ZXJ3cml0ZSB0aGUgZXhpc3RpbmcgY29tcG9uZW50IHdpdGggdGhlIG5ldyBjb21wb25lbnQgYW5kIGNyZWF0ZSBhIG5ld1xyXG4gICAgICogcHJvdmlkZXIgd2l0aCB0aGUgbmV3IGNvbXBvbmVudC4gSXQgY2FuIGJlIHVzZWZ1bCBpbiB0ZXN0cyB3aGVyZSB5b3Ugd2FudCB0byB1c2UgZGlmZmVyZW50IG1vY2tzXHJcbiAgICAgKiBmb3IgZGlmZmVyZW50IHRlc3RzLlxyXG4gICAgICogaWYgb3ZlcndyaXRlIGlzIGZhbHNlOiB0aHJvdyBhbiBleGNlcHRpb25cclxuICAgICAqL1xyXG4gICAgYWRkQ29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5nZXRQcm92aWRlcihjb21wb25lbnQubmFtZSk7XHJcbiAgICAgICAgaWYgKHByb3ZpZGVyLmlzQ29tcG9uZW50U2V0KCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb21wb25lbnQgJHtjb21wb25lbnQubmFtZX0gaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkIHdpdGggJHt0aGlzLm5hbWV9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHByb3ZpZGVyLnNldENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgYWRkT3JPdmVyd3JpdGVDb21wb25lbnQoY29tcG9uZW50KSB7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSB0aGlzLmdldFByb3ZpZGVyKGNvbXBvbmVudC5uYW1lKTtcclxuICAgICAgICBpZiAocHJvdmlkZXIuaXNDb21wb25lbnRTZXQoKSkge1xyXG4gICAgICAgICAgICAvLyBkZWxldGUgdGhlIGV4aXN0aW5nIHByb3ZpZGVyIGZyb20gdGhlIGNvbnRhaW5lciwgc28gd2UgY2FuIHJlZ2lzdGVyIHRoZSBuZXcgY29tcG9uZW50XHJcbiAgICAgICAgICAgIHRoaXMucHJvdmlkZXJzLmRlbGV0ZShjb21wb25lbnQubmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIGdldFByb3ZpZGVyIHByb3ZpZGVzIGEgdHlwZSBzYWZlIGludGVyZmFjZSB3aGVyZSBpdCBjYW4gb25seSBiZSBjYWxsZWQgd2l0aCBhIGZpZWxkIG5hbWVcclxuICAgICAqIHByZXNlbnQgaW4gTmFtZVNlcnZpY2VNYXBwaW5nIGludGVyZmFjZS5cclxuICAgICAqXHJcbiAgICAgKiBGaXJlYmFzZSBTREtzIHByb3ZpZGluZyBzZXJ2aWNlcyBzaG91bGQgZXh0ZW5kIE5hbWVTZXJ2aWNlTWFwcGluZyBpbnRlcmZhY2UgdG8gcmVnaXN0ZXJcclxuICAgICAqIHRoZW1zZWx2ZXMuXHJcbiAgICAgKi9cclxuICAgIGdldFByb3ZpZGVyKG5hbWUpIHtcclxuICAgICAgICBpZiAodGhpcy5wcm92aWRlcnMuaGFzKG5hbWUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3ZpZGVycy5nZXQobmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNyZWF0ZSBhIFByb3ZpZGVyIGZvciBhIHNlcnZpY2UgdGhhdCBoYXNuJ3QgcmVnaXN0ZXJlZCB3aXRoIEZpcmViYXNlXHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSBuZXcgUHJvdmlkZXIobmFtZSwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlcnMuc2V0KG5hbWUsIHByb3ZpZGVyKTtcclxuICAgICAgICByZXR1cm4gcHJvdmlkZXI7XHJcbiAgICB9XHJcbiAgICBnZXRQcm92aWRlcnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5wcm92aWRlcnMudmFsdWVzKCkpO1xyXG4gICAgfVxyXG59XG5cbmV4cG9ydCB7IENvbXBvbmVudCwgQ29tcG9uZW50Q29udGFpbmVyLCBQcm92aWRlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsInZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9O1xuXG52YXIgZXNtID0ge307XG5cbi8qXG5cbiBDb3B5cmlnaHQgVGhlIENsb3N1cmUgTGlicmFyeSBBdXRob3JzLlxuIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG4qL1xudmFyIGssZ29vZz1nb29nfHx7fSxsPWNvbW1vbmpzR2xvYmFsfHxzZWxmO2Z1bmN0aW9uIGFhKCl7fWZ1bmN0aW9uIGJhKGEpe3ZhciBiPXR5cGVvZiBhO2I9XCJvYmplY3RcIiE9Yj9iOmE/QXJyYXkuaXNBcnJheShhKT9cImFycmF5XCI6YjpcIm51bGxcIjtyZXR1cm4gXCJhcnJheVwiPT1ifHxcIm9iamVjdFwiPT1iJiZcIm51bWJlclwiPT10eXBlb2YgYS5sZW5ndGh9ZnVuY3Rpb24gcChhKXt2YXIgYj10eXBlb2YgYTtyZXR1cm4gXCJvYmplY3RcIj09YiYmbnVsbCE9YXx8XCJmdW5jdGlvblwiPT1ifWZ1bmN0aW9uIGRhKGEpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxlYSkmJmFbZWFdfHwoYVtlYV09KytmYSl9dmFyIGVhPVwiY2xvc3VyZV91aWRfXCIrKDFFOSpNYXRoLnJhbmRvbSgpPj4+MCksZmE9MDtmdW5jdGlvbiBoYShhLGIsYyl7cmV0dXJuIGEuY2FsbC5hcHBseShhLmJpbmQsYXJndW1lbnRzKX1cbmZ1bmN0aW9uIGlhKGEsYixjKXtpZighYSl0aHJvdyBFcnJvcigpO2lmKDI8YXJndW1lbnRzLmxlbmd0aCl7dmFyIGQ9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDIpO3JldHVybiBmdW5jdGlvbigpe3ZhciBlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7QXJyYXkucHJvdG90eXBlLnVuc2hpZnQuYXBwbHkoZSxkKTtyZXR1cm4gYS5hcHBseShiLGUpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShiLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIHEoYSxiLGMpe0Z1bmN0aW9uLnByb3RvdHlwZS5iaW5kJiYtMSE9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQudG9TdHJpbmcoKS5pbmRleE9mKFwibmF0aXZlIGNvZGVcIik/cT1oYTpxPWlhO3JldHVybiBxLmFwcGx5KG51bGwsYXJndW1lbnRzKX1cbmZ1bmN0aW9uIGphKGEsYil7dmFyIGM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiBmdW5jdGlvbigpe3ZhciBkPWMuc2xpY2UoKTtkLnB1c2guYXBwbHkoZCxhcmd1bWVudHMpO3JldHVybiBhLmFwcGx5KHRoaXMsZCl9fWZ1bmN0aW9uIHQoYSxiKXtmdW5jdGlvbiBjKCl7fWMucHJvdG90eXBlPWIucHJvdG90eXBlO2EuWj1iLnByb3RvdHlwZTthLnByb3RvdHlwZT1uZXcgYzthLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1hO2EuVmI9ZnVuY3Rpb24oZCxlLGYpe2Zvcih2YXIgaD1BcnJheShhcmd1bWVudHMubGVuZ3RoLTIpLG49MjtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKWhbbi0yXT1hcmd1bWVudHNbbl07cmV0dXJuIGIucHJvdG90eXBlW2VdLmFwcGx5KGQsaCl9O31mdW5jdGlvbiB2KCl7dGhpcy5zPXRoaXMuczt0aGlzLm89dGhpcy5vO312YXIga2E9MCxsYT17fTt2LnByb3RvdHlwZS5zPSExO3YucHJvdG90eXBlLm5hPWZ1bmN0aW9uKCl7aWYoIXRoaXMucyYmKHRoaXMucz0hMCx0aGlzLk0oKSwwIT1rYSkpe3ZhciBhPWRhKHRoaXMpO2RlbGV0ZSBsYVthXTt9fTt2LnByb3RvdHlwZS5NPWZ1bmN0aW9uKCl7aWYodGhpcy5vKWZvcig7dGhpcy5vLmxlbmd0aDspdGhpcy5vLnNoaWZ0KCkoKTt9O2NvbnN0IG1hPUFycmF5LnByb3RvdHlwZS5pbmRleE9mP2Z1bmN0aW9uKGEsYil7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoYSxiLHZvaWQgMCl9OmZ1bmN0aW9uKGEsYil7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhKXJldHVybiBcInN0cmluZ1wiIT09dHlwZW9mIGJ8fDEhPWIubGVuZ3RoPy0xOmEuaW5kZXhPZihiLDApO2ZvcihsZXQgYz0wO2M8YS5sZW5ndGg7YysrKWlmKGMgaW4gYSYmYVtjXT09PWIpcmV0dXJuIGM7cmV0dXJuIC0xfSxuYT1BcnJheS5wcm90b3R5cGUuZm9yRWFjaD9mdW5jdGlvbihhLGIsYyl7QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLGIsYyk7fTpmdW5jdGlvbihhLGIsYyl7Y29uc3QgZD1hLmxlbmd0aCxlPVwic3RyaW5nXCI9PT10eXBlb2YgYT9hLnNwbGl0KFwiXCIpOmE7Zm9yKGxldCBmPTA7ZjxkO2YrKylmIGluIGUmJmIuY2FsbChjLGVbZl0sZixhKTt9O1xuZnVuY3Rpb24gb2EoYSl7YTp7dmFyIGI9cGE7Y29uc3QgYz1hLmxlbmd0aCxkPVwic3RyaW5nXCI9PT10eXBlb2YgYT9hLnNwbGl0KFwiXCIpOmE7Zm9yKGxldCBlPTA7ZTxjO2UrKylpZihlIGluIGQmJmIuY2FsbCh2b2lkIDAsZFtlXSxlLGEpKXtiPWU7YnJlYWsgYX1iPS0xO31yZXR1cm4gMD5iP251bGw6XCJzdHJpbmdcIj09PXR5cGVvZiBhP2EuY2hhckF0KGIpOmFbYl19ZnVuY3Rpb24gcWEoYSl7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sYXJndW1lbnRzKX1mdW5jdGlvbiByYShhKXtjb25zdCBiPWEubGVuZ3RoO2lmKDA8Yil7Y29uc3QgYz1BcnJheShiKTtmb3IobGV0IGQ9MDtkPGI7ZCsrKWNbZF09YVtkXTtyZXR1cm4gY31yZXR1cm4gW119ZnVuY3Rpb24gc2EoYSl7cmV0dXJuIC9eW1xcc1xceGEwXSokLy50ZXN0KGEpfXZhciB0YT1TdHJpbmcucHJvdG90eXBlLnRyaW0/ZnVuY3Rpb24oYSl7cmV0dXJuIGEudHJpbSgpfTpmdW5jdGlvbihhKXtyZXR1cm4gL15bXFxzXFx4YTBdKihbXFxzXFxTXSo/KVtcXHNcXHhhMF0qJC8uZXhlYyhhKVsxXX07ZnVuY3Rpb24gdyhhLGIpe3JldHVybiAtMSE9YS5pbmRleE9mKGIpfWZ1bmN0aW9uIHVhKGEsYil7cmV0dXJuIGE8Yj8tMTphPmI/MTowfXZhciB4O2E6e3ZhciB2YT1sLm5hdmlnYXRvcjtpZih2YSl7dmFyIHdhPXZhLnVzZXJBZ2VudDtpZih3YSl7eD13YTticmVhayBhfX14PVwiXCI7fWZ1bmN0aW9uIHhhKGEsYixjKXtmb3IoY29uc3QgZCBpbiBhKWIuY2FsbChjLGFbZF0sZCxhKTt9ZnVuY3Rpb24geWEoYSl7Y29uc3QgYj17fTtmb3IoY29uc3QgYyBpbiBhKWJbY109YVtjXTtyZXR1cm4gYn12YXIgemE9XCJjb25zdHJ1Y3RvciBoYXNPd25Qcm9wZXJ0eSBpc1Byb3RvdHlwZU9mIHByb3BlcnR5SXNFbnVtZXJhYmxlIHRvTG9jYWxlU3RyaW5nIHRvU3RyaW5nIHZhbHVlT2ZcIi5zcGxpdChcIiBcIik7ZnVuY3Rpb24gQWEoYSxiKXtsZXQgYyxkO2ZvcihsZXQgZT0xO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspe2Q9YXJndW1lbnRzW2VdO2ZvcihjIGluIGQpYVtjXT1kW2NdO2ZvcihsZXQgZj0wO2Y8emEubGVuZ3RoO2YrKyljPXphW2ZdLE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkLGMpJiYoYVtjXT1kW2NdKTt9fWZ1bmN0aW9uIENhKGEpe0NhW1wiIFwiXShhKTtyZXR1cm4gYX1DYVtcIiBcIl09YWE7ZnVuY3Rpb24gRmEoYSl7dmFyIGI9R2E7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLDkpP2JbOV06Yls5XT1hKDkpfXZhciBIYT13KHgsXCJPcGVyYVwiKSx5PXcoeCxcIlRyaWRlbnRcIil8fHcoeCxcIk1TSUVcIiksSWE9dyh4LFwiRWRnZVwiKSxKYT1JYXx8eSxLYT13KHgsXCJHZWNrb1wiKSYmISh3KHgudG9Mb3dlckNhc2UoKSxcIndlYmtpdFwiKSYmIXcoeCxcIkVkZ2VcIikpJiYhKHcoeCxcIlRyaWRlbnRcIil8fHcoeCxcIk1TSUVcIikpJiYhdyh4LFwiRWRnZVwiKSxMYT13KHgudG9Mb3dlckNhc2UoKSxcIndlYmtpdFwiKSYmIXcoeCxcIkVkZ2VcIik7ZnVuY3Rpb24gTWEoKXt2YXIgYT1sLmRvY3VtZW50O3JldHVybiBhP2EuZG9jdW1lbnRNb2RlOnZvaWQgMH12YXIgTmE7XG5hOnt2YXIgT2E9XCJcIixQYT1mdW5jdGlvbigpe3ZhciBhPXg7aWYoS2EpcmV0dXJuIC9ydjooW15cXCk7XSspKFxcKXw7KS8uZXhlYyhhKTtpZihJYSlyZXR1cm4gL0VkZ2VcXC8oW1xcZFxcLl0rKS8uZXhlYyhhKTtpZih5KXJldHVybiAvXFxiKD86TVNJRXxydilbOiBdKFteXFwpO10rKShcXCl8OykvLmV4ZWMoYSk7aWYoTGEpcmV0dXJuIC9XZWJLaXRcXC8oXFxTKykvLmV4ZWMoYSk7aWYoSGEpcmV0dXJuIC8oPzpWZXJzaW9uKVsgXFwvXT8oXFxTKykvLmV4ZWMoYSl9KCk7UGEmJihPYT1QYT9QYVsxXTpcIlwiKTtpZih5KXt2YXIgUWE9TWEoKTtpZihudWxsIT1RYSYmUWE+cGFyc2VGbG9hdChPYSkpe05hPVN0cmluZyhRYSk7YnJlYWsgYX19TmE9T2E7fXZhciBHYT17fTtcbmZ1bmN0aW9uIFJhKCl7cmV0dXJuIEZhKGZ1bmN0aW9uKCl7bGV0IGE9MDtjb25zdCBiPXRhKFN0cmluZyhOYSkpLnNwbGl0KFwiLlwiKSxjPXRhKFwiOVwiKS5zcGxpdChcIi5cIiksZD1NYXRoLm1heChiLmxlbmd0aCxjLmxlbmd0aCk7Zm9yKGxldCBoPTA7MD09YSYmaDxkO2grKyl7dmFyIGU9YltoXXx8XCJcIixmPWNbaF18fFwiXCI7ZG97ZT0vKFxcZCopKFxcRCopKC4qKS8uZXhlYyhlKXx8W1wiXCIsXCJcIixcIlwiLFwiXCJdO2Y9LyhcXGQqKShcXEQqKSguKikvLmV4ZWMoZil8fFtcIlwiLFwiXCIsXCJcIixcIlwiXTtpZigwPT1lWzBdLmxlbmd0aCYmMD09ZlswXS5sZW5ndGgpYnJlYWs7YT11YSgwPT1lWzFdLmxlbmd0aD8wOnBhcnNlSW50KGVbMV0sMTApLDA9PWZbMV0ubGVuZ3RoPzA6cGFyc2VJbnQoZlsxXSwxMCkpfHx1YSgwPT1lWzJdLmxlbmd0aCwwPT1mWzJdLmxlbmd0aCl8fHVhKGVbMl0sZlsyXSk7ZT1lWzNdO2Y9ZlszXTt9d2hpbGUoMD09YSl9cmV0dXJuIDA8PWF9KX12YXIgU2E7XG5pZihsLmRvY3VtZW50JiZ5KXt2YXIgVGE9TWEoKTtTYT1UYT9UYTpwYXJzZUludChOYSwxMCl8fHZvaWQgMDt9ZWxzZSBTYT12b2lkIDA7dmFyIFVhPVNhO3ZhciBWYT1mdW5jdGlvbigpe2lmKCFsLmFkZEV2ZW50TGlzdGVuZXJ8fCFPYmplY3QuZGVmaW5lUHJvcGVydHkpcmV0dXJuICExO3ZhciBhPSExLGI9T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LFwicGFzc2l2ZVwiLHtnZXQ6ZnVuY3Rpb24oKXthPSEwO319KTt0cnl7bC5hZGRFdmVudExpc3RlbmVyKFwidGVzdFwiLGFhLGIpLGwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRlc3RcIixhYSxiKTt9Y2F0Y2goYyl7fXJldHVybiBhfSgpO2Z1bmN0aW9uIHooYSxiKXt0aGlzLnR5cGU9YTt0aGlzLmc9dGhpcy50YXJnZXQ9Yjt0aGlzLmRlZmF1bHRQcmV2ZW50ZWQ9ITE7fXoucHJvdG90eXBlLmg9ZnVuY3Rpb24oKXt0aGlzLmRlZmF1bHRQcmV2ZW50ZWQ9ITA7fTtmdW5jdGlvbiBBKGEsYil7ei5jYWxsKHRoaXMsYT9hLnR5cGU6XCJcIik7dGhpcy5yZWxhdGVkVGFyZ2V0PXRoaXMuZz10aGlzLnRhcmdldD1udWxsO3RoaXMuYnV0dG9uPXRoaXMuc2NyZWVuWT10aGlzLnNjcmVlblg9dGhpcy5jbGllbnRZPXRoaXMuY2xpZW50WD0wO3RoaXMua2V5PVwiXCI7dGhpcy5tZXRhS2V5PXRoaXMuc2hpZnRLZXk9dGhpcy5hbHRLZXk9dGhpcy5jdHJsS2V5PSExO3RoaXMuc3RhdGU9bnVsbDt0aGlzLnBvaW50ZXJJZD0wO3RoaXMucG9pbnRlclR5cGU9XCJcIjt0aGlzLmk9bnVsbDtpZihhKXt2YXIgYz10aGlzLnR5cGU9YS50eXBlLGQ9YS5jaGFuZ2VkVG91Y2hlcyYmYS5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg/YS5jaGFuZ2VkVG91Y2hlc1swXTpudWxsO3RoaXMudGFyZ2V0PWEudGFyZ2V0fHxhLnNyY0VsZW1lbnQ7dGhpcy5nPWI7aWYoYj1hLnJlbGF0ZWRUYXJnZXQpe2lmKEthKXthOnt0cnl7Q2EoYi5ub2RlTmFtZSk7dmFyIGU9ITA7YnJlYWsgYX1jYXRjaChmKXt9ZT1cbiExO31lfHwoYj1udWxsKTt9fWVsc2UgXCJtb3VzZW92ZXJcIj09Yz9iPWEuZnJvbUVsZW1lbnQ6XCJtb3VzZW91dFwiPT1jJiYoYj1hLnRvRWxlbWVudCk7dGhpcy5yZWxhdGVkVGFyZ2V0PWI7ZD8odGhpcy5jbGllbnRYPXZvaWQgMCE9PWQuY2xpZW50WD9kLmNsaWVudFg6ZC5wYWdlWCx0aGlzLmNsaWVudFk9dm9pZCAwIT09ZC5jbGllbnRZP2QuY2xpZW50WTpkLnBhZ2VZLHRoaXMuc2NyZWVuWD1kLnNjcmVlblh8fDAsdGhpcy5zY3JlZW5ZPWQuc2NyZWVuWXx8MCk6KHRoaXMuY2xpZW50WD12b2lkIDAhPT1hLmNsaWVudFg/YS5jbGllbnRYOmEucGFnZVgsdGhpcy5jbGllbnRZPXZvaWQgMCE9PWEuY2xpZW50WT9hLmNsaWVudFk6YS5wYWdlWSx0aGlzLnNjcmVlblg9YS5zY3JlZW5YfHwwLHRoaXMuc2NyZWVuWT1hLnNjcmVlbll8fDApO3RoaXMuYnV0dG9uPWEuYnV0dG9uO3RoaXMua2V5PWEua2V5fHxcIlwiO3RoaXMuY3RybEtleT1hLmN0cmxLZXk7dGhpcy5hbHRLZXk9YS5hbHRLZXk7dGhpcy5zaGlmdEtleT1cbmEuc2hpZnRLZXk7dGhpcy5tZXRhS2V5PWEubWV0YUtleTt0aGlzLnBvaW50ZXJJZD1hLnBvaW50ZXJJZHx8MDt0aGlzLnBvaW50ZXJUeXBlPVwic3RyaW5nXCI9PT10eXBlb2YgYS5wb2ludGVyVHlwZT9hLnBvaW50ZXJUeXBlOldhW2EucG9pbnRlclR5cGVdfHxcIlwiO3RoaXMuc3RhdGU9YS5zdGF0ZTt0aGlzLmk9YTthLmRlZmF1bHRQcmV2ZW50ZWQmJkEuWi5oLmNhbGwodGhpcyk7fX10KEEseik7dmFyIFdhPXsyOlwidG91Y2hcIiwzOlwicGVuXCIsNDpcIm1vdXNlXCJ9O0EucHJvdG90eXBlLmg9ZnVuY3Rpb24oKXtBLlouaC5jYWxsKHRoaXMpO3ZhciBhPXRoaXMuaTthLnByZXZlbnREZWZhdWx0P2EucHJldmVudERlZmF1bHQoKTphLnJldHVyblZhbHVlPSExO307dmFyIEI9XCJjbG9zdXJlX2xpc3RlbmFibGVfXCIrKDFFNipNYXRoLnJhbmRvbSgpfDApO3ZhciBYYT0wO2Z1bmN0aW9uIFlhKGEsYixjLGQsZSl7dGhpcy5saXN0ZW5lcj1hO3RoaXMucHJveHk9bnVsbDt0aGlzLnNyYz1iO3RoaXMudHlwZT1jO3RoaXMuY2FwdHVyZT0hIWQ7dGhpcy5pYT1lO3RoaXMua2V5PSsrWGE7dGhpcy5jYT10aGlzLmZhPSExO31mdW5jdGlvbiBaYShhKXthLmNhPSEwO2EubGlzdGVuZXI9bnVsbDthLnByb3h5PW51bGw7YS5zcmM9bnVsbDthLmlhPW51bGw7fWZ1bmN0aW9uICRhKGEpe3RoaXMuc3JjPWE7dGhpcy5nPXt9O3RoaXMuaD0wO30kYS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9YS50b1N0cmluZygpO2E9dGhpcy5nW2ZdO2F8fChhPXRoaXMuZ1tmXT1bXSx0aGlzLmgrKyk7dmFyIGg9YWIoYSxiLGQsZSk7LTE8aD8oYj1hW2hdLGN8fChiLmZhPSExKSk6KGI9bmV3IFlhKGIsdGhpcy5zcmMsZiwhIWQsZSksYi5mYT1jLGEucHVzaChiKSk7cmV0dXJuIGJ9O2Z1bmN0aW9uIGJiKGEsYil7dmFyIGM9Yi50eXBlO2lmKGMgaW4gYS5nKXt2YXIgZD1hLmdbY10sZT1tYShkLGIpLGY7KGY9MDw9ZSkmJkFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChkLGUsMSk7ZiYmKFphKGIpLDA9PWEuZ1tjXS5sZW5ndGgmJihkZWxldGUgYS5nW2NdLGEuaC0tKSk7fX1cbmZ1bmN0aW9uIGFiKGEsYixjLGQpe2Zvcih2YXIgZT0wO2U8YS5sZW5ndGg7KytlKXt2YXIgZj1hW2VdO2lmKCFmLmNhJiZmLmxpc3RlbmVyPT1iJiZmLmNhcHR1cmU9PSEhYyYmZi5pYT09ZClyZXR1cm4gZX1yZXR1cm4gLTF9dmFyIGNiPVwiY2xvc3VyZV9sbV9cIisoMUU2Kk1hdGgucmFuZG9tKCl8MCksZGI9e307ZnVuY3Rpb24gZmIoYSxiLGMsZCxlKXtpZihkJiZkLm9uY2UpcmV0dXJuIGdiKGEsYixjLGQsZSk7aWYoQXJyYXkuaXNBcnJheShiKSl7Zm9yKHZhciBmPTA7ZjxiLmxlbmd0aDtmKyspZmIoYSxiW2ZdLGMsZCxlKTtyZXR1cm4gbnVsbH1jPWhiKGMpO3JldHVybiBhJiZhW0JdP2EuTihiLGMscChkKT8hIWQuY2FwdHVyZTohIWQsZSk6aWIoYSxiLGMsITEsZCxlKX1cbmZ1bmN0aW9uIGliKGEsYixjLGQsZSxmKXtpZighYil0aHJvdyBFcnJvcihcIkludmFsaWQgZXZlbnQgdHlwZVwiKTt2YXIgaD1wKGUpPyEhZS5jYXB0dXJlOiEhZSxuPWpiKGEpO258fChhW2NiXT1uPW5ldyAkYShhKSk7Yz1uLmFkZChiLGMsZCxoLGYpO2lmKGMucHJveHkpcmV0dXJuIGM7ZD1rYigpO2MucHJveHk9ZDtkLnNyYz1hO2QubGlzdGVuZXI9YztpZihhLmFkZEV2ZW50TGlzdGVuZXIpVmF8fChlPWgpLHZvaWQgMD09PWUmJihlPSExKSxhLmFkZEV2ZW50TGlzdGVuZXIoYi50b1N0cmluZygpLGQsZSk7ZWxzZSBpZihhLmF0dGFjaEV2ZW50KWEuYXR0YWNoRXZlbnQobGIoYi50b1N0cmluZygpKSxkKTtlbHNlIGlmKGEuYWRkTGlzdGVuZXImJmEucmVtb3ZlTGlzdGVuZXIpYS5hZGRMaXN0ZW5lcihkKTtlbHNlIHRocm93IEVycm9yKFwiYWRkRXZlbnRMaXN0ZW5lciBhbmQgYXR0YWNoRXZlbnQgYXJlIHVuYXZhaWxhYmxlLlwiKTtyZXR1cm4gY31cbmZ1bmN0aW9uIGtiKCl7ZnVuY3Rpb24gYShjKXtyZXR1cm4gYi5jYWxsKGEuc3JjLGEubGlzdGVuZXIsYyl9dmFyIGI9bWI7cmV0dXJuIGF9ZnVuY3Rpb24gZ2IoYSxiLGMsZCxlKXtpZihBcnJheS5pc0FycmF5KGIpKXtmb3IodmFyIGY9MDtmPGIubGVuZ3RoO2YrKylnYihhLGJbZl0sYyxkLGUpO3JldHVybiBudWxsfWM9aGIoYyk7cmV0dXJuIGEmJmFbQl0/YS5PKGIsYyxwKGQpPyEhZC5jYXB0dXJlOiEhZCxlKTppYihhLGIsYywhMCxkLGUpfVxuZnVuY3Rpb24gbmIoYSxiLGMsZCxlKXtpZihBcnJheS5pc0FycmF5KGIpKWZvcih2YXIgZj0wO2Y8Yi5sZW5ndGg7ZisrKW5iKGEsYltmXSxjLGQsZSk7ZWxzZSAoZD1wKGQpPyEhZC5jYXB0dXJlOiEhZCxjPWhiKGMpLGEmJmFbQl0pPyhhPWEuaSxiPVN0cmluZyhiKS50b1N0cmluZygpLGIgaW4gYS5nJiYoZj1hLmdbYl0sYz1hYihmLGMsZCxlKSwtMTxjJiYoWmEoZltjXSksQXJyYXkucHJvdG90eXBlLnNwbGljZS5jYWxsKGYsYywxKSwwPT1mLmxlbmd0aCYmKGRlbGV0ZSBhLmdbYl0sYS5oLS0pKSkpOmEmJihhPWpiKGEpKSYmKGI9YS5nW2IudG9TdHJpbmcoKV0sYT0tMSxiJiYoYT1hYihiLGMsZCxlKSksKGM9LTE8YT9iW2FdOm51bGwpJiZvYihjKSk7fVxuZnVuY3Rpb24gb2IoYSl7aWYoXCJudW1iZXJcIiE9PXR5cGVvZiBhJiZhJiYhYS5jYSl7dmFyIGI9YS5zcmM7aWYoYiYmYltCXSliYihiLmksYSk7ZWxzZSB7dmFyIGM9YS50eXBlLGQ9YS5wcm94eTtiLnJlbW92ZUV2ZW50TGlzdGVuZXI/Yi5yZW1vdmVFdmVudExpc3RlbmVyKGMsZCxhLmNhcHR1cmUpOmIuZGV0YWNoRXZlbnQ/Yi5kZXRhY2hFdmVudChsYihjKSxkKTpiLmFkZExpc3RlbmVyJiZiLnJlbW92ZUxpc3RlbmVyJiZiLnJlbW92ZUxpc3RlbmVyKGQpOyhjPWpiKGIpKT8oYmIoYyxhKSwwPT1jLmgmJihjLnNyYz1udWxsLGJbY2JdPW51bGwpKTpaYShhKTt9fX1mdW5jdGlvbiBsYihhKXtyZXR1cm4gYSBpbiBkYj9kYlthXTpkYlthXT1cIm9uXCIrYX1mdW5jdGlvbiBtYihhLGIpe2lmKGEuY2EpYT0hMDtlbHNlIHtiPW5ldyBBKGIsdGhpcyk7dmFyIGM9YS5saXN0ZW5lcixkPWEuaWF8fGEuc3JjO2EuZmEmJm9iKGEpO2E9Yy5jYWxsKGQsYik7fXJldHVybiBhfVxuZnVuY3Rpb24gamIoYSl7YT1hW2NiXTtyZXR1cm4gYSBpbnN0YW5jZW9mICRhP2E6bnVsbH12YXIgcGI9XCJfX2Nsb3N1cmVfZXZlbnRzX2ZuX1wiKygxRTkqTWF0aC5yYW5kb20oKT4+PjApO2Z1bmN0aW9uIGhiKGEpe2lmKFwiZnVuY3Rpb25cIj09PXR5cGVvZiBhKXJldHVybiBhO2FbcGJdfHwoYVtwYl09ZnVuY3Rpb24oYil7cmV0dXJuIGEuaGFuZGxlRXZlbnQoYil9KTtyZXR1cm4gYVtwYl19ZnVuY3Rpb24gQygpe3YuY2FsbCh0aGlzKTt0aGlzLmk9bmV3ICRhKHRoaXMpO3RoaXMuUD10aGlzO3RoaXMuST1udWxsO310KEMsdik7Qy5wcm90b3R5cGVbQl09ITA7Qy5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihhLGIsYyxkKXtuYih0aGlzLGEsYixjLGQpO307XG5mdW5jdGlvbiBEKGEsYil7dmFyIGMsZD1hLkk7aWYoZClmb3IoYz1bXTtkO2Q9ZC5JKWMucHVzaChkKTthPWEuUDtkPWIudHlwZXx8YjtpZihcInN0cmluZ1wiPT09dHlwZW9mIGIpYj1uZXcgeihiLGEpO2Vsc2UgaWYoYiBpbnN0YW5jZW9mIHopYi50YXJnZXQ9Yi50YXJnZXR8fGE7ZWxzZSB7dmFyIGU9YjtiPW5ldyB6KGQsYSk7QWEoYixlKTt9ZT0hMDtpZihjKWZvcih2YXIgZj1jLmxlbmd0aC0xOzA8PWY7Zi0tKXt2YXIgaD1iLmc9Y1tmXTtlPXFiKGgsZCwhMCxiKSYmZTt9aD1iLmc9YTtlPXFiKGgsZCwhMCxiKSYmZTtlPXFiKGgsZCwhMSxiKSYmZTtpZihjKWZvcihmPTA7ZjxjLmxlbmd0aDtmKyspaD1iLmc9Y1tmXSxlPXFiKGgsZCwhMSxiKSYmZTt9XG5DLnByb3RvdHlwZS5NPWZ1bmN0aW9uKCl7Qy5aLk0uY2FsbCh0aGlzKTtpZih0aGlzLmkpe3ZhciBhPXRoaXMuaSxjO2ZvcihjIGluIGEuZyl7Zm9yKHZhciBkPWEuZ1tjXSxlPTA7ZTxkLmxlbmd0aDtlKyspWmEoZFtlXSk7ZGVsZXRlIGEuZ1tjXTthLmgtLTt9fXRoaXMuST1udWxsO307Qy5wcm90b3R5cGUuTj1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5pLmFkZChTdHJpbmcoYSksYiwhMSxjLGQpfTtDLnByb3RvdHlwZS5PPWZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmkuYWRkKFN0cmluZyhhKSxiLCEwLGMsZCl9O1xuZnVuY3Rpb24gcWIoYSxiLGMsZCl7Yj1hLmkuZ1tTdHJpbmcoYildO2lmKCFiKXJldHVybiAhMDtiPWIuY29uY2F0KCk7Zm9yKHZhciBlPSEwLGY9MDtmPGIubGVuZ3RoOysrZil7dmFyIGg9YltmXTtpZihoJiYhaC5jYSYmaC5jYXB0dXJlPT1jKXt2YXIgbj1oLmxpc3RlbmVyLHU9aC5pYXx8aC5zcmM7aC5mYSYmYmIoYS5pLGgpO2U9ITEhPT1uLmNhbGwodSxkKSYmZTt9fXJldHVybiBlJiYhZC5kZWZhdWx0UHJldmVudGVkfXZhciByYj1sLkpTT04uc3RyaW5naWZ5O2Z1bmN0aW9uIHNiKCl7dmFyIGE9dGI7bGV0IGI9bnVsbDthLmcmJihiPWEuZyxhLmc9YS5nLm5leHQsYS5nfHwoYS5oPW51bGwpLGIubmV4dD1udWxsKTtyZXR1cm4gYn1jbGFzcyB1Yntjb25zdHJ1Y3Rvcigpe3RoaXMuaD10aGlzLmc9bnVsbDt9YWRkKGEsYil7Y29uc3QgYz12Yi5nZXQoKTtjLnNldChhLGIpO3RoaXMuaD90aGlzLmgubmV4dD1jOnRoaXMuZz1jO3RoaXMuaD1jO319dmFyIHZiPW5ldyBjbGFzc3tjb25zdHJ1Y3RvcihhLGIpe3RoaXMuaT1hO3RoaXMuaj1iO3RoaXMuaD0wO3RoaXMuZz1udWxsO31nZXQoKXtsZXQgYTswPHRoaXMuaD8odGhpcy5oLS0sYT10aGlzLmcsdGhpcy5nPWEubmV4dCxhLm5leHQ9bnVsbCk6YT10aGlzLmkoKTtyZXR1cm4gYX19KCgpPT5uZXcgd2IsYT0+YS5yZXNldCgpKTtcbmNsYXNzIHdie2NvbnN0cnVjdG9yKCl7dGhpcy5uZXh0PXRoaXMuZz10aGlzLmg9bnVsbDt9c2V0KGEsYil7dGhpcy5oPWE7dGhpcy5nPWI7dGhpcy5uZXh0PW51bGw7fXJlc2V0KCl7dGhpcy5uZXh0PXRoaXMuZz10aGlzLmg9bnVsbDt9fWZ1bmN0aW9uIHliKGEpe2wuc2V0VGltZW91dCgoKT0+e3Rocm93IGE7fSwwKTt9ZnVuY3Rpb24gemIoYSxiKXtBYnx8QmIoKTtDYnx8KEFiKCksQ2I9ITApO3RiLmFkZChhLGIpO312YXIgQWI7ZnVuY3Rpb24gQmIoKXt2YXIgYT1sLlByb21pc2UucmVzb2x2ZSh2b2lkIDApO0FiPWZ1bmN0aW9uKCl7YS50aGVuKERiKTt9O312YXIgQ2I9ITEsdGI9bmV3IHViO2Z1bmN0aW9uIERiKCl7Zm9yKHZhciBhO2E9c2IoKTspe3RyeXthLmguY2FsbChhLmcpO31jYXRjaChjKXt5YihjKTt9dmFyIGI9dmI7Yi5qKGEpOzEwMD5iLmgmJihiLmgrKyxhLm5leHQ9Yi5nLGIuZz1hKTt9Q2I9ITE7fWZ1bmN0aW9uIEViKGEsYil7Qy5jYWxsKHRoaXMpO3RoaXMuaD1hfHwxO3RoaXMuZz1ifHxsO3RoaXMuaj1xKHRoaXMua2IsdGhpcyk7dGhpcy5sPURhdGUubm93KCk7fXQoRWIsQyk7az1FYi5wcm90b3R5cGU7ay5kYT0hMTtrLlM9bnVsbDtrLmtiPWZ1bmN0aW9uKCl7aWYodGhpcy5kYSl7dmFyIGE9RGF0ZS5ub3coKS10aGlzLmw7MDxhJiZhPC44KnRoaXMuaD90aGlzLlM9dGhpcy5nLnNldFRpbWVvdXQodGhpcy5qLHRoaXMuaC1hKToodGhpcy5TJiYodGhpcy5nLmNsZWFyVGltZW91dCh0aGlzLlMpLHRoaXMuUz1udWxsKSxEKHRoaXMsXCJ0aWNrXCIpLHRoaXMuZGEmJihGYih0aGlzKSx0aGlzLnN0YXJ0KCkpKTt9fTtrLnN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5kYT0hMDt0aGlzLlN8fCh0aGlzLlM9dGhpcy5nLnNldFRpbWVvdXQodGhpcy5qLHRoaXMuaCksdGhpcy5sPURhdGUubm93KCkpO307XG5mdW5jdGlvbiBGYihhKXthLmRhPSExO2EuUyYmKGEuZy5jbGVhclRpbWVvdXQoYS5TKSxhLlM9bnVsbCk7fWsuTT1mdW5jdGlvbigpe0ViLlouTS5jYWxsKHRoaXMpO0ZiKHRoaXMpO2RlbGV0ZSB0aGlzLmc7fTtmdW5jdGlvbiBHYihhLGIsYyl7aWYoXCJmdW5jdGlvblwiPT09dHlwZW9mIGEpYyYmKGE9cShhLGMpKTtlbHNlIGlmKGEmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEuaGFuZGxlRXZlbnQpYT1xKGEuaGFuZGxlRXZlbnQsYSk7ZWxzZSB0aHJvdyBFcnJvcihcIkludmFsaWQgbGlzdGVuZXIgYXJndW1lbnRcIik7cmV0dXJuIDIxNDc0ODM2NDc8TnVtYmVyKGIpPy0xOmwuc2V0VGltZW91dChhLGJ8fDApfWZ1bmN0aW9uIEhiKGEpe2EuZz1HYigoKT0+e2EuZz1udWxsO2EuaSYmKGEuaT0hMSxIYihhKSk7fSxhLmopO2NvbnN0IGI9YS5oO2EuaD1udWxsO2EubS5hcHBseShudWxsLGIpO31jbGFzcyBJYiBleHRlbmRzIHZ7Y29uc3RydWN0b3IoYSxiKXtzdXBlcigpO3RoaXMubT1hO3RoaXMuaj1iO3RoaXMuaD1udWxsO3RoaXMuaT0hMTt0aGlzLmc9bnVsbDt9bChhKXt0aGlzLmg9YXJndW1lbnRzO3RoaXMuZz90aGlzLmk9ITA6SGIodGhpcyk7fU0oKXtzdXBlci5NKCk7dGhpcy5nJiYobC5jbGVhclRpbWVvdXQodGhpcy5nKSx0aGlzLmc9bnVsbCx0aGlzLmk9ITEsdGhpcy5oPW51bGwpO319ZnVuY3Rpb24gRShhKXt2LmNhbGwodGhpcyk7dGhpcy5oPWE7dGhpcy5nPXt9O310KEUsdik7dmFyIEpiPVtdO2Z1bmN0aW9uIEtiKGEsYixjLGQpe0FycmF5LmlzQXJyYXkoYyl8fChjJiYoSmJbMF09Yy50b1N0cmluZygpKSxjPUpiKTtmb3IodmFyIGU9MDtlPGMubGVuZ3RoO2UrKyl7dmFyIGY9ZmIoYixjW2VdLGR8fGEuaGFuZGxlRXZlbnQsITEsYS5ofHxhKTtpZighZilicmVhazthLmdbZi5rZXldPWY7fX1mdW5jdGlvbiBMYihhKXt4YShhLmcsZnVuY3Rpb24oYixjKXt0aGlzLmcuaGFzT3duUHJvcGVydHkoYykmJm9iKGIpO30sYSk7YS5nPXt9O31FLnByb3RvdHlwZS5NPWZ1bmN0aW9uKCl7RS5aLk0uY2FsbCh0aGlzKTtMYih0aGlzKTt9O0UucHJvdG90eXBlLmhhbmRsZUV2ZW50PWZ1bmN0aW9uKCl7dGhyb3cgRXJyb3IoXCJFdmVudEhhbmRsZXIuaGFuZGxlRXZlbnQgbm90IGltcGxlbWVudGVkXCIpO307ZnVuY3Rpb24gTWIoKXt0aGlzLmc9ITA7fU1iLnByb3RvdHlwZS5BYT1mdW5jdGlvbigpe3RoaXMuZz0hMTt9O2Z1bmN0aW9uIE5iKGEsYixjLGQsZSxmKXthLmluZm8oZnVuY3Rpb24oKXtpZihhLmcpaWYoZil7dmFyIGg9XCJcIjtmb3IodmFyIG49Zi5zcGxpdChcIiZcIiksdT0wO3U8bi5sZW5ndGg7dSsrKXt2YXIgbT1uW3VdLnNwbGl0KFwiPVwiKTtpZigxPG0ubGVuZ3RoKXt2YXIgcj1tWzBdO209bVsxXTt2YXIgRz1yLnNwbGl0KFwiX1wiKTtoPTI8PUcubGVuZ3RoJiZcInR5cGVcIj09R1sxXT9oKyhyK1wiPVwiK20rXCImXCIpOmgrKHIrXCI9cmVkYWN0ZWQmXCIpO319fWVsc2UgaD1udWxsO2Vsc2UgaD1mO3JldHVybiBcIlhNTEhUVFAgUkVRIChcIitkK1wiKSBbYXR0ZW1wdCBcIitlK1wiXTogXCIrYitcIlxcblwiK2MrXCJcXG5cIitofSk7fVxuZnVuY3Rpb24gT2IoYSxiLGMsZCxlLGYsaCl7YS5pbmZvKGZ1bmN0aW9uKCl7cmV0dXJuIFwiWE1MSFRUUCBSRVNQIChcIitkK1wiKSBbIGF0dGVtcHQgXCIrZStcIl06IFwiK2IrXCJcXG5cIitjK1wiXFxuXCIrZitcIiBcIitofSk7fWZ1bmN0aW9uIEYoYSxiLGMsZCl7YS5pbmZvKGZ1bmN0aW9uKCl7cmV0dXJuIFwiWE1MSFRUUCBURVhUIChcIitiK1wiKTogXCIrUGIoYSxjKSsoZD9cIiBcIitkOlwiXCIpfSk7fWZ1bmN0aW9uIFFiKGEsYil7YS5pbmZvKGZ1bmN0aW9uKCl7cmV0dXJuIFwiVElNRU9VVDogXCIrYn0pO31NYi5wcm90b3R5cGUuaW5mbz1mdW5jdGlvbigpe307XG5mdW5jdGlvbiBQYihhLGIpe2lmKCFhLmcpcmV0dXJuIGI7aWYoIWIpcmV0dXJuIG51bGw7dHJ5e3ZhciBjPUpTT04ucGFyc2UoYik7aWYoYylmb3IoYT0wO2E8Yy5sZW5ndGg7YSsrKWlmKEFycmF5LmlzQXJyYXkoY1thXSkpe3ZhciBkPWNbYV07aWYoISgyPmQubGVuZ3RoKSl7dmFyIGU9ZFsxXTtpZihBcnJheS5pc0FycmF5KGUpJiYhKDE+ZS5sZW5ndGgpKXt2YXIgZj1lWzBdO2lmKFwibm9vcFwiIT1mJiZcInN0b3BcIiE9ZiYmXCJjbG9zZVwiIT1mKWZvcih2YXIgaD0xO2g8ZS5sZW5ndGg7aCsrKWVbaF09XCJcIjt9fX1yZXR1cm4gcmIoYyl9Y2F0Y2gobil7cmV0dXJuIGJ9fXZhciBIPXt9LFJiPW51bGw7ZnVuY3Rpb24gU2IoKXtyZXR1cm4gUmI9UmJ8fG5ldyBDfUguTWE9XCJzZXJ2ZXJyZWFjaGFiaWxpdHlcIjtmdW5jdGlvbiBUYihhKXt6LmNhbGwodGhpcyxILk1hLGEpO310KFRiLHopO2Z1bmN0aW9uIEkoYSl7Y29uc3QgYj1TYigpO0QoYixuZXcgVGIoYixhKSk7fUguU1RBVF9FVkVOVD1cInN0YXRldmVudFwiO2Z1bmN0aW9uIFViKGEsYil7ei5jYWxsKHRoaXMsSC5TVEFUX0VWRU5ULGEpO3RoaXMuc3RhdD1iO310KFViLHopO2Z1bmN0aW9uIEooYSl7Y29uc3QgYj1TYigpO0QoYixuZXcgVWIoYixhKSk7fUguTmE9XCJ0aW1pbmdldmVudFwiO2Z1bmN0aW9uIFZiKGEsYil7ei5jYWxsKHRoaXMsSC5OYSxhKTt0aGlzLnNpemU9Yjt9dChWYix6KTtcbmZ1bmN0aW9uIEsoYSxiKXtpZihcImZ1bmN0aW9uXCIhPT10eXBlb2YgYSl0aHJvdyBFcnJvcihcIkZuIG11c3Qgbm90IGJlIG51bGwgYW5kIG11c3QgYmUgYSBmdW5jdGlvblwiKTtyZXR1cm4gbC5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YSgpO30sYil9dmFyIFdiPXtOT19FUlJPUjowLGxiOjEseWI6Mix4YjozLHNiOjQsd2I6NSx6Yjo2LEphOjcsVElNRU9VVDo4LENiOjl9O3ZhciBYYj17cWI6XCJjb21wbGV0ZVwiLE1iOlwic3VjY2Vzc1wiLEthOlwiZXJyb3JcIixKYTpcImFib3J0XCIsRWI6XCJyZWFkeVwiLEZiOlwicmVhZHlzdGF0ZWNoYW5nZVwiLFRJTUVPVVQ6XCJ0aW1lb3V0XCIsQWI6XCJpbmNyZW1lbnRhbGRhdGFcIixEYjpcInByb2dyZXNzXCIsdGI6XCJkb3dubG9hZHByb2dyZXNzXCIsVWI6XCJ1cGxvYWRwcm9ncmVzc1wifTtmdW5jdGlvbiBZYigpe31ZYi5wcm90b3R5cGUuaD1udWxsO2Z1bmN0aW9uIFpiKGEpe3JldHVybiBhLmh8fChhLmg9YS5pKCkpfWZ1bmN0aW9uICRiKCl7fXZhciBMPXtPUEVOOlwiYVwiLHBiOlwiYlwiLEthOlwiY1wiLEJiOlwiZFwifTtmdW5jdGlvbiBhYygpe3ouY2FsbCh0aGlzLFwiZFwiKTt9dChhYyx6KTtmdW5jdGlvbiBiYygpe3ouY2FsbCh0aGlzLFwiY1wiKTt9dChiYyx6KTt2YXIgY2M7ZnVuY3Rpb24gZGMoKXt9dChkYyxZYik7ZGMucHJvdG90eXBlLmc9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0fTtkYy5wcm90b3R5cGUuaT1mdW5jdGlvbigpe3JldHVybiB7fX07Y2M9bmV3IGRjO2Z1bmN0aW9uIE0oYSxiLGMsZCl7dGhpcy5sPWE7dGhpcy5qPWI7dGhpcy5tPWM7dGhpcy5YPWR8fDE7dGhpcy5WPW5ldyBFKHRoaXMpO3RoaXMuUD1lYzthPUphPzEyNTp2b2lkIDA7dGhpcy5XPW5ldyBFYihhKTt0aGlzLkg9bnVsbDt0aGlzLmk9ITE7dGhpcy5zPXRoaXMuQT10aGlzLnY9dGhpcy5LPXRoaXMuRj10aGlzLlk9dGhpcy5CPW51bGw7dGhpcy5EPVtdO3RoaXMuZz1udWxsO3RoaXMuQz0wO3RoaXMubz10aGlzLnU9bnVsbDt0aGlzLk49LTE7dGhpcy5JPSExO3RoaXMuTz0wO3RoaXMuTD1udWxsO3RoaXMuYWE9dGhpcy5KPXRoaXMuJD10aGlzLlU9ITE7dGhpcy5oPW5ldyBmYzt9ZnVuY3Rpb24gZmMoKXt0aGlzLmk9bnVsbDt0aGlzLmc9XCJcIjt0aGlzLmg9ITE7fXZhciBlYz00NUUzLGdjPXt9LGhjPXt9O2s9TS5wcm90b3R5cGU7ay5zZXRUaW1lb3V0PWZ1bmN0aW9uKGEpe3RoaXMuUD1hO307XG5mdW5jdGlvbiBpYyhhLGIsYyl7YS5LPTE7YS52PWpjKE4oYikpO2Eucz1jO2EuVT0hMDtrYyhhLG51bGwpO31mdW5jdGlvbiBrYyhhLGIpe2EuRj1EYXRlLm5vdygpO2xjKGEpO2EuQT1OKGEudik7dmFyIGM9YS5BLGQ9YS5YO0FycmF5LmlzQXJyYXkoZCl8fChkPVtTdHJpbmcoZCldKTttYyhjLmgsXCJ0XCIsZCk7YS5DPTA7Yz1hLmwuSDthLmg9bmV3IGZjO2EuZz1uYyhhLmwsYz9iOm51bGwsIWEucyk7MDxhLk8mJihhLkw9bmV3IEliKHEoYS5JYSxhLGEuZyksYS5PKSk7S2IoYS5WLGEuZyxcInJlYWR5c3RhdGVjaGFuZ2VcIixhLmdiKTtiPWEuSD95YShhLkgpOnt9O2Eucz8oYS51fHwoYS51PVwiUE9TVFwiKSxiW1wiQ29udGVudC1UeXBlXCJdPVwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIsYS5nLmVhKGEuQSxhLnUsYS5zLGIpKTooYS51PVwiR0VUXCIsYS5nLmVhKGEuQSxhLnUsbnVsbCxiKSk7SSgxKTtOYihhLmosYS51LGEuQSxhLm0sYS5YLGEucyk7fVxuay5nYj1mdW5jdGlvbihhKXthPWEudGFyZ2V0O2NvbnN0IGI9dGhpcy5MO2ImJjM9PU8oYSk/Yi5sKCk6dGhpcy5JYShhKTt9O1xuay5JYT1mdW5jdGlvbihhKXt0cnl7aWYoYT09dGhpcy5nKWE6e2NvbnN0IHI9Tyh0aGlzLmcpO3ZhciBiPXRoaXMuZy5EYSgpO2NvbnN0IEc9dGhpcy5nLmJhKCk7aWYoISgzPnIpJiYoMyE9cnx8SmF8fHRoaXMuZyYmKHRoaXMuaC5ofHx0aGlzLmcuZ2EoKXx8b2ModGhpcy5nKSkpKXt0aGlzLkl8fDQhPXJ8fDc9PWJ8fCg4PT1ifHwwPj1HP0koMyk6SSgyKSk7cGModGhpcyk7dmFyIGM9dGhpcy5nLmJhKCk7dGhpcy5OPWM7YjppZihxYyh0aGlzKSl7dmFyIGQ9b2ModGhpcy5nKTthPVwiXCI7dmFyIGU9ZC5sZW5ndGgsZj00PT1PKHRoaXMuZyk7aWYoIXRoaXMuaC5pKXtpZihcInVuZGVmaW5lZFwiPT09dHlwZW9mIFRleHREZWNvZGVyKXtQKHRoaXMpO3JjKHRoaXMpO3ZhciBoPVwiXCI7YnJlYWsgYn10aGlzLmguaT1uZXcgbC5UZXh0RGVjb2Rlcjt9Zm9yKGI9MDtiPGU7YisrKXRoaXMuaC5oPSEwLGErPXRoaXMuaC5pLmRlY29kZShkW2JdLHtzdHJlYW06ZiYmYj09ZS0xfSk7ZC5zcGxpY2UoMCxcbmUpO3RoaXMuaC5nKz1hO3RoaXMuQz0wO2g9dGhpcy5oLmc7fWVsc2UgaD10aGlzLmcuZ2EoKTt0aGlzLmk9MjAwPT1jO09iKHRoaXMuaix0aGlzLnUsdGhpcy5BLHRoaXMubSx0aGlzLlgscixjKTtpZih0aGlzLmkpe2lmKHRoaXMuJCYmIXRoaXMuSil7Yjp7aWYodGhpcy5nKXt2YXIgbix1PXRoaXMuZztpZigobj11Lmc/dS5nLmdldFJlc3BvbnNlSGVhZGVyKFwiWC1IVFRQLUluaXRpYWwtUmVzcG9uc2VcIik6bnVsbCkmJiFzYShuKSl7dmFyIG09bjticmVhayBifX1tPW51bGw7fWlmKGM9bSlGKHRoaXMuaix0aGlzLm0sYyxcIkluaXRpYWwgaGFuZHNoYWtlIHJlc3BvbnNlIHZpYSBYLUhUVFAtSW5pdGlhbC1SZXNwb25zZVwiKSx0aGlzLko9ITAsc2ModGhpcyxjKTtlbHNlIHt0aGlzLmk9ITE7dGhpcy5vPTM7SigxMik7UCh0aGlzKTtyYyh0aGlzKTticmVhayBhfX10aGlzLlU/KHRjKHRoaXMscixoKSxKYSYmdGhpcy5pJiYzPT1yJiYoS2IodGhpcy5WLHRoaXMuVyxcInRpY2tcIix0aGlzLmZiKSxcbnRoaXMuVy5zdGFydCgpKSk6KEYodGhpcy5qLHRoaXMubSxoLG51bGwpLHNjKHRoaXMsaCkpOzQ9PXImJlAodGhpcyk7dGhpcy5pJiYhdGhpcy5JJiYoND09cj91Yyh0aGlzLmwsdGhpcyk6KHRoaXMuaT0hMSxsYyh0aGlzKSkpO31lbHNlIDQwMD09YyYmMDxoLmluZGV4T2YoXCJVbmtub3duIFNJRFwiKT8odGhpcy5vPTMsSigxMikpOih0aGlzLm89MCxKKDEzKSksUCh0aGlzKSxyYyh0aGlzKTt9fX1jYXRjaChyKXt9ZmluYWxseXt9fTtmdW5jdGlvbiBxYyhhKXtyZXR1cm4gYS5nP1wiR0VUXCI9PWEudSYmMiE9YS5LJiZhLmwuQmE6ITF9XG5mdW5jdGlvbiB0YyhhLGIsYyl7bGV0IGQ9ITAsZTtmb3IoOyFhLkkmJmEuQzxjLmxlbmd0aDspaWYoZT12YyhhLGMpLGU9PWhjKXs0PT1iJiYoYS5vPTQsSigxNCksZD0hMSk7RihhLmosYS5tLG51bGwsXCJbSW5jb21wbGV0ZSBSZXNwb25zZV1cIik7YnJlYWt9ZWxzZSBpZihlPT1nYyl7YS5vPTQ7SigxNSk7RihhLmosYS5tLGMsXCJbSW52YWxpZCBDaHVua11cIik7ZD0hMTticmVha31lbHNlIEYoYS5qLGEubSxlLG51bGwpLHNjKGEsZSk7cWMoYSkmJmUhPWhjJiZlIT1nYyYmKGEuaC5nPVwiXCIsYS5DPTApOzQhPWJ8fDAhPWMubGVuZ3RofHxhLmguaHx8KGEubz0xLEooMTYpLGQ9ITEpO2EuaT1hLmkmJmQ7ZD8wPGMubGVuZ3RoJiYhYS5hYSYmKGEuYWE9ITAsYj1hLmwsYi5nPT1hJiZiLiQmJiFiLkwmJihiLmguaW5mbyhcIkdyZWF0LCBubyBidWZmZXJpbmcgcHJveHkgZGV0ZWN0ZWQuIEJ5dGVzIHJlY2VpdmVkOiBcIitjLmxlbmd0aCksd2MoYiksYi5MPSEwLEooMTEpKSk6KEYoYS5qLGEubSxcbmMsXCJbSW52YWxpZCBDaHVua2VkIFJlc3BvbnNlXVwiKSxQKGEpLHJjKGEpKTt9ay5mYj1mdW5jdGlvbigpe2lmKHRoaXMuZyl7dmFyIGE9Tyh0aGlzLmcpLGI9dGhpcy5nLmdhKCk7dGhpcy5DPGIubGVuZ3RoJiYocGModGhpcyksdGModGhpcyxhLGIpLHRoaXMuaSYmNCE9YSYmbGModGhpcykpO319O2Z1bmN0aW9uIHZjKGEsYil7dmFyIGM9YS5DLGQ9Yi5pbmRleE9mKFwiXFxuXCIsYyk7aWYoLTE9PWQpcmV0dXJuIGhjO2M9TnVtYmVyKGIuc3Vic3RyaW5nKGMsZCkpO2lmKGlzTmFOKGMpKXJldHVybiBnYztkKz0xO2lmKGQrYz5iLmxlbmd0aClyZXR1cm4gaGM7Yj1iLnN1YnN0cihkLGMpO2EuQz1kK2M7cmV0dXJuIGJ9ay5jYW5jZWw9ZnVuY3Rpb24oKXt0aGlzLkk9ITA7UCh0aGlzKTt9O2Z1bmN0aW9uIGxjKGEpe2EuWT1EYXRlLm5vdygpK2EuUDt4YyhhLGEuUCk7fVxuZnVuY3Rpb24geGMoYSxiKXtpZihudWxsIT1hLkIpdGhyb3cgRXJyb3IoXCJXYXRjaERvZyB0aW1lciBub3QgbnVsbFwiKTthLkI9SyhxKGEuZWIsYSksYik7fWZ1bmN0aW9uIHBjKGEpe2EuQiYmKGwuY2xlYXJUaW1lb3V0KGEuQiksYS5CPW51bGwpO31rLmViPWZ1bmN0aW9uKCl7dGhpcy5CPW51bGw7Y29uc3QgYT1EYXRlLm5vdygpOzA8PWEtdGhpcy5ZPyhRYih0aGlzLmosdGhpcy5BKSwyIT10aGlzLksmJihJKDMpLEooMTcpKSxQKHRoaXMpLHRoaXMubz0yLHJjKHRoaXMpKTp4Yyh0aGlzLHRoaXMuWS1hKTt9O2Z1bmN0aW9uIHJjKGEpezA9PWEubC5HfHxhLkl8fHVjKGEubCxhKTt9ZnVuY3Rpb24gUChhKXtwYyhhKTt2YXIgYj1hLkw7YiYmXCJmdW5jdGlvblwiPT10eXBlb2YgYi5uYSYmYi5uYSgpO2EuTD1udWxsO0ZiKGEuVyk7TGIoYS5WKTthLmcmJihiPWEuZyxhLmc9bnVsbCxiLmFib3J0KCksYi5uYSgpKTt9XG5mdW5jdGlvbiBzYyhhLGIpe3RyeXt2YXIgYz1hLmw7aWYoMCE9Yy5HJiYoYy5nPT1hfHx5YyhjLmksYSkpKWlmKGMuST1hLk4sIWEuSiYmeWMoYy5pLGEpJiYzPT1jLkcpe3RyeXt2YXIgZD1jLkNhLmcucGFyc2UoYik7fWNhdGNoKG0pe2Q9bnVsbDt9aWYoQXJyYXkuaXNBcnJheShkKSYmMz09ZC5sZW5ndGgpe3ZhciBlPWQ7aWYoMD09ZVswXSlhOntpZighYy51KXtpZihjLmcpaWYoYy5nLkYrM0UzPGEuRil6YyhjKSxBYyhjKTtlbHNlIGJyZWFrIGE7QmMoYyk7SigxOCk7fX1lbHNlIGMudGE9ZVsxXSwwPGMudGEtYy5VJiYzNzUwMD5lWzJdJiZjLk4mJjA9PWMuQSYmIWMudiYmKGMudj1LKHEoYy5hYixjKSw2RTMpKTtpZigxPj1DYyhjLmkpJiZjLmthKXt0cnl7Yy5rYSgpO31jYXRjaChtKXt9Yy5rYT12b2lkIDA7fX1lbHNlIFEoYywxMSk7fWVsc2UgaWYoKGEuSnx8Yy5nPT1hKSYmemMoYyksIXNhKGIpKWZvcihlPWMuQ2EuZy5wYXJzZShiKSxiPTA7YjxlLmxlbmd0aDtiKyspe2xldCBtPWVbYl07XG5jLlU9bVswXTttPW1bMV07aWYoMj09Yy5HKWlmKFwiY1wiPT1tWzBdKXtjLko9bVsxXTtjLmxhPW1bMl07Y29uc3Qgcj1tWzNdO251bGwhPXImJihjLm1hPXIsYy5oLmluZm8oXCJWRVI9XCIrYy5tYSkpO2NvbnN0IEc9bVs0XTtudWxsIT1HJiYoYy56YT1HLGMuaC5pbmZvKFwiU1ZFUj1cIitjLnphKSk7Y29uc3QgRGE9bVs1XTtudWxsIT1EYSYmXCJudW1iZXJcIj09PXR5cGVvZiBEYSYmMDxEYSYmKGQ9MS41KkRhLGMuSz1kLGMuaC5pbmZvKFwiYmFja0NoYW5uZWxSZXF1ZXN0VGltZW91dE1zXz1cIitkKSk7ZD1jO2NvbnN0IGNhPWEuZztpZihjYSl7Y29uc3QgRWE9Y2EuZz9jYS5nLmdldFJlc3BvbnNlSGVhZGVyKFwiWC1DbGllbnQtV2lyZS1Qcm90b2NvbFwiKTpudWxsO2lmKEVhKXt2YXIgZj1kLmk7IWYuZyYmKHcoRWEsXCJzcGR5XCIpfHx3KEVhLFwicXVpY1wiKXx8dyhFYSxcImgyXCIpKSYmKGYuaj1mLmwsZi5nPW5ldyBTZXQsZi5oJiYoRGMoZixmLmgpLGYuaD1udWxsKSk7fWlmKGQuRCl7Y29uc3QgeGI9XG5jYS5nP2NhLmcuZ2V0UmVzcG9uc2VIZWFkZXIoXCJYLUhUVFAtU2Vzc2lvbi1JZFwiKTpudWxsO3hiJiYoZC5zYT14YixSKGQuRixkLkQseGIpKTt9fWMuRz0zO2MuaiYmYy5qLnhhKCk7Yy4kJiYoYy5PPURhdGUubm93KCktYS5GLGMuaC5pbmZvKFwiSGFuZHNoYWtlIFJUVDogXCIrYy5PK1wibXNcIikpO2Q9Yzt2YXIgaD1hO2Qub2E9RWMoZCxkLkg/ZC5sYTpudWxsLGQuVyk7aWYoaC5KKXtGYyhkLmksaCk7dmFyIG49aCx1PWQuSzt1JiZuLnNldFRpbWVvdXQodSk7bi5CJiYocGMobiksbGMobikpO2QuZz1oO31lbHNlIEdjKGQpOzA8Yy5sLmxlbmd0aCYmSGMoYyk7fWVsc2UgXCJzdG9wXCIhPW1bMF0mJlwiY2xvc2VcIiE9bVswXXx8UShjLDcpO2Vsc2UgMz09Yy5HJiYoXCJzdG9wXCI9PW1bMF18fFwiY2xvc2VcIj09bVswXT9cInN0b3BcIj09bVswXT9RKGMsNyk6SWMoYyk6XCJub29wXCIhPW1bMF0mJmMuaiYmYy5qLndhKG0pLGMuQT0wKTt9SSg0KTt9Y2F0Y2gobSl7fX1mdW5jdGlvbiBKYyhhKXtpZihhLlImJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEuUilyZXR1cm4gYS5SKCk7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhKXJldHVybiBhLnNwbGl0KFwiXCIpO2lmKGJhKGEpKXtmb3IodmFyIGI9W10sYz1hLmxlbmd0aCxkPTA7ZDxjO2QrKyliLnB1c2goYVtkXSk7cmV0dXJuIGJ9Yj1bXTtjPTA7Zm9yKGQgaW4gYSliW2MrK109YVtkXTtyZXR1cm4gYn1cbmZ1bmN0aW9uIEtjKGEsYil7aWYoYS5mb3JFYWNoJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLmZvckVhY2gpYS5mb3JFYWNoKGIsdm9pZCAwKTtlbHNlIGlmKGJhKGEpfHxcInN0cmluZ1wiPT09dHlwZW9mIGEpbmEoYSxiLHZvaWQgMCk7ZWxzZSB7aWYoYS5UJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLlQpdmFyIGM9YS5UKCk7ZWxzZSBpZihhLlImJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEuUiljPXZvaWQgMDtlbHNlIGlmKGJhKGEpfHxcInN0cmluZ1wiPT09dHlwZW9mIGEpe2M9W107Zm9yKHZhciBkPWEubGVuZ3RoLGU9MDtlPGQ7ZSsrKWMucHVzaChlKTt9ZWxzZSBmb3IoZSBpbiBjPVtdLGQ9MCxhKWNbZCsrXT1lO2Q9SmMoYSk7ZT1kLmxlbmd0aDtmb3IodmFyIGY9MDtmPGU7ZisrKWIuY2FsbCh2b2lkIDAsZFtmXSxjJiZjW2ZdLGEpO319ZnVuY3Rpb24gUyhhLGIpe3RoaXMuaD17fTt0aGlzLmc9W107dGhpcy5pPTA7dmFyIGM9YXJndW1lbnRzLmxlbmd0aDtpZigxPGMpe2lmKGMlMil0aHJvdyBFcnJvcihcIlVuZXZlbiBudW1iZXIgb2YgYXJndW1lbnRzXCIpO2Zvcih2YXIgZD0wO2Q8YztkKz0yKXRoaXMuc2V0KGFyZ3VtZW50c1tkXSxhcmd1bWVudHNbZCsxXSk7fWVsc2UgaWYoYSlpZihhIGluc3RhbmNlb2YgUylmb3IoYz1hLlQoKSxkPTA7ZDxjLmxlbmd0aDtkKyspdGhpcy5zZXQoY1tkXSxhLmdldChjW2RdKSk7ZWxzZSBmb3IoZCBpbiBhKXRoaXMuc2V0KGQsYVtkXSk7fWs9Uy5wcm90b3R5cGU7ay5SPWZ1bmN0aW9uKCl7TGModGhpcyk7Zm9yKHZhciBhPVtdLGI9MDtiPHRoaXMuZy5sZW5ndGg7YisrKWEucHVzaCh0aGlzLmhbdGhpcy5nW2JdXSk7cmV0dXJuIGF9O2suVD1mdW5jdGlvbigpe0xjKHRoaXMpO3JldHVybiB0aGlzLmcuY29uY2F0KCl9O1xuZnVuY3Rpb24gTGMoYSl7aWYoYS5pIT1hLmcubGVuZ3RoKXtmb3IodmFyIGI9MCxjPTA7YjxhLmcubGVuZ3RoOyl7dmFyIGQ9YS5nW2JdO1QoYS5oLGQpJiYoYS5nW2MrK109ZCk7YisrO31hLmcubGVuZ3RoPWM7fWlmKGEuaSE9YS5nLmxlbmd0aCl7dmFyIGU9e307Zm9yKGM9Yj0wO2I8YS5nLmxlbmd0aDspZD1hLmdbYl0sVChlLGQpfHwoYS5nW2MrK109ZCxlW2RdPTEpLGIrKzthLmcubGVuZ3RoPWM7fX1rLmdldD1mdW5jdGlvbihhLGIpe3JldHVybiBUKHRoaXMuaCxhKT90aGlzLmhbYV06Yn07ay5zZXQ9ZnVuY3Rpb24oYSxiKXtUKHRoaXMuaCxhKXx8KHRoaXMuaSsrLHRoaXMuZy5wdXNoKGEpKTt0aGlzLmhbYV09Yjt9O2suZm9yRWFjaD1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz10aGlzLlQoKSxkPTA7ZDxjLmxlbmd0aDtkKyspe3ZhciBlPWNbZF0sZj10aGlzLmdldChlKTthLmNhbGwoYixmLGUsdGhpcyk7fX07XG5mdW5jdGlvbiBUKGEsYil7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGIpfXZhciBNYz0vXig/OihbXjovPyMuXSspOik/KD86XFwvXFwvKD86KFteXFxcXC8/I10qKUApPyhbXlxcXFwvPyNdKj8pKD86OihbMC05XSspKT8oPz1bXFxcXC8/I118JCkpPyhbXj8jXSspPyg/OlxcPyhbXiNdKikpPyg/OiMoW1xcc1xcU10qKSk/JC87ZnVuY3Rpb24gTmMoYSxiKXtpZihhKXthPWEuc3BsaXQoXCImXCIpO2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKXt2YXIgZD1hW2NdLmluZGV4T2YoXCI9XCIpLGU9bnVsbDtpZigwPD1kKXt2YXIgZj1hW2NdLnN1YnN0cmluZygwLGQpO2U9YVtjXS5zdWJzdHJpbmcoZCsxKTt9ZWxzZSBmPWFbY107YihmLGU/ZGVjb2RlVVJJQ29tcG9uZW50KGUucmVwbGFjZSgvXFwrL2csXCIgXCIpKTpcIlwiKTt9fX1mdW5jdGlvbiBVKGEsYil7dGhpcy5pPXRoaXMucz10aGlzLmo9XCJcIjt0aGlzLm09bnVsbDt0aGlzLm89dGhpcy5sPVwiXCI7dGhpcy5nPSExO2lmKGEgaW5zdGFuY2VvZiBVKXt0aGlzLmc9dm9pZCAwIT09Yj9iOmEuZztPYyh0aGlzLGEuaik7dGhpcy5zPWEucztQYyh0aGlzLGEuaSk7UWModGhpcyxhLm0pO3RoaXMubD1hLmw7Yj1hLmg7dmFyIGM9bmV3IFJjO2MuaT1iLmk7Yi5nJiYoYy5nPW5ldyBTKGIuZyksYy5oPWIuaCk7U2ModGhpcyxjKTt0aGlzLm89YS5vO31lbHNlIGEmJihjPVN0cmluZyhhKS5tYXRjaChNYykpPyh0aGlzLmc9ISFiLE9jKHRoaXMsY1sxXXx8XCJcIiwhMCksdGhpcy5zPVRjKGNbMl18fFwiXCIpLFBjKHRoaXMsY1szXXx8XCJcIiwhMCksUWModGhpcyxjWzRdKSx0aGlzLmw9VGMoY1s1XXx8XCJcIiwhMCksU2ModGhpcyxjWzZdfHxcIlwiLCEwKSx0aGlzLm89VGMoY1s3XXx8XCJcIikpOih0aGlzLmc9ISFiLHRoaXMuaD1uZXcgUmMobnVsbCx0aGlzLmcpKTt9XG5VLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciBhPVtdLGI9dGhpcy5qO2ImJmEucHVzaChVYyhiLFZjLCEwKSxcIjpcIik7dmFyIGM9dGhpcy5pO2lmKGN8fFwiZmlsZVwiPT1iKWEucHVzaChcIi8vXCIpLChiPXRoaXMucykmJmEucHVzaChVYyhiLFZjLCEwKSxcIkBcIiksYS5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoYykpLnJlcGxhY2UoLyUyNShbMC05YS1mQS1GXXsyfSkvZyxcIiUkMVwiKSksYz10aGlzLm0sbnVsbCE9YyYmYS5wdXNoKFwiOlwiLFN0cmluZyhjKSk7aWYoYz10aGlzLmwpdGhpcy5pJiZcIi9cIiE9Yy5jaGFyQXQoMCkmJmEucHVzaChcIi9cIiksYS5wdXNoKFVjKGMsXCIvXCI9PWMuY2hhckF0KDApP1djOlhjLCEwKSk7KGM9dGhpcy5oLnRvU3RyaW5nKCkpJiZhLnB1c2goXCI/XCIsYyk7KGM9dGhpcy5vKSYmYS5wdXNoKFwiI1wiLFVjKGMsWWMpKTtyZXR1cm4gYS5qb2luKFwiXCIpfTtmdW5jdGlvbiBOKGEpe3JldHVybiBuZXcgVShhKX1cbmZ1bmN0aW9uIE9jKGEsYixjKXthLmo9Yz9UYyhiLCEwKTpiO2EuaiYmKGEuaj1hLmoucmVwbGFjZSgvOiQvLFwiXCIpKTt9ZnVuY3Rpb24gUGMoYSxiLGMpe2EuaT1jP1RjKGIsITApOmI7fWZ1bmN0aW9uIFFjKGEsYil7aWYoYil7Yj1OdW1iZXIoYik7aWYoaXNOYU4oYil8fDA+Yil0aHJvdyBFcnJvcihcIkJhZCBwb3J0IG51bWJlciBcIitiKTthLm09Yjt9ZWxzZSBhLm09bnVsbDt9ZnVuY3Rpb24gU2MoYSxiLGMpe2IgaW5zdGFuY2VvZiBSYz8oYS5oPWIsWmMoYS5oLGEuZykpOihjfHwoYj1VYyhiLCRjKSksYS5oPW5ldyBSYyhiLGEuZykpO31mdW5jdGlvbiBSKGEsYixjKXthLmguc2V0KGIsYyk7fWZ1bmN0aW9uIGpjKGEpe1IoYSxcInp4XCIsTWF0aC5mbG9vcigyMTQ3NDgzNjQ4Kk1hdGgucmFuZG9tKCkpLnRvU3RyaW5nKDM2KStNYXRoLmFicyhNYXRoLmZsb29yKDIxNDc0ODM2NDgqTWF0aC5yYW5kb20oKSleRGF0ZS5ub3coKSkudG9TdHJpbmcoMzYpKTtyZXR1cm4gYX1cbmZ1bmN0aW9uIGFkKGEpe3JldHVybiBhIGluc3RhbmNlb2YgVT9OKGEpOm5ldyBVKGEsdm9pZCAwKX1mdW5jdGlvbiBiZChhLGIsYyxkKXt2YXIgZT1uZXcgVShudWxsLHZvaWQgMCk7YSYmT2MoZSxhKTtiJiZQYyhlLGIpO2MmJlFjKGUsYyk7ZCYmKGUubD1kKTtyZXR1cm4gZX1mdW5jdGlvbiBUYyhhLGIpe3JldHVybiBhP2I/ZGVjb2RlVVJJKGEucmVwbGFjZSgvJTI1L2csXCIlMjUyNVwiKSk6ZGVjb2RlVVJJQ29tcG9uZW50KGEpOlwiXCJ9ZnVuY3Rpb24gVWMoYSxiLGMpe3JldHVybiBcInN0cmluZ1wiPT09dHlwZW9mIGE/KGE9ZW5jb2RlVVJJKGEpLnJlcGxhY2UoYixjZCksYyYmKGE9YS5yZXBsYWNlKC8lMjUoWzAtOWEtZkEtRl17Mn0pL2csXCIlJDFcIikpLGEpOm51bGx9ZnVuY3Rpb24gY2QoYSl7YT1hLmNoYXJDb2RlQXQoMCk7cmV0dXJuIFwiJVwiKyhhPj40JjE1KS50b1N0cmluZygxNikrKGEmMTUpLnRvU3RyaW5nKDE2KX1cbnZhciBWYz0vWyNcXC9cXD9AXS9nLFhjPS9bI1xcPzpdL2csV2M9L1sjXFw/XS9nLCRjPS9bI1xcP0BdL2csWWM9LyMvZztmdW5jdGlvbiBSYyhhLGIpe3RoaXMuaD10aGlzLmc9bnVsbDt0aGlzLmk9YXx8bnVsbDt0aGlzLmo9ISFiO31mdW5jdGlvbiBWKGEpe2EuZ3x8KGEuZz1uZXcgUyxhLmg9MCxhLmkmJk5jKGEuaSxmdW5jdGlvbihiLGMpe2EuYWRkKGRlY29kZVVSSUNvbXBvbmVudChiLnJlcGxhY2UoL1xcKy9nLFwiIFwiKSksYyk7fSkpO31rPVJjLnByb3RvdHlwZTtrLmFkZD1mdW5jdGlvbihhLGIpe1YodGhpcyk7dGhpcy5pPW51bGw7YT1XKHRoaXMsYSk7dmFyIGM9dGhpcy5nLmdldChhKTtjfHx0aGlzLmcuc2V0KGEsYz1bXSk7Yy5wdXNoKGIpO3RoaXMuaCs9MTtyZXR1cm4gdGhpc307XG5mdW5jdGlvbiBkZChhLGIpe1YoYSk7Yj1XKGEsYik7VChhLmcuaCxiKSYmKGEuaT1udWxsLGEuaC09YS5nLmdldChiKS5sZW5ndGgsYT1hLmcsVChhLmgsYikmJihkZWxldGUgYS5oW2JdLGEuaS0tLGEuZy5sZW5ndGg+MiphLmkmJkxjKGEpKSk7fWZ1bmN0aW9uIGVkKGEsYil7VihhKTtiPVcoYSxiKTtyZXR1cm4gVChhLmcuaCxiKX1rLmZvckVhY2g9ZnVuY3Rpb24oYSxiKXtWKHRoaXMpO3RoaXMuZy5mb3JFYWNoKGZ1bmN0aW9uKGMsZCl7bmEoYyxmdW5jdGlvbihlKXthLmNhbGwoYixlLGQsdGhpcyk7fSx0aGlzKTt9LHRoaXMpO307ay5UPWZ1bmN0aW9uKCl7Vih0aGlzKTtmb3IodmFyIGE9dGhpcy5nLlIoKSxiPXRoaXMuZy5UKCksYz1bXSxkPTA7ZDxiLmxlbmd0aDtkKyspZm9yKHZhciBlPWFbZF0sZj0wO2Y8ZS5sZW5ndGg7ZisrKWMucHVzaChiW2RdKTtyZXR1cm4gY307XG5rLlI9ZnVuY3Rpb24oYSl7Vih0aGlzKTt2YXIgYj1bXTtpZihcInN0cmluZ1wiPT09dHlwZW9mIGEpZWQodGhpcyxhKSYmKGI9cWEoYix0aGlzLmcuZ2V0KFcodGhpcyxhKSkpKTtlbHNlIHthPXRoaXMuZy5SKCk7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspYj1xYShiLGFbY10pO31yZXR1cm4gYn07ay5zZXQ9ZnVuY3Rpb24oYSxiKXtWKHRoaXMpO3RoaXMuaT1udWxsO2E9Vyh0aGlzLGEpO2VkKHRoaXMsYSkmJih0aGlzLmgtPXRoaXMuZy5nZXQoYSkubGVuZ3RoKTt0aGlzLmcuc2V0KGEsW2JdKTt0aGlzLmgrPTE7cmV0dXJuIHRoaXN9O2suZ2V0PWZ1bmN0aW9uKGEsYil7aWYoIWEpcmV0dXJuIGI7YT10aGlzLlIoYSk7cmV0dXJuIDA8YS5sZW5ndGg/U3RyaW5nKGFbMF0pOmJ9O2Z1bmN0aW9uIG1jKGEsYixjKXtkZChhLGIpOzA8Yy5sZW5ndGgmJihhLmk9bnVsbCxhLmcuc2V0KFcoYSxiKSxyYShjKSksYS5oKz1jLmxlbmd0aCk7fVxuay50b1N0cmluZz1mdW5jdGlvbigpe2lmKHRoaXMuaSlyZXR1cm4gdGhpcy5pO2lmKCF0aGlzLmcpcmV0dXJuIFwiXCI7Zm9yKHZhciBhPVtdLGI9dGhpcy5nLlQoKSxjPTA7YzxiLmxlbmd0aDtjKyspe3ZhciBkPWJbY10sZT1lbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGQpKTtkPXRoaXMuUihkKTtmb3IodmFyIGY9MDtmPGQubGVuZ3RoO2YrKyl7dmFyIGg9ZTtcIlwiIT09ZFtmXSYmKGgrPVwiPVwiK2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoZFtmXSkpKTthLnB1c2goaCk7fX1yZXR1cm4gdGhpcy5pPWEuam9pbihcIiZcIil9O2Z1bmN0aW9uIFcoYSxiKXtiPVN0cmluZyhiKTthLmomJihiPWIudG9Mb3dlckNhc2UoKSk7cmV0dXJuIGJ9ZnVuY3Rpb24gWmMoYSxiKXtiJiYhYS5qJiYoVihhKSxhLmk9bnVsbCxhLmcuZm9yRWFjaChmdW5jdGlvbihjLGQpe3ZhciBlPWQudG9Mb3dlckNhc2UoKTtkIT1lJiYoZGQodGhpcyxkKSxtYyh0aGlzLGUsYykpO30sYSkpO2Euaj1iO312YXIgZmQ9Y2xhc3N7Y29uc3RydWN0b3IoYSxiKXt0aGlzLmg9YTt0aGlzLmc9Yjt9fTtmdW5jdGlvbiBnZChhKXt0aGlzLmw9YXx8aGQ7bC5QZXJmb3JtYW5jZU5hdmlnYXRpb25UaW1pbmc/KGE9bC5wZXJmb3JtYW5jZS5nZXRFbnRyaWVzQnlUeXBlKFwibmF2aWdhdGlvblwiKSxhPTA8YS5sZW5ndGgmJihcImhxXCI9PWFbMF0ubmV4dEhvcFByb3RvY29sfHxcImgyXCI9PWFbMF0ubmV4dEhvcFByb3RvY29sKSk6YT0hIShsLmcmJmwuZy5FYSYmbC5nLkVhKCkmJmwuZy5FYSgpLlpiKTt0aGlzLmo9YT90aGlzLmw6MTt0aGlzLmc9bnVsbDsxPHRoaXMuaiYmKHRoaXMuZz1uZXcgU2V0KTt0aGlzLmg9bnVsbDt0aGlzLmk9W107fXZhciBoZD0xMDtmdW5jdGlvbiBpZChhKXtyZXR1cm4gYS5oPyEwOmEuZz9hLmcuc2l6ZT49YS5qOiExfWZ1bmN0aW9uIENjKGEpe3JldHVybiBhLmg/MTphLmc/YS5nLnNpemU6MH1mdW5jdGlvbiB5YyhhLGIpe3JldHVybiBhLmg/YS5oPT1iOmEuZz9hLmcuaGFzKGIpOiExfWZ1bmN0aW9uIERjKGEsYil7YS5nP2EuZy5hZGQoYik6YS5oPWI7fVxuZnVuY3Rpb24gRmMoYSxiKXthLmgmJmEuaD09Yj9hLmg9bnVsbDphLmcmJmEuZy5oYXMoYikmJmEuZy5kZWxldGUoYik7fWdkLnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24oKXt0aGlzLmk9amQodGhpcyk7aWYodGhpcy5oKXRoaXMuaC5jYW5jZWwoKSx0aGlzLmg9bnVsbDtlbHNlIGlmKHRoaXMuZyYmMCE9PXRoaXMuZy5zaXplKXtmb3IoY29uc3QgYSBvZiB0aGlzLmcudmFsdWVzKCkpYS5jYW5jZWwoKTt0aGlzLmcuY2xlYXIoKTt9fTtmdW5jdGlvbiBqZChhKXtpZihudWxsIT1hLmgpcmV0dXJuIGEuaS5jb25jYXQoYS5oLkQpO2lmKG51bGwhPWEuZyYmMCE9PWEuZy5zaXplKXtsZXQgYj1hLmk7Zm9yKGNvbnN0IGMgb2YgYS5nLnZhbHVlcygpKWI9Yi5jb25jYXQoYy5EKTtyZXR1cm4gYn1yZXR1cm4gcmEoYS5pKX1mdW5jdGlvbiBrZCgpe31rZC5wcm90b3R5cGUuc3RyaW5naWZ5PWZ1bmN0aW9uKGEpe3JldHVybiBsLkpTT04uc3RyaW5naWZ5KGEsdm9pZCAwKX07a2QucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKGEpe3JldHVybiBsLkpTT04ucGFyc2UoYSx2b2lkIDApfTtmdW5jdGlvbiBsZCgpe3RoaXMuZz1uZXcga2Q7fWZ1bmN0aW9uIG1kKGEsYixjKXtjb25zdCBkPWN8fFwiXCI7dHJ5e0tjKGEsZnVuY3Rpb24oZSxmKXtsZXQgaD1lO3AoZSkmJihoPXJiKGUpKTtiLnB1c2goZCtmK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudChoKSk7fSk7fWNhdGNoKGUpe3Rocm93IGIucHVzaChkK1widHlwZT1cIitlbmNvZGVVUklDb21wb25lbnQoXCJfYmFkbWFwXCIpKSxlO319ZnVuY3Rpb24gbmQoYSxiKXtjb25zdCBjPW5ldyBNYjtpZihsLkltYWdlKXtjb25zdCBkPW5ldyBJbWFnZTtkLm9ubG9hZD1qYShvZCxjLGQsXCJUZXN0TG9hZEltYWdlOiBsb2FkZWRcIiwhMCxiKTtkLm9uZXJyb3I9amEob2QsYyxkLFwiVGVzdExvYWRJbWFnZTogZXJyb3JcIiwhMSxiKTtkLm9uYWJvcnQ9amEob2QsYyxkLFwiVGVzdExvYWRJbWFnZTogYWJvcnRcIiwhMSxiKTtkLm9udGltZW91dD1qYShvZCxjLGQsXCJUZXN0TG9hZEltYWdlOiB0aW1lb3V0XCIsITEsYik7bC5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYoZC5vbnRpbWVvdXQpZC5vbnRpbWVvdXQoKTt9LDFFNCk7ZC5zcmM9YTt9ZWxzZSBiKCExKTt9ZnVuY3Rpb24gb2QoYSxiLGMsZCxlKXt0cnl7Yi5vbmxvYWQ9bnVsbCxiLm9uZXJyb3I9bnVsbCxiLm9uYWJvcnQ9bnVsbCxiLm9udGltZW91dD1udWxsLGUoZCk7fWNhdGNoKGYpe319ZnVuY3Rpb24gcGQoYSl7dGhpcy5sPWEuJGJ8fG51bGw7dGhpcy5qPWEuaWJ8fCExO310KHBkLFliKTtwZC5wcm90b3R5cGUuZz1mdW5jdGlvbigpe3JldHVybiBuZXcgcWQodGhpcy5sLHRoaXMuail9O3BkLnByb3RvdHlwZS5pPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBhfX0oe30pO2Z1bmN0aW9uIHFkKGEsYil7Qy5jYWxsKHRoaXMpO3RoaXMuRD1hO3RoaXMudT1iO3RoaXMubT12b2lkIDA7dGhpcy5yZWFkeVN0YXRlPXJkO3RoaXMuc3RhdHVzPTA7dGhpcy5yZXNwb25zZVR5cGU9dGhpcy5yZXNwb25zZVRleHQ9dGhpcy5yZXNwb25zZT10aGlzLnN0YXR1c1RleHQ9XCJcIjt0aGlzLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsO3RoaXMudj1uZXcgSGVhZGVyczt0aGlzLmg9bnVsbDt0aGlzLkM9XCJHRVRcIjt0aGlzLkI9XCJcIjt0aGlzLmc9ITE7dGhpcy5BPXRoaXMuaj10aGlzLmw9bnVsbDt9dChxZCxDKTt2YXIgcmQ9MDtrPXFkLnByb3RvdHlwZTtcbmsub3Blbj1mdW5jdGlvbihhLGIpe2lmKHRoaXMucmVhZHlTdGF0ZSE9cmQpdGhyb3cgdGhpcy5hYm9ydCgpLEVycm9yKFwiRXJyb3IgcmVvcGVuaW5nIGEgY29ubmVjdGlvblwiKTt0aGlzLkM9YTt0aGlzLkI9Yjt0aGlzLnJlYWR5U3RhdGU9MTtzZCh0aGlzKTt9O2suc2VuZD1mdW5jdGlvbihhKXtpZigxIT10aGlzLnJlYWR5U3RhdGUpdGhyb3cgdGhpcy5hYm9ydCgpLEVycm9yKFwibmVlZCB0byBjYWxsIG9wZW4oKSBmaXJzdC4gXCIpO3RoaXMuZz0hMDtjb25zdCBiPXtoZWFkZXJzOnRoaXMudixtZXRob2Q6dGhpcy5DLGNyZWRlbnRpYWxzOnRoaXMubSxjYWNoZTp2b2lkIDB9O2EmJihiLmJvZHk9YSk7KHRoaXMuRHx8bCkuZmV0Y2gobmV3IFJlcXVlc3QodGhpcy5CLGIpKS50aGVuKHRoaXMuVmEuYmluZCh0aGlzKSx0aGlzLmhhLmJpbmQodGhpcykpO307XG5rLmFib3J0PWZ1bmN0aW9uKCl7dGhpcy5yZXNwb25zZT10aGlzLnJlc3BvbnNlVGV4dD1cIlwiO3RoaXMudj1uZXcgSGVhZGVyczt0aGlzLnN0YXR1cz0wO3RoaXMuaiYmdGhpcy5qLmNhbmNlbChcIlJlcXVlc3Qgd2FzIGFib3J0ZWQuXCIpOzE8PXRoaXMucmVhZHlTdGF0ZSYmdGhpcy5nJiY0IT10aGlzLnJlYWR5U3RhdGUmJih0aGlzLmc9ITEsdGQodGhpcykpO3RoaXMucmVhZHlTdGF0ZT1yZDt9O1xuay5WYT1mdW5jdGlvbihhKXtpZih0aGlzLmcmJih0aGlzLmw9YSx0aGlzLmh8fCh0aGlzLnN0YXR1cz10aGlzLmwuc3RhdHVzLHRoaXMuc3RhdHVzVGV4dD10aGlzLmwuc3RhdHVzVGV4dCx0aGlzLmg9YS5oZWFkZXJzLHRoaXMucmVhZHlTdGF0ZT0yLHNkKHRoaXMpKSx0aGlzLmcmJih0aGlzLnJlYWR5U3RhdGU9MyxzZCh0aGlzKSx0aGlzLmcpKSlpZihcImFycmF5YnVmZmVyXCI9PT10aGlzLnJlc3BvbnNlVHlwZSlhLmFycmF5QnVmZmVyKCkudGhlbih0aGlzLlRhLmJpbmQodGhpcyksdGhpcy5oYS5iaW5kKHRoaXMpKTtlbHNlIGlmKFwidW5kZWZpbmVkXCIhPT10eXBlb2YgbC5SZWFkYWJsZVN0cmVhbSYmXCJib2R5XCJpbiBhKXt0aGlzLmo9YS5ib2R5LmdldFJlYWRlcigpO2lmKHRoaXMudSl7aWYodGhpcy5yZXNwb25zZVR5cGUpdGhyb3cgRXJyb3IoJ3Jlc3BvbnNlVHlwZSBtdXN0IGJlIGVtcHR5IGZvciBcInN0cmVhbUJpbmFyeUNodW5rc1wiIG1vZGUgcmVzcG9uc2VzLicpO3RoaXMucmVzcG9uc2U9XG5bXTt9ZWxzZSB0aGlzLnJlc3BvbnNlPXRoaXMucmVzcG9uc2VUZXh0PVwiXCIsdGhpcy5BPW5ldyBUZXh0RGVjb2Rlcjt1ZCh0aGlzKTt9ZWxzZSBhLnRleHQoKS50aGVuKHRoaXMuVWEuYmluZCh0aGlzKSx0aGlzLmhhLmJpbmQodGhpcykpO307ZnVuY3Rpb24gdWQoYSl7YS5qLnJlYWQoKS50aGVuKGEuU2EuYmluZChhKSkuY2F0Y2goYS5oYS5iaW5kKGEpKTt9ay5TYT1mdW5jdGlvbihhKXtpZih0aGlzLmcpe2lmKHRoaXMudSYmYS52YWx1ZSl0aGlzLnJlc3BvbnNlLnB1c2goYS52YWx1ZSk7ZWxzZSBpZighdGhpcy51KXt2YXIgYj1hLnZhbHVlP2EudmFsdWU6bmV3IFVpbnQ4QXJyYXkoMCk7aWYoYj10aGlzLkEuZGVjb2RlKGIse3N0cmVhbTohYS5kb25lfSkpdGhpcy5yZXNwb25zZT10aGlzLnJlc3BvbnNlVGV4dCs9Yjt9YS5kb25lP3RkKHRoaXMpOnNkKHRoaXMpOzM9PXRoaXMucmVhZHlTdGF0ZSYmdWQodGhpcyk7fX07XG5rLlVhPWZ1bmN0aW9uKGEpe3RoaXMuZyYmKHRoaXMucmVzcG9uc2U9dGhpcy5yZXNwb25zZVRleHQ9YSx0ZCh0aGlzKSk7fTtrLlRhPWZ1bmN0aW9uKGEpe3RoaXMuZyYmKHRoaXMucmVzcG9uc2U9YSx0ZCh0aGlzKSk7fTtrLmhhPWZ1bmN0aW9uKCl7dGhpcy5nJiZ0ZCh0aGlzKTt9O2Z1bmN0aW9uIHRkKGEpe2EucmVhZHlTdGF0ZT00O2EubD1udWxsO2Euaj1udWxsO2EuQT1udWxsO3NkKGEpO31rLnNldFJlcXVlc3RIZWFkZXI9ZnVuY3Rpb24oYSxiKXt0aGlzLnYuYXBwZW5kKGEsYik7fTtrLmdldFJlc3BvbnNlSGVhZGVyPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmg/dGhpcy5oLmdldChhLnRvTG93ZXJDYXNlKCkpfHxcIlwiOlwiXCJ9O1xuay5nZXRBbGxSZXNwb25zZUhlYWRlcnM9ZnVuY3Rpb24oKXtpZighdGhpcy5oKXJldHVybiBcIlwiO2NvbnN0IGE9W10sYj10aGlzLmguZW50cmllcygpO2Zvcih2YXIgYz1iLm5leHQoKTshYy5kb25lOyljPWMudmFsdWUsYS5wdXNoKGNbMF0rXCI6IFwiK2NbMV0pLGM9Yi5uZXh0KCk7cmV0dXJuIGEuam9pbihcIlxcclxcblwiKX07ZnVuY3Rpb24gc2QoYSl7YS5vbnJlYWR5c3RhdGVjaGFuZ2UmJmEub25yZWFkeXN0YXRlY2hhbmdlLmNhbGwoYSk7fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShxZC5wcm90b3R5cGUsXCJ3aXRoQ3JlZGVudGlhbHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFwiaW5jbHVkZVwiPT09dGhpcy5tfSxzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5tPWE/XCJpbmNsdWRlXCI6XCJzYW1lLW9yaWdpblwiO319KTt2YXIgdmQ9bC5KU09OLnBhcnNlO2Z1bmN0aW9uIFgoYSl7Qy5jYWxsKHRoaXMpO3RoaXMuaGVhZGVycz1uZXcgUzt0aGlzLnU9YXx8bnVsbDt0aGlzLmg9ITE7dGhpcy5DPXRoaXMuZz1udWxsO3RoaXMuSD1cIlwiO3RoaXMubT0wO3RoaXMuaj1cIlwiO3RoaXMubD10aGlzLkY9dGhpcy52PXRoaXMuRD0hMTt0aGlzLkI9MDt0aGlzLkE9bnVsbDt0aGlzLko9d2Q7dGhpcy5LPXRoaXMuTD0hMTt9dChYLEMpO3ZhciB3ZD1cIlwiLHhkPS9eaHR0cHM/JC9pLHlkPVtcIlBPU1RcIixcIlBVVFwiXTtrPVgucHJvdG90eXBlO1xuay5lYT1mdW5jdGlvbihhLGIsYyxkKXtpZih0aGlzLmcpdGhyb3cgRXJyb3IoXCJbZ29vZy5uZXQuWGhySW9dIE9iamVjdCBpcyBhY3RpdmUgd2l0aCBhbm90aGVyIHJlcXVlc3Q9XCIrdGhpcy5IK1wiOyBuZXdVcmk9XCIrYSk7Yj1iP2IudG9VcHBlckNhc2UoKTpcIkdFVFwiO3RoaXMuSD1hO3RoaXMuaj1cIlwiO3RoaXMubT0wO3RoaXMuRD0hMTt0aGlzLmg9ITA7dGhpcy5nPXRoaXMudT90aGlzLnUuZygpOmNjLmcoKTt0aGlzLkM9dGhpcy51P1piKHRoaXMudSk6WmIoY2MpO3RoaXMuZy5vbnJlYWR5c3RhdGVjaGFuZ2U9cSh0aGlzLkZhLHRoaXMpO3RyeXt0aGlzLkY9ITAsdGhpcy5nLm9wZW4oYixTdHJpbmcoYSksITApLHRoaXMuRj0hMTt9Y2F0Y2goZil7emQodGhpcyxmKTtyZXR1cm59YT1jfHxcIlwiO2NvbnN0IGU9bmV3IFModGhpcy5oZWFkZXJzKTtkJiZLYyhkLGZ1bmN0aW9uKGYsaCl7ZS5zZXQoaCxmKTt9KTtkPW9hKGUuVCgpKTtjPWwuRm9ybURhdGEmJmEgaW5zdGFuY2VvZiBsLkZvcm1EYXRhO1xuISgwPD1tYSh5ZCxiKSl8fGR8fGN8fGUuc2V0KFwiQ29udGVudC1UeXBlXCIsXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD11dGYtOFwiKTtlLmZvckVhY2goZnVuY3Rpb24oZixoKXt0aGlzLmcuc2V0UmVxdWVzdEhlYWRlcihoLGYpO30sdGhpcyk7dGhpcy5KJiYodGhpcy5nLnJlc3BvbnNlVHlwZT10aGlzLkopO1wid2l0aENyZWRlbnRpYWxzXCJpbiB0aGlzLmcmJnRoaXMuZy53aXRoQ3JlZGVudGlhbHMhPT10aGlzLkwmJih0aGlzLmcud2l0aENyZWRlbnRpYWxzPXRoaXMuTCk7dHJ5e0FkKHRoaXMpLDA8dGhpcy5CJiYoKHRoaXMuSz1CZCh0aGlzLmcpKT8odGhpcy5nLnRpbWVvdXQ9dGhpcy5CLHRoaXMuZy5vbnRpbWVvdXQ9cSh0aGlzLnBhLHRoaXMpKTp0aGlzLkE9R2IodGhpcy5wYSx0aGlzLkIsdGhpcykpLHRoaXMudj0hMCx0aGlzLmcuc2VuZChhKSx0aGlzLnY9ITE7fWNhdGNoKGYpe3pkKHRoaXMsZik7fX07XG5mdW5jdGlvbiBCZChhKXtyZXR1cm4geSYmUmEoKSYmXCJudW1iZXJcIj09PXR5cGVvZiBhLnRpbWVvdXQmJnZvaWQgMCE9PWEub250aW1lb3V0fWZ1bmN0aW9uIHBhKGEpe3JldHVybiBcImNvbnRlbnQtdHlwZVwiPT1hLnRvTG93ZXJDYXNlKCl9ay5wYT1mdW5jdGlvbigpe1widW5kZWZpbmVkXCIhPXR5cGVvZiBnb29nJiZ0aGlzLmcmJih0aGlzLmo9XCJUaW1lZCBvdXQgYWZ0ZXIgXCIrdGhpcy5CK1wibXMsIGFib3J0aW5nXCIsdGhpcy5tPTgsRCh0aGlzLFwidGltZW91dFwiKSx0aGlzLmFib3J0KDgpKTt9O2Z1bmN0aW9uIHpkKGEsYil7YS5oPSExO2EuZyYmKGEubD0hMCxhLmcuYWJvcnQoKSxhLmw9ITEpO2Euaj1iO2EubT01O0NkKGEpO0RkKGEpO31mdW5jdGlvbiBDZChhKXthLkR8fChhLkQ9ITAsRChhLFwiY29tcGxldGVcIiksRChhLFwiZXJyb3JcIikpO31cbmsuYWJvcnQ9ZnVuY3Rpb24oYSl7dGhpcy5nJiZ0aGlzLmgmJih0aGlzLmg9ITEsdGhpcy5sPSEwLHRoaXMuZy5hYm9ydCgpLHRoaXMubD0hMSx0aGlzLm09YXx8NyxEKHRoaXMsXCJjb21wbGV0ZVwiKSxEKHRoaXMsXCJhYm9ydFwiKSxEZCh0aGlzKSk7fTtrLk09ZnVuY3Rpb24oKXt0aGlzLmcmJih0aGlzLmgmJih0aGlzLmg9ITEsdGhpcy5sPSEwLHRoaXMuZy5hYm9ydCgpLHRoaXMubD0hMSksRGQodGhpcywhMCkpO1guWi5NLmNhbGwodGhpcyk7fTtrLkZhPWZ1bmN0aW9uKCl7dGhpcy5zfHwodGhpcy5GfHx0aGlzLnZ8fHRoaXMubD9FZCh0aGlzKTp0aGlzLmNiKCkpO307ay5jYj1mdW5jdGlvbigpe0VkKHRoaXMpO307XG5mdW5jdGlvbiBFZChhKXtpZihhLmgmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBnb29nJiYoIWEuQ1sxXXx8NCE9TyhhKXx8MiE9YS5iYSgpKSlpZihhLnYmJjQ9PU8oYSkpR2IoYS5GYSwwLGEpO2Vsc2UgaWYoRChhLFwicmVhZHlzdGF0ZWNoYW5nZVwiKSw0PT1PKGEpKXthLmg9ITE7dHJ5e2NvbnN0IG49YS5iYSgpO2E6c3dpdGNoKG4pe2Nhc2UgMjAwOmNhc2UgMjAxOmNhc2UgMjAyOmNhc2UgMjA0OmNhc2UgMjA2OmNhc2UgMzA0OmNhc2UgMTIyMzp2YXIgYj0hMDticmVhayBhO2RlZmF1bHQ6Yj0hMTt9dmFyIGM7aWYoIShjPWIpKXt2YXIgZDtpZihkPTA9PT1uKXt2YXIgZT1TdHJpbmcoYS5IKS5tYXRjaChNYylbMV18fG51bGw7aWYoIWUmJmwuc2VsZiYmbC5zZWxmLmxvY2F0aW9uKXt2YXIgZj1sLnNlbGYubG9jYXRpb24ucHJvdG9jb2w7ZT1mLnN1YnN0cigwLGYubGVuZ3RoLTEpO31kPSF4ZC50ZXN0KGU/ZS50b0xvd2VyQ2FzZSgpOlwiXCIpO31jPWQ7fWlmKGMpRChhLFwiY29tcGxldGVcIiksRChhLFxuXCJzdWNjZXNzXCIpO2Vsc2Uge2EubT02O3RyeXt2YXIgaD0yPE8oYSk/YS5nLnN0YXR1c1RleHQ6XCJcIjt9Y2F0Y2godSl7aD1cIlwiO31hLmo9aCtcIiBbXCIrYS5iYSgpK1wiXVwiO0NkKGEpO319ZmluYWxseXtEZChhKTt9fX1mdW5jdGlvbiBEZChhLGIpe2lmKGEuZyl7QWQoYSk7Y29uc3QgYz1hLmcsZD1hLkNbMF0/YWE6bnVsbDthLmc9bnVsbDthLkM9bnVsbDtifHxEKGEsXCJyZWFkeVwiKTt0cnl7Yy5vbnJlYWR5c3RhdGVjaGFuZ2U9ZDt9Y2F0Y2goZSl7fX19ZnVuY3Rpb24gQWQoYSl7YS5nJiZhLksmJihhLmcub250aW1lb3V0PW51bGwpO2EuQSYmKGwuY2xlYXJUaW1lb3V0KGEuQSksYS5BPW51bGwpO31mdW5jdGlvbiBPKGEpe3JldHVybiBhLmc/YS5nLnJlYWR5U3RhdGU6MH1rLmJhPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiAyPE8odGhpcyk/dGhpcy5nLnN0YXR1czotMX1jYXRjaChhKXtyZXR1cm4gLTF9fTtcbmsuZ2E9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIHRoaXMuZz90aGlzLmcucmVzcG9uc2VUZXh0OlwiXCJ9Y2F0Y2goYSl7cmV0dXJuIFwiXCJ9fTtrLlFhPWZ1bmN0aW9uKGEpe2lmKHRoaXMuZyl7dmFyIGI9dGhpcy5nLnJlc3BvbnNlVGV4dDthJiYwPT1iLmluZGV4T2YoYSkmJihiPWIuc3Vic3RyaW5nKGEubGVuZ3RoKSk7cmV0dXJuIHZkKGIpfX07ZnVuY3Rpb24gb2MoYSl7dHJ5e2lmKCFhLmcpcmV0dXJuIG51bGw7aWYoXCJyZXNwb25zZVwiaW4gYS5nKXJldHVybiBhLmcucmVzcG9uc2U7c3dpdGNoKGEuSil7Y2FzZSB3ZDpjYXNlIFwidGV4dFwiOnJldHVybiBhLmcucmVzcG9uc2VUZXh0O2Nhc2UgXCJhcnJheWJ1ZmZlclwiOmlmKFwibW96UmVzcG9uc2VBcnJheUJ1ZmZlclwiaW4gYS5nKXJldHVybiBhLmcubW96UmVzcG9uc2VBcnJheUJ1ZmZlcn1yZXR1cm4gbnVsbH1jYXRjaChiKXtyZXR1cm4gbnVsbH19ay5EYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm19O1xuay5MYT1mdW5jdGlvbigpe3JldHVybiBcInN0cmluZ1wiPT09dHlwZW9mIHRoaXMuaj90aGlzLmo6U3RyaW5nKHRoaXMuail9O2Z1bmN0aW9uIEZkKGEpe2xldCBiPVwiXCI7eGEoYSxmdW5jdGlvbihjLGQpe2IrPWQ7Yis9XCI6XCI7Yis9YztiKz1cIlxcclxcblwiO30pO3JldHVybiBifWZ1bmN0aW9uIEdkKGEsYixjKXthOntmb3IoZCBpbiBjKXt2YXIgZD0hMTticmVhayBhfWQ9ITA7fWR8fChjPUZkKGMpLFwic3RyaW5nXCI9PT10eXBlb2YgYT8obnVsbCE9YyYmZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhjKSkpOlIoYSxiLGMpKTt9ZnVuY3Rpb24gSGQoYSxiLGMpe3JldHVybiBjJiZjLmludGVybmFsQ2hhbm5lbFBhcmFtcz9jLmludGVybmFsQ2hhbm5lbFBhcmFtc1thXXx8YjpifVxuZnVuY3Rpb24gSWQoYSl7dGhpcy56YT0wO3RoaXMubD1bXTt0aGlzLmg9bmV3IE1iO3RoaXMubGE9dGhpcy5vYT10aGlzLkY9dGhpcy5XPXRoaXMuZz10aGlzLnNhPXRoaXMuRD10aGlzLmFhPXRoaXMubz10aGlzLlA9dGhpcy5zPW51bGw7dGhpcy5aYT10aGlzLlY9MDt0aGlzLlhhPUhkKFwiZmFpbEZhc3RcIiwhMSxhKTt0aGlzLk49dGhpcy52PXRoaXMudT10aGlzLm09dGhpcy5qPW51bGw7dGhpcy5YPSEwO3RoaXMuST10aGlzLnRhPXRoaXMuVT0tMTt0aGlzLlk9dGhpcy5BPXRoaXMuQz0wO3RoaXMuUGE9SGQoXCJiYXNlUmV0cnlEZWxheU1zXCIsNUUzLGEpO3RoaXMuJGE9SGQoXCJyZXRyeURlbGF5U2VlZE1zXCIsMUU0LGEpO3RoaXMuWWE9SGQoXCJmb3J3YXJkQ2hhbm5lbE1heFJldHJpZXNcIiwyLGEpO3RoaXMucmE9SGQoXCJmb3J3YXJkQ2hhbm5lbFJlcXVlc3RUaW1lb3V0TXNcIiwyRTQsYSk7dGhpcy5xYT1hJiZhLnhtbEh0dHBGYWN0b3J5fHx2b2lkIDA7dGhpcy5CYT1hJiZhLllifHwhMTtcbnRoaXMuSz12b2lkIDA7dGhpcy5IPWEmJmEuc3VwcG9ydHNDcm9zc0RvbWFpblhocnx8ITE7dGhpcy5KPVwiXCI7dGhpcy5pPW5ldyBnZChhJiZhLmNvbmN1cnJlbnRSZXF1ZXN0TGltaXQpO3RoaXMuQ2E9bmV3IGxkO3RoaXMuamE9YSYmYS5mYXN0SGFuZHNoYWtlfHwhMTt0aGlzLlJhPWEmJmEuV2J8fCExO2EmJmEuQWEmJnRoaXMuaC5BYSgpO2EmJmEuZm9yY2VMb25nUG9sbGluZyYmKHRoaXMuWD0hMSk7dGhpcy4kPSF0aGlzLmphJiZ0aGlzLlgmJmEmJmEuZGV0ZWN0QnVmZmVyaW5nUHJveHl8fCExO3RoaXMua2E9dm9pZCAwO3RoaXMuTz0wO3RoaXMuTD0hMTt0aGlzLkI9bnVsbDt0aGlzLldhPSFhfHwhMSE9PWEuWGI7fWs9SWQucHJvdG90eXBlO2subWE9ODtrLkc9MTtcbmZ1bmN0aW9uIEljKGEpe0pkKGEpO2lmKDM9PWEuRyl7dmFyIGI9YS5WKyssYz1OKGEuRik7UihjLFwiU0lEXCIsYS5KKTtSKGMsXCJSSURcIixiKTtSKGMsXCJUWVBFXCIsXCJ0ZXJtaW5hdGVcIik7S2QoYSxjKTtiPW5ldyBNKGEsYS5oLGIsdm9pZCAwKTtiLks9MjtiLnY9amMoTihjKSk7Yz0hMTtsLm5hdmlnYXRvciYmbC5uYXZpZ2F0b3Iuc2VuZEJlYWNvbiYmKGM9bC5uYXZpZ2F0b3Iuc2VuZEJlYWNvbihiLnYudG9TdHJpbmcoKSxcIlwiKSk7IWMmJmwuSW1hZ2UmJigobmV3IEltYWdlKS5zcmM9Yi52LGM9ITApO2N8fChiLmc9bmMoYi5sLG51bGwpLGIuZy5lYShiLnYpKTtiLkY9RGF0ZS5ub3coKTtsYyhiKTt9TGQoYSk7fWsuaGI9ZnVuY3Rpb24oYSl7dHJ5e3RoaXMuaC5pbmZvKFwiT3JpZ2luIFRyaWFscyBpbnZva2VkOiBcIithKTt9Y2F0Y2goYil7fX07ZnVuY3Rpb24gQWMoYSl7YS5nJiYod2MoYSksYS5nLmNhbmNlbCgpLGEuZz1udWxsKTt9XG5mdW5jdGlvbiBKZChhKXtBYyhhKTthLnUmJihsLmNsZWFyVGltZW91dChhLnUpLGEudT1udWxsKTt6YyhhKTthLmkuY2FuY2VsKCk7YS5tJiYoXCJudW1iZXJcIj09PXR5cGVvZiBhLm0mJmwuY2xlYXJUaW1lb3V0KGEubSksYS5tPW51bGwpO31mdW5jdGlvbiBNZChhLGIpe2EubC5wdXNoKG5ldyBmZChhLlphKyssYikpOzM9PWEuRyYmSGMoYSk7fWZ1bmN0aW9uIEhjKGEpe2lkKGEuaSl8fGEubXx8KGEubT0hMCx6YihhLkhhLGEpLGEuQz0wKTt9ZnVuY3Rpb24gTmQoYSxiKXtpZihDYyhhLmkpPj1hLmkuai0oYS5tPzE6MCkpcmV0dXJuICExO2lmKGEubSlyZXR1cm4gYS5sPWIuRC5jb25jYXQoYS5sKSwhMDtpZigxPT1hLkd8fDI9PWEuR3x8YS5DPj0oYS5YYT8wOmEuWWEpKXJldHVybiAhMTthLm09SyhxKGEuSGEsYSxiKSxPZChhLGEuQykpO2EuQysrO3JldHVybiAhMH1cbmsuSGE9ZnVuY3Rpb24oYSl7aWYodGhpcy5tKWlmKHRoaXMubT1udWxsLDE9PXRoaXMuRyl7aWYoIWEpe3RoaXMuVj1NYXRoLmZsb29yKDFFNSpNYXRoLnJhbmRvbSgpKTthPXRoaXMuVisrO2NvbnN0IGU9bmV3IE0odGhpcyx0aGlzLmgsYSx2b2lkIDApO2xldCBmPXRoaXMuczt0aGlzLlAmJihmPyhmPXlhKGYpLEFhKGYsdGhpcy5QKSk6Zj10aGlzLlApO251bGw9PT10aGlzLm8mJihlLkg9Zik7aWYodGhpcy5qYSlhOnt2YXIgYj0wO2Zvcih2YXIgYz0wO2M8dGhpcy5sLmxlbmd0aDtjKyspe2I6e3ZhciBkPXRoaXMubFtjXTtpZihcIl9fZGF0YV9fXCJpbiBkLmcmJihkPWQuZy5fX2RhdGFfXyxcInN0cmluZ1wiPT09dHlwZW9mIGQpKXtkPWQubGVuZ3RoO2JyZWFrIGJ9ZD12b2lkIDA7fWlmKHZvaWQgMD09PWQpYnJlYWs7Yis9ZDtpZig0MDk2PGIpe2I9YzticmVhayBhfWlmKDQwOTY9PT1ifHxjPT09dGhpcy5sLmxlbmd0aC0xKXtiPWMrMTticmVhayBhfX1iPTFFMzt9ZWxzZSBiPTFFMztiPVxuUGQodGhpcyxlLGIpO2M9Tih0aGlzLkYpO1IoYyxcIlJJRFwiLGEpO1IoYyxcIkNWRVJcIiwyMik7dGhpcy5EJiZSKGMsXCJYLUhUVFAtU2Vzc2lvbi1JZFwiLHRoaXMuRCk7S2QodGhpcyxjKTt0aGlzLm8mJmYmJkdkKGMsdGhpcy5vLGYpO0RjKHRoaXMuaSxlKTt0aGlzLlJhJiZSKGMsXCJUWVBFXCIsXCJpbml0XCIpO3RoaXMuamE/KFIoYyxcIiRyZXFcIixiKSxSKGMsXCJTSURcIixcIm51bGxcIiksZS4kPSEwLGljKGUsYyxudWxsKSk6aWMoZSxjLGIpO3RoaXMuRz0yO319ZWxzZSAzPT10aGlzLkcmJihhP1FkKHRoaXMsYSk6MD09dGhpcy5sLmxlbmd0aHx8aWQodGhpcy5pKXx8UWQodGhpcykpO307XG5mdW5jdGlvbiBRZChhLGIpe3ZhciBjO2I/Yz1iLm06Yz1hLlYrKztjb25zdCBkPU4oYS5GKTtSKGQsXCJTSURcIixhLkopO1IoZCxcIlJJRFwiLGMpO1IoZCxcIkFJRFwiLGEuVSk7S2QoYSxkKTthLm8mJmEucyYmR2QoZCxhLm8sYS5zKTtjPW5ldyBNKGEsYS5oLGMsYS5DKzEpO251bGw9PT1hLm8mJihjLkg9YS5zKTtiJiYoYS5sPWIuRC5jb25jYXQoYS5sKSk7Yj1QZChhLGMsMUUzKTtjLnNldFRpbWVvdXQoTWF0aC5yb3VuZCguNSphLnJhKStNYXRoLnJvdW5kKC41KmEucmEqTWF0aC5yYW5kb20oKSkpO0RjKGEuaSxjKTtpYyhjLGQsYik7fWZ1bmN0aW9uIEtkKGEsYil7YS5qJiZLYyh7fSxmdW5jdGlvbihjLGQpe1IoYixkLGMpO30pO31cbmZ1bmN0aW9uIFBkKGEsYixjKXtjPU1hdGgubWluKGEubC5sZW5ndGgsYyk7dmFyIGQ9YS5qP3EoYS5qLk9hLGEuaixhKTpudWxsO2E6e3ZhciBlPWEubDtsZXQgZj0tMTtmb3IoOzspe2NvbnN0IGg9W1wiY291bnQ9XCIrY107LTE9PWY/MDxjPyhmPWVbMF0uaCxoLnB1c2goXCJvZnM9XCIrZikpOmY9MDpoLnB1c2goXCJvZnM9XCIrZik7bGV0IG49ITA7Zm9yKGxldCB1PTA7dTxjO3UrKyl7bGV0IG09ZVt1XS5oO2NvbnN0IHI9ZVt1XS5nO20tPWY7aWYoMD5tKWY9TWF0aC5tYXgoMCxlW3VdLmgtMTAwKSxuPSExO2Vsc2UgdHJ5e21kKHIsaCxcInJlcVwiK20rXCJfXCIpO31jYXRjaChHKXtkJiZkKHIpO319aWYobil7ZD1oLmpvaW4oXCImXCIpO2JyZWFrIGF9fX1hPWEubC5zcGxpY2UoMCxjKTtiLkQ9YTtyZXR1cm4gZH1mdW5jdGlvbiBHYyhhKXthLmd8fGEudXx8KGEuWT0xLHpiKGEuR2EsYSksYS5BPTApO31cbmZ1bmN0aW9uIEJjKGEpe2lmKGEuZ3x8YS51fHwzPD1hLkEpcmV0dXJuICExO2EuWSsrO2EudT1LKHEoYS5HYSxhKSxPZChhLGEuQSkpO2EuQSsrO3JldHVybiAhMH1rLkdhPWZ1bmN0aW9uKCl7dGhpcy51PW51bGw7UmQodGhpcyk7aWYodGhpcy4kJiYhKHRoaXMuTHx8bnVsbD09dGhpcy5nfHwwPj10aGlzLk8pKXt2YXIgYT0yKnRoaXMuTzt0aGlzLmguaW5mbyhcIkJQIGRldGVjdGlvbiB0aW1lciBlbmFibGVkOiBcIithKTt0aGlzLkI9SyhxKHRoaXMuYmIsdGhpcyksYSk7fX07ay5iYj1mdW5jdGlvbigpe3RoaXMuQiYmKHRoaXMuQj1udWxsLHRoaXMuaC5pbmZvKFwiQlAgZGV0ZWN0aW9uIHRpbWVvdXQgcmVhY2hlZC5cIiksdGhpcy5oLmluZm8oXCJCdWZmZXJpbmcgcHJveHkgZGV0ZWN0ZWQgYW5kIHN3aXRjaCB0byBsb25nLXBvbGxpbmchXCIpLHRoaXMuTj0hMSx0aGlzLkw9ITAsSigxMCksQWModGhpcyksUmQodGhpcykpO307XG5mdW5jdGlvbiB3YyhhKXtudWxsIT1hLkImJihsLmNsZWFyVGltZW91dChhLkIpLGEuQj1udWxsKTt9ZnVuY3Rpb24gUmQoYSl7YS5nPW5ldyBNKGEsYS5oLFwicnBjXCIsYS5ZKTtudWxsPT09YS5vJiYoYS5nLkg9YS5zKTthLmcuTz0wO3ZhciBiPU4oYS5vYSk7UihiLFwiUklEXCIsXCJycGNcIik7UihiLFwiU0lEXCIsYS5KKTtSKGIsXCJDSVwiLGEuTj9cIjBcIjpcIjFcIik7UihiLFwiQUlEXCIsYS5VKTtLZChhLGIpO1IoYixcIlRZUEVcIixcInhtbGh0dHBcIik7YS5vJiZhLnMmJkdkKGIsYS5vLGEucyk7YS5LJiZhLmcuc2V0VGltZW91dChhLkspO3ZhciBjPWEuZzthPWEubGE7Yy5LPTE7Yy52PWpjKE4oYikpO2Mucz1udWxsO2MuVT0hMDtrYyhjLGEpO31rLmFiPWZ1bmN0aW9uKCl7bnVsbCE9dGhpcy52JiYodGhpcy52PW51bGwsQWModGhpcyksQmModGhpcyksSigxOSkpO307ZnVuY3Rpb24gemMoYSl7bnVsbCE9YS52JiYobC5jbGVhclRpbWVvdXQoYS52KSxhLnY9bnVsbCk7fVxuZnVuY3Rpb24gdWMoYSxiKXt2YXIgYz1udWxsO2lmKGEuZz09Yil7emMoYSk7d2MoYSk7YS5nPW51bGw7dmFyIGQ9Mjt9ZWxzZSBpZih5YyhhLmksYikpYz1iLkQsRmMoYS5pLGIpLGQ9MTtlbHNlIHJldHVybjthLkk9Yi5OO2lmKDAhPWEuRylpZihiLmkpaWYoMT09ZCl7Yz1iLnM/Yi5zLmxlbmd0aDowO2I9RGF0ZS5ub3coKS1iLkY7dmFyIGU9YS5DO2Q9U2IoKTtEKGQsbmV3IFZiKGQsYyxiLGUpKTtIYyhhKTt9ZWxzZSBHYyhhKTtlbHNlIGlmKGU9Yi5vLDM9PWV8fDA9PWUmJjA8YS5JfHwhKDE9PWQmJk5kKGEsYil8fDI9PWQmJkJjKGEpKSlzd2l0Y2goYyYmMDxjLmxlbmd0aCYmKGI9YS5pLGIuaT1iLmkuY29uY2F0KGMpKSxlKXtjYXNlIDE6UShhLDUpO2JyZWFrO2Nhc2UgNDpRKGEsMTApO2JyZWFrO2Nhc2UgMzpRKGEsNik7YnJlYWs7ZGVmYXVsdDpRKGEsMik7fX1cbmZ1bmN0aW9uIE9kKGEsYil7bGV0IGM9YS5QYStNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqYS4kYSk7YS5qfHwoYyo9Mik7cmV0dXJuIGMqYn1mdW5jdGlvbiBRKGEsYil7YS5oLmluZm8oXCJFcnJvciBjb2RlIFwiK2IpO2lmKDI9PWIpe3ZhciBjPW51bGw7YS5qJiYoYz1udWxsKTt2YXIgZD1xKGEuamIsYSk7Y3x8KGM9bmV3IFUoXCIvL3d3dy5nb29nbGUuY29tL2ltYWdlcy9jbGVhcmRvdC5naWZcIiksbC5sb2NhdGlvbiYmXCJodHRwXCI9PWwubG9jYXRpb24ucHJvdG9jb2x8fE9jKGMsXCJodHRwc1wiKSxqYyhjKSk7bmQoYy50b1N0cmluZygpLGQpO31lbHNlIEooMik7YS5HPTA7YS5qJiZhLmoudmEoYik7TGQoYSk7SmQoYSk7fWsuamI9ZnVuY3Rpb24oYSl7YT8odGhpcy5oLmluZm8oXCJTdWNjZXNzZnVsbHkgcGluZ2VkIGdvb2dsZS5jb21cIiksSigyKSk6KHRoaXMuaC5pbmZvKFwiRmFpbGVkIHRvIHBpbmcgZ29vZ2xlLmNvbVwiKSxKKDEpKTt9O1xuZnVuY3Rpb24gTGQoYSl7YS5HPTA7YS5JPS0xO2lmKGEuail7aWYoMCE9amQoYS5pKS5sZW5ndGh8fDAhPWEubC5sZW5ndGgpYS5pLmkubGVuZ3RoPTAscmEoYS5sKSxhLmwubGVuZ3RoPTA7YS5qLnVhKCk7fX1mdW5jdGlvbiBFYyhhLGIsYyl7bGV0IGQ9YWQoYyk7aWYoXCJcIiE9ZC5pKWImJlBjKGQsYitcIi5cIitkLmkpLFFjKGQsZC5tKTtlbHNlIHtjb25zdCBlPWwubG9jYXRpb247ZD1iZChlLnByb3RvY29sLGI/YitcIi5cIitlLmhvc3RuYW1lOmUuaG9zdG5hbWUsK2UucG9ydCxjKTt9YS5hYSYmeGEoYS5hYSxmdW5jdGlvbihlLGYpe1IoZCxmLGUpO30pO2I9YS5EO2M9YS5zYTtiJiZjJiZSKGQsYixjKTtSKGQsXCJWRVJcIixhLm1hKTtLZChhLGQpO3JldHVybiBkfVxuZnVuY3Rpb24gbmMoYSxiLGMpe2lmKGImJiFhLkgpdGhyb3cgRXJyb3IoXCJDYW4ndCBjcmVhdGUgc2Vjb25kYXJ5IGRvbWFpbiBjYXBhYmxlIFhocklvIG9iamVjdC5cIik7Yj1jJiZhLkJhJiYhYS5xYT9uZXcgWChuZXcgcGQoe2liOiEwfSkpOm5ldyBYKGEucWEpO2IuTD1hLkg7cmV0dXJuIGJ9ZnVuY3Rpb24gU2QoKXt9az1TZC5wcm90b3R5cGU7ay54YT1mdW5jdGlvbigpe307ay53YT1mdW5jdGlvbigpe307ay52YT1mdW5jdGlvbigpe307ay51YT1mdW5jdGlvbigpe307ay5PYT1mdW5jdGlvbigpe307ZnVuY3Rpb24gVGQoKXtpZih5JiYhKDEwPD1OdW1iZXIoVWEpKSl0aHJvdyBFcnJvcihcIkVudmlyb25tZW50YWwgZXJyb3I6IG5vIGF2YWlsYWJsZSB0cmFuc3BvcnQuXCIpO31UZC5wcm90b3R5cGUuZz1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgWShhLGIpfTtcbmZ1bmN0aW9uIFkoYSxiKXtDLmNhbGwodGhpcyk7dGhpcy5nPW5ldyBJZChiKTt0aGlzLmw9YTt0aGlzLmg9YiYmYi5tZXNzYWdlVXJsUGFyYW1zfHxudWxsO2E9YiYmYi5tZXNzYWdlSGVhZGVyc3x8bnVsbDtiJiZiLmNsaWVudFByb3RvY29sSGVhZGVyUmVxdWlyZWQmJihhP2FbXCJYLUNsaWVudC1Qcm90b2NvbFwiXT1cIndlYmNoYW5uZWxcIjphPXtcIlgtQ2xpZW50LVByb3RvY29sXCI6XCJ3ZWJjaGFubmVsXCJ9KTt0aGlzLmcucz1hO2E9YiYmYi5pbml0TWVzc2FnZUhlYWRlcnN8fG51bGw7YiYmYi5tZXNzYWdlQ29udGVudFR5cGUmJihhP2FbXCJYLVdlYkNoYW5uZWwtQ29udGVudC1UeXBlXCJdPWIubWVzc2FnZUNvbnRlbnRUeXBlOmE9e1wiWC1XZWJDaGFubmVsLUNvbnRlbnQtVHlwZVwiOmIubWVzc2FnZUNvbnRlbnRUeXBlfSk7YiYmYi55YSYmKGE/YVtcIlgtV2ViQ2hhbm5lbC1DbGllbnQtUHJvZmlsZVwiXT1iLnlhOmE9e1wiWC1XZWJDaGFubmVsLUNsaWVudC1Qcm9maWxlXCI6Yi55YX0pO3RoaXMuZy5QPVxuYTsoYT1iJiZiLmh0dHBIZWFkZXJzT3ZlcndyaXRlUGFyYW0pJiYhc2EoYSkmJih0aGlzLmcubz1hKTt0aGlzLkE9YiYmYi5zdXBwb3J0c0Nyb3NzRG9tYWluWGhyfHwhMTt0aGlzLnY9YiYmYi5zZW5kUmF3SnNvbnx8ITE7KGI9YiYmYi5odHRwU2Vzc2lvbklkUGFyYW0pJiYhc2EoYikmJih0aGlzLmcuRD1iLGE9dGhpcy5oLG51bGwhPT1hJiZiIGluIGEmJihhPXRoaXMuaCxiIGluIGEmJmRlbGV0ZSBhW2JdKSk7dGhpcy5qPW5ldyBaKHRoaXMpO310KFksQyk7WS5wcm90b3R5cGUubT1mdW5jdGlvbigpe3RoaXMuZy5qPXRoaXMuajt0aGlzLkEmJih0aGlzLmcuSD0hMCk7dmFyIGE9dGhpcy5nLGI9dGhpcy5sLGM9dGhpcy5ofHx2b2lkIDA7YS5XYSYmKGEuaC5pbmZvKFwiT3JpZ2luIFRyaWFscyBlbmFibGVkLlwiKSx6YihxKGEuaGIsYSxiKSkpO0ooMCk7YS5XPWI7YS5hYT1jfHx7fTthLk49YS5YO2EuRj1FYyhhLG51bGwsYS5XKTtIYyhhKTt9O1kucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7SWModGhpcy5nKTt9O1xuWS5wcm90b3R5cGUudT1mdW5jdGlvbihhKXtpZihcInN0cmluZ1wiPT09dHlwZW9mIGEpe3ZhciBiPXt9O2IuX19kYXRhX189YTtNZCh0aGlzLmcsYik7fWVsc2UgdGhpcy52PyhiPXt9LGIuX19kYXRhX189cmIoYSksTWQodGhpcy5nLGIpKTpNZCh0aGlzLmcsYSk7fTtZLnByb3RvdHlwZS5NPWZ1bmN0aW9uKCl7dGhpcy5nLmo9bnVsbDtkZWxldGUgdGhpcy5qO0ljKHRoaXMuZyk7ZGVsZXRlIHRoaXMuZztZLlouTS5jYWxsKHRoaXMpO307ZnVuY3Rpb24gVWQoYSl7YWMuY2FsbCh0aGlzKTt2YXIgYj1hLl9fc21fXztpZihiKXthOntmb3IoY29uc3QgYyBpbiBiKXthPWM7YnJlYWsgYX1hPXZvaWQgMDt9aWYodGhpcy5pPWEpYT10aGlzLmksYj1udWxsIT09YiYmYSBpbiBiP2JbYV06dm9pZCAwO3RoaXMuZGF0YT1iO31lbHNlIHRoaXMuZGF0YT1hO310KFVkLGFjKTtmdW5jdGlvbiBWZCgpe2JjLmNhbGwodGhpcyk7dGhpcy5zdGF0dXM9MTt9dChWZCxiYyk7ZnVuY3Rpb24gWihhKXt0aGlzLmc9YTt9XG50KFosU2QpO1oucHJvdG90eXBlLnhhPWZ1bmN0aW9uKCl7RCh0aGlzLmcsXCJhXCIpO307Wi5wcm90b3R5cGUud2E9ZnVuY3Rpb24oYSl7RCh0aGlzLmcsbmV3IFVkKGEpKTt9O1oucHJvdG90eXBlLnZhPWZ1bmN0aW9uKGEpe0QodGhpcy5nLG5ldyBWZChhKSk7fTtaLnByb3RvdHlwZS51YT1mdW5jdGlvbigpe0QodGhpcy5nLFwiYlwiKTt9Oy8qXG5cbiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG5cbiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cbiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5UZC5wcm90b3R5cGUuY3JlYXRlV2ViQ2hhbm5lbD1UZC5wcm90b3R5cGUuZztZLnByb3RvdHlwZS5zZW5kPVkucHJvdG90eXBlLnU7WS5wcm90b3R5cGUub3Blbj1ZLnByb3RvdHlwZS5tO1kucHJvdG90eXBlLmNsb3NlPVkucHJvdG90eXBlLmNsb3NlO1diLk5PX0VSUk9SPTA7V2IuVElNRU9VVD04O1diLkhUVFBfRVJST1I9NjtYYi5DT01QTEVURT1cImNvbXBsZXRlXCI7JGIuRXZlbnRUeXBlPUw7TC5PUEVOPVwiYVwiO0wuQ0xPU0U9XCJiXCI7TC5FUlJPUj1cImNcIjtMLk1FU1NBR0U9XCJkXCI7Qy5wcm90b3R5cGUubGlzdGVuPUMucHJvdG90eXBlLk47WC5wcm90b3R5cGUubGlzdGVuT25jZT1YLnByb3RvdHlwZS5PO1gucHJvdG90eXBlLmdldExhc3RFcnJvcj1YLnByb3RvdHlwZS5MYTtYLnByb3RvdHlwZS5nZXRMYXN0RXJyb3JDb2RlPVgucHJvdG90eXBlLkRhO1gucHJvdG90eXBlLmdldFN0YXR1cz1YLnByb3RvdHlwZS5iYTtYLnByb3RvdHlwZS5nZXRSZXNwb25zZUpzb249WC5wcm90b3R5cGUuUWE7XG5YLnByb3RvdHlwZS5nZXRSZXNwb25zZVRleHQ9WC5wcm90b3R5cGUuZ2E7WC5wcm90b3R5cGUuc2VuZD1YLnByb3RvdHlwZS5lYTt2YXIgY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCA9IGVzbS5jcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBUZH07dmFyIGdldFN0YXRFdmVudFRhcmdldCA9IGVzbS5nZXRTdGF0RXZlbnRUYXJnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gU2IoKX07dmFyIEVycm9yQ29kZSA9IGVzbS5FcnJvckNvZGU9V2I7dmFyIEV2ZW50VHlwZSA9IGVzbS5FdmVudFR5cGU9WGI7dmFyIEV2ZW50ID0gZXNtLkV2ZW50PUg7dmFyIFN0YXQgPSBlc20uU3RhdD17cmI6MCx1YjoxLHZiOjIsT2I6MyxUYjo0LFFiOjUsUmI6NixQYjo3LE5iOjgsU2I6OSxQUk9YWToxMCxOT1BST1hZOjExLExiOjEyLEhiOjEzLEliOjE0LEdiOjE1LEpiOjE2LEtiOjE3LG5iOjE4LG1iOjE5LG9iOjIwfTt2YXIgRmV0Y2hYbWxIdHRwRmFjdG9yeSA9IGVzbS5GZXRjaFhtbEh0dHBGYWN0b3J5PXBkO3ZhciBXZWJDaGFubmVsID0gZXNtLldlYkNoYW5uZWw9JGI7XG52YXIgWGhySW8gPSBlc20uWGhySW89WDtcblxuZXhwb3J0IHsgRXJyb3JDb2RlLCBFdmVudCwgRXZlbnRUeXBlLCBGZXRjaFhtbEh0dHBGYWN0b3J5LCBTdGF0LCBXZWJDaGFubmVsLCBYaHJJbywgY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCwgZXNtIGFzIGRlZmF1bHQsIGdldFN0YXRFdmVudFRhcmdldCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsImltcG9ydCB7IEVycm9yRmFjdG9yeSwgY29udGFpbnMsIGRlZXBFeHRlbmQsIGNyZWF0ZVN1YnNjcmliZSwgaXNCcm93c2VyIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5pbXBvcnQgKiBhcyBtb2R1bGFyQVBJcyBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7IF9hZGRDb21wb25lbnQsIGRlbGV0ZUFwcCwgX0RFRkFVTFRfRU5UUllfTkFNRSwgX2FkZE9yT3ZlcndyaXRlQ29tcG9uZW50LCByZWdpc3RlclZlcnNpb24gfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gJ0BmaXJlYmFzZS9sb2dnZXInO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogR2xvYmFsIGNvbnRleHQgb2JqZWN0IGZvciBhIGNvbGxlY3Rpb24gb2Ygc2VydmljZXMgdXNpbmdcclxuICogYSBzaGFyZWQgYXV0aGVudGljYXRpb24gc3RhdGUuXHJcbiAqXHJcbiAqIG1hcmtlZCBhcyBpbnRlcm5hbCBiZWNhdXNlIGl0IHJlZmVyZW5jZXMgaW50ZXJuYWwgdHlwZXMgZXhwb3J0ZWQgZnJvbSBAZmlyZWJhc2UvYXBwXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY2xhc3MgRmlyZWJhc2VBcHBJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKF9kZWxlZ2F0ZSwgZmlyZWJhc2UpIHtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IF9kZWxlZ2F0ZTtcclxuICAgICAgICB0aGlzLmZpcmViYXNlID0gZmlyZWJhc2U7XHJcbiAgICAgICAgLy8gYWRkIGl0c2VsZiB0byBjb250YWluZXJcclxuICAgICAgICBfYWRkQ29tcG9uZW50KF9kZWxlZ2F0ZSwgbmV3IENvbXBvbmVudCgnYXBwLWNvbXBhdCcsICgpID0+IHRoaXMsIFwiUFVCTElDXCIgLyogUFVCTElDICovKSk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBfZGVsZWdhdGUuY29udGFpbmVyO1xyXG4gICAgfVxyXG4gICAgZ2V0IGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkO1xyXG4gICAgfVxyXG4gICAgc2V0IGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCh2YWwpIHtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZS5hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQgPSB2YWw7XHJcbiAgICB9XHJcbiAgICBnZXQgbmFtZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUubmFtZTtcclxuICAgIH1cclxuICAgIGdldCBvcHRpb25zKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5vcHRpb25zO1xyXG4gICAgfVxyXG4gICAgZGVsZXRlKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fZGVsZWdhdGUuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgIH0pLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmZpcmViYXNlLklOVEVSTkFMLnJlbW92ZUFwcCh0aGlzLm5hbWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGVsZXRlQXBwKHRoaXMuX2RlbGVnYXRlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIGEgc2VydmljZSBpbnN0YW5jZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBhcHAgKGNyZWF0aW5nIGl0XHJcbiAgICAgKiBvbiBkZW1hbmQpLCBpZGVudGlmaWVkIGJ5IHRoZSBwYXNzZWQgaW5zdGFuY2VJZGVudGlmaWVyLlxyXG4gICAgICpcclxuICAgICAqIE5PVEU6IEN1cnJlbnRseSBzdG9yYWdlIGFuZCBmdW5jdGlvbnMgYXJlIHRoZSBvbmx5IG9uZXMgdGhhdCBhcmUgbGV2ZXJhZ2luZyB0aGlzXHJcbiAgICAgKiBmdW5jdGlvbmFsaXR5LiBUaGV5IGludm9rZSBpdCBieSBjYWxsaW5nOlxyXG4gICAgICpcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGZpcmViYXNlLmFwcCgpLnN0b3JhZ2UoJ1NUT1JBR0UgQlVDS0VUIElEJylcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIFRoZSBzZXJ2aWNlIG5hbWUgaXMgcGFzc2VkIHRvIHRoaXMgYWxyZWFkeVxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIF9nZXRTZXJ2aWNlKG5hbWUsIGluc3RhbmNlSWRlbnRpZmllciA9IF9ERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICAvLyBJbml0aWFsaXplIGluc3RhbmNlIGlmIEluc3RhdGlhdGlvbk1vZGUgaXMgYEVYUExJQ0lUYC5cclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMuX2RlbGVnYXRlLmNvbnRhaW5lci5nZXRQcm92aWRlcihuYW1lKTtcclxuICAgICAgICBpZiAoIXByb3ZpZGVyLmlzSW5pdGlhbGl6ZWQoKSAmJlxyXG4gICAgICAgICAgICAoKF9hID0gcHJvdmlkZXIuZ2V0Q29tcG9uZW50KCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pbnN0YW50aWF0aW9uTW9kZSkgPT09IFwiRVhQTElDSVRcIiAvKiBFWFBMSUNJVCAqLykge1xyXG4gICAgICAgICAgICBwcm92aWRlci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGdldEltbWVkaWF0ZSB3aWxsIGFsd2F5cyBzdWNjZWVkIGJlY2F1c2UgX2dldFNlcnZpY2UgaXMgb25seSBjYWxsZWQgZm9yIHJlZ2lzdGVyZWQgY29tcG9uZW50cy5cclxuICAgICAgICByZXR1cm4gcHJvdmlkZXIuZ2V0SW1tZWRpYXRlKHtcclxuICAgICAgICAgICAgaWRlbnRpZmllcjogaW5zdGFuY2VJZGVudGlmaWVyXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZSBhIHNlcnZpY2UgaW5zdGFuY2UgZnJvbSB0aGUgY2FjaGUsIHNvIHdlIHdpbGwgY3JlYXRlIGEgbmV3IGluc3RhbmNlIGZvciB0aGlzIHNlcnZpY2VcclxuICAgICAqIHdoZW4gcGVvcGxlIHRyeSB0byBnZXQgaXQgYWdhaW4uXHJcbiAgICAgKlxyXG4gICAgICogTk9URTogY3VycmVudGx5IG9ubHkgZmlyZXN0b3JlIHVzZXMgdGhpcyBmdW5jdGlvbmFsaXR5IHRvIHN1cHBvcnQgZmlyZXN0b3JlIHNodXRkb3duLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBzZXJ2aWNlIG5hbWVcclxuICAgICAqIEBwYXJhbSBpbnN0YW5jZUlkZW50aWZpZXIgaW5zdGFuY2UgaWRlbnRpZmllciBpbiBjYXNlIG11bHRpcGxlIGluc3RhbmNlcyBhcmUgYWxsb3dlZFxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UobmFtZSwgaW5zdGFuY2VJZGVudGlmaWVyID0gX0RFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlLmNvbnRhaW5lclxyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAuZ2V0UHJvdmlkZXIobmFtZSlcclxuICAgICAgICAgICAgLmNsZWFySW5zdGFuY2UoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGNvbXBvbmVudCB0aGUgY29tcG9uZW50IGJlaW5nIGFkZGVkIHRvIHRoaXMgYXBwJ3MgY29udGFpbmVyXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgX2FkZENvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBfYWRkQ29tcG9uZW50KHRoaXMuX2RlbGVnYXRlLCBjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgX2FkZE9yT3ZlcndyaXRlQ29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgICAgIF9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudCh0aGlzLl9kZWxlZ2F0ZSwgY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXHJcbiAgICAgICAgICAgIGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDogdGhpcy5hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQsXHJcbiAgICAgICAgICAgIG9wdGlvbnM6IHRoaXMub3B0aW9uc1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuLy8gVE9ETzogaW52ZXN0aWdhdGUgd2h5IHRoZSBmb2xsb3dpbmcgbmVlZHMgdG8gYmUgY29tbWVudGVkIG91dFxyXG4vLyBQcmV2ZW50IGRlYWQtY29kZSBlbGltaW5hdGlvbiBvZiB0aGVzZSBtZXRob2RzIHcvbyBpbnZhbGlkIHByb3BlcnR5XHJcbi8vIGNvcHlpbmcuXHJcbi8vIChGaXJlYmFzZUFwcEltcGwucHJvdG90eXBlLm5hbWUgJiYgRmlyZWJhc2VBcHBJbXBsLnByb3RvdHlwZS5vcHRpb25zKSB8fFxyXG4vLyAgIEZpcmViYXNlQXBwSW1wbC5wcm90b3R5cGUuZGVsZXRlIHx8XHJcbi8vICAgY29uc29sZS5sb2coJ2RjJyk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IEVSUk9SUyA9IHtcclxuICAgIFtcIm5vLWFwcFwiIC8qIE5PX0FQUCAqL106IFwiTm8gRmlyZWJhc2UgQXBwICd7JGFwcE5hbWV9JyBoYXMgYmVlbiBjcmVhdGVkIC0gXCIgK1xyXG4gICAgICAgICdjYWxsIEZpcmViYXNlIEFwcC5pbml0aWFsaXplQXBwKCknLFxyXG4gICAgW1wiaW52YWxpZC1hcHAtYXJndW1lbnRcIiAvKiBJTlZBTElEX0FQUF9BUkdVTUVOVCAqL106ICdmaXJlYmFzZS57JGFwcE5hbWV9KCkgdGFrZXMgZWl0aGVyIG5vIGFyZ3VtZW50IG9yIGEgJyArXHJcbiAgICAgICAgJ0ZpcmViYXNlIEFwcCBpbnN0YW5jZS4nXHJcbn07XHJcbmNvbnN0IEVSUk9SX0ZBQ1RPUlkgPSBuZXcgRXJyb3JGYWN0b3J5KCdhcHAtY29tcGF0JywgJ0ZpcmViYXNlJywgRVJST1JTKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEJlY2F1c2UgYXV0aCBjYW4ndCBzaGFyZSBjb2RlIHdpdGggb3RoZXIgY29tcG9uZW50cywgd2UgYXR0YWNoIHRoZSB1dGlsaXR5IGZ1bmN0aW9uc1xyXG4gKiBpbiBhbiBpbnRlcm5hbCBuYW1lc3BhY2UgdG8gc2hhcmUgY29kZS5cclxuICogVGhpcyBmdW5jdGlvbiByZXR1cm4gYSBmaXJlYmFzZSBuYW1lc3BhY2Ugb2JqZWN0IHdpdGhvdXRcclxuICogYW55IHV0aWxpdHkgZnVuY3Rpb25zLCBzbyBpdCBjYW4gYmUgc2hhcmVkIGJldHdlZW4gdGhlIHJlZ3VsYXIgZmlyZWJhc2VOYW1lc3BhY2UgYW5kXHJcbiAqIHRoZSBsaXRlIHZlcnNpb24uXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVGaXJlYmFzZU5hbWVzcGFjZUNvcmUoZmlyZWJhc2VBcHBJbXBsKSB7XHJcbiAgICBjb25zdCBhcHBzID0ge307XHJcbiAgICAvLyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgLy8gY29uc3QgY29tcG9uZW50cyA9IG5ldyBNYXA8c3RyaW5nLCBDb21wb25lbnQ8YW55Pj4oKTtcclxuICAgIC8vIEEgbmFtZXNwYWNlIGlzIGEgcGxhaW4gSmF2YVNjcmlwdCBPYmplY3QuXHJcbiAgICBjb25zdCBuYW1lc3BhY2UgPSB7XHJcbiAgICAgICAgLy8gSGFjayB0byBwcmV2ZW50IEJhYmVsIGZyb20gbW9kaWZ5aW5nIHRoZSBvYmplY3QgcmV0dXJuZWRcclxuICAgICAgICAvLyBhcyB0aGUgZmlyZWJhc2UgbmFtZXNwYWNlLlxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBfX2VzTW9kdWxlOiB0cnVlLFxyXG4gICAgICAgIGluaXRpYWxpemVBcHA6IGluaXRpYWxpemVBcHBDb21wYXQsXHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGFwcCxcclxuICAgICAgICByZWdpc3RlclZlcnNpb246IG1vZHVsYXJBUElzLnJlZ2lzdGVyVmVyc2lvbixcclxuICAgICAgICBzZXRMb2dMZXZlbDogbW9kdWxhckFQSXMuc2V0TG9nTGV2ZWwsXHJcbiAgICAgICAgb25Mb2c6IG1vZHVsYXJBUElzLm9uTG9nLFxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBhcHBzOiBudWxsLFxyXG4gICAgICAgIFNES19WRVJTSU9OOiBtb2R1bGFyQVBJcy5TREtfVkVSU0lPTixcclxuICAgICAgICBJTlRFUk5BTDoge1xyXG4gICAgICAgICAgICByZWdpc3RlckNvbXBvbmVudDogcmVnaXN0ZXJDb21wb25lbnRDb21wYXQsXHJcbiAgICAgICAgICAgIHJlbW92ZUFwcCxcclxuICAgICAgICAgICAgdXNlQXNTZXJ2aWNlLFxyXG4gICAgICAgICAgICBtb2R1bGFyQVBJc1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBJbmplY3QgYSBjaXJjdWxhciBkZWZhdWx0IGV4cG9ydCB0byBhbGxvdyBCYWJlbCB1c2VycyB3aG8gd2VyZSBwcmV2aW91c2x5XHJcbiAgICAvLyB1c2luZzpcclxuICAgIC8vXHJcbiAgICAvLyAgIGltcG9ydCBmaXJlYmFzZSBmcm9tICdmaXJlYmFzZSc7XHJcbiAgICAvLyAgIHdoaWNoIGJlY29tZXM6IHZhciBmaXJlYmFzZSA9IHJlcXVpcmUoJ2ZpcmViYXNlJykuZGVmYXVsdDtcclxuICAgIC8vXHJcbiAgICAvLyBpbnN0ZWFkIG9mXHJcbiAgICAvL1xyXG4gICAgLy8gICBpbXBvcnQgKiBhcyBmaXJlYmFzZSBmcm9tICdmaXJlYmFzZSc7XHJcbiAgICAvLyAgIHdoaWNoIGJlY29tZXM6IHZhciBmaXJlYmFzZSA9IHJlcXVpcmUoJ2ZpcmViYXNlJyk7XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgbmFtZXNwYWNlWydkZWZhdWx0J10gPSBuYW1lc3BhY2U7XHJcbiAgICAvLyBmaXJlYmFzZS5hcHBzIGlzIGEgcmVhZC1vbmx5IGdldHRlci5cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuYW1lc3BhY2UsICdhcHBzJywge1xyXG4gICAgICAgIGdldDogZ2V0QXBwc1xyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIENhbGxlZCBieSBBcHAuZGVsZXRlKCkgLSBidXQgYmVmb3JlIGFueSBzZXJ2aWNlcyBhc3NvY2lhdGVkIHdpdGggdGhlIEFwcFxyXG4gICAgICogYXJlIGRlbGV0ZWQuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHJlbW92ZUFwcChuYW1lKSB7XHJcbiAgICAgICAgZGVsZXRlIGFwcHNbbmFtZV07XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgQXBwIG9iamVjdCBmb3IgYSBnaXZlbiBuYW1lIChvciBERUZBVUxUKS5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gYXBwKG5hbWUpIHtcclxuICAgICAgICBuYW1lID0gbmFtZSB8fCBtb2R1bGFyQVBJcy5fREVGQVVMVF9FTlRSWV9OQU1FO1xyXG4gICAgICAgIGlmICghY29udGFpbnMoYXBwcywgbmFtZSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJuby1hcHBcIiAvKiBOT19BUFAgKi8sIHsgYXBwTmFtZTogbmFtZSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFwcHNbbmFtZV07XHJcbiAgICB9XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICBhcHBbJ0FwcCddID0gZmlyZWJhc2VBcHBJbXBsO1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYSBuZXcgQXBwIGluc3RhbmNlIChuYW1lIG11c3QgYmUgdW5pcXVlKS5cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIGlkZW1wb3RlbnQuIEl0IGNhbiBiZSBjYWxsZWQgbW9yZSB0aGFuIG9uY2UgYW5kIHJldHVybiB0aGUgc2FtZSBpbnN0YW5jZSB1c2luZyB0aGUgc2FtZSBvcHRpb25zIGFuZCBjb25maWcuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGluaXRpYWxpemVBcHBDb21wYXQob3B0aW9ucywgcmF3Q29uZmlnID0ge30pIHtcclxuICAgICAgICBjb25zdCBhcHAgPSBtb2R1bGFyQVBJcy5pbml0aWFsaXplQXBwKG9wdGlvbnMsIHJhd0NvbmZpZyk7XHJcbiAgICAgICAgaWYgKGNvbnRhaW5zKGFwcHMsIGFwcC5uYW1lKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXBwc1thcHAubmFtZV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGFwcENvbXBhdCA9IG5ldyBmaXJlYmFzZUFwcEltcGwoYXBwLCBuYW1lc3BhY2UpO1xyXG4gICAgICAgIGFwcHNbYXBwLm5hbWVdID0gYXBwQ29tcGF0O1xyXG4gICAgICAgIHJldHVybiBhcHBDb21wYXQ7XHJcbiAgICB9XHJcbiAgICAvKlxyXG4gICAgICogUmV0dXJuIGFuIGFycmF5IG9mIGFsbCB0aGUgbm9uLWRlbGV0ZWQgRmlyZWJhc2VBcHBzLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBnZXRBcHBzKCkge1xyXG4gICAgICAgIC8vIE1ha2UgYSBjb3B5IHNvIGNhbGxlciBjYW5ub3QgbXV0YXRlIHRoZSBhcHBzIGxpc3QuXHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGFwcHMpLm1hcChuYW1lID0+IGFwcHNbbmFtZV0pO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gcmVnaXN0ZXJDb21wb25lbnRDb21wYXQoY29tcG9uZW50KSB7XHJcbiAgICAgICAgY29uc3QgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudC5uYW1lO1xyXG4gICAgICAgIGNvbnN0IGNvbXBvbmVudE5hbWVXaXRob3V0Q29tcGF0ID0gY29tcG9uZW50TmFtZS5yZXBsYWNlKCctY29tcGF0JywgJycpO1xyXG4gICAgICAgIGlmIChtb2R1bGFyQVBJcy5fcmVnaXN0ZXJDb21wb25lbnQoY29tcG9uZW50KSAmJlxyXG4gICAgICAgICAgICBjb21wb25lbnQudHlwZSA9PT0gXCJQVUJMSUNcIiAvKiBQVUJMSUMgKi8pIHtcclxuICAgICAgICAgICAgLy8gY3JlYXRlIHNlcnZpY2UgbmFtZXNwYWNlIGZvciBwdWJsaWMgY29tcG9uZW50c1xyXG4gICAgICAgICAgICAvLyBUaGUgU2VydmljZSBuYW1lc3BhY2UgaXMgYW4gYWNjZXNzb3IgZnVuY3Rpb24gLi4uXHJcbiAgICAgICAgICAgIGNvbnN0IHNlcnZpY2VOYW1lc3BhY2UgPSAoYXBwQXJnID0gYXBwKCkpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFwcEFyZ1tjb21wb25lbnROYW1lV2l0aG91dENvbXBhdF0gIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJbnZhbGlkIGFyZ3VtZW50LlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaGFwcGVucyBpbiB0aGUgZm9sbG93aW5nIGNhc2U6IGZpcmViYXNlLnN0b3JhZ2UoJ2dzOi8nKVxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW52YWxpZC1hcHAtYXJndW1lbnRcIiAvKiBJTlZBTElEX0FQUF9BUkdVTUVOVCAqLywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBOYW1lOiBjb21wb25lbnROYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBGb3J3YXJkIHNlcnZpY2UgaW5zdGFuY2UgbG9va3VwIHRvIHRoZSBGaXJlYmFzZUFwcC5cclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXBwQXJnW2NvbXBvbmVudE5hbWVXaXRob3V0Q29tcGF0XSgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyAuLi4gYW5kIGEgY29udGFpbmVyIGZvciBzZXJ2aWNlLWxldmVsIHByb3BlcnRpZXMuXHJcbiAgICAgICAgICAgIGlmIChjb21wb25lbnQuc2VydmljZVByb3BzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGRlZXBFeHRlbmQoc2VydmljZU5hbWVzcGFjZSwgY29tcG9uZW50LnNlcnZpY2VQcm9wcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgbmFtZXNwYWNlW2NvbXBvbmVudE5hbWVXaXRob3V0Q29tcGF0XSA9IHNlcnZpY2VOYW1lc3BhY2U7XHJcbiAgICAgICAgICAgIC8vIFBhdGNoIHRoZSBGaXJlYmFzZUFwcEltcGwgcHJvdG90eXBlXHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgIGZpcmViYXNlQXBwSW1wbC5wcm90b3R5cGVbY29tcG9uZW50TmFtZVdpdGhvdXRDb21wYXRdID1cclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IFRoZSBlc2xpbnQgZGlzYWJsZSBjYW4gYmUgcmVtb3ZlZCBhbmQgdGhlICdpZ25vcmVSZXN0QXJncydcclxuICAgICAgICAgICAgICAgIC8vIG9wdGlvbiBhZGRlZCB0byB0aGUgbm8tZXhwbGljaXQtYW55IHJ1bGUgd2hlbiBFU2xpbnQgcmVsZWFzZXMgaXQuXHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKC4uLmFyZ3MpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZXJ2aWNlRnhuID0gdGhpcy5fZ2V0U2VydmljZS5iaW5kKHRoaXMsIGNvbXBvbmVudE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlRnhuLmFwcGx5KHRoaXMsIGNvbXBvbmVudC5tdWx0aXBsZUluc3RhbmNlcyA/IGFyZ3MgOiBbXSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY29tcG9uZW50LnR5cGUgPT09IFwiUFVCTElDXCIgLyogUFVCTElDICovXHJcbiAgICAgICAgICAgID8gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgIG5hbWVzcGFjZVtjb21wb25lbnROYW1lV2l0aG91dENvbXBhdF1cclxuICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgfVxyXG4gICAgLy8gTWFwIHRoZSByZXF1ZXN0ZWQgc2VydmljZSB0byBhIHJlZ2lzdGVyZWQgc2VydmljZSBuYW1lXHJcbiAgICAvLyAodXNlZCB0byBtYXAgYXV0aCB0byBzZXJ2ZXJBdXRoIHNlcnZpY2Ugd2hlbiBuZWVkZWQpLlxyXG4gICAgZnVuY3Rpb24gdXNlQXNTZXJ2aWNlKGFwcCwgbmFtZSkge1xyXG4gICAgICAgIGlmIChuYW1lID09PSAnc2VydmVyQXV0aCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHVzZVNlcnZpY2UgPSBuYW1lO1xyXG4gICAgICAgIHJldHVybiB1c2VTZXJ2aWNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5hbWVzcGFjZTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJuIGEgZmlyZWJhc2UgbmFtZXNwYWNlIG9iamVjdC5cclxuICpcclxuICogSW4gcHJvZHVjdGlvbiwgdGhpcyB3aWxsIGJlIGNhbGxlZCBleGFjdGx5IG9uY2UgYW5kIHRoZSByZXN1bHRcclxuICogYXNzaWduZWQgdG8gdGhlICdmaXJlYmFzZScgZ2xvYmFsLiAgSXQgbWF5IGJlIGNhbGxlZCBtdWx0aXBsZSB0aW1lc1xyXG4gKiBpbiB1bml0IHRlc3RzLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlRmlyZWJhc2VOYW1lc3BhY2UoKSB7XHJcbiAgICBjb25zdCBuYW1lc3BhY2UgPSBjcmVhdGVGaXJlYmFzZU5hbWVzcGFjZUNvcmUoRmlyZWJhc2VBcHBJbXBsKTtcclxuICAgIG5hbWVzcGFjZS5JTlRFUk5BTCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbmFtZXNwYWNlLklOVEVSTkFMKSwgeyBjcmVhdGVGaXJlYmFzZU5hbWVzcGFjZSxcclxuICAgICAgICBleHRlbmROYW1lc3BhY2UsXHJcbiAgICAgICAgY3JlYXRlU3Vic2NyaWJlLFxyXG4gICAgICAgIEVycm9yRmFjdG9yeSxcclxuICAgICAgICBkZWVwRXh0ZW5kIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBQYXRjaCB0aGUgdG9wLWxldmVsIGZpcmViYXNlIG5hbWVzcGFjZSB3aXRoIGFkZGl0aW9uYWwgcHJvcGVydGllcy5cclxuICAgICAqXHJcbiAgICAgKiBmaXJlYmFzZS5JTlRFUk5BTC5leHRlbmROYW1lc3BhY2UoKVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBleHRlbmROYW1lc3BhY2UocHJvcHMpIHtcclxuICAgICAgICBkZWVwRXh0ZW5kKG5hbWVzcGFjZSwgcHJvcHMpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5hbWVzcGFjZTtcclxufVxyXG5jb25zdCBmaXJlYmFzZSQxID0gY3JlYXRlRmlyZWJhc2VOYW1lc3BhY2UoKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgbG9nZ2VyID0gbmV3IExvZ2dlcignQGZpcmViYXNlL2FwcC1jb21wYXQnKTtcblxuY29uc3QgbmFtZSA9IFwiQGZpcmViYXNlL2FwcC1jb21wYXRcIjtcbmNvbnN0IHZlcnNpb24gPSBcIjAuMS4xMlwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiByZWdpc3RlckNvcmVDb21wb25lbnRzKHZhcmlhbnQpIHtcclxuICAgIC8vIFJlZ2lzdGVyIGBhcHBgIHBhY2thZ2UuXHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbiwgdmFyaWFudCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gRmlyZWJhc2UgTGl0ZSBkZXRlY3Rpb25cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuaWYgKGlzQnJvd3NlcigpICYmIHNlbGYuZmlyZWJhc2UgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgbG9nZ2VyLndhcm4oYFxuICAgIFdhcm5pbmc6IEZpcmViYXNlIGlzIGFscmVhZHkgZGVmaW5lZCBpbiB0aGUgZ2xvYmFsIHNjb3BlLiBQbGVhc2UgbWFrZSBzdXJlXG4gICAgRmlyZWJhc2UgbGlicmFyeSBpcyBvbmx5IGxvYWRlZCBvbmNlLlxuICBgKTtcclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxyXG4gICAgY29uc3Qgc2RrVmVyc2lvbiA9IHNlbGYuZmlyZWJhc2UuU0RLX1ZFUlNJT047XHJcbiAgICBpZiAoc2RrVmVyc2lvbiAmJiBzZGtWZXJzaW9uLmluZGV4T2YoJ0xJVEUnKSA+PSAwKSB7XHJcbiAgICAgICAgbG9nZ2VyLndhcm4oYFxuICAgIFdhcm5pbmc6IFlvdSBhcmUgdHJ5aW5nIHRvIGxvYWQgRmlyZWJhc2Ugd2hpbGUgdXNpbmcgRmlyZWJhc2UgUGVyZm9ybWFuY2Ugc3RhbmRhbG9uZSBzY3JpcHQuXG4gICAgWW91IHNob3VsZCBsb2FkIEZpcmViYXNlIFBlcmZvcm1hbmNlIHdpdGggdGhpcyBpbnN0YW5jZSBvZiBGaXJlYmFzZSB0byBhdm9pZCBsb2FkaW5nIGR1cGxpY2F0ZSBjb2RlLlxuICAgIGApO1xyXG4gICAgfVxyXG59XHJcbmNvbnN0IGZpcmViYXNlID0gZmlyZWJhc2UkMTtcclxucmVnaXN0ZXJDb3JlQ29tcG9uZW50cygpO1xuXG5leHBvcnQgeyBmaXJlYmFzZSBhcyBkZWZhdWx0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwidmFyIGc7XG5cbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXG5nID0gKGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gdGhpcztcbn0pKCk7XG5cbnRyeSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxuXHRnID0gZyB8fCBuZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xufSBjYXRjaCAoZSkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxuXHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIikgZyA9IHdpbmRvdztcbn1cblxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3Ncbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cblxubW9kdWxlLmV4cG9ydHMgPSBnO1xuIiwiLy8gVW5pcXVlIElEIGNyZWF0aW9uIHJlcXVpcmVzIGEgaGlnaCBxdWFsaXR5IHJhbmRvbSAjIGdlbmVyYXRvci4gIEluIHRoZVxuLy8gYnJvd3NlciB0aGlzIGlzIGEgbGl0dGxlIGNvbXBsaWNhdGVkIGR1ZSB0byB1bmtub3duIHF1YWxpdHkgb2YgTWF0aC5yYW5kb20oKVxuLy8gYW5kIGluY29uc2lzdGVudCBzdXBwb3J0IGZvciB0aGUgYGNyeXB0b2AgQVBJLiAgV2UgZG8gdGhlIGJlc3Qgd2UgY2FuIHZpYVxuLy8gZmVhdHVyZS1kZXRlY3Rpb25cblxuLy8gZ2V0UmFuZG9tVmFsdWVzIG5lZWRzIHRvIGJlIGludm9rZWQgaW4gYSBjb250ZXh0IHdoZXJlIFwidGhpc1wiIGlzIGEgQ3J5cHRvXG4vLyBpbXBsZW1lbnRhdGlvbi4gQWxzbywgZmluZCB0aGUgY29tcGxldGUgaW1wbGVtZW50YXRpb24gb2YgY3J5cHRvIG9uIElFMTEuXG52YXIgZ2V0UmFuZG9tVmFsdWVzID0gKHR5cGVvZihjcnlwdG8pICE9ICd1bmRlZmluZWQnICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKGNyeXB0bykpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgKHR5cGVvZihtc0NyeXB0bykgIT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHdpbmRvdy5tc0NyeXB0by5nZXRSYW5kb21WYWx1ZXMgPT0gJ2Z1bmN0aW9uJyAmJiBtc0NyeXB0by5nZXRSYW5kb21WYWx1ZXMuYmluZChtc0NyeXB0bykpO1xuXG5pZiAoZ2V0UmFuZG9tVmFsdWVzKSB7XG4gIC8vIFdIQVRXRyBjcnlwdG8gUk5HIC0gaHR0cDovL3dpa2kud2hhdHdnLm9yZy93aWtpL0NyeXB0b1xuICB2YXIgcm5kczggPSBuZXcgVWludDhBcnJheSgxNik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWZcblxuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHdoYXR3Z1JORygpIHtcbiAgICBnZXRSYW5kb21WYWx1ZXMocm5kczgpO1xuICAgIHJldHVybiBybmRzODtcbiAgfTtcbn0gZWxzZSB7XG4gIC8vIE1hdGgucmFuZG9tKCktYmFzZWQgKFJORylcbiAgLy9cbiAgLy8gSWYgYWxsIGVsc2UgZmFpbHMsIHVzZSBNYXRoLnJhbmRvbSgpLiAgSXQncyBmYXN0LCBidXQgaXMgb2YgdW5zcGVjaWZpZWRcbiAgLy8gcXVhbGl0eS5cbiAgdmFyIHJuZHMgPSBuZXcgQXJyYXkoMTYpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gbWF0aFJORygpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgcjsgaSA8IDE2OyBpKyspIHtcbiAgICAgIGlmICgoaSAmIDB4MDMpID09PSAwKSByID0gTWF0aC5yYW5kb20oKSAqIDB4MTAwMDAwMDAwO1xuICAgICAgcm5kc1tpXSA9IHIgPj4+ICgoaSAmIDB4MDMpIDw8IDMpICYgMHhmZjtcbiAgICB9XG5cbiAgICByZXR1cm4gcm5kcztcbiAgfTtcbn1cbiIsIi8qKlxuICogQ29udmVydCBhcnJheSBvZiAxNiBieXRlIHZhbHVlcyB0byBVVUlEIHN0cmluZyBmb3JtYXQgb2YgdGhlIGZvcm06XG4gKiBYWFhYWFhYWC1YWFhYLVhYWFgtWFhYWC1YWFhYWFhYWFhYWFhcbiAqL1xudmFyIGJ5dGVUb0hleCA9IFtdO1xuZm9yICh2YXIgaSA9IDA7IGkgPCAyNTY7ICsraSkge1xuICBieXRlVG9IZXhbaV0gPSAoaSArIDB4MTAwKS50b1N0cmluZygxNikuc3Vic3RyKDEpO1xufVxuXG5mdW5jdGlvbiBieXRlc1RvVXVpZChidWYsIG9mZnNldCkge1xuICB2YXIgaSA9IG9mZnNldCB8fCAwO1xuICB2YXIgYnRoID0gYnl0ZVRvSGV4O1xuICAvLyBqb2luIHVzZWQgdG8gZml4IG1lbW9yeSBpc3N1ZSBjYXVzZWQgYnkgY29uY2F0ZW5hdGlvbjogaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9MzE3NSNjNFxuICByZXR1cm4gKFtcbiAgICBidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLFxuICAgIGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sICctJyxcbiAgICBidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLCAnLScsXG4gICAgYnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSwgJy0nLFxuICAgIGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sICctJyxcbiAgICBidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLFxuICAgIGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sXG4gICAgYnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXVxuICBdKS5qb2luKCcnKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBieXRlc1RvVXVpZDtcbiIsIi8qXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgIGh0dHBzOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgKiBhcyB1dWlkIGZyb20gXCJ1dWlkXCI7XG5cbmltcG9ydCBmaXJlYmFzZSBmcm9tIFwiZmlyZWJhc2UvY29tcGF0L2FwcFwiO1xuaW1wb3J0IFwiZmlyZWJhc2UvY29tcGF0L2F1dGhcIjtcbmltcG9ydCBcImZpcmViYXNlL2NvbXBhdC9maXJlc3RvcmVcIjtcbmltcG9ydCB7IGRvYywgc2V0RG9jLCBvblNuYXBzaG90IH0gZnJvbSBcImZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuXG5jb25zdCBTSEFSRF9DT0xMRUNUSU9OX0lEID0gXCJfY291bnRlcl9zaGFyZHNfXCI7XG5jb25zdCBDT09LSUVfTkFNRSA9IFwiRklSRVNUT1JFX0NPVU5URVJfU0hBUkRfSURcIjtcblxuZXhwb3J0IGludGVyZmFjZSBDb3VudGVyU25hcHNob3Qge1xuICBleGlzdHM6IGJvb2xlYW47XG4gIGRhdGE6ICgpID0+IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIENvdW50ZXIge1xuICBwcml2YXRlIGRiOiBmaXJlYmFzZS5maXJlc3RvcmUuRmlyZXN0b3JlID0gbnVsbDtcbiAgcHJpdmF0ZSBzaGFyZElkID0gXCJcIjtcbiAgcHJpdmF0ZSBzaGFyZHM6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0gPSB7fTtcbiAgcHJpdmF0ZSBub3RpZnlQcm9taXNlOiBQcm9taXNlPHZvaWQ+ID0gbnVsbDtcblxuICAvKipcbiAgICogQ29uc3RydWN0cyBhIHNoYXJkZWQgY291bnRlciBvYmplY3QgdGhhdCByZWZlcmVuY2VzIHRvIGEgZmllbGRcbiAgICogaW4gYSBkb2N1bWVudCB0aGF0IGlzIGEgY291bnRlci5cbiAgICpcbiAgICogQHBhcmFtIGRvYyBBIHJlZmVyZW5jZSB0byBhIGRvY3VtZW50IHdpdGggYSBjb3VudGVyIGZpZWxkLlxuICAgKiBAcGFyYW0gZmllbGQgQSBwYXRoIHRvIGEgY291bnRlciBmaWVsZCBpbiB0aGUgYWJvdmUgZG9jdW1lbnQuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGRvYzogZmlyZWJhc2UuZmlyZXN0b3JlLkRvY3VtZW50UmVmZXJlbmNlLFxuICAgIHByaXZhdGUgZmllbGQ6IHN0cmluZ1xuICApIHtcbiAgICB0aGlzLmRiID0gZG9jLmZpcmVzdG9yZTtcbiAgICB0aGlzLnNoYXJkSWQgPSBnZXRTaGFyZElkKENPT0tJRV9OQU1FKTtcblxuICAgIGZpcmViYXNlLmluaXRpYWxpemVBcHAodGhpcy5kYi5hcHAub3B0aW9ucyk7XG5cbiAgICBjb25zdCBzaGFyZHNSZWYgPSBmaXJlYmFzZVxuICAgICAgLmZpcmVzdG9yZSgpXG4gICAgICAuY29sbGVjdGlvbihkb2MucGF0aCArIFwiL1wiICsgU0hBUkRfQ09MTEVDVElPTl9JRCk7XG4gICAgdGhpcy5zaGFyZHNbZG9jLnBhdGhdID0gMDtcblxuICAgIHRoaXMuc2hhcmRzW3NoYXJkc1JlZi5wYXRoICsgXCIvXCIgKyB0aGlzLnNoYXJkSWRdID0gMDtcbiAgICB0aGlzLnNoYXJkc1tzaGFyZHNSZWYucGF0aCArIFwiL1wiICsgXCJcXHRcIiArIHRoaXMuc2hhcmRJZC5zdWJzdHIoMCwgNCldID0gMDtcbiAgICB0aGlzLnNoYXJkc1tzaGFyZHNSZWYucGF0aCArIFwiL1wiICsgXCJcXHRcXHRcIiArIHRoaXMuc2hhcmRJZC5zdWJzdHIoMCwgMyldID0gMDtcbiAgICB0aGlzLnNoYXJkc1tcbiAgICAgIHNoYXJkc1JlZi5wYXRoICsgXCIvXCIgKyBcIlxcdFxcdFxcdFwiICsgdGhpcy5zaGFyZElkLnN1YnN0cigwLCAyKVxuICAgIF0gPSAwO1xuICAgIHRoaXMuc2hhcmRzW1xuICAgICAgc2hhcmRzUmVmLnBhdGggKyBcIi9cIiArIFwiXFx0XFx0XFx0XCIgKyB0aGlzLnNoYXJkSWQuc3Vic3RyKDAsIDEpXG4gICAgXSA9IDA7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGxhdGVuY3kgY29tcGVuc2F0ZWQgdmlldyBvZiB0aGUgY291bnRlci5cbiAgICpcbiAgICogQWxsIGxvY2FsIGluY3JlbWVudHMgd2lsbCBiZSByZWZsZWN0ZWQgaW4gdGhlIGNvdW50ZXIgZXZlbiBpZiB0aGUgbWFpblxuICAgKiBjb3VudGVyIGhhc24ndCBiZWVuIHVwZGF0ZWQgeWV0LlxuICAgKi9cbiAgcHVibGljIGFzeW5jIGdldChvcHRpb25zPzogZmlyZWJhc2UuZmlyZXN0b3JlLkdldE9wdGlvbnMpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIGNvbnN0IHZhbHVlUHJvbWlzZXMgPSBPYmplY3Qua2V5cyh0aGlzLnNoYXJkcykubWFwKGFzeW5jIChwYXRoKSA9PiB7XG4gICAgICBjb25zdCBzaGFyZCA9IGF3YWl0IHRoaXMuZGIuZG9jKHBhdGgpLmdldChvcHRpb25zKTtcbiAgICAgIHJldHVybiA8bnVtYmVyPnNoYXJkLmdldCh0aGlzLmZpZWxkKSB8fCAwO1xuICAgIH0pO1xuICAgIGNvbnN0IHZhbHVlcyA9IGF3YWl0IFByb21pc2UuYWxsKHZhbHVlUHJvbWlzZXMpO1xuICAgIHJldHVybiB2YWx1ZXMucmVkdWNlKChhLCBiKSA9PiBhICsgYiwgMCk7XG4gIH1cblxuICAvKipcbiAgICogTGlzdGVuIHRvIGxhdGVuY3kgY29tcGVuc2F0ZWQgdmlldyBvZiB0aGUgY291bnRlci5cbiAgICpcbiAgICogQWxsIGxvY2FsIGluY3JlbWVudHMgdG8gdGhpcyBjb3VudGVyIHdpbGwgYmUgaW1tZWRpYXRlbHkgdmlzaWJsZSBpbiB0aGVcbiAgICogc25hcHNob3QuXG4gICAqL1xuICBwdWJsaWMgb25TbmFwc2hvdChvYnNlcnZhYmxlOiAobmV4dDogQ291bnRlclNuYXBzaG90KSA9PiB2b2lkKSB7XG4gICAgT2JqZWN0LmtleXModGhpcy5zaGFyZHMpLmZvckVhY2goKHBhdGgpID0+IHtcbiAgICAgIGNvbnN0IGRvY3VtZW50ID0gZmlyZWJhc2UuZmlyZXN0b3JlKCkuZG9jKHBhdGgpO1xuXG4gICAgICBvblNuYXBzaG90KGRvY3VtZW50LCAoc25hcDogZmlyZWJhc2UuZmlyZXN0b3JlLkRvY3VtZW50RGF0YSkgPT4ge1xuICAgICAgICB0aGlzLnNoYXJkc1tzbmFwLnJlZi5wYXRoXSA9IHNuYXAuZ2V0KHRoaXMuZmllbGQpIHx8IDA7XG4gICAgICAgIGlmICh0aGlzLm5vdGlmeVByb21pc2UgIT09IG51bGwpIHJldHVybjtcbiAgICAgICAgdGhpcy5ub3RpZnlQcm9taXNlID0gc2NoZWR1bGUoKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHN1bSA9IE9iamVjdC52YWx1ZXModGhpcy5zaGFyZHMpLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApO1xuICAgICAgICAgIG9ic2VydmFibGUoeyBleGlzdHM6IHRydWUsIGRhdGE6ICgpID0+IHN1bSB9KTtcbiAgICAgICAgICB0aGlzLm5vdGlmeVByb21pc2UgPSBudWxsO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEluY3JlbWVudCB0aGUgY291bnRlciBieSBhIGdpdmVuIHZhbHVlLlxuICAgKlxuICAgKiBlLmcuXG4gICAqIGNvbnN0IGNvdW50ZXIgPSBuZXcgc2hhcmRlZC5Db3VudGVyKGRiLmRvYyhcInBhdGgvZG9jdW1lbnRcIiksIFwiY291bnRlclwiKTtcbiAgICogY291bnRlci5pbmNyZW1lbnRCeSgxKTtcbiAgICovXG4gIHB1YmxpYyBpbmNyZW1lbnRCeSh2YWw6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBjb25zdCBpbmNyZW1lbnQ6IGFueSA9IGZpcmViYXNlLmZpcmVzdG9yZS5GaWVsZFZhbHVlLmluY3JlbWVudCh2YWwpO1xuICAgIGNvbnN0IHVwZGF0ZTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSA9IHRoaXMuZmllbGRcbiAgICAgIC5zcGxpdChcIi5cIilcbiAgICAgIC5yZXZlcnNlKClcbiAgICAgIC5yZWR1Y2UoKHZhbHVlLCBuYW1lKSA9PiAoeyBbbmFtZV06IHZhbHVlIH0pLCBpbmNyZW1lbnQpO1xuXG4gICAgY29uc3Qgc2hhcmRSZWYgPSBmaXJlYmFzZVxuICAgICAgLmZpcmVzdG9yZSgpXG4gICAgICAuY29sbGVjdGlvbih0aGlzLmRvYy5wYXRoICsgXCIvXCIgKyBTSEFSRF9DT0xMRUNUSU9OX0lEKTtcblxuICAgIHJldHVybiBzZXREb2MoZG9jKHNoYXJkUmVmLCB0aGlzLnNoYXJkSWQpLCB1cGRhdGUsIHsgbWVyZ2U6IHRydWUgfSk7XG4gIH1cblxuICAvKipcbiAgICogQWNjZXNzIHRoZSBhc3NpZ25lZCBzaGFyZCBkaXJlY3RseS4gVXNlZnVsIHRvIHVwZGF0ZSBtdWx0aXBsZSBjb3VudGVyc1xuICAgKiBhdCB0aGUgc2FtZSB0aW1lLCBiYXRjaGVzIG9yIHRyYW5zYWN0aW9ucy5cbiAgICpcbiAgICogZS5nLlxuICAgKiBjb25zdCBjb3VudGVyID0gbmV3IHNoYXJkZWQuQ291bnRlcihkYi5kb2MoXCJwYXRoL2NvdW50ZXJcIiksIFwiXCIpO1xuICAgKiBjb25zdCBzaGFyZFJlZiA9IGNvdW50ZXIuc2hhcmQoKTtcbiAgICogc2hhcmRSZWYuc2V0KHtcImNvdW50ZXIxXCIsIGZpcmVzdG9yZS5GaWVsZFZhbHVlLkluY3JlbWVudCgxKSxcbiAgICogICAgICAgICAgICAgICBcImNvdW50ZXIyXCIsIGZpcmVzdG9yZS5GaWVsZFZhbHVlLkluY3JlbWVudCgxKSk7XG4gICAqL1xuICBwdWJsaWMgc2hhcmQoKTogZmlyZWJhc2UuZmlyZXN0b3JlLkRvY3VtZW50UmVmZXJlbmNlIHtcbiAgICByZXR1cm4gdGhpcy5kb2MuY29sbGVjdGlvbihTSEFSRF9DT0xMRUNUSU9OX0lEKS5kb2ModGhpcy5zaGFyZElkKTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBzY2hlZHVsZTxUPihmdW5jOiAoKSA9PiBUKTogUHJvbWlzZTxUPiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZTxUPihhc3luYyAocmVzb2x2ZSkgPT4ge1xuICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gZnVuYygpO1xuICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgIH0sIDApO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZ2V0U2hhcmRJZChjb29raWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IHJlc3VsdCA9IG5ldyBSZWdFeHAoXG4gICAgXCIoPzpefDsgKVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGNvb2tpZSkgKyBcIj0oW147XSopXCJcbiAgKS5leGVjKGRvY3VtZW50LmNvb2tpZSk7XG4gIGlmIChyZXN1bHQpIHJldHVybiByZXN1bHRbMV07XG5cbiAgY29uc3Qgc2hhcmRJZCA9IHV1aWQudjQoKTtcblxuICBjb25zdCBkYXRlID0gbmV3IERhdGUoKTtcbiAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpICsgMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwKTtcbiAgY29uc3QgZXhwaXJlcyA9IFwiOyBleHBpcmVzPVwiICsgZGF0ZS50b1VUQ1N0cmluZygpO1xuXG4gIGRvY3VtZW50LmNvb2tpZSA9XG4gICAgZW5jb2RlVVJJQ29tcG9uZW50KGNvb2tpZSkgKyBcIj1cIiArIHNoYXJkSWQgKyBleHBpcmVzICsgXCI7IHBhdGg9L1wiO1xuICByZXR1cm4gc2hhcmRJZDtcbn1cbiIsInZhciB2MSA9IHJlcXVpcmUoJy4vdjEnKTtcbnZhciB2NCA9IHJlcXVpcmUoJy4vdjQnKTtcblxudmFyIHV1aWQgPSB2NDtcbnV1aWQudjEgPSB2MTtcbnV1aWQudjQgPSB2NDtcblxubW9kdWxlLmV4cG9ydHMgPSB1dWlkO1xuIiwidmFyIHJuZyA9IHJlcXVpcmUoJy4vbGliL3JuZycpO1xudmFyIGJ5dGVzVG9VdWlkID0gcmVxdWlyZSgnLi9saWIvYnl0ZXNUb1V1aWQnKTtcblxuLy8gKipgdjEoKWAgLSBHZW5lcmF0ZSB0aW1lLWJhc2VkIFVVSUQqKlxuLy9cbi8vIEluc3BpcmVkIGJ5IGh0dHBzOi8vZ2l0aHViLmNvbS9MaW9zSy9VVUlELmpzXG4vLyBhbmQgaHR0cDovL2RvY3MucHl0aG9uLm9yZy9saWJyYXJ5L3V1aWQuaHRtbFxuXG52YXIgX25vZGVJZDtcbnZhciBfY2xvY2tzZXE7XG5cbi8vIFByZXZpb3VzIHV1aWQgY3JlYXRpb24gdGltZVxudmFyIF9sYXN0TVNlY3MgPSAwO1xudmFyIF9sYXN0TlNlY3MgPSAwO1xuXG4vLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkIGZvciBBUEkgZGV0YWlsc1xuZnVuY3Rpb24gdjEob3B0aW9ucywgYnVmLCBvZmZzZXQpIHtcbiAgdmFyIGkgPSBidWYgJiYgb2Zmc2V0IHx8IDA7XG4gIHZhciBiID0gYnVmIHx8IFtdO1xuXG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICB2YXIgbm9kZSA9IG9wdGlvbnMubm9kZSB8fCBfbm9kZUlkO1xuICB2YXIgY2xvY2tzZXEgPSBvcHRpb25zLmNsb2Nrc2VxICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNsb2Nrc2VxIDogX2Nsb2Nrc2VxO1xuXG4gIC8vIG5vZGUgYW5kIGNsb2Nrc2VxIG5lZWQgdG8gYmUgaW5pdGlhbGl6ZWQgdG8gcmFuZG9tIHZhbHVlcyBpZiB0aGV5J3JlIG5vdFxuICAvLyBzcGVjaWZpZWQuICBXZSBkbyB0aGlzIGxhemlseSB0byBtaW5pbWl6ZSBpc3N1ZXMgcmVsYXRlZCB0byBpbnN1ZmZpY2llbnRcbiAgLy8gc3lzdGVtIGVudHJvcHkuICBTZWUgIzE4OVxuICBpZiAobm9kZSA9PSBudWxsIHx8IGNsb2Nrc2VxID09IG51bGwpIHtcbiAgICB2YXIgc2VlZEJ5dGVzID0gcm5nKCk7XG4gICAgaWYgKG5vZGUgPT0gbnVsbCkge1xuICAgICAgLy8gUGVyIDQuNSwgY3JlYXRlIGFuZCA0OC1iaXQgbm9kZSBpZCwgKDQ3IHJhbmRvbSBiaXRzICsgbXVsdGljYXN0IGJpdCA9IDEpXG4gICAgICBub2RlID0gX25vZGVJZCA9IFtcbiAgICAgICAgc2VlZEJ5dGVzWzBdIHwgMHgwMSxcbiAgICAgICAgc2VlZEJ5dGVzWzFdLCBzZWVkQnl0ZXNbMl0sIHNlZWRCeXRlc1szXSwgc2VlZEJ5dGVzWzRdLCBzZWVkQnl0ZXNbNV1cbiAgICAgIF07XG4gICAgfVxuICAgIGlmIChjbG9ja3NlcSA9PSBudWxsKSB7XG4gICAgICAvLyBQZXIgNC4yLjIsIHJhbmRvbWl6ZSAoMTQgYml0KSBjbG9ja3NlcVxuICAgICAgY2xvY2tzZXEgPSBfY2xvY2tzZXEgPSAoc2VlZEJ5dGVzWzZdIDw8IDggfCBzZWVkQnl0ZXNbN10pICYgMHgzZmZmO1xuICAgIH1cbiAgfVxuXG4gIC8vIFVVSUQgdGltZXN0YW1wcyBhcmUgMTAwIG5hbm8tc2Vjb25kIHVuaXRzIHNpbmNlIHRoZSBHcmVnb3JpYW4gZXBvY2gsXG4gIC8vICgxNTgyLTEwLTE1IDAwOjAwKS4gIEpTTnVtYmVycyBhcmVuJ3QgcHJlY2lzZSBlbm91Z2ggZm9yIHRoaXMsIHNvXG4gIC8vIHRpbWUgaXMgaGFuZGxlZCBpbnRlcm5hbGx5IGFzICdtc2VjcycgKGludGVnZXIgbWlsbGlzZWNvbmRzKSBhbmQgJ25zZWNzJ1xuICAvLyAoMTAwLW5hbm9zZWNvbmRzIG9mZnNldCBmcm9tIG1zZWNzKSBzaW5jZSB1bml4IGVwb2NoLCAxOTcwLTAxLTAxIDAwOjAwLlxuICB2YXIgbXNlY3MgPSBvcHRpb25zLm1zZWNzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1zZWNzIDogbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cbiAgLy8gUGVyIDQuMi4xLjIsIHVzZSBjb3VudCBvZiB1dWlkJ3MgZ2VuZXJhdGVkIGR1cmluZyB0aGUgY3VycmVudCBjbG9ja1xuICAvLyBjeWNsZSB0byBzaW11bGF0ZSBoaWdoZXIgcmVzb2x1dGlvbiBjbG9ja1xuICB2YXIgbnNlY3MgPSBvcHRpb25zLm5zZWNzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm5zZWNzIDogX2xhc3ROU2VjcyArIDE7XG5cbiAgLy8gVGltZSBzaW5jZSBsYXN0IHV1aWQgY3JlYXRpb24gKGluIG1zZWNzKVxuICB2YXIgZHQgPSAobXNlY3MgLSBfbGFzdE1TZWNzKSArIChuc2VjcyAtIF9sYXN0TlNlY3MpLzEwMDAwO1xuXG4gIC8vIFBlciA0LjIuMS4yLCBCdW1wIGNsb2Nrc2VxIG9uIGNsb2NrIHJlZ3Jlc3Npb25cbiAgaWYgKGR0IDwgMCAmJiBvcHRpb25zLmNsb2Nrc2VxID09PSB1bmRlZmluZWQpIHtcbiAgICBjbG9ja3NlcSA9IGNsb2Nrc2VxICsgMSAmIDB4M2ZmZjtcbiAgfVxuXG4gIC8vIFJlc2V0IG5zZWNzIGlmIGNsb2NrIHJlZ3Jlc3NlcyAobmV3IGNsb2Nrc2VxKSBvciB3ZSd2ZSBtb3ZlZCBvbnRvIGEgbmV3XG4gIC8vIHRpbWUgaW50ZXJ2YWxcbiAgaWYgKChkdCA8IDAgfHwgbXNlY3MgPiBfbGFzdE1TZWNzKSAmJiBvcHRpb25zLm5zZWNzID09PSB1bmRlZmluZWQpIHtcbiAgICBuc2VjcyA9IDA7XG4gIH1cblxuICAvLyBQZXIgNC4yLjEuMiBUaHJvdyBlcnJvciBpZiB0b28gbWFueSB1dWlkcyBhcmUgcmVxdWVzdGVkXG4gIGlmIChuc2VjcyA+PSAxMDAwMCkge1xuICAgIHRocm93IG5ldyBFcnJvcigndXVpZC52MSgpOiBDYW5cXCd0IGNyZWF0ZSBtb3JlIHRoYW4gMTBNIHV1aWRzL3NlYycpO1xuICB9XG5cbiAgX2xhc3RNU2VjcyA9IG1zZWNzO1xuICBfbGFzdE5TZWNzID0gbnNlY3M7XG4gIF9jbG9ja3NlcSA9IGNsb2Nrc2VxO1xuXG4gIC8vIFBlciA0LjEuNCAtIENvbnZlcnQgZnJvbSB1bml4IGVwb2NoIHRvIEdyZWdvcmlhbiBlcG9jaFxuICBtc2VjcyArPSAxMjIxOTI5MjgwMDAwMDtcblxuICAvLyBgdGltZV9sb3dgXG4gIHZhciB0bCA9ICgobXNlY3MgJiAweGZmZmZmZmYpICogMTAwMDAgKyBuc2VjcykgJSAweDEwMDAwMDAwMDtcbiAgYltpKytdID0gdGwgPj4+IDI0ICYgMHhmZjtcbiAgYltpKytdID0gdGwgPj4+IDE2ICYgMHhmZjtcbiAgYltpKytdID0gdGwgPj4+IDggJiAweGZmO1xuICBiW2krK10gPSB0bCAmIDB4ZmY7XG5cbiAgLy8gYHRpbWVfbWlkYFxuICB2YXIgdG1oID0gKG1zZWNzIC8gMHgxMDAwMDAwMDAgKiAxMDAwMCkgJiAweGZmZmZmZmY7XG4gIGJbaSsrXSA9IHRtaCA+Pj4gOCAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRtaCAmIDB4ZmY7XG5cbiAgLy8gYHRpbWVfaGlnaF9hbmRfdmVyc2lvbmBcbiAgYltpKytdID0gdG1oID4+PiAyNCAmIDB4ZiB8IDB4MTA7IC8vIGluY2x1ZGUgdmVyc2lvblxuICBiW2krK10gPSB0bWggPj4+IDE2ICYgMHhmZjtcblxuICAvLyBgY2xvY2tfc2VxX2hpX2FuZF9yZXNlcnZlZGAgKFBlciA0LjIuMiAtIGluY2x1ZGUgdmFyaWFudClcbiAgYltpKytdID0gY2xvY2tzZXEgPj4+IDggfCAweDgwO1xuXG4gIC8vIGBjbG9ja19zZXFfbG93YFxuICBiW2krK10gPSBjbG9ja3NlcSAmIDB4ZmY7XG5cbiAgLy8gYG5vZGVgXG4gIGZvciAodmFyIG4gPSAwOyBuIDwgNjsgKytuKSB7XG4gICAgYltpICsgbl0gPSBub2RlW25dO1xuICB9XG5cbiAgcmV0dXJuIGJ1ZiA/IGJ1ZiA6IGJ5dGVzVG9VdWlkKGIpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHYxO1xuIiwidmFyIHJuZyA9IHJlcXVpcmUoJy4vbGliL3JuZycpO1xudmFyIGJ5dGVzVG9VdWlkID0gcmVxdWlyZSgnLi9saWIvYnl0ZXNUb1V1aWQnKTtcblxuZnVuY3Rpb24gdjQob3B0aW9ucywgYnVmLCBvZmZzZXQpIHtcbiAgdmFyIGkgPSBidWYgJiYgb2Zmc2V0IHx8IDA7XG5cbiAgaWYgKHR5cGVvZihvcHRpb25zKSA9PSAnc3RyaW5nJykge1xuICAgIGJ1ZiA9IG9wdGlvbnMgPT09ICdiaW5hcnknID8gbmV3IEFycmF5KDE2KSA6IG51bGw7XG4gICAgb3B0aW9ucyA9IG51bGw7XG4gIH1cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgdmFyIHJuZHMgPSBvcHRpb25zLnJhbmRvbSB8fCAob3B0aW9ucy5ybmcgfHwgcm5nKSgpO1xuXG4gIC8vIFBlciA0LjQsIHNldCBiaXRzIGZvciB2ZXJzaW9uIGFuZCBgY2xvY2tfc2VxX2hpX2FuZF9yZXNlcnZlZGBcbiAgcm5kc1s2XSA9IChybmRzWzZdICYgMHgwZikgfCAweDQwO1xuICBybmRzWzhdID0gKHJuZHNbOF0gJiAweDNmKSB8IDB4ODA7XG5cbiAgLy8gQ29weSBieXRlcyB0byBidWZmZXIsIGlmIHByb3ZpZGVkXG4gIGlmIChidWYpIHtcbiAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgMTY7ICsraWkpIHtcbiAgICAgIGJ1ZltpICsgaWldID0gcm5kc1tpaV07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJ1ZiB8fCBieXRlc1RvVXVpZChybmRzKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB2NDtcbiIsImltcG9ydCBmaXJlYmFzZSBmcm9tICdAZmlyZWJhc2UvYXBwLWNvbXBhdCc7XG5leHBvcnQgeyBkZWZhdWx0IH0gZnJvbSAnQGZpcmViYXNlL2FwcC1jb21wYXQnO1xuXG52YXIgbmFtZSA9IFwiZmlyZWJhc2VcIjtcbnZhciB2ZXJzaW9uID0gXCI5LjYuMVwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5maXJlYmFzZS5yZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbiwgJ2FwcC1jb21wYXQnKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbS5qcy5tYXBcbiIsImltcG9ydCAnQGZpcmViYXNlL2F1dGgtY29tcGF0Jztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbS5qcy5tYXBcbiIsImltcG9ydCBmaXJlYmFzZSBmcm9tICdAZmlyZWJhc2UvYXBwLWNvbXBhdCc7XG5pbXBvcnQgKiBhcyBleHAgZnJvbSAnQGZpcmViYXNlL2F1dGgvaW50ZXJuYWwnO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5pbXBvcnQgeyBpc0Jyb3dzZXJFeHRlbnNpb24sIGlzUmVhY3ROYXRpdmUsIGlzTm9kZSwgZ2V0VUEsIGlzSUUsIGlzSW5kZXhlZERCQXZhaWxhYmxlLCBGaXJlYmFzZUVycm9yIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG52YXIgbmFtZSA9IFwiQGZpcmViYXNlL2F1dGgtY29tcGF0XCI7XG52YXIgdmVyc2lvbiA9IFwiMC4yLjRcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgQ09SRE9WQV9PTkRFVklDRVJFQURZX1RJTUVPVVRfTVMgPSAxMDAwO1xyXG5mdW5jdGlvbiBfZ2V0Q3VycmVudFNjaGVtZSgpIHtcclxuICAgIHZhciBfYTtcclxuICAgIHJldHVybiAoKF9hID0gc2VsZiA9PT0gbnVsbCB8fCBzZWxmID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZWxmLmxvY2F0aW9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucHJvdG9jb2wpIHx8IG51bGw7XHJcbn1cclxuLyoqXHJcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQgaXMgaHR0cCBvciBodHRwcy5cclxuICovXHJcbmZ1bmN0aW9uIF9pc0h0dHBPckh0dHBzKCkge1xyXG4gICAgcmV0dXJuIF9nZXRDdXJyZW50U2NoZW1lKCkgPT09ICdodHRwOicgfHwgX2dldEN1cnJlbnRTY2hlbWUoKSA9PT0gJ2h0dHBzOic7XHJcbn1cclxuLyoqXHJcbiAqIEBwYXJhbSB7P3N0cmluZz19IHVhIFRoZSB1c2VyIGFnZW50LlxyXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBhcHAgaXMgcmVuZGVyZWQgaW4gYSBtb2JpbGUgaU9TIG9yIEFuZHJvaWRcclxuICogICAgIENvcmRvdmEgZW52aXJvbm1lbnQuXHJcbiAqL1xyXG5mdW5jdGlvbiBfaXNBbmRyb2lkT3JJb3NDb3Jkb3ZhU2NoZW1lKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuICEhKChfZ2V0Q3VycmVudFNjaGVtZSgpID09PSAnZmlsZTonIHx8IF9nZXRDdXJyZW50U2NoZW1lKCkgPT09ICdpb25pYzonKSAmJlxyXG4gICAgICAgIHVhLnRvTG93ZXJDYXNlKCkubWF0Y2goL2lwaG9uZXxpcGFkfGlwb2R8YW5kcm9pZC8pKTtcclxufVxyXG4vKipcclxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgZW52aXJvbm1lbnQgaXMgYSBuYXRpdmUgZW52aXJvbm1lbnQsIHdoZXJlXHJcbiAqICAgICBDT1JTIGNoZWNrcyBkbyBub3QgYXBwbHkuXHJcbiAqL1xyXG5mdW5jdGlvbiBfaXNOYXRpdmVFbnZpcm9ubWVudCgpIHtcclxuICAgIHJldHVybiBpc1JlYWN0TmF0aXZlKCkgfHwgaXNOb2RlKCk7XHJcbn1cclxuLyoqXHJcbiAqIENoZWNrcyB3aGV0aGVyIHRoZSB1c2VyIGFnZW50IGlzIElFMTEuXHJcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgaXQgaXMgSUUxMS5cclxuICovXHJcbmZ1bmN0aW9uIF9pc0llMTEoKSB7XHJcbiAgICByZXR1cm4gaXNJRSgpICYmIChkb2N1bWVudCA9PT0gbnVsbCB8fCBkb2N1bWVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogZG9jdW1lbnQuZG9jdW1lbnRNb2RlKSA9PT0gMTE7XHJcbn1cclxuLyoqXHJcbiAqIENoZWNrcyB3aGV0aGVyIHRoZSB1c2VyIGFnZW50IGlzIEVkZ2UuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB1c2VyQWdlbnQgVGhlIGJyb3dzZXIgdXNlciBhZ2VudCBzdHJpbmcuXHJcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgaXQgaXMgRWRnZS5cclxuICovXHJcbmZ1bmN0aW9uIF9pc0VkZ2UodWEgPSBnZXRVQSgpKSB7XHJcbiAgICByZXR1cm4gL0VkZ2VcXC9cXGQrLy50ZXN0KHVhKTtcclxufVxyXG4vKipcclxuICogQHBhcmFtIHs/c3RyaW5nPX0gb3B0X3VzZXJBZ2VudCBUaGUgbmF2aWdhdG9yIHVzZXIgYWdlbnQuXHJcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgbG9jYWwgc3RvcmFnZSBpcyBub3Qgc3luY2hyb25pemVkIGJldHdlZW4gYW4gaWZyYW1lXHJcbiAqICAgICBhbmQgYSBwb3B1cCBvZiB0aGUgc2FtZSBkb21haW4uXHJcbiAqL1xyXG5mdW5jdGlvbiBfaXNMb2NhbFN0b3JhZ2VOb3RTeW5jaHJvbml6ZWQodWEgPSBnZXRVQSgpKSB7XHJcbiAgICByZXR1cm4gX2lzSWUxMSgpIHx8IF9pc0VkZ2UodWEpO1xyXG59XHJcbi8qKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHdlYiBzdG9yYWdlIGlzIHN1cHBvcnRlZC4gKi9cclxuZnVuY3Rpb24gX2lzV2ViU3RvcmFnZVN1cHBvcnRlZCgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3Qgc3RvcmFnZSA9IHNlbGYubG9jYWxTdG9yYWdlO1xyXG4gICAgICAgIGNvbnN0IGtleSA9IGV4cC5fZ2VuZXJhdGVFdmVudElkKCk7XHJcbiAgICAgICAgaWYgKHN0b3JhZ2UpIHtcclxuICAgICAgICAgICAgLy8gc2V0SXRlbSB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiB3ZSBjYW5ub3QgYWNjZXNzIFdlYlN0b3JhZ2UgKGUuZy4sXHJcbiAgICAgICAgICAgIC8vIFNhZmFyaSBpbiBwcml2YXRlIG1vZGUpLlxyXG4gICAgICAgICAgICBzdG9yYWdlWydzZXRJdGVtJ10oa2V5LCAnMScpO1xyXG4gICAgICAgICAgICBzdG9yYWdlWydyZW1vdmVJdGVtJ10oa2V5KTtcclxuICAgICAgICAgICAgLy8gRm9yIGJyb3dzZXJzIHdoZXJlIGlmcmFtZSB3ZWIgc3RvcmFnZSBkb2VzIG5vdCBzeW5jaHJvbml6ZSB3aXRoIGEgcG9wdXBcclxuICAgICAgICAgICAgLy8gb2YgdGhlIHNhbWUgZG9tYWluLCBpbmRleGVkREIgaXMgdXNlZCBmb3IgcGVyc2lzdGVudCBzdG9yYWdlLiBUaGVzZVxyXG4gICAgICAgICAgICAvLyBicm93c2VycyBpbmNsdWRlIElFMTEgYW5kIEVkZ2UuXHJcbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSBpdCBpcyBzdXBwb3J0ZWQgKElFMTEgYW5kIEVkZ2UgcHJpdmF0ZSBtb2RlIGRvZXMgbm90IHN1cHBvcnRcclxuICAgICAgICAgICAgLy8gdGhhdCkuXHJcbiAgICAgICAgICAgIGlmIChfaXNMb2NhbFN0b3JhZ2VOb3RTeW5jaHJvbml6ZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gSW4gc3VjaCBicm93c2VycywgaWYgaW5kZXhlZERCIGlzIG5vdCBzdXBwb3J0ZWQsIGFuIGlmcmFtZSBjYW5ub3QgYmVcclxuICAgICAgICAgICAgICAgIC8vIG5vdGlmaWVkIG9mIHRoZSBwb3B1cCBzaWduIGluIHJlc3VsdC5cclxuICAgICAgICAgICAgICAgIHJldHVybiBpc0luZGV4ZWREQkF2YWlsYWJsZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgLy8gbG9jYWxTdG9yYWdlIGlzIG5vdCBhdmFpbGFibGUgZnJvbSBhIHdvcmtlci4gVGVzdCBhdmFpbGFiaWxpdHkgb2ZcclxuICAgICAgICAvLyBpbmRleGVkREIuXHJcbiAgICAgICAgcmV0dXJuIF9pc1dvcmtlcigpICYmIGlzSW5kZXhlZERCQXZhaWxhYmxlKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuLyoqXHJcbiAqIEBwYXJhbSB7P09iamVjdD19IGdsb2JhbCBUaGUgb3B0aW9uYWwgZ2xvYmFsIHNjb3BlLlxyXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIGN1cnJlbnQgZW52aXJvbm1lbnQgaXMgYSB3b3JrZXIuXHJcbiAqL1xyXG5mdW5jdGlvbiBfaXNXb3JrZXIoKSB7XHJcbiAgICAvLyBXb3JrZXJHbG9iYWxTY29wZSBvbmx5IGRlZmluZWQgaW4gd29ya2VyIGVudmlyb25tZW50LlxyXG4gICAgcmV0dXJuICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgICdXb3JrZXJHbG9iYWxTY29wZScgaW4gZ2xvYmFsICYmXHJcbiAgICAgICAgJ2ltcG9ydFNjcmlwdHMnIGluIGdsb2JhbCk7XHJcbn1cclxuZnVuY3Rpb24gX2lzUG9wdXBSZWRpcmVjdFN1cHBvcnRlZCgpIHtcclxuICAgIHJldHVybiAoKF9pc0h0dHBPckh0dHBzKCkgfHxcclxuICAgICAgICBpc0Jyb3dzZXJFeHRlbnNpb24oKSB8fFxyXG4gICAgICAgIF9pc0FuZHJvaWRPcklvc0NvcmRvdmFTY2hlbWUoKSkgJiZcclxuICAgICAgICAvLyBSZWFjdCBOYXRpdmUgd2l0aCByZW1vdGUgZGVidWdnaW5nIHJlcG9ydHMgaXRzIGxvY2F0aW9uLnByb3RvY29sIGFzXHJcbiAgICAgICAgLy8gaHR0cC5cclxuICAgICAgICAhX2lzTmF0aXZlRW52aXJvbm1lbnQoKSAmJlxyXG4gICAgICAgIC8vIExvY2FsIHN0b3JhZ2UgaGFzIHRvIGJlIHN1cHBvcnRlZCBmb3IgYnJvd3NlciBwb3B1cCBhbmQgcmVkaXJlY3RcclxuICAgICAgICAvLyBvcGVyYXRpb25zIHRvIHdvcmsuXHJcbiAgICAgICAgX2lzV2ViU3RvcmFnZVN1cHBvcnRlZCgpICYmXHJcbiAgICAgICAgLy8gRE9NLCBwb3B1cHMgYW5kIHJlZGlyZWN0cyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoaW4gYSB3b3JrZXIuXHJcbiAgICAgICAgIV9pc1dvcmtlcigpKTtcclxufVxyXG4vKiogUXVpY2sgY2hlY2sgdGhhdCBpbmRpY2F0ZXMgdGhlIHBsYXRmb3JtICptYXkqIGJlIENvcmRvdmEgKi9cclxuZnVuY3Rpb24gX2lzTGlrZWx5Q29yZG92YSgpIHtcclxuICAgIHJldHVybiBfaXNBbmRyb2lkT3JJb3NDb3Jkb3ZhU2NoZW1lKCkgJiYgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJztcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfaXNDb3Jkb3ZhKCkge1xyXG4gICAgaWYgKCFfaXNMaWtlbHlDb3Jkb3ZhKCkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIFdlJ3ZlIHdhaXRlZCBsb25nIGVub3VnaDsgdGhlIHRlbGx0YWxlIENvcmRvdmEgZXZlbnQgZGlkbid0IGhhcHBlblxyXG4gICAgICAgICAgICByZXNvbHZlKGZhbHNlKTtcclxuICAgICAgICB9LCBDT1JET1ZBX09OREVWSUNFUkVBRFlfVElNRU9VVF9NUyk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZGV2aWNlcmVhZHknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xyXG4gICAgICAgICAgICByZXNvbHZlKHRydWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgUGVyc2lzdGVuY2UgPSB7XHJcbiAgICBMT0NBTDogJ2xvY2FsJyxcclxuICAgIE5PTkU6ICdub25lJyxcclxuICAgIFNFU1NJT046ICdzZXNzaW9uJ1xyXG59O1xyXG5jb25zdCBfYXNzZXJ0JDMgPSBleHAuX2Fzc2VydDtcclxuY29uc3QgUEVSU0lTVEVOQ0VfS0VZID0gJ3BlcnNpc3RlbmNlJztcclxuLyoqXHJcbiAqIFZhbGlkYXRlcyB0aGF0IGFuIGFyZ3VtZW50IGlzIGEgdmFsaWQgcGVyc2lzdGVuY2UgdmFsdWUuIElmIGFuIGludmFsaWQgdHlwZVxyXG4gKiBpcyBzcGVjaWZpZWQsIGFuIGVycm9yIGlzIHRocm93biBzeW5jaHJvbm91c2x5LlxyXG4gKi9cclxuZnVuY3Rpb24gX3ZhbGlkYXRlUGVyc2lzdGVuY2VBcmd1bWVudChhdXRoLCBwZXJzaXN0ZW5jZSkge1xyXG4gICAgX2Fzc2VydCQzKE9iamVjdC52YWx1ZXMoUGVyc2lzdGVuY2UpLmluY2x1ZGVzKHBlcnNpc3RlbmNlKSwgYXV0aCwgXCJpbnZhbGlkLXBlcnNpc3RlbmNlLXR5cGVcIiAvKiBJTlZBTElEX1BFUlNJU1RFTkNFICovKTtcclxuICAgIC8vIFZhbGlkYXRlIGlmIHRoZSBzcGVjaWZpZWQgdHlwZSBpcyBzdXBwb3J0ZWQgaW4gdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuXHJcbiAgICBpZiAoaXNSZWFjdE5hdGl2ZSgpKSB7XHJcbiAgICAgICAgLy8gVGhpcyBpcyBvbmx5IHN1cHBvcnRlZCBpbiBhIGJyb3dzZXIuXHJcbiAgICAgICAgX2Fzc2VydCQzKHBlcnNpc3RlbmNlICE9PSBQZXJzaXN0ZW5jZS5TRVNTSU9OLCBhdXRoLCBcInVuc3VwcG9ydGVkLXBlcnNpc3RlbmNlLXR5cGVcIiAvKiBVTlNVUFBPUlRFRF9QRVJTSVNURU5DRSAqLyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKGlzTm9kZSgpKSB7XHJcbiAgICAgICAgLy8gT25seSBub25lIGlzIHN1cHBvcnRlZCBpbiBOb2RlLmpzLlxyXG4gICAgICAgIF9hc3NlcnQkMyhwZXJzaXN0ZW5jZSA9PT0gUGVyc2lzdGVuY2UuTk9ORSwgYXV0aCwgXCJ1bnN1cHBvcnRlZC1wZXJzaXN0ZW5jZS10eXBlXCIgLyogVU5TVVBQT1JURURfUEVSU0lTVEVOQ0UgKi8pO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmIChfaXNXb3JrZXIoKSkge1xyXG4gICAgICAgIC8vIEluIGEgd29ya2VyIGVudmlyb25tZW50LCBlaXRoZXIgTE9DQUwgb3IgTk9ORSBhcmUgc3VwcG9ydGVkLlxyXG4gICAgICAgIC8vIElmIGluZGV4ZWREQiBub3Qgc3VwcG9ydGVkIGFuZCBMT0NBTCBwcm92aWRlZCwgdGhyb3cgYW4gZXJyb3JcclxuICAgICAgICBfYXNzZXJ0JDMocGVyc2lzdGVuY2UgPT09IFBlcnNpc3RlbmNlLk5PTkUgfHxcclxuICAgICAgICAgICAgKHBlcnNpc3RlbmNlID09PSBQZXJzaXN0ZW5jZS5MT0NBTCAmJiBpc0luZGV4ZWREQkF2YWlsYWJsZSgpKSwgYXV0aCwgXCJ1bnN1cHBvcnRlZC1wZXJzaXN0ZW5jZS10eXBlXCIgLyogVU5TVVBQT1JURURfUEVSU0lTVEVOQ0UgKi8pO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIC8vIFRoaXMgaXMgcmVzdHJpY3RlZCBieSB3aGF0IHRoZSBicm93c2VyIHN1cHBvcnRzLlxyXG4gICAgX2Fzc2VydCQzKHBlcnNpc3RlbmNlID09PSBQZXJzaXN0ZW5jZS5OT05FIHx8IF9pc1dlYlN0b3JhZ2VTdXBwb3J0ZWQoKSwgYXV0aCwgXCJ1bnN1cHBvcnRlZC1wZXJzaXN0ZW5jZS10eXBlXCIgLyogVU5TVVBQT1JURURfUEVSU0lTVEVOQ0UgKi8pO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9zYXZlUGVyc2lzdGVuY2VGb3JSZWRpcmVjdChhdXRoKSB7XHJcbiAgICBhd2FpdCBhdXRoLl9pbml0aWFsaXphdGlvblByb21pc2U7XHJcbiAgICBjb25zdCB3aW4gPSBnZXRTZWxmV2luZG93KCk7XHJcbiAgICBjb25zdCBrZXkgPSBleHAuX3BlcnNpc3RlbmNlS2V5TmFtZShQRVJTSVNURU5DRV9LRVksIGF1dGguY29uZmlnLmFwaUtleSwgYXV0aC5uYW1lKTtcclxuICAgIGlmICh3aW4gPT09IG51bGwgfHwgd2luID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3aW4uc2Vzc2lvblN0b3JhZ2UpIHtcclxuICAgICAgICB3aW4uc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShrZXksIGF1dGguX2dldFBlcnNpc3RlbmNlKCkpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIF9nZXRQZXJzaXN0ZW5jZXNGcm9tUmVkaXJlY3QoYXBpS2V5LCBhcHBOYW1lKSB7XHJcbiAgICBjb25zdCB3aW4gPSBnZXRTZWxmV2luZG93KCk7XHJcbiAgICBpZiAoISh3aW4gPT09IG51bGwgfHwgd2luID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3aW4uc2Vzc2lvblN0b3JhZ2UpKSB7XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG4gICAgY29uc3Qga2V5ID0gZXhwLl9wZXJzaXN0ZW5jZUtleU5hbWUoUEVSU0lTVEVOQ0VfS0VZLCBhcGlLZXksIGFwcE5hbWUpO1xyXG4gICAgY29uc3QgcGVyc2lzdGVuY2UgPSB3aW4uc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xyXG4gICAgc3dpdGNoIChwZXJzaXN0ZW5jZSkge1xyXG4gICAgICAgIGNhc2UgUGVyc2lzdGVuY2UuTk9ORTpcclxuICAgICAgICAgICAgcmV0dXJuIFtleHAuaW5NZW1vcnlQZXJzaXN0ZW5jZV07XHJcbiAgICAgICAgY2FzZSBQZXJzaXN0ZW5jZS5MT0NBTDpcclxuICAgICAgICAgICAgcmV0dXJuIFtleHAuaW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZSwgZXhwLmJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2VdO1xyXG4gICAgICAgIGNhc2UgUGVyc2lzdGVuY2UuU0VTU0lPTjpcclxuICAgICAgICAgICAgcmV0dXJuIFtleHAuYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZV07XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGdldFNlbGZXaW5kb3coKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiBudWxsO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IF9hc3NlcnQkMiA9IGV4cC5fYXNzZXJ0O1xyXG4vKiogUGxhdGZvcm0tYWdub3N0aWMgcG9wdXAtcmVkaXJlY3QgcmVzb2x2ZXIgKi9cclxuY2xhc3MgQ29tcGF0UG9wdXBSZWRpcmVjdFJlc29sdmVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIC8vIENyZWF0ZSBib3RoIHJlc29sdmVycyBmb3IgZHluYW1pYyByZXNvbHV0aW9uIGxhdGVyXHJcbiAgICAgICAgdGhpcy5icm93c2VyUmVzb2x2ZXIgPSBleHAuX2dldEluc3RhbmNlKGV4cC5icm93c2VyUG9wdXBSZWRpcmVjdFJlc29sdmVyKTtcclxuICAgICAgICB0aGlzLmNvcmRvdmFSZXNvbHZlciA9IGV4cC5fZ2V0SW5zdGFuY2UoZXhwLmNvcmRvdmFQb3B1cFJlZGlyZWN0UmVzb2x2ZXIpO1xyXG4gICAgICAgIC8vIFRoZSBhY3R1YWwgcmVzb2x2ZXIgaW4gdXNlOiBlaXRoZXIgYnJvd3NlclJlc29sdmVyIG9yIGNvcmRvdmFSZXNvbHZlci5cclxuICAgICAgICB0aGlzLnVuZGVybHlpbmdSZXNvbHZlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fcmVkaXJlY3RQZXJzaXN0ZW5jZSA9IGV4cC5icm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlO1xyXG4gICAgICAgIHRoaXMuX2NvbXBsZXRlUmVkaXJlY3RGbiA9IGV4cC5fZ2V0UmVkaXJlY3RSZXN1bHQ7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfaW5pdGlhbGl6ZShhdXRoKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zZWxlY3RVbmRlcmx5aW5nUmVzb2x2ZXIoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5hc3NlcnRlZFVuZGVybHlpbmdSZXNvbHZlci5faW5pdGlhbGl6ZShhdXRoKTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9vcGVuUG9wdXAoYXV0aCwgcHJvdmlkZXIsIGF1dGhUeXBlLCBldmVudElkKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zZWxlY3RVbmRlcmx5aW5nUmVzb2x2ZXIoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5hc3NlcnRlZFVuZGVybHlpbmdSZXNvbHZlci5fb3BlblBvcHVwKGF1dGgsIHByb3ZpZGVyLCBhdXRoVHlwZSwgZXZlbnRJZCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfb3BlblJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyLCBhdXRoVHlwZSwgZXZlbnRJZCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2VsZWN0VW5kZXJseWluZ1Jlc29sdmVyKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXNzZXJ0ZWRVbmRlcmx5aW5nUmVzb2x2ZXIuX29wZW5SZWRpcmVjdChhdXRoLCBwcm92aWRlciwgYXV0aFR5cGUsIGV2ZW50SWQpO1xyXG4gICAgfVxyXG4gICAgX2lzSWZyYW1lV2ViU3RvcmFnZVN1cHBvcnRlZChhdXRoLCBjYikge1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0ZWRVbmRlcmx5aW5nUmVzb2x2ZXIuX2lzSWZyYW1lV2ViU3RvcmFnZVN1cHBvcnRlZChhdXRoLCBjYik7XHJcbiAgICB9XHJcbiAgICBfb3JpZ2luVmFsaWRhdGlvbihhdXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXNzZXJ0ZWRVbmRlcmx5aW5nUmVzb2x2ZXIuX29yaWdpblZhbGlkYXRpb24oYXV0aCk7XHJcbiAgICB9XHJcbiAgICBnZXQgX3Nob3VsZEluaXRQcm9hY3RpdmVseSgpIHtcclxuICAgICAgICByZXR1cm4gX2lzTGlrZWx5Q29yZG92YSgpIHx8IHRoaXMuYnJvd3NlclJlc29sdmVyLl9zaG91bGRJbml0UHJvYWN0aXZlbHk7XHJcbiAgICB9XHJcbiAgICBnZXQgYXNzZXJ0ZWRVbmRlcmx5aW5nUmVzb2x2ZXIoKSB7XHJcbiAgICAgICAgX2Fzc2VydCQyKHRoaXMudW5kZXJseWluZ1Jlc29sdmVyLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmdSZXNvbHZlcjtcclxuICAgIH1cclxuICAgIGFzeW5jIHNlbGVjdFVuZGVybHlpbmdSZXNvbHZlcigpIHtcclxuICAgICAgICBpZiAodGhpcy51bmRlcmx5aW5nUmVzb2x2ZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBXZSBoYXZlbid0IHlldCBkZXRlcm1pbmVkIHdoZXRoZXIgb3Igbm90IHdlJ3JlIGluIENvcmRvdmE7IGdvIGFoZWFkXHJcbiAgICAgICAgLy8gYW5kIGRldGVybWluZSB0aGF0IHN0YXRlIG5vdy5cclxuICAgICAgICBjb25zdCBpc0NvcmRvdmEgPSBhd2FpdCBfaXNDb3Jkb3ZhKCk7XHJcbiAgICAgICAgdGhpcy51bmRlcmx5aW5nUmVzb2x2ZXIgPSBpc0NvcmRvdmFcclxuICAgICAgICAgICAgPyB0aGlzLmNvcmRvdmFSZXNvbHZlclxyXG4gICAgICAgICAgICA6IHRoaXMuYnJvd3NlclJlc29sdmVyO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIHVud3JhcChvYmplY3QpIHtcclxuICAgIHJldHVybiBvYmplY3QudW53cmFwKCk7XHJcbn1cclxuZnVuY3Rpb24gd3JhcHBlZChvYmplY3QpIHtcclxuICAgIHJldHVybiBvYmplY3Qud3JhcHBlZCgpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWRlbnRpYWxGcm9tUmVzcG9uc2UodXNlckNyZWRlbnRpYWwpIHtcclxuICAgIHJldHVybiBjcmVkZW50aWFsRnJvbU9iamVjdCh1c2VyQ3JlZGVudGlhbCk7XHJcbn1cclxuZnVuY3Rpb24gYXR0YWNoRXh0cmFFcnJvckZpZWxkcyhhdXRoLCBlKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICAvLyBUaGUgcmVzcG9uc2UgY29udGFpbnMgYWxsIGZpZWxkcyBmcm9tIHRoZSBzZXJ2ZXIgd2hpY2ggbWF5IG9yIG1heSBub3RcclxuICAgIC8vIGFjdHVhbGx5IG1hdGNoIHRoZSB1bmRlcmx5aW5nIHR5cGVcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gKF9hID0gZS5jdXN0b21EYXRhKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuX3Rva2VuUmVzcG9uc2U7XHJcbiAgICBpZiAoZS5jb2RlID09PSAnYXV0aC9tdWx0aS1mYWN0b3ItYXV0aC1yZXF1aXJlZCcpIHtcclxuICAgICAgICBjb25zdCBtZmFFcnIgPSBlO1xyXG4gICAgICAgIG1mYUVyci5yZXNvbHZlciA9IG5ldyBNdWx0aUZhY3RvclJlc29sdmVyKGF1dGgsIGV4cC5nZXRNdWx0aUZhY3RvclJlc29sdmVyKGF1dGgsIGUpKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgY29uc3QgY3JlZGVudGlhbCA9IGNyZWRlbnRpYWxGcm9tT2JqZWN0KGUpO1xyXG4gICAgICAgIGNvbnN0IGNyZWRFcnIgPSBlO1xyXG4gICAgICAgIGlmIChjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgICAgIGNyZWRFcnIuY3JlZGVudGlhbCA9IGNyZWRlbnRpYWw7XHJcbiAgICAgICAgICAgIGNyZWRFcnIudGVuYW50SWQgPSByZXNwb25zZS50ZW5hbnRJZCB8fCB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIGNyZWRFcnIuZW1haWwgPSByZXNwb25zZS5lbWFpbCB8fCB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIGNyZWRFcnIucGhvbmVOdW1iZXIgPSByZXNwb25zZS5waG9uZU51bWJlciB8fCB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGNyZWRlbnRpYWxGcm9tT2JqZWN0KG9iamVjdCkge1xyXG4gICAgY29uc3QgeyBfdG9rZW5SZXNwb25zZSB9ID0gKG9iamVjdCBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IgPyBvYmplY3QuY3VzdG9tRGF0YSA6IG9iamVjdCk7XHJcbiAgICBpZiAoIV90b2tlblJlc3BvbnNlKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICAvLyBIYW5kbGUgcGhvbmUgQXV0aCBjcmVkZW50aWFsIHJlc3BvbnNlcywgYXMgdGhleSBoYXZlIGEgZGlmZmVyZW50IGZvcm1hdFxyXG4gICAgLy8gZnJvbSBvdGhlciBiYWNrZW5kIHJlc3BvbnNlcyAoaS5lLiBubyBwcm92aWRlcklkKS4gVGhpcyBpcyBhbHNvIG9ubHkgdGhlXHJcbiAgICAvLyBjYXNlIGZvciB1c2VyIGNyZWRlbnRpYWxzIChkb2VzIG5vdCB3b3JrIGZvciBlcnJvcnMpLlxyXG4gICAgaWYgKCEob2JqZWN0IGluc3RhbmNlb2YgRmlyZWJhc2VFcnJvcikpIHtcclxuICAgICAgICBpZiAoJ3RlbXBvcmFyeVByb29mJyBpbiBfdG9rZW5SZXNwb25zZSAmJiAncGhvbmVOdW1iZXInIGluIF90b2tlblJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBleHAuUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQob2JqZWN0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBwcm92aWRlcklkID0gX3Rva2VuUmVzcG9uc2UucHJvdmlkZXJJZDtcclxuICAgIC8vIEVtYWlsIGFuZCBwYXNzd29yZCBpcyBub3Qgc3VwcG9ydGVkIGFzIHRoZXJlIGlzIG5vIHNpdHVhdGlvbiB3aGVyZSB0aGVcclxuICAgIC8vIHNlcnZlciB3b3VsZCByZXR1cm4gdGhlIHBhc3N3b3JkIHRvIHRoZSBjbGllbnQuXHJcbiAgICBpZiAoIXByb3ZpZGVySWQgfHwgcHJvdmlkZXJJZCA9PT0gZXhwLlByb3ZpZGVySWQuUEFTU1dPUkQpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGxldCBwcm92aWRlcjtcclxuICAgIHN3aXRjaCAocHJvdmlkZXJJZCkge1xyXG4gICAgICAgIGNhc2UgZXhwLlByb3ZpZGVySWQuR09PR0xFOlxyXG4gICAgICAgICAgICBwcm92aWRlciA9IGV4cC5Hb29nbGVBdXRoUHJvdmlkZXI7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgZXhwLlByb3ZpZGVySWQuRkFDRUJPT0s6XHJcbiAgICAgICAgICAgIHByb3ZpZGVyID0gZXhwLkZhY2Vib29rQXV0aFByb3ZpZGVyO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIGV4cC5Qcm92aWRlcklkLkdJVEhVQjpcclxuICAgICAgICAgICAgcHJvdmlkZXIgPSBleHAuR2l0aHViQXV0aFByb3ZpZGVyO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIGV4cC5Qcm92aWRlcklkLlRXSVRURVI6XHJcbiAgICAgICAgICAgIHByb3ZpZGVyID0gZXhwLlR3aXR0ZXJBdXRoUHJvdmlkZXI7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIGNvbnN0IHsgb2F1dGhJZFRva2VuLCBvYXV0aEFjY2Vzc1Rva2VuLCBvYXV0aFRva2VuU2VjcmV0LCBwZW5kaW5nVG9rZW4sIG5vbmNlIH0gPSBfdG9rZW5SZXNwb25zZTtcclxuICAgICAgICAgICAgaWYgKCFvYXV0aEFjY2Vzc1Rva2VuICYmXHJcbiAgICAgICAgICAgICAgICAhb2F1dGhUb2tlblNlY3JldCAmJlxyXG4gICAgICAgICAgICAgICAgIW9hdXRoSWRUb2tlbiAmJlxyXG4gICAgICAgICAgICAgICAgIXBlbmRpbmdUb2tlbikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gVE9ETyhhdm9sa292aSk6IHVuY29tbWVudCB0aGlzIGFuZCBnZXQgaXQgd29ya2luZyB3aXRoIFNBTUwgJiBPSURDXHJcbiAgICAgICAgICAgIGlmIChwZW5kaW5nVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcm92aWRlcklkLnN0YXJ0c1dpdGgoJ3NhbWwuJykpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXhwLlNBTUxBdXRoQ3JlZGVudGlhbC5fY3JlYXRlKHByb3ZpZGVySWQsIHBlbmRpbmdUb2tlbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBPSURDIGFuZCBub24tZGVmYXVsdCBwcm92aWRlcnMgZXhjbHVkaW5nIFR3aXR0ZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4cC5PQXV0aENyZWRlbnRpYWwuX2Zyb21QYXJhbXMoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduSW5NZXRob2Q6IHByb3ZpZGVySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWRUb2tlbjogb2F1dGhJZFRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbjogb2F1dGhBY2Nlc3NUb2tlblxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgZXhwLk9BdXRoUHJvdmlkZXIocHJvdmlkZXJJZCkuY3JlZGVudGlhbCh7XHJcbiAgICAgICAgICAgICAgICBpZFRva2VuOiBvYXV0aElkVG9rZW4sXHJcbiAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbjogb2F1dGhBY2Nlc3NUb2tlbixcclxuICAgICAgICAgICAgICAgIHJhd05vbmNlOiBub25jZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBvYmplY3QgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yXHJcbiAgICAgICAgPyBwcm92aWRlci5jcmVkZW50aWFsRnJvbUVycm9yKG9iamVjdClcclxuICAgICAgICA6IHByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KG9iamVjdCk7XHJcbn1cclxuZnVuY3Rpb24gY29udmVydENyZWRlbnRpYWwoYXV0aCwgY3JlZGVudGlhbFByb21pc2UpIHtcclxuICAgIHJldHVybiBjcmVkZW50aWFsUHJvbWlzZVxyXG4gICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IpIHtcclxuICAgICAgICAgICAgYXR0YWNoRXh0cmFFcnJvckZpZWxkcyhhdXRoLCBlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgZTtcclxuICAgIH0pXHJcbiAgICAgICAgLnRoZW4oY3JlZGVudGlhbCA9PiB7XHJcbiAgICAgICAgY29uc3Qgb3BlcmF0aW9uVHlwZSA9IGNyZWRlbnRpYWwub3BlcmF0aW9uVHlwZTtcclxuICAgICAgICBjb25zdCB1c2VyID0gY3JlZGVudGlhbC51c2VyO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG9wZXJhdGlvblR5cGUsXHJcbiAgICAgICAgICAgIGNyZWRlbnRpYWw6IGNyZWRlbnRpYWxGcm9tUmVzcG9uc2UoY3JlZGVudGlhbCksXHJcbiAgICAgICAgICAgIGFkZGl0aW9uYWxVc2VySW5mbzogZXhwLmdldEFkZGl0aW9uYWxVc2VySW5mbyhjcmVkZW50aWFsKSxcclxuICAgICAgICAgICAgdXNlcjogVXNlci5nZXRPckNyZWF0ZSh1c2VyKVxyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBjb252ZXJ0Q29uZmlybWF0aW9uUmVzdWx0KGF1dGgsIGNvbmZpcm1hdGlvblJlc3VsdFByb21pc2UpIHtcclxuICAgIGNvbnN0IGNvbmZpcm1hdGlvblJlc3VsdEV4cCA9IGF3YWl0IGNvbmZpcm1hdGlvblJlc3VsdFByb21pc2U7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHZlcmlmaWNhdGlvbklkOiBjb25maXJtYXRpb25SZXN1bHRFeHAudmVyaWZpY2F0aW9uSWQsXHJcbiAgICAgICAgY29uZmlybTogKHZlcmlmaWNhdGlvbkNvZGUpID0+IGNvbnZlcnRDcmVkZW50aWFsKGF1dGgsIGNvbmZpcm1hdGlvblJlc3VsdEV4cC5jb25maXJtKHZlcmlmaWNhdGlvbkNvZGUpKVxyXG4gICAgfTtcclxufVxyXG5jbGFzcyBNdWx0aUZhY3RvclJlc29sdmVyIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgsIHJlc29sdmVyKSB7XHJcbiAgICAgICAgdGhpcy5yZXNvbHZlciA9IHJlc29sdmVyO1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IHdyYXBwZWQoYXV0aCk7XHJcbiAgICB9XHJcbiAgICBnZXQgc2Vzc2lvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZXNvbHZlci5zZXNzaW9uO1xyXG4gICAgfVxyXG4gICAgZ2V0IGhpbnRzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlc29sdmVyLmhpbnRzO1xyXG4gICAgfVxyXG4gICAgcmVzb2x2ZVNpZ25Jbihhc3NlcnRpb24pIHtcclxuICAgICAgICByZXR1cm4gY29udmVydENyZWRlbnRpYWwodW53cmFwKHRoaXMuYXV0aCksIHRoaXMucmVzb2x2ZXIucmVzb2x2ZVNpZ25Jbihhc3NlcnRpb24pKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBVc2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKF9kZWxlZ2F0ZSkge1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlID0gX2RlbGVnYXRlO1xyXG4gICAgICAgIHRoaXMubXVsdGlGYWN0b3IgPSBleHAubXVsdGlGYWN0b3IoX2RlbGVnYXRlKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBnZXRPckNyZWF0ZSh1c2VyKSB7XHJcbiAgICAgICAgaWYgKCFVc2VyLlVTRVJfTUFQLmhhcyh1c2VyKSkge1xyXG4gICAgICAgICAgICBVc2VyLlVTRVJfTUFQLnNldCh1c2VyLCBuZXcgVXNlcih1c2VyKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBVc2VyLlVTRVJfTUFQLmdldCh1c2VyKTtcclxuICAgIH1cclxuICAgIGRlbGV0ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuZGVsZXRlKCk7XHJcbiAgICB9XHJcbiAgICByZWxvYWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnJlbG9hZCgpO1xyXG4gICAgfVxyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS50b0pTT04oKTtcclxuICAgIH1cclxuICAgIGdldElkVG9rZW5SZXN1bHQoZm9yY2VSZWZyZXNoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmdldElkVG9rZW5SZXN1bHQoZm9yY2VSZWZyZXNoKTtcclxuICAgIH1cclxuICAgIGdldElkVG9rZW4oZm9yY2VSZWZyZXNoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmdldElkVG9rZW4oZm9yY2VSZWZyZXNoKTtcclxuICAgIH1cclxuICAgIGxpbmtBbmRSZXRyaWV2ZURhdGFXaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGlua1dpdGhDcmVkZW50aWFsKGNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgbGlua1dpdGhDcmVkZW50aWFsKGNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gY29udmVydENyZWRlbnRpYWwodGhpcy5hdXRoLCBleHAubGlua1dpdGhDcmVkZW50aWFsKHRoaXMuX2RlbGVnYXRlLCBjcmVkZW50aWFsKSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBsaW5rV2l0aFBob25lTnVtYmVyKHBob25lTnVtYmVyLCBhcHBsaWNhdGlvblZlcmlmaWVyKSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnZlcnRDb25maXJtYXRpb25SZXN1bHQodGhpcy5hdXRoLCBleHAubGlua1dpdGhQaG9uZU51bWJlcih0aGlzLl9kZWxlZ2F0ZSwgcGhvbmVOdW1iZXIsIGFwcGxpY2F0aW9uVmVyaWZpZXIpKTtcclxuICAgIH1cclxuICAgIGFzeW5jIGxpbmtXaXRoUG9wdXAocHJvdmlkZXIpIHtcclxuICAgICAgICByZXR1cm4gY29udmVydENyZWRlbnRpYWwodGhpcy5hdXRoLCBleHAubGlua1dpdGhQb3B1cCh0aGlzLl9kZWxlZ2F0ZSwgcHJvdmlkZXIsIENvbXBhdFBvcHVwUmVkaXJlY3RSZXNvbHZlcikpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgbGlua1dpdGhSZWRpcmVjdChwcm92aWRlcikge1xyXG4gICAgICAgIGF3YWl0IF9zYXZlUGVyc2lzdGVuY2VGb3JSZWRpcmVjdChleHAuX2Nhc3RBdXRoKHRoaXMuYXV0aCkpO1xyXG4gICAgICAgIHJldHVybiBleHAubGlua1dpdGhSZWRpcmVjdCh0aGlzLl9kZWxlZ2F0ZSwgcHJvdmlkZXIsIENvbXBhdFBvcHVwUmVkaXJlY3RSZXNvbHZlcik7XHJcbiAgICB9XHJcbiAgICByZWF1dGhlbnRpY2F0ZUFuZFJldHJpZXZlRGF0YVdpdGhDcmVkZW50aWFsKGNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZWF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFsKGNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgcmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnZlcnRDcmVkZW50aWFsKHRoaXMuYXV0aCwgZXhwLnJlYXV0aGVudGljYXRlV2l0aENyZWRlbnRpYWwodGhpcy5fZGVsZWdhdGUsIGNyZWRlbnRpYWwpKTtcclxuICAgIH1cclxuICAgIHJlYXV0aGVudGljYXRlV2l0aFBob25lTnVtYmVyKHBob25lTnVtYmVyLCBhcHBsaWNhdGlvblZlcmlmaWVyKSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnZlcnRDb25maXJtYXRpb25SZXN1bHQodGhpcy5hdXRoLCBleHAucmVhdXRoZW50aWNhdGVXaXRoUGhvbmVOdW1iZXIodGhpcy5fZGVsZWdhdGUsIHBob25lTnVtYmVyLCBhcHBsaWNhdGlvblZlcmlmaWVyKSk7XHJcbiAgICB9XHJcbiAgICByZWF1dGhlbnRpY2F0ZVdpdGhQb3B1cChwcm92aWRlcikge1xyXG4gICAgICAgIHJldHVybiBjb252ZXJ0Q3JlZGVudGlhbCh0aGlzLmF1dGgsIGV4cC5yZWF1dGhlbnRpY2F0ZVdpdGhQb3B1cCh0aGlzLl9kZWxlZ2F0ZSwgcHJvdmlkZXIsIENvbXBhdFBvcHVwUmVkaXJlY3RSZXNvbHZlcikpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgcmVhdXRoZW50aWNhdGVXaXRoUmVkaXJlY3QocHJvdmlkZXIpIHtcclxuICAgICAgICBhd2FpdCBfc2F2ZVBlcnNpc3RlbmNlRm9yUmVkaXJlY3QoZXhwLl9jYXN0QXV0aCh0aGlzLmF1dGgpKTtcclxuICAgICAgICByZXR1cm4gZXhwLnJlYXV0aGVudGljYXRlV2l0aFJlZGlyZWN0KHRoaXMuX2RlbGVnYXRlLCBwcm92aWRlciwgQ29tcGF0UG9wdXBSZWRpcmVjdFJlc29sdmVyKTtcclxuICAgIH1cclxuICAgIHNlbmRFbWFpbFZlcmlmaWNhdGlvbihhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgICAgICByZXR1cm4gZXhwLnNlbmRFbWFpbFZlcmlmaWNhdGlvbih0aGlzLl9kZWxlZ2F0ZSwgYWN0aW9uQ29kZVNldHRpbmdzKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHVubGluayhwcm92aWRlcklkKSB7XHJcbiAgICAgICAgYXdhaXQgZXhwLnVubGluayh0aGlzLl9kZWxlZ2F0ZSwgcHJvdmlkZXJJZCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICB1cGRhdGVFbWFpbChuZXdFbWFpbCkge1xyXG4gICAgICAgIHJldHVybiBleHAudXBkYXRlRW1haWwodGhpcy5fZGVsZWdhdGUsIG5ld0VtYWlsKTtcclxuICAgIH1cclxuICAgIHVwZGF0ZVBhc3N3b3JkKG5ld1Bhc3N3b3JkKSB7XHJcbiAgICAgICAgcmV0dXJuIGV4cC51cGRhdGVQYXNzd29yZCh0aGlzLl9kZWxlZ2F0ZSwgbmV3UGFzc3dvcmQpO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlUGhvbmVOdW1iZXIocGhvbmVDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIGV4cC51cGRhdGVQaG9uZU51bWJlcih0aGlzLl9kZWxlZ2F0ZSwgcGhvbmVDcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIHVwZGF0ZVByb2ZpbGUocHJvZmlsZSkge1xyXG4gICAgICAgIHJldHVybiBleHAudXBkYXRlUHJvZmlsZSh0aGlzLl9kZWxlZ2F0ZSwgcHJvZmlsZSk7XHJcbiAgICB9XHJcbiAgICB2ZXJpZnlCZWZvcmVVcGRhdGVFbWFpbChuZXdFbWFpbCwgYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICAgICAgcmV0dXJuIGV4cC52ZXJpZnlCZWZvcmVVcGRhdGVFbWFpbCh0aGlzLl9kZWxlZ2F0ZSwgbmV3RW1haWwsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAgICB9XHJcbiAgICBnZXQgZW1haWxWZXJpZmllZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuZW1haWxWZXJpZmllZDtcclxuICAgIH1cclxuICAgIGdldCBpc0Fub255bW91cygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuaXNBbm9ueW1vdXM7XHJcbiAgICB9XHJcbiAgICBnZXQgbWV0YWRhdGEoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLm1ldGFkYXRhO1xyXG4gICAgfVxyXG4gICAgZ2V0IHBob25lTnVtYmVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5waG9uZU51bWJlcjtcclxuICAgIH1cclxuICAgIGdldCBwcm92aWRlckRhdGEoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnByb3ZpZGVyRGF0YTtcclxuICAgIH1cclxuICAgIGdldCByZWZyZXNoVG9rZW4oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnJlZnJlc2hUb2tlbjtcclxuICAgIH1cclxuICAgIGdldCB0ZW5hbnRJZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUudGVuYW50SWQ7XHJcbiAgICB9XHJcbiAgICBnZXQgZGlzcGxheU5hbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmRpc3BsYXlOYW1lO1xyXG4gICAgfVxyXG4gICAgZ2V0IGVtYWlsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5lbWFpbDtcclxuICAgIH1cclxuICAgIGdldCBwaG90b1VSTCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUucGhvdG9VUkw7XHJcbiAgICB9XHJcbiAgICBnZXQgcHJvdmlkZXJJZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUucHJvdmlkZXJJZDtcclxuICAgIH1cclxuICAgIGdldCB1aWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnVpZDtcclxuICAgIH1cclxuICAgIGdldCBhdXRoKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5hdXRoO1xyXG4gICAgfVxyXG59XHJcbi8vIE1haW50YWluIGEgbWFwIHNvIHRoYXQgdGhlcmUncyBhbHdheXMgYSAxOjEgbWFwcGluZyBiZXR3ZWVuIG5ldyBVc2VyIGFuZFxyXG4vLyBsZWdhY3kgY29tcGF0IHVzZXJzXHJcblVzZXIuVVNFUl9NQVAgPSBuZXcgV2Vha01hcCgpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBfYXNzZXJ0JDEgPSBleHAuX2Fzc2VydDtcclxuY2xhc3MgQXV0aCB7XHJcbiAgICBjb25zdHJ1Y3RvcihhcHAsIHByb3ZpZGVyKSB7XHJcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XHJcbiAgICAgICAgaWYgKHByb3ZpZGVyLmlzSW5pdGlhbGl6ZWQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IHByb3ZpZGVyLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmxpbmtVbmRlcmx5aW5nQXV0aCgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgYXBpS2V5IH0gPSBhcHAub3B0aW9ucztcclxuICAgICAgICAvLyBUT0RPOiBwbGF0Zm9ybSBuZWVkcyB0byBiZSBkZXRlcm1pbmVkIHVzaW5nIGhldXJpc3RpY3NcclxuICAgICAgICBfYXNzZXJ0JDEoYXBpS2V5LCBcImludmFsaWQtYXBpLWtleVwiIC8qIElOVkFMSURfQVBJX0tFWSAqLywge1xyXG4gICAgICAgICAgICBhcHBOYW1lOiBhcHAubmFtZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGxldCBwZXJzaXN0ZW5jZXMgPSBbZXhwLmluTWVtb3J5UGVyc2lzdGVuY2VdO1xyXG4gICAgICAgIC8vIE9ubHkgZGVhbCB3aXRoIHBlcnNpc3RlbmNlcyBpbiB3ZWIgZW52aXJvbm1lbnRzXHJcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIC8vIE5vdGUgdGhpcyBpcyBzbGlnaHRseSBkaWZmZXJlbnQgYmVoYXZpb3I6IGluIHRoaXMgY2FzZSwgdGhlIHN0b3JlZFxyXG4gICAgICAgICAgICAvLyBwZXJzaXN0ZW5jZSBpcyBjaGVja2VkICpmaXJzdCogcmF0aGVyIHRoYW4gbGFzdC4gVGhpcyBpcyBiZWNhdXNlIHdlIHdhbnRcclxuICAgICAgICAgICAgLy8gdG8gcHJlZmVyIHN0b3JlZCBwZXJzaXN0ZW5jZSB0eXBlIGluIHRoZSBoaWVyYXJjaHkuXHJcbiAgICAgICAgICAgIHBlcnNpc3RlbmNlcyA9IF9nZXRQZXJzaXN0ZW5jZXNGcm9tUmVkaXJlY3QoYXBpS2V5LCBhcHAubmFtZSk7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgcGVyc2lzdGVuY2Ugb2YgW1xyXG4gICAgICAgICAgICAgICAgZXhwLmluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2UsXHJcbiAgICAgICAgICAgICAgICBleHAuYnJvd3NlckxvY2FsUGVyc2lzdGVuY2UsXHJcbiAgICAgICAgICAgICAgICBleHAuYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZVxyXG4gICAgICAgICAgICBdKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXBlcnNpc3RlbmNlcy5pbmNsdWRlcyhwZXJzaXN0ZW5jZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBwZXJzaXN0ZW5jZXMucHVzaChwZXJzaXN0ZW5jZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVE9ETzogcGxhdGZvcm0gbmVlZHMgdG8gYmUgZGV0ZXJtaW5lZCB1c2luZyBoZXVyaXN0aWNzXHJcbiAgICAgICAgX2Fzc2VydCQxKGFwaUtleSwgXCJpbnZhbGlkLWFwaS1rZXlcIiAvKiBJTlZBTElEX0FQSV9LRVkgKi8sIHtcclxuICAgICAgICAgICAgYXBwTmFtZTogYXBwLm5hbWVcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBPbmx5IHVzZSBhIHBvcHVwL3JlZGlyZWN0IHJlc29sdmVyIGluIGJyb3dzZXIgZW52aXJvbm1lbnRzXHJcbiAgICAgICAgY29uc3QgcmVzb2x2ZXIgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IENvbXBhdFBvcHVwUmVkaXJlY3RSZXNvbHZlciA6IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IHByb3ZpZGVyLmluaXRpYWxpemUoe1xyXG4gICAgICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICBwZXJzaXN0ZW5jZTogcGVyc2lzdGVuY2VzLFxyXG4gICAgICAgICAgICAgICAgcG9wdXBSZWRpcmVjdFJlc29sdmVyOiByZXNvbHZlclxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUuX3VwZGF0ZUVycm9yTWFwKGV4cC5kZWJ1Z0Vycm9yTWFwKTtcclxuICAgICAgICB0aGlzLmxpbmtVbmRlcmx5aW5nQXV0aCgpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGVtdWxhdG9yQ29uZmlnKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5lbXVsYXRvckNvbmZpZztcclxuICAgIH1cclxuICAgIGdldCBjdXJyZW50VXNlcigpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2RlbGVnYXRlLmN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gVXNlci5nZXRPckNyZWF0ZSh0aGlzLl9kZWxlZ2F0ZS5jdXJyZW50VXNlcik7XHJcbiAgICB9XHJcbiAgICBnZXQgbGFuZ3VhZ2VDb2RlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5sYW5ndWFnZUNvZGU7XHJcbiAgICB9XHJcbiAgICBzZXQgbGFuZ3VhZ2VDb2RlKGxhbmd1YWdlQ29kZSkge1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlLmxhbmd1YWdlQ29kZSA9IGxhbmd1YWdlQ29kZTtcclxuICAgIH1cclxuICAgIGdldCBzZXR0aW5ncygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuc2V0dGluZ3M7XHJcbiAgICB9XHJcbiAgICBnZXQgdGVuYW50SWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnRlbmFudElkO1xyXG4gICAgfVxyXG4gICAgc2V0IHRlbmFudElkKHRpZCkge1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlLnRlbmFudElkID0gdGlkO1xyXG4gICAgfVxyXG4gICAgdXNlRGV2aWNlTGFuZ3VhZ2UoKSB7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUudXNlRGV2aWNlTGFuZ3VhZ2UoKTtcclxuICAgIH1cclxuICAgIHNpZ25PdXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnNpZ25PdXQoKTtcclxuICAgIH1cclxuICAgIHVzZUVtdWxhdG9yKHVybCwgb3B0aW9ucykge1xyXG4gICAgICAgIGV4cC5jb25uZWN0QXV0aEVtdWxhdG9yKHRoaXMuX2RlbGVnYXRlLCB1cmwsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG4gICAgYXBwbHlBY3Rpb25Db2RlKGNvZGUpIHtcclxuICAgICAgICByZXR1cm4gZXhwLmFwcGx5QWN0aW9uQ29kZSh0aGlzLl9kZWxlZ2F0ZSwgY29kZSk7XHJcbiAgICB9XHJcbiAgICBjaGVja0FjdGlvbkNvZGUoY29kZSkge1xyXG4gICAgICAgIHJldHVybiBleHAuY2hlY2tBY3Rpb25Db2RlKHRoaXMuX2RlbGVnYXRlLCBjb2RlKTtcclxuICAgIH1cclxuICAgIGNvbmZpcm1QYXNzd29yZFJlc2V0KGNvZGUsIG5ld1Bhc3N3b3JkKSB7XHJcbiAgICAgICAgcmV0dXJuIGV4cC5jb25maXJtUGFzc3dvcmRSZXNldCh0aGlzLl9kZWxlZ2F0ZSwgY29kZSwgbmV3UGFzc3dvcmQpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkKGVtYWlsLCBwYXNzd29yZCkge1xyXG4gICAgICAgIHJldHVybiBjb252ZXJ0Q3JlZGVudGlhbCh0aGlzLl9kZWxlZ2F0ZSwgZXhwLmNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCh0aGlzLl9kZWxlZ2F0ZSwgZW1haWwsIHBhc3N3b3JkKSk7XHJcbiAgICB9XHJcbiAgICBmZXRjaFByb3ZpZGVyc0ZvckVtYWlsKGVtYWlsKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hTaWduSW5NZXRob2RzRm9yRW1haWwoZW1haWwpO1xyXG4gICAgfVxyXG4gICAgZmV0Y2hTaWduSW5NZXRob2RzRm9yRW1haWwoZW1haWwpIHtcclxuICAgICAgICByZXR1cm4gZXhwLmZldGNoU2lnbkluTWV0aG9kc0ZvckVtYWlsKHRoaXMuX2RlbGVnYXRlLCBlbWFpbCk7XHJcbiAgICB9XHJcbiAgICBpc1NpZ25JbldpdGhFbWFpbExpbmsoZW1haWxMaW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIGV4cC5pc1NpZ25JbldpdGhFbWFpbExpbmsodGhpcy5fZGVsZWdhdGUsIGVtYWlsTGluayk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBnZXRSZWRpcmVjdFJlc3VsdCgpIHtcclxuICAgICAgICBfYXNzZXJ0JDEoX2lzUG9wdXBSZWRpcmVjdFN1cHBvcnRlZCgpLCB0aGlzLl9kZWxlZ2F0ZSwgXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIgLyogT1BFUkFUSU9OX05PVF9TVVBQT1JURUQgKi8pO1xyXG4gICAgICAgIGNvbnN0IGNyZWRlbnRpYWwgPSBhd2FpdCBleHAuZ2V0UmVkaXJlY3RSZXN1bHQodGhpcy5fZGVsZWdhdGUsIENvbXBhdFBvcHVwUmVkaXJlY3RSZXNvbHZlcik7XHJcbiAgICAgICAgaWYgKCFjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBjcmVkZW50aWFsOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgdXNlcjogbnVsbFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY29udmVydENyZWRlbnRpYWwodGhpcy5fZGVsZWdhdGUsIFByb21pc2UucmVzb2x2ZShjcmVkZW50aWFsKSk7XHJcbiAgICB9XHJcbiAgICAvLyBUaGlzIGZ1bmN0aW9uIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBieSBmcmFtZXdvcmtzIChlLmcuIEZpcmViYXNlVUktd2ViKSB0byBsb2cgdGhlaXIgdXNhZ2UuXHJcbiAgICAvLyBJdCBpcyBub3QgaW50ZW5kZWQgZm9yIGRpcmVjdCB1c2UgYnkgZGV2ZWxvcGVyIGFwcHMuIE5PIGpzZG9jIGhlcmUgdG8gaW50ZW50aW9uYWxseSBsZWF2ZSBpdFxyXG4gICAgLy8gb3V0IG9mIGF1dG9nZW5lcmF0ZWQgZG9jdW1lbnRhdGlvbiBwYWdlcyB0byByZWR1Y2UgYWNjaWRlbnRhbCBtaXN1c2UuXHJcbiAgICBhZGRGcmFtZXdvcmtGb3JMb2dnaW5nKGZyYW1ld29yaykge1xyXG4gICAgICAgIGV4cC5hZGRGcmFtZXdvcmtGb3JMb2dnaW5nKHRoaXMuX2RlbGVnYXRlLCBmcmFtZXdvcmspO1xyXG4gICAgfVxyXG4gICAgb25BdXRoU3RhdGVDaGFuZ2VkKG5leHRPck9ic2VydmVyLCBlcnJvckZuLCBjb21wbGV0ZWQpIHtcclxuICAgICAgICBjb25zdCB7IG5leHQsIGVycm9yLCBjb21wbGV0ZSB9ID0gd3JhcE9ic2VydmVycyhuZXh0T3JPYnNlcnZlciwgZXJyb3JGbiwgY29tcGxldGVkKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUub25BdXRoU3RhdGVDaGFuZ2VkKG5leHQsIGVycm9yLCBjb21wbGV0ZSk7XHJcbiAgICB9XHJcbiAgICBvbklkVG9rZW5DaGFuZ2VkKG5leHRPck9ic2VydmVyLCBlcnJvckZuLCBjb21wbGV0ZWQpIHtcclxuICAgICAgICBjb25zdCB7IG5leHQsIGVycm9yLCBjb21wbGV0ZSB9ID0gd3JhcE9ic2VydmVycyhuZXh0T3JPYnNlcnZlciwgZXJyb3JGbiwgY29tcGxldGVkKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUub25JZFRva2VuQ2hhbmdlZChuZXh0LCBlcnJvciwgY29tcGxldGUpO1xyXG4gICAgfVxyXG4gICAgc2VuZFNpZ25JbkxpbmtUb0VtYWlsKGVtYWlsLCBhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgICAgICByZXR1cm4gZXhwLnNlbmRTaWduSW5MaW5rVG9FbWFpbCh0aGlzLl9kZWxlZ2F0ZSwgZW1haWwsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAgICB9XHJcbiAgICBzZW5kUGFzc3dvcmRSZXNldEVtYWlsKGVtYWlsLCBhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgICAgICByZXR1cm4gZXhwLnNlbmRQYXNzd29yZFJlc2V0RW1haWwodGhpcy5fZGVsZWdhdGUsIGVtYWlsLCBhY3Rpb25Db2RlU2V0dGluZ3MgfHwgdW5kZWZpbmVkKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHNldFBlcnNpc3RlbmNlKHBlcnNpc3RlbmNlKSB7XHJcbiAgICAgICAgX3ZhbGlkYXRlUGVyc2lzdGVuY2VBcmd1bWVudCh0aGlzLl9kZWxlZ2F0ZSwgcGVyc2lzdGVuY2UpO1xyXG4gICAgICAgIGxldCBjb252ZXJ0ZWQ7XHJcbiAgICAgICAgc3dpdGNoIChwZXJzaXN0ZW5jZSkge1xyXG4gICAgICAgICAgICBjYXNlIFBlcnNpc3RlbmNlLlNFU1NJT046XHJcbiAgICAgICAgICAgICAgICBjb252ZXJ0ZWQgPSBleHAuYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFBlcnNpc3RlbmNlLkxPQ0FMOlxyXG4gICAgICAgICAgICAgICAgLy8gTm90IHVzaW5nIGlzSW5kZXhlZERCQXZhaWxhYmxlKCkgc2luY2UgaXQgb25seSBjaGVja3MgaWYgaW5kZXhlZERCIGlzIGRlZmluZWQuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpc0luZGV4ZWREQkZ1bGx5U3VwcG9ydGVkID0gYXdhaXQgZXhwXHJcbiAgICAgICAgICAgICAgICAgICAgLl9nZXRJbnN0YW5jZShleHAuaW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZSlcclxuICAgICAgICAgICAgICAgICAgICAuX2lzQXZhaWxhYmxlKCk7XHJcbiAgICAgICAgICAgICAgICBjb252ZXJ0ZWQgPSBpc0luZGV4ZWREQkZ1bGx5U3VwcG9ydGVkXHJcbiAgICAgICAgICAgICAgICAgICAgPyBleHAuaW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZVxyXG4gICAgICAgICAgICAgICAgICAgIDogZXhwLmJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgUGVyc2lzdGVuY2UuTk9ORTpcclxuICAgICAgICAgICAgICAgIGNvbnZlcnRlZCA9IGV4cC5pbk1lbW9yeVBlcnNpc3RlbmNlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXhwLl9mYWlsKFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLywge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwcE5hbWU6IHRoaXMuX2RlbGVnYXRlLm5hbWVcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuc2V0UGVyc2lzdGVuY2UoY29udmVydGVkKTtcclxuICAgIH1cclxuICAgIHNpZ25JbkFuZFJldHJpZXZlRGF0YVdpdGhDcmVkZW50aWFsKGNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zaWduSW5XaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIHNpZ25JbkFub255bW91c2x5KCkge1xyXG4gICAgICAgIHJldHVybiBjb252ZXJ0Q3JlZGVudGlhbCh0aGlzLl9kZWxlZ2F0ZSwgZXhwLnNpZ25JbkFub255bW91c2x5KHRoaXMuX2RlbGVnYXRlKSk7XHJcbiAgICB9XHJcbiAgICBzaWduSW5XaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnZlcnRDcmVkZW50aWFsKHRoaXMuX2RlbGVnYXRlLCBleHAuc2lnbkluV2l0aENyZWRlbnRpYWwodGhpcy5fZGVsZWdhdGUsIGNyZWRlbnRpYWwpKTtcclxuICAgIH1cclxuICAgIHNpZ25JbldpdGhDdXN0b21Ub2tlbih0b2tlbikge1xyXG4gICAgICAgIHJldHVybiBjb252ZXJ0Q3JlZGVudGlhbCh0aGlzLl9kZWxlZ2F0ZSwgZXhwLnNpZ25JbldpdGhDdXN0b21Ub2tlbih0aGlzLl9kZWxlZ2F0ZSwgdG9rZW4pKTtcclxuICAgIH1cclxuICAgIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGVtYWlsLCBwYXNzd29yZCkge1xyXG4gICAgICAgIHJldHVybiBjb252ZXJ0Q3JlZGVudGlhbCh0aGlzLl9kZWxlZ2F0ZSwgZXhwLnNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKHRoaXMuX2RlbGVnYXRlLCBlbWFpbCwgcGFzc3dvcmQpKTtcclxuICAgIH1cclxuICAgIHNpZ25JbldpdGhFbWFpbExpbmsoZW1haWwsIGVtYWlsTGluaykge1xyXG4gICAgICAgIHJldHVybiBjb252ZXJ0Q3JlZGVudGlhbCh0aGlzLl9kZWxlZ2F0ZSwgZXhwLnNpZ25JbldpdGhFbWFpbExpbmsodGhpcy5fZGVsZWdhdGUsIGVtYWlsLCBlbWFpbExpbmspKTtcclxuICAgIH1cclxuICAgIHNpZ25JbldpdGhQaG9uZU51bWJlcihwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcikge1xyXG4gICAgICAgIHJldHVybiBjb252ZXJ0Q29uZmlybWF0aW9uUmVzdWx0KHRoaXMuX2RlbGVnYXRlLCBleHAuc2lnbkluV2l0aFBob25lTnVtYmVyKHRoaXMuX2RlbGVnYXRlLCBwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcikpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgc2lnbkluV2l0aFBvcHVwKHByb3ZpZGVyKSB7XHJcbiAgICAgICAgX2Fzc2VydCQxKF9pc1BvcHVwUmVkaXJlY3RTdXBwb3J0ZWQoKSwgdGhpcy5fZGVsZWdhdGUsIFwib3BlcmF0aW9uLW5vdC1zdXBwb3J0ZWQtaW4tdGhpcy1lbnZpcm9ubWVudFwiIC8qIE9QRVJBVElPTl9OT1RfU1VQUE9SVEVEICovKTtcclxuICAgICAgICByZXR1cm4gY29udmVydENyZWRlbnRpYWwodGhpcy5fZGVsZWdhdGUsIGV4cC5zaWduSW5XaXRoUG9wdXAodGhpcy5fZGVsZWdhdGUsIHByb3ZpZGVyLCBDb21wYXRQb3B1cFJlZGlyZWN0UmVzb2x2ZXIpKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHNpZ25JbldpdGhSZWRpcmVjdChwcm92aWRlcikge1xyXG4gICAgICAgIF9hc3NlcnQkMShfaXNQb3B1cFJlZGlyZWN0U3VwcG9ydGVkKCksIHRoaXMuX2RlbGVnYXRlLCBcIm9wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnRcIiAvKiBPUEVSQVRJT05fTk9UX1NVUFBPUlRFRCAqLyk7XHJcbiAgICAgICAgYXdhaXQgX3NhdmVQZXJzaXN0ZW5jZUZvclJlZGlyZWN0KHRoaXMuX2RlbGVnYXRlKTtcclxuICAgICAgICByZXR1cm4gZXhwLnNpZ25JbldpdGhSZWRpcmVjdCh0aGlzLl9kZWxlZ2F0ZSwgcHJvdmlkZXIsIENvbXBhdFBvcHVwUmVkaXJlY3RSZXNvbHZlcik7XHJcbiAgICB9XHJcbiAgICB1cGRhdGVDdXJyZW50VXNlcih1c2VyKSB7XHJcbiAgICAgICAgLy8gcmVtb3ZlIHRzLWlnbm9yZSBvbmNlIG92ZXJsb2FkcyBhcmUgZGVmaW5lZCBmb3IgZXhwIGZ1bmN0aW9ucyB0byBhY2NlcHQgY29tcGF0IG9iamVjdHNcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnVwZGF0ZUN1cnJlbnRVc2VyKHVzZXIpO1xyXG4gICAgfVxyXG4gICAgdmVyaWZ5UGFzc3dvcmRSZXNldENvZGUoY29kZSkge1xyXG4gICAgICAgIHJldHVybiBleHAudmVyaWZ5UGFzc3dvcmRSZXNldENvZGUodGhpcy5fZGVsZWdhdGUsIGNvZGUpO1xyXG4gICAgfVxyXG4gICAgdW53cmFwKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZTtcclxuICAgIH1cclxuICAgIF9kZWxldGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLl9kZWxldGUoKTtcclxuICAgIH1cclxuICAgIGxpbmtVbmRlcmx5aW5nQXV0aCgpIHtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZS53cmFwcGVkID0gKCkgPT4gdGhpcztcclxuICAgIH1cclxufVxyXG5BdXRoLlBlcnNpc3RlbmNlID0gUGVyc2lzdGVuY2U7XHJcbmZ1bmN0aW9uIHdyYXBPYnNlcnZlcnMobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSkge1xyXG4gICAgbGV0IG5leHQgPSBuZXh0T3JPYnNlcnZlcjtcclxuICAgIGlmICh0eXBlb2YgbmV4dE9yT2JzZXJ2ZXIgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAoeyBuZXh0LCBlcnJvciwgY29tcGxldGUgfSA9IG5leHRPck9ic2VydmVyKTtcclxuICAgIH1cclxuICAgIC8vIFdlIGtub3cgJ25leHQnIGlzIG5vdyBhIGZ1bmN0aW9uXHJcbiAgICBjb25zdCBvbGROZXh0ID0gbmV4dDtcclxuICAgIGNvbnN0IG5ld05leHQgPSAodXNlcikgPT4gb2xkTmV4dCh1c2VyICYmIFVzZXIuZ2V0T3JDcmVhdGUodXNlcikpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBuZXdOZXh0LFxyXG4gICAgICAgIGVycm9yOiBlcnJvcixcclxuICAgICAgICBjb21wbGV0ZVxyXG4gICAgfTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBQaG9uZUF1dGhQcm92aWRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnByb3ZpZGVySWQgPSAncGhvbmUnO1xyXG4gICAgICAgIC8vIFRPRE86IHJlbW92ZSB0cy1pZ25vcmUgd2hlbiBtb3ZpbmcgdHlwZXMgZnJvbSBhdXRoLXR5cGVzIHRvIGF1dGgtY29tcGF0XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlID0gbmV3IGV4cC5QaG9uZUF1dGhQcm92aWRlcih1bndyYXAoZmlyZWJhc2UuYXV0aCgpKSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbCh2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSkge1xyXG4gICAgICAgIHJldHVybiBleHAuUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbCh2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAgICB9XHJcbiAgICB2ZXJpZnlQaG9uZU51bWJlcihwaG9uZUluZm9PcHRpb25zLCBhcHBsaWNhdGlvblZlcmlmaWVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnZlcmlmeVBob25lTnVtYmVyKFxyXG4gICAgICAgIC8vIFRoZSBpbXBsZW1lbnRhdGlvbiBtYXRjaGVzIGJ1dCB0aGUgdHlwZXMgYXJlIHN1YnRseSBpbmNvbXBhdGlibGVcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgIHBob25lSW5mb09wdGlvbnMsIGFwcGxpY2F0aW9uVmVyaWZpZXIpO1xyXG4gICAgfVxyXG4gICAgdW53cmFwKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZTtcclxuICAgIH1cclxufVxyXG5QaG9uZUF1dGhQcm92aWRlci5QSE9ORV9TSUdOX0lOX01FVEhPRCA9IGV4cC5QaG9uZUF1dGhQcm92aWRlci5QSE9ORV9TSUdOX0lOX01FVEhPRDtcclxuUGhvbmVBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQgPSBleHAuUGhvbmVBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQ7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IF9hc3NlcnQgPSBleHAuX2Fzc2VydDtcclxuY2xhc3MgUmVjYXB0Y2hhVmVyaWZpZXIge1xyXG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyLCBwYXJhbWV0ZXJzLCBhcHAgPSBmaXJlYmFzZS5hcHAoKSkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICAvLyBBUEkga2V5IGlzIHJlcXVpcmVkIGZvciB3ZWIgY2xpZW50IFJQQyBjYWxscy5cclxuICAgICAgICBfYXNzZXJ0KChfYSA9IGFwcC5vcHRpb25zKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuYXBpS2V5LCBcImludmFsaWQtYXBpLWtleVwiIC8qIElOVkFMSURfQVBJX0tFWSAqLywge1xyXG4gICAgICAgICAgICBhcHBOYW1lOiBhcHAubmFtZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlID0gbmV3IGV4cC5SZWNhcHRjaGFWZXJpZmllcihjb250YWluZXIsIFxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgcGFyYW1ldGVycywgXHJcbiAgICAgICAgLy8gVE9ETzogcmVtb3ZlIHRzLWlnbm9yZSB3aGVuIG1vdmluZyB0eXBlcyBmcm9tIGF1dGgtdHlwZXMgdG8gYXV0aC1jb21wYXRcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgYXBwLmF1dGgoKSk7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdGhpcy5fZGVsZWdhdGUudHlwZTtcclxuICAgIH1cclxuICAgIGNsZWFyKCkge1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlLmNsZWFyKCk7XHJcbiAgICB9XHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnJlbmRlcigpO1xyXG4gICAgfVxyXG4gICAgdmVyaWZ5KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS52ZXJpZnkoKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBBVVRIX1RZUEUgPSAnYXV0aC1jb21wYXQnO1xyXG4vLyBDcmVhdGUgYXV0aCBjb21wb25lbnRzIHRvIHJlZ2lzdGVyIHdpdGggZmlyZWJhc2UuXHJcbi8vIFByb3ZpZGVzIEF1dGggcHVibGljIEFQSXMuXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyQXV0aENvbXBhdChpbnN0YW5jZSkge1xyXG4gICAgaW5zdGFuY2UuSU5URVJOQUwucmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChBVVRIX1RZUEUsIGNvbnRhaW5lciA9PiB7XHJcbiAgICAgICAgLy8gZ2V0SW1tZWRpYXRlIGZvciBGaXJlYmFzZUFwcCB3aWxsIGFsd2F5cyBzdWNjZWVkXHJcbiAgICAgICAgY29uc3QgYXBwID0gY29udGFpbmVyLmdldFByb3ZpZGVyKCdhcHAtY29tcGF0JykuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgY29uc3QgYXV0aFByb3ZpZGVyID0gY29udGFpbmVyLmdldFByb3ZpZGVyKCdhdXRoJyk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBBdXRoKGFwcCwgYXV0aFByb3ZpZGVyKTtcclxuICAgIH0sIFwiUFVCTElDXCIgLyogUFVCTElDICovKVxyXG4gICAgICAgIC5zZXRTZXJ2aWNlUHJvcHMoe1xyXG4gICAgICAgIEFjdGlvbkNvZGVJbmZvOiB7XHJcbiAgICAgICAgICAgIE9wZXJhdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgRU1BSUxfU0lHTklOOiBleHAuQWN0aW9uQ29kZU9wZXJhdGlvbi5FTUFJTF9TSUdOSU4sXHJcbiAgICAgICAgICAgICAgICBQQVNTV09SRF9SRVNFVDogZXhwLkFjdGlvbkNvZGVPcGVyYXRpb24uUEFTU1dPUkRfUkVTRVQsXHJcbiAgICAgICAgICAgICAgICBSRUNPVkVSX0VNQUlMOiBleHAuQWN0aW9uQ29kZU9wZXJhdGlvbi5SRUNPVkVSX0VNQUlMLFxyXG4gICAgICAgICAgICAgICAgUkVWRVJUX1NFQ09ORF9GQUNUT1JfQURESVRJT046IGV4cC5BY3Rpb25Db2RlT3BlcmF0aW9uLlJFVkVSVF9TRUNPTkRfRkFDVE9SX0FERElUSU9OLFxyXG4gICAgICAgICAgICAgICAgVkVSSUZZX0FORF9DSEFOR0VfRU1BSUw6IGV4cC5BY3Rpb25Db2RlT3BlcmF0aW9uLlZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMLFxyXG4gICAgICAgICAgICAgICAgVkVSSUZZX0VNQUlMOiBleHAuQWN0aW9uQ29kZU9wZXJhdGlvbi5WRVJJRllfRU1BSUxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgRW1haWxBdXRoUHJvdmlkZXI6IGV4cC5FbWFpbEF1dGhQcm92aWRlcixcclxuICAgICAgICBGYWNlYm9va0F1dGhQcm92aWRlcjogZXhwLkZhY2Vib29rQXV0aFByb3ZpZGVyLFxyXG4gICAgICAgIEdpdGh1YkF1dGhQcm92aWRlcjogZXhwLkdpdGh1YkF1dGhQcm92aWRlcixcclxuICAgICAgICBHb29nbGVBdXRoUHJvdmlkZXI6IGV4cC5Hb29nbGVBdXRoUHJvdmlkZXIsXHJcbiAgICAgICAgT0F1dGhQcm92aWRlcjogZXhwLk9BdXRoUHJvdmlkZXIsXHJcbiAgICAgICAgU0FNTEF1dGhQcm92aWRlcjogZXhwLlNBTUxBdXRoUHJvdmlkZXIsXHJcbiAgICAgICAgUGhvbmVBdXRoUHJvdmlkZXI6IFBob25lQXV0aFByb3ZpZGVyLFxyXG4gICAgICAgIFBob25lTXVsdGlGYWN0b3JHZW5lcmF0b3I6IGV4cC5QaG9uZU11bHRpRmFjdG9yR2VuZXJhdG9yLFxyXG4gICAgICAgIFJlY2FwdGNoYVZlcmlmaWVyOiBSZWNhcHRjaGFWZXJpZmllcixcclxuICAgICAgICBUd2l0dGVyQXV0aFByb3ZpZGVyOiBleHAuVHdpdHRlckF1dGhQcm92aWRlcixcclxuICAgICAgICBBdXRoLFxyXG4gICAgICAgIEF1dGhDcmVkZW50aWFsOiBleHAuQXV0aENyZWRlbnRpYWwsXHJcbiAgICAgICAgRXJyb3I6IEZpcmViYXNlRXJyb3JcclxuICAgIH0pXHJcbiAgICAgICAgLnNldEluc3RhbnRpYXRpb25Nb2RlKFwiTEFaWVwiIC8qIExBWlkgKi8pXHJcbiAgICAgICAgLnNldE11bHRpcGxlSW5zdGFuY2VzKGZhbHNlKSk7XHJcbiAgICBpbnN0YW5jZS5yZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbik7XHJcbn1cclxucmVnaXN0ZXJBdXRoQ29tcGF0KGZpcmViYXNlKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwiZXhwb3J0ICogZnJvbSAnQGZpcmViYXNlL2ZpcmVzdG9yZSc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20uanMubWFwXG4iLCJpbXBvcnQgZmlyZWJhc2UgZnJvbSAnQGZpcmViYXNlL2FwcC1jb21wYXQnO1xuaW1wb3J0IHsgRmlyZXN0b3JlRXJyb3IsIEJ5dGVzLCBfaXNCYXNlNjRBdmFpbGFibGUsIGVuYWJsZUluZGV4ZWREYlBlcnNpc3RlbmNlLCBlbmFibGVNdWx0aVRhYkluZGV4ZWREYlBlcnNpc3RlbmNlLCBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlLCBfRGF0YWJhc2VJZCwgX2xvZ1dhcm4sIGNvbm5lY3RGaXJlc3RvcmVFbXVsYXRvciwgZW5hYmxlTmV0d29yaywgZGlzYWJsZU5ldHdvcmssIF92YWxpZGF0ZUlzTm90VXNlZFRvZ2V0aGVyLCB3YWl0Rm9yUGVuZGluZ1dyaXRlcywgb25TbmFwc2hvdHNJblN5bmMsIGNvbGxlY3Rpb24sIGRvYywgY29sbGVjdGlvbkdyb3VwLCBydW5UcmFuc2FjdGlvbiwgZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZCwgV3JpdGVCYXRjaCBhcyBXcml0ZUJhdGNoJDEsIGV4ZWN1dGVXcml0ZSwgbG9hZEJ1bmRsZSwgbmFtZWRRdWVyeSwgX2Nhc3QsIERvY3VtZW50UmVmZXJlbmNlIGFzIERvY3VtZW50UmVmZXJlbmNlJDEsIERvY3VtZW50U25hcHNob3QgYXMgRG9jdW1lbnRTbmFwc2hvdCQxLCBfRG9jdW1lbnRLZXksIHJlZkVxdWFsLCBzZXREb2MsIHVwZGF0ZURvYywgZGVsZXRlRG9jLCBvblNuYXBzaG90LCBnZXREb2NGcm9tQ2FjaGUsIGdldERvY0Zyb21TZXJ2ZXIsIGdldERvYywgc25hcHNob3RFcXVhbCwgcXVlcnksIHdoZXJlLCBvcmRlckJ5LCBsaW1pdCwgbGltaXRUb0xhc3QsIHN0YXJ0QXQsIHN0YXJ0QWZ0ZXIsIGVuZEJlZm9yZSwgZW5kQXQsIHF1ZXJ5RXF1YWwsIGdldERvY3NGcm9tQ2FjaGUsIGdldERvY3NGcm9tU2VydmVyLCBnZXREb2NzLCBRdWVyeVNuYXBzaG90IGFzIFF1ZXJ5U25hcHNob3QkMSwgYWRkRG9jLCBBYnN0cmFjdFVzZXJEYXRhV3JpdGVyLCBzZXRMb2dMZXZlbCBhcyBzZXRMb2dMZXZlbCQxLCBRdWVyeURvY3VtZW50U25hcHNob3QgYXMgUXVlcnlEb2N1bWVudFNuYXBzaG90JDEsIF9kZWJ1Z0Fzc2VydCwgRmllbGRQYXRoIGFzIEZpZWxkUGF0aCQxLCBfRmllbGRQYXRoLCBzZXJ2ZXJUaW1lc3RhbXAsIGRlbGV0ZUZpZWxkLCBhcnJheVVuaW9uLCBhcnJheVJlbW92ZSwgaW5jcmVtZW50LCBHZW9Qb2ludCwgVGltZXN0YW1wLCBDQUNIRV9TSVpFX1VOTElNSVRFRCB9IGZyb20gJ0BmaXJlYmFzZS9maXJlc3RvcmUnO1xuaW1wb3J0IHsgZ2V0TW9kdWxhckluc3RhbmNlIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5cbmNvbnN0IG5hbWUgPSBcIkBmaXJlYmFzZS9maXJlc3RvcmUtY29tcGF0XCI7XG5jb25zdCB2ZXJzaW9uID0gXCIwLjEuMTBcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVTZXRPcHRpb25zKG1ldGhvZE5hbWUsIG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBtZXJnZTogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgaWYgKG9wdGlvbnMubWVyZ2VGaWVsZHMgIT09IHVuZGVmaW5lZCAmJiBvcHRpb25zLm1lcmdlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoJ2ludmFsaWQtYXJndW1lbnQnLCBgSW52YWxpZCBvcHRpb25zIHBhc3NlZCB0byBmdW5jdGlvbiAke21ldGhvZE5hbWV9KCk6IFlvdSBjYW5ub3QgYCArXHJcbiAgICAgICAgICAgICdzcGVjaWZ5IGJvdGggXCJtZXJnZVwiIGFuZCBcIm1lcmdlRmllbGRzXCIuJyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3B0aW9ucztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKiogSGVscGVyIGZ1bmN0aW9uIHRvIGFzc2VydCBVaW50OEFycmF5IGlzIGF2YWlsYWJsZSBhdCBydW50aW1lLiAqL1xyXG5mdW5jdGlvbiBhc3NlcnRVaW50OEFycmF5QXZhaWxhYmxlKCkge1xyXG4gICAgaWYgKHR5cGVvZiBVaW50OEFycmF5ID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcigndW5pbXBsZW1lbnRlZCcsICdVaW50OEFycmF5cyBhcmUgbm90IGF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50LicpO1xyXG4gICAgfVxyXG59XHJcbi8qKiBIZWxwZXIgZnVuY3Rpb24gdG8gYXNzZXJ0IEJhc2U2NCBmdW5jdGlvbnMgYXJlIGF2YWlsYWJsZSBhdCBydW50aW1lLiAqL1xyXG5mdW5jdGlvbiBhc3NlcnRCYXNlNjRBdmFpbGFibGUoKSB7XHJcbiAgICBpZiAoIV9pc0Jhc2U2NEF2YWlsYWJsZSgpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKCd1bmltcGxlbWVudGVkJywgJ0Jsb2JzIGFyZSB1bmF2YWlsYWJsZSBpbiBGaXJlc3RvcmUgaW4gdGhpcyBlbnZpcm9ubWVudC4nKTtcclxuICAgIH1cclxufVxyXG4vKiogSW1tdXRhYmxlIGNsYXNzIGhvbGRpbmcgYSBibG9iIChiaW5hcnkgZGF0YSkgKi9cclxuY2xhc3MgQmxvYiB7XHJcbiAgICBjb25zdHJ1Y3RvcihfZGVsZWdhdGUpIHtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IF9kZWxlZ2F0ZTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBmcm9tQmFzZTY0U3RyaW5nKGJhc2U2NCkge1xyXG4gICAgICAgIGFzc2VydEJhc2U2NEF2YWlsYWJsZSgpO1xyXG4gICAgICAgIHJldHVybiBuZXcgQmxvYihCeXRlcy5mcm9tQmFzZTY0U3RyaW5nKGJhc2U2NCkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGZyb21VaW50OEFycmF5KGFycmF5KSB7XHJcbiAgICAgICAgYXNzZXJ0VWludDhBcnJheUF2YWlsYWJsZSgpO1xyXG4gICAgICAgIHJldHVybiBuZXcgQmxvYihCeXRlcy5mcm9tVWludDhBcnJheShhcnJheSkpO1xyXG4gICAgfVxyXG4gICAgdG9CYXNlNjQoKSB7XHJcbiAgICAgICAgYXNzZXJ0QmFzZTY0QXZhaWxhYmxlKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnRvQmFzZTY0KCk7XHJcbiAgICB9XHJcbiAgICB0b1VpbnQ4QXJyYXkoKSB7XHJcbiAgICAgICAgYXNzZXJ0VWludDhBcnJheUF2YWlsYWJsZSgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS50b1VpbnQ4QXJyYXkoKTtcclxuICAgIH1cclxuICAgIGlzRXF1YWwob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuaXNFcXVhbChvdGhlci5fZGVsZWdhdGUpO1xyXG4gICAgfVxyXG4gICAgdG9TdHJpbmcoKSB7XHJcbiAgICAgICAgcmV0dXJuICdCbG9iKGJhc2U2NDogJyArIHRoaXMudG9CYXNlNjQoKSArICcpJztcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1BhcnRpYWxPYnNlcnZlcihvYmopIHtcclxuICAgIHJldHVybiBpbXBsZW1lbnRzQW55TWV0aG9kcyhvYmosIFsnbmV4dCcsICdlcnJvcicsICdjb21wbGV0ZSddKTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyB0cnVlIGlmIG9iaiBpcyBhbiBvYmplY3QgYW5kIGNvbnRhaW5zIGF0IGxlYXN0IG9uZSBvZiB0aGUgc3BlY2lmaWVkXHJcbiAqIG1ldGhvZHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBpbXBsZW1lbnRzQW55TWV0aG9kcyhvYmosIG1ldGhvZHMpIHtcclxuICAgIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyB8fCBvYmogPT09IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBjb25zdCBvYmplY3QgPSBvYmo7XHJcbiAgICBmb3IgKGNvbnN0IG1ldGhvZCBvZiBtZXRob2RzKSB7XHJcbiAgICAgICAgaWYgKG1ldGhvZCBpbiBvYmplY3QgJiYgdHlwZW9mIG9iamVjdFttZXRob2RdID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIHBlcnNpc3RlbmNlIHByb3ZpZGVyIGluY2x1ZGVkIHdpdGggdGhlIGZ1bGwgRmlyZXN0b3JlIFNESy5cclxuICovXHJcbmNsYXNzIEluZGV4ZWREYlBlcnNpc3RlbmNlUHJvdmlkZXIge1xyXG4gICAgZW5hYmxlSW5kZXhlZERiUGVyc2lzdGVuY2UoZmlyZXN0b3JlLCBmb3JjZU93bmVyc2hpcCkge1xyXG4gICAgICAgIHJldHVybiBlbmFibGVJbmRleGVkRGJQZXJzaXN0ZW5jZShmaXJlc3RvcmUuX2RlbGVnYXRlLCB7IGZvcmNlT3duZXJzaGlwIH0pO1xyXG4gICAgfVxyXG4gICAgZW5hYmxlTXVsdGlUYWJJbmRleGVkRGJQZXJzaXN0ZW5jZShmaXJlc3RvcmUpIHtcclxuICAgICAgICByZXR1cm4gZW5hYmxlTXVsdGlUYWJJbmRleGVkRGJQZXJzaXN0ZW5jZShmaXJlc3RvcmUuX2RlbGVnYXRlKTtcclxuICAgIH1cclxuICAgIGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UoZmlyZXN0b3JlKSB7XHJcbiAgICAgICAgcmV0dXJuIGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UoZmlyZXN0b3JlLl9kZWxlZ2F0ZSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIENvbXBhdCBjbGFzcyBmb3IgRmlyZXN0b3JlLiBFeHBvc2VzIEZpcmVzdG9yZSBMZWdhY3kgQVBJLCBidXQgZGVsZWdhdGVzXHJcbiAqIHRvIHRoZSBmdW5jdGlvbmFsIEFQSSBvZiBmaXJlc3RvcmUtZXhwLlxyXG4gKi9cclxuY2xhc3MgRmlyZXN0b3JlIHtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGFiYXNlSWRPckFwcCwgX2RlbGVnYXRlLCBfcGVyc2lzdGVuY2VQcm92aWRlcikge1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlID0gX2RlbGVnYXRlO1xyXG4gICAgICAgIHRoaXMuX3BlcnNpc3RlbmNlUHJvdmlkZXIgPSBfcGVyc2lzdGVuY2VQcm92aWRlcjtcclxuICAgICAgICB0aGlzLklOVEVSTkFMID0ge1xyXG4gICAgICAgICAgICBkZWxldGU6ICgpID0+IHRoaXMudGVybWluYXRlKClcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICghKGRhdGFiYXNlSWRPckFwcCBpbnN0YW5jZW9mIF9EYXRhYmFzZUlkKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9hcHBDb21wYXQgPSBkYXRhYmFzZUlkT3JBcHA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IF9kYXRhYmFzZUlkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5fZGF0YWJhc2VJZDtcclxuICAgIH1cclxuICAgIHNldHRpbmdzKHNldHRpbmdzTGl0ZXJhbCkge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRTZXR0aW5ncyA9IHRoaXMuX2RlbGVnYXRlLl9nZXRTZXR0aW5ncygpO1xyXG4gICAgICAgIGlmICghc2V0dGluZ3NMaXRlcmFsLm1lcmdlICYmXHJcbiAgICAgICAgICAgIGN1cnJlbnRTZXR0aW5ncy5ob3N0ICE9PSBzZXR0aW5nc0xpdGVyYWwuaG9zdCkge1xyXG4gICAgICAgICAgICBfbG9nV2FybignWW91IGFyZSBvdmVycmlkaW5nIHRoZSBvcmlnaW5hbCBob3N0LiBJZiB5b3UgZGlkIG5vdCBpbnRlbmQgJyArXHJcbiAgICAgICAgICAgICAgICAndG8gb3ZlcnJpZGUgeW91ciBzZXR0aW5ncywgdXNlIHttZXJnZTogdHJ1ZX0uJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzZXR0aW5nc0xpdGVyYWwubWVyZ2UpIHtcclxuICAgICAgICAgICAgc2V0dGluZ3NMaXRlcmFsID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjdXJyZW50U2V0dGluZ3MpLCBzZXR0aW5nc0xpdGVyYWwpO1xyXG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhlIHByb3BlcnR5IGZyb20gdGhlIHNldHRpbmdzIG9uY2UgdGhlIG1lcmdlIGlzIGNvbXBsZXRlZFxyXG4gICAgICAgICAgICBkZWxldGUgc2V0dGluZ3NMaXRlcmFsLm1lcmdlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZS5fc2V0U2V0dGluZ3Moc2V0dGluZ3NMaXRlcmFsKTtcclxuICAgIH1cclxuICAgIHVzZUVtdWxhdG9yKGhvc3QsIHBvcnQsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIGNvbm5lY3RGaXJlc3RvcmVFbXVsYXRvcih0aGlzLl9kZWxlZ2F0ZSwgaG9zdCwgcG9ydCwgb3B0aW9ucyk7XHJcbiAgICB9XHJcbiAgICBlbmFibGVOZXR3b3JrKCkge1xyXG4gICAgICAgIHJldHVybiBlbmFibGVOZXR3b3JrKHRoaXMuX2RlbGVnYXRlKTtcclxuICAgIH1cclxuICAgIGRpc2FibGVOZXR3b3JrKCkge1xyXG4gICAgICAgIHJldHVybiBkaXNhYmxlTmV0d29yayh0aGlzLl9kZWxlZ2F0ZSk7XHJcbiAgICB9XHJcbiAgICBlbmFibGVQZXJzaXN0ZW5jZShzZXR0aW5ncykge1xyXG4gICAgICAgIGxldCBzeW5jaHJvbml6ZVRhYnMgPSBmYWxzZTtcclxuICAgICAgICBsZXQgZXhwZXJpbWVudGFsRm9yY2VPd25pbmdUYWIgPSBmYWxzZTtcclxuICAgICAgICBpZiAoc2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgc3luY2hyb25pemVUYWJzID0gISFzZXR0aW5ncy5zeW5jaHJvbml6ZVRhYnM7XHJcbiAgICAgICAgICAgIGV4cGVyaW1lbnRhbEZvcmNlT3duaW5nVGFiID0gISFzZXR0aW5ncy5leHBlcmltZW50YWxGb3JjZU93bmluZ1RhYjtcclxuICAgICAgICAgICAgX3ZhbGlkYXRlSXNOb3RVc2VkVG9nZXRoZXIoJ3N5bmNocm9uaXplVGFicycsIHN5bmNocm9uaXplVGFicywgJ2V4cGVyaW1lbnRhbEZvcmNlT3duaW5nVGFiJywgZXhwZXJpbWVudGFsRm9yY2VPd25pbmdUYWIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc3luY2hyb25pemVUYWJzXHJcbiAgICAgICAgICAgID8gdGhpcy5fcGVyc2lzdGVuY2VQcm92aWRlci5lbmFibGVNdWx0aVRhYkluZGV4ZWREYlBlcnNpc3RlbmNlKHRoaXMpXHJcbiAgICAgICAgICAgIDogdGhpcy5fcGVyc2lzdGVuY2VQcm92aWRlci5lbmFibGVJbmRleGVkRGJQZXJzaXN0ZW5jZSh0aGlzLCBleHBlcmltZW50YWxGb3JjZU93bmluZ1RhYik7XHJcbiAgICB9XHJcbiAgICBjbGVhclBlcnNpc3RlbmNlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wZXJzaXN0ZW5jZVByb3ZpZGVyLmNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UodGhpcyk7XHJcbiAgICB9XHJcbiAgICB0ZXJtaW5hdGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2FwcENvbXBhdCkge1xyXG4gICAgICAgICAgICB0aGlzLl9hcHBDb21wYXQuX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSgnZmlyZXN0b3JlLWNvbXBhdCcpO1xyXG4gICAgICAgICAgICB0aGlzLl9hcHBDb21wYXQuX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSgnZmlyZXN0b3JlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5fZGVsZXRlKCk7XHJcbiAgICB9XHJcbiAgICB3YWl0Rm9yUGVuZGluZ1dyaXRlcygpIHtcclxuICAgICAgICByZXR1cm4gd2FpdEZvclBlbmRpbmdXcml0ZXModGhpcy5fZGVsZWdhdGUpO1xyXG4gICAgfVxyXG4gICAgb25TbmFwc2hvdHNJblN5bmMoYXJnKSB7XHJcbiAgICAgICAgcmV0dXJuIG9uU25hcHNob3RzSW5TeW5jKHRoaXMuX2RlbGVnYXRlLCBhcmcpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGFwcCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2FwcENvbXBhdCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoJ2ZhaWxlZC1wcmVjb25kaXRpb24nLCBcIkZpcmVzdG9yZSB3YXMgbm90IGluaXRpYWxpemVkIHVzaW5nIHRoZSBGaXJlYmFzZSBTREsuICdhcHAnIGlzIFwiICtcclxuICAgICAgICAgICAgICAgICdub3QgYXZhaWxhYmxlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9hcHBDb21wYXQ7XHJcbiAgICB9XHJcbiAgICBjb2xsZWN0aW9uKHBhdGhTdHJpbmcpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IENvbGxlY3Rpb25SZWZlcmVuY2UodGhpcywgY29sbGVjdGlvbih0aGlzLl9kZWxlZ2F0ZSwgcGF0aFN0cmluZykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aHJvdyByZXBsYWNlRnVuY3Rpb25OYW1lKGUsICdjb2xsZWN0aW9uKCknLCAnRmlyZXN0b3JlLmNvbGxlY3Rpb24oKScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGRvYyhwYXRoU3RyaW5nKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFJlZmVyZW5jZSh0aGlzLCBkb2ModGhpcy5fZGVsZWdhdGUsIHBhdGhTdHJpbmcpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgcmVwbGFjZUZ1bmN0aW9uTmFtZShlLCAnZG9jKCknLCAnRmlyZXN0b3JlLmRvYygpJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29sbGVjdGlvbkdyb3VwKGNvbGxlY3Rpb25JZCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcywgY29sbGVjdGlvbkdyb3VwKHRoaXMuX2RlbGVnYXRlLCBjb2xsZWN0aW9uSWQpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgcmVwbGFjZUZ1bmN0aW9uTmFtZShlLCAnY29sbGVjdGlvbkdyb3VwKCknLCAnRmlyZXN0b3JlLmNvbGxlY3Rpb25Hcm91cCgpJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcnVuVHJhbnNhY3Rpb24odXBkYXRlRnVuY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gcnVuVHJhbnNhY3Rpb24odGhpcy5fZGVsZWdhdGUsIHRyYW5zYWN0aW9uID0+IHVwZGF0ZUZ1bmN0aW9uKG5ldyBUcmFuc2FjdGlvbih0aGlzLCB0cmFuc2FjdGlvbikpKTtcclxuICAgIH1cclxuICAgIGJhdGNoKCkge1xyXG4gICAgICAgIGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQodGhpcy5fZGVsZWdhdGUpO1xyXG4gICAgICAgIHJldHVybiBuZXcgV3JpdGVCYXRjaChuZXcgV3JpdGVCYXRjaCQxKHRoaXMuX2RlbGVnYXRlLCBtdXRhdGlvbnMgPT4gZXhlY3V0ZVdyaXRlKHRoaXMuX2RlbGVnYXRlLCBtdXRhdGlvbnMpKSk7XHJcbiAgICB9XHJcbiAgICBsb2FkQnVuZGxlKGJ1bmRsZURhdGEpIHtcclxuICAgICAgICByZXR1cm4gbG9hZEJ1bmRsZSh0aGlzLl9kZWxlZ2F0ZSwgYnVuZGxlRGF0YSk7XHJcbiAgICB9XHJcbiAgICBuYW1lZFF1ZXJ5KG5hbWUpIHtcclxuICAgICAgICByZXR1cm4gbmFtZWRRdWVyeSh0aGlzLl9kZWxlZ2F0ZSwgbmFtZSkudGhlbihleHBRdWVyeSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghZXhwUXVlcnkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcywgXHJcbiAgICAgICAgICAgIC8vIFdlIGNhbiBwYXNzIGBleHBRdWVyeWAgaGVyZSBkaXJlY3RseSBzaW5jZSBuYW1lZCBxdWVyaWVzIGRvbid0IGhhdmUgYSBVc2VyRGF0YUNvbnZlcnRlci5cclxuICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB3b3VsZCBoYXZlIHRvIGNyZWF0ZSBhIG5ldyBFeHBRdWVyeSBhbmQgcGFzcyB0aGUgb2xkIFVzZXJEYXRhQ29udmVydGVyLlxyXG4gICAgICAgICAgICBleHBRdWVyeSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgVXNlckRhdGFXcml0ZXIgZXh0ZW5kcyBBYnN0cmFjdFVzZXJEYXRhV3JpdGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKGZpcmVzdG9yZSkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5maXJlc3RvcmUgPSBmaXJlc3RvcmU7XHJcbiAgICB9XHJcbiAgICBjb252ZXJ0Qnl0ZXMoYnl0ZXMpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEJsb2IobmV3IEJ5dGVzKGJ5dGVzKSk7XHJcbiAgICB9XHJcbiAgICBjb252ZXJ0UmVmZXJlbmNlKG5hbWUpIHtcclxuICAgICAgICBjb25zdCBrZXkgPSB0aGlzLmNvbnZlcnREb2N1bWVudEtleShuYW1lLCB0aGlzLmZpcmVzdG9yZS5fZGF0YWJhc2VJZCk7XHJcbiAgICAgICAgcmV0dXJuIERvY3VtZW50UmVmZXJlbmNlLmZvcktleShrZXksIHRoaXMuZmlyZXN0b3JlLCAvKiBjb252ZXJ0ZXI9ICovIG51bGwpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHNldExvZ0xldmVsKGxldmVsKSB7XHJcbiAgICBzZXRMb2dMZXZlbCQxKGxldmVsKTtcclxufVxyXG4vKipcclxuICogQSByZWZlcmVuY2UgdG8gYSB0cmFuc2FjdGlvbi5cclxuICovXHJcbmNsYXNzIFRyYW5zYWN0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKF9maXJlc3RvcmUsIF9kZWxlZ2F0ZSkge1xyXG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IF9maXJlc3RvcmU7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUgPSBfZGVsZWdhdGU7XHJcbiAgICAgICAgdGhpcy5fdXNlckRhdGFXcml0ZXIgPSBuZXcgVXNlckRhdGFXcml0ZXIoX2ZpcmVzdG9yZSk7XHJcbiAgICB9XHJcbiAgICBnZXQoZG9jdW1lbnRSZWYpIHtcclxuICAgICAgICBjb25zdCByZWYgPSBjYXN0UmVmZXJlbmNlKGRvY3VtZW50UmVmKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGVcclxuICAgICAgICAgICAgLmdldChyZWYpXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiBuZXcgRG9jdW1lbnRTbmFwc2hvdCh0aGlzLl9maXJlc3RvcmUsIG5ldyBEb2N1bWVudFNuYXBzaG90JDEodGhpcy5fZmlyZXN0b3JlLl9kZWxlZ2F0ZSwgdGhpcy5fdXNlckRhdGFXcml0ZXIsIHJlc3VsdC5fa2V5LCByZXN1bHQuX2RvY3VtZW50LCByZXN1bHQubWV0YWRhdGEsIHJlZi5jb252ZXJ0ZXIpKSk7XHJcbiAgICB9XHJcbiAgICBzZXQoZG9jdW1lbnRSZWYsIGRhdGEsIG9wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCByZWYgPSBjYXN0UmVmZXJlbmNlKGRvY3VtZW50UmVmKTtcclxuICAgICAgICBpZiAob3B0aW9ucykge1xyXG4gICAgICAgICAgICB2YWxpZGF0ZVNldE9wdGlvbnMoJ1RyYW5zYWN0aW9uLnNldCcsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICB0aGlzLl9kZWxlZ2F0ZS5zZXQocmVmLCBkYXRhLCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlbGVnYXRlLnNldChyZWYsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHVwZGF0ZShkb2N1bWVudFJlZiwgZGF0YU9yRmllbGQsIHZhbHVlLCAuLi5tb3JlRmllbGRzQW5kVmFsdWVzKSB7XHJcbiAgICAgICAgY29uc3QgcmVmID0gY2FzdFJlZmVyZW5jZShkb2N1bWVudFJlZik7XHJcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGVsZWdhdGUudXBkYXRlKHJlZiwgZGF0YU9yRmllbGQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fZGVsZWdhdGUudXBkYXRlKHJlZiwgZGF0YU9yRmllbGQsIHZhbHVlLCAuLi5tb3JlRmllbGRzQW5kVmFsdWVzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBkZWxldGUoZG9jdW1lbnRSZWYpIHtcclxuICAgICAgICBjb25zdCByZWYgPSBjYXN0UmVmZXJlbmNlKGRvY3VtZW50UmVmKTtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZS5kZWxldGUocmVmKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxufVxyXG5jbGFzcyBXcml0ZUJhdGNoIHtcclxuICAgIGNvbnN0cnVjdG9yKF9kZWxlZ2F0ZSkge1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlID0gX2RlbGVnYXRlO1xyXG4gICAgfVxyXG4gICAgc2V0KGRvY3VtZW50UmVmLCBkYXRhLCBvcHRpb25zKSB7XHJcbiAgICAgICAgY29uc3QgcmVmID0gY2FzdFJlZmVyZW5jZShkb2N1bWVudFJlZik7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgdmFsaWRhdGVTZXRPcHRpb25zKCdXcml0ZUJhdGNoLnNldCcsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICB0aGlzLl9kZWxlZ2F0ZS5zZXQocmVmLCBkYXRhLCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlbGVnYXRlLnNldChyZWYsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHVwZGF0ZShkb2N1bWVudFJlZiwgZGF0YU9yRmllbGQsIHZhbHVlLCAuLi5tb3JlRmllbGRzQW5kVmFsdWVzKSB7XHJcbiAgICAgICAgY29uc3QgcmVmID0gY2FzdFJlZmVyZW5jZShkb2N1bWVudFJlZik7XHJcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGVsZWdhdGUudXBkYXRlKHJlZiwgZGF0YU9yRmllbGQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fZGVsZWdhdGUudXBkYXRlKHJlZiwgZGF0YU9yRmllbGQsIHZhbHVlLCAuLi5tb3JlRmllbGRzQW5kVmFsdWVzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBkZWxldGUoZG9jdW1lbnRSZWYpIHtcclxuICAgICAgICBjb25zdCByZWYgPSBjYXN0UmVmZXJlbmNlKGRvY3VtZW50UmVmKTtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZS5kZWxldGUocmVmKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGNvbW1pdCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuY29tbWl0KCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFdyYXBzIGEgYFB1YmxpY0ZpcmVzdG9yZURhdGFDb252ZXJ0ZXJgIHRyYW5zbGF0aW5nIHRoZSB0eXBlcyBmcm9tIHRoZVxyXG4gKiBleHBlcmltZW50YWwgU0RLIGludG8gY29ycmVzcG9uZGluZyB0eXBlcyBmcm9tIHRoZSBDbGFzc2ljIFNESyBiZWZvcmUgcGFzc2luZ1xyXG4gKiB0aGVtIHRvIHRoZSB3cmFwcGVkIGNvbnZlcnRlci5cclxuICovXHJcbmNsYXNzIEZpcmVzdG9yZURhdGFDb252ZXJ0ZXIge1xyXG4gICAgY29uc3RydWN0b3IoX2ZpcmVzdG9yZSwgX3VzZXJEYXRhV3JpdGVyLCBfZGVsZWdhdGUpIHtcclxuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSBfZmlyZXN0b3JlO1xyXG4gICAgICAgIHRoaXMuX3VzZXJEYXRhV3JpdGVyID0gX3VzZXJEYXRhV3JpdGVyO1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlID0gX2RlbGVnYXRlO1xyXG4gICAgfVxyXG4gICAgZnJvbUZpcmVzdG9yZShzbmFwc2hvdCwgb3B0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IGV4cFNuYXBzaG90ID0gbmV3IFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCQxKHRoaXMuX2ZpcmVzdG9yZS5fZGVsZWdhdGUsIHRoaXMuX3VzZXJEYXRhV3JpdGVyLCBzbmFwc2hvdC5fa2V5LCBzbmFwc2hvdC5fZG9jdW1lbnQsIHNuYXBzaG90Lm1ldGFkYXRhLCBcclxuICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5mcm9tRmlyZXN0b3JlKG5ldyBRdWVyeURvY3VtZW50U25hcHNob3QodGhpcy5fZmlyZXN0b3JlLCBleHBTbmFwc2hvdCksIG9wdGlvbnMgIT09IG51bGwgJiYgb3B0aW9ucyAhPT0gdm9pZCAwID8gb3B0aW9ucyA6IHt9KTtcclxuICAgIH1cclxuICAgIHRvRmlyZXN0b3JlKG1vZGVsT2JqZWN0LCBvcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKCFvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS50b0ZpcmVzdG9yZShtb2RlbE9iamVjdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUudG9GaXJlc3RvcmUobW9kZWxPYmplY3QsIG9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIFVzZSB0aGUgc2FtZSBpbnN0YW5jZSBvZiBgRmlyZXN0b3JlRGF0YUNvbnZlcnRlcmAgZm9yIHRoZSBnaXZlbiBpbnN0YW5jZXNcclxuICAgIC8vIG9mIGBGaXJlc3RvcmVgIGFuZCBgUHVibGljRmlyZXN0b3JlRGF0YUNvbnZlcnRlcmAgc28gdGhhdCBpc0VxdWFsKCkgd2lsbFxyXG4gICAgLy8gY29tcGFyZSBlcXVhbCBmb3IgdHdvIG9iamVjdHMgY3JlYXRlZCB3aXRoIHRoZSBzYW1lIGNvbnZlcnRlciBpbnN0YW5jZS5cclxuICAgIHN0YXRpYyBnZXRJbnN0YW5jZShmaXJlc3RvcmUsIGNvbnZlcnRlcikge1xyXG4gICAgICAgIGNvbnN0IGNvbnZlcnRlck1hcEJ5RmlyZXN0b3JlID0gRmlyZXN0b3JlRGF0YUNvbnZlcnRlci5JTlNUQU5DRVM7XHJcbiAgICAgICAgbGV0IHVudHlwZWRDb252ZXJ0ZXJCeUNvbnZlcnRlciA9IGNvbnZlcnRlck1hcEJ5RmlyZXN0b3JlLmdldChmaXJlc3RvcmUpO1xyXG4gICAgICAgIGlmICghdW50eXBlZENvbnZlcnRlckJ5Q29udmVydGVyKSB7XHJcbiAgICAgICAgICAgIHVudHlwZWRDb252ZXJ0ZXJCeUNvbnZlcnRlciA9IG5ldyBXZWFrTWFwKCk7XHJcbiAgICAgICAgICAgIGNvbnZlcnRlck1hcEJ5RmlyZXN0b3JlLnNldChmaXJlc3RvcmUsIHVudHlwZWRDb252ZXJ0ZXJCeUNvbnZlcnRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBpbnN0YW5jZSA9IHVudHlwZWRDb252ZXJ0ZXJCeUNvbnZlcnRlci5nZXQoY29udmVydGVyKTtcclxuICAgICAgICBpZiAoIWluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlID0gbmV3IEZpcmVzdG9yZURhdGFDb252ZXJ0ZXIoZmlyZXN0b3JlLCBuZXcgVXNlckRhdGFXcml0ZXIoZmlyZXN0b3JlKSwgY29udmVydGVyKTtcclxuICAgICAgICAgICAgdW50eXBlZENvbnZlcnRlckJ5Q29udmVydGVyLnNldChjb252ZXJ0ZXIsIGluc3RhbmNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xyXG4gICAgfVxyXG59XHJcbkZpcmVzdG9yZURhdGFDb252ZXJ0ZXIuSU5TVEFOQ0VTID0gbmV3IFdlYWtNYXAoKTtcclxuLyoqXHJcbiAqIEEgcmVmZXJlbmNlIHRvIGEgcGFydGljdWxhciBkb2N1bWVudCBpbiBhIGNvbGxlY3Rpb24gaW4gdGhlIGRhdGFiYXNlLlxyXG4gKi9cclxuY2xhc3MgRG9jdW1lbnRSZWZlcmVuY2Uge1xyXG4gICAgY29uc3RydWN0b3IoZmlyZXN0b3JlLCBfZGVsZWdhdGUpIHtcclxuICAgICAgICB0aGlzLmZpcmVzdG9yZSA9IGZpcmVzdG9yZTtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IF9kZWxlZ2F0ZTtcclxuICAgICAgICB0aGlzLl91c2VyRGF0YVdyaXRlciA9IG5ldyBVc2VyRGF0YVdyaXRlcihmaXJlc3RvcmUpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGZvclBhdGgocGF0aCwgZmlyZXN0b3JlLCBjb252ZXJ0ZXIpIHtcclxuICAgICAgICBpZiAocGF0aC5sZW5ndGggJSAyICE9PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcignaW52YWxpZC1hcmd1bWVudCcsICdJbnZhbGlkIGRvY3VtZW50IHJlZmVyZW5jZS4gRG9jdW1lbnQgJyArXHJcbiAgICAgICAgICAgICAgICAncmVmZXJlbmNlcyBtdXN0IGhhdmUgYW4gZXZlbiBudW1iZXIgb2Ygc2VnbWVudHMsIGJ1dCAnICtcclxuICAgICAgICAgICAgICAgIGAke3BhdGguY2Fub25pY2FsU3RyaW5nKCl9IGhhcyAke3BhdGgubGVuZ3RofWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50UmVmZXJlbmNlKGZpcmVzdG9yZSwgbmV3IERvY3VtZW50UmVmZXJlbmNlJDEoZmlyZXN0b3JlLl9kZWxlZ2F0ZSwgY29udmVydGVyLCBuZXcgX0RvY3VtZW50S2V5KHBhdGgpKSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZm9yS2V5KGtleSwgZmlyZXN0b3JlLCBjb252ZXJ0ZXIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50UmVmZXJlbmNlKGZpcmVzdG9yZSwgbmV3IERvY3VtZW50UmVmZXJlbmNlJDEoZmlyZXN0b3JlLl9kZWxlZ2F0ZSwgY29udmVydGVyLCBrZXkpKTtcclxuICAgIH1cclxuICAgIGdldCBpZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuaWQ7XHJcbiAgICB9XHJcbiAgICBnZXQgcGFyZW50KCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgQ29sbGVjdGlvblJlZmVyZW5jZSh0aGlzLmZpcmVzdG9yZSwgdGhpcy5fZGVsZWdhdGUucGFyZW50KTtcclxuICAgIH1cclxuICAgIGdldCBwYXRoKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5wYXRoO1xyXG4gICAgfVxyXG4gICAgY29sbGVjdGlvbihwYXRoU3RyaW5nKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xsZWN0aW9uUmVmZXJlbmNlKHRoaXMuZmlyZXN0b3JlLCBjb2xsZWN0aW9uKHRoaXMuX2RlbGVnYXRlLCBwYXRoU3RyaW5nKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRocm93IHJlcGxhY2VGdW5jdGlvbk5hbWUoZSwgJ2NvbGxlY3Rpb24oKScsICdEb2N1bWVudFJlZmVyZW5jZS5jb2xsZWN0aW9uKCknKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpc0VxdWFsKG90aGVyKSB7XHJcbiAgICAgICAgb3RoZXIgPSBnZXRNb2R1bGFySW5zdGFuY2Uob3RoZXIpO1xyXG4gICAgICAgIGlmICghKG90aGVyIGluc3RhbmNlb2YgRG9jdW1lbnRSZWZlcmVuY2UkMSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVmRXF1YWwodGhpcy5fZGVsZWdhdGUsIG90aGVyKTtcclxuICAgIH1cclxuICAgIHNldCh2YWx1ZSwgb3B0aW9ucykge1xyXG4gICAgICAgIG9wdGlvbnMgPSB2YWxpZGF0ZVNldE9wdGlvbnMoJ0RvY3VtZW50UmVmZXJlbmNlLnNldCcsIG9wdGlvbnMpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2V0RG9jKHRoaXMuX2RlbGVnYXRlLCB2YWx1ZSwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2V0RG9jKHRoaXMuX2RlbGVnYXRlLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgcmVwbGFjZUZ1bmN0aW9uTmFtZShlLCAnc2V0RG9jKCknLCAnRG9jdW1lbnRSZWZlcmVuY2Uuc2V0KCknKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB1cGRhdGUoZmllbGRPclVwZGF0ZURhdGEsIHZhbHVlLCAuLi5tb3JlRmllbGRzQW5kVmFsdWVzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVEb2ModGhpcy5fZGVsZWdhdGUsIGZpZWxkT3JVcGRhdGVEYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVEb2ModGhpcy5fZGVsZWdhdGUsIGZpZWxkT3JVcGRhdGVEYXRhLCB2YWx1ZSwgLi4ubW9yZUZpZWxkc0FuZFZhbHVlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgcmVwbGFjZUZ1bmN0aW9uTmFtZShlLCAndXBkYXRlRG9jKCknLCAnRG9jdW1lbnRSZWZlcmVuY2UudXBkYXRlKCknKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBkZWxldGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIGRlbGV0ZURvYyh0aGlzLl9kZWxlZ2F0ZSk7XHJcbiAgICB9XHJcbiAgICBvblNuYXBzaG90KC4uLmFyZ3MpIHtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0gZXh0cmFjdFNuYXBzaG90T3B0aW9ucyhhcmdzKTtcclxuICAgICAgICBjb25zdCBvYnNlcnZlciA9IHdyYXBPYnNlcnZlcihhcmdzLCByZXN1bHQgPT4gbmV3IERvY3VtZW50U25hcHNob3QodGhpcy5maXJlc3RvcmUsIG5ldyBEb2N1bWVudFNuYXBzaG90JDEodGhpcy5maXJlc3RvcmUuX2RlbGVnYXRlLCB0aGlzLl91c2VyRGF0YVdyaXRlciwgcmVzdWx0Ll9rZXksIHJlc3VsdC5fZG9jdW1lbnQsIHJlc3VsdC5tZXRhZGF0YSwgdGhpcy5fZGVsZWdhdGUuY29udmVydGVyKSkpO1xyXG4gICAgICAgIHJldHVybiBvblNuYXBzaG90KHRoaXMuX2RlbGVnYXRlLCBvcHRpb25zLCBvYnNlcnZlcik7XHJcbiAgICB9XHJcbiAgICBnZXQob3B0aW9ucykge1xyXG4gICAgICAgIGxldCBzbmFwO1xyXG4gICAgICAgIGlmICgob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnNvdXJjZSkgPT09ICdjYWNoZScpIHtcclxuICAgICAgICAgICAgc25hcCA9IGdldERvY0Zyb21DYWNoZSh0aGlzLl9kZWxlZ2F0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuc291cmNlKSA9PT0gJ3NlcnZlcicpIHtcclxuICAgICAgICAgICAgc25hcCA9IGdldERvY0Zyb21TZXJ2ZXIodGhpcy5fZGVsZWdhdGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgc25hcCA9IGdldERvYyh0aGlzLl9kZWxlZ2F0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzbmFwLnRoZW4ocmVzdWx0ID0+IG5ldyBEb2N1bWVudFNuYXBzaG90KHRoaXMuZmlyZXN0b3JlLCBuZXcgRG9jdW1lbnRTbmFwc2hvdCQxKHRoaXMuZmlyZXN0b3JlLl9kZWxlZ2F0ZSwgdGhpcy5fdXNlckRhdGFXcml0ZXIsIHJlc3VsdC5fa2V5LCByZXN1bHQuX2RvY3VtZW50LCByZXN1bHQubWV0YWRhdGEsIHRoaXMuX2RlbGVnYXRlLmNvbnZlcnRlcikpKTtcclxuICAgIH1cclxuICAgIHdpdGhDb252ZXJ0ZXIoY29udmVydGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFJlZmVyZW5jZSh0aGlzLmZpcmVzdG9yZSwgY29udmVydGVyXHJcbiAgICAgICAgICAgID8gdGhpcy5fZGVsZWdhdGUud2l0aENvbnZlcnRlcihGaXJlc3RvcmVEYXRhQ29udmVydGVyLmdldEluc3RhbmNlKHRoaXMuZmlyZXN0b3JlLCBjb252ZXJ0ZXIpKVxyXG4gICAgICAgICAgICA6IHRoaXMuX2RlbGVnYXRlLndpdGhDb252ZXJ0ZXIobnVsbCkpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBSZXBsYWNlcyB0aGUgZnVuY3Rpb24gbmFtZSBpbiBhbiBlcnJvciB0aHJvd24gYnkgdGhlIGZpcmVzdG9yZS1leHAgQVBJXHJcbiAqIHdpdGggdGhlIGZ1bmN0aW9uIG5hbWVzIHVzZWQgaW4gdGhlIGNsYXNzaWMgQVBJLlxyXG4gKi9cclxuZnVuY3Rpb24gcmVwbGFjZUZ1bmN0aW9uTmFtZShlLCBvcmlnaW5hbCwgdXBkYXRlZCkge1xyXG4gICAgZS5tZXNzYWdlID0gZS5tZXNzYWdlLnJlcGxhY2Uob3JpZ2luYWwsIHVwZGF0ZWQpO1xyXG4gICAgcmV0dXJuIGU7XHJcbn1cclxuLyoqXHJcbiAqIEl0ZXJhdGVzIHRoZSBsaXN0IG9mIGFyZ3VtZW50cyBmcm9tIGFuIGBvblNuYXBzaG90YCBjYWxsIGFuZCByZXR1cm5zIHRoZVxyXG4gKiBmaXJzdCBhcmd1bWVudCB0aGF0IG1heSBiZSBhbiBgU25hcHNob3RMaXN0ZW5PcHRpb25zYCBvYmplY3QuIFJldHVybnMgYW5cclxuICogZW1wdHkgb2JqZWN0IGlmIG5vbmUgaXMgZm91bmQuXHJcbiAqL1xyXG5mdW5jdGlvbiBleHRyYWN0U25hcHNob3RPcHRpb25zKGFyZ3MpIHtcclxuICAgIGZvciAoY29uc3QgYXJnIG9mIGFyZ3MpIHtcclxuICAgICAgICBpZiAodHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgIWlzUGFydGlhbE9ic2VydmVyKGFyZykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFyZztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge307XHJcbn1cclxuLyoqXHJcbiAqIENyZWF0ZXMgYW4gb2JzZXJ2ZXIgdGhhdCBjYW4gYmUgcGFzc2VkIHRvIHRoZSBmaXJlc3RvcmUtZXhwIFNESy4gVGhlXHJcbiAqIG9ic2VydmVyIGNvbnZlcnRzIGFsbCBvYnNlcnZlZCB2YWx1ZXMgaW50byB0aGUgZm9ybWF0IGV4cGVjdGVkIGJ5IHRoZSBjbGFzc2ljXHJcbiAqIFNESy5cclxuICpcclxuICogQHBhcmFtIGFyZ3MgLSBUaGUgbGlzdCBvZiBhcmd1bWVudHMgZnJvbSBhbiBgb25TbmFwc2hvdGAgY2FsbC5cclxuICogQHBhcmFtIHdyYXBwZXIgLSBUaGUgZnVuY3Rpb24gdGhhdCBjb252ZXJ0cyB0aGUgZmlyZXN0b3JlLWV4cCB0eXBlIGludG8gdGhlXHJcbiAqIHR5cGUgdXNlZCBieSB0aGlzIHNoaW0uXHJcbiAqL1xyXG5mdW5jdGlvbiB3cmFwT2JzZXJ2ZXIoYXJncywgd3JhcHBlcikge1xyXG4gICAgdmFyIF9hLCBfYjtcclxuICAgIGxldCB1c2VyT2JzZXJ2ZXI7XHJcbiAgICBpZiAoaXNQYXJ0aWFsT2JzZXJ2ZXIoYXJnc1swXSkpIHtcclxuICAgICAgICB1c2VyT2JzZXJ2ZXIgPSBhcmdzWzBdO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaXNQYXJ0aWFsT2JzZXJ2ZXIoYXJnc1sxXSkpIHtcclxuICAgICAgICB1c2VyT2JzZXJ2ZXIgPSBhcmdzWzFdO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZW9mIGFyZ3NbMF0gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB1c2VyT2JzZXJ2ZXIgPSB7XHJcbiAgICAgICAgICAgIG5leHQ6IGFyZ3NbMF0sXHJcbiAgICAgICAgICAgIGVycm9yOiBhcmdzWzFdLFxyXG4gICAgICAgICAgICBjb21wbGV0ZTogYXJnc1syXVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB1c2VyT2JzZXJ2ZXIgPSB7XHJcbiAgICAgICAgICAgIG5leHQ6IGFyZ3NbMV0sXHJcbiAgICAgICAgICAgIGVycm9yOiBhcmdzWzJdLFxyXG4gICAgICAgICAgICBjb21wbGV0ZTogYXJnc1szXVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IHZhbCA9PiB7XHJcbiAgICAgICAgICAgIGlmICh1c2VyT2JzZXJ2ZXIubmV4dCkge1xyXG4gICAgICAgICAgICAgICAgdXNlck9ic2VydmVyLm5leHQod3JhcHBlcih2YWwpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXJyb3I6IChfYSA9IHVzZXJPYnNlcnZlci5lcnJvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmJpbmQodXNlck9ic2VydmVyKSxcclxuICAgICAgICBjb21wbGV0ZTogKF9iID0gdXNlck9ic2VydmVyLmNvbXBsZXRlKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuYmluZCh1c2VyT2JzZXJ2ZXIpXHJcbiAgICB9O1xyXG59XHJcbmNsYXNzIERvY3VtZW50U25hcHNob3Qge1xyXG4gICAgY29uc3RydWN0b3IoX2ZpcmVzdG9yZSwgX2RlbGVnYXRlKSB7XHJcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gX2ZpcmVzdG9yZTtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IF9kZWxlZ2F0ZTtcclxuICAgIH1cclxuICAgIGdldCByZWYoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFJlZmVyZW5jZSh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX2RlbGVnYXRlLnJlZik7XHJcbiAgICB9XHJcbiAgICBnZXQgaWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmlkO1xyXG4gICAgfVxyXG4gICAgZ2V0IG1ldGFkYXRhKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5tZXRhZGF0YTtcclxuICAgIH1cclxuICAgIGdldCBleGlzdHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmV4aXN0cygpO1xyXG4gICAgfVxyXG4gICAgZGF0YShvcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmRhdGEob3B0aW9ucyk7XHJcbiAgICB9XHJcbiAgICBnZXQoZmllbGRQYXRoLCBvcHRpb25zXHJcbiAgICAvLyBXZSBhcmUgdXNpbmcgYGFueWAgaGVyZSB0byBhdm9pZCBhbiBleHBsaWNpdCBjYXN0IGJ5IG91ciB1c2Vycy5cclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuZ2V0KGZpZWxkUGF0aCwgb3B0aW9ucyk7XHJcbiAgICB9XHJcbiAgICBpc0VxdWFsKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHNuYXBzaG90RXF1YWwodGhpcy5fZGVsZWdhdGUsIG90aGVyLl9kZWxlZ2F0ZSk7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgUXVlcnlEb2N1bWVudFNuYXBzaG90IGV4dGVuZHMgRG9jdW1lbnRTbmFwc2hvdCB7XHJcbiAgICBkYXRhKG9wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5fZGVsZWdhdGUuZGF0YShvcHRpb25zKTtcclxuICAgICAgICBfZGVidWdBc3NlcnQoZGF0YSAhPT0gdW5kZWZpbmVkLCAnRG9jdW1lbnQgaW4gYSBRdWVyeURvY3VtZW50U25hcHNob3Qgc2hvdWxkIGV4aXN0Jyk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgUXVlcnkge1xyXG4gICAgY29uc3RydWN0b3IoZmlyZXN0b3JlLCBfZGVsZWdhdGUpIHtcclxuICAgICAgICB0aGlzLmZpcmVzdG9yZSA9IGZpcmVzdG9yZTtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IF9kZWxlZ2F0ZTtcclxuICAgICAgICB0aGlzLl91c2VyRGF0YVdyaXRlciA9IG5ldyBVc2VyRGF0YVdyaXRlcihmaXJlc3RvcmUpO1xyXG4gICAgfVxyXG4gICAgd2hlcmUoZmllbGRQYXRoLCBvcFN0ciwgdmFsdWUpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBUaGUgXCJhcyBzdHJpbmdcIiBjYXN0IGlzIGEgbGl0dGxlIGJpdCBvZiBhIGhhY2suIGB3aGVyZWAgYWNjZXB0cyB0aGVcclxuICAgICAgICAgICAgLy8gRmllbGRQYXRoIENvbXBhdCB0eXBlIGFzIGlucHV0LCBidXQgaXMgbm90IHR5cGVkIGFzIHN1Y2ggaW4gb3JkZXIgdG9cclxuICAgICAgICAgICAgLy8gbm90IGV4cG9zZSB0aGlzIHZpYSBvdXIgcHVibGljIHR5cGluZ3MgZmlsZS5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLmZpcmVzdG9yZSwgcXVlcnkodGhpcy5fZGVsZWdhdGUsIHdoZXJlKGZpZWxkUGF0aCwgb3BTdHIsIHZhbHVlKSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aHJvdyByZXBsYWNlRnVuY3Rpb25OYW1lKGUsIC8ob3JkZXJCeXx3aGVyZSlcXChcXCkvLCAnUXVlcnkuJDEoKScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9yZGVyQnkoZmllbGRQYXRoLCBkaXJlY3Rpb25TdHIpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBUaGUgXCJhcyBzdHJpbmdcIiBjYXN0IGlzIGEgbGl0dGxlIGJpdCBvZiBhIGhhY2suIGBvcmRlckJ5YCBhY2NlcHRzIHRoZVxyXG4gICAgICAgICAgICAvLyBGaWVsZFBhdGggQ29tcGF0IHR5cGUgYXMgaW5wdXQsIGJ1dCBpcyBub3QgdHlwZWQgYXMgc3VjaCBpbiBvcmRlciB0b1xyXG4gICAgICAgICAgICAvLyBub3QgZXhwb3NlIHRoaXMgdmlhIG91ciBwdWJsaWMgdHlwaW5ncyBmaWxlLlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMuZmlyZXN0b3JlLCBxdWVyeSh0aGlzLl9kZWxlZ2F0ZSwgb3JkZXJCeShmaWVsZFBhdGgsIGRpcmVjdGlvblN0cikpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgcmVwbGFjZUZ1bmN0aW9uTmFtZShlLCAvKG9yZGVyQnl8d2hlcmUpXFwoXFwpLywgJ1F1ZXJ5LiQxKCknKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBsaW1pdChuKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLmZpcmVzdG9yZSwgcXVlcnkodGhpcy5fZGVsZWdhdGUsIGxpbWl0KG4pKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRocm93IHJlcGxhY2VGdW5jdGlvbk5hbWUoZSwgJ2xpbWl0KCknLCAnUXVlcnkubGltaXQoKScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGxpbWl0VG9MYXN0KG4pIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMuZmlyZXN0b3JlLCBxdWVyeSh0aGlzLl9kZWxlZ2F0ZSwgbGltaXRUb0xhc3QobikpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgcmVwbGFjZUZ1bmN0aW9uTmFtZShlLCAnbGltaXRUb0xhc3QoKScsICdRdWVyeS5saW1pdFRvTGFzdCgpJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc3RhcnRBdCguLi5hcmdzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLmZpcmVzdG9yZSwgcXVlcnkodGhpcy5fZGVsZWdhdGUsIHN0YXJ0QXQoLi4uYXJncykpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgcmVwbGFjZUZ1bmN0aW9uTmFtZShlLCAnc3RhcnRBdCgpJywgJ1F1ZXJ5LnN0YXJ0QXQoKScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHN0YXJ0QWZ0ZXIoLi4uYXJncykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5maXJlc3RvcmUsIHF1ZXJ5KHRoaXMuX2RlbGVnYXRlLCBzdGFydEFmdGVyKC4uLmFyZ3MpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRocm93IHJlcGxhY2VGdW5jdGlvbk5hbWUoZSwgJ3N0YXJ0QWZ0ZXIoKScsICdRdWVyeS5zdGFydEFmdGVyKCknKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbmRCZWZvcmUoLi4uYXJncykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5maXJlc3RvcmUsIHF1ZXJ5KHRoaXMuX2RlbGVnYXRlLCBlbmRCZWZvcmUoLi4uYXJncykpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgcmVwbGFjZUZ1bmN0aW9uTmFtZShlLCAnZW5kQmVmb3JlKCknLCAnUXVlcnkuZW5kQmVmb3JlKCknKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbmRBdCguLi5hcmdzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLmZpcmVzdG9yZSwgcXVlcnkodGhpcy5fZGVsZWdhdGUsIGVuZEF0KC4uLmFyZ3MpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRocm93IHJlcGxhY2VGdW5jdGlvbk5hbWUoZSwgJ2VuZEF0KCknLCAnUXVlcnkuZW5kQXQoKScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlzRXF1YWwob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gcXVlcnlFcXVhbCh0aGlzLl9kZWxlZ2F0ZSwgb3RoZXIuX2RlbGVnYXRlKTtcclxuICAgIH1cclxuICAgIGdldChvcHRpb25zKSB7XHJcbiAgICAgICAgbGV0IHF1ZXJ5O1xyXG4gICAgICAgIGlmICgob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnNvdXJjZSkgPT09ICdjYWNoZScpIHtcclxuICAgICAgICAgICAgcXVlcnkgPSBnZXREb2NzRnJvbUNhY2hlKHRoaXMuX2RlbGVnYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5zb3VyY2UpID09PSAnc2VydmVyJykge1xyXG4gICAgICAgICAgICBxdWVyeSA9IGdldERvY3NGcm9tU2VydmVyKHRoaXMuX2RlbGVnYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5ID0gZ2V0RG9jcyh0aGlzLl9kZWxlZ2F0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBxdWVyeS50aGVuKHJlc3VsdCA9PiBuZXcgUXVlcnlTbmFwc2hvdCh0aGlzLmZpcmVzdG9yZSwgbmV3IFF1ZXJ5U25hcHNob3QkMSh0aGlzLmZpcmVzdG9yZS5fZGVsZWdhdGUsIHRoaXMuX3VzZXJEYXRhV3JpdGVyLCB0aGlzLl9kZWxlZ2F0ZSwgcmVzdWx0Ll9zbmFwc2hvdCkpKTtcclxuICAgIH1cclxuICAgIG9uU25hcHNob3QoLi4uYXJncykge1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSBleHRyYWN0U25hcHNob3RPcHRpb25zKGFyZ3MpO1xyXG4gICAgICAgIGNvbnN0IG9ic2VydmVyID0gd3JhcE9ic2VydmVyKGFyZ3MsIHNuYXAgPT4gbmV3IFF1ZXJ5U25hcHNob3QodGhpcy5maXJlc3RvcmUsIG5ldyBRdWVyeVNuYXBzaG90JDEodGhpcy5maXJlc3RvcmUuX2RlbGVnYXRlLCB0aGlzLl91c2VyRGF0YVdyaXRlciwgdGhpcy5fZGVsZWdhdGUsIHNuYXAuX3NuYXBzaG90KSkpO1xyXG4gICAgICAgIHJldHVybiBvblNuYXBzaG90KHRoaXMuX2RlbGVnYXRlLCBvcHRpb25zLCBvYnNlcnZlcik7XHJcbiAgICB9XHJcbiAgICB3aXRoQ29udmVydGVyKGNvbnZlcnRlcikge1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5maXJlc3RvcmUsIGNvbnZlcnRlclxyXG4gICAgICAgICAgICA/IHRoaXMuX2RlbGVnYXRlLndpdGhDb252ZXJ0ZXIoRmlyZXN0b3JlRGF0YUNvbnZlcnRlci5nZXRJbnN0YW5jZSh0aGlzLmZpcmVzdG9yZSwgY29udmVydGVyKSlcclxuICAgICAgICAgICAgOiB0aGlzLl9kZWxlZ2F0ZS53aXRoQ29udmVydGVyKG51bGwpKTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBEb2N1bWVudENoYW5nZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihfZmlyZXN0b3JlLCBfZGVsZWdhdGUpIHtcclxuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSBfZmlyZXN0b3JlO1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlID0gX2RlbGVnYXRlO1xyXG4gICAgfVxyXG4gICAgZ2V0IHR5cGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnR5cGU7XHJcbiAgICB9XHJcbiAgICBnZXQgZG9jKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnlEb2N1bWVudFNuYXBzaG90KHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fZGVsZWdhdGUuZG9jKTtcclxuICAgIH1cclxuICAgIGdldCBvbGRJbmRleCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUub2xkSW5kZXg7XHJcbiAgICB9XHJcbiAgICBnZXQgbmV3SW5kZXgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLm5ld0luZGV4O1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIFF1ZXJ5U25hcHNob3Qge1xyXG4gICAgY29uc3RydWN0b3IoX2ZpcmVzdG9yZSwgX2RlbGVnYXRlKSB7XHJcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gX2ZpcmVzdG9yZTtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IF9kZWxlZ2F0ZTtcclxuICAgIH1cclxuICAgIGdldCBxdWVyeSgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fZGVsZWdhdGUucXVlcnkpO1xyXG4gICAgfVxyXG4gICAgZ2V0IG1ldGFkYXRhKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5tZXRhZGF0YTtcclxuICAgIH1cclxuICAgIGdldCBzaXplKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5zaXplO1xyXG4gICAgfVxyXG4gICAgZ2V0IGVtcHR5KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5lbXB0eTtcclxuICAgIH1cclxuICAgIGdldCBkb2NzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5kb2NzLm1hcChkb2MgPT4gbmV3IFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCh0aGlzLl9maXJlc3RvcmUsIGRvYykpO1xyXG4gICAgfVxyXG4gICAgZG9jQ2hhbmdlcyhvcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlXHJcbiAgICAgICAgICAgIC5kb2NDaGFuZ2VzKG9wdGlvbnMpXHJcbiAgICAgICAgICAgIC5tYXAoZG9jQ2hhbmdlID0+IG5ldyBEb2N1bWVudENoYW5nZSh0aGlzLl9maXJlc3RvcmUsIGRvY0NoYW5nZSkpO1xyXG4gICAgfVxyXG4gICAgZm9yRWFjaChjYWxsYmFjaywgdGhpc0FyZykge1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlLmZvckVhY2goc25hcHNob3QgPT4ge1xyXG4gICAgICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIG5ldyBRdWVyeURvY3VtZW50U25hcHNob3QodGhpcy5fZmlyZXN0b3JlLCBzbmFwc2hvdCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaXNFcXVhbChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiBzbmFwc2hvdEVxdWFsKHRoaXMuX2RlbGVnYXRlLCBvdGhlci5fZGVsZWdhdGUpO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIENvbGxlY3Rpb25SZWZlcmVuY2UgZXh0ZW5kcyBRdWVyeSB7XHJcbiAgICBjb25zdHJ1Y3RvcihmaXJlc3RvcmUsIF9kZWxlZ2F0ZSkge1xyXG4gICAgICAgIHN1cGVyKGZpcmVzdG9yZSwgX2RlbGVnYXRlKTtcclxuICAgICAgICB0aGlzLmZpcmVzdG9yZSA9IGZpcmVzdG9yZTtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IF9kZWxlZ2F0ZTtcclxuICAgIH1cclxuICAgIGdldCBpZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuaWQ7XHJcbiAgICB9XHJcbiAgICBnZXQgcGF0aCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUucGF0aDtcclxuICAgIH1cclxuICAgIGdldCBwYXJlbnQoKSB7XHJcbiAgICAgICAgY29uc3QgZG9jUmVmID0gdGhpcy5fZGVsZWdhdGUucGFyZW50O1xyXG4gICAgICAgIHJldHVybiBkb2NSZWYgPyBuZXcgRG9jdW1lbnRSZWZlcmVuY2UodGhpcy5maXJlc3RvcmUsIGRvY1JlZikgOiBudWxsO1xyXG4gICAgfVxyXG4gICAgZG9jKGRvY3VtZW50UGF0aCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChkb2N1bWVudFBhdGggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQ2FsbCBgZG9jYCB3aXRob3V0IGBkb2N1bWVudFBhdGhgIGlmIGBkb2N1bWVudFBhdGhgIGlzIGB1bmRlZmluZWRgXHJcbiAgICAgICAgICAgICAgICAvLyBhcyBgZG9jYCB2YWxpZGF0ZXMgdGhlIG51bWJlciBvZiBhcmd1bWVudHMgdG8gcHJldmVudCB1c2VycyBmcm9tXHJcbiAgICAgICAgICAgICAgICAvLyBhY2NpZGVudGFsbHkgcGFzc2luZyBgdW5kZWZpbmVkYC5cclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRSZWZlcmVuY2UodGhpcy5maXJlc3RvcmUsIGRvYyh0aGlzLl9kZWxlZ2F0ZSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFJlZmVyZW5jZSh0aGlzLmZpcmVzdG9yZSwgZG9jKHRoaXMuX2RlbGVnYXRlLCBkb2N1bWVudFBhdGgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aHJvdyByZXBsYWNlRnVuY3Rpb25OYW1lKGUsICdkb2MoKScsICdDb2xsZWN0aW9uUmVmZXJlbmNlLmRvYygpJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYWRkKGRhdGEpIHtcclxuICAgICAgICByZXR1cm4gYWRkRG9jKHRoaXMuX2RlbGVnYXRlLCBkYXRhKS50aGVuKGRvY1JlZiA9PiBuZXcgRG9jdW1lbnRSZWZlcmVuY2UodGhpcy5maXJlc3RvcmUsIGRvY1JlZikpO1xyXG4gICAgfVxyXG4gICAgaXNFcXVhbChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiByZWZFcXVhbCh0aGlzLl9kZWxlZ2F0ZSwgb3RoZXIuX2RlbGVnYXRlKTtcclxuICAgIH1cclxuICAgIHdpdGhDb252ZXJ0ZXIoY29udmVydGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xsZWN0aW9uUmVmZXJlbmNlKHRoaXMuZmlyZXN0b3JlLCBjb252ZXJ0ZXJcclxuICAgICAgICAgICAgPyB0aGlzLl9kZWxlZ2F0ZS53aXRoQ29udmVydGVyKEZpcmVzdG9yZURhdGFDb252ZXJ0ZXIuZ2V0SW5zdGFuY2UodGhpcy5maXJlc3RvcmUsIGNvbnZlcnRlcikpXHJcbiAgICAgICAgICAgIDogdGhpcy5fZGVsZWdhdGUud2l0aENvbnZlcnRlcihudWxsKSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gY2FzdFJlZmVyZW5jZShkb2N1bWVudFJlZikge1xyXG4gICAgcmV0dXJuIF9jYXN0KGRvY3VtZW50UmVmLCBEb2N1bWVudFJlZmVyZW5jZSQxKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBUaGUgb2JqZWN0cyB0aGF0IGFyZSBhIHBhcnQgb2YgdGhpcyBBUEkgYXJlIGV4cG9zZWQgdG8gdGhpcmQtcGFydGllcyBhc1xyXG4vLyBjb21waWxlZCBqYXZhc2NyaXB0IHNvIHdlIHdhbnQgdG8gZmxhZyBvdXIgcHJpdmF0ZSBtZW1iZXJzIHdpdGggYSBsZWFkaW5nXHJcbi8vIHVuZGVyc2NvcmUgdG8gZGlzY291cmFnZSB0aGVpciB1c2UuXHJcbi8qKlxyXG4gKiBBIGBGaWVsZFBhdGhgIHJlZmVycyB0byBhIGZpZWxkIGluIGEgZG9jdW1lbnQuIFRoZSBwYXRoIG1heSBjb25zaXN0IG9mIGFcclxuICogc2luZ2xlIGZpZWxkIG5hbWUgKHJlZmVycmluZyB0byBhIHRvcC1sZXZlbCBmaWVsZCBpbiB0aGUgZG9jdW1lbnQpLCBvciBhIGxpc3RcclxuICogb2YgZmllbGQgbmFtZXMgKHJlZmVycmluZyB0byBhIG5lc3RlZCBmaWVsZCBpbiB0aGUgZG9jdW1lbnQpLlxyXG4gKi9cclxuY2xhc3MgRmllbGRQYXRoIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIEZpZWxkUGF0aCBmcm9tIHRoZSBwcm92aWRlZCBmaWVsZCBuYW1lcy4gSWYgbW9yZSB0aGFuIG9uZSBmaWVsZFxyXG4gICAgICogbmFtZSBpcyBwcm92aWRlZCwgdGhlIHBhdGggd2lsbCBwb2ludCB0byBhIG5lc3RlZCBmaWVsZCBpbiBhIGRvY3VtZW50LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBmaWVsZE5hbWVzIC0gQSBsaXN0IG9mIGZpZWxkIG5hbWVzLlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvciguLi5maWVsZE5hbWVzKSB7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUgPSBuZXcgRmllbGRQYXRoJDEoLi4uZmllbGROYW1lcyk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZG9jdW1lbnRJZCgpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJbnRlcm5hbCBOb3RlOiBUaGUgYmFja2VuZCBkb2Vzbid0IHRlY2huaWNhbGx5IHN1cHBvcnQgcXVlcnlpbmcgYnlcclxuICAgICAgICAgKiBkb2N1bWVudCBJRC4gSW5zdGVhZCBpdCBxdWVyaWVzIGJ5IHRoZSBlbnRpcmUgZG9jdW1lbnQgbmFtZSAoZnVsbCBwYXRoXHJcbiAgICAgICAgICogaW5jbHVkZWQpLCBidXQgaW4gdGhlIGNhc2VzIHdlIGN1cnJlbnRseSBzdXBwb3J0IGRvY3VtZW50SWQoKSwgdGhlIG5ldFxyXG4gICAgICAgICAqIGVmZmVjdCBpcyB0aGUgc2FtZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICByZXR1cm4gbmV3IEZpZWxkUGF0aChfRmllbGRQYXRoLmtleUZpZWxkKCkuY2Fub25pY2FsU3RyaW5nKCkpO1xyXG4gICAgfVxyXG4gICAgaXNFcXVhbChvdGhlcikge1xyXG4gICAgICAgIG90aGVyID0gZ2V0TW9kdWxhckluc3RhbmNlKG90aGVyKTtcclxuICAgICAgICBpZiAoIShvdGhlciBpbnN0YW5jZW9mIEZpZWxkUGF0aCQxKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5faW50ZXJuYWxQYXRoLmlzRXF1YWwob3RoZXIuX2ludGVybmFsUGF0aCk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgRmllbGRWYWx1ZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihfZGVsZWdhdGUpIHtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IF9kZWxlZ2F0ZTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBzZXJ2ZXJUaW1lc3RhbXAoKSB7XHJcbiAgICAgICAgY29uc3QgZGVsZWdhdGUgPSBzZXJ2ZXJUaW1lc3RhbXAoKTtcclxuICAgICAgICBkZWxlZ2F0ZS5fbWV0aG9kTmFtZSA9ICdGaWVsZFZhbHVlLnNlcnZlclRpbWVzdGFtcCc7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFZhbHVlKGRlbGVnYXRlKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBkZWxldGUoKSB7XHJcbiAgICAgICAgY29uc3QgZGVsZWdhdGUgPSBkZWxldGVGaWVsZCgpO1xyXG4gICAgICAgIGRlbGVnYXRlLl9tZXRob2ROYW1lID0gJ0ZpZWxkVmFsdWUuZGVsZXRlJztcclxuICAgICAgICByZXR1cm4gbmV3IEZpZWxkVmFsdWUoZGVsZWdhdGUpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGFycmF5VW5pb24oLi4uZWxlbWVudHMpIHtcclxuICAgICAgICBjb25zdCBkZWxlZ2F0ZSA9IGFycmF5VW5pb24oLi4uZWxlbWVudHMpO1xyXG4gICAgICAgIGRlbGVnYXRlLl9tZXRob2ROYW1lID0gJ0ZpZWxkVmFsdWUuYXJyYXlVbmlvbic7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFZhbHVlKGRlbGVnYXRlKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBhcnJheVJlbW92ZSguLi5lbGVtZW50cykge1xyXG4gICAgICAgIGNvbnN0IGRlbGVnYXRlID0gYXJyYXlSZW1vdmUoLi4uZWxlbWVudHMpO1xyXG4gICAgICAgIGRlbGVnYXRlLl9tZXRob2ROYW1lID0gJ0ZpZWxkVmFsdWUuYXJyYXlSZW1vdmUnO1xyXG4gICAgICAgIHJldHVybiBuZXcgRmllbGRWYWx1ZShkZWxlZ2F0ZSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgaW5jcmVtZW50KG4pIHtcclxuICAgICAgICBjb25zdCBkZWxlZ2F0ZSA9IGluY3JlbWVudChuKTtcclxuICAgICAgICBkZWxlZ2F0ZS5fbWV0aG9kTmFtZSA9ICdGaWVsZFZhbHVlLmluY3JlbWVudCc7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFZhbHVlKGRlbGVnYXRlKTtcclxuICAgIH1cclxuICAgIGlzRXF1YWwob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuaXNFcXVhbChvdGhlci5fZGVsZWdhdGUpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IGZpcmVzdG9yZU5hbWVzcGFjZSA9IHtcclxuICAgIEZpcmVzdG9yZSxcclxuICAgIEdlb1BvaW50LFxyXG4gICAgVGltZXN0YW1wLFxyXG4gICAgQmxvYixcclxuICAgIFRyYW5zYWN0aW9uLFxyXG4gICAgV3JpdGVCYXRjaCxcclxuICAgIERvY3VtZW50UmVmZXJlbmNlLFxyXG4gICAgRG9jdW1lbnRTbmFwc2hvdCxcclxuICAgIFF1ZXJ5LFxyXG4gICAgUXVlcnlEb2N1bWVudFNuYXBzaG90LFxyXG4gICAgUXVlcnlTbmFwc2hvdCxcclxuICAgIENvbGxlY3Rpb25SZWZlcmVuY2UsXHJcbiAgICBGaWVsZFBhdGgsXHJcbiAgICBGaWVsZFZhbHVlLFxyXG4gICAgc2V0TG9nTGV2ZWwsXHJcbiAgICBDQUNIRV9TSVpFX1VOTElNSVRFRFxyXG59O1xyXG4vKipcclxuICogQ29uZmlndXJlcyBGaXJlc3RvcmUgYXMgcGFydCBvZiB0aGUgRmlyZWJhc2UgU0RLIGJ5IGNhbGxpbmcgcmVnaXN0ZXJDb21wb25lbnQuXHJcbiAqXHJcbiAqIEBwYXJhbSBmaXJlYmFzZSAtIFRoZSBGaXJlYmFzZU5hbWVzcGFjZSB0byByZWdpc3RlciBGaXJlc3RvcmUgd2l0aFxyXG4gKiBAcGFyYW0gZmlyZXN0b3JlRmFjdG9yeSAtIEEgZmFjdG9yeSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBuZXcgRmlyZXN0b3JlXHJcbiAqICAgIGluc3RhbmNlLlxyXG4gKi9cclxuZnVuY3Rpb24gY29uZmlndXJlRm9yRmlyZWJhc2UoZmlyZWJhc2UsIGZpcmVzdG9yZUZhY3RvcnkpIHtcclxuICAgIGZpcmViYXNlLklOVEVSTkFMLnJlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ2ZpcmVzdG9yZS1jb21wYXQnLCBjb250YWluZXIgPT4ge1xyXG4gICAgICAgIGNvbnN0IGFwcCA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignYXBwLWNvbXBhdCcpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIGNvbnN0IGZpcmVzdG9yZUV4cCA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignZmlyZXN0b3JlJykuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgcmV0dXJuIGZpcmVzdG9yZUZhY3RvcnkoYXBwLCBmaXJlc3RvcmVFeHApO1xyXG4gICAgfSwgJ1BVQkxJQycpLnNldFNlcnZpY2VQcm9wcyhPYmplY3QuYXNzaWduKHt9LCBmaXJlc3RvcmVOYW1lc3BhY2UpKSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJlZ2lzdGVycyB0aGUgbWFpbiBGaXJlc3RvcmUgYnVpbGQgd2l0aCB0aGUgY29tcG9uZW50cyBmcmFtZXdvcmsuXHJcbiAqIFBlcnNpc3RlbmNlIGNhbiBiZSBlbmFibGVkIHZpYSBgZmlyZWJhc2UuZmlyZXN0b3JlKCkuZW5hYmxlUGVyc2lzdGVuY2UoKWAuXHJcbiAqL1xyXG5mdW5jdGlvbiByZWdpc3RlckZpcmVzdG9yZShpbnN0YW5jZSkge1xyXG4gICAgY29uZmlndXJlRm9yRmlyZWJhc2UoaW5zdGFuY2UsIChhcHAsIGZpcmVzdG9yZUV4cCkgPT4gbmV3IEZpcmVzdG9yZShhcHAsIGZpcmVzdG9yZUV4cCwgbmV3IEluZGV4ZWREYlBlcnNpc3RlbmNlUHJvdmlkZXIoKSkpO1xyXG4gICAgaW5zdGFuY2UucmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24pO1xyXG59XHJcbnJlZ2lzdGVyRmlyZXN0b3JlKGZpcmViYXNlKTtcblxuZXhwb3J0IHsgcmVnaXN0ZXJGaXJlc3RvcmUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iXSwic291cmNlUm9vdCI6IiJ9