/*
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

var sharded=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=2)}([function(t,e){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);t.exports=function(){return r(n),n}}else{var o=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}},function(t,e){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);t.exports=function(t,e){var n=e||0,o=r;return[o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]]].join("")}},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function s(t){try{a(n.next(t))}catch(t){i(t)}}function u(t){try{a(n.throw(t))}catch(t){i(t)}}function a(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(s,u)}a((n=n.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(3),s="_counter_shards_",u="FIRESTORE_COUNTER_SHARD_ID",a=function(){function t(t,e){this.doc=t,this.field=e,this.db=null,this.shardId="",this.shards={},this.notifyPromise=null,this.db=t.firestore,this.shardId=function(t){var e=new RegExp("(?:^|; )"+encodeURIComponent(t)+"=([^;]*)").exec(document.cookie);if(e)return e[1];var r=i.v4(),n=new Date;n.setTime(n.getTime()+2592e6);var o="; expires="+n.toUTCString();return document.cookie=encodeURIComponent(t)+"="+r+o+"; path=/",r}(u);var r=t.collection(s);this.shards[t.path]=0,this.shards[r.doc(this.shardId).path]=0,this.shards[r.doc("\t"+this.shardId.substr(0,4)).path]=0,this.shards[r.doc("\t\t"+this.shardId.substr(0,3)).path]=0,this.shards[r.doc("\t\t\t"+this.shardId.substr(0,2)).path]=0,this.shards[r.doc("\t\t\t\t"+this.shardId.substr(0,1)).path]=0}return t.prototype.get=function(t){return n(this,void 0,void 0,function(){var e,r=this;return o(this,function(i){switch(i.label){case 0:return e=Object.keys(this.shards).map(function(e){return n(r,void 0,void 0,function(){return o(this,function(r){switch(r.label){case 0:return[4,this.db.doc(e).get(t)];case 1:return[2,r.sent().get(this.field)||0]}})})}),[4,Promise.all(e)];case 1:return[2,i.sent().reduce(function(t,e){return t+e},0)]}})})},t.prototype.onSnapshot=function(t){var e=this;Object.keys(this.shards).forEach(function(r){e.db.doc(r).onSnapshot(function(r){e.shards[r.ref.path]=r.get(e.field)||0,null===e.notifyPromise&&(e.notifyPromise=function(t){return n(this,void 0,void 0,function(){var e=this;return o(this,function(r){return[2,new Promise(function(r){return n(e,void 0,void 0,function(){var e=this;return o(this,function(i){return setTimeout(function(){return n(e,void 0,void 0,function(){var e;return o(this,function(n){return e=t(),r(e),[2]})})},0),[2]})})})]})})}(function(){var r=Object.values(e.shards).reduce(function(t,e){return t+e},0);t({exists:!0,data:function(){return r}}),e.notifyPromise=null}))})})},t.prototype.incrementBy=function(t){var e=firebase.firestore.FieldValue.increment(t),r=this.field.split(".").reverse().reduce(function(t,e){var r;return(r={})[e]=t,r},e);return this.doc.collection(s).doc(this.shardId).set(r,{merge:!0})},t.prototype.shard=function(){return this.doc.collection(s).doc(this.shardId)},t}();e.Counter=a},function(t,e,r){var n=r(4),o=r(5),i=o;i.v1=n,i.v4=o,t.exports=i},function(t,e,r){var n,o,i=r(0),s=r(1),u=0,a=0;t.exports=function(t,e,r){var c=e&&r||0,f=e||[],d=(t=t||{}).node||n,l=void 0!==t.clockseq?t.clockseq:o;if(null==d||null==l){var h=i();null==d&&(d=n=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==l&&(l=o=16383&(h[6]<<8|h[7]))}var p=void 0!==t.msecs?t.msecs:(new Date).getTime(),v=void 0!==t.nsecs?t.nsecs:a+1,y=p-u+(v-a)/1e4;if(y<0&&void 0===t.clockseq&&(l=l+1&16383),(y<0||p>u)&&void 0===t.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=p,a=v,o=l;var b=(1e4*(268435455&(p+=122192928e5))+v)%4294967296;f[c++]=b>>>24&255,f[c++]=b>>>16&255,f[c++]=b>>>8&255,f[c++]=255&b;var m=p/4294967296*1e4&268435455;f[c++]=m>>>8&255,f[c++]=255&m,f[c++]=m>>>24&15|16,f[c++]=m>>>16&255,f[c++]=l>>>8|128,f[c++]=255&l;for(var g=0;g<6;++g)f[c+g]=d[g];return e||s(f)}},function(t,e,r){var n=r(0),o=r(1);t.exports=function(t,e,r){var i=e&&r||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var s=(t=t||{}).random||(t.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e)for(var u=0;u<16;++u)e[i+u]=s[u];return e||o(s)}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zaGFyZGVkL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3NoYXJkZWQvLi9ub2RlX21vZHVsZXMvdXVpZC9saWIvcm5nLWJyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vc2hhcmRlZC8uL25vZGVfbW9kdWxlcy91dWlkL2xpYi9ieXRlc1RvVXVpZC5qcyIsIndlYnBhY2s6Ly9zaGFyZGVkLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL3NoYXJkZWQvLi9ub2RlX21vZHVsZXMvdXVpZC9pbmRleC5qcyIsIndlYnBhY2s6Ly9zaGFyZGVkLy4vbm9kZV9tb2R1bGVzL3V1aWQvdjEuanMiLCJ3ZWJwYWNrOi8vc2hhcmRlZC8uL25vZGVfbW9kdWxlcy91dWlkL3Y0LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZ2V0UmFuZG9tVmFsdWVzIiwiY3J5cHRvIiwid2luZG93IiwibXNDcnlwdG8iLCJybmRzOCIsIlVpbnQ4QXJyYXkiLCJybmRzIiwiQXJyYXkiLCJNYXRoIiwicmFuZG9tIiwiYnl0ZVRvSGV4IiwidG9TdHJpbmciLCJzdWJzdHIiLCJidWYiLCJvZmZzZXQiLCJidGgiLCJqb2luIiwidXVpZCIsIlNIQVJEX0NPTExFQ1RJT05fSUQiLCJDT09LSUVfTkFNRSIsIkNvdW50ZXIiLCJkb2MiLCJmaWVsZCIsInRoaXMiLCJkYiIsInNoYXJkSWQiLCJzaGFyZHMiLCJub3RpZnlQcm9taXNlIiwiZmlyZXN0b3JlIiwiY29va2llIiwicmVzdWx0IiwiUmVnRXhwIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiZXhlYyIsImRvY3VtZW50IiwidjQiLCJkYXRlIiwiRGF0ZSIsInNldFRpbWUiLCJnZXRUaW1lIiwiZXhwaXJlcyIsInRvVVRDU3RyaW5nIiwiZ2V0U2hhcmRJZCIsInNoYXJkc1JlZiIsImNvbGxlY3Rpb24iLCJwYXRoIiwib3B0aW9ucyIsInZhbHVlUHJvbWlzZXMiLCJrZXlzIiwibWFwIiwiX19hd2FpdGVyIiwiX3RoaXMiLCJfYSIsInNlbnQiLCJQcm9taXNlIiwiYWxsIiwicmVkdWNlIiwiYSIsImIiLCJvblNuYXBzaG90Iiwib2JzZXJ2YWJsZSIsImZvckVhY2giLCJzbmFwIiwicmVmIiwiZnVuYyIsInJlc29sdmUiLCJzZXRUaW1lb3V0Iiwic2NoZWR1bGUiLCJzdW0iLCJ2YWx1ZXMiLCJleGlzdHMiLCJkYXRhIiwiaW5jcmVtZW50QnkiLCJ2YWwiLCJpbmNyZW1lbnQiLCJmaXJlYmFzZSIsIkZpZWxkVmFsdWUiLCJ1cGRhdGUiLCJzcGxpdCIsInJldmVyc2UiLCJzZXQiLCJtZXJnZSIsInNoYXJkIiwidjEiLCJfbm9kZUlkIiwiX2Nsb2Nrc2VxIiwicm5nIiwiYnl0ZXNUb1V1aWQiLCJfbGFzdE1TZWNzIiwiX2xhc3ROU2VjcyIsIm5vZGUiLCJjbG9ja3NlcSIsInVuZGVmaW5lZCIsInNlZWRCeXRlcyIsIm1zZWNzIiwibnNlY3MiLCJkdCIsIkVycm9yIiwidGwiLCJ0bWgiLCJpaSJdLCJtYXBwaW5ncyI6IndCQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFM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U0FDQXVDLEVBQUEsTUFJQSxJQUFBeEMsR0FGQXdDLEtBQUEsSUFFQXJDLFNBQUFxQyxFQUFBd0MsVUFPQSxHQUpBaEYsRUFBQSxNQUFBQSxFQUFBLE1BQ0FBLEVBQUEsTUFBQUEsRUFBQSxPQUdBTyxFQUNBLFFBQUF1RixFQUFBLEVBQW9CQSxFQUFBLEtBQVNBLEVBQzdCdkYsRUFBQTdDLEVBQUFvSSxHQUFBOUYsRUFBQThGLEdBSUEsT0FBQXZGLEdBQUEwRSxFQUFBakYiLCJmaWxlIjoic2hhcmRlZC1jb3VudGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDIpO1xuIiwiLy8gVW5pcXVlIElEIGNyZWF0aW9uIHJlcXVpcmVzIGEgaGlnaCBxdWFsaXR5IHJhbmRvbSAjIGdlbmVyYXRvci4gIEluIHRoZVxuLy8gYnJvd3NlciB0aGlzIGlzIGEgbGl0dGxlIGNvbXBsaWNhdGVkIGR1ZSB0byB1bmtub3duIHF1YWxpdHkgb2YgTWF0aC5yYW5kb20oKVxuLy8gYW5kIGluY29uc2lzdGVudCBzdXBwb3J0IGZvciB0aGUgYGNyeXB0b2AgQVBJLiAgV2UgZG8gdGhlIGJlc3Qgd2UgY2FuIHZpYVxuLy8gZmVhdHVyZS1kZXRlY3Rpb25cblxuLy8gZ2V0UmFuZG9tVmFsdWVzIG5lZWRzIHRvIGJlIGludm9rZWQgaW4gYSBjb250ZXh0IHdoZXJlIFwidGhpc1wiIGlzIGEgQ3J5cHRvXG4vLyBpbXBsZW1lbnRhdGlvbi4gQWxzbywgZmluZCB0aGUgY29tcGxldGUgaW1wbGVtZW50YXRpb24gb2YgY3J5cHRvIG9uIElFMTEuXG52YXIgZ2V0UmFuZG9tVmFsdWVzID0gKHR5cGVvZihjcnlwdG8pICE9ICd1bmRlZmluZWQnICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKGNyeXB0bykpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgKHR5cGVvZihtc0NyeXB0bykgIT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHdpbmRvdy5tc0NyeXB0by5nZXRSYW5kb21WYWx1ZXMgPT0gJ2Z1bmN0aW9uJyAmJiBtc0NyeXB0by5nZXRSYW5kb21WYWx1ZXMuYmluZChtc0NyeXB0bykpO1xuXG5pZiAoZ2V0UmFuZG9tVmFsdWVzKSB7XG4gIC8vIFdIQVRXRyBjcnlwdG8gUk5HIC0gaHR0cDovL3dpa2kud2hhdHdnLm9yZy93aWtpL0NyeXB0b1xuICB2YXIgcm5kczggPSBuZXcgVWludDhBcnJheSgxNik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWZcblxuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHdoYXR3Z1JORygpIHtcbiAgICBnZXRSYW5kb21WYWx1ZXMocm5kczgpO1xuICAgIHJldHVybiBybmRzODtcbiAgfTtcbn0gZWxzZSB7XG4gIC8vIE1hdGgucmFuZG9tKCktYmFzZWQgKFJORylcbiAgLy9cbiAgLy8gSWYgYWxsIGVsc2UgZmFpbHMsIHVzZSBNYXRoLnJhbmRvbSgpLiAgSXQncyBmYXN0LCBidXQgaXMgb2YgdW5zcGVjaWZpZWRcbiAgLy8gcXVhbGl0eS5cbiAgdmFyIHJuZHMgPSBuZXcgQXJyYXkoMTYpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gbWF0aFJORygpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgcjsgaSA8IDE2OyBpKyspIHtcbiAgICAgIGlmICgoaSAmIDB4MDMpID09PSAwKSByID0gTWF0aC5yYW5kb20oKSAqIDB4MTAwMDAwMDAwO1xuICAgICAgcm5kc1tpXSA9IHIgPj4+ICgoaSAmIDB4MDMpIDw8IDMpICYgMHhmZjtcbiAgICB9XG5cbiAgICByZXR1cm4gcm5kcztcbiAgfTtcbn1cbiIsIi8qKlxuICogQ29udmVydCBhcnJheSBvZiAxNiBieXRlIHZhbHVlcyB0byBVVUlEIHN0cmluZyBmb3JtYXQgb2YgdGhlIGZvcm06XG4gKiBYWFhYWFhYWC1YWFhYLVhYWFgtWFhYWC1YWFhYWFhYWFhYWFhcbiAqL1xudmFyIGJ5dGVUb0hleCA9IFtdO1xuZm9yICh2YXIgaSA9IDA7IGkgPCAyNTY7ICsraSkge1xuICBieXRlVG9IZXhbaV0gPSAoaSArIDB4MTAwKS50b1N0cmluZygxNikuc3Vic3RyKDEpO1xufVxuXG5mdW5jdGlvbiBieXRlc1RvVXVpZChidWYsIG9mZnNldCkge1xuICB2YXIgaSA9IG9mZnNldCB8fCAwO1xuICB2YXIgYnRoID0gYnl0ZVRvSGV4O1xuICAvLyBqb2luIHVzZWQgdG8gZml4IG1lbW9yeSBpc3N1ZSBjYXVzZWQgYnkgY29uY2F0ZW5hdGlvbjogaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9MzE3NSNjNFxuICByZXR1cm4gKFtidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLCBcblx0YnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSwgJy0nLFxuXHRidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLCAnLScsXG5cdGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sICctJyxcblx0YnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSwgJy0nLFxuXHRidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLFxuXHRidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLFxuXHRidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dXSkuam9pbignJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYnl0ZXNUb1V1aWQ7XG4iLCIvKlxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZVxuICogbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIG9yIGF0XG4gKiBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC5cbiAqL1xuaW1wb3J0ICogYXMgdXVpZCBmcm9tIFwidXVpZFwiO1xuXG5jb25zdCBTSEFSRF9DT0xMRUNUSU9OX0lEID0gXCJfY291bnRlcl9zaGFyZHNfXCI7XG5jb25zdCBDT09LSUVfTkFNRSA9IFwiRklSRVNUT1JFX0NPVU5URVJfU0hBUkRfSURcIjtcblxuZXhwb3J0IGludGVyZmFjZSBDb3VudGVyU25hcHNob3Qge1xuICBleGlzdHM6IGJvb2xlYW47XG4gIGRhdGE6ICgpID0+IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIENvdW50ZXIge1xuICBwcml2YXRlIGRiOiBmaXJlYmFzZS5maXJlc3RvcmUuRmlyZXN0b3JlID0gbnVsbDtcbiAgcHJpdmF0ZSBzaGFyZElkID0gXCJcIjtcbiAgcHJpdmF0ZSBzaGFyZHM6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0gPSB7fTtcbiAgcHJpdmF0ZSBub3RpZnlQcm9taXNlOiBQcm9taXNlPHZvaWQ+ID0gbnVsbDtcblxuICAvKipcbiAgICogQ29uc3RydWN0cyBhIHNoYXJkZWQgY291bnRlciBvYmplY3QgdGhhdCByZWZlcmVuY2VzIHRvIGEgZmllbGRcbiAgICogaW4gYSBkb2N1bWVudCB0aGF0IGlzIGEgY291bnRlci5cbiAgICogXG4gICAqIEBwYXJhbSBkb2MgQSByZWZlcmVuY2UgdG8gYSBkb2N1bWVudCB3aXRoIGEgY291bnRlciBmaWVsZC5cbiAgICogQHBhcmFtIGZpZWxkIEEgcGF0aCB0byBhIGNvdW50ZXIgZmllbGQgaW4gdGhlIGFib3ZlIGRvY3VtZW50LlxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBkb2M6IGZpcmViYXNlLmZpcmVzdG9yZS5Eb2N1bWVudFJlZmVyZW5jZSxcbiAgICBwcml2YXRlIGZpZWxkOiBzdHJpbmdcbiAgKSB7XG4gICAgdGhpcy5kYiA9IGRvYy5maXJlc3RvcmU7XG4gICAgdGhpcy5zaGFyZElkID0gZ2V0U2hhcmRJZChDT09LSUVfTkFNRSk7XG5cbiAgICBjb25zdCBzaGFyZHNSZWYgPSBkb2MuY29sbGVjdGlvbihTSEFSRF9DT0xMRUNUSU9OX0lEKTtcbiAgICB0aGlzLnNoYXJkc1tkb2MucGF0aF0gPSAwO1xuICAgIHRoaXMuc2hhcmRzW3NoYXJkc1JlZi5kb2ModGhpcy5zaGFyZElkKS5wYXRoXSA9IDA7XG4gICAgdGhpcy5zaGFyZHNbc2hhcmRzUmVmLmRvYyhcIlxcdFwiICsgdGhpcy5zaGFyZElkLnN1YnN0cigwLCA0KSkucGF0aF0gPSAwO1xuICAgIHRoaXMuc2hhcmRzW3NoYXJkc1JlZi5kb2MoXCJcXHRcXHRcIiArIHRoaXMuc2hhcmRJZC5zdWJzdHIoMCwgMykpLnBhdGhdID0gMDtcbiAgICB0aGlzLnNoYXJkc1tzaGFyZHNSZWYuZG9jKFwiXFx0XFx0XFx0XCIgKyB0aGlzLnNoYXJkSWQuc3Vic3RyKDAsIDIpKS5wYXRoXSA9IDA7XG4gICAgdGhpcy5zaGFyZHNbc2hhcmRzUmVmLmRvYyhcIlxcdFxcdFxcdFxcdFwiICsgdGhpcy5zaGFyZElkLnN1YnN0cigwLCAxKSkucGF0aF0gPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBsYXRlbmN5IGNvbXBlbnNhdGVkIHZpZXcgb2YgdGhlIGNvdW50ZXIuXG4gICAqIFxuICAgKiBBbGwgbG9jYWwgaW5jcmVtZW50cyB3aWxsIGJlIHJlZmxlY3RlZCBpbiB0aGUgY291bnRlciBldmVuIGlmIHRoZSBtYWluXG4gICAqIGNvdW50ZXIgaGFzbid0IGJlZW4gdXBkYXRlZCB5ZXQuXG4gICAqL1xuICBwdWJsaWMgYXN5bmMgZ2V0KG9wdGlvbnM/OiBmaXJlYmFzZS5maXJlc3RvcmUuR2V0T3B0aW9ucyk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgY29uc3QgdmFsdWVQcm9taXNlcyA9IE9iamVjdC5rZXlzKHRoaXMuc2hhcmRzKS5tYXAoYXN5bmMgKHBhdGgpID0+IHtcbiAgICAgIGNvbnN0IHNoYXJkID0gYXdhaXQgdGhpcy5kYi5kb2MocGF0aCkuZ2V0KG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIDxudW1iZXI+c2hhcmQuZ2V0KHRoaXMuZmllbGQpIHx8IDA7XG4gICAgfSk7XG4gICAgY29uc3QgdmFsdWVzID0gYXdhaXQgUHJvbWlzZS5hbGwodmFsdWVQcm9taXNlcyk7XG4gICAgcmV0dXJuIHZhbHVlcy5yZWR1Y2UoKGEsYikgPT4gYSArIGIsIDApO1xuICB9XG5cbiAgLyoqXG4gICAqIExpc3RlbiB0byBsYXRlbmN5IGNvbXBlbnNhdGVkIHZpZXcgb2YgdGhlIGNvdW50ZXIuXG4gICAqIFxuICAgKiBBbGwgbG9jYWwgaW5jcmVtZW50cyB0byB0aGlzIGNvdW50ZXIgd2lsbCBiZSBpbW1lZGlhdGVseSB2aXNpYmxlIGluIHRoZVxuICAgKiBzbmFwc2hvdC5cbiAgICovXG4gIHB1YmxpYyBvblNuYXBzaG90KG9ic2VydmFibGU6ICgobmV4dDogQ291bnRlclNuYXBzaG90KSA9PiB2b2lkKSkge1xuICAgIE9iamVjdC5rZXlzKHRoaXMuc2hhcmRzKS5mb3JFYWNoKChwYXRoKSA9PiB7XG4gICAgICB0aGlzLmRiXG4gICAgICAgIC5kb2MocGF0aClcbiAgICAgICAgLm9uU25hcHNob3QoKHNuYXA6IGZpcmViYXNlLmZpcmVzdG9yZS5Eb2N1bWVudFNuYXBzaG90KSA9PiB7XG4gICAgICAgICAgdGhpcy5zaGFyZHNbc25hcC5yZWYucGF0aF0gPSBzbmFwLmdldCh0aGlzLmZpZWxkKSB8fCAwO1xuICAgICAgICAgIGlmICh0aGlzLm5vdGlmeVByb21pc2UgIT09IG51bGwpIHJldHVybjtcbiAgICAgICAgICB0aGlzLm5vdGlmeVByb21pc2UgPSBzY2hlZHVsZSgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzdW0gPSBPYmplY3QudmFsdWVzKHRoaXMuc2hhcmRzKS5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiLCAwKTtcbiAgICAgICAgICAgIG9ic2VydmFibGUoe1xuICAgICAgICAgICAgICBleGlzdHM6IHRydWUsXG4gICAgICAgICAgICAgIGRhdGE6ICgpID0+IHN1bSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5ub3RpZnlQcm9taXNlID0gbnVsbDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogSW5jcmVtZW50IHRoZSBjb3VudGVyIGJ5IGEgZ2l2ZW4gdmFsdWUuXG4gICAqIFxuICAgKiBlLmcuXG4gICAqIGNvbnN0IGNvdW50ZXIgPSBuZXcgc2hhcmRlZC5Db3VudGVyKGRiLmRvYyhcInBhdGgvZG9jdW1lbnRcIiksIFwiY291bnRlclwiKTtcbiAgICogY291bnRlci5pbmNyZW1lbnRCeSgxKTtcbiAgICovXG4gIHB1YmxpYyBpbmNyZW1lbnRCeShcbiAgICB2YWw6IG51bWJlclxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgY29uc3QgaW5jcmVtZW50OiBhbnkgPSBmaXJlYmFzZS5maXJlc3RvcmUuRmllbGRWYWx1ZS5pbmNyZW1lbnQodmFsKTtcbiAgICBjb25zdCB1cGRhdGU6IHsgW2tleTogc3RyaW5nXTogYW55IH0gPSB0aGlzLmZpZWxkXG4gICAgICAuc3BsaXQoXCIuXCIpXG4gICAgICAucmV2ZXJzZSgpXG4gICAgICAucmVkdWNlKCh2YWx1ZSwgbmFtZSkgPT4gKHsgW25hbWVdOiB2YWx1ZSB9KSwgaW5jcmVtZW50KTtcbiAgICByZXR1cm4gdGhpcy5kb2NcbiAgICAgIC5jb2xsZWN0aW9uKFNIQVJEX0NPTExFQ1RJT05fSUQpXG4gICAgICAuZG9jKHRoaXMuc2hhcmRJZClcbiAgICAgIC5zZXQodXBkYXRlLCB7IG1lcmdlOiB0cnVlIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEFjY2VzcyB0aGUgYXNzaWduZWQgc2hhcmQgZGlyZWN0bHkuIFVzZWZ1bCB0byB1cGRhdGUgbXVsdGlwbGUgY291bnRlcnNcbiAgICogYXQgdGhlIHNhbWUgdGltZSwgYmF0Y2hlcyBvciB0cmFuc2FjdGlvbnMuXG4gICAqIFxuICAgKiBlLmcuXG4gICAqIGNvbnN0IGNvdW50ZXIgPSBuZXcgc2hhcmRlZC5Db3VudGVyKGRiLmRvYyhcInBhdGgvY291bnRlclwiKSwgXCJcIik7XG4gICAqIGNvbnN0IHNoYXJkUmVmID0gY291bnRlci5zaGFyZCgpO1xuICAgKiBzaGFyZFJlZi5zZXQoe1wiY291bnRlcjFcIiwgZmlyZXN0b3JlLkZpZWxkVmFsdWUuSW5jcmVtZW50KDEpLFxuICAgKiAgICAgICAgICAgICAgIFwiY291bnRlcjJcIiwgZmlyZXN0b3JlLkZpZWxkVmFsdWUuSW5jcmVtZW50KDEpKTtcbiAgICovXG4gIHB1YmxpYyBzaGFyZCgpOiBmaXJlYmFzZS5maXJlc3RvcmUuRG9jdW1lbnRSZWZlcmVuY2Uge1xuICAgIHJldHVybiB0aGlzLmRvYy5jb2xsZWN0aW9uKFNIQVJEX0NPTExFQ1RJT05fSUQpLmRvYyh0aGlzLnNoYXJkSWQpO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNjaGVkdWxlPFQ+KGZ1bmM6ICgpID0+IFQpOiBQcm9taXNlPFQ+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlPFQ+KGFzeW5jIChyZXNvbHZlKSA9PiB7XG4gICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBmdW5jKCk7XG4gICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgfSwgMCk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBnZXRTaGFyZElkKGNvb2tpZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgcmVzdWx0ID0gbmV3IFJlZ0V4cChcbiAgICBcIig/Ol58OyApXCIgKyBlbmNvZGVVUklDb21wb25lbnQoY29va2llKSArIFwiPShbXjtdKilcIlxuICApLmV4ZWMoZG9jdW1lbnQuY29va2llKTtcbiAgaWYgKHJlc3VsdCkgcmV0dXJuIHJlc3VsdFsxXTtcblxuICBjb25zdCBzaGFyZElkID0gdXVpZC52NCgpO1xuXG4gIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpO1xuICBkYXRlLnNldFRpbWUoZGF0ZS5nZXRUaW1lKCkgKyAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApO1xuICBjb25zdCBleHBpcmVzID0gXCI7IGV4cGlyZXM9XCIgKyBkYXRlLnRvVVRDU3RyaW5nKCk7XG5cbiAgZG9jdW1lbnQuY29va2llID1cbiAgICBlbmNvZGVVUklDb21wb25lbnQoY29va2llKSArIFwiPVwiICsgc2hhcmRJZCArIGV4cGlyZXMgKyBcIjsgcGF0aD0vXCI7XG4gIHJldHVybiBzaGFyZElkO1xufVxuIiwidmFyIHYxID0gcmVxdWlyZSgnLi92MScpO1xudmFyIHY0ID0gcmVxdWlyZSgnLi92NCcpO1xuXG52YXIgdXVpZCA9IHY0O1xudXVpZC52MSA9IHYxO1xudXVpZC52NCA9IHY0O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHV1aWQ7XG4iLCJ2YXIgcm5nID0gcmVxdWlyZSgnLi9saWIvcm5nJyk7XG52YXIgYnl0ZXNUb1V1aWQgPSByZXF1aXJlKCcuL2xpYi9ieXRlc1RvVXVpZCcpO1xuXG4vLyAqKmB2MSgpYCAtIEdlbmVyYXRlIHRpbWUtYmFzZWQgVVVJRCoqXG4vL1xuLy8gSW5zcGlyZWQgYnkgaHR0cHM6Ly9naXRodWIuY29tL0xpb3NLL1VVSUQuanNcbi8vIGFuZCBodHRwOi8vZG9jcy5weXRob24ub3JnL2xpYnJhcnkvdXVpZC5odG1sXG5cbnZhciBfbm9kZUlkO1xudmFyIF9jbG9ja3NlcTtcblxuLy8gUHJldmlvdXMgdXVpZCBjcmVhdGlvbiB0aW1lXG52YXIgX2xhc3RNU2VjcyA9IDA7XG52YXIgX2xhc3ROU2VjcyA9IDA7XG5cbi8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYnJvb2ZhL25vZGUtdXVpZCBmb3IgQVBJIGRldGFpbHNcbmZ1bmN0aW9uIHYxKG9wdGlvbnMsIGJ1Ziwgb2Zmc2V0KSB7XG4gIHZhciBpID0gYnVmICYmIG9mZnNldCB8fCAwO1xuICB2YXIgYiA9IGJ1ZiB8fCBbXTtcblxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIG5vZGUgPSBvcHRpb25zLm5vZGUgfHwgX25vZGVJZDtcbiAgdmFyIGNsb2Nrc2VxID0gb3B0aW9ucy5jbG9ja3NlcSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jbG9ja3NlcSA6IF9jbG9ja3NlcTtcblxuICAvLyBub2RlIGFuZCBjbG9ja3NlcSBuZWVkIHRvIGJlIGluaXRpYWxpemVkIHRvIHJhbmRvbSB2YWx1ZXMgaWYgdGhleSdyZSBub3RcbiAgLy8gc3BlY2lmaWVkLiAgV2UgZG8gdGhpcyBsYXppbHkgdG8gbWluaW1pemUgaXNzdWVzIHJlbGF0ZWQgdG8gaW5zdWZmaWNpZW50XG4gIC8vIHN5c3RlbSBlbnRyb3B5LiAgU2VlICMxODlcbiAgaWYgKG5vZGUgPT0gbnVsbCB8fCBjbG9ja3NlcSA9PSBudWxsKSB7XG4gICAgdmFyIHNlZWRCeXRlcyA9IHJuZygpO1xuICAgIGlmIChub2RlID09IG51bGwpIHtcbiAgICAgIC8vIFBlciA0LjUsIGNyZWF0ZSBhbmQgNDgtYml0IG5vZGUgaWQsICg0NyByYW5kb20gYml0cyArIG11bHRpY2FzdCBiaXQgPSAxKVxuICAgICAgbm9kZSA9IF9ub2RlSWQgPSBbXG4gICAgICAgIHNlZWRCeXRlc1swXSB8IDB4MDEsXG4gICAgICAgIHNlZWRCeXRlc1sxXSwgc2VlZEJ5dGVzWzJdLCBzZWVkQnl0ZXNbM10sIHNlZWRCeXRlc1s0XSwgc2VlZEJ5dGVzWzVdXG4gICAgICBdO1xuICAgIH1cbiAgICBpZiAoY2xvY2tzZXEgPT0gbnVsbCkge1xuICAgICAgLy8gUGVyIDQuMi4yLCByYW5kb21pemUgKDE0IGJpdCkgY2xvY2tzZXFcbiAgICAgIGNsb2Nrc2VxID0gX2Nsb2Nrc2VxID0gKHNlZWRCeXRlc1s2XSA8PCA4IHwgc2VlZEJ5dGVzWzddKSAmIDB4M2ZmZjtcbiAgICB9XG4gIH1cblxuICAvLyBVVUlEIHRpbWVzdGFtcHMgYXJlIDEwMCBuYW5vLXNlY29uZCB1bml0cyBzaW5jZSB0aGUgR3JlZ29yaWFuIGVwb2NoLFxuICAvLyAoMTU4Mi0xMC0xNSAwMDowMCkuICBKU051bWJlcnMgYXJlbid0IHByZWNpc2UgZW5vdWdoIGZvciB0aGlzLCBzb1xuICAvLyB0aW1lIGlzIGhhbmRsZWQgaW50ZXJuYWxseSBhcyAnbXNlY3MnIChpbnRlZ2VyIG1pbGxpc2Vjb25kcykgYW5kICduc2VjcydcbiAgLy8gKDEwMC1uYW5vc2Vjb25kcyBvZmZzZXQgZnJvbSBtc2Vjcykgc2luY2UgdW5peCBlcG9jaCwgMTk3MC0wMS0wMSAwMDowMC5cbiAgdmFyIG1zZWNzID0gb3B0aW9ucy5tc2VjcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tc2VjcyA6IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXG4gIC8vIFBlciA0LjIuMS4yLCB1c2UgY291bnQgb2YgdXVpZCdzIGdlbmVyYXRlZCBkdXJpbmcgdGhlIGN1cnJlbnQgY2xvY2tcbiAgLy8gY3ljbGUgdG8gc2ltdWxhdGUgaGlnaGVyIHJlc29sdXRpb24gY2xvY2tcbiAgdmFyIG5zZWNzID0gb3B0aW9ucy5uc2VjcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5uc2VjcyA6IF9sYXN0TlNlY3MgKyAxO1xuXG4gIC8vIFRpbWUgc2luY2UgbGFzdCB1dWlkIGNyZWF0aW9uIChpbiBtc2VjcylcbiAgdmFyIGR0ID0gKG1zZWNzIC0gX2xhc3RNU2VjcykgKyAobnNlY3MgLSBfbGFzdE5TZWNzKS8xMDAwMDtcblxuICAvLyBQZXIgNC4yLjEuMiwgQnVtcCBjbG9ja3NlcSBvbiBjbG9jayByZWdyZXNzaW9uXG4gIGlmIChkdCA8IDAgJiYgb3B0aW9ucy5jbG9ja3NlcSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgY2xvY2tzZXEgPSBjbG9ja3NlcSArIDEgJiAweDNmZmY7XG4gIH1cblxuICAvLyBSZXNldCBuc2VjcyBpZiBjbG9jayByZWdyZXNzZXMgKG5ldyBjbG9ja3NlcSkgb3Igd2UndmUgbW92ZWQgb250byBhIG5ld1xuICAvLyB0aW1lIGludGVydmFsXG4gIGlmICgoZHQgPCAwIHx8IG1zZWNzID4gX2xhc3RNU2VjcykgJiYgb3B0aW9ucy5uc2VjcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbnNlY3MgPSAwO1xuICB9XG5cbiAgLy8gUGVyIDQuMi4xLjIgVGhyb3cgZXJyb3IgaWYgdG9vIG1hbnkgdXVpZHMgYXJlIHJlcXVlc3RlZFxuICBpZiAobnNlY3MgPj0gMTAwMDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3V1aWQudjEoKTogQ2FuXFwndCBjcmVhdGUgbW9yZSB0aGFuIDEwTSB1dWlkcy9zZWMnKTtcbiAgfVxuXG4gIF9sYXN0TVNlY3MgPSBtc2VjcztcbiAgX2xhc3ROU2VjcyA9IG5zZWNzO1xuICBfY2xvY2tzZXEgPSBjbG9ja3NlcTtcblxuICAvLyBQZXIgNC4xLjQgLSBDb252ZXJ0IGZyb20gdW5peCBlcG9jaCB0byBHcmVnb3JpYW4gZXBvY2hcbiAgbXNlY3MgKz0gMTIyMTkyOTI4MDAwMDA7XG5cbiAgLy8gYHRpbWVfbG93YFxuICB2YXIgdGwgPSAoKG1zZWNzICYgMHhmZmZmZmZmKSAqIDEwMDAwICsgbnNlY3MpICUgMHgxMDAwMDAwMDA7XG4gIGJbaSsrXSA9IHRsID4+PiAyNCAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRsID4+PiAxNiAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRsID4+PiA4ICYgMHhmZjtcbiAgYltpKytdID0gdGwgJiAweGZmO1xuXG4gIC8vIGB0aW1lX21pZGBcbiAgdmFyIHRtaCA9IChtc2VjcyAvIDB4MTAwMDAwMDAwICogMTAwMDApICYgMHhmZmZmZmZmO1xuICBiW2krK10gPSB0bWggPj4+IDggJiAweGZmO1xuICBiW2krK10gPSB0bWggJiAweGZmO1xuXG4gIC8vIGB0aW1lX2hpZ2hfYW5kX3ZlcnNpb25gXG4gIGJbaSsrXSA9IHRtaCA+Pj4gMjQgJiAweGYgfCAweDEwOyAvLyBpbmNsdWRlIHZlcnNpb25cbiAgYltpKytdID0gdG1oID4+PiAxNiAmIDB4ZmY7XG5cbiAgLy8gYGNsb2NrX3NlcV9oaV9hbmRfcmVzZXJ2ZWRgIChQZXIgNC4yLjIgLSBpbmNsdWRlIHZhcmlhbnQpXG4gIGJbaSsrXSA9IGNsb2Nrc2VxID4+PiA4IHwgMHg4MDtcblxuICAvLyBgY2xvY2tfc2VxX2xvd2BcbiAgYltpKytdID0gY2xvY2tzZXEgJiAweGZmO1xuXG4gIC8vIGBub2RlYFxuICBmb3IgKHZhciBuID0gMDsgbiA8IDY7ICsrbikge1xuICAgIGJbaSArIG5dID0gbm9kZVtuXTtcbiAgfVxuXG4gIHJldHVybiBidWYgPyBidWYgOiBieXRlc1RvVXVpZChiKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB2MTtcbiIsInZhciBybmcgPSByZXF1aXJlKCcuL2xpYi9ybmcnKTtcbnZhciBieXRlc1RvVXVpZCA9IHJlcXVpcmUoJy4vbGliL2J5dGVzVG9VdWlkJyk7XG5cbmZ1bmN0aW9uIHY0KG9wdGlvbnMsIGJ1Ziwgb2Zmc2V0KSB7XG4gIHZhciBpID0gYnVmICYmIG9mZnNldCB8fCAwO1xuXG4gIGlmICh0eXBlb2Yob3B0aW9ucykgPT0gJ3N0cmluZycpIHtcbiAgICBidWYgPSBvcHRpb25zID09PSAnYmluYXJ5JyA/IG5ldyBBcnJheSgxNikgOiBudWxsO1xuICAgIG9wdGlvbnMgPSBudWxsO1xuICB9XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gIHZhciBybmRzID0gb3B0aW9ucy5yYW5kb20gfHwgKG9wdGlvbnMucm5nIHx8IHJuZykoKTtcblxuICAvLyBQZXIgNC40LCBzZXQgYml0cyBmb3IgdmVyc2lvbiBhbmQgYGNsb2NrX3NlcV9oaV9hbmRfcmVzZXJ2ZWRgXG4gIHJuZHNbNl0gPSAocm5kc1s2XSAmIDB4MGYpIHwgMHg0MDtcbiAgcm5kc1s4XSA9IChybmRzWzhdICYgMHgzZikgfCAweDgwO1xuXG4gIC8vIENvcHkgYnl0ZXMgdG8gYnVmZmVyLCBpZiBwcm92aWRlZFxuICBpZiAoYnVmKSB7XG4gICAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IDE2OyArK2lpKSB7XG4gICAgICBidWZbaSArIGlpXSA9IHJuZHNbaWldO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBidWYgfHwgYnl0ZXNUb1V1aWQocm5kcyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdjQ7XG4iXSwic291cmNlUm9vdCI6IiJ9