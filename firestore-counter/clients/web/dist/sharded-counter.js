var sharded=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return _})),n.d(t,"c",(function(){return I})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return E})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return D})),n.d(t,"h",(function(){return S})),n.d(t,"i",(function(){return a})),n.d(t,"j",(function(){return C})),n.d(t,"k",(function(){return L})),n.d(t,"l",(function(){return h})),n.d(t,"m",(function(){return f})),n.d(t,"n",(function(){return p})),n.d(t,"o",(function(){return g})),n.d(t,"p",(function(){return k})),n.d(t,"q",(function(){return y})),n.d(t,"r",(function(){return b})),n.d(t,"s",(function(){return l})),n.d(t,"t",(function(){return d})),n.d(t,"u",(function(){return m})),n.d(t,"v",(function(){return w})),n.d(t,"w",(function(){return v})),n.d(t,"x",(function(){return N})),n.d(t,"y",(function(){return O}));
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const r=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const i=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,c=a?e[t+2]:0,u=i>>2,h=(3&i)<<4|o>>4;let l=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(l=64)),r.push(n[u],n[h],n[l],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const i=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==i||null==s||null==o||null==a)throw Error();const c=i<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},s=function(e){return function(e){const t=r(e);return i.encodeByteArray(t,!0)}(e).replace(/\./g,"")},o=function(e){try{return i.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=a(e[n],t[n]));return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class c{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[s(JSON.stringify({alg:"none",type:"JWT"})),s(JSON.stringify(o)),""].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function l(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(h())}function d(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(e){return!1}}function f(){return"object"==typeof self&&self.self===self}function p(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function m(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function g(){return h().indexOf("Electron/")>=0}function y(){const e=h();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function v(){return h().indexOf("MSAppHost/")>=0}function w(){return!d()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function b(){return"object"==typeof indexedDB}class I extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,I.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_.prototype.create)}}class _{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(T,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new I(r,o,n)}}const T=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function E(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function k(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function S(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(A(n)&&A(s)){if(!S(n,s))return!1}else if(n!==s)return!1}for(const e of r)if(!n.includes(e))return!1;return!0}function A(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function O(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function C(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D(e,t){const n=new R(e,t);return n.subscribe.bind(n)}class R{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=P),void 0===r.error&&(r.error=P),void 0===r.complete&&(r.complete=P);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function P(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function L(e){return e&&e._delegate?e._delegate:e}}).call(this,n(8))},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return ve})),n.d(t,"c",(function(){return Ne})),n.d(t,"d",(function(){return Re})),n.d(t,"e",(function(){return Le})),n.d(t,"f",(function(){return Pe})),n.d(t,"g",(function(){return Ee})),n.d(t,"h",(function(){return De})),n.d(t,"i",(function(){return pn})),n.d(t,"j",(function(){return ir})),n.d(t,"k",(function(){return c})),n.d(t,"l",(function(){return an})),n.d(t,"m",(function(){return xe})),n.d(t,"n",(function(){return Me})),n.d(t,"o",(function(){return Fe})),n.d(t,"p",(function(){return I})),n.d(t,"q",(function(){return fe})),n.d(t,"r",(function(){return g})),n.d(t,"s",(function(){return Ut})),n.d(t,"t",(function(){return k})),n.d(t,"u",(function(){return xn})),n.d(t,"v",(function(){return Z})),n.d(t,"x",(function(){return st})),n.d(t,"y",(function(){return xt})),n.d(t,"z",(function(){return nr})),n.d(t,"A",(function(){return Ft})),n.d(t,"B",(function(){return ot})),n.d(t,"C",(function(){return it})),n.d(t,"D",(function(){return me})),n.d(t,"F",(function(){return ct})),n.d(t,"G",(function(){return l})),n.d(t,"H",(function(){return ft})),n.d(t,"I",(function(){return St})),n.d(t,"J",(function(){return Ot})),n.d(t,"K",(function(){return Ln})),n.d(t,"L",(function(){return X})),n.d(t,"M",(function(){return Jt})),n.d(t,"N",(function(){return lt})),n.d(t,"O",(function(){return Ye})),n.d(t,"P",(function(){return hn})),n.d(t,"Q",(function(){return En})),n.d(t,"R",(function(){return Pn})),n.d(t,"S",(function(){return Rt})),n.d(t,"T",(function(){return Xe})),n.d(t,"U",(function(){return ln})),n.d(t,"V",(function(){return Tn})),n.d(t,"W",(function(){return Rn})),n.d(t,"X",(function(){return pt})),n.d(t,"Y",(function(){return rt})),n.d(t,"Z",(function(){return ht})),n.d(t,"ab",(function(){return qe})),n.d(t,"bb",(function(){return Je})),n.d(t,"cb",(function(){return Ze})),n.d(t,"db",(function(){return ut})),n.d(t,"eb",(function(){return dt})),n.d(t,"fb",(function(){return un})),n.d(t,"gb",(function(){return _n})),n.d(t,"hb",(function(){return Dn})),n.d(t,"ib",(function(){return We})),n.d(t,"jb",(function(){return yt})),n.d(t,"kb",(function(){return vt})),n.d(t,"lb",(function(){return fn})),n.d(t,"mb",(function(){return gt})),n.d(t,"nb",(function(){return mt})),n.d(t,"ob",(function(){return at})),n.d(t,"w",(function(){return wr})),n.d(t,"E",(function(){return yr}));var r=n(0),i=n(3);function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;var o=n(4),a=n(5);
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const c={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},u={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function h(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const l=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},d=h,f=new r.b("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),p=new o.b("@firebase/auth");function m(e,...t){p.logLevel<=o.a.ERROR&&p.error(`Auth (${i.SDK_VERSION}): ${e}`,...t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g(e,...t){throw b(e,...t)}function y(e,...t){return b(e,...t)}function v(e,t,n){const i=Object.assign(Object.assign({},d()),{[t]:n});return new r.b("auth","Firebase",i).create(t,{appName:e.name})}function w(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&g(e,"argument-error"),v(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function b(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return f.create(e,...t)}function I(e,t,...n){if(!e)throw b(t,...n)}function _(e){const t="INTERNAL ASSERTION FAILED: "+e;throw m(t),new Error(t)}function T(e,t){e||_(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E=new Map;function k(e){T(e instanceof Function,"Expected a class definition");let t=E.get(e);return t?(T(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,E.set(e,t),t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function S(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function A(){return"http:"===N()||"https:"===N()}function N(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class O{constructor(e,t){this.shortDelay=e,this.longDelay=t,T(t>e,"Short delay should be less than long delay!"),this.isMobile=Object(r.s)()||Object(r.u)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(A()||Object(r.n)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C(e,t){T(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void _("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void _("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void _("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},P=new O(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function x(e,t,n,i,s={}){return M(e,s,async()=>{let s={},o={};i&&("GET"===t?o=i:s={body:JSON.stringify(i)});const a=Object(r.x)(Object.assign({key:e.config.apiKey},o)).slice(1),c=await e._getAdditionalHeaders();return c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode),D.fetch()(j(e,e.config.apiHost,n,a),Object.assign({method:t,headers:c,referrerPolicy:"no-referrer"},s))})}async function M(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},R),t);try{const t=new U(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw V(e,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const t=r.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw V(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw V(e,"email-already-in-use",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw v(e,a,o);g(e,a)}}catch(t){if(t instanceof r.c)throw t;g(e,"network-request-failed")}}async function F(e,t,n,r,i={}){const s=await x(e,t,n,r,i);return"mfaPendingCredential"in s&&g(e,"multi-factor-auth-required",{_serverResponse:s}),s}function j(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?C(e.config,i):`${e.config.apiScheme}://${i}`}class U{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(y(this.auth,"timeout")),P.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function V(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=y(e,t,r);return i.customData._tokenResponse=n,i}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function q(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B(e){return 1e3*Number(e)}function z(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return m("JWT malformed, contained fewer than 3 sections"),null;try{const e=Object(r.d)(n);return e?JSON.parse(e):(m("Failed to decode base64 JWT payload"),null)}catch(e){return m("Caught error parsing JWT payload as JSON",e),null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function K(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof r.c&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class W{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e.code&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=q(this.lastLoginAt),this.creationTime=q(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H(e){var t;const n=e.auth,r=await e.getIdToken(),i=await K(e,async function(e,t){return x(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));I(null==i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const a=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?o.providerUserInfo.map(e=>{var{providerId:t}=e,n=s(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}):[];const c=(u=e.providerData,h=a,[...u.filter(e=>!h.some(t=>t.providerId===e.providerId)),...h]);var u,h;const l=e.isAnonymous,d=!(e.email&&o.passwordHash||(null==c?void 0:c.length)),f=!!l&&d,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new G(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(e,p)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ${constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){I(e.idToken,"internal-error"),I(void 0!==e.idToken,"internal-error"),I(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=z(e);return I(t,"internal-error"),I(void 0!==t.exp,"internal-error"),I(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return I(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:s}=await
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e,t){const n=await M(e,{},async()=>{const n=Object(r.x)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=j(e,i,"/v1/token","key="+s),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",D.fetch()(o,{method:"POST",headers:a,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new $;return n&&(I("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(I("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(I("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $,this.toJSON())}_performRefresh(){return _("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(e,t){I("string"==typeof e||void 0===e,"internal-error",{appName:t})}class J{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=s(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new W(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.metadata=new G(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await K(this,this.stsTokenManager.getToken(this.auth,e));return I(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=Object(r.k)(e),i=await n.getIdToken(t),s=z(i);I(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o="object"==typeof s.firebase?s.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:q(B(s.auth_time)),issuedAtTime:q(B(s.iat)),expirationTime:q(B(s.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Object(r.k)(e);await H(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(I(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new J(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){I(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await H(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await K(this,async function(e,t){return x(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,u;const h=null!==(n=t.displayName)&&void 0!==n?n:void 0,l=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:T}=t;I(v&&T,e,"internal-error");const E=$.fromJSON(this.name,T);I("string"==typeof v,e,"internal-error"),Q(h,e.name),Q(l,e.name),I("boolean"==typeof w,e,"internal-error"),I("boolean"==typeof b,e,"internal-error"),Q(d,e.name),Q(f,e.name),Q(p,e.name),Q(m,e.name),Q(g,e.name),Q(y,e.name);const k=new J({uid:v,auth:e,email:l,emailVerified:w,displayName:h,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(k.providerData=_.map(e=>Object.assign({},e))),m&&(k._redirectEventId=m),k}static async _fromIdTokenResponse(e,t,n=!1){const r=new $;r.updateFromServerResponse(t);const i=new J({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await H(i),i}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Y.type="NONE";const X=Y;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(e,t,n){return`firebase:${e}:${t}:${n}`}class ee{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Z(this.userKey,r.apiKey,i),this.fullPersistenceKey=Z("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?J._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new ee(k(X),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||k(X);const s=Z(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=await n._get(s);if(t){const r=J._fromJSON(e,t);n!==i&&(o=r),i=n;break}}catch(e){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(e){}})),new ee(i,e,n)):new ee(i,e,n)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(se(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ne(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ae(t))return"Blackberry";if(ce(t))return"Webos";if(re(t))return"Safari";if((t.includes("chrome/")||ie(t))&&!t.includes("edge/"))return"Chrome";if(oe(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function ne(e=Object(r.l)()){return/firefox\//i.test(e)}function re(e=Object(r.l)()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ie(e=Object(r.l)()){return/crios\//i.test(e)}function se(e=Object(r.l)()){return/iemobile/i.test(e)}function oe(e=Object(r.l)()){return/android/i.test(e)}function ae(e=Object(r.l)()){return/blackberry/i.test(e)}function ce(e=Object(r.l)()){return/webos/i.test(e)}function ue(e=Object(r.l)()){return/iphone|ipad|ipod/i.test(e)}function he(e=Object(r.l)()){return ue(e)||oe(e)||ce(e)||ae(e)||/windows phone/i.test(e)||se(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function le(e,t=[]){let n;switch(e){case"Browser":n=te(Object(r.l)());break;case"Worker":n=`${te(Object(r.l)())}-${e}`;break;default:n=e}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${i.SDK_VERSION}/${s}`}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e,t){this.app=e,this.config=t,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pe(this),this.idTokenSubscription=new pe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=f,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=t.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=k(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await ee.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e):void 0}async initializeCurrentUser(e){var t;let n=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null==n?void 0:n._redirectEventId,s=await this.tryRedirectSignIn(e);r&&r!==i||!(null==s?void 0:s.user)||(n=s.user)}return n?n._redirectEventId?(I(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)):this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await H(e)}catch(e){if("auth/network-request-failed"!==e.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?Object(r.k)(e):null;return t&&I(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&I(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(k(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new r.b("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&k(e)||this._popupRedirectResolver;I(t,this,"argument-error"),this.redirectPersistenceManager=await ee.create(this,[k(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return I(s,this,"internal-error"),s.then(()=>i(this.currentUser)),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return I(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=le(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};return this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId),e}}function fe(e){return Object(r.k)(e)}class pe{constructor(e){this.auth=e,this.observer=null,this.addObserver=Object(r.g)(e=>this.observer=e)}get next(){return I(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function me(e,t,n){const r=fe(e);I(r._canInitEmulator,r,"emulator-config-failed"),I(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=ge(t),{host:o,port:a}=function(e){const t=ge(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:ye(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:ye(t)}}}(t),c=null===a?"":":"+a;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()}function ge(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ye(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class ve{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _("not implemented")}_getIdTokenResponse(e){return _("not implemented")}_linkToIdToken(e,t){return _("not implemented")}_getReauthenticationResolver(e){return _("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function we(e,t){return x(e,"POST","/v1/accounts:resetPassword",L(e,t))}async function be(e,t){return x(e,"POST","/v1/accounts:update",t)}async function Ie(e,t){return x(e,"POST","/v1/accounts:sendOobCode",L(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class _e extends ve{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new _e(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new _e(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return async function(e,t){return F(e,"POST","/v1/accounts:signInWithPassword",L(e,t))}(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return async function(e,t){return F(e,"POST","/v1/accounts:signInWithEmailLink",L(e,t))}(e,{email:this._email,oobCode:this._password});default:g(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return be(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return F(e,"POST","/v1/accounts:signInWithEmailLink",L(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:g(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Te(e,t){return F(e,"POST","/v1/accounts:signInWithIdp",L(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee extends ve{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ee(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):g("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=s(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new Ee(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return Te(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Te(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Te(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Object(r.x)(t)}return e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ke={USER_NOT_FOUND:"user-not-found"};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Se extends ve{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Se({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Se({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return F(e,"POST","/v1/accounts:signInWithPhoneNumber",L(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await F(e,"POST","/v1/accounts:signInWithPhoneNumber",L(e,t));if(n.temporaryProof)throw V(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return F(e,"POST","/v1/accounts:signInWithPhoneNumber",L(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),ke)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Se({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){var t,n,i,s,o,a;const c=Object(r.y)(Object(r.j)(e)),u=null!==(t=c.apiKey)&&void 0!==t?t:null,h=null!==(n=c.oobCode)&&void 0!==n?n:null,l=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=c.mode)&&void 0!==i?i:null);I(u&&h&&l,"argument-error"),this.apiKey=u,this.operation=l,this.code=h,this.continueUrl=null!==(s=c.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=c.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=c.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=Object(r.y)(Object(r.j)(e)).link,n=t?Object(r.y)(Object(r.j)(t)).deep_link_id:null,i=Object(r.y)(Object(r.j)(e)).deep_link_id;return(i?Object(r.y)(Object(r.j)(i)).link:null)||i||n||t||e}(e);try{return new Ae(t)}catch(e){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ne{constructor(){this.providerId=Ne.PROVIDER_ID}static credential(e,t){return _e._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ae.parseLink(t);return I(n,"argument-error"),_e._fromEmailAndCode(e,n.code,n.tenantId)}}Ne.PROVIDER_ID="password",Ne.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ne.EMAIL_LINK_SIGN_IN_METHOD="emailLink";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Oe{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce extends Oe{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class De extends Ce{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return I("providerId"in t&&"signInMethod"in t,"argument-error"),Ee._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return I(e.idToken||e.accessToken,"argument-error"),Ee._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return De.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return De.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:i,nonce:s,providerId:o}=e;if(!(n||r||t||i))return null;if(!o)return null;try{return new De(o)._credential({idToken:t,accessToken:n,nonce:s,pendingToken:i})}catch(e){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re extends Ce{constructor(){super("facebook.com")}static credential(e){return Ee._fromParams({providerId:Re.PROVIDER_ID,signInMethod:Re.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Re.credentialFromTaggedObject(e)}static credentialFromError(e){return Re.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Re.credential(e.oauthAccessToken)}catch(e){return null}}}Re.FACEBOOK_SIGN_IN_METHOD="facebook.com",Re.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Pe extends Ce{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ee._fromParams({providerId:Pe.PROVIDER_ID,signInMethod:Pe.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Pe.credentialFromTaggedObject(e)}static credentialFromError(e){return Pe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Pe.credential(t,n)}catch(e){return null}}}Pe.GOOGLE_SIGN_IN_METHOD="google.com",Pe.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Le extends Ce{constructor(){super("github.com")}static credential(e){return Ee._fromParams({providerId:Le.PROVIDER_ID,signInMethod:Le.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Le.credentialFromTaggedObject(e)}static credentialFromError(e){return Le.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Le.credential(e.oauthAccessToken)}catch(e){return null}}}Le.GITHUB_SIGN_IN_METHOD="github.com",Le.PROVIDER_ID="github.com";class xe extends ve{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return Te(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Te(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Te(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new xe(n,i):null}static _create(e,t){return new xe(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me extends Oe{constructor(e){I(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return Me.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Me.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=xe.fromJSON(e);return I(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return xe._create(n,t)}catch(e){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe extends Ce{constructor(){super("twitter.com")}static credential(e,t){return Ee._fromParams({providerId:Fe.PROVIDER_ID,signInMethod:Fe.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Fe.credentialFromTaggedObject(e)}static credentialFromError(e){return Fe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Fe.credential(t,n)}catch(e){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function je(e,t){return F(e,"POST","/v1/accounts:signUp",L(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fe.TWITTER_SIGN_IN_METHOD="twitter.com",Fe.PROVIDER_ID="twitter.com";class Ue{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await J._fromIdTokenResponse(e,n,r),s=Ve(n);return new Ue({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ve(n);return new Ue({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ve(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qe(e){var t;const n=fe(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Ue({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await je(n,{returnSecureToken:!0}),i=await Ue._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be extends r.c{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Be.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Be(e,t,n,r)}}function ze(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw Be._fromErrorAndOperation(e,n,t,r);throw n})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(e){return new Set(e.map(({providerId:e})=>e).filter(e=>!!e))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function We(e,t){const n=Object(r.k)(e);await He(!0,n,t);const{providerUserInfo:i}=await async function(e,t){return x(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),s=Ke(i||[]);return n.providerData=n.providerData.filter(e=>s.has(e.providerId)),s.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Ge(e,t,n=!1){const r=await K(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ue._forOperation(e,"link",r)}async function He(e,t,n){await H(t);const r=!1===e?"provider-already-linked":"no-such-provider";I(Ke(t.providerData).has(n)===e,t.auth,r)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $e(e,t,n=!1){const{auth:r}=e;try{const i=await K(e,ze(r,"reauthenticate",t,e),n);I(i.idToken,r,"internal-error");const s=z(i.idToken);I(s,r,"internal-error");const{sub:o}=s;return I(e.uid===o,r,"user-mismatch"),Ue._forOperation(e,"reauthenticate",i)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&g(r,"user-mismatch"),e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qe(e,t,n=!1){const r=await ze(e,"signIn",t),i=await Ue._fromIdTokenResponse(e,"signIn",r);return n||await e._updateCurrentUser(i.user),i}async function Je(e,t){return Qe(fe(e),t)}async function Ye(e,t){const n=Object(r.k)(e);return await He(!1,n,t.providerId),Ge(n,t)}async function Xe(e,t){return $e(Object(r.k)(e),t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Ze(e,t){const n=fe(e),r=await async function(e,t){return F(e,"POST","/v1/accounts:signInWithCustomToken",L(e,t))}(n,{token:t,returnSecureToken:!0}),i=await Ue._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?tt._fromServerResponse(e,t):g(e,"internal-error")}}class tt extends et{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new tt(t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(e,t,n){var r;I((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),I(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(I(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(I(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rt(e,t,n){const i=Object(r.k)(e),s={requestType:"PASSWORD_RESET",email:t};n&&nt(i,s,n),await async function(e,t){return Ie(e,t)}(i,s)}async function it(e,t,n){await we(Object(r.k)(e),{oobCode:t,newPassword:n})}async function st(e,t){await async function(e,t){return x(e,"POST","/v1/accounts:update",L(e,t))}(Object(r.k)(e),{oobCode:t})}async function ot(e,t){const n=Object(r.k)(e),i=await we(n,{oobCode:t}),s=i.requestType;switch(I(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":I(i.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":I(i.mfaInfo,n,"internal-error");default:I(i.email,n,"internal-error")}let o=null;return i.mfaInfo&&(o=et._fromServerResponse(fe(n),i.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:s}}async function at(e,t){const{data:n}=await ot(Object(r.k)(e),t);return n.email}async function ct(e,t,n){const r=fe(e),i=await je(r,{returnSecureToken:!0,email:t,password:n}),s=await Ue._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(s.user),s}function ut(e,t,n){return Je(Object(r.k)(e),Ne.credential(t,n))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ht(e,t,n){const i=Object(r.k)(e),s={requestType:"EMAIL_SIGNIN",email:t};I(n.handleCodeInApp,i,"argument-error"),n&&nt(i,s,n),await async function(e,t){return Ie(e,t)}(i,s)}function lt(e,t){const n=Ae.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}async function dt(e,t,n){const i=Object(r.k)(e),s=Ne.credentialWithLink(t,n||S());return I(s._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),Je(i,s)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function ft(e,t){const n={identifier:t,continueUri:A()?S():"http://localhost"},{signinMethods:i}=await async function(e,t){return x(e,"POST","/v1/accounts:createAuthUri",L(e,t))}(Object(r.k)(e),n);return i||[]}async function pt(e,t){const n=Object(r.k)(e),i={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&nt(n.auth,i,t);const{email:s}=await async function(e,t){return Ie(e,t)}(n.auth,i);s!==e.email&&await e.reload()}async function mt(e,t,n){const i=Object(r.k)(e),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&nt(i.auth,s,n);const{email:o}=await async function(e,t){return Ie(e,t)}(i.auth,s);o!==e.email&&await e.reload()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function gt(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const i=Object(r.k)(e),s={idToken:await i.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},o=await K(i,async function(e,t){return x(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find(({providerId:e})=>"password"===e);a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}function yt(e,t){return wt(Object(r.k)(e),t,null)}function vt(e,t){return wt(Object(r.k)(e),null,t)}async function wt(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await K(e,be(r,i));await e._updateTokensIfNecessary(s,!0)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class It extends bt{constructor(e,t,n,r){super(e,t,n),this.username=r}}class _t extends bt{constructor(e,t){super(e,"facebook.com",t)}}class Tt extends It{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class Et extends bt{constructor(e,t){super(e,"google.com",t)}}class kt extends It{constructor(e,t,n){super(e,"twitter.com",t,n)}}function St(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){const r=null===(n=null===(t=z(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r){return new bt(s,"anonymous"!==r&&"custom"!==r?r:null)}}if(!r)return null;switch(r){case"facebook.com":return new _t(s,i);case"github.com":return new Tt(s,i);case"google.com":return new Et(s,i);case"twitter.com":return new kt(s,i,e.screenName||null);case"custom":case"anonymous":return new bt(s,null);default:return new bt(s,r,i)}}(n)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,t){this.type=e,this.credential=t}static _fromIdtoken(e){return new At("enroll",e)}static _fromMfaPendingCredential(e){return new At("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return At._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return At._fromIdtoken(e.multiFactorSession.idToken)}return null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=fe(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map(e=>et._fromServerResponse(n,e));I(r.mfaPendingCredential,n,"internal-error");const s=At._fromMfaPendingCredential(r.mfaPendingCredential);return new Nt(s,i,async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await Ue._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return I(t.user,n,"internal-error"),Ue._forOperation(t.user,t.operationType,o);default:g(n,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function Ot(e,t){var n;const i=Object(r.k)(e),s=t;return I(t.customData.operationType,i,"argument-error"),I(null===(n=s.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,i,"argument-error"),Nt._fromError(i,s)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>et._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new Ct(e)}async getSession(){return At._fromIdtoken(await this.user.getIdToken())}async enroll(e,t){const n=e,r=await this.getSession(),i=await K(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"==typeof e?e:e.uid,n=await this.user.getIdToken(),r=await K(this.user,(i=this.user.auth,s={idToken:n,mfaEnrollmentId:t},x(i,"POST","/v2/accounts/mfaEnrollment:withdraw",L(i,s))));var i,s;this.enrolledFactors=this.enrolledFactors.filter(({uid:e})=>e!==t),await this.user._updateTokensIfNecessary(r);try{await this.user.reload()}catch(e){if("auth/user-token-expired"!==e.code)throw e}}}const Dt=new WeakMap;function Rt(e){const t=Object(r.k)(e);return Dt.has(t)||Dt.set(t,Ct._fromUser(t)),Dt.get(t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Pt{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem("__sak","1"),this.storage.removeItem("__sak"),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt extends Pt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Object(r.l)();return re(e)||ue(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=he(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);Object(r.q)()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Lt.type="LOCAL";const xt=Lt;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt extends Pt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Mt.type="SESSION";const Ft=Mt;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class jt{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new jt(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ut(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jt.receivers=[];class Vt{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((o,a)=>{const c=Ut("",20);r.port1.start();const u=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(){return window}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Bt(){return void 0!==qt().WorkerGlobalScope&&"function"==typeof qt().importScripts}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const zt="firebaseLocalStorageDb";class Kt{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Wt(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly").objectStore("firebaseLocalStorage")}function Gt(){const e=indexedDB.open(zt,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains("firebaseLocalStorage")?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(zt);return new Kt(e).toPromise()}(),t(await Gt()))})})}async function Ht(e,t,n){const r=Wt(e,!0).put({fbase_key:t,value:n});return new Kt(r).toPromise()}function $t(e,t){const n=Wt(e,!0).delete(t);return new Kt(n).toPromise()}class Qt{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Gt()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Bt()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jt._getInstance(Bt()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Vt(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gt();return await Ht(e,"__sak","1"),await $t(e,"__sak"),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ht(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Wt(e,!1).get(t),r=await new Kt(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>$t(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Wt(e,!1).getAll();return new Kt(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Qt.type="LOCAL";const Jt=Qt;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(e){return new Promise((t,n)=>{const r=document.createElement("script");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var i,s;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=y("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(s=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==s?s:document).appendChild(r)})}function Xt(e){return`__${e}${Math.floor(1e6*Math.random())}`}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.auth=e,this.counter=1e12,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new en(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||1e12;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||1e12;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||1e12;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class en{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"==typeof e?document.getElementById(e):e;I(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(e){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(e){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const tn=Xt("rcb"),nn=new O(3e4,6e4);class rn{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!qt().grecaptcha}load(e,t=""){return I(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)?Promise.resolve(qt().grecaptcha):new Promise((n,i)=>{const s=qt().setTimeout(()=>{i(y(e,"network-request-failed"))},nn.get());qt()[tn]=()=>{qt().clearTimeout(s),delete qt()[tn];const r=qt().grecaptcha;if(!r)return void i(y(e,"internal-error"));const o=r.render;r.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(r)};Yt("https://www.google.com/recaptcha/api.js??"+Object(r.x)({onload:tn,render:"explicit",hl:t})).catch(()=>{clearTimeout(s),i(y(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!qt().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class sn{async load(e){return new Zt(e)}clearedOneInstance(){}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on={theme:"light",type:"image"};class an{constructor(e,t=Object.assign({},on),n){this.parameters=t,this.type="recaptcha",this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=fe(n),this.isInvisible="invisible"===this.parameters.size,I("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"==typeof e?document.getElementById(e):e;I(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new sn:new rn,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise(n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){I(!this.parameters.sitekey,this.auth,"argument-error"),I(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),I("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"==typeof e)e(t);else if("string"==typeof e){const n=qt()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){I(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){I(A()&&!Bt(),this.auth,"internal-error"),await function(){let e=null;return new Promise(t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()}).catch(t=>{throw e&&window.removeEventListener("load",e),t})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e){return(await x(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);I(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return I(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class cn{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Se._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function un(e,t,n){const i=fe(e),s=await dn(i,t,Object(r.k)(n));return new cn(s,e=>Je(i,e))}async function hn(e,t,n){const i=Object(r.k)(e);await He(!1,i,"phone");const s=await dn(i.auth,t,Object(r.k)(n));return new cn(s,e=>Ye(i,e))}async function ln(e,t,n){const i=Object(r.k)(e),s=await dn(i.auth,t,Object(r.k)(n));return new cn(s,e=>Xe(i,e))}async function dn(e,t,n){var r;const i=await n.verify();try{let s;if(I("string"==typeof i,e,"argument-error"),I("recaptcha"===n.type,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){I("enroll"===t.type,e,"internal-error");return(await function(e,t){return x(e,"POST","/v2/accounts/mfaEnrollment:start",L(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo}{I("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;I(n,e,"missing-multi-factor-info");return(await function(e,t){return x(e,"POST","/v2/accounts/mfaSignIn:start",L(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return x(e,"POST","/v1/accounts:sendVerificationCode",L(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}async function fn(e,t){await Ge(Object(r.k)(e),t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.providerId=pn.PROVIDER_ID,this.auth=fe(e)}verifyPhoneNumber(e,t){return dn(this.auth,e,Object(r.k)(t))}static credential(e,t){return Se._fromVerification(e,t)}static credentialFromResult(e){const t=e;return pn.credentialFromTaggedObject(t)}static credentialFromError(e){return pn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Se._fromTokenResponse(t,n):null}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function mn(e,t){return t?k(t):(I(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pn.PROVIDER_ID="phone",pn.PHONE_SIGN_IN_METHOD="phone";class gn extends ve{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Te(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Te(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Te(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function yn(e){return Qe(e.auth,new gn(e),e.bypassAuthState)}function vn(e){const{auth:t,user:n}=e;return I(n,t,"internal-error"),$e(n,new gn(e),e.bypassAuthState)}async function wn(e){const{auth:t,user:n}=e;return I(n,t,"internal-error"),Ge(n,new gn(e),e.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yn;case"linkViaPopup":case"linkViaRedirect":return wn;case"reauthViaPopup":case"reauthViaRedirect":return vn;default:g(this.auth,"internal-error")}}resolve(e){T(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){T(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In=new O(2e3,1e4);async function _n(e,t,n){const r=fe(e);w(e,t,Oe);const i=mn(r,n);return new kn(r,"signInViaPopup",t,i).executeNotNull()}async function Tn(e,t,n){const i=Object(r.k)(e);w(i.auth,t,Oe);const s=mn(i.auth,n);return new kn(i.auth,"reauthViaPopup",t,s,i).executeNotNull()}async function En(e,t,n){const i=Object(r.k)(e);w(i.auth,t,Oe);const s=mn(i.auth,n);return new kn(i.auth,"linkViaPopup",t,s,i).executeNotNull()}class kn extends bn{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,kn.currentPopupAction&&kn.currentPopupAction.cancel(),kn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return I(e,this.auth,"internal-error"),e}async onExecution(){T(1===this.filter.length,"Popup operations only handle one event");const e=Ut();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(y(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(y(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,kn.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(y(this.auth,"popup-closed-by-user"))},2e3):this.pollId=window.setTimeout(e,In.get())};e()}}kn.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Sn=new Map;class An extends bn{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Sn.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Cn(t),r=On(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Sn.set(this.auth._key(),e)}return this.bypassAuthState||Sn.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Nn(e,t){return On(e)._set(Cn(t),"true")}function On(e){return k(e._redirectPersistence)}function Cn(e){return Z("pendingRedirect",e.config.apiKey,e.name)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(e,t,n){return async function(e,t,n){const r=fe(e);w(e,t,Oe);const i=mn(r,n);return await Nn(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function Rn(e,t,n){return async function(e,t,n){const i=Object(r.k)(e);w(i.auth,t,Oe);const s=mn(i.auth,n);await Nn(s,i.auth);const o=await Mn(i);return s._openRedirect(i.auth,t,"reauthViaRedirect",o)}(e,t,n)}function Pn(e,t,n){return async function(e,t,n){const i=Object(r.k)(e);w(i.auth,t,Oe);const s=mn(i.auth,n);await He(!1,i,t.providerId),await Nn(s,i.auth);const o=await Mn(i);return s._openRedirect(i.auth,t,"linkViaRedirect",o)}(e,t,n)}async function Ln(e,t){return await fe(e)._initializationPromise,xn(e,t,!1)}async function xn(e,t,n=!1){const r=fe(e),i=mn(r,t),s=new An(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function Mn(e){const t=Ut(e.uid+":::");return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Un(e);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Un(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(y(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(jn(e))}saveEventToCache(e){this.cachedEventUids.add(jn(e)),this.lastProcessedEventTime=Date.now()}}function jn(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Un({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}async function Vn(e,t={}){return x(e,"GET","/v1/projects",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Bn=/^https?/;function zn(e){const t=S(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Bn.test(n))return!1;if(qn.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn=new O(3e4,6e4);function Wn(){const e=qt().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}let Gn=null;function Hn(e){return Gn=Gn||function(e){return new Promise((t,n)=>{var r,i,s;function o(){Wn(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Wn(),n(y(e,"network-request-failed"))},timeout:Kn.get()})}if(null===(i=null===(r=qt().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=qt().gapi)||void 0===s?void 0:s.load)){const t=Xt("iframefcb");return qt()[t]=()=>{gapi.load?o():n(y(e,"network-request-failed"))},Yt("https://apis.google.com/js/api.js?onload="+t).catch(e=>n(e))}o()}}).catch(e=>{throw Gn=null,e})}(e),Gn}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n=new O(5e3,15e3),Qn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Jn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Yn(e){const t=e.config;I(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?C(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,s={apiKey:t.apiKey,appName:e.name,v:i.SDK_VERSION},o=Jn.get(e.config.apiHost);o&&(s.eid=o);const a=e._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${Object(r.x)(s).slice(1)}`}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Xn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Zn{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function er(e,t,n,i=500,s=600){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const u=Object.assign(Object.assign({},Xn),{width:i.toString(),height:s.toString(),top:o,left:a}),h=Object(r.l)().toLowerCase();n&&(c=ie(h)?"_blank":n),ne(h)&&(t=t||"http://localhost",u.scrollbars="yes");const l=Object.entries(u).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=Object(r.l)()){var t;return ue(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(h)&&"_self"!==c)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t||"",c),new Zn(null);const d=window.open(t||"",c,l);I(d,e,"popup-blocked");try{d.focus()}catch(e){}return new Zn(d)}function tr(e,t,n,s,o,a){I(e.config.authDomain,e,"auth-domain-config-required"),I(e.config.apiKey,e,"invalid-api-key");const c={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:i.SDK_VERSION,eventId:o};if(t instanceof Oe){t.setDefaultLanguage(e.languageCode),c.providerId=t.providerId||"",Object(r.p)(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))c[e]=t}if(t instanceof Ce){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(c.scopes=e.join(","))}e.tenantId&&(c.tid=e.tenantId);const u=c;for(const e of Object.keys(u))void 0===u[e]&&delete u[e];return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/__/auth/handler`;return C(e,"emulator/auth/handler")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)}?${Object(r.x)(u).slice(1)}`}const nr=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ft,this._completeRedirectFn=xn}async _openPopup(e,t,n,r){var i;T(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return er(e,tr(e,t,n,S(),r),Ut())}async _openRedirect(e,t,n,r){var i;return await this._originValidation(e),i=tr(e,t,n,S(),r),qt().location.href=i,new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(T(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await async function(e){const t=await Hn(e),n=qt().gapi;return I(n,e,"internal-error"),t.open({where:document.body,url:Yn(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Qn,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=y(e,"network-request-failed"),s=qt().setTimeout(()=>{r(i)},$n.get());function o(){qt().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})}))}(e),n=new Fn(e);return t.register("authEvent",t=>{I(null==t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send("webStorageSupport",{type:"webStorageSupport"},n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),g(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Vn(e);for(const e of t)try{if(zn(e))return}catch(e){}g(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return he()||re()||ue()}};class rr extends class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return _("unexpected MultiFactorSessionType")}}}{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new rr(e)}_finalizeEnroll(e,t,n){return function(e,t){return x(e,"POST","/v2/accounts/mfaEnrollment:finalize",L(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return x(e,"POST","/v2/accounts/mfaSignIn:finalize",L(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class ir{constructor(){}static assertion(e){return rr._fromCredential(e)}}ir.FACTOR_ID="phone";var sr;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class or{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){I(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ar(){return window}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sr="Browser",Object(i._registerComponent)(new a.a("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),{apiKey:r,authDomain:i}=n.options;return(e=>{I(r&&!r.includes(":"),"invalid-api-key",{appName:e.name}),I(!(null==i?void 0:i.includes(":")),"argument-error",{appName:e.name});const n={apiKey:r,authDomain:i,clientPlatform:sr,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:le(sr)},s=new de(e,n);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(k);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(s,t),s})(n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Object(i._registerComponent)(new a.a("auth-internal",e=>(e=>new or(e))(fe(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Object(i.registerVersion)("@firebase/auth","0.19.4",function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(sr)),Object(i.registerVersion)("@firebase/auth","0.19.4","esm2017");async function cr(e,t,n){var r;const{BuildInfo:i}=ar();T(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(T(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(e=>e.toString(16).padStart(2,"0")).join("")}(t.sessionId),o={};return ue()?o.ibi=i.packageName:oe()?o.apn=i.packageName:g(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,tr(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function ur(e){const{cordova:t}=ar();return new Promise(n=>{t.plugins.browsertab.isAvailable(i=>{let s=null;i?t.plugins.browsertab.openUrl(e):s=t.InAppBrowser.open(e,function(e=Object(r.l)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(s)})})}class hr extends Fn{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}async function lr(e){const t=await pr()._get(mr(e));return t&&await pr()._remove(mr(e)),t}function dr(e,t){var n,r;const i=function(e){const t=gr(e),n=t.link?decodeURIComponent(t.link):void 0,r=gr(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return gr(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=gr(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(e){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null==s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?y(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function fr(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(Math.random()*t.length);e.push(t.charAt(n))}return e.join("")}function pr(){return k(xt)}function mr(e){return Z("authEvent",e.config.apiKey,e.name)}function gr(e){if(!(null==e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return Object(r.y)(n.join("?"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr=class{constructor(){this._redirectPersistence=Ft,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=xn}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new hr(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){g(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,c,u,h;const l=ar();I("function"==typeof(null===(t=null==l?void 0:l.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),I(void 0!==(null===(n=null==l?void 0:l.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),I("function"==typeof(null===(s=null===(i=null===(r=null==l?void 0:l.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),I("function"==typeof(null===(c=null===(a=null===(o=null==l?void 0:l.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===c?void 0:c.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),I("function"==typeof(null===(h=null===(u=null==l?void 0:l.cordova)||void 0===u?void 0:u.InAppBrowser)||void 0===h?void 0:h.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),Sn.clear(),await this._originValidation(e);const s=function(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:fr(),postBody:null,tenantId:e.tenantId,error:y(e,"no-auth-event")}}(e,n,r);await function(e,t){return pr()._set(mr(e),t)}(e,s);const o=await cr(e,s,t);return async function(e,t,n){const{cordova:r}=ar();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function c(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function u(){a||(a=window.setTimeout(()=>{o(y(e,"redirect-cancelled-by-user"))},2e3))}function h(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&u()}t.addPassiveListener(c),document.addEventListener("resume",u,!1),oe()&&document.addEventListener("visibilitychange",h,!1),i=()=>{t.removePassiveListener(c),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",h,!1),a&&window.clearTimeout(a)}})}finally{i()}}(e,i,await ur(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=ar(),n={};ue()?n.iosBundleId=t.packageName:oe()?n.androidPackageName=t.packageName:g(e,"operation-not-supported-in-this-environment"),await Vn(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=ar(),s=setTimeout(async()=>{await lr(e),t.onEvent(vr())},500),o=async n=>{clearTimeout(s);const r=await lr(e);let i=null;r&&(null==n?void 0:n.url)&&(i=dr(r,n.url)),t.onEvent(i||vr())};void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,o);const a=r,c=i.packageName.toLowerCase()+"://";ar().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(c)&&o({url:e}),"function"==typeof a)try{a(e)}catch(e){console.error(e)}}}};function vr(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:y("no-auth-event")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(e,t){fe(e)._logFramework(t)}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return fu})),n.d(t,"b",(function(){return uc})),n.d(t,"c",(function(){return Ka})),n.d(t,"d",(function(){return xa})),n.d(t,"e",(function(){return Pa})),n.d(t,"f",(function(){return Bc})),n.d(t,"g",(function(){return ac})),n.d(t,"h",(function(){return hc})),n.d(t,"i",(function(){return Wa})),n.d(t,"j",(function(){return T})),n.d(t,"k",(function(){return lc})),n.d(t,"l",(function(){return za})),n.d(t,"m",(function(){return La})),n.d(t,"n",(function(){return $c})),n.d(t,"o",(function(){return zc})),n.d(t,"p",(function(){return Kc})),n.d(t,"q",(function(){return qc})),n.d(t,"r",(function(){return V})),n.d(t,"s",(function(){return Pu})),n.d(t,"t",(function(){return gu})),n.d(t,"u",(function(){return Ia})),n.d(t,"v",(function(){return ae})),n.d(t,"w",(function(){return P})),n.d(t,"x",(function(){return S})),n.d(t,"y",(function(){return $})),n.d(t,"z",(function(){return Na})),n.d(t,"A",(function(){return b})),n.d(t,"B",(function(){return J})),n.d(t,"C",(function(){return g})),n.d(t,"D",(function(){return Ea})),n.d(t,"E",(function(){return Nu})),n.d(t,"F",(function(){return ju})),n.d(t,"G",(function(){return Fu})),n.d(t,"H",(function(){return Za})),n.d(t,"I",(function(){return Ma})),n.d(t,"J",(function(){return Fa})),n.d(t,"K",(function(){return Ra})),n.d(t,"L",(function(){return Au})),n.d(t,"M",(function(){return xu})),n.d(t,"N",(function(){return nc})),n.d(t,"O",(function(){return ja})),n.d(t,"P",(function(){return cc})),n.d(t,"Q",(function(){return Ja})),n.d(t,"R",(function(){return Ya})),n.d(t,"S",(function(){return tc})),n.d(t,"T",(function(){return cu})),n.d(t,"U",(function(){return au})),n.d(t,"V",(function(){return $a})),n.d(t,"W",(function(){return Du})),n.d(t,"X",(function(){return vu})),n.d(t,"Y",(function(){return bu})),n.d(t,"Z",(function(){return Iu})),n.d(t,"ab",(function(){return _u})),n.d(t,"bb",(function(){return Tu})),n.d(t,"cb",(function(){return Eu})),n.d(t,"db",(function(){return Ha})),n.d(t,"eb",(function(){return Uu})),n.d(t,"fb",(function(){return Ga})),n.d(t,"gb",(function(){return tu})),n.d(t,"hb",(function(){return nu})),n.d(t,"ib",(function(){return ic})),n.d(t,"jb",(function(){return sc})),n.d(t,"kb",(function(){return Ou})),n.d(t,"lb",(function(){return Cu})),n.d(t,"mb",(function(){return Zc})),n.d(t,"nb",(function(){return Qc})),n.d(t,"ob",(function(){return Va})),n.d(t,"pb",(function(){return Ua})),n.d(t,"qb",(function(){return Lu})),n.d(t,"rb",(function(){return Mu})),n.d(t,"sb",(function(){return ku})),n.d(t,"tb",(function(){return f})),n.d(t,"ub",(function(){return Gc})),n.d(t,"vb",(function(){return su})),n.d(t,"wb",(function(){return iu})),n.d(t,"xb",(function(){return rc})),n.d(t,"yb",(function(){return Su})),n.d(t,"zb",(function(){return ec})),n.d(t,"Ab",(function(){return Yc})),n.d(t,"Bb",(function(){return Vu}));var r=n(3),i=n(5),s=n(4),o=n(0),a=n(6);const c="@firebase/firestore";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}u.UNAUTHENTICATED=new u(null),u.GOOGLE_CREDENTIALS=new u("google-credentials-uid"),u.FIRST_PARTY=new u("first-party-uid"),u.MOCK_USER=new u("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let h="9.6.1";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l=new s.b("@firebase/firestore");function d(){return l.logLevel}function f(e){l.setLogLevel(e)}function p(e,...t){if(l.logLevel<=s.a.DEBUG){const n=t.map(y);l.debug(`Firestore (${h}): ${e}`,...n)}}function m(e,...t){if(l.logLevel<=s.a.ERROR){const n=t.map(y);l.error(`Firestore (${h}): ${e}`,...n)}}function g(e,...t){if(l.logLevel<=s.a.WARN){const n=t.map(y);l.warn(`Firestore (${h}): ${e}`,...n)}}function y(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v(e="Unexpected state"){const t=`FIRESTORE (${h}) INTERNAL ASSERTION FAILED: `+e;throw m(t),new Error(t)}function w(e,t){e||v()}function b(e,t){e||v()}function I(e,t){return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class T extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer "+e)}}class S{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(u.UNAUTHENTICATED))}shutdown(){}}class A{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class N{constructor(e){this.t=e,this.currentUser=u.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new E;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new E,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{p("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(p("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new E)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(p("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(w("string"==typeof t.accessToken),new k(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return w(null===e||"string"==typeof e),new u(e)}}class O{constructor(e,t,n){this.type="FirstParty",this.user=u.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const r=e.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class C{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new O(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(u.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class D{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class R{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null}start(e,t){this.o=n=>{e.enqueueRetryable(()=>(e=>(null!=e.error&&p("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: "+e.error.message),t(e.token)))(n))};const n=e=>{p("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.g.onInit(e=>n(e)),setTimeout(()=>{if(!this.appCheck){const e=this.g.getImmediate({optional:!0});e?n(e):p("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(w("string"==typeof e.token),new D(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class P{getToken(){return Promise.resolve(new D(""))}invalidateToken(){}start(e,t){}shutdown(){}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.p(e),this.T=e=>t.writeSequenceNumber(e))}p(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */L.I=-1;class M{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=x(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function F(e,t){return e<t?-1:e>t?1:0}function j(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function U(e){return e+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new T(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new T(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new T(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new T(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return V.fromMillis(Date.now())}static fromDate(e){return V.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new V(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?F(this.nanoseconds,e.nanoseconds):F(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.timestamp=e}static fromTimestamp(e){return new q(e)}static min(){return new q(new V(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function z(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function K(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e,t,n){void 0===t?t=0:t>e.length&&v(),void 0===n?n=e.length-t:n>e.length-t&&v(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===W.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof W?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class G extends W{construct(e,t,n){return new G(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new T(_.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new G(t)}static emptyPath(){return new G([])}}const H=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $ extends W{construct(e,t,n){return new $(e,t,n)}static isValidIdentifier(e){return H.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new $(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new T(_.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new T(_.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new T(_.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new T(_.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $(t)}static emptyPath(){return new $([])}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.fields=e,e.sort($.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return j(this.fields,e.fields,(e,t)=>e.isEqual(t))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(){return"undefined"!=typeof atob}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Y(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Y(t)}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return F(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Y.EMPTY_BYTE_STRING=new Y("");const X=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Z(e){if(w(!!e),"string"==typeof e){let t=0;const n=X.exec(e);if(w(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ee(e.seconds),nanos:ee(e.nanos)}}function ee(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function te(e){return"string"==typeof e?Y.fromBase64String(e):Y.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function re(e){const t=Z(e.mapValue.fields.__local_write_time__.timestampValue);return new V(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(e){return null==e}function se(e){return 0===e&&1/e==-1/0}function oe(e){return"number"==typeof e&&Number.isInteger(e)&&!se(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(G.fromString(e))}static fromName(e){return new ae(G.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===G.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return G.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new G(e.slice()))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ce(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ne(e)?4:10:v()}function ue(e,t){const n=ce(e);if(n!==ce(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return re(e).isEqual(re(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Z(e.timestampValue),r=Z(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return te(e.bytesValue).isEqual(te(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ee(e.geoPointValue.latitude)===ee(t.geoPointValue.latitude)&&ee(e.geoPointValue.longitude)===ee(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ee(e.integerValue)===ee(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ee(e.doubleValue),r=ee(t.doubleValue);return n===r?se(n)===se(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return j(e.arrayValue.values||[],t.arrayValue.values||[],ue);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(B(n)!==B(r))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===r[e]||!ue(n[e],r[e])))return!1;return!0}(e,t);default:return v()}}function he(e,t){return void 0!==(e.values||[]).find(e=>ue(e,t))}function le(e,t){const n=ce(e),r=ce(t);if(n!==r)return F(n,r);switch(n){case 0:return 0;case 1:return F(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ee(e.integerValue||e.doubleValue),r=ee(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return de(e.timestampValue,t.timestampValue);case 4:return de(re(e),re(t));case 5:return F(e.stringValue,t.stringValue);case 6:return function(e,t){const n=te(e),r=te(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let e=0;e<n.length&&e<r.length;e++){const t=F(n[e],r[e]);if(0!==t)return t}return F(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=F(ee(e.latitude),ee(t.latitude));return 0!==n?n:F(ee(e.longitude),ee(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){const t=le(n[e],r[e]);if(t)return t}return F(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let e=0;e<r.length&&e<s.length;++e){const t=F(r[e],s[e]);if(0!==t)return t;const o=le(n[r[e]],i[s[e]]);if(0!==o)return o}return F(r.length,s.length)}(e.mapValue,t.mapValue);default:throw v()}}function de(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return F(e,t);const n=Z(e),r=Z(t),i=F(n.seconds,r.seconds);return 0!==i?i:F(n.nanos,r.nanos)}function fe(e){return function e(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(e){const t=Z(e);return`time(${t.seconds},${t.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?te(t.bytesValue).toBase64():"referenceValue"in t?(r=t.referenceValue,ae.fromName(r).toString()):"geoPointValue"in t?`geo(${(n=t.geoPointValue).latitude},${n.longitude})`:"arrayValue"in t?function(t){let n="[",r=!0;for(const i of t.values||[])r?r=!1:n+=",",n+=e(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(t){const n=Object.keys(t.fields||{}).sort();let r="{",i=!0;for(const s of n)i?i=!1:r+=",",r+=`${s}:${e(t.fields[s])}`;return r+"}"}(t.mapValue):v();var n,r}(e)}function pe(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function me(e){return!!e&&"integerValue"in e}function ge(e){return!!e&&"arrayValue"in e}function ye(e){return!!e&&"nullValue"in e}function ve(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function we(e){return!!e&&"mapValue"in e}function be(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return z(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=be(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=be(e.arrayValue.values[n]);return t}return Object.assign({},e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.value=e}static empty(){return new Ie({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!we(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=be(t)}setAll(e){let t=$.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=be(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());we(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ue(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];we(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){z(t,(t,n)=>e[t]=n);for(const t of n)delete e[t]}clone(){return new Ie(be(this.value))}}function _e(e){const t=[];return z(e.fields,(e,n)=>{const r=new $([e]);if(we(n)){const e=_e(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Q(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Te{constructor(e,t,n,r,i){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=i}static newInvalidDocument(e){return new Te(e,0,q.min(),Ie.empty(),0)}static newFoundDocument(e,t,n){return new Te(e,1,t,n,0)}static newNoDocument(e,t){return new Te(e,2,t,Ie.empty(),0)}static newUnknownDocument(e,t){return new Te(e,3,t,Ie.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ie.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ie.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Te&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new Te(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.R=null}}function ke(e,t=null,n=[],r=[],i=null,s=null,o=null){return new Ee(e,t,n,r,i,s,o)}function Se(e){const t=I(e);if(null===t.R){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>function(e){return e.field.canonicalString()+e.op.toString()+fe(e.value)}(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),ie(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=Ue(t.startAt)),t.endAt&&(e+="|ub:",e+=Ue(t.endAt)),t.R=e}return t.R}function Ae(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!qe(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if(n=e.filters[i],r=t.filters[i],n.op!==r.op||!n.field.isEqual(r.field)||!ue(n.value,r.value))return!1;var n,r;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ze(e.startAt,t.startAt)&&ze(e.endAt,t.endAt)}function Ne(e){return ae.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Oe extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,n):new Ce(e,t,n):"array-contains"===t?new Le(e,n):"in"===t?new xe(e,n):"not-in"===t?new Me(e,n):"array-contains-any"===t?new Fe(e,n):new Oe(e,t,n)}static P(e,t,n){return"in"===t?new De(e,n):new Re(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(le(t,this.value)):null!==t&&ce(this.value)===ce(t)&&this.v(le(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return v()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Ce extends Oe{constructor(e,t,n){super(e,t,n),this.key=ae.fromName(n.referenceValue)}matches(e){const t=ae.comparator(e.key,this.key);return this.v(t)}}class De extends Oe{constructor(e,t){super(e,"in",t),this.keys=Pe("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Re extends Oe{constructor(e,t){super(e,"not-in",t),this.keys=Pe("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Pe(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>ae.fromName(e.referenceValue))}class Le extends Oe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ge(t)&&he(t.arrayValue,this.value)}}class xe extends Oe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&he(this.value.arrayValue,t)}}class Me extends Oe{constructor(e,t){super(e,"not-in",t)}matches(e){if(he(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!he(this.value.arrayValue,t)}}class Fe extends Oe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ge(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>he(this.value.arrayValue,e))}}class je{constructor(e,t){this.position=e,this.before=t}}function Ue(e){return`${e.before?"b":"a"}:${e.position.map(e=>fe(e)).join(",")}`}class Ve{constructor(e,t="asc"){this.field=e,this.dir=t}}function qe(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Be(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?ae.comparator(ae.fromName(o.referenceValue),n.key):le(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function ze(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ue(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.S=null,this.D=null,this.startAt,this.endAt}}function We(e,t,n,r,i,s,o,a){return new Ke(e,t,n,r,i,s,o,a)}function Ge(e){return new Ke(e)}function He(e){return!ie(e.limit)&&"F"===e.limitType}function $e(e){return!ie(e.limit)&&"L"===e.limitType}function Qe(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Je(e){for(const t of e.filters)if(t.V())return t.field;return null}function Ye(e){return null!==e.collectionGroup}function Xe(e){const t=I(e);if(null===t.S){t.S=[];const e=Je(t),n=Qe(t);if(null!==e&&null===n)e.isKeyField()||t.S.push(new Ve(e)),t.S.push(new Ve($.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.S.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.S.push(new Ve($.keyField(),e))}}}return t.S}function Ze(e){const t=I(e);if(!t.D)if("F"===t.limitType)t.D=ke(t.path,t.collectionGroup,Xe(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const n of Xe(t)){const t="desc"===n.dir?"asc":"desc";e.push(new Ve(n.field,t))}const n=t.endAt?new je(t.endAt.position,!t.endAt.before):null,r=t.startAt?new je(t.startAt.position,!t.startAt.before):null;t.D=ke(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t.D}function et(e,t,n){return new Ke(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function tt(e,t){return Ae(Ze(e),Ze(t))&&e.limitType===t.limitType}function nt(e){return`${Se(Ze(e))}|lt:${e.limitType}`}function rt(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>{return`${(t=e).field.canonicalString()} ${t.op} ${fe(t.value)}`;var t}).join(", ")}]`),ie(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: "+Ue(e.startAt)),e.endAt&&(t+=", endAt: "+Ue(e.endAt)),`Target(${t})`}(Ze(e))}; limitType=${e.limitType})`}function it(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ae.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!Be(e.startAt,Xe(e),t))&&(!e.endAt||!Be(e.endAt,Xe(e),t))}(e,t)}function st(e){return(t,n)=>{let r=!1;for(const i of Xe(e)){const e=ot(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function ot(e,t,n){const r=e.field.isKeyField()?ae.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?le(r,i):v()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return v()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(e,t){if(e.C){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:se(t)?"-0":t}}function ct(e){return{integerValue:""+e}}function ut(e,t){return oe(t)?ct(t):at(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(){this._=void 0}}function lt(e,t,n){return e instanceof pt?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof mt?gt(e,t):e instanceof yt?vt(e,t):function(e,t){const n=ft(e,t),r=bt(n)+bt(e.N);return me(n)&&me(e.N)?ct(r):at(e.k,r)}(e,t)}function dt(e,t,n){return e instanceof mt?gt(e,t):e instanceof yt?vt(e,t):n}function ft(e,t){return e instanceof wt?me(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class pt extends ht{}class mt extends ht{constructor(e){super(),this.elements=e}}function gt(e,t){const n=It(t);for(const t of e.elements)n.some(e=>ue(e,t))||n.push(t);return{arrayValue:{values:n}}}class yt extends ht{constructor(e){super(),this.elements=e}}function vt(e,t){let n=It(t);for(const t of e.elements)n=n.filter(e=>!ue(e,t));return{arrayValue:{values:n}}}class wt extends ht{constructor(e,t){super(),this.k=e,this.N=t}}function bt(e){return ee(e.integerValue||e.doubleValue)}function It(e){return ge(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,t){this.field=e,this.transform=t}}class Tt{constructor(e,t){this.version=e,this.transformResults=t}}class Et{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Et}static exists(e){return new Et(void 0,e)}static updateTime(e){return new Et(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kt(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class St{}function At(e,t,n){e instanceof Rt?function(e,t,n){const r=e.value.clone(),i=xt(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Pt?function(e,t,n){if(!kt(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=xt(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Lt(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Nt(e,t,n){e instanceof Rt?function(e,t,n){if(!kt(e.precondition,t))return;const r=e.value.clone(),i=Mt(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Dt(t),r).setHasLocalMutations()}(e,t,n):e instanceof Pt?function(e,t,n){if(!kt(e.precondition,t))return;const r=Mt(e.fieldTransforms,n,t),i=t.data;i.setAll(Lt(e)),i.setAll(r),t.convertToFoundDocument(Dt(t),i).setHasLocalMutations()}(e,t,n):function(e,t){kt(e.precondition,t)&&t.convertToNoDocument(q.min())}(e,t)}function Ot(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=ft(r.transform,e||null);null!=i&&(null==n&&(n=Ie.empty()),n.set(r.field,i))}return n||null}function Ct(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&j(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof mt&&t instanceof mt||e instanceof yt&&t instanceof yt?j(e.elements,t.elements,ue):e instanceof wt&&t instanceof wt?ue(e.N,t.N):e instanceof pt&&t instanceof pt}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Dt(e){return e.isFoundDocument()?e.version:q.min()}class Rt extends St{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}}class Pt extends St{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}}function Lt(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function xt(e,t,n){const r=new Map;w(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,dt(o,a,n[i]))}return r}function Mt(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,lt(e,s,t))}return r}class Ft extends St{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class jt extends St{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.count=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,qt;function Bt(e){switch(e){default:return v();case _.CANCELLED:case _.UNKNOWN:case _.DEADLINE_EXCEEDED:case _.RESOURCE_EXHAUSTED:case _.INTERNAL:case _.UNAVAILABLE:case _.UNAUTHENTICATED:return!1;case _.INVALID_ARGUMENT:case _.NOT_FOUND:case _.ALREADY_EXISTS:case _.PERMISSION_DENIED:case _.FAILED_PRECONDITION:case _.ABORTED:case _.OUT_OF_RANGE:case _.UNIMPLEMENTED:case _.DATA_LOSS:return!0}}function zt(e){if(void 0===e)return m("GRPC error has no .code"),_.UNKNOWN;switch(e){case Vt.OK:return _.OK;case Vt.CANCELLED:return _.CANCELLED;case Vt.UNKNOWN:return _.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return _.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return _.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return _.INTERNAL;case Vt.UNAVAILABLE:return _.UNAVAILABLE;case Vt.UNAUTHENTICATED:return _.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return _.INVALID_ARGUMENT;case Vt.NOT_FOUND:return _.NOT_FOUND;case Vt.ALREADY_EXISTS:return _.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return _.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return _.FAILED_PRECONDITION;case Vt.ABORTED:return _.ABORTED;case Vt.OUT_OF_RANGE:return _.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return _.UNIMPLEMENTED;case Vt.DATA_LOSS:return _.DATA_LOSS;default:return v()}}(qt=Vt||(Vt={}))[qt.OK=0]="OK",qt[qt.CANCELLED=1]="CANCELLED",qt[qt.UNKNOWN=2]="UNKNOWN",qt[qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qt[qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qt[qt.NOT_FOUND=5]="NOT_FOUND",qt[qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",qt[qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",qt[qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",qt[qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qt[qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qt[qt.ABORTED=10]="ABORTED",qt[qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",qt[qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",qt[qt.INTERNAL=13]="INTERNAL",qt[qt.UNAVAILABLE=14]="UNAVAILABLE",qt[qt.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Kt{constructor(e,t){this.comparator=e,this.root=t||Gt.EMPTY}insert(e,t){return new Kt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gt.BLACK,null,null))}remove(e){return new Kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wt(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wt(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wt(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wt(this.root,e,this.comparator,!0)}}class Wt{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gt{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Gt.RED,this.left=null!=r?r:Gt.EMPTY,this.right=null!=i?i:Gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Gt(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Gt.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw v();if(this.right.isRed())throw v();const e=this.left.check();if(e!==this.right.check())throw v();return e+(this.isRed()?0:1)}}Gt.EMPTY=null,Gt.RED=!0,Gt.BLACK=!1,Gt.EMPTY=new class{constructor(){this.size=0}get key(){throw v()}get value(){throw v()}get color(){throw v()}get left(){throw v()}get right(){throw v()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Gt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ht{constructor(e){this.comparator=e,this.data=new Kt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $t(this.data.getIterator())}getIteratorFrom(e){return new $t(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Ht))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ht(this.comparator);return t.data=e,t}}class $t{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt=new Kt(ae.comparator);function Jt(){return Qt}const Yt=new Kt(ae.comparator);function Xt(){return Yt}const Zt=new Kt(ae.comparator);function en(){return Zt}const tn=new Ht(ae.comparator);function nn(...e){let t=tn;for(const n of e)t=t.add(n);return t}const rn=new Ht(F);function sn(){return rn}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t){const n=new Map;return n.set(e,an.createSynthesizedTargetChangeForCurrentChange(e,t)),new on(q.min(),n,sn(),Jt(),nn())}}class an{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t){return new an(Y.EMPTY_BYTE_STRING,t,nn(),nn(),nn())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,t,n,r){this.$=e,this.removedTargetIds=t,this.key=n,this.F=r}}class un{constructor(e,t){this.targetId=e,this.O=t}}class hn{constructor(e,t,n=Y.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class ln{constructor(){this.M=0,this.L=pn(),this.B=Y.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.M}get j(){return this.q}W(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}G(){let e=nn(),t=nn(),n=nn();return this.L.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:v()}}),new an(this.B,this.U,e,t,n)}H(){this.q=!1,this.L=pn()}J(e,t){this.q=!0,this.L=this.L.insert(e,t)}Y(e){this.q=!0,this.L=this.L.remove(e)}X(){this.M+=1}Z(){this.M-=1}tt(){this.q=!0,this.U=!0}}class dn{constructor(e){this.et=e,this.nt=new Map,this.st=Jt(),this.it=fn(),this.rt=new Ht(F)}ot(e){for(const t of e.$)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ut(e){this.forEachTarget(e,t=>{const n=this.ht(t);switch(e.state){case 0:this.lt(t)&&n.W(e.resumeToken);break;case 1:n.Z(),n.K||n.H(),n.W(e.resumeToken);break;case 2:n.Z(),n.K||this.removeTarget(t);break;case 3:this.lt(t)&&(n.tt(),n.W(e.resumeToken));break;case 4:this.lt(t)&&(this.ft(t),n.W(e.resumeToken));break;default:v()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach((e,n)=>{this.lt(n)&&t(n)})}dt(e){const t=e.targetId,n=e.O.count,r=this.wt(t);if(r){const e=r.target;if(Ne(e))if(0===n){const n=new ae(e.path);this.ct(t,n,Te.newNoDocument(n,q.min()))}else w(1===n);else this._t(t)!==n&&(this.ft(t),this.rt=this.rt.add(t))}}gt(e){const t=new Map;this.nt.forEach((n,r)=>{const i=this.wt(r);if(i){if(n.current&&Ne(i.target)){const t=new ae(i.target.path);null!==this.st.get(t)||this.yt(r,t)||this.ct(r,t,Te.newNoDocument(t,e))}n.j&&(t.set(r,n.G()),n.H())}});let n=nn();this.it.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.wt(e);return!t||2===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))});const r=new on(e,t,this.rt,this.st,n);return this.st=Jt(),this.it=fn(),this.rt=new Ht(F),r}at(e,t){if(!this.lt(e))return;const n=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,n),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,n){if(!this.lt(e))return;const r=this.ht(e);this.yt(e,t)?r.J(t,1):r.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),n&&(this.st=this.st.insert(t,n))}removeTarget(e){this.nt.delete(e)}_t(e){const t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}X(e){this.ht(e).X()}ht(e){let t=this.nt.get(e);return t||(t=new ln,this.nt.set(e,t)),t}Tt(e){let t=this.it.get(e);return t||(t=new Ht(F),this.it=this.it.insert(e,t)),t}lt(e){const t=null!==this.wt(e);return t||p("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}ft(e){this.nt.set(e,new ln),this.et.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}yt(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}function fn(){return new Kt(ae.comparator)}function pn(){return new Kt(ae.comparator)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn={asc:"ASCENDING",desc:"DESCENDING"},gn={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class yn{constructor(e,t){this.databaseId=e,this.C=t}}function vn(e,t){return e.C?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function wn(e,t){return e.C?t.toBase64():t.toUint8Array()}function bn(e,t){return vn(e,t.toTimestamp())}function In(e){return w(!!e),q.fromTimestamp(function(e){const t=Z(e);return new V(t.seconds,t.nanos)}(e))}function _n(e,t){return function(e){return new G(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Tn(e){const t=G.fromString(e);return w(Gn(t)),t}function En(e,t){return _n(e.databaseId,t.path)}function kn(e,t){const n=Tn(t);if(n.get(1)!==e.databaseId.projectId)throw new T(_.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new T(_.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ae(On(n))}function Sn(e,t){return _n(e.databaseId,t)}function An(e){const t=Tn(e);return 4===t.length?G.emptyPath():On(t)}function Nn(e){return new G(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function On(e){return w(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Cn(e,t,n){return{name:En(e,t),fields:n.value.mapValue.fields}}function Dn(e,t,n){const r=kn(e,t.name),i=In(t.updateTime),s=new Ie({mapValue:{fields:t.fields}}),o=Te.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Rn(e,t){let n;if(t instanceof Rt)n={update:Cn(e,t.key,t.value)};else if(t instanceof Ft)n={delete:En(e,t.key)};else if(t instanceof Pt)n={update:Cn(e,t.key,t.data),updateMask:Wn(t.fieldMask)};else{if(!(t instanceof jt))return v();n={verify:En(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof pt)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof mt)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof yt)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof wt)return{fieldPath:t.field.canonicalString(),increment:n.N};throw v()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:bn(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:v()}(e,t.precondition)),n}function Pn(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Et.updateTime(In(e.updateTime)):void 0!==e.exists?Et.exists(e.exists):Et.none()}(t.currentDocument):Et.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;if("setToServerValue"in t)w("REQUEST_TIME"===t.setToServerValue),n=new pt;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new mt(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new yt(e)}else"increment"in t?n=new wt(e,t.increment):v();const r=$.fromServerFormat(t.fieldPath);return new _t(r,n)}(e,t)):[];if(t.update){t.update.name;const i=kn(e,t.update.name),s=new Ie({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Q(t.map(e=>$.fromServerFormat(e)))}(t.updateMask);return new Pt(i,s,e,n,r)}return new Rt(i,s,n,r)}if(t.delete){const r=kn(e,t.delete);return new Ft(r,n)}if(t.verify){const r=kn(e,t.verify);return new jt(r,n)}return v()}function Ln(e,t){return{documents:[Sn(e,t.path)]}}function xn(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Sn(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Sn(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0===e.length)return;const t=e.map(e=>function(e){if("=="===e.op){if(ve(e.value))return{unaryFilter:{field:qn(e.field),op:"IS_NAN"}};if(ye(e.value))return{unaryFilter:{field:qn(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ve(e.value))return{unaryFilter:{field:qn(e.field),op:"IS_NOT_NAN"}};if(ye(e.value))return{unaryFilter:{field:qn(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qn(e.field),op:Vn(e.op),value:e.value}}}(e));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:qn(e.field),direction:Un(e.dir)}}(e))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(e,t){return e.C||ie(t)?t:{value:t}}(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=Fn(t.startAt)),t.endAt&&(n.structuredQuery.endAt=Fn(t.endAt)),n}function Mn(e){let t=An(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){w(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function e(t){return t?void 0!==t.unaryFilter?[Kn(t)]:void 0!==t.fieldFilter?[zn(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(t=>e(t)).reduce((e,t)=>e.concat(t)):v():[]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(e=>function(e){return new Ve(Bn(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,ie(t)?null:t}(n.limit));let c=null;n.startAt&&(c=jn(n.startAt));let u=null;return n.endAt&&(u=jn(n.endAt)),We(t,i,o,s,a,"F",c,u)}function Fn(e){return{before:e.before,values:e.position}}function jn(e){const t=!!e.before,n=e.values||[];return new je(n,t)}function Un(e){return mn[e]}function Vn(e){return gn[e]}function qn(e){return{fieldPath:e.canonicalString()}}function Bn(e){return $.fromServerFormat(e.fieldPath)}function zn(e){return Oe.create(Bn(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return v()}}(e.fieldFilter.op),e.fieldFilter.value)}function Kn(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Bn(e.unaryFilter.field);return Oe.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Bn(e.unaryFilter.field);return Oe.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Bn(e.unaryFilter.field);return Oe.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Bn(e.unaryFilter.field);return Oe.create(i,"!=",{nullValue:"NULL_VALUE"});default:return v()}}function Wn(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Gn(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Qn(t)),t=$n(e.get(n),t);return Qn(t)}function $n(e,t){let n=t;const r=e.length;for(let t=0;t<r;t++){const r=e.charAt(t);switch(r){case"\0":n+="";break;case"":n+="";break;default:n+=r}}return n}function Qn(e){return e+""}function Jn(e){const t=e.length;if(w(t>=2),2===t)return w(""===e.charAt(0)&&""===e.charAt(1)),G.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("",s);switch((t<0||t>n)&&v(),e.charAt(t+1)){case"":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"":i+=e.substring(s,t),i+="\0";break;case"":i+=e.substring(s,t+1);break;default:v()}s=t+2}return new G(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class Xn{constructor(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}}Xn.store="owner",Xn.key="owner";class Zn{constructor(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}}Zn.store="mutationQueues",Zn.keyPath="userId";class er{constructor(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}}er.store="mutations",er.keyPath="batchId",er.userMutationsIndex="userMutationsIndex",er.userMutationsKeyPath=["userId","batchId"];class tr{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,Hn(t)]}static key(e,t,n){return[e,Hn(t),n]}}tr.store="documentMutations",tr.PLACEHOLDER=new tr;class nr{constructor(e,t){this.path=e,this.readTime=t}}class rr{constructor(e,t){this.path=e,this.version=t}}class ir{constructor(e,t,n,r,i,s){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s}}ir.store="remoteDocuments",ir.readTimeIndex="readTimeIndex",ir.readTimeIndexPath="readTime",ir.collectionReadTimeIndex="collectionReadTimeIndex",ir.collectionReadTimeIndexPath=["parentPath","readTime"];class sr{constructor(e){this.byteSize=e}}sr.store="remoteDocumentGlobal",sr.key="remoteDocumentGlobalKey";class or{constructor(e,t,n,r,i,s,o){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o}}or.store="targets",or.keyPath="targetId",or.queryTargetsIndexName="queryTargetsIndex",or.queryTargetsKeyPath=["canonicalId","targetId"];class ar{constructor(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n}}ar.store="targetDocuments",ar.keyPath=["targetId","path"],ar.documentTargetsIndex="documentTargetsIndex",ar.documentTargetsKeyPath=["path","targetId"];class cr{constructor(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}}cr.key="targetGlobalKey",cr.store="targetGlobal";class ur{constructor(e,t){this.collectionId=e,this.parent=t}}ur.store="collectionParents",ur.keyPath=["collectionId","parent"];class hr{constructor(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}}hr.store="clientMetadata",hr.keyPath="clientId";class lr{constructor(e,t,n){this.bundleId=e,this.createTime=t,this.version=n}}lr.store="bundles",lr.keyPath="bundleId";class dr{constructor(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n}}dr.store="namedQueries",dr.keyPath="name";const fr=[Zn.store,er.store,tr.store,ir.store,or.store,Xn.store,cr.store,ar.store,hr.store,sr.store,ur.store,lr.store,dr.store],pr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mr{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&v(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new gr((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof gr?t:gr.resolve(t)}catch(e){return gr.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):gr.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):gr.reject(t)}static resolve(e){return new gr((t,n)=>{t(e)})}static reject(e){return new gr((t,n)=>{n(e)})}static waitFor(e){return new gr((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=gr.resolve(!1);for(const n of e)t=t.next(e=>e?gr.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.It=new E,this.transaction.oncomplete=()=>{this.It.resolve()},this.transaction.onabort=()=>{t.error?this.It.reject(new br(e,t.error)):this.It.resolve()},this.transaction.onerror=t=>{const n=kr(t.target.error);this.It.reject(new br(e,n))}}static open(e,t,n,r){try{return new yr(t,e.transaction(r,n))}catch(e){throw new br(t,e)}}get At(){return this.It.promise}abort(e){e&&this.It.reject(e),this.aborted||(p("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new _r(t)}}class vr{constructor(e,t,n){this.name=e,this.version=t,this.Rt=n,12.2===vr.Pt(Object(o.l)())&&m("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return p("SimpleDb","Removing database:",e),Tr(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if(!Object(o.r)())return!1;if(vr.vt())return!0;const e=Object(o.l)(),t=vr.Pt(e),n=0<t&&t<10,r=vr.Vt(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static vt(){var t;return void 0!==e&&"YES"===(null===(t=e.env)||void 0===t?void 0:t.St)}static Dt(e,t){return e.store(t)}static Pt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static Vt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async Ct(e){return this.db||(p("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new br(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new T(_.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new T(_.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new br(e,r))},r.onupgradeneeded=e=>{p("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.Rt.Nt(t,r.transaction,e.oldVersion,this.version).next(()=>{p("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.kt&&(this.db.onversionchange=e=>this.kt(e)),this.db}xt(e){this.kt=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.Ct(e);const t=yr.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).catch(e=>(t.abort(e),gr.reject(e))).toPromise();return s.catch(()=>{}),await t.At,s}catch(e){const t="FirebaseError"!==e.name&&s<3;if(p("SimpleDb","Transaction failed with error:",e.message,"Retrying:",t),this.close(),!t)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}class wr{constructor(e){this.$t=e,this.Ft=!1,this.Ot=null}get isDone(){return this.Ft}get Mt(){return this.Ot}set cursor(e){this.$t=e}done(){this.Ft=!0}Lt(e){this.Ot=e}delete(){return Tr(this.$t.delete())}}class br extends T{constructor(e,t){super(_.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ir(e){return"IndexedDbTransactionError"===e.name}class _r{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(p("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(p("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Tr(n)}add(e){return p("SimpleDb","ADD",this.store.name,e,e),Tr(this.store.add(e))}get(e){return Tr(this.store.get(e)).next(t=>(void 0===t&&(t=null),p("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return p("SimpleDb","DELETE",this.store.name,e),Tr(this.store.delete(e))}count(){return p("SimpleDb","COUNT",this.store.name),Tr(this.store.count())}Bt(e,t){const n=this.cursor(this.options(e,t)),r=[];return this.Ut(n,(e,t)=>{r.push(t)}).next(()=>r)}qt(e,t){p("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.Kt=!1;const r=this.cursor(n);return this.Ut(r,(e,t,n)=>n.delete())}jt(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.Ut(r,t)}Qt(e){const t=this.cursor({});return new gr((n,r)=>{t.onerror=e=>{const t=kr(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}Ut(e,t){const n=[];return new gr((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new wr(i),o=t(i.primaryKey,i.value,s);if(o instanceof gr){const e=o.catch(e=>(s.done(),gr.reject(e)));n.push(e)}s.isDone?r():null===s.Mt?i.continue():i.continue(s.Mt)}}).next(()=>gr.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Kt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Tr(e){return new gr((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=kr(e.target.error);n(t)}})}let Er=!1;function kr(e){const t=vr.Pt(Object(o.l)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new T("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Er||(Er=!0,setTimeout(()=>{throw e},0)),e}}return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends mr{constructor(e,t){super(),this.Wt=e,this.currentSequenceNumber=t}}function Ar(e,t){const n=I(e);return vr.Dt(n.Wt,t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const r=this.mutations[t];r.key.isEqual(e.key)&&At(r,e,n[t])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Nt(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Nt(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const n=e.get(t.key),r=n;this.applyToLocalView(r),n.isValidDocument()||r.convertToNoDocument(q.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),nn())}isEqual(e){return this.batchId===e.batchId&&j(this.mutations,e.mutations,(e,t)=>Ct(e,t))&&j(this.baseMutations,e.baseMutations,(e,t)=>Ct(e,t))}}class Or{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){w(e.mutations.length===n.length);let r=en();const i=e.mutations;for(let e=0;e<i.length;e++)r=r.insert(i[e].key,n[e].version);return new Or(e,t,n,r)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,t,n,r,i=q.min(),s=q.min(),o=Y.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(e){return new Cr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this.Gt=e}}function Rr(e,t){if(t.document)return Dn(e.Gt,t.document,!!t.hasCommittedMutations);if(t.noDocument){const e=ae.fromSegments(t.noDocument.path),n=Fr(t.noDocument.readTime),r=Te.newNoDocument(e,n);return t.hasCommittedMutations?r.setHasCommittedMutations():r}if(t.unknownDocument){const e=ae.fromSegments(t.unknownDocument.path),n=Fr(t.unknownDocument.version);return Te.newUnknownDocument(e,n)}return v()}function Pr(e,t,n){const r=Lr(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){const n=function(e,t){return{name:En(e,t.key),fields:t.data.value.mapValue.fields,updateTime:vn(e,t.version.toTimestamp())}}(e.Gt,t),s=t.hasCommittedMutations;return new ir(null,null,n,s,r,i)}if(t.isNoDocument()){const e=t.key.path.toArray(),n=Mr(t.version),s=t.hasCommittedMutations;return new ir(null,new nr(e,n),null,s,r,i)}if(t.isUnknownDocument()){const e=t.key.path.toArray(),n=Mr(t.version);return new ir(new rr(e,n),null,null,!0,r,i)}return v()}function Lr(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function xr(e){const t=new V(e[0],e[1]);return q.fromTimestamp(t)}function Mr(e){const t=e.toTimestamp();return new Yn(t.seconds,t.nanoseconds)}function Fr(e){const t=new V(e.seconds,e.nanoseconds);return q.fromTimestamp(t)}function jr(e,t){const n=(t.baseMutations||[]).map(t=>Pn(e.Gt,t));for(let e=0;e<t.mutations.length-1;++e){const n=t.mutations[e];if(e+1<t.mutations.length&&void 0!==t.mutations[e+1].transform){const r=t.mutations[e+1];n.updateTransforms=r.transform.fieldTransforms,t.mutations.splice(e+1,1),++e}}const r=t.mutations.map(t=>Pn(e.Gt,t)),i=V.fromMillis(t.localWriteTimeMs);return new Nr(t.batchId,i,n,r)}function Ur(e){const t=Fr(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Fr(e.lastLimboFreeSnapshotVersion):q.min();let r;var i;return void 0!==e.query.documents?(w(1===(i=e.query).documents.length),r=Ze(Ge(An(i.documents[0])))):r=function(e){return Ze(Mn(e))}(e.query),new Cr(r,e.targetId,0,e.lastListenSequenceNumber,t,n,Y.fromBase64String(e.resumeToken))}function Vr(e,t){const n=Mr(t.snapshotVersion),r=Mr(t.lastLimboFreeSnapshotVersion);let i;i=Ne(t.target)?Ln(e.Gt,t.target):xn(e.Gt,t.target);const s=t.resumeToken.toBase64();return new or(t.targetId,Se(t.target),n,s,t.sequenceNumber,r,i)}function qr(e){const t=Mn({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?et(t,t.limit,"L"):t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{getBundleMetadata(e,t){return zr(e).get(t).next(e=>{if(e)return{id:(t=e).bundleId,createTime:Fr(t.createTime),version:t.version};var t})}saveBundleMetadata(e,t){return zr(e).put({bundleId:(n=t).id,createTime:Mr(In(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return Kr(e).get(t).next(e=>{if(e)return{name:(t=e).name,query:qr(t.bundledQuery),readTime:Fr(t.readTime)};var t})}saveNamedQuery(e,t){return Kr(e).put(function(e){return{name:e.name,readTime:Mr(In(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function zr(e){return Ar(e,lr.store)}function Kr(e){return Ar(e,dr.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(){this.zt=new Gr}addToCollectionParentIndex(e,t){return this.zt.add(t),gr.resolve()}getCollectionParents(e,t){return gr.resolve(this.zt.getEntries(t))}}class Gr{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ht(G.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ht(G.comparator)).toArray()}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(){this.Ht=new Gr}addToCollectionParentIndex(e,t){if(!this.Ht.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.Ht.add(t)});const i={collectionId:n,parent:Hn(r)};return $r(e).put(i)}return gr.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[U(t),""],!1,!0);return $r(e).Bt(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Jn(r.parent))}return n})}}function $r(e){return Ar(e,ur.store)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Jr{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Jr(e,Jr.DEFAULT_COLLECTION_PERCENTILE,Jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(e,t,n){const r=e.store(er.store),i=e.store(tr.store),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.jt({range:o},(e,t,n)=>(a++,n.delete()));s.push(c.next(()=>{w(1===a)}));const u=[];for(const e of n.mutations){const r=tr.key(t,e.key.path,n.batchId);s.push(i.delete(r)),u.push(e.key)}return gr.waitFor(s).next(()=>u)}function Xr(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw v();t=e.noDocument}return JSON.stringify(t).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jr.DEFAULT_COLLECTION_PERCENTILE=10,Jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jr.DEFAULT=new Jr(41943040,Jr.DEFAULT_COLLECTION_PERCENTILE,Jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jr.DISABLED=new Jr(-1,0,0);class Zr{constructor(e,t,n,r){this.userId=e,this.k=t,this.Jt=n,this.referenceDelegate=r,this.Yt={}}static Xt(e,t,n,r){w(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Zr(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ti(e).jt({index:er.userMutationsIndex,range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const i=ni(e),s=ti(e);return s.add({}).next(o=>{w("number"==typeof o);const a=new Nr(o,t,n,r),c=function(e,t,n){const r=n.baseMutations.map(t=>Rn(e.Gt,t)),i=n.mutations.map(t=>Rn(e.Gt,t));return new er(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(this.k,this.userId,a),u=[];let h=new Ht((e,t)=>F(e.canonicalString(),t.canonicalString()));for(const e of r){const t=tr.key(this.userId,e.key.path,o);h=h.add(e.key.path.popLast()),u.push(s.put(c)),u.push(i.put(t,tr.PLACEHOLDER))}return h.forEach(t=>{u.push(this.Jt.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.Yt[o]=a.keys()}),gr.waitFor(u).next(()=>a)})}lookupMutationBatch(e,t){return ti(e).get(t).next(e=>e?(w(e.userId===this.userId),jr(this.k,e)):null)}Zt(e,t){return this.Yt[t]?gr.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.Yt[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return ti(e).jt({index:er.userMutationsIndex,range:r},(e,t,r)=>{t.userId===this.userId&&(w(t.batchId>=n),i=jr(this.k,t)),r.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return ti(e).jt({index:er.userMutationsIndex,range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ti(e).Bt(er.userMutationsIndex,t).next(e=>e.map(e=>jr(this.k,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=tr.prefixForPath(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return ni(e).jt({range:r},(n,r,s)=>{const[o,a,c]=n,u=Jn(a);if(o===this.userId&&t.path.isEqual(u))return ti(e).get(c).next(e=>{if(!e)throw v();w(e.userId===this.userId),i.push(jr(this.k,e))});s.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ht(F);const r=[];return t.forEach(t=>{const i=tr.prefixForPath(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=ni(e).jt({range:s},(e,r,i)=>{const[s,o,a]=e,c=Jn(o);s===this.userId&&t.path.isEqual(c)?n=n.add(a):i.done()});r.push(o)}),gr.waitFor(r).next(()=>this.te(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=tr.prefixForPath(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new Ht(F);return ni(e).jt({range:s},(e,t,i)=>{const[s,a,c]=e,u=Jn(a);s===this.userId&&n.isPrefixOf(u)?u.length===r&&(o=o.add(c)):i.done()}).next(()=>this.te(e,o))}te(e,t){const n=[],r=[];return t.forEach(t=>{r.push(ti(e).get(t).next(e=>{if(null===e)throw v();w(e.userId===this.userId),n.push(jr(this.k,e))}))}),gr.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return Yr(e.Wt,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.ee(t.batchId)}),gr.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}ee(e){delete this.Yt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return gr.resolve();const n=IDBKeyRange.lowerBound(tr.prefixForUser(this.userId)),r=[];return ni(e).jt({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=Jn(e[1]);r.push(t)}else n.done()}).next(()=>{w(0===r.length)})})}containsKey(e,t){return ei(e,this.userId,t)}ne(e){return ri(e).get(this.userId).next(e=>e||new Zn(this.userId,-1,""))}}function ei(e,t,n){const r=tr.prefixForPath(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return ni(e).jt({range:s,Kt:!0},(e,n,r)=>{const[s,a,c]=e;s===t&&a===i&&(o=!0),r.done()}).next(()=>o)}function ti(e){return Ar(e,er.store)}function ni(e){return Ar(e,tr.store)}function ri(e){return Ar(e,Zn.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this.se=e}next(){return this.se+=2,this.se}static ie(){return new ii(0)}static re(){return new ii(-1)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,t){this.referenceDelegate=e,this.k=t}allocateTargetId(e){return this.oe(e).next(t=>{const n=new ii(t.highestTargetId);return t.highestTargetId=n.next(),this.ae(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.oe(e).next(e=>q.fromTimestamp(new V(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.oe(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.oe(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.ae(e,r)))}addTargetData(e,t){return this.ce(e,t).next(()=>this.oe(e).next(n=>(n.targetCount+=1,this.ue(t,n),this.ae(e,n))))}updateTargetData(e,t){return this.ce(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>oi(e).delete(t.targetId)).next(()=>this.oe(e)).next(t=>(w(t.targetCount>0),t.targetCount-=1,this.ae(e,t)))}removeTargets(e,t,n){let r=0;const i=[];return oi(e).jt((s,o)=>{const a=Ur(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))}).next(()=>gr.waitFor(i)).next(()=>r)}forEachTarget(e,t){return oi(e).jt((e,n)=>{const r=Ur(n);t(r)})}oe(e){return ai(e).get(cr.key).next(e=>(w(null!==e),e))}ae(e,t){return ai(e).put(cr.key,t)}ce(e,t){return oi(e).put(Vr(this.k,t))}ue(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.oe(e).next(e=>e.targetCount)}getTargetData(e,t){const n=Se(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return oi(e).jt({range:r,index:or.queryTargetsIndexName},(e,n,r)=>{const s=Ur(n);Ae(t,s.target)&&(i=s,r.done())}).next(()=>i)}addMatchingKeys(e,t,n){const r=[],i=ci(e);return t.forEach(t=>{const s=Hn(t.path);r.push(i.put(new ar(n,s))),r.push(this.referenceDelegate.addReference(e,n,t))}),gr.waitFor(r)}removeMatchingKeys(e,t,n){const r=ci(e);return gr.forEach(t,t=>{const i=Hn(t.path);return gr.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=ci(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=ci(e);let i=nn();return r.jt({range:n,Kt:!0},(e,t,n)=>{const r=Jn(e[1]),s=new ae(r);i=i.add(s)}).next(()=>i)}containsKey(e,t){const n=Hn(t.path),r=IDBKeyRange.bound([n],[U(n)],!1,!0);let i=0;return ci(e).jt({index:ar.documentTargetsIndex,Kt:!0,range:r},([e,t],n,r)=>{0!==e&&(i++,r.done())}).next(()=>i>0)}Et(e,t){return oi(e).get(t).next(e=>e?Ur(e):null)}}function oi(e){return Ar(e,or.store)}function ai(e){return Ar(e,cr.store)}function ci(e){return Ar(e,ar.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ui(e){if(e.code!==_.FAILED_PRECONDITION||e.message!==pr)throw e;p("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi([e,t],[n,r]){const i=F(e,n);return 0===i?F(t,r):i}class li{constructor(e){this.he=e,this.buffer=new Ht(hi),this.le=0}fe(){return++this.le}de(e){const t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();hi(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class di{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.we=!1,this._e=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}stop(){this._e&&(this._e.cancel(),this._e=null)}get started(){return null!==this._e}me(e){const t=this.we?3e5:6e4;p("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this._e=null,this.we=!0;try{await e.collectGarbage(this.garbageCollector)}catch(e){Ir(e)?p("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await ui(e)}await this.me(e)})}}class fi{constructor(e,t){this.ge=e,this.params=t}calculateTargetCount(e,t){return this.ge.ye(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return gr.resolve(L.I);const n=new li(t);return this.ge.forEachTarget(e,e=>n.de(e.sequenceNumber)).next(()=>this.ge.pe(e,e=>n.de(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.ge.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.ge.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(p("LruGarbageCollector","Garbage collection skipped; disabled"),gr.resolve(Qr)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(p("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Qr):this.Te(e,t))}getCacheSize(e){return this.ge.getCacheSize(e)}Te(e,t){let n,r,i,o,a,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(p("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(u=Date.now(),d()<=s.a.DEBUG&&p("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-h}ms\n\tDetermined least recently used ${r} in `+(a-o)+"ms\n"+`\tRemoved ${i} targets in `+(c-a)+"ms\n"+`\tRemoved ${e} documents in `+(u-c)+"ms\n"+`Total Duration: ${u-h}ms`),gr.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new fi(e,t)}(this,t)}ye(e){const t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}Ee(e){let t=0;return this.pe(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pe(e,t){return this.Ie(e,(e,n)=>t(n))}addReference(e,t,n){return mi(e,n)}removeReference(e,t,n){return mi(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return mi(e,t)}Ae(e,t){return function(e,t){let n=!1;return ri(e).Qt(r=>ei(e,r,t).next(e=>(e&&(n=!0),gr.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Ie(e,(s,o)=>{if(o<=t){const t=this.Ae(e,s).next(t=>{if(!t)return i++,n.getEntry(e,s).next(()=>(n.removeEntry(s),ci(e).delete([0,Hn(s.path)])))});r.push(t)}}).next(()=>gr.waitFor(r)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return mi(e,t)}Ie(e,t){const n=ci(e);let r,i=L.I;return n.jt({index:ar.documentTargetsIndex},([e,n],{path:s,sequenceNumber:o})=>{0===e?(i!==L.I&&t(new ae(Jn(r)),i),i=o,r=s):i=L.I}).next(()=>{i!==L.I&&t(new ae(Jn(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function mi(e,t){return ci(e).put(function(e,t){return new ar(0,Hn(e.path),t)}(t,e.currentSequenceNumber))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,r]of n)if(this.equalsFn(t,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}forEach(e){z(this.inner,(t,n)=>{for(const[t,r]of n)e(t,r)})}isEmpty(){return K(this.inner)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(){this.changes=new gi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:q.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:Te.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?gr.resolve(n.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,t){this.k=e,this.Jt=t}addEntry(e,t,n){return Ii(e).put(_i(t),n)}removeEntry(e,t){const n=Ii(e),r=_i(t);return n.delete(r)}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.Re(e,n)))}getEntry(e,t){return Ii(e).get(_i(t)).next(e=>this.Pe(t,e))}be(e,t){return Ii(e).get(_i(t)).next(e=>({document:this.Pe(t,e),size:Xr(e)}))}getEntries(e,t){let n=Jt();return this.ve(e,t,(e,t)=>{const r=this.Pe(e,t);n=n.insert(e,r)}).next(()=>n)}Ve(e,t){let n=Jt(),r=new Kt(ae.comparator);return this.ve(e,t,(e,t)=>{const i=this.Pe(e,t);n=n.insert(e,i),r=r.insert(e,Xr(t))}).next(()=>({documents:n,Se:r}))}ve(e,t,n){if(t.isEmpty())return gr.resolve();const r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator();let s=i.getNext();return Ii(e).jt({range:r},(e,t,r)=>{const o=ae.fromSegments(e);for(;s&&ae.comparator(s,o)<0;)n(s,null),s=i.getNext();s&&s.isEqual(o)&&(n(s,t),s=i.hasNext()?i.getNext():null),s?r.Lt(s.path.toArray()):r.done()}).next(()=>{for(;s;)n(s,null),s=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,t,n){let r=Jt();const i=t.path.length+1,s={};if(n.isEqual(q.min())){const e=t.path.toArray();s.range=IDBKeyRange.lowerBound(e)}else{const e=t.path.toArray(),r=Lr(n);s.range=IDBKeyRange.lowerBound([e,r],!0),s.index=ir.collectionReadTimeIndex}return Ii(e).jt(s,(e,n,s)=>{if(e.length!==i)return;const o=Rr(this.k,n);t.path.isPrefixOf(o.key.path)?it(t,o)&&(r=r.insert(o.key,o)):s.done()}).next(()=>r)}newChangeBuffer(e){return new wi(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return bi(e).get(sr.key).next(e=>(w(!!e),e))}Re(e,t){return bi(e).put(sr.key,t)}Pe(e,t){if(t){const e=Rr(this.k,t);if(!e.isNoDocument()||!e.version.isEqual(q.min()))return e}return Te.newInvalidDocument(e)}}class wi extends yi{constructor(e,t){super(),this.De=e,this.trackRemovals=t,this.Ce=new gi(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new Ht((e,t)=>F(e.canonicalString(),t.canonicalString()));return this.changes.forEach((i,s)=>{const o=this.Ce.get(i);if(s.document.isValidDocument()){const a=Pr(this.De.k,s.document,this.getReadTime(i));r=r.add(i.path.popLast());const c=Xr(a);n+=c-o,t.push(this.De.addEntry(e,i,a))}else if(n-=o,this.trackRemovals){const n=Pr(this.De.k,Te.newNoDocument(i,q.min()),this.getReadTime(i));t.push(this.De.addEntry(e,i,n))}else t.push(this.De.removeEntry(e,i))}),r.forEach(n=>{t.push(this.De.Jt.addToCollectionParentIndex(e,n))}),t.push(this.De.updateMetadata(e,n)),gr.waitFor(t)}getFromCache(e,t){return this.De.be(e,t).next(e=>(this.Ce.set(t,e.size),e.document))}getAllFromCache(e,t){return this.De.Ve(e,t).next(({documents:e,Se:t})=>(t.forEach((e,t)=>{this.Ce.set(e,t)}),e))}}function bi(e){return Ar(e,sr.store)}function Ii(e){return Ar(e,ir.store)}function _i(e){return e.path.toArray()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e){this.k=e}Nt(e,t,n,r){w(n<r&&n>=0&&r<=11);const i=new yr("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(Xn.store)}(e),function(e){e.createObjectStore(Zn.store,{keyPath:Zn.keyPath}),e.createObjectStore(er.store,{keyPath:er.keyPath,autoIncrement:!0}).createIndex(er.userMutationsIndex,er.userMutationsKeyPath,{unique:!0}),e.createObjectStore(tr.store)}(e),Ei(e),function(e){e.createObjectStore(ir.store)}(e));let s=gr.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(ar.store),e.deleteObjectStore(or.store),e.deleteObjectStore(cr.store)}(e),Ei(e)),s=s.next(()=>function(e){const t=e.store(cr.store),n=new cr(0,0,q.min().toTimestamp(),0);return t.put(cr.key,n)}(i))),n<4&&r>=4&&(0!==n&&(s=s.next(()=>function(e,t){return t.store(er.store).Bt().next(n=>{e.deleteObjectStore(er.store),e.createObjectStore(er.store,{keyPath:er.keyPath,autoIncrement:!0}).createIndex(er.userMutationsIndex,er.userMutationsKeyPath,{unique:!0});const r=t.store(er.store),i=n.map(e=>r.put(e));return gr.waitFor(i)})}(e,i))),s=s.next(()=>{!function(e){e.createObjectStore(hr.store,{keyPath:hr.keyPath})}(e)})),n<5&&r>=5&&(s=s.next(()=>this.Ne(i))),n<6&&r>=6&&(s=s.next(()=>(function(e){e.createObjectStore(sr.store)}(e),this.ke(i)))),n<7&&r>=7&&(s=s.next(()=>this.xe(i))),n<8&&r>=8&&(s=s.next(()=>this.$e(e,i))),n<9&&r>=9&&(s=s.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){const t=e.objectStore(ir.store);t.createIndex(ir.readTimeIndex,ir.readTimeIndexPath,{unique:!1}),t.createIndex(ir.collectionReadTimeIndex,ir.collectionReadTimeIndexPath,{unique:!1})}(t)})),n<10&&r>=10&&(s=s.next(()=>this.Fe(i))),n<11&&r>=11&&(s=s.next(()=>{!function(e){e.createObjectStore(lr.store,{keyPath:lr.keyPath})}(e),function(e){e.createObjectStore(dr.store,{keyPath:dr.keyPath})}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)})),s}ke(e){let t=0;return e.store(ir.store).jt((e,n)=>{t+=Xr(n)}).next(()=>{const n=new sr(t);return e.store(sr.store).put(sr.key,n)})}Ne(e){const t=e.store(Zn.store),n=e.store(er.store);return t.Bt().next(t=>gr.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.Bt(er.userMutationsIndex,r).next(n=>gr.forEach(n,n=>{w(n.userId===t.userId);const r=jr(this.k,n);return Yr(e,t.userId,r).next(()=>{})}))}))}xe(e){const t=e.store(ar.store),n=e.store(ir.store);return e.store(cr.store).get(cr.key).next(e=>{const r=[];return n.jt((n,i)=>{const s=new G(n),o=function(e){return[0,Hn(e)]}(s);r.push(t.get(o).next(n=>n?gr.resolve():(n=>t.put(new ar(0,Hn(n),e.highestListenSequenceNumber)))(s)))}).next(()=>gr.waitFor(r))})}$e(e,t){e.createObjectStore(ur.store,{keyPath:ur.keyPath});const n=t.store(ur.store),r=new Gr,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Hn(r)})}};return t.store(ir.store).jt({Kt:!0},(e,t)=>{const n=new G(e);return i(n.popLast())}).next(()=>t.store(tr.store).jt({Kt:!0},([e,t,n],r)=>{const s=Jn(t);return i(s.popLast())}))}Fe(e){const t=e.store(or.store);return t.jt((e,n)=>{const r=Ur(n),i=Vr(this.k,r);return t.put(i)})}}function Ei(e){e.createObjectStore(ar.store,{keyPath:ar.keyPath}).createIndex(ar.documentTargetsIndex,ar.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(or.store,{keyPath:or.keyPath}).createIndex(or.queryTargetsIndexName,or.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(cr.store)}const ki="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Si{constructor(e,t,n,r,i,s,o,a,c,u){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Oe=i,this.window=s,this.document=o,this.Me=c,this.Le=u,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=e=>Promise.resolve(),!Si.bt())throw new T(_.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new pi(this,r),this.Ge=t+"main",this.k=new Dr(a),this.ze=new vr(this.Ge,11,new Ti(this.k)),this.He=new si(this.referenceDelegate,this.k),this.Jt=new Hr,this.Je=function(e,t){return new vi(e,t)}(this.k,this.Jt),this.Ye=new Br,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===u&&m("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ze().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new T(_.FAILED_PRECONDITION,ki);return this.tn(),this.en(),this.nn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.He.getHighestSequenceNumber(e))}).then(e=>{this.Be=new L(e,this.Me)}).then(()=>{this.Ue=!0}).catch(e=>(this.ze&&this.ze.close(),Promise.reject(e)))}sn(e){return this.We=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ze.xt(async t=>{null===t.newVersion&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget(async()=>{this.started&&await this.Ze()}))}Ze(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ni(e).put(new hr(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.rn(e).next(e=>{e||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)))})}).next(()=>this.on(e)).next(t=>this.isPrimary&&!t?this.an(e).next(()=>!1):!!t&&this.cn(e).next(()=>!0))).catch(e=>{if(Ir(e))return p("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return p("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.We(e)),this.isPrimary=e})}rn(e){return Ai(e).get(Xn.key).next(e=>gr.resolve(this.un(e)))}hn(e){return Ni(e).delete(this.clientId)}async ln(){if(this.isPrimary&&!this.fn(this.Qe,18e5)){this.Qe=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const t=Ar(e,hr.store);return t.Bt().next(e=>{const n=this.dn(e,18e5),r=e.filter(e=>-1===n.indexOf(e));return gr.forEach(r,e=>t.delete(e.clientId)).next(()=>r)})}).catch(()=>[]);if(this.Xe)for(const t of e)this.Xe.removeItem(this.wn(t.clientId))}}nn(){this.je=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ze().then(()=>this.ln()).then(()=>this.nn()))}un(e){return!!e&&e.ownerId===this.clientId}on(e){return this.Le?gr.resolve(!0):Ai(e).get(Xn.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)){if(this.un(t)&&this.networkEnabled)return!0;if(!this.un(t)){if(!t.allowTabSynchronization)throw new T(_.FAILED_PRECONDITION,ki);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ni(e).Bt().next(e=>void 0===this.dn(e,5e3).find(e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&p("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this.Ue=!1,this.mn(),this.je&&(this.je.cancel(),this.je=null),this.gn(),this.yn(),await this.ze.runTransaction("shutdown","readwrite",[Xn.store,hr.store],e=>{const t=new Sr(e,L.I);return this.an(t).next(()=>this.hn(t))}),this.ze.close(),this.pn()}dn(e,t){return e.filter(e=>this.fn(e.updateTimeMs,t)&&!this._n(e.clientId))}Tn(){return this.runTransaction("getActiveClients","readonly",e=>Ni(e).Bt().next(e=>this.dn(e,18e5).map(e=>e.clientId)))}get started(){return this.Ue}getMutationQueue(e){return Zr.Xt(e,this.k,this.Jt,this.referenceDelegate)}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getIndexManager(){return this.Jt}getBundleCache(){return this.Ye}runTransaction(e,t,n){p("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite";let i;return this.ze.runTransaction(e,r,fr,r=>(i=new Sr(r,this.Be?this.Be.next():L.I),"readwrite-primary"===t?this.rn(i).next(e=>!!e||this.on(i)).next(t=>{if(!t)throw m(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)),new T(_.FAILED_PRECONDITION,pr);return n(i)}).next(e=>this.cn(i).next(()=>e)):this.En(i).next(()=>n(i)))).then(e=>(i.raiseOnCommittedEvent(),e))}En(e){return Ai(e).get(Xn.key).next(e=>{if(null!==e&&this.fn(e.leaseTimestampMs,5e3)&&!this._n(e.ownerId)&&!this.un(e)&&!(this.Le||this.allowTabSynchronization&&e.allowTabSynchronization))throw new T(_.FAILED_PRECONDITION,ki)})}cn(e){const t=new Xn(this.clientId,this.allowTabSynchronization,Date.now());return Ai(e).put(Xn.key,t)}static bt(){return vr.bt()}an(e){const t=Ai(e);return t.get(Xn.key).next(e=>this.un(e)?(p("IndexedDbPersistence","Releasing primary lease."),t.delete(Xn.key)):gr.resolve())}fn(e,t){const n=Date.now();return!(e<n-t||e>n&&(m(`Detected an update time that is in the future: ${e} > ${n}`),1))}tn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ze()))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}gn(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}en(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=()=>{this.mn(),Object(o.v)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.qe))}yn(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}_n(e){var t;try{const n=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return p("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return m("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}mn(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(e){m("Failed to set zombie client id.",e)}}pn(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(e){}}wn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ai(e){return Ar(e,Xn.store)}function Ni(e){return Ar(e,hr.store)}function Oi(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Ci{constructor(e,t){this.progress=e,this.In=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,t,n){this.Je=e,this.An=t,this.Jt=n}Rn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next(n=>this.Pn(e,t,n))}Pn(e,t,n){return this.Je.getEntry(e,t).next(e=>{for(const t of n)t.applyToLocalView(e);return e})}bn(e,t){e.forEach((e,n)=>{for(const e of t)e.applyToLocalView(n)})}vn(e,t){return this.Je.getEntries(e,t).next(t=>this.Vn(e,t).next(()=>t))}Vn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>this.bn(t,e))}getDocumentsMatchingQuery(e,t,n){return function(e){return ae.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Sn(e,t.path):Ye(t)?this.Dn(e,t,n):this.Cn(e,t,n)}Sn(e,t){return this.Rn(e,new ae(t)).next(e=>{let t=Xt();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}Dn(e,t,n){const r=t.collectionGroup;let i=Xt();return this.Jt.getCollectionParents(e,r).next(s=>gr.forEach(s,s=>{const o=function(e,t){return new Ke(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.Cn(e,o,n).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}Cn(e,t,n){let r,i;return this.Je.getDocumentsMatchingQuery(e,t,n).next(n=>(r=n,this.An.getAllMutationBatchesAffectingQuery(e,t))).next(t=>(i=t,this.Nn(e,i,r).next(e=>{r=e;for(const e of i)for(const t of e.mutations){const n=t.key;let i=r.get(n);null==i&&(i=Te.newInvalidDocument(n),r=r.insert(n,i)),Nt(t,i,e.localWriteTime),i.isFoundDocument()||(r=r.remove(n))}}))).next(()=>(r.forEach((e,n)=>{it(t,n)||(r=r.remove(e))}),r))}Nn(e,t,n){let r=nn();for(const e of t)for(const t of e.mutations)t instanceof Pt&&null===n.get(t.key)&&(r=r.add(t.key));let i=n;return this.Je.getEntries(e,r).next(e=>(e.forEach((e,t)=>{t.isFoundDocument()&&(i=i.insert(e,t))}),i))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.kn=n,this.xn=r}static $n(e,t){let n=nn(),r=nn();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new Ri(e,t.fromCache,n,r)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{Fn(e){this.On=e}getDocumentsMatchingQuery(e,t,n,r){return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(q.min())?this.Mn(e,t):this.On.vn(e,r).next(i=>{const o=this.Ln(t,i);return(He(t)||$e(t))&&this.Bn(t.limitType,o,r,n)?this.Mn(e,t):(d()<=s.a.DEBUG&&p("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),rt(t)),this.On.getDocumentsMatchingQuery(e,t,n).next(e=>(o.forEach(t=>{e=e.insert(t.key,t)}),e)))})}Ln(e,t){let n=new Ht(st(e));return t.forEach((t,r)=>{it(e,r)&&(n=n.add(r))}),n}Bn(e,t,n,r){if(n.size!==t.size)return!0;const i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Mn(e,t){return d()<=s.a.DEBUG&&p("QueryEngine","Using full collection scan to execute query:",rt(t)),this.On.getDocumentsMatchingQuery(e,t,q.min())}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,t,n,r){this.persistence=e,this.Un=t,this.k=r,this.qn=new Kt(F),this.Kn=new gi(e=>Se(e),Ae),this.jn=q.min(),this.An=e.getMutationQueue(n),this.Qn=e.getRemoteDocumentCache(),this.He=e.getTargetCache(),this.Wn=new Di(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=e.getBundleCache(),this.Un.Fn(this.Wn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qn))}}function xi(e,t,n,r){return new Li(e,t,n,r)}async function Mi(e,t){const n=I(e);let r=n.An,i=n.Wn;const s=await n.persistence.runTransaction("Handle user change","readonly",e=>{let s;return n.An.getAllMutationBatches(e).next(o=>(s=o,r=n.persistence.getMutationQueue(t),i=new Di(n.Qn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(e))).next(t=>{const n=[],r=[];let o=nn();for(const e of s){n.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return i.vn(e,o).next(e=>({Gn:e,removedBatchIds:n,addedBatchIds:r}))})});return n.An=r,n.Wn=i,n.Un.Fn(n.Wn),s}function Fi(e){const t=I(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.He.getLastRemoteSnapshotVersion(e))}function ji(e,t,n,r,i){let s=nn();return n.forEach(e=>s=s.add(e)),t.getEntries(e,s).next(e=>{let s=Jt();return n.forEach((n,o)=>{const a=e.get(n),c=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(q.min())?(t.removeEntry(n,c),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o,c),s=s.insert(n,o)):p("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),s})}function Ui(e,t){const n=I(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.An.getNextMutationBatchAfterBatchId(e,t)))}function Vi(e,t){const n=I(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.He.getTargetData(e,t).next(i=>i?(r=i,gr.resolve(r)):n.He.allocateTargetId(e).next(i=>(r=new Cr(t,i,0,e.currentSequenceNumber),n.He.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.qn.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qn=n.qn.insert(e.targetId,e),n.Kn.set(t,e.targetId)),e})}async function qi(e,t,n){const r=I(e),i=r.qn.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Ir(e))throw e;p("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.qn=r.qn.remove(t),r.Kn.delete(i.target)}function Bi(e,t,n){const r=I(e);let i=q.min(),s=nn();return r.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const r=I(e),i=r.Kn.get(n);return void 0!==i?gr.resolve(r.qn.get(i)):r.He.getTargetData(t,n)}(r,e,Ze(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Un.getDocumentsMatchingQuery(e,t,n?i:q.min(),n?s:nn())).next(e=>({documents:e,zn:s})))}function zi(e,t){const n=I(e),r=I(n.He),i=n.qn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",e=>r.Et(e,t).next(e=>e?e.target:null))}function Ki(e){const t=I(e);return t.persistence.runTransaction("Get new document changes","readonly",e=>function(e,t,n){const r=I(e);let i=Jt(),s=Lr(n);const o=Ii(t),a=IDBKeyRange.lowerBound(s,!0);return o.jt({index:ir.readTimeIndex,range:a},(e,t)=>{const n=Rr(r.k,t);i=i.insert(n.key,n),s=t.readTime}).next(()=>({In:i,readTime:xr(s)}))}(t.Qn,e,t.jn)).then(({In:e,readTime:n})=>(t.jn=n,e))}async function Wi(e,t,n=nn()){const r=await Vi(e,Ze(qr(t.bundledQuery))),i=I(e);return i.persistence.runTransaction("Save named query","readwrite",e=>{const s=In(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Ye.saveNamedQuery(e,t);const o=r.withResumeToken(Y.EMPTY_BYTE_STRING,s);return i.qn=i.qn.insert(o.targetId,o),i.He.updateTargetData(e,o).next(()=>i.He.removeMatchingKeysForTargetId(e,r.targetId)).next(()=>i.He.addMatchingKeys(e,n,r.targetId)).next(()=>i.Ye.saveNamedQuery(e,t))})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e){this.k=e,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(e,t){return gr.resolve(this.Xn.get(t))}saveBundleMetadata(e,t){var n;return this.Xn.set(t.id,{id:(n=t).id,version:n.version,createTime:In(n.createTime)}),gr.resolve()}getNamedQuery(e,t){return gr.resolve(this.Zn.get(t))}saveNamedQuery(e,t){return this.Zn.set(t.name,function(e){return{name:e.name,query:qr(e.bundledQuery),readTime:In(e.readTime)}}(t)),gr.resolve()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(){this.ts=new Ht($i.es),this.ns=new Ht($i.ss)}isEmpty(){return this.ts.isEmpty()}addReference(e,t){const n=new $i(e,t);this.ts=this.ts.add(n),this.ns=this.ns.add(n)}rs(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.os(new $i(e,t))}cs(e,t){e.forEach(e=>this.removeReference(e,t))}us(e){const t=new ae(new G([])),n=new $i(t,e),r=new $i(t,e+1),i=[];return this.ns.forEachInRange([n,r],e=>{this.os(e),i.push(e.key)}),i}hs(){this.ts.forEach(e=>this.os(e))}os(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}ls(e){const t=new ae(new G([])),n=new $i(t,e),r=new $i(t,e+1);let i=nn();return this.ns.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new $i(e,0),n=this.ts.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class $i{constructor(e,t){this.key=e,this.fs=t}static es(e,t){return ae.comparator(e.key,t.key)||F(e.fs,t.fs)}static ss(e,t){return F(e.fs,t.fs)||ae.comparator(e.key,t.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,t){this.Jt=e,this.referenceDelegate=t,this.An=[],this.ds=1,this.ws=new Ht($i.es)}checkEmpty(e){return gr.resolve(0===this.An.length)}addMutationBatch(e,t,n,r){const i=this.ds;this.ds++,this.An.length>0&&this.An[this.An.length-1];const s=new Nr(i,t,n,r);this.An.push(s);for(const t of r)this.ws=this.ws.add(new $i(t.key,i)),this.Jt.addToCollectionParentIndex(e,t.key.path.popLast());return gr.resolve(s)}lookupMutationBatch(e,t){return gr.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.gs(n),i=r<0?0:r;return gr.resolve(this.An.length>i?this.An[i]:null)}getHighestUnacknowledgedBatchId(){return gr.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(e){return gr.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new $i(t,0),r=new $i(t,Number.POSITIVE_INFINITY),i=[];return this.ws.forEachInRange([n,r],e=>{const t=this._s(e.fs);i.push(t)}),gr.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ht(F);return t.forEach(e=>{const t=new $i(e,0),r=new $i(e,Number.POSITIVE_INFINITY);this.ws.forEachInRange([t,r],e=>{n=n.add(e.fs)})}),gr.resolve(this.ys(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;ae.isDocumentKey(i)||(i=i.child(""));const s=new $i(new ae(i),0);let o=new Ht(F);return this.ws.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.fs)),!0)},s),gr.resolve(this.ys(o))}ys(e){const t=[];return e.forEach(e=>{const n=this._s(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){w(0===this.ps(t.batchId,"removed")),this.An.shift();let n=this.ws;return gr.forEach(t.mutations,r=>{const i=new $i(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.ws=n})}ee(e){}containsKey(e,t){const n=new $i(t,0),r=this.ws.firstAfterOrEqual(n);return gr.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.An.length,gr.resolve()}ps(e,t){return this.gs(e)}gs(e){return 0===this.An.length?0:e-this.An[0].batchId}_s(e){const t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,t){this.Jt=e,this.Ts=t,this.docs=new Kt(ae.comparator),this.size=0}addEntry(e,t,n){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Ts(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:o,readTime:n}),this.size+=o-s,this.Jt.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return gr.resolve(n?n.document.clone():Te.newInvalidDocument(t))}getEntries(e,t){let n=Jt();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.clone():Te.newInvalidDocument(e))}),gr.resolve(n)}getDocumentsMatchingQuery(e,t,n){let r=Jt();const i=new ae(t.path.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:e,value:{document:i,readTime:o}}=s.getNext();if(!t.path.isPrefixOf(e.path))break;o.compareTo(n)<=0||it(t,i)&&(r=r.insert(i.key,i.clone()))}return gr.resolve(r)}Es(e,t){return gr.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Yi(this)}getSize(e){return gr.resolve(this.size)}}class Yi extends yi{constructor(e){super(),this.De=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.document.isValidDocument()?t.push(this.De.addEntry(e,r.document,this.getReadTime(n))):this.De.removeEntry(n)}),gr.waitFor(t)}getFromCache(e,t){return this.De.getEntry(e,t)}getAllFromCache(e,t){return this.De.getEntries(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e){this.persistence=e,this.Is=new gi(e=>Se(e),Ae),this.lastRemoteSnapshotVersion=q.min(),this.highestTargetId=0,this.As=0,this.Rs=new Hi,this.targetCount=0,this.Ps=ii.ie()}forEachTarget(e,t){return this.Is.forEach((e,n)=>t(n)),gr.resolve()}getLastRemoteSnapshotVersion(e){return gr.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return gr.resolve(this.As)}allocateTargetId(e){return this.highestTargetId=this.Ps.next(),gr.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.As&&(this.As=t),gr.resolve()}ce(e){this.Is.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ps=new ii(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}addTargetData(e,t){return this.ce(t),this.targetCount+=1,gr.resolve()}updateTargetData(e,t){return this.ce(t),gr.resolve()}removeTargetData(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,gr.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Is.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Is.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),gr.waitFor(i).next(()=>r)}getTargetCount(e){return gr.resolve(this.targetCount)}getTargetData(e,t){const n=this.Is.get(t)||null;return gr.resolve(n)}addMatchingKeys(e,t,n){return this.Rs.rs(t,n),gr.resolve()}removeMatchingKeys(e,t,n){this.Rs.cs(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),gr.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Rs.us(t),gr.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Rs.ls(t);return gr.resolve(n)}containsKey(e,t){return gr.resolve(this.Rs.containsKey(t))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,t){this.bs={},this.Be=new L(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=e(this),this.He=new Xi(this),this.Jt=new Wr,this.Je=function(e,t){return new Ji(e,t)}(this.Jt,e=>this.referenceDelegate.vs(e)),this.k=new Dr(t),this.Ye=new Gi(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(e){let t=this.bs[e.toKey()];return t||(t=new Qi(this.Jt,this.referenceDelegate),this.bs[e.toKey()]=t),t}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(e,t,n){p("MemoryPersistence","Starting transaction:",e);const r=new es(this.Be.next());return this.referenceDelegate.Vs(),n(r).next(e=>this.referenceDelegate.Ss(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ds(e,t){return gr.or(Object.values(this.bs).map(n=>()=>n.containsKey(e,t)))}}class es extends mr{constructor(e){super(),this.currentSequenceNumber=e}}class ts{constructor(e){this.persistence=e,this.Cs=new Hi,this.Ns=null}static ks(e){return new ts(e)}get xs(){if(this.Ns)return this.Ns;throw v()}addReference(e,t,n){return this.Cs.addReference(n,t),this.xs.delete(n.toString()),gr.resolve()}removeReference(e,t,n){return this.Cs.removeReference(n,t),this.xs.add(n.toString()),gr.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),gr.resolve()}removeTarget(e,t){this.Cs.us(t.targetId).forEach(e=>this.xs.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.xs.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Vs(){this.Ns=new Set}Ss(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return gr.forEach(this.xs,n=>{const r=ae.fromPath(n);return this.$s(e,r).next(e=>{e||t.removeEntry(r)})}).next(()=>(this.Ns=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(e=>{e?this.xs.delete(t.toString()):this.xs.add(t.toString())})}vs(e){return 0}$s(e,t){return gr.or([()=>gr.resolve(this.Cs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ds(e,t)])}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(e,t){return`firestore_clients_${e}_${t}`}function rs(e,t,n){let r=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(r+="_"+t.uid),r}function is(e,t){return`firestore_targets_${e}_${t}`}class ss{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Fs(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new T(r.error.code,r.error.message))),s?new ss(e,t,r.state,i):(m("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class os{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Fs(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new T(n.error.code,n.error.message))),i?new os(e,n.state,r):(m("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class as{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Fs(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=sn();for(let e=0;r&&e<n.activeTargetIds.length;++e)r=oe(n.activeTargetIds[e]),i=i.add(n.activeTargetIds[e]);return r?new as(e,i):(m("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class cs{constructor(e,t){this.clientId=e,this.onlineState=t}static Fs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new cs(t.clientId,t.onlineState):(m("SharedClientState","Failed to parse online state: "+e),null)}}class us{constructor(){this.activeTargetIds=sn()}Ms(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ls(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hs{constructor(e,t,n,r,i){this.window=e,this.Oe=t,this.persistenceKey=n,this.Bs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new Kt(F),this.started=!1,this.js=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Qs=ns(this.persistenceKey,this.Bs),this.Ws=function(e){return"firestore_sequence_number_"+e}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.persistenceKey),this.Ks=this.Ks.insert(this.Bs,new us),this.Gs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.zs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Hs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Js=function(e){return"firestore_online_state_"+e}(this.persistenceKey),this.Ys=function(e){return"firestore_bundle_loaded_"+e}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}static bt(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Tn();for(const t of e){if(t===this.Bs)continue;const e=this.getItem(ns(this.persistenceKey,t));if(e){const n=as.Fs(t,e);n&&(this.Ks=this.Ks.insert(n.clientId,n))}}this.Xs();const t=this.storage.getItem(this.Js);if(t){const e=this.Zs(t);e&&this.ti(e)}for(const e of this.js)this.qs(e);this.js=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ei(this.Ks)}isActiveQueryTarget(e){let t=!1;return this.Ks.forEach((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ni(e,"pending")}updateMutationState(e,t,n){this.ni(e,t,n),this.si(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(is(this.persistenceKey,e));if(n){const r=os.Fs(e,n);r&&(t=r.state)}}return this.ii.Ms(e),this.Xs(),t}removeLocalQueryTarget(e){this.ii.Ls(e),this.Xs()}isLocalQueryTarget(e){return this.ii.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(is(this.persistenceKey,e))}updateQueryState(e,t,n){this.ri(e,t,n)}handleUserChange(e,t,n){t.forEach(e=>{this.si(e)}),this.currentUser=e,n.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.oi(e)}notifyBundleLoaded(){this.ai()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return p("SharedClientState","READ",e,t),t}setItem(e,t){p("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){p("SharedClientState","REMOVE",e),this.storage.removeItem(e)}qs(e){const t=e;if(t.storageArea===this.storage){if(p("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Qs)return void m("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable(async()=>{if(this.started){if(null!==t.key)if(this.Gs.test(t.key)){if(null==t.newValue){const e=this.ci(t.key);return this.ui(e,null)}{const e=this.hi(t.key,t.newValue);if(e)return this.ui(e.clientId,e)}}else if(this.zs.test(t.key)){if(null!==t.newValue){const e=this.li(t.key,t.newValue);if(e)return this.fi(e)}}else if(this.Hs.test(t.key)){if(null!==t.newValue){const e=this.di(t.key,t.newValue);if(e)return this.wi(e)}}else if(t.key===this.Js){if(null!==t.newValue){const e=this.Zs(t.newValue);if(e)return this.ti(e)}}else if(t.key===this.Ws){const e=function(e){let t=L.I;if(null!=e)try{const n=JSON.parse(e);w("number"==typeof n),t=n}catch(e){m("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==L.I&&this.sequenceNumberHandler(e)}else if(t.key===this.Ys)return this.syncEngine._i()}else this.js.push(t)})}}get ii(){return this.Ks.get(this.Bs)}Xs(){this.setItem(this.Qs,this.ii.Os())}ni(e,t,n){const r=new ss(this.currentUser,e,t,n),i=rs(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Os())}si(e){const t=rs(this.persistenceKey,this.currentUser,e);this.removeItem(t)}oi(e){const t={clientId:this.Bs,onlineState:e};this.storage.setItem(this.Js,JSON.stringify(t))}ri(e,t,n){const r=is(this.persistenceKey,e),i=new os(e,t,n);this.setItem(r,i.Os())}ai(){this.setItem(this.Ys,"value-not-used")}ci(e){const t=this.Gs.exec(e);return t?t[1]:null}hi(e,t){const n=this.ci(e);return as.Fs(n,t)}li(e,t){const n=this.zs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return ss.Fs(new u(i),r,t)}di(e,t){const n=this.Hs.exec(e),r=Number(n[1]);return os.Fs(r,t)}Zs(e){return cs.Fs(e)}async fi(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.mi(e.batchId,e.state,e.error);p("SharedClientState","Ignoring mutation for non-active user "+e.user.uid)}wi(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}ui(e,t){const n=t?this.Ks.insert(e,t):this.Ks.remove(e),r=this.ei(this.Ks),i=this.ei(n),s=[],o=[];return i.forEach(e=>{r.has(e)||s.push(e)}),r.forEach(e=>{i.has(e)||o.push(e)}),this.syncEngine.yi(s,o).then(()=>{this.Ks=n})}ti(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ei(e){let t=sn();return e.forEach((e,n)=>{t=t.unionWith(n.activeTargetIds)}),t}}class ls{constructor(){this.pi=new us,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.pi.Ms(e),this.Ti[e]||"not-current"}updateQueryState(e,t,n){this.Ti[e]=t}removeLocalQueryTarget(e){this.pi.Ls(e)}isLocalQueryTarget(e){return this.pi.activeTargetIds.has(e)}clearQueryState(e){delete this.Ti[e]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(e){return this.pi.activeTargetIds.has(e)}start(){return this.pi=new us,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{Ei(e){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.Pi(),this.bi=[],this.vi()}Ei(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){p("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Pi(){p("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this.Vi=e.Vi,this.Si=e.Si}Di(e){this.Ci=e}Ni(e){this.ki=e}onMessage(e){this.xi=e}close(){this.Si()}send(e){this.Vi(e)}$i(){this.Ci()}Fi(e){this.ki(e)}Oi(e){this.xi(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.Mi=t+"://"+e.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(e,t,n,r,i){const s=this.Ui(e,t);p("RestConnection","Sending: ",s,n);const o={};return this.qi(o,r,i),this.Ki(e,s,o,n).then(e=>(p("RestConnection","Received: ",e),e),t=>{throw g("RestConnection",e+" failed with error: ",t,"url: ",s,"request:",n),t})}ji(e,t,n,r,i){return this.Bi(e,t,n,r,i)}qi(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+h,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}Ui(e,t){const n=ps[e];return`${this.Mi}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Ki(e,t,n,r){return new Promise((i,s)=>{const o=new a.g;o.listenOnce(a.c.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case a.a.NO_ERROR:const t=o.getResponseJson();p("Connection","XHR received:",JSON.stringify(t)),i(t);break;case a.a.TIMEOUT:p("Connection",'RPC "'+e+'" timed out'),s(new T(_.DEADLINE_EXCEEDED,"Request time out"));break;case a.a.HTTP_ERROR:const n=o.getStatus();if(p("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const e=o.getResponseJson().error;if(e&&e.status&&e.message){const t=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(_).indexOf(t)>=0?t:_.UNKNOWN}(e.status);s(new T(t,e.message))}else s(new T(_.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new T(_.UNAVAILABLE,"Connection failed."));break;default:v()}}finally{p("Connection",'RPC "'+e+'" completed.')}});const c=JSON.stringify(r);o.send(t,"POST",c,n,15)})}Qi(e,t,n){const r=[this.Mi,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Object(a.h)(),s=Object(a.i)(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(c.xmlHttpFactory=new a.d({})),this.qi(c.initMessageHeaders,t,n),Object(o.s)()||Object(o.u)()||Object(o.o)()||Object(o.q)()||Object(o.w)()||Object(o.n)()||(c.httpHeadersOverwriteParam="$httpHeaders");const u=r.join("");p("Connection","Creating WebChannel: "+u,c);const h=i.createWebChannel(u,c);let l=!1,d=!1;const f=new ms({Vi:e=>{d?p("Connection","Not sending because WebChannel is closed:",e):(l||(p("Connection","Opening WebChannel transport."),h.open(),l=!0),p("Connection","WebChannel sending:",e),h.send(e))},Si:()=>h.close()}),m=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return m(h,a.f.EventType.OPEN,()=>{d||p("Connection","WebChannel transport opened.")}),m(h,a.f.EventType.CLOSE,()=>{d||(d=!0,p("Connection","WebChannel transport closed"),f.Fi())}),m(h,a.f.EventType.ERROR,e=>{d||(d=!0,g("Connection","WebChannel transport errored:",e),f.Fi(new T(_.UNAVAILABLE,"The operation could not be completed")))}),m(h,a.f.EventType.MESSAGE,e=>{var t;if(!d){const n=e.data[0];w(!!n);const r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){p("Connection","WebChannel received error:",i);const e=i.status;let t=function(e){const t=Vt[e];if(void 0!==t)return zt(t)}(e),n=i.message;void 0===t&&(t=_.INTERNAL,n="Unknown error status: "+e+" with message "+i.message),d=!0,f.Fi(new T(t,n)),h.close()}else p("Connection","WebChannel received:",n),f.Oi(n)}}),m(s,a.b.STAT_EVENT,e=>{e.stat===a.e.PROXY?p("Connection","Detected buffering proxy"):e.stat===a.e.NOPROXY&&p("Connection","Detected no buffering proxy")}),setTimeout(()=>{f.$i()},0),f}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(){return"undefined"!=typeof window?window:null}function vs(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(e){return new yn(e,!0)}class bs{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Oe=e,this.timerId=t,this.Wi=n,this.Gi=r,this.zi=i,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(e){this.cancel();const t=Math.floor(this.Hi+this.tr()),n=Math.max(0,Date.now()-this.Yi),r=Math.max(0,t-n);r>0&&p("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Hi} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Ji=this.Oe.enqueueAfterDelay(this.timerId,r,()=>(this.Yi=Date.now(),e())),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,t,n,r,i,s,o,a){this.Oe=e,this.nr=n,this.sr=r,this.ir=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new bs(e,t)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}async stop(){this.hr()&&await this.close(0)}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.ar&&(this.ar=this.Oe.enqueueAfterDelay(this.nr,6e4,()=>this.mr()))}gr(e){this.yr(),this.stream.send(e)}async mr(){if(this.lr())return this.close(0)}yr(){this.ar&&(this.ar.cancel(),this.ar=null)}pr(){this.cr&&(this.cr.cancel(),this.cr=null)}async close(e,t){this.yr(),this.pr(),this.ur.cancel(),this.rr++,4!==e?this.ur.reset():t&&t.code===_.RESOURCE_EXHAUSTED?(m(t.toString()),m("Using maximum backoff delay to prevent overloading the backend."),this.ur.Xi()):t&&t.code===_.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Tr(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ni(t)}Tr(){}auth(){this.state=1;const e=this.Er(this.rr),t=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.rr===t&&this.Ir(e,n)},t=>{e(()=>{const e=new T(_.UNKNOWN,"Fetching auth token failed: "+t.message);return this.Ar(e)})})}Ir(e,t){const n=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di(()=>{n(()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.sr,1e4,()=>(this.lr()&&(this.state=3),Promise.resolve())),this.listener.Di()))}),this.stream.Ni(e=>{n(()=>this.Ar(e))}),this.stream.onMessage(e=>{n(()=>this.onMessage(e))})}dr(){this.state=5,this.ur.Zi(async()=>{this.state=0,this.start()})}Ar(e){return p("PersistentStream","close with error: "+e),this.stream=null,this.close(4,e)}Er(e){return t=>{this.Oe.enqueueAndForget(()=>this.rr===e?t():(p("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _s extends Is{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.k=i}Rr(e,t){return this.ir.Qi("Listen",e,t)}onMessage(e){this.ur.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:v()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.C?(w(void 0===t||"string"==typeof t),Y.fromBase64String(t||"")):(w(void 0===t||t instanceof Uint8Array),Y.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?_.UNKNOWN:zt(e.code);return new T(t,e.message||"")}(o);n=new hn(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=kn(e,r.document.name),s=In(r.document.updateTime),o=new Ie({mapValue:{fields:r.document.fields}}),a=Te.newFoundDocument(i,s,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new cn(c,u,a.key,a)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=kn(e,r.document),s=r.readTime?In(r.readTime):q.min(),o=Te.newNoDocument(i,s),a=r.removedTargetIds||[];n=new cn([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=kn(e,r.document),s=r.removedTargetIds||[];n=new cn([],s,i,null)}else{if(!("filter"in t))return v();{t.filter;const e=t.filter;e.targetId;const r=e.count||0,i=new Ut(r),s=e.targetId;n=new un(s,i)}}return n}(this.k,e),n=function(e){if(!("targetChange"in e))return q.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?q.min():t.readTime?In(t.readTime):q.min()}(e);return this.listener.Pr(t,n)}br(e){const t={};t.database=Nn(this.k),t.addTarget=function(e,t){let n;const r=t.target;return n=Ne(r)?{documents:Ln(e,r)}:{query:xn(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=wn(e,t.resumeToken):t.snapshotVersion.compareTo(q.min())>0&&(n.readTime=vn(e,t.snapshotVersion.toTimestamp())),n}(this.k,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return v()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.k,e);n&&(t.labels=n),this.gr(t)}vr(e){const t={};t.database=Nn(this.k),t.removeTarget=e,this.gr(t)}}class Ts extends Is{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.k=i,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(e,t){return this.ir.Qi("Write",e,t)}onMessage(e){if(w(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();const t=function(e,t){return e&&e.length>0?(w(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?In(e.updateTime):In(t);return n.isEqual(q.min())&&(n=In(t)),new Tt(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=In(e.commitTime);return this.listener.Cr(n,t)}return w(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}kr(){const e={};e.database=Nn(this.k),this.gr(e)}Dr(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Rn(this.k,e))};this.gr(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.ir=n,this.k=r,this.$r=!1}Fr(){if(this.$r)throw new T(_.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(e,t,n){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.ir.Bi(e,t,n,r,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===_.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new T(_.UNKNOWN,e.toString())})}ji(e,t,n){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.ir.ji(e,t,n,r,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===_.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new T(_.UNKNOWN,e.toString())})}terminate(){this.$r=!0}}class ks{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Or=0,this.Mr=null,this.Lr=!0}Br(){0===this.Or&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Mr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve())))}Kr(e){"Online"===this.state?this.Ur("Unknown"):(this.Or++,this.Or>=1&&(this.jr(),this.qr("Connection failed 1 times. Most recent error: "+e.toString()),this.Ur("Offline")))}set(e){this.jr(),this.Or=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}Ur(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}qr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(m(t),this.Lr=!1):p("OnlineStateTracker",t)}jr(){null!==this.Mr&&(this.Mr.cancel(),this.Mr=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=i,this.Hr.Ei(e=>{n.enqueueAndForget(async()=>{xs(this)&&(p("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=I(e);t.Gr.add(4),await Ns(t),t.Jr.set("Unknown"),t.Gr.delete(4),await As(t)}(this))})}),this.Jr=new ks(n,r)}}async function As(e){if(xs(e))for(const t of e.zr)await t(!0)}async function Ns(e){for(const t of e.zr)await t(!1)}function Os(e,t){const n=I(e);n.Wr.has(t.targetId)||(n.Wr.set(t.targetId,t),Ls(n)?Ps(n):Xs(n).lr()&&Ds(n,t))}function Cs(e,t){const n=I(e),r=Xs(n);n.Wr.delete(t),r.lr()&&Rs(n,t),0===n.Wr.size&&(r.lr()?r._r():xs(n)&&n.Jr.set("Unknown"))}function Ds(e,t){e.Yr.X(t.targetId),Xs(e).br(t)}function Rs(e,t){e.Yr.X(t),Xs(e).vr(t)}function Ps(e){e.Yr=new dn({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Wr.get(t)||null}),Xs(e).start(),e.Jr.Br()}function Ls(e){return xs(e)&&!Xs(e).hr()&&e.Wr.size>0}function xs(e){return 0===I(e).Gr.size}function Ms(e){e.Yr=void 0}async function Fs(e){e.Wr.forEach((t,n)=>{Ds(e,t)})}async function js(e,t){Ms(e),Ls(e)?(e.Jr.Kr(t),Ps(e)):e.Jr.set("Unknown")}async function Us(e,t,n){if(e.Jr.set("Online"),t instanceof hn&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Wr.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Wr.delete(r),e.Yr.removeTarget(r))}(e,t)}catch(n){p("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Vs(e,n)}else if(t instanceof cn?e.Yr.ot(t):t instanceof un?e.Yr.dt(t):e.Yr.ut(t),!n.isEqual(q.min()))try{const t=await Fi(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Yr.gt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Wr.get(r);i&&e.Wr.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach(t=>{const n=e.Wr.get(t);if(!n)return;e.Wr.set(t,n.withResumeToken(Y.EMPTY_BYTE_STRING,n.snapshotVersion)),Rs(e,t);const r=new Cr(n.target,t,1,n.sequenceNumber);Ds(e,r)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){p("RemoteStore","Failed to raise snapshot:",t),await Vs(e,t)}}async function Vs(e,t,n){if(!Ir(t))throw t;e.Gr.add(1),await Ns(e),e.Jr.set("Offline"),n||(n=()=>Fi(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{p("RemoteStore","Retrying IndexedDB access"),await n(),e.Gr.delete(1),await As(e)})}function qs(e,t){return t().catch(n=>Vs(e,n,t))}async function Bs(e){const t=I(e),n=Zs(t);let r=t.Qr.length>0?t.Qr[t.Qr.length-1].batchId:-1;for(;zs(t);)try{const e=await Ui(t.localStore,r);if(null===e){0===t.Qr.length&&n._r();break}r=e.batchId,Ks(t,e)}catch(e){await Vs(t,e)}Ws(t)&&Gs(t)}function zs(e){return xs(e)&&e.Qr.length<10}function Ks(e,t){e.Qr.push(t);const n=Zs(e);n.lr()&&n.Sr&&n.Dr(t.mutations)}function Ws(e){return xs(e)&&!Zs(e).hr()&&e.Qr.length>0}function Gs(e){Zs(e).start()}async function Hs(e){Zs(e).kr()}async function $s(e){const t=Zs(e);for(const n of e.Qr)t.Dr(n.mutations)}async function Qs(e,t,n){const r=e.Qr.shift(),i=Or.from(r,t,n);await qs(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Bs(e)}async function Js(e,t){t&&Zs(e).Sr&&await async function(e,t){if(Bt(n=t.code)&&n!==_.ABORTED){const n=e.Qr.shift();Zs(e).wr(),await qs(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Bs(e)}var n}(e,t),Ws(e)&&Gs(e)}async function Ys(e,t){const n=I(e);t?(n.Gr.delete(2),await As(n)):t||(n.Gr.add(2),await Ns(n),n.Jr.set("Unknown"))}function Xs(e){return e.Xr||(e.Xr=function(e,t,n){const r=I(e);return r.Fr(),new _s(t,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}(e.datastore,e.asyncQueue,{Di:Fs.bind(null,e),Ni:js.bind(null,e),Pr:Us.bind(null,e)}),e.zr.push(async t=>{t?(e.Xr.wr(),Ls(e)?Ps(e):e.Jr.set("Unknown")):(await e.Xr.stop(),Ms(e))})),e.Xr}function Zs(e){return e.Zr||(e.Zr=function(e,t,n){const r=I(e);return r.Fr(),new Ts(t,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(e.datastore,e.asyncQueue,{Di:Hs.bind(null,e),Ni:Js.bind(null,e),Nr:$s.bind(null,e),Cr:Qs.bind(null,e)}),e.zr.push(async t=>{t?(e.Zr.wr(),await Bs(e)):(await e.Zr.stop(),e.Qr.length>0&&(p("RemoteStore",`Stopping write stream with ${e.Qr.length} pending writes`),e.Qr=[]))})),e.Zr
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class eo{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new E,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new eo(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new T(_.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function to(e,t){if(m("AsyncQueue",`${t}: ${e}`),Ir(e))return new T(_.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this.comparator=e?(t,n)=>e(t,n)||ae.comparator(t.key,n.key):(e,t)=>ae.comparator(e.key,t.key),this.keyedMap=Xt(),this.sortedSet=new Kt(this.comparator)}static emptySet(e){return new no(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof no))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new no;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(){this.eo=new Kt(ae.comparator)}track(e){const t=e.doc.key,n=this.eo.get(t);n?0!==e.type&&3===n.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==n.type?this.eo=this.eo.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.eo=this.eo.remove(t):1===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):v():this.eo=this.eo.insert(t,e)}no(){const e=[];return this.eo.inorderTraversal((t,n)=>{e.push(n)}),e}}class io{constructor(e,t,n,r,i,s,o,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(e,t,n,r){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new io(e,t,no.emptySet(t),i,n,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tt(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(){this.so=void 0,this.listeners=[]}}class oo{constructor(){this.queries=new gi(e=>nt(e),tt),this.onlineState="Unknown",this.io=new Set}}async function ao(e,t){const n=I(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new so),i)try{s.so=await n.onListen(r)}catch(e){const n=to(e,`Initialization of query '${rt(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.ro(n.onlineState),s.so&&t.oo(s.so)&&lo(n)}async function co(e,t){const n=I(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function uo(e,t){const n=I(e);let r=!1;for(const e of t){const t=e.query,i=n.queries.get(t);if(i){for(const t of i.listeners)t.oo(e)&&(r=!0);i.so=e}}r&&lo(n)}function ho(e,t,n){const r=I(e),i=r.queries.get(t);if(i)for(const e of i.listeners)e.onError(n);r.queries.delete(t)}function lo(e){e.io.forEach(e=>{e.next()})}class fo{constructor(e,t,n){this.query=e,this.ao=t,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=n||{}}oo(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new io(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.co?this.ho(e)&&(this.ao.next(e),t=!0):this.lo(e,this.onlineState)&&(this.fo(e),t=!0),this.uo=e,t}onError(e){this.ao.error(e)}ro(e){this.onlineState=e;let t=!1;return this.uo&&!this.co&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}lo(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return!(this.options.wo&&n||e.docs.isEmpty()&&"Offline"!==t)}ho(e){if(e.docChanges.length>0)return!0;const t=this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}fo(e){e=io.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.ao.next(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,t){this.payload=e,this.byteLength=t}_o(){return"metadata"in this.payload}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e){this.k=e}Hn(e){return kn(this.k,e)}Jn(e){return e.metadata.exists?Dn(this.k,e.document,!1):Te.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}Yn(e){return In(e)}}class go{constructor(e,t,n){this.mo=e,this.localStore=t,this.k=n,this.queries=[],this.documents=[],this.progress=yo(e)}yo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}po(e){const t=new Map,n=new mo(this.k);for(const r of e)if(r.metadata.queries){const e=n.Hn(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||nn()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=I(e);let s=nn(),o=Jt(),a=en();for(const e of n){const n=t.Hn(e.metadata.name);e.document&&(s=s.add(n)),o=o.insert(n,t.Jn(e)),a=a.insert(n,t.Yn(e.metadata.readTime))}const c=i.Qn.newChangeBuffer({trackRemovals:!0}),u=await Vi(i,function(e){return Ze(Ge(G.fromString("__bundle__/docs/"+e)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",e=>ji(e,c,o,q.min(),a).next(t=>(c.apply(e),t)).next(t=>i.He.removeMatchingKeysForTargetId(e,u.targetId).next(()=>i.He.addMatchingKeys(e,s,u.targetId)).next(()=>i.Wn.Vn(e,t)).next(()=>t)))}(this.localStore,new mo(this.k),this.documents,this.mo.id),t=this.po(this.documents);for(const e of this.queries)await Wi(this.localStore,e,t.get(e.name));return this.progress.taskState="Success",new Ci(Object.assign({},this.progress),e)}}function yo(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this.key=e}}class wo{constructor(e){this.key=e}}class bo{constructor(e,t){this.query=e,this.To=t,this.Eo=null,this.current=!1,this.Io=nn(),this.mutatedKeys=nn(),this.Ao=st(e),this.Ro=new no(this.Ao)}get Po(){return this.To}bo(e,t){const n=t?t.vo:new ro,r=t?t.Ro:this.Ro;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a=He(this.query)&&r.size===this.query.limit?r.last():null,c=$e(this.query)&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const u=r.get(e),h=it(this.query,t)?t:null,l=!!u&&this.mutatedKeys.has(u.key),d=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let f=!1;u&&h?u.data.isEqual(h.data)?l!==d&&(n.track({type:3,doc:h}),f=!0):this.Vo(u,h)||(n.track({type:2,doc:h}),f=!0,(a&&this.Ao(h,a)>0||c&&this.Ao(h,c)<0)&&(o=!0)):!u&&h?(n.track({type:0,doc:h}),f=!0):u&&!h&&(n.track({type:1,doc:u}),f=!0,(a||c)&&(o=!0)),f&&(h?(s=s.add(h),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),He(this.query)||$e(this.query))for(;s.size>this.query.limit;){const e=He(this.query)?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ro:s,vo:n,Bn:o,mutatedKeys:i}}Vo(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;const i=e.vo.no();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return v()}};return n(e)-n(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e.type,t.type)||this.Ao(e.doc,t.doc)),this.So(n);const s=t?this.Do():[],o=0===this.Io.size&&this.current?1:0,a=o!==this.Eo;return this.Eo=o,0!==i.length||a?{snapshot:new io(this.query,e.Ro,r,i,e.mutatedKeys,0===o,a,!1),Co:s}:{Co:s}}ro(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new ro,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}So(e){e&&(e.addedDocuments.forEach(e=>this.To=this.To.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.To=this.To.delete(e)),this.current=e.current)}Do(){if(!this.current)return[];const e=this.Io;this.Io=nn(),this.Ro.forEach(e=>{this.No(e.key)&&(this.Io=this.Io.add(e.key))});const t=[];return e.forEach(e=>{this.Io.has(e)||t.push(new wo(e))}),this.Io.forEach(n=>{e.has(n)||t.push(new vo(n))}),t}ko(e){this.To=e.zn,this.Io=nn();const t=this.bo(e.documents);return this.applyChanges(t,!0)}xo(){return io.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class Io{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class _o{constructor(e){this.key=e,this.$o=!1}}class To{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Fo={},this.Oo=new gi(e=>nt(e),tt),this.Mo=new Map,this.Lo=new Set,this.Bo=new Kt(ae.comparator),this.Uo=new Map,this.qo=new Hi,this.Ko={},this.jo=new Map,this.Qo=ii.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}async function Eo(e,t){const n=Jo(e);let r,i;const s=n.Oo.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.xo();else{const e=await Vi(n.localStore,Ze(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await ko(n,t,r,"current"===s),n.isPrimaryClient&&Os(n.remoteStore,e)}return i}async function ko(e,t,n,r){e.Go=(t,n,r)=>async function(e,t,n,r){let i=t.view.bo(n);i.Bn&&(i=await Bi(e.localStore,t.query,!1).then(({documents:e})=>t.view.bo(e,i)));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return Mo(e,t.targetId,o.Co),o.snapshot}(e,t,n,r);const i=await Bi(e.localStore,t,!0),s=new bo(t,i.zn),o=s.bo(i.documents),a=an.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),c=s.applyChanges(o,e.isPrimaryClient,a);Mo(e,n,c.Co);const u=new Io(t,n,s);return e.Oo.set(t,u),e.Mo.has(n)?e.Mo.get(n).push(t):e.Mo.set(n,[t]),c.snapshot}async function So(e,t){const n=I(e),r=n.Oo.get(t),i=n.Mo.get(r.targetId);if(i.length>1)return n.Mo.set(r.targetId,i.filter(e=>!tt(e,t))),void n.Oo.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await qi(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Cs(n.remoteStore,r.targetId),Lo(n,r.targetId)}).catch(ui)):(Lo(n,r.targetId),await qi(n.localStore,r.targetId,!0))}async function Ao(e,t){const n=I(e);try{const e=await function(e,t){const n=I(e),r=t.snapshotVersion;let i=n.qn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.qn;const o=[];t.targetChanges.forEach((t,s)=>{const a=i.get(s);if(!a)return;o.push(n.He.removeMatchingKeys(e,t.removedDocuments,s).next(()=>n.He.addMatchingKeys(e,t.addedDocuments,s)));const c=t.resumeToken;if(c.approximateByteSize()>0){const u=a.withResumeToken(c,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(s,u),function(e,t,n){return w(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(a,u,t)&&o.push(n.He.updateTargetData(e,u))}});let a=Jt();if(t.documentUpdates.forEach((r,i)=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(ji(e,s,t.documentUpdates,r,void 0).next(e=>{a=e})),!r.isEqual(q.min())){const t=n.He.getLastRemoteSnapshotVersion(e).next(t=>n.He.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return gr.waitFor(o).next(()=>s.apply(e)).next(()=>n.Wn.Vn(e,a)).next(()=>a)}).then(e=>(n.qn=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Uo.get(t);r&&(w(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.$o=!0:e.modifiedDocuments.size>0?w(r.$o):e.removedDocuments.size>0&&(w(r.$o),r.$o=!1))}),await Uo(n,e,t)}catch(e){await ui(e)}}function No(e,t,n){const r=I(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Oo.forEach((n,r)=>{const i=r.view.ro(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=I(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const e of n.listeners)e.ro(t)&&(r=!0)}),r&&lo(n)}(r.eventManager,t),e.length&&r.Fo.Pr(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Oo(e,t,n){const r=I(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Uo.get(t),s=i&&i.key;if(s){let e=new Kt(ae.comparator);e=e.insert(s,Te.newNoDocument(s,q.min()));const n=nn().add(s),i=new on(q.min(),new Map,new Ht(F),e,n);await Ao(r,i),r.Bo=r.Bo.remove(s),r.Uo.delete(t),jo(r)}else await qi(r.localStore,t,!1).then(()=>Lo(r,t,n)).catch(ui)}async function Co(e,t){const n=I(e),r=t.batch.batchId;try{const e=await function(e,t){const n=I(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=gr.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);w(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))})}),o.next(()=>e.An.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.An.performConsistencyCheck(e)).next(()=>n.Wn.vn(e,r))})}(n.localStore,t);Po(n,r,null),Ro(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Uo(n,e)}catch(e){await ui(e)}}async function Do(e,t,n){const r=I(e);try{const e=await function(e,t){const n=I(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.An.lookupMutationBatch(e,t).next(t=>(w(null!==t),r=t.keys(),n.An.removeMutationBatch(e,t))).next(()=>n.An.performConsistencyCheck(e)).next(()=>n.Wn.vn(e,r))})}(r.localStore,t);Po(r,t,n),Ro(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Uo(r,e)}catch(n){await ui(n)}}function Ro(e,t){(e.jo.get(t)||[]).forEach(e=>{e.resolve()}),e.jo.delete(t)}function Po(e,t,n){const r=I(e);let i=r.Ko[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ko[r.currentUser.toKey()]=i}}function Lo(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Mo.get(t))e.Oo.delete(r),n&&e.Fo.zo(r,n);e.Mo.delete(t),e.isPrimaryClient&&e.qo.us(t).forEach(t=>{e.qo.containsKey(t)||xo(e,t)})}function xo(e,t){e.Lo.delete(t.path.canonicalString());const n=e.Bo.get(t);null!==n&&(Cs(e.remoteStore,n),e.Bo=e.Bo.remove(t),e.Uo.delete(n),jo(e))}function Mo(e,t,n){for(const r of n)r instanceof vo?(e.qo.addReference(r.key,t),Fo(e,r)):r instanceof wo?(p("SyncEngine","Document no longer in limbo: "+r.key),e.qo.removeReference(r.key,t),e.qo.containsKey(r.key)||xo(e,r.key)):v()}function Fo(e,t){const n=t.key,r=n.path.canonicalString();e.Bo.get(n)||e.Lo.has(r)||(p("SyncEngine","New document in limbo: "+n),e.Lo.add(r),jo(e))}function jo(e){for(;e.Lo.size>0&&e.Bo.size<e.maxConcurrentLimboResolutions;){const t=e.Lo.values().next().value;e.Lo.delete(t);const n=new ae(G.fromString(t)),r=e.Qo.next();e.Uo.set(r,new _o(n)),e.Bo=e.Bo.insert(n,r),Os(e.remoteStore,new Cr(Ze(Ge(n.path)),r,2,L.I))}}async function Uo(e,t,n){const r=I(e),i=[],s=[],o=[];r.Oo.isEmpty()||(r.Oo.forEach((e,a)=>{o.push(r.Go(a,t,n).then(e=>{if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),i.push(e);const t=Ri.$n(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.Fo.Pr(i),await async function(e,t){const n=I(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>gr.forEach(t,t=>gr.forEach(t.kn,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>gr.forEach(t.xn,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Ir(e))throw e;p("LocalStore","Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.qn.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.qn=n.qn.insert(t,i)}}}(r.localStore,s))}async function Vo(e,t){const n=I(e);if(!n.currentUser.isEqual(t)){p("SyncEngine","User change. New user:",t.toKey());const e=await Mi(n.localStore,t);n.currentUser=t,function(e,t){e.jo.forEach(e=>{e.forEach(e=>{e.reject(new T(_.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.jo.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Uo(n,e.Gn)}}function qo(e,t){const n=I(e),r=n.Uo.get(t);if(r&&r.$o)return nn().add(r.key);{let e=nn();const r=n.Mo.get(t);if(!r)return e;for(const t of r){const r=n.Oo.get(t);e=e.unionWith(r.view.Po)}return e}}async function Bo(e,t){const n=I(e),r=await Bi(n.localStore,t.query,!0),i=t.view.ko(r);return n.isPrimaryClient&&Mo(n,t.targetId,i.Co),i}async function zo(e){const t=I(e);return Ki(t.localStore).then(e=>Uo(t,e))}async function Ko(e,t,n,r){const i=I(e),s=await function(e,t){const n=I(e),r=I(n.An);return n.persistence.runTransaction("Lookup mutation documents","readonly",e=>r.Zt(e,t).next(t=>t?n.Wn.vn(e,t):gr.resolve(null)))}(i.localStore,t);null!==s?("pending"===n?await Bs(i.remoteStore):"acknowledged"===n||"rejected"===n?(Po(i,t,r||null),Ro(i,t),function(e,t){I(I(e).An).ee(t)}(i.localStore,t)):v(),await Uo(i,s)):p("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Wo(e,t,n){const r=I(e),i=[],s=[];for(const e of t){let t;const n=r.Mo.get(e);if(n&&0!==n.length){t=await Vi(r.localStore,Ze(n[0]));for(const e of n){const t=r.Oo.get(e),n=await Bo(r,t);n.snapshot&&s.push(n.snapshot)}}else{const n=await zi(r.localStore,e);t=await Vi(r.localStore,n),await ko(r,Go(n),e,!1)}i.push(t)}return r.Fo.Pr(s),i}function Go(e){return We(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Ho(e){const t=I(e);return I(I(t.localStore).persistence).Tn()}async function $o(e,t,n,r){const i=I(e);if(i.Wo)p("SyncEngine","Ignoring unexpected query state notification.");else if(i.Mo.has(t))switch(n){case"current":case"not-current":{const e=await Ki(i.localStore),r=on.createSynthesizedRemoteEventForCurrentChange(t,"current"===n);await Uo(i,e,r);break}case"rejected":await qi(i.localStore,t,!0),Lo(i,t,r);break;default:v()}}async function Qo(e,t,n){const r=Jo(e);if(r.Wo){for(const e of t){if(r.Mo.has(e)){p("SyncEngine","Adding an already active target "+e);continue}const t=await zi(r.localStore,e),n=await Vi(r.localStore,t);await ko(r,Go(t),n.targetId,!1),Os(r.remoteStore,n)}for(const e of n)r.Mo.has(e)&&await qi(r.localStore,e,!1).then(()=>{Cs(r.remoteStore,e),Lo(r,e)}).catch(ui)}}function Jo(e){const t=I(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ao.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=qo.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Oo.bind(null,t),t.Fo.Pr=uo.bind(null,t.eventManager),t.Fo.zo=ho.bind(null,t.eventManager),t}function Yo(e){const t=I(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Co.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Do.bind(null,t),t}class Xo{constructor(){this.synchronizeTabs=!1}async initialize(e){this.k=ws(e.databaseInfo.databaseId),this.sharedClientState=this.Jo(e),this.persistence=this.Yo(e),await this.persistence.start(),this.gcScheduler=this.Xo(e),this.localStore=this.Zo(e)}Xo(e){return null}Zo(e){return xi(this.persistence,new Pi,e.initialUser,this.k)}Yo(e){return new Zi(ts.ks,this.k)}Jo(e){return new ls}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Zo extends Xo{constructor(e,t,n){super(),this.ta=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await async function(e){const t=I(e);return t.persistence.runTransaction("Synchronize last document change read time","readonly",e=>function(e){const t=Ii(e);let n=q.min();return t.jt({index:ir.readTimeIndex,reverse:!0},(e,t,r)=>{t.readTime&&(n=xr(t.readTime)),r.done()}).next(()=>n)}(e)).then(e=>{t.jn=e})}(this.localStore),await this.ta.initialize(this,e),await Yo(this.ta.syncEngine),await Bs(this.ta.remoteStore),await this.persistence.sn(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(this.localStore),Promise.resolve()))}Zo(e){return xi(this.persistence,new Pi,e.initialUser,this.k)}Xo(e){const t=this.persistence.referenceDelegate.garbageCollector;return new di(t,e.asyncQueue)}Yo(e){const t=Oi(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Jr.withCacheSize(this.cacheSizeBytes):Jr.DEFAULT;return new Si(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,ys(),vs(),this.k,this.sharedClientState,!!this.forceOwnership)}Jo(e){return new ls}}class ea extends Zo{constructor(e,t){super(e,t,!1),this.ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ta.syncEngine;this.sharedClientState instanceof hs&&(this.sharedClientState.syncEngine={mi:Ko.bind(null,t),gi:$o.bind(null,t),yi:Qo.bind(null,t),Tn:Ho.bind(null,t),_i:zo.bind(null,t)},await this.sharedClientState.start()),await this.persistence.sn(async e=>{await async function(e,t){const n=I(e);if(Jo(n),Yo(n),!0===t&&!0!==n.Wo){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Wo(n,e.toArray());n.Wo=!0,await Ys(n.remoteStore,!0);for(const e of t)Os(n.remoteStore,e)}else if(!1===t&&!1!==n.Wo){const e=[];let t=Promise.resolve();n.Mo.forEach((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then(()=>(Lo(n,i),qi(n.localStore,i,!0))),Cs(n.remoteStore,i)}),await t,await Wo(n,e),function(e){const t=I(e);t.Uo.forEach((e,n)=>{Cs(t.remoteStore,n)}),t.qo.hs(),t.Uo=new Map,t.Bo=new Kt(ae.comparator)}(n),n.Wo=!1,await Ys(n.remoteStore,!1)}}(this.ta.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop())})}Jo(e){const t=ys();if(!hs.bt(t))throw new T(_.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Oi(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new hs(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class ta{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>No(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Vo.bind(null,this.syncEngine),await Ys(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new oo}createDatastore(e){const t=ws(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new gs(r));var r;return function(e,t,n,r){return new Es(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>No(this.syncEngine,e,0),s=fs.bt()?new fs:new ds,new Ss(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new To(e,t,n,r,i,s);return o&&(a.Wo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=I(e);p("RemoteStore","RemoteStore shutting down."),t.Gr.add(5),await Ns(t),t.Hr.shutdown(),t.Jr.set("Unknown")}(this.remoteStore)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(e,t=10240){let n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.reject("unimplemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ea(this.observer.next,e)}error(e){this.observer.error?this.ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}na(){this.muted=!0}ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,t){this.sa=e,this.k=t,this.metadata=new E,this.buffer=new Uint8Array,this.ia=new TextDecoder("utf-8"),this.ra().then(e=>{e&&e._o()?this.metadata.resolve(e.payload.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==e?void 0:e.payload)))},e=>this.metadata.reject(e))}close(){return this.sa.cancel()}async getMetadata(){return this.metadata.promise}async Ho(){return await this.getMetadata(),this.ra()}async ra(){const e=await this.oa();if(null===e)return null;const t=this.ia.decode(e),n=Number(t);isNaN(n)&&this.aa(`length string (${t}) is not valid number`);const r=await this.ca(n);return new po(JSON.parse(r),e.length+n)}ua(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async oa(){for(;this.ua()<0&&!await this.ha(););if(0===this.buffer.length)return null;const e=this.ua();e<0&&this.aa("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async ca(e){for(;this.buffer.length<e;)await this.ha()&&this.aa("Reached the end of bundle when more is expected.");const t=this.ia.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}aa(e){throw this.sa.cancel(),new Error("Invalid bundle format: "+e)}async ha(){const e=await this.sa.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new T(_.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=I(e),r=Nn(n.k)+"/documents",i={documents:t.map(e=>En(n.k,e))},s=await n.ji("BatchGetDocuments",r,i),o=new Map;s.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){w(!!t.found),t.found.name,t.found.updateTime;const n=kn(e,t.found.name),r=In(t.found.updateTime),i=new Ie({mapValue:{fields:t.found.fields}});return Te.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){w(!!t.missing),w(!!t.readTime);const n=kn(e,t.missing),r=In(t.readTime);return Te.newNoDocument(n,r)}(e,t):v()}(n.k,e);o.set(t.key.toString(),t)});const a=[];return t.forEach(e=>{const t=o.get(e.toString());w(!!t),a.push(t)}),a}(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ft(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{const n=ae.fromPath(t);this.mutations.push(new jt(n,this.precondition(n)))}),await async function(e,t){const n=I(e),r=Nn(n.k)+"/documents",i={writes:t.map(e=>Rn(n.k,e))};await n.Bi("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw v();t=q.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new T(_.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Et.updateTime(t):Et.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(q.min()))throw new T(_.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Et.updateTime(t)}return Et.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.la=5,this.ur=new bs(this.asyncQueue,"transaction_retry")}run(){this.la-=1,this.fa()}fa(){this.ur.Zi(async()=>{const e=new sa(this.datastore),t=this.da(e);t&&t.then(t=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(t)}).catch(e=>{this.wa(e)}))}).catch(e=>{this.wa(e)})})}da(e){try{const t=this.updateFunction(e);return!ie(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}wa(e){this.la>0&&this._a(e)?(this.la-=1,this.asyncQueue.enqueueAndForget(()=>(this.fa(),Promise.resolve()))):this.deferred.reject(e)}_a(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Bt(t)}return!1}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=u.UNAUTHENTICATED,this.clientId=M.A(),this.authCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async e=>{p("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,()=>Promise.resolve())}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new T(_.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new E;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=to(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function ca(e,t){e.asyncQueue.verifyOperationInProgress(),p("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Mi(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e.offlineComponents=t}async function ua(e,t){e.asyncQueue.verifyOperationInProgress();const n=await ha(e);p("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener(e=>async function(e,t){const n=I(e);n.asyncQueue.verifyOperationInProgress(),p("RemoteStore","RemoteStore received new credentials");const r=xs(n);n.Gr.add(3),await Ns(n),r&&n.Jr.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Gr.delete(3),await As(n)}(t.remoteStore,e)),e.onlineComponents=t}async function ha(e){return e.offlineComponents||(p("FirestoreClient","Using default OfflineComponentProvider"),await ca(e,new Xo)),e.offlineComponents}async function la(e){return e.onlineComponents||(p("FirestoreClient","Using default OnlineComponentProvider"),await ua(e,new ta)),e.onlineComponents}function da(e){return ha(e).then(e=>e.persistence)}function fa(e){return ha(e).then(e=>e.localStore)}function pa(e){return la(e).then(e=>e.remoteStore)}function ma(e){return la(e).then(e=>e.syncEngine)}async function ga(e){const t=await la(e),n=t.eventManager;return n.onListen=Eo.bind(null,t.syncEngine),n.onUnlisten=So.bind(null,t.syncEngine),n}function ya(e,t,n={}){const r=new E;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new ra({next:s=>{t.enqueueAndForget(()=>co(e,o));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new T(_.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new T(_.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new fo(Ge(n.path),s,{includeMetadataChanges:!0,wo:!0});return ao(e,o)}(await ga(e),e.asyncQueue,t,n,r)),r.promise}function va(e,t,n={}){const r=new E;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new ra({next:n=>{t.enqueueAndForget(()=>co(e,o)),n.fromCache&&"server"===r.source?i.reject(new T(_.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new fo(n,s,{includeMetadataChanges:!0,wo:!0});return ao(e,o)}(await ga(e),e.asyncQueue,t,n,r)),r.promise}function wa(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?(new TextEncoder).encode(e):e,function(e,t){return new ia(e,t)}(function(e,t){if(e instanceof Uint8Array)return na(e,t);if(e instanceof ArrayBuffer)return na(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n,ws(t));e.asyncQueue.enqueueAndForget(async()=>{!function(e,t,n){const r=I(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=I(e),r=In(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",e=>n.Ye.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(r)>=0)}(e.localStore,r))return await t.close(),void n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r));n._updateProgress(yo(r));const i=new go(r,e.localStore,t.k);let s=await t.Ho();for(;s;){const e=await i.yo(s);e&&n._updateProgress(e),s=await t.Ho()}const o=await i.complete();await Uo(e,o.In,void 0),await function(e,t){const n=I(e);return n.persistence.runTransaction("Save bundle","readwrite",e=>n.Ye.saveBundleMetadata(e,t))}(e.localStore,r),n._completeWith(o.progress)}catch(e){g("SyncEngine","Loading bundle failed with "+e),n._failWith(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)(r,t,n).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(await ma(e),i,r)})}class ba{constructor(e,t,n,r,i,s,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class Ia{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ia&&e.projectId===this.projectId&&e.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ta(e,t,n){if(!n)throw new T(_.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Ea(e,t,n,r){if(!0===t&&!0===r)throw new T(_.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function ka(e){if(!ae.isDocumentKey(e))throw new T(_.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Sa(e){if(ae.isDocumentKey(e))throw new T(_.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Aa(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":v()}function Na(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new T(_.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Aa(e);throw new T(_.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Oa(e,t){if(t<=0)throw new T(_.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new T(_.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new T(_.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Ea("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,t,n){this._authCredentials=t,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ca({}),this._settingsFrozen=!1,e instanceof Ia?this._databaseId=e:(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new T(_.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ia(e.options.projectId)}(e))}get app(){if(!this._app)throw new T(_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new T(_.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ca(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new S;switch(e.type){case"gapi":const t=e.client;return w(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new C(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new T(_.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=_a.get(e);t&&(p("ComponentProvider","Removing Datastore"),_a.delete(e),t.terminate())}(this),Promise.resolve()}}function Ra(e,t,n,r={}){var i;const s=(e=Na(e,Da))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&g("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${n}`,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=u.MOCK_USER;else{t=Object(o.f)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new T(_.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new u(s)}e._authCredentials=new A(new k(t,n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pa(this.firestore,e,this._key)}}class La{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new La(this.firestore,e,this._query)}}class xa extends La{constructor(e,t,n){super(e,t,Ge(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pa(this.firestore,null,new ae(e))}withConverter(e){return new xa(this.firestore,e,this._path)}}function Ma(e,t,...n){if(e=Object(o.k)(e),Ta("collection","path",t),e instanceof Da){const r=G.fromString(t,...n);return Sa(r),new xa(e,null,r)}{if(!(e instanceof Pa||e instanceof xa))throw new T(_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(G.fromString(t,...n));return Sa(r),new xa(e.firestore,null,r)}}function Fa(e,t){if(e=Na(e,Da),Ta("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new T(_.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new La(e,null,function(e){return new Ke(G.emptyPath(),e)}(t))}function ja(e,t,...n){if(e=Object(o.k)(e),1===arguments.length&&(t=M.A()),Ta("doc","path",t),e instanceof Da){const r=G.fromString(t,...n);return ka(r),new Pa(e,null,new ae(r))}{if(!(e instanceof Pa||e instanceof xa))throw new T(_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(G.fromString(t,...n));return ka(r),new Pa(e.firestore,e instanceof xa?e.converter:null,new ae(r))}}function Ua(e,t){return e=Object(o.k)(e),t=Object(o.k)(t),(e instanceof Pa||e instanceof xa)&&(t instanceof Pa||t instanceof xa)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Va(e,t){return e=Object(o.k)(e),t=Object(o.k)(t),e instanceof La&&t instanceof La&&e.firestore===t.firestore&&tt(e._query,t._query)&&e.converter===t.converter
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class qa{constructor(){this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new bs(this,"async_queue_retry"),this.Ra=()=>{const e=vs();e&&p("AsyncQueue","Visibility state changed to "+e.visibilityState),this.ur.er()};const e=vs();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ra)}get isShuttingDown(){return this.ya}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pa(),this.ba(e)}enterRestrictedMode(e){if(!this.ya){this.ya=!0,this.Ia=e||!1;const t=vs();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ra)}}enqueue(e){if(this.Pa(),this.ya)return new Promise(()=>{});const t=new E;return this.ba(()=>this.ya&&this.Ia?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ga.push(e),this.va()))}async va(){if(0!==this.ga.length){try{await this.ga[0](),this.ga.shift(),this.ur.reset()}catch(e){if(!Ir(e))throw e;p("AsyncQueue","Operation failed with retryable error: "+e)}this.ga.length>0&&this.ur.Zi(()=>this.va())}}ba(e){const t=this.ma.then(()=>(this.Ea=!0,e().catch(e=>{this.Ta=e,this.Ea=!1;throw m("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)),e}).then(e=>(this.Ea=!1,e))));return this.ma=t,t}enqueueAfterDelay(e,t,n){this.Pa(),this.Aa.indexOf(e)>-1&&(t=0);const r=eo.createAndSchedule(this,e,t,n,e=>this.Va(e));return this.pa.push(r),r}Pa(){this.Ta&&v()}verifyOperationInProgress(){}async Sa(){let e;do{e=this.ma,await e}while(e!==this.ma)}Da(e){for(const t of this.pa)if(t.timerId===e)return!0;return!1}Ca(e){return this.Sa().then(()=>{this.pa.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.pa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Sa()})}Na(e){this.Aa.push(e)}Va(e){const t=this.pa.indexOf(e);this.pa.splice(t,1)}}function Ba(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const e of["next","error","complete"])if(e in n&&"function"==typeof n[e])return!0;return!1}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)}class za{constructor(){this._progressObserver={},this._taskCompletionResolver=new E,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka=-1;class Wa extends Da{constructor(e,t,n){super(e,t,n),this.type="firestore",this._queue=new qa,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Qa(this),this._firestoreClient.terminate()}}function Ga(e,t){const n=Object(r._getProvider)(e,"firestore");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if(Object(o.h)(r,t))return e;throw new T(_.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==t.cacheSizeBytes&&-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new T(_.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:t})}function Ha(e=Object(r.getApp)()){return Object(r._getProvider)(e,"firestore").getImmediate()}function $a(e){return e._firestoreClient||Qa(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Qa(e){var t;const n=e._freezeSettings(),r=function(e,t,n,r){return new ba(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new aa(e._authCredentials,e._appCheckCredentials,e._queue,r)}function Ja(e,t){oc(e=Na(e,Wa));const n=$a(e),r=e._freezeSettings(),i=new ta;return Xa(n,i,new Zo(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}function Ya(e){oc(e=Na(e,Wa));const t=$a(e),n=e._freezeSettings(),r=new ta;return Xa(t,r,new ea(r,n.cacheSizeBytes))}function Xa(e,t,n){const r=new E;return e.asyncQueue.enqueue(async()=>{try{await ca(e,n),await ua(e,t),r.resolve()}catch(e){if(!function(e){return"FirebaseError"===e.name?e.code===_.FAILED_PRECONDITION||e.code===_.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(e))throw e;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.reject(e)}}).then(()=>r.promise)}function Za(e){if(e._initialized&&!e._terminated)throw new T(_.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new E;return e._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(e){if(!vr.bt())return Promise.resolve();const t=e+"main";await vr.delete(t)}(Oi(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}}),t.promise}function ec(e){return function(e){const t=new E;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t){const n=I(e);xs(n.remoteStore)||p("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=I(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.An.getHighestUnacknowledgedBatchId(e))}(n.localStore);if(-1===e)return void t.resolve();const r=n.jo.get(e)||[];r.push(t),n.jo.set(e,r)}catch(e){const n=to(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await ma(e),t)),t.promise}($a(e=Na(e,Wa)))}function tc(e){return function(e){return e.asyncQueue.enqueue(async()=>{const t=await da(e),n=await pa(e);return t.setNetworkEnabled(!0),function(e){const t=I(e);return t.Gr.delete(0),As(t)}(n)})}($a(e=Na(e,Wa)))}function nc(e){return function(e){return e.asyncQueue.enqueue(async()=>{const t=await da(e),n=await pa(e);return t.setNetworkEnabled(!1),async function(e){const t=I(e);t.Gr.add(0),await Ns(t),t.Jr.set("Offline")}(n)})}($a(e=Na(e,Wa)))}function rc(e){return Object(r._removeServiceInstance)(e.app,"firestore"),e._delete()}function ic(e,t){const n=$a(e=Na(e,Wa)),r=new za;return wa(n,e._databaseId,t,r),r}function sc(e,t){return function(e,t){return e.asyncQueue.enqueue(async()=>function(e,t){const n=I(e);return n.persistence.runTransaction("Get named query","readonly",e=>n.Ye.getNamedQuery(e,t))}(await fa(e),t))}($a(e=Na(e,Wa)),t).then(t=>t?new La(e,null,t.query):null)}function oc(e){if(e._initialized||e._terminated)throw new T(_.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new T(_.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function cc(){return new ac("__name__")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new uc(Y.fromBase64String(e))}catch(e){throw new T(_.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new uc(Y.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e){this._methodName=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new T(_.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new T(_.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return F(this._lat,e._lat)||F(this._long,e._long)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=/^__.*__$/;class fc{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Pt(e,this.data,this.fieldMask,t,this.fieldTransforms):new Rt(e,this.data,t,this.fieldTransforms)}}class pc{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Pt(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function mc(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw v()}}class gc{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.k=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ka(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get xa(){return this.settings.xa}$a(e){return new gc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Fa(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.$a({path:n,Oa:!1});return r.Ma(e),r}La(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.$a({path:n,Oa:!1});return r.ka(),r}Ba(e){return this.$a({path:void 0,Oa:!0})}Ua(e){return Mc(e,this.settings.methodName,this.settings.qa||!1,this.path,this.settings.Ka)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ka(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ma(this.path.get(e))}Ma(e){if(0===e.length)throw this.Ua("Document fields must not be empty");if(mc(this.xa)&&dc.test(e))throw this.Ua('Document fields cannot begin and end with "__"')}}class yc{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.k=n||ws(e)}ja(e,t,n,r=!1){return new gc({xa:e,methodName:t,Ka:n,path:$.emptyPath(),Oa:!1,qa:r},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function vc(e){const t=e._freezeSettings(),n=ws(e._databaseId);return new yc(e._databaseId,!!t.ignoreUndefinedProperties,n)}function wc(e,t,n,r,i,s={}){const o=e.ja(s.merge||s.mergeFields?2:0,t,n,i);Rc("Data must be an object, but it was:",o,r);const a=Cc(r,o);let c,u;if(s.merge)c=new Q(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Pc(t,r,n);if(!o.contains(i))throw new T(_.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Fc(e,i)||e.push(i)}c=new Q(e),u=o.fieldTransforms.filter(e=>c.covers(e.field))}else c=null,u=o.fieldTransforms;return new fc(new Ie(a),c,u)}class bc extends hc{_toFieldTransform(e){if(2!==e.xa)throw 1===e.xa?e.Ua(this._methodName+"() can only appear at the top level of your update data"):e.Ua(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bc}}function Ic(e,t,n){return new gc({xa:3,Ka:t.settings.Ka,methodName:e._methodName,Oa:n},t.databaseId,t.k,t.ignoreUndefinedProperties)}class _c extends hc{_toFieldTransform(e){return new _t(e.path,new pt)}isEqual(e){return e instanceof _c}}class Tc extends hc{constructor(e,t){super(e),this.Qa=t}_toFieldTransform(e){const t=Ic(this,e,!0),n=this.Qa.map(e=>Oc(e,t)),r=new mt(n);return new _t(e.path,r)}isEqual(e){return this===e}}class Ec extends hc{constructor(e,t){super(e),this.Qa=t}_toFieldTransform(e){const t=Ic(this,e,!0),n=this.Qa.map(e=>Oc(e,t)),r=new yt(n);return new _t(e.path,r)}isEqual(e){return this===e}}class kc extends hc{constructor(e,t){super(e),this.Wa=t}_toFieldTransform(e){const t=new wt(e.k,ut(e.k,this.Wa));return new _t(e.path,t)}isEqual(e){return this===e}}function Sc(e,t,n,r){const i=e.ja(1,t,n);Rc("Data must be an object, but it was:",i,r);const s=[],a=Ie.empty();z(r,(e,r)=>{const c=xc(t,e,n);r=Object(o.k)(r);const u=i.La(c);if(r instanceof bc)s.push(c);else{const e=Oc(r,u);null!=e&&(s.push(c),a.set(c,e))}});const c=new Q(s);return new pc(a,c,i.fieldTransforms)}function Ac(e,t,n,r,i,s){const a=e.ja(1,t,n),c=[Pc(t,r,n)],u=[i];if(s.length%2!=0)throw new T(_.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<s.length;e+=2)c.push(Pc(t,s[e])),u.push(s[e+1]);const h=[],l=Ie.empty();for(let e=c.length-1;e>=0;--e)if(!Fc(h,c[e])){const t=c[e];let n=u[e];n=Object(o.k)(n);const r=a.La(t);if(n instanceof bc)h.push(t);else{const e=Oc(n,r);null!=e&&(h.push(t),l.set(t,e))}}const d=new Q(h);return new pc(l,d,a.fieldTransforms)}function Nc(e,t,n,r=!1){return Oc(n,e.ja(r?4:3,t))}function Oc(e,t){if(Dc(e=Object(o.k)(e)))return Rc("Unsupported field value:",t,e),Cc(e,t);if(e instanceof hc)return function(e,t){if(!mc(t.xa))throw t.Ua(e._methodName+"() can only be used with update() and set()");if(!t.path)throw t.Ua(e._methodName+"() is not currently supported inside arrays");const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Oa&&4!==t.xa)throw t.Ua("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Oc(i,t.Ba(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Object(o.k)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ut(t.k,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=V.fromDate(e);return{timestampValue:vn(t.k,n)}}if(e instanceof V){const n=new V(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:vn(t.k,n)}}if(e instanceof lc)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof uc)return{bytesValue:wn(t.k,e._byteString)};if(e instanceof Pa){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Ua(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:_n(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Ua("Unsupported field value: "+Aa(e))}(e,t)}function Cc(e,t){const n={};return K(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):z(e,(e,r)=>{const i=Oc(r,t.Fa(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Dc(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof V||e instanceof lc||e instanceof uc||e instanceof Pa||e instanceof hc)}function Rc(e,t,n){if(!Dc(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Aa(n);throw"an object"===r?t.Ua(e+" a custom object"):t.Ua(e+" "+r)}}function Pc(e,t,n){if((t=Object(o.k)(t))instanceof ac)return t._internalPath;if("string"==typeof t)return xc(e,t);throw Mc("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}const Lc=new RegExp("[~\\*/\\[\\]]");function xc(e,t,n){if(t.search(Lc)>=0)throw Mc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ac(...t.split("."))._internalPath}catch(r){throw Mc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Mc(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=" in field "+r),o&&(c+=" in document "+i),c+=")"),new T(_.INVALID_ARGUMENT,a+e+c)}function Fc(e,t){return e.some(e=>e.isEqual(t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Pa(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Uc(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Vc("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Uc extends jc{data(){return super.data()}}function Vc(e,t){return"string"==typeof t?xc(e,t):t instanceof ac?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bc extends jc{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new zc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Vc("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class zc extends Bc{data(e={}){return super.data(e)}}class Kc{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new qc(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new zc(this._firestore,this._userDataWriter,n.key,n,new qc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new T(_.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>({type:"added",doc:new zc(e._firestore,e._userDataWriter,n.doc.key,n.doc,new qc(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:t++}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new zc(e._firestore,e._userDataWriter,t.doc.key,t.doc,new qc(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Wc(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Wc(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return v()}}function Gc(e,t){return e instanceof Bc&&t instanceof Bc?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Kc&&t instanceof Kc&&e._firestore===t._firestore&&Va(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(e){if($e(e)&&0===e.explicitOrderBy.length)throw new T(_.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $c{}function Qc(e,...t){for(const n of t)e=n._apply(e);return e}class Jc extends $c{constructor(e,t,n){super(),this.Ga=e,this.za=t,this.Ha=n,this.type="where"}_apply(e){const t=vc(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new T(_.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on FieldPath.documentId().`);if("in"===s||"not-in"===s){lu(o,s);const t=[];for(const n of o)t.push(hu(r,e,n));a={arrayValue:{values:t}}}else a=hu(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||lu(o,s),a=Nc(n,"where",o,"in"===s||"not-in"===s);const c=Oe.create(i,s,a);return function(e,t){if(t.V()){const n=Je(e);if(null!==n&&!n.isEqual(t.field))throw new T(_.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${t.field.toString()}'`);const r=Qe(e);null!==r&&du(e,t.field,r)}const n=function(e,t){for(const n of e.filters)if(t.indexOf(n.op)>=0)return n.op;return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new T(_.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new T(_.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}(e,c),c}(e._query,0,t,e.firestore._databaseId,this.Ga,this.za,this.Ha);return new La(e.firestore,e.converter,function(e,t){const n=e.filters.concat([t]);return new Ke(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}function Yc(e,t,n){const r=t,i=Vc("where",e);return new Jc(i,r,n)}class Xc extends $c{constructor(e,t){super(),this.Ga=e,this.Ja=t,this.type="orderBy"}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new T(_.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new T(_.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new Ve(t,n);return function(e,t){if(null===Qe(e)){const n=Je(e);null!==n&&du(e,n,t.field)}}(e,r),r}(e._query,this.Ga,this.Ja);return new La(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Ke(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Zc(e,t="asc"){const n=t,r=Vc("orderBy",e);return new Xc(r,n)}class eu extends $c{constructor(e,t,n){super(),this.type=e,this.Ya=t,this.Xa=n}_apply(e){return new La(e.firestore,e.converter,et(e._query,this.Ya,this.Xa))}}function tu(e){return Oa("limit",e),new eu("limit",e,"F")}function nu(e){return Oa("limitToLast",e),new eu("limitToLast",e,"L")}class ru extends $c{constructor(e,t,n){super(),this.type=e,this.Za=t,this.tc=n}_apply(e){const t=uu(e,this.type,this.Za,this.tc);return new La(e.firestore,e.converter,function(e,t){return new Ke(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}function iu(...e){return new ru("startAt",e,!0)}function su(...e){return new ru("startAfter",e,!1)}class ou extends $c{constructor(e,t,n){super(),this.type=e,this.Za=t,this.tc=n}_apply(e){const t=uu(e,this.type,this.Za,this.tc);return new La(e.firestore,e.converter,function(e,t){return new Ke(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function au(...e){return new ou("endBefore",e,!0)}function cu(...e){return new ou("endAt",e,!1)}function uu(e,t,n,r){if(n[0]=Object(o.k)(n[0]),n[0]instanceof jc)return function(e,t,n,r,i){if(!r)throw new T(_.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const n of Xe(e))if(n.field.isKeyField())s.push(pe(t,r.key));else{const e=r.data.field(n.field);if(ne(e))throw new T(_.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+n.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=n.field.canonicalString();throw new T(_.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}s.push(e)}return new je(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=vc(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new T(_.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let s=0;s<i.length;s++){const c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new T(_.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof c}`);if(!Ye(e)&&-1!==c.indexOf("/"))throw new T(_.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${r}() must be a plain document ID, but '${c}' contains a slash.`);const n=e.path.child(G.fromString(c));if(!ae.isDocumentKey(n))throw new T(_.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new ae(n);a.push(pe(t,i))}else{const e=Nc(n,r,c);a.push(e)}}return new je(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function hu(e,t,n){if("string"==typeof(n=Object(o.k)(n))){if(""===n)throw new T(_.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ye(t)&&-1!==n.indexOf("/"))throw new T(_.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(G.fromString(n));if(!ae.isDocumentKey(r))throw new T(_.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return pe(e,new ae(r))}if(n instanceof Pa)return pe(e,n._key);throw new T(_.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${Aa(n)}.`)}function lu(e,t){if(!Array.isArray(e)||0===e.length)throw new T(_.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(e.length>10)throw new T(_.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function du(e,t,n){if(!n.isEqual(t))throw new T(_.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{convertValue(e,t="none"){switch(ce(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ee(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(te(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw v()}}convertObject(e,t){const n={};return z(e.fields,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new lc(ee(e.latitude),ee(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=function e(t){const n=t.mapValue.fields.__previous_value__;return ne(n)?e(n):n}(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(re(e));default:return null}}convertTimestamp(e){const t=Z(e);return new V(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=G.fromString(e);w(Gn(n));const r=new Ia(n.get(1),n.get(3)),i=new ae(n.popFirst(5));return r.isEqual(t)||m(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class mu extends fu{constructor(e){super(),this.firestore=e}convertBytes(e){return new uc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pa(this.firestore,null,t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=vc(e)}set(e,t,n){this._verifyNotCommitted();const r=yu(e,this._firestore),i=pu(r.converter,t,n),s=wc(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Et.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const i=yu(e,this._firestore);let s;return s="string"==typeof(t=Object(o.k)(t))||t instanceof ac?Ac(this._dataReader,"WriteBatch.update",i._key,t,n,r):Sc(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(s.toMutation(i._key,Et.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=yu(e,this._firestore);return this._mutations=this._mutations.concat(new Ft(t._key,Et.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new T(_.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function yu(e,t){if((e=Object(o.k)(e)).firestore!==t)throw new T(_.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(e){e=Na(e,Pa);const t=Na(e.firestore,Wa);return ya($a(t),e._key).then(n=>Ru(t,e,n))}class wu extends fu{constructor(e){super(),this.firestore=e}convertBytes(e){return new uc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pa(this.firestore,null,t)}}function bu(e){e=Na(e,Pa);const t=Na(e.firestore,Wa),n=$a(t),r=new wu(t);return function(e,t){const n=new E;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){try{const r=await function(e,t){const n=I(e);return n.persistence.runTransaction("read document","readonly",e=>n.Wn.Rn(e,t))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new T(_.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=to(e,`Failed to get document '${t} from cache`);n.reject(r)}}(await fa(e),t,n)),n.promise}(n,e._key).then(n=>new Bc(t,r,e._key,n,new qc(null!==n&&n.hasLocalMutations,!0),e.converter))}function Iu(e){e=Na(e,Pa);const t=Na(e.firestore,Wa);return ya($a(t),e._key,{source:"server"}).then(n=>Ru(t,e,n))}function _u(e){e=Na(e,La);const t=Na(e.firestore,Wa),n=$a(t),r=new wu(t);return Hc(e._query),va(n,e._query).then(n=>new Kc(t,r,e,n))}function Tu(e){e=Na(e,La);const t=Na(e.firestore,Wa),n=$a(t),r=new wu(t);return function(e,t){const n=new E;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){try{const r=await Bi(e,t,!0),i=new bo(t,r.zn),s=i.bo(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=to(e,`Failed to execute query '${t} against cache`);n.reject(r)}}(await fa(e),t,n)),n.promise}(n,e._query).then(n=>new Kc(t,r,e,n))}function Eu(e){e=Na(e,La);const t=Na(e.firestore,Wa),n=$a(t),r=new wu(t);return va(n,e._query,{source:"server"}).then(n=>new Kc(t,r,e,n))}function ku(e,t,n){e=Na(e,Pa);const r=Na(e.firestore,Wa),i=pu(e.converter,t,n);return Du(r,[wc(vc(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Et.none())])}function Su(e,t,n,...r){e=Na(e,Pa);const i=Na(e.firestore,Wa),s=vc(i);let a;return a="string"==typeof(t=Object(o.k)(t))||t instanceof ac?Ac(s,"updateDoc",e._key,t,n,r):Sc(s,"updateDoc",e._key,t),Du(i,[a.toMutation(e._key,Et.exists(!0))])}function Au(e){return Du(Na(e.firestore,Wa),[new Ft(e._key,Et.none())])}function Nu(e,t){const n=Na(e.firestore,Wa),r=ja(e),i=pu(e.converter,t);return Du(n,[wc(vc(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Et.exists(!1))]).then(()=>r)}function Ou(e,...t){var n,r,i;e=Object(o.k)(e);let s={includeMetadataChanges:!1},a=0;"object"!=typeof t[a]||Ba(t[a])||(s=t[a],a++);const c={includeMetadataChanges:s.includeMetadataChanges};if(Ba(t[a])){const e=t[a];t[a]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[a+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[a+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let u,h,l;if(e instanceof Pa)h=Na(e.firestore,Wa),l=Ge(e._key.path),u={next:n=>{t[a]&&t[a](Ru(h,e,n))},error:t[a+1],complete:t[a+2]};else{const n=Na(e,La);h=Na(n.firestore,Wa),l=n._query;const r=new wu(h);u={next:e=>{t[a]&&t[a](new Kc(h,r,n,e))},error:t[a+1],complete:t[a+2]},Hc(e._query)}return function(e,t,n,r){const i=new ra(r),s=new fo(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>ao(await ga(e),s)),()=>{i.na(),e.asyncQueue.enqueueAndForget(async()=>co(await ga(e),s))}}($a(h),l,c,u)}function Cu(e,t){return function(e,t){const n=new ra(t);return e.asyncQueue.enqueueAndForget(async()=>function(e,t){I(e).io.add(t),t.next()}(await ga(e),n)),()=>{n.na(),e.asyncQueue.enqueueAndForget(async()=>function(e,t){I(e).io.delete(t)}(await ga(e),n))}}($a(e=Na(e,Wa)),Ba(t)?t:{next:t})}function Du(e,t){return function(e,t){const n=new E;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Yo(e);try{const e=await function(e,t){const n=I(e),r=V.now(),i=t.reduce((e,t)=>e.add(t.key),nn());let s;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>n.Wn.vn(e,i).next(i=>{s=i;const o=[];for(const e of t){const t=Ot(e,s.get(e.key));null!=t&&o.push(new Pt(e.key,t,_e(t.value.mapValue),Et.exists(!0)))}return n.An.addMutationBatch(e,r,o,t)})).then(e=>(e.applyToLocalDocumentSet(s),{batchId:e.batchId,changes:s}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ko[e.currentUser.toKey()];r||(r=new Kt(F)),r=r.insert(t,n),e.Ko[e.currentUser.toKey()]=r}(r,e.batchId,n),await Uo(r,e.changes),await Bs(r.remoteStore)}catch(e){const t=to(e,"Failed to persist write");n.reject(t)}}(await ma(e),t,n)),n.promise}($a(e),t)}function Ru(e,t,n){const r=n.docs.get(t._key),i=new wu(e);return new Bc(e,i,t._key,r,new qc(n.hasPendingWrites,n.fromCache),t.converter)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=vc(e)}get(e){const t=yu(e,this._firestore),n=new mu(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return v();const r=e[0];if(r.isFoundDocument())return new jc(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new jc(this._firestore,n,t._key,null,t.converter);throw v()})}set(e,t,n){const r=yu(e,this._firestore),i=pu(r.converter,t,n),s=wc(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n,...r){const i=yu(e,this._firestore);let s;return s="string"==typeof(t=Object(o.k)(t))||t instanceof ac?Ac(this._dataReader,"Transaction.update",i._key,t,n,r):Sc(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,s),this}delete(e){const t=yu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=yu(e,this._firestore),n=new wu(this._firestore);return super.get(e).then(e=>new Bc(this._firestore,n,t._key,e._document,new qc(!1,!1),t.converter))}}function Lu(e,t){return function(e,t){const n=new E;return e.asyncQueue.enqueueAndForget(async()=>{const r=await function(e){return la(e).then(e=>e.datastore)}(e);new oa(e.asyncQueue,r,t,n).run()}),n.promise}($a(e=Na(e,Wa)),n=>t(new Pu(e,n)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(){return new bc("deleteField")}function Mu(){return new _c("serverTimestamp")}function Fu(...e){return new Tc("arrayUnion",e)}function ju(...e){return new Ec("arrayRemove",e)}function Uu(e){return new kc("increment",e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(e){return $a(e=Na(e,Wa)),new gu(e,t=>Du(e,t))}!function(e,t=!0){!function(e){h=e}(r.SDK_VERSION),Object(r._registerComponent)(new i.a("firestore",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=new Wa(r,new N(e.getProvider("auth-internal")),new R(e.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:t},n),i._setSettings(n),i},"PUBLIC")),Object(r.registerVersion)(c,"3.4.1",e),Object(r.registerVersion)(c,"3.4.1","esm2017")}()}).call(this,n(18))},function(e,t,n){"use strict";n.r(t),n.d(t,"SDK_VERSION",(function(){return _})),n.d(t,"_DEFAULT_ENTRY_NAME",(function(){return u})),n.d(t,"_addComponent",(function(){return f})),n.d(t,"_addOrOverwriteComponent",(function(){return p})),n.d(t,"_apps",(function(){return l})),n.d(t,"_clearComponents",(function(){return v})),n.d(t,"_components",(function(){return d})),n.d(t,"_getProvider",(function(){return g})),n.d(t,"_registerComponent",(function(){return m})),n.d(t,"_removeServiceInstance",(function(){return y})),n.d(t,"deleteApp",(function(){return S})),n.d(t,"getApp",(function(){return E})),n.d(t,"getApps",(function(){return k})),n.d(t,"initializeApp",(function(){return T})),n.d(t,"onLog",(function(){return N})),n.d(t,"registerVersion",(function(){return A})),n.d(t,"setLogLevel",(function(){return O}));var r=n(5),i=n(4),s=n(0);n.d(t,"FirebaseError",(function(){return s.c}));
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class o{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const a="@firebase/app",c=new i.b("@firebase/app"),u="[DEFAULT]",h={[a]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},l=new Map,d=new Map;function f(e,t){try{e.container.addComponent(t)}catch(n){c.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function p(e,t){e.container.addOrOverwriteComponent(t)}function m(e){const t=e.name;if(d.has(t))return c.debug(`There were multiple attempts to register component ${t}.`),!1;d.set(t,e);for(const t of l.values())f(t,e);return!0}function g(e,t){return e.container.getProvider(t)}function y(e,t,n=u){g(e,t).clearInstance(n)}function v(){d.clear()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."},b=new s.b("app","Firebase",w);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class I{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.a("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw b.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _="9.6.1";function T(e,t={}){if("object"!=typeof t){t={name:t}}const n=Object.assign({name:u,automaticDataCollectionEnabled:!1},t),i=n.name;if("string"!=typeof i||!i)throw b.create("bad-app-name",{appName:String(i)});const o=l.get(i);if(o){if(Object(s.h)(e,o.options)&&Object(s.h)(n,o.config))return o;throw b.create("duplicate-app",{appName:i})}const a=new r.b(i);for(const e of d.values())a.addComponent(e);const c=new I(e,n,a);return l.set(i,c),c}function E(e=u){const t=l.get(e);if(!t)throw b.create("no-app",{appName:e});return t}function k(){return Array.from(l.values())}async function S(e){const t=e.name;l.has(t)&&(l.delete(t),await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function A(e,t,n){var i;let s=null!==(i=h[e])&&void 0!==i?i:e;n&&(s+="-"+n);const o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${s}" with version "${t}":`];return o&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void c.warn(e.join(" "))}m(new r.a(s+"-version",()=>({library:s,version:t}),"VERSION"))}function N(e,t){if(null!==e&&"function"!=typeof e)throw b.create("invalid-log-argument");Object(i.d)(e,t)}function O(e){Object(i.c)(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var C;C="",m(new r.a("platform-logger",e=>new o(e),"PRIVATE")),A(a,"0.7.11",C),A(a,"0.7.11","esm2017"),A("fire-js","")},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return l}));
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const r=[];var i;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));const s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},o=i.INFO,a={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},c=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=a[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class u{constructor(e){this.name=e,this._logLevel=o,this._logHandler=c,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...e),this._logHandler(this,i.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...e),this._logHandler(this,i.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,i.INFO,...e),this._logHandler(this,i.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,i.WARN,...e),this._logHandler(this,i.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,i.ERROR,...e),this._logHandler(this,i.ERROR,...e)}}function h(e){r.forEach(t=>{t.setLogLevel(e)})}function l(e,t){for(const n of r){let r=null;t&&t.level&&(r=s[t.level]),n.userLogHandler=null===e?null:(t,n,...s)=>{const o=s.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}}).filter(e=>e).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:i[n].toLowerCase(),message:o,args:s,type:t.name})}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n(0);class i{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class s{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.a;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(e)&&t.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,"[DEFAULT]"===r?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var r;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:"[DEFAULT]":e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class o{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new s(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return sr})),n.d(t,"b",(function(){return ar})),n.d(t,"c",(function(){return or})),n.d(t,"d",(function(){return ur})),n.d(t,"e",(function(){return cr})),n.d(t,"f",(function(){return hr})),n.d(t,"g",(function(){return lr})),n.d(t,"h",(function(){return rr})),n.d(t,"i",(function(){return ir}));var r,i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},s={},o=o||{},a=i||self;function c(){}function u(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function h(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var l="closure_uid_"+(1e9*Math.random()>>>0),d=0;function f(e,t,n){return e.call.apply(e.bind,arguments)}function p(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function m(e,t,n){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?f:p).apply(null,arguments)}function g(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function y(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function v(){this.s=this.s,this.o=this.o}var w={};v.prototype.s=!1,v.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,l)&&e[l]||(e[l]=++d)}(this);delete w[e]}},v.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const b=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},I=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){const r=e.length,i="string"==typeof e?e.split(""):e;for(let s=0;s<r;s++)s in i&&t.call(n,i[s],s,e)};function _(e){return Array.prototype.concat.apply([],arguments)}function T(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function E(e){return/^[\s\xa0]*$/.test(e)}var k,S=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function A(e,t){return-1!=e.indexOf(t)}function N(e,t){return e<t?-1:e>t?1:0}e:{var O=a.navigator;if(O){var C=O.userAgent;if(C){k=C;break e}}k=""}function D(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function R(e){const t={};for(const n in e)t[n]=e[n];return t}var P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<P.length;t++)n=P[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function x(e){return x[" "](e),e}x[" "]=c;var M,F,j=A(k,"Opera"),U=A(k,"Trident")||A(k,"MSIE"),V=A(k,"Edge"),q=V||U,B=A(k,"Gecko")&&!(A(k.toLowerCase(),"webkit")&&!A(k,"Edge"))&&!(A(k,"Trident")||A(k,"MSIE"))&&!A(k,"Edge"),z=A(k.toLowerCase(),"webkit")&&!A(k,"Edge");function K(){var e=a.document;return e?e.documentMode:void 0}e:{var W="",G=(F=k,B?/rv:([^\);]+)(\)|;)/.exec(F):V?/Edge\/([\d\.]+)/.exec(F):U?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(F):z?/WebKit\/(\S+)/.exec(F):j?/(?:Version)[ \/]?(\S+)/.exec(F):void 0);if(G&&(W=G?G[1]:""),U){var H=K();if(null!=H&&H>parseFloat(W)){M=String(H);break e}}M=W}var $,Q={};function J(){return function(e){var t=Q;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){let e=0;const t=S(String(M)).split("."),n=S("9").split("."),r=Math.max(t.length,n.length);for(let o=0;0==e&&o<r;o++){var i=t[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;e=N(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||N(0==i[2].length,0==s[2].length)||N(i[2],s[2]),i=i[3],s=s[3]}while(0==e)}return 0<=e}))}if(a.document&&U){var Y=K();$=Y||(parseInt(M,10)||void 0)}else $=void 0;var X=$,Z=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{a.addEventListener("test",c,t),a.removeEventListener("test",c,t)}catch(e){}return e}();function ee(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function te(e,t){if(ee.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(B){e:{try{x(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:ne[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&te.Z.h.call(this)}}ee.prototype.h=function(){this.defaultPrevented=!0},y(te,ee);var ne={2:"touch",3:"pen",4:"mouse"};te.prototype.h=function(){te.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var re="closure_listenable_"+(1e6*Math.random()|0),ie=0;function se(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++ie,this.ca=this.fa=!1}function oe(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function ae(e){this.src=e,this.g={},this.h=0}function ce(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=b(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(oe(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ue(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.ca&&s.listener==t&&s.capture==!!n&&s.ia==r)return i}return-1}ae.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=ue(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new se(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var he="closure_lm_"+(1e6*Math.random()|0),le={};function de(e,t,n,r,i){if(r&&r.once)return function e(t,n,r,i,s){if(Array.isArray(n)){for(var o=0;o<n.length;o++)e(t,n[o],r,i,s);return null}return r=we(r),t&&t[re]?t.O(n,r,h(i)?!!i.capture:!!i,s):fe(t,n,r,!0,i,s)}(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)de(e,t[s],n,r,i);return null}return n=we(n),e&&e[re]?e.N(t,n,h(r)?!!r.capture:!!r,i):fe(e,t,n,!1,r,i)}function fe(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=h(i)?!!i.capture:!!i,a=ye(e);if(a||(e[he]=a=new ae(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){var e=ge;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Z||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(me(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function pe(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[re])ce(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(me(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ye(t))?(ce(n,e),0==n.h&&(n.src=null,t[he]=null)):oe(e)}}}function me(e){return e in le?le[e]:le[e]="on"+e}function ge(e,t){if(e.ca)e=!0;else{t=new te(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&pe(e),e=n.call(r,t)}return e}function ye(e){return(e=e[he])instanceof ae?e:null}var ve="__closure_events_fn_"+(1e9*Math.random()>>>0);function we(e){return"function"==typeof e?e:(e[ve]||(e[ve]=function(t){return e.handleEvent(t)}),e[ve])}function be(){v.call(this),this.i=new ae(this),this.P=this,this.I=null}function Ie(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new ee(t,e);else if(t instanceof ee)t.target=t.target||e;else{var i=t;L(t=new ee(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=_e(o,r,!0,t)&&i}if(i=_e(o=t.g=e,r,!0,t)&&i,i=_e(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=_e(o=t.g=n[s],r,!1,t)&&i}function _e(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,c=o.ia||o.src;o.fa&&ce(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}y(be,v),be.prototype[re]=!0,be.prototype.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,s){if(Array.isArray(n))for(var o=0;o<n.length;o++)e(t,n[o],r,i,s);else i=h(i)?!!i.capture:!!i,r=we(r),t&&t[re]?(t=t.i,(n=String(n).toString())in t.g&&(-1<(r=ue(o=t.g[n],r,i,s))&&(oe(o[r]),Array.prototype.splice.call(o,r,1),0==o.length&&(delete t.g[n],t.h--)))):t&&(t=ye(t))&&(n=t.g[n.toString()],t=-1,n&&(t=ue(n,r,i,s)),(r=-1<t?n[t]:null)&&pe(r))}(this,e,t,n,r)},be.prototype.M=function(){if(be.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)oe(n[r]);delete t.g[e],t.h--}}this.I=null},be.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},be.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Te=a.JSON.stringify;function Ee(){var e=De;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ke,Se=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Ae,e=>e.reset());class Ae{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ne(e){a.setTimeout(()=>{throw e},0)}function Oe(e,t){ke||function(){var e=a.Promise.resolve(void 0);ke=function(){e.then(Re)}}(),Ce||(ke(),Ce=!0),De.add(e,t)}var Ce=!1,De=new class{constructor(){this.h=this.g=null}add(e,t){const n=Se.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}};function Re(){for(var e;e=Ee();){try{e.h.call(e.g)}catch(e){Ne(e)}var t=Se;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ce=!1}function Pe(e,t){be.call(this),this.h=e||1,this.g=t||a,this.j=m(this.kb,this),this.l=Date.now()}function Le(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function xe(e,t,n){if("function"==typeof e)n&&(e=m(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=m(e.handleEvent,e)}return 2147483647<Number(t)?-1:a.setTimeout(e,t||0)}y(Pe,be),(r=Pe.prototype).da=!1,r.S=null,r.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ie(this,"tick"),this.da&&(Le(this),this.start()))}},r.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},r.M=function(){Pe.Z.M.call(this),Le(this),delete this.g};class Me extends v{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:function e(t){t.g=xe(()=>{t.g=null,t.i&&(t.i=!1,e(t))},t.j);const n=t.h;t.h=null,t.m.apply(null,n)}(this)}M(){super.M(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fe(e){v.call(this),this.h=e,this.g={}}y(Fe,v);var je=[];function Ue(e,t,n,r){Array.isArray(n)||(n&&(je[0]=n.toString()),n=je);for(var i=0;i<n.length;i++){var s=de(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Ve(e){D(e.g,(function(e,t){this.g.hasOwnProperty(t)&&pe(e)}),e),e.g={}}function qe(){this.g=!0}function Be(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Te(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}Fe.prototype.M=function(){Fe.Z.M.call(this),Ve(this)},Fe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},qe.prototype.Aa=function(){this.g=!1},qe.prototype.info=function(){};var ze={},Ke=null;function We(){return Ke=Ke||new be}function Ge(e){ee.call(this,ze.Ma,e)}function He(e){const t=We();Ie(t,new Ge(t,e))}function $e(e,t){ee.call(this,ze.STAT_EVENT,e),this.stat=t}function Qe(e){const t=We();Ie(t,new $e(t,e))}function Je(e,t){ee.call(this,ze.Na,e),this.size=t}function Ye(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return a.setTimeout((function(){e()}),t)}ze.Ma="serverreachability",y(Ge,ee),ze.STAT_EVENT="statevent",y($e,ee),ze.Na="timingevent",y(Je,ee);var Xe={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ze={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function et(){}function tt(e){return e.h||(e.h=e.i())}function nt(){}et.prototype.h=null;var rt,it={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function st(){ee.call(this,"d")}function ot(){ee.call(this,"c")}function at(){}function ct(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Fe(this),this.P=ht,e=q?125:void 0,this.W=new Pe(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ut}function ut(){this.i=null,this.g="",this.h=!1}y(st,ee),y(ot,ee),y(at,et),at.prototype.g=function(){return new XMLHttpRequest},at.prototype.i=function(){return{}},rt=new at;var ht=45e3,lt={},dt={};function ft(e,t,n){e.K=1,e.v=Mt(Ct(t)),e.s=n,e.U=!0,pt(e,null)}function pt(e,t){e.F=Date.now(),vt(e),e.A=Ct(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Qt(n.h,"t",r),e.C=0,n=e.l.H,e.h=new ut,e.g=Jn(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Me(m(e.Ia,e,e.g),e.O)),Ue(e.V,e.g,"readystatechange",e.gb),t=e.H?R(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),He(1),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var h=u[0];u=u[1];var l=h.split("_");o=2<=l.length&&"type"==l[1]?o+(h+"=")+u+"&":o+(h+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function mt(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function gt(e,t,n){let r,i=!0;for(;!e.I&&e.C<n.length;){if(r=yt(e,n),r==dt){4==t&&(e.o=4,Qe(14),i=!1),Be(e.j,e.m,null,"[Incomplete Response]");break}if(r==lt){e.o=4,Qe(15),Be(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Be(e.j,e.m,r,null),Tt(e,r)}mt(e)&&r!=dt&&r!=lt&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Qe(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Bn(t),t.L=!0,Qe(11))):(Be(e.j,e.m,n,"[Invalid Chunked Response]"),_t(e),It(e))}function yt(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?dt:(n=Number(t.substring(n,r)),isNaN(n)?lt:(r+=1)+n>t.length?dt:(t=t.substr(r,n),e.C=r+n,t))}function vt(e){e.Y=Date.now()+e.P,wt(e,e.P)}function wt(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ye(m(e.eb,e),t)}function bt(e){e.B&&(a.clearTimeout(e.B),e.B=null)}function It(e){0==e.l.G||e.I||Wn(e.l,e)}function _t(e){bt(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Le(e.W),Ve(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Tt(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||tn(n.i,e)))if(n.I=e.N,!e.J&&tn(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Kn(n),Pn(n)}qn(n),Qe(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Ye(m(n.ab,n),6e3));if(1>=en(n.i)&&n.ka){try{n.ka()}catch(e){}n.ka=void 0}}else Hn(n,11)}else if((e.J||n.g==e)&&Kn(n),!E(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.U=u[0],u=u[1],2==n.G)if("c"==u[0]){n.J=u[1],n.la=u[2];const t=u[3];null!=t&&(n.ma=t,n.h.info("VER="+n.ma));const i=u[4];null!=i&&(n.za=i,n.h.info("SVER="+n.za));const h=u[5];null!=h&&"number"==typeof h&&0<h&&(r=1.5*h,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const l=e.g;if(l){const e=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;!s.g&&(A(e,"spdy")||A(e,"quic")||A(e,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(nn(s,s.h),s.h=null))}if(r.D){const e=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.sa=e,xt(r.F,r.D,e))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=e;if((r=n).oa=Qn(r,r.H?r.la:null,r.W),o.J){rn(r.i,o);var a=o,c=r.K;c&&a.setTimeout(c),a.B&&(bt(a),vt(a)),r.g=o}else Vn(r);0<n.l.length&&Mn(n)}else"stop"!=u[0]&&"close"!=u[0]||Hn(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Hn(n,7):Rn(n):"noop"!=u[0]&&n.j&&n.j.wa(u),n.A=0)}He(4)}catch(e){}}function Et(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(u(e)||"string"==typeof e)I(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(u(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(u(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}}function kt(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof kt)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function St(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];At(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)At(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function At(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(r=ct.prototype).setTimeout=function(e){this.P=e},r.gb=function(e){e=e.target;const t=this.L;t&&3==An(e)?t.l():this.Ia(e)},r.Ia=function(e){try{if(e==this.g)e:{const l=An(this.g);var t=this.g.Da();const d=this.g.ba();if(!(3>l)&&(3!=l||q||this.g&&(this.h.h||this.g.ga()||Nn(this.g)))){this.I||4!=l||7==t||He(8==t||0>=d?3:2),bt(this);var n=this.g.ba();this.N=n;t:if(mt(this)){var r=Nn(this.g);e="";var i=r.length,s=4==An(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){_t(this),It(this);var o="";break t}this.h.i=new a.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.X,l,n),this.i){if(this.$&&!this.J){t:{if(this.g){var c,u=this.g;if((c=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(c)){var h=c;break t}}h=null}if(!(n=h)){this.i=!1,this.o=3,Qe(12),_t(this),It(this);break e}Be(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Tt(this,n)}this.U?(gt(this,l,o),q&&this.i&&3==l&&(Ue(this.V,this.W,"tick",this.fb),this.W.start())):(Be(this.j,this.m,o,null),Tt(this,o)),4==l&&_t(this),this.i&&!this.I&&(4==l?Wn(this.l,this):(this.i=!1,vt(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Qe(12)):(this.o=0,Qe(13)),_t(this),It(this)}}}catch(e){}},r.fb=function(){if(this.g){var e=An(this.g),t=this.g.ga();this.C<t.length&&(bt(this),gt(this,e,t),this.i&&4!=e&&vt(this))}},r.cancel=function(){this.I=!0,_t(this)},r.eb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(He(3),Qe(17)),_t(this),this.o=2,It(this)):wt(this,this.Y-e)},(r=kt.prototype).R=function(){St(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},r.T=function(){return St(this),this.g.concat()},r.get=function(e,t){return At(this.h,e)?this.h[e]:t},r.set=function(e,t){At(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},r.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);e.call(t,s,i,this)}};var Nt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ot(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Ot){this.g=void 0!==t?t:e.g,Dt(this,e.j),this.s=e.s,Rt(this,e.i),Pt(this,e.m),this.l=e.l,t=e.h;var n=new Wt;n.i=t.i,t.g&&(n.g=new kt(t.g),n.h=t.h),Lt(this,n),this.o=e.o}else e&&(n=String(e).match(Nt))?(this.g=!!t,Dt(this,n[1]||"",!0),this.s=Ft(n[2]||""),Rt(this,n[3]||"",!0),Pt(this,n[4]),this.l=Ft(n[5]||"",!0),Lt(this,n[6]||"",!0),this.o=Ft(n[7]||"")):(this.g=!!t,this.h=new Wt(null,this.g))}function Ct(e){return new Ot(e)}function Dt(e,t,n){e.j=n?Ft(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Rt(e,t,n){e.i=n?Ft(t,!0):t}function Pt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Lt(e,t,n){t instanceof Wt?(e.h=t,function(e,t){t&&!e.j&&(Gt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ht(this,t),Qt(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=jt(t,zt)),e.h=new Wt(t,e.g))}function xt(e,t,n){e.h.set(t,n)}function Mt(e){return xt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ft(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function jt(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Ut),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ut(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ot.prototype.toString=function(){var e=[],t=this.j;t&&e.push(jt(t,Vt,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(jt(t,Vt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(jt(n,"/"==n.charAt(0)?Bt:qt,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",jt(n,Kt)),e.join("")};var Vt=/[#\/\?@]/g,qt=/[#\?:]/g,Bt=/[#\?]/g,zt=/[#\?@]/g,Kt=/#/g;function Wt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Gt(e){e.g||(e.g=new kt,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ht(e,t){Gt(e),t=Jt(e,t),At(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,At((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&St(e)))}function $t(e,t){return Gt(e),t=Jt(e,t),At(e.g.h,t)}function Qt(e,t,n){Ht(e,t),0<n.length&&(e.i=null,e.g.set(Jt(e,t),T(n)),e.h+=n.length)}function Jt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(r=Wt.prototype).add=function(e,t){Gt(this),this.i=null,e=Jt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},r.forEach=function(e,t){Gt(this),this.g.forEach((function(n,r){I(n,(function(n){e.call(t,n,r,this)}),this)}),this)},r.T=function(){Gt(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],s=0;s<i.length;s++)n.push(t[r]);return n},r.R=function(e){Gt(this);var t=[];if("string"==typeof e)$t(this,e)&&(t=_(t,this.g.get(Jt(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=_(t,e[n])}return t},r.set=function(e,t){return Gt(this),this.i=null,$t(this,e=Jt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},r.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},r.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),e.push(o)}}return this.i=e.join("&")};function Yt(e){this.l=e||Xt,a.PerformanceNavigationTiming?e=0<(e=a.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(a.g&&a.g.Ea&&a.g.Ea()&&a.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Xt=10;function Zt(e){return!!e.h||!!e.g&&e.g.size>=e.j}function en(e){return e.h?1:e.g?e.g.size:0}function tn(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function nn(e,t){e.g?e.g.add(t):e.h=t}function rn(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function sn(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return T(e.i)}function on(){}function an(){this.g=new on}function cn(e,t,n){const r=n||"";try{Et(e,(function(e,n){let i=e;h(e)&&(i=Te(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function un(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function hn(e){this.l=e.$b||null,this.j=e.ib||!1}function ln(e,t){be.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=dn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Yt.prototype.cancel=function(){if(this.i=sn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}},on.prototype.stringify=function(e){return a.JSON.stringify(e,void 0)},on.prototype.parse=function(e){return a.JSON.parse(e,void 0)},y(hn,et),hn.prototype.g=function(){return new ln(this.l,this.j)},hn.prototype.i=function(e){return function(){return e}}({}),y(ln,be);var dn=0;function fn(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function pn(e){e.readyState=4,e.l=null,e.j=null,e.A=null,mn(e)}function mn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(r=ln.prototype).open=function(e,t){if(this.readyState!=dn)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,mn(this)},r.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||a).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},r.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,pn(this)),this.readyState=dn},r.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,mn(this)),this.g&&(this.readyState=3,mn(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==a.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;fn(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},r.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?pn(this):mn(this),3==this.readyState&&fn(this)}},r.Ua=function(e){this.g&&(this.response=this.responseText=e,pn(this))},r.Ta=function(e){this.g&&(this.response=e,pn(this))},r.ha=function(){this.g&&pn(this)},r.setRequestHeader=function(e,t){this.v.append(e,t)},r.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ln.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var gn=a.JSON.parse;function yn(e){be.call(this),this.headers=new kt,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=vn,this.K=this.L=!1}y(yn,be);var vn="",wn=/^https?$/i,bn=["POST","PUT"];function In(e){return"content-type"==e.toLowerCase()}function _n(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Tn(e),kn(e)}function Tn(e){e.D||(e.D=!0,Ie(e,"complete"),Ie(e,"error"))}function En(e){if(e.h&&void 0!==o&&(!e.C[1]||4!=An(e)||2!=e.ba()))if(e.v&&4==An(e))xe(e.Fa,0,e);else if(Ie(e,"readystatechange"),4==An(e)){e.h=!1;try{const o=e.ba();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===o){var i=String(e.H).match(Nt)[1]||null;if(!i&&a.self&&a.self.location){var s=a.self.location.protocol;i=s.substr(0,s.length-1)}r=!wn.test(i?i.toLowerCase():"")}n=r}if(n)Ie(e,"complete"),Ie(e,"success");else{e.m=6;try{var c=2<An(e)?e.g.statusText:""}catch(e){c=""}e.j=c+" ["+e.ba()+"]",Tn(e)}}finally{kn(e)}}}function kn(e,t){if(e.g){Sn(e);const n=e.g,r=e.C[0]?c:null;e.g=null,e.C=null,t||Ie(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function Sn(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(a.clearTimeout(e.A),e.A=null)}function An(e){return e.g?e.g.readyState:0}function Nn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case vn:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function On(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){let t="";return D(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):xt(e,t,n))}function Cn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Dn(e){this.za=0,this.l=[],this.h=new qe,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Cn("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Cn("baseRetryDelayMs",5e3,e),this.$a=Cn("retryDelaySeedMs",1e4,e),this.Ya=Cn("forwardChannelMaxRetries",2,e),this.ra=Cn("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Yt(e&&e.concurrentRequestLimit),this.Ca=new an,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Rn(e){if(Ln(e),3==e.G){var t=e.V++,n=Ct(e.F);xt(n,"SID",e.J),xt(n,"RID",t),xt(n,"TYPE","terminate"),jn(e,n),(t=new ct(e,e.h,t,void 0)).K=2,t.v=Mt(Ct(n)),n=!1,a.navigator&&a.navigator.sendBeacon&&(n=a.navigator.sendBeacon(t.v.toString(),"")),!n&&a.Image&&((new Image).src=t.v,n=!0),n||(t.g=Jn(t.l,null),t.g.ea(t.v)),t.F=Date.now(),vt(t)}$n(e)}function Pn(e){e.g&&(Bn(e),e.g.cancel(),e.g=null)}function Ln(e){Pn(e),e.u&&(a.clearTimeout(e.u),e.u=null),Kn(e),e.i.cancel(),e.m&&("number"==typeof e.m&&a.clearTimeout(e.m),e.m=null)}function xn(e,t){e.l.push(new class{constructor(e,t){this.h=e,this.g=t}}(e.Za++,t)),3==e.G&&Mn(e)}function Mn(e){Zt(e.i)||e.m||(e.m=!0,Oe(e.Ha,e),e.C=0)}function Fn(e,t){var n;n=t?t.m:e.V++;const r=Ct(e.F);xt(r,"SID",e.J),xt(r,"RID",n),xt(r,"AID",e.U),jn(e,r),e.o&&e.s&&On(r,e.o,e.s),n=new ct(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Un(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),nn(e.i,n),ft(n,r,t)}function jn(e,t){e.j&&Et({},(function(e,n){xt(t,n,e)}))}function Un(e,t,n){n=Math.min(e.l.length,n);var r=e.j?m(e.j.Oa,e.j,e):null;e:{var i=e.l;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].h,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].h;const a=i[o].g;if(n-=t,0>n)t=Math.max(0,i[o].h-100),s=!1;else try{cn(a,e,"req"+n+"_")}catch(e){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.l.splice(0,n),t.D=e,r}function Vn(e){e.g||e.u||(e.Y=1,Oe(e.Ga,e),e.A=0)}function qn(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Ye(m(e.Ga,e),Gn(e,e.A)),e.A++,!0)}function Bn(e){null!=e.B&&(a.clearTimeout(e.B),e.B=null)}function zn(e){e.g=new ct(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Ct(e.oa);xt(t,"RID","rpc"),xt(t,"SID",e.J),xt(t,"CI",e.N?"0":"1"),xt(t,"AID",e.U),jn(e,t),xt(t,"TYPE","xmlhttp"),e.o&&e.s&&On(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Mt(Ct(t)),n.s=null,n.U=!0,pt(n,e)}function Kn(e){null!=e.v&&(a.clearTimeout(e.v),e.v=null)}function Wn(e,t){var n=null;if(e.g==t){Kn(e),Bn(e),e.g=null;var r=2}else{if(!tn(e.i,t))return;n=t.D,rn(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Ie(r=We(),new Je(r,n,t,i)),Mn(e)}else Vn(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(en(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Ye(m(e.Ha,e,t),Gn(e,e.C)),e.C++,!0))}(e,t)||2==r&&qn(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Hn(e,5);break;case 4:Hn(e,10);break;case 3:Hn(e,6);break;default:Hn(e,2)}}function Gn(e,t){let n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Hn(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=m(e.jb,e);n||(n=new Ot("//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Dt(n,"https"),Mt(n)),function(e,t){const n=new qe;if(a.Image){const r=new Image;r.onload=g(un,n,r,"TestLoadImage: loaded",!0,t),r.onerror=g(un,n,r,"TestLoadImage: error",!1,t),r.onabort=g(un,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=g(un,n,r,"TestLoadImage: timeout",!1,t),a.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Qe(2);e.G=0,e.j&&e.j.va(t),$n(e),Ln(e)}function $n(e){e.G=0,e.I=-1,e.j&&(0==sn(e.i).length&&0==e.l.length||(e.i.i.length=0,T(e.l),e.l.length=0),e.j.ua())}function Qn(e,t,n){let r=function(e){return e instanceof Ot?Ct(e):new Ot(e,void 0)}(n);if(""!=r.i)t&&Rt(r,t+"."+r.i),Pt(r,r.m);else{const e=a.location;r=function(e,t,n,r){var i=new Ot(null,void 0);return e&&Dt(i,e),t&&Rt(i,t),n&&Pt(i,n),r&&(i.l=r),i}(e.protocol,t?t+"."+e.hostname:e.hostname,+e.port,n)}return e.aa&&D(e.aa,(function(e,t){xt(r,t,e)})),t=e.D,n=e.sa,t&&n&&xt(r,t,n),xt(r,"VER",e.ma),jn(e,r),r}function Jn(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new yn(new hn({ib:!0})):new yn(e.qa)).L=e.H,t}function Yn(){}function Xn(){if(U&&!(10<=Number(X)))throw Error("Environmental error: no available transport.")}function Zn(e,t){be.call(this),this.g=new Dn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!E(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!E(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new nr(this)}function er(e){st.call(this);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function tr(){ot.call(this),this.status=1}function nr(e){this.g=e}(r=yn.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():rt.g(),this.C=this.u?tt(this.u):tt(rt),this.g.onreadystatechange=m(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(e){return void _n(this,e)}e=n||"";const i=new kt(this.headers);r&&Et(r,(function(e,t){i.set(t,e)})),r=function(e){e:{var t=In;const n=e.length,r="string"==typeof e?e.split(""):e;for(let i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=a.FormData&&e instanceof a.FormData,!(0<=b(bn,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Sn(this),0<this.B&&((this.K=function(e){return U&&J()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=m(this.pa,this)):this.A=xe(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){_n(this,e)}},r.pa=function(){void 0!==o&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ie(this,"timeout"),this.abort(8))},r.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ie(this,"complete"),Ie(this,"abort"),kn(this))},r.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),kn(this,!0)),yn.Z.M.call(this)},r.Fa=function(){this.s||(this.F||this.v||this.l?En(this):this.cb())},r.cb=function(){En(this)},r.ba=function(){try{return 2<An(this)?this.g.status:-1}catch(e){return-1}},r.ga=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},r.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),gn(t)}},r.Da=function(){return this.m},r.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(r=Dn.prototype).ma=8,r.G=1,r.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(e){}},r.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new ct(this,this.h,e,void 0);let s=this.s;if(this.P&&(s?(s=R(s),L(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var t=0,n=0;n<this.l.length;n++){var r=this.l[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.l.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Un(this,i,t),xt(n=Ct(this.F),"RID",e),xt(n,"CVER",22),this.D&&xt(n,"X-HTTP-Session-Id",this.D),jn(this,n),this.o&&s&&On(n,this.o,s),nn(this.i,i),this.Ra&&xt(n,"TYPE","init"),this.ja?(xt(n,"$req",t),xt(n,"SID","null"),i.$=!0,ft(i,n,null)):ft(i,n,t),this.G=2}}else 3==this.G&&(e?Fn(this,e):0==this.l.length||Zt(this.i)||Fn(this))},r.Ga=function(){if(this.u=null,zn(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Ye(m(this.bb,this),e)}},r.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Qe(10),Pn(this),zn(this))},r.ab=function(){null!=this.v&&(this.v=null,Pn(this),qn(this),Qe(19))},r.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Qe(2)):(this.h.info("Failed to ping google.com"),Qe(1))},(r=Yn.prototype).xa=function(){},r.wa=function(){},r.va=function(){},r.ua=function(){},r.Oa=function(){},Xn.prototype.g=function(e,t){return new Zn(e,t)},y(Zn,be),Zn.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Oe(m(e.hb,e,t))),Qe(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Qn(e,null,e.W),Mn(e)},Zn.prototype.close=function(){Rn(this.g)},Zn.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,xn(this.g,t)}else this.v?((t={}).__data__=Te(e),xn(this.g,t)):xn(this.g,e)},Zn.prototype.M=function(){this.g.j=null,delete this.j,Rn(this.g),delete this.g,Zn.Z.M.call(this)},y(er,st),y(tr,ot),y(nr,Yn),nr.prototype.xa=function(){Ie(this.g,"a")},nr.prototype.wa=function(e){Ie(this.g,new er(e))},nr.prototype.va=function(e){Ie(this.g,new tr(e))},nr.prototype.ua=function(){Ie(this.g,"b")},Xn.prototype.createWebChannel=Xn.prototype.g,Zn.prototype.send=Zn.prototype.u,Zn.prototype.open=Zn.prototype.m,Zn.prototype.close=Zn.prototype.close,Xe.NO_ERROR=0,Xe.TIMEOUT=8,Xe.HTTP_ERROR=6,Ze.COMPLETE="complete",nt.EventType=it,it.OPEN="a",it.CLOSE="b",it.ERROR="c",it.MESSAGE="d",be.prototype.listen=be.prototype.N,yn.prototype.listenOnce=yn.prototype.O,yn.prototype.getLastError=yn.prototype.La,yn.prototype.getLastErrorCode=yn.prototype.Da,yn.prototype.getStatus=yn.prototype.ba,yn.prototype.getResponseJson=yn.prototype.Qa,yn.prototype.getResponseText=yn.prototype.ga,yn.prototype.send=yn.prototype.ea;var rr=s.createWebChannelTransport=function(){return new Xn},ir=s.getStatEventTarget=function(){return We()},sr=s.ErrorCode=Xe,or=s.EventType=Ze,ar=s.Event=ze,cr=s.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ur=s.FetchXmlHttpFactory=hn,hr=s.WebChannel=nt,lr=s.XhrIo=yn}).call(this,n(8))},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(0),i=n(5),s=n(3),o=n(4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class a{constructor(e,t){this._delegate=e,this.firebase=t,Object(s._addComponent)(e,new i.a("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Object(s.deleteApp)(this._delegate)))}_getService(e,t=s._DEFAULT_ENTRY_NAME){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=s._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Object(s._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){Object(s._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},u=new r.b("app-compat","Firebase",c);const h=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function e(){const t=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){const t={},n={__esModule:!0,initializeApp:function(i,o={}){const a=s.initializeApp(i,o);if(Object(r.e)(t,a.name))return t[a.name];const c=new e(a,n);return t[a.name]=c,c},app:i,registerVersion:s.registerVersion,setLogLevel:s.setLogLevel,onLog:s.onLog,apps:null,SDK_VERSION:s.SDK_VERSION,INTERNAL:{registerComponent:function(t){const o=t.name,a=o.replace("-compat","");if(s._registerComponent(t)&&"PUBLIC"===t.type){const s=(e=i())=>{if("function"!=typeof e[a])throw u.create("invalid-app-argument",{appName:o});return e[a]()};void 0!==t.serviceProps&&Object(r.i)(s,t.serviceProps),n[a]=s,e.prototype[a]=function(...e){return this._getService.bind(this,o).apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[a]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){if("serverAuth"===t)return null;return t},modularAPIs:s}};function i(e){if(e=e||s._DEFAULT_ENTRY_NAME,!Object(r.e)(t,e))throw u.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(e=>t[e])}}),i.App=e,n}(a);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){Object(r.i)(t,e)},createSubscribe:r.g,ErrorFactory:r.b,deepExtend:r.i}),t}(),l=new o.b("@firebase/app-compat");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if(Object(r.m)()&&void 0!==self.firebase){l.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&l.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const d=h;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var f;Object(s.registerVersion)("@firebase/app-compat","0.1.12",f)},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Counter=void 0;const r=n(12),i=n(15);n(16),n(20);const s=n(19);t.Counter=class{constructor(e,t){this.doc=e,this.field=t,this.db=null,this.shardId="",this.shards={},this.notifyPromise=null,this.db=e.firestore,this.shardId=function(e){const t=new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie);if(t)return t[1];const n=r.v4(),i=new Date;i.setTime(i.getTime()+2592e6);const s="; expires="+i.toUTCString();return document.cookie=encodeURIComponent(e)+"="+n+s+"; path=/",n}("FIRESTORE_COUNTER_SHARD_ID"),i.default.initializeApp(this.db.app.options);const n=i.default.firestore().collection("_counter_shards_");this.shards[e.path]=0,this.shards[n.path+"/"+this.shardId]=0,this.shards[n.path+"/\t"+this.shardId.substr(0,4)]=0,this.shards[n.path+"/\t\t"+this.shardId.substr(0,3)]=0,this.shards[n.path+"/\t\t\t"+this.shardId.substr(0,2)]=0,this.shards[n.path+"/\t\t\t"+this.shardId.substr(0,1)]=0}async get(e){const t=Object.keys(this.shards).map(async t=>(await this.db.doc(t).get(e)).get(this.field)||0);return(await Promise.all(t)).reduce((e,t)=>e+t,0)}onSnapshot(e){Object.keys(this.shards).forEach(t=>{const n=i.default.firestore().doc(t);(0,s.onSnapshot)(n,t=>{this.shards[t.ref.path]=t.get(this.field)||0,null===this.notifyPromise&&(this.notifyPromise=async function(e){return new Promise(async t=>{setTimeout(async()=>{const n=e();t(n)},0)})}(()=>{const t=Object.values(this.shards).reduce((e,t)=>e+t,0);e({exists:!0,data:()=>t}),this.notifyPromise=null}))})})}incrementBy(e){const t=i.default.firestore.FieldValue.increment(e),n=this.field.split(".").reverse().reduce((e,t)=>({[t]:e}),t),r=i.default.firestore().collection("_counter_shards_");return(0,s.setDoc)((0,s.doc)(r,this.shardId),n,{merge:!0})}shard(){return this.doc.collection("_counter_shards_").doc(this.shardId)}}},function(e,t,n){var r=n(13),i=n(14),s=i;s.v1=r,s.v4=i,e.exports=s},function(e,t,n){var r,i,s=n(9),o=n(10),a=0,c=0;e.exports=function(e,t,n){var u=t&&n||0,h=t||[],l=(e=e||{}).node||r,d=void 0!==e.clockseq?e.clockseq:i;if(null==l||null==d){var f=s();null==l&&(l=r=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==d&&(d=i=16383&(f[6]<<8|f[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:c+1,g=p-a+(m-c)/1e4;if(g<0&&void 0===e.clockseq&&(d=d+1&16383),(g<0||p>a)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=p,c=m,i=d;var y=(1e4*(268435455&(p+=122192928e5))+m)%4294967296;h[u++]=y>>>24&255,h[u++]=y>>>16&255,h[u++]=y>>>8&255,h[u++]=255&y;var v=p/4294967296*1e4&268435455;h[u++]=v>>>8&255,h[u++]=255&v,h[u++]=v>>>24&15|16,h[u++]=v>>>16&255,h[u++]=d>>>8|128,h[u++]=255&d;for(var w=0;w<6;++w)h[u+w]=l[w];return t||o(h)}},function(e,t,n){var r=n(9),i=n(10);e.exports=function(e,t,n){var s=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var a=0;a<16;++a)t[s+a]=o[a];return t||i(o)}},function(e,t,n){"use strict";n.r(t);var r=n(7);n.d(t,"default",(function(){return r.a}));
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
r.a.registerVersion("firebase","9.6.1","app-compat")},function(e,t,n){"use strict";n.r(t);n(17)},function(e,t,n){"use strict";(function(e){var t=n(7),r=n(1),i=n(5),s=n(0);function o(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function a(e=Object(s.l)()){return!("file:"!==o()&&"ionic:"!==o()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function c(e=Object(s.l)()){return Object(s.q)()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(e=Object(s.l)()){return/Edge\/\d+/.test(e)}(e)}function u(){try{const e=self.localStorage,t=r.s();if(e)return e.setItem(t,"1"),e.removeItem(t),!c()||Object(s.r)()}catch(e){return h()&&Object(s.r)()}return!1}function h(){return void 0!==e&&"WorkerGlobalScope"in e&&"importScripts"in e}function l(){return("http:"===o()||"https:"===o()||Object(s.n)()||a())&&!(Object(s.u)()||Object(s.t)())&&u()&&!h()}function d(){return a()&&"undefined"!=typeof document}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const f={LOCAL:"local",NONE:"none",SESSION:"session"},p=r.p;async function m(e){await e._initializationPromise;const t=g(),n=r.v("persistence",e.config.apiKey,e.name);(null==t?void 0:t.sessionStorage)&&t.sessionStorage.setItem(n,e._getPersistence())}function g(){return"undefined"!=typeof window?window:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y=r.p;class v{constructor(){this.browserResolver=r.t(r.z),this.cordovaResolver=r.t(r.E),this.underlyingResolver=null,this._redirectPersistence=r.A,this._completeRedirectFn=r.u}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return d()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return y(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!d()&&new Promise(e=>{const t=setTimeout(()=>{e(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(t),e(!0)})})}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w(e){return e.unwrap()}function b(e){const{_tokenResponse:t}=e instanceof s.c?e.customData:e;if(!t)return null;if(!(e instanceof s.c)&&"temporaryProof"in t&&"phoneNumber"in t)return r.i.credentialFromResult(e);const n=t.providerId;if(!n||n===r.k.PASSWORD)return null;let i;switch(n){case r.k.GOOGLE:i=r.f;break;case r.k.FACEBOOK:i=r.d;break;case r.k.GITHUB:i=r.e;break;case r.k.TWITTER:i=r.o;break;default:const{oauthIdToken:e,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:c}=t;return s||o||e||a?a?n.startsWith("saml.")?r.m._create(n,a):r.g._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:e,accessToken:s}):new r.h(n).credential({idToken:e,accessToken:s,rawNonce:c}):null}return e instanceof s.c?i.credentialFromError(e):i.credentialFromResult(e)}function I(e,t){return t.catch(t=>{throw t instanceof s.c&&function(e,t){var n;const i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code){t.resolver=new T(e,r.J(e,t))}else if(i){const e=b(t),n=t;e&&(n.credential=e,n.tenantId=i.tenantId||void 0,n.email=i.email||void 0,n.phoneNumber=i.phoneNumber||void 0)}}(e,t),t}).then(e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(i=e,b(i)),additionalUserInfo:r.I(e),user:E.getOrCreate(n)};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var i})}async function _(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>I(e,n.confirm(t))}}class T{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return I(w(this.auth),this.resolver.resolveSignIn(e))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E{constructor(e){this._delegate=e,this.multiFactor=r.S(e)}static getOrCreate(e){return E.USER_MAP.has(e)||E.USER_MAP.set(e,new E(e)),E.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return I(this.auth,r.O(this._delegate,e))}async linkWithPhoneNumber(e,t){return _(this.auth,r.P(this._delegate,e,t))}async linkWithPopup(e){return I(this.auth,r.Q(this._delegate,e,v))}async linkWithRedirect(e){return await m(r.q(this.auth)),r.R(this._delegate,e,v)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return I(this.auth,r.T(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return _(this.auth,r.U(this._delegate,e,t))}reauthenticateWithPopup(e){return I(this.auth,r.V(this._delegate,e,v))}async reauthenticateWithRedirect(e){return await m(r.q(this.auth)),r.W(this._delegate,e,v)}sendEmailVerification(e){return r.X(this._delegate,e)}async unlink(e){return await r.ib(this._delegate,e),this}updateEmail(e){return r.jb(this._delegate,e)}updatePassword(e){return r.kb(this._delegate,e)}updatePhoneNumber(e){return r.lb(this._delegate,e)}updateProfile(e){return r.mb(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return r.nb(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}E.USER_MAP=new WeakMap;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const k=r.p;class S{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;k(n,"invalid-api-key",{appName:e.name});let i=[r.L];if("undefined"!=typeof window){i=function(e,t){const n=g();if(!(null==n?void 0:n.sessionStorage))return[];const i=r.v("persistence",e,t);switch(n.sessionStorage.getItem(i)){case f.NONE:return[r.L];case f.LOCAL:return[r.M,r.A];case f.SESSION:return[r.A];default:return[]}}(n,e.name);for(const e of[r.M,r.y,r.A])i.includes(e)||i.push(e)}k(n,"invalid-api-key",{appName:e.name});const s="undefined"!=typeof window?v:void 0;this._delegate=t.initialize({options:{persistence:i,popupRedirectResolver:s}}),this._delegate._updateErrorMap(r.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?E.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){r.D(this._delegate,e,t)}applyActionCode(e){return r.x(this._delegate,e)}checkActionCode(e){return r.B(this._delegate,e)}confirmPasswordReset(e,t){return r.C(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return I(this._delegate,r.F(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return r.H(this._delegate,e)}isSignInWithEmailLink(e){return r.N(this._delegate,e)}async getRedirectResult(){k(l(),this._delegate,"operation-not-supported-in-this-environment");const e=await r.K(this._delegate,v);return e?I(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){r.w(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=A(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=A(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return r.Z(this._delegate,e,t)}sendPasswordResetEmail(e,t){return r.Y(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){p(Object.values(f).includes(t),e,"invalid-persistence-type"),Object(s.u)()?p(t!==f.SESSION,e,"unsupported-persistence-type"):Object(s.t)()?p(t===f.NONE,e,"unsupported-persistence-type"):h()?p(t===f.NONE||t===f.LOCAL&&Object(s.r)(),e,"unsupported-persistence-type"):p(t===f.NONE||u(),e,"unsupported-persistence-type")}(this._delegate,e),e){case f.SESSION:t=r.A;break;case f.LOCAL:t=await r.t(r.M)._isAvailable()?r.M:r.y;break;case f.NONE:t=r.L;break;default:return r.r("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return I(this._delegate,r.ab(this._delegate))}signInWithCredential(e){return I(this._delegate,r.bb(this._delegate,e))}signInWithCustomToken(e){return I(this._delegate,r.cb(this._delegate,e))}signInWithEmailAndPassword(e,t){return I(this._delegate,r.db(this._delegate,e,t))}signInWithEmailLink(e,t){return I(this._delegate,r.eb(this._delegate,e,t))}signInWithPhoneNumber(e,t){return _(this._delegate,r.fb(this._delegate,e,t))}async signInWithPopup(e){return k(l(),this._delegate,"operation-not-supported-in-this-environment"),I(this._delegate,r.gb(this._delegate,e,v))}async signInWithRedirect(e){return k(l(),this._delegate,"operation-not-supported-in-this-environment"),await m(this._delegate),r.hb(this._delegate,e,v)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return r.ob(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function A(e,t,n){let r=e;"function"!=typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&E.getOrCreate(e)),error:t,complete:n}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */S.Persistence=f;class N{constructor(){this.providerId="phone",this._delegate=new r.i(w(t.a.auth()))}static credential(e,t){return r.i.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}N.PHONE_SIGN_IN_METHOD=r.i.PHONE_SIGN_IN_METHOD,N.PROVIDER_ID=r.i.PROVIDER_ID;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const O=r.p;class C{constructor(e,n,i=t.a.app()){var s;O(null===(s=i.options)||void 0===s?void 0:s.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new r.l(e,n,i.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var D;(D=t.a).INTERNAL.registerComponent(new i.a("auth-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new S(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:r.a.EMAIL_SIGNIN,PASSWORD_RESET:r.a.PASSWORD_RESET,RECOVER_EMAIL:r.a.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:r.a.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:r.a.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:r.a.VERIFY_EMAIL}},EmailAuthProvider:r.c,FacebookAuthProvider:r.d,GithubAuthProvider:r.e,GoogleAuthProvider:r.f,OAuthProvider:r.h,SAMLAuthProvider:r.n,PhoneAuthProvider:N,PhoneMultiFactorGenerator:r.j,RecaptchaVerifier:C,TwitterAuthProvider:r.o,Auth:S,AuthCredential:r.b,Error:s.c}).setInstantiationMode("LAZY").setMultipleInstances(!1)),D.registerVersion("@firebase/auth-compat","0.2.4")}).call(this,n(8))},function(e,t){var n,r,i=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(e){n=s}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var c,u=[],h=!1,l=-1;function d(){h&&c&&(h=!1,c.length?u=c.concat(u):l=-1,u.length&&f())}function f(){if(!h){var e=a(d);h=!0;for(var t=u.length;t;){for(c=u,u=[];++l<t;)c&&c[l].run();l=-1,t=u.length}c=null,h=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||h||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";n.r(t);var r=n(2);n.d(t,"AbstractUserDataWriter",(function(){return r.a})),n.d(t,"Bytes",(function(){return r.b})),n.d(t,"CACHE_SIZE_UNLIMITED",(function(){return r.c})),n.d(t,"CollectionReference",(function(){return r.d})),n.d(t,"DocumentReference",(function(){return r.e})),n.d(t,"DocumentSnapshot",(function(){return r.f})),n.d(t,"FieldPath",(function(){return r.g})),n.d(t,"FieldValue",(function(){return r.h})),n.d(t,"Firestore",(function(){return r.i})),n.d(t,"FirestoreError",(function(){return r.j})),n.d(t,"GeoPoint",(function(){return r.k})),n.d(t,"LoadBundleTask",(function(){return r.l})),n.d(t,"Query",(function(){return r.m})),n.d(t,"QueryConstraint",(function(){return r.n})),n.d(t,"QueryDocumentSnapshot",(function(){return r.o})),n.d(t,"QuerySnapshot",(function(){return r.p})),n.d(t,"SnapshotMetadata",(function(){return r.q})),n.d(t,"Timestamp",(function(){return r.r})),n.d(t,"Transaction",(function(){return r.s})),n.d(t,"WriteBatch",(function(){return r.t})),n.d(t,"_DatabaseId",(function(){return r.u})),n.d(t,"_DocumentKey",(function(){return r.v})),n.d(t,"_EmptyAppCheckTokenProvider",(function(){return r.w})),n.d(t,"_EmptyAuthCredentialsProvider",(function(){return r.x})),n.d(t,"_FieldPath",(function(){return r.y})),n.d(t,"_cast",(function(){return r.z})),n.d(t,"_debugAssert",(function(){return r.A})),n.d(t,"_isBase64Available",(function(){return r.B})),n.d(t,"_logWarn",(function(){return r.C})),n.d(t,"_validateIsNotUsedTogether",(function(){return r.D})),n.d(t,"addDoc",(function(){return r.E})),n.d(t,"arrayRemove",(function(){return r.F})),n.d(t,"arrayUnion",(function(){return r.G})),n.d(t,"clearIndexedDbPersistence",(function(){return r.H})),n.d(t,"collection",(function(){return r.I})),n.d(t,"collectionGroup",(function(){return r.J})),n.d(t,"connectFirestoreEmulator",(function(){return r.K})),n.d(t,"deleteDoc",(function(){return r.L})),n.d(t,"deleteField",(function(){return r.M})),n.d(t,"disableNetwork",(function(){return r.N})),n.d(t,"doc",(function(){return r.O})),n.d(t,"documentId",(function(){return r.P})),n.d(t,"enableIndexedDbPersistence",(function(){return r.Q})),n.d(t,"enableMultiTabIndexedDbPersistence",(function(){return r.R})),n.d(t,"enableNetwork",(function(){return r.S})),n.d(t,"endAt",(function(){return r.T})),n.d(t,"endBefore",(function(){return r.U})),n.d(t,"ensureFirestoreConfigured",(function(){return r.V})),n.d(t,"executeWrite",(function(){return r.W})),n.d(t,"getDoc",(function(){return r.X})),n.d(t,"getDocFromCache",(function(){return r.Y})),n.d(t,"getDocFromServer",(function(){return r.Z})),n.d(t,"getDocs",(function(){return r.ab})),n.d(t,"getDocsFromCache",(function(){return r.bb})),n.d(t,"getDocsFromServer",(function(){return r.cb})),n.d(t,"getFirestore",(function(){return r.db})),n.d(t,"increment",(function(){return r.eb})),n.d(t,"initializeFirestore",(function(){return r.fb})),n.d(t,"limit",(function(){return r.gb})),n.d(t,"limitToLast",(function(){return r.hb})),n.d(t,"loadBundle",(function(){return r.ib})),n.d(t,"namedQuery",(function(){return r.jb})),n.d(t,"onSnapshot",(function(){return r.kb})),n.d(t,"onSnapshotsInSync",(function(){return r.lb})),n.d(t,"orderBy",(function(){return r.mb})),n.d(t,"query",(function(){return r.nb})),n.d(t,"queryEqual",(function(){return r.ob})),n.d(t,"refEqual",(function(){return r.pb})),n.d(t,"runTransaction",(function(){return r.qb})),n.d(t,"serverTimestamp",(function(){return r.rb})),n.d(t,"setDoc",(function(){return r.sb})),n.d(t,"setLogLevel",(function(){return r.tb})),n.d(t,"snapshotEqual",(function(){return r.ub})),n.d(t,"startAfter",(function(){return r.vb})),n.d(t,"startAt",(function(){return r.wb})),n.d(t,"terminate",(function(){return r.xb})),n.d(t,"updateDoc",(function(){return r.yb})),n.d(t,"waitForPendingWrites",(function(){return r.zb})),n.d(t,"where",(function(){return r.Ab})),n.d(t,"writeBatch",(function(){return r.Bb}))},function(e,t,n){"use strict";n.r(t);var r=n(7),i=n(2),s=n(0),o=n(5);
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function a(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new i.j("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c(){if("undefined"==typeof Uint8Array)throw new i.j("unimplemented","Uint8Arrays are not available in this environment.")}function u(){if(!Object(i.B)())throw new i.j("unimplemented","Blobs are unavailable in Firestore in this environment.")}class h{constructor(e){this._delegate=e}static fromBase64String(e){return u(),new h(i.b.fromBase64String(e))}static fromUint8Array(e){return c(),new h(i.b.fromUint8Array(e))}toBase64(){return u(),this._delegate.toBase64()}toUint8Array(){return c(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const e of t)if(e in n&&"function"==typeof n[e])return!0;return!1}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,["next","error","complete"])}class d{enableIndexedDbPersistence(e,t){return Object(i.Q)(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return Object(i.R)(e._delegate)}clearIndexedDbPersistence(e){return Object(i.H)(e._delegate)}}class f{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof i.u||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Object(i.C)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,n={}){Object(i.K)(this._delegate,e,t,n)}enableNetwork(){return Object(i.S)(this._delegate)}disableNetwork(){return Object(i.N)(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Object(i.D)("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Object(i.zb)(this._delegate)}onSnapshotsInSync(e){return Object(i.lb)(this._delegate,e)}get app(){if(!this._appCompat)throw new i.j("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new A(this,Object(i.I)(this._delegate,e))}catch(e){throw w(e,"collection()","Firestore.collection()")}}doc(e){try{return new v(this,Object(i.O)(this._delegate,e))}catch(e){throw w(e,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new E(this,Object(i.J)(this._delegate,e))}catch(e){throw w(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Object(i.qb)(this._delegate,t=>e(new m(this,t)))}batch(){return Object(i.V)(this._delegate),new g(new i.t(this._delegate,e=>Object(i.W)(this._delegate,e)))}loadBundle(e){return Object(i.ib)(this._delegate,e)}namedQuery(e){return Object(i.jb)(this._delegate,e).then(e=>e?new E(this,e):null)}}class p extends i.a{constructor(e){super(),this.firestore=e}convertBytes(e){return new h(new i.b(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return v.forKey(t,this.firestore,null)}}class m{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new p(e)}get(e){const t=N(e);return this._delegate.get(t).then(e=>new _(this._firestore,new i.f(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter)))}set(e,t,n){const r=N(e);return n?(a("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=N(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=N(e);return this._delegate.delete(t),this}}class g{constructor(e){this._delegate=e}set(e,t,n){const r=N(e);return n?(a("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=N(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=N(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class y{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new i.o(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new T(this._firestore,n),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=y.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new y(e,new p(e),t),r.set(t,i)),i}}y.INSTANCES=new WeakMap;class v{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new p(e)}static forPath(e,t,n){if(e.length%2!=0)throw new i.j("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new v(t,new i.e(t._delegate,n,new i.v(e)))}static forKey(e,t,n){return new v(t,new i.e(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new A(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new A(this.firestore,Object(i.I)(this._delegate,e))}catch(e){throw w(e,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=Object(s.k)(e))instanceof i.e&&Object(i.pb)(this._delegate,e)}set(e,t){t=a("DocumentReference.set",t);try{return t?Object(i.sb)(this._delegate,e,t):Object(i.sb)(this._delegate,e)}catch(e){throw w(e,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return 1===arguments.length?Object(i.yb)(this._delegate,e):Object(i.yb)(this._delegate,e,t,...n)}catch(e){throw w(e,"updateDoc()","DocumentReference.update()")}}delete(){return Object(i.L)(this._delegate)}onSnapshot(...e){const t=b(e),n=I(e,e=>new _(this.firestore,new i.f(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)));return Object(i.kb)(this._delegate,t,n)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?Object(i.Y)(this._delegate):"server"===(null==e?void 0:e.source)?Object(i.Z)(this._delegate):Object(i.X)(this._delegate),t.then(e=>new _(this.firestore,new i.f(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)))}withConverter(e){return new v(this.firestore,e?this._delegate.withConverter(y.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function w(e,t,n){return e.message=e.message.replace(t,n),e}function b(e){for(const t of e)if("object"==typeof t&&!l(t))return t;return{}}function I(e,t){var n,r;let i;return i=l(e[0])?e[0]:l(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class _{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new v(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Object(i.ub)(this._delegate,e._delegate)}}class T extends _{data(e){const t=this._delegate.data(e);return Object(i.A)(void 0!==t,"Document in a QueryDocumentSnapshot should exist"),t}}class E{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new p(e)}where(e,t,n){try{return new E(this.firestore,Object(i.nb)(this._delegate,Object(i.Ab)(e,t,n)))}catch(e){throw w(e,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new E(this.firestore,Object(i.nb)(this._delegate,Object(i.mb)(e,t)))}catch(e){throw w(e,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new E(this.firestore,Object(i.nb)(this._delegate,Object(i.gb)(e)))}catch(e){throw w(e,"limit()","Query.limit()")}}limitToLast(e){try{return new E(this.firestore,Object(i.nb)(this._delegate,Object(i.hb)(e)))}catch(e){throw w(e,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new E(this.firestore,Object(i.nb)(this._delegate,Object(i.wb)(...e)))}catch(e){throw w(e,"startAt()","Query.startAt()")}}startAfter(...e){try{return new E(this.firestore,Object(i.nb)(this._delegate,Object(i.vb)(...e)))}catch(e){throw w(e,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new E(this.firestore,Object(i.nb)(this._delegate,Object(i.U)(...e)))}catch(e){throw w(e,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new E(this.firestore,Object(i.nb)(this._delegate,Object(i.T)(...e)))}catch(e){throw w(e,"endAt()","Query.endAt()")}}isEqual(e){return Object(i.ob)(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?Object(i.bb)(this._delegate):"server"===(null==e?void 0:e.source)?Object(i.cb)(this._delegate):Object(i.ab)(this._delegate),t.then(e=>new S(this.firestore,new i.p(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)))}onSnapshot(...e){const t=b(e),n=I(e,e=>new S(this.firestore,new i.p(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)));return Object(i.kb)(this._delegate,t,n)}withConverter(e){return new E(this.firestore,e?this._delegate.withConverter(y.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class k{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new T(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class S{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new E(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new T(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(e=>new k(this._firestore,e))}forEach(e,t){this._delegate.forEach(n=>{e.call(t,new T(this._firestore,n))})}isEqual(e){return Object(i.ub)(this._delegate,e._delegate)}}class A extends E{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new v(this.firestore,e):null}doc(e){try{return new v(this.firestore,void 0===e?Object(i.O)(this._delegate):Object(i.O)(this._delegate,e))}catch(e){throw w(e,"doc()","CollectionReference.doc()")}}add(e){return Object(i.E)(this._delegate,e).then(e=>new v(this.firestore,e))}isEqual(e){return Object(i.pb)(this._delegate,e._delegate)}withConverter(e){return new A(this.firestore,e?this._delegate.withConverter(y.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function N(e){return Object(i.z)(e,i.e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(...e){this._delegate=new i.g(...e)}static documentId(){return new O(i.y.keyField().canonicalString())}isEqual(e){return(e=Object(s.k)(e))instanceof i.g&&this._delegate._internalPath.isEqual(e._internalPath)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C{constructor(e){this._delegate=e}static serverTimestamp(){const e=Object(i.rb)();return e._methodName="FieldValue.serverTimestamp",new C(e)}static delete(){const e=Object(i.M)();return e._methodName="FieldValue.delete",new C(e)}static arrayUnion(...e){const t=Object(i.G)(...e);return t._methodName="FieldValue.arrayUnion",new C(t)}static arrayRemove(...e){const t=Object(i.F)(...e);return t._methodName="FieldValue.arrayRemove",new C(t)}static increment(e){const t=Object(i.eb)(e);return t._methodName="FieldValue.increment",new C(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D={Firestore:f,GeoPoint:i.k,Timestamp:i.r,Blob:h,Transaction:m,WriteBatch:g,DocumentReference:v,DocumentSnapshot:_,Query:E,QueryDocumentSnapshot:T,QuerySnapshot:S,CollectionReference:A,FieldPath:O,FieldValue:C,setLogLevel:function(e){Object(i.tb)(e)},CACHE_SIZE_UNLIMITED:i.c};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var R,P;R=r.a,P=(e,t)=>new f(e,t,new d),R.INTERNAL.registerComponent(new o.a("firestore-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("firestore").getImmediate();return P(t,n)},"PUBLIC").setServiceProps(Object.assign({},D))),R.registerVersion("@firebase/firestore-compat","0.1.10")}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zaGFyZGVkL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3NoYXJkZWQvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3V0aWwvZGlzdC9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL3NoYXJkZWQvLi9ub2RlX21vZHVsZXMvdHNsaWIvdHNsaWIuZXM2LmpzIiwid2VicGFjazovL3NoYXJkZWQvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2F1dGgvZGlzdC9lc20yMDE3L2luZGV4LTgzOWRlNTEwLmpzIiwid2VicGFjazovL3NoYXJkZWQvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2F1dGgvZGlzdC9lc20yMDE3L2ludGVybmFsLmpzIiwid2VicGFjazovL3NoYXJkZWQvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2ZpcmVzdG9yZS9kaXN0L2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vc2hhcmRlZC8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvYXBwL2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vc2hhcmRlZC8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvbG9nZ2VyL2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vc2hhcmRlZC8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvY29tcG9uZW50L2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vc2hhcmRlZC8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2Uvd2ViY2hhbm5lbC13cmFwcGVyL2Rpc3QvaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly9zaGFyZGVkLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9hcHAtY29tcGF0L2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vc2hhcmRlZC8od2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanMiLCJ3ZWJwYWNrOi8vc2hhcmRlZC8uL25vZGVfbW9kdWxlcy91dWlkL2xpYi9ybmctYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly9zaGFyZGVkLy4vbm9kZV9tb2R1bGVzL3V1aWQvbGliL2J5dGVzVG9VdWlkLmpzIiwid2VicGFjazovL3NoYXJkZWQvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vc2hhcmRlZC8uL25vZGVfbW9kdWxlcy91dWlkL2luZGV4LmpzIiwid2VicGFjazovL3NoYXJkZWQvLi9ub2RlX21vZHVsZXMvdXVpZC92MS5qcyIsIndlYnBhY2s6Ly9zaGFyZGVkLy4vbm9kZV9tb2R1bGVzL3V1aWQvdjQuanMiLCJ3ZWJwYWNrOi8vc2hhcmRlZC8uL25vZGVfbW9kdWxlcy9maXJlYmFzZS9jb21wYXQvYXBwL2Rpc3QvaW5kZXguZXNtLmpzIiwid2VicGFjazovL3NoYXJkZWQvLi9ub2RlX21vZHVsZXMvZmlyZWJhc2UvY29tcGF0L2F1dGgvZGlzdC9pbmRleC5lc20uanMiLCJ3ZWJwYWNrOi8vc2hhcmRlZC8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvYXV0aC1jb21wYXQvZGlzdC9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL3NoYXJkZWQvLi9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwid2VicGFjazovL3NoYXJkZWQvLi9ub2RlX21vZHVsZXMvZmlyZWJhc2UvZmlyZXN0b3JlL2Rpc3QvaW5kZXguZXNtLmpzIiwid2VicGFjazovL3NoYXJkZWQvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2ZpcmVzdG9yZS1jb21wYXQvZGlzdC9pbmRleC5lc20yMDE3LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwic3RyaW5nVG9CeXRlQXJyYXkkMSIsInN0ciIsIm91dCIsImxlbmd0aCIsImNoYXJDb2RlQXQiLCJiYXNlNjQiLCJieXRlVG9DaGFyTWFwXyIsImNoYXJUb0J5dGVNYXBfIiwiYnl0ZVRvQ2hhck1hcFdlYlNhZmVfIiwiY2hhclRvQnl0ZU1hcFdlYlNhZmVfIiwiRU5DT0RFRF9WQUxTX0JBU0UiLCJ0aGlzIiwiSEFTX05BVElWRV9TVVBQT1JUIiwiYXRvYiIsImlucHV0Iiwid2ViU2FmZSIsIkFycmF5IiwiaXNBcnJheSIsIkVycm9yIiwiaW5pdF8iLCJieXRlVG9DaGFyTWFwIiwib3V0cHV0IiwiYnl0ZTEiLCJoYXZlQnl0ZTIiLCJieXRlMiIsImhhdmVCeXRlMyIsImJ5dGUzIiwib3V0Qnl0ZTEiLCJvdXRCeXRlMiIsIm91dEJ5dGUzIiwib3V0Qnl0ZTQiLCJwdXNoIiwiam9pbiIsImJ0b2EiLCJlbmNvZGVCeXRlQXJyYXkiLCJieXRlcyIsInBvcyIsImMxIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiYzIiLCJ1IiwiYzMiLCJieXRlQXJyYXlUb1N0cmluZyIsImRlY29kZVN0cmluZ1RvQnl0ZUFycmF5IiwiY2hhclRvQnl0ZU1hcCIsImNoYXJBdCIsImJ5dGU0IiwiRU5DT0RFRF9WQUxTIiwiRU5DT0RFRF9WQUxTX1dFQlNBRkUiLCJiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyIsInV0ZjhCeXRlcyIsImJhc2U2NEVuY29kZSIsInJlcGxhY2UiLCJiYXNlNjREZWNvZGUiLCJkZWNvZGVTdHJpbmciLCJlIiwiY29uc29sZSIsImVycm9yIiwiZGVlcEV4dGVuZCIsInRhcmdldCIsInNvdXJjZSIsImNvbnN0cnVjdG9yIiwiRGF0ZSIsImdldFRpbWUiLCJ1bmRlZmluZWQiLCJwcm9wIiwiRGVmZXJyZWQiLCJyZWplY3QiLCJyZXNvbHZlIiwicHJvbWlzZSIsIlByb21pc2UiLCJjYWxsYmFjayIsImNhdGNoIiwiY3JlYXRlTW9ja1VzZXJUb2tlbiIsInRva2VuIiwicHJvamVjdElkIiwidWlkIiwicHJvamVjdCIsImlhdCIsInN1YiIsInVzZXJfaWQiLCJwYXlsb2FkIiwiYXNzaWduIiwiaXNzIiwiYXVkIiwiZXhwIiwiYXV0aF90aW1lIiwiZmlyZWJhc2UiLCJzaWduX2luX3Byb3ZpZGVyIiwiaWRlbnRpdGllcyIsIkpTT04iLCJzdHJpbmdpZnkiLCJhbGciLCJ0eXBlIiwiZ2V0VUEiLCJuYXZpZ2F0b3IiLCJpc01vYmlsZUNvcmRvdmEiLCJ3aW5kb3ciLCJ0ZXN0IiwiaXNOb2RlIiwidG9TdHJpbmciLCJnbG9iYWwiLCJwcm9jZXNzIiwiaXNCcm93c2VyIiwic2VsZiIsImlzQnJvd3NlckV4dGVuc2lvbiIsInJ1bnRpbWUiLCJjaHJvbWUiLCJicm93c2VyIiwiaWQiLCJpc1JlYWN0TmF0aXZlIiwiaXNFbGVjdHJvbiIsImluZGV4T2YiLCJpc0lFIiwidWEiLCJpc1VXUCIsImlzU2FmYXJpIiwidXNlckFnZW50IiwiaW5jbHVkZXMiLCJpc0luZGV4ZWREQkF2YWlsYWJsZSIsImluZGV4ZWREQiIsIkZpcmViYXNlRXJyb3IiLCJjb2RlIiwibWVzc2FnZSIsImN1c3RvbURhdGEiLCJzdXBlciIsInNldFByb3RvdHlwZU9mIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJFcnJvckZhY3RvcnkiLCJzZXJ2aWNlIiwic2VydmljZU5hbWUiLCJlcnJvcnMiLCJkYXRhIiwiZnVsbENvZGUiLCJ0ZW1wbGF0ZSIsIlBBVFRFUk4iLCJfIiwicmVwbGFjZVRlbXBsYXRlIiwiZnVsbE1lc3NhZ2UiLCJjb250YWlucyIsIm9iaiIsImlzRW1wdHkiLCJkZWVwRXF1YWwiLCJhIiwiYiIsImFLZXlzIiwia2V5cyIsImJLZXlzIiwiayIsImFQcm9wIiwiYlByb3AiLCJpc09iamVjdCIsInRoaW5nIiwicXVlcnlzdHJpbmciLCJxdWVyeXN0cmluZ1BhcmFtcyIsInBhcmFtcyIsImVudHJpZXMiLCJmb3JFYWNoIiwiYXJyYXlWYWwiLCJlbmNvZGVVUklDb21wb25lbnQiLCJxdWVyeXN0cmluZ0RlY29kZSIsInNwbGl0IiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiZXh0cmFjdFF1ZXJ5c3RyaW5nIiwidXJsIiwicXVlcnlTdGFydCIsImZyYWdtZW50U3RhcnQiLCJzdWJzdHJpbmciLCJjcmVhdGVTdWJzY3JpYmUiLCJleGVjdXRvciIsIm9uTm9PYnNlcnZlcnMiLCJwcm94eSIsIk9ic2VydmVyUHJveHkiLCJzdWJzY3JpYmUiLCJvYnNlcnZlcnMiLCJ1bnN1YnNjcmliZXMiLCJvYnNlcnZlckNvdW50IiwidGFzayIsImZpbmFsaXplZCIsInRoZW4iLCJmb3JFYWNoT2JzZXJ2ZXIiLCJvYnNlcnZlciIsIm5leHQiLCJjbG9zZSIsImNvbXBsZXRlIiwibmV4dE9yT2JzZXJ2ZXIiLCJtZXRob2RzIiwibWV0aG9kIiwiaW1wbGVtZW50c0FueU1ldGhvZHMiLCJub29wIiwidW5zdWIiLCJ1bnN1YnNjcmliZU9uZSIsImZpbmFsRXJyb3IiLCJmbiIsInNlbmRPbmUiLCJlcnIiLCJnZXRNb2R1bGFySW5zdGFuY2UiLCJfZGVsZWdhdGUiLCJfX3Jlc3QiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsIlByb3ZpZGVySWQiLCJGQUNFQk9PSyIsIkdJVEhVQiIsIkdPT0dMRSIsIlBBU1NXT1JEIiwiUEhPTkUiLCJUV0lUVEVSIiwiQWN0aW9uQ29kZU9wZXJhdGlvbiIsIkVNQUlMX1NJR05JTiIsIlBBU1NXT1JEX1JFU0VUIiwiUkVDT1ZFUl9FTUFJTCIsIlJFVkVSVF9TRUNPTkRfRkFDVE9SX0FERElUSU9OIiwiVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwiLCJWRVJJRllfRU1BSUwiLCJfcHJvZEVycm9yTWFwIiwiZGVidWdFcnJvck1hcCIsInByb2RFcnJvck1hcCIsIl9ERUZBVUxUX0FVVEhfRVJST1JfRkFDVE9SWSIsImxvZ0NsaWVudCIsIl9sb2dFcnJvciIsIm1zZyIsImFyZ3MiLCJsb2dMZXZlbCIsIkVSUk9SIiwiX2ZhaWwiLCJhdXRoT3JDb2RlIiwicmVzdCIsImNyZWF0ZUVycm9ySW50ZXJuYWwiLCJfY3JlYXRlRXJyb3IiLCJfZXJyb3JXaXRoQ3VzdG9tTWVzc2FnZSIsImF1dGgiLCJlcnJvck1hcCIsImFwcE5hbWUiLCJfYXNzZXJ0SW5zdGFuY2VPZiIsImluc3RhbmNlIiwiZnVsbFBhcmFtcyIsInNsaWNlIiwiX2Vycm9yRmFjdG9yeSIsIl9hc3NlcnQiLCJhc3NlcnRpb24iLCJkZWJ1Z0ZhaWwiLCJmYWlsdXJlIiwiZGVidWdBc3NlcnQiLCJpbnN0YW5jZUNhY2hlIiwiTWFwIiwiX2dldEluc3RhbmNlIiwiY2xzIiwiRnVuY3Rpb24iLCJzZXQiLCJfZ2V0Q3VycmVudFVybCIsIl9hIiwibG9jYXRpb24iLCJocmVmIiwiX2lzSHR0cE9ySHR0cHMiLCJfZ2V0Q3VycmVudFNjaGVtZSIsInByb3RvY29sIiwic2hvcnREZWxheSIsImxvbmdEZWxheSIsImlzTW9iaWxlIiwib25MaW5lIiwiTWF0aCIsIm1pbiIsIl9lbXVsYXRvclVybCIsImNvbmZpZyIsInBhdGgiLCJlbXVsYXRvciIsInN0YXJ0c1dpdGgiLCJGZXRjaFByb3ZpZGVyIiwiZmV0Y2hJbXBsIiwiaGVhZGVyc0ltcGwiLCJyZXNwb25zZUltcGwiLCJmZXRjaCIsIkhlYWRlcnMiLCJSZXNwb25zZSIsIlNFUlZFUl9FUlJPUl9NQVAiLCJERUZBVUxUX0FQSV9USU1FT1VUX01TIiwiX2FkZFRpZElmTmVjZXNzYXJ5IiwicmVxdWVzdCIsInRlbmFudElkIiwiYXN5bmMiLCJfcGVyZm9ybUFwaVJlcXVlc3QiLCJjdXN0b21FcnJvck1hcCIsIl9wZXJmb3JtRmV0Y2hXaXRoRXJyb3JIYW5kbGluZyIsImJvZHkiLCJxdWVyeSIsImFwaUtleSIsImhlYWRlcnMiLCJfZ2V0QWRkaXRpb25hbEhlYWRlcnMiLCJsYW5ndWFnZUNvZGUiLCJfZ2V0RmluYWxUYXJnZXQiLCJhcGlIb3N0IiwicmVmZXJyZXJQb2xpY3kiLCJmZXRjaEZuIiwiX2NhbkluaXRFbXVsYXRvciIsIm5ldHdvcmtUaW1lb3V0IiwiTmV0d29ya1RpbWVvdXQiLCJyZXNwb25zZSIsInJhY2UiLCJjbGVhck5ldHdvcmtUaW1lb3V0IiwianNvbiIsIl9tYWtlVGFnZ2VkRXJyb3IiLCJvayIsImVycm9yTWVzc2FnZSIsInNlcnZlckVycm9yQ29kZSIsInNlcnZlckVycm9yTWVzc2FnZSIsImF1dGhFcnJvciIsInRvTG93ZXJDYXNlIiwiX3BlcmZvcm1TaWduSW5SZXF1ZXN0Iiwic2VydmVyUmVzcG9uc2UiLCJfc2VydmVyUmVzcG9uc2UiLCJob3N0IiwiYmFzZSIsImFwaVNjaGVtZSIsInRpbWVyIiwic2V0VGltZW91dCIsImNsZWFyVGltZW91dCIsImVycm9yUGFyYW1zIiwiZW1haWwiLCJwaG9uZU51bWJlciIsIl90b2tlblJlc3BvbnNlIiwidXRjVGltZXN0YW1wVG9EYXRlU3RyaW5nIiwidXRjVGltZXN0YW1wIiwiZGF0ZSIsIk51bWJlciIsImlzTmFOIiwidG9VVENTdHJpbmciLCJzZWNvbmRzU3RyaW5nVG9NaWxsaXNlY29uZHMiLCJzZWNvbmRzIiwiX3BhcnNlVG9rZW4iLCJhbGdvcml0aG0iLCJzaWduYXR1cmUiLCJkZWNvZGVkIiwicGFyc2UiLCJfbG9nb3V0SWZJbnZhbGlkYXRlZCIsInVzZXIiLCJieXBhc3NBdXRoU3RhdGUiLCJpc1VzZXJJbnZhbGlkYXRlZCIsImN1cnJlbnRVc2VyIiwic2lnbk91dCIsIlByb2FjdGl2ZVJlZnJlc2giLCJpc1J1bm5pbmciLCJ0aW1lcklkIiwiZXJyb3JCYWNrb2ZmIiwic2NoZWR1bGUiLCJ3YXNFcnJvciIsImludGVydmFsIiwic3RzVG9rZW5NYW5hZ2VyIiwiZXhwaXJhdGlvblRpbWUiLCJub3ciLCJtYXgiLCJnZXRJbnRlcnZhbCIsIml0ZXJhdGlvbiIsImdldElkVG9rZW4iLCJVc2VyTWV0YWRhdGEiLCJjcmVhdGVkQXQiLCJsYXN0TG9naW5BdCIsIl9pbml0aWFsaXplVGltZSIsImxhc3RTaWduSW5UaW1lIiwiY3JlYXRpb25UaW1lIiwibWV0YWRhdGEiLCJfcmVsb2FkV2l0aG91dFNhdmluZyIsImlkVG9rZW4iLCJnZXRBY2NvdW50SW5mbyIsInVzZXJzIiwiY29yZUFjY291bnQiLCJfbm90aWZ5UmVsb2FkTGlzdGVuZXIiLCJuZXdQcm92aWRlckRhdGEiLCJwcm92aWRlclVzZXJJbmZvIiwibWFwIiwicHJvdmlkZXJJZCIsInByb3ZpZGVyIiwicmF3SWQiLCJkaXNwbGF5TmFtZSIsInBob3RvVVJMIiwicGhvdG9VcmwiLCJwcm92aWRlckRhdGEiLCJvcmlnaW5hbCIsIm5ld0RhdGEiLCJmaWx0ZXIiLCJzb21lIiwib2xkSXNBbm9ueW1vdXMiLCJpc0Fub255bW91cyIsIm5ld0lzQW5vbnltb3VzIiwicGFzc3dvcmRIYXNoIiwidXBkYXRlcyIsImxvY2FsSWQiLCJlbWFpbFZlcmlmaWVkIiwiU3RzVG9rZW5NYW5hZ2VyIiwicmVmcmVzaFRva2VuIiwiYWNjZXNzVG9rZW4iLCJleHBpcmVzSW4iLCJwYXJzZWRUb2tlbiIsIl90b2tlbkV4cGlyZXNJbiIsInVwZGF0ZVRva2Vuc0FuZEV4cGlyYXRpb24iLCJmb3JjZVJlZnJlc2giLCJpc0V4cGlyZWQiLCJyZWZyZXNoIiwib2xkVG9rZW4iLCJ0b2tlbkFwaUhvc3QiLCJhY2Nlc3NfdG9rZW4iLCJleHBpcmVzX2luIiwicmVmcmVzaF90b2tlbiIsInJlcXVlc3RTdHNUb2tlbiIsImV4cGlyZXNJblNlYyIsIm1hbmFnZXIiLCJ0b0pTT04iLCJhc3NlcnRTdHJpbmdPclVuZGVmaW5lZCIsIm9wdCIsInByb2FjdGl2ZVJlZnJlc2giLCJyZWxvYWRVc2VySW5mbyIsInJlbG9hZExpc3RlbmVyIiwiZ2V0VG9rZW4iLCJfcGVyc2lzdFVzZXJJZkN1cnJlbnQiLCJfbm90aWZ5TGlzdGVuZXJzSWZDdXJyZW50IiwidXNlckludGVybmFsIiwiY2xhaW1zIiwic2lnbkluUHJvdmlkZXIiLCJhdXRoVGltZSIsImlzc3VlZEF0VGltZSIsInNpZ25JblNlY29uZEZhY3RvciIsImdldElkVG9rZW5SZXN1bHQiLCJyZWxvYWQiLCJ1c2VySW5mbyIsIl9jb3B5IiwiX2Fzc2lnbiIsIl9jbG9uZSIsIl9zdGFydCIsIl9zdG9wIiwidG9rZW5zUmVmcmVzaGVkIiwidXBkYXRlRnJvbVNlcnZlclJlc3BvbnNlIiwiZGVsZXRlQWNjb3VudCIsImNsZWFyUmVmcmVzaFRva2VuIiwiX3JlZGlyZWN0RXZlbnRJZCIsIl9iIiwiX2MiLCJfZCIsIl9lIiwiX2YiLCJfZyIsIl9oIiwicGxhaW5PYmplY3RUb2tlbk1hbmFnZXIiLCJmcm9tSlNPTiIsImlkVG9rZW5SZXNwb25zZSIsIkluTWVtb3J5UGVyc2lzdGVuY2UiLCJzdG9yYWdlIiwiX2tleSIsIl9saXN0ZW5lciIsImluTWVtb3J5UGVyc2lzdGVuY2UiLCJfcGVyc2lzdGVuY2VLZXlOYW1lIiwiUGVyc2lzdGVuY2VVc2VyTWFuYWdlciIsInBlcnNpc3RlbmNlIiwidXNlcktleSIsImZ1bGxVc2VyS2V5IiwiZnVsbFBlcnNpc3RlbmNlS2V5IiwiYm91bmRFdmVudEhhbmRsZXIiLCJfb25TdG9yYWdlRXZlbnQiLCJfYWRkTGlzdGVuZXIiLCJfc2V0IiwiYmxvYiIsIl9nZXQiLCJfZnJvbUpTT04iLCJfcmVtb3ZlIiwibmV3UGVyc2lzdGVuY2UiLCJnZXRDdXJyZW50VXNlciIsInJlbW92ZUN1cnJlbnRVc2VyIiwic2V0Q3VycmVudFVzZXIiLCJfcmVtb3ZlTGlzdGVuZXIiLCJwZXJzaXN0ZW5jZUhpZXJhcmNoeSIsImF2YWlsYWJsZVBlcnNpc3RlbmNlcyIsImFsbCIsIl9pc0F2YWlsYWJsZSIsInNlbGVjdGVkUGVyc2lzdGVuY2UiLCJ1c2VyVG9NaWdyYXRlIiwibWlncmF0aW9uSGllcmFyY2h5IiwiX3Nob3VsZEFsbG93TWlncmF0aW9uIiwiX2dldEJyb3dzZXJOYW1lIiwiX2lzSUVNb2JpbGUiLCJfaXNGaXJlZm94IiwiX2lzQmxhY2tCZXJyeSIsIl9pc1dlYk9TIiwiX2lzU2FmYXJpIiwiX2lzQ2hyb21lSU9TIiwiX2lzQW5kcm9pZCIsInJlIiwibWF0Y2hlcyIsIm1hdGNoIiwiX2lzSU9TIiwiX2lzTW9iaWxlQnJvd3NlciIsIl9nZXRDbGllbnRWZXJzaW9uIiwiY2xpZW50UGxhdGZvcm0iLCJmcmFtZXdvcmtzIiwicmVwb3J0ZWRQbGF0Zm9ybSIsInJlcG9ydGVkRnJhbWV3b3JrcyIsImFwcCIsImVtdWxhdG9yQ29uZmlnIiwib3BlcmF0aW9ucyIsImF1dGhTdGF0ZVN1YnNjcmlwdGlvbiIsImlkVG9rZW5TdWJzY3JpcHRpb24iLCJyZWRpcmVjdFVzZXIiLCJpc1Byb2FjdGl2ZVJlZnJlc2hFbmFibGVkIiwiX2lzSW5pdGlhbGl6ZWQiLCJfZGVsZXRlZCIsIl9pbml0aWFsaXphdGlvblByb21pc2UiLCJfcG9wdXBSZWRpcmVjdFJlc29sdmVyIiwibGFzdE5vdGlmaWVkVWlkIiwic2V0dGluZ3MiLCJhcHBWZXJpZmljYXRpb25EaXNhYmxlZEZvclRlc3RpbmciLCJjbGllbnRWZXJzaW9uIiwic2RrQ2xpZW50VmVyc2lvbiIsInBvcHVwUmVkaXJlY3RSZXNvbHZlciIsInF1ZXVlIiwicGVyc2lzdGVuY2VNYW5hZ2VyIiwiX3Nob3VsZEluaXRQcm9hY3RpdmVseSIsIl9pbml0aWFsaXplIiwiaW5pdGlhbGl6ZUN1cnJlbnRVc2VyIiwiYXNzZXJ0ZWRQZXJzaXN0ZW5jZSIsIl9jdXJyZW50VXNlciIsIl91cGRhdGVDdXJyZW50VXNlciIsInN0b3JlZFVzZXIiLCJhdXRoRG9tYWluIiwiZ2V0T3JJbml0UmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIiLCJyZWRpcmVjdFVzZXJFdmVudElkIiwic3RvcmVkVXNlckV2ZW50SWQiLCJyZXN1bHQiLCJ0cnlSZWRpcmVjdFNpZ25JbiIsImRpcmVjdGx5U2V0Q3VycmVudFVzZXIiLCJyZWxvYWRBbmRTZXRDdXJyZW50VXNlck9yQ2xlYXIiLCJyZWRpcmVjdFJlc29sdmVyIiwiX2NvbXBsZXRlUmVkaXJlY3RGbiIsIl9zZXRSZWRpcmVjdFVzZXIiLCJuYXZpZ2F0b3JMYW5ndWFnZSIsImxhbmd1YWdlcyIsImxhbmd1YWdlIiwiX2dldFVzZXJMYW5ndWFnZSIsInVzZXJFeHRlcm4iLCJub3RpZnlBdXRoTGlzdGVuZXJzIiwicmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIiLCJzZXRQZXJzaXN0ZW5jZSIsImNvbXBsZXRlZCIsInJlZ2lzdGVyU3RhdGVMaXN0ZW5lciIsInJlZGlyZWN0TWFuYWdlciIsInJlc29sdmVyIiwiX3JlZGlyZWN0UGVyc2lzdGVuY2UiLCJfc3RhcnRQcm9hY3RpdmVSZWZyZXNoIiwiX3N0b3BQcm9hY3RpdmVSZWZyZXNoIiwiY3VycmVudFVpZCIsInN1YnNjcmlwdGlvbiIsImNiIiwiYWRkT2JzZXJ2ZXIiLCJhY3Rpb24iLCJmcmFtZXdvcmsiLCJzb3J0IiwiX2dldEZyYW1ld29ya3MiLCJvcHRpb25zIiwiYXBwSWQiLCJfY2FzdEF1dGgiLCJjb25uZWN0QXV0aEVtdWxhdG9yIiwiYXV0aEludGVybmFsIiwiZGlzYWJsZVdhcm5pbmdzIiwiZXh0cmFjdFByb3RvY29sIiwicG9ydCIsImF1dGhvcml0eSIsImV4ZWMiLCJzdWJzdHIiLCJob3N0QW5kUG9ydCIsInBvcCIsImJyYWNrZXRlZElQdjYiLCJwYXJzZVBvcnQiLCJleHRyYWN0SG9zdEFuZFBvcnQiLCJwb3J0U3RyIiwiZnJlZXplIiwiYXR0YWNoQmFubmVyIiwiZWwiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzdHkiLCJzdHlsZSIsImlubmVyVGV4dCIsInBvc2l0aW9uIiwid2lkdGgiLCJiYWNrZ3JvdW5kQ29sb3IiLCJib3JkZXIiLCJjb2xvciIsImJvdHRvbSIsImxlZnQiLCJtYXJnaW4iLCJ6SW5kZXgiLCJ0ZXh0QWxpZ24iLCJjbGFzc0xpc3QiLCJhZGQiLCJhcHBlbmRDaGlsZCIsImluZm8iLCJyZWFkeVN0YXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImVtaXRFbXVsYXRvcldhcm5pbmciLCJwcm90b2NvbEVuZCIsIkF1dGhDcmVkZW50aWFsIiwic2lnbkluTWV0aG9kIiwiX2F1dGgiLCJfaWRUb2tlbiIsInJlc2V0UGFzc3dvcmQiLCJ1cGRhdGVFbWFpbFBhc3N3b3JkIiwic2VuZE9vYkNvZGUiLCJFbWFpbEF1dGhDcmVkZW50aWFsIiwiX2VtYWlsIiwiX3Bhc3N3b3JkIiwiX3RlbmFudElkIiwicGFzc3dvcmQiLCJvb2JDb2RlIiwiX2Zyb21FbWFpbEFuZFBhc3N3b3JkIiwiX2Zyb21FbWFpbEFuZENvZGUiLCJzaWduSW5XaXRoUGFzc3dvcmQiLCJyZXR1cm5TZWN1cmVUb2tlbiIsInNpZ25JbldpdGhFbWFpbExpbmskMSIsInNpZ25JbldpdGhFbWFpbExpbmtGb3JMaW5raW5nIiwiX2dldElkVG9rZW5SZXNwb25zZSIsInNpZ25JbldpdGhJZHAiLCJhcmd1bWVudHMiLCJwZW5kaW5nVG9rZW4iLCJjcmVkIiwibm9uY2UiLCJvYXV0aFRva2VuIiwib2F1dGhUb2tlblNlY3JldCIsInNlY3JldCIsImJ1aWxkUmVxdWVzdCIsImF1dG9DcmVhdGUiLCJyZXF1ZXN0VXJpIiwicG9zdEJvZHkiLCJWRVJJRllfUEhPTkVfTlVNQkVSX0ZPUl9FWElTVElOR19FUlJPUl9NQVBfIiwiUGhvbmVBdXRoQ3JlZGVudGlhbCIsInZlcmlmaWNhdGlvbklkIiwidmVyaWZpY2F0aW9uQ29kZSIsInRlbXBvcmFyeVByb29mIiwic2lnbkluV2l0aFBob25lTnVtYmVyJDEiLCJfbWFrZVZlcmlmaWNhdGlvblJlcXVlc3QiLCJsaW5rV2l0aFBob25lTnVtYmVyJDEiLCJvcGVyYXRpb24iLCJ2ZXJpZnlQaG9uZU51bWJlckZvckV4aXN0aW5nIiwic2Vzc2lvbkluZm8iLCJhY3Rpb25MaW5rIiwic2VhcmNoUGFyYW1zIiwicGFyc2VNb2RlIiwiY29udGludWVVcmwiLCJsaW5rIiwiZG91YmxlRGVlcExpbmsiLCJpT1NEZWVwTGluayIsInBhcnNlRGVlcExpbmsiLCJFbWFpbEF1dGhQcm92aWRlciIsIlBST1ZJREVSX0lEIiwiZW1haWxMaW5rIiwiYWN0aW9uQ29kZVVybCIsInBhcnNlTGluayIsIkVNQUlMX1BBU1NXT1JEX1NJR05fSU5fTUVUSE9EIiwiRU1BSUxfTElOS19TSUdOX0lOX01FVEhPRCIsIkZlZGVyYXRlZEF1dGhQcm92aWRlciIsImRlZmF1bHRMYW5ndWFnZUNvZGUiLCJjdXN0b21QYXJhbWV0ZXJzIiwiY3VzdG9tT0F1dGhQYXJhbWV0ZXJzIiwiQmFzZU9BdXRoUHJvdmlkZXIiLCJzY29wZXMiLCJzY29wZSIsIk9BdXRoUHJvdmlkZXIiLCJfZnJvbVBhcmFtcyIsIl9jcmVkZW50aWFsIiwicmF3Tm9uY2UiLCJ1c2VyQ3JlZGVudGlhbCIsIm9hdXRoQ3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QiLCJ0b2tlblJlc3BvbnNlIiwib2F1dGhJZFRva2VuIiwib2F1dGhBY2Nlc3NUb2tlbiIsIkZhY2Vib29rQXV0aFByb3ZpZGVyIiwiRkFDRUJPT0tfU0lHTl9JTl9NRVRIT0QiLCJjcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCIsImNyZWRlbnRpYWwiLCJHb29nbGVBdXRoUHJvdmlkZXIiLCJhZGRTY29wZSIsIkdPT0dMRV9TSUdOX0lOX01FVEhPRCIsIkdpdGh1YkF1dGhQcm92aWRlciIsIkdJVEhVQl9TSUdOX0lOX01FVEhPRCIsIlNBTUxBdXRoQ3JlZGVudGlhbCIsIlNBTUxBdXRoUHJvdmlkZXIiLCJzYW1sQ3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QiLCJfY3JlYXRlIiwiVHdpdHRlckF1dGhQcm92aWRlciIsIlRXSVRURVJfU0lHTl9JTl9NRVRIT0QiLCJzaWduVXAiLCJVc2VyQ3JlZGVudGlhbEltcGwiLCJvcGVyYXRpb25UeXBlIiwiX2Zyb21JZFRva2VuUmVzcG9uc2UiLCJwcm92aWRlcklkRm9yUmVzcG9uc2UiLCJfdXBkYXRlVG9rZW5zSWZOZWNlc3NhcnkiLCJzaWduSW5Bbm9ueW1vdXNseSIsIl9wcm9jZXNzQ3JlZGVudGlhbFNhdmluZ01mYUNvbnRleHRJZk5lY2Vzc2FyeSIsIl9nZXRSZWF1dGhlbnRpY2F0aW9uUmVzb2x2ZXIiLCJfZnJvbUVycm9yQW5kT3BlcmF0aW9uIiwicHJvdmlkZXJEYXRhQXNOYW1lcyIsIlNldCIsInBpZCIsInVubGluayIsIl9hc3NlcnRMaW5rZWRTdGF0dXMiLCJkZWxldGVMaW5rZWRBY2NvdW50cyIsImRlbGV0ZVByb3ZpZGVyIiwicHJvdmlkZXJzTGVmdCIsInBkIiwiaGFzIiwiX2xpbmskMSIsIl9saW5rVG9JZFRva2VuIiwiX2Zvck9wZXJhdGlvbiIsImV4cGVjdGVkIiwiX3JlYXV0aGVudGljYXRlIiwicGFyc2VkIiwiX3NpZ25JbldpdGhDcmVkZW50aWFsIiwic2lnbkluV2l0aENyZWRlbnRpYWwiLCJsaW5rV2l0aENyZWRlbnRpYWwiLCJyZWF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFsIiwic2lnbkluV2l0aEN1c3RvbVRva2VuIiwiY3VzdG9tVG9rZW4iLCJzaWduSW5XaXRoQ3VzdG9tVG9rZW4kMSIsIk11bHRpRmFjdG9ySW5mb0ltcGwiLCJmYWN0b3JJZCIsIm1mYUVucm9sbG1lbnRJZCIsImVucm9sbG1lbnRUaW1lIiwiZW5yb2xsZWRBdCIsImVucm9sbG1lbnQiLCJQaG9uZU11bHRpRmFjdG9ySW5mbyIsIl9mcm9tU2VydmVyUmVzcG9uc2UiLCJwaG9uZUluZm8iLCJfc2V0QWN0aW9uQ29kZVNldHRpbmdzT25SZXF1ZXN0IiwiYWN0aW9uQ29kZVNldHRpbmdzIiwiZHluYW1pY0xpbmtEb21haW4iLCJjYW5IYW5kbGVDb2RlSW5BcHAiLCJoYW5kbGVDb2RlSW5BcHAiLCJpT1MiLCJidW5kbGVJZCIsImlPU0J1bmRsZUlkIiwiYW5kcm9pZCIsInBhY2thZ2VOYW1lIiwiYW5kcm9pZEluc3RhbGxBcHAiLCJpbnN0YWxsQXBwIiwiYW5kcm9pZE1pbmltdW1WZXJzaW9uQ29kZSIsIm1pbmltdW1WZXJzaW9uIiwiYW5kcm9pZFBhY2thZ2VOYW1lIiwic2VuZFBhc3N3b3JkUmVzZXRFbWFpbCIsImF1dGhNb2R1bGFyIiwicmVxdWVzdFR5cGUiLCJzZW5kUGFzc3dvcmRSZXNldEVtYWlsJDEiLCJjb25maXJtUGFzc3dvcmRSZXNldCIsIm5ld1Bhc3N3b3JkIiwiYXBwbHlBY3Rpb25Db2RlIiwiYXBwbHlBY3Rpb25Db2RlJDEiLCJjaGVja0FjdGlvbkNvZGUiLCJuZXdFbWFpbCIsIm1mYUluZm8iLCJtdWx0aUZhY3RvckluZm8iLCJwcmV2aW91c0VtYWlsIiwidmVyaWZ5UGFzc3dvcmRSZXNldENvZGUiLCJjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQiLCJzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZCIsInNlbmRTaWduSW5MaW5rVG9FbWFpbCIsInNlbmRTaWduSW5MaW5rVG9FbWFpbCQxIiwiaXNTaWduSW5XaXRoRW1haWxMaW5rIiwic2lnbkluV2l0aEVtYWlsTGluayIsImNyZWRlbnRpYWxXaXRoTGluayIsImZldGNoU2lnbkluTWV0aG9kc0ZvckVtYWlsIiwiaWRlbnRpZmllciIsImNvbnRpbnVlVXJpIiwic2lnbmluTWV0aG9kcyIsImNyZWF0ZUF1dGhVcmkiLCJzZW5kRW1haWxWZXJpZmljYXRpb24iLCJzZW5kRW1haWxWZXJpZmljYXRpb24kMSIsInZlcmlmeUJlZm9yZVVwZGF0ZUVtYWlsIiwidmVyaWZ5QW5kQ2hhbmdlRW1haWwiLCJ1cGRhdGVQcm9maWxlIiwicHJvZmlsZVJlcXVlc3QiLCJ1cGRhdGVQcm9maWxlJDEiLCJwYXNzd29yZFByb3ZpZGVyIiwiZmluZCIsInVwZGF0ZUVtYWlsIiwidXBkYXRlRW1haWxPclBhc3N3b3JkIiwidXBkYXRlUGFzc3dvcmQiLCJHZW5lcmljQWRkaXRpb25hbFVzZXJJbmZvIiwiaXNOZXdVc2VyIiwicHJvZmlsZSIsIkZlZGVyYXRlZEFkZGl0aW9uYWxVc2VySW5mb1dpdGhVc2VybmFtZSIsInVzZXJuYW1lIiwiRmFjZWJvb2tBZGRpdGlvbmFsVXNlckluZm8iLCJHaXRodWJBZGRpdGlvbmFsVXNlckluZm8iLCJsb2dpbiIsIkdvb2dsZUFkZGl0aW9uYWxVc2VySW5mbyIsIlR3aXR0ZXJBZGRpdGlvbmFsVXNlckluZm8iLCJzY3JlZW5OYW1lIiwiZ2V0QWRkaXRpb25hbFVzZXJJbmZvIiwicmF3VXNlckluZm8iLCJraW5kIiwiTXVsdGlGYWN0b3JTZXNzaW9uSW1wbCIsIm1mYVBlbmRpbmdDcmVkZW50aWFsIiwibXVsdGlGYWN0b3JTZXNzaW9uIiwicGVuZGluZ0NyZWRlbnRpYWwiLCJfZnJvbU1mYVBlbmRpbmdDcmVkZW50aWFsIiwiX2Zyb21JZHRva2VuIiwiTXVsdGlGYWN0b3JSZXNvbHZlckltcGwiLCJzZXNzaW9uIiwiaGludHMiLCJzaWduSW5SZXNvbHZlciIsImF1dGhFeHRlcm4iLCJtZmFSZXNwb25zZSIsIl9wcm9jZXNzIiwiYXNzZXJ0aW9uRXh0ZXJuIiwiZ2V0TXVsdGlGYWN0b3JSZXNvbHZlciIsImVycm9ySW50ZXJuYWwiLCJfZnJvbUVycm9yIiwiTXVsdGlGYWN0b3JVc2VySW1wbCIsImVucm9sbGVkRmFjdG9ycyIsIl9vblJlbG9hZCIsImdldFNlc3Npb24iLCJmaW5hbGl6ZU1mYVJlc3BvbnNlIiwiaW5mb09yVWlkIiwibXVsdGlGYWN0b3JVc2VyQ2FjaGUiLCJXZWFrTWFwIiwibXVsdGlGYWN0b3IiLCJ1c2VyTW9kdWxhciIsIl9mcm9tVXNlciIsIkJyb3dzZXJQZXJzaXN0ZW5jZUNsYXNzIiwic3RvcmFnZVJldHJpZXZlciIsInNldEl0ZW0iLCJyZW1vdmVJdGVtIiwiZ2V0SXRlbSIsIkJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlIiwibG9jYWxTdG9yYWdlIiwiZXZlbnQiLCJwb2xsIiwib25TdG9yYWdlRXZlbnQiLCJsaXN0ZW5lcnMiLCJsb2NhbENhY2hlIiwicG9sbFRpbWVyIiwic2FmYXJpTG9jYWxTdG9yYWdlTm90U3luY2VkIiwiX2lmcmFtZUNhbm5vdFN5bmNXZWJTdG9yYWdlIiwidG9wIiwiX2lzSWZyYW1lIiwiZmFsbGJhY2tUb1BvbGxpbmciLCJuZXdWYWx1ZSIsIm9sZFZhbHVlIiwiZm9yQWxsQ2hhbmdlZEtleXMiLCJfb2xkVmFsdWUiLCJub3RpZnlMaXN0ZW5lcnMiLCJkZXRhY2hMaXN0ZW5lciIsInN0b3BQb2xsaW5nIiwic3RvcmVkVmFsdWUiLCJ0cmlnZ2VyTGlzdGVuZXJzIiwiZG9jdW1lbnRNb2RlIiwibGlzdGVuZXIiLCJmcm9tIiwic2V0SW50ZXJ2YWwiLCJTdG9yYWdlRXZlbnQiLCJjbGVhckludGVydmFsIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInN0YXJ0UG9sbGluZyIsImF0dGFjaExpc3RlbmVyIiwiZGVsZXRlIiwic2l6ZSIsImJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlIiwiQnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZSIsInNlc3Npb25TdG9yYWdlIiwiYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZSIsIlJlY2VpdmVyIiwiZXZlbnRUYXJnZXQiLCJoYW5kbGVyc01hcCIsImhhbmRsZUV2ZW50IiwiZXhpc3RpbmdJbnN0YW5jZSIsInJlY2VpdmVycyIsInJlY2VpdmVyIiwiaXNMaXN0ZW5pbmd0byIsIm5ld0luc3RhbmNlIiwibWVzc2FnZUV2ZW50IiwiZXZlbnRJZCIsImV2ZW50VHlwZSIsImhhbmRsZXJzIiwicG9ydHMiLCJwb3N0TWVzc2FnZSIsInN0YXR1cyIsInByb21pc2VzIiwiaGFuZGxlciIsIm9yaWdpbiIsImZ1bGZpbGxlZCIsInJlYXNvbiIsIl9hbGxTZXR0bGVkIiwiZXZlbnRIYW5kbGVyIiwiX2dlbmVyYXRlRXZlbnRJZCIsInByZWZpeCIsImRpZ2l0cyIsInJhbmRvbSIsImZsb29yIiwiU2VuZGVyIiwibWVzc2FnZUNoYW5uZWwiLCJwb3J0MSIsIm9uTWVzc2FnZSIsInRpbWVvdXQiLCJNZXNzYWdlQ2hhbm5lbCIsImNvbXBsZXRpb25UaW1lciIsInN0YXJ0IiwiYWNrVGltZXIiLCJwb3J0MiIsImZpbmFsbHkiLCJyZW1vdmVNZXNzYWdlSGFuZGxlciIsIl93aW5kb3ciLCJfaXNXb3JrZXIiLCJEQl9OQU1FIiwiREJQcm9taXNlIiwiZ2V0T2JqZWN0U3RvcmUiLCJkYiIsImlzUmVhZFdyaXRlIiwidHJhbnNhY3Rpb24iLCJvYmplY3RTdG9yZSIsIl9vcGVuRGF0YWJhc2UiLCJvcGVuIiwiY3JlYXRlT2JqZWN0U3RvcmUiLCJrZXlQYXRoIiwib2JqZWN0U3RvcmVOYW1lcyIsImRlbGV0ZURhdGFiYXNlIiwidG9Qcm9taXNlIiwiX2RlbGV0ZURhdGFiYXNlIiwiX3B1dE9iamVjdCIsInB1dCIsIl9kZWxldGVPYmplY3QiLCJJbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlIiwicGVuZGluZ1dyaXRlcyIsInNlbmRlciIsInNlcnZpY2VXb3JrZXJSZWNlaXZlckF2YWlsYWJsZSIsImFjdGl2ZVNlcnZpY2VXb3JrZXIiLCJfd29ya2VySW5pdGlhbGl6YXRpb25Qcm9taXNlIiwiaW5pdGlhbGl6ZVNlcnZpY2VXb3JrZXJNZXNzYWdpbmciLCJvcCIsIm51bUF0dGVtcHRzIiwiX29wZW5EYiIsImluaXRpYWxpemVSZWNlaXZlciIsImluaXRpYWxpemVTZW5kZXIiLCJfc3Vic2NyaWJlIiwiX29yaWdpbiIsImtleVByb2Nlc3NlZCIsIl9wb2xsIiwiX2RhdGEiLCJzZXJ2aWNlV29ya2VyIiwicmVhZHkiLCJhY3RpdmUiLCJfZ2V0QWN0aXZlU2VydmljZVdvcmtlciIsInJlc3VsdHMiLCJfc2VuZCIsImNvbnRyb2xsZXIiLCJ3cml0ZSIsIl93aXRoUGVuZGluZ1dyaXRlIiwiX3dpdGhSZXRyaWVzIiwibm90aWZ5U2VydmljZVdvcmtlciIsImdldE9iamVjdCIsImdldEFsbFJlcXVlc3QiLCJnZXRBbGwiLCJrZXlzSW5SZXN1bHQiLCJmYmFzZV9rZXkiLCJsb2NhbEtleSIsImluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2UiLCJfbG9hZEpTIiwic2V0QXR0cmlidXRlIiwib25sb2FkIiwib25lcnJvciIsImNoYXJzZXQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsIl9nZW5lcmF0ZUNhbGxiYWNrTmFtZSIsIk1vY2tSZUNhcHRjaGEiLCJjb3VudGVyIiwiX3dpZGdldHMiLCJjb250YWluZXIiLCJwYXJhbWV0ZXJzIiwiTW9ja1dpZGdldCIsIm9wdFdpZGdldElkIiwiZ2V0UmVzcG9uc2UiLCJleGVjdXRlIiwiY29udGFpbmVyT3JJZCIsImRlbGV0ZWQiLCJyZXNwb25zZVRva2VuIiwiY2xpY2tIYW5kbGVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJpc1Zpc2libGUiLCJjaGVja0lmRGVsZXRlZCIsImxlbiIsImNoYXJzIiwiYWxsb3dlZENoYXJzIiwiZ2VuZXJhdGVSYW5kb21BbHBoYU51bWVyaWNTdHJpbmciLCJleHBpcmVkQ2FsbGJhY2siLCJfSlNMT0FEX0NBTExCQUNLIiwiTkVUV09SS19USU1FT1VUX0RFTEFZIiwiaG9zdExhbmd1YWdlIiwibGlicmFyeVNlcGFyYXRlbHlMb2FkZWQiLCJncmVjYXB0Y2hhIiwiaGwiLCJpc0hvc3RMYW5ndWFnZVZhbGlkIiwic2hvdWxkUmVzb2x2ZUltbWVkaWF0ZWx5IiwicmVjYXB0Y2hhIiwicmVuZGVyIiwid2lkZ2V0SWQiLCJNb2NrUmVDYXB0Y2hhTG9hZGVySW1wbCIsIkRFRkFVTFRfUEFSQU1TIiwidGhlbWUiLCJSZWNhcHRjaGFWZXJpZmllciIsImRlc3Ryb3llZCIsInRva2VuQ2hhbmdlTGlzdGVuZXJzIiwicmVuZGVyUHJvbWlzZSIsImlzSW52aXNpYmxlIiwibWFrZVRva2VuQ2FsbGJhY2siLCJfcmVjYXB0Y2hhTG9hZGVyIiwidmFsaWRhdGVTdGFydGluZ1N0YXRlIiwiYXNzZXJ0Tm90RGVzdHJveWVkIiwiZ2V0QXNzZXJ0ZWRSZWNhcHRjaGEiLCJ0b2tlbkNoYW5nZSIsIm1ha2VSZW5kZXJQcm9taXNlIiwicmVzZXQiLCJjbGVhcmVkT25lSW5zdGFuY2UiLCJjaGlsZE5vZGVzIiwibm9kZSIsInJlbW92ZUNoaWxkIiwic2l0ZWtleSIsImhhc0NoaWxkTm9kZXMiLCJleGlzdGluZyIsImdsb2JhbEZ1bmMiLCJpbml0IiwiZ3VhcmFudGVlZEVtcHR5IiwiZG9tUmVhZHkiLCJsb2FkIiwic2l0ZUtleSIsInJlY2FwdGNoYVNpdGVLZXkiLCJnZXRSZWNhcHRjaGFQYXJhbXMiLCJDb25maXJtYXRpb25SZXN1bHRJbXBsIiwib25Db25maXJtYXRpb24iLCJhdXRoQ3JlZGVudGlhbCIsIl9mcm9tVmVyaWZpY2F0aW9uIiwic2lnbkluV2l0aFBob25lTnVtYmVyIiwiYXBwVmVyaWZpZXIiLCJfdmVyaWZ5UGhvbmVOdW1iZXIiLCJsaW5rV2l0aFBob25lTnVtYmVyIiwicmVhdXRoZW50aWNhdGVXaXRoUGhvbmVOdW1iZXIiLCJ2ZXJpZmllciIsInJlY2FwdGNoYVRva2VuIiwidmVyaWZ5IiwicGhvbmVJbmZvT3B0aW9ucyIsInN0YXJ0RW5yb2xsUGhvbmVNZmEiLCJwaG9uZUVucm9sbG1lbnRJbmZvIiwicGhvbmVTZXNzaW9uSW5mbyIsIm11bHRpRmFjdG9ySGludCIsIm11bHRpRmFjdG9yVWlkIiwic3RhcnRTaWduSW5QaG9uZU1mYSIsInBob25lU2lnbkluSW5mbyIsInBob25lUmVzcG9uc2VJbmZvIiwic2VuZFBob25lVmVyaWZpY2F0aW9uQ29kZSIsIl9yZXNldCIsInVwZGF0ZVBob25lTnVtYmVyIiwicGhvbmVPcHRpb25zIiwiYXBwbGljYXRpb25WZXJpZmllciIsIl9mcm9tVG9rZW5SZXNwb25zZSIsIl93aXRoRGVmYXVsdFJlc29sdmVyIiwicmVzb2x2ZXJPdmVycmlkZSIsIlBIT05FX1NJR05fSU5fTUVUSE9EIiwiSWRwQ3JlZGVudGlhbCIsIl9idWlsZElkcFJlcXVlc3QiLCJzZXNzaW9uSWQiLCJyZXR1cm5JZHBDcmVkZW50aWFsIiwiX3NpZ25JbiIsIl9yZWF1dGgiLCJfbGluayIsIkFic3RyYWN0UG9wdXBSZWRpcmVjdE9wZXJhdGlvbiIsInBlbmRpbmdQcm9taXNlIiwiZXZlbnRNYW5hZ2VyIiwib25FeGVjdXRpb24iLCJyZWdpc3RlckNvbnN1bWVyIiwidXJsUmVzcG9uc2UiLCJnZXRJZHBUYXNrIiwidW5yZWdpc3RlckFuZENsZWFuVXAiLCJ1bnJlZ2lzdGVyQ29uc3VtZXIiLCJjbGVhblVwIiwiX1BPTExfV0lORE9XX0NMT1NFX1RJTUVPVVQiLCJzaWduSW5XaXRoUG9wdXAiLCJyZXNvbHZlckludGVybmFsIiwiUG9wdXBPcGVyYXRpb24iLCJleGVjdXRlTm90TnVsbCIsInJlYXV0aGVudGljYXRlV2l0aFBvcHVwIiwibGlua1dpdGhQb3B1cCIsImF1dGhXaW5kb3ciLCJwb2xsSWQiLCJjdXJyZW50UG9wdXBBY3Rpb24iLCJjYW5jZWwiLCJfb3BlblBvcHVwIiwiYXNzb2NpYXRlZEV2ZW50IiwiX29yaWdpblZhbGlkYXRpb24iLCJfaXNJZnJhbWVXZWJTdG9yYWdlU3VwcG9ydGVkIiwiaXNTdXBwb3J0ZWQiLCJwb2xsVXNlckNhbmNlbGxhdGlvbiIsImNsb3NlZCIsInJlZGlyZWN0T3V0Y29tZU1hcCIsIlJlZGlyZWN0QWN0aW9uIiwicmVhZHlPdXRjb21lIiwicGVuZGluZ1JlZGlyZWN0S2V5IiwicmVzb2x2ZXJQZXJzaXN0ZW5jZSIsImhhc1BlbmRpbmdSZWRpcmVjdCIsIl9nZXRBbmRDbGVhclBlbmRpbmdSZWRpcmVjdFN0YXR1cyIsIm9uQXV0aEV2ZW50IiwiX3JlZGlyZWN0VXNlckZvcklkIiwiX3NldFBlbmRpbmdSZWRpcmVjdFN0YXR1cyIsInNpZ25JbldpdGhSZWRpcmVjdCIsIl9vcGVuUmVkaXJlY3QiLCJfc2lnbkluV2l0aFJlZGlyZWN0IiwicmVhdXRoZW50aWNhdGVXaXRoUmVkaXJlY3QiLCJwcmVwYXJlVXNlckZvclJlZGlyZWN0IiwiX3JlYXV0aGVudGljYXRlV2l0aFJlZGlyZWN0IiwibGlua1dpdGhSZWRpcmVjdCIsIl9saW5rV2l0aFJlZGlyZWN0IiwiZ2V0UmVkaXJlY3RSZXN1bHQiLCJfZ2V0UmVkaXJlY3RSZXN1bHQiLCJyZXNvbHZlckV4dGVybiIsIkF1dGhFdmVudE1hbmFnZXIiLCJjYWNoZWRFdmVudFVpZHMiLCJjb25zdW1lcnMiLCJxdWV1ZWRSZWRpcmVjdEV2ZW50IiwiaGFzSGFuZGxlZFBvdGVudGlhbFJlZGlyZWN0IiwibGFzdFByb2Nlc3NlZEV2ZW50VGltZSIsImF1dGhFdmVudENvbnN1bWVyIiwiaXNFdmVudEZvckNvbnN1bWVyIiwic2VuZFRvQ29uc3VtZXIiLCJzYXZlRXZlbnRUb0NhY2hlIiwiaGFzRXZlbnRCZWVuSGFuZGxlZCIsImhhbmRsZWQiLCJjb25zdW1lciIsImlzTnVsbFJlZGlyZWN0RXZlbnQiLCJpc1JlZGlyZWN0RXZlbnQiLCJvbkVycm9yIiwiZXZlbnRJZE1hdGNoZXMiLCJjbGVhciIsImV2ZW50VWlkIiwidiIsIl9nZXRQcm9qZWN0Q29uZmlnIiwiSVBfQUREUkVTU19SRUdFWCIsIkhUVFBfUkVHRVgiLCJtYXRjaERvbWFpbiIsImN1cnJlbnRVcmwiLCJob3N0bmFtZSIsIlVSTCIsImNlVXJsIiwiZXNjYXBlZERvbWFpblBhdHRlcm4iLCJSZWdFeHAiLCJORVRXT1JLX1RJTUVPVVQiLCJyZXNldFVubG9hZGVkR2FwaU1vZHVsZXMiLCJiZWFjb24iLCJfX19qc2wiLCJIIiwiaGludCIsIkwiLCJDUCIsImNhY2hlZEdBcGlMb2FkZXIiLCJfbG9hZEdhcGkiLCJsb2FkR2FwaUlmcmFtZSIsImdhcGkiLCJpZnJhbWVzIiwiZ2V0Q29udGV4dCIsIm9udGltZW91dCIsIklmcmFtZSIsImNiTmFtZSIsImxvYWRHYXBpIiwiUElOR19USU1FT1VUIiwiSUZSQU1FX0FUVFJJQlVURVMiLCJoZWlnaHQiLCJ0YWJpbmRleCIsIkVJRF9GUk9NX0FQSUhPU1QiLCJnZXRJZnJhbWVVcmwiLCJlaWQiLCJmdyIsIkJBU0VfUE9QVVBfT1BUSU9OUyIsInJlc2l6YWJsZSIsInN0YXR1c2JhciIsInRvb2xiYXIiLCJBdXRoUG9wdXAiLCJfb3BlbiIsInNjcmVlbiIsImF2YWlsSGVpZ2h0IiwiYXZhaWxXaWR0aCIsInNjcm9sbGJhcnMiLCJvcHRpb25zU3RyaW5nIiwicmVkdWNlIiwiYWNjdW0iLCJzdGFuZGFsb25lIiwiX2lzSU9TU3RhbmRhbG9uZSIsImNsaWNrIiwiY3JlYXRlRXZlbnQiLCJpbml0TW91c2VFdmVudCIsImRpc3BhdGNoRXZlbnQiLCJvcGVuQXNOZXdXaW5kb3dJT1MiLCJuZXdXaW4iLCJmb2N1cyIsIl9nZXRSZWRpcmVjdFVybCIsImF1dGhUeXBlIiwicmVkaXJlY3RVcmwiLCJhZGRpdGlvbmFsUGFyYW1zIiwic2V0RGVmYXVsdExhbmd1YWdlIiwiZ2V0Q3VzdG9tUGFyYW1ldGVycyIsImdldFNjb3BlcyIsInRpZCIsInBhcmFtc0RpY3QiLCJnZXRIYW5kbGVyQmFzZSIsImJyb3dzZXJQb3B1cFJlZGlyZWN0UmVzb2x2ZXIiLCJldmVudE1hbmFnZXJzIiwib3JpZ2luVmFsaWRhdGlvblByb21pc2VzIiwiaW5pdEFuZEdldE1hbmFnZXIiLCJpZnJhbWUiLCJjb250ZXh0Iiwid2hlcmUiLCJtZXNzYWdlSGFuZGxlcnNGaWx0ZXIiLCJDUk9TU19PUklHSU5fSUZSQU1FU19GSUxURVIiLCJhdHRyaWJ1dGVzIiwiZG9udGNsZWFyIiwicmVzdHlsZSIsInNldEhpZGVPbkxlYXZlIiwibmV0d29ya0Vycm9yIiwibmV0d29ya0Vycm9yVGltZXIiLCJjbGVhclRpbWVyQW5kUmVzb2x2ZSIsInBpbmciLCJfb3BlbklmcmFtZSIsInJlZ2lzdGVyIiwiaWZyYW1lRXZlbnQiLCJhdXRoRXZlbnQiLCJvbkV2ZW50Iiwic2VuZCIsImF1dGhvcml6ZWREb21haW5zIiwiZG9tYWluIiwiX3ZhbGlkYXRlT3JpZ2luIiwiUGhvbmVNdWx0aUZhY3RvckFzc2VydGlvbkltcGwiLCJfZmluYWxpemVFbnJvbGwiLCJfZmluYWxpemVTaWduSW4iLCJmaW5hbGl6ZUVucm9sbFBob25lTWZhIiwicGhvbmVWZXJpZmljYXRpb25JbmZvIiwiZmluYWxpemVTaWduSW5QaG9uZU1mYSIsIlBob25lTXVsdGlGYWN0b3JHZW5lcmF0b3IiLCJfZnJvbUNyZWRlbnRpYWwiLCJGQUNUT1JfSUQiLCJBdXRoSW50ZXJvcCIsImludGVybmFsTGlzdGVuZXJzIiwiYXNzZXJ0QXV0aENvbmZpZ3VyZWQiLCJ1bnN1YnNjcmliZSIsIm9uSWRUb2tlbkNoYW5nZWQiLCJ1cGRhdGVQcm9hY3RpdmVSZWZyZXNoIiwiX2NvcmRvdmFXaW5kb3ciLCJkZXBzIiwiZ2V0UHJvdmlkZXIiLCJnZXRJbW1lZGlhdGUiLCJhdXRoSW5zdGFuY2UiLCJoaWVyYXJjaHkiLCJfdXBkYXRlRXJyb3JNYXAiLCJfaW5pdGlhbGl6ZVdpdGhQZXJzaXN0ZW5jZSIsIl9pbml0aWFsaXplQXV0aEluc3RhbmNlIiwic2V0SW5zdGFudGlhdGlvbk1vZGUiLCJzZXRJbnN0YW5jZUNyZWF0ZWRDYWxsYmFjayIsIl9pbnN0YW5jZUlkZW50aWZpZXIiLCJfaW5zdGFuY2UiLCJpbml0aWFsaXplIiwiZ2V0VmVyc2lvbkZvclBsYXRmb3JtIiwiX2dlbmVyYXRlSGFuZGxlclVybCIsIkJ1aWxkSW5mbyIsInNlc3Npb25EaWdlc3QiLCJUZXh0RW5jb2RlciIsImVuY29kZSIsImJ1ZmYiLCJBcnJheUJ1ZmZlciIsInZpZXciLCJVaW50OEFycmF5Iiwic3RyaW5nVG9BcnJheUJ1ZmZlciIsImJ1ZiIsImNyeXB0byIsInN1YnRsZSIsImRpZ2VzdCIsIm51bSIsInBhZFN0YXJ0IiwiY29tcHV0ZVNoYTI1NiIsIl9wZXJmb3JtUmVkaXJlY3QiLCJoYW5kbGVyVXJsIiwiY29yZG92YSIsInBsdWdpbnMiLCJicm93c2VydGFiIiwiaXNBdmFpbGFibGUiLCJicm93c2VyVGFiSXNBdmFpbGFibGUiLCJpYWJSZWYiLCJvcGVuVXJsIiwiSW5BcHBCcm93c2VyIiwiX2lzSU9TN09yOCIsInBhc3NpdmVMaXN0ZW5lcnMiLCJpbml0UHJvbWlzZSIsInJlc29sdmVJbmlhbGl6ZWQiLCJfZ2V0QW5kUmVtb3ZlRXZlbnQiLCJwZXJzaXN0ZW5jZUtleSIsIl9ldmVudEZyb21QYXJ0aWFsQW5kVXJsIiwicGFydGlhbEV2ZW50IiwiY2FsbGJhY2tVcmwiLCJzZWFyY2hQYXJhbXNPckVtcHR5IiwiX2dldERlZXBMaW5rRnJvbUNhbGxiYWNrIiwiZXJyb3JPYmplY3QiLCJwYXJzZUpzb25Pck51bGwiLCJnZW5lcmF0ZVNlc3Npb25JZCIsImlkeCIsImNvcmRvdmFQb3B1cFJlZGlyZWN0UmVzb2x2ZXIiLCJhdHRhY2hDYWxsYmFja0xpc3RlbmVycyIsIl9qIiwiX2siLCJ3aW4iLCJ1bml2ZXJzYWxMaW5rcyIsIm1pc3NpbmdQbHVnaW4iLCJfY2hlY2tDb3Jkb3ZhQ29uZmlndXJhdGlvbiIsImluaXRpYWxpemVkIiwicmVzZXRSZWRpcmVjdCIsIl9nZW5lcmF0ZU5ld0V2ZW50IiwiX3NhdmVQYXJ0aWFsRXZlbnQiLCJldmVudExpc3RlbmVyIiwiY2xlYW51cCIsIm9uQ2xvc2VUaW1lciIsImF1dGhFdmVudFNlZW4iLCJjbG9zZUJyb3dzZXJUYWIiLCJyZXN1bWVkIiwidmlzaWJpbGl0eUNoYW5nZWQiLCJ2aXNpYmlsaXR5U3RhdGUiLCJhZGRQYXNzaXZlTGlzdGVuZXIiLCJyZW1vdmVQYXNzaXZlTGlzdGVuZXIiLCJfd2FpdEZvckFwcFJlc3VtZSIsIl9jYiIsImlvc0J1bmRsZUlkIiwiaGFuZGxlT3BlblVSTCIsIm5vRXZlbnRUaW1lb3V0IiwiZ2VuZXJhdGVOb0V2ZW50IiwidW5pdmVyc2FsTGlua3NDYiIsImV2ZW50RGF0YSIsImZpbmFsRXZlbnQiLCJleGlzdGluZ0hhbmRsZU9wZW5VUkwiLCJwYWNrYWdlUHJlZml4IiwiYWRkRnJhbWV3b3JrRm9yTG9nZ2luZyIsIl9sb2dGcmFtZXdvcmsiLCJTIiwiRCIsImlzQXV0aGVudGljYXRlZCIsIlVOQVVUSEVOVElDQVRFRCIsIkdPT0dMRV9DUkVERU5USUFMUyIsIkZJUlNUX1BBUlRZIiwiTU9DS19VU0VSIiwiQyIsIk4iLCJ4Iiwic2V0TG9nTGV2ZWwiLCIkIiwiREVCVUciLCJNIiwiZGVidWciLCJGIiwiTyIsIldBUk4iLCJ3YXJuIiwiQiIsIlUiLCJxIiwiSyIsIk9LIiwiQ0FOQ0VMTEVEIiwiVU5LTk9XTiIsIklOVkFMSURfQVJHVU1FTlQiLCJERUFETElORV9FWENFRURFRCIsIk5PVF9GT1VORCIsIkFMUkVBRFlfRVhJU1RTIiwiUEVSTUlTU0lPTl9ERU5JRUQiLCJSRVNPVVJDRV9FWEhBVVNURUQiLCJGQUlMRURfUFJFQ09ORElUSU9OIiwiQUJPUlRFRCIsIk9VVF9PRl9SQU5HRSIsIlVOSU1QTEVNRU5URUQiLCJJTlRFUk5BTCIsIlVOQVZBSUxBQkxFIiwiREFUQV9MT1NTIiwiaiIsIlEiLCJXIiwiRyIsImVucXVldWVSZXRyeWFibGUiLCJ6IiwiY2hhbmdlTGlzdGVuZXIiLCJhZGRBdXRoVG9rZW5MaXN0ZW5lciIsIm9uSW5pdCIsIm9wdGlvbmFsIiwicmVtb3ZlQXV0aFRva2VuTGlzdGVuZXIiLCJnZXRVaWQiLCJKIiwiZ2V0QXV0aEhlYWRlclZhbHVlRm9yRmlyc3RQYXJ0eSIsIlkiLCJoIiwiWCIsIloiLCJnIiwiYXBwQ2hlY2siLCJhZGRUb2tlbkxpc3RlbmVyIiwicmVtb3ZlVG9rZW5MaXN0ZW5lciIsInR0IiwiZXQiLCJwcmV2aW91c1ZhbHVlIiwic2VxdWVuY2VOdW1iZXJIYW5kbGVyIiwiVCIsIndyaXRlU2VxdWVuY2VOdW1iZXIiLCJudCIsIm1zQ3J5cHRvIiwiZ2V0UmFuZG9tVmFsdWVzIiwiSSIsInN0IiwiaXQiLCJydCIsImV2ZXJ5Iiwib3QiLCJhdCIsIm5hbm9zZWNvbmRzIiwiZnJvbU1pbGxpcyIsInRvTWlsbGlzIiwiY3QiLCJ0aW1lc3RhbXAiLCJfY29tcGFyZVRvIiwiaXNFcXVhbCIsInV0IiwiaHQiLCJsdCIsImZ0Iiwic2VnbWVudHMiLCJvZmZzZXQiLCJjb21wYXJhdG9yIiwibGltaXQiLCJjb25zdHJ1Y3QiLCJkdCIsInRvQXJyYXkiLCJjYW5vbmljYWxTdHJpbmciLCJ3dCIsIl90IiwiaXNWYWxpZElkZW50aWZpZXIiLCJtdCIsImZpZWxkcyIsImlzUHJlZml4T2YiLCJndCIsInl0IiwiYmluYXJ5U3RyaW5nIiwiRU1QVFlfQllURV9TVFJJTkciLCJwdCIsIlR0IiwibmFub3MiLCJFdCIsIkl0IiwiZnJvbUJhc2U2NFN0cmluZyIsImZyb21VaW50OEFycmF5IiwiQXQiLCJtYXBWYWx1ZSIsIl9fdHlwZV9fIiwic3RyaW5nVmFsdWUiLCJQdCIsIl9fbG9jYWxfd3JpdGVfdGltZV9fIiwidGltZXN0YW1wVmFsdWUiLCJidCIsInZ0IiwiVnQiLCJpc0ludGVnZXIiLCJNQVhfU0FGRV9JTlRFR0VSIiwiTUlOX1NBRkVfSU5URUdFUiIsIlN0IiwiZnJvbVN0cmluZyIsInBvcEZpcnN0IiwiRHQiLCJDdCIsImJvb2xlYW5WYWx1ZSIsImJ5dGVzVmFsdWUiLCJyZWZlcmVuY2VWYWx1ZSIsImdlb1BvaW50VmFsdWUiLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsImludGVnZXJWYWx1ZSIsImRvdWJsZVZhbHVlIiwiYXJyYXlWYWx1ZSIsInZhbHVlcyIsIk50Iiwia3QiLCJ4dCIsImNvbXBhcmVUbyIsIiR0IiwiRnQiLCJ0b0Jhc2U2NCIsImZyb21OYW1lIiwiT3QiLCJkYXRhYmFzZSIsIk10IiwiTHQiLCJCdCIsIlV0IiwicXQiLCJLdCIsImp0IiwibGFzdFNlZ21lbnQiLCJnZXRGaWVsZHNNYXAiLCJwb3BMYXN0IiwiZW1wdHlQYXRoIiwiaXNJbW1lZGlhdGVQYXJlbnRPZiIsImFwcGx5Q2hhbmdlcyIsImZpZWxkIiwiUXQiLCJjaGlsZCIsIld0IiwiZG9jdW1lbnRUeXBlIiwidmVyc2lvbiIsImRvY3VtZW50U3RhdGUiLCJlbXB0eSIsImhhc0xvY2FsTXV0YXRpb25zIiwiaGFzQ29tbWl0dGVkTXV0YXRpb25zIiwiY2xvbmUiLCJHdCIsImNvbGxlY3Rpb25Hcm91cCIsIm9yZGVyQnkiLCJmaWx0ZXJzIiwic3RhcnRBdCIsImVuZEF0IiwiUiIsInp0IiwiSHQiLCJ0ZSIsImRpciIsImhlIiwiWXQiLCJmZSIsIndlIiwiWHQiLCJpc0RvY3VtZW50S2V5IiwiWnQiLCJpc0tleUZpZWxkIiwiUCIsImVlIiwib2UiLCJhZSIsImNlIiwibmUiLCJzZSIsImllIiwibnVsbFZhbHVlIiwidWUiLCJiZWZvcmUiLCJsZSIsImRlIiwiZXhwbGljaXRPcmRlckJ5IiwibGltaXRUeXBlIiwibWUiLCJnZSIsInllIiwicGUiLCJUZSIsIkVlIiwiViIsIkllIiwiQWUiLCJrZXlGaWVsZCIsIlJlIiwiUGUiLCJiZSIsInZlIiwiVmUiLCJKdCIsIlNlIiwiaXNGb3VuZERvY3VtZW50IiwiaGFzQ29sbGVjdGlvbklkIiwiRGUiLCJDZSIsIk5lIiwia2UiLCJ4ZSIsIiRlIiwiRmUiLCJMZSIsIl9fcHJldmlvdXNfdmFsdWVfXyIsIkJlIiwiVWUiLCJxZSIsIktlIiwiTWUiLCJRZSIsIk9lIiwiamUiLCJlbGVtZW50cyIsIldlIiwiR2UiLCJ0cmFuc2Zvcm0iLCJIZSIsInRyYW5zZm9ybVJlc3VsdHMiLCJKZSIsInVwZGF0ZVRpbWUiLCJleGlzdHMiLCJZZSIsIlhlIiwiWmUiLCJybiIsImNuIiwiZmllbGRUcmFuc2Zvcm1zIiwic2V0QWxsIiwiY29udmVydFRvRm91bmREb2N1bWVudCIsInNldEhhc0NvbW1pdHRlZE11dGF0aW9ucyIsIm9uIiwicHJlY29uZGl0aW9uIiwiY29udmVydFRvVW5rbm93bkRvY3VtZW50IiwiYW4iLCJjb252ZXJ0VG9Ob0RvY3VtZW50IiwidG4iLCJ1biIsInNuIiwic2V0SGFzTG9jYWxNdXRhdGlvbnMiLCJlbiIsIm5uIiwiemUiLCJmaWVsZE1hc2siLCJobiIsImxuIiwiY291bnQiLCJkbiIsInduIiwiX24iLCJtbiIsImduIiwicm9vdCIsInBuIiwiRU1QVFkiLCJpbnNlcnQiLCJjb3B5IiwiQkxBQ0siLCJyZW1vdmUiLCJyaWdodCIsIm1pbktleSIsIm1heEtleSIsImlub3JkZXJUcmF2ZXJzYWwiLCJyZXZlcnNlVHJhdmVyc2FsIiwieW4iLCJpc1JldmVyc2UiLCJub2RlU3RhY2siLCJSRUQiLCJmaXhVcCIsImlzUmVkIiwibW92ZVJlZExlZnQiLCJyZW1vdmVNaW4iLCJyb3RhdGVSaWdodCIsIm1vdmVSZWRSaWdodCIsInJvdGF0ZUxlZnQiLCJjb2xvckZsaXAiLCJjaGVjayIsInBvdyIsIlRuIiwiZ2V0SXRlcmF0b3JGcm9tIiwiaGFzTmV4dCIsImdldE5leHQiLCJnZXRJdGVyYXRvciIsIkVuIiwiaXRlciIsIkluIiwiQW4iLCJSbiIsIlBuIiwiYm4iLCJ2biIsIlZuIiwiU24iLCJEbiIsIkNuIiwiTm4iLCJzbmFwc2hvdFZlcnNpb24iLCJ0YXJnZXRDaGFuZ2VzIiwidGFyZ2V0TWlzbWF0Y2hlcyIsImRvY3VtZW50VXBkYXRlcyIsInJlc29sdmVkTGltYm9Eb2N1bWVudHMiLCJrbiIsImNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZSIsInJlc3VtZVRva2VuIiwiY3VycmVudCIsImFkZGVkRG9jdW1lbnRzIiwibW9kaWZpZWREb2N1bWVudHMiLCJyZW1vdmVkRG9jdW1lbnRzIiwieG4iLCJyZW1vdmVkVGFyZ2V0SWRzIiwiJG4iLCJ0YXJnZXRJZCIsIkZuIiwic3RhdGUiLCJ0YXJnZXRJZHMiLCJjYXVzZSIsIk9uIiwiQm4iLCJhcHByb3hpbWF0ZUJ5dGVTaXplIiwiTW4iLCJMbiIsImZvckVhY2hUYXJnZXQiLCJyZW1vdmVUYXJnZXQiLCJuZXdOb0RvY3VtZW50IiwiZm9yRWFjaFdoaWxlIiwicHVycG9zZSIsImdldFJlbW90ZUtleXNGb3JUYXJnZXQiLCJVbiIsImFzYyIsImRlc2MiLCJxbiIsImluIiwiS24iLCJkYXRhYmFzZUlkIiwiam4iLCJ0b0lTT1N0cmluZyIsIlFuIiwidG9VaW50OEFycmF5IiwiV24iLCJ0b1RpbWVzdGFtcCIsIkduIiwiZnJvbVRpbWVzdGFtcCIsInpuIiwiSG4iLCJBcyIsIkpuIiwiWW4iLCJlcyIsIlhuIiwiWm4iLCJ0cyIsInNzIiwibmV3Rm91bmREb2N1bWVudCIsIm9zIiwidXBkYXRlIiwidXBkYXRlTWFzayIsIklzIiwidXBkYXRlVHJhbnNmb3JtcyIsImZpZWxkUGF0aCIsInNldFRvU2VydmVyVmFsdWUiLCJhcHBlbmRNaXNzaW5nRWxlbWVudHMiLCJyZW1vdmVBbGxGcm9tQXJyYXkiLCJpbmNyZW1lbnQiLCJpc05vbmUiLCJjdXJyZW50RG9jdW1lbnQiLCJhcyIsIm5vbmUiLCJmcm9tU2VydmVyRm9ybWF0IiwiZmllbGRQYXRocyIsInVzIiwiZG9jdW1lbnRzIiwiaHMiLCJzdHJ1Y3R1cmVkUXVlcnkiLCJwYXJlbnQiLCJjb2xsZWN0aW9uSWQiLCJhbGxEZXNjZW5kYW50cyIsInVuYXJ5RmlsdGVyIiwieXMiLCJmaWVsZEZpbHRlciIsImdzIiwiY29tcG9zaXRlRmlsdGVyIiwiZGlyZWN0aW9uIiwibXMiLCJ3cyIsImxzIiwiZHMiLCJFcyIsIlRzIiwiY29uY2F0IiwicHMiLCJfcyIsIk5hTiIsIlJzIiwiYnMiLCJQcyIsInZzIiwiVnMiLCJTcyIsIm93bmVySWQiLCJhbGxvd1RhYlN5bmNocm9uaXphdGlvbiIsImxlYXNlVGltZXN0YW1wTXMiLCJzdG9yZSIsIkRzIiwidXNlcklkIiwibGFzdEFja25vd2xlZGdlZEJhdGNoSWQiLCJsYXN0U3RyZWFtVG9rZW4iLCJDcyIsImJhdGNoSWQiLCJsb2NhbFdyaXRlVGltZU1zIiwiYmFzZU11dGF0aW9ucyIsIm11dGF0aW9ucyIsInVzZXJNdXRhdGlvbnNJbmRleCIsInVzZXJNdXRhdGlvbnNLZXlQYXRoIiwiTnMiLCJQTEFDRUhPTERFUiIsImtzIiwicmVhZFRpbWUiLCJ4cyIsIiRzIiwidW5rbm93bkRvY3VtZW50Iiwibm9Eb2N1bWVudCIsInBhcmVudFBhdGgiLCJyZWFkVGltZUluZGV4IiwicmVhZFRpbWVJbmRleFBhdGgiLCJjb2xsZWN0aW9uUmVhZFRpbWVJbmRleCIsImNvbGxlY3Rpb25SZWFkVGltZUluZGV4UGF0aCIsIkZzIiwiYnl0ZVNpemUiLCJPcyIsImNhbm9uaWNhbElkIiwibGFzdExpc3RlblNlcXVlbmNlTnVtYmVyIiwibGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiIsInF1ZXJ5VGFyZ2V0c0luZGV4TmFtZSIsInF1ZXJ5VGFyZ2V0c0tleVBhdGgiLCJNcyIsInNlcXVlbmNlTnVtYmVyIiwiZG9jdW1lbnRUYXJnZXRzSW5kZXgiLCJkb2N1bWVudFRhcmdldHNLZXlQYXRoIiwiTHMiLCJoaWdoZXN0VGFyZ2V0SWQiLCJoaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIiLCJsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uIiwidGFyZ2V0Q291bnQiLCJCcyIsIlVzIiwiY2xpZW50SWQiLCJ1cGRhdGVUaW1lTXMiLCJuZXR3b3JrRW5hYmxlZCIsImluRm9yZWdyb3VuZCIsInFzIiwiY3JlYXRlVGltZSIsIktzIiwiYnVuZGxlZFF1ZXJ5IiwianMiLCJRcyIsIldzIiwib25Db21taXR0ZWRMaXN0ZW5lcnMiLCJHcyIsIm5leHRDYWxsYmFjayIsImNhdGNoQ2FsbGJhY2siLCJpc0RvbmUiLCJjYWxsYmFja0F0dGFjaGVkIiwid3JhcEZhaWx1cmUiLCJ3cmFwU3VjY2VzcyIsIndyYXBVc2VyRnVuY3Rpb24iLCJ3YWl0Rm9yIiwienMiLCJhYm9ydGVkIiwib25jb21wbGV0ZSIsIm9uYWJvcnQiLCJZcyIsIm5pIiwiYWJvcnQiLCJacyIsIkhzIiwiUnQiLCJ0aSIsImVudiIsIm9uc3VjY2VzcyIsIm9uYmxvY2tlZCIsIm9udXBncmFkZW5lZWRlZCIsIm9sZFZlcnNpb24iLCJvbnZlcnNpb25jaGFuZ2UiLCJKcyIsIlhzIiwiY3Vyc29yIiwicHJpbWFyeUtleSIsImNvbnRpbnVlIiwiZG9uZSIsImluZGV4IiwicmFuZ2UiLCJyZXZlcnNlIiwib3BlbktleUN1cnNvciIsIm9wZW5DdXJzb3IiLCJlaSIsInNpIiwiY3VycmVudFNlcXVlbmNlTnVtYmVyIiwiaWkiLCJyaSIsImxvY2FsV3JpdGVUaW1lIiwibXV0YXRpb25SZXN1bHRzIiwiYXBwbHlUb0xvY2FsVmlldyIsImlzVmFsaWREb2N1bWVudCIsIm9pIiwiYmF0Y2giLCJjb21taXRWZXJzaW9uIiwiZG9jVmVyc2lvbnMiLCJhaSIsImNpIiwidWkiLCJmcm9tU2VnbWVudHMiLCJ3aSIsIm5ld1Vua25vd25Eb2N1bWVudCIsImhpIiwibGkiLCJpc05vRG9jdW1lbnQiLCJkaSIsImlzVW5rbm93bkRvY3VtZW50IiwiZmkiLCJfaSIsInNwbGljZSIsIm1pIiwiZ2kiLCJ5aSIsInBpIiwiVGkiLCJFaSIsIklpIiwiQWkiLCJnZXRFbnRyaWVzIiwiUmkiLCJhZGRPbkNvbW1pdHRlZExpc3RlbmVyIiwiUGkiLCJJREJLZXlSYW5nZSIsImJvdW5kIiwiYmkiLCJkaWRSdW4iLCJzZXF1ZW5jZU51bWJlcnNDb2xsZWN0ZWQiLCJ0YXJnZXRzUmVtb3ZlZCIsImRvY3VtZW50c1JlbW92ZWQiLCJ2aSIsImNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQiLCJwZXJjZW50aWxlVG9Db2xsZWN0IiwibWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCIsIkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFIiwiREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUIiwiVmkiLCJvbmx5IiwiU2kiLCJERUZBVUxUIiwiRElTQUJMRUQiLCJEaSIsInJlZmVyZW5jZURlbGVnYXRlIiwiTkVHQVRJVkVfSU5GSU5JVFkiLCJQT1NJVElWRV9JTkZJTklUWSIsIk5pIiwia2kiLCJhZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCIsImxvb2t1cE11dGF0aW9uQmF0Y2giLCJsb3dlckJvdW5kIiwidXBwZXJCb3VuZCIsInByZWZpeEZvclBhdGgiLCJtYXJrUG90ZW50aWFsbHlPcnBoYW5lZCIsImNoZWNrRW1wdHkiLCJwcmVmaXhGb3JVc2VyIiwiQ2kiLCJ4aSIsIiRpIiwiRmkiLCJyZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCIsIk9pIiwicmVtb3ZlVGFyZ2V0RGF0YSIsIk1pIiwiTGkiLCJhZGRSZWZlcmVuY2UiLCJyZW1vdmVSZWZlcmVuY2UiLCJCaSIsIlVpIiwicWkiLCJidWZmZXIiLCJsYXN0IiwiS2kiLCJnYXJiYWdlQ29sbGVjdG9yIiwiYXN5bmNRdWV1ZSIsImVucXVldWVBZnRlckRlbGF5IiwiY29sbGVjdEdhcmJhZ2UiLCJqaSIsIm1heFZhbHVlIiwicmVtb3ZlVGFyZ2V0cyIsInJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzIiwiZ2V0Q2FjaGVTaXplIiwiY2FsY3VsYXRlVGFyZ2V0Q291bnQiLCJudGhTZXF1ZW5jZU51bWJlciIsIlFpIiwiZ2V0VGFyZ2V0Q2FjaGUiLCJnZXRUYXJnZXRDb3VudCIsIldpIiwiZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSIsIm5ld0NoYW5nZUJ1ZmZlciIsImdldEVudHJ5IiwicmVtb3ZlRW50cnkiLCJhcHBseSIsIndpdGhTZXF1ZW5jZU51bWJlciIsInVwZGF0ZVRhcmdldERhdGEiLCJnZXRTaXplIiwiR2kiLCJtYXBLZXlGbiIsImVxdWFsc0ZuIiwiaW5uZXIiLCJ6aSIsImNoYW5nZXMiLCJjaGFuZ2VzQXBwbGllZCIsImFzc2VydE5vdEFwcGxpZWQiLCJuZXdJbnZhbGlkRG9jdW1lbnQiLCJnZXRGcm9tQ2FjaGUiLCJnZXRBbGxGcm9tQ2FjaGUiLCJIaSIsIlhpIiwiWmkiLCJnZXRNZXRhZGF0YSIsImZpcnN0IiwiSmkiLCJ0cmFja1JlbW92YWxzIiwiWWkiLCJnZXRSZWFkVGltZSIsImFkZEVudHJ5IiwidXBkYXRlTWV0YWRhdGEiLCJ0ciIsImF1dG9JbmNyZW1lbnQiLCJjcmVhdGVJbmRleCIsInVuaXF1ZSIsImVyIiwiZGVsZXRlT2JqZWN0U3RvcmUiLCJuciIsInNyIiwiaXNQcmltYXJ5IiwicnVuVHJhbnNhY3Rpb24iLCJnZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIiLCJzdGFydGVkIiwibmV3VmVyc2lvbiIsImVucXVldWVBbmRGb3JnZXQiLCJyciIsImlyIiwicmFpc2VPbkNvbW1pdHRlZEV2ZW50IiwiYXBwVmVyc2lvbiIsImVudGVyUmVzdHJpY3RlZE1vZGUiLCJzaHV0ZG93biIsIm9yIiwiaXNEZWZhdWx0RGF0YWJhc2UiLCJhciIsInByb2dyZXNzIiwiY3IiLCJnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleSIsImdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5cyIsImdldENvbGxlY3Rpb25QYXJlbnRzIiwiZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSIsImdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ1F1ZXJ5IiwidXIiLCJmcm9tQ2FjaGUiLCJkb2NDaGFuZ2VzIiwiZG9jIiwiaHIiLCJoYXNQZW5kaW5nV3JpdGVzIiwibHIiLCJnZXRNdXRhdGlvblF1ZXVlIiwiZ2V0SW5kZXhNYW5hZ2VyIiwiZ2V0QnVuZGxlQ2FjaGUiLCJjb2xsZWN0IiwiZnIiLCJkciIsImdldEFsbE11dGF0aW9uQmF0Y2hlcyIsInJlbW92ZWRCYXRjaElkcyIsImFkZGVkQmF0Y2hJZHMiLCJfciIsImdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24iLCJnciIsInlyIiwiZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQiLCJwciIsImdldFRhcmdldERhdGEiLCJhbGxvY2F0ZVRhcmdldElkIiwiYWRkVGFyZ2V0RGF0YSIsIlRyIiwiRXIiLCJnZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCIsIklyIiwiQXIiLCJiciIsInNhdmVOYW1lZFF1ZXJ5Iiwid2l0aFJlc3VtZVRva2VuIiwiYWRkTWF0Y2hpbmdLZXlzIiwidnIiLCJWciIsIlNyIiwiZm9yRWFjaEluUmFuZ2UiLCJmaXJzdEFmdGVyT3JFcXVhbCIsImZzIiwiRHIiLCJzaGlmdCIsIkNyIiwiZG9jcyIsIk5yIiwia3IiLCJycyIsImNzIiwiY29udGFpbnNLZXkiLCJ4ciIsInRvS2V5IiwiJHIiLCJGciIsImZyb21QYXRoIiwiT3IiLCJNciIsIkxyIiwiQnIiLCJVciIsInFyIiwiYWN0aXZlVGFyZ2V0SWRzIiwiS3IiLCJvbmxpbmVTdGF0ZSIsImpyIiwiUXIiLCJzeW5jRW5naW5lIiwib25saW5lU3RhdGVIYW5kbGVyIiwiaXNBY3RpdmVRdWVyeVRhcmdldCIsImFkZFBlbmRpbmdNdXRhdGlvbiIsInN0b3JhZ2VBcmVhIiwidW5pb25XaXRoIiwiV3IiLCJHciIsInpyIiwiSHIiLCJCYXRjaEdldERvY3VtZW50cyIsIkNvbW1pdCIsIlJ1blF1ZXJ5IiwiSnIiLCJZciIsImRhdGFiYXNlSW5mbyIsInNzbCIsImZvcmNlTG9uZ1BvbGxpbmciLCJhdXRvRGV0ZWN0TG9uZ1BvbGxpbmciLCJ1c2VGZXRjaFN0cmVhbXMiLCJsaXN0ZW5PbmNlIiwiQ09NUExFVEUiLCJnZXRMYXN0RXJyb3JDb2RlIiwiTk9fRVJST1IiLCJnZXRSZXNwb25zZUpzb24iLCJUSU1FT1VUIiwiSFRUUF9FUlJPUiIsImdldFN0YXR1cyIsImdldFJlc3BvbnNlVGV4dCIsImh0dHBTZXNzaW9uSWRQYXJhbSIsImluaXRNZXNzYWdlSGVhZGVycyIsIm1lc3NhZ2VVcmxQYXJhbXMiLCJzZW5kUmF3SnNvbiIsInN1cHBvcnRzQ3Jvc3NEb21haW5YaHIiLCJpbnRlcm5hbENoYW5uZWxQYXJhbXMiLCJmb3J3YXJkQ2hhbm5lbFJlcXVlc3RUaW1lb3V0TXMiLCJkZXRlY3RCdWZmZXJpbmdQcm94eSIsInhtbEh0dHBGYWN0b3J5IiwiaHR0cEhlYWRlcnNPdmVyd3JpdGVQYXJhbSIsImNyZWF0ZVdlYkNoYW5uZWwiLCJ5IiwibGlzdGVuIiwiRXZlbnRUeXBlIiwiT1BFTiIsIkNMT1NFIiwiTUVTU0FHRSIsIlNUQVRfRVZFTlQiLCJzdGF0IiwiUFJPWFkiLCJOT1BST1hZIiwiWHIiLCJaciIsInRvIiwiZW8iLCJza2lwRGVsYXkiLCJubyIsImF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyIiwiYXBwQ2hlY2tDcmVkZW50aWFsc1Byb3ZpZGVyIiwic3RyZWFtIiwibXIiLCJpbnZhbGlkYXRlVG9rZW4iLCJSciIsInNvIiwidGFyZ2V0Q2hhbmdlIiwidGFyZ2V0Q2hhbmdlVHlwZSIsImRvY3VtZW50Q2hhbmdlIiwiZG9jdW1lbnREZWxldGUiLCJkb2N1bWVudFJlbW92ZSIsIlByIiwiYWRkVGFyZ2V0IiwibGFiZWxzIiwiaW8iLCJzdHJlYW1Ub2tlbiIsIndyaXRlUmVzdWx0cyIsImNvbW1pdFRpbWUiLCJ3cml0ZXMiLCJybyIsImF1dGhDcmVkZW50aWFscyIsImFwcENoZWNrQ3JlZGVudGlhbHMiLCJvbyIsImFvIiwibG9jYWxTdG9yZSIsImRhdGFzdG9yZSIsInJlbW90ZVN5bmNlciIsImdvIiwidW8iLCJjbyIsImhvIiwibW8iLCJfbyIsInhvIiwiZm8iLCJsbyIsIndvIiwieW8iLCJwbyIsIlRvIiwiRW8iLCJyZWplY3RMaXN0ZW4iLCJJbyIsImFwcGx5UmVtb3RlRXZlbnQiLCJBbyIsIlJvIiwiJG8iLCJQbyIsImJvIiwidm8iLCJWbyIsIlNvIiwiRG8iLCJDbyIsImFwcGx5U3VjY2Vzc2Z1bFdyaXRlIiwiTm8iLCJ3ciIsInJlamVjdEZhaWxlZFdyaXRlIiwia28iLCJzdG9wIiwiRm8iLCJ0YXJnZXRUaW1lTXMiLCJyZW1vdmFsQ2FsbGJhY2siLCJkZWZlcnJlZCIsInRpbWVySGFuZGxlIiwiaGFuZGxlRGVsYXlFbGFwc2VkIiwiT28iLCJNbyIsImtleWVkTWFwIiwic29ydGVkU2V0IiwiTG8iLCJCbyIsIm9sZERvY3MiLCJtdXRhdGVkS2V5cyIsInN5bmNTdGF0ZUNoYW5nZWQiLCJleGNsdWRlc01ldGFkYXRhQ2hhbmdlcyIsImVtcHR5U2V0IiwiVW8iLCJxbyIsInF1ZXJpZXMiLCJLbyIsIm9uTGlzdGVuIiwiR28iLCJqbyIsIm9uVW5saXN0ZW4iLCJRbyIsIldvIiwiem8iLCJpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzIiwiZnJvbUluaXRpYWxEb2N1bWVudHMiLCJIbyIsImJ5dGVMZW5ndGgiLCJKbyIsIllvIiwiWG8iLCJieXRlc0xvYWRlZCIsImRvY3VtZW50c0xvYWRlZCIsIm5hbWVkUXVlcnkiLCJkb2N1bWVudE1ldGFkYXRhIiwidGFza1N0YXRlIiwidG90YWxEb2N1bWVudHMiLCJ0b3RhbEJ5dGVzIiwiWm8iLCJ0YSIsImVhIiwiZiIsInRyYWNrIiwic25hcHNob3QiLCJuYSIsInNhIiwiaWEiLCJyZW1vdGVTdG9yZSIsInNoYXJlZENsaWVudFN0YXRlIiwibWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnMiLCJyYSIsInhhIiwiYWRkTG9jYWxRdWVyeVRhcmdldCIsIm9hIiwiaXNQcmltYXJ5Q2xpZW50IiwicGEiLCJhYSIsInJlbW92ZUxvY2FsUXVlcnlUYXJnZXQiLCJjbGVhclF1ZXJ5U3RhdGUiLCJnYSIsInJlbW92ZU1hdGNoaW5nS2V5cyIsInRvTWljcm9zZWNvbmRzIiwidXBkYXRlTGltYm9Eb2N1bWVudCIsInNldFRhcmdldHNNZXRhZGF0YSIsIklhIiwiaGEiLCJzZXRPbmxpbmVTdGF0ZSIsImxhIiwidXBkYXRlUXVlcnlTdGF0ZSIsIkVhIiwiZmEiLCJhcHBseVRvUmVtb3RlRG9jdW1lbnQiLCJyZW1vdmVNdXRhdGlvbkJhdGNoIiwicGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2siLCJtYSIsInVwZGF0ZU11dGF0aW9uU3RhdGUiLCJkYSIsInlhIiwiVGEiLCJ3aXRoTGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiIsIkFhIiwiaGFuZGxlVXNlckNoYW5nZSIsIlJhIiwiUGEiLCJiYSIsInZhIiwiU2EiLCJEYSIsIkNhIiwiTmEiLCJjcmVhdGVTeW50aGVzaXplZFJlbW90ZUV2ZW50Rm9yQ3VycmVudENoYW5nZSIsImthIiwiJGEiLCJPYSIsInN5bmNocm9uaXplVGFicyIsImdjU2NoZWR1bGVyIiwiaW5pdGlhbFVzZXIiLCJNYSIsImNhY2hlU2l6ZUJ5dGVzIiwiZm9yY2VPd25lcnNoaXAiLCJ3aXRoQ2FjaGVTaXplIiwiTGEiLCJnZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMiLCJpc0xvY2FsUXVlcnlUYXJnZXQiLCJWYSIsIkJhIiwiY3JlYXRlRGF0YXN0b3JlIiwiY3JlYXRlUmVtb3RlU3RvcmUiLCJjcmVhdGVFdmVudE1hbmFnZXIiLCJjcmVhdGVTeW5jRW5naW5lIiwiaGFuZGxlQ3JlZGVudGlhbENoYW5nZSIsIlVhIiwicWEiLCJtdXRlZCIsIkthIiwiVGV4dERlY29kZXIiLCJkZWNvZGUiLCJjYSIsImZpbmRJbmRleCIsInJlYWQiLCJqYSIsInJlYWRWZXJzaW9ucyIsImNvbW1pdHRlZCIsImxhc3RXcml0ZUVycm9yIiwid3JpdHRlbkRvY3MiLCJlbnN1cmVDb21taXROb3RDYWxsZWQiLCJmb3VuZCIsIm1pc3NpbmciLCJpcyIsInJlY29yZFZlcnNpb24iLCJ0b011dGF0aW9uIiwicHJlY29uZGl0aW9uRm9yVXBkYXRlIiwiUWEiLCJ1cGRhdGVGdW5jdGlvbiIsImNvbW1pdCIsIndhIiwiV2EiLCJBIiwiYXV0aENyZWRlbnRpYWxMaXN0ZW5lciIsImlzU2h1dHRpbmdEb3duIiwiZW5xdWV1ZUFuZEZvcmdldEV2ZW5XaGlsZVJlc3RyaWN0ZWQiLCJvbmxpbmVDb21wb25lbnRzIiwidGVybWluYXRlIiwib2ZmbGluZUNvbXBvbmVudHMiLCJHYSIsInZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MiLCJnZXRDb25maWd1cmF0aW9uIiwic2V0Q3JlZGVudGlhbENoYW5nZUxpc3RlbmVyIiwic2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIiLCJ6YSIsIkhhIiwiSmEiLCJZYSIsIlhhIiwiWmEiLCJ0YyIsImVjIiwicmMiLCJhYyIsImhjIiwiUmVhZGFibGVTdHJlYW0iLCJnZXRSZWFkZXIiLCJnZXRCdW5kbGVNZXRhZGF0YSIsIl9jb21wbGV0ZVdpdGgiLCJfdXBkYXRlUHJvZ3Jlc3MiLCJzYXZlQnVuZGxlTWV0YWRhdGEiLCJfZmFpbFdpdGgiLCJub3RpZnlCdW5kbGVMb2FkZWQiLCJGYSIsImZjIiwiZGMiLCJ3YyIsIm1jIiwiZ2MiLCJ5YyIsInBjIiwiVGMiLCJFYyIsIkljIiwiY3JlZGVudGlhbHMiLCJpZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzIiwiZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyIsImV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyIsIkFjIiwiX2F1dGhDcmVkZW50aWFscyIsIl9hcHBDaGVja0NyZWRlbnRpYWxzIiwiX3BlcnNpc3RlbmNlS2V5IiwiX3NldHRpbmdzIiwiX3NldHRpbmdzRnJvemVuIiwiX2RhdGFiYXNlSWQiLCJfYXBwIiwiX3Rlcm1pbmF0ZVRhc2siLCJjbGllbnQiLCJzZXNzaW9uSW5kZXgiLCJpYW1Ub2tlbiIsIl90ZXJtaW5hdGUiLCJSYyIsIl9nZXRTZXR0aW5ncyIsIl9zZXRTZXR0aW5ncyIsIm1vY2tVc2VyVG9rZW4iLCJQYyIsImNvbnZlcnRlciIsImZpcmVzdG9yZSIsInZjIiwiYmMiLCJfcXVlcnkiLCJfcGF0aCIsIlZjIiwiU2MiLCJEYyIsIkNjIiwiTmMiLCJrYyIsImVucXVldWUiLCJzdGFjayIsImNyZWF0ZUFuZFNjaGVkdWxlIiwieGMiLCIkYyIsIl9wcm9ncmVzc09ic2VydmVyIiwiX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIiLCJfbGFzdFByb2dyZXNzIiwiRmMiLCJPYyIsIl9xdWV1ZSIsIl9maXJlc3RvcmVDbGllbnQiLCJVYyIsIk1jIiwiaXNJbml0aWFsaXplZCIsImdldE9wdGlvbnMiLCJMYyIsIkJjIiwidmVyaWZ5Tm90VGVybWluYXRlZCIsIl9mcmVlemVTZXR0aW5ncyIsInFjIiwiWGMiLCJqYyIsIktjIiwiRE9NRXhjZXB0aW9uIiwiUWMiLCJfaW5pdGlhbGl6ZWQiLCJfdGVybWluYXRlZCIsIldjIiwiZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZCIsIkdjIiwic2V0TmV0d29ya0VuYWJsZWQiLCJuYyIsInpjIiwic2MiLCJIYyIsIl9kZWxldGUiLCJKYyIsIlljIiwiZ2V0TmFtZWRRdWVyeSIsImxjIiwiWmMiLCJfaW50ZXJuYWxQYXRoIiwidHUiLCJldSIsIl9ieXRlU3RyaW5nIiwibnUiLCJfbWV0aG9kTmFtZSIsInN1IiwiaXNGaW5pdGUiLCJfbGF0IiwiX2xvbmciLCJpdSIsInJ1Iiwib3UiLCJhdSIsImN1IiwiVnUiLCJtZXRob2ROYW1lIiwidXUiLCJodSIsImx1IiwibWVyZ2UiLCJtZXJnZUZpZWxkcyIsIlJ1IiwiSXUiLCJQdSIsIlN1IiwiY292ZXJzIiwiZnUiLCJkdSIsInd1IiwiX3UiLCJFdSIsIm11IiwiZ3UiLCJ5dSIsInZ1IiwicHUiLCJUdSIsIkF1IiwiX3RvRmllbGRUcmFuc2Zvcm0iLCJmcm9tRGF0ZSIsImdldFByb3RvdHlwZU9mIiwiYnUiLCJzZWFyY2giLCJEdSIsIl9maXJlc3RvcmUiLCJfdXNlckRhdGFXcml0ZXIiLCJfZG9jdW1lbnQiLCJfY29udmVydGVyIiwiQ3UiLCJmcm9tRmlyZXN0b3JlIiwiY29udmVydFZhbHVlIiwiTnUiLCJrdSIsInh1IiwiX2ZpcmVzdG9yZUltcGwiLCIkdSIsInNlcnZlclRpbWVzdGFtcHMiLCJGdSIsIl9zbmFwc2hvdCIsIl9jYWNoZWRDaGFuZ2VzIiwiX2NhY2hlZENoYW5nZXNJbmNsdWRlTWV0YWRhdGFDaGFuZ2VzIiwib2xkSW5kZXgiLCJuZXdJbmRleCIsIk91IiwiTXUiLCJMdSIsIkJ1IiwiVXUiLCJfYXBwbHkiLCJxdSIsInNoIiwibmgiLCJpaCIsIkt1IiwianUiLCJRdSIsIld1IiwiR3UiLCJ6dSIsIkh1IiwiZWgiLCJKdSIsIll1IiwiWHUiLCJadSIsInRoIiwicmgiLCJjb252ZXJ0VGltZXN0YW1wIiwiY29udmVydFNlcnZlclRpbWVzdGFtcCIsImNvbnZlcnRCeXRlcyIsImNvbnZlcnRSZWZlcmVuY2UiLCJjb252ZXJ0R2VvUG9pbnQiLCJjb252ZXJ0QXJyYXkiLCJjb252ZXJ0T2JqZWN0Iiwib2giLCJ0b0ZpcmVzdG9yZSIsImFoIiwiY29udmVydERvY3VtZW50S2V5IiwiY2giLCJfY29tbWl0SGFuZGxlciIsIl9tdXRhdGlvbnMiLCJfY29tbWl0dGVkIiwiX2RhdGFSZWFkZXIiLCJfdmVyaWZ5Tm90Q29tbWl0dGVkIiwidWgiLCJoaCIsIlJoIiwibGgiLCJmaCIsImljIiwiZGgiLCJ3aCIsIm9jIiwibWgiLCJnaCIsIkFoIiwieWgiLCJwaCIsIlRoIiwiRWgiLCJJaCIsImNjIiwiYWRkTXV0YXRpb25CYXRjaCIsImFwcGx5VG9Mb2NhbERvY3VtZW50U2V0IiwiUGgiLCJfdHJhbnNhY3Rpb24iLCJsb29rdXAiLCJiaCIsInJ1biIsInVjIiwidmgiLCJWaCIsIlNoIiwiRGgiLCJDaCIsIk5oIiwiUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlSW1wbCIsImdldFByb3ZpZGVycyIsImNvbXBvbmVudCIsImdldENvbXBvbmVudCIsImlzVmVyc2lvblNlcnZpY2VQcm92aWRlciIsImxpYnJhcnkiLCJsb2dTdHJpbmciLCJuYW1lJG8iLCJsb2dnZXIiLCJERUZBVUxUX0VOVFJZX05BTUUiLCJQTEFURk9STV9MT0dfU1RSSU5HIiwiX2FwcHMiLCJfY29tcG9uZW50cyIsIl9hZGRDb21wb25lbnQiLCJhZGRDb21wb25lbnQiLCJfYWRkT3JPdmVyd3JpdGVDb21wb25lbnQiLCJhZGRPck92ZXJ3cml0ZUNvbXBvbmVudCIsIl9yZWdpc3RlckNvbXBvbmVudCIsImNvbXBvbmVudE5hbWUiLCJfZ2V0UHJvdmlkZXIiLCJfcmVtb3ZlU2VydmljZUluc3RhbmNlIiwiaW5zdGFuY2VJZGVudGlmaWVyIiwiY2xlYXJJbnN0YW5jZSIsIl9jbGVhckNvbXBvbmVudHMiLCJFUlJPUlMiLCJFUlJPUl9GQUNUT1JZIiwiRmlyZWJhc2VBcHBJbXBsIiwiX2lzRGVsZXRlZCIsIl9vcHRpb25zIiwiX2NvbmZpZyIsIl9uYW1lIiwiX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCIsImF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCIsIl9jb250YWluZXIiLCJjaGVja0Rlc3Ryb3llZCIsInZhbCIsImlzRGVsZXRlZCIsIlNES19WRVJTSU9OIiwiaW5pdGlhbGl6ZUFwcCIsInJhd0NvbmZpZyIsImV4aXN0aW5nQXBwIiwibmV3QXBwIiwiZ2V0QXBwIiwiZ2V0QXBwcyIsImRlbGV0ZUFwcCIsInJlZ2lzdGVyVmVyc2lvbiIsImxpYnJhcnlLZXlPck5hbWUiLCJ2YXJpYW50IiwibGlicmFyeU1pc21hdGNoIiwidmVyc2lvbk1pc21hdGNoIiwid2FybmluZyIsIm9uTG9nIiwibG9nQ2FsbGJhY2siLCJpbnN0YW5jZXMiLCJMb2dMZXZlbCIsImxldmVsU3RyaW5nVG9FbnVtIiwiVkVSQk9TRSIsIklORk8iLCJTSUxFTlQiLCJkZWZhdWx0TG9nTGV2ZWwiLCJDb25zb2xlTWV0aG9kIiwiZGVmYXVsdExvZ0hhbmRsZXIiLCJsb2dUeXBlIiwiTG9nZ2VyIiwiX2xvZ0xldmVsIiwiX2xvZ0hhbmRsZXIiLCJfdXNlckxvZ0hhbmRsZXIiLCJUeXBlRXJyb3IiLCJsZXZlbCIsImluc3QiLCJzZXRVc2VyTG9nSGFuZGxlciIsImN1c3RvbUxvZ0xldmVsIiwidXNlckxvZ0hhbmRsZXIiLCJhcmciLCJpZ25vcmVkIiwiQ29tcG9uZW50IiwiaW5zdGFuY2VGYWN0b3J5IiwibXVsdGlwbGVJbnN0YW5jZXMiLCJzZXJ2aWNlUHJvcHMiLCJpbnN0YW50aWF0aW9uTW9kZSIsIm9uSW5zdGFuY2VDcmVhdGVkIiwicHJvcHMiLCJQcm92aWRlciIsImluc3RhbmNlc0RlZmVycmVkIiwiaW5zdGFuY2VzT3B0aW9ucyIsIm9uSW5pdENhbGxiYWNrcyIsIm5vcm1hbGl6ZWRJZGVudGlmaWVyIiwibm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyIiwic2hvdWxkQXV0b0luaXRpYWxpemUiLCJnZXRPckluaXRpYWxpemVTZXJ2aWNlIiwiaXNDb21wb25lbnRFYWdlciIsImluc3RhbmNlRGVmZXJyZWQiLCJzZXJ2aWNlcyIsIm9wdHMiLCJpc0NvbXBvbmVudFNldCIsImV4aXN0aW5nQ2FsbGJhY2tzIiwiY2FsbGJhY2tzIiwiaW52b2tlT25Jbml0Q2FsbGJhY2tzIiwiQ29tcG9uZW50Q29udGFpbmVyIiwicHJvdmlkZXJzIiwic2V0Q29tcG9uZW50IiwiY29tbW9uanNHbG9iYWwiLCJnbG9iYWxUaGlzIiwiZXNtIiwiZ29vZyIsInVuc2hpZnQiLCJWYiIsInRyaW0iLCJ3IiwicGFyc2VGbG9hdCIsInBhcnNlSW50IiwiZGVmYXVsdFByZXZlbnRlZCIsInJlbGF0ZWRUYXJnZXQiLCJidXR0b24iLCJzY3JlZW5ZIiwic2NyZWVuWCIsImNsaWVudFkiLCJjbGllbnRYIiwibWV0YUtleSIsInNoaWZ0S2V5IiwiYWx0S2V5IiwiY3RybEtleSIsInBvaW50ZXJJZCIsInBvaW50ZXJUeXBlIiwiY2hhbmdlZFRvdWNoZXMiLCJzcmNFbGVtZW50Iiwibm9kZU5hbWUiLCJmcm9tRWxlbWVudCIsInRvRWxlbWVudCIsInBhZ2VYIiwicGFnZVkiLCIyIiwiMyIsIjQiLCJwcmV2ZW50RGVmYXVsdCIsInJldHVyblZhbHVlIiwic3JjIiwiY2FwdHVyZSIsImJiIiwiYWIiLCJmYiIsIm9uY2UiLCJnYiIsImhiIiwiaWIiLCJqYiIsIm1iIiwia2IiLCJhdHRhY2hFdmVudCIsImxiIiwiYWRkTGlzdGVuZXIiLCJyZW1vdmVMaXN0ZW5lciIsIm9iIiwiZGV0YWNoRXZlbnQiLCJwYiIsInFiIiwibmIiLCJyYiIsInNiIiwidGIiLCJBYiIsInZiIiwid2IiLCJ5YiIsInpiIiwiRGIiLCJCYiIsIkNiIiwiRWIiLCJGYiIsIkdiIiwiSWIiLCJIYiIsIkUiLCJKYiIsIktiIiwiTGIiLCJNYiIsIlBiIiwiUmIiLCJTYiIsIlRiIiwiVWIiLCJXYiIsInhiIiwiWGIiLCJZYiIsIlpiIiwiJGIiLCJYTUxIdHRwUmVxdWVzdCIsIk5iIiwiZWIiLCJnZXRSZXNwb25zZUhlYWRlciIsIk9iIiwiUWIiLCJkZCIsImFicyIsImRlY29kZVVSSSIsImVuY29kZVVSSSIsImNkIiwiZWQiLCJnZCIsImhkIiwiUGVyZm9ybWFuY2VOYXZpZ2F0aW9uVGltaW5nIiwicGVyZm9ybWFuY2UiLCJnZXRFbnRyaWVzQnlUeXBlIiwibmV4dEhvcFByb3RvY29sIiwiamQiLCJrZCIsImxkIiwibWQiLCJvZCIsInFkIiwicmQiLCJyZXNwb25zZVR5cGUiLCJyZXNwb25zZVRleHQiLCJzdGF0dXNUZXh0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwidWQiLCJ0ZCIsInNkIiwiY2FjaGUiLCJSZXF1ZXN0IiwiYXJyYXlCdWZmZXIiLCJ0ZXh0Iiwic2V0UmVxdWVzdEhlYWRlciIsImFwcGVuZCIsImdldEFsbFJlc3BvbnNlSGVhZGVycyIsInZkIiwid2QiLCJ4ZCIsInlkIiwiemQiLCJDZCIsIkRkIiwiRWQiLCJBZCIsIm1velJlc3BvbnNlQXJyYXlCdWZmZXIiLCJHZCIsIkZkIiwiSGQiLCJJZCIsImNvbmN1cnJlbnRSZXF1ZXN0TGltaXQiLCJmYXN0SGFuZHNoYWtlIiwiSmQiLCJLZCIsInNlbmRCZWFjb24iLCJJbWFnZSIsIkxkIiwiTWQiLCJRZCIsIlBkIiwicm91bmQiLCJPZCIsIlJkIiwiTmQiLCJuZCIsImFkIiwiYmQiLCJTZCIsIlRkIiwibWVzc2FnZUhlYWRlcnMiLCJjbGllbnRQcm90b2NvbEhlYWRlclJlcXVpcmVkIiwibWVzc2FnZUNvbnRlbnRUeXBlIiwiVWQiLCJfX3NtX18iLCJWZCIsInRvVXBwZXJDYXNlIiwiRm9ybURhdGEiLCJ3aXRoQ3JlZGVudGlhbHMiLCJCZCIsIl9fZGF0YV9fIiwiZ2V0TGFzdEVycm9yIiwiY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCIsImdldFN0YXRFdmVudFRhcmdldCIsIkVycm9yQ29kZSIsIkV2ZW50IiwiU3RhdCIsInViIiwiRmV0Y2hYbWxIdHRwRmFjdG9yeSIsIldlYkNoYW5uZWwiLCJYaHJJbyIsInJlbW92ZUFwcCIsImZpcmViYXNlJDEiLCJjcmVhdGVGaXJlYmFzZU5hbWVzcGFjZSIsIm5hbWVzcGFjZSIsImZpcmViYXNlQXBwSW1wbCIsImFwcHMiLCJhcHBDb21wYXQiLCJyZWdpc3RlckNvbXBvbmVudCIsImNvbXBvbmVudE5hbWVXaXRob3V0Q29tcGF0Iiwic2VydmljZU5hbWVzcGFjZSIsImFwcEFyZyIsIl9nZXRTZXJ2aWNlIiwidXNlQXNTZXJ2aWNlIiwibW9kdWxhckFQSXMiLCJjcmVhdGVGaXJlYmFzZU5hbWVzcGFjZUNvcmUiLCJleHRlbmROYW1lc3BhY2UiLCJzZGtWZXJzaW9uIiwicm5kczgiLCJybmRzIiwiYnl0ZVRvSGV4IiwiYnRoIiwic2hhcmRJZCIsInNoYXJkcyIsIm5vdGlmeVByb21pc2UiLCJjb29raWUiLCJ1dWlkIiwidjQiLCJzZXRUaW1lIiwiZXhwaXJlcyIsImdldFNoYXJkSWQiLCJzaGFyZHNSZWYiLCJjb2xsZWN0aW9uIiwidmFsdWVQcm9taXNlcyIsIm9ic2VydmFibGUiLCJvblNuYXBzaG90Iiwic25hcCIsInJlZiIsImZ1bmMiLCJzdW0iLCJGaWVsZFZhbHVlIiwic2hhcmRSZWYiLCJzZXREb2MiLCJ2MSIsIl9ub2RlSWQiLCJfY2xvY2tzZXEiLCJybmciLCJieXRlc1RvVXVpZCIsIl9sYXN0TVNlY3MiLCJfbGFzdE5TZWNzIiwiY2xvY2tzZXEiLCJzZWVkQnl0ZXMiLCJtc2VjcyIsIm5zZWNzIiwidGwiLCJ0bWgiLCJfaXNBbmRyb2lkT3JJb3NDb3Jkb3ZhU2NoZW1lIiwiX2lzTG9jYWxTdG9yYWdlTm90U3luY2hyb25pemVkIiwiX2lzRWRnZSIsIl9pc1dlYlN0b3JhZ2VTdXBwb3J0ZWQiLCJfaXNQb3B1cFJlZGlyZWN0U3VwcG9ydGVkIiwiX2lzTGlrZWx5Q29yZG92YSIsIlBlcnNpc3RlbmNlIiwiTE9DQUwiLCJOT05FIiwiU0VTU0lPTiIsIl9hc3NlcnQkMyIsIl9zYXZlUGVyc2lzdGVuY2VGb3JSZWRpcmVjdCIsImdldFNlbGZXaW5kb3ciLCJfZ2V0UGVyc2lzdGVuY2UiLCJfYXNzZXJ0JDIiLCJDb21wYXRQb3B1cFJlZGlyZWN0UmVzb2x2ZXIiLCJicm93c2VyUmVzb2x2ZXIiLCJjb3Jkb3ZhUmVzb2x2ZXIiLCJ1bmRlcmx5aW5nUmVzb2x2ZXIiLCJzZWxlY3RVbmRlcmx5aW5nUmVzb2x2ZXIiLCJhc3NlcnRlZFVuZGVybHlpbmdSZXNvbHZlciIsImlzQ29yZG92YSIsInRpbWVvdXRJZCIsIl9pc0NvcmRvdmEiLCJ1bndyYXAiLCJjcmVkZW50aWFsRnJvbU9iamVjdCIsImNyZWRlbnRpYWxGcm9tUmVzdWx0IiwiY3JlZGVudGlhbEZyb21FcnJvciIsImNvbnZlcnRDcmVkZW50aWFsIiwiY3JlZGVudGlhbFByb21pc2UiLCJNdWx0aUZhY3RvclJlc29sdmVyIiwiY3JlZEVyciIsImF0dGFjaEV4dHJhRXJyb3JGaWVsZHMiLCJhZGRpdGlvbmFsVXNlckluZm8iLCJVc2VyIiwiZ2V0T3JDcmVhdGUiLCJjb252ZXJ0Q29uZmlybWF0aW9uUmVzdWx0IiwiY29uZmlybWF0aW9uUmVzdWx0UHJvbWlzZSIsImNvbmZpcm1hdGlvblJlc3VsdEV4cCIsImNvbmZpcm0iLCJ3cmFwcGVkIiwicmVzb2x2ZVNpZ25JbiIsIlVTRVJfTUFQIiwicGhvbmVDcmVkZW50aWFsIiwiX2Fzc2VydCQxIiwiQXV0aCIsImxpbmtVbmRlcmx5aW5nQXV0aCIsInBlcnNpc3RlbmNlcyIsIl9nZXRQZXJzaXN0ZW5jZXNGcm9tUmVkaXJlY3QiLCJ1c2VEZXZpY2VMYW5ndWFnZSIsImVycm9yRm4iLCJ3cmFwT2JzZXJ2ZXJzIiwib25BdXRoU3RhdGVDaGFuZ2VkIiwiY29udmVydGVkIiwiX3ZhbGlkYXRlUGVyc2lzdGVuY2VBcmd1bWVudCIsInVwZGF0ZUN1cnJlbnRVc2VyIiwib2xkTmV4dCIsIlBob25lQXV0aFByb3ZpZGVyIiwidmVyaWZ5UGhvbmVOdW1iZXIiLCJhdXRoUHJvdmlkZXIiLCJzZXRTZXJ2aWNlUHJvcHMiLCJBY3Rpb25Db2RlSW5mbyIsIk9wZXJhdGlvbiIsInNldE11bHRpcGxlSW5zdGFuY2VzIiwiY2FjaGVkU2V0VGltZW91dCIsImNhY2hlZENsZWFyVGltZW91dCIsImRlZmF1bHRTZXRUaW1vdXQiLCJkZWZhdWx0Q2xlYXJUaW1lb3V0IiwicnVuVGltZW91dCIsImZ1biIsImN1cnJlbnRRdWV1ZSIsImRyYWluaW5nIiwicXVldWVJbmRleCIsImNsZWFuVXBOZXh0VGljayIsImRyYWluUXVldWUiLCJtYXJrZXIiLCJydW5DbGVhclRpbWVvdXQiLCJJdGVtIiwiYXJyYXkiLCJuZXh0VGljayIsInRpdGxlIiwiYXJndiIsInZlcnNpb25zIiwib2ZmIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiZW1pdCIsInByZXBlbmRMaXN0ZW5lciIsInByZXBlbmRPbmNlTGlzdGVuZXIiLCJiaW5kaW5nIiwiY3dkIiwiY2hkaXIiLCJ1bWFzayIsInZhbGlkYXRlU2V0T3B0aW9ucyIsImFzc2VydFVpbnQ4QXJyYXlBdmFpbGFibGUiLCJhc3NlcnRCYXNlNjRBdmFpbGFibGUiLCJvdGhlciIsImlzUGFydGlhbE9ic2VydmVyIiwiZGF0YWJhc2VJZE9yQXBwIiwiX3BlcnNpc3RlbmNlUHJvdmlkZXIiLCJfYXBwQ29tcGF0Iiwic2V0dGluZ3NMaXRlcmFsIiwiY3VycmVudFNldHRpbmdzIiwiZXhwZXJpbWVudGFsRm9yY2VPd25pbmdUYWIiLCJlbmFibGVNdWx0aVRhYkluZGV4ZWREYlBlcnNpc3RlbmNlIiwiZW5hYmxlSW5kZXhlZERiUGVyc2lzdGVuY2UiLCJjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlIiwicGF0aFN0cmluZyIsInJlcGxhY2VGdW5jdGlvbk5hbWUiLCJXcml0ZUJhdGNoIiwiYnVuZGxlRGF0YSIsImV4cFF1ZXJ5IiwiZm9yS2V5IiwiZG9jdW1lbnRSZWYiLCJjYXN0UmVmZXJlbmNlIiwiZGF0YU9yRmllbGQiLCJtb3JlRmllbGRzQW5kVmFsdWVzIiwiZXhwU25hcHNob3QiLCJtb2RlbE9iamVjdCIsImNvbnZlcnRlck1hcEJ5RmlyZXN0b3JlIiwiSU5TVEFOQ0VTIiwidW50eXBlZENvbnZlcnRlckJ5Q29udmVydGVyIiwiZmllbGRPclVwZGF0ZURhdGEiLCJleHRyYWN0U25hcHNob3RPcHRpb25zIiwid3JhcE9ic2VydmVyIiwid2l0aENvbnZlcnRlciIsImdldEluc3RhbmNlIiwidXBkYXRlZCIsIndyYXBwZXIiLCJ1c2VyT2JzZXJ2ZXIiLCJvcFN0ciIsImRpcmVjdGlvblN0ciIsIkRvY3VtZW50Q2hhbmdlIiwiZG9jQ2hhbmdlIiwidGhpc0FyZyIsImRvY1JlZiIsImRvY3VtZW50UGF0aCIsImZpZWxkTmFtZXMiLCJkZWxlZ2F0ZSIsImZpcmVzdG9yZU5hbWVzcGFjZSIsIkZpcmVzdG9yZSIsIkdlb1BvaW50IiwiVGltZXN0YW1wIiwiQmxvYiIsIlRyYW5zYWN0aW9uIiwiRG9jdW1lbnRSZWZlcmVuY2UiLCJEb2N1bWVudFNuYXBzaG90IiwiUXVlcnkiLCJRdWVyeURvY3VtZW50U25hcHNob3QiLCJRdWVyeVNuYXBzaG90IiwiQ29sbGVjdGlvblJlZmVyZW5jZSIsIkZpZWxkUGF0aCIsIkNBQ0hFX1NJWkVfVU5MSU1JVEVEIiwiZmlyZXN0b3JlRmFjdG9yeSIsImZpcmVzdG9yZUV4cCJdLCJtYXBwaW5ncyI6IndCQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlC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Ozs7Ozs7Ozs7Ozs7Ozs7O0FBcUNKLElBQTJCenlGLEVBNUJhMHlGLEVBNEJiMXlGLEVBSVQsSUFoQ3NCMHlGLEVBNkJMLENBQUN2aUYsRUFBS3dpRixJQUFpQixJQUFJLEVBQVV4aUYsRUFBS3dpRixFQUFjLElBQUksR0FBdEUzeUYsRUE1QlprbkMsU0FBU2cvQyxrQkFBa0IsSUFBSSxJQUFVLG1CQUFvQm40RCxJQUNsRSxNQUFNNWQsRUFBTTRkLEVBQVVxUixZQUFZLGNBQWNDLGVBQzFDc3pELEVBQWU1a0UsRUFBVXFSLFlBQVksYUFBYUMsZUFDeEQsT0FBT3F6RCxFQUFpQnZpRixFQUFLd2lGLElBQzlCLFVBQVU3RixnQkFBZ0JoOUYsT0FBT3lHLE9BQU8sR0FBSXE3RixLQXlCL0M1eEYsRUFBUzgyRSxnQkExOUJBLDZCQUNHIiwiZmlsZSI6InNoYXJkZWQtY291bnRlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxMSk7XG4iLCIvKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGZpbGVvdmVydmlldyBGaXJlYmFzZSBjb25zdGFudHMuICBTb21lIG9mIHRoZXNlIChAZGVmaW5lcykgY2FuIGJlIG92ZXJyaWRkZW4gYXQgY29tcGlsZS10aW1lLlxyXG4gKi9cclxuY29uc3QgQ09OU1RBTlRTID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVmaW5lIHtib29sZWFufSBXaGV0aGVyIHRoaXMgaXMgdGhlIGNsaWVudCBOb2RlLmpzIFNESy5cclxuICAgICAqL1xyXG4gICAgTk9ERV9DTElFTlQ6IGZhbHNlLFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVmaW5lIHtib29sZWFufSBXaGV0aGVyIHRoaXMgaXMgdGhlIEFkbWluIE5vZGUuanMgU0RLLlxyXG4gICAgICovXHJcbiAgICBOT0RFX0FETUlOOiBmYWxzZSxcclxuICAgIC8qKlxyXG4gICAgICogRmlyZWJhc2UgU0RLIFZlcnNpb25cclxuICAgICAqL1xyXG4gICAgU0RLX1ZFUlNJT046ICcke0pTQ09SRV9WRVJTSU9OfSdcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRocm93cyBhbiBlcnJvciBpZiB0aGUgcHJvdmlkZWQgYXNzZXJ0aW9uIGlzIGZhbHN5XHJcbiAqL1xyXG5jb25zdCBhc3NlcnQgPSBmdW5jdGlvbiAoYXNzZXJ0aW9uLCBtZXNzYWdlKSB7XHJcbiAgICBpZiAoIWFzc2VydGlvbikge1xyXG4gICAgICAgIHRocm93IGFzc2VydGlvbkVycm9yKG1lc3NhZ2UpO1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogUmV0dXJucyBhbiBFcnJvciBvYmplY3Qgc3VpdGFibGUgZm9yIHRocm93aW5nLlxyXG4gKi9cclxuY29uc3QgYXNzZXJ0aW9uRXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgcmV0dXJuIG5ldyBFcnJvcignRmlyZWJhc2UgRGF0YWJhc2UgKCcgK1xyXG4gICAgICAgIENPTlNUQU5UUy5TREtfVkVSU0lPTiArXHJcbiAgICAgICAgJykgSU5URVJOQUwgQVNTRVJUIEZBSUxFRDogJyArXHJcbiAgICAgICAgbWVzc2FnZSk7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IHN0cmluZ1RvQnl0ZUFycmF5JDEgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICAvLyBUT0RPKHVzZXIpOiBVc2UgbmF0aXZlIGltcGxlbWVudGF0aW9ucyBpZi93aGVuIGF2YWlsYWJsZVxyXG4gICAgY29uc3Qgb3V0ID0gW107XHJcbiAgICBsZXQgcCA9IDA7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxldCBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSBjO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDYpIHwgMTkyO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgoYyAmIDB4ZmMwMCkgPT09IDB4ZDgwMCAmJlxyXG4gICAgICAgICAgICBpICsgMSA8IHN0ci5sZW5ndGggJiZcclxuICAgICAgICAgICAgKHN0ci5jaGFyQ29kZUF0KGkgKyAxKSAmIDB4ZmMwMCkgPT09IDB4ZGMwMCkge1xyXG4gICAgICAgICAgICAvLyBTdXJyb2dhdGUgUGFpclxyXG4gICAgICAgICAgICBjID0gMHgxMDAwMCArICgoYyAmIDB4MDNmZikgPDwgMTApICsgKHN0ci5jaGFyQ29kZUF0KCsraSkgJiAweDAzZmYpO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDE4KSB8IDI0MDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gMTIpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTIpIHwgMjI0O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0O1xyXG59O1xyXG4vKipcclxuICogVHVybnMgYW4gYXJyYXkgb2YgbnVtYmVycyBpbnRvIHRoZSBzdHJpbmcgZ2l2ZW4gYnkgdGhlIGNvbmNhdGVuYXRpb24gb2YgdGhlXHJcbiAqIGNoYXJhY3RlcnMgdG8gd2hpY2ggdGhlIG51bWJlcnMgY29ycmVzcG9uZC5cclxuICogQHBhcmFtIGJ5dGVzIEFycmF5IG9mIG51bWJlcnMgcmVwcmVzZW50aW5nIGNoYXJhY3RlcnMuXHJcbiAqIEByZXR1cm4gU3RyaW5naWZpY2F0aW9uIG9mIHRoZSBhcnJheS5cclxuICovXHJcbmNvbnN0IGJ5dGVBcnJheVRvU3RyaW5nID0gZnVuY3Rpb24gKGJ5dGVzKSB7XHJcbiAgICAvLyBUT0RPKHVzZXIpOiBVc2UgbmF0aXZlIGltcGxlbWVudGF0aW9ucyBpZi93aGVuIGF2YWlsYWJsZVxyXG4gICAgY29uc3Qgb3V0ID0gW107XHJcbiAgICBsZXQgcG9zID0gMCwgYyA9IDA7XHJcbiAgICB3aGlsZSAocG9zIDwgYnl0ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgY29uc3QgYzEgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgaWYgKGMxIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZShjMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMxID4gMTkxICYmIGMxIDwgMjI0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGMyID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMSAmIDMxKSA8PCA2KSB8IChjMiAmIDYzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMxID4gMjM5ICYmIGMxIDwgMzY1KSB7XHJcbiAgICAgICAgICAgIC8vIFN1cnJvZ2F0ZSBQYWlyXHJcbiAgICAgICAgICAgIGNvbnN0IGMyID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBjb25zdCBjMyA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgY29uc3QgYzQgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IHUgPSAoKChjMSAmIDcpIDw8IDE4KSB8ICgoYzIgJiA2MykgPDwgMTIpIHwgKChjMyAmIDYzKSA8PCA2KSB8IChjNCAmIDYzKSkgLVxyXG4gICAgICAgICAgICAgICAgMHgxMDAwMDtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZDgwMCArICh1ID4+IDEwKSk7XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgweGRjMDAgKyAodSAmIDEwMjMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGMyID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBjb25zdCBjMyA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoYzEgJiAxNSkgPDwgMTIpIHwgKChjMiAmIDYzKSA8PCA2KSB8IChjMyAmIDYzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dC5qb2luKCcnKTtcclxufTtcclxuLy8gV2UgZGVmaW5lIGl0IGFzIGFuIG9iamVjdCBsaXRlcmFsIGluc3RlYWQgb2YgYSBjbGFzcyBiZWNhdXNlIGEgY2xhc3MgY29tcGlsZWQgZG93biB0byBlczUgY2FuJ3RcclxuLy8gYmUgdHJlZXNoYWtlZC4gaHR0cHM6Ly9naXRodWIuY29tL3JvbGx1cC9yb2xsdXAvaXNzdWVzLzE2OTFcclxuLy8gU3RhdGljIGxvb2t1cCBtYXBzLCBsYXppbHkgcG9wdWxhdGVkIGJ5IGluaXRfKClcclxuY29uc3QgYmFzZTY0ID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGJ5dGVzIHRvIGNoYXJhY3RlcnMuXHJcbiAgICAgKi9cclxuICAgIGJ5dGVUb0NoYXJNYXBfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGNoYXJhY3RlcnMgdG8gYnl0ZXMuXHJcbiAgICAgKi9cclxuICAgIGNoYXJUb0J5dGVNYXBfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGJ5dGVzIHRvIHdlYnNhZmUgY2hhcmFjdGVycy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGJ5dGVUb0NoYXJNYXBXZWJTYWZlXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogTWFwcyB3ZWJzYWZlIGNoYXJhY3RlcnMgdG8gYnl0ZXMuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBjaGFyVG9CeXRlTWFwV2ViU2FmZV86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE91ciBkZWZhdWx0IGFscGhhYmV0LCBzaGFyZWQgYmV0d2VlblxyXG4gICAgICogRU5DT0RFRF9WQUxTIGFuZCBFTkNPREVEX1ZBTFNfV0VCU0FGRVxyXG4gICAgICovXHJcbiAgICBFTkNPREVEX1ZBTFNfQkFTRTogJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaJyArICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eicgKyAnMDEyMzQ1Njc4OScsXHJcbiAgICAvKipcclxuICAgICAqIE91ciBkZWZhdWx0IGFscGhhYmV0LiBWYWx1ZSA2NCAoPSkgaXMgc3BlY2lhbDsgaXQgbWVhbnMgXCJub3RoaW5nLlwiXHJcbiAgICAgKi9cclxuICAgIGdldCBFTkNPREVEX1ZBTFMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UgKyAnKy89JztcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIE91ciB3ZWJzYWZlIGFscGhhYmV0LlxyXG4gICAgICovXHJcbiAgICBnZXQgRU5DT0RFRF9WQUxTX1dFQlNBRkUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UgKyAnLV8uJztcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIFdoZXRoZXIgdGhpcyBicm93c2VyIHN1cHBvcnRzIHRoZSBhdG9iIGFuZCBidG9hIGZ1bmN0aW9ucy4gVGhpcyBleHRlbnNpb25cclxuICAgICAqIHN0YXJ0ZWQgYXQgTW96aWxsYSBidXQgaXMgbm93IGltcGxlbWVudGVkIGJ5IG1hbnkgYnJvd3NlcnMuIFdlIHVzZSB0aGVcclxuICAgICAqIEFTU1VNRV8qIHZhcmlhYmxlcyB0byBhdm9pZCBwdWxsaW5nIGluIHRoZSBmdWxsIHVzZXJhZ2VudCBkZXRlY3Rpb24gbGlicmFyeVxyXG4gICAgICogYnV0IHN0aWxsIGFsbG93aW5nIHRoZSBzdGFuZGFyZCBwZXItYnJvd3NlciBjb21waWxhdGlvbnMuXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBIQVNfTkFUSVZFX1NVUFBPUlQ6IHR5cGVvZiBhdG9iID09PSAnZnVuY3Rpb24nLFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZW5jb2RlIGFuIGFycmF5IG9mIGJ5dGVzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCBBbiBhcnJheSBvZiBieXRlcyAobnVtYmVycyB3aXRoXHJcbiAgICAgKiAgICAgdmFsdWUgaW4gWzAsIDI1NV0pIHRvIGVuY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIEJvb2xlYW4gaW5kaWNhdGluZyB3ZSBzaG91bGQgdXNlIHRoZVxyXG4gICAgICogICAgIGFsdGVybmF0aXZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBUaGUgYmFzZTY0IGVuY29kZWQgc3RyaW5nLlxyXG4gICAgICovXHJcbiAgICBlbmNvZGVCeXRlQXJyYXkoaW5wdXQsIHdlYlNhZmUpIHtcclxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdlbmNvZGVCeXRlQXJyYXkgdGFrZXMgYW4gYXJyYXkgYXMgYSBwYXJhbWV0ZXInKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbml0XygpO1xyXG4gICAgICAgIGNvbnN0IGJ5dGVUb0NoYXJNYXAgPSB3ZWJTYWZlXHJcbiAgICAgICAgICAgID8gdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9cclxuICAgICAgICAgICAgOiB0aGlzLmJ5dGVUb0NoYXJNYXBfO1xyXG4gICAgICAgIGNvbnN0IG91dHB1dCA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpICs9IDMpIHtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTEgPSBpbnB1dFtpXTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUyID0gaSArIDEgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUyID0gaGF2ZUJ5dGUyID8gaW5wdXRbaSArIDFdIDogMDtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUzID0gaSArIDIgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUzID0gaGF2ZUJ5dGUzID8gaW5wdXRbaSArIDJdIDogMDtcclxuICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTEgPSBieXRlMSA+PiAyO1xyXG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMiA9ICgoYnl0ZTEgJiAweDAzKSA8PCA0KSB8IChieXRlMiA+PiA0KTtcclxuICAgICAgICAgICAgbGV0IG91dEJ5dGUzID0gKChieXRlMiAmIDB4MGYpIDw8IDIpIHwgKGJ5dGUzID4+IDYpO1xyXG4gICAgICAgICAgICBsZXQgb3V0Qnl0ZTQgPSBieXRlMyAmIDB4M2Y7XHJcbiAgICAgICAgICAgIGlmICghaGF2ZUJ5dGUzKSB7XHJcbiAgICAgICAgICAgICAgICBvdXRCeXRlNCA9IDY0O1xyXG4gICAgICAgICAgICAgICAgaWYgKCFoYXZlQnl0ZTIpIHtcclxuICAgICAgICAgICAgICAgICAgICBvdXRCeXRlMyA9IDY0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG91dHB1dC5wdXNoKGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTFdLCBieXRlVG9DaGFyTWFwW291dEJ5dGUyXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlM10sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTRdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG91dHB1dC5qb2luKCcnKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1lbmNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IEEgc3RyaW5nIHRvIGVuY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIElmIHRydWUsIHdlIHNob3VsZCB1c2UgdGhlXHJcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIGVuY29kZVN0cmluZyhpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIC8vIFNob3J0Y3V0IGZvciBNb3ppbGxhIGJyb3dzZXJzIHRoYXQgaW1wbGVtZW50XHJcbiAgICAgICAgLy8gYSBuYXRpdmUgYmFzZTY0IGVuY29kZXIgaW4gdGhlIGZvcm0gb2YgXCJidG9hL2F0b2JcIlxyXG4gICAgICAgIGlmICh0aGlzLkhBU19OQVRJVkVfU1VQUE9SVCAmJiAhd2ViU2FmZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYnRvYShpbnB1dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmVuY29kZUJ5dGVBcnJheShzdHJpbmdUb0J5dGVBcnJheSQxKGlucHV0KSwgd2ViU2FmZSk7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZGVjb2RlIGEgc3RyaW5nLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCB0byBkZWNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBUcnVlIGlmIHdlIHNob3VsZCB1c2UgdGhlXHJcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGRlY29kZWQgdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIGRlY29kZVN0cmluZyhpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIC8vIFNob3J0Y3V0IGZvciBNb3ppbGxhIGJyb3dzZXJzIHRoYXQgaW1wbGVtZW50XHJcbiAgICAgICAgLy8gYSBuYXRpdmUgYmFzZTY0IGVuY29kZXIgaW4gdGhlIGZvcm0gb2YgXCJidG9hL2F0b2JcIlxyXG4gICAgICAgIGlmICh0aGlzLkhBU19OQVRJVkVfU1VQUE9SVCAmJiAhd2ViU2FmZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXRvYihpbnB1dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBieXRlQXJyYXlUb1N0cmluZyh0aGlzLmRlY29kZVN0cmluZ1RvQnl0ZUFycmF5KGlucHV0LCB3ZWJTYWZlKSk7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZGVjb2RlIGEgc3RyaW5nLlxyXG4gICAgICpcclxuICAgICAqIEluIGJhc2UtNjQgZGVjb2RpbmcsIGdyb3VwcyBvZiBmb3VyIGNoYXJhY3RlcnMgYXJlIGNvbnZlcnRlZCBpbnRvIHRocmVlXHJcbiAgICAgKiBieXRlcy4gIElmIHRoZSBlbmNvZGVyIGRpZCBub3QgYXBwbHkgcGFkZGluZywgdGhlIGlucHV0IGxlbmd0aCBtYXkgbm90XHJcbiAgICAgKiBiZSBhIG11bHRpcGxlIG9mIDQuXHJcbiAgICAgKlxyXG4gICAgICogSW4gdGhpcyBjYXNlLCB0aGUgbGFzdCBncm91cCB3aWxsIGhhdmUgZmV3ZXIgdGhhbiA0IGNoYXJhY3RlcnMsIGFuZFxyXG4gICAgICogcGFkZGluZyB3aWxsIGJlIGluZmVycmVkLiAgSWYgdGhlIGdyb3VwIGhhcyBvbmUgb3IgdHdvIGNoYXJhY3RlcnMsIGl0IGRlY29kZXNcclxuICAgICAqIHRvIG9uZSBieXRlLiAgSWYgdGhlIGdyb3VwIGhhcyB0aHJlZSBjaGFyYWN0ZXJzLCBpdCBkZWNvZGVzIHRvIHR3byBieXRlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgSW5wdXQgdG8gZGVjb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgVHJ1ZSBpZiB3ZSBzaG91bGQgdXNlIHRoZSB3ZWItc2FmZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSBkZWNvZGVkIHZhbHVlLlxyXG4gICAgICovXHJcbiAgICBkZWNvZGVTdHJpbmdUb0J5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIHRoaXMuaW5pdF8oKTtcclxuICAgICAgICBjb25zdCBjaGFyVG9CeXRlTWFwID0gd2ViU2FmZVxyXG4gICAgICAgICAgICA/IHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfXHJcbiAgICAgICAgICAgIDogdGhpcy5jaGFyVG9CeXRlTWFwXztcclxuICAgICAgICBjb25zdCBvdXRwdXQgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDspIHtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTEgPSBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKyspXTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUyID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTIgPSBoYXZlQnl0ZTIgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiAwO1xyXG4gICAgICAgICAgICArK2k7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhdmVCeXRlMyA9IGkgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUzID0gaGF2ZUJ5dGUzID8gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSldIDogNjQ7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGU0ID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTQgPSBoYXZlQnl0ZTQgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiA2NDtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICBpZiAoYnl0ZTEgPT0gbnVsbCB8fCBieXRlMiA9PSBudWxsIHx8IGJ5dGUzID09IG51bGwgfHwgYnl0ZTQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMSA9IChieXRlMSA8PCAyKSB8IChieXRlMiA+PiA0KTtcclxuICAgICAgICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTEpO1xyXG4gICAgICAgICAgICBpZiAoYnl0ZTMgIT09IDY0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRCeXRlMiA9ICgoYnl0ZTIgPDwgNCkgJiAweGYwKSB8IChieXRlMyA+PiAyKTtcclxuICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUyKTtcclxuICAgICAgICAgICAgICAgIGlmIChieXRlNCAhPT0gNjQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvdXRCeXRlMyA9ICgoYnl0ZTMgPDwgNikgJiAweGMwKSB8IGJ5dGU0O1xyXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogTGF6eSBzdGF0aWMgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24uIENhbGxlZCBiZWZvcmVcclxuICAgICAqIGFjY2Vzc2luZyBhbnkgb2YgdGhlIHN0YXRpYyBtYXAgdmFyaWFibGVzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgaW5pdF8oKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmJ5dGVUb0NoYXJNYXBfKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcF8gPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlXyA9IHt9O1xyXG4gICAgICAgICAgICAvLyBXZSB3YW50IHF1aWNrIG1hcHBpbmdzIGJhY2sgYW5kIGZvcnRoLCBzbyB3ZSBwcmVjb21wdXRlIHR3byBtYXBzLlxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuRU5DT0RFRF9WQUxTLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBfW2ldID0gdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KGkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwX1t0aGlzLmJ5dGVUb0NoYXJNYXBfW2ldXSA9IGk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1tpXSA9IHRoaXMuRU5DT0RFRF9WQUxTX1dFQlNBRkUuY2hhckF0KGkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9baV1dID0gaTtcclxuICAgICAgICAgICAgICAgIC8vIEJlIGZvcmdpdmluZyB3aGVuIGRlY29kaW5nIGFuZCBjb3JyZWN0bHkgZGVjb2RlIGJvdGggZW5jb2RpbmdzLlxyXG4gICAgICAgICAgICAgICAgaWYgKGkgPj0gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfW3RoaXMuRU5DT0RFRF9WQUxTX1dFQlNBRkUuY2hhckF0KGkpXSA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KGkpXSA9IGk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBVUkwtc2FmZSBiYXNlNjQgZW5jb2RpbmdcclxuICovXHJcbmNvbnN0IGJhc2U2NEVuY29kZSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIGNvbnN0IHV0ZjhCeXRlcyA9IHN0cmluZ1RvQnl0ZUFycmF5JDEoc3RyKTtcclxuICAgIHJldHVybiBiYXNlNjQuZW5jb2RlQnl0ZUFycmF5KHV0ZjhCeXRlcywgdHJ1ZSk7XHJcbn07XHJcbi8qKlxyXG4gKiBVUkwtc2FmZSBiYXNlNjQgZW5jb2RpbmcgKHdpdGhvdXQgXCIuXCIgcGFkZGluZyBpbiB0aGUgZW5kKS5cclxuICogZS5nLiBVc2VkIGluIEpTT04gV2ViIFRva2VuIChKV1QpIHBhcnRzLlxyXG4gKi9cclxuY29uc3QgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICAvLyBVc2UgYmFzZTY0dXJsIGVuY29kaW5nIGFuZCByZW1vdmUgcGFkZGluZyBpbiB0aGUgZW5kIChkb3QgY2hhcmFjdGVycykuXHJcbiAgICByZXR1cm4gYmFzZTY0RW5jb2RlKHN0cikucmVwbGFjZSgvXFwuL2csICcnKTtcclxufTtcclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBkZWNvZGluZ1xyXG4gKlxyXG4gKiBOT1RFOiBETyBOT1QgdXNlIHRoZSBnbG9iYWwgYXRvYigpIGZ1bmN0aW9uIC0gaXQgZG9lcyBOT1Qgc3VwcG9ydCB0aGVcclxuICogYmFzZTY0VXJsIHZhcmlhbnQgZW5jb2RpbmcuXHJcbiAqXHJcbiAqIEBwYXJhbSBzdHIgVG8gYmUgZGVjb2RlZFxyXG4gKiBAcmV0dXJuIERlY29kZWQgcmVzdWx0LCBpZiBwb3NzaWJsZVxyXG4gKi9cclxuY29uc3QgYmFzZTY0RGVjb2RlID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gYmFzZTY0LmRlY29kZVN0cmluZyhzdHIsIHRydWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdiYXNlNjREZWNvZGUgZmFpbGVkOiAnLCBlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRG8gYSBkZWVwLWNvcHkgb2YgYmFzaWMgSmF2YVNjcmlwdCBPYmplY3RzIG9yIEFycmF5cy5cclxuICovXHJcbmZ1bmN0aW9uIGRlZXBDb3B5KHZhbHVlKSB7XHJcbiAgICByZXR1cm4gZGVlcEV4dGVuZCh1bmRlZmluZWQsIHZhbHVlKTtcclxufVxyXG4vKipcclxuICogQ29weSBwcm9wZXJ0aWVzIGZyb20gc291cmNlIHRvIHRhcmdldCAocmVjdXJzaXZlbHkgYWxsb3dzIGV4dGVuc2lvblxyXG4gKiBvZiBPYmplY3RzIGFuZCBBcnJheXMpLiAgU2NhbGFyIHZhbHVlcyBpbiB0aGUgdGFyZ2V0IGFyZSBvdmVyLXdyaXR0ZW4uXHJcbiAqIElmIHRhcmdldCBpcyB1bmRlZmluZWQsIGFuIG9iamVjdCBvZiB0aGUgYXBwcm9wcmlhdGUgdHlwZSB3aWxsIGJlIGNyZWF0ZWRcclxuICogKGFuZCByZXR1cm5lZCkuXHJcbiAqXHJcbiAqIFdlIHJlY3Vyc2l2ZWx5IGNvcHkgYWxsIGNoaWxkIHByb3BlcnRpZXMgb2YgcGxhaW4gT2JqZWN0cyBpbiB0aGUgc291cmNlLSBzb1xyXG4gKiB0aGF0IG5hbWVzcGFjZS0gbGlrZSBkaWN0aW9uYXJpZXMgYXJlIG1lcmdlZC5cclxuICpcclxuICogTm90ZSB0aGF0IHRoZSB0YXJnZXQgY2FuIGJlIGEgZnVuY3Rpb24sIGluIHdoaWNoIGNhc2UgdGhlIHByb3BlcnRpZXMgaW5cclxuICogdGhlIHNvdXJjZSBPYmplY3QgYXJlIGNvcGllZCBvbnRvIGl0IGFzIHN0YXRpYyBwcm9wZXJ0aWVzIG9mIHRoZSBGdW5jdGlvbi5cclxuICpcclxuICogTm90ZTogd2UgZG9uJ3QgbWVyZ2UgX19wcm90b19fIHRvIHByZXZlbnQgcHJvdG90eXBlIHBvbGx1dGlvblxyXG4gKi9cclxuZnVuY3Rpb24gZGVlcEV4dGVuZCh0YXJnZXQsIHNvdXJjZSkge1xyXG4gICAgaWYgKCEoc291cmNlIGluc3RhbmNlb2YgT2JqZWN0KSkge1xyXG4gICAgICAgIHJldHVybiBzb3VyY2U7XHJcbiAgICB9XHJcbiAgICBzd2l0Y2ggKHNvdXJjZS5jb25zdHJ1Y3Rvcikge1xyXG4gICAgICAgIGNhc2UgRGF0ZTpcclxuICAgICAgICAgICAgLy8gVHJlYXQgRGF0ZXMgbGlrZSBzY2FsYXJzOyBpZiB0aGUgdGFyZ2V0IGRhdGUgb2JqZWN0IGhhZCBhbnkgY2hpbGRcclxuICAgICAgICAgICAgLy8gcHJvcGVydGllcyAtIHRoZXkgd2lsbCBiZSBsb3N0IVxyXG4gICAgICAgICAgICBjb25zdCBkYXRlVmFsdWUgPSBzb3VyY2U7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlVmFsdWUuZ2V0VGltZSgpKTtcclxuICAgICAgICBjYXNlIE9iamVjdDpcclxuICAgICAgICAgICAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEFycmF5OlxyXG4gICAgICAgICAgICAvLyBBbHdheXMgY29weSB0aGUgYXJyYXkgc291cmNlIGFuZCBvdmVyd3JpdGUgdGhlIHRhcmdldC5cclxuICAgICAgICAgICAgdGFyZ2V0ID0gW107XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIC8vIE5vdCBhIHBsYWluIE9iamVjdCAtIHRyZWF0IGl0IGFzIGEgc2NhbGFyLlxyXG4gICAgICAgICAgICByZXR1cm4gc291cmNlO1xyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBwcm9wIGluIHNvdXJjZSkge1xyXG4gICAgICAgIC8vIHVzZSBpc1ZhbGlkS2V5IHRvIGd1YXJkIGFnYWluc3QgcHJvdG90eXBlIHBvbGx1dGlvbi4gU2VlIGh0dHBzOi8vc255ay5pby92dWxuL1NOWUstSlMtTE9EQVNILTQ1MDIwMlxyXG4gICAgICAgIGlmICghc291cmNlLmhhc093blByb3BlcnR5KHByb3ApIHx8ICFpc1ZhbGlkS2V5KHByb3ApKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0YXJnZXRbcHJvcF0gPSBkZWVwRXh0ZW5kKHRhcmdldFtwcm9wXSwgc291cmNlW3Byb3BdKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0YXJnZXQ7XHJcbn1cclxuZnVuY3Rpb24gaXNWYWxpZEtleShrZXkpIHtcclxuICAgIHJldHVybiBrZXkgIT09ICdfX3Byb3RvX18nO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIERlZmVycmVkIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMucmVqZWN0ID0gKCkgPT4geyB9O1xyXG4gICAgICAgIHRoaXMucmVzb2x2ZSA9ICgpID0+IHsgfTtcclxuICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZSA9IHJlc29sdmU7XHJcbiAgICAgICAgICAgIHRoaXMucmVqZWN0ID0gcmVqZWN0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBPdXIgQVBJIGludGVybmFscyBhcmUgbm90IHByb21pc2VpZmllZCBhbmQgY2Fubm90IGJlY2F1c2Ugb3VyIGNhbGxiYWNrIEFQSXMgaGF2ZSBzdWJ0bGUgZXhwZWN0YXRpb25zIGFyb3VuZFxyXG4gICAgICogaW52b2tpbmcgcHJvbWlzZXMgaW5saW5lLCB3aGljaCBQcm9taXNlcyBhcmUgZm9yYmlkZGVuIHRvIGRvLiBUaGlzIG1ldGhvZCBhY2NlcHRzIGFuIG9wdGlvbmFsIG5vZGUtc3R5bGUgY2FsbGJhY2tcclxuICAgICAqIGFuZCByZXR1cm5zIGEgbm9kZS1zdHlsZSBjYWxsYmFjayB3aGljaCB3aWxsIHJlc29sdmUgb3IgcmVqZWN0IHRoZSBEZWZlcnJlZCdzIHByb21pc2UuXHJcbiAgICAgKi9cclxuICAgIHdyYXBDYWxsYmFjayhjYWxsYmFjaykge1xyXG4gICAgICAgIHJldHVybiAoZXJyb3IsIHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNvbHZlKHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBBdHRhY2hpbmcgbm9vcCBoYW5kbGVyIGp1c3QgaW4gY2FzZSBkZXZlbG9wZXIgd2Fzbid0IGV4cGVjdGluZ1xyXG4gICAgICAgICAgICAgICAgLy8gcHJvbWlzZXNcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvbWlzZS5jYXRjaCgoKSA9PiB7IH0pO1xyXG4gICAgICAgICAgICAgICAgLy8gU29tZSBvZiBvdXIgY2FsbGJhY2tzIGRvbid0IGV4cGVjdCBhIHZhbHVlIGFuZCBvdXIgb3duIHRlc3RzXHJcbiAgICAgICAgICAgICAgICAvLyBhc3NlcnQgdGhhdCB0aGUgcGFyYW1ldGVyIGxlbmd0aCBpcyAxXHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2subGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IsIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlTW9ja1VzZXJUb2tlbih0b2tlbiwgcHJvamVjdElkKSB7XHJcbiAgICBpZiAodG9rZW4udWlkKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgXCJ1aWRcIiBmaWVsZCBpcyBubyBsb25nZXIgc3VwcG9ydGVkIGJ5IG1vY2tVc2VyVG9rZW4uIFBsZWFzZSB1c2UgXCJzdWJcIiBpbnN0ZWFkIGZvciBGaXJlYmFzZSBBdXRoIFVzZXIgSUQuJyk7XHJcbiAgICB9XHJcbiAgICAvLyBVbnNlY3VyZWQgSldUcyB1c2UgXCJub25lXCIgYXMgdGhlIGFsZ29yaXRobS5cclxuICAgIGNvbnN0IGhlYWRlciA9IHtcclxuICAgICAgICBhbGc6ICdub25lJyxcclxuICAgICAgICB0eXBlOiAnSldUJ1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHByb2plY3QgPSBwcm9qZWN0SWQgfHwgJ2RlbW8tcHJvamVjdCc7XHJcbiAgICBjb25zdCBpYXQgPSB0b2tlbi5pYXQgfHwgMDtcclxuICAgIGNvbnN0IHN1YiA9IHRva2VuLnN1YiB8fCB0b2tlbi51c2VyX2lkO1xyXG4gICAgaWYgKCFzdWIpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtb2NrVXNlclRva2VuIG11c3QgY29udGFpbiAnc3ViJyBvciAndXNlcl9pZCcgZmllbGQhXCIpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oeyBcclxuICAgICAgICAvLyBTZXQgYWxsIHJlcXVpcmVkIGZpZWxkcyB0byBkZWNlbnQgZGVmYXVsdHNcclxuICAgICAgICBpc3M6IGBodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vJHtwcm9qZWN0fWAsIGF1ZDogcHJvamVjdCwgaWF0LCBleHA6IGlhdCArIDM2MDAsIGF1dGhfdGltZTogaWF0LCBzdWIsIHVzZXJfaWQ6IHN1YiwgZmlyZWJhc2U6IHtcclxuICAgICAgICAgICAgc2lnbl9pbl9wcm92aWRlcjogJ2N1c3RvbScsXHJcbiAgICAgICAgICAgIGlkZW50aXRpZXM6IHt9XHJcbiAgICAgICAgfSB9LCB0b2tlbik7XHJcbiAgICAvLyBVbnNlY3VyZWQgSldUcyB1c2UgdGhlIGVtcHR5IHN0cmluZyBhcyBhIHNpZ25hdHVyZS5cclxuICAgIGNvbnN0IHNpZ25hdHVyZSA9ICcnO1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhKU09OLnN0cmluZ2lmeShoZWFkZXIpKSxcclxuICAgICAgICBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhKU09OLnN0cmluZ2lmeShwYXlsb2FkKSksXHJcbiAgICAgICAgc2lnbmF0dXJlXHJcbiAgICBdLmpvaW4oJy4nKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBuYXZpZ2F0b3IudXNlckFnZW50IHN0cmluZyBvciAnJyBpZiBpdCdzIG5vdCBkZWZpbmVkLlxyXG4gKiBAcmV0dXJuIHVzZXIgYWdlbnQgc3RyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRVQSgpIHtcclxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgIHR5cGVvZiBuYXZpZ2F0b3JbJ3VzZXJBZ2VudCddID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiBuYXZpZ2F0b3JbJ3VzZXJBZ2VudCddO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgQ29yZG92YSAvIFBob25lR2FwIC8gSW9uaWMgZnJhbWV3b3JrcyBvbiBhIG1vYmlsZSBkZXZpY2UuXHJcbiAqXHJcbiAqIERlbGliZXJhdGVseSBkb2VzIG5vdCByZWx5IG9uIGNoZWNraW5nIGBmaWxlOi8vYCBVUkxzIChhcyB0aGlzIGZhaWxzIFBob25lR2FwXHJcbiAqIGluIHRoZSBSaXBwbGUgZW11bGF0b3IpIG5vciBDb3Jkb3ZhIGBvbkRldmljZVJlYWR5YCwgd2hpY2ggd291bGQgbm9ybWFsbHlcclxuICogd2FpdCBmb3IgYSBjYWxsYmFjay5cclxuICovXHJcbmZ1bmN0aW9uIGlzTW9iaWxlQ29yZG92YSgpIHtcclxuICAgIHJldHVybiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICAvLyBAdHMtaWdub3JlIFNldHRpbmcgdXAgYW4gYnJvYWRseSBhcHBsaWNhYmxlIGluZGV4IHNpZ25hdHVyZSBmb3IgV2luZG93XHJcbiAgICAgICAgLy8ganVzdCB0byBkZWFsIHdpdGggdGhpcyBjYXNlIHdvdWxkIHByb2JhYmx5IGJlIGEgYmFkIGlkZWEuXHJcbiAgICAgICAgISEod2luZG93Wydjb3Jkb3ZhJ10gfHwgd2luZG93WydwaG9uZWdhcCddIHx8IHdpbmRvd1snUGhvbmVHYXAnXSkgJiZcclxuICAgICAgICAvaW9zfGlwaG9uZXxpcG9kfGlwYWR8YW5kcm9pZHxibGFja2JlcnJ5fGllbW9iaWxlL2kudGVzdChnZXRVQSgpKSk7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBOb2RlLmpzLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgTm9kZS5qcyBlbnZpcm9ubWVudCBpcyBkZXRlY3RlZC5cclxuICovXHJcbi8vIE5vZGUgZGV0ZWN0aW9uIGxvZ2ljIGZyb206IGh0dHBzOi8vZ2l0aHViLmNvbS9pbGlha2FuL2RldGVjdC1ub2RlL1xyXG5mdW5jdGlvbiBpc05vZGUoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGdsb2JhbC5wcm9jZXNzKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgQnJvd3NlciBFbnZpcm9ubWVudFxyXG4gKi9cclxuZnVuY3Rpb24gaXNCcm93c2VyKCkge1xyXG4gICAgcmV0dXJuIHR5cGVvZiBzZWxmID09PSAnb2JqZWN0JyAmJiBzZWxmLnNlbGYgPT09IHNlbGY7XHJcbn1cclxuZnVuY3Rpb24gaXNCcm93c2VyRXh0ZW5zaW9uKCkge1xyXG4gICAgY29uc3QgcnVudGltZSA9IHR5cGVvZiBjaHJvbWUgPT09ICdvYmplY3QnXHJcbiAgICAgICAgPyBjaHJvbWUucnVudGltZVxyXG4gICAgICAgIDogdHlwZW9mIGJyb3dzZXIgPT09ICdvYmplY3QnXHJcbiAgICAgICAgICAgID8gYnJvd3Nlci5ydW50aW1lXHJcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xyXG4gICAgcmV0dXJuIHR5cGVvZiBydW50aW1lID09PSAnb2JqZWN0JyAmJiBydW50aW1lLmlkICE9PSB1bmRlZmluZWQ7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBSZWFjdCBOYXRpdmUuXHJcbiAqXHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBSZWFjdE5hdGl2ZSBlbnZpcm9ubWVudCBpcyBkZXRlY3RlZC5cclxuICovXHJcbmZ1bmN0aW9uIGlzUmVhY3ROYXRpdmUoKSB7XHJcbiAgICByZXR1cm4gKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICdvYmplY3QnICYmIG5hdmlnYXRvclsncHJvZHVjdCddID09PSAnUmVhY3ROYXRpdmUnKTtcclxufVxyXG4vKiogRGV0ZWN0cyBFbGVjdHJvbiBhcHBzLiAqL1xyXG5mdW5jdGlvbiBpc0VsZWN0cm9uKCkge1xyXG4gICAgcmV0dXJuIGdldFVBKCkuaW5kZXhPZignRWxlY3Ryb24vJykgPj0gMDtcclxufVxyXG4vKiogRGV0ZWN0cyBJbnRlcm5ldCBFeHBsb3Jlci4gKi9cclxuZnVuY3Rpb24gaXNJRSgpIHtcclxuICAgIGNvbnN0IHVhID0gZ2V0VUEoKTtcclxuICAgIHJldHVybiB1YS5pbmRleE9mKCdNU0lFICcpID49IDAgfHwgdWEuaW5kZXhPZignVHJpZGVudC8nKSA+PSAwO1xyXG59XHJcbi8qKiBEZXRlY3RzIFVuaXZlcnNhbCBXaW5kb3dzIFBsYXRmb3JtIGFwcHMuICovXHJcbmZ1bmN0aW9uIGlzVVdQKCkge1xyXG4gICAgcmV0dXJuIGdldFVBKCkuaW5kZXhPZignTVNBcHBIb3N0LycpID49IDA7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCB3aGV0aGVyIHRoZSBjdXJyZW50IFNESyBidWlsZCBpcyB0aGUgTm9kZSB2ZXJzaW9uLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgaXQncyB0aGUgTm9kZSBTREsgYnVpbGQuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc05vZGVTZGsoKSB7XHJcbiAgICByZXR1cm4gQ09OU1RBTlRTLk5PREVfQ0xJRU5UID09PSB0cnVlIHx8IENPTlNUQU5UUy5OT0RFX0FETUlOID09PSB0cnVlO1xyXG59XHJcbi8qKiBSZXR1cm5zIHRydWUgaWYgd2UgYXJlIHJ1bm5pbmcgaW4gU2FmYXJpLiAqL1xyXG5mdW5jdGlvbiBpc1NhZmFyaSgpIHtcclxuICAgIHJldHVybiAoIWlzTm9kZSgpICYmXHJcbiAgICAgICAgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnU2FmYXJpJykgJiZcclxuICAgICAgICAhbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnQ2hyb21lJykpO1xyXG59XHJcbi8qKlxyXG4gKiBUaGlzIG1ldGhvZCBjaGVja3MgaWYgaW5kZXhlZERCIGlzIHN1cHBvcnRlZCBieSBjdXJyZW50IGJyb3dzZXIvc2VydmljZSB3b3JrZXIgY29udGV4dFxyXG4gKiBAcmV0dXJuIHRydWUgaWYgaW5kZXhlZERCIGlzIHN1cHBvcnRlZCBieSBjdXJyZW50IGJyb3dzZXIvc2VydmljZSB3b3JrZXIgY29udGV4dFxyXG4gKi9cclxuZnVuY3Rpb24gaXNJbmRleGVkREJBdmFpbGFibGUoKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIGluZGV4ZWREQiA9PT0gJ29iamVjdCc7XHJcbn1cclxuLyoqXHJcbiAqIFRoaXMgbWV0aG9kIHZhbGlkYXRlcyBicm93c2VyL3N3IGNvbnRleHQgZm9yIGluZGV4ZWREQiBieSBvcGVuaW5nIGEgZHVtbXkgaW5kZXhlZERCIGRhdGFiYXNlIGFuZCByZWplY3RcclxuICogaWYgZXJyb3JzIG9jY3VyIGR1cmluZyB0aGUgZGF0YWJhc2Ugb3BlbiBvcGVyYXRpb24uXHJcbiAqXHJcbiAqIEB0aHJvd3MgZXhjZXB0aW9uIGlmIGN1cnJlbnQgYnJvd3Nlci9zdyBjb250ZXh0IGNhbid0IHJ1biBpZGIub3BlbiAoZXg6IFNhZmFyaSBpZnJhbWUsIEZpcmVmb3hcclxuICogcHJpdmF0ZSBicm93c2luZylcclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUoKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGxldCBwcmVFeGlzdCA9IHRydWU7XHJcbiAgICAgICAgICAgIGNvbnN0IERCX0NIRUNLX05BTUUgPSAndmFsaWRhdGUtYnJvd3Nlci1jb250ZXh0LWZvci1pbmRleGVkZGItYW5hbHl0aWNzLW1vZHVsZSc7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSBzZWxmLmluZGV4ZWREQi5vcGVuKERCX0NIRUNLX05BTUUpO1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3QucmVzdWx0LmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAvLyBkZWxldGUgZGF0YWJhc2Ugb25seSB3aGVuIGl0IGRvZXNuJ3QgcHJlLWV4aXN0XHJcbiAgICAgICAgICAgICAgICBpZiAoIXByZUV4aXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5pbmRleGVkREIuZGVsZXRlRGF0YWJhc2UoREJfQ0hFQ0tfTkFNRSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHByZUV4aXN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgICAgIHJlamVjdCgoKF9hID0gcmVxdWVzdC5lcnJvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1lc3NhZ2UpIHx8ICcnKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIFRoaXMgbWV0aG9kIGNoZWNrcyB3aGV0aGVyIGNvb2tpZSBpcyBlbmFibGVkIHdpdGhpbiBjdXJyZW50IGJyb3dzZXJcclxuICogQHJldHVybiB0cnVlIGlmIGNvb2tpZSBpcyBlbmFibGVkIHdpdGhpbiBjdXJyZW50IGJyb3dzZXJcclxuICovXHJcbmZ1bmN0aW9uIGFyZUNvb2tpZXNFbmFibGVkKCkge1xyXG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICd1bmRlZmluZWQnIHx8ICFuYXZpZ2F0b3IuY29va2llRW5hYmxlZCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbi8qKlxyXG4gKiBQb2x5ZmlsbCBmb3IgYGdsb2JhbFRoaXNgIG9iamVjdC5cclxuICogQHJldHVybnMgdGhlIGBnbG9iYWxUaGlzYCBvYmplY3QgZm9yIHRoZSBnaXZlbiBlbnZpcm9ubWVudC5cclxuICovXHJcbmZ1bmN0aW9uIGdldEdsb2JhbCgpIHtcclxuICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gc2VsZjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiB3aW5kb3c7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gZ2xvYmFsO1xyXG4gICAgfVxyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdVbmFibGUgdG8gbG9jYXRlIGdsb2JhbCBvYmplY3QuJyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgU3RhbmRhcmRpemVkIEZpcmViYXNlIEVycm9yLlxyXG4gKlxyXG4gKiBVc2FnZTpcclxuICpcclxuICogICAvLyBUeXBlc2NyaXB0IHN0cmluZyBsaXRlcmFscyBmb3IgdHlwZS1zYWZlIGNvZGVzXHJcbiAqICAgdHlwZSBFcnIgPVxyXG4gKiAgICAgJ3Vua25vd24nIHxcclxuICogICAgICdvYmplY3Qtbm90LWZvdW5kJ1xyXG4gKiAgICAgO1xyXG4gKlxyXG4gKiAgIC8vIENsb3N1cmUgZW51bSBmb3IgdHlwZS1zYWZlIGVycm9yIGNvZGVzXHJcbiAqICAgLy8gYXQtZW51bSB7c3RyaW5nfVxyXG4gKiAgIHZhciBFcnIgPSB7XHJcbiAqICAgICBVTktOT1dOOiAndW5rbm93bicsXHJcbiAqICAgICBPQkpFQ1RfTk9UX0ZPVU5EOiAnb2JqZWN0LW5vdC1mb3VuZCcsXHJcbiAqICAgfVxyXG4gKlxyXG4gKiAgIGxldCBlcnJvcnM6IE1hcDxFcnIsIHN0cmluZz4gPSB7XHJcbiAqICAgICAnZ2VuZXJpYy1lcnJvcic6IFwiVW5rbm93biBlcnJvclwiLFxyXG4gKiAgICAgJ2ZpbGUtbm90LWZvdW5kJzogXCJDb3VsZCBub3QgZmluZCBmaWxlOiB7JGZpbGV9XCIsXHJcbiAqICAgfTtcclxuICpcclxuICogICAvLyBUeXBlLXNhZmUgZnVuY3Rpb24gLSBtdXN0IHBhc3MgYSB2YWxpZCBlcnJvciBjb2RlIGFzIHBhcmFtLlxyXG4gKiAgIGxldCBlcnJvciA9IG5ldyBFcnJvckZhY3Rvcnk8RXJyPignc2VydmljZScsICdTZXJ2aWNlJywgZXJyb3JzKTtcclxuICpcclxuICogICAuLi5cclxuICogICB0aHJvdyBlcnJvci5jcmVhdGUoRXJyLkdFTkVSSUMpO1xyXG4gKiAgIC4uLlxyXG4gKiAgIHRocm93IGVycm9yLmNyZWF0ZShFcnIuRklMRV9OT1RfRk9VTkQsIHsnZmlsZSc6IGZpbGVOYW1lfSk7XHJcbiAqICAgLi4uXHJcbiAqICAgLy8gU2VydmljZTogQ291bGQgbm90IGZpbGUgZmlsZTogZm9vLnR4dCAoc2VydmljZS9maWxlLW5vdC1mb3VuZCkuXHJcbiAqXHJcbiAqICAgY2F0Y2ggKGUpIHtcclxuICogICAgIGFzc2VydChlLm1lc3NhZ2UgPT09IFwiQ291bGQgbm90IGZpbmQgZmlsZTogZm9vLnR4dC5cIik7XHJcbiAqICAgICBpZiAoZS5jb2RlID09PSAnc2VydmljZS9maWxlLW5vdC1mb3VuZCcpIHtcclxuICogICAgICAgY29uc29sZS5sb2coXCJDb3VsZCBub3QgcmVhZCBmaWxlOiBcIiArIGVbJ2ZpbGUnXSk7XHJcbiAqICAgICB9XHJcbiAqICAgfVxyXG4gKi9cclxuY29uc3QgRVJST1JfTkFNRSA9ICdGaXJlYmFzZUVycm9yJztcclxuLy8gQmFzZWQgb24gY29kZSBmcm9tOlxyXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9FcnJvciNDdXN0b21fRXJyb3JfVHlwZXNcclxuY2xhc3MgRmlyZWJhc2VFcnJvciBleHRlbmRzIEVycm9yIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvZGUsIG1lc3NhZ2UsIGN1c3RvbURhdGEpIHtcclxuICAgICAgICBzdXBlcihtZXNzYWdlKTtcclxuICAgICAgICB0aGlzLmNvZGUgPSBjb2RlO1xyXG4gICAgICAgIHRoaXMuY3VzdG9tRGF0YSA9IGN1c3RvbURhdGE7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gRVJST1JfTkFNRTtcclxuICAgICAgICAvLyBGaXggRm9yIEVTNVxyXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9NaWNyb3NvZnQvVHlwZVNjcmlwdC13aWtpL2Jsb2IvbWFzdGVyL0JyZWFraW5nLUNoYW5nZXMubWQjZXh0ZW5kaW5nLWJ1aWx0LWlucy1saWtlLWVycm9yLWFycmF5LWFuZC1tYXAtbWF5LW5vLWxvbmdlci13b3JrXHJcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIEZpcmViYXNlRXJyb3IucHJvdG90eXBlKTtcclxuICAgICAgICAvLyBNYWludGFpbnMgcHJvcGVyIHN0YWNrIHRyYWNlIGZvciB3aGVyZSBvdXIgZXJyb3Igd2FzIHRocm93bi5cclxuICAgICAgICAvLyBPbmx5IGF2YWlsYWJsZSBvbiBWOC5cclxuICAgICAgICBpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcclxuICAgICAgICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgRXJyb3JGYWN0b3J5LnByb3RvdHlwZS5jcmVhdGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5jbGFzcyBFcnJvckZhY3Rvcnkge1xyXG4gICAgY29uc3RydWN0b3Ioc2VydmljZSwgc2VydmljZU5hbWUsIGVycm9ycykge1xyXG4gICAgICAgIHRoaXMuc2VydmljZSA9IHNlcnZpY2U7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlTmFtZSA9IHNlcnZpY2VOYW1lO1xyXG4gICAgICAgIHRoaXMuZXJyb3JzID0gZXJyb3JzO1xyXG4gICAgfVxyXG4gICAgY3JlYXRlKGNvZGUsIC4uLmRhdGEpIHtcclxuICAgICAgICBjb25zdCBjdXN0b21EYXRhID0gZGF0YVswXSB8fCB7fTtcclxuICAgICAgICBjb25zdCBmdWxsQ29kZSA9IGAke3RoaXMuc2VydmljZX0vJHtjb2RlfWA7XHJcbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSB0aGlzLmVycm9yc1tjb2RlXTtcclxuICAgICAgICBjb25zdCBtZXNzYWdlID0gdGVtcGxhdGUgPyByZXBsYWNlVGVtcGxhdGUodGVtcGxhdGUsIGN1c3RvbURhdGEpIDogJ0Vycm9yJztcclxuICAgICAgICAvLyBTZXJ2aWNlIE5hbWU6IEVycm9yIG1lc3NhZ2UgKHNlcnZpY2UvY29kZSkuXHJcbiAgICAgICAgY29uc3QgZnVsbE1lc3NhZ2UgPSBgJHt0aGlzLnNlcnZpY2VOYW1lfTogJHttZXNzYWdlfSAoJHtmdWxsQ29kZX0pLmA7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRmlyZWJhc2VFcnJvcihmdWxsQ29kZSwgZnVsbE1lc3NhZ2UsIGN1c3RvbURhdGEpO1xyXG4gICAgICAgIHJldHVybiBlcnJvcjtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiByZXBsYWNlVGVtcGxhdGUodGVtcGxhdGUsIGRhdGEpIHtcclxuICAgIHJldHVybiB0ZW1wbGF0ZS5yZXBsYWNlKFBBVFRFUk4sIChfLCBrZXkpID0+IHtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IGRhdGFba2V5XTtcclxuICAgICAgICByZXR1cm4gdmFsdWUgIT0gbnVsbCA/IFN0cmluZyh2YWx1ZSkgOiBgPCR7a2V5fT8+YDtcclxuICAgIH0pO1xyXG59XHJcbmNvbnN0IFBBVFRFUk4gPSAvXFx7XFwkKFtefV0rKX0vZztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEV2YWx1YXRlcyBhIEpTT04gc3RyaW5nIGludG8gYSBqYXZhc2NyaXB0IG9iamVjdC5cclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHN0ciBBIHN0cmluZyBjb250YWluaW5nIEpTT04uXHJcbiAqIEByZXR1cm4geyp9IFRoZSBqYXZhc2NyaXB0IG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHNwZWNpZmllZCBKU09OLlxyXG4gKi9cclxuZnVuY3Rpb24ganNvbkV2YWwoc3RyKSB7XHJcbiAgICByZXR1cm4gSlNPTi5wYXJzZShzdHIpO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIEpTT04gcmVwcmVzZW50aW5nIGEgamF2YXNjcmlwdCBvYmplY3QuXHJcbiAqIEBwYXJhbSB7Kn0gZGF0YSBKYXZhc2NyaXB0IG9iamVjdCB0byBiZSBzdHJpbmdpZmllZC5cclxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgSlNPTiBjb250ZW50cyBvZiB0aGUgb2JqZWN0LlxyXG4gKi9cclxuZnVuY3Rpb24gc3RyaW5naWZ5KGRhdGEpIHtcclxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGludG8gY29uc3RpdHVlbnQgcGFydHMuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gd2l0aCBpbnZhbGlkIC8gaW5jb21wbGV0ZSBjbGFpbXMgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBkZWNvZGUgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGxldCBoZWFkZXIgPSB7fSwgY2xhaW1zID0ge30sIGRhdGEgPSB7fSwgc2lnbmF0dXJlID0gJyc7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHBhcnRzID0gdG9rZW4uc3BsaXQoJy4nKTtcclxuICAgICAgICBoZWFkZXIgPSBqc29uRXZhbChiYXNlNjREZWNvZGUocGFydHNbMF0pIHx8ICcnKTtcclxuICAgICAgICBjbGFpbXMgPSBqc29uRXZhbChiYXNlNjREZWNvZGUocGFydHNbMV0pIHx8ICcnKTtcclxuICAgICAgICBzaWduYXR1cmUgPSBwYXJ0c1syXTtcclxuICAgICAgICBkYXRhID0gY2xhaW1zWydkJ10gfHwge307XHJcbiAgICAgICAgZGVsZXRlIGNsYWltc1snZCddO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHsgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBoZWFkZXIsXHJcbiAgICAgICAgY2xhaW1zLFxyXG4gICAgICAgIGRhdGEsXHJcbiAgICAgICAgc2lnbmF0dXJlXHJcbiAgICB9O1xyXG59O1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCBjaGVja3MgdGhlIHZhbGlkaXR5IG9mIGl0cyB0aW1lLWJhc2VkIGNsYWltcy4gV2lsbCByZXR1cm4gdHJ1ZSBpZiB0aGVcclxuICogdG9rZW4gaXMgd2l0aGluIHRoZSB0aW1lIHdpbmRvdyBhdXRob3JpemVkIGJ5IHRoZSAnbmJmJyAobm90LWJlZm9yZSkgYW5kICdpYXQnIChpc3N1ZWQtYXQpIGNsYWltcy5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgaXNWYWxpZFRpbWVzdGFtcCA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XHJcbiAgICBjb25zdCBub3cgPSBNYXRoLmZsb29yKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCk7XHJcbiAgICBsZXQgdmFsaWRTaW5jZSA9IDAsIHZhbGlkVW50aWwgPSAwO1xyXG4gICAgaWYgKHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgaWYgKGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnbmJmJykpIHtcclxuICAgICAgICAgICAgdmFsaWRTaW5jZSA9IGNsYWltc1snbmJmJ107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0JykpIHtcclxuICAgICAgICAgICAgdmFsaWRTaW5jZSA9IGNsYWltc1snaWF0J107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2V4cCcpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkVW50aWwgPSBjbGFpbXNbJ2V4cCddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gdG9rZW4gd2lsbCBleHBpcmUgYWZ0ZXIgMjRoIGJ5IGRlZmF1bHRcclxuICAgICAgICAgICAgdmFsaWRVbnRpbCA9IHZhbGlkU2luY2UgKyA4NjQwMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gKCEhbm93ICYmXHJcbiAgICAgICAgISF2YWxpZFNpbmNlICYmXHJcbiAgICAgICAgISF2YWxpZFVudGlsICYmXHJcbiAgICAgICAgbm93ID49IHZhbGlkU2luY2UgJiZcclxuICAgICAgICBub3cgPD0gdmFsaWRVbnRpbCk7XHJcbn07XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gYW5kIHJldHVybnMgaXRzIGlzc3VlZCBhdCB0aW1lIGlmIHZhbGlkLCBudWxsIG90aGVyd2lzZS5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBudWxsIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgaXNzdWVkQXRUaW1lID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcclxuICAgIGlmICh0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2lhdCcpKSB7XHJcbiAgICAgICAgcmV0dXJuIGNsYWltc1snaWF0J107XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufTtcclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgY2hlY2tzIHRoZSB2YWxpZGl0eSBvZiBpdHMgZm9ybWF0LiBFeHBlY3RzIGEgdmFsaWQgaXNzdWVkLWF0IHRpbWUuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGlzVmFsaWRGb3JtYXQgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGNvbnN0IGRlY29kZWQgPSBkZWNvZGUodG9rZW4pLCBjbGFpbXMgPSBkZWNvZGVkLmNsYWltcztcclxuICAgIHJldHVybiAhIWNsYWltcyAmJiB0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2lhdCcpO1xyXG59O1xyXG4vKipcclxuICogQXR0ZW1wdHMgdG8gcGVlciBpbnRvIGFuIGF1dGggdG9rZW4gYW5kIGRldGVybWluZSBpZiBpdCdzIGFuIGFkbWluIGF1dGggdG9rZW4gYnkgbG9va2luZyBhdCB0aGUgY2xhaW1zIHBvcnRpb24uXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGlzQWRtaW4gPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGNvbnN0IGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xyXG4gICAgcmV0dXJuIHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltc1snYWRtaW4nXSA9PT0gdHJ1ZTtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gY29udGFpbnMob2JqLCBrZXkpIHtcclxuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpO1xyXG59XHJcbmZ1bmN0aW9uIHNhZmVHZXQob2JqLCBrZXkpIHtcclxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XHJcbiAgICAgICAgcmV0dXJuIG9ialtrZXldO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBpc0VtcHR5KG9iaikge1xyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbmZ1bmN0aW9uIG1hcChvYmosIGZuLCBjb250ZXh0T2JqKSB7XHJcbiAgICBjb25zdCByZXMgPSB7fTtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xyXG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XHJcbiAgICAgICAgICAgIHJlc1trZXldID0gZm4uY2FsbChjb250ZXh0T2JqLCBvYmpba2V5XSwga2V5LCBvYmopO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXM7XHJcbn1cclxuLyoqXHJcbiAqIERlZXAgZXF1YWwgdHdvIG9iamVjdHMuIFN1cHBvcnQgQXJyYXlzIGFuZCBPYmplY3RzLlxyXG4gKi9cclxuZnVuY3Rpb24gZGVlcEVxdWFsKGEsIGIpIHtcclxuICAgIGlmIChhID09PSBiKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBjb25zdCBhS2V5cyA9IE9iamVjdC5rZXlzKGEpO1xyXG4gICAgY29uc3QgYktleXMgPSBPYmplY3Qua2V5cyhiKTtcclxuICAgIGZvciAoY29uc3QgayBvZiBhS2V5cykge1xyXG4gICAgICAgIGlmICghYktleXMuaW5jbHVkZXMoaykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBhUHJvcCA9IGFba107XHJcbiAgICAgICAgY29uc3QgYlByb3AgPSBiW2tdO1xyXG4gICAgICAgIGlmIChpc09iamVjdChhUHJvcCkgJiYgaXNPYmplY3QoYlByb3ApKSB7XHJcbiAgICAgICAgICAgIGlmICghZGVlcEVxdWFsKGFQcm9wLCBiUHJvcCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChhUHJvcCAhPT0gYlByb3ApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZvciAoY29uc3QgayBvZiBiS2V5cykge1xyXG4gICAgICAgIGlmICghYUtleXMuaW5jbHVkZXMoaykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbmZ1bmN0aW9uIGlzT2JqZWN0KHRoaW5nKSB7XHJcbiAgICByZXR1cm4gdGhpbmcgIT09IG51bGwgJiYgdHlwZW9mIHRoaW5nID09PSAnb2JqZWN0JztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBhIHF1ZXJ5c3RyaW5nLWZvcm1hdHRlZCBzdHJpbmcgKGUuZy4gJmFyZz12YWwmYXJnMj12YWwyKSBmcm9tIGFcclxuICogcGFyYW1zIG9iamVjdCAoZS5nLiB7YXJnOiAndmFsJywgYXJnMjogJ3ZhbDInfSlcclxuICogTm90ZTogWW91IG11c3QgcHJlcGVuZCBpdCB3aXRoID8gd2hlbiBhZGRpbmcgaXQgdG8gYSBVUkwuXHJcbiAqL1xyXG5mdW5jdGlvbiBxdWVyeXN0cmluZyhxdWVyeXN0cmluZ1BhcmFtcykge1xyXG4gICAgY29uc3QgcGFyYW1zID0gW107XHJcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhxdWVyeXN0cmluZ1BhcmFtcykpIHtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgdmFsdWUuZm9yRWFjaChhcnJheVZhbCA9PiB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChhcnJheVZhbCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBhcmFtcy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhcmFtcy5sZW5ndGggPyAnJicgKyBwYXJhbXMuam9pbignJicpIDogJyc7XHJcbn1cclxuLyoqXHJcbiAqIERlY29kZXMgYSBxdWVyeXN0cmluZyAoZS5nLiA/YXJnPXZhbCZhcmcyPXZhbDIpIGludG8gYSBwYXJhbXMgb2JqZWN0XHJcbiAqIChlLmcuIHthcmc6ICd2YWwnLCBhcmcyOiAndmFsMid9KVxyXG4gKi9cclxuZnVuY3Rpb24gcXVlcnlzdHJpbmdEZWNvZGUocXVlcnlzdHJpbmcpIHtcclxuICAgIGNvbnN0IG9iaiA9IHt9O1xyXG4gICAgY29uc3QgdG9rZW5zID0gcXVlcnlzdHJpbmcucmVwbGFjZSgvXlxcPy8sICcnKS5zcGxpdCgnJicpO1xyXG4gICAgdG9rZW5zLmZvckVhY2godG9rZW4gPT4ge1xyXG4gICAgICAgIGlmICh0b2tlbikge1xyXG4gICAgICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSB0b2tlbi5zcGxpdCgnPScpO1xyXG4gICAgICAgICAgICBvYmpbZGVjb2RlVVJJQ29tcG9uZW50KGtleSldID0gZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBvYmo7XHJcbn1cclxuLyoqXHJcbiAqIEV4dHJhY3QgdGhlIHF1ZXJ5IHN0cmluZyBwYXJ0IG9mIGEgVVJMLCBpbmNsdWRpbmcgdGhlIGxlYWRpbmcgcXVlc3Rpb24gbWFyayAoaWYgcHJlc2VudCkuXHJcbiAqL1xyXG5mdW5jdGlvbiBleHRyYWN0UXVlcnlzdHJpbmcodXJsKSB7XHJcbiAgICBjb25zdCBxdWVyeVN0YXJ0ID0gdXJsLmluZGV4T2YoJz8nKTtcclxuICAgIGlmICghcXVlcnlTdGFydCkge1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxuICAgIGNvbnN0IGZyYWdtZW50U3RhcnQgPSB1cmwuaW5kZXhPZignIycsIHF1ZXJ5U3RhcnQpO1xyXG4gICAgcmV0dXJuIHVybC5zdWJzdHJpbmcocXVlcnlTdGFydCwgZnJhZ21lbnRTdGFydCA+IDAgPyBmcmFnbWVudFN0YXJ0IDogdW5kZWZpbmVkKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGZpbGVvdmVydmlldyBTSEEtMSBjcnlwdG9ncmFwaGljIGhhc2guXHJcbiAqIFZhcmlhYmxlIG5hbWVzIGZvbGxvdyB0aGUgbm90YXRpb24gaW4gRklQUyBQVUIgMTgwLTM6XHJcbiAqIGh0dHA6Ly9jc3JjLm5pc3QuZ292L3B1YmxpY2F0aW9ucy9maXBzL2ZpcHMxODAtMy9maXBzMTgwLTNfZmluYWwucGRmLlxyXG4gKlxyXG4gKiBVc2FnZTpcclxuICogICB2YXIgc2hhMSA9IG5ldyBzaGExKCk7XHJcbiAqICAgc2hhMS51cGRhdGUoYnl0ZXMpO1xyXG4gKiAgIHZhciBoYXNoID0gc2hhMS5kaWdlc3QoKTtcclxuICpcclxuICogUGVyZm9ybWFuY2U6XHJcbiAqICAgQ2hyb21lIDIzOiAgIH40MDAgTWJpdC9zXHJcbiAqICAgRmlyZWZveCAxNjogIH4yNTAgTWJpdC9zXHJcbiAqXHJcbiAqL1xyXG4vKipcclxuICogU0hBLTEgY3J5cHRvZ3JhcGhpYyBoYXNoIGNvbnN0cnVjdG9yLlxyXG4gKlxyXG4gKiBUaGUgcHJvcGVydGllcyBkZWNsYXJlZCBoZXJlIGFyZSBkaXNjdXNzZWQgaW4gdGhlIGFib3ZlIGFsZ29yaXRobSBkb2N1bWVudC5cclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBmaW5hbFxyXG4gKiBAc3RydWN0XHJcbiAqL1xyXG5jbGFzcyBTaGExIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhvbGRzIHRoZSBwcmV2aW91cyB2YWx1ZXMgb2YgYWNjdW11bGF0ZWQgdmFyaWFibGVzIGEtZSBpbiB0aGUgY29tcHJlc3NfXHJcbiAgICAgICAgICogZnVuY3Rpb24uXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmNoYWluXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgYnVmZmVyIGhvbGRpbmcgdGhlIHBhcnRpYWxseSBjb21wdXRlZCBoYXNoIHJlc3VsdC5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuYnVmXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFuIGFycmF5IG9mIDgwIGJ5dGVzLCBlYWNoIGEgcGFydCBvZiB0aGUgbWVzc2FnZSB0byBiZSBoYXNoZWQuICBSZWZlcnJlZCB0b1xyXG4gICAgICAgICAqIGFzIHRoZSBtZXNzYWdlIHNjaGVkdWxlIGluIHRoZSBkb2NzLlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5XXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENvbnRhaW5zIGRhdGEgbmVlZGVkIHRvIHBhZCBtZXNzYWdlcyBsZXNzIHRoYW4gNjQgYnl0ZXMuXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnBhZF8gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcHJpdmF0ZSB7bnVtYmVyfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuaW5idWZfID0gMDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcHJpdmF0ZSB7bnVtYmVyfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMudG90YWxfID0gMDtcclxuICAgICAgICB0aGlzLmJsb2NrU2l6ZSA9IDUxMiAvIDg7XHJcbiAgICAgICAgdGhpcy5wYWRfWzBdID0gMTI4O1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5ibG9ja1NpemU7ICsraSkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZF9baV0gPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgICByZXNldCgpIHtcclxuICAgICAgICB0aGlzLmNoYWluX1swXSA9IDB4Njc0NTIzMDE7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMV0gPSAweGVmY2RhYjg5O1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzJdID0gMHg5OGJhZGNmZTtcclxuICAgICAgICB0aGlzLmNoYWluX1szXSA9IDB4MTAzMjU0NzY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bNF0gPSAweGMzZDJlMWYwO1xyXG4gICAgICAgIHRoaXMuaW5idWZfID0gMDtcclxuICAgICAgICB0aGlzLnRvdGFsXyA9IDA7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEludGVybmFsIGNvbXByZXNzIGhlbHBlciBmdW5jdGlvbi5cclxuICAgICAqIEBwYXJhbSBidWYgQmxvY2sgdG8gY29tcHJlc3MuXHJcbiAgICAgKiBAcGFyYW0gb2Zmc2V0IE9mZnNldCBvZiB0aGUgYmxvY2sgaW4gdGhlIGJ1ZmZlci5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGNvbXByZXNzXyhidWYsIG9mZnNldCkge1xyXG4gICAgICAgIGlmICghb2Zmc2V0KSB7XHJcbiAgICAgICAgICAgIG9mZnNldCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IFcgPSB0aGlzLldfO1xyXG4gICAgICAgIC8vIGdldCAxNiBiaWcgZW5kaWFuIHdvcmRzXHJcbiAgICAgICAgaWYgKHR5cGVvZiBidWYgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETyh1c2VyKTogW2J1ZyA4MTQwMTIyXSBSZWNlbnQgdmVyc2lvbnMgb2YgU2FmYXJpIGZvciBNYWMgT1MgYW5kIGlPU1xyXG4gICAgICAgICAgICAgICAgLy8gaGF2ZSBhIGJ1ZyB0aGF0IHR1cm5zIHRoZSBwb3N0LWluY3JlbWVudCArKyBvcGVyYXRvciBpbnRvIHByZS1pbmNyZW1lbnRcclxuICAgICAgICAgICAgICAgIC8vIGR1cmluZyBKSVQgY29tcGlsYXRpb24uICBXZSBoYXZlIGNvZGUgdGhhdCBkZXBlbmRzIGhlYXZpbHkgb24gU0hBLTEgZm9yXHJcbiAgICAgICAgICAgICAgICAvLyBjb3JyZWN0bmVzcyBhbmQgd2hpY2ggaXMgYWZmZWN0ZWQgYnkgdGhpcyBidWcsIHNvIEkndmUgcmVtb3ZlZCBhbGwgdXNlc1xyXG4gICAgICAgICAgICAgICAgLy8gb2YgcG9zdC1pbmNyZW1lbnQgKysgaW4gd2hpY2ggdGhlIHJlc3VsdCB2YWx1ZSBpcyB1c2VkLiAgV2UgY2FuIHJldmVydFxyXG4gICAgICAgICAgICAgICAgLy8gdGhpcyBjaGFuZ2Ugb25jZSB0aGUgU2FmYXJpIGJ1Z1xyXG4gICAgICAgICAgICAgICAgLy8gKGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xMDkwMzYpIGhhcyBiZWVuIGZpeGVkIGFuZFxyXG4gICAgICAgICAgICAgICAgLy8gbW9zdCBjbGllbnRzIGhhdmUgYmVlbiB1cGRhdGVkLlxyXG4gICAgICAgICAgICAgICAgV1tpXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCkgPDwgMjQpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDEpIDw8IDE2KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQgKyAyKSA8PCA4KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDMpO1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgV1tpXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXRdIDw8IDI0KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXQgKyAyXSA8PCA4KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZltvZmZzZXQgKyAzXTtcclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSA0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGV4cGFuZCB0byA4MCB3b3Jkc1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxNjsgaSA8IDgwOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgdCA9IFdbaSAtIDNdIF4gV1tpIC0gOF0gXiBXW2kgLSAxNF0gXiBXW2kgLSAxNl07XHJcbiAgICAgICAgICAgIFdbaV0gPSAoKHQgPDwgMSkgfCAodCA+Pj4gMzEpKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBhID0gdGhpcy5jaGFpbl9bMF07XHJcbiAgICAgICAgbGV0IGIgPSB0aGlzLmNoYWluX1sxXTtcclxuICAgICAgICBsZXQgYyA9IHRoaXMuY2hhaW5fWzJdO1xyXG4gICAgICAgIGxldCBkID0gdGhpcy5jaGFpbl9bM107XHJcbiAgICAgICAgbGV0IGUgPSB0aGlzLmNoYWluX1s0XTtcclxuICAgICAgICBsZXQgZiwgaztcclxuICAgICAgICAvLyBUT0RPKHVzZXIpOiBUcnkgdG8gdW5yb2xsIHRoaXMgbG9vcCB0byBzcGVlZCB1cCB0aGUgY29tcHV0YXRpb24uXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA4MDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChpIDwgNDApIHtcclxuICAgICAgICAgICAgICAgIGlmIChpIDwgMjApIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gZCBeIChiICYgKGMgXiBkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4NWE4Mjc5OTk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gYiBeIGMgXiBkO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweDZlZDllYmExO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPCA2MCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSAoYiAmIGMpIHwgKGQgJiAoYiB8IGMpKTtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHg4ZjFiYmNkYztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSBiIF4gYyBeIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4Y2E2MmMxZDY7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgdCA9ICgoKGEgPDwgNSkgfCAoYSA+Pj4gMjcpKSArIGYgKyBlICsgayArIFdbaV0pICYgMHhmZmZmZmZmZjtcclxuICAgICAgICAgICAgZSA9IGQ7XHJcbiAgICAgICAgICAgIGQgPSBjO1xyXG4gICAgICAgICAgICBjID0gKChiIDw8IDMwKSB8IChiID4+PiAyKSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgICAgICBiID0gYTtcclxuICAgICAgICAgICAgYSA9IHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2hhaW5fWzBdID0gKHRoaXMuY2hhaW5fWzBdICsgYSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzFdID0gKHRoaXMuY2hhaW5fWzFdICsgYikgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzJdID0gKHRoaXMuY2hhaW5fWzJdICsgYykgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzNdID0gKHRoaXMuY2hhaW5fWzNdICsgZCkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzRdID0gKHRoaXMuY2hhaW5fWzRdICsgZSkgJiAweGZmZmZmZmZmO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlKGJ5dGVzLCBsZW5ndGgpIHtcclxuICAgICAgICAvLyBUT0RPKGpvaG5sZW56KTogdGlnaHRlbiB0aGUgZnVuY3Rpb24gc2lnbmF0dXJlIGFuZCByZW1vdmUgdGhpcyBjaGVja1xyXG4gICAgICAgIGlmIChieXRlcyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbGVuZ3RoTWludXNCbG9jayA9IGxlbmd0aCAtIHRoaXMuYmxvY2tTaXplO1xyXG4gICAgICAgIGxldCBuID0gMDtcclxuICAgICAgICAvLyBVc2luZyBsb2NhbCBpbnN0ZWFkIG9mIG1lbWJlciB2YXJpYWJsZXMgZ2l2ZXMgfjUlIHNwZWVkdXAgb24gRmlyZWZveCAxNi5cclxuICAgICAgICBjb25zdCBidWYgPSB0aGlzLmJ1Zl87XHJcbiAgICAgICAgbGV0IGluYnVmID0gdGhpcy5pbmJ1Zl87XHJcbiAgICAgICAgLy8gVGhlIG91dGVyIHdoaWxlIGxvb3Agc2hvdWxkIGV4ZWN1dGUgYXQgbW9zdCB0d2ljZS5cclxuICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAvLyBXaGVuIHdlIGhhdmUgbm8gZGF0YSBpbiB0aGUgYmxvY2sgdG8gdG9wIHVwLCB3ZSBjYW4gZGlyZWN0bHkgcHJvY2VzcyB0aGVcclxuICAgICAgICAgICAgLy8gaW5wdXQgYnVmZmVyIChhc3N1bWluZyBpdCBjb250YWlucyBzdWZmaWNpZW50IGRhdGEpLiBUaGlzIGdpdmVzIH4yNSVcclxuICAgICAgICAgICAgLy8gc3BlZWR1cCBvbiBDaHJvbWUgMjMgYW5kIH4xNSUgc3BlZWR1cCBvbiBGaXJlZm94IDE2LCBidXQgcmVxdWlyZXMgdGhhdFxyXG4gICAgICAgICAgICAvLyB0aGUgZGF0YSBpcyBwcm92aWRlZCBpbiBsYXJnZSBjaHVua3MgKG9yIGluIG11bHRpcGxlcyBvZiA2NCBieXRlcykuXHJcbiAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gPD0gbGVuZ3RoTWludXNCbG9jaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ5dGVzLCBuKTtcclxuICAgICAgICAgICAgICAgICAgICBuICs9IHRoaXMuYmxvY2tTaXplO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYnl0ZXMgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZltpbmJ1Zl0gPSBieXRlcy5jaGFyQ29kZUF0KG4pO1xyXG4gICAgICAgICAgICAgICAgICAgICsraW5idWY7XHJcbiAgICAgICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gdGhpcy5ibG9ja1NpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnVmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5idWYgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBKdW1wIHRvIHRoZSBvdXRlciBsb29wIHNvIHdlIHVzZSB0aGUgZnVsbC1ibG9jayBvcHRpbWl6YXRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVmW2luYnVmXSA9IGJ5dGVzW25dO1xyXG4gICAgICAgICAgICAgICAgICAgICsraW5idWY7XHJcbiAgICAgICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gdGhpcy5ibG9ja1NpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnVmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5idWYgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBKdW1wIHRvIHRoZSBvdXRlciBsb29wIHNvIHdlIHVzZSB0aGUgZnVsbC1ibG9jayBvcHRpbWl6YXRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluYnVmXyA9IGluYnVmO1xyXG4gICAgICAgIHRoaXMudG90YWxfICs9IGxlbmd0aDtcclxuICAgIH1cclxuICAgIC8qKiBAb3ZlcnJpZGUgKi9cclxuICAgIGRpZ2VzdCgpIHtcclxuICAgICAgICBjb25zdCBkaWdlc3QgPSBbXTtcclxuICAgICAgICBsZXQgdG90YWxCaXRzID0gdGhpcy50b3RhbF8gKiA4O1xyXG4gICAgICAgIC8vIEFkZCBwYWQgMHg4MCAweDAwKi5cclxuICAgICAgICBpZiAodGhpcy5pbmJ1Zl8gPCA1Nikge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSh0aGlzLnBhZF8sIDU2IC0gdGhpcy5pbmJ1Zl8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGUodGhpcy5wYWRfLCB0aGlzLmJsb2NrU2l6ZSAtICh0aGlzLmluYnVmXyAtIDU2KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFkZCAjIGJpdHMuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuYmxvY2tTaXplIC0gMTsgaSA+PSA1NjsgaS0tKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnVmX1tpXSA9IHRvdGFsQml0cyAmIDI1NTtcclxuICAgICAgICAgICAgdG90YWxCaXRzIC89IDI1NjsgLy8gRG9uJ3QgdXNlIGJpdC1zaGlmdGluZyBoZXJlIVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbXByZXNzXyh0aGlzLmJ1Zl8pO1xyXG4gICAgICAgIGxldCBuID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMjQ7IGogPj0gMDsgaiAtPSA4KSB7XHJcbiAgICAgICAgICAgICAgICBkaWdlc3Rbbl0gPSAodGhpcy5jaGFpbl9baV0gPj4gaikgJiAyNTU7XHJcbiAgICAgICAgICAgICAgICArK247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRpZ2VzdDtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogSGVscGVyIHRvIG1ha2UgYSBTdWJzY3JpYmUgZnVuY3Rpb24gKGp1c3QgbGlrZSBQcm9taXNlIGhlbHBzIG1ha2UgYVxyXG4gKiBUaGVuYWJsZSkuXHJcbiAqXHJcbiAqIEBwYXJhbSBleGVjdXRvciBGdW5jdGlvbiB3aGljaCBjYW4gbWFrZSBjYWxscyB0byBhIHNpbmdsZSBPYnNlcnZlclxyXG4gKiAgICAgYXMgYSBwcm94eS5cclxuICogQHBhcmFtIG9uTm9PYnNlcnZlcnMgQ2FsbGJhY2sgd2hlbiBjb3VudCBvZiBPYnNlcnZlcnMgZ29lcyB0byB6ZXJvLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlU3Vic2NyaWJlKGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKSB7XHJcbiAgICBjb25zdCBwcm94eSA9IG5ldyBPYnNlcnZlclByb3h5KGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKTtcclxuICAgIHJldHVybiBwcm94eS5zdWJzY3JpYmUuYmluZChwcm94eSk7XHJcbn1cclxuLyoqXHJcbiAqIEltcGxlbWVudCBmYW4tb3V0IGZvciBhbnkgbnVtYmVyIG9mIE9ic2VydmVycyBhdHRhY2hlZCB2aWEgYSBzdWJzY3JpYmVcclxuICogZnVuY3Rpb24uXHJcbiAqL1xyXG5jbGFzcyBPYnNlcnZlclByb3h5IHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGV4ZWN1dG9yIEZ1bmN0aW9uIHdoaWNoIGNhbiBtYWtlIGNhbGxzIHRvIGEgc2luZ2xlIE9ic2VydmVyXHJcbiAgICAgKiAgICAgYXMgYSBwcm94eS5cclxuICAgICAqIEBwYXJhbSBvbk5vT2JzZXJ2ZXJzIENhbGxiYWNrIHdoZW4gY291bnQgb2YgT2JzZXJ2ZXJzIGdvZXMgdG8gemVyby5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoZXhlY3V0b3IsIG9uTm9PYnNlcnZlcnMpIHtcclxuICAgICAgICB0aGlzLm9ic2VydmVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVzID0gW107XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlckNvdW50ID0gMDtcclxuICAgICAgICAvLyBNaWNyby10YXNrIHNjaGVkdWxpbmcgYnkgY2FsbGluZyB0YXNrLnRoZW4oKS5cclxuICAgICAgICB0aGlzLnRhc2sgPSBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB0aGlzLmZpbmFsaXplZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMub25Ob09ic2VydmVycyA9IG9uTm9PYnNlcnZlcnM7XHJcbiAgICAgICAgLy8gQ2FsbCB0aGUgZXhlY3V0b3IgYXN5bmNocm9ub3VzbHkgc28gc3Vic2NyaWJlcnMgdGhhdCBhcmUgY2FsbGVkXHJcbiAgICAgICAgLy8gc3luY2hyb25vdXNseSBhZnRlciB0aGUgY3JlYXRpb24gb2YgdGhlIHN1YnNjcmliZSBmdW5jdGlvblxyXG4gICAgICAgIC8vIGNhbiBzdGlsbCByZWNlaXZlIHRoZSB2ZXJ5IGZpcnN0IHZhbHVlIGdlbmVyYXRlZCBpbiB0aGUgZXhlY3V0b3IuXHJcbiAgICAgICAgdGhpcy50YXNrXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgZXhlY3V0b3IodGhpcyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmVycm9yKGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgbmV4dCh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0KHZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoT2JzZXJ2ZXIoKG9ic2VydmVyKSA9PiB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKGVycm9yKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNsb3NlKGVycm9yKTtcclxuICAgIH1cclxuICAgIGNvbXBsZXRlKCkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU3Vic2NyaWJlIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gYWRkIGFuIE9ic2VydmVyIHRvIHRoZSBmYW4tb3V0IGxpc3QuXHJcbiAgICAgKlxyXG4gICAgICogLSBXZSByZXF1aXJlIHRoYXQgbm8gZXZlbnQgaXMgc2VudCB0byBhIHN1YnNjcmliZXIgc3ljaHJvbm91c2x5IHRvIHRoZWlyXHJcbiAgICAgKiAgIGNhbGwgdG8gc3Vic2NyaWJlKCkuXHJcbiAgICAgKi9cclxuICAgIHN1YnNjcmliZShuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSB7XHJcbiAgICAgICAgbGV0IG9ic2VydmVyO1xyXG4gICAgICAgIGlmIChuZXh0T3JPYnNlcnZlciA9PT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIGVycm9yID09PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgY29tcGxldGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgT2JzZXJ2ZXIuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFzc2VtYmxlIGFuIE9ic2VydmVyIG9iamVjdCB3aGVuIHBhc3NlZCBhcyBjYWxsYmFjayBmdW5jdGlvbnMuXHJcbiAgICAgICAgaWYgKGltcGxlbWVudHNBbnlNZXRob2RzKG5leHRPck9ic2VydmVyLCBbXHJcbiAgICAgICAgICAgICduZXh0JyxcclxuICAgICAgICAgICAgJ2Vycm9yJyxcclxuICAgICAgICAgICAgJ2NvbXBsZXRlJ1xyXG4gICAgICAgIF0pKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyID0gbmV4dE9yT2JzZXJ2ZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvYnNlcnZlciA9IHtcclxuICAgICAgICAgICAgICAgIG5leHQ6IG5leHRPck9ic2VydmVyLFxyXG4gICAgICAgICAgICAgICAgZXJyb3IsXHJcbiAgICAgICAgICAgICAgICBjb21wbGV0ZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIubmV4dCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLm5leHQgPSBub29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIuZXJyb3IgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5lcnJvciA9IG5vb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvYnNlcnZlci5jb21wbGV0ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlID0gbm9vcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdW5zdWIgPSB0aGlzLnVuc3Vic2NyaWJlT25lLmJpbmQodGhpcywgdGhpcy5vYnNlcnZlcnMubGVuZ3RoKTtcclxuICAgICAgICAvLyBBdHRlbXB0IHRvIHN1YnNjcmliZSB0byBhIHRlcm1pbmF0ZWQgT2JzZXJ2YWJsZSAtIHdlXHJcbiAgICAgICAgLy8ganVzdCByZXNwb25kIHRvIHRoZSBPYnNlcnZlciB3aXRoIHRoZSBmaW5hbCBlcnJvciBvciBjb21wbGV0ZVxyXG4gICAgICAgIC8vIGV2ZW50LlxyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgICAgIHRoaXMudGFzay50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZmluYWxFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5lcnJvcih0aGlzLmZpbmFsRXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdGhpbmdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpO1xyXG4gICAgICAgIHJldHVybiB1bnN1YjtcclxuICAgIH1cclxuICAgIC8vIFVuc3Vic2NyaWJlIGlzIHN5bmNocm9ub3VzIC0gd2UgZ3VhcmFudGVlIHRoYXQgbm8gZXZlbnRzIGFyZSBzZW50IHRvXHJcbiAgICAvLyBhbnkgdW5zdWJzY3JpYmVkIE9ic2VydmVyLlxyXG4gICAgdW5zdWJzY3JpYmVPbmUoaSkge1xyXG4gICAgICAgIGlmICh0aGlzLm9ic2VydmVycyA9PT0gdW5kZWZpbmVkIHx8IHRoaXMub2JzZXJ2ZXJzW2ldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWxldGUgdGhpcy5vYnNlcnZlcnNbaV07XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlckNvdW50IC09IDE7XHJcbiAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJDb3VudCA9PT0gMCAmJiB0aGlzLm9uTm9PYnNlcnZlcnMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnModGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZm9yRWFjaE9ic2VydmVyKGZuKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIC8vIEFscmVhZHkgY2xvc2VkIGJ5IHByZXZpb3VzIGV2ZW50Li4uLmp1c3QgZWF0IHRoZSBhZGRpdGlvbmFsIHZhbHVlcy5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTaW5jZSBzZW5kT25lIGNhbGxzIGFzeW5jaHJvbm91c2x5IC0gdGhlcmUgaXMgbm8gY2hhbmNlIHRoYXRcclxuICAgICAgICAvLyB0aGlzLm9ic2VydmVycyB3aWxsIGJlY29tZSB1bmRlZmluZWQuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm9ic2VydmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLnNlbmRPbmUoaSwgZm4pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIENhbGwgdGhlIE9ic2VydmVyIHZpYSBvbmUgb2YgaXQncyBjYWxsYmFjayBmdW5jdGlvbi4gV2UgYXJlIGNhcmVmdWwgdG9cclxuICAgIC8vIGNvbmZpcm0gdGhhdCB0aGUgb2JzZXJ2ZSBoYXMgbm90IGJlZW4gdW5zdWJzY3JpYmVkIHNpbmNlIHRoaXMgYXN5bmNocm9ub3VzXHJcbiAgICAvLyBmdW5jdGlvbiBoYWQgYmVlbiBxdWV1ZWQuXHJcbiAgICBzZW5kT25lKGksIGZuKSB7XHJcbiAgICAgICAgLy8gRXhlY3V0ZSB0aGUgY2FsbGJhY2sgYXN5bmNocm9ub3VzbHlcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgdGhpcy50YXNrLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vYnNlcnZlcnMgIT09IHVuZGVmaW5lZCAmJiB0aGlzLm9ic2VydmVyc1tpXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZuKHRoaXMub2JzZXJ2ZXJzW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlIGV4Y2VwdGlvbnMgcmFpc2VkIGluIE9ic2VydmVycyBvciBtaXNzaW5nIG1ldGhvZHMgb2YgYW5cclxuICAgICAgICAgICAgICAgICAgICAvLyBPYnNlcnZlci5cclxuICAgICAgICAgICAgICAgICAgICAvLyBMb2cgZXJyb3IgdG8gY29uc29sZS4gYi8zMTQwNDgwNlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgY29uc29sZS5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY2xvc2UoZXJyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5maW5hbGl6ZWQgPSB0cnVlO1xyXG4gICAgICAgIGlmIChlcnIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmZpbmFsRXJyb3IgPSBlcnI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFByb3h5IGlzIG5vIGxvbmdlciBuZWVkZWQgLSBnYXJiYWdlIGNvbGxlY3QgcmVmZXJlbmNlc1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICB0aGlzLnRhc2sudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuLyoqIFR1cm4gc3luY2hyb25vdXMgZnVuY3Rpb24gaW50byBvbmUgY2FsbGVkIGFzeW5jaHJvbm91c2x5LiAqL1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xyXG5mdW5jdGlvbiBhc3luYyhmbiwgb25FcnJvcikge1xyXG4gICAgcmV0dXJuICguLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKHRydWUpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgZm4oLi4uYXJncyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICBpZiAob25FcnJvcikge1xyXG4gICAgICAgICAgICAgICAgb25FcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybiB0cnVlIGlmIHRoZSBvYmplY3QgcGFzc2VkIGluIGltcGxlbWVudHMgYW55IG9mIHRoZSBuYW1lZCBtZXRob2RzLlxyXG4gKi9cclxuZnVuY3Rpb24gaW1wbGVtZW50c0FueU1ldGhvZHMob2JqLCBtZXRob2RzKSB7XHJcbiAgICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcgfHwgb2JqID09PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBtZXRob2Qgb2YgbWV0aG9kcykge1xyXG4gICAgICAgIGlmIChtZXRob2QgaW4gb2JqICYmIHR5cGVvZiBvYmpbbWV0aG9kXSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuZnVuY3Rpb24gbm9vcCgpIHtcclxuICAgIC8vIGRvIG5vdGhpbmdcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQ2hlY2sgdG8gbWFrZSBzdXJlIHRoZSBhcHByb3ByaWF0ZSBudW1iZXIgb2YgYXJndW1lbnRzIGFyZSBwcm92aWRlZCBmb3IgYSBwdWJsaWMgZnVuY3Rpb24uXHJcbiAqIFRocm93cyBhbiBlcnJvciBpZiBpdCBmYWlscy5cclxuICpcclxuICogQHBhcmFtIGZuTmFtZSBUaGUgZnVuY3Rpb24gbmFtZVxyXG4gKiBAcGFyYW0gbWluQ291bnQgVGhlIG1pbmltdW0gbnVtYmVyIG9mIGFyZ3VtZW50cyB0byBhbGxvdyBmb3IgdGhlIGZ1bmN0aW9uIGNhbGxcclxuICogQHBhcmFtIG1heENvdW50IFRoZSBtYXhpbXVtIG51bWJlciBvZiBhcmd1bWVudCB0byBhbGxvdyBmb3IgdGhlIGZ1bmN0aW9uIGNhbGxcclxuICogQHBhcmFtIGFyZ0NvdW50IFRoZSBhY3R1YWwgbnVtYmVyIG9mIGFyZ3VtZW50cyBwcm92aWRlZC5cclxuICovXHJcbmNvbnN0IHZhbGlkYXRlQXJnQ291bnQgPSBmdW5jdGlvbiAoZm5OYW1lLCBtaW5Db3VudCwgbWF4Q291bnQsIGFyZ0NvdW50KSB7XHJcbiAgICBsZXQgYXJnRXJyb3I7XHJcbiAgICBpZiAoYXJnQ291bnQgPCBtaW5Db3VudCkge1xyXG4gICAgICAgIGFyZ0Vycm9yID0gJ2F0IGxlYXN0ICcgKyBtaW5Db3VudDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGFyZ0NvdW50ID4gbWF4Q291bnQpIHtcclxuICAgICAgICBhcmdFcnJvciA9IG1heENvdW50ID09PSAwID8gJ25vbmUnIDogJ25vIG1vcmUgdGhhbiAnICsgbWF4Q291bnQ7XHJcbiAgICB9XHJcbiAgICBpZiAoYXJnRXJyb3IpIHtcclxuICAgICAgICBjb25zdCBlcnJvciA9IGZuTmFtZSArXHJcbiAgICAgICAgICAgICcgZmFpbGVkOiBXYXMgY2FsbGVkIHdpdGggJyArXHJcbiAgICAgICAgICAgIGFyZ0NvdW50ICtcclxuICAgICAgICAgICAgKGFyZ0NvdW50ID09PSAxID8gJyBhcmd1bWVudC4nIDogJyBhcmd1bWVudHMuJykgK1xyXG4gICAgICAgICAgICAnIEV4cGVjdHMgJyArXHJcbiAgICAgICAgICAgIGFyZ0Vycm9yICtcclxuICAgICAgICAgICAgJy4nO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBHZW5lcmF0ZXMgYSBzdHJpbmcgdG8gcHJlZml4IGFuIGVycm9yIG1lc3NhZ2UgYWJvdXQgZmFpbGVkIGFyZ3VtZW50IHZhbGlkYXRpb25cclxuICpcclxuICogQHBhcmFtIGZuTmFtZSBUaGUgZnVuY3Rpb24gbmFtZVxyXG4gKiBAcGFyYW0gYXJnTmFtZSBUaGUgbmFtZSBvZiB0aGUgYXJndW1lbnRcclxuICogQHJldHVybiBUaGUgcHJlZml4IHRvIGFkZCB0byB0aGUgZXJyb3IgdGhyb3duIGZvciB2YWxpZGF0aW9uLlxyXG4gKi9cclxuZnVuY3Rpb24gZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmdOYW1lKSB7XHJcbiAgICByZXR1cm4gYCR7Zm5OYW1lfSBmYWlsZWQ6ICR7YXJnTmFtZX0gYXJndW1lbnQgYDtcclxufVxyXG4vKipcclxuICogQHBhcmFtIGZuTmFtZVxyXG4gKiBAcGFyYW0gYXJndW1lbnROdW1iZXJcclxuICogQHBhcmFtIG5hbWVzcGFjZVxyXG4gKiBAcGFyYW0gb3B0aW9uYWxcclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlTmFtZXNwYWNlKGZuTmFtZSwgbmFtZXNwYWNlLCBvcHRpb25hbCkge1xyXG4gICAgaWYgKG9wdGlvbmFsICYmICFuYW1lc3BhY2UpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIG5hbWVzcGFjZSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAvL1RPRE86IEkgc2hvdWxkIGRvIG1vcmUgdmFsaWRhdGlvbiBoZXJlLiBXZSBvbmx5IGFsbG93IGNlcnRhaW4gY2hhcnMgaW4gbmFtZXNwYWNlcy5cclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCAnbmFtZXNwYWNlJykgKyAnbXVzdCBiZSBhIHZhbGlkIGZpcmViYXNlIG5hbWVzcGFjZS4nKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZUNhbGxiYWNrKGZuTmFtZSwgYXJndW1lbnROYW1lLCBcclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcclxuY2FsbGJhY2ssIG9wdGlvbmFsKSB7XHJcbiAgICBpZiAob3B0aW9uYWwgJiYgIWNhbGxiYWNrKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TmFtZSkgKyAnbXVzdCBiZSBhIHZhbGlkIGZ1bmN0aW9uLicpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHZhbGlkYXRlQ29udGV4dE9iamVjdChmbk5hbWUsIGFyZ3VtZW50TmFtZSwgY29udGV4dCwgb3B0aW9uYWwpIHtcclxuICAgIGlmIChvcHRpb25hbCAmJiAhY29udGV4dCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgY29udGV4dCAhPT0gJ29iamVjdCcgfHwgY29udGV4dCA9PT0gbnVsbCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TmFtZSkgKyAnbXVzdCBiZSBhIHZhbGlkIGNvbnRleHQgb2JqZWN0LicpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIENvZGUgb3JpZ2luYWxseSBjYW1lIGZyb20gZ29vZy5jcnlwdC5zdHJpbmdUb1V0ZjhCeXRlQXJyYXksIGJ1dCBmb3Igc29tZSByZWFzb24gdGhleVxyXG4vLyBhdXRvbWF0aWNhbGx5IHJlcGxhY2VkICdcXHJcXG4nIHdpdGggJ1xcbicsIGFuZCB0aGV5IGRpZG4ndCBoYW5kbGUgc3Vycm9nYXRlIHBhaXJzLFxyXG4vLyBzbyBpdCdzIGJlZW4gbW9kaWZpZWQuXHJcbi8vIE5vdGUgdGhhdCBub3QgYWxsIFVuaWNvZGUgY2hhcmFjdGVycyBhcHBlYXIgYXMgc2luZ2xlIGNoYXJhY3RlcnMgaW4gSmF2YVNjcmlwdCBzdHJpbmdzLlxyXG4vLyBmcm9tQ2hhckNvZGUgcmV0dXJucyB0aGUgVVRGLTE2IGVuY29kaW5nIG9mIGEgY2hhcmFjdGVyIC0gc28gc29tZSBVbmljb2RlIGNoYXJhY3RlcnNcclxuLy8gdXNlIDIgY2hhcmFjdGVycyBpbiBKYXZhc2NyaXB0LiAgQWxsIDQtYnl0ZSBVVEYtOCBjaGFyYWN0ZXJzIGJlZ2luIHdpdGggYSBmaXJzdFxyXG4vLyBjaGFyYWN0ZXIgaW4gdGhlIHJhbmdlIDB4RDgwMCAtIDB4REJGRiAodGhlIGZpcnN0IGNoYXJhY3RlciBvZiBhIHNvLWNhbGxlZCBzdXJyb2dhdGVcclxuLy8gcGFpcikuXHJcbi8vIFNlZSBodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNS4xLyNzZWMtMTUuMS4zXHJcbi8qKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXHJcbiAqIEByZXR1cm4ge0FycmF5fVxyXG4gKi9cclxuY29uc3Qgc3RyaW5nVG9CeXRlQXJyYXkgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICAvLyBJcyB0aGlzIHRoZSBsZWFkIHN1cnJvZ2F0ZSBpbiBhIHN1cnJvZ2F0ZSBwYWlyP1xyXG4gICAgICAgIGlmIChjID49IDB4ZDgwMCAmJiBjIDw9IDB4ZGJmZikge1xyXG4gICAgICAgICAgICBjb25zdCBoaWdoID0gYyAtIDB4ZDgwMDsgLy8gdGhlIGhpZ2ggMTAgYml0cy5cclxuICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICBhc3NlcnQoaSA8IHN0ci5sZW5ndGgsICdTdXJyb2dhdGUgcGFpciBtaXNzaW5nIHRyYWlsIHN1cnJvZ2F0ZS4nKTtcclxuICAgICAgICAgICAgY29uc3QgbG93ID0gc3RyLmNoYXJDb2RlQXQoaSkgLSAweGRjMDA7IC8vIHRoZSBsb3cgMTAgYml0cy5cclxuICAgICAgICAgICAgYyA9IDB4MTAwMDAgKyAoaGlnaCA8PCAxMCkgKyBsb3c7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gYztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiA2KSB8IDE5MjtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDY1NTM2KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTIpIHwgMjI0O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTgpIHwgMjQwO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiAxMikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXQ7XHJcbn07XHJcbi8qKlxyXG4gKiBDYWxjdWxhdGUgbGVuZ3RoIHdpdGhvdXQgYWN0dWFsbHkgY29udmVydGluZzsgdXNlZnVsIGZvciBkb2luZyBjaGVhcGVyIHZhbGlkYXRpb24uXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcclxuICogQHJldHVybiB7bnVtYmVyfVxyXG4gKi9cclxuY29uc3Qgc3RyaW5nTGVuZ3RoID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgbGV0IHAgPSAwO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcclxuICAgICAgICAgICAgcCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xyXG4gICAgICAgICAgICBwICs9IDI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPj0gMHhkODAwICYmIGMgPD0gMHhkYmZmKSB7XHJcbiAgICAgICAgICAgIC8vIExlYWQgc3Vycm9nYXRlIG9mIGEgc3Vycm9nYXRlIHBhaXIuICBUaGUgcGFpciB0b2dldGhlciB3aWxsIHRha2UgNCBieXRlcyB0byByZXByZXNlbnQuXHJcbiAgICAgICAgICAgIHAgKz0gNDtcclxuICAgICAgICAgICAgaSsrOyAvLyBza2lwIHRyYWlsIHN1cnJvZ2F0ZS5cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHAgKz0gMztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcDtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBhbW91bnQgb2YgbWlsbGlzZWNvbmRzIHRvIGV4cG9uZW50aWFsbHkgaW5jcmVhc2UuXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0lOVEVSVkFMX01JTExJUyA9IDEwMDA7XHJcbi8qKlxyXG4gKiBUaGUgZmFjdG9yIHRvIGJhY2tvZmYgYnkuXHJcbiAqIFNob3VsZCBiZSBhIG51bWJlciBncmVhdGVyIHRoYW4gMS5cclxuICovXHJcbmNvbnN0IERFRkFVTFRfQkFDS09GRl9GQUNUT1IgPSAyO1xyXG4vKipcclxuICogVGhlIG1heGltdW0gbWlsbGlzZWNvbmRzIHRvIGluY3JlYXNlIHRvLlxyXG4gKlxyXG4gKiA8cD5WaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAqL1xyXG5jb25zdCBNQVhfVkFMVUVfTUlMTElTID0gNCAqIDYwICogNjAgKiAxMDAwOyAvLyBGb3VyIGhvdXJzLCBsaWtlIGlPUyBhbmQgQW5kcm9pZC5cclxuLyoqXHJcbiAqIFRoZSBwZXJjZW50YWdlIG9mIGJhY2tvZmYgdGltZSB0byByYW5kb21pemUgYnkuXHJcbiAqIFNlZVxyXG4gKiBodHRwOi8vZ28vc2FmZS1jbGllbnQtYmVoYXZpb3Ijc3RlcC0xLWRldGVybWluZS10aGUtYXBwcm9wcmlhdGUtcmV0cnktaW50ZXJ2YWwtdG8taGFuZGxlLXNwaWtlLXRyYWZmaWNcclxuICogZm9yIGNvbnRleHQuXHJcbiAqXHJcbiAqIDxwPlZpc2libGUgZm9yIHRlc3RpbmdcclxuICovXHJcbmNvbnN0IFJBTkRPTV9GQUNUT1IgPSAwLjU7XHJcbi8qKlxyXG4gKiBCYXNlZCBvbiB0aGUgYmFja29mZiBtZXRob2QgZnJvbVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2Nsb3N1cmUtbGlicmFyeS9ibG9iL21hc3Rlci9jbG9zdXJlL2dvb2cvbWF0aC9leHBvbmVudGlhbGJhY2tvZmYuanMuXHJcbiAqIEV4dHJhY3RlZCBoZXJlIHNvIHdlIGRvbid0IG5lZWQgdG8gcGFzcyBtZXRhZGF0YSBhbmQgYSBzdGF0ZWZ1bCBFeHBvbmVudGlhbEJhY2tvZmYgb2JqZWN0IGFyb3VuZC5cclxuICovXHJcbmZ1bmN0aW9uIGNhbGN1bGF0ZUJhY2tvZmZNaWxsaXMoYmFja29mZkNvdW50LCBpbnRlcnZhbE1pbGxpcyA9IERFRkFVTFRfSU5URVJWQUxfTUlMTElTLCBiYWNrb2ZmRmFjdG9yID0gREVGQVVMVF9CQUNLT0ZGX0ZBQ1RPUikge1xyXG4gICAgLy8gQ2FsY3VsYXRlcyBhbiBleHBvbmVudGlhbGx5IGluY3JlYXNpbmcgdmFsdWUuXHJcbiAgICAvLyBEZXZpYXRpb246IGNhbGN1bGF0ZXMgdmFsdWUgZnJvbSBjb3VudCBhbmQgYSBjb25zdGFudCBpbnRlcnZhbCwgc28gd2Ugb25seSBuZWVkIHRvIHNhdmUgdmFsdWVcclxuICAgIC8vIGFuZCBjb3VudCB0byByZXN0b3JlIHN0YXRlLlxyXG4gICAgY29uc3QgY3VyckJhc2VWYWx1ZSA9IGludGVydmFsTWlsbGlzICogTWF0aC5wb3coYmFja29mZkZhY3RvciwgYmFja29mZkNvdW50KTtcclxuICAgIC8vIEEgcmFuZG9tIFwiZnV6elwiIHRvIGF2b2lkIHdhdmVzIG9mIHJldHJpZXMuXHJcbiAgICAvLyBEZXZpYXRpb246IHJhbmRvbUZhY3RvciBpcyByZXF1aXJlZC5cclxuICAgIGNvbnN0IHJhbmRvbVdhaXQgPSBNYXRoLnJvdW5kKFxyXG4gICAgLy8gQSBmcmFjdGlvbiBvZiB0aGUgYmFja29mZiB2YWx1ZSB0byBhZGQvc3VidHJhY3QuXHJcbiAgICAvLyBEZXZpYXRpb246IGNoYW5nZXMgbXVsdGlwbGljYXRpb24gb3JkZXIgdG8gaW1wcm92ZSByZWFkYWJpbGl0eS5cclxuICAgIFJBTkRPTV9GQUNUT1IgKlxyXG4gICAgICAgIGN1cnJCYXNlVmFsdWUgKlxyXG4gICAgICAgIC8vIEEgcmFuZG9tIGZsb2F0IChyb3VuZGVkIHRvIGludCBieSBNYXRoLnJvdW5kIGFib3ZlKSBpbiB0aGUgcmFuZ2UgWy0xLCAxXS4gRGV0ZXJtaW5lc1xyXG4gICAgICAgIC8vIGlmIHdlIGFkZCBvciBzdWJ0cmFjdC5cclxuICAgICAgICAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKlxyXG4gICAgICAgIDIpO1xyXG4gICAgLy8gTGltaXRzIGJhY2tvZmYgdG8gbWF4IHRvIGF2b2lkIGVmZmVjdGl2ZWx5IHBlcm1hbmVudCBiYWNrb2ZmLlxyXG4gICAgcmV0dXJuIE1hdGgubWluKE1BWF9WQUxVRV9NSUxMSVMsIGN1cnJCYXNlVmFsdWUgKyByYW5kb21XYWl0KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZSBFbmdsaXNoIG9yZGluYWwgbGV0dGVycyBhZnRlciBhIG51bWJlclxyXG4gKi9cclxuZnVuY3Rpb24gb3JkaW5hbChpKSB7XHJcbiAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShpKSkge1xyXG4gICAgICAgIHJldHVybiBgJHtpfWA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaSArIGluZGljYXRvcihpKTtcclxufVxyXG5mdW5jdGlvbiBpbmRpY2F0b3IoaSkge1xyXG4gICAgaSA9IE1hdGguYWJzKGkpO1xyXG4gICAgY29uc3QgY2VudCA9IGkgJSAxMDA7XHJcbiAgICBpZiAoY2VudCA+PSAxMCAmJiBjZW50IDw9IDIwKSB7XHJcbiAgICAgICAgcmV0dXJuICd0aCc7XHJcbiAgICB9XHJcbiAgICBjb25zdCBkZWMgPSBpICUgMTA7XHJcbiAgICBpZiAoZGVjID09PSAxKSB7XHJcbiAgICAgICAgcmV0dXJuICdzdCc7XHJcbiAgICB9XHJcbiAgICBpZiAoZGVjID09PSAyKSB7XHJcbiAgICAgICAgcmV0dXJuICduZCc7XHJcbiAgICB9XHJcbiAgICBpZiAoZGVjID09PSAzKSB7XHJcbiAgICAgICAgcmV0dXJuICdyZCc7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gJ3RoJztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRNb2R1bGFySW5zdGFuY2Uoc2VydmljZSkge1xyXG4gICAgaWYgKHNlcnZpY2UgJiYgc2VydmljZS5fZGVsZWdhdGUpIHtcclxuICAgICAgICByZXR1cm4gc2VydmljZS5fZGVsZWdhdGU7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gc2VydmljZTtcclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBDT05TVEFOVFMsIERlZmVycmVkLCBFcnJvckZhY3RvcnksIEZpcmViYXNlRXJyb3IsIE1BWF9WQUxVRV9NSUxMSVMsIFJBTkRPTV9GQUNUT1IsIFNoYTEsIGFyZUNvb2tpZXNFbmFibGVkLCBhc3NlcnQsIGFzc2VydGlvbkVycm9yLCBhc3luYywgYmFzZTY0LCBiYXNlNjREZWNvZGUsIGJhc2U2NEVuY29kZSwgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcsIGNhbGN1bGF0ZUJhY2tvZmZNaWxsaXMsIGNvbnRhaW5zLCBjcmVhdGVNb2NrVXNlclRva2VuLCBjcmVhdGVTdWJzY3JpYmUsIGRlY29kZSwgZGVlcENvcHksIGRlZXBFcXVhbCwgZGVlcEV4dGVuZCwgZXJyb3JQcmVmaXgsIGV4dHJhY3RRdWVyeXN0cmluZywgZ2V0R2xvYmFsLCBnZXRNb2R1bGFySW5zdGFuY2UsIGdldFVBLCBpc0FkbWluLCBpc0Jyb3dzZXIsIGlzQnJvd3NlckV4dGVuc2lvbiwgaXNFbGVjdHJvbiwgaXNFbXB0eSwgaXNJRSwgaXNJbmRleGVkREJBdmFpbGFibGUsIGlzTW9iaWxlQ29yZG92YSwgaXNOb2RlLCBpc05vZGVTZGssIGlzUmVhY3ROYXRpdmUsIGlzU2FmYXJpLCBpc1VXUCwgaXNWYWxpZEZvcm1hdCwgaXNWYWxpZFRpbWVzdGFtcCwgaXNzdWVkQXRUaW1lLCBqc29uRXZhbCwgbWFwLCBvcmRpbmFsLCBxdWVyeXN0cmluZywgcXVlcnlzdHJpbmdEZWNvZGUsIHNhZmVHZXQsIHN0cmluZ0xlbmd0aCwgc3RyaW5nVG9CeXRlQXJyYXksIHN0cmluZ2lmeSwgdmFsaWRhdGVBcmdDb3VudCwgdmFsaWRhdGVDYWxsYmFjaywgdmFsaWRhdGVDb250ZXh0T2JqZWN0LCB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlLCB2YWxpZGF0ZU5hbWVzcGFjZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fY3JlYXRlQmluZGluZyA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfSk7XHJcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgb1trMl0gPSBtW2tdO1xyXG59KTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgbykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBwKSkgX19jcmVhdGVCaW5kaW5nKG8sIG0sIHApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5KHRvLCBmcm9tLCBwYWNrKSB7XHJcbiAgICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcclxuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcclxuICAgICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XHJcbn0pIDogZnVuY3Rpb24obywgdikge1xyXG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XHJcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHJlY2VpdmVyLCBzdGF0ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4ga2luZCA9PT0gXCJtXCIgPyBmIDoga2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIpIDogZiA/IGYudmFsdWUgOiBzdGF0ZS5nZXQocmVjZWl2ZXIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZFNldChyZWNlaXZlciwgc3RhdGUsIHZhbHVlLCBraW5kLCBmKSB7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJtXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBzZXR0ZXJcIik7XHJcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB3cml0ZSBwcml2YXRlIG1lbWJlciB0byBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIChraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlciwgdmFsdWUpIDogZiA/IGYudmFsdWUgPSB2YWx1ZSA6IHN0YXRlLnNldChyZWNlaXZlciwgdmFsdWUpKSwgdmFsdWU7XHJcbn1cclxuIiwiaW1wb3J0IHsgRXJyb3JGYWN0b3J5LCBkZWVwRXF1YWwsIGlzQnJvd3NlckV4dGVuc2lvbiwgaXNNb2JpbGVDb3Jkb3ZhLCBpc1JlYWN0TmF0aXZlLCBGaXJlYmFzZUVycm9yLCBxdWVyeXN0cmluZywgZ2V0TW9kdWxhckluc3RhbmNlLCBiYXNlNjREZWNvZGUsIGdldFVBLCBpc0lFLCBjcmVhdGVTdWJzY3JpYmUsIHF1ZXJ5c3RyaW5nRGVjb2RlLCBleHRyYWN0UXVlcnlzdHJpbmcsIGlzRW1wdHkgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBTREtfVkVSU0lPTiwgX2dldFByb3ZpZGVyLCBfcmVnaXN0ZXJDb21wb25lbnQsIHJlZ2lzdGVyVmVyc2lvbiwgZ2V0QXBwIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBfX3Jlc3QgfSBmcm9tICd0c2xpYic7XG5pbXBvcnQgeyBMb2dnZXIsIExvZ0xldmVsIH0gZnJvbSAnQGZpcmViYXNlL2xvZ2dlcic7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEFuIGVudW0gb2YgZmFjdG9ycyB0aGF0IG1heSBiZSB1c2VkIGZvciBtdWx0aWZhY3RvciBhdXRoZW50aWNhdGlvbi5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgRmFjdG9ySWQgPSB7XHJcbiAgICAvKiogUGhvbmUgYXMgc2Vjb25kIGZhY3RvciAqL1xyXG4gICAgUEhPTkU6ICdwaG9uZSdcclxufTtcclxuLyoqXHJcbiAqIEVudW1lcmF0aW9uIG9mIHN1cHBvcnRlZCBwcm92aWRlcnMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IFByb3ZpZGVySWQgPSB7XHJcbiAgICAvKiogRmFjZWJvb2sgcHJvdmlkZXIgSUQgKi9cclxuICAgIEZBQ0VCT09LOiAnZmFjZWJvb2suY29tJyxcclxuICAgIC8qKiBHaXRIdWIgcHJvdmlkZXIgSUQgKi9cclxuICAgIEdJVEhVQjogJ2dpdGh1Yi5jb20nLFxyXG4gICAgLyoqIEdvb2dsZSBwcm92aWRlciBJRCAqL1xyXG4gICAgR09PR0xFOiAnZ29vZ2xlLmNvbScsXHJcbiAgICAvKiogUGFzc3dvcmQgcHJvdmlkZXIgKi9cclxuICAgIFBBU1NXT1JEOiAncGFzc3dvcmQnLFxyXG4gICAgLyoqIFBob25lIHByb3ZpZGVyICovXHJcbiAgICBQSE9ORTogJ3Bob25lJyxcclxuICAgIC8qKiBUd2l0dGVyIHByb3ZpZGVyIElEICovXHJcbiAgICBUV0lUVEVSOiAndHdpdHRlci5jb20nXHJcbn07XHJcbi8qKlxyXG4gKiBFbnVtZXJhdGlvbiBvZiBzdXBwb3J0ZWQgc2lnbi1pbiBtZXRob2RzLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBTaWduSW5NZXRob2QgPSB7XHJcbiAgICAvKiogRW1haWwgbGluayBzaWduIGluIG1ldGhvZCAqL1xyXG4gICAgRU1BSUxfTElOSzogJ2VtYWlsTGluaycsXHJcbiAgICAvKiogRW1haWwvcGFzc3dvcmQgc2lnbiBpbiBtZXRob2QgKi9cclxuICAgIEVNQUlMX1BBU1NXT1JEOiAncGFzc3dvcmQnLFxyXG4gICAgLyoqIEZhY2Vib29rIHNpZ24gaW4gbWV0aG9kICovXHJcbiAgICBGQUNFQk9PSzogJ2ZhY2Vib29rLmNvbScsXHJcbiAgICAvKiogR2l0SHViIHNpZ24gaW4gbWV0aG9kICovXHJcbiAgICBHSVRIVUI6ICdnaXRodWIuY29tJyxcclxuICAgIC8qKiBHb29nbGUgc2lnbiBpbiBtZXRob2QgKi9cclxuICAgIEdPT0dMRTogJ2dvb2dsZS5jb20nLFxyXG4gICAgLyoqIFBob25lIHNpZ24gaW4gbWV0aG9kICovXHJcbiAgICBQSE9ORTogJ3Bob25lJyxcclxuICAgIC8qKiBUd2l0dGVyIHNpZ24gaW4gbWV0aG9kICovXHJcbiAgICBUV0lUVEVSOiAndHdpdHRlci5jb20nXHJcbn07XHJcbi8qKlxyXG4gKiBFbnVtZXJhdGlvbiBvZiBzdXBwb3J0ZWQgb3BlcmF0aW9uIHR5cGVzLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBPcGVyYXRpb25UeXBlID0ge1xyXG4gICAgLyoqIE9wZXJhdGlvbiBpbnZvbHZpbmcgbGlua2luZyBhbiBhZGRpdGlvbmFsIHByb3ZpZGVyIHRvIGFuIGFscmVhZHkgc2lnbmVkLWluIHVzZXIuICovXHJcbiAgICBMSU5LOiAnbGluaycsXHJcbiAgICAvKiogT3BlcmF0aW9uIGludm9sdmluZyB1c2luZyBhIHByb3ZpZGVyIHRvIHJlYXV0aGVudGljYXRlIGFuIGFscmVhZHkgc2lnbmVkLWluIHVzZXIuICovXHJcbiAgICBSRUFVVEhFTlRJQ0FURTogJ3JlYXV0aGVudGljYXRlJyxcclxuICAgIC8qKiBPcGVyYXRpb24gaW52b2x2aW5nIHNpZ25pbmcgaW4gYSB1c2VyLiAqL1xyXG4gICAgU0lHTl9JTjogJ3NpZ25JbidcclxufTtcclxuLyoqXHJcbiAqIEFuIGVudW1lcmF0aW9uIG9mIHRoZSBwb3NzaWJsZSBlbWFpbCBhY3Rpb24gdHlwZXMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IEFjdGlvbkNvZGVPcGVyYXRpb24gPSB7XHJcbiAgICAvKiogVGhlIGVtYWlsIGxpbmsgc2lnbi1pbiBhY3Rpb24uICovXHJcbiAgICBFTUFJTF9TSUdOSU46ICdFTUFJTF9TSUdOSU4nLFxyXG4gICAgLyoqIFRoZSBwYXNzd29yZCByZXNldCBhY3Rpb24uICovXHJcbiAgICBQQVNTV09SRF9SRVNFVDogJ1BBU1NXT1JEX1JFU0VUJyxcclxuICAgIC8qKiBUaGUgZW1haWwgcmV2b2NhdGlvbiBhY3Rpb24uICovXHJcbiAgICBSRUNPVkVSX0VNQUlMOiAnUkVDT1ZFUl9FTUFJTCcsXHJcbiAgICAvKiogVGhlIHJldmVydCBzZWNvbmQgZmFjdG9yIGFkZGl0aW9uIGVtYWlsIGFjdGlvbi4gKi9cclxuICAgIFJFVkVSVF9TRUNPTkRfRkFDVE9SX0FERElUSU9OOiAnUkVWRVJUX1NFQ09ORF9GQUNUT1JfQURESVRJT04nLFxyXG4gICAgLyoqIFRoZSByZXZlcnQgc2Vjb25kIGZhY3RvciBhZGRpdGlvbiBlbWFpbCBhY3Rpb24uICovXHJcbiAgICBWRVJJRllfQU5EX0NIQU5HRV9FTUFJTDogJ1ZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMJyxcclxuICAgIC8qKiBUaGUgZW1haWwgdmVyaWZpY2F0aW9uIGFjdGlvbi4gKi9cclxuICAgIFZFUklGWV9FTUFJTDogJ1ZFUklGWV9FTUFJTCdcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX2RlYnVnRXJyb3JNYXAoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIFtcImFkbWluLXJlc3RyaWN0ZWQtb3BlcmF0aW9uXCIgLyogQURNSU5fT05MWV9PUEVSQVRJT04gKi9dOiAnVGhpcyBvcGVyYXRpb24gaXMgcmVzdHJpY3RlZCB0byBhZG1pbmlzdHJhdG9ycyBvbmx5LicsXHJcbiAgICAgICAgW1wiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqL106ICcnLFxyXG4gICAgICAgIFtcImFwcC1ub3QtYXV0aG9yaXplZFwiIC8qIEFQUF9OT1RfQVVUSE9SSVpFRCAqL106IFwiVGhpcyBhcHAsIGlkZW50aWZpZWQgYnkgdGhlIGRvbWFpbiB3aGVyZSBpdCdzIGhvc3RlZCwgaXMgbm90IFwiICtcclxuICAgICAgICAgICAgJ2F1dGhvcml6ZWQgdG8gdXNlIEZpcmViYXNlIEF1dGhlbnRpY2F0aW9uIHdpdGggdGhlIHByb3ZpZGVkIEFQSSBrZXkuICcgK1xyXG4gICAgICAgICAgICAnUmV2aWV3IHlvdXIga2V5IGNvbmZpZ3VyYXRpb24gaW4gdGhlIEdvb2dsZSBBUEkgY29uc29sZS4nLFxyXG4gICAgICAgIFtcImFwcC1ub3QtaW5zdGFsbGVkXCIgLyogQVBQX05PVF9JTlNUQUxMRUQgKi9dOiAnVGhlIHJlcXVlc3RlZCBtb2JpbGUgYXBwbGljYXRpb24gY29ycmVzcG9uZGluZyB0byB0aGUgaWRlbnRpZmllciAoJyArXHJcbiAgICAgICAgICAgICdBbmRyb2lkIHBhY2thZ2UgbmFtZSBvciBpT1MgYnVuZGxlIElEKSBwcm92aWRlZCBpcyBub3QgaW5zdGFsbGVkIG9uICcgK1xyXG4gICAgICAgICAgICAndGhpcyBkZXZpY2UuJyxcclxuICAgICAgICBbXCJjYXB0Y2hhLWNoZWNrLWZhaWxlZFwiIC8qIENBUFRDSEFfQ0hFQ0tfRkFJTEVEICovXTogJ1RoZSByZUNBUFRDSEEgcmVzcG9uc2UgdG9rZW4gcHJvdmlkZWQgaXMgZWl0aGVyIGludmFsaWQsIGV4cGlyZWQsICcgK1xyXG4gICAgICAgICAgICAnYWxyZWFkeSB1c2VkIG9yIHRoZSBkb21haW4gYXNzb2NpYXRlZCB3aXRoIGl0IGRvZXMgbm90IG1hdGNoIHRoZSBsaXN0ICcgK1xyXG4gICAgICAgICAgICAnb2Ygd2hpdGVsaXN0ZWQgZG9tYWlucy4nLFxyXG4gICAgICAgIFtcImNvZGUtZXhwaXJlZFwiIC8qIENPREVfRVhQSVJFRCAqL106ICdUaGUgU01TIGNvZGUgaGFzIGV4cGlyZWQuIFBsZWFzZSByZS1zZW5kIHRoZSB2ZXJpZmljYXRpb24gY29kZSB0byB0cnkgJyArXHJcbiAgICAgICAgICAgICdhZ2Fpbi4nLFxyXG4gICAgICAgIFtcImNvcmRvdmEtbm90LXJlYWR5XCIgLyogQ09SRE9WQV9OT1RfUkVBRFkgKi9dOiAnQ29yZG92YSBmcmFtZXdvcmsgaXMgbm90IHJlYWR5LicsXHJcbiAgICAgICAgW1wiY29ycy11bnN1cHBvcnRlZFwiIC8qIENPUlNfVU5TVVBQT1JURUQgKi9dOiAnVGhpcyBicm93c2VyIGlzIG5vdCBzdXBwb3J0ZWQuJyxcclxuICAgICAgICBbXCJjcmVkZW50aWFsLWFscmVhZHktaW4tdXNlXCIgLyogQ1JFREVOVElBTF9BTFJFQURZX0lOX1VTRSAqL106ICdUaGlzIGNyZWRlbnRpYWwgaXMgYWxyZWFkeSBhc3NvY2lhdGVkIHdpdGggYSBkaWZmZXJlbnQgdXNlciBhY2NvdW50LicsXHJcbiAgICAgICAgW1wiY3VzdG9tLXRva2VuLW1pc21hdGNoXCIgLyogQ1JFREVOVElBTF9NSVNNQVRDSCAqL106ICdUaGUgY3VzdG9tIHRva2VuIGNvcnJlc3BvbmRzIHRvIGEgZGlmZmVyZW50IGF1ZGllbmNlLicsXHJcbiAgICAgICAgW1wicmVxdWlyZXMtcmVjZW50LWxvZ2luXCIgLyogQ1JFREVOVElBTF9UT09fT0xEX0xPR0lOX0FHQUlOICovXTogJ1RoaXMgb3BlcmF0aW9uIGlzIHNlbnNpdGl2ZSBhbmQgcmVxdWlyZXMgcmVjZW50IGF1dGhlbnRpY2F0aW9uLiBMb2cgaW4gJyArXHJcbiAgICAgICAgICAgICdhZ2FpbiBiZWZvcmUgcmV0cnlpbmcgdGhpcyByZXF1ZXN0LicsXHJcbiAgICAgICAgW1wiZGVwZW5kZW50LXNkay1pbml0aWFsaXplZC1iZWZvcmUtYXV0aFwiIC8qIERFUEVOREVOVF9TREtfSU5JVF9CRUZPUkVfQVVUSCAqL106ICdBbm90aGVyIEZpcmViYXNlIFNESyB3YXMgaW5pdGlhbGl6ZWQgYW5kIGlzIHRyeWluZyB0byB1c2UgQXV0aCBiZWZvcmUgQXV0aCBpcyAnICtcclxuICAgICAgICAgICAgJ2luaXRpYWxpemVkLiBQbGVhc2UgYmUgc3VyZSB0byBjYWxsIGBpbml0aWFsaXplQXV0aGAgb3IgYGdldEF1dGhgIGJlZm9yZSAnICtcclxuICAgICAgICAgICAgJ3N0YXJ0aW5nIGFueSBvdGhlciBGaXJlYmFzZSBTREsuJyxcclxuICAgICAgICBbXCJkeW5hbWljLWxpbmstbm90LWFjdGl2YXRlZFwiIC8qIERZTkFNSUNfTElOS19OT1RfQUNUSVZBVEVEICovXTogJ1BsZWFzZSBhY3RpdmF0ZSBEeW5hbWljIExpbmtzIGluIHRoZSBGaXJlYmFzZSBDb25zb2xlIGFuZCBhZ3JlZSB0byB0aGUgdGVybXMgYW5kICcgK1xyXG4gICAgICAgICAgICAnY29uZGl0aW9ucy4nLFxyXG4gICAgICAgIFtcImVtYWlsLWNoYW5nZS1uZWVkcy12ZXJpZmljYXRpb25cIiAvKiBFTUFJTF9DSEFOR0VfTkVFRFNfVkVSSUZJQ0FUSU9OICovXTogJ011bHRpLWZhY3RvciB1c2VycyBtdXN0IGFsd2F5cyBoYXZlIGEgdmVyaWZpZWQgZW1haWwuJyxcclxuICAgICAgICBbXCJlbWFpbC1hbHJlYWR5LWluLXVzZVwiIC8qIEVNQUlMX0VYSVNUUyAqL106ICdUaGUgZW1haWwgYWRkcmVzcyBpcyBhbHJlYWR5IGluIHVzZSBieSBhbm90aGVyIGFjY291bnQuJyxcclxuICAgICAgICBbXCJlbXVsYXRvci1jb25maWctZmFpbGVkXCIgLyogRU1VTEFUT1JfQ09ORklHX0ZBSUxFRCAqL106ICdBdXRoIGluc3RhbmNlIGhhcyBhbHJlYWR5IGJlZW4gdXNlZCB0byBtYWtlIGEgbmV0d29yayBjYWxsLiBBdXRoIGNhbiAnICtcclxuICAgICAgICAgICAgJ25vIGxvbmdlciBiZSBjb25maWd1cmVkIHRvIHVzZSB0aGUgZW11bGF0b3IuIFRyeSBjYWxsaW5nICcgK1xyXG4gICAgICAgICAgICAnXCJjb25uZWN0QXV0aEVtdWxhdG9yKClcIiBzb29uZXIuJyxcclxuICAgICAgICBbXCJleHBpcmVkLWFjdGlvbi1jb2RlXCIgLyogRVhQSVJFRF9PT0JfQ09ERSAqL106ICdUaGUgYWN0aW9uIGNvZGUgaGFzIGV4cGlyZWQuJyxcclxuICAgICAgICBbXCJjYW5jZWxsZWQtcG9wdXAtcmVxdWVzdFwiIC8qIEVYUElSRURfUE9QVVBfUkVRVUVTVCAqL106ICdUaGlzIG9wZXJhdGlvbiBoYXMgYmVlbiBjYW5jZWxsZWQgZHVlIHRvIGFub3RoZXIgY29uZmxpY3RpbmcgcG9wdXAgYmVpbmcgb3BlbmVkLicsXHJcbiAgICAgICAgW1wiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqL106ICdBbiBpbnRlcm5hbCBBdXRoRXJyb3IgaGFzIG9jY3VycmVkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1hcHAtY3JlZGVudGlhbFwiIC8qIElOVkFMSURfQVBQX0NSRURFTlRJQUwgKi9dOiAnVGhlIHBob25lIHZlcmlmaWNhdGlvbiByZXF1ZXN0IGNvbnRhaW5zIGFuIGludmFsaWQgYXBwbGljYXRpb24gdmVyaWZpZXIuJyArXHJcbiAgICAgICAgICAgICcgVGhlIHJlQ0FQVENIQSB0b2tlbiByZXNwb25zZSBpcyBlaXRoZXIgaW52YWxpZCBvciBleHBpcmVkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1hcHAtaWRcIiAvKiBJTlZBTElEX0FQUF9JRCAqL106ICdUaGUgbW9iaWxlIGFwcCBpZGVudGlmaWVyIGlzIG5vdCByZWdpc3RlZCBmb3IgdGhlIGN1cnJlbnQgcHJvamVjdC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtdXNlci10b2tlblwiIC8qIElOVkFMSURfQVVUSCAqL106IFwiVGhpcyB1c2VyJ3MgY3JlZGVudGlhbCBpc24ndCB2YWxpZCBmb3IgdGhpcyBwcm9qZWN0LiBUaGlzIGNhbiBoYXBwZW4gXCIgK1xyXG4gICAgICAgICAgICBcImlmIHRoZSB1c2VyJ3MgdG9rZW4gaGFzIGJlZW4gdGFtcGVyZWQgd2l0aCwgb3IgaWYgdGhlIHVzZXIgaXNuJ3QgZm9yIFwiICtcclxuICAgICAgICAgICAgJ3RoZSBwcm9qZWN0IGFzc29jaWF0ZWQgd2l0aCB0aGlzIEFQSSBrZXkuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWF1dGgtZXZlbnRcIiAvKiBJTlZBTElEX0FVVEhfRVZFTlQgKi9dOiAnQW4gaW50ZXJuYWwgQXV0aEVycm9yIGhhcyBvY2N1cnJlZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtdmVyaWZpY2F0aW9uLWNvZGVcIiAvKiBJTlZBTElEX0NPREUgKi9dOiAnVGhlIFNNUyB2ZXJpZmljYXRpb24gY29kZSB1c2VkIHRvIGNyZWF0ZSB0aGUgcGhvbmUgYXV0aCBjcmVkZW50aWFsIGlzICcgK1xyXG4gICAgICAgICAgICAnaW52YWxpZC4gUGxlYXNlIHJlc2VuZCB0aGUgdmVyaWZpY2F0aW9uIGNvZGUgc21zIGFuZCBiZSBzdXJlIHRvIHVzZSB0aGUgJyArXHJcbiAgICAgICAgICAgICd2ZXJpZmljYXRpb24gY29kZSBwcm92aWRlZCBieSB0aGUgdXNlci4nLFxyXG4gICAgICAgIFtcImludmFsaWQtY29udGludWUtdXJpXCIgLyogSU5WQUxJRF9DT05USU5VRV9VUkkgKi9dOiAnVGhlIGNvbnRpbnVlIFVSTCBwcm92aWRlZCBpbiB0aGUgcmVxdWVzdCBpcyBpbnZhbGlkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1jb3Jkb3ZhLWNvbmZpZ3VyYXRpb25cIiAvKiBJTlZBTElEX0NPUkRPVkFfQ09ORklHVVJBVElPTiAqL106ICdUaGUgZm9sbG93aW5nIENvcmRvdmEgcGx1Z2lucyBtdXN0IGJlIGluc3RhbGxlZCB0byBlbmFibGUgT0F1dGggc2lnbi1pbjogJyArXHJcbiAgICAgICAgICAgICdjb3Jkb3ZhLXBsdWdpbi1idWlsZGluZm8sIGNvcmRvdmEtdW5pdmVyc2FsLWxpbmtzLXBsdWdpbiwgJyArXHJcbiAgICAgICAgICAgICdjb3Jkb3ZhLXBsdWdpbi1icm93c2VydGFiLCBjb3Jkb3ZhLXBsdWdpbi1pbmFwcGJyb3dzZXIgYW5kICcgK1xyXG4gICAgICAgICAgICAnY29yZG92YS1wbHVnaW4tY3VzdG9tdXJsc2NoZW1lLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1jdXN0b20tdG9rZW5cIiAvKiBJTlZBTElEX0NVU1RPTV9UT0tFTiAqL106ICdUaGUgY3VzdG9tIHRva2VuIGZvcm1hdCBpcyBpbmNvcnJlY3QuIFBsZWFzZSBjaGVjayB0aGUgZG9jdW1lbnRhdGlvbi4nLFxyXG4gICAgICAgIFtcImludmFsaWQtZHluYW1pYy1saW5rLWRvbWFpblwiIC8qIElOVkFMSURfRFlOQU1JQ19MSU5LX0RPTUFJTiAqL106ICdUaGUgcHJvdmlkZWQgZHluYW1pYyBsaW5rIGRvbWFpbiBpcyBub3QgY29uZmlndXJlZCBvciBhdXRob3JpemVkIGZvciB0aGUgY3VycmVudCBwcm9qZWN0LicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1lbWFpbFwiIC8qIElOVkFMSURfRU1BSUwgKi9dOiAnVGhlIGVtYWlsIGFkZHJlc3MgaXMgYmFkbHkgZm9ybWF0dGVkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1lbXVsYXRvci1zY2hlbWVcIiAvKiBJTlZBTElEX0VNVUxBVE9SX1NDSEVNRSAqL106ICdFbXVsYXRvciBVUkwgbXVzdCBzdGFydCB3aXRoIGEgdmFsaWQgc2NoZW1lIChodHRwOi8vIG9yIGh0dHBzOi8vKS4nLFxyXG4gICAgICAgIFtcImludmFsaWQtYXBpLWtleVwiIC8qIElOVkFMSURfQVBJX0tFWSAqL106ICdZb3VyIEFQSSBrZXkgaXMgaW52YWxpZCwgcGxlYXNlIGNoZWNrIHlvdSBoYXZlIGNvcGllZCBpdCBjb3JyZWN0bHkuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWNlcnQtaGFzaFwiIC8qIElOVkFMSURfQ0VSVF9IQVNIICovXTogJ1RoZSBTSEEtMSBjZXJ0aWZpY2F0ZSBoYXNoIHByb3ZpZGVkIGlzIGludmFsaWQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWNyZWRlbnRpYWxcIiAvKiBJTlZBTElEX0lEUF9SRVNQT05TRSAqL106ICdUaGUgc3VwcGxpZWQgYXV0aCBjcmVkZW50aWFsIGlzIG1hbGZvcm1lZCBvciBoYXMgZXhwaXJlZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtbWVzc2FnZS1wYXlsb2FkXCIgLyogSU5WQUxJRF9NRVNTQUdFX1BBWUxPQUQgKi9dOiAnVGhlIGVtYWlsIHRlbXBsYXRlIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyBhY3Rpb24gY29udGFpbnMgaW52YWxpZCBjaGFyYWN0ZXJzIGluIGl0cyBtZXNzYWdlLiAnICtcclxuICAgICAgICAgICAgJ1BsZWFzZSBmaXggYnkgZ29pbmcgdG8gdGhlIEF1dGggZW1haWwgdGVtcGxhdGVzIHNlY3Rpb24gaW4gdGhlIEZpcmViYXNlIENvbnNvbGUuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLW11bHRpLWZhY3Rvci1zZXNzaW9uXCIgLyogSU5WQUxJRF9NRkFfU0VTU0lPTiAqL106ICdUaGUgcmVxdWVzdCBkb2VzIG5vdCBjb250YWluIGEgdmFsaWQgcHJvb2Ygb2YgZmlyc3QgZmFjdG9yIHN1Y2Nlc3NmdWwgc2lnbi1pbi4nLFxyXG4gICAgICAgIFtcImludmFsaWQtb2F1dGgtcHJvdmlkZXJcIiAvKiBJTlZBTElEX09BVVRIX1BST1ZJREVSICovXTogJ0VtYWlsQXV0aFByb3ZpZGVyIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgb3BlcmF0aW9uLiBUaGlzIG9wZXJhdGlvbiAnICtcclxuICAgICAgICAgICAgJ29ubHkgc3VwcG9ydHMgT0F1dGggcHJvdmlkZXJzLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1vYXV0aC1jbGllbnQtaWRcIiAvKiBJTlZBTElEX09BVVRIX0NMSUVOVF9JRCAqL106ICdUaGUgT0F1dGggY2xpZW50IElEIHByb3ZpZGVkIGlzIGVpdGhlciBpbnZhbGlkIG9yIGRvZXMgbm90IG1hdGNoIHRoZSAnICtcclxuICAgICAgICAgICAgJ3NwZWNpZmllZCBBUEkga2V5LicsXHJcbiAgICAgICAgW1widW5hdXRob3JpemVkLWRvbWFpblwiIC8qIElOVkFMSURfT1JJR0lOICovXTogJ1RoaXMgZG9tYWluIGlzIG5vdCBhdXRob3JpemVkIGZvciBPQXV0aCBvcGVyYXRpb25zIGZvciB5b3VyIEZpcmViYXNlICcgK1xyXG4gICAgICAgICAgICAncHJvamVjdC4gRWRpdCB0aGUgbGlzdCBvZiBhdXRob3JpemVkIGRvbWFpbnMgZnJvbSB0aGUgRmlyZWJhc2UgY29uc29sZS4nLFxyXG4gICAgICAgIFtcImludmFsaWQtYWN0aW9uLWNvZGVcIiAvKiBJTlZBTElEX09PQl9DT0RFICovXTogJ1RoZSBhY3Rpb24gY29kZSBpcyBpbnZhbGlkLiBUaGlzIGNhbiBoYXBwZW4gaWYgdGhlIGNvZGUgaXMgbWFsZm9ybWVkLCAnICtcclxuICAgICAgICAgICAgJ2V4cGlyZWQsIG9yIGhhcyBhbHJlYWR5IGJlZW4gdXNlZC4nLFxyXG4gICAgICAgIFtcIndyb25nLXBhc3N3b3JkXCIgLyogSU5WQUxJRF9QQVNTV09SRCAqL106ICdUaGUgcGFzc3dvcmQgaXMgaW52YWxpZCBvciB0aGUgdXNlciBkb2VzIG5vdCBoYXZlIGEgcGFzc3dvcmQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLXBlcnNpc3RlbmNlLXR5cGVcIiAvKiBJTlZBTElEX1BFUlNJU1RFTkNFICovXTogJ1RoZSBzcGVjaWZpZWQgcGVyc2lzdGVuY2UgdHlwZSBpcyBpbnZhbGlkLiBJdCBjYW4gb25seSBiZSBsb2NhbCwgc2Vzc2lvbiBvciBub25lLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1waG9uZS1udW1iZXJcIiAvKiBJTlZBTElEX1BIT05FX05VTUJFUiAqL106ICdUaGUgZm9ybWF0IG9mIHRoZSBwaG9uZSBudW1iZXIgcHJvdmlkZWQgaXMgaW5jb3JyZWN0LiBQbGVhc2UgZW50ZXIgdGhlICcgK1xyXG4gICAgICAgICAgICAncGhvbmUgbnVtYmVyIGluIGEgZm9ybWF0IHRoYXQgY2FuIGJlIHBhcnNlZCBpbnRvIEUuMTY0IGZvcm1hdC4gRS4xNjQgJyArXHJcbiAgICAgICAgICAgICdwaG9uZSBudW1iZXJzIGFyZSB3cml0dGVuIGluIHRoZSBmb3JtYXQgWytdW2NvdW50cnkgY29kZV1bc3Vic2NyaWJlciAnICtcclxuICAgICAgICAgICAgJ251bWJlciBpbmNsdWRpbmcgYXJlYSBjb2RlXS4nLFxyXG4gICAgICAgIFtcImludmFsaWQtcHJvdmlkZXItaWRcIiAvKiBJTlZBTElEX1BST1ZJREVSX0lEICovXTogJ1RoZSBzcGVjaWZpZWQgcHJvdmlkZXIgSUQgaXMgaW52YWxpZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtcmVjaXBpZW50LWVtYWlsXCIgLyogSU5WQUxJRF9SRUNJUElFTlRfRU1BSUwgKi9dOiAnVGhlIGVtYWlsIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyBhY3Rpb24gZmFpbGVkIHRvIHNlbmQgYXMgdGhlIHByb3ZpZGVkICcgK1xyXG4gICAgICAgICAgICAncmVjaXBpZW50IGVtYWlsIGFkZHJlc3MgaXMgaW52YWxpZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtc2VuZGVyXCIgLyogSU5WQUxJRF9TRU5ERVIgKi9dOiAnVGhlIGVtYWlsIHRlbXBsYXRlIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyBhY3Rpb24gY29udGFpbnMgYW4gaW52YWxpZCBzZW5kZXIgZW1haWwgb3IgbmFtZS4gJyArXHJcbiAgICAgICAgICAgICdQbGVhc2UgZml4IGJ5IGdvaW5nIHRvIHRoZSBBdXRoIGVtYWlsIHRlbXBsYXRlcyBzZWN0aW9uIGluIHRoZSBGaXJlYmFzZSBDb25zb2xlLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC12ZXJpZmljYXRpb24taWRcIiAvKiBJTlZBTElEX1NFU1NJT05fSU5GTyAqL106ICdUaGUgdmVyaWZpY2F0aW9uIElEIHVzZWQgdG8gY3JlYXRlIHRoZSBwaG9uZSBhdXRoIGNyZWRlbnRpYWwgaXMgaW52YWxpZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtdGVuYW50LWlkXCIgLyogSU5WQUxJRF9URU5BTlRfSUQgKi9dOiBcIlRoZSBBdXRoIGluc3RhbmNlJ3MgdGVuYW50IElEIGlzIGludmFsaWQuXCIsXHJcbiAgICAgICAgW1wibWlzc2luZy1hbmRyb2lkLXBrZy1uYW1lXCIgLyogTUlTU0lOR19BTkRST0lEX1BBQ0tBR0VfTkFNRSAqL106ICdBbiBBbmRyb2lkIFBhY2thZ2UgTmFtZSBtdXN0IGJlIHByb3ZpZGVkIGlmIHRoZSBBbmRyb2lkIEFwcCBpcyByZXF1aXJlZCB0byBiZSBpbnN0YWxsZWQuJyxcclxuICAgICAgICBbXCJhdXRoLWRvbWFpbi1jb25maWctcmVxdWlyZWRcIiAvKiBNSVNTSU5HX0FVVEhfRE9NQUlOICovXTogJ0JlIHN1cmUgdG8gaW5jbHVkZSBhdXRoRG9tYWluIHdoZW4gY2FsbGluZyBmaXJlYmFzZS5pbml0aWFsaXplQXBwKCksICcgK1xyXG4gICAgICAgICAgICAnYnkgZm9sbG93aW5nIHRoZSBpbnN0cnVjdGlvbnMgaW4gdGhlIEZpcmViYXNlIGNvbnNvbGUuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLWFwcC1jcmVkZW50aWFsXCIgLyogTUlTU0lOR19BUFBfQ1JFREVOVElBTCAqL106ICdUaGUgcGhvbmUgdmVyaWZpY2F0aW9uIHJlcXVlc3QgaXMgbWlzc2luZyBhbiBhcHBsaWNhdGlvbiB2ZXJpZmllciAnICtcclxuICAgICAgICAgICAgJ2Fzc2VydGlvbi4gQSByZUNBUFRDSEEgcmVzcG9uc2UgdG9rZW4gbmVlZHMgdG8gYmUgcHJvdmlkZWQuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLXZlcmlmaWNhdGlvbi1jb2RlXCIgLyogTUlTU0lOR19DT0RFICovXTogJ1RoZSBwaG9uZSBhdXRoIGNyZWRlbnRpYWwgd2FzIGNyZWF0ZWQgd2l0aCBhbiBlbXB0eSBTTVMgdmVyaWZpY2F0aW9uIGNvZGUuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLWNvbnRpbnVlLXVyaVwiIC8qIE1JU1NJTkdfQ09OVElOVUVfVVJJICovXTogJ0EgY29udGludWUgVVJMIG11c3QgYmUgcHJvdmlkZWQgaW4gdGhlIHJlcXVlc3QuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLWlmcmFtZS1zdGFydFwiIC8qIE1JU1NJTkdfSUZSQU1FX1NUQVJUICovXTogJ0FuIGludGVybmFsIEF1dGhFcnJvciBoYXMgb2NjdXJyZWQuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLWlvcy1idW5kbGUtaWRcIiAvKiBNSVNTSU5HX0lPU19CVU5ETEVfSUQgKi9dOiAnQW4gaU9TIEJ1bmRsZSBJRCBtdXN0IGJlIHByb3ZpZGVkIGlmIGFuIEFwcCBTdG9yZSBJRCBpcyBwcm92aWRlZC4nLFxyXG4gICAgICAgIFtcIm1pc3Npbmctb3ItaW52YWxpZC1ub25jZVwiIC8qIE1JU1NJTkdfT1JfSU5WQUxJRF9OT05DRSAqL106ICdUaGUgcmVxdWVzdCBkb2VzIG5vdCBjb250YWluIGEgdmFsaWQgbm9uY2UuIFRoaXMgY2FuIG9jY3VyIGlmIHRoZSAnICtcclxuICAgICAgICAgICAgJ1NIQS0yNTYgaGFzaCBvZiB0aGUgcHJvdmlkZWQgcmF3IG5vbmNlIGRvZXMgbm90IG1hdGNoIHRoZSBoYXNoZWQgbm9uY2UgJyArXHJcbiAgICAgICAgICAgICdpbiB0aGUgSUQgdG9rZW4gcGF5bG9hZC4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctbXVsdGktZmFjdG9yLWluZm9cIiAvKiBNSVNTSU5HX01GQV9JTkZPICovXTogJ05vIHNlY29uZCBmYWN0b3IgaWRlbnRpZmllciBpcyBwcm92aWRlZC4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctbXVsdGktZmFjdG9yLXNlc3Npb25cIiAvKiBNSVNTSU5HX01GQV9TRVNTSU9OICovXTogJ1RoZSByZXF1ZXN0IGlzIG1pc3NpbmcgcHJvb2Ygb2YgZmlyc3QgZmFjdG9yIHN1Y2Nlc3NmdWwgc2lnbi1pbi4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctcGhvbmUtbnVtYmVyXCIgLyogTUlTU0lOR19QSE9ORV9OVU1CRVIgKi9dOiAnVG8gc2VuZCB2ZXJpZmljYXRpb24gY29kZXMsIHByb3ZpZGUgYSBwaG9uZSBudW1iZXIgZm9yIHRoZSByZWNpcGllbnQuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLXZlcmlmaWNhdGlvbi1pZFwiIC8qIE1JU1NJTkdfU0VTU0lPTl9JTkZPICovXTogJ1RoZSBwaG9uZSBhdXRoIGNyZWRlbnRpYWwgd2FzIGNyZWF0ZWQgd2l0aCBhbiBlbXB0eSB2ZXJpZmljYXRpb24gSUQuJyxcclxuICAgICAgICBbXCJhcHAtZGVsZXRlZFwiIC8qIE1PRFVMRV9ERVNUUk9ZRUQgKi9dOiAnVGhpcyBpbnN0YW5jZSBvZiBGaXJlYmFzZUFwcCBoYXMgYmVlbiBkZWxldGVkLicsXHJcbiAgICAgICAgW1wibXVsdGktZmFjdG9yLWluZm8tbm90LWZvdW5kXCIgLyogTUZBX0lORk9fTk9UX0ZPVU5EICovXTogJ1RoZSB1c2VyIGRvZXMgbm90IGhhdmUgYSBzZWNvbmQgZmFjdG9yIG1hdGNoaW5nIHRoZSBpZGVudGlmaWVyIHByb3ZpZGVkLicsXHJcbiAgICAgICAgW1wibXVsdGktZmFjdG9yLWF1dGgtcmVxdWlyZWRcIiAvKiBNRkFfUkVRVUlSRUQgKi9dOiAnUHJvb2Ygb2Ygb3duZXJzaGlwIG9mIGEgc2Vjb25kIGZhY3RvciBpcyByZXF1aXJlZCB0byBjb21wbGV0ZSBzaWduLWluLicsXHJcbiAgICAgICAgW1wiYWNjb3VudC1leGlzdHMtd2l0aC1kaWZmZXJlbnQtY3JlZGVudGlhbFwiIC8qIE5FRURfQ09ORklSTUFUSU9OICovXTogJ0FuIGFjY291bnQgYWxyZWFkeSBleGlzdHMgd2l0aCB0aGUgc2FtZSBlbWFpbCBhZGRyZXNzIGJ1dCBkaWZmZXJlbnQgJyArXHJcbiAgICAgICAgICAgICdzaWduLWluIGNyZWRlbnRpYWxzLiBTaWduIGluIHVzaW5nIGEgcHJvdmlkZXIgYXNzb2NpYXRlZCB3aXRoIHRoaXMgJyArXHJcbiAgICAgICAgICAgICdlbWFpbCBhZGRyZXNzLicsXHJcbiAgICAgICAgW1wibmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiIC8qIE5FVFdPUktfUkVRVUVTVF9GQUlMRUQgKi9dOiAnQSBuZXR3b3JrIEF1dGhFcnJvciAoc3VjaCBhcyB0aW1lb3V0LCBpbnRlcnJ1cHRlZCBjb25uZWN0aW9uIG9yIHVucmVhY2hhYmxlIGhvc3QpIGhhcyBvY2N1cnJlZC4nLFxyXG4gICAgICAgIFtcIm5vLWF1dGgtZXZlbnRcIiAvKiBOT19BVVRIX0VWRU5UICovXTogJ0FuIGludGVybmFsIEF1dGhFcnJvciBoYXMgb2NjdXJyZWQuJyxcclxuICAgICAgICBbXCJuby1zdWNoLXByb3ZpZGVyXCIgLyogTk9fU1VDSF9QUk9WSURFUiAqL106ICdVc2VyIHdhcyBub3QgbGlua2VkIHRvIGFuIGFjY291bnQgd2l0aCB0aGUgZ2l2ZW4gcHJvdmlkZXIuJyxcclxuICAgICAgICBbXCJudWxsLXVzZXJcIiAvKiBOVUxMX1VTRVIgKi9dOiAnQSBudWxsIHVzZXIgb2JqZWN0IHdhcyBwcm92aWRlZCBhcyB0aGUgYXJndW1lbnQgZm9yIGFuIG9wZXJhdGlvbiB3aGljaCAnICtcclxuICAgICAgICAgICAgJ3JlcXVpcmVzIGEgbm9uLW51bGwgdXNlciBvYmplY3QuJyxcclxuICAgICAgICBbXCJvcGVyYXRpb24tbm90LWFsbG93ZWRcIiAvKiBPUEVSQVRJT05fTk9UX0FMTE9XRUQgKi9dOiAnVGhlIGdpdmVuIHNpZ24taW4gcHJvdmlkZXIgaXMgZGlzYWJsZWQgZm9yIHRoaXMgRmlyZWJhc2UgcHJvamVjdC4gJyArXHJcbiAgICAgICAgICAgICdFbmFibGUgaXQgaW4gdGhlIEZpcmViYXNlIGNvbnNvbGUsIHVuZGVyIHRoZSBzaWduLWluIG1ldGhvZCB0YWIgb2YgdGhlICcgK1xyXG4gICAgICAgICAgICAnQXV0aCBzZWN0aW9uLicsXHJcbiAgICAgICAgW1wib3BlcmF0aW9uLW5vdC1zdXBwb3J0ZWQtaW4tdGhpcy1lbnZpcm9ubWVudFwiIC8qIE9QRVJBVElPTl9OT1RfU1VQUE9SVEVEICovXTogJ1RoaXMgb3BlcmF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhlIGVudmlyb25tZW50IHRoaXMgYXBwbGljYXRpb24gaXMgJyArXHJcbiAgICAgICAgICAgICdydW5uaW5nIG9uLiBcImxvY2F0aW9uLnByb3RvY29sXCIgbXVzdCBiZSBodHRwLCBodHRwcyBvciBjaHJvbWUtZXh0ZW5zaW9uJyArXHJcbiAgICAgICAgICAgICcgYW5kIHdlYiBzdG9yYWdlIG11c3QgYmUgZW5hYmxlZC4nLFxyXG4gICAgICAgIFtcInBvcHVwLWJsb2NrZWRcIiAvKiBQT1BVUF9CTE9DS0VEICovXTogJ1VuYWJsZSB0byBlc3RhYmxpc2ggYSBjb25uZWN0aW9uIHdpdGggdGhlIHBvcHVwLiBJdCBtYXkgaGF2ZSBiZWVuIGJsb2NrZWQgYnkgdGhlIGJyb3dzZXIuJyxcclxuICAgICAgICBbXCJwb3B1cC1jbG9zZWQtYnktdXNlclwiIC8qIFBPUFVQX0NMT1NFRF9CWV9VU0VSICovXTogJ1RoZSBwb3B1cCBoYXMgYmVlbiBjbG9zZWQgYnkgdGhlIHVzZXIgYmVmb3JlIGZpbmFsaXppbmcgdGhlIG9wZXJhdGlvbi4nLFxyXG4gICAgICAgIFtcInByb3ZpZGVyLWFscmVhZHktbGlua2VkXCIgLyogUFJPVklERVJfQUxSRUFEWV9MSU5LRUQgKi9dOiAnVXNlciBjYW4gb25seSBiZSBsaW5rZWQgdG8gb25lIGlkZW50aXR5IGZvciB0aGUgZ2l2ZW4gcHJvdmlkZXIuJyxcclxuICAgICAgICBbXCJxdW90YS1leGNlZWRlZFwiIC8qIFFVT1RBX0VYQ0VFREVEICovXTogXCJUaGUgcHJvamVjdCdzIHF1b3RhIGZvciB0aGlzIG9wZXJhdGlvbiBoYXMgYmVlbiBleGNlZWRlZC5cIixcclxuICAgICAgICBbXCJyZWRpcmVjdC1jYW5jZWxsZWQtYnktdXNlclwiIC8qIFJFRElSRUNUX0NBTkNFTExFRF9CWV9VU0VSICovXTogJ1RoZSByZWRpcmVjdCBvcGVyYXRpb24gaGFzIGJlZW4gY2FuY2VsbGVkIGJ5IHRoZSB1c2VyIGJlZm9yZSBmaW5hbGl6aW5nLicsXHJcbiAgICAgICAgW1wicmVkaXJlY3Qtb3BlcmF0aW9uLXBlbmRpbmdcIiAvKiBSRURJUkVDVF9PUEVSQVRJT05fUEVORElORyAqL106ICdBIHJlZGlyZWN0IHNpZ24taW4gb3BlcmF0aW9uIGlzIGFscmVhZHkgcGVuZGluZy4nLFxyXG4gICAgICAgIFtcInJlamVjdGVkLWNyZWRlbnRpYWxcIiAvKiBSRUpFQ1RFRF9DUkVERU5USUFMICovXTogJ1RoZSByZXF1ZXN0IGNvbnRhaW5zIG1hbGZvcm1lZCBvciBtaXNtYXRjaGluZyBjcmVkZW50aWFscy4nLFxyXG4gICAgICAgIFtcInNlY29uZC1mYWN0b3ItYWxyZWFkeS1pbi11c2VcIiAvKiBTRUNPTkRfRkFDVE9SX0FMUkVBRFlfRU5ST0xMRUQgKi9dOiAnVGhlIHNlY29uZCBmYWN0b3IgaXMgYWxyZWFkeSBlbnJvbGxlZCBvbiB0aGlzIGFjY291bnQuJyxcclxuICAgICAgICBbXCJtYXhpbXVtLXNlY29uZC1mYWN0b3ItY291bnQtZXhjZWVkZWRcIiAvKiBTRUNPTkRfRkFDVE9SX0xJTUlUX0VYQ0VFREVEICovXTogJ1RoZSBtYXhpbXVtIGFsbG93ZWQgbnVtYmVyIG9mIHNlY29uZCBmYWN0b3JzIG9uIGEgdXNlciBoYXMgYmVlbiBleGNlZWRlZC4nLFxyXG4gICAgICAgIFtcInRlbmFudC1pZC1taXNtYXRjaFwiIC8qIFRFTkFOVF9JRF9NSVNNQVRDSCAqL106IFwiVGhlIHByb3ZpZGVkIHRlbmFudCBJRCBkb2VzIG5vdCBtYXRjaCB0aGUgQXV0aCBpbnN0YW5jZSdzIHRlbmFudCBJRFwiLFxyXG4gICAgICAgIFtcInRpbWVvdXRcIiAvKiBUSU1FT1VUICovXTogJ1RoZSBvcGVyYXRpb24gaGFzIHRpbWVkIG91dC4nLFxyXG4gICAgICAgIFtcInVzZXItdG9rZW4tZXhwaXJlZFwiIC8qIFRPS0VOX0VYUElSRUQgKi9dOiBcIlRoZSB1c2VyJ3MgY3JlZGVudGlhbCBpcyBubyBsb25nZXIgdmFsaWQuIFRoZSB1c2VyIG11c3Qgc2lnbiBpbiBhZ2Fpbi5cIixcclxuICAgICAgICBbXCJ0b28tbWFueS1yZXF1ZXN0c1wiIC8qIFRPT19NQU5ZX0FUVEVNUFRTX1RSWV9MQVRFUiAqL106ICdXZSBoYXZlIGJsb2NrZWQgYWxsIHJlcXVlc3RzIGZyb20gdGhpcyBkZXZpY2UgZHVlIHRvIHVudXN1YWwgYWN0aXZpdHkuICcgK1xyXG4gICAgICAgICAgICAnVHJ5IGFnYWluIGxhdGVyLicsXHJcbiAgICAgICAgW1widW5hdXRob3JpemVkLWNvbnRpbnVlLXVyaVwiIC8qIFVOQVVUSE9SSVpFRF9ET01BSU4gKi9dOiAnVGhlIGRvbWFpbiBvZiB0aGUgY29udGludWUgVVJMIGlzIG5vdCB3aGl0ZWxpc3RlZC4gIFBsZWFzZSB3aGl0ZWxpc3QgJyArXHJcbiAgICAgICAgICAgICd0aGUgZG9tYWluIGluIHRoZSBGaXJlYmFzZSBjb25zb2xlLicsXHJcbiAgICAgICAgW1widW5zdXBwb3J0ZWQtZmlyc3QtZmFjdG9yXCIgLyogVU5TVVBQT1JURURfRklSU1RfRkFDVE9SICovXTogJ0Vucm9sbGluZyBhIHNlY29uZCBmYWN0b3Igb3Igc2lnbmluZyBpbiB3aXRoIGEgbXVsdGktZmFjdG9yIGFjY291bnQgcmVxdWlyZXMgc2lnbi1pbiB3aXRoIGEgc3VwcG9ydGVkIGZpcnN0IGZhY3Rvci4nLFxyXG4gICAgICAgIFtcInVuc3VwcG9ydGVkLXBlcnNpc3RlbmNlLXR5cGVcIiAvKiBVTlNVUFBPUlRFRF9QRVJTSVNURU5DRSAqL106ICdUaGUgY3VycmVudCBlbnZpcm9ubWVudCBkb2VzIG5vdCBzdXBwb3J0IHRoZSBzcGVjaWZpZWQgcGVyc2lzdGVuY2UgdHlwZS4nLFxyXG4gICAgICAgIFtcInVuc3VwcG9ydGVkLXRlbmFudC1vcGVyYXRpb25cIiAvKiBVTlNVUFBPUlRFRF9URU5BTlRfT1BFUkFUSU9OICovXTogJ1RoaXMgb3BlcmF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgaW4gYSBtdWx0aS10ZW5hbnQgY29udGV4dC4nLFxyXG4gICAgICAgIFtcInVudmVyaWZpZWQtZW1haWxcIiAvKiBVTlZFUklGSUVEX0VNQUlMICovXTogJ1RoZSBvcGVyYXRpb24gcmVxdWlyZXMgYSB2ZXJpZmllZCBlbWFpbC4nLFxyXG4gICAgICAgIFtcInVzZXItY2FuY2VsbGVkXCIgLyogVVNFUl9DQU5DRUxMRUQgKi9dOiAnVGhlIHVzZXIgZGlkIG5vdCBncmFudCB5b3VyIGFwcGxpY2F0aW9uIHRoZSBwZXJtaXNzaW9ucyBpdCByZXF1ZXN0ZWQuJyxcclxuICAgICAgICBbXCJ1c2VyLW5vdC1mb3VuZFwiIC8qIFVTRVJfREVMRVRFRCAqL106ICdUaGVyZSBpcyBubyB1c2VyIHJlY29yZCBjb3JyZXNwb25kaW5nIHRvIHRoaXMgaWRlbnRpZmllci4gVGhlIHVzZXIgbWF5ICcgK1xyXG4gICAgICAgICAgICAnaGF2ZSBiZWVuIGRlbGV0ZWQuJyxcclxuICAgICAgICBbXCJ1c2VyLWRpc2FibGVkXCIgLyogVVNFUl9ESVNBQkxFRCAqL106ICdUaGUgdXNlciBhY2NvdW50IGhhcyBiZWVuIGRpc2FibGVkIGJ5IGFuIGFkbWluaXN0cmF0b3IuJyxcclxuICAgICAgICBbXCJ1c2VyLW1pc21hdGNoXCIgLyogVVNFUl9NSVNNQVRDSCAqL106ICdUaGUgc3VwcGxpZWQgY3JlZGVudGlhbHMgZG8gbm90IGNvcnJlc3BvbmQgdG8gdGhlIHByZXZpb3VzbHkgc2lnbmVkIGluIHVzZXIuJyxcclxuICAgICAgICBbXCJ1c2VyLXNpZ25lZC1vdXRcIiAvKiBVU0VSX1NJR05FRF9PVVQgKi9dOiAnJyxcclxuICAgICAgICBbXCJ3ZWFrLXBhc3N3b3JkXCIgLyogV0VBS19QQVNTV09SRCAqL106ICdUaGUgcGFzc3dvcmQgbXVzdCBiZSA2IGNoYXJhY3RlcnMgbG9uZyBvciBtb3JlLicsXHJcbiAgICAgICAgW1wid2ViLXN0b3JhZ2UtdW5zdXBwb3J0ZWRcIiAvKiBXRUJfU1RPUkFHRV9VTlNVUFBPUlRFRCAqL106ICdUaGlzIGJyb3dzZXIgaXMgbm90IHN1cHBvcnRlZCBvciAzcmQgcGFydHkgY29va2llcyBhbmQgZGF0YSBtYXkgYmUgZGlzYWJsZWQuJyxcclxuICAgICAgICBbXCJhbHJlYWR5LWluaXRpYWxpemVkXCIgLyogQUxSRUFEWV9JTklUSUFMSVpFRCAqL106ICdpbml0aWFsaXplQXV0aCgpIGhhcyBhbHJlYWR5IGJlZW4gY2FsbGVkIHdpdGggJyArXHJcbiAgICAgICAgICAgICdkaWZmZXJlbnQgb3B0aW9ucy4gVG8gYXZvaWQgdGhpcyBlcnJvciwgY2FsbCBpbml0aWFsaXplQXV0aCgpIHdpdGggdGhlICcgK1xyXG4gICAgICAgICAgICAnc2FtZSBvcHRpb25zIGFzIHdoZW4gaXQgd2FzIG9yaWdpbmFsbHkgY2FsbGVkLCBvciBjYWxsIGdldEF1dGgoKSB0byByZXR1cm4gdGhlJyArXHJcbiAgICAgICAgICAgICcgYWxyZWFkeSBpbml0aWFsaXplZCBpbnN0YW5jZS4nXHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIF9wcm9kRXJyb3JNYXAoKSB7XHJcbiAgICAvLyBXZSB3aWxsIGluY2x1ZGUgdGhpcyBvbmUgbWVzc2FnZSBpbiB0aGUgcHJvZCBlcnJvciBtYXAgc2luY2UgYnkgdGhlIHZlcnlcclxuICAgIC8vIG5hdHVyZSBvZiB0aGlzIGVycm9yLCBkZXZlbG9wZXJzIHdpbGwgbmV2ZXIgYmUgYWJsZSB0byBzZWUgdGhlIG1lc3NhZ2VcclxuICAgIC8vIHVzaW5nIHRoZSBkZWJ1Z0Vycm9yTWFwICh3aGljaCBpcyBpbnN0YWxsZWQgZHVyaW5nIGF1dGggaW5pdGlhbGl6YXRpb24pLlxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBbXCJkZXBlbmRlbnQtc2RrLWluaXRpYWxpemVkLWJlZm9yZS1hdXRoXCIgLyogREVQRU5ERU5UX1NES19JTklUX0JFRk9SRV9BVVRIICovXTogJ0Fub3RoZXIgRmlyZWJhc2UgU0RLIHdhcyBpbml0aWFsaXplZCBhbmQgaXMgdHJ5aW5nIHRvIHVzZSBBdXRoIGJlZm9yZSBBdXRoIGlzICcgK1xyXG4gICAgICAgICAgICAnaW5pdGlhbGl6ZWQuIFBsZWFzZSBiZSBzdXJlIHRvIGNhbGwgYGluaXRpYWxpemVBdXRoYCBvciBgZ2V0QXV0aGAgYmVmb3JlICcgK1xyXG4gICAgICAgICAgICAnc3RhcnRpbmcgYW55IG90aGVyIEZpcmViYXNlIFNESy4nXHJcbiAgICB9O1xyXG59XHJcbi8qKlxyXG4gKiBBIHZlcmJvc2UgZXJyb3IgbWFwIHdpdGggZGV0YWlsZWQgZGVzY3JpcHRpb25zIGZvciBtb3N0IGVycm9yIGNvZGVzLlxyXG4gKlxyXG4gKiBTZWUgZGlzY3Vzc2lvbiBhdCB7QGxpbmsgQXV0aEVycm9yTWFwfVxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBkZWJ1Z0Vycm9yTWFwID0gX2RlYnVnRXJyb3JNYXA7XHJcbi8qKlxyXG4gKiBBIG1pbmltYWwgZXJyb3IgbWFwIHdpdGggYWxsIHZlcmJvc2UgZXJyb3IgbWVzc2FnZXMgc3RyaXBwZWQuXHJcbiAqXHJcbiAqIFNlZSBkaXNjdXNzaW9uIGF0IHtAbGluayBBdXRoRXJyb3JNYXB9XHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IHByb2RFcnJvck1hcCA9IF9wcm9kRXJyb3JNYXA7XHJcbmNvbnN0IF9ERUZBVUxUX0FVVEhfRVJST1JfRkFDVE9SWSA9IG5ldyBFcnJvckZhY3RvcnkoJ2F1dGgnLCAnRmlyZWJhc2UnLCBfcHJvZEVycm9yTWFwKCkpO1xyXG4vKipcclxuICogQSBtYXAgb2YgcG90ZW50aWFsIGBBdXRoYCBlcnJvciBjb2RlcywgZm9yIGVhc2llciBjb21wYXJpc29uIHdpdGggZXJyb3JzXHJcbiAqIHRocm93biBieSB0aGUgU0RLLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBOb3RlIHRoYXQgeW91IGNhbid0IHRyZWUtc2hha2UgaW5kaXZpZHVhbCBrZXlzXHJcbiAqIGluIHRoZSBtYXAsIHNvIGJ5IHVzaW5nIHRoZSBtYXAgeW91IG1pZ2h0IHN1YnN0YW50aWFsbHkgaW5jcmVhc2UgeW91clxyXG4gKiBidW5kbGUgc2l6ZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgQVVUSF9FUlJPUl9DT0RFU19NQVBfRE9fTk9UX1VTRV9JTlRFUk5BTExZID0ge1xyXG4gICAgQURNSU5fT05MWV9PUEVSQVRJT046ICdhdXRoL2FkbWluLXJlc3RyaWN0ZWQtb3BlcmF0aW9uJyxcclxuICAgIEFSR1VNRU5UX0VSUk9SOiAnYXV0aC9hcmd1bWVudC1lcnJvcicsXHJcbiAgICBBUFBfTk9UX0FVVEhPUklaRUQ6ICdhdXRoL2FwcC1ub3QtYXV0aG9yaXplZCcsXHJcbiAgICBBUFBfTk9UX0lOU1RBTExFRDogJ2F1dGgvYXBwLW5vdC1pbnN0YWxsZWQnLFxyXG4gICAgQ0FQVENIQV9DSEVDS19GQUlMRUQ6ICdhdXRoL2NhcHRjaGEtY2hlY2stZmFpbGVkJyxcclxuICAgIENPREVfRVhQSVJFRDogJ2F1dGgvY29kZS1leHBpcmVkJyxcclxuICAgIENPUkRPVkFfTk9UX1JFQURZOiAnYXV0aC9jb3Jkb3ZhLW5vdC1yZWFkeScsXHJcbiAgICBDT1JTX1VOU1VQUE9SVEVEOiAnYXV0aC9jb3JzLXVuc3VwcG9ydGVkJyxcclxuICAgIENSRURFTlRJQUxfQUxSRUFEWV9JTl9VU0U6ICdhdXRoL2NyZWRlbnRpYWwtYWxyZWFkeS1pbi11c2UnLFxyXG4gICAgQ1JFREVOVElBTF9NSVNNQVRDSDogJ2F1dGgvY3VzdG9tLXRva2VuLW1pc21hdGNoJyxcclxuICAgIENSRURFTlRJQUxfVE9PX09MRF9MT0dJTl9BR0FJTjogJ2F1dGgvcmVxdWlyZXMtcmVjZW50LWxvZ2luJyxcclxuICAgIERFUEVOREVOVF9TREtfSU5JVF9CRUZPUkVfQVVUSDogJ2F1dGgvZGVwZW5kZW50LXNkay1pbml0aWFsaXplZC1iZWZvcmUtYXV0aCcsXHJcbiAgICBEWU5BTUlDX0xJTktfTk9UX0FDVElWQVRFRDogJ2F1dGgvZHluYW1pYy1saW5rLW5vdC1hY3RpdmF0ZWQnLFxyXG4gICAgRU1BSUxfQ0hBTkdFX05FRURTX1ZFUklGSUNBVElPTjogJ2F1dGgvZW1haWwtY2hhbmdlLW5lZWRzLXZlcmlmaWNhdGlvbicsXHJcbiAgICBFTUFJTF9FWElTVFM6ICdhdXRoL2VtYWlsLWFscmVhZHktaW4tdXNlJyxcclxuICAgIEVNVUxBVE9SX0NPTkZJR19GQUlMRUQ6ICdhdXRoL2VtdWxhdG9yLWNvbmZpZy1mYWlsZWQnLFxyXG4gICAgRVhQSVJFRF9PT0JfQ09ERTogJ2F1dGgvZXhwaXJlZC1hY3Rpb24tY29kZScsXHJcbiAgICBFWFBJUkVEX1BPUFVQX1JFUVVFU1Q6ICdhdXRoL2NhbmNlbGxlZC1wb3B1cC1yZXF1ZXN0JyxcclxuICAgIElOVEVSTkFMX0VSUk9SOiAnYXV0aC9pbnRlcm5hbC1lcnJvcicsXHJcbiAgICBJTlZBTElEX0FQSV9LRVk6ICdhdXRoL2ludmFsaWQtYXBpLWtleScsXHJcbiAgICBJTlZBTElEX0FQUF9DUkVERU5USUFMOiAnYXV0aC9pbnZhbGlkLWFwcC1jcmVkZW50aWFsJyxcclxuICAgIElOVkFMSURfQVBQX0lEOiAnYXV0aC9pbnZhbGlkLWFwcC1pZCcsXHJcbiAgICBJTlZBTElEX0FVVEg6ICdhdXRoL2ludmFsaWQtdXNlci10b2tlbicsXHJcbiAgICBJTlZBTElEX0FVVEhfRVZFTlQ6ICdhdXRoL2ludmFsaWQtYXV0aC1ldmVudCcsXHJcbiAgICBJTlZBTElEX0NFUlRfSEFTSDogJ2F1dGgvaW52YWxpZC1jZXJ0LWhhc2gnLFxyXG4gICAgSU5WQUxJRF9DT0RFOiAnYXV0aC9pbnZhbGlkLXZlcmlmaWNhdGlvbi1jb2RlJyxcclxuICAgIElOVkFMSURfQ09OVElOVUVfVVJJOiAnYXV0aC9pbnZhbGlkLWNvbnRpbnVlLXVyaScsXHJcbiAgICBJTlZBTElEX0NPUkRPVkFfQ09ORklHVVJBVElPTjogJ2F1dGgvaW52YWxpZC1jb3Jkb3ZhLWNvbmZpZ3VyYXRpb24nLFxyXG4gICAgSU5WQUxJRF9DVVNUT01fVE9LRU46ICdhdXRoL2ludmFsaWQtY3VzdG9tLXRva2VuJyxcclxuICAgIElOVkFMSURfRFlOQU1JQ19MSU5LX0RPTUFJTjogJ2F1dGgvaW52YWxpZC1keW5hbWljLWxpbmstZG9tYWluJyxcclxuICAgIElOVkFMSURfRU1BSUw6ICdhdXRoL2ludmFsaWQtZW1haWwnLFxyXG4gICAgSU5WQUxJRF9FTVVMQVRPUl9TQ0hFTUU6ICdhdXRoL2ludmFsaWQtZW11bGF0b3Itc2NoZW1lJyxcclxuICAgIElOVkFMSURfSURQX1JFU1BPTlNFOiAnYXV0aC9pbnZhbGlkLWNyZWRlbnRpYWwnLFxyXG4gICAgSU5WQUxJRF9NRVNTQUdFX1BBWUxPQUQ6ICdhdXRoL2ludmFsaWQtbWVzc2FnZS1wYXlsb2FkJyxcclxuICAgIElOVkFMSURfTUZBX1NFU1NJT046ICdhdXRoL2ludmFsaWQtbXVsdGktZmFjdG9yLXNlc3Npb24nLFxyXG4gICAgSU5WQUxJRF9PQVVUSF9DTElFTlRfSUQ6ICdhdXRoL2ludmFsaWQtb2F1dGgtY2xpZW50LWlkJyxcclxuICAgIElOVkFMSURfT0FVVEhfUFJPVklERVI6ICdhdXRoL2ludmFsaWQtb2F1dGgtcHJvdmlkZXInLFxyXG4gICAgSU5WQUxJRF9PT0JfQ09ERTogJ2F1dGgvaW52YWxpZC1hY3Rpb24tY29kZScsXHJcbiAgICBJTlZBTElEX09SSUdJTjogJ2F1dGgvdW5hdXRob3JpemVkLWRvbWFpbicsXHJcbiAgICBJTlZBTElEX1BBU1NXT1JEOiAnYXV0aC93cm9uZy1wYXNzd29yZCcsXHJcbiAgICBJTlZBTElEX1BFUlNJU1RFTkNFOiAnYXV0aC9pbnZhbGlkLXBlcnNpc3RlbmNlLXR5cGUnLFxyXG4gICAgSU5WQUxJRF9QSE9ORV9OVU1CRVI6ICdhdXRoL2ludmFsaWQtcGhvbmUtbnVtYmVyJyxcclxuICAgIElOVkFMSURfUFJPVklERVJfSUQ6ICdhdXRoL2ludmFsaWQtcHJvdmlkZXItaWQnLFxyXG4gICAgSU5WQUxJRF9SRUNJUElFTlRfRU1BSUw6ICdhdXRoL2ludmFsaWQtcmVjaXBpZW50LWVtYWlsJyxcclxuICAgIElOVkFMSURfU0VOREVSOiAnYXV0aC9pbnZhbGlkLXNlbmRlcicsXHJcbiAgICBJTlZBTElEX1NFU1NJT05fSU5GTzogJ2F1dGgvaW52YWxpZC12ZXJpZmljYXRpb24taWQnLFxyXG4gICAgSU5WQUxJRF9URU5BTlRfSUQ6ICdhdXRoL2ludmFsaWQtdGVuYW50LWlkJyxcclxuICAgIE1GQV9JTkZPX05PVF9GT1VORDogJ2F1dGgvbXVsdGktZmFjdG9yLWluZm8tbm90LWZvdW5kJyxcclxuICAgIE1GQV9SRVFVSVJFRDogJ2F1dGgvbXVsdGktZmFjdG9yLWF1dGgtcmVxdWlyZWQnLFxyXG4gICAgTUlTU0lOR19BTkRST0lEX1BBQ0tBR0VfTkFNRTogJ2F1dGgvbWlzc2luZy1hbmRyb2lkLXBrZy1uYW1lJyxcclxuICAgIE1JU1NJTkdfQVBQX0NSRURFTlRJQUw6ICdhdXRoL21pc3NpbmctYXBwLWNyZWRlbnRpYWwnLFxyXG4gICAgTUlTU0lOR19BVVRIX0RPTUFJTjogJ2F1dGgvYXV0aC1kb21haW4tY29uZmlnLXJlcXVpcmVkJyxcclxuICAgIE1JU1NJTkdfQ09ERTogJ2F1dGgvbWlzc2luZy12ZXJpZmljYXRpb24tY29kZScsXHJcbiAgICBNSVNTSU5HX0NPTlRJTlVFX1VSSTogJ2F1dGgvbWlzc2luZy1jb250aW51ZS11cmknLFxyXG4gICAgTUlTU0lOR19JRlJBTUVfU1RBUlQ6ICdhdXRoL21pc3NpbmctaWZyYW1lLXN0YXJ0JyxcclxuICAgIE1JU1NJTkdfSU9TX0JVTkRMRV9JRDogJ2F1dGgvbWlzc2luZy1pb3MtYnVuZGxlLWlkJyxcclxuICAgIE1JU1NJTkdfT1JfSU5WQUxJRF9OT05DRTogJ2F1dGgvbWlzc2luZy1vci1pbnZhbGlkLW5vbmNlJyxcclxuICAgIE1JU1NJTkdfTUZBX0lORk86ICdhdXRoL21pc3NpbmctbXVsdGktZmFjdG9yLWluZm8nLFxyXG4gICAgTUlTU0lOR19NRkFfU0VTU0lPTjogJ2F1dGgvbWlzc2luZy1tdWx0aS1mYWN0b3Itc2Vzc2lvbicsXHJcbiAgICBNSVNTSU5HX1BIT05FX05VTUJFUjogJ2F1dGgvbWlzc2luZy1waG9uZS1udW1iZXInLFxyXG4gICAgTUlTU0lOR19TRVNTSU9OX0lORk86ICdhdXRoL21pc3NpbmctdmVyaWZpY2F0aW9uLWlkJyxcclxuICAgIE1PRFVMRV9ERVNUUk9ZRUQ6ICdhdXRoL2FwcC1kZWxldGVkJyxcclxuICAgIE5FRURfQ09ORklSTUFUSU9OOiAnYXV0aC9hY2NvdW50LWV4aXN0cy13aXRoLWRpZmZlcmVudC1jcmVkZW50aWFsJyxcclxuICAgIE5FVFdPUktfUkVRVUVTVF9GQUlMRUQ6ICdhdXRoL25ldHdvcmstcmVxdWVzdC1mYWlsZWQnLFxyXG4gICAgTlVMTF9VU0VSOiAnYXV0aC9udWxsLXVzZXInLFxyXG4gICAgTk9fQVVUSF9FVkVOVDogJ2F1dGgvbm8tYXV0aC1ldmVudCcsXHJcbiAgICBOT19TVUNIX1BST1ZJREVSOiAnYXV0aC9uby1zdWNoLXByb3ZpZGVyJyxcclxuICAgIE9QRVJBVElPTl9OT1RfQUxMT1dFRDogJ2F1dGgvb3BlcmF0aW9uLW5vdC1hbGxvd2VkJyxcclxuICAgIE9QRVJBVElPTl9OT1RfU1VQUE9SVEVEOiAnYXV0aC9vcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50JyxcclxuICAgIFBPUFVQX0JMT0NLRUQ6ICdhdXRoL3BvcHVwLWJsb2NrZWQnLFxyXG4gICAgUE9QVVBfQ0xPU0VEX0JZX1VTRVI6ICdhdXRoL3BvcHVwLWNsb3NlZC1ieS11c2VyJyxcclxuICAgIFBST1ZJREVSX0FMUkVBRFlfTElOS0VEOiAnYXV0aC9wcm92aWRlci1hbHJlYWR5LWxpbmtlZCcsXHJcbiAgICBRVU9UQV9FWENFRURFRDogJ2F1dGgvcXVvdGEtZXhjZWVkZWQnLFxyXG4gICAgUkVESVJFQ1RfQ0FOQ0VMTEVEX0JZX1VTRVI6ICdhdXRoL3JlZGlyZWN0LWNhbmNlbGxlZC1ieS11c2VyJyxcclxuICAgIFJFRElSRUNUX09QRVJBVElPTl9QRU5ESU5HOiAnYXV0aC9yZWRpcmVjdC1vcGVyYXRpb24tcGVuZGluZycsXHJcbiAgICBSRUpFQ1RFRF9DUkVERU5USUFMOiAnYXV0aC9yZWplY3RlZC1jcmVkZW50aWFsJyxcclxuICAgIFNFQ09ORF9GQUNUT1JfQUxSRUFEWV9FTlJPTExFRDogJ2F1dGgvc2Vjb25kLWZhY3Rvci1hbHJlYWR5LWluLXVzZScsXHJcbiAgICBTRUNPTkRfRkFDVE9SX0xJTUlUX0VYQ0VFREVEOiAnYXV0aC9tYXhpbXVtLXNlY29uZC1mYWN0b3ItY291bnQtZXhjZWVkZWQnLFxyXG4gICAgVEVOQU5UX0lEX01JU01BVENIOiAnYXV0aC90ZW5hbnQtaWQtbWlzbWF0Y2gnLFxyXG4gICAgVElNRU9VVDogJ2F1dGgvdGltZW91dCcsXHJcbiAgICBUT0tFTl9FWFBJUkVEOiAnYXV0aC91c2VyLXRva2VuLWV4cGlyZWQnLFxyXG4gICAgVE9PX01BTllfQVRURU1QVFNfVFJZX0xBVEVSOiAnYXV0aC90b28tbWFueS1yZXF1ZXN0cycsXHJcbiAgICBVTkFVVEhPUklaRURfRE9NQUlOOiAnYXV0aC91bmF1dGhvcml6ZWQtY29udGludWUtdXJpJyxcclxuICAgIFVOU1VQUE9SVEVEX0ZJUlNUX0ZBQ1RPUjogJ2F1dGgvdW5zdXBwb3J0ZWQtZmlyc3QtZmFjdG9yJyxcclxuICAgIFVOU1VQUE9SVEVEX1BFUlNJU1RFTkNFOiAnYXV0aC91bnN1cHBvcnRlZC1wZXJzaXN0ZW5jZS10eXBlJyxcclxuICAgIFVOU1VQUE9SVEVEX1RFTkFOVF9PUEVSQVRJT046ICdhdXRoL3Vuc3VwcG9ydGVkLXRlbmFudC1vcGVyYXRpb24nLFxyXG4gICAgVU5WRVJJRklFRF9FTUFJTDogJ2F1dGgvdW52ZXJpZmllZC1lbWFpbCcsXHJcbiAgICBVU0VSX0NBTkNFTExFRDogJ2F1dGgvdXNlci1jYW5jZWxsZWQnLFxyXG4gICAgVVNFUl9ERUxFVEVEOiAnYXV0aC91c2VyLW5vdC1mb3VuZCcsXHJcbiAgICBVU0VSX0RJU0FCTEVEOiAnYXV0aC91c2VyLWRpc2FibGVkJyxcclxuICAgIFVTRVJfTUlTTUFUQ0g6ICdhdXRoL3VzZXItbWlzbWF0Y2gnLFxyXG4gICAgVVNFUl9TSUdORURfT1VUOiAnYXV0aC91c2VyLXNpZ25lZC1vdXQnLFxyXG4gICAgV0VBS19QQVNTV09SRDogJ2F1dGgvd2Vhay1wYXNzd29yZCcsXHJcbiAgICBXRUJfU1RPUkFHRV9VTlNVUFBPUlRFRDogJ2F1dGgvd2ViLXN0b3JhZ2UtdW5zdXBwb3J0ZWQnLFxyXG4gICAgQUxSRUFEWV9JTklUSUFMSVpFRDogJ2F1dGgvYWxyZWFkeS1pbml0aWFsaXplZCdcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgbG9nQ2xpZW50ID0gbmV3IExvZ2dlcignQGZpcmViYXNlL2F1dGgnKTtcclxuZnVuY3Rpb24gX2xvZ0Vycm9yKG1zZywgLi4uYXJncykge1xyXG4gICAgaWYgKGxvZ0NsaWVudC5sb2dMZXZlbCA8PSBMb2dMZXZlbC5FUlJPUikge1xyXG4gICAgICAgIGxvZ0NsaWVudC5lcnJvcihgQXV0aCAoJHtTREtfVkVSU0lPTn0pOiAke21zZ31gLCAuLi5hcmdzKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfZmFpbChhdXRoT3JDb2RlLCAuLi5yZXN0KSB7XHJcbiAgICB0aHJvdyBjcmVhdGVFcnJvckludGVybmFsKGF1dGhPckNvZGUsIC4uLnJlc3QpO1xyXG59XHJcbmZ1bmN0aW9uIF9jcmVhdGVFcnJvcihhdXRoT3JDb2RlLCAuLi5yZXN0KSB7XHJcbiAgICByZXR1cm4gY3JlYXRlRXJyb3JJbnRlcm5hbChhdXRoT3JDb2RlLCAuLi5yZXN0KTtcclxufVxyXG5mdW5jdGlvbiBfZXJyb3JXaXRoQ3VzdG9tTWVzc2FnZShhdXRoLCBjb2RlLCBtZXNzYWdlKSB7XHJcbiAgICBjb25zdCBlcnJvck1hcCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcHJvZEVycm9yTWFwKCkpLCB7IFtjb2RlXTogbWVzc2FnZSB9KTtcclxuICAgIGNvbnN0IGZhY3RvcnkgPSBuZXcgRXJyb3JGYWN0b3J5KCdhdXRoJywgJ0ZpcmViYXNlJywgZXJyb3JNYXApO1xyXG4gICAgcmV0dXJuIGZhY3RvcnkuY3JlYXRlKGNvZGUsIHtcclxuICAgICAgICBhcHBOYW1lOiBhdXRoLm5hbWUsXHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBfYXNzZXJ0SW5zdGFuY2VPZihhdXRoLCBvYmplY3QsIGluc3RhbmNlKSB7XHJcbiAgICBjb25zdCBjb25zdHJ1Y3Rvckluc3RhbmNlID0gaW5zdGFuY2U7XHJcbiAgICBpZiAoIShvYmplY3QgaW5zdGFuY2VvZiBjb25zdHJ1Y3Rvckluc3RhbmNlKSkge1xyXG4gICAgICAgIGlmIChjb25zdHJ1Y3Rvckluc3RhbmNlLm5hbWUgIT09IG9iamVjdC5jb25zdHJ1Y3Rvci5uYW1lKSB7XHJcbiAgICAgICAgICAgIF9mYWlsKGF1dGgsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IF9lcnJvcldpdGhDdXN0b21NZXNzYWdlKGF1dGgsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLywgYFR5cGUgb2YgJHtvYmplY3QuY29uc3RydWN0b3IubmFtZX0gZG9lcyBub3QgbWF0Y2ggZXhwZWN0ZWQgaW5zdGFuY2UuYCArXHJcbiAgICAgICAgICAgIGBEaWQgeW91IHBhc3MgYSByZWZlcmVuY2UgZnJvbSBhIGRpZmZlcmVudCBBdXRoIFNESz9gKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBjcmVhdGVFcnJvckludGVybmFsKGF1dGhPckNvZGUsIC4uLnJlc3QpIHtcclxuICAgIGlmICh0eXBlb2YgYXV0aE9yQ29kZSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICBjb25zdCBjb2RlID0gcmVzdFswXTtcclxuICAgICAgICBjb25zdCBmdWxsUGFyYW1zID0gWy4uLnJlc3Quc2xpY2UoMSldO1xyXG4gICAgICAgIGlmIChmdWxsUGFyYW1zWzBdKSB7XHJcbiAgICAgICAgICAgIGZ1bGxQYXJhbXNbMF0uYXBwTmFtZSA9IGF1dGhPckNvZGUubmFtZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGF1dGhPckNvZGUuX2Vycm9yRmFjdG9yeS5jcmVhdGUoY29kZSwgLi4uZnVsbFBhcmFtcyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX0RFRkFVTFRfQVVUSF9FUlJPUl9GQUNUT1JZLmNyZWF0ZShhdXRoT3JDb2RlLCAuLi5yZXN0KTtcclxufVxyXG5mdW5jdGlvbiBfYXNzZXJ0KGFzc2VydGlvbiwgYXV0aE9yQ29kZSwgLi4ucmVzdCkge1xyXG4gICAgaWYgKCFhc3NlcnRpb24pIHtcclxuICAgICAgICB0aHJvdyBjcmVhdGVFcnJvckludGVybmFsKGF1dGhPckNvZGUsIC4uLnJlc3QpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBVbmNvbmRpdGlvbmFsbHkgZmFpbHMsIHRocm93aW5nIGFuIGludGVybmFsIGVycm9yIHdpdGggdGhlIGdpdmVuIG1lc3NhZ2UuXHJcbiAqXHJcbiAqIEBwYXJhbSBmYWlsdXJlIHR5cGUgb2YgZmFpbHVyZSBlbmNvdW50ZXJlZFxyXG4gKiBAdGhyb3dzIEVycm9yXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWJ1Z0ZhaWwoZmFpbHVyZSkge1xyXG4gICAgLy8gTG9nIHRoZSBmYWlsdXJlIGluIGFkZGl0aW9uIHRvIHRocm93IGFuIGV4Y2VwdGlvbiwganVzdCBpbiBjYXNlIHRoZVxyXG4gICAgLy8gZXhjZXB0aW9uIGlzIHN3YWxsb3dlZC5cclxuICAgIGNvbnN0IG1lc3NhZ2UgPSBgSU5URVJOQUwgQVNTRVJUSU9OIEZBSUxFRDogYCArIGZhaWx1cmU7XHJcbiAgICBfbG9nRXJyb3IobWVzc2FnZSk7XHJcbiAgICAvLyBOT1RFOiBXZSBkb24ndCB1c2UgRmlyZWJhc2VFcnJvciBoZXJlIGJlY2F1c2UgdGhlc2UgYXJlIGludGVybmFsIGZhaWx1cmVzXHJcbiAgICAvLyB0aGF0IGNhbm5vdCBiZSBoYW5kbGVkIGJ5IHRoZSB1c2VyLiAoQWxzbyBpdCB3b3VsZCBjcmVhdGUgYSBjaXJjdWxhclxyXG4gICAgLy8gZGVwZW5kZW5jeSBiZXR3ZWVuIHRoZSBlcnJvciBhbmQgYXNzZXJ0IG1vZHVsZXMgd2hpY2ggZG9lc24ndCB3b3JrLilcclxuICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcclxufVxyXG4vKipcclxuICogRmFpbHMgaWYgdGhlIGdpdmVuIGFzc2VydGlvbiBjb25kaXRpb24gaXMgZmFsc2UsIHRocm93aW5nIGFuIEVycm9yIHdpdGggdGhlXHJcbiAqIGdpdmVuIG1lc3NhZ2UgaWYgaXQgZGlkLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXNzZXJ0aW9uXHJcbiAqIEBwYXJhbSBtZXNzYWdlXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWJ1Z0Fzc2VydChhc3NlcnRpb24sIG1lc3NhZ2UpIHtcclxuICAgIGlmICghYXNzZXJ0aW9uKSB7XHJcbiAgICAgICAgZGVidWdGYWlsKG1lc3NhZ2UpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IGluc3RhbmNlQ2FjaGUgPSBuZXcgTWFwKCk7XHJcbmZ1bmN0aW9uIF9nZXRJbnN0YW5jZShjbHMpIHtcclxuICAgIGRlYnVnQXNzZXJ0KGNscyBpbnN0YW5jZW9mIEZ1bmN0aW9uLCAnRXhwZWN0ZWQgYSBjbGFzcyBkZWZpbml0aW9uJyk7XHJcbiAgICBsZXQgaW5zdGFuY2UgPSBpbnN0YW5jZUNhY2hlLmdldChjbHMpO1xyXG4gICAgaWYgKGluc3RhbmNlKSB7XHJcbiAgICAgICAgZGVidWdBc3NlcnQoaW5zdGFuY2UgaW5zdGFuY2VvZiBjbHMsICdJbnN0YW5jZSBzdG9yZWQgaW4gY2FjaGUgbWlzbWF0Y2hlZCB3aXRoIGNsYXNzJyk7XHJcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xyXG4gICAgfVxyXG4gICAgaW5zdGFuY2UgPSBuZXcgY2xzKCk7XHJcbiAgICBpbnN0YW5jZUNhY2hlLnNldChjbHMsIGluc3RhbmNlKTtcclxuICAgIHJldHVybiBpbnN0YW5jZTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogSW5pdGlhbGl6ZXMgYW4ge0BsaW5rIEF1dGh9IGluc3RhbmNlIHdpdGggZmluZS1ncmFpbmVkIGNvbnRyb2wgb3ZlclxyXG4gKiB7QGxpbmsgRGVwZW5kZW5jaWVzfS5cclxuICpcclxuICogQHJlbWFya3NcclxuICpcclxuICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgbW9yZSBjb250cm9sIG92ZXIgdGhlIHtAbGluayBBdXRofSBpbnN0YW5jZSB0aGFuXHJcbiAqIHtAbGluayBnZXRBdXRofS4gYGdldEF1dGhgIHVzZXMgcGxhdGZvcm0tc3BlY2lmaWMgZGVmYXVsdHMgdG8gc3VwcGx5XHJcbiAqIHRoZSB7QGxpbmsgRGVwZW5kZW5jaWVzfS4gSW4gZ2VuZXJhbCwgYGdldEF1dGhgIGlzIHRoZSBlYXNpZXN0IHdheSB0b1xyXG4gKiBpbml0aWFsaXplIEF1dGggYW5kIHdvcmtzIGZvciBtb3N0IHVzZSBjYXNlcy4gVXNlIGBpbml0aWFsaXplQXV0aGAgaWYgeW91XHJcbiAqIG5lZWQgY29udHJvbCBvdmVyIHdoaWNoIHBlcnNpc3RlbmNlIGxheWVyIGlzIHVzZWQsIG9yIHRvIG1pbmltaXplIGJ1bmRsZVxyXG4gKiBzaXplIGlmIHlvdSdyZSBub3QgdXNpbmcgZWl0aGVyIGBzaWduSW5XaXRoUG9wdXBgIG9yIGBzaWduSW5XaXRoUmVkaXJlY3RgLlxyXG4gKlxyXG4gKiBGb3IgZXhhbXBsZSwgaWYgeW91ciBhcHAgb25seSB1c2VzIGFub255bW91cyBhY2NvdW50cyBhbmQgeW91IG9ubHkgd2FudFxyXG4gKiBhY2NvdW50cyBzYXZlZCBmb3IgdGhlIGN1cnJlbnQgc2Vzc2lvbiwgaW5pdGlhbGl6ZSBgQXV0aGAgd2l0aDpcclxuICpcclxuICogYGBganNcclxuICogY29uc3QgYXV0aCA9IGluaXRpYWxpemVBdXRoKGFwcCwge1xyXG4gKiAgIHBlcnNpc3RlbmNlOiBicm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlLFxyXG4gKiAgIHBvcHVwUmVkaXJlY3RSZXNvbHZlcjogdW5kZWZpbmVkLFxyXG4gKiB9KTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGluaXRpYWxpemVBdXRoKGFwcCwgZGVwcykge1xyXG4gICAgY29uc3QgcHJvdmlkZXIgPSBfZ2V0UHJvdmlkZXIoYXBwLCAnYXV0aCcpO1xyXG4gICAgaWYgKHByb3ZpZGVyLmlzSW5pdGlhbGl6ZWQoKSkge1xyXG4gICAgICAgIGNvbnN0IGF1dGggPSBwcm92aWRlci5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICBjb25zdCBpbml0aWFsT3B0aW9ucyA9IHByb3ZpZGVyLmdldE9wdGlvbnMoKTtcclxuICAgICAgICBpZiAoZGVlcEVxdWFsKGluaXRpYWxPcHRpb25zLCBkZXBzICE9PSBudWxsICYmIGRlcHMgIT09IHZvaWQgMCA/IGRlcHMgOiB7fSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF1dGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBfZmFpbChhdXRoLCBcImFscmVhZHktaW5pdGlhbGl6ZWRcIiAvKiBBTFJFQURZX0lOSVRJQUxJWkVEICovKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBhdXRoID0gcHJvdmlkZXIuaW5pdGlhbGl6ZSh7IG9wdGlvbnM6IGRlcHMgfSk7XHJcbiAgICByZXR1cm4gYXV0aDtcclxufVxyXG5mdW5jdGlvbiBfaW5pdGlhbGl6ZUF1dGhJbnN0YW5jZShhdXRoLCBkZXBzKSB7XHJcbiAgICBjb25zdCBwZXJzaXN0ZW5jZSA9IChkZXBzID09PSBudWxsIHx8IGRlcHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRlcHMucGVyc2lzdGVuY2UpIHx8IFtdO1xyXG4gICAgY29uc3QgaGllcmFyY2h5ID0gKEFycmF5LmlzQXJyYXkocGVyc2lzdGVuY2UpID8gcGVyc2lzdGVuY2UgOiBbcGVyc2lzdGVuY2VdKS5tYXAoX2dldEluc3RhbmNlKTtcclxuICAgIGlmIChkZXBzID09PSBudWxsIHx8IGRlcHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRlcHMuZXJyb3JNYXApIHtcclxuICAgICAgICBhdXRoLl91cGRhdGVFcnJvck1hcChkZXBzLmVycm9yTWFwKTtcclxuICAgIH1cclxuICAgIC8vIFRoaXMgcHJvbWlzZSBpcyBpbnRlbmRlZCB0byBmbG9hdDsgYXV0aCBpbml0aWFsaXphdGlvbiBoYXBwZW5zIGluIHRoZVxyXG4gICAgLy8gYmFja2dyb3VuZCwgbWVhbndoaWxlIHRoZSBhdXRoIG9iamVjdCBtYXkgYmUgdXNlZCBieSB0aGUgYXBwLlxyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgYXV0aC5faW5pdGlhbGl6ZVdpdGhQZXJzaXN0ZW5jZShoaWVyYXJjaHksIGRlcHMgPT09IG51bGwgfHwgZGVwcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGVwcy5wb3B1cFJlZGlyZWN0UmVzb2x2ZXIpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9nZXRDdXJyZW50VXJsKCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgcmV0dXJuICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgKChfYSA9IHNlbGYubG9jYXRpb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5ocmVmKSkgfHwgJyc7XHJcbn1cclxuZnVuY3Rpb24gX2lzSHR0cE9ySHR0cHMoKSB7XHJcbiAgICByZXR1cm4gX2dldEN1cnJlbnRTY2hlbWUoKSA9PT0gJ2h0dHA6JyB8fCBfZ2V0Q3VycmVudFNjaGVtZSgpID09PSAnaHR0cHM6JztcclxufVxyXG5mdW5jdGlvbiBfZ2V0Q3VycmVudFNjaGVtZSgpIHtcclxuICAgIHZhciBfYTtcclxuICAgIHJldHVybiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmICgoX2EgPSBzZWxmLmxvY2F0aW9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucHJvdG9jb2wpKSB8fCBudWxsO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEZXRlcm1pbmUgd2hldGhlciB0aGUgYnJvd3NlciBpcyB3b3JraW5nIG9ubGluZVxyXG4gKi9cclxuZnVuY3Rpb24gX2lzT25saW5lKCkge1xyXG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgbmF2aWdhdG9yICYmXHJcbiAgICAgICAgJ29uTGluZScgaW4gbmF2aWdhdG9yICYmXHJcbiAgICAgICAgdHlwZW9mIG5hdmlnYXRvci5vbkxpbmUgPT09ICdib29sZWFuJyAmJlxyXG4gICAgICAgIC8vIEFwcGx5IG9ubHkgZm9yIHRyYWRpdGlvbmFsIHdlYiBhcHBzIGFuZCBDaHJvbWUgZXh0ZW5zaW9ucy5cclxuICAgICAgICAvLyBUaGlzIGlzIGVzcGVjaWFsbHkgdHJ1ZSBmb3IgQ29yZG92YSBhcHBzIHdoaWNoIGhhdmUgdW5yZWxpYWJsZVxyXG4gICAgICAgIC8vIG5hdmlnYXRvci5vbkxpbmUgYmVoYXZpb3IgdW5sZXNzIGNvcmRvdmEtcGx1Z2luLW5ldHdvcmstaW5mb3JtYXRpb24gaXNcclxuICAgICAgICAvLyBpbnN0YWxsZWQgd2hpY2ggb3ZlcndyaXRlcyB0aGUgbmF0aXZlIG5hdmlnYXRvci5vbkxpbmUgdmFsdWUgYW5kXHJcbiAgICAgICAgLy8gZGVmaW5lcyBuYXZpZ2F0b3IuY29ubmVjdGlvbi5cclxuICAgICAgICAoX2lzSHR0cE9ySHR0cHMoKSB8fCBpc0Jyb3dzZXJFeHRlbnNpb24oKSB8fCAnY29ubmVjdGlvbicgaW4gbmF2aWdhdG9yKSkge1xyXG4gICAgICAgIHJldHVybiBuYXZpZ2F0b3Iub25MaW5lO1xyXG4gICAgfVxyXG4gICAgLy8gSWYgd2UgY2FuJ3QgZGV0ZXJtaW5lIHRoZSBzdGF0ZSwgYXNzdW1lIGl0IGlzIG9ubGluZS5cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbmZ1bmN0aW9uIF9nZXRVc2VyTGFuZ3VhZ2UoKSB7XHJcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGNvbnN0IG5hdmlnYXRvckxhbmd1YWdlID0gbmF2aWdhdG9yO1xyXG4gICAgcmV0dXJuIChcclxuICAgIC8vIE1vc3QgcmVsaWFibGUsIGJ1dCBvbmx5IHN1cHBvcnRlZCBpbiBDaHJvbWUvRmlyZWZveC5cclxuICAgIChuYXZpZ2F0b3JMYW5ndWFnZS5sYW5ndWFnZXMgJiYgbmF2aWdhdG9yTGFuZ3VhZ2UubGFuZ3VhZ2VzWzBdKSB8fFxyXG4gICAgICAgIC8vIFN1cHBvcnRlZCBpbiBtb3N0IGJyb3dzZXJzLCBidXQgcmV0dXJucyB0aGUgbGFuZ3VhZ2Ugb2YgdGhlIGJyb3dzZXJcclxuICAgICAgICAvLyBVSSwgbm90IHRoZSBsYW5ndWFnZSBzZXQgaW4gYnJvd3NlciBzZXR0aW5ncy5cclxuICAgICAgICBuYXZpZ2F0b3JMYW5ndWFnZS5sYW5ndWFnZSB8fFxyXG4gICAgICAgIC8vIENvdWxkbid0IGRldGVybWluZSBsYW5ndWFnZS5cclxuICAgICAgICBudWxsKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQSBzdHJ1Y3R1cmUgdG8gaGVscCBwaWNrIGJldHdlZW4gYSByYW5nZSBvZiBsb25nIGFuZCBzaG9ydCBkZWxheSBkdXJhdGlvbnNcclxuICogZGVwZW5kaW5nIG9uIHRoZSBjdXJyZW50IGVudmlyb25tZW50LiBJbiBnZW5lcmFsLCB0aGUgbG9uZyBkZWxheSBpcyB1c2VkIGZvclxyXG4gKiBtb2JpbGUgZW52aXJvbm1lbnRzIHdoZXJlYXMgc2hvcnQgZGVsYXlzIGFyZSB1c2VkIGZvciBkZXNrdG9wIGVudmlyb25tZW50cy5cclxuICovXHJcbmNsYXNzIERlbGF5IHtcclxuICAgIGNvbnN0cnVjdG9yKHNob3J0RGVsYXksIGxvbmdEZWxheSkge1xyXG4gICAgICAgIHRoaXMuc2hvcnREZWxheSA9IHNob3J0RGVsYXk7XHJcbiAgICAgICAgdGhpcy5sb25nRGVsYXkgPSBsb25nRGVsYXk7XHJcbiAgICAgICAgLy8gSW50ZXJuYWwgZXJyb3Igd2hlbiBpbXByb3Blcmx5IGluaXRpYWxpemVkLlxyXG4gICAgICAgIGRlYnVnQXNzZXJ0KGxvbmdEZWxheSA+IHNob3J0RGVsYXksICdTaG9ydCBkZWxheSBzaG91bGQgYmUgbGVzcyB0aGFuIGxvbmcgZGVsYXkhJyk7XHJcbiAgICAgICAgdGhpcy5pc01vYmlsZSA9IGlzTW9iaWxlQ29yZG92YSgpIHx8IGlzUmVhY3ROYXRpdmUoKTtcclxuICAgIH1cclxuICAgIGdldCgpIHtcclxuICAgICAgICBpZiAoIV9pc09ubGluZSgpKSB7XHJcbiAgICAgICAgICAgIC8vIFBpY2sgdGhlIHNob3J0ZXIgdGltZW91dC5cclxuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWluKDUwMDAgLyogT0ZGTElORSAqLywgdGhpcy5zaG9ydERlbGF5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgcnVubmluZyBpbiBhIG1vYmlsZSBlbnZpcm9ubWVudCwgcmV0dXJuIHRoZSBsb25nIGRlbGF5LCBvdGhlcndpc2VcclxuICAgICAgICAvLyByZXR1cm4gdGhlIHNob3J0IGRlbGF5LlxyXG4gICAgICAgIC8vIFRoaXMgY291bGQgYmUgaW1wcm92ZWQgaW4gdGhlIGZ1dHVyZSB0byBkeW5hbWljYWxseSBjaGFuZ2UgYmFzZWQgb24gb3RoZXJcclxuICAgICAgICAvLyB2YXJpYWJsZXMgaW5zdGVhZCBvZiBqdXN0IHJlYWRpbmcgdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNNb2JpbGUgPyB0aGlzLmxvbmdEZWxheSA6IHRoaXMuc2hvcnREZWxheTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfZW11bGF0b3JVcmwoY29uZmlnLCBwYXRoKSB7XHJcbiAgICBkZWJ1Z0Fzc2VydChjb25maWcuZW11bGF0b3IsICdFbXVsYXRvciBzaG91bGQgYWx3YXlzIGJlIHNldCBoZXJlJyk7XHJcbiAgICBjb25zdCB7IHVybCB9ID0gY29uZmlnLmVtdWxhdG9yO1xyXG4gICAgaWYgKCFwYXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIHVybDtcclxuICAgIH1cclxuICAgIHJldHVybiBgJHt1cmx9JHtwYXRoLnN0YXJ0c1dpdGgoJy8nKSA/IHBhdGguc2xpY2UoMSkgOiBwYXRofWA7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgRmV0Y2hQcm92aWRlciB7XHJcbiAgICBzdGF0aWMgaW5pdGlhbGl6ZShmZXRjaEltcGwsIGhlYWRlcnNJbXBsLCByZXNwb25zZUltcGwpIHtcclxuICAgICAgICB0aGlzLmZldGNoSW1wbCA9IGZldGNoSW1wbDtcclxuICAgICAgICBpZiAoaGVhZGVyc0ltcGwpIHtcclxuICAgICAgICAgICAgdGhpcy5oZWFkZXJzSW1wbCA9IGhlYWRlcnNJbXBsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVzcG9uc2VJbXBsKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzcG9uc2VJbXBsID0gcmVzcG9uc2VJbXBsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHN0YXRpYyBmZXRjaCgpIHtcclxuICAgICAgICBpZiAodGhpcy5mZXRjaEltcGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hJbXBsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmICdmZXRjaCcgaW4gc2VsZikge1xyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5mZXRjaDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVidWdGYWlsKCdDb3VsZCBub3QgZmluZCBmZXRjaCBpbXBsZW1lbnRhdGlvbiwgbWFrZSBzdXJlIHlvdSBjYWxsIEZldGNoUHJvdmlkZXIuaW5pdGlhbGl6ZSgpIHdpdGggYW4gYXBwcm9wcmlhdGUgcG9seWZpbGwnKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBoZWFkZXJzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmhlYWRlcnNJbXBsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhlYWRlcnNJbXBsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmICdIZWFkZXJzJyBpbiBzZWxmKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLkhlYWRlcnM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlYnVnRmFpbCgnQ291bGQgbm90IGZpbmQgSGVhZGVycyBpbXBsZW1lbnRhdGlvbiwgbWFrZSBzdXJlIHlvdSBjYWxsIEZldGNoUHJvdmlkZXIuaW5pdGlhbGl6ZSgpIHdpdGggYW4gYXBwcm9wcmlhdGUgcG9seWZpbGwnKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyByZXNwb25zZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5yZXNwb25zZUltcGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVzcG9uc2VJbXBsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmICdSZXNwb25zZScgaW4gc2VsZikge1xyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5SZXNwb25zZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVidWdGYWlsKCdDb3VsZCBub3QgZmluZCBSZXNwb25zZSBpbXBsZW1lbnRhdGlvbiwgbWFrZSBzdXJlIHlvdSBjYWxsIEZldGNoUHJvdmlkZXIuaW5pdGlhbGl6ZSgpIHdpdGggYW4gYXBwcm9wcmlhdGUgcG9seWZpbGwnKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogTWFwIGZyb20gZXJyb3JzIHJldHVybmVkIGJ5IHRoZSBzZXJ2ZXIgdG8gZXJyb3JzIHRvIGRldmVsb3BlciB2aXNpYmxlIGVycm9yc1xyXG4gKi9cclxuY29uc3QgU0VSVkVSX0VSUk9SX01BUCA9IHtcclxuICAgIC8vIEN1c3RvbSB0b2tlbiBlcnJvcnMuXHJcbiAgICBbXCJDUkVERU5USUFMX01JU01BVENIXCIgLyogQ1JFREVOVElBTF9NSVNNQVRDSCAqL106IFwiY3VzdG9tLXRva2VuLW1pc21hdGNoXCIgLyogQ1JFREVOVElBTF9NSVNNQVRDSCAqLyxcclxuICAgIC8vIFRoaXMgY2FuIG9ubHkgaGFwcGVuIGlmIHRoZSBTREsgc2VuZHMgYSBiYWQgcmVxdWVzdC5cclxuICAgIFtcIk1JU1NJTkdfQ1VTVE9NX1RPS0VOXCIgLyogTUlTU0lOR19DVVNUT01fVE9LRU4gKi9dOiBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8sXHJcbiAgICAvLyBDcmVhdGUgQXV0aCBVUkkgZXJyb3JzLlxyXG4gICAgW1wiSU5WQUxJRF9JREVOVElGSUVSXCIgLyogSU5WQUxJRF9JREVOVElGSUVSICovXTogXCJpbnZhbGlkLWVtYWlsXCIgLyogSU5WQUxJRF9FTUFJTCAqLyxcclxuICAgIC8vIFRoaXMgY2FuIG9ubHkgaGFwcGVuIGlmIHRoZSBTREsgc2VuZHMgYSBiYWQgcmVxdWVzdC5cclxuICAgIFtcIk1JU1NJTkdfQ09OVElOVUVfVVJJXCIgLyogTUlTU0lOR19DT05USU5VRV9VUkkgKi9dOiBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8sXHJcbiAgICAvLyBTaWduIGluIHdpdGggZW1haWwgYW5kIHBhc3N3b3JkIGVycm9ycyAoc29tZSBhcHBseSB0byBzaWduIHVwIHRvbykuXHJcbiAgICBbXCJJTlZBTElEX1BBU1NXT1JEXCIgLyogSU5WQUxJRF9QQVNTV09SRCAqL106IFwid3JvbmctcGFzc3dvcmRcIiAvKiBJTlZBTElEX1BBU1NXT1JEICovLFxyXG4gICAgLy8gVGhpcyBjYW4gb25seSBoYXBwZW4gaWYgdGhlIFNESyBzZW5kcyBhIGJhZCByZXF1ZXN0LlxyXG4gICAgW1wiTUlTU0lOR19QQVNTV09SRFwiIC8qIE1JU1NJTkdfUEFTU1dPUkQgKi9dOiBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8sXHJcbiAgICAvLyBTaWduIHVwIHdpdGggZW1haWwgYW5kIHBhc3N3b3JkIGVycm9ycy5cclxuICAgIFtcIkVNQUlMX0VYSVNUU1wiIC8qIEVNQUlMX0VYSVNUUyAqL106IFwiZW1haWwtYWxyZWFkeS1pbi11c2VcIiAvKiBFTUFJTF9FWElTVFMgKi8sXHJcbiAgICBbXCJQQVNTV09SRF9MT0dJTl9ESVNBQkxFRFwiIC8qIFBBU1NXT1JEX0xPR0lOX0RJU0FCTEVEICovXTogXCJvcGVyYXRpb24tbm90LWFsbG93ZWRcIiAvKiBPUEVSQVRJT05fTk9UX0FMTE9XRUQgKi8sXHJcbiAgICAvLyBWZXJpZnkgYXNzZXJ0aW9uIGZvciBzaWduIGluIHdpdGggY3JlZGVudGlhbCBlcnJvcnM6XHJcbiAgICBbXCJJTlZBTElEX0lEUF9SRVNQT05TRVwiIC8qIElOVkFMSURfSURQX1JFU1BPTlNFICovXTogXCJpbnZhbGlkLWNyZWRlbnRpYWxcIiAvKiBJTlZBTElEX0lEUF9SRVNQT05TRSAqLyxcclxuICAgIFtcIklOVkFMSURfUEVORElOR19UT0tFTlwiIC8qIElOVkFMSURfUEVORElOR19UT0tFTiAqL106IFwiaW52YWxpZC1jcmVkZW50aWFsXCIgLyogSU5WQUxJRF9JRFBfUkVTUE9OU0UgKi8sXHJcbiAgICBbXCJGRURFUkFURURfVVNFUl9JRF9BTFJFQURZX0xJTktFRFwiIC8qIEZFREVSQVRFRF9VU0VSX0lEX0FMUkVBRFlfTElOS0VEICovXTogXCJjcmVkZW50aWFsLWFscmVhZHktaW4tdXNlXCIgLyogQ1JFREVOVElBTF9BTFJFQURZX0lOX1VTRSAqLyxcclxuICAgIC8vIFRoaXMgY2FuIG9ubHkgaGFwcGVuIGlmIHRoZSBTREsgc2VuZHMgYSBiYWQgcmVxdWVzdC5cclxuICAgIFtcIk1JU1NJTkdfUkVRX1RZUEVcIiAvKiBNSVNTSU5HX1JFUV9UWVBFICovXTogXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovLFxyXG4gICAgLy8gU2VuZCBQYXNzd29yZCByZXNldCBlbWFpbCBlcnJvcnM6XHJcbiAgICBbXCJFTUFJTF9OT1RfRk9VTkRcIiAvKiBFTUFJTF9OT1RfRk9VTkQgKi9dOiBcInVzZXItbm90LWZvdW5kXCIgLyogVVNFUl9ERUxFVEVEICovLFxyXG4gICAgW1wiUkVTRVRfUEFTU1dPUkRfRVhDRUVEX0xJTUlUXCIgLyogUkVTRVRfUEFTU1dPUkRfRVhDRUVEX0xJTUlUICovXTogXCJ0b28tbWFueS1yZXF1ZXN0c1wiIC8qIFRPT19NQU5ZX0FUVEVNUFRTX1RSWV9MQVRFUiAqLyxcclxuICAgIFtcIkVYUElSRURfT09CX0NPREVcIiAvKiBFWFBJUkVEX09PQl9DT0RFICovXTogXCJleHBpcmVkLWFjdGlvbi1jb2RlXCIgLyogRVhQSVJFRF9PT0JfQ09ERSAqLyxcclxuICAgIFtcIklOVkFMSURfT09CX0NPREVcIiAvKiBJTlZBTElEX09PQl9DT0RFICovXTogXCJpbnZhbGlkLWFjdGlvbi1jb2RlXCIgLyogSU5WQUxJRF9PT0JfQ09ERSAqLyxcclxuICAgIC8vIFRoaXMgY2FuIG9ubHkgaGFwcGVuIGlmIHRoZSBTREsgc2VuZHMgYSBiYWQgcmVxdWVzdC5cclxuICAgIFtcIk1JU1NJTkdfT09CX0NPREVcIiAvKiBNSVNTSU5HX09PQl9DT0RFICovXTogXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovLFxyXG4gICAgLy8gT3BlcmF0aW9ucyB0aGF0IHJlcXVpcmUgSUQgdG9rZW4gaW4gcmVxdWVzdDpcclxuICAgIFtcIkNSRURFTlRJQUxfVE9PX09MRF9MT0dJTl9BR0FJTlwiIC8qIENSRURFTlRJQUxfVE9PX09MRF9MT0dJTl9BR0FJTiAqL106IFwicmVxdWlyZXMtcmVjZW50LWxvZ2luXCIgLyogQ1JFREVOVElBTF9UT09fT0xEX0xPR0lOX0FHQUlOICovLFxyXG4gICAgW1wiSU5WQUxJRF9JRF9UT0tFTlwiIC8qIElOVkFMSURfSURfVE9LRU4gKi9dOiBcImludmFsaWQtdXNlci10b2tlblwiIC8qIElOVkFMSURfQVVUSCAqLyxcclxuICAgIFtcIlRPS0VOX0VYUElSRURcIiAvKiBUT0tFTl9FWFBJUkVEICovXTogXCJ1c2VyLXRva2VuLWV4cGlyZWRcIiAvKiBUT0tFTl9FWFBJUkVEICovLFxyXG4gICAgW1wiVVNFUl9OT1RfRk9VTkRcIiAvKiBVU0VSX05PVF9GT1VORCAqL106IFwidXNlci10b2tlbi1leHBpcmVkXCIgLyogVE9LRU5fRVhQSVJFRCAqLyxcclxuICAgIC8vIE90aGVyIGVycm9ycy5cclxuICAgIFtcIlRPT19NQU5ZX0FUVEVNUFRTX1RSWV9MQVRFUlwiIC8qIFRPT19NQU5ZX0FUVEVNUFRTX1RSWV9MQVRFUiAqL106IFwidG9vLW1hbnktcmVxdWVzdHNcIiAvKiBUT09fTUFOWV9BVFRFTVBUU19UUllfTEFURVIgKi8sXHJcbiAgICAvLyBQaG9uZSBBdXRoIHJlbGF0ZWQgZXJyb3JzLlxyXG4gICAgW1wiSU5WQUxJRF9DT0RFXCIgLyogSU5WQUxJRF9DT0RFICovXTogXCJpbnZhbGlkLXZlcmlmaWNhdGlvbi1jb2RlXCIgLyogSU5WQUxJRF9DT0RFICovLFxyXG4gICAgW1wiSU5WQUxJRF9TRVNTSU9OX0lORk9cIiAvKiBJTlZBTElEX1NFU1NJT05fSU5GTyAqL106IFwiaW52YWxpZC12ZXJpZmljYXRpb24taWRcIiAvKiBJTlZBTElEX1NFU1NJT05fSU5GTyAqLyxcclxuICAgIFtcIklOVkFMSURfVEVNUE9SQVJZX1BST09GXCIgLyogSU5WQUxJRF9URU1QT1JBUllfUFJPT0YgKi9dOiBcImludmFsaWQtY3JlZGVudGlhbFwiIC8qIElOVkFMSURfSURQX1JFU1BPTlNFICovLFxyXG4gICAgW1wiTUlTU0lOR19TRVNTSU9OX0lORk9cIiAvKiBNSVNTSU5HX1NFU1NJT05fSU5GTyAqL106IFwibWlzc2luZy12ZXJpZmljYXRpb24taWRcIiAvKiBNSVNTSU5HX1NFU1NJT05fSU5GTyAqLyxcclxuICAgIFtcIlNFU1NJT05fRVhQSVJFRFwiIC8qIFNFU1NJT05fRVhQSVJFRCAqL106IFwiY29kZS1leHBpcmVkXCIgLyogQ09ERV9FWFBJUkVEICovLFxyXG4gICAgLy8gT3RoZXIgYWN0aW9uIGNvZGUgZXJyb3JzIHdoZW4gYWRkaXRpb25hbCBzZXR0aW5ncyBwYXNzZWQuXHJcbiAgICAvLyBNSVNTSU5HX0NPTlRJTlVFX1VSSSBpcyBnZXR0aW5nIG1hcHBlZCB0byBJTlRFUk5BTF9FUlJPUiBhYm92ZS5cclxuICAgIC8vIFRoaXMgaXMgT0sgYXMgdGhpcyBlcnJvciB3aWxsIGJlIGNhdWdodCBieSBjbGllbnQgc2lkZSB2YWxpZGF0aW9uLlxyXG4gICAgW1wiTUlTU0lOR19BTkRST0lEX1BBQ0tBR0VfTkFNRVwiIC8qIE1JU1NJTkdfQU5EUk9JRF9QQUNLQUdFX05BTUUgKi9dOiBcIm1pc3NpbmctYW5kcm9pZC1wa2ctbmFtZVwiIC8qIE1JU1NJTkdfQU5EUk9JRF9QQUNLQUdFX05BTUUgKi8sXHJcbiAgICBbXCJVTkFVVEhPUklaRURfRE9NQUlOXCIgLyogVU5BVVRIT1JJWkVEX0RPTUFJTiAqL106IFwidW5hdXRob3JpemVkLWNvbnRpbnVlLXVyaVwiIC8qIFVOQVVUSE9SSVpFRF9ET01BSU4gKi8sXHJcbiAgICAvLyBnZXRQcm9qZWN0Q29uZmlnIGVycm9ycyB3aGVuIGNsaWVudElkIGlzIHBhc3NlZC5cclxuICAgIFtcIklOVkFMSURfT0FVVEhfQ0xJRU5UX0lEXCIgLyogSU5WQUxJRF9PQVVUSF9DTElFTlRfSUQgKi9dOiBcImludmFsaWQtb2F1dGgtY2xpZW50LWlkXCIgLyogSU5WQUxJRF9PQVVUSF9DTElFTlRfSUQgKi8sXHJcbiAgICAvLyBVc2VyIGFjdGlvbnMgKHNpZ24tdXAgb3IgZGVsZXRpb24pIGRpc2FibGVkIGVycm9ycy5cclxuICAgIFtcIkFETUlOX09OTFlfT1BFUkFUSU9OXCIgLyogQURNSU5fT05MWV9PUEVSQVRJT04gKi9dOiBcImFkbWluLXJlc3RyaWN0ZWQtb3BlcmF0aW9uXCIgLyogQURNSU5fT05MWV9PUEVSQVRJT04gKi8sXHJcbiAgICAvLyBNdWx0aSBmYWN0b3IgcmVsYXRlZCBlcnJvcnMuXHJcbiAgICBbXCJJTlZBTElEX01GQV9QRU5ESU5HX0NSRURFTlRJQUxcIiAvKiBJTlZBTElEX01GQV9QRU5ESU5HX0NSRURFTlRJQUwgKi9dOiBcImludmFsaWQtbXVsdGktZmFjdG9yLXNlc3Npb25cIiAvKiBJTlZBTElEX01GQV9TRVNTSU9OICovLFxyXG4gICAgW1wiTUZBX0VOUk9MTE1FTlRfTk9UX0ZPVU5EXCIgLyogTUZBX0VOUk9MTE1FTlRfTk9UX0ZPVU5EICovXTogXCJtdWx0aS1mYWN0b3ItaW5mby1ub3QtZm91bmRcIiAvKiBNRkFfSU5GT19OT1RfRk9VTkQgKi8sXHJcbiAgICBbXCJNSVNTSU5HX01GQV9FTlJPTExNRU5UX0lEXCIgLyogTUlTU0lOR19NRkFfRU5ST0xMTUVOVF9JRCAqL106IFwibWlzc2luZy1tdWx0aS1mYWN0b3ItaW5mb1wiIC8qIE1JU1NJTkdfTUZBX0lORk8gKi8sXHJcbiAgICBbXCJNSVNTSU5HX01GQV9QRU5ESU5HX0NSRURFTlRJQUxcIiAvKiBNSVNTSU5HX01GQV9QRU5ESU5HX0NSRURFTlRJQUwgKi9dOiBcIm1pc3NpbmctbXVsdGktZmFjdG9yLXNlc3Npb25cIiAvKiBNSVNTSU5HX01GQV9TRVNTSU9OICovLFxyXG4gICAgW1wiU0VDT05EX0ZBQ1RPUl9FWElTVFNcIiAvKiBTRUNPTkRfRkFDVE9SX0VYSVNUUyAqL106IFwic2Vjb25kLWZhY3Rvci1hbHJlYWR5LWluLXVzZVwiIC8qIFNFQ09ORF9GQUNUT1JfQUxSRUFEWV9FTlJPTExFRCAqLyxcclxuICAgIFtcIlNFQ09ORF9GQUNUT1JfTElNSVRfRVhDRUVERURcIiAvKiBTRUNPTkRfRkFDVE9SX0xJTUlUX0VYQ0VFREVEICovXTogXCJtYXhpbXVtLXNlY29uZC1mYWN0b3ItY291bnQtZXhjZWVkZWRcIiAvKiBTRUNPTkRfRkFDVE9SX0xJTUlUX0VYQ0VFREVEICovLFxyXG4gICAgLy8gQmxvY2tpbmcgZnVuY3Rpb25zIHJlbGF0ZWQgZXJyb3JzLlxyXG4gICAgW1wiQkxPQ0tJTkdfRlVOQ1RJT05fRVJST1JfUkVTUE9OU0VcIiAvKiBCTE9DS0lOR19GVU5DVElPTl9FUlJPUl9SRVNQT05TRSAqL106IFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyxcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9BUElfVElNRU9VVF9NUyA9IG5ldyBEZWxheSgzMDAwMCwgNjAwMDApO1xyXG5mdW5jdGlvbiBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgaWYgKGF1dGgudGVuYW50SWQgJiYgIXJlcXVlc3QudGVuYW50SWQpIHtcclxuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXF1ZXN0KSwgeyB0ZW5hbnRJZDogYXV0aC50ZW5hbnRJZCB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXF1ZXN0O1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBtZXRob2QsIHBhdGgsIHJlcXVlc3QsIGN1c3RvbUVycm9yTWFwID0ge30pIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUZldGNoV2l0aEVycm9ySGFuZGxpbmcoYXV0aCwgY3VzdG9tRXJyb3JNYXAsIGFzeW5jICgpID0+IHtcclxuICAgICAgICBsZXQgYm9keSA9IHt9O1xyXG4gICAgICAgIGxldCBwYXJhbXMgPSB7fTtcclxuICAgICAgICBpZiAocmVxdWVzdCkge1xyXG4gICAgICAgICAgICBpZiAobWV0aG9kID09PSBcIkdFVFwiIC8qIEdFVCAqLykge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zID0gcmVxdWVzdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGJvZHkgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdClcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcXVlcnkgPSBxdWVyeXN0cmluZyhPYmplY3QuYXNzaWduKHsga2V5OiBhdXRoLmNvbmZpZy5hcGlLZXkgfSwgcGFyYW1zKSkuc2xpY2UoMSk7XHJcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IGF3YWl0IGF1dGguX2dldEFkZGl0aW9uYWxIZWFkZXJzKCk7XHJcbiAgICAgICAgaGVhZGVyc1tcIkNvbnRlbnQtVHlwZVwiIC8qIENPTlRFTlRfVFlQRSAqL10gPSAnYXBwbGljYXRpb24vanNvbic7XHJcbiAgICAgICAgaWYgKGF1dGgubGFuZ3VhZ2VDb2RlKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnNbXCJYLUZpcmViYXNlLUxvY2FsZVwiIC8qIFhfRklSRUJBU0VfTE9DQUxFICovXSA9IGF1dGgubGFuZ3VhZ2VDb2RlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gRmV0Y2hQcm92aWRlci5mZXRjaCgpKF9nZXRGaW5hbFRhcmdldChhdXRoLCBhdXRoLmNvbmZpZy5hcGlIb3N0LCBwYXRoLCBxdWVyeSksIE9iamVjdC5hc3NpZ24oeyBtZXRob2QsXHJcbiAgICAgICAgICAgIGhlYWRlcnMsIHJlZmVycmVyUG9saWN5OiAnbm8tcmVmZXJyZXInIH0sIGJvZHkpKTtcclxuICAgIH0pO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9wZXJmb3JtRmV0Y2hXaXRoRXJyb3JIYW5kbGluZyhhdXRoLCBjdXN0b21FcnJvck1hcCwgZmV0Y2hGbikge1xyXG4gICAgYXV0aC5fY2FuSW5pdEVtdWxhdG9yID0gZmFsc2U7XHJcbiAgICBjb25zdCBlcnJvck1hcCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgU0VSVkVSX0VSUk9SX01BUCksIGN1c3RvbUVycm9yTWFwKTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgbmV0d29ya1RpbWVvdXQgPSBuZXcgTmV0d29ya1RpbWVvdXQoYXV0aCk7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBQcm9taXNlLnJhY2UoW1xyXG4gICAgICAgICAgICBmZXRjaEZuKCksXHJcbiAgICAgICAgICAgIG5ldHdvcmtUaW1lb3V0LnByb21pc2VcclxuICAgICAgICBdKTtcclxuICAgICAgICAvLyBJZiB3ZSd2ZSByZWFjaGVkIHRoaXMgcG9pbnQsIHRoZSBmZXRjaCBzdWNjZWVkZWQgYW5kIHRoZSBuZXR3b3JrVGltZW91dFxyXG4gICAgICAgIC8vIGRpZG4ndCB0aHJvdzsgY2xlYXIgdGhlIG5ldHdvcmsgdGltZW91dCBkZWxheSBzbyB0aGF0IE5vZGUgd29uJ3QgaGFuZ1xyXG4gICAgICAgIG5ldHdvcmtUaW1lb3V0LmNsZWFyTmV0d29ya1RpbWVvdXQoKTtcclxuICAgICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgIGlmICgnbmVlZENvbmZpcm1hdGlvbicgaW4ganNvbikge1xyXG4gICAgICAgICAgICB0aHJvdyBfbWFrZVRhZ2dlZEVycm9yKGF1dGgsIFwiYWNjb3VudC1leGlzdHMtd2l0aC1kaWZmZXJlbnQtY3JlZGVudGlhbFwiIC8qIE5FRURfQ09ORklSTUFUSU9OICovLCBqc29uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlLm9rICYmICEoJ2Vycm9yTWVzc2FnZScgaW4ganNvbikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGpzb247XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSByZXNwb25zZS5vayA/IGpzb24uZXJyb3JNZXNzYWdlIDoganNvbi5lcnJvci5tZXNzYWdlO1xyXG4gICAgICAgICAgICBjb25zdCBbc2VydmVyRXJyb3JDb2RlLCBzZXJ2ZXJFcnJvck1lc3NhZ2VdID0gZXJyb3JNZXNzYWdlLnNwbGl0KCcgOiAnKTtcclxuICAgICAgICAgICAgaWYgKHNlcnZlckVycm9yQ29kZSA9PT0gXCJGRURFUkFURURfVVNFUl9JRF9BTFJFQURZX0xJTktFRFwiIC8qIEZFREVSQVRFRF9VU0VSX0lEX0FMUkVBRFlfTElOS0VEICovKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBfbWFrZVRhZ2dlZEVycm9yKGF1dGgsIFwiY3JlZGVudGlhbC1hbHJlYWR5LWluLXVzZVwiIC8qIENSRURFTlRJQUxfQUxSRUFEWV9JTl9VU0UgKi8sIGpzb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHNlcnZlckVycm9yQ29kZSA9PT0gXCJFTUFJTF9FWElTVFNcIiAvKiBFTUFJTF9FWElTVFMgKi8pIHtcclxuICAgICAgICAgICAgICAgIHRocm93IF9tYWtlVGFnZ2VkRXJyb3IoYXV0aCwgXCJlbWFpbC1hbHJlYWR5LWluLXVzZVwiIC8qIEVNQUlMX0VYSVNUUyAqLywganNvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgYXV0aEVycm9yID0gZXJyb3JNYXBbc2VydmVyRXJyb3JDb2RlXSB8fFxyXG4gICAgICAgICAgICAgICAgc2VydmVyRXJyb3JDb2RlXHJcbiAgICAgICAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKClcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvW19cXHNdKy9nLCAnLScpO1xyXG4gICAgICAgICAgICBpZiAoc2VydmVyRXJyb3JNZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBfZXJyb3JXaXRoQ3VzdG9tTWVzc2FnZShhdXRoLCBhdXRoRXJyb3IsIHNlcnZlckVycm9yTWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfZmFpbChhdXRoLCBhdXRoRXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IpIHtcclxuICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgX2ZhaWwoYXV0aCwgXCJuZXR3b3JrLXJlcXVlc3QtZmFpbGVkXCIgLyogTkVUV09SS19SRVFVRVNUX0ZBSUxFRCAqLyk7XHJcbiAgICB9XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIG1ldGhvZCwgcGF0aCwgcmVxdWVzdCwgY3VzdG9tRXJyb3JNYXAgPSB7fSkge1xyXG4gICAgY29uc3Qgc2VydmVyUmVzcG9uc2UgPSAoYXdhaXQgX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIG1ldGhvZCwgcGF0aCwgcmVxdWVzdCwgY3VzdG9tRXJyb3JNYXApKTtcclxuICAgIGlmICgnbWZhUGVuZGluZ0NyZWRlbnRpYWwnIGluIHNlcnZlclJlc3BvbnNlKSB7XHJcbiAgICAgICAgX2ZhaWwoYXV0aCwgXCJtdWx0aS1mYWN0b3ItYXV0aC1yZXF1aXJlZFwiIC8qIE1GQV9SRVFVSVJFRCAqLywge1xyXG4gICAgICAgICAgICBfc2VydmVyUmVzcG9uc2U6IHNlcnZlclJlc3BvbnNlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc2VydmVyUmVzcG9uc2U7XHJcbn1cclxuZnVuY3Rpb24gX2dldEZpbmFsVGFyZ2V0KGF1dGgsIGhvc3QsIHBhdGgsIHF1ZXJ5KSB7XHJcbiAgICBjb25zdCBiYXNlID0gYCR7aG9zdH0ke3BhdGh9PyR7cXVlcnl9YDtcclxuICAgIGlmICghYXV0aC5jb25maWcuZW11bGF0b3IpIHtcclxuICAgICAgICByZXR1cm4gYCR7YXV0aC5jb25maWcuYXBpU2NoZW1lfTovLyR7YmFzZX1gO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9lbXVsYXRvclVybChhdXRoLmNvbmZpZywgYmFzZSk7XHJcbn1cclxuY2xhc3MgTmV0d29ya1RpbWVvdXQge1xyXG4gICAgY29uc3RydWN0b3IoYXV0aCkge1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGg7XHJcbiAgICAgICAgLy8gTm9kZSB0aW1lcnMgYW5kIGJyb3dzZXIgdGltZXJzIGFyZSBmdW5kYW1lbnRhbGx5IGluY29tcGF0aWJsZSwgYnV0IHdlXHJcbiAgICAgICAgLy8gZG9uJ3QgY2FyZSBhYm91dCB0aGUgdmFsdWUgaGVyZVxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgdGhpcy50aW1lciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoKF8sIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KF9jcmVhdGVFcnJvcih0aGlzLmF1dGgsIFwidGltZW91dFwiIC8qIFRJTUVPVVQgKi8pKTtcclxuICAgICAgICAgICAgfSwgREVGQVVMVF9BUElfVElNRU9VVF9NUy5nZXQoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjbGVhck5ldHdvcmtUaW1lb3V0KCkge1xyXG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBfbWFrZVRhZ2dlZEVycm9yKGF1dGgsIGNvZGUsIHJlc3BvbnNlKSB7XHJcbiAgICBjb25zdCBlcnJvclBhcmFtcyA9IHtcclxuICAgICAgICBhcHBOYW1lOiBhdXRoLm5hbWVcclxuICAgIH07XHJcbiAgICBpZiAocmVzcG9uc2UuZW1haWwpIHtcclxuICAgICAgICBlcnJvclBhcmFtcy5lbWFpbCA9IHJlc3BvbnNlLmVtYWlsO1xyXG4gICAgfVxyXG4gICAgaWYgKHJlc3BvbnNlLnBob25lTnVtYmVyKSB7XHJcbiAgICAgICAgZXJyb3JQYXJhbXMucGhvbmVOdW1iZXIgPSByZXNwb25zZS5waG9uZU51bWJlcjtcclxuICAgIH1cclxuICAgIGNvbnN0IGVycm9yID0gX2NyZWF0ZUVycm9yKGF1dGgsIGNvZGUsIGVycm9yUGFyYW1zKTtcclxuICAgIC8vIFdlIGtub3cgY3VzdG9tRGF0YSBpcyBkZWZpbmVkIG9uIGVycm9yIGJlY2F1c2UgZXJyb3JQYXJhbXMgaXMgZGVmaW5lZFxyXG4gICAgZXJyb3IuY3VzdG9tRGF0YS5fdG9rZW5SZXNwb25zZSA9IHJlc3BvbnNlO1xyXG4gICAgcmV0dXJuIGVycm9yO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUFjY291bnQoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpkZWxldGVcIiAvKiBERUxFVEVfQUNDT1VOVCAqLywgcmVxdWVzdCk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlTGlua2VkQWNjb3VudHMoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czp1cGRhdGVcIiAvKiBTRVRfQUNDT1VOVF9JTkZPICovLCByZXF1ZXN0KTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBnZXRBY2NvdW50SW5mbyhhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOmxvb2t1cFwiIC8qIEdFVF9BQ0NPVU5UX0lORk8gKi8sIHJlcXVlc3QpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIHV0Y1RpbWVzdGFtcFRvRGF0ZVN0cmluZyh1dGNUaW1lc3RhbXApIHtcclxuICAgIGlmICghdXRjVGltZXN0YW1wKSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8gQ29udmVydCB0byBkYXRlIG9iamVjdC5cclxuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoTnVtYmVyKHV0Y1RpbWVzdGFtcCkpO1xyXG4gICAgICAgIC8vIFRlc3QgZGF0ZSBpcyB2YWxpZC5cclxuICAgICAgICBpZiAoIWlzTmFOKGRhdGUuZ2V0VGltZSgpKSkge1xyXG4gICAgICAgICAgICAvLyBDb252ZXJ0IHRvIFVUQyBkYXRlIHN0cmluZy5cclxuICAgICAgICAgICAgcmV0dXJuIGRhdGUudG9VVENTdHJpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIC8vIERvIG5vdGhpbmcuIHVuZGVmaW5lZCB3aWxsIGJlIHJldHVybmVkLlxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBhIEpTT04gV2ViIFRva2VuIChKV1QpIHVzZWQgdG8gaWRlbnRpZnkgdGhlIHVzZXIgdG8gYSBGaXJlYmFzZSBzZXJ2aWNlLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBSZXR1cm5zIHRoZSBjdXJyZW50IHRva2VuIGlmIGl0IGhhcyBub3QgZXhwaXJlZCBvciBpZiBpdCB3aWxsIG5vdCBleHBpcmUgaW4gdGhlIG5leHQgZml2ZVxyXG4gKiBtaW51dGVzLiBPdGhlcndpc2UsIHRoaXMgd2lsbCByZWZyZXNoIHRoZSB0b2tlbiBhbmQgcmV0dXJuIGEgbmV3IG9uZS5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIGZvcmNlUmVmcmVzaCAtIEZvcmNlIHJlZnJlc2ggcmVnYXJkbGVzcyBvZiB0b2tlbiBleHBpcmF0aW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRJZFRva2VuKHVzZXIsIGZvcmNlUmVmcmVzaCA9IGZhbHNlKSB7XHJcbiAgICByZXR1cm4gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpLmdldElkVG9rZW4oZm9yY2VSZWZyZXNoKTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyBhIGRlc2VyaWFsaXplZCBKU09OIFdlYiBUb2tlbiAoSldUKSB1c2VkIHRvIGlkZW50aXRmeSB0aGUgdXNlciB0byBhIEZpcmViYXNlIHNlcnZpY2UuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFJldHVybnMgdGhlIGN1cnJlbnQgdG9rZW4gaWYgaXQgaGFzIG5vdCBleHBpcmVkIG9yIGlmIGl0IHdpbGwgbm90IGV4cGlyZSBpbiB0aGUgbmV4dCBmaXZlXHJcbiAqIG1pbnV0ZXMuIE90aGVyd2lzZSwgdGhpcyB3aWxsIHJlZnJlc2ggdGhlIHRva2VuIGFuZCByZXR1cm4gYSBuZXcgb25lLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gZm9yY2VSZWZyZXNoIC0gRm9yY2UgcmVmcmVzaCByZWdhcmRsZXNzIG9mIHRva2VuIGV4cGlyYXRpb24uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGdldElkVG9rZW5SZXN1bHQodXNlciwgZm9yY2VSZWZyZXNoID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGNvbnN0IHRva2VuID0gYXdhaXQgdXNlckludGVybmFsLmdldElkVG9rZW4oZm9yY2VSZWZyZXNoKTtcclxuICAgIGNvbnN0IGNsYWltcyA9IF9wYXJzZVRva2VuKHRva2VuKTtcclxuICAgIF9hc3NlcnQoY2xhaW1zICYmIGNsYWltcy5leHAgJiYgY2xhaW1zLmF1dGhfdGltZSAmJiBjbGFpbXMuaWF0LCB1c2VySW50ZXJuYWwuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIGNvbnN0IGZpcmViYXNlID0gdHlwZW9mIGNsYWltcy5maXJlYmFzZSA9PT0gJ29iamVjdCcgPyBjbGFpbXMuZmlyZWJhc2UgOiB1bmRlZmluZWQ7XHJcbiAgICBjb25zdCBzaWduSW5Qcm92aWRlciA9IGZpcmViYXNlID09PSBudWxsIHx8IGZpcmViYXNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmaXJlYmFzZVsnc2lnbl9pbl9wcm92aWRlciddO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBjbGFpbXMsXHJcbiAgICAgICAgdG9rZW4sXHJcbiAgICAgICAgYXV0aFRpbWU6IHV0Y1RpbWVzdGFtcFRvRGF0ZVN0cmluZyhzZWNvbmRzU3RyaW5nVG9NaWxsaXNlY29uZHMoY2xhaW1zLmF1dGhfdGltZSkpLFxyXG4gICAgICAgIGlzc3VlZEF0VGltZTogdXRjVGltZXN0YW1wVG9EYXRlU3RyaW5nKHNlY29uZHNTdHJpbmdUb01pbGxpc2Vjb25kcyhjbGFpbXMuaWF0KSksXHJcbiAgICAgICAgZXhwaXJhdGlvblRpbWU6IHV0Y1RpbWVzdGFtcFRvRGF0ZVN0cmluZyhzZWNvbmRzU3RyaW5nVG9NaWxsaXNlY29uZHMoY2xhaW1zLmV4cCkpLFxyXG4gICAgICAgIHNpZ25JblByb3ZpZGVyOiBzaWduSW5Qcm92aWRlciB8fCBudWxsLFxyXG4gICAgICAgIHNpZ25JblNlY29uZEZhY3RvcjogKGZpcmViYXNlID09PSBudWxsIHx8IGZpcmViYXNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmaXJlYmFzZVsnc2lnbl9pbl9zZWNvbmRfZmFjdG9yJ10pIHx8IG51bGxcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gc2Vjb25kc1N0cmluZ1RvTWlsbGlzZWNvbmRzKHNlY29uZHMpIHtcclxuICAgIHJldHVybiBOdW1iZXIoc2Vjb25kcykgKiAxMDAwO1xyXG59XHJcbmZ1bmN0aW9uIF9wYXJzZVRva2VuKHRva2VuKSB7XHJcbiAgICBjb25zdCBbYWxnb3JpdGhtLCBwYXlsb2FkLCBzaWduYXR1cmVdID0gdG9rZW4uc3BsaXQoJy4nKTtcclxuICAgIGlmIChhbGdvcml0aG0gPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICAgIHBheWxvYWQgPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICAgIHNpZ25hdHVyZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgX2xvZ0Vycm9yKCdKV1QgbWFsZm9ybWVkLCBjb250YWluZWQgZmV3ZXIgdGhhbiAzIHNlY3Rpb25zJyk7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGRlY29kZWQgPSBiYXNlNjREZWNvZGUocGF5bG9hZCk7XHJcbiAgICAgICAgaWYgKCFkZWNvZGVkKSB7XHJcbiAgICAgICAgICAgIF9sb2dFcnJvcignRmFpbGVkIHRvIGRlY29kZSBiYXNlNjQgSldUIHBheWxvYWQnKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGRlY29kZWQpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBfbG9nRXJyb3IoJ0NhdWdodCBlcnJvciBwYXJzaW5nIEpXVCBwYXlsb2FkIGFzIEpTT04nLCBlKTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRXh0cmFjdCBleHBpcmVzSW4gVFRMIGZyb20gYSB0b2tlbiBieSBzdWJ0cmFjdGluZyB0aGUgZXhwaXJhdGlvbiBmcm9tIHRoZSBpc3N1YW5jZS5cclxuICovXHJcbmZ1bmN0aW9uIF90b2tlbkV4cGlyZXNJbih0b2tlbikge1xyXG4gICAgY29uc3QgcGFyc2VkVG9rZW4gPSBfcGFyc2VUb2tlbih0b2tlbik7XHJcbiAgICBfYXNzZXJ0KHBhcnNlZFRva2VuLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgX2Fzc2VydCh0eXBlb2YgcGFyc2VkVG9rZW4uZXhwICE9PSAndW5kZWZpbmVkJywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIF9hc3NlcnQodHlwZW9mIHBhcnNlZFRva2VuLmlhdCAhPT0gJ3VuZGVmaW5lZCcsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICByZXR1cm4gTnVtYmVyKHBhcnNlZFRva2VuLmV4cCkgLSBOdW1iZXIocGFyc2VkVG9rZW4uaWF0KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBfbG9nb3V0SWZJbnZhbGlkYXRlZCh1c2VyLCBwcm9taXNlLCBieXBhc3NBdXRoU3RhdGUgPSBmYWxzZSkge1xyXG4gICAgaWYgKGJ5cGFzc0F1dGhTdGF0ZSkge1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgcHJvbWlzZTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yICYmIGlzVXNlckludmFsaWRhdGVkKGUpKSB7XHJcbiAgICAgICAgICAgIGlmICh1c2VyLmF1dGguY3VycmVudFVzZXIgPT09IHVzZXIpIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHVzZXIuYXV0aC5zaWduT3V0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgZTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBpc1VzZXJJbnZhbGlkYXRlZCh7IGNvZGUgfSkge1xyXG4gICAgcmV0dXJuIChjb2RlID09PSBgYXV0aC8ke1widXNlci1kaXNhYmxlZFwiIC8qIFVTRVJfRElTQUJMRUQgKi99YCB8fFxyXG4gICAgICAgIGNvZGUgPT09IGBhdXRoLyR7XCJ1c2VyLXRva2VuLWV4cGlyZWRcIiAvKiBUT0tFTl9FWFBJUkVEICovfWApO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIFByb2FjdGl2ZVJlZnJlc2gge1xyXG4gICAgY29uc3RydWN0b3IodXNlcikge1xyXG4gICAgICAgIHRoaXMudXNlciA9IHVzZXI7XHJcbiAgICAgICAgdGhpcy5pc1J1bm5pbmcgPSBmYWxzZTtcclxuICAgICAgICAvLyBOb2RlIHRpbWVycyBhbmQgYnJvd3NlciB0aW1lcnMgcmV0dXJuIGZ1bmRhbWVudGFsbHkgZGlmZmVyZW50IHR5cGVzLlxyXG4gICAgICAgIC8vIFdlIGRvbid0IGFjdHVhbGx5IGNhcmUgd2hhdCB0aGUgdmFsdWUgaXMgYnV0IFRTIHdvbid0IGFjY2VwdCB1bmtub3duIGFuZFxyXG4gICAgICAgIC8vIHdlIGNhbid0IGNhc3QgcHJvcGVybHkgaW4gYm90aCBlbnZpcm9ubWVudHMuXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICB0aGlzLnRpbWVySWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZXJyb3JCYWNrb2ZmID0gMzAwMDAgLyogUkVUUllfQkFDS09GRl9NSU4gKi87XHJcbiAgICB9XHJcbiAgICBfc3RhcnQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNSdW5uaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pc1J1bm5pbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuc2NoZWR1bGUoKTtcclxuICAgIH1cclxuICAgIF9zdG9wKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5pc1J1bm5pbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLnRpbWVySWQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXJJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0SW50ZXJ2YWwod2FzRXJyb3IpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgaWYgKHdhc0Vycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGludGVydmFsID0gdGhpcy5lcnJvckJhY2tvZmY7XHJcbiAgICAgICAgICAgIHRoaXMuZXJyb3JCYWNrb2ZmID0gTWF0aC5taW4odGhpcy5lcnJvckJhY2tvZmYgKiAyLCA5NjAwMDAgLyogUkVUUllfQkFDS09GRl9NQVggKi8pO1xyXG4gICAgICAgICAgICByZXR1cm4gaW50ZXJ2YWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBSZXNldCB0aGUgZXJyb3IgYmFja29mZlxyXG4gICAgICAgICAgICB0aGlzLmVycm9yQmFja29mZiA9IDMwMDAwIC8qIFJFVFJZX0JBQ0tPRkZfTUlOICovO1xyXG4gICAgICAgICAgICBjb25zdCBleHBUaW1lID0gKF9hID0gdGhpcy51c2VyLnN0c1Rva2VuTWFuYWdlci5leHBpcmF0aW9uVGltZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMDtcclxuICAgICAgICAgICAgY29uc3QgaW50ZXJ2YWwgPSBleHBUaW1lIC0gRGF0ZS5ub3coKSAtIDMwMDAwMCAvKiBPRkZTRVQgKi87XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLm1heCgwLCBpbnRlcnZhbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2NoZWR1bGUod2FzRXJyb3IgPSBmYWxzZSkge1xyXG4gICAgICAgIGlmICghdGhpcy5pc1J1bm5pbmcpIHtcclxuICAgICAgICAgICAgLy8gSnVzdCBpbiBjYXNlLi4uXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgaW50ZXJ2YWwgPSB0aGlzLmdldEludGVydmFsKHdhc0Vycm9yKTtcclxuICAgICAgICB0aGlzLnRpbWVySWQgPSBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5pdGVyYXRpb24oKTtcclxuICAgICAgICB9LCBpbnRlcnZhbCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBpdGVyYXRpb24oKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy51c2VyLmdldElkVG9rZW4odHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIC8vIE9ubHkgcmV0cnkgb24gbmV0d29yayBlcnJvcnNcclxuICAgICAgICAgICAgaWYgKGUuY29kZSA9PT0gYGF1dGgvJHtcIm5ldHdvcmstcmVxdWVzdC1mYWlsZWRcIiAvKiBORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovfWApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NoZWR1bGUoLyogd2FzRXJyb3IgKi8gdHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNjaGVkdWxlKCk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgVXNlck1ldGFkYXRhIHtcclxuICAgIGNvbnN0cnVjdG9yKGNyZWF0ZWRBdCwgbGFzdExvZ2luQXQpIHtcclxuICAgICAgICB0aGlzLmNyZWF0ZWRBdCA9IGNyZWF0ZWRBdDtcclxuICAgICAgICB0aGlzLmxhc3RMb2dpbkF0ID0gbGFzdExvZ2luQXQ7XHJcbiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZVRpbWUoKTtcclxuICAgIH1cclxuICAgIF9pbml0aWFsaXplVGltZSgpIHtcclxuICAgICAgICB0aGlzLmxhc3RTaWduSW5UaW1lID0gdXRjVGltZXN0YW1wVG9EYXRlU3RyaW5nKHRoaXMubGFzdExvZ2luQXQpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRpb25UaW1lID0gdXRjVGltZXN0YW1wVG9EYXRlU3RyaW5nKHRoaXMuY3JlYXRlZEF0KTtcclxuICAgIH1cclxuICAgIF9jb3B5KG1ldGFkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVkQXQgPSBtZXRhZGF0YS5jcmVhdGVkQXQ7XHJcbiAgICAgICAgdGhpcy5sYXN0TG9naW5BdCA9IG1ldGFkYXRhLmxhc3RMb2dpbkF0O1xyXG4gICAgICAgIHRoaXMuX2luaXRpYWxpemVUaW1lKCk7XHJcbiAgICB9XHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgY3JlYXRlZEF0OiB0aGlzLmNyZWF0ZWRBdCxcclxuICAgICAgICAgICAgbGFzdExvZ2luQXQ6IHRoaXMubGFzdExvZ2luQXRcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF9yZWxvYWRXaXRob3V0U2F2aW5nKHVzZXIpIHtcclxuICAgIHZhciBfYTtcclxuICAgIGNvbnN0IGF1dGggPSB1c2VyLmF1dGg7XHJcbiAgICBjb25zdCBpZFRva2VuID0gYXdhaXQgdXNlci5nZXRJZFRva2VuKCk7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHVzZXIsIGdldEFjY291bnRJbmZvKGF1dGgsIHsgaWRUb2tlbiB9KSk7XHJcbiAgICBfYXNzZXJ0KHJlc3BvbnNlID09PSBudWxsIHx8IHJlc3BvbnNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXNwb25zZS51c2Vycy5sZW5ndGgsIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICBjb25zdCBjb3JlQWNjb3VudCA9IHJlc3BvbnNlLnVzZXJzWzBdO1xyXG4gICAgdXNlci5fbm90aWZ5UmVsb2FkTGlzdGVuZXIoY29yZUFjY291bnQpO1xyXG4gICAgY29uc3QgbmV3UHJvdmlkZXJEYXRhID0gKChfYSA9IGNvcmVBY2NvdW50LnByb3ZpZGVyVXNlckluZm8pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5sZW5ndGgpXHJcbiAgICAgICAgPyBleHRyYWN0UHJvdmlkZXJEYXRhKGNvcmVBY2NvdW50LnByb3ZpZGVyVXNlckluZm8pXHJcbiAgICAgICAgOiBbXTtcclxuICAgIGNvbnN0IHByb3ZpZGVyRGF0YSA9IG1lcmdlUHJvdmlkZXJEYXRhKHVzZXIucHJvdmlkZXJEYXRhLCBuZXdQcm92aWRlckRhdGEpO1xyXG4gICAgLy8gUHJlc2VydmVzIHRoZSBub24tbm9ueW1vdXMgc3RhdHVzIG9mIHRoZSBzdG9yZWQgdXNlciwgZXZlbiBpZiBubyBtb3JlXHJcbiAgICAvLyBjcmVkZW50aWFscyAoZmVkZXJhdGVkIG9yIGVtYWlsL3Bhc3N3b3JkKSBhcmUgbGlua2VkIHRvIHRoZSB1c2VyLiBJZlxyXG4gICAgLy8gdGhlIHVzZXIgd2FzIHByZXZpb3VzbHkgYW5vbnltb3VzLCB0aGVuIHVzZSBwcm92aWRlciBkYXRhIHRvIHVwZGF0ZS5cclxuICAgIC8vIE9uIHRoZSBvdGhlciBoYW5kLCBpZiBpdCB3YXMgbm90IGFub255bW91cyBiZWZvcmUsIGl0IHNob3VsZCBuZXZlciBiZVxyXG4gICAgLy8gY29uc2lkZXJlZCBhbm9ueW1vdXMgbm93LlxyXG4gICAgY29uc3Qgb2xkSXNBbm9ueW1vdXMgPSB1c2VyLmlzQW5vbnltb3VzO1xyXG4gICAgY29uc3QgbmV3SXNBbm9ueW1vdXMgPSAhKHVzZXIuZW1haWwgJiYgY29yZUFjY291bnQucGFzc3dvcmRIYXNoKSAmJiAhKHByb3ZpZGVyRGF0YSA9PT0gbnVsbCB8fCBwcm92aWRlckRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHByb3ZpZGVyRGF0YS5sZW5ndGgpO1xyXG4gICAgY29uc3QgaXNBbm9ueW1vdXMgPSAhb2xkSXNBbm9ueW1vdXMgPyBmYWxzZSA6IG5ld0lzQW5vbnltb3VzO1xyXG4gICAgY29uc3QgdXBkYXRlcyA9IHtcclxuICAgICAgICB1aWQ6IGNvcmVBY2NvdW50LmxvY2FsSWQsXHJcbiAgICAgICAgZGlzcGxheU5hbWU6IGNvcmVBY2NvdW50LmRpc3BsYXlOYW1lIHx8IG51bGwsXHJcbiAgICAgICAgcGhvdG9VUkw6IGNvcmVBY2NvdW50LnBob3RvVXJsIHx8IG51bGwsXHJcbiAgICAgICAgZW1haWw6IGNvcmVBY2NvdW50LmVtYWlsIHx8IG51bGwsXHJcbiAgICAgICAgZW1haWxWZXJpZmllZDogY29yZUFjY291bnQuZW1haWxWZXJpZmllZCB8fCBmYWxzZSxcclxuICAgICAgICBwaG9uZU51bWJlcjogY29yZUFjY291bnQucGhvbmVOdW1iZXIgfHwgbnVsbCxcclxuICAgICAgICB0ZW5hbnRJZDogY29yZUFjY291bnQudGVuYW50SWQgfHwgbnVsbCxcclxuICAgICAgICBwcm92aWRlckRhdGEsXHJcbiAgICAgICAgbWV0YWRhdGE6IG5ldyBVc2VyTWV0YWRhdGEoY29yZUFjY291bnQuY3JlYXRlZEF0LCBjb3JlQWNjb3VudC5sYXN0TG9naW5BdCksXHJcbiAgICAgICAgaXNBbm9ueW1vdXNcclxuICAgIH07XHJcbiAgICBPYmplY3QuYXNzaWduKHVzZXIsIHVwZGF0ZXMpO1xyXG59XHJcbi8qKlxyXG4gKiBSZWxvYWRzIHVzZXIgYWNjb3VudCBkYXRhLCBpZiBzaWduZWQgaW4uXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlbG9hZCh1c2VyKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBhd2FpdCBfcmVsb2FkV2l0aG91dFNhdmluZyh1c2VySW50ZXJuYWwpO1xyXG4gICAgLy8gRXZlbiB0aG91Z2ggdGhlIGN1cnJlbnQgdXNlciBoYXNuJ3QgY2hhbmdlZCwgdXBkYXRlXHJcbiAgICAvLyBjdXJyZW50IHVzZXIgd2lsbCB0cmlnZ2VyIGEgcGVyc2lzdGVuY2UgdXBkYXRlIHcvIHRoZVxyXG4gICAgLy8gbmV3IGluZm8uXHJcbiAgICBhd2FpdCB1c2VySW50ZXJuYWwuYXV0aC5fcGVyc2lzdFVzZXJJZkN1cnJlbnQodXNlckludGVybmFsKTtcclxuICAgIHVzZXJJbnRlcm5hbC5hdXRoLl9ub3RpZnlMaXN0ZW5lcnNJZkN1cnJlbnQodXNlckludGVybmFsKTtcclxufVxyXG5mdW5jdGlvbiBtZXJnZVByb3ZpZGVyRGF0YShvcmlnaW5hbCwgbmV3RGF0YSkge1xyXG4gICAgY29uc3QgZGVkdXBlZCA9IG9yaWdpbmFsLmZpbHRlcihvID0+ICFuZXdEYXRhLnNvbWUobiA9PiBuLnByb3ZpZGVySWQgPT09IG8ucHJvdmlkZXJJZCkpO1xyXG4gICAgcmV0dXJuIFsuLi5kZWR1cGVkLCAuLi5uZXdEYXRhXTtcclxufVxyXG5mdW5jdGlvbiBleHRyYWN0UHJvdmlkZXJEYXRhKHByb3ZpZGVycykge1xyXG4gICAgcmV0dXJuIHByb3ZpZGVycy5tYXAoKF9hKSA9PiB7XHJcbiAgICAgICAgdmFyIHsgcHJvdmlkZXJJZCB9ID0gX2EsIHByb3ZpZGVyID0gX19yZXN0KF9hLCBbXCJwcm92aWRlcklkXCJdKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBwcm92aWRlcklkLFxyXG4gICAgICAgICAgICB1aWQ6IHByb3ZpZGVyLnJhd0lkIHx8ICcnLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZTogcHJvdmlkZXIuZGlzcGxheU5hbWUgfHwgbnVsbCxcclxuICAgICAgICAgICAgZW1haWw6IHByb3ZpZGVyLmVtYWlsIHx8IG51bGwsXHJcbiAgICAgICAgICAgIHBob25lTnVtYmVyOiBwcm92aWRlci5waG9uZU51bWJlciB8fCBudWxsLFxyXG4gICAgICAgICAgICBwaG90b1VSTDogcHJvdmlkZXIucGhvdG9VcmwgfHwgbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiByZXF1ZXN0U3RzVG9rZW4oYXV0aCwgcmVmcmVzaFRva2VuKSB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9wZXJmb3JtRmV0Y2hXaXRoRXJyb3JIYW5kbGluZyhhdXRoLCB7fSwgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGJvZHkgPSBxdWVyeXN0cmluZyh7XHJcbiAgICAgICAgICAgICdncmFudF90eXBlJzogJ3JlZnJlc2hfdG9rZW4nLFxyXG4gICAgICAgICAgICAncmVmcmVzaF90b2tlbic6IHJlZnJlc2hUb2tlblxyXG4gICAgICAgIH0pLnNsaWNlKDEpO1xyXG4gICAgICAgIGNvbnN0IHsgdG9rZW5BcGlIb3N0LCBhcGlLZXkgfSA9IGF1dGguY29uZmlnO1xyXG4gICAgICAgIGNvbnN0IHVybCA9IF9nZXRGaW5hbFRhcmdldChhdXRoLCB0b2tlbkFwaUhvc3QsIFwiL3YxL3Rva2VuXCIgLyogVE9LRU4gKi8sIGBrZXk9JHthcGlLZXl9YCk7XHJcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IGF3YWl0IGF1dGguX2dldEFkZGl0aW9uYWxIZWFkZXJzKCk7XHJcbiAgICAgICAgaGVhZGVyc1tcIkNvbnRlbnQtVHlwZVwiIC8qIENPTlRFTlRfVFlQRSAqL10gPSAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJztcclxuICAgICAgICByZXR1cm4gRmV0Y2hQcm92aWRlci5mZXRjaCgpKHVybCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiIC8qIFBPU1QgKi8sXHJcbiAgICAgICAgICAgIGhlYWRlcnMsXHJcbiAgICAgICAgICAgIGJvZHlcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgLy8gVGhlIHJlc3BvbnNlIGNvbWVzIGJhY2sgaW4gc25ha2VfY2FzZS4gQ29udmVydCB0byBjYW1lbDpcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgYWNjZXNzVG9rZW46IHJlc3BvbnNlLmFjY2Vzc190b2tlbixcclxuICAgICAgICBleHBpcmVzSW46IHJlc3BvbnNlLmV4cGlyZXNfaW4sXHJcbiAgICAgICAgcmVmcmVzaFRva2VuOiByZXNwb25zZS5yZWZyZXNoX3Rva2VuXHJcbiAgICB9O1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBXZSBuZWVkIHRvIG1hcmsgdGhpcyBjbGFzcyBhcyBpbnRlcm5hbCBleHBsaWNpdGx5IHRvIGV4Y2x1ZGUgaXQgaW4gdGhlIHB1YmxpYyB0eXBpbmdzLCBiZWNhdXNlXHJcbiAqIGl0IHJlZmVyZW5jZXMgQXV0aEludGVybmFsIHdoaWNoIGhhcyBhIGNpcmN1bGFyIGRlcGVuZGVuY3kgd2l0aCBVc2VySW50ZXJuYWwuXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY2xhc3MgU3RzVG9rZW5NYW5hZ2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMucmVmcmVzaFRva2VuID0gbnVsbDtcclxuICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gbnVsbDtcclxuICAgICAgICB0aGlzLmV4cGlyYXRpb25UaW1lID0gbnVsbDtcclxuICAgIH1cclxuICAgIGdldCBpc0V4cGlyZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuICghdGhpcy5leHBpcmF0aW9uVGltZSB8fFxyXG4gICAgICAgICAgICBEYXRlLm5vdygpID4gdGhpcy5leHBpcmF0aW9uVGltZSAtIDMwMDAwIC8qIFRPS0VOX1JFRlJFU0ggKi8pO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlRnJvbVNlcnZlclJlc3BvbnNlKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgX2Fzc2VydChyZXNwb25zZS5pZFRva2VuLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIHJlc3BvbnNlLmlkVG9rZW4gIT09ICd1bmRlZmluZWQnLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIHJlc3BvbnNlLnJlZnJlc2hUb2tlbiAhPT0gJ3VuZGVmaW5lZCcsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgY29uc3QgZXhwaXJlc0luID0gJ2V4cGlyZXNJbicgaW4gcmVzcG9uc2UgJiYgdHlwZW9mIHJlc3BvbnNlLmV4cGlyZXNJbiAhPT0gJ3VuZGVmaW5lZCdcclxuICAgICAgICAgICAgPyBOdW1iZXIocmVzcG9uc2UuZXhwaXJlc0luKVxyXG4gICAgICAgICAgICA6IF90b2tlbkV4cGlyZXNJbihyZXNwb25zZS5pZFRva2VuKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVRva2Vuc0FuZEV4cGlyYXRpb24ocmVzcG9uc2UuaWRUb2tlbiwgcmVzcG9uc2UucmVmcmVzaFRva2VuLCBleHBpcmVzSW4pO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2V0VG9rZW4oYXV0aCwgZm9yY2VSZWZyZXNoID0gZmFsc2UpIHtcclxuICAgICAgICBfYXNzZXJ0KCF0aGlzLmFjY2Vzc1Rva2VuIHx8IHRoaXMucmVmcmVzaFRva2VuLCBhdXRoLCBcInVzZXItdG9rZW4tZXhwaXJlZFwiIC8qIFRPS0VOX0VYUElSRUQgKi8pO1xyXG4gICAgICAgIGlmICghZm9yY2VSZWZyZXNoICYmIHRoaXMuYWNjZXNzVG9rZW4gJiYgIXRoaXMuaXNFeHBpcmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFjY2Vzc1Rva2VuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5yZWZyZXNoVG9rZW4pIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoKGF1dGgsIHRoaXMucmVmcmVzaFRva2VuKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWNjZXNzVG9rZW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgY2xlYXJSZWZyZXNoVG9rZW4oKSB7XHJcbiAgICAgICAgdGhpcy5yZWZyZXNoVG9rZW4gPSBudWxsO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgcmVmcmVzaChhdXRoLCBvbGRUb2tlbikge1xyXG4gICAgICAgIGNvbnN0IHsgYWNjZXNzVG9rZW4sIHJlZnJlc2hUb2tlbiwgZXhwaXJlc0luIH0gPSBhd2FpdCByZXF1ZXN0U3RzVG9rZW4oYXV0aCwgb2xkVG9rZW4pO1xyXG4gICAgICAgIHRoaXMudXBkYXRlVG9rZW5zQW5kRXhwaXJhdGlvbihhY2Nlc3NUb2tlbiwgcmVmcmVzaFRva2VuLCBOdW1iZXIoZXhwaXJlc0luKSk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGVUb2tlbnNBbmRFeHBpcmF0aW9uKGFjY2Vzc1Rva2VuLCByZWZyZXNoVG9rZW4sIGV4cGlyZXNJblNlYykge1xyXG4gICAgICAgIHRoaXMucmVmcmVzaFRva2VuID0gcmVmcmVzaFRva2VuIHx8IG51bGw7XHJcbiAgICAgICAgdGhpcy5hY2Nlc3NUb2tlbiA9IGFjY2Vzc1Rva2VuIHx8IG51bGw7XHJcbiAgICAgICAgdGhpcy5leHBpcmF0aW9uVGltZSA9IERhdGUubm93KCkgKyBleHBpcmVzSW5TZWMgKiAxMDAwO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGZyb21KU09OKGFwcE5hbWUsIG9iamVjdCkge1xyXG4gICAgICAgIGNvbnN0IHsgcmVmcmVzaFRva2VuLCBhY2Nlc3NUb2tlbiwgZXhwaXJhdGlvblRpbWUgfSA9IG9iamVjdDtcclxuICAgICAgICBjb25zdCBtYW5hZ2VyID0gbmV3IFN0c1Rva2VuTWFuYWdlcigpO1xyXG4gICAgICAgIGlmIChyZWZyZXNoVG9rZW4pIHtcclxuICAgICAgICAgICAgX2Fzc2VydCh0eXBlb2YgcmVmcmVzaFRva2VuID09PSAnc3RyaW5nJywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovLCB7XHJcbiAgICAgICAgICAgICAgICBhcHBOYW1lXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBtYW5hZ2VyLnJlZnJlc2hUb2tlbiA9IHJlZnJlc2hUb2tlbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgIF9hc3NlcnQodHlwZW9mIGFjY2Vzc1Rva2VuID09PSAnc3RyaW5nJywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovLCB7XHJcbiAgICAgICAgICAgICAgICBhcHBOYW1lXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBtYW5hZ2VyLmFjY2Vzc1Rva2VuID0gYWNjZXNzVG9rZW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChleHBpcmF0aW9uVGltZSkge1xyXG4gICAgICAgICAgICBfYXNzZXJ0KHR5cGVvZiBleHBpcmF0aW9uVGltZSA9PT0gJ251bWJlcicsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLywge1xyXG4gICAgICAgICAgICAgICAgYXBwTmFtZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbWFuYWdlci5leHBpcmF0aW9uVGltZSA9IGV4cGlyYXRpb25UaW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWFuYWdlcjtcclxuICAgIH1cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZWZyZXNoVG9rZW46IHRoaXMucmVmcmVzaFRva2VuLFxyXG4gICAgICAgICAgICBhY2Nlc3NUb2tlbjogdGhpcy5hY2Nlc3NUb2tlbixcclxuICAgICAgICAgICAgZXhwaXJhdGlvblRpbWU6IHRoaXMuZXhwaXJhdGlvblRpbWVcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgX2Fzc2lnbihzdHNUb2tlbk1hbmFnZXIpIHtcclxuICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gc3RzVG9rZW5NYW5hZ2VyLmFjY2Vzc1Rva2VuO1xyXG4gICAgICAgIHRoaXMucmVmcmVzaFRva2VuID0gc3RzVG9rZW5NYW5hZ2VyLnJlZnJlc2hUb2tlbjtcclxuICAgICAgICB0aGlzLmV4cGlyYXRpb25UaW1lID0gc3RzVG9rZW5NYW5hZ2VyLmV4cGlyYXRpb25UaW1lO1xyXG4gICAgfVxyXG4gICAgX2Nsb25lKCkge1xyXG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKG5ldyBTdHNUb2tlbk1hbmFnZXIoKSwgdGhpcy50b0pTT04oKSk7XHJcbiAgICB9XHJcbiAgICBfcGVyZm9ybVJlZnJlc2goKSB7XHJcbiAgICAgICAgcmV0dXJuIGRlYnVnRmFpbCgnbm90IGltcGxlbWVudGVkJyk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQoYXNzZXJ0aW9uLCBhcHBOYW1lKSB7XHJcbiAgICBfYXNzZXJ0KHR5cGVvZiBhc3NlcnRpb24gPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBhc3NlcnRpb24gPT09ICd1bmRlZmluZWQnLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8sIHsgYXBwTmFtZSB9KTtcclxufVxyXG5jbGFzcyBVc2VySW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihfYSkge1xyXG4gICAgICAgIHZhciB7IHVpZCwgYXV0aCwgc3RzVG9rZW5NYW5hZ2VyIH0gPSBfYSwgb3B0ID0gX19yZXN0KF9hLCBbXCJ1aWRcIiwgXCJhdXRoXCIsIFwic3RzVG9rZW5NYW5hZ2VyXCJdKTtcclxuICAgICAgICAvLyBGb3IgdGhlIHVzZXIgb2JqZWN0LCBwcm92aWRlciBpcyBhbHdheXMgRmlyZWJhc2UuXHJcbiAgICAgICAgdGhpcy5wcm92aWRlcklkID0gXCJmaXJlYmFzZVwiIC8qIEZJUkVCQVNFICovO1xyXG4gICAgICAgIHRoaXMuZW1haWxWZXJpZmllZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaXNBbm9ueW1vdXMgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnRlbmFudElkID0gbnVsbDtcclxuICAgICAgICB0aGlzLnByb3ZpZGVyRGF0YSA9IFtdO1xyXG4gICAgICAgIHRoaXMucHJvYWN0aXZlUmVmcmVzaCA9IG5ldyBQcm9hY3RpdmVSZWZyZXNoKHRoaXMpO1xyXG4gICAgICAgIHRoaXMucmVsb2FkVXNlckluZm8gPSBudWxsO1xyXG4gICAgICAgIHRoaXMucmVsb2FkTGlzdGVuZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMudWlkID0gdWlkO1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGg7XHJcbiAgICAgICAgdGhpcy5zdHNUb2tlbk1hbmFnZXIgPSBzdHNUb2tlbk1hbmFnZXI7XHJcbiAgICAgICAgdGhpcy5hY2Nlc3NUb2tlbiA9IHN0c1Rva2VuTWFuYWdlci5hY2Nlc3NUb2tlbjtcclxuICAgICAgICB0aGlzLmRpc3BsYXlOYW1lID0gb3B0LmRpc3BsYXlOYW1lIHx8IG51bGw7XHJcbiAgICAgICAgdGhpcy5lbWFpbCA9IG9wdC5lbWFpbCB8fCBudWxsO1xyXG4gICAgICAgIHRoaXMuZW1haWxWZXJpZmllZCA9IG9wdC5lbWFpbFZlcmlmaWVkIHx8IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucGhvbmVOdW1iZXIgPSBvcHQucGhvbmVOdW1iZXIgfHwgbnVsbDtcclxuICAgICAgICB0aGlzLnBob3RvVVJMID0gb3B0LnBob3RvVVJMIHx8IG51bGw7XHJcbiAgICAgICAgdGhpcy5pc0Fub255bW91cyA9IG9wdC5pc0Fub255bW91cyB8fCBmYWxzZTtcclxuICAgICAgICB0aGlzLnRlbmFudElkID0gb3B0LnRlbmFudElkIHx8IG51bGw7XHJcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IG5ldyBVc2VyTWV0YWRhdGEob3B0LmNyZWF0ZWRBdCB8fCB1bmRlZmluZWQsIG9wdC5sYXN0TG9naW5BdCB8fCB1bmRlZmluZWQpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2V0SWRUb2tlbihmb3JjZVJlZnJlc2gpIHtcclxuICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHRoaXMsIHRoaXMuc3RzVG9rZW5NYW5hZ2VyLmdldFRva2VuKHRoaXMuYXV0aCwgZm9yY2VSZWZyZXNoKSk7XHJcbiAgICAgICAgX2Fzc2VydChhY2Nlc3NUb2tlbiwgdGhpcy5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGlmICh0aGlzLmFjY2Vzc1Rva2VuICE9PSBhY2Nlc3NUb2tlbikge1xyXG4gICAgICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gYWNjZXNzVG9rZW47XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXV0aC5fcGVyc2lzdFVzZXJJZkN1cnJlbnQodGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0aC5fbm90aWZ5TGlzdGVuZXJzSWZDdXJyZW50KHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYWNjZXNzVG9rZW47XHJcbiAgICB9XHJcbiAgICBnZXRJZFRva2VuUmVzdWx0KGZvcmNlUmVmcmVzaCkge1xyXG4gICAgICAgIHJldHVybiBnZXRJZFRva2VuUmVzdWx0KHRoaXMsIGZvcmNlUmVmcmVzaCk7XHJcbiAgICB9XHJcbiAgICByZWxvYWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlbG9hZCh0aGlzKTtcclxuICAgIH1cclxuICAgIF9hc3NpZ24odXNlcikge1xyXG4gICAgICAgIGlmICh0aGlzID09PSB1c2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgX2Fzc2VydCh0aGlzLnVpZCA9PT0gdXNlci51aWQsIHRoaXMuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICB0aGlzLmRpc3BsYXlOYW1lID0gdXNlci5kaXNwbGF5TmFtZTtcclxuICAgICAgICB0aGlzLnBob3RvVVJMID0gdXNlci5waG90b1VSTDtcclxuICAgICAgICB0aGlzLmVtYWlsID0gdXNlci5lbWFpbDtcclxuICAgICAgICB0aGlzLmVtYWlsVmVyaWZpZWQgPSB1c2VyLmVtYWlsVmVyaWZpZWQ7XHJcbiAgICAgICAgdGhpcy5waG9uZU51bWJlciA9IHVzZXIucGhvbmVOdW1iZXI7XHJcbiAgICAgICAgdGhpcy5pc0Fub255bW91cyA9IHVzZXIuaXNBbm9ueW1vdXM7XHJcbiAgICAgICAgdGhpcy50ZW5hbnRJZCA9IHVzZXIudGVuYW50SWQ7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlckRhdGEgPSB1c2VyLnByb3ZpZGVyRGF0YS5tYXAodXNlckluZm8gPT4gKE9iamVjdC5hc3NpZ24oe30sIHVzZXJJbmZvKSkpO1xyXG4gICAgICAgIHRoaXMubWV0YWRhdGEuX2NvcHkodXNlci5tZXRhZGF0YSk7XHJcbiAgICAgICAgdGhpcy5zdHNUb2tlbk1hbmFnZXIuX2Fzc2lnbih1c2VyLnN0c1Rva2VuTWFuYWdlcik7XHJcbiAgICB9XHJcbiAgICBfY2xvbmUoYXV0aCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgVXNlckltcGwoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzKSwgeyBhdXRoLCBzdHNUb2tlbk1hbmFnZXI6IHRoaXMuc3RzVG9rZW5NYW5hZ2VyLl9jbG9uZSgpIH0pKTtcclxuICAgIH1cclxuICAgIF9vblJlbG9hZChjYWxsYmFjaykge1xyXG4gICAgICAgIC8vIFRoZXJlIHNob3VsZCBvbmx5IGV2ZXIgYmUgb25lIGxpc3RlbmVyLCBhbmQgdGhhdCBpcyBhIHNpbmdsZSBpbnN0YW5jZSBvZiBNdWx0aUZhY3RvclVzZXJcclxuICAgICAgICBfYXNzZXJ0KCF0aGlzLnJlbG9hZExpc3RlbmVyLCB0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgdGhpcy5yZWxvYWRMaXN0ZW5lciA9IGNhbGxiYWNrO1xyXG4gICAgICAgIGlmICh0aGlzLnJlbG9hZFVzZXJJbmZvKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX25vdGlmeVJlbG9hZExpc3RlbmVyKHRoaXMucmVsb2FkVXNlckluZm8pO1xyXG4gICAgICAgICAgICB0aGlzLnJlbG9hZFVzZXJJbmZvID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfbm90aWZ5UmVsb2FkTGlzdGVuZXIodXNlckluZm8pIHtcclxuICAgICAgICBpZiAodGhpcy5yZWxvYWRMaXN0ZW5lcikge1xyXG4gICAgICAgICAgICB0aGlzLnJlbG9hZExpc3RlbmVyKHVzZXJJbmZvKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIElmIG5vIGxpc3RlbmVyIGlzIHN1YnNjcmliZWQgeWV0LCBzYXZlIHRoZSByZXN1bHQgc28gaXQncyBhdmFpbGFibGUgd2hlbiB0aGV5IGRvIHN1YnNjcmliZVxyXG4gICAgICAgICAgICB0aGlzLnJlbG9hZFVzZXJJbmZvID0gdXNlckluZm87XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX3N0YXJ0UHJvYWN0aXZlUmVmcmVzaCgpIHtcclxuICAgICAgICB0aGlzLnByb2FjdGl2ZVJlZnJlc2guX3N0YXJ0KCk7XHJcbiAgICB9XHJcbiAgICBfc3RvcFByb2FjdGl2ZVJlZnJlc2goKSB7XHJcbiAgICAgICAgdGhpcy5wcm9hY3RpdmVSZWZyZXNoLl9zdG9wKCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfdXBkYXRlVG9rZW5zSWZOZWNlc3NhcnkocmVzcG9uc2UsIHJlbG9hZCA9IGZhbHNlKSB7XHJcbiAgICAgICAgbGV0IHRva2Vuc1JlZnJlc2hlZCA9IGZhbHNlO1xyXG4gICAgICAgIGlmIChyZXNwb25zZS5pZFRva2VuICYmXHJcbiAgICAgICAgICAgIHJlc3BvbnNlLmlkVG9rZW4gIT09IHRoaXMuc3RzVG9rZW5NYW5hZ2VyLmFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RzVG9rZW5NYW5hZ2VyLnVwZGF0ZUZyb21TZXJ2ZXJSZXNwb25zZShyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIHRva2Vuc1JlZnJlc2hlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZWxvYWQpIHtcclxuICAgICAgICAgICAgYXdhaXQgX3JlbG9hZFdpdGhvdXRTYXZpbmcodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGF3YWl0IHRoaXMuYXV0aC5fcGVyc2lzdFVzZXJJZkN1cnJlbnQodGhpcyk7XHJcbiAgICAgICAgaWYgKHRva2Vuc1JlZnJlc2hlZCkge1xyXG4gICAgICAgICAgICB0aGlzLmF1dGguX25vdGlmeUxpc3RlbmVyc0lmQ3VycmVudCh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBhc3luYyBkZWxldGUoKSB7XHJcbiAgICAgICAgY29uc3QgaWRUb2tlbiA9IGF3YWl0IHRoaXMuZ2V0SWRUb2tlbigpO1xyXG4gICAgICAgIGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHRoaXMsIGRlbGV0ZUFjY291bnQodGhpcy5hdXRoLCB7IGlkVG9rZW4gfSkpO1xyXG4gICAgICAgIHRoaXMuc3RzVG9rZW5NYW5hZ2VyLmNsZWFyUmVmcmVzaFRva2VuKCk7XHJcbiAgICAgICAgLy8gVE9ETzogRGV0ZXJtaW5lIGlmIGNhbmNlbGxhYmxlLXByb21pc2VzIGFyZSBuZWNlc3NhcnkgdG8gdXNlIGluIHRoaXMgY2xhc3Mgc28gdGhhdCBkZWxldGUoKVxyXG4gICAgICAgIC8vICAgICAgIGNhbmNlbHMgcGVuZGluZyBhY3Rpb25zLi4uXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXV0aC5zaWduT3V0KCk7XHJcbiAgICB9XHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IHVpZDogdGhpcy51aWQsIGVtYWlsOiB0aGlzLmVtYWlsIHx8IHVuZGVmaW5lZCwgZW1haWxWZXJpZmllZDogdGhpcy5lbWFpbFZlcmlmaWVkLCBkaXNwbGF5TmFtZTogdGhpcy5kaXNwbGF5TmFtZSB8fCB1bmRlZmluZWQsIGlzQW5vbnltb3VzOiB0aGlzLmlzQW5vbnltb3VzLCBwaG90b1VSTDogdGhpcy5waG90b1VSTCB8fCB1bmRlZmluZWQsIHBob25lTnVtYmVyOiB0aGlzLnBob25lTnVtYmVyIHx8IHVuZGVmaW5lZCwgdGVuYW50SWQ6IHRoaXMudGVuYW50SWQgfHwgdW5kZWZpbmVkLCBwcm92aWRlckRhdGE6IHRoaXMucHJvdmlkZXJEYXRhLm1hcCh1c2VySW5mbyA9PiAoT2JqZWN0LmFzc2lnbih7fSwgdXNlckluZm8pKSksIHN0c1Rva2VuTWFuYWdlcjogdGhpcy5zdHNUb2tlbk1hbmFnZXIudG9KU09OKCksIFxyXG4gICAgICAgICAgICAvLyBSZWRpcmVjdCBldmVudCBJRCBtdXN0IGJlIG1haW50YWluZWQgaW4gY2FzZSB0aGVyZSBpcyBhIHBlbmRpbmdcclxuICAgICAgICAgICAgLy8gcmVkaXJlY3QgZXZlbnQuXHJcbiAgICAgICAgICAgIF9yZWRpcmVjdEV2ZW50SWQ6IHRoaXMuX3JlZGlyZWN0RXZlbnRJZCB9LCB0aGlzLm1ldGFkYXRhLnRvSlNPTigpKSwgeyBcclxuICAgICAgICAgICAgLy8gUmVxdWlyZWQgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCB0aGUgbGVnYWN5IFNESyAoZ28vZmlyZWJhc2UtYXV0aC1zZGstcGVyc2lzdGVuY2UtcGFyc2luZyk6XHJcbiAgICAgICAgICAgIGFwaUtleTogdGhpcy5hdXRoLmNvbmZpZy5hcGlLZXksIGFwcE5hbWU6IHRoaXMuYXV0aC5uYW1lIH0pO1xyXG4gICAgfVxyXG4gICAgZ2V0IHJlZnJlc2hUb2tlbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdHNUb2tlbk1hbmFnZXIucmVmcmVzaFRva2VuIHx8ICcnO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIF9mcm9tSlNPTihhdXRoLCBvYmplY3QpIHtcclxuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oO1xyXG4gICAgICAgIGNvbnN0IGRpc3BsYXlOYW1lID0gKF9hID0gb2JqZWN0LmRpc3BsYXlOYW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3QgZW1haWwgPSAoX2IgPSBvYmplY3QuZW1haWwpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCBwaG9uZU51bWJlciA9IChfYyA9IG9iamVjdC5waG9uZU51bWJlcikgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IHBob3RvVVJMID0gKF9kID0gb2JqZWN0LnBob3RvVVJMKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3QgdGVuYW50SWQgPSAoX2UgPSBvYmplY3QudGVuYW50SWQpICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCBfcmVkaXJlY3RFdmVudElkID0gKF9mID0gb2JqZWN0Ll9yZWRpcmVjdEV2ZW50SWQpICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCBjcmVhdGVkQXQgPSAoX2cgPSBvYmplY3QuY3JlYXRlZEF0KSAhPT0gbnVsbCAmJiBfZyAhPT0gdm9pZCAwID8gX2cgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3QgbGFzdExvZ2luQXQgPSAoX2ggPSBvYmplY3QubGFzdExvZ2luQXQpICE9PSBudWxsICYmIF9oICE9PSB2b2lkIDAgPyBfaCA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCB7IHVpZCwgZW1haWxWZXJpZmllZCwgaXNBbm9ueW1vdXMsIHByb3ZpZGVyRGF0YSwgc3RzVG9rZW5NYW5hZ2VyOiBwbGFpbk9iamVjdFRva2VuTWFuYWdlciB9ID0gb2JqZWN0O1xyXG4gICAgICAgIF9hc3NlcnQodWlkICYmIHBsYWluT2JqZWN0VG9rZW5NYW5hZ2VyLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGNvbnN0IHN0c1Rva2VuTWFuYWdlciA9IFN0c1Rva2VuTWFuYWdlci5mcm9tSlNPTih0aGlzLm5hbWUsIHBsYWluT2JqZWN0VG9rZW5NYW5hZ2VyKTtcclxuICAgICAgICBfYXNzZXJ0KHR5cGVvZiB1aWQgPT09ICdzdHJpbmcnLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKGRpc3BsYXlOYW1lLCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKGVtYWlsLCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIGVtYWlsVmVyaWZpZWQgPT09ICdib29sZWFuJywgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICBfYXNzZXJ0KHR5cGVvZiBpc0Fub255bW91cyA9PT0gJ2Jvb2xlYW4nLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKHBob25lTnVtYmVyLCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKHBob3RvVVJMLCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKHRlbmFudElkLCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKF9yZWRpcmVjdEV2ZW50SWQsIGF1dGgubmFtZSk7XHJcbiAgICAgICAgYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQoY3JlYXRlZEF0LCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKGxhc3RMb2dpbkF0LCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlckltcGwoe1xyXG4gICAgICAgICAgICB1aWQsXHJcbiAgICAgICAgICAgIGF1dGgsXHJcbiAgICAgICAgICAgIGVtYWlsLFxyXG4gICAgICAgICAgICBlbWFpbFZlcmlmaWVkLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSxcclxuICAgICAgICAgICAgaXNBbm9ueW1vdXMsXHJcbiAgICAgICAgICAgIHBob3RvVVJMLFxyXG4gICAgICAgICAgICBwaG9uZU51bWJlcixcclxuICAgICAgICAgICAgdGVuYW50SWQsXHJcbiAgICAgICAgICAgIHN0c1Rva2VuTWFuYWdlcixcclxuICAgICAgICAgICAgY3JlYXRlZEF0LFxyXG4gICAgICAgICAgICBsYXN0TG9naW5BdFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChwcm92aWRlckRhdGEgJiYgQXJyYXkuaXNBcnJheShwcm92aWRlckRhdGEpKSB7XHJcbiAgICAgICAgICAgIHVzZXIucHJvdmlkZXJEYXRhID0gcHJvdmlkZXJEYXRhLm1hcCh1c2VySW5mbyA9PiAoT2JqZWN0LmFzc2lnbih7fSwgdXNlckluZm8pKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChfcmVkaXJlY3RFdmVudElkKSB7XHJcbiAgICAgICAgICAgIHVzZXIuX3JlZGlyZWN0RXZlbnRJZCA9IF9yZWRpcmVjdEV2ZW50SWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB1c2VyO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplIGEgVXNlciBmcm9tIGFuIGlkVG9rZW4gc2VydmVyIHJlc3BvbnNlXHJcbiAgICAgKiBAcGFyYW0gYXV0aFxyXG4gICAgICogQHBhcmFtIGlkVG9rZW5SZXNwb25zZVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYXN5bmMgX2Zyb21JZFRva2VuUmVzcG9uc2UoYXV0aCwgaWRUb2tlblJlc3BvbnNlLCBpc0Fub255bW91cyA9IGZhbHNlKSB7XHJcbiAgICAgICAgY29uc3Qgc3RzVG9rZW5NYW5hZ2VyID0gbmV3IFN0c1Rva2VuTWFuYWdlcigpO1xyXG4gICAgICAgIHN0c1Rva2VuTWFuYWdlci51cGRhdGVGcm9tU2VydmVyUmVzcG9uc2UoaWRUb2tlblJlc3BvbnNlKTtcclxuICAgICAgICAvLyBJbml0aWFsaXplIHRoZSBGaXJlYmFzZSBBdXRoIHVzZXIuXHJcbiAgICAgICAgY29uc3QgdXNlciA9IG5ldyBVc2VySW1wbCh7XHJcbiAgICAgICAgICAgIHVpZDogaWRUb2tlblJlc3BvbnNlLmxvY2FsSWQsXHJcbiAgICAgICAgICAgIGF1dGgsXHJcbiAgICAgICAgICAgIHN0c1Rva2VuTWFuYWdlcixcclxuICAgICAgICAgICAgaXNBbm9ueW1vdXNcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBVcGRhdGVzIHRoZSB1c2VyIGluZm8gYW5kIGRhdGEgYW5kIHJlc29sdmVzIHdpdGggYSB1c2VyIGluc3RhbmNlLlxyXG4gICAgICAgIGF3YWl0IF9yZWxvYWRXaXRob3V0U2F2aW5nKHVzZXIpO1xyXG4gICAgICAgIHJldHVybiB1c2VyO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIEluTWVtb3J5UGVyc2lzdGVuY2Uge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy50eXBlID0gXCJOT05FXCIgLyogTk9ORSAqLztcclxuICAgICAgICB0aGlzLnN0b3JhZ2UgPSB7fTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9pc0F2YWlsYWJsZSgpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9zZXQoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuc3RvcmFnZVtrZXldID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfZ2V0KGtleSkge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5zdG9yYWdlW2tleV07XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgPyBudWxsIDogdmFsdWU7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfcmVtb3ZlKGtleSkge1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLnN0b3JhZ2Vba2V5XTtcclxuICAgIH1cclxuICAgIF9hZGRMaXN0ZW5lcihfa2V5LCBfbGlzdGVuZXIpIHtcclxuICAgICAgICAvLyBMaXN0ZW5lcnMgYXJlIG5vdCBzdXBwb3J0ZWQgZm9yIGluLW1lbW9yeSBzdG9yYWdlIHNpbmNlIGl0IGNhbm5vdCBiZSBzaGFyZWQgYWNyb3NzIHdpbmRvd3Mvd29ya2Vyc1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIF9yZW1vdmVMaXN0ZW5lcihfa2V5LCBfbGlzdGVuZXIpIHtcclxuICAgICAgICAvLyBMaXN0ZW5lcnMgYXJlIG5vdCBzdXBwb3J0ZWQgZm9yIGluLW1lbW9yeSBzdG9yYWdlIHNpbmNlIGl0IGNhbm5vdCBiZSBzaGFyZWQgYWNyb3NzIHdpbmRvd3Mvd29ya2Vyc1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxufVxyXG5Jbk1lbW9yeVBlcnNpc3RlbmNlLnR5cGUgPSAnTk9ORSc7XHJcbi8qKlxyXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgUGVyc2lzdGVuY2V9IG9mIHR5cGUgJ05PTkUnLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBpbk1lbW9yeVBlcnNpc3RlbmNlID0gSW5NZW1vcnlQZXJzaXN0ZW5jZTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX3BlcnNpc3RlbmNlS2V5TmFtZShrZXksIGFwaUtleSwgYXBwTmFtZSkge1xyXG4gICAgcmV0dXJuIGAke1wiZmlyZWJhc2VcIiAvKiBQRVJTSVNURU5DRSAqL306JHtrZXl9OiR7YXBpS2V5fToke2FwcE5hbWV9YDtcclxufVxyXG5jbGFzcyBQZXJzaXN0ZW5jZVVzZXJNYW5hZ2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKHBlcnNpc3RlbmNlLCBhdXRoLCB1c2VyS2V5KSB7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IHBlcnNpc3RlbmNlO1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGg7XHJcbiAgICAgICAgdGhpcy51c2VyS2V5ID0gdXNlcktleTtcclxuICAgICAgICBjb25zdCB7IGNvbmZpZywgbmFtZSB9ID0gdGhpcy5hdXRoO1xyXG4gICAgICAgIHRoaXMuZnVsbFVzZXJLZXkgPSBfcGVyc2lzdGVuY2VLZXlOYW1lKHRoaXMudXNlcktleSwgY29uZmlnLmFwaUtleSwgbmFtZSk7XHJcbiAgICAgICAgdGhpcy5mdWxsUGVyc2lzdGVuY2VLZXkgPSBfcGVyc2lzdGVuY2VLZXlOYW1lKFwicGVyc2lzdGVuY2VcIiAvKiBQRVJTSVNURU5DRV9VU0VSICovLCBjb25maWcuYXBpS2V5LCBuYW1lKTtcclxuICAgICAgICB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyID0gYXV0aC5fb25TdG9yYWdlRXZlbnQuYmluZChhdXRoKTtcclxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlLl9hZGRMaXN0ZW5lcih0aGlzLmZ1bGxVc2VyS2V5LCB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyKTtcclxuICAgIH1cclxuICAgIHNldEN1cnJlbnRVc2VyKHVzZXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5fc2V0KHRoaXMuZnVsbFVzZXJLZXksIHVzZXIudG9KU09OKCkpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2V0Q3VycmVudFVzZXIoKSB7XHJcbiAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IHRoaXMucGVyc2lzdGVuY2UuX2dldCh0aGlzLmZ1bGxVc2VyS2V5KTtcclxuICAgICAgICByZXR1cm4gYmxvYiA/IFVzZXJJbXBsLl9mcm9tSlNPTih0aGlzLmF1dGgsIGJsb2IpIDogbnVsbDtcclxuICAgIH1cclxuICAgIHJlbW92ZUN1cnJlbnRVc2VyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLl9yZW1vdmUodGhpcy5mdWxsVXNlcktleSk7XHJcbiAgICB9XHJcbiAgICBzYXZlUGVyc2lzdGVuY2VGb3JSZWRpcmVjdCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5fc2V0KHRoaXMuZnVsbFBlcnNpc3RlbmNlS2V5LCB0aGlzLnBlcnNpc3RlbmNlLnR5cGUpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgc2V0UGVyc2lzdGVuY2UobmV3UGVyc2lzdGVuY2UpIHtcclxuICAgICAgICBpZiAodGhpcy5wZXJzaXN0ZW5jZSA9PT0gbmV3UGVyc2lzdGVuY2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IHRoaXMuZ2V0Q3VycmVudFVzZXIoKTtcclxuICAgICAgICBhd2FpdCB0aGlzLnJlbW92ZUN1cnJlbnRVc2VyKCk7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IG5ld1BlcnNpc3RlbmNlO1xyXG4gICAgICAgIGlmIChjdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRDdXJyZW50VXNlcihjdXJyZW50VXNlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZGVsZXRlKCkge1xyXG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UuX3JlbW92ZUxpc3RlbmVyKHRoaXMuZnVsbFVzZXJLZXksIHRoaXMuYm91bmRFdmVudEhhbmRsZXIpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGFzeW5jIGNyZWF0ZShhdXRoLCBwZXJzaXN0ZW5jZUhpZXJhcmNoeSwgdXNlcktleSA9IFwiYXV0aFVzZXJcIiAvKiBBVVRIX1VTRVIgKi8pIHtcclxuICAgICAgICBpZiAoIXBlcnNpc3RlbmNlSGllcmFyY2h5Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlVXNlck1hbmFnZXIoX2dldEluc3RhbmNlKGluTWVtb3J5UGVyc2lzdGVuY2UpLCBhdXRoLCB1c2VyS2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRWxpbWluYXRlIGFueSBwZXJzaXN0ZW5jZXMgdGhhdCBhcmUgbm90IGF2YWlsYWJsZVxyXG4gICAgICAgIGNvbnN0IGF2YWlsYWJsZVBlcnNpc3RlbmNlcyA9IChhd2FpdCBQcm9taXNlLmFsbChwZXJzaXN0ZW5jZUhpZXJhcmNoeS5tYXAoYXN5bmMgKHBlcnNpc3RlbmNlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhd2FpdCBwZXJzaXN0ZW5jZS5faXNBdmFpbGFibGUoKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBlcnNpc3RlbmNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfSkpKS5maWx0ZXIocGVyc2lzdGVuY2UgPT4gcGVyc2lzdGVuY2UpO1xyXG4gICAgICAgIC8vIEZhbGwgYmFjayB0byB0aGUgZmlyc3QgcGVyc2lzdGVuY2UgbGlzdGVkLCBvciBpbiBtZW1vcnkgaWYgbm9uZSBhdmFpbGFibGVcclxuICAgICAgICBsZXQgc2VsZWN0ZWRQZXJzaXN0ZW5jZSA9IGF2YWlsYWJsZVBlcnNpc3RlbmNlc1swXSB8fFxyXG4gICAgICAgICAgICBfZ2V0SW5zdGFuY2UoaW5NZW1vcnlQZXJzaXN0ZW5jZSk7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gX3BlcnNpc3RlbmNlS2V5TmFtZSh1c2VyS2V5LCBhdXRoLmNvbmZpZy5hcGlLZXksIGF1dGgubmFtZSk7XHJcbiAgICAgICAgLy8gUHVsbCBvdXQgdGhlIGV4aXN0aW5nIHVzZXIsIHNldHRpbmcgdGhlIGNob3NlbiBwZXJzaXN0ZW5jZSB0byB0aGF0XHJcbiAgICAgICAgLy8gcGVyc2lzdGVuY2UgaWYgdGhlIHVzZXIgZXhpc3RzLlxyXG4gICAgICAgIGxldCB1c2VyVG9NaWdyYXRlID0gbnVsbDtcclxuICAgICAgICAvLyBOb3RlLCBoZXJlIHdlIGNoZWNrIGZvciBhIHVzZXIgaW4gX2FsbF8gcGVyc2lzdGVuY2VzLCBub3QganVzdCB0aGVcclxuICAgICAgICAvLyBvbmVzIGRlZW1lZCBhdmFpbGFibGUuIElmIHdlIGNhbiBtaWdyYXRlIGEgdXNlciBvdXQgb2YgYSBicm9rZW5cclxuICAgICAgICAvLyBwZXJzaXN0ZW5jZSwgd2Ugd2lsbCAoYnV0IG9ubHkgaWYgdGhhdCBwZXJzaXN0ZW5jZSBzdXBwb3J0cyBtaWdyYXRpb24pLlxyXG4gICAgICAgIGZvciAoY29uc3QgcGVyc2lzdGVuY2Ugb2YgcGVyc2lzdGVuY2VIaWVyYXJjaHkpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBwZXJzaXN0ZW5jZS5fZ2V0KGtleSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYmxvYikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBVc2VySW1wbC5fZnJvbUpTT04oYXV0aCwgYmxvYik7IC8vIHRocm93cyBmb3IgdW5wYXJzYWJsZSBibG9iICh3cm9uZyBmb3JtYXQpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlcnNpc3RlbmNlICE9PSBzZWxlY3RlZFBlcnNpc3RlbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJUb01pZ3JhdGUgPSB1c2VyO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFBlcnNpc3RlbmNlID0gcGVyc2lzdGVuY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKF9hKSB7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgd2UgZmluZCB0aGUgdXNlciBpbiBhIHBlcnNpc3RlbmNlIHRoYXQgZG9lcyBzdXBwb3J0IG1pZ3JhdGlvbiwgdXNlXHJcbiAgICAgICAgLy8gdGhhdCBtaWdyYXRpb24gcGF0aCAob2Ygb25seSBwZXJzaXN0ZW5jZXMgdGhhdCBzdXBwb3J0IG1pZ3JhdGlvbilcclxuICAgICAgICBjb25zdCBtaWdyYXRpb25IaWVyYXJjaHkgPSBhdmFpbGFibGVQZXJzaXN0ZW5jZXMuZmlsdGVyKHAgPT4gcC5fc2hvdWxkQWxsb3dNaWdyYXRpb24pO1xyXG4gICAgICAgIC8vIElmIHRoZSBwZXJzaXN0ZW5jZSBkb2VzIF9ub3RfIGFsbG93IG1pZ3JhdGlvbiwganVzdCBmaW5pc2ggb2ZmIGhlcmVcclxuICAgICAgICBpZiAoIXNlbGVjdGVkUGVyc2lzdGVuY2UuX3Nob3VsZEFsbG93TWlncmF0aW9uIHx8XHJcbiAgICAgICAgICAgICFtaWdyYXRpb25IaWVyYXJjaHkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VVc2VyTWFuYWdlcihzZWxlY3RlZFBlcnNpc3RlbmNlLCBhdXRoLCB1c2VyS2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZWN0ZWRQZXJzaXN0ZW5jZSA9IG1pZ3JhdGlvbkhpZXJhcmNoeVswXTtcclxuICAgICAgICBpZiAodXNlclRvTWlncmF0ZSkge1xyXG4gICAgICAgICAgICAvLyBUaGlzIG5vcm1hbGx5IHNob3VsZG4ndCB0aHJvdyBzaW5jZSBjaG9zZW5QZXJzaXN0ZW5jZS5pc0F2YWlsYWJsZSgpIGlzIHRydWUsIGJ1dCBpZiBpdCBkb2VzXHJcbiAgICAgICAgICAgIC8vIHdlJ2xsIGp1c3QgbGV0IGl0IGJ1YmJsZSB0byBzdXJmYWNlIHRoZSBlcnJvci5cclxuICAgICAgICAgICAgYXdhaXQgc2VsZWN0ZWRQZXJzaXN0ZW5jZS5fc2V0KGtleSwgdXNlclRvTWlncmF0ZS50b0pTT04oKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEF0dGVtcHQgdG8gY2xlYXIgdGhlIGtleSBpbiBvdGhlciBwZXJzaXN0ZW5jZXMgYnV0IGlnbm9yZSBlcnJvcnMuIFRoaXMgaGVscHMgcHJldmVudCBpc3N1ZXNcclxuICAgICAgICAvLyBzdWNoIGFzIHVzZXJzIGdldHRpbmcgc3R1Y2sgd2l0aCBhIHByZXZpb3VzIGFjY291bnQgYWZ0ZXIgc2lnbmluZyBvdXQgYW5kIHJlZnJlc2hpbmcgdGhlIHRhYi5cclxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChwZXJzaXN0ZW5jZUhpZXJhcmNoeS5tYXAoYXN5bmMgKHBlcnNpc3RlbmNlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChwZXJzaXN0ZW5jZSAhPT0gc2VsZWN0ZWRQZXJzaXN0ZW5jZSkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBwZXJzaXN0ZW5jZS5fcmVtb3ZlKGtleSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoX2EpIHsgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VVc2VyTWFuYWdlcihzZWxlY3RlZFBlcnNpc3RlbmNlLCBhdXRoLCB1c2VyS2V5KTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRGV0ZXJtaW5lIHRoZSBicm93c2VyIGZvciB0aGUgcHVycG9zZXMgb2YgcmVwb3J0aW5nIHVzYWdlIHRvIHRoZSBBUElcclxuICovXHJcbmZ1bmN0aW9uIF9nZXRCcm93c2VyTmFtZSh1c2VyQWdlbnQpIHtcclxuICAgIGNvbnN0IHVhID0gdXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XHJcbiAgICBpZiAodWEuaW5jbHVkZXMoJ29wZXJhLycpIHx8IHVhLmluY2x1ZGVzKCdvcHIvJykgfHwgdWEuaW5jbHVkZXMoJ29waW9zLycpKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiT3BlcmFcIiAvKiBPUEVSQSAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKF9pc0lFTW9iaWxlKHVhKSkge1xyXG4gICAgICAgIC8vIFdpbmRvd3MgcGhvbmUgSUVNb2JpbGUgYnJvd3Nlci5cclxuICAgICAgICByZXR1cm4gXCJJRU1vYmlsZVwiIC8qIElFTU9CSUxFICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodWEuaW5jbHVkZXMoJ21zaWUnKSB8fCB1YS5pbmNsdWRlcygndHJpZGVudC8nKSkge1xyXG4gICAgICAgIHJldHVybiBcIklFXCIgLyogSUUgKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh1YS5pbmNsdWRlcygnZWRnZS8nKSkge1xyXG4gICAgICAgIHJldHVybiBcIkVkZ2VcIiAvKiBFREdFICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoX2lzRmlyZWZveCh1YSkpIHtcclxuICAgICAgICByZXR1cm4gXCJGaXJlZm94XCIgLyogRklSRUZPWCAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHVhLmluY2x1ZGVzKCdzaWxrLycpKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiU2lsa1wiIC8qIFNJTEsgKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChfaXNCbGFja0JlcnJ5KHVhKSkge1xyXG4gICAgICAgIC8vIEJsYWNrYmVycnkgYnJvd3Nlci5cclxuICAgICAgICByZXR1cm4gXCJCbGFja2JlcnJ5XCIgLyogQkxBQ0tCRVJSWSAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKF9pc1dlYk9TKHVhKSkge1xyXG4gICAgICAgIC8vIFdlYk9TIGRlZmF1bHQgYnJvd3Nlci5cclxuICAgICAgICByZXR1cm4gXCJXZWJvc1wiIC8qIFdFQk9TICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoX2lzU2FmYXJpKHVhKSkge1xyXG4gICAgICAgIHJldHVybiBcIlNhZmFyaVwiIC8qIFNBRkFSSSAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKCh1YS5pbmNsdWRlcygnY2hyb21lLycpIHx8IF9pc0Nocm9tZUlPUyh1YSkpICYmXHJcbiAgICAgICAgIXVhLmluY2x1ZGVzKCdlZGdlLycpKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiQ2hyb21lXCIgLyogQ0hST01FICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoX2lzQW5kcm9pZCh1YSkpIHtcclxuICAgICAgICAvLyBBbmRyb2lkIHN0b2NrIGJyb3dzZXIuXHJcbiAgICAgICAgcmV0dXJuIFwiQW5kcm9pZFwiIC8qIEFORFJPSUQgKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBNb3N0IG1vZGVybiBicm93c2VycyBoYXZlIG5hbWUvdmVyc2lvbiBhdCBlbmQgb2YgdXNlciBhZ2VudCBzdHJpbmcuXHJcbiAgICAgICAgY29uc3QgcmUgPSAvKFthLXpBLVpcXGRcXC5dKylcXC9bYS16QS1aXFxkXFwuXSokLztcclxuICAgICAgICBjb25zdCBtYXRjaGVzID0gdXNlckFnZW50Lm1hdGNoKHJlKTtcclxuICAgICAgICBpZiAoKG1hdGNoZXMgPT09IG51bGwgfHwgbWF0Y2hlcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogbWF0Y2hlcy5sZW5ndGgpID09PSAyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtYXRjaGVzWzFdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBcIk90aGVyXCIgLyogT1RIRVIgKi87XHJcbn1cclxuZnVuY3Rpb24gX2lzRmlyZWZveCh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAvZmlyZWZveFxcLy9pLnRlc3QodWEpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc1NhZmFyaSh1c2VyQWdlbnQgPSBnZXRVQSgpKSB7XHJcbiAgICBjb25zdCB1YSA9IHVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgcmV0dXJuICh1YS5pbmNsdWRlcygnc2FmYXJpLycpICYmXHJcbiAgICAgICAgIXVhLmluY2x1ZGVzKCdjaHJvbWUvJykgJiZcclxuICAgICAgICAhdWEuaW5jbHVkZXMoJ2NyaW9zLycpICYmXHJcbiAgICAgICAgIXVhLmluY2x1ZGVzKCdhbmRyb2lkJykpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0Nocm9tZUlPUyh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAvY3Jpb3NcXC8vaS50ZXN0KHVhKTtcclxufVxyXG5mdW5jdGlvbiBfaXNJRU1vYmlsZSh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAvaWVtb2JpbGUvaS50ZXN0KHVhKTtcclxufVxyXG5mdW5jdGlvbiBfaXNBbmRyb2lkKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuIC9hbmRyb2lkL2kudGVzdCh1YSk7XHJcbn1cclxuZnVuY3Rpb24gX2lzQmxhY2tCZXJyeSh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAvYmxhY2tiZXJyeS9pLnRlc3QodWEpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc1dlYk9TKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuIC93ZWJvcy9pLnRlc3QodWEpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0lPUyh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAvaXBob25lfGlwYWR8aXBvZC9pLnRlc3QodWEpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0lPUzdPcjgodWEgPSBnZXRVQSgpKSB7XHJcbiAgICByZXR1cm4gKC8oaVBhZHxpUGhvbmV8aVBvZCkuKk9TIDdfXFxkL2kudGVzdCh1YSkgfHxcclxuICAgICAgICAvKGlQYWR8aVBob25lfGlQb2QpLipPUyA4X1xcZC9pLnRlc3QodWEpKTtcclxufVxyXG5mdW5jdGlvbiBfaXNJT1NTdGFuZGFsb25lKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgcmV0dXJuIF9pc0lPUyh1YSkgJiYgISEoKF9hID0gd2luZG93Lm5hdmlnYXRvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnN0YW5kYWxvbmUpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0lFMTAoKSB7XHJcbiAgICByZXR1cm4gaXNJRSgpICYmIGRvY3VtZW50LmRvY3VtZW50TW9kZSA9PT0gMTA7XHJcbn1cclxuZnVuY3Rpb24gX2lzTW9iaWxlQnJvd3Nlcih1YSA9IGdldFVBKCkpIHtcclxuICAgIC8vIFRPRE86IGltcGxlbWVudCBnZXRCcm93c2VyTmFtZSBlcXVpdmFsZW50IGZvciBPUy5cclxuICAgIHJldHVybiAoX2lzSU9TKHVhKSB8fFxyXG4gICAgICAgIF9pc0FuZHJvaWQodWEpIHx8XHJcbiAgICAgICAgX2lzV2ViT1ModWEpIHx8XHJcbiAgICAgICAgX2lzQmxhY2tCZXJyeSh1YSkgfHxcclxuICAgICAgICAvd2luZG93cyBwaG9uZS9pLnRlc3QodWEpIHx8XHJcbiAgICAgICAgX2lzSUVNb2JpbGUodWEpKTtcclxufVxyXG5mdW5jdGlvbiBfaXNJZnJhbWUoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIENoZWNrIHRoYXQgdGhlIGN1cnJlbnQgd2luZG93IGlzIG5vdCB0aGUgdG9wIHdpbmRvdy5cclxuICAgICAgICAvLyBJZiBzbywgcmV0dXJuIHRydWUuXHJcbiAgICAgICAgcmV0dXJuICEhKHdpbmRvdyAmJiB3aW5kb3cgIT09IHdpbmRvdy50b3ApO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLypcclxuICogRGV0ZXJtaW5lIHRoZSBTREsgdmVyc2lvbiBzdHJpbmdcclxuICovXHJcbmZ1bmN0aW9uIF9nZXRDbGllbnRWZXJzaW9uKGNsaWVudFBsYXRmb3JtLCBmcmFtZXdvcmtzID0gW10pIHtcclxuICAgIGxldCByZXBvcnRlZFBsYXRmb3JtO1xyXG4gICAgc3dpdGNoIChjbGllbnRQbGF0Zm9ybSkge1xyXG4gICAgICAgIGNhc2UgXCJCcm93c2VyXCIgLyogQlJPV1NFUiAqLzpcclxuICAgICAgICAgICAgLy8gSW4gYSBicm93c2VyIGVudmlyb25tZW50LCByZXBvcnQgdGhlIGJyb3dzZXIgbmFtZS5cclxuICAgICAgICAgICAgcmVwb3J0ZWRQbGF0Zm9ybSA9IF9nZXRCcm93c2VyTmFtZShnZXRVQSgpKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcIldvcmtlclwiIC8qIFdPUktFUiAqLzpcclxuICAgICAgICAgICAgLy8gVGVjaG5pY2FsbHkgYSB3b3JrZXIgcnVucyBmcm9tIGEgYnJvd3NlciBidXQgd2UgbmVlZCB0byBkaWZmZXJlbnRpYXRlIGFcclxuICAgICAgICAgICAgLy8gd29ya2VyIGZyb20gYSBicm93c2VyLlxyXG4gICAgICAgICAgICAvLyBGb3IgZXhhbXBsZTogQ2hyb21lLVdvcmtlci9Kc0NvcmUvNC45LjEvRmlyZWJhc2VDb3JlLXdlYi5cclxuICAgICAgICAgICAgcmVwb3J0ZWRQbGF0Zm9ybSA9IGAke19nZXRCcm93c2VyTmFtZShnZXRVQSgpKX0tJHtjbGllbnRQbGF0Zm9ybX1gO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXBvcnRlZFBsYXRmb3JtID0gY2xpZW50UGxhdGZvcm07XHJcbiAgICB9XHJcbiAgICBjb25zdCByZXBvcnRlZEZyYW1ld29ya3MgPSBmcmFtZXdvcmtzLmxlbmd0aFxyXG4gICAgICAgID8gZnJhbWV3b3Jrcy5qb2luKCcsJylcclxuICAgICAgICA6ICdGaXJlYmFzZUNvcmUtd2ViJzsgLyogZGVmYXVsdCB2YWx1ZSBpZiBubyBvdGhlciBmcmFtZXdvcmsgaXMgdXNlZCAqL1xyXG4gICAgcmV0dXJuIGAke3JlcG9ydGVkUGxhdGZvcm19LyR7XCJKc0NvcmVcIiAvKiBDT1JFICovfS8ke1NES19WRVJTSU9OfS8ke3JlcG9ydGVkRnJhbWV3b3Jrc31gO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIEF1dGhJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGFwcCwgY29uZmlnKSB7XHJcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XHJcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50VXNlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5lbXVsYXRvckNvbmZpZyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5vcGVyYXRpb25zID0gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgdGhpcy5hdXRoU3RhdGVTdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuaWRUb2tlblN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24odGhpcyk7XHJcbiAgICAgICAgdGhpcy5yZWRpcmVjdFVzZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaXNQcm9hY3RpdmVSZWZyZXNoRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIC8vIEFueSBuZXR3b3JrIGNhbGxzIHdpbGwgc2V0IHRoaXMgdG8gdHJ1ZSBhbmQgcHJldmVudCBzdWJzZXF1ZW50IGVtdWxhdG9yXHJcbiAgICAgICAgLy8gaW5pdGlhbGl6YXRpb25cclxuICAgICAgICB0aGlzLl9jYW5Jbml0RW11bGF0b3IgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX2lzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9kZWxldGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5faW5pdGlhbGl6YXRpb25Qcm9taXNlID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9wb3B1cFJlZGlyZWN0UmVzb2x2ZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX2Vycm9yRmFjdG9yeSA9IF9ERUZBVUxUX0FVVEhfRVJST1JfRkFDVE9SWTtcclxuICAgICAgICAvLyBUcmFja3MgdGhlIGxhc3Qgbm90aWZpZWQgVUlEIGZvciBzdGF0ZSBjaGFuZ2UgbGlzdGVuZXJzIHRvIHByZXZlbnRcclxuICAgICAgICAvLyByZXBlYXRlZCBjYWxscyB0byB0aGUgY2FsbGJhY2tzLiBVbmRlZmluZWQgbWVhbnMgaXQncyBuZXZlciBiZWVuXHJcbiAgICAgICAgLy8gY2FsbGVkLCB3aGVyZWFzIG51bGwgbWVhbnMgaXQncyBiZWVuIGNhbGxlZCB3aXRoIGEgc2lnbmVkIG91dCB1c2VyXHJcbiAgICAgICAgdGhpcy5sYXN0Tm90aWZpZWRVaWQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5sYW5ndWFnZUNvZGUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMudGVuYW50SWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSB7IGFwcFZlcmlmaWNhdGlvbkRpc2FibGVkRm9yVGVzdGluZzogZmFsc2UgfTtcclxuICAgICAgICB0aGlzLmZyYW1ld29ya3MgPSBbXTtcclxuICAgICAgICB0aGlzLm5hbWUgPSBhcHAubmFtZTtcclxuICAgICAgICB0aGlzLmNsaWVudFZlcnNpb24gPSBjb25maWcuc2RrQ2xpZW50VmVyc2lvbjtcclxuICAgIH1cclxuICAgIF9pbml0aWFsaXplV2l0aFBlcnNpc3RlbmNlKHBlcnNpc3RlbmNlSGllcmFyY2h5LCBwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpIHtcclxuICAgICAgICBpZiAocG9wdXBSZWRpcmVjdFJlc29sdmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlciA9IF9nZXRJbnN0YW5jZShwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBIYXZlIHRvIGNoZWNrIGZvciBhcHAgZGVsZXRpb24gdGhyb3VnaG91dCBpbml0aWFsaXphdGlvbiAoYWZ0ZXIgZWFjaFxyXG4gICAgICAgIC8vIHByb21pc2UgcmVzb2x1dGlvbilcclxuICAgICAgICB0aGlzLl9pbml0aWFsaXphdGlvblByb21pc2UgPSB0aGlzLnF1ZXVlKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2RlbGV0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnBlcnNpc3RlbmNlTWFuYWdlciA9IGF3YWl0IFBlcnNpc3RlbmNlVXNlck1hbmFnZXIuY3JlYXRlKHRoaXMsIHBlcnNpc3RlbmNlSGllcmFyY2h5KTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2RlbGV0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBJbml0aWFsaXplIHRoZSByZXNvbHZlciBlYXJseSBpZiBuZWNlc3NhcnkgKG9ubHkgYXBwbGljYWJsZSB0byB3ZWI6XHJcbiAgICAgICAgICAgIC8vIHRoaXMgd2lsbCBjYXVzZSB0aGUgaWZyYW1lIHRvIGxvYWQgaW1tZWRpYXRlbHkgaW4gY2VydGFpbiBjYXNlcylcclxuICAgICAgICAgICAgaWYgKChfYSA9IHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLl9zaG91bGRJbml0UHJvYWN0aXZlbHkpIHtcclxuICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgZmFpbHMsIGRvbid0IGhhbHQgYXV0aCBsb2FkaW5nXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlci5faW5pdGlhbGl6ZSh0aGlzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7IC8qIElnbm9yZSB0aGUgZXJyb3IgKi8gfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZUN1cnJlbnRVc2VyKHBvcHVwUmVkaXJlY3RSZXNvbHZlcik7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdE5vdGlmaWVkVWlkID0gKChfYiA9IHRoaXMuY3VycmVudFVzZXIpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi51aWQpIHx8IG51bGw7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9kZWxldGVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5faXNJbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2luaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSWYgdGhlIHBlcnNpc3RlbmNlIGlzIGNoYW5nZWQgaW4gYW5vdGhlciB3aW5kb3csIHRoZSB1c2VyIG1hbmFnZXIgd2lsbCBsZXQgdXMga25vd1xyXG4gICAgICovXHJcbiAgICBhc3luYyBfb25TdG9yYWdlRXZlbnQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2RlbGV0ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgdGhpcy5hc3NlcnRlZFBlcnNpc3RlbmNlLmdldEN1cnJlbnRVc2VyKCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRVc2VyICYmICF1c2VyKSB7XHJcbiAgICAgICAgICAgIC8vIE5vIGNoYW5nZSwgZG8gbm90aGluZyAod2FzIHNpZ25lZCBvdXQgYW5kIHJlbWFpbmVkIHNpZ25lZCBvdXQpLlxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIHRoZSBzYW1lIHVzZXIgaXMgdG8gYmUgc3luY2hyb25pemVkLlxyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRVc2VyICYmIHVzZXIgJiYgdGhpcy5jdXJyZW50VXNlci51aWQgPT09IHVzZXIudWlkKSB7XHJcbiAgICAgICAgICAgIC8vIERhdGEgdXBkYXRlLCBzaW1wbHkgY29weSBkYXRhIGNoYW5nZXMuXHJcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRVc2VyLl9hc3NpZ24odXNlcik7XHJcbiAgICAgICAgICAgIC8vIElmIHRva2VucyBjaGFuZ2VkIGZyb20gcHJldmlvdXMgdXNlciB0b2tlbnMsIHRoaXMgd2lsbCB0cmlnZ2VyXHJcbiAgICAgICAgICAgIC8vIG5vdGlmeUF1dGhMaXN0ZW5lcnNfLlxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmN1cnJlbnRVc2VyLmdldElkVG9rZW4oKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBVcGRhdGUgY3VycmVudCBBdXRoIHN0YXRlLiBFaXRoZXIgYSBuZXcgbG9naW4gb3IgbG9nb3V0LlxyXG4gICAgICAgIGF3YWl0IHRoaXMuX3VwZGF0ZUN1cnJlbnRVc2VyKHVzZXIpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgaW5pdGlhbGl6ZUN1cnJlbnRVc2VyKHBvcHVwUmVkaXJlY3RSZXNvbHZlcikge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICAvLyBGaXJzdCBjaGVjayB0byBzZWUgaWYgd2UgaGF2ZSBhIHBlbmRpbmcgcmVkaXJlY3QgZXZlbnQuXHJcbiAgICAgICAgbGV0IHN0b3JlZFVzZXIgPSAoYXdhaXQgdGhpcy5hc3NlcnRlZFBlcnNpc3RlbmNlLmdldEN1cnJlbnRVc2VyKCkpO1xyXG4gICAgICAgIGlmIChwb3B1cFJlZGlyZWN0UmVzb2x2ZXIgJiYgdGhpcy5jb25maWcuYXV0aERvbWFpbikge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmdldE9ySW5pdFJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlZGlyZWN0VXNlckV2ZW50SWQgPSAoX2EgPSB0aGlzLnJlZGlyZWN0VXNlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLl9yZWRpcmVjdEV2ZW50SWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0b3JlZFVzZXJFdmVudElkID0gc3RvcmVkVXNlciA9PT0gbnVsbCB8fCBzdG9yZWRVc2VyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzdG9yZWRVc2VyLl9yZWRpcmVjdEV2ZW50SWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMudHJ5UmVkaXJlY3RTaWduSW4ocG9wdXBSZWRpcmVjdFJlc29sdmVyKTtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIHN0b3JlZCB1c2VyIChpLmUuIHRoZSBvbGQgXCJjdXJyZW50VXNlclwiKSBoYXMgYSByZWRpcmVjdElkIHRoYXRcclxuICAgICAgICAgICAgLy8gbWF0Y2hlcyB0aGUgcmVkaXJlY3QgdXNlciwgdGhlbiB3ZSB3YW50IHRvIGluaXRpYWxseSBzaWduIGluIHdpdGggdGhlXHJcbiAgICAgICAgICAgIC8vIG5ldyB1c2VyIG9iamVjdCBmcm9tIHJlc3VsdC5cclxuICAgICAgICAgICAgLy8gVE9ETyhzYW1naG8pOiBNb3JlIHRob3JvdWdobHkgdGVzdCBhbGwgb2YgdGhpc1xyXG4gICAgICAgICAgICBpZiAoKCFyZWRpcmVjdFVzZXJFdmVudElkIHx8IHJlZGlyZWN0VXNlckV2ZW50SWQgPT09IHN0b3JlZFVzZXJFdmVudElkKSAmJlxyXG4gICAgICAgICAgICAgICAgKHJlc3VsdCA9PT0gbnVsbCB8fCByZXN1bHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlc3VsdC51c2VyKSkge1xyXG4gICAgICAgICAgICAgICAgc3RvcmVkVXNlciA9IHJlc3VsdC51c2VyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIG5vIHVzZXIgaW4gcGVyc2lzdGVuY2UsIHRoZXJlIGlzIG5vIGN1cnJlbnQgdXNlci4gU2V0IHRvIG51bGwuXHJcbiAgICAgICAgaWYgKCFzdG9yZWRVc2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGx5U2V0Q3VycmVudFVzZXIobnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghc3RvcmVkVXNlci5fcmVkaXJlY3RFdmVudElkKSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgaXNuJ3QgYSByZWRpcmVjdCB1c2VyLCB3ZSBjYW4gcmVsb2FkIGFuZCBiYWlsXHJcbiAgICAgICAgICAgIC8vIFRoaXMgd2lsbCBhbHNvIGNhdGNoIHRoZSByZWRpcmVjdGVkIHVzZXIsIGlmIGF2YWlsYWJsZSwgYXMgdGhhdCBtZXRob2RcclxuICAgICAgICAgICAgLy8gc3RyaXBzIHRoZSBfcmVkaXJlY3RFdmVudElkXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbG9hZEFuZFNldEN1cnJlbnRVc2VyT3JDbGVhcihzdG9yZWRVc2VyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgX2Fzc2VydCh0aGlzLl9wb3B1cFJlZGlyZWN0UmVzb2x2ZXIsIHRoaXMsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5nZXRPckluaXRSZWRpcmVjdFBlcnNpc3RlbmNlTWFuYWdlcigpO1xyXG4gICAgICAgIC8vIElmIHRoZSByZWRpcmVjdCB1c2VyJ3MgZXZlbnQgSUQgbWF0Y2hlcyB0aGUgY3VycmVudCB1c2VyJ3MgZXZlbnQgSUQsXHJcbiAgICAgICAgLy8gRE8gTk9UIHJlbG9hZCB0aGUgY3VycmVudCB1c2VyLCBvdGhlcndpc2UgdGhleSdsbCBiZSBjbGVhcmVkIGZyb20gc3RvcmFnZS5cclxuICAgICAgICAvLyBUaGlzIGlzIGltcG9ydGFudCBmb3IgdGhlIHJlYXV0aGVudGljYXRlV2l0aFJlZGlyZWN0KCkgZmxvdy5cclxuICAgICAgICBpZiAodGhpcy5yZWRpcmVjdFVzZXIgJiZcclxuICAgICAgICAgICAgdGhpcy5yZWRpcmVjdFVzZXIuX3JlZGlyZWN0RXZlbnRJZCA9PT0gc3RvcmVkVXNlci5fcmVkaXJlY3RFdmVudElkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGx5U2V0Q3VycmVudFVzZXIoc3RvcmVkVXNlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnJlbG9hZEFuZFNldEN1cnJlbnRVc2VyT3JDbGVhcihzdG9yZWRVc2VyKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHRyeVJlZGlyZWN0U2lnbkluKHJlZGlyZWN0UmVzb2x2ZXIpIHtcclxuICAgICAgICAvLyBUaGUgcmVkaXJlY3QgdXNlciBuZWVkcyB0byBiZSBjaGVja2VkIChhbmQgc2lnbmVkIGluIGlmIGF2YWlsYWJsZSlcclxuICAgICAgICAvLyBkdXJpbmcgYXV0aCBpbml0aWFsaXphdGlvbi4gQWxsIG9mIHRoZSBub3JtYWwgc2lnbiBpbiBhbmQgbGluay9yZWF1dGhcclxuICAgICAgICAvLyBmbG93cyBjYWxsIGJhY2sgaW50byBhdXRoIGFuZCBwdXNoIHRoaW5ncyBvbnRvIHRoZSBwcm9taXNlIHF1ZXVlLiBXZVxyXG4gICAgICAgIC8vIG5lZWQgdG8gYXdhaXQgdGhlIHJlc3VsdCBvZiB0aGUgcmVkaXJlY3Qgc2lnbiBpbiAqaW5zaWRlIHRoZSBwcm9taXNlXHJcbiAgICAgICAgLy8gcXVldWUqLiBUaGlzIHByZXNlbnRzIGEgcHJvYmxlbTogd2UgcnVuIGludG8gZGVhZGxvY2suIFNlZTpcclxuICAgICAgICAvLyAgICDilIw+IFtJbml0aWFsaXphdGlvbl0g4pSA4pSA4pSA4pSA4pSA4pSQXHJcbiAgICAgICAgLy8gICAg4pSMPiBbPG90aGVyIHF1ZXVlIHRhc2tzPl0g4pSCXHJcbiAgICAgICAgLy8gICAg4pSU4pSAIFtnZXRSZWRpcmVjdFJlc3VsdF0gPOKUgOKUmFxyXG4gICAgICAgIC8vICAgIHdoZXJlIFtdIGFyZSB0YXNrcyBvbiB0aGUgcXVldWUgYW5kIGFycm93cyBkZW5vdGUgYXdhaXRzXHJcbiAgICAgICAgLy8gSW5pdGlhbGl6YXRpb24gd2lsbCBuZXZlciBjb21wbGV0ZSBiZWNhdXNlIGl0J3Mgd2FpdGluZyBvbiBzb21ldGhpbmdcclxuICAgICAgICAvLyB0aGF0J3Mgd2FpdGluZyBmb3IgaW5pdGlhbGl6YXRpb24gdG8gY29tcGxldGUhXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyBJbnN0ZWFkLCB0aGlzIG1ldGhvZCBjYWxscyBnZXRSZWRpcmVjdFJlc3VsdCgpIChzdG9yZWQgaW5cclxuICAgICAgICAvLyBfY29tcGxldGVSZWRpcmVjdEZuKSB3aXRoIGFuIG9wdGlvbmFsIHBhcmFtZXRlciB0aGF0IGluc3RydWN0cyBhbGwgb2ZcclxuICAgICAgICAvLyB0aGUgdW5kZXJseWluZyBhdXRoIG9wZXJhdGlvbnMgdG8gc2tpcCBhbnl0aGluZyB0aGF0IG11dGF0ZXMgYXV0aCBzdGF0ZS5cclxuICAgICAgICBsZXQgcmVzdWx0ID0gbnVsbDtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBXZSBrbm93IHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlciBpcyBzZXQgc2luY2UgcmVkaXJlY3RSZXNvbHZlclxyXG4gICAgICAgICAgICAvLyBpcyBwYXNzZWQgaW4uIFRoZSBfY29tcGxldGVSZWRpcmVjdEZuIGV4cGVjdHMgdGhlIHVud3JhcHBlZCBleHRlcm4uXHJcbiAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlci5fY29tcGxldGVSZWRpcmVjdEZuKHRoaXMsIHJlZGlyZWN0UmVzb2x2ZXIsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAvLyBTd2FsbG93IGFueSBlcnJvcnMgaGVyZTsgdGhlIGNvZGUgY2FuIHJldHJpZXZlIHRoZW0gaW5cclxuICAgICAgICAgICAgLy8gZ2V0UmVkaXJlY3RSZXN1bHQoKS5cclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fc2V0UmVkaXJlY3RVc2VyKG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgYXN5bmMgcmVsb2FkQW5kU2V0Q3VycmVudFVzZXJPckNsZWFyKHVzZXIpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCBfcmVsb2FkV2l0aG91dFNhdmluZyh1c2VyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgaWYgKGUuY29kZSAhPT0gYGF1dGgvJHtcIm5ldHdvcmstcmVxdWVzdC1mYWlsZWRcIiAvKiBORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovfWApIHtcclxuICAgICAgICAgICAgICAgIC8vIFNvbWV0aGluZydzIHdyb25nIHdpdGggdGhlIHVzZXIncyB0b2tlbi4gTG9nIHRoZW0gb3V0IGFuZCByZW1vdmVcclxuICAgICAgICAgICAgICAgIC8vIHRoZW0gZnJvbSBzdG9yYWdlXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3RseVNldEN1cnJlbnRVc2VyKG51bGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGx5U2V0Q3VycmVudFVzZXIodXNlcik7XHJcbiAgICB9XHJcbiAgICB1c2VEZXZpY2VMYW5ndWFnZSgpIHtcclxuICAgICAgICB0aGlzLmxhbmd1YWdlQ29kZSA9IF9nZXRVc2VyTGFuZ3VhZ2UoKTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9kZWxldGUoKSB7XHJcbiAgICAgICAgdGhpcy5fZGVsZXRlZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBhc3luYyB1cGRhdGVDdXJyZW50VXNlcih1c2VyRXh0ZXJuKSB7XHJcbiAgICAgICAgLy8gVGhlIHB1YmxpYyB1cGRhdGVDdXJyZW50VXNlciBtZXRob2QgbmVlZHMgdG8gbWFrZSBhIGNvcHkgb2YgdGhlIHVzZXIsXHJcbiAgICAgICAgLy8gYW5kIGFsc28gY2hlY2sgdGhhdCB0aGUgcHJvamVjdCBtYXRjaGVzXHJcbiAgICAgICAgY29uc3QgdXNlciA9IHVzZXJFeHRlcm5cclxuICAgICAgICAgICAgPyBnZXRNb2R1bGFySW5zdGFuY2UodXNlckV4dGVybilcclxuICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgICAgIGlmICh1c2VyKSB7XHJcbiAgICAgICAgICAgIF9hc3NlcnQodXNlci5hdXRoLmNvbmZpZy5hcGlLZXkgPT09IHRoaXMuY29uZmlnLmFwaUtleSwgdGhpcywgXCJpbnZhbGlkLXVzZXItdG9rZW5cIiAvKiBJTlZBTElEX0FVVEggKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fdXBkYXRlQ3VycmVudFVzZXIodXNlciAmJiB1c2VyLl9jbG9uZSh0aGlzKSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfdXBkYXRlQ3VycmVudFVzZXIodXNlcikge1xyXG4gICAgICAgIGlmICh0aGlzLl9kZWxldGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICAgICAgX2Fzc2VydCh0aGlzLnRlbmFudElkID09PSB1c2VyLnRlbmFudElkLCB0aGlzLCBcInRlbmFudC1pZC1taXNtYXRjaFwiIC8qIFRFTkFOVF9JRF9NSVNNQVRDSCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXVlKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5kaXJlY3RseVNldEN1cnJlbnRVc2VyKHVzZXIpO1xyXG4gICAgICAgICAgICB0aGlzLm5vdGlmeUF1dGhMaXN0ZW5lcnMoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGFzeW5jIHNpZ25PdXQoKSB7XHJcbiAgICAgICAgLy8gQ2xlYXIgdGhlIHJlZGlyZWN0IHVzZXIgd2hlbiBzaWduT3V0IGlzIGNhbGxlZFxyXG4gICAgICAgIGlmICh0aGlzLnJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyIHx8IHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlcikge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9zZXRSZWRpcmVjdFVzZXIobnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl91cGRhdGVDdXJyZW50VXNlcihudWxsKTtcclxuICAgIH1cclxuICAgIHNldFBlcnNpc3RlbmNlKHBlcnNpc3RlbmNlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucXVldWUoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFzc2VydGVkUGVyc2lzdGVuY2Uuc2V0UGVyc2lzdGVuY2UoX2dldEluc3RhbmNlKHBlcnNpc3RlbmNlKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBfZ2V0UGVyc2lzdGVuY2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXNzZXJ0ZWRQZXJzaXN0ZW5jZS5wZXJzaXN0ZW5jZS50eXBlO1xyXG4gICAgfVxyXG4gICAgX3VwZGF0ZUVycm9yTWFwKGVycm9yTWFwKSB7XHJcbiAgICAgICAgdGhpcy5fZXJyb3JGYWN0b3J5ID0gbmV3IEVycm9yRmFjdG9yeSgnYXV0aCcsICdGaXJlYmFzZScsIGVycm9yTWFwKCkpO1xyXG4gICAgfVxyXG4gICAgb25BdXRoU3RhdGVDaGFuZ2VkKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJTdGF0ZUxpc3RlbmVyKHRoaXMuYXV0aFN0YXRlU3Vic2NyaXB0aW9uLCBuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCk7XHJcbiAgICB9XHJcbiAgICBvbklkVG9rZW5DaGFuZ2VkKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJTdGF0ZUxpc3RlbmVyKHRoaXMuaWRUb2tlblN1YnNjcmlwdGlvbiwgbmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpO1xyXG4gICAgfVxyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBhcGlLZXk6IHRoaXMuY29uZmlnLmFwaUtleSxcclxuICAgICAgICAgICAgYXV0aERvbWFpbjogdGhpcy5jb25maWcuYXV0aERvbWFpbixcclxuICAgICAgICAgICAgYXBwTmFtZTogdGhpcy5uYW1lLFxyXG4gICAgICAgICAgICBjdXJyZW50VXNlcjogKF9hID0gdGhpcy5fY3VycmVudFVzZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50b0pTT04oKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBhc3luYyBfc2V0UmVkaXJlY3RVc2VyKHVzZXIsIHBvcHVwUmVkaXJlY3RSZXNvbHZlcikge1xyXG4gICAgICAgIGNvbnN0IHJlZGlyZWN0TWFuYWdlciA9IGF3YWl0IHRoaXMuZ2V0T3JJbml0UmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIocG9wdXBSZWRpcmVjdFJlc29sdmVyKTtcclxuICAgICAgICByZXR1cm4gdXNlciA9PT0gbnVsbFxyXG4gICAgICAgICAgICA/IHJlZGlyZWN0TWFuYWdlci5yZW1vdmVDdXJyZW50VXNlcigpXHJcbiAgICAgICAgICAgIDogcmVkaXJlY3RNYW5hZ2VyLnNldEN1cnJlbnRVc2VyKHVzZXIpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2V0T3JJbml0UmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIocG9wdXBSZWRpcmVjdFJlc29sdmVyKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc29sdmVyID0gKHBvcHVwUmVkaXJlY3RSZXNvbHZlciAmJiBfZ2V0SW5zdGFuY2UocG9wdXBSZWRpcmVjdFJlc29sdmVyKSkgfHxcclxuICAgICAgICAgICAgICAgIHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlcjtcclxuICAgICAgICAgICAgX2Fzc2VydChyZXNvbHZlciwgdGhpcywgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICAgICAgdGhpcy5yZWRpcmVjdFBlcnNpc3RlbmNlTWFuYWdlciA9IGF3YWl0IFBlcnNpc3RlbmNlVXNlck1hbmFnZXIuY3JlYXRlKHRoaXMsIFtfZ2V0SW5zdGFuY2UocmVzb2x2ZXIuX3JlZGlyZWN0UGVyc2lzdGVuY2UpXSwgXCJyZWRpcmVjdFVzZXJcIiAvKiBSRURJUkVDVF9VU0VSICovKTtcclxuICAgICAgICAgICAgdGhpcy5yZWRpcmVjdFVzZXIgPVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWRpcmVjdFBlcnNpc3RlbmNlTWFuYWdlci5nZXRDdXJyZW50VXNlcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5yZWRpcmVjdFBlcnNpc3RlbmNlTWFuYWdlcjtcclxuICAgIH1cclxuICAgIGFzeW5jIF9yZWRpcmVjdFVzZXJGb3JJZChpZCkge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgLy8gTWFrZSBzdXJlIHdlJ3ZlIGNsZWFyZWQgYW55IHBlbmRpbmcgcGVyc2lzdGVuY2UgYWN0aW9ucyBpZiB3ZSdyZSBub3QgaW5cclxuICAgICAgICAvLyB0aGUgaW5pdGlhbGl6ZXJcclxuICAgICAgICBpZiAodGhpcy5faXNJbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnF1ZXVlKGFzeW5jICgpID0+IHsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgoKF9hID0gdGhpcy5fY3VycmVudFVzZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5fcmVkaXJlY3RFdmVudElkKSA9PT0gaWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRVc2VyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKChfYiA9IHRoaXMucmVkaXJlY3RVc2VyKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuX3JlZGlyZWN0RXZlbnRJZCkgPT09IGlkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlZGlyZWN0VXNlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfcGVyc2lzdFVzZXJJZkN1cnJlbnQodXNlcikge1xyXG4gICAgICAgIGlmICh1c2VyID09PSB0aGlzLmN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXVlKGFzeW5jICgpID0+IHRoaXMuZGlyZWN0bHlTZXRDdXJyZW50VXNlcih1c2VyKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIE5vdGlmaWVzIGxpc3RlbmVycyBvbmx5IGlmIHRoZSB1c2VyIGlzIGN1cnJlbnQgKi9cclxuICAgIF9ub3RpZnlMaXN0ZW5lcnNJZkN1cnJlbnQodXNlcikge1xyXG4gICAgICAgIGlmICh1c2VyID09PSB0aGlzLmN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMubm90aWZ5QXV0aExpc3RlbmVycygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9rZXkoKSB7XHJcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuY29uZmlnLmF1dGhEb21haW59OiR7dGhpcy5jb25maWcuYXBpS2V5fToke3RoaXMubmFtZX1gO1xyXG4gICAgfVxyXG4gICAgX3N0YXJ0UHJvYWN0aXZlUmVmcmVzaCgpIHtcclxuICAgICAgICB0aGlzLmlzUHJvYWN0aXZlUmVmcmVzaEVuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRVc2VyLl9zdGFydFByb2FjdGl2ZVJlZnJlc2goKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfc3RvcFByb2FjdGl2ZVJlZnJlc2goKSB7XHJcbiAgICAgICAgdGhpcy5pc1Byb2FjdGl2ZVJlZnJlc2hFbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFVzZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fY3VycmVudFVzZXIuX3N0b3BQcm9hY3RpdmVSZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIFJldHVybnMgdGhlIGN1cnJlbnQgdXNlciBjYXN0IGFzIHRoZSBpbnRlcm5hbCB0eXBlICovXHJcbiAgICBnZXQgX2N1cnJlbnRVc2VyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRVc2VyO1xyXG4gICAgfVxyXG4gICAgbm90aWZ5QXV0aExpc3RlbmVycygpIHtcclxuICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgIGlmICghdGhpcy5faXNJbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaWRUb2tlblN1YnNjcmlwdGlvbi5uZXh0KHRoaXMuY3VycmVudFVzZXIpO1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRVaWQgPSAoX2IgPSAoX2EgPSB0aGlzLmN1cnJlbnRVc2VyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudWlkKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBudWxsO1xyXG4gICAgICAgIGlmICh0aGlzLmxhc3ROb3RpZmllZFVpZCAhPT0gY3VycmVudFVpZCkge1xyXG4gICAgICAgICAgICB0aGlzLmxhc3ROb3RpZmllZFVpZCA9IGN1cnJlbnRVaWQ7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0aFN0YXRlU3Vic2NyaXB0aW9uLm5leHQodGhpcy5jdXJyZW50VXNlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmVnaXN0ZXJTdGF0ZUxpc3RlbmVyKHN1YnNjcmlwdGlvbiwgbmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpIHtcclxuICAgICAgICBpZiAodGhpcy5fZGVsZXRlZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gKCkgPT4geyB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjYiA9IHR5cGVvZiBuZXh0T3JPYnNlcnZlciA9PT0gJ2Z1bmN0aW9uJ1xyXG4gICAgICAgICAgICA/IG5leHRPck9ic2VydmVyXHJcbiAgICAgICAgICAgIDogbmV4dE9yT2JzZXJ2ZXIubmV4dC5iaW5kKG5leHRPck9ic2VydmVyKTtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5faXNJbml0aWFsaXplZFxyXG4gICAgICAgICAgICA/IFByb21pc2UucmVzb2x2ZSgpXHJcbiAgICAgICAgICAgIDogdGhpcy5faW5pdGlhbGl6YXRpb25Qcm9taXNlO1xyXG4gICAgICAgIF9hc3NlcnQocHJvbWlzZSwgdGhpcywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICAvLyBUaGUgY2FsbGJhY2sgbmVlZHMgdG8gYmUgY2FsbGVkIGFzeW5jaHJvbm91c2x5IHBlciB0aGUgc3BlYy5cclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgcHJvbWlzZS50aGVuKCgpID0+IGNiKHRoaXMuY3VycmVudFVzZXIpKTtcclxuICAgICAgICBpZiAodHlwZW9mIG5leHRPck9ic2VydmVyID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb24uYWRkT2JzZXJ2ZXIobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbi5hZGRPYnNlcnZlcihuZXh0T3JPYnNlcnZlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVbnByb3RlY3RlZCAoZnJvbSByYWNlIGNvbmRpdGlvbnMpIG1ldGhvZCB0byBzZXQgdGhlIGN1cnJlbnQgdXNlci4gVGhpc1xyXG4gICAgICogc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGZyb20gd2l0aGluIGEgcXVldWVkIGNhbGxiYWNrLiBUaGlzIGlzIG5lY2Vzc2FyeVxyXG4gICAgICogYmVjYXVzZSB0aGUgcXVldWUgc2hvdWxkbid0IHJlbHkgb24gYW5vdGhlciBxdWV1ZWQgY2FsbGJhY2suXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGRpcmVjdGx5U2V0Q3VycmVudFVzZXIodXNlcikge1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRVc2VyICYmIHRoaXMuY3VycmVudFVzZXIgIT09IHVzZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fY3VycmVudFVzZXIuX3N0b3BQcm9hY3RpdmVSZWZyZXNoKCk7XHJcbiAgICAgICAgICAgIGlmICh1c2VyICYmIHRoaXMuaXNQcm9hY3RpdmVSZWZyZXNoRW5hYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgdXNlci5fc3RhcnRQcm9hY3RpdmVSZWZyZXNoKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jdXJyZW50VXNlciA9IHVzZXI7XHJcbiAgICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hc3NlcnRlZFBlcnNpc3RlbmNlLnNldEN1cnJlbnRVc2VyKHVzZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hc3NlcnRlZFBlcnNpc3RlbmNlLnJlbW92ZUN1cnJlbnRVc2VyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcXVldWUoYWN0aW9uKSB7XHJcbiAgICAgICAgLy8gSW4gY2FzZSBzb21ldGhpbmcgZXJyb3JzLCB0aGUgY2FsbGJhY2sgc3RpbGwgc2hvdWxkIGJlIGNhbGxlZCBpbiBvcmRlclxyXG4gICAgICAgIC8vIHRvIGtlZXAgdGhlIHByb21pc2UgY2hhaW4gYWxpdmVcclxuICAgICAgICB0aGlzLm9wZXJhdGlvbnMgPSB0aGlzLm9wZXJhdGlvbnMudGhlbihhY3Rpb24sIGFjdGlvbik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3BlcmF0aW9ucztcclxuICAgIH1cclxuICAgIGdldCBhc3NlcnRlZFBlcnNpc3RlbmNlKCkge1xyXG4gICAgICAgIF9hc3NlcnQodGhpcy5wZXJzaXN0ZW5jZU1hbmFnZXIsIHRoaXMsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2VNYW5hZ2VyO1xyXG4gICAgfVxyXG4gICAgX2xvZ0ZyYW1ld29yayhmcmFtZXdvcmspIHtcclxuICAgICAgICBpZiAoIWZyYW1ld29yayB8fCB0aGlzLmZyYW1ld29ya3MuaW5jbHVkZXMoZnJhbWV3b3JrKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZnJhbWV3b3Jrcy5wdXNoKGZyYW1ld29yayk7XHJcbiAgICAgICAgLy8gU29ydCBhbHBoYWJldGljYWxseSBzbyB0aGF0IFwiRmlyZWJhc2VDb3JlLXdlYixGaXJlYmFzZVVJLXdlYlwiIGFuZFxyXG4gICAgICAgIC8vIFwiRmlyZWJhc2VVSS13ZWIsRmlyZWJhc2VDb3JlLXdlYlwiIGFyZW4ndCB2aWV3ZWQgYXMgZGlmZmVyZW50LlxyXG4gICAgICAgIHRoaXMuZnJhbWV3b3Jrcy5zb3J0KCk7XHJcbiAgICAgICAgdGhpcy5jbGllbnRWZXJzaW9uID0gX2dldENsaWVudFZlcnNpb24odGhpcy5jb25maWcuY2xpZW50UGxhdGZvcm0sIHRoaXMuX2dldEZyYW1ld29ya3MoKSk7XHJcbiAgICB9XHJcbiAgICBfZ2V0RnJhbWV3b3JrcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mcmFtZXdvcmtzO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX2dldEFkZGl0aW9uYWxIZWFkZXJzKCkge1xyXG4gICAgICAgIC8vIEFkZGl0aW9uYWwgaGVhZGVycyBvbiBldmVyeSByZXF1ZXN0XHJcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHtcclxuICAgICAgICAgICAgW1wiWC1DbGllbnQtVmVyc2lvblwiIC8qIFhfQ0xJRU5UX1ZFUlNJT04gKi9dOiB0aGlzLmNsaWVudFZlcnNpb24sXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAodGhpcy5hcHAub3B0aW9ucy5hcHBJZCkge1xyXG4gICAgICAgICAgICBoZWFkZXJzW1wiWC1GaXJlYmFzZS1nbXBpZFwiIC8qIFhfRklSRUJBU0VfR01QSUQgKi9dID0gdGhpcy5hcHAub3B0aW9ucy5hcHBJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGhlYWRlcnM7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIE1ldGhvZCB0byBiZSB1c2VkIHRvIGNhc3QgZG93biB0byBvdXIgcHJpdmF0ZSBpbXBsbWVudGF0aW9uIG9mIEF1dGguXHJcbiAqIEl0IHdpbGwgYWxzbyBoYW5kbGUgdW53cmFwcGluZyBmcm9tIHRoZSBjb21wYXQgdHlwZSBpZiBuZWNlc3NhcnlcclxuICpcclxuICogQHBhcmFtIGF1dGggQXV0aCBvYmplY3QgcGFzc2VkIGluIGZyb20gZGV2ZWxvcGVyXHJcbiAqL1xyXG5mdW5jdGlvbiBfY2FzdEF1dGgoYXV0aCkge1xyXG4gICAgcmV0dXJuIGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKTtcclxufVxyXG4vKiogSGVscGVyIGNsYXNzIHRvIHdyYXAgc3Vic2NyaWJlciBsb2dpYyAqL1xyXG5jbGFzcyBTdWJzY3JpcHRpb24ge1xyXG4gICAgY29uc3RydWN0b3IoYXV0aCkge1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGg7XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5hZGRPYnNlcnZlciA9IGNyZWF0ZVN1YnNjcmliZShvYnNlcnZlciA9PiAodGhpcy5vYnNlcnZlciA9IG9ic2VydmVyKSk7XHJcbiAgICB9XHJcbiAgICBnZXQgbmV4dCgpIHtcclxuICAgICAgICBfYXNzZXJ0KHRoaXMub2JzZXJ2ZXIsIHRoaXMuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5vYnNlcnZlci5uZXh0LmJpbmQodGhpcy5vYnNlcnZlcik7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIENoYW5nZXMgdGhlIHtAbGluayBBdXRofSBpbnN0YW5jZSB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSBGaXJlYmFzZSBBdXRoIEVtdWxhdG9yLCBpbnN0ZWFkIG9mIHByb2R1Y3Rpb25cclxuICogRmlyZWJhc2UgQXV0aCBzZXJ2aWNlcy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhpcyBtdXN0IGJlIGNhbGxlZCBzeW5jaHJvbm91c2x5IGltbWVkaWF0ZWx5IGZvbGxvd2luZyB0aGUgZmlyc3QgY2FsbCB0b1xyXG4gKiB7QGxpbmsgaW5pdGlhbGl6ZUF1dGh9LiAgRG8gbm90IHVzZSB3aXRoIHByb2R1Y3Rpb24gY3JlZGVudGlhbHMgYXMgZW11bGF0b3JcclxuICogdHJhZmZpYyBpcyBub3QgZW5jcnlwdGVkLlxyXG4gKlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIGNvbm5lY3RBdXRoRW11bGF0b3IoYXV0aCwgJ2h0dHA6Ly8xMjcuMC4wLjE6OTA5OScsIHsgZGlzYWJsZVdhcm5pbmdzOiB0cnVlIH0pO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gdXJsIC0gVGhlIFVSTCBhdCB3aGljaCB0aGUgZW11bGF0b3IgaXMgcnVubmluZyAoZWcsICdodHRwOi8vbG9jYWxob3N0OjkwOTknKS5cclxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbC4gYG9wdGlvbnMuZGlzYWJsZVdhcm5pbmdzYCBkZWZhdWx0cyB0byBgZmFsc2VgLiBTZXQgaXQgdG9cclxuICogYHRydWVgIHRvIGRpc2FibGUgdGhlIHdhcm5pbmcgYmFubmVyIGF0dGFjaGVkIHRvIHRoZSBET00uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGNvbm5lY3RBdXRoRW11bGF0b3IoYXV0aCwgdXJsLCBvcHRpb25zKSB7XHJcbiAgICBjb25zdCBhdXRoSW50ZXJuYWwgPSBfY2FzdEF1dGgoYXV0aCk7XHJcbiAgICBfYXNzZXJ0KGF1dGhJbnRlcm5hbC5fY2FuSW5pdEVtdWxhdG9yLCBhdXRoSW50ZXJuYWwsIFwiZW11bGF0b3ItY29uZmlnLWZhaWxlZFwiIC8qIEVNVUxBVE9SX0NPTkZJR19GQUlMRUQgKi8pO1xyXG4gICAgX2Fzc2VydCgvXmh0dHBzPzpcXC9cXC8vLnRlc3QodXJsKSwgYXV0aEludGVybmFsLCBcImludmFsaWQtZW11bGF0b3Itc2NoZW1lXCIgLyogSU5WQUxJRF9FTVVMQVRPUl9TQ0hFTUUgKi8pO1xyXG4gICAgY29uc3QgZGlzYWJsZVdhcm5pbmdzID0gISEob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmRpc2FibGVXYXJuaW5ncyk7XHJcbiAgICBjb25zdCBwcm90b2NvbCA9IGV4dHJhY3RQcm90b2NvbCh1cmwpO1xyXG4gICAgY29uc3QgeyBob3N0LCBwb3J0IH0gPSBleHRyYWN0SG9zdEFuZFBvcnQodXJsKTtcclxuICAgIGNvbnN0IHBvcnRTdHIgPSBwb3J0ID09PSBudWxsID8gJycgOiBgOiR7cG9ydH1gO1xyXG4gICAgLy8gQWx3YXlzIHJlcGxhY2UgcGF0aCB3aXRoIFwiL1wiIChldmVuIGlmIGlucHV0IHVybCBoYWQgbm8gcGF0aCBhdCBhbGwsIG9yIGhhZCBhIGRpZmZlcmVudCBvbmUpLlxyXG4gICAgYXV0aEludGVybmFsLmNvbmZpZy5lbXVsYXRvciA9IHsgdXJsOiBgJHtwcm90b2NvbH0vLyR7aG9zdH0ke3BvcnRTdHJ9L2AgfTtcclxuICAgIGF1dGhJbnRlcm5hbC5zZXR0aW5ncy5hcHBWZXJpZmljYXRpb25EaXNhYmxlZEZvclRlc3RpbmcgPSB0cnVlO1xyXG4gICAgYXV0aEludGVybmFsLmVtdWxhdG9yQ29uZmlnID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgaG9zdCxcclxuICAgICAgICBwb3J0LFxyXG4gICAgICAgIHByb3RvY29sOiBwcm90b2NvbC5yZXBsYWNlKCc6JywgJycpLFxyXG4gICAgICAgIG9wdGlvbnM6IE9iamVjdC5mcmVlemUoeyBkaXNhYmxlV2FybmluZ3MgfSlcclxuICAgIH0pO1xyXG4gICAgaWYgKCFkaXNhYmxlV2FybmluZ3MpIHtcclxuICAgICAgICBlbWl0RW11bGF0b3JXYXJuaW5nKCk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZXh0cmFjdFByb3RvY29sKHVybCkge1xyXG4gICAgY29uc3QgcHJvdG9jb2xFbmQgPSB1cmwuaW5kZXhPZignOicpO1xyXG4gICAgcmV0dXJuIHByb3RvY29sRW5kIDwgMCA/ICcnIDogdXJsLnN1YnN0cigwLCBwcm90b2NvbEVuZCArIDEpO1xyXG59XHJcbmZ1bmN0aW9uIGV4dHJhY3RIb3N0QW5kUG9ydCh1cmwpIHtcclxuICAgIGNvbnN0IHByb3RvY29sID0gZXh0cmFjdFByb3RvY29sKHVybCk7XHJcbiAgICBjb25zdCBhdXRob3JpdHkgPSAvKFxcL1xcLyk/KFtePyMvXSspLy5leGVjKHVybC5zdWJzdHIocHJvdG9jb2wubGVuZ3RoKSk7IC8vIEJldHdlZW4gLy8gYW5kIC8sID8gb3IgIy5cclxuICAgIGlmICghYXV0aG9yaXR5KSB7XHJcbiAgICAgICAgcmV0dXJuIHsgaG9zdDogJycsIHBvcnQ6IG51bGwgfTtcclxuICAgIH1cclxuICAgIGNvbnN0IGhvc3RBbmRQb3J0ID0gYXV0aG9yaXR5WzJdLnNwbGl0KCdAJykucG9wKCkgfHwgJyc7IC8vIFN0cmlwIG91dCBcInVzZXJuYW1lOnBhc3N3b3JkQFwiLlxyXG4gICAgY29uc3QgYnJhY2tldGVkSVB2NiA9IC9eKFxcW1teXFxdXStcXF0pKDp8JCkvLmV4ZWMoaG9zdEFuZFBvcnQpO1xyXG4gICAgaWYgKGJyYWNrZXRlZElQdjYpIHtcclxuICAgICAgICBjb25zdCBob3N0ID0gYnJhY2tldGVkSVB2NlsxXTtcclxuICAgICAgICByZXR1cm4geyBob3N0LCBwb3J0OiBwYXJzZVBvcnQoaG9zdEFuZFBvcnQuc3Vic3RyKGhvc3QubGVuZ3RoICsgMSkpIH07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBjb25zdCBbaG9zdCwgcG9ydF0gPSBob3N0QW5kUG9ydC5zcGxpdCgnOicpO1xyXG4gICAgICAgIHJldHVybiB7IGhvc3QsIHBvcnQ6IHBhcnNlUG9ydChwb3J0KSB9O1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHBhcnNlUG9ydChwb3J0U3RyKSB7XHJcbiAgICBpZiAoIXBvcnRTdHIpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGNvbnN0IHBvcnQgPSBOdW1iZXIocG9ydFN0cik7XHJcbiAgICBpZiAoaXNOYU4ocG9ydCkpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHJldHVybiBwb3J0O1xyXG59XHJcbmZ1bmN0aW9uIGVtaXRFbXVsYXRvcldhcm5pbmcoKSB7XHJcbiAgICBmdW5jdGlvbiBhdHRhY2hCYW5uZXIoKSB7XHJcbiAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgICAgICAgY29uc3Qgc3R5ID0gZWwuc3R5bGU7XHJcbiAgICAgICAgZWwuaW5uZXJUZXh0ID1cclxuICAgICAgICAgICAgJ1J1bm5pbmcgaW4gZW11bGF0b3IgbW9kZS4gRG8gbm90IHVzZSB3aXRoIHByb2R1Y3Rpb24gY3JlZGVudGlhbHMuJztcclxuICAgICAgICBzdHkucG9zaXRpb24gPSAnZml4ZWQnO1xyXG4gICAgICAgIHN0eS53aWR0aCA9ICcxMDAlJztcclxuICAgICAgICBzdHkuYmFja2dyb3VuZENvbG9yID0gJyNmZmZmZmYnO1xyXG4gICAgICAgIHN0eS5ib3JkZXIgPSAnLjFlbSBzb2xpZCAjMDAwMDAwJztcclxuICAgICAgICBzdHkuY29sb3IgPSAnI2I1MDAwMCc7XHJcbiAgICAgICAgc3R5LmJvdHRvbSA9ICcwcHgnO1xyXG4gICAgICAgIHN0eS5sZWZ0ID0gJzBweCc7XHJcbiAgICAgICAgc3R5Lm1hcmdpbiA9ICcwcHgnO1xyXG4gICAgICAgIHN0eS56SW5kZXggPSAnMTAwMDAnO1xyXG4gICAgICAgIHN0eS50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdmaXJlYmFzZS1lbXVsYXRvci13YXJuaW5nJyk7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbCk7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBjb25zb2xlLmluZm8gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICBjb25zb2xlLmluZm8oJ1dBUk5JTkc6IFlvdSBhcmUgdXNpbmcgdGhlIEF1dGggRW11bGF0b3IsJyArXHJcbiAgICAgICAgICAgICcgd2hpY2ggaXMgaW50ZW5kZWQgZm9yIGxvY2FsIHRlc3Rpbmcgb25seS4gIERvIG5vdCB1c2Ugd2l0aCcgK1xyXG4gICAgICAgICAgICAnIHByb2R1Y3Rpb24gY3JlZGVudGlhbHMuJyk7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdsb2FkaW5nJykge1xyXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGF0dGFjaEJhbm5lcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBhdHRhY2hCYW5uZXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEludGVyZmFjZSB0aGF0IHJlcHJlc2VudHMgdGhlIGNyZWRlbnRpYWxzIHJldHVybmVkIGJ5IGFuIHtAbGluayBBdXRoUHJvdmlkZXJ9LlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJbXBsZW1lbnRhdGlvbnMgc3BlY2lmeSB0aGUgZGV0YWlscyBhYm91dCBlYWNoIGF1dGggcHJvdmlkZXIncyBjcmVkZW50aWFsIHJlcXVpcmVtZW50cy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgQXV0aENyZWRlbnRpYWwge1xyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBhdXRoZW50aWNhdGlvbiBwcm92aWRlciBJRCBmb3IgdGhlIGNyZWRlbnRpYWwuXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIEZvciBleGFtcGxlLCAnZmFjZWJvb2suY29tJywgb3IgJ2dvb2dsZS5jb20nLlxyXG4gICAgICovXHJcbiAgICBwcm92aWRlcklkLCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGF1dGhlbnRpY2F0aW9uIHNpZ24gaW4gbWV0aG9kIGZvciB0aGUgY3JlZGVudGlhbC5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogRm9yIGV4YW1wbGUsIHtAbGluayBTaWduSW5NZXRob2R9LkVNQUlMX1BBU1NXT1JELCBvclxyXG4gICAgICoge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRU1BSUxfTElOSy4gVGhpcyBjb3JyZXNwb25kcyB0byB0aGUgc2lnbi1pbiBtZXRob2RcclxuICAgICAqIGlkZW50aWZpZXIgYXMgcmV0dXJuZWQgaW4ge0BsaW5rIGZldGNoU2lnbkluTWV0aG9kc0ZvckVtYWlsfS5cclxuICAgICAqL1xyXG4gICAgc2lnbkluTWV0aG9kKSB7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlcklkID0gcHJvdmlkZXJJZDtcclxuICAgICAgICB0aGlzLnNpZ25Jbk1ldGhvZCA9IHNpZ25Jbk1ldGhvZDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgb2JqZWN0LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIGEgSlNPTi1zZXJpYWxpemFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBvYmplY3QuXHJcbiAgICAgKi9cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4gZGVidWdGYWlsKCdub3QgaW1wbGVtZW50ZWQnKTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9nZXRJZFRva2VuUmVzcG9uc2UoX2F1dGgpIHtcclxuICAgICAgICByZXR1cm4gZGVidWdGYWlsKCdub3QgaW1wbGVtZW50ZWQnKTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9saW5rVG9JZFRva2VuKF9hdXRoLCBfaWRUb2tlbikge1xyXG4gICAgICAgIHJldHVybiBkZWJ1Z0ZhaWwoJ25vdCBpbXBsZW1lbnRlZCcpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2dldFJlYXV0aGVudGljYXRpb25SZXNvbHZlcihfYXV0aCkge1xyXG4gICAgICAgIHJldHVybiBkZWJ1Z0ZhaWwoJ25vdCBpbXBsZW1lbnRlZCcpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlc2V0UGFzc3dvcmQoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpyZXNldFBhc3N3b3JkXCIgLyogUkVTRVRfUEFTU1dPUkQgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlRW1haWxQYXNzd29yZChhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnVwZGF0ZVwiIC8qIFNFVF9BQ0NPVU5UX0lORk8gKi8sIHJlcXVlc3QpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIGFwcGx5QWN0aW9uQ29kZSQxKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6dXBkYXRlXCIgLyogU0VUX0FDQ09VTlRfSU5GTyAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoUGFzc3dvcmQoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpzaWduSW5XaXRoUGFzc3dvcmRcIiAvKiBTSUdOX0lOX1dJVEhfUEFTU1dPUkQgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gc2VuZE9vYkNvZGUoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpzZW5kT29iQ29kZVwiIC8qIFNFTkRfT09CX0NPREUgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gc2VuZEVtYWlsVmVyaWZpY2F0aW9uJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIHNlbmRPb2JDb2RlKGF1dGgsIHJlcXVlc3QpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHNlbmRQYXNzd29yZFJlc2V0RW1haWwkMShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gc2VuZE9vYkNvZGUoYXV0aCwgcmVxdWVzdCk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gc2VuZFNpZ25JbkxpbmtUb0VtYWlsJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIHNlbmRPb2JDb2RlKGF1dGgsIHJlcXVlc3QpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHZlcmlmeUFuZENoYW5nZUVtYWlsKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBzZW5kT29iQ29kZShhdXRoLCByZXF1ZXN0KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoRW1haWxMaW5rJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpzaWduSW5XaXRoRW1haWxMaW5rXCIgLyogU0lHTl9JTl9XSVRIX0VNQUlMX0xJTksgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aEVtYWlsTGlua0ZvckxpbmtpbmcoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpzaWduSW5XaXRoRW1haWxMaW5rXCIgLyogU0lHTl9JTl9XSVRIX0VNQUlMX0xJTksgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEludGVyZmFjZSB0aGF0IHJlcHJlc2VudHMgdGhlIGNyZWRlbnRpYWxzIHJldHVybmVkIGJ5IHtAbGluayBFbWFpbEF1dGhQcm92aWRlcn0gZm9yXHJcbiAqIHtAbGluayBQcm92aWRlcklkfS5QQVNTV09SRFxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBDb3ZlcnMgYm90aCB7QGxpbmsgU2lnbkluTWV0aG9kfS5FTUFJTF9QQVNTV09SRCBhbmRcclxuICoge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRU1BSUxfTElOSy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgRW1haWxBdXRoQ3JlZGVudGlhbCBleHRlbmRzIEF1dGhDcmVkZW50aWFsIHtcclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2VtYWlsLCBcclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9wYXNzd29yZCwgc2lnbkluTWV0aG9kLCBcclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF90ZW5hbnRJZCA9IG51bGwpIHtcclxuICAgICAgICBzdXBlcihcInBhc3N3b3JkXCIgLyogUEFTU1dPUkQgKi8sIHNpZ25Jbk1ldGhvZCk7XHJcbiAgICAgICAgdGhpcy5fZW1haWwgPSBfZW1haWw7XHJcbiAgICAgICAgdGhpcy5fcGFzc3dvcmQgPSBfcGFzc3dvcmQ7XHJcbiAgICAgICAgdGhpcy5fdGVuYW50SWQgPSBfdGVuYW50SWQ7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBzdGF0aWMgX2Zyb21FbWFpbEFuZFBhc3N3b3JkKGVtYWlsLCBwYXNzd29yZCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRW1haWxBdXRoQ3JlZGVudGlhbChlbWFpbCwgcGFzc3dvcmQsIFwicGFzc3dvcmRcIiAvKiBFTUFJTF9QQVNTV09SRCAqLyk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBzdGF0aWMgX2Zyb21FbWFpbEFuZENvZGUoZW1haWwsIG9vYkNvZGUsIHRlbmFudElkID0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRW1haWxBdXRoQ3JlZGVudGlhbChlbWFpbCwgb29iQ29kZSwgXCJlbWFpbExpbmtcIiAvKiBFTUFJTF9MSU5LICovLCB0ZW5hbnRJZCk7XHJcbiAgICB9XHJcbiAgICAvKioge0Bpbmhlcml0ZG9jIEF1dGhDcmVkZW50aWFsLnRvSlNPTn0gKi9cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBlbWFpbDogdGhpcy5fZW1haWwsXHJcbiAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLl9wYXNzd29yZCxcclxuICAgICAgICAgICAgc2lnbkluTWV0aG9kOiB0aGlzLnNpZ25Jbk1ldGhvZCxcclxuICAgICAgICAgICAgdGVuYW50SWQ6IHRoaXMuX3RlbmFudElkXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU3RhdGljIG1ldGhvZCB0byBkZXNlcmlhbGl6ZSBhIEpTT04gcmVwcmVzZW50YXRpb24gb2YgYW4gb2JqZWN0IGludG8gYW4ge0BsaW5rICBBdXRoQ3JlZGVudGlhbH0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGpzb24gLSBFaXRoZXIgYG9iamVjdGAgb3IgdGhlIHN0cmluZ2lmaWVkIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBvYmplY3QuIFdoZW4gc3RyaW5nIGlzXHJcbiAgICAgKiBwcm92aWRlZCwgYEpTT04ucGFyc2VgIHdvdWxkIGJlIGNhbGxlZCBmaXJzdC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBJZiB0aGUgSlNPTiBpbnB1dCBkb2VzIG5vdCByZXByZXNlbnQgYW4ge0BsaW5rIEF1dGhDcmVkZW50aWFsfSwgbnVsbCBpcyByZXR1cm5lZC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcclxuICAgICAgICBjb25zdCBvYmogPSB0eXBlb2YganNvbiA9PT0gJ3N0cmluZycgPyBKU09OLnBhcnNlKGpzb24pIDoganNvbjtcclxuICAgICAgICBpZiAoKG9iaiA9PT0gbnVsbCB8fCBvYmogPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iai5lbWFpbCkgJiYgKG9iaiA9PT0gbnVsbCB8fCBvYmogPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iai5wYXNzd29yZCkpIHtcclxuICAgICAgICAgICAgaWYgKG9iai5zaWduSW5NZXRob2QgPT09IFwicGFzc3dvcmRcIiAvKiBFTUFJTF9QQVNTV09SRCAqLykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Zyb21FbWFpbEFuZFBhc3N3b3JkKG9iai5lbWFpbCwgb2JqLnBhc3N3b3JkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChvYmouc2lnbkluTWV0aG9kID09PSBcImVtYWlsTGlua1wiIC8qIEVNQUlMX0xJTksgKi8pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9mcm9tRW1haWxBbmRDb2RlKG9iai5lbWFpbCwgb2JqLnBhc3N3b3JkLCBvYmoudGVuYW50SWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgYXN5bmMgX2dldElkVG9rZW5SZXNwb25zZShhdXRoKSB7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnNpZ25Jbk1ldGhvZCkge1xyXG4gICAgICAgICAgICBjYXNlIFwicGFzc3dvcmRcIiAvKiBFTUFJTF9QQVNTV09SRCAqLzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBzaWduSW5XaXRoUGFzc3dvcmQoYXV0aCwge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLl9lbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogdGhpcy5fcGFzc3dvcmRcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjYXNlIFwiZW1haWxMaW5rXCIgLyogRU1BSUxfTElOSyAqLzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBzaWduSW5XaXRoRW1haWxMaW5rJDEoYXV0aCwge1xyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLl9lbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICBvb2JDb2RlOiB0aGlzLl9wYXNzd29yZFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBfZmFpbChhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIGFzeW5jIF9saW5rVG9JZFRva2VuKGF1dGgsIGlkVG9rZW4pIHtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMuc2lnbkluTWV0aG9kKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJwYXNzd29yZFwiIC8qIEVNQUlMX1BBU1NXT1JEICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZUVtYWlsUGFzc3dvcmQoYXV0aCwge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuX2VtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLl9wYXNzd29yZFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNhc2UgXCJlbWFpbExpbmtcIiAvKiBFTUFJTF9MSU5LICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhFbWFpbExpbmtGb3JMaW5raW5nKGF1dGgsIHtcclxuICAgICAgICAgICAgICAgICAgICBpZFRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLl9lbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICBvb2JDb2RlOiB0aGlzLl9wYXNzd29yZFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBfZmFpbChhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9nZXRSZWF1dGhlbnRpY2F0aW9uUmVzb2x2ZXIoYXV0aCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRJZFRva2VuUmVzcG9uc2UoYXV0aCk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aElkcChhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25JbldpdGhJZHBcIiAvKiBTSUdOX0lOX1dJVEhfSURQICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IElEUF9SRVFVRVNUX1VSSSQxID0gJ2h0dHA6Ly9sb2NhbGhvc3QnO1xyXG4vKipcclxuICogUmVwcmVzZW50cyB0aGUgT0F1dGggY3JlZGVudGlhbHMgcmV0dXJuZWQgYnkgYW4ge0BsaW5rIE9BdXRoUHJvdmlkZXJ9LlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJbXBsZW1lbnRhdGlvbnMgc3BlY2lmeSB0aGUgZGV0YWlscyBhYm91dCBlYWNoIGF1dGggcHJvdmlkZXIncyBjcmVkZW50aWFsIHJlcXVpcmVtZW50cy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgT0F1dGhDcmVkZW50aWFsIGV4dGVuZHMgQXV0aENyZWRlbnRpYWwge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdUb2tlbiA9IG51bGw7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBzdGF0aWMgX2Zyb21QYXJhbXMocGFyYW1zKSB7XHJcbiAgICAgICAgY29uc3QgY3JlZCA9IG5ldyBPQXV0aENyZWRlbnRpYWwocGFyYW1zLnByb3ZpZGVySWQsIHBhcmFtcy5zaWduSW5NZXRob2QpO1xyXG4gICAgICAgIGlmIChwYXJhbXMuaWRUb2tlbiB8fCBwYXJhbXMuYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgLy8gT0F1dGggMiBhbmQgZWl0aGVyIElEIHRva2VuIG9yIGFjY2VzcyB0b2tlbi5cclxuICAgICAgICAgICAgaWYgKHBhcmFtcy5pZFRva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBjcmVkLmlkVG9rZW4gPSBwYXJhbXMuaWRUb2tlbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocGFyYW1zLmFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBjcmVkLmFjY2Vzc1Rva2VuID0gcGFyYW1zLmFjY2Vzc1Rva2VuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIEFkZCBub25jZSBpZiBhdmFpbGFibGUgYW5kIG5vIHBlbmRpbmdUb2tlbiBpcyBwcmVzZW50LlxyXG4gICAgICAgICAgICBpZiAocGFyYW1zLm5vbmNlICYmICFwYXJhbXMucGVuZGluZ1Rva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBjcmVkLm5vbmNlID0gcGFyYW1zLm5vbmNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChwYXJhbXMucGVuZGluZ1Rva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBjcmVkLnBlbmRpbmdUb2tlbiA9IHBhcmFtcy5wZW5kaW5nVG9rZW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAocGFyYW1zLm9hdXRoVG9rZW4gJiYgcGFyYW1zLm9hdXRoVG9rZW5TZWNyZXQpIHtcclxuICAgICAgICAgICAgLy8gT0F1dGggMSBhbmQgT0F1dGggdG9rZW4gd2l0aCB0b2tlbiBzZWNyZXRcclxuICAgICAgICAgICAgY3JlZC5hY2Nlc3NUb2tlbiA9IHBhcmFtcy5vYXV0aFRva2VuO1xyXG4gICAgICAgICAgICBjcmVkLnNlY3JldCA9IHBhcmFtcy5vYXV0aFRva2VuU2VjcmV0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgX2ZhaWwoXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNyZWQ7XHJcbiAgICB9XHJcbiAgICAvKioge0Bpbmhlcml0ZG9jIEF1dGhDcmVkZW50aWFsLnRvSlNPTn0gICovXHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaWRUb2tlbjogdGhpcy5pZFRva2VuLFxyXG4gICAgICAgICAgICBhY2Nlc3NUb2tlbjogdGhpcy5hY2Nlc3NUb2tlbixcclxuICAgICAgICAgICAgc2VjcmV0OiB0aGlzLnNlY3JldCxcclxuICAgICAgICAgICAgbm9uY2U6IHRoaXMubm9uY2UsXHJcbiAgICAgICAgICAgIHBlbmRpbmdUb2tlbjogdGhpcy5wZW5kaW5nVG9rZW4sXHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQ6IHRoaXMucHJvdmlkZXJJZCxcclxuICAgICAgICAgICAgc2lnbkluTWV0aG9kOiB0aGlzLnNpZ25Jbk1ldGhvZFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN0YXRpYyBtZXRob2QgdG8gZGVzZXJpYWxpemUgYSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIGFuIG9iamVjdCBpbnRvIGFuXHJcbiAgICAgKiB7QGxpbmsgIEF1dGhDcmVkZW50aWFsfS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ganNvbiAtIElucHV0IGNhbiBiZSBlaXRoZXIgT2JqZWN0IG9yIHRoZSBzdHJpbmdpZmllZCByZXByZXNlbnRhdGlvbiBvZiB0aGUgb2JqZWN0LlxyXG4gICAgICogV2hlbiBzdHJpbmcgaXMgcHJvdmlkZWQsIEpTT04ucGFyc2Ugd291bGQgYmUgY2FsbGVkIGZpcnN0LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIElmIHRoZSBKU09OIGlucHV0IGRvZXMgbm90IHJlcHJlc2VudCBhbiB7QGxpbmsgIEF1dGhDcmVkZW50aWFsfSwgbnVsbCBpcyByZXR1cm5lZC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcclxuICAgICAgICBjb25zdCBvYmogPSB0eXBlb2YganNvbiA9PT0gJ3N0cmluZycgPyBKU09OLnBhcnNlKGpzb24pIDoganNvbjtcclxuICAgICAgICBjb25zdCB7IHByb3ZpZGVySWQsIHNpZ25Jbk1ldGhvZCB9ID0gb2JqLCByZXN0ID0gX19yZXN0KG9iaiwgW1wicHJvdmlkZXJJZFwiLCBcInNpZ25Jbk1ldGhvZFwiXSk7XHJcbiAgICAgICAgaWYgKCFwcm92aWRlcklkIHx8ICFzaWduSW5NZXRob2QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNyZWQgPSBuZXcgT0F1dGhDcmVkZW50aWFsKHByb3ZpZGVySWQsIHNpZ25Jbk1ldGhvZCk7XHJcbiAgICAgICAgY3JlZC5pZFRva2VuID0gcmVzdC5pZFRva2VuIHx8IHVuZGVmaW5lZDtcclxuICAgICAgICBjcmVkLmFjY2Vzc1Rva2VuID0gcmVzdC5hY2Nlc3NUb2tlbiB8fCB1bmRlZmluZWQ7XHJcbiAgICAgICAgY3JlZC5zZWNyZXQgPSByZXN0LnNlY3JldDtcclxuICAgICAgICBjcmVkLm5vbmNlID0gcmVzdC5ub25jZTtcclxuICAgICAgICBjcmVkLnBlbmRpbmdUb2tlbiA9IHJlc3QucGVuZGluZ1Rva2VuIHx8IG51bGw7XHJcbiAgICAgICAgcmV0dXJuIGNyZWQ7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZ2V0SWRUb2tlblJlc3BvbnNlKGF1dGgpIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5idWlsZFJlcXVlc3QoKTtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aElkcChhdXRoLCByZXF1ZXN0KTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9saW5rVG9JZFRva2VuKGF1dGgsIGlkVG9rZW4pIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5idWlsZFJlcXVlc3QoKTtcclxuICAgICAgICByZXF1ZXN0LmlkVG9rZW4gPSBpZFRva2VuO1xyXG4gICAgICAgIHJldHVybiBzaWduSW5XaXRoSWRwKGF1dGgsIHJlcXVlc3QpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2dldFJlYXV0aGVudGljYXRpb25SZXNvbHZlcihhdXRoKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuYnVpbGRSZXF1ZXN0KCk7XHJcbiAgICAgICAgcmVxdWVzdC5hdXRvQ3JlYXRlID0gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhJZHAoYXV0aCwgcmVxdWVzdCk7XHJcbiAgICB9XHJcbiAgICBidWlsZFJlcXVlc3QoKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICAgICAgcmVxdWVzdFVyaTogSURQX1JFUVVFU1RfVVJJJDEsXHJcbiAgICAgICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAodGhpcy5wZW5kaW5nVG9rZW4pIHtcclxuICAgICAgICAgICAgcmVxdWVzdC5wZW5kaW5nVG9rZW4gPSB0aGlzLnBlbmRpbmdUb2tlbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBvc3RCb2R5ID0ge307XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlkVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIHBvc3RCb2R5WydpZF90b2tlbiddID0gdGhpcy5pZFRva2VuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBwb3N0Qm9keVsnYWNjZXNzX3Rva2VuJ10gPSB0aGlzLmFjY2Vzc1Rva2VuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlY3JldCkge1xyXG4gICAgICAgICAgICAgICAgcG9zdEJvZHlbJ29hdXRoX3Rva2VuX3NlY3JldCddID0gdGhpcy5zZWNyZXQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcG9zdEJvZHlbJ3Byb3ZpZGVySWQnXSA9IHRoaXMucHJvdmlkZXJJZDtcclxuICAgICAgICAgICAgaWYgKHRoaXMubm9uY2UgJiYgIXRoaXMucGVuZGluZ1Rva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBwb3N0Qm9keVsnbm9uY2UnXSA9IHRoaXMubm9uY2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVxdWVzdC5wb3N0Qm9keSA9IHF1ZXJ5c3RyaW5nKHBvc3RCb2R5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2VuZFBob25lVmVyaWZpY2F0aW9uQ29kZShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNlbmRWZXJpZmljYXRpb25Db2RlXCIgLyogU0VORF9WRVJJRklDQVRJT05fQ09ERSAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoUGhvbmVOdW1iZXIkMShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25JbldpdGhQaG9uZU51bWJlclwiIC8qIFNJR05fSU5fV0lUSF9QSE9ORV9OVU1CRVIgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gbGlua1dpdGhQaG9uZU51bWJlciQxKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25JbldpdGhQaG9uZU51bWJlclwiIC8qIFNJR05fSU5fV0lUSF9QSE9ORV9OVU1CRVIgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbiAgICBpZiAocmVzcG9uc2UudGVtcG9yYXJ5UHJvb2YpIHtcclxuICAgICAgICB0aHJvdyBfbWFrZVRhZ2dlZEVycm9yKGF1dGgsIFwiYWNjb3VudC1leGlzdHMtd2l0aC1kaWZmZXJlbnQtY3JlZGVudGlhbFwiIC8qIE5FRURfQ09ORklSTUFUSU9OICovLCByZXNwb25zZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzcG9uc2U7XHJcbn1cclxuY29uc3QgVkVSSUZZX1BIT05FX05VTUJFUl9GT1JfRVhJU1RJTkdfRVJST1JfTUFQXyA9IHtcclxuICAgIFtcIlVTRVJfTk9UX0ZPVU5EXCIgLyogVVNFUl9OT1RfRk9VTkQgKi9dOiBcInVzZXItbm90LWZvdW5kXCIgLyogVVNFUl9ERUxFVEVEICovXHJcbn07XHJcbmFzeW5jIGZ1bmN0aW9uIHZlcmlmeVBob25lTnVtYmVyRm9yRXhpc3RpbmcoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgY29uc3QgYXBpUmVxdWVzdCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVxdWVzdCksIHsgb3BlcmF0aW9uOiAnUkVBVVRIJyB9KTtcclxuICAgIHJldHVybiBfcGVyZm9ybVNpZ25JblJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6c2lnbkluV2l0aFBob25lTnVtYmVyXCIgLyogU0lHTl9JTl9XSVRIX1BIT05FX05VTUJFUiAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIGFwaVJlcXVlc3QpLCBWRVJJRllfUEhPTkVfTlVNQkVSX0ZPUl9FWElTVElOR19FUlJPUl9NQVBfKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmVwcmVzZW50cyB0aGUgY3JlZGVudGlhbHMgcmV0dXJuZWQgYnkge0BsaW5rIFBob25lQXV0aFByb3ZpZGVyfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgUGhvbmVBdXRoQ3JlZGVudGlhbCBleHRlbmRzIEF1dGhDcmVkZW50aWFsIHtcclxuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xyXG4gICAgICAgIHN1cGVyKFwicGhvbmVcIiAvKiBQSE9ORSAqLywgXCJwaG9uZVwiIC8qIFBIT05FICovKTtcclxuICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIHN0YXRpYyBfZnJvbVZlcmlmaWNhdGlvbih2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUGhvbmVBdXRoQ3JlZGVudGlhbCh7IHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgc3RhdGljIF9mcm9tVG9rZW5SZXNwb25zZShwaG9uZU51bWJlciwgdGVtcG9yYXJ5UHJvb2YpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFBob25lQXV0aENyZWRlbnRpYWwoeyBwaG9uZU51bWJlciwgdGVtcG9yYXJ5UHJvb2YgfSk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZ2V0SWRUb2tlblJlc3BvbnNlKGF1dGgpIHtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aFBob25lTnVtYmVyJDEoYXV0aCwgdGhpcy5fbWFrZVZlcmlmaWNhdGlvblJlcXVlc3QoKSk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfbGlua1RvSWRUb2tlbihhdXRoLCBpZFRva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIGxpbmtXaXRoUGhvbmVOdW1iZXIkMShhdXRoLCBPYmplY3QuYXNzaWduKHsgaWRUb2tlbiB9LCB0aGlzLl9tYWtlVmVyaWZpY2F0aW9uUmVxdWVzdCgpKSk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZ2V0UmVhdXRoZW50aWNhdGlvblJlc29sdmVyKGF1dGgpIHtcclxuICAgICAgICByZXR1cm4gdmVyaWZ5UGhvbmVOdW1iZXJGb3JFeGlzdGluZyhhdXRoLCB0aGlzLl9tYWtlVmVyaWZpY2F0aW9uUmVxdWVzdCgpKTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9tYWtlVmVyaWZpY2F0aW9uUmVxdWVzdCgpIHtcclxuICAgICAgICBjb25zdCB7IHRlbXBvcmFyeVByb29mLCBwaG9uZU51bWJlciwgdmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUgfSA9IHRoaXMucGFyYW1zO1xyXG4gICAgICAgIGlmICh0ZW1wb3JhcnlQcm9vZiAmJiBwaG9uZU51bWJlcikge1xyXG4gICAgICAgICAgICByZXR1cm4geyB0ZW1wb3JhcnlQcm9vZiwgcGhvbmVOdW1iZXIgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2Vzc2lvbkluZm86IHZlcmlmaWNhdGlvbklkLFxyXG4gICAgICAgICAgICBjb2RlOiB2ZXJpZmljYXRpb25Db2RlXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKiB7QGluaGVyaXRkb2MgQXV0aENyZWRlbnRpYWwudG9KU09OfSAqL1xyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIGNvbnN0IG9iaiA9IHtcclxuICAgICAgICAgICAgcHJvdmlkZXJJZDogdGhpcy5wcm92aWRlcklkXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAodGhpcy5wYXJhbXMucGhvbmVOdW1iZXIpIHtcclxuICAgICAgICAgICAgb2JqLnBob25lTnVtYmVyID0gdGhpcy5wYXJhbXMucGhvbmVOdW1iZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnBhcmFtcy50ZW1wb3JhcnlQcm9vZikge1xyXG4gICAgICAgICAgICBvYmoudGVtcG9yYXJ5UHJvb2YgPSB0aGlzLnBhcmFtcy50ZW1wb3JhcnlQcm9vZjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucGFyYW1zLnZlcmlmaWNhdGlvbkNvZGUpIHtcclxuICAgICAgICAgICAgb2JqLnZlcmlmaWNhdGlvbkNvZGUgPSB0aGlzLnBhcmFtcy52ZXJpZmljYXRpb25Db2RlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5wYXJhbXMudmVyaWZpY2F0aW9uSWQpIHtcclxuICAgICAgICAgICAgb2JqLnZlcmlmaWNhdGlvbklkID0gdGhpcy5wYXJhbXMudmVyaWZpY2F0aW9uSWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcbiAgICAvKiogR2VuZXJhdGVzIGEgcGhvbmUgY3JlZGVudGlhbCBiYXNlZCBvbiBhIHBsYWluIG9iamVjdCBvciBhIEpTT04gc3RyaW5nLiAqL1xyXG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcclxuICAgICAgICBpZiAodHlwZW9mIGpzb24gPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGpzb24gPSBKU09OLnBhcnNlKGpzb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlLCBwaG9uZU51bWJlciwgdGVtcG9yYXJ5UHJvb2YgfSA9IGpzb247XHJcbiAgICAgICAgaWYgKCF2ZXJpZmljYXRpb25Db2RlICYmXHJcbiAgICAgICAgICAgICF2ZXJpZmljYXRpb25JZCAmJlxyXG4gICAgICAgICAgICAhcGhvbmVOdW1iZXIgJiZcclxuICAgICAgICAgICAgIXRlbXBvcmFyeVByb29mKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IFBob25lQXV0aENyZWRlbnRpYWwoe1xyXG4gICAgICAgICAgICB2ZXJpZmljYXRpb25JZCxcclxuICAgICAgICAgICAgdmVyaWZpY2F0aW9uQ29kZSxcclxuICAgICAgICAgICAgcGhvbmVOdW1iZXIsXHJcbiAgICAgICAgICAgIHRlbXBvcmFyeVByb29mXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIE1hcHMgdGhlIG1vZGUgc3RyaW5nIGluIGFjdGlvbiBjb2RlIFVSTCB0byBBY3Rpb24gQ29kZSBJbmZvIG9wZXJhdGlvbi5cclxuICpcclxuICogQHBhcmFtIG1vZGVcclxuICovXHJcbmZ1bmN0aW9uIHBhcnNlTW9kZShtb2RlKSB7XHJcbiAgICBzd2l0Y2ggKG1vZGUpIHtcclxuICAgICAgICBjYXNlICdyZWNvdmVyRW1haWwnOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJSRUNPVkVSX0VNQUlMXCIgLyogUkVDT1ZFUl9FTUFJTCAqLztcclxuICAgICAgICBjYXNlICdyZXNldFBhc3N3b3JkJzpcclxuICAgICAgICAgICAgcmV0dXJuIFwiUEFTU1dPUkRfUkVTRVRcIiAvKiBQQVNTV09SRF9SRVNFVCAqLztcclxuICAgICAgICBjYXNlICdzaWduSW4nOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJFTUFJTF9TSUdOSU5cIiAvKiBFTUFJTF9TSUdOSU4gKi87XHJcbiAgICAgICAgY2FzZSAndmVyaWZ5RW1haWwnOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJWRVJJRllfRU1BSUxcIiAvKiBWRVJJRllfRU1BSUwgKi87XHJcbiAgICAgICAgY2FzZSAndmVyaWZ5QW5kQ2hhbmdlRW1haWwnOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJWRVJJRllfQU5EX0NIQU5HRV9FTUFJTFwiIC8qIFZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMICovO1xyXG4gICAgICAgIGNhc2UgJ3JldmVydFNlY29uZEZhY3RvckFkZGl0aW9uJzpcclxuICAgICAgICAgICAgcmV0dXJuIFwiUkVWRVJUX1NFQ09ORF9GQUNUT1JfQURESVRJT05cIiAvKiBSRVZFUlRfU0VDT05EX0ZBQ1RPUl9BRERJVElPTiAqLztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogSGVscGVyIHRvIHBhcnNlIEZETCBsaW5rc1xyXG4gKlxyXG4gKiBAcGFyYW0gdXJsXHJcbiAqL1xyXG5mdW5jdGlvbiBwYXJzZURlZXBMaW5rKHVybCkge1xyXG4gICAgY29uc3QgbGluayA9IHF1ZXJ5c3RyaW5nRGVjb2RlKGV4dHJhY3RRdWVyeXN0cmluZyh1cmwpKVsnbGluayddO1xyXG4gICAgLy8gRG91YmxlIGxpbmsgY2FzZSAoYXV0b21hdGljIHJlZGlyZWN0KS5cclxuICAgIGNvbnN0IGRvdWJsZURlZXBMaW5rID0gbGlua1xyXG4gICAgICAgID8gcXVlcnlzdHJpbmdEZWNvZGUoZXh0cmFjdFF1ZXJ5c3RyaW5nKGxpbmspKVsnZGVlcF9saW5rX2lkJ11cclxuICAgICAgICA6IG51bGw7XHJcbiAgICAvLyBpT1MgY3VzdG9tIHNjaGVtZSBsaW5rcy5cclxuICAgIGNvbnN0IGlPU0RlZXBMaW5rID0gcXVlcnlzdHJpbmdEZWNvZGUoZXh0cmFjdFF1ZXJ5c3RyaW5nKHVybCkpWydkZWVwX2xpbmtfaWQnXTtcclxuICAgIGNvbnN0IGlPU0RvdWJsZURlZXBMaW5rID0gaU9TRGVlcExpbmtcclxuICAgICAgICA/IHF1ZXJ5c3RyaW5nRGVjb2RlKGV4dHJhY3RRdWVyeXN0cmluZyhpT1NEZWVwTGluaykpWydsaW5rJ11cclxuICAgICAgICA6IG51bGw7XHJcbiAgICByZXR1cm4gaU9TRG91YmxlRGVlcExpbmsgfHwgaU9TRGVlcExpbmsgfHwgZG91YmxlRGVlcExpbmsgfHwgbGluayB8fCB1cmw7XHJcbn1cclxuLyoqXHJcbiAqIEEgdXRpbGl0eSBjbGFzcyB0byBwYXJzZSBlbWFpbCBhY3Rpb24gVVJMcyBzdWNoIGFzIHBhc3N3b3JkIHJlc2V0LCBlbWFpbCB2ZXJpZmljYXRpb24sXHJcbiAqIGVtYWlsIGxpbmsgc2lnbiBpbiwgZXRjLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBBY3Rpb25Db2RlVVJMIHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGFjdGlvbkxpbmsgLSBUaGUgbGluayBmcm9tIHdoaWNoIHRvIGV4dHJhY3QgdGhlIFVSTC5cclxuICAgICAqIEByZXR1cm5zIFRoZSB7QGxpbmsgQWN0aW9uQ29kZVVSTH0gb2JqZWN0LCBvciBudWxsIGlmIHRoZSBsaW5rIGlzIGludmFsaWQuXHJcbiAgICAgKlxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGFjdGlvbkxpbmspIHtcclxuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZjtcclxuICAgICAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSBxdWVyeXN0cmluZ0RlY29kZShleHRyYWN0UXVlcnlzdHJpbmcoYWN0aW9uTGluaykpO1xyXG4gICAgICAgIGNvbnN0IGFwaUtleSA9IChfYSA9IHNlYXJjaFBhcmFtc1tcImFwaUtleVwiIC8qIEFQSV9LRVkgKi9dKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBudWxsO1xyXG4gICAgICAgIGNvbnN0IGNvZGUgPSAoX2IgPSBzZWFyY2hQYXJhbXNbXCJvb2JDb2RlXCIgLyogQ09ERSAqL10pICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IG51bGw7XHJcbiAgICAgICAgY29uc3Qgb3BlcmF0aW9uID0gcGFyc2VNb2RlKChfYyA9IHNlYXJjaFBhcmFtc1tcIm1vZGVcIiAvKiBNT0RFICovXSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogbnVsbCk7XHJcbiAgICAgICAgLy8gVmFsaWRhdGUgQVBJIGtleSwgY29kZSBhbmQgbW9kZS5cclxuICAgICAgICBfYXNzZXJ0KGFwaUtleSAmJiBjb2RlICYmIG9wZXJhdGlvbiwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICB0aGlzLmFwaUtleSA9IGFwaUtleTtcclxuICAgICAgICB0aGlzLm9wZXJhdGlvbiA9IG9wZXJhdGlvbjtcclxuICAgICAgICB0aGlzLmNvZGUgPSBjb2RlO1xyXG4gICAgICAgIHRoaXMuY29udGludWVVcmwgPSAoX2QgPSBzZWFyY2hQYXJhbXNbXCJjb250aW51ZVVybFwiIC8qIENPTlRJTlVFX1VSTCAqL10pICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IG51bGw7XHJcbiAgICAgICAgdGhpcy5sYW5ndWFnZUNvZGUgPSAoX2UgPSBzZWFyY2hQYXJhbXNbXCJsYW5ndWFnZUNvZGVcIiAvKiBMQU5HVUFHRV9DT0RFICovXSkgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogbnVsbDtcclxuICAgICAgICB0aGlzLnRlbmFudElkID0gKF9mID0gc2VhcmNoUGFyYW1zW1widGVuYW50SWRcIiAvKiBURU5BTlRfSUQgKi9dKSAhPT0gbnVsbCAmJiBfZiAhPT0gdm9pZCAwID8gX2YgOiBudWxsO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBQYXJzZXMgdGhlIGVtYWlsIGFjdGlvbiBsaW5rIHN0cmluZyBhbmQgcmV0dXJucyBhbiB7QGxpbmsgQWN0aW9uQ29kZVVSTH0gaWYgdGhlIGxpbmsgaXMgdmFsaWQsXHJcbiAgICAgKiBvdGhlcndpc2UgcmV0dXJucyBudWxsLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBsaW5rICAtIFRoZSBlbWFpbCBhY3Rpb24gbGluayBzdHJpbmcuXHJcbiAgICAgKiBAcmV0dXJucyBUaGUge0BsaW5rIEFjdGlvbkNvZGVVUkx9IG9iamVjdCwgb3IgbnVsbCBpZiB0aGUgbGluayBpcyBpbnZhbGlkLlxyXG4gICAgICpcclxuICAgICAqIEBwdWJsaWNcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHBhcnNlTGluayhsaW5rKSB7XHJcbiAgICAgICAgY29uc3QgYWN0aW9uTGluayA9IHBhcnNlRGVlcExpbmsobGluayk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBBY3Rpb25Db2RlVVJMKGFjdGlvbkxpbmspO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBQYXJzZXMgdGhlIGVtYWlsIGFjdGlvbiBsaW5rIHN0cmluZyBhbmQgcmV0dXJucyBhbiB7QGxpbmsgQWN0aW9uQ29kZVVSTH0gaWZcclxuICogdGhlIGxpbmsgaXMgdmFsaWQsIG90aGVyd2lzZSByZXR1cm5zIG51bGwuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHBhcnNlQWN0aW9uQ29kZVVSTChsaW5rKSB7XHJcbiAgICByZXR1cm4gQWN0aW9uQ29kZVVSTC5wYXJzZUxpbmsobGluayk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIHtAbGluayBFbWFpbEF1dGhDcmVkZW50aWFsfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgRW1haWxBdXRoUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQWx3YXlzIHNldCB0byB7QGxpbmsgUHJvdmlkZXJJZH0uUEFTU1dPUkQsIGV2ZW4gZm9yIGVtYWlsIGxpbmsuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5wcm92aWRlcklkID0gRW1haWxBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQ7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemUgYW4ge0BsaW5rIEF1dGhDcmVkZW50aWFsfSB1c2luZyBhbiBlbWFpbCBhbmQgcGFzc3dvcmQuXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGNvbnN0IGF1dGhDcmVkZW50aWFsID0gRW1haWxBdXRoUHJvdmlkZXIuY3JlZGVudGlhbChlbWFpbCwgcGFzc3dvcmQpO1xyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBzaWduSW5XaXRoQ3JlZGVudGlhbChhdXRoLCBhdXRoQ3JlZGVudGlhbCk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbCwgcGFzc3dvcmQpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGVtYWlsIC0gRW1haWwgYWRkcmVzcy5cclxuICAgICAqIEBwYXJhbSBwYXNzd29yZCAtIFVzZXIgYWNjb3VudCBwYXNzd29yZC5cclxuICAgICAqIEByZXR1cm5zIFRoZSBhdXRoIHByb3ZpZGVyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsKGVtYWlsLCBwYXNzd29yZCkge1xyXG4gICAgICAgIHJldHVybiBFbWFpbEF1dGhDcmVkZW50aWFsLl9mcm9tRW1haWxBbmRQYXNzd29yZChlbWFpbCwgcGFzc3dvcmQpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplIGFuIHtAbGluayBBdXRoQ3JlZGVudGlhbH0gdXNpbmcgYW4gZW1haWwgYW5kIGFuIGVtYWlsIGxpbmsgYWZ0ZXIgYSBzaWduIGluIHdpdGhcclxuICAgICAqIGVtYWlsIGxpbmsgb3BlcmF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiBjb25zdCBhdXRoQ3JlZGVudGlhbCA9IEVtYWlsQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxXaXRoTGluayhhdXRoLCBlbWFpbCwgZW1haWxMaW5rKTtcclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aCwgYXV0aENyZWRlbnRpYWwpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGF3YWl0IHNlbmRTaWduSW5MaW5rVG9FbWFpbChhdXRoLCBlbWFpbCk7XHJcbiAgICAgKiAvLyBPYnRhaW4gZW1haWxMaW5rIGZyb20gdXNlci5cclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgc2lnbkluV2l0aEVtYWlsTGluayhhdXRoLCBlbWFpbCwgZW1haWxMaW5rKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZSB1c2VkIHRvIHZlcmlmeSB0aGUgbGluay5cclxuICAgICAqIEBwYXJhbSBlbWFpbCAtIEVtYWlsIGFkZHJlc3MuXHJcbiAgICAgKiBAcGFyYW0gZW1haWxMaW5rIC0gU2lnbi1pbiBlbWFpbCBsaW5rLlxyXG4gICAgICogQHJldHVybnMgLSBUaGUgYXV0aCBwcm92aWRlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbFdpdGhMaW5rKGVtYWlsLCBlbWFpbExpbmspIHtcclxuICAgICAgICBjb25zdCBhY3Rpb25Db2RlVXJsID0gQWN0aW9uQ29kZVVSTC5wYXJzZUxpbmsoZW1haWxMaW5rKTtcclxuICAgICAgICBfYXNzZXJ0KGFjdGlvbkNvZGVVcmwsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgcmV0dXJuIEVtYWlsQXV0aENyZWRlbnRpYWwuX2Zyb21FbWFpbEFuZENvZGUoZW1haWwsIGFjdGlvbkNvZGVVcmwuY29kZSwgYWN0aW9uQ29kZVVybC50ZW5hbnRJZCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFByb3ZpZGVySWR9LlBBU1NXT1JELCBldmVuIGZvciBlbWFpbCBsaW5rLlxyXG4gKi9cclxuRW1haWxBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQgPSBcInBhc3N3b3JkXCIgLyogUEFTU1dPUkQgKi87XHJcbi8qKlxyXG4gKiBBbHdheXMgc2V0IHRvIHtAbGluayBTaWduSW5NZXRob2R9LkVNQUlMX1BBU1NXT1JELlxyXG4gKi9cclxuRW1haWxBdXRoUHJvdmlkZXIuRU1BSUxfUEFTU1dPUkRfU0lHTl9JTl9NRVRIT0QgPSBcInBhc3N3b3JkXCIgLyogRU1BSUxfUEFTU1dPUkQgKi87XHJcbi8qKlxyXG4gKiBBbHdheXMgc2V0IHRvIHtAbGluayBTaWduSW5NZXRob2R9LkVNQUlMX0xJTksuXHJcbiAqL1xyXG5FbWFpbEF1dGhQcm92aWRlci5FTUFJTF9MSU5LX1NJR05fSU5fTUVUSE9EID0gXCJlbWFpbExpbmtcIiAvKiBFTUFJTF9MSU5LICovO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIGJhc2UgY2xhc3MgZm9yIGFsbCBGZWRlcmF0ZWQgcHJvdmlkZXJzIChPQXV0aCAoaW5jbHVkaW5nIE9JREMpLCBTQU1MKS5cclxuICpcclxuICogVGhpcyBjbGFzcyBpcyBub3QgbWVhbnQgdG8gYmUgaW5zdGFudGlhdGVkIGRpcmVjdGx5LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBGZWRlcmF0ZWRBdXRoUHJvdmlkZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3RvciBmb3IgZ2VuZXJpYyBPQXV0aCBwcm92aWRlcnMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHByb3ZpZGVySWQgLSBQcm92aWRlciBmb3Igd2hpY2ggY3JlZGVudGlhbHMgc2hvdWxkIGJlIGdlbmVyYXRlZC5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IocHJvdmlkZXJJZCkge1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJJZCA9IHByb3ZpZGVySWQ7XHJcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdExhbmd1YWdlQ29kZSA9IG51bGw7XHJcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgICAgIHRoaXMuY3VzdG9tUGFyYW1ldGVycyA9IHt9O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIGxhbmd1YWdlIGdvZGUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGxhbmd1YWdlQ29kZSAtIGxhbmd1YWdlIGNvZGVcclxuICAgICAqL1xyXG4gICAgc2V0RGVmYXVsdExhbmd1YWdlKGxhbmd1YWdlQ29kZSkge1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdExhbmd1YWdlQ29kZSA9IGxhbmd1YWdlQ29kZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgT0F1dGggY3VzdG9tIHBhcmFtZXRlcnMgdG8gcGFzcyBpbiBhbiBPQXV0aCByZXF1ZXN0IGZvciBwb3B1cCBhbmQgcmVkaXJlY3Qgc2lnbi1pblxyXG4gICAgICogb3BlcmF0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogRm9yIGEgZGV0YWlsZWQgbGlzdCwgY2hlY2sgdGhlIHJlc2VydmVkIHJlcXVpcmVkIE9BdXRoIDIuMCBwYXJhbWV0ZXJzIHN1Y2ggYXMgYGNsaWVudF9pZGAsXHJcbiAgICAgKiBgcmVkaXJlY3RfdXJpYCwgYHNjb3BlYCwgYHJlc3BvbnNlX3R5cGVgLCBhbmQgYHN0YXRlYCBhcmUgbm90IGFsbG93ZWQgYW5kIHdpbGwgYmUgaWdub3JlZC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY3VzdG9tT0F1dGhQYXJhbWV0ZXJzIC0gVGhlIGN1c3RvbSBPQXV0aCBwYXJhbWV0ZXJzIHRvIHBhc3MgaW4gdGhlIE9BdXRoIHJlcXVlc3QuXHJcbiAgICAgKi9cclxuICAgIHNldEN1c3RvbVBhcmFtZXRlcnMoY3VzdG9tT0F1dGhQYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgdGhpcy5jdXN0b21QYXJhbWV0ZXJzID0gY3VzdG9tT0F1dGhQYXJhbWV0ZXJzO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXRyaWV2ZSB0aGUgY3VycmVudCBsaXN0IG9mIHtAbGluayBDdXN0b21QYXJhbWV0ZXJzfS5cclxuICAgICAqL1xyXG4gICAgZ2V0Q3VzdG9tUGFyYW1ldGVycygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jdXN0b21QYXJhbWV0ZXJzO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDb21tb24gY29kZSB0byBhbGwgT0F1dGggcHJvdmlkZXJzLiBUaGlzIGlzIHNlcGFyYXRlIGZyb20gdGhlXHJcbiAqIHtAbGluayBPQXV0aFByb3ZpZGVyfSBzbyB0aGF0IGNoaWxkIHByb3ZpZGVycyAobGlrZVxyXG4gKiB7QGxpbmsgR29vZ2xlQXV0aFByb3ZpZGVyfSkgZG9uJ3QgaW5oZXJpdCB0aGUgYGNyZWRlbnRpYWxgIGluc3RhbmNlIG1ldGhvZC5cclxuICogSW5zdGVhZCwgdGhleSByZWx5IG9uIGEgc3RhdGljIGBjcmVkZW50aWFsYCBtZXRob2QuXHJcbiAqL1xyXG5jbGFzcyBCYXNlT0F1dGhQcm92aWRlciBleHRlbmRzIEZlZGVyYXRlZEF1dGhQcm92aWRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xyXG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgICAgICB0aGlzLnNjb3BlcyA9IFtdO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgYW4gT0F1dGggc2NvcGUgdG8gdGhlIGNyZWRlbnRpYWwuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHNjb3BlIC0gUHJvdmlkZXIgT0F1dGggc2NvcGUgdG8gYWRkLlxyXG4gICAgICovXHJcbiAgICBhZGRTY29wZShzY29wZSkge1xyXG4gICAgICAgIC8vIElmIG5vdCBhbHJlYWR5IGFkZGVkLCBhZGQgc2NvcGUgdG8gbGlzdC5cclxuICAgICAgICBpZiAoIXRoaXMuc2NvcGVzLmluY2x1ZGVzKHNjb3BlKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNjb3Blcy5wdXNoKHNjb3BlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHJpZXZlIHRoZSBjdXJyZW50IGxpc3Qgb2YgT0F1dGggc2NvcGVzLlxyXG4gICAgICovXHJcbiAgICBnZXRTY29wZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIFsuLi50aGlzLnNjb3Blc107XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIGdlbmVyaWMge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0uXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBPQXV0aFByb3ZpZGVyKCdnb29nbGUuY29tJyk7XHJcbiAqIC8vIFN0YXJ0IGEgc2lnbiBpbiBwcm9jZXNzIGZvciBhbiB1bmF1dGhlbnRpY2F0ZWQgdXNlci5cclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3Byb2ZpbGUnKTtcclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ2VtYWlsJyk7XHJcbiAqIGF3YWl0IHNpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlcik7XHJcbiAqIC8vIFRoaXMgd2lsbCB0cmlnZ2VyIGEgZnVsbCBwYWdlIHJlZGlyZWN0IGF3YXkgZnJvbSB5b3VyIGFwcFxyXG4gKlxyXG4gKiAvLyBBZnRlciByZXR1cm5pbmcgZnJvbSB0aGUgcmVkaXJlY3Qgd2hlbiB5b3VyIGFwcCBpbml0aWFsaXplcyB5b3UgY2FuIG9idGFpbiB0aGUgcmVzdWx0XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJlZGlyZWN0UmVzdWx0KGF1dGgpO1xyXG4gKiBpZiAocmVzdWx0KSB7XHJcbiAqICAgLy8gVGhpcyBpcyB0aGUgc2lnbmVkLWluIHVzZXJcclxuICogICBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqICAgLy8gVGhpcyBnaXZlcyB5b3UgYSBPQXV0aCBBY2Nlc3MgVG9rZW4gZm9yIHRoZSBwcm92aWRlci5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gcHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQoYXV0aCwgcmVzdWx0KTtcclxuICogICBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHBvcHVwLlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBPQXV0aFByb3ZpZGVyKCdnb29nbGUuY29tJyk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdwcm9maWxlJyk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdlbWFpbCcpO1xyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKlxyXG4gKiAvLyBUaGUgc2lnbmVkLWluIHVzZXIgaW5mby5cclxuICogY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAvLyBUaGlzIGdpdmVzIHlvdSBhIE9BdXRoIEFjY2VzcyBUb2tlbiBmb3IgdGhlIHByb3ZpZGVyLlxyXG4gKiBjb25zdCBjcmVkZW50aWFsID0gcHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQoYXV0aCwgcmVzdWx0KTtcclxuICogY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiBgYGBcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgT0F1dGhQcm92aWRlciBleHRlbmRzIEJhc2VPQXV0aFByb3ZpZGVyIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbiB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEgSlNPTiBzdHJpbmcgb3IgYSBwbGFpbiBvYmplY3QuXHJcbiAgICAgKiBAcGFyYW0ganNvbiAtIEEgcGxhaW4gb2JqZWN0IG9yIGEgSlNPTiBzdHJpbmdcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tSlNPTihqc29uKSB7XHJcbiAgICAgICAgY29uc3Qgb2JqID0gdHlwZW9mIGpzb24gPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZShqc29uKSA6IGpzb247XHJcbiAgICAgICAgX2Fzc2VydCgncHJvdmlkZXJJZCcgaW4gb2JqICYmICdzaWduSW5NZXRob2QnIGluIG9iaiwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICByZXR1cm4gT0F1dGhDcmVkZW50aWFsLl9mcm9tUGFyYW1zKG9iaik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEgZ2VuZXJpYyBPQXV0aCBwcm92aWRlcidzIGFjY2VzcyB0b2tlbiBvciBJRCB0b2tlbi5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogVGhlIHJhdyBub25jZSBpcyByZXF1aXJlZCB3aGVuIGFuIElEIHRva2VuIHdpdGggYSBub25jZSBmaWVsZCBpcyBwcm92aWRlZC4gVGhlIFNIQS0yNTYgaGFzaCBvZlxyXG4gICAgICogdGhlIHJhdyBub25jZSBtdXN0IG1hdGNoIHRoZSBub25jZSBmaWVsZCBpbiB0aGUgSUQgdG9rZW4uXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIC8vIGBnb29nbGVVc2VyYCBmcm9tIHRoZSBvbnN1Y2Nlc3MgR29vZ2xlIFNpZ24gSW4gY2FsbGJhY2suXHJcbiAgICAgKiAvLyBJbml0aWFsaXplIGEgZ2VuZXJhdGUgT0F1dGggcHJvdmlkZXIgd2l0aCBhIGBnb29nbGUuY29tYCBwcm92aWRlcklkLlxyXG4gICAgICogY29uc3QgcHJvdmlkZXIgPSBuZXcgT0F1dGhQcm92aWRlcignZ29vZ2xlLmNvbScpO1xyXG4gICAgICogY29uc3QgY3JlZGVudGlhbCA9IHByb3ZpZGVyLmNyZWRlbnRpYWwoe1xyXG4gICAgICogICBpZFRva2VuOiBnb29nbGVVc2VyLmdldEF1dGhSZXNwb25zZSgpLmlkX3Rva2VuLFxyXG4gICAgICogfSk7XHJcbiAgICAgKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwYXJhbXMgLSBFaXRoZXIgdGhlIG9wdGlvbnMgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIElEIHRva2VuLCBhY2Nlc3MgdG9rZW4gYW5kIHJhdyBub25jZVxyXG4gICAgICogb3IgdGhlIElEIHRva2VuIHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgY3JlZGVudGlhbChwYXJhbXMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3JlZGVudGlhbChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHBhcmFtcyksIHsgbm9uY2U6IHBhcmFtcy5yYXdOb25jZSB9KSk7XHJcbiAgICB9XHJcbiAgICAvKiogQW4gaW50ZXJuYWwgY3JlZGVudGlhbCBtZXRob2QgdGhhdCBhY2NlcHRzIG1vcmUgcGVybWlzc2l2ZSBvcHRpb25zICovXHJcbiAgICBfY3JlZGVudGlhbChwYXJhbXMpIHtcclxuICAgICAgICBfYXNzZXJ0KHBhcmFtcy5pZFRva2VuIHx8IHBhcmFtcy5hY2Nlc3NUb2tlbiwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICAvLyBGb3IgT0F1dGhDcmVkZW50aWFsLCBzaWduIGluIG1ldGhvZCBpcyBzYW1lIGFzIHByb3ZpZGVySWQuXHJcbiAgICAgICAgcmV0dXJuIE9BdXRoQ3JlZGVudGlhbC5fZnJvbVBhcmFtcyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHBhcmFtcyksIHsgcHJvdmlkZXJJZDogdGhpcy5wcm92aWRlcklkLCBzaWduSW5NZXRob2Q6IHRoaXMucHJvdmlkZXJJZCB9KSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIFVzZXJDcmVkZW50aWFsfS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21SZXN1bHQodXNlckNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gT0F1dGhQcm92aWRlci5vYXV0aENyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHVzZXJDcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCB0byBleHRyYWN0IHRoZSB1bmRlcmx5aW5nIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgQXV0aEVycm9yfSB3aGljaCB3YXNcclxuICAgICAqIHRocm93biBkdXJpbmcgYSBzaWduLWluLCBsaW5rLCBvciByZWF1dGhlbnRpY2F0ZSBvcGVyYXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tRXJyb3IoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gT0F1dGhQcm92aWRlci5vYXV0aENyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KChlcnJvci5jdXN0b21EYXRhIHx8IHt9KSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgb2F1dGhDcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh7IF90b2tlblJlc3BvbnNlOiB0b2tlblJlc3BvbnNlIH0pIHtcclxuICAgICAgICBpZiAoIXRva2VuUmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgb2F1dGhJZFRva2VuLCBvYXV0aEFjY2Vzc1Rva2VuLCBvYXV0aFRva2VuU2VjcmV0LCBwZW5kaW5nVG9rZW4sIG5vbmNlLCBwcm92aWRlcklkIH0gPSB0b2tlblJlc3BvbnNlO1xyXG4gICAgICAgIGlmICghb2F1dGhBY2Nlc3NUb2tlbiAmJlxyXG4gICAgICAgICAgICAhb2F1dGhUb2tlblNlY3JldCAmJlxyXG4gICAgICAgICAgICAhb2F1dGhJZFRva2VuICYmXHJcbiAgICAgICAgICAgICFwZW5kaW5nVG9rZW4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghcHJvdmlkZXJJZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBPQXV0aFByb3ZpZGVyKHByb3ZpZGVySWQpLl9jcmVkZW50aWFsKHtcclxuICAgICAgICAgICAgICAgIGlkVG9rZW46IG9hdXRoSWRUb2tlbixcclxuICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiBvYXV0aEFjY2Vzc1Rva2VuLFxyXG4gICAgICAgICAgICAgICAgbm9uY2UsXHJcbiAgICAgICAgICAgICAgICBwZW5kaW5nVG9rZW5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGdlbmVyYXRpbmcgYW4ge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZm9yIHtAbGluayBQcm92aWRlcklkfS5GQUNFQk9PSy5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEZhY2Vib29rQXV0aFByb3ZpZGVyKCk7XHJcbiAqIC8vIFN0YXJ0IGEgc2lnbiBpbiBwcm9jZXNzIGZvciBhbiB1bmF1dGhlbnRpY2F0ZWQgdXNlci5cclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3VzZXJfYmlydGhkYXknKTtcclxuICogYXdhaXQgc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIGlmIChyZXN1bHQpIHtcclxuICogICAvLyBUaGlzIGlzIHRoZSBzaWduZWQtaW4gdXNlclxyXG4gKiAgIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogICAvLyBUaGlzIGdpdmVzIHlvdSBhIEZhY2Vib29rIEFjY2VzcyBUb2tlbi5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gRmFjZWJvb2tBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQocmVzdWx0KTtcclxuICogICBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHBvcHVwLlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBGYWNlYm9va0F1dGhQcm92aWRlcigpO1xyXG4gKiBwcm92aWRlci5hZGRTY29wZSgndXNlcl9iaXJ0aGRheScpO1xyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKlxyXG4gKiAvLyBUaGUgc2lnbmVkLWluIHVzZXIgaW5mby5cclxuICogY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAvLyBUaGlzIGdpdmVzIHlvdSBhIEZhY2Vib29rIEFjY2VzcyBUb2tlbi5cclxuICogY29uc3QgY3JlZGVudGlhbCA9IEZhY2Vib29rQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KHJlc3VsdCk7XHJcbiAqIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIEZhY2Vib29rQXV0aFByb3ZpZGVyIGV4dGVuZHMgQmFzZU9BdXRoUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoXCJmYWNlYm9vay5jb21cIiAvKiBGQUNFQk9PSyAqLyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBjcmVkZW50aWFsIGZvciBGYWNlYm9vay5cclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogLy8gYGV2ZW50YCBmcm9tIHRoZSBGYWNlYm9vayBhdXRoLmF1dGhSZXNwb25zZUNoYW5nZSBjYWxsYmFjay5cclxuICAgICAqIGNvbnN0IGNyZWRlbnRpYWwgPSBGYWNlYm9va0F1dGhQcm92aWRlci5jcmVkZW50aWFsKGV2ZW50LmF1dGhSZXNwb25zZS5hY2Nlc3NUb2tlbik7XHJcbiAgICAgKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBhY2Nlc3NUb2tlbiAtIEZhY2Vib29rIGFjY2VzcyB0b2tlbi5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWwoYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gT0F1dGhDcmVkZW50aWFsLl9mcm9tUGFyYW1zKHtcclxuICAgICAgICAgICAgcHJvdmlkZXJJZDogRmFjZWJvb2tBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQsXHJcbiAgICAgICAgICAgIHNpZ25Jbk1ldGhvZDogRmFjZWJvb2tBdXRoUHJvdmlkZXIuRkFDRUJPT0tfU0lHTl9JTl9NRVRIT0QsXHJcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIFVzZXJDcmVkZW50aWFsfS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21SZXN1bHQodXNlckNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gRmFjZWJvb2tBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QodXNlckNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBBdXRoRXJyb3J9IHdoaWNoIHdhc1xyXG4gICAgICogdGhyb3duIGR1cmluZyBhIHNpZ24taW4sIGxpbmssIG9yIHJlYXV0aGVudGljYXRlIG9wZXJhdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBGYWNlYm9va0F1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCgoZXJyb3IuY3VzdG9tRGF0YSB8fCB7fSkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHsgX3Rva2VuUmVzcG9uc2U6IHRva2VuUmVzcG9uc2UgfSkge1xyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZSB8fCAhKCdvYXV0aEFjY2Vzc1Rva2VuJyBpbiB0b2tlblJlc3BvbnNlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0b2tlblJlc3BvbnNlLm9hdXRoQWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBGYWNlYm9va0F1dGhQcm92aWRlci5jcmVkZW50aWFsKHRva2VuUmVzcG9uc2Uub2F1dGhBY2Nlc3NUb2tlbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRkFDRUJPT0suICovXHJcbkZhY2Vib29rQXV0aFByb3ZpZGVyLkZBQ0VCT09LX1NJR05fSU5fTUVUSE9EID0gXCJmYWNlYm9vay5jb21cIiAvKiBGQUNFQk9PSyAqLztcclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFByb3ZpZGVySWR9LkZBQ0VCT09LLiAqL1xyXG5GYWNlYm9va0F1dGhQcm92aWRlci5QUk9WSURFUl9JRCA9IFwiZmFjZWJvb2suY29tXCIgLyogRkFDRUJPT0sgKi87XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgZ2VuZXJhdGluZyBhbiBhbiB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmb3Ige0BsaW5rIFByb3ZpZGVySWR9LkdPT0dMRS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEdvb2dsZUF1dGhQcm92aWRlcigpO1xyXG4gKiAvLyBTdGFydCBhIHNpZ24gaW4gcHJvY2VzcyBmb3IgYW4gdW5hdXRoZW50aWNhdGVkIHVzZXIuXHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdwcm9maWxlJyk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdlbWFpbCcpO1xyXG4gKiBhd2FpdCBzaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogaWYgKHJlc3VsdCkge1xyXG4gKiAgIC8vIFRoaXMgaXMgdGhlIHNpZ25lZC1pbiB1c2VyXHJcbiAqICAgY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAgIC8vIFRoaXMgZ2l2ZXMgeW91IGEgR29vZ2xlIEFjY2VzcyBUb2tlbi5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gR29vZ2xlQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KHJlc3VsdCk7XHJcbiAqICAgY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSBwb3B1cC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgR29vZ2xlQXV0aFByb3ZpZGVyKCk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdwcm9maWxlJyk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdlbWFpbCcpO1xyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKlxyXG4gKiAvLyBUaGUgc2lnbmVkLWluIHVzZXIgaW5mby5cclxuICogY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAvLyBUaGlzIGdpdmVzIHlvdSBhIEdvb2dsZSBBY2Nlc3MgVG9rZW4uXHJcbiAqIGNvbnN0IGNyZWRlbnRpYWwgPSBHb29nbGVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQocmVzdWx0KTtcclxuICogY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiBgYGBcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgR29vZ2xlQXV0aFByb3ZpZGVyIGV4dGVuZHMgQmFzZU9BdXRoUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoXCJnb29nbGUuY29tXCIgLyogR09PR0xFICovKTtcclxuICAgICAgICB0aGlzLmFkZFNjb3BlKCdwcm9maWxlJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBjcmVkZW50aWFsIGZvciBHb29nbGUuIEF0IGxlYXN0IG9uZSBvZiBJRCB0b2tlbiBhbmQgYWNjZXNzIHRva2VuIGlzIHJlcXVpcmVkLlxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiAvLyBcXGBnb29nbGVVc2VyXFxgIGZyb20gdGhlIG9uc3VjY2VzcyBHb29nbGUgU2lnbiBJbiBjYWxsYmFjay5cclxuICAgICAqIGNvbnN0IGNyZWRlbnRpYWwgPSBHb29nbGVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbChnb29nbGVVc2VyLmdldEF1dGhSZXNwb25zZSgpLmlkX3Rva2VuKTtcclxuICAgICAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhDcmVkZW50aWFsKGNyZWRlbnRpYWwpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlkVG9rZW4gLSBHb29nbGUgSUQgdG9rZW4uXHJcbiAgICAgKiBAcGFyYW0gYWNjZXNzVG9rZW4gLSBHb29nbGUgYWNjZXNzIHRva2VuLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbChpZFRva2VuLCBhY2Nlc3NUb2tlbikge1xyXG4gICAgICAgIHJldHVybiBPQXV0aENyZWRlbnRpYWwuX2Zyb21QYXJhbXMoe1xyXG4gICAgICAgICAgICBwcm92aWRlcklkOiBHb29nbGVBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQsXHJcbiAgICAgICAgICAgIHNpZ25Jbk1ldGhvZDogR29vZ2xlQXV0aFByb3ZpZGVyLkdPT0dMRV9TSUdOX0lOX01FVEhPRCxcclxuICAgICAgICAgICAgaWRUb2tlbixcclxuICAgICAgICAgICAgYWNjZXNzVG9rZW5cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCB0byBleHRyYWN0IHRoZSB1bmRlcmx5aW5nIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgVXNlckNyZWRlbnRpYWx9LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVJlc3VsdCh1c2VyQ3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBHb29nbGVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QodXNlckNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBBdXRoRXJyb3J9IHdoaWNoIHdhc1xyXG4gICAgICogdGhyb3duIGR1cmluZyBhIHNpZ24taW4sIGxpbmssIG9yIHJlYXV0aGVudGljYXRlIG9wZXJhdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBHb29nbGVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoKGVycm9yLmN1c3RvbURhdGEgfHwge30pKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh7IF90b2tlblJlc3BvbnNlOiB0b2tlblJlc3BvbnNlIH0pIHtcclxuICAgICAgICBpZiAoIXRva2VuUmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgb2F1dGhJZFRva2VuLCBvYXV0aEFjY2Vzc1Rva2VuIH0gPSB0b2tlblJlc3BvbnNlO1xyXG4gICAgICAgIGlmICghb2F1dGhJZFRva2VuICYmICFvYXV0aEFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgY291bGQgYmUgYW4gb2F1dGggMSBjcmVkZW50aWFsIG9yIGEgcGhvbmUgY3JlZGVudGlhbFxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIEdvb2dsZUF1dGhQcm92aWRlci5jcmVkZW50aWFsKG9hdXRoSWRUb2tlbiwgb2F1dGhBY2Nlc3NUb2tlbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFNpZ25Jbk1ldGhvZH0uR09PR0xFLiAqL1xyXG5Hb29nbGVBdXRoUHJvdmlkZXIuR09PR0xFX1NJR05fSU5fTUVUSE9EID0gXCJnb29nbGUuY29tXCIgLyogR09PR0xFICovO1xyXG4vKiogQWx3YXlzIHNldCB0byB7QGxpbmsgUHJvdmlkZXJJZH0uR09PR0xFLiAqL1xyXG5Hb29nbGVBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQgPSBcImdvb2dsZS5jb21cIiAvKiBHT09HTEUgKi87XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgZ2VuZXJhdGluZyBhbiB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmb3Ige0BsaW5rIFByb3ZpZGVySWR9LkdJVEhVQi5cclxuICpcclxuICogQHJlbWFya3NcclxuICogR2l0SHViIHJlcXVpcmVzIGFuIE9BdXRoIDIuMCByZWRpcmVjdCwgc28geW91IGNhbiBlaXRoZXIgaGFuZGxlIHRoZSByZWRpcmVjdCBkaXJlY3RseSwgb3IgdXNlXHJcbiAqIHRoZSB7QGxpbmsgc2lnbkluV2l0aFBvcHVwfSBoYW5kbGVyOlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSByZWRpcmVjdC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgR2l0aHViQXV0aFByb3ZpZGVyKCk7XHJcbiAqIC8vIFN0YXJ0IGEgc2lnbiBpbiBwcm9jZXNzIGZvciBhbiB1bmF1dGhlbnRpY2F0ZWQgdXNlci5cclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3JlcG8nKTtcclxuICogYXdhaXQgc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIGlmIChyZXN1bHQpIHtcclxuICogICAvLyBUaGlzIGlzIHRoZSBzaWduZWQtaW4gdXNlclxyXG4gKiAgIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogICAvLyBUaGlzIGdpdmVzIHlvdSBhIEdpdGh1YiBBY2Nlc3MgVG9rZW4uXHJcbiAqICAgY29uc3QgY3JlZGVudGlhbCA9IEdpdGh1YkF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChyZXN1bHQpO1xyXG4gKiAgIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogfVxyXG4gKiBgYGBcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcG9wdXAuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEdpdGh1YkF1dGhQcm92aWRlcigpO1xyXG4gKiBwcm92aWRlci5hZGRTY29wZSgncmVwbycpO1xyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKlxyXG4gKiAvLyBUaGUgc2lnbmVkLWluIHVzZXIgaW5mby5cclxuICogY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAvLyBUaGlzIGdpdmVzIHlvdSBhIEdpdGh1YiBBY2Nlc3MgVG9rZW4uXHJcbiAqIGNvbnN0IGNyZWRlbnRpYWwgPSBHaXRodWJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQocmVzdWx0KTtcclxuICogY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiBgYGBcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgR2l0aHViQXV0aFByb3ZpZGVyIGV4dGVuZHMgQmFzZU9BdXRoUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoXCJnaXRodWIuY29tXCIgLyogR0lUSFVCICovKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIGNyZWRlbnRpYWwgZm9yIEdpdGh1Yi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gYWNjZXNzVG9rZW4gLSBHaXRodWIgYWNjZXNzIHRva2VuLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbChhY2Nlc3NUb2tlbikge1xyXG4gICAgICAgIHJldHVybiBPQXV0aENyZWRlbnRpYWwuX2Zyb21QYXJhbXMoe1xyXG4gICAgICAgICAgICBwcm92aWRlcklkOiBHaXRodWJBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQsXHJcbiAgICAgICAgICAgIHNpZ25Jbk1ldGhvZDogR2l0aHViQXV0aFByb3ZpZGVyLkdJVEhVQl9TSUdOX0lOX01FVEhPRCxcclxuICAgICAgICAgICAgYWNjZXNzVG9rZW5cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCB0byBleHRyYWN0IHRoZSB1bmRlcmx5aW5nIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgVXNlckNyZWRlbnRpYWx9LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVJlc3VsdCh1c2VyQ3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBHaXRodWJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QodXNlckNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBBdXRoRXJyb3J9IHdoaWNoIHdhc1xyXG4gICAgICogdGhyb3duIGR1cmluZyBhIHNpZ24taW4sIGxpbmssIG9yIHJlYXV0aGVudGljYXRlIG9wZXJhdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBHaXRodWJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoKGVycm9yLmN1c3RvbURhdGEgfHwge30pKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh7IF90b2tlblJlc3BvbnNlOiB0b2tlblJlc3BvbnNlIH0pIHtcclxuICAgICAgICBpZiAoIXRva2VuUmVzcG9uc2UgfHwgISgnb2F1dGhBY2Nlc3NUb2tlbicgaW4gdG9rZW5SZXNwb25zZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZS5vYXV0aEFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gR2l0aHViQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwodG9rZW5SZXNwb25zZS5vYXV0aEFjY2Vzc1Rva2VuKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4vKiogQWx3YXlzIHNldCB0byB7QGxpbmsgU2lnbkluTWV0aG9kfS5HSVRIVUIuICovXHJcbkdpdGh1YkF1dGhQcm92aWRlci5HSVRIVUJfU0lHTl9JTl9NRVRIT0QgPSBcImdpdGh1Yi5jb21cIiAvKiBHSVRIVUIgKi87XHJcbi8qKiBBbHdheXMgc2V0IHRvIHtAbGluayBQcm92aWRlcklkfS5HSVRIVUIuICovXHJcbkdpdGh1YkF1dGhQcm92aWRlci5QUk9WSURFUl9JRCA9IFwiZ2l0aHViLmNvbVwiIC8qIEdJVEhVQiAqLztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgSURQX1JFUVVFU1RfVVJJID0gJ2h0dHA6Ly9sb2NhbGhvc3QnO1xyXG4vKipcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgU0FNTEF1dGhDcmVkZW50aWFsIGV4dGVuZHMgQXV0aENyZWRlbnRpYWwge1xyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgY29uc3RydWN0b3IocHJvdmlkZXJJZCwgcGVuZGluZ1Rva2VuKSB7XHJcbiAgICAgICAgc3VwZXIocHJvdmlkZXJJZCwgcHJvdmlkZXJJZCk7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nVG9rZW4gPSBwZW5kaW5nVG9rZW47XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZ2V0SWRUb2tlblJlc3BvbnNlKGF1dGgpIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5idWlsZFJlcXVlc3QoKTtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aElkcChhdXRoLCByZXF1ZXN0KTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9saW5rVG9JZFRva2VuKGF1dGgsIGlkVG9rZW4pIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5idWlsZFJlcXVlc3QoKTtcclxuICAgICAgICByZXF1ZXN0LmlkVG9rZW4gPSBpZFRva2VuO1xyXG4gICAgICAgIHJldHVybiBzaWduSW5XaXRoSWRwKGF1dGgsIHJlcXVlc3QpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2dldFJlYXV0aGVudGljYXRpb25SZXNvbHZlcihhdXRoKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuYnVpbGRSZXF1ZXN0KCk7XHJcbiAgICAgICAgcmVxdWVzdC5hdXRvQ3JlYXRlID0gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhJZHAoYXV0aCwgcmVxdWVzdCk7XHJcbiAgICB9XHJcbiAgICAvKioge0Bpbmhlcml0ZG9jIEF1dGhDcmVkZW50aWFsLnRvSlNPTn0gICovXHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2lnbkluTWV0aG9kOiB0aGlzLnNpZ25Jbk1ldGhvZCxcclxuICAgICAgICAgICAgcHJvdmlkZXJJZDogdGhpcy5wcm92aWRlcklkLFxyXG4gICAgICAgICAgICBwZW5kaW5nVG9rZW46IHRoaXMucGVuZGluZ1Rva2VuXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU3RhdGljIG1ldGhvZCB0byBkZXNlcmlhbGl6ZSBhIEpTT04gcmVwcmVzZW50YXRpb24gb2YgYW4gb2JqZWN0IGludG8gYW5cclxuICAgICAqIHtAbGluayAgQXV0aENyZWRlbnRpYWx9LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBqc29uIC0gSW5wdXQgY2FuIGJlIGVpdGhlciBPYmplY3Qgb3IgdGhlIHN0cmluZ2lmaWVkIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBvYmplY3QuXHJcbiAgICAgKiBXaGVuIHN0cmluZyBpcyBwcm92aWRlZCwgSlNPTi5wYXJzZSB3b3VsZCBiZSBjYWxsZWQgZmlyc3QuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgSWYgdGhlIEpTT04gaW5wdXQgZG9lcyBub3QgcmVwcmVzZW50IGFuIHtAbGluayAgQXV0aENyZWRlbnRpYWx9LCBudWxsIGlzIHJldHVybmVkLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZnJvbUpTT04oanNvbikge1xyXG4gICAgICAgIGNvbnN0IG9iaiA9IHR5cGVvZiBqc29uID09PSAnc3RyaW5nJyA/IEpTT04ucGFyc2UoanNvbikgOiBqc29uO1xyXG4gICAgICAgIGNvbnN0IHsgcHJvdmlkZXJJZCwgc2lnbkluTWV0aG9kLCBwZW5kaW5nVG9rZW4gfSA9IG9iajtcclxuICAgICAgICBpZiAoIXByb3ZpZGVySWQgfHxcclxuICAgICAgICAgICAgIXNpZ25Jbk1ldGhvZCB8fFxyXG4gICAgICAgICAgICAhcGVuZGluZ1Rva2VuIHx8XHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQgIT09IHNpZ25Jbk1ldGhvZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTQU1MQXV0aENyZWRlbnRpYWwocHJvdmlkZXJJZCwgcGVuZGluZ1Rva2VuKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSGVscGVyIHN0YXRpYyBtZXRob2QgdG8gYXZvaWQgZXhwb3NpbmcgdGhlIGNvbnN0cnVjdG9yIHRvIGVuZCB1c2Vycy5cclxuICAgICAqXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgc3RhdGljIF9jcmVhdGUocHJvdmlkZXJJZCwgcGVuZGluZ1Rva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTQU1MQXV0aENyZWRlbnRpYWwocHJvdmlkZXJJZCwgcGVuZGluZ1Rva2VuKTtcclxuICAgIH1cclxuICAgIGJ1aWxkUmVxdWVzdCgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXF1ZXN0VXJpOiBJRFBfUkVRVUVTVF9VUkksXHJcbiAgICAgICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlLFxyXG4gICAgICAgICAgICBwZW5kaW5nVG9rZW46IHRoaXMucGVuZGluZ1Rva2VuXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBTQU1MX1BST1ZJREVSX1BSRUZJWCA9ICdzYW1sLic7XHJcbi8qKlxyXG4gKiBBbiB7QGxpbmsgQXV0aFByb3ZpZGVyfSBmb3IgU0FNTC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgU0FNTEF1dGhQcm92aWRlciBleHRlbmRzIEZlZGVyYXRlZEF1dGhQcm92aWRlciB7XHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdG9yLiBUaGUgcHJvdmlkZXJJZCBtdXN0IHN0YXJ0IHdpdGggXCJzYW1sLlwiXHJcbiAgICAgKiBAcGFyYW0gcHJvdmlkZXJJZCAtIFNBTUwgcHJvdmlkZXIgSUQuXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHByb3ZpZGVySWQpIHtcclxuICAgICAgICBfYXNzZXJ0KHByb3ZpZGVySWQuc3RhcnRzV2l0aChTQU1MX1BST1ZJREVSX1BSRUZJWCksIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgc3VwZXIocHJvdmlkZXJJZCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlcyBhbiB7QGxpbmsgQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgVXNlckNyZWRlbnRpYWx9IGFmdGVyIGFcclxuICAgICAqIHN1Y2Nlc3NmdWwgU0FNTCBmbG93IGNvbXBsZXRlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICpcclxuICAgICAqIEZvciBleGFtcGxlLCB0byBnZXQgYW4ge0BsaW5rIEF1dGhDcmVkZW50aWFsfSwgeW91IGNvdWxkIHdyaXRlIHRoZVxyXG4gICAgICogZm9sbG93aW5nIGNvZGU6XHJcbiAgICAgKlxyXG4gICAgICogYGBganNcclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgc2lnbkluV2l0aFBvcHVwKGF1dGgsIHNhbWxQcm92aWRlcik7XHJcbiAgICAgKiBjb25zdCBjcmVkZW50aWFsID0gU0FNTEF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdCh1c2VyQ3JlZGVudGlhbCk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21SZXN1bHQodXNlckNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gU0FNTEF1dGhQcm92aWRlci5zYW1sQ3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QodXNlckNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBBdXRoRXJyb3J9IHdoaWNoIHdhc1xyXG4gICAgICogdGhyb3duIGR1cmluZyBhIHNpZ24taW4sIGxpbmssIG9yIHJlYXV0aGVudGljYXRlIG9wZXJhdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBTQU1MQXV0aFByb3ZpZGVyLnNhbWxDcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCgoZXJyb3IuY3VzdG9tRGF0YSB8fCB7fSkpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGFuIHtAbGluayBBdXRoQ3JlZGVudGlhbH0gZnJvbSBhIEpTT04gc3RyaW5nIG9yIGEgcGxhaW4gb2JqZWN0LlxyXG4gICAgICogQHBhcmFtIGpzb24gLSBBIHBsYWluIG9iamVjdCBvciBhIEpTT04gc3RyaW5nXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbUpTT04oanNvbikge1xyXG4gICAgICAgIGNvbnN0IGNyZWRlbnRpYWwgPSBTQU1MQXV0aENyZWRlbnRpYWwuZnJvbUpTT04oanNvbik7XHJcbiAgICAgICAgX2Fzc2VydChjcmVkZW50aWFsLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIHJldHVybiBjcmVkZW50aWFsO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIHNhbWxDcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh7IF90b2tlblJlc3BvbnNlOiB0b2tlblJlc3BvbnNlIH0pIHtcclxuICAgICAgICBpZiAoIXRva2VuUmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgcGVuZGluZ1Rva2VuLCBwcm92aWRlcklkIH0gPSB0b2tlblJlc3BvbnNlO1xyXG4gICAgICAgIGlmICghcGVuZGluZ1Rva2VuIHx8ICFwcm92aWRlcklkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gU0FNTEF1dGhDcmVkZW50aWFsLl9jcmVhdGUocHJvdmlkZXJJZCwgcGVuZGluZ1Rva2VuKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgZ2VuZXJhdGluZyBhbiB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmb3Ige0BsaW5rIFByb3ZpZGVySWR9LlRXSVRURVIuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBUd2l0dGVyQXV0aFByb3ZpZGVyKCk7XHJcbiAqIC8vIFN0YXJ0IGEgc2lnbiBpbiBwcm9jZXNzIGZvciBhbiB1bmF1dGhlbnRpY2F0ZWQgdXNlci5cclxuICogYXdhaXQgc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIGlmIChyZXN1bHQpIHtcclxuICogICAvLyBUaGlzIGlzIHRoZSBzaWduZWQtaW4gdXNlclxyXG4gKiAgIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogICAvLyBUaGlzIGdpdmVzIHlvdSBhIFR3aXR0ZXIgQWNjZXNzIFRva2VuIGFuZCBTZWNyZXQuXHJcbiAqICAgY29uc3QgY3JlZGVudGlhbCA9IFR3aXR0ZXJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQocmVzdWx0KTtcclxuICogICBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqICAgY29uc3Qgc2VjcmV0ID0gY3JlZGVudGlhbC5zZWNyZXQ7XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHBvcHVwLlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBUd2l0dGVyQXV0aFByb3ZpZGVyKCk7XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhQb3B1cChhdXRoLCBwcm92aWRlcik7XHJcbiAqXHJcbiAqIC8vIFRoZSBzaWduZWQtaW4gdXNlciBpbmZvLlxyXG4gKiBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqIC8vIFRoaXMgZ2l2ZXMgeW91IGEgVHdpdHRlciBBY2Nlc3MgVG9rZW4gYW5kIFNlY3JldC5cclxuICogY29uc3QgY3JlZGVudGlhbCA9IFR3aXR0ZXJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQocmVzdWx0KTtcclxuICogY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiBjb25zdCBzZWNyZXQgPSBjcmVkZW50aWFsLnNlY3JldDtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIFR3aXR0ZXJBdXRoUHJvdmlkZXIgZXh0ZW5kcyBCYXNlT0F1dGhQcm92aWRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcihcInR3aXR0ZXIuY29tXCIgLyogVFdJVFRFUiAqLyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBjcmVkZW50aWFsIGZvciBUd2l0dGVyLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB0b2tlbiAtIFR3aXR0ZXIgYWNjZXNzIHRva2VuLlxyXG4gICAgICogQHBhcmFtIHNlY3JldCAtIFR3aXR0ZXIgc2VjcmV0LlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbCh0b2tlbiwgc2VjcmV0KSB7XHJcbiAgICAgICAgcmV0dXJuIE9BdXRoQ3JlZGVudGlhbC5fZnJvbVBhcmFtcyh7XHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQ6IFR3aXR0ZXJBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQsXHJcbiAgICAgICAgICAgIHNpZ25Jbk1ldGhvZDogVHdpdHRlckF1dGhQcm92aWRlci5UV0lUVEVSX1NJR05fSU5fTUVUSE9ELFxyXG4gICAgICAgICAgICBvYXV0aFRva2VuOiB0b2tlbixcclxuICAgICAgICAgICAgb2F1dGhUb2tlblNlY3JldDogc2VjcmV0XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIFVzZXJDcmVkZW50aWFsfS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21SZXN1bHQodXNlckNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gVHdpdHRlckF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh1c2VyQ3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIEF1dGhFcnJvcn0gd2hpY2ggd2FzXHJcbiAgICAgKiB0aHJvd24gZHVyaW5nIGEgc2lnbi1pbiwgbGluaywgb3IgcmVhdXRoZW50aWNhdGUgb3BlcmF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbUVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIFR3aXR0ZXJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoKGVycm9yLmN1c3RvbURhdGEgfHwge30pKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh7IF90b2tlblJlc3BvbnNlOiB0b2tlblJlc3BvbnNlIH0pIHtcclxuICAgICAgICBpZiAoIXRva2VuUmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgb2F1dGhBY2Nlc3NUb2tlbiwgb2F1dGhUb2tlblNlY3JldCB9ID0gdG9rZW5SZXNwb25zZTtcclxuICAgICAgICBpZiAoIW9hdXRoQWNjZXNzVG9rZW4gfHwgIW9hdXRoVG9rZW5TZWNyZXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBUd2l0dGVyQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwob2F1dGhBY2Nlc3NUb2tlbiwgb2F1dGhUb2tlblNlY3JldCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFNpZ25Jbk1ldGhvZH0uVFdJVFRFUi4gKi9cclxuVHdpdHRlckF1dGhQcm92aWRlci5UV0lUVEVSX1NJR05fSU5fTUVUSE9EID0gXCJ0d2l0dGVyLmNvbVwiIC8qIFRXSVRURVIgKi87XHJcbi8qKiBBbHdheXMgc2V0IHRvIHtAbGluayBQcm92aWRlcklkfS5UV0lUVEVSLiAqL1xyXG5Ud2l0dGVyQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lEID0gXCJ0d2l0dGVyLmNvbVwiIC8qIFRXSVRURVIgKi87XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25VcChhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25VcFwiIC8qIFNJR05fVVAgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgVXNlckNyZWRlbnRpYWxJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xyXG4gICAgICAgIHRoaXMudXNlciA9IHBhcmFtcy51c2VyO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJJZCA9IHBhcmFtcy5wcm92aWRlcklkO1xyXG4gICAgICAgIHRoaXMuX3Rva2VuUmVzcG9uc2UgPSBwYXJhbXMuX3Rva2VuUmVzcG9uc2U7XHJcbiAgICAgICAgdGhpcy5vcGVyYXRpb25UeXBlID0gcGFyYW1zLm9wZXJhdGlvblR5cGU7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgYXN5bmMgX2Zyb21JZFRva2VuUmVzcG9uc2UoYXV0aCwgb3BlcmF0aW9uVHlwZSwgaWRUb2tlblJlc3BvbnNlLCBpc0Fub255bW91cyA9IGZhbHNlKSB7XHJcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJJbXBsLl9mcm9tSWRUb2tlblJlc3BvbnNlKGF1dGgsIGlkVG9rZW5SZXNwb25zZSwgaXNBbm9ueW1vdXMpO1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVySWQgPSBwcm92aWRlcklkRm9yUmVzcG9uc2UoaWRUb2tlblJlc3BvbnNlKTtcclxuICAgICAgICBjb25zdCB1c2VyQ3JlZCA9IG5ldyBVc2VyQ3JlZGVudGlhbEltcGwoe1xyXG4gICAgICAgICAgICB1c2VyLFxyXG4gICAgICAgICAgICBwcm92aWRlcklkLFxyXG4gICAgICAgICAgICBfdG9rZW5SZXNwb25zZTogaWRUb2tlblJlc3BvbnNlLFxyXG4gICAgICAgICAgICBvcGVyYXRpb25UeXBlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHVzZXJDcmVkO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGFzeW5jIF9mb3JPcGVyYXRpb24odXNlciwgb3BlcmF0aW9uVHlwZSwgcmVzcG9uc2UpIHtcclxuICAgICAgICBhd2FpdCB1c2VyLl91cGRhdGVUb2tlbnNJZk5lY2Vzc2FyeShyZXNwb25zZSwgLyogcmVsb2FkICovIHRydWUpO1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVySWQgPSBwcm92aWRlcklkRm9yUmVzcG9uc2UocmVzcG9uc2UpO1xyXG4gICAgICAgIHJldHVybiBuZXcgVXNlckNyZWRlbnRpYWxJbXBsKHtcclxuICAgICAgICAgICAgdXNlcixcclxuICAgICAgICAgICAgcHJvdmlkZXJJZCxcclxuICAgICAgICAgICAgX3Rva2VuUmVzcG9uc2U6IHJlc3BvbnNlLFxyXG4gICAgICAgICAgICBvcGVyYXRpb25UeXBlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gcHJvdmlkZXJJZEZvclJlc3BvbnNlKHJlc3BvbnNlKSB7XHJcbiAgICBpZiAocmVzcG9uc2UucHJvdmlkZXJJZCkge1xyXG4gICAgICAgIHJldHVybiByZXNwb25zZS5wcm92aWRlcklkO1xyXG4gICAgfVxyXG4gICAgaWYgKCdwaG9uZU51bWJlcicgaW4gcmVzcG9uc2UpIHtcclxuICAgICAgICByZXR1cm4gXCJwaG9uZVwiIC8qIFBIT05FICovO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEFzeW5jaHJvbm91c2x5IHNpZ25zIGluIGFzIGFuIGFub255bW91cyB1c2VyLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJZiB0aGVyZSBpcyBhbHJlYWR5IGFuIGFub255bW91cyB1c2VyIHNpZ25lZCBpbiwgdGhhdCB1c2VyIHdpbGwgYmUgcmV0dXJuZWQ7IG90aGVyd2lzZSwgYVxyXG4gKiBuZXcgYW5vbnltb3VzIHVzZXIgaWRlbnRpdHkgd2lsbCBiZSBjcmVhdGVkIGFuZCByZXR1cm5lZC5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5Bbm9ueW1vdXNseShhdXRoKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICBjb25zdCBhdXRoSW50ZXJuYWwgPSBfY2FzdEF1dGgoYXV0aCk7XHJcbiAgICBhd2FpdCBhdXRoSW50ZXJuYWwuX2luaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgIGlmICgoX2EgPSBhdXRoSW50ZXJuYWwuY3VycmVudFVzZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pc0Fub255bW91cykge1xyXG4gICAgICAgIC8vIElmIGFuIGFub255bW91cyB1c2VyIGlzIGFscmVhZHkgc2lnbmVkIGluLCBubyBuZWVkIHRvIHNpZ24gdGhlbSBpbiBhZ2Fpbi5cclxuICAgICAgICByZXR1cm4gbmV3IFVzZXJDcmVkZW50aWFsSW1wbCh7XHJcbiAgICAgICAgICAgIHVzZXI6IGF1dGhJbnRlcm5hbC5jdXJyZW50VXNlcixcclxuICAgICAgICAgICAgcHJvdmlkZXJJZDogbnVsbCxcclxuICAgICAgICAgICAgb3BlcmF0aW9uVHlwZTogXCJzaWduSW5cIiAvKiBTSUdOX0lOICovXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNpZ25VcChhdXRoSW50ZXJuYWwsIHtcclxuICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IFVzZXJDcmVkZW50aWFsSW1wbC5fZnJvbUlkVG9rZW5SZXNwb25zZShhdXRoSW50ZXJuYWwsIFwic2lnbkluXCIgLyogU0lHTl9JTiAqLywgcmVzcG9uc2UsIHRydWUpO1xyXG4gICAgYXdhaXQgYXV0aEludGVybmFsLl91cGRhdGVDdXJyZW50VXNlcih1c2VyQ3JlZGVudGlhbC51c2VyKTtcclxuICAgIHJldHVybiB1c2VyQ3JlZGVudGlhbDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBNdWx0aUZhY3RvckVycm9yIGV4dGVuZHMgRmlyZWJhc2VFcnJvciB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoLCBlcnJvciwgb3BlcmF0aW9uVHlwZSwgdXNlcikge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBzdXBlcihlcnJvci5jb2RlLCBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICB0aGlzLm9wZXJhdGlvblR5cGUgPSBvcGVyYXRpb25UeXBlO1xyXG4gICAgICAgIHRoaXMudXNlciA9IHVzZXI7XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0LXdpa2kvYmxvYi9tYXN0ZXIvQnJlYWtpbmctQ2hhbmdlcy5tZCNleHRlbmRpbmctYnVpbHQtaW5zLWxpa2UtZXJyb3ItYXJyYXktYW5kLW1hcC1tYXktbm8tbG9uZ2VyLXdvcmtcclxuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgTXVsdGlGYWN0b3JFcnJvci5wcm90b3R5cGUpO1xyXG4gICAgICAgIHRoaXMuY3VzdG9tRGF0YSA9IHtcclxuICAgICAgICAgICAgYXBwTmFtZTogYXV0aC5uYW1lLFxyXG4gICAgICAgICAgICB0ZW5hbnRJZDogKF9hID0gYXV0aC50ZW5hbnRJZCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBfc2VydmVyUmVzcG9uc2U6IGVycm9yLmN1c3RvbURhdGEuX3NlcnZlclJlc3BvbnNlLFxyXG4gICAgICAgICAgICBvcGVyYXRpb25UeXBlLFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgX2Zyb21FcnJvckFuZE9wZXJhdGlvbihhdXRoLCBlcnJvciwgb3BlcmF0aW9uVHlwZSwgdXNlcikge1xyXG4gICAgICAgIHJldHVybiBuZXcgTXVsdGlGYWN0b3JFcnJvcihhdXRoLCBlcnJvciwgb3BlcmF0aW9uVHlwZSwgdXNlcik7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gX3Byb2Nlc3NDcmVkZW50aWFsU2F2aW5nTWZhQ29udGV4dElmTmVjZXNzYXJ5KGF1dGgsIG9wZXJhdGlvblR5cGUsIGNyZWRlbnRpYWwsIHVzZXIpIHtcclxuICAgIGNvbnN0IGlkVG9rZW5Qcm92aWRlciA9IG9wZXJhdGlvblR5cGUgPT09IFwicmVhdXRoZW50aWNhdGVcIiAvKiBSRUFVVEhFTlRJQ0FURSAqL1xyXG4gICAgICAgID8gY3JlZGVudGlhbC5fZ2V0UmVhdXRoZW50aWNhdGlvblJlc29sdmVyKGF1dGgpXHJcbiAgICAgICAgOiBjcmVkZW50aWFsLl9nZXRJZFRva2VuUmVzcG9uc2UoYXV0aCk7XHJcbiAgICByZXR1cm4gaWRUb2tlblByb3ZpZGVyLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICBpZiAoZXJyb3IuY29kZSA9PT0gYGF1dGgvJHtcIm11bHRpLWZhY3Rvci1hdXRoLXJlcXVpcmVkXCIgLyogTUZBX1JFUVVJUkVEICovfWApIHtcclxuICAgICAgICAgICAgdGhyb3cgTXVsdGlGYWN0b3JFcnJvci5fZnJvbUVycm9yQW5kT3BlcmF0aW9uKGF1dGgsIGVycm9yLCBvcGVyYXRpb25UeXBlLCB1c2VyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGFrZXMgYSBzZXQgb2YgVXNlckluZm8gcHJvdmlkZXIgZGF0YSBhbmQgY29udmVydHMgaXQgdG8gYSBzZXQgb2YgbmFtZXNcclxuICovXHJcbmZ1bmN0aW9uIHByb3ZpZGVyRGF0YUFzTmFtZXMocHJvdmlkZXJEYXRhKSB7XHJcbiAgICByZXR1cm4gbmV3IFNldChwcm92aWRlckRhdGFcclxuICAgICAgICAubWFwKCh7IHByb3ZpZGVySWQgfSkgPT4gcHJvdmlkZXJJZClcclxuICAgICAgICAuZmlsdGVyKHBpZCA9PiAhIXBpZCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBVbmxpbmtzIGEgcHJvdmlkZXIgZnJvbSBhIHVzZXIgYWNjb3VudC5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIHByb3ZpZGVySWQgLSBUaGUgcHJvdmlkZXIgdG8gdW5saW5rLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiB1bmxpbmsodXNlciwgcHJvdmlkZXJJZCkge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgYXdhaXQgX2Fzc2VydExpbmtlZFN0YXR1cyh0cnVlLCB1c2VySW50ZXJuYWwsIHByb3ZpZGVySWQpO1xyXG4gICAgY29uc3QgeyBwcm92aWRlclVzZXJJbmZvIH0gPSBhd2FpdCBkZWxldGVMaW5rZWRBY2NvdW50cyh1c2VySW50ZXJuYWwuYXV0aCwge1xyXG4gICAgICAgIGlkVG9rZW46IGF3YWl0IHVzZXJJbnRlcm5hbC5nZXRJZFRva2VuKCksXHJcbiAgICAgICAgZGVsZXRlUHJvdmlkZXI6IFtwcm92aWRlcklkXVxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBwcm92aWRlcnNMZWZ0ID0gcHJvdmlkZXJEYXRhQXNOYW1lcyhwcm92aWRlclVzZXJJbmZvIHx8IFtdKTtcclxuICAgIHVzZXJJbnRlcm5hbC5wcm92aWRlckRhdGEgPSB1c2VySW50ZXJuYWwucHJvdmlkZXJEYXRhLmZpbHRlcihwZCA9PiBwcm92aWRlcnNMZWZ0LmhhcyhwZC5wcm92aWRlcklkKSk7XHJcbiAgICBpZiAoIXByb3ZpZGVyc0xlZnQuaGFzKFwicGhvbmVcIiAvKiBQSE9ORSAqLykpIHtcclxuICAgICAgICB1c2VySW50ZXJuYWwucGhvbmVOdW1iZXIgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgYXdhaXQgdXNlckludGVybmFsLmF1dGguX3BlcnNpc3RVc2VySWZDdXJyZW50KHVzZXJJbnRlcm5hbCk7XHJcbiAgICByZXR1cm4gdXNlckludGVybmFsO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9saW5rJDEodXNlciwgY3JlZGVudGlhbCwgYnlwYXNzQXV0aFN0YXRlID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX2xvZ291dElmSW52YWxpZGF0ZWQodXNlciwgY3JlZGVudGlhbC5fbGlua1RvSWRUb2tlbih1c2VyLmF1dGgsIGF3YWl0IHVzZXIuZ2V0SWRUb2tlbigpKSwgYnlwYXNzQXV0aFN0YXRlKTtcclxuICAgIHJldHVybiBVc2VyQ3JlZGVudGlhbEltcGwuX2Zvck9wZXJhdGlvbih1c2VyLCBcImxpbmtcIiAvKiBMSU5LICovLCByZXNwb25zZSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX2Fzc2VydExpbmtlZFN0YXR1cyhleHBlY3RlZCwgdXNlciwgcHJvdmlkZXIpIHtcclxuICAgIGF3YWl0IF9yZWxvYWRXaXRob3V0U2F2aW5nKHVzZXIpO1xyXG4gICAgY29uc3QgcHJvdmlkZXJJZHMgPSBwcm92aWRlckRhdGFBc05hbWVzKHVzZXIucHJvdmlkZXJEYXRhKTtcclxuICAgIGNvbnN0IGNvZGUgPSBleHBlY3RlZCA9PT0gZmFsc2VcclxuICAgICAgICA/IFwicHJvdmlkZXItYWxyZWFkeS1saW5rZWRcIiAvKiBQUk9WSURFUl9BTFJFQURZX0xJTktFRCAqL1xyXG4gICAgICAgIDogXCJuby1zdWNoLXByb3ZpZGVyXCIgLyogTk9fU1VDSF9QUk9WSURFUiAqLztcclxuICAgIF9hc3NlcnQocHJvdmlkZXJJZHMuaGFzKHByb3ZpZGVyKSA9PT0gZXhwZWN0ZWQsIHVzZXIuYXV0aCwgY29kZSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX3JlYXV0aGVudGljYXRlKHVzZXIsIGNyZWRlbnRpYWwsIGJ5cGFzc0F1dGhTdGF0ZSA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCB7IGF1dGggfSA9IHVzZXI7XHJcbiAgICBjb25zdCBvcGVyYXRpb25UeXBlID0gXCJyZWF1dGhlbnRpY2F0ZVwiIC8qIFJFQVVUSEVOVElDQVRFICovO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHVzZXIsIF9wcm9jZXNzQ3JlZGVudGlhbFNhdmluZ01mYUNvbnRleHRJZk5lY2Vzc2FyeShhdXRoLCBvcGVyYXRpb25UeXBlLCBjcmVkZW50aWFsLCB1c2VyKSwgYnlwYXNzQXV0aFN0YXRlKTtcclxuICAgICAgICBfYXNzZXJ0KHJlc3BvbnNlLmlkVG9rZW4sIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgY29uc3QgcGFyc2VkID0gX3BhcnNlVG9rZW4ocmVzcG9uc2UuaWRUb2tlbik7XHJcbiAgICAgICAgX2Fzc2VydChwYXJzZWQsIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgY29uc3QgeyBzdWI6IGxvY2FsSWQgfSA9IHBhcnNlZDtcclxuICAgICAgICBfYXNzZXJ0KHVzZXIudWlkID09PSBsb2NhbElkLCBhdXRoLCBcInVzZXItbWlzbWF0Y2hcIiAvKiBVU0VSX01JU01BVENIICovKTtcclxuICAgICAgICByZXR1cm4gVXNlckNyZWRlbnRpYWxJbXBsLl9mb3JPcGVyYXRpb24odXNlciwgb3BlcmF0aW9uVHlwZSwgcmVzcG9uc2UpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAvLyBDb252ZXJ0IHVzZXIgZGVsZXRlZCBlcnJvciBpbnRvIHVzZXIgbWlzbWF0Y2hcclxuICAgICAgICBpZiAoKGUgPT09IG51bGwgfHwgZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZS5jb2RlKSA9PT0gYGF1dGgvJHtcInVzZXItbm90LWZvdW5kXCIgLyogVVNFUl9ERUxFVEVEICovfWApIHtcclxuICAgICAgICAgICAgX2ZhaWwoYXV0aCwgXCJ1c2VyLW1pc21hdGNoXCIgLyogVVNFUl9NSVNNQVRDSCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IGU7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX3NpZ25JbldpdGhDcmVkZW50aWFsKGF1dGgsIGNyZWRlbnRpYWwsIGJ5cGFzc0F1dGhTdGF0ZSA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCBvcGVyYXRpb25UeXBlID0gXCJzaWduSW5cIiAvKiBTSUdOX0lOICovO1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfcHJvY2Vzc0NyZWRlbnRpYWxTYXZpbmdNZmFDb250ZXh0SWZOZWNlc3NhcnkoYXV0aCwgb3BlcmF0aW9uVHlwZSwgY3JlZGVudGlhbCk7XHJcbiAgICBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IFVzZXJDcmVkZW50aWFsSW1wbC5fZnJvbUlkVG9rZW5SZXNwb25zZShhdXRoLCBvcGVyYXRpb25UeXBlLCByZXNwb25zZSk7XHJcbiAgICBpZiAoIWJ5cGFzc0F1dGhTdGF0ZSkge1xyXG4gICAgICAgIGF3YWl0IGF1dGguX3VwZGF0ZUN1cnJlbnRVc2VyKHVzZXJDcmVkZW50aWFsLnVzZXIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHVzZXJDcmVkZW50aWFsO1xyXG59XHJcbi8qKlxyXG4gKiBBc3luY2hyb25vdXNseSBzaWducyBpbiB3aXRoIHRoZSBnaXZlbiBjcmVkZW50aWFscy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogQW4ge0BsaW5rIEF1dGhQcm92aWRlcn0gY2FuIGJlIHVzZWQgdG8gZ2VuZXJhdGUgdGhlIGNyZWRlbnRpYWwuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGNyZWRlbnRpYWwgLSBUaGUgYXV0aCBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoQ3JlZGVudGlhbChhdXRoLCBjcmVkZW50aWFsKSB7XHJcbiAgICByZXR1cm4gX3NpZ25JbldpdGhDcmVkZW50aWFsKF9jYXN0QXV0aChhdXRoKSwgY3JlZGVudGlhbCk7XHJcbn1cclxuLyoqXHJcbiAqIExpbmtzIHRoZSB1c2VyIGFjY291bnQgd2l0aCB0aGUgZ2l2ZW4gY3JlZGVudGlhbHMuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEFuIHtAbGluayBBdXRoUHJvdmlkZXJ9IGNhbiBiZSB1c2VkIHRvIGdlbmVyYXRlIHRoZSBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gY3JlZGVudGlhbCAtIFRoZSBhdXRoIGNyZWRlbnRpYWwuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGxpbmtXaXRoQ3JlZGVudGlhbCh1c2VyLCBjcmVkZW50aWFsKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBhd2FpdCBfYXNzZXJ0TGlua2VkU3RhdHVzKGZhbHNlLCB1c2VySW50ZXJuYWwsIGNyZWRlbnRpYWwucHJvdmlkZXJJZCk7XHJcbiAgICByZXR1cm4gX2xpbmskMSh1c2VySW50ZXJuYWwsIGNyZWRlbnRpYWwpO1xyXG59XHJcbi8qKlxyXG4gKiBSZS1hdXRoZW50aWNhdGVzIGEgdXNlciB1c2luZyBhIGZyZXNoIGNyZWRlbnRpYWwuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFVzZSBiZWZvcmUgb3BlcmF0aW9ucyBzdWNoIGFzIHtAbGluayB1cGRhdGVQYXNzd29yZH0gdGhhdCByZXF1aXJlIHRva2VucyBmcm9tIHJlY2VudCBzaWduLWluXHJcbiAqIGF0dGVtcHRzLiBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCB0byByZWNvdmVyIGZyb20gYSBgQ1JFREVOVElBTF9UT09fT0xEX0xPR0lOX0FHQUlOYCBlcnJvci5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIGNyZWRlbnRpYWwgLSBUaGUgYXV0aCBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiByZWF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFsKHVzZXIsIGNyZWRlbnRpYWwpIHtcclxuICAgIHJldHVybiBfcmVhdXRoZW50aWNhdGUoZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpLCBjcmVkZW50aWFsKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoQ3VzdG9tVG9rZW4kMShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25JbldpdGhDdXN0b21Ub2tlblwiIC8qIFNJR05fSU5fV0lUSF9DVVNUT01fVE9LRU4gKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEFzeW5jaHJvbm91c2x5IHNpZ25zIGluIHVzaW5nIGEgY3VzdG9tIHRva2VuLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBDdXN0b20gdG9rZW5zIGFyZSB1c2VkIHRvIGludGVncmF0ZSBGaXJlYmFzZSBBdXRoIHdpdGggZXhpc3RpbmcgYXV0aCBzeXN0ZW1zLCBhbmQgbXVzdFxyXG4gKiBiZSBnZW5lcmF0ZWQgYnkgYW4gYXV0aCBiYWNrZW5kIHVzaW5nIHRoZVxyXG4gKiB7QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvcmVmZXJlbmNlL2FkbWluL25vZGUvYWRtaW4uYXV0aC5BdXRoI2NyZWF0ZWN1c3RvbXRva2VuIHwgY3JlYXRlQ3VzdG9tVG9rZW59XHJcbiAqIG1ldGhvZCBpbiB0aGUge0BsaW5rIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL2F1dGgvYWRtaW4gfCBBZG1pbiBTREt9IC5cclxuICpcclxuICogRmFpbHMgd2l0aCBhbiBlcnJvciBpZiB0aGUgdG9rZW4gaXMgaW52YWxpZCwgZXhwaXJlZCwgb3Igbm90IGFjY2VwdGVkIGJ5IHRoZSBGaXJlYmFzZSBBdXRoIHNlcnZpY2UuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGN1c3RvbVRva2VuIC0gVGhlIGN1c3RvbSB0b2tlbiB0byBzaWduIGluIHdpdGguXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25JbldpdGhDdXN0b21Ub2tlbihhdXRoLCBjdXN0b21Ub2tlbikge1xyXG4gICAgY29uc3QgYXV0aEludGVybmFsID0gX2Nhc3RBdXRoKGF1dGgpO1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzaWduSW5XaXRoQ3VzdG9tVG9rZW4kMShhdXRoSW50ZXJuYWwsIHtcclxuICAgICAgICB0b2tlbjogY3VzdG9tVG9rZW4sXHJcbiAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWVcclxuICAgIH0pO1xyXG4gICAgY29uc3QgY3JlZCA9IGF3YWl0IFVzZXJDcmVkZW50aWFsSW1wbC5fZnJvbUlkVG9rZW5SZXNwb25zZShhdXRoSW50ZXJuYWwsIFwic2lnbkluXCIgLyogU0lHTl9JTiAqLywgcmVzcG9uc2UpO1xyXG4gICAgYXdhaXQgYXV0aEludGVybmFsLl91cGRhdGVDdXJyZW50VXNlcihjcmVkLnVzZXIpO1xyXG4gICAgcmV0dXJuIGNyZWQ7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgTXVsdGlGYWN0b3JJbmZvSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihmYWN0b3JJZCwgcmVzcG9uc2UpIHtcclxuICAgICAgICB0aGlzLmZhY3RvcklkID0gZmFjdG9ySWQ7XHJcbiAgICAgICAgdGhpcy51aWQgPSByZXNwb25zZS5tZmFFbnJvbGxtZW50SWQ7XHJcbiAgICAgICAgdGhpcy5lbnJvbGxtZW50VGltZSA9IG5ldyBEYXRlKHJlc3BvbnNlLmVucm9sbGVkQXQpLnRvVVRDU3RyaW5nKCk7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5TmFtZSA9IHJlc3BvbnNlLmRpc3BsYXlOYW1lO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIF9mcm9tU2VydmVyUmVzcG9uc2UoYXV0aCwgZW5yb2xsbWVudCkge1xyXG4gICAgICAgIGlmICgncGhvbmVJbmZvJyBpbiBlbnJvbGxtZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQaG9uZU11bHRpRmFjdG9ySW5mby5fZnJvbVNlcnZlclJlc3BvbnNlKGF1dGgsIGVucm9sbG1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gX2ZhaWwoYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBQaG9uZU11bHRpRmFjdG9ySW5mbyBleHRlbmRzIE11bHRpRmFjdG9ySW5mb0ltcGwge1xyXG4gICAgY29uc3RydWN0b3IocmVzcG9uc2UpIHtcclxuICAgICAgICBzdXBlcihcInBob25lXCIgLyogUEhPTkUgKi8sIHJlc3BvbnNlKTtcclxuICAgICAgICB0aGlzLnBob25lTnVtYmVyID0gcmVzcG9uc2UucGhvbmVJbmZvO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIF9mcm9tU2VydmVyUmVzcG9uc2UoX2F1dGgsIGVucm9sbG1lbnQpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFBob25lTXVsdGlGYWN0b3JJbmZvKGVucm9sbG1lbnQpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9zZXRBY3Rpb25Db2RlU2V0dGluZ3NPblJlcXVlc3QoYXV0aCwgcmVxdWVzdCwgYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICBfYXNzZXJ0KCgoX2EgPSBhY3Rpb25Db2RlU2V0dGluZ3MudXJsKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubGVuZ3RoKSA+IDAsIGF1dGgsIFwiaW52YWxpZC1jb250aW51ZS11cmlcIiAvKiBJTlZBTElEX0NPTlRJTlVFX1VSSSAqLyk7XHJcbiAgICBfYXNzZXJ0KHR5cGVvZiBhY3Rpb25Db2RlU2V0dGluZ3MuZHluYW1pY0xpbmtEb21haW4gPT09ICd1bmRlZmluZWQnIHx8XHJcbiAgICAgICAgYWN0aW9uQ29kZVNldHRpbmdzLmR5bmFtaWNMaW5rRG9tYWluLmxlbmd0aCA+IDAsIGF1dGgsIFwiaW52YWxpZC1keW5hbWljLWxpbmstZG9tYWluXCIgLyogSU5WQUxJRF9EWU5BTUlDX0xJTktfRE9NQUlOICovKTtcclxuICAgIHJlcXVlc3QuY29udGludWVVcmwgPSBhY3Rpb25Db2RlU2V0dGluZ3MudXJsO1xyXG4gICAgcmVxdWVzdC5keW5hbWljTGlua0RvbWFpbiA9IGFjdGlvbkNvZGVTZXR0aW5ncy5keW5hbWljTGlua0RvbWFpbjtcclxuICAgIHJlcXVlc3QuY2FuSGFuZGxlQ29kZUluQXBwID0gYWN0aW9uQ29kZVNldHRpbmdzLmhhbmRsZUNvZGVJbkFwcDtcclxuICAgIGlmIChhY3Rpb25Db2RlU2V0dGluZ3MuaU9TKSB7XHJcbiAgICAgICAgX2Fzc2VydChhY3Rpb25Db2RlU2V0dGluZ3MuaU9TLmJ1bmRsZUlkLmxlbmd0aCA+IDAsIGF1dGgsIFwibWlzc2luZy1pb3MtYnVuZGxlLWlkXCIgLyogTUlTU0lOR19JT1NfQlVORExFX0lEICovKTtcclxuICAgICAgICByZXF1ZXN0LmlPU0J1bmRsZUlkID0gYWN0aW9uQ29kZVNldHRpbmdzLmlPUy5idW5kbGVJZDtcclxuICAgIH1cclxuICAgIGlmIChhY3Rpb25Db2RlU2V0dGluZ3MuYW5kcm9pZCkge1xyXG4gICAgICAgIF9hc3NlcnQoYWN0aW9uQ29kZVNldHRpbmdzLmFuZHJvaWQucGFja2FnZU5hbWUubGVuZ3RoID4gMCwgYXV0aCwgXCJtaXNzaW5nLWFuZHJvaWQtcGtnLW5hbWVcIiAvKiBNSVNTSU5HX0FORFJPSURfUEFDS0FHRV9OQU1FICovKTtcclxuICAgICAgICByZXF1ZXN0LmFuZHJvaWRJbnN0YWxsQXBwID0gYWN0aW9uQ29kZVNldHRpbmdzLmFuZHJvaWQuaW5zdGFsbEFwcDtcclxuICAgICAgICByZXF1ZXN0LmFuZHJvaWRNaW5pbXVtVmVyc2lvbkNvZGUgPVxyXG4gICAgICAgICAgICBhY3Rpb25Db2RlU2V0dGluZ3MuYW5kcm9pZC5taW5pbXVtVmVyc2lvbjtcclxuICAgICAgICByZXF1ZXN0LmFuZHJvaWRQYWNrYWdlTmFtZSA9IGFjdGlvbkNvZGVTZXR0aW5ncy5hbmRyb2lkLnBhY2thZ2VOYW1lO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBTZW5kcyBhIHBhc3N3b3JkIHJlc2V0IGVtYWlsIHRvIHRoZSBnaXZlbiBlbWFpbCBhZGRyZXNzLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUbyBjb21wbGV0ZSB0aGUgcGFzc3dvcmQgcmVzZXQsIGNhbGwge0BsaW5rIGNvbmZpcm1QYXNzd29yZFJlc2V0fSB3aXRoIHRoZSBjb2RlIHN1cHBsaWVkIGluXHJcbiAqIHRoZSBlbWFpbCBzZW50IHRvIHRoZSB1c2VyLCBhbG9uZyB3aXRoIHRoZSBuZXcgcGFzc3dvcmQgc3BlY2lmaWVkIGJ5IHRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIGNvbnN0IGFjdGlvbkNvZGVTZXR0aW5ncyA9IHtcclxuICogICB1cmw6ICdodHRwczovL3d3dy5leGFtcGxlLmNvbS8/ZW1haWw9dXNlckBleGFtcGxlLmNvbScsXHJcbiAqICAgaU9TOiB7XHJcbiAqICAgICAgYnVuZGxlSWQ6ICdjb20uZXhhbXBsZS5pb3MnXHJcbiAqICAgfSxcclxuICogICBhbmRyb2lkOiB7XHJcbiAqICAgICBwYWNrYWdlTmFtZTogJ2NvbS5leGFtcGxlLmFuZHJvaWQnLFxyXG4gKiAgICAgaW5zdGFsbEFwcDogdHJ1ZSxcclxuICogICAgIG1pbmltdW1WZXJzaW9uOiAnMTInXHJcbiAqICAgfSxcclxuICogICBoYW5kbGVDb2RlSW5BcHA6IHRydWVcclxuICogfTtcclxuICogYXdhaXQgc2VuZFBhc3N3b3JkUmVzZXRFbWFpbChhdXRoLCAndXNlckBleGFtcGxlLmNvbScsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAqIC8vIE9idGFpbiBjb2RlIGZyb20gdXNlci5cclxuICogYXdhaXQgY29uZmlybVBhc3N3b3JkUmVzZXQoJ3VzZXJAZXhhbXBsZS5jb20nLCBjb2RlKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGVtYWlsIC0gVGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzLlxyXG4gKiBAcGFyYW0gYWN0aW9uQ29kZVNldHRpbmdzIC0gVGhlIHtAbGluayBBY3Rpb25Db2RlU2V0dGluZ3N9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzZW5kUGFzc3dvcmRSZXNldEVtYWlsKGF1dGgsIGVtYWlsLCBhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgIGNvbnN0IGF1dGhNb2R1bGFyID0gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpO1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICByZXF1ZXN0VHlwZTogXCJQQVNTV09SRF9SRVNFVFwiIC8qIFBBU1NXT1JEX1JFU0VUICovLFxyXG4gICAgICAgIGVtYWlsXHJcbiAgICB9O1xyXG4gICAgaWYgKGFjdGlvbkNvZGVTZXR0aW5ncykge1xyXG4gICAgICAgIF9zZXRBY3Rpb25Db2RlU2V0dGluZ3NPblJlcXVlc3QoYXV0aE1vZHVsYXIsIHJlcXVlc3QsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAgICB9XHJcbiAgICBhd2FpdCBzZW5kUGFzc3dvcmRSZXNldEVtYWlsJDEoYXV0aE1vZHVsYXIsIHJlcXVlc3QpO1xyXG59XHJcbi8qKlxyXG4gKiBDb21wbGV0ZXMgdGhlIHBhc3N3b3JkIHJlc2V0IHByb2Nlc3MsIGdpdmVuIGEgY29uZmlybWF0aW9uIGNvZGUgYW5kIG5ldyBwYXNzd29yZC5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gb29iQ29kZSAtIEEgY29uZmlybWF0aW9uIGNvZGUgc2VudCB0byB0aGUgdXNlci5cclxuICogQHBhcmFtIG5ld1Bhc3N3b3JkIC0gVGhlIG5ldyBwYXNzd29yZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gY29uZmlybVBhc3N3b3JkUmVzZXQoYXV0aCwgb29iQ29kZSwgbmV3UGFzc3dvcmQpIHtcclxuICAgIGF3YWl0IHJlc2V0UGFzc3dvcmQoZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLCB7XHJcbiAgICAgICAgb29iQ29kZSxcclxuICAgICAgICBuZXdQYXNzd29yZFxyXG4gICAgfSk7XHJcbiAgICAvLyBEbyBub3QgcmV0dXJuIHRoZSBlbWFpbC5cclxufVxyXG4vKipcclxuICogQXBwbGllcyBhIHZlcmlmaWNhdGlvbiBjb2RlIHNlbnQgdG8gdGhlIHVzZXIgYnkgZW1haWwgb3Igb3RoZXIgb3V0LW9mLWJhbmQgbWVjaGFuaXNtLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBvb2JDb2RlIC0gQSB2ZXJpZmljYXRpb24gY29kZSBzZW50IHRvIHRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBhcHBseUFjdGlvbkNvZGUoYXV0aCwgb29iQ29kZSkge1xyXG4gICAgYXdhaXQgYXBwbHlBY3Rpb25Db2RlJDEoZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLCB7IG9vYkNvZGUgfSk7XHJcbn1cclxuLyoqXHJcbiAqIENoZWNrcyBhIHZlcmlmaWNhdGlvbiBjb2RlIHNlbnQgdG8gdGhlIHVzZXIgYnkgZW1haWwgb3Igb3RoZXIgb3V0LW9mLWJhbmQgbWVjaGFuaXNtLlxyXG4gKlxyXG4gKiBAcmV0dXJucyBtZXRhZGF0YSBhYm91dCB0aGUgY29kZS5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gb29iQ29kZSAtIEEgdmVyaWZpY2F0aW9uIGNvZGUgc2VudCB0byB0aGUgdXNlci5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gY2hlY2tBY3Rpb25Db2RlKGF1dGgsIG9vYkNvZGUpIHtcclxuICAgIGNvbnN0IGF1dGhNb2R1bGFyID0gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpO1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXNldFBhc3N3b3JkKGF1dGhNb2R1bGFyLCB7IG9vYkNvZGUgfSk7XHJcbiAgICAvLyBFbWFpbCBjb3VsZCBiZSBlbXB0eSBvbmx5IGlmIHRoZSByZXF1ZXN0IHR5cGUgaXMgRU1BSUxfU0lHTklOIG9yXHJcbiAgICAvLyBWRVJJRllfQU5EX0NIQU5HRV9FTUFJTC5cclxuICAgIC8vIE5ldyBlbWFpbCBzaG91bGQgbm90IGJlIGVtcHR5IGlmIHRoZSByZXF1ZXN0IHR5cGUgaXNcclxuICAgIC8vIFZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMLlxyXG4gICAgLy8gTXVsdGktZmFjdG9yIGluZm8gY291bGQgbm90IGJlIGVtcHR5IGlmIHRoZSByZXF1ZXN0IHR5cGUgaXNcclxuICAgIC8vIFJFVkVSVF9TRUNPTkRfRkFDVE9SX0FERElUSU9OLlxyXG4gICAgY29uc3Qgb3BlcmF0aW9uID0gcmVzcG9uc2UucmVxdWVzdFR5cGU7XHJcbiAgICBfYXNzZXJ0KG9wZXJhdGlvbiwgYXV0aE1vZHVsYXIsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICBzd2l0Y2ggKG9wZXJhdGlvbikge1xyXG4gICAgICAgIGNhc2UgXCJFTUFJTF9TSUdOSU5cIiAvKiBFTUFJTF9TSUdOSU4gKi86XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJWRVJJRllfQU5EX0NIQU5HRV9FTUFJTFwiIC8qIFZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMICovOlxyXG4gICAgICAgICAgICBfYXNzZXJ0KHJlc3BvbnNlLm5ld0VtYWlsLCBhdXRoTW9kdWxhciwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcIlJFVkVSVF9TRUNPTkRfRkFDVE9SX0FERElUSU9OXCIgLyogUkVWRVJUX1NFQ09ORF9GQUNUT1JfQURESVRJT04gKi86XHJcbiAgICAgICAgICAgIF9hc3NlcnQocmVzcG9uc2UubWZhSW5mbywgYXV0aE1vZHVsYXIsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgLy8gZmFsbCB0aHJvdWdoXHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgX2Fzc2VydChyZXNwb25zZS5lbWFpbCwgYXV0aE1vZHVsYXIsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICB9XHJcbiAgICAvLyBUaGUgbXVsdGktZmFjdG9yIGluZm8gZm9yIHJldmVydCBzZWNvbmQgZmFjdG9yIGFkZGl0aW9uXHJcbiAgICBsZXQgbXVsdGlGYWN0b3JJbmZvID0gbnVsbDtcclxuICAgIGlmIChyZXNwb25zZS5tZmFJbmZvKSB7XHJcbiAgICAgICAgbXVsdGlGYWN0b3JJbmZvID0gTXVsdGlGYWN0b3JJbmZvSW1wbC5fZnJvbVNlcnZlclJlc3BvbnNlKF9jYXN0QXV0aChhdXRoTW9kdWxhciksIHJlc3BvbnNlLm1mYUluZm8pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgIGVtYWlsOiAocmVzcG9uc2UucmVxdWVzdFR5cGUgPT09IFwiVkVSSUZZX0FORF9DSEFOR0VfRU1BSUxcIiAvKiBWRVJJRllfQU5EX0NIQU5HRV9FTUFJTCAqL1xyXG4gICAgICAgICAgICAgICAgPyByZXNwb25zZS5uZXdFbWFpbFxyXG4gICAgICAgICAgICAgICAgOiByZXNwb25zZS5lbWFpbCkgfHwgbnVsbCxcclxuICAgICAgICAgICAgcHJldmlvdXNFbWFpbDogKHJlc3BvbnNlLnJlcXVlc3RUeXBlID09PSBcIlZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMXCIgLyogVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwgKi9cclxuICAgICAgICAgICAgICAgID8gcmVzcG9uc2UuZW1haWxcclxuICAgICAgICAgICAgICAgIDogcmVzcG9uc2UubmV3RW1haWwpIHx8IG51bGwsXHJcbiAgICAgICAgICAgIG11bHRpRmFjdG9ySW5mb1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb3BlcmF0aW9uXHJcbiAgICB9O1xyXG59XHJcbi8qKlxyXG4gKiBDaGVja3MgYSBwYXNzd29yZCByZXNldCBjb2RlIHNlbnQgdG8gdGhlIHVzZXIgYnkgZW1haWwgb3Igb3RoZXIgb3V0LW9mLWJhbmQgbWVjaGFuaXNtLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB0aGUgdXNlcidzIGVtYWlsIGFkZHJlc3MgaWYgdmFsaWQuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGNvZGUgLSBBIHZlcmlmaWNhdGlvbiBjb2RlIHNlbnQgdG8gdGhlIHVzZXIuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHZlcmlmeVBhc3N3b3JkUmVzZXRDb2RlKGF1dGgsIGNvZGUpIHtcclxuICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgY2hlY2tBY3Rpb25Db2RlKGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKSwgY29kZSk7XHJcbiAgICAvLyBFbWFpbCBzaG91bGQgYWx3YXlzIGJlIHByZXNlbnQgc2luY2UgYSBjb2RlIHdhcyBzZW50IHRvIGl0XHJcbiAgICByZXR1cm4gZGF0YS5lbWFpbDtcclxufVxyXG4vKipcclxuICogQ3JlYXRlcyBhIG5ldyB1c2VyIGFjY291bnQgYXNzb2NpYXRlZCB3aXRoIHRoZSBzcGVjaWZpZWQgZW1haWwgYWRkcmVzcyBhbmQgcGFzc3dvcmQuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIE9uIHN1Y2Nlc3NmdWwgY3JlYXRpb24gb2YgdGhlIHVzZXIgYWNjb3VudCwgdGhpcyB1c2VyIHdpbGwgYWxzbyBiZSBzaWduZWQgaW4gdG8geW91ciBhcHBsaWNhdGlvbi5cclxuICpcclxuICogVXNlciBhY2NvdW50IGNyZWF0aW9uIGNhbiBmYWlsIGlmIHRoZSBhY2NvdW50IGFscmVhZHkgZXhpc3RzIG9yIHRoZSBwYXNzd29yZCBpcyBpbnZhbGlkLlxyXG4gKlxyXG4gKiBOb3RlOiBUaGUgZW1haWwgYWRkcmVzcyBhY3RzIGFzIGEgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSB1c2VyIGFuZCBlbmFibGVzIGFuIGVtYWlsLWJhc2VkXHJcbiAqIHBhc3N3b3JkIHJlc2V0LiBUaGlzIGZ1bmN0aW9uIHdpbGwgY3JlYXRlIGEgbmV3IHVzZXIgYWNjb3VudCBhbmQgc2V0IHRoZSBpbml0aWFsIHVzZXIgcGFzc3dvcmQuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGVtYWlsIC0gVGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzLlxyXG4gKiBAcGFyYW0gcGFzc3dvcmQgLSBUaGUgdXNlcidzIGNob3NlbiBwYXNzd29yZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLCBwYXNzd29yZCkge1xyXG4gICAgY29uc3QgYXV0aEludGVybmFsID0gX2Nhc3RBdXRoKGF1dGgpO1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzaWduVXAoYXV0aEludGVybmFsLCB7XHJcbiAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWUsXHJcbiAgICAgICAgZW1haWwsXHJcbiAgICAgICAgcGFzc3dvcmRcclxuICAgIH0pO1xyXG4gICAgY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBVc2VyQ3JlZGVudGlhbEltcGwuX2Zyb21JZFRva2VuUmVzcG9uc2UoYXV0aEludGVybmFsLCBcInNpZ25JblwiIC8qIFNJR05fSU4gKi8sIHJlc3BvbnNlKTtcclxuICAgIGF3YWl0IGF1dGhJbnRlcm5hbC5fdXBkYXRlQ3VycmVudFVzZXIodXNlckNyZWRlbnRpYWwudXNlcik7XHJcbiAgICByZXR1cm4gdXNlckNyZWRlbnRpYWw7XHJcbn1cclxuLyoqXHJcbiAqIEFzeW5jaHJvbm91c2x5IHNpZ25zIGluIHVzaW5nIGFuIGVtYWlsIGFuZCBwYXNzd29yZC5cclxuICpcclxuICogQHJlbWFya3NcclxuICogRmFpbHMgd2l0aCBhbiBlcnJvciBpZiB0aGUgZW1haWwgYWRkcmVzcyBhbmQgcGFzc3dvcmQgZG8gbm90IG1hdGNoLlxyXG4gKlxyXG4gKiBOb3RlOiBUaGUgdXNlcidzIHBhc3N3b3JkIGlzIE5PVCB0aGUgcGFzc3dvcmQgdXNlZCB0byBhY2Nlc3MgdGhlIHVzZXIncyBlbWFpbCBhY2NvdW50LiBUaGVcclxuICogZW1haWwgYWRkcmVzcyBzZXJ2ZXMgYXMgYSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHVzZXIsIGFuZCB0aGUgcGFzc3dvcmQgaXMgdXNlZCB0byBhY2Nlc3NcclxuICogdGhlIHVzZXIncyBhY2NvdW50IGluIHlvdXIgRmlyZWJhc2UgcHJvamVjdC4gU2VlIGFsc286IHtAbGluayBjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmR9LlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBlbWFpbCAtIFRoZSB1c2VycyBlbWFpbCBhZGRyZXNzLlxyXG4gKiBAcGFyYW0gcGFzc3dvcmQgLSBUaGUgdXNlcnMgcGFzc3dvcmQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLCBwYXNzd29yZCkge1xyXG4gICAgcmV0dXJuIHNpZ25JbldpdGhDcmVkZW50aWFsKGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKSwgRW1haWxBdXRoUHJvdmlkZXIuY3JlZGVudGlhbChlbWFpbCwgcGFzc3dvcmQpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogU2VuZHMgYSBzaWduLWluIGVtYWlsIGxpbmsgdG8gdGhlIHVzZXIgd2l0aCB0aGUgc3BlY2lmaWVkIGVtYWlsLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUaGUgc2lnbi1pbiBvcGVyYXRpb24gaGFzIHRvIGFsd2F5cyBiZSBjb21wbGV0ZWQgaW4gdGhlIGFwcCB1bmxpa2Ugb3RoZXIgb3V0IG9mIGJhbmQgZW1haWxcclxuICogYWN0aW9ucyAocGFzc3dvcmQgcmVzZXQgYW5kIGVtYWlsIHZlcmlmaWNhdGlvbnMpLiBUaGlzIGlzIGJlY2F1c2UsIGF0IHRoZSBlbmQgb2YgdGhlIGZsb3csXHJcbiAqIHRoZSB1c2VyIGlzIGV4cGVjdGVkIHRvIGJlIHNpZ25lZCBpbiBhbmQgdGhlaXIgQXV0aCBzdGF0ZSBwZXJzaXN0ZWQgd2l0aGluIHRoZSBhcHAuXHJcbiAqXHJcbiAqIFRvIGNvbXBsZXRlIHNpZ24gaW4gd2l0aCB0aGUgZW1haWwgbGluaywgY2FsbCB7QGxpbmsgc2lnbkluV2l0aEVtYWlsTGlua30gd2l0aCB0aGUgZW1haWxcclxuICogYWRkcmVzcyBhbmQgdGhlIGVtYWlsIGxpbmsgc3VwcGxpZWQgaW4gdGhlIGVtYWlsIHNlbnQgdG8gdGhlIHVzZXIuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogY29uc3QgYWN0aW9uQ29kZVNldHRpbmdzID0ge1xyXG4gKiAgIHVybDogJ2h0dHBzOi8vd3d3LmV4YW1wbGUuY29tLz9lbWFpbD11c2VyQGV4YW1wbGUuY29tJyxcclxuICogICBpT1M6IHtcclxuICogICAgICBidW5kbGVJZDogJ2NvbS5leGFtcGxlLmlvcydcclxuICogICB9LFxyXG4gKiAgIGFuZHJvaWQ6IHtcclxuICogICAgIHBhY2thZ2VOYW1lOiAnY29tLmV4YW1wbGUuYW5kcm9pZCcsXHJcbiAqICAgICBpbnN0YWxsQXBwOiB0cnVlLFxyXG4gKiAgICAgbWluaW11bVZlcnNpb246ICcxMidcclxuICogICB9LFxyXG4gKiAgIGhhbmRsZUNvZGVJbkFwcDogdHJ1ZVxyXG4gKiB9O1xyXG4gKiBhd2FpdCBzZW5kU2lnbkluTGlua1RvRW1haWwoYXV0aCwgJ3VzZXJAZXhhbXBsZS5jb20nLCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gKiAvLyBPYnRhaW4gZW1haWxMaW5rIGZyb20gdGhlIHVzZXIuXHJcbiAqIGlmKGlzU2lnbkluV2l0aEVtYWlsTGluayhhdXRoLCBlbWFpbExpbmspKSB7XHJcbiAqICAgYXdhaXQgc2lnbkluV2l0aEVtYWlsTGluaygndXNlckBleGFtcGxlLmNvbScsICd1c2VyQGV4YW1wbGUuY29tJywgZW1haWxMaW5rKTtcclxuICogfVxyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIGF1dGhJbnRlcm5hbCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBlbWFpbCAtIFRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcy5cclxuICogQHBhcmFtIGFjdGlvbkNvZGVTZXR0aW5ncyAtIFRoZSB7QGxpbmsgQWN0aW9uQ29kZVNldHRpbmdzfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2VuZFNpZ25JbkxpbmtUb0VtYWlsKGF1dGgsIGVtYWlsLCBhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgIGNvbnN0IGF1dGhNb2R1bGFyID0gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpO1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICByZXF1ZXN0VHlwZTogXCJFTUFJTF9TSUdOSU5cIiAvKiBFTUFJTF9TSUdOSU4gKi8sXHJcbiAgICAgICAgZW1haWxcclxuICAgIH07XHJcbiAgICBfYXNzZXJ0KGFjdGlvbkNvZGVTZXR0aW5ncy5oYW5kbGVDb2RlSW5BcHAsIGF1dGhNb2R1bGFyLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgaWYgKGFjdGlvbkNvZGVTZXR0aW5ncykge1xyXG4gICAgICAgIF9zZXRBY3Rpb25Db2RlU2V0dGluZ3NPblJlcXVlc3QoYXV0aE1vZHVsYXIsIHJlcXVlc3QsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAgICB9XHJcbiAgICBhd2FpdCBzZW5kU2lnbkluTGlua1RvRW1haWwkMShhdXRoTW9kdWxhciwgcmVxdWVzdCk7XHJcbn1cclxuLyoqXHJcbiAqIENoZWNrcyBpZiBhbiBpbmNvbWluZyBsaW5rIGlzIGEgc2lnbi1pbiB3aXRoIGVtYWlsIGxpbmsgc3VpdGFibGUgZm9yIHtAbGluayBzaWduSW5XaXRoRW1haWxMaW5rfS5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gZW1haWxMaW5rIC0gVGhlIGxpbmsgc2VudCB0byB0aGUgdXNlcidzIGVtYWlsIGFkZHJlc3MuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGlzU2lnbkluV2l0aEVtYWlsTGluayhhdXRoLCBlbWFpbExpbmspIHtcclxuICAgIGNvbnN0IGFjdGlvbkNvZGVVcmwgPSBBY3Rpb25Db2RlVVJMLnBhcnNlTGluayhlbWFpbExpbmspO1xyXG4gICAgcmV0dXJuIChhY3Rpb25Db2RlVXJsID09PSBudWxsIHx8IGFjdGlvbkNvZGVVcmwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFjdGlvbkNvZGVVcmwub3BlcmF0aW9uKSA9PT0gXCJFTUFJTF9TSUdOSU5cIiAvKiBFTUFJTF9TSUdOSU4gKi87XHJcbn1cclxuLyoqXHJcbiAqIEFzeW5jaHJvbm91c2x5IHNpZ25zIGluIHVzaW5nIGFuIGVtYWlsIGFuZCBzaWduLWluIGVtYWlsIGxpbmsuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIElmIG5vIGxpbmsgaXMgcGFzc2VkLCB0aGUgbGluayBpcyBpbmZlcnJlZCBmcm9tIHRoZSBjdXJyZW50IFVSTC5cclxuICpcclxuICogRmFpbHMgd2l0aCBhbiBlcnJvciBpZiB0aGUgZW1haWwgYWRkcmVzcyBpcyBpbnZhbGlkIG9yIE9UUCBpbiBlbWFpbCBsaW5rIGV4cGlyZXMuXHJcbiAqXHJcbiAqIE5vdGU6IENvbmZpcm0gdGhlIGxpbmsgaXMgYSBzaWduLWluIGVtYWlsIGxpbmsgYmVmb3JlIGNhbGxpbmcgdGhpcyBtZXRob2QgZmlyZWJhc2UuYXV0aC5BdXRoLmlzU2lnbkluV2l0aEVtYWlsTGluay5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBjb25zdCBhY3Rpb25Db2RlU2V0dGluZ3MgPSB7XHJcbiAqICAgdXJsOiAnaHR0cHM6Ly93d3cuZXhhbXBsZS5jb20vP2VtYWlsPXVzZXJAZXhhbXBsZS5jb20nLFxyXG4gKiAgIGlPUzoge1xyXG4gKiAgICAgIGJ1bmRsZUlkOiAnY29tLmV4YW1wbGUuaW9zJ1xyXG4gKiAgIH0sXHJcbiAqICAgYW5kcm9pZDoge1xyXG4gKiAgICAgcGFja2FnZU5hbWU6ICdjb20uZXhhbXBsZS5hbmRyb2lkJyxcclxuICogICAgIGluc3RhbGxBcHA6IHRydWUsXHJcbiAqICAgICBtaW5pbXVtVmVyc2lvbjogJzEyJ1xyXG4gKiAgIH0sXHJcbiAqICAgaGFuZGxlQ29kZUluQXBwOiB0cnVlXHJcbiAqIH07XHJcbiAqIGF3YWl0IHNlbmRTaWduSW5MaW5rVG9FbWFpbChhdXRoLCAndXNlckBleGFtcGxlLmNvbScsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAqIC8vIE9idGFpbiBlbWFpbExpbmsgZnJvbSB0aGUgdXNlci5cclxuICogaWYoaXNTaWduSW5XaXRoRW1haWxMaW5rKGF1dGgsIGVtYWlsTGluaykpIHtcclxuICogICBhd2FpdCBzaWduSW5XaXRoRW1haWxMaW5rKCd1c2VyQGV4YW1wbGUuY29tJywgJ3VzZXJAZXhhbXBsZS5jb20nLCBlbWFpbExpbmspO1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBlbWFpbCAtIFRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcy5cclxuICogQHBhcmFtIGVtYWlsTGluayAtIFRoZSBsaW5rIHNlbnQgdG8gdGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoRW1haWxMaW5rKGF1dGgsIGVtYWlsLCBlbWFpbExpbmspIHtcclxuICAgIGNvbnN0IGF1dGhNb2R1bGFyID0gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpO1xyXG4gICAgY29uc3QgY3JlZGVudGlhbCA9IEVtYWlsQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxXaXRoTGluayhlbWFpbCwgZW1haWxMaW5rIHx8IF9nZXRDdXJyZW50VXJsKCkpO1xyXG4gICAgLy8gQ2hlY2sgaWYgdGhlIHRlbmFudCBJRCBpbiB0aGUgZW1haWwgbGluayBtYXRjaGVzIHRoZSB0ZW5hbnQgSUQgb24gQXV0aFxyXG4gICAgLy8gaW5zdGFuY2UuXHJcbiAgICBfYXNzZXJ0KGNyZWRlbnRpYWwuX3RlbmFudElkID09PSAoYXV0aE1vZHVsYXIudGVuYW50SWQgfHwgbnVsbCksIGF1dGhNb2R1bGFyLCBcInRlbmFudC1pZC1taXNtYXRjaFwiIC8qIFRFTkFOVF9JRF9NSVNNQVRDSCAqLyk7XHJcbiAgICByZXR1cm4gc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aE1vZHVsYXIsIGNyZWRlbnRpYWwpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUF1dGhVcmkoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpjcmVhdGVBdXRoVXJpXCIgLyogQ1JFQVRFX0FVVEhfVVJJICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBHZXRzIHRoZSBsaXN0IG9mIHBvc3NpYmxlIHNpZ24gaW4gbWV0aG9kcyBmb3IgdGhlIGdpdmVuIGVtYWlsIGFkZHJlc3MuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRoaXMgaXMgdXNlZnVsIHRvIGRpZmZlcmVudGlhdGUgbWV0aG9kcyBvZiBzaWduLWluIGZvciB0aGUgc2FtZSBwcm92aWRlciwgZWcuXHJcbiAqIHtAbGluayBFbWFpbEF1dGhQcm92aWRlcn0gd2hpY2ggaGFzIDIgbWV0aG9kcyBvZiBzaWduLWluLFxyXG4gKiB7QGxpbmsgU2lnbkluTWV0aG9kfS5FTUFJTF9QQVNTV09SRCBhbmRcclxuICoge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRU1BSUxfTElOSy5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gZW1haWwgLSBUaGUgdXNlcidzIGVtYWlsIGFkZHJlc3MuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGZldGNoU2lnbkluTWV0aG9kc0ZvckVtYWlsKGF1dGgsIGVtYWlsKSB7XHJcbiAgICAvLyBjcmVhdGVBdXRoVXJpIHJldHVybnMgYW4gZXJyb3IgaWYgY29udGludWUgVVJJIGlzIG5vdCBodHRwIG9yIGh0dHBzLlxyXG4gICAgLy8gRm9yIGVudmlyb25tZW50cyBsaWtlIENvcmRvdmEsIENocm9tZSBleHRlbnNpb25zLCBuYXRpdmUgZnJhbWV3b3JrcywgZmlsZVxyXG4gICAgLy8gc3lzdGVtcywgZXRjLCB1c2UgaHR0cDovL2xvY2FsaG9zdCBhcyBjb250aW51ZSBVUkwuXHJcbiAgICBjb25zdCBjb250aW51ZVVyaSA9IF9pc0h0dHBPckh0dHBzKCkgPyBfZ2V0Q3VycmVudFVybCgpIDogJ2h0dHA6Ly9sb2NhbGhvc3QnO1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICBpZGVudGlmaWVyOiBlbWFpbCxcclxuICAgICAgICBjb250aW51ZVVyaVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHsgc2lnbmluTWV0aG9kcyB9ID0gYXdhaXQgY3JlYXRlQXV0aFVyaShnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCksIHJlcXVlc3QpO1xyXG4gICAgcmV0dXJuIHNpZ25pbk1ldGhvZHMgfHwgW107XHJcbn1cclxuLyoqXHJcbiAqIFNlbmRzIGEgdmVyaWZpY2F0aW9uIGVtYWlsIHRvIGEgdXNlci5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhlIHZlcmlmaWNhdGlvbiBwcm9jZXNzIGlzIGNvbXBsZXRlZCBieSBjYWxsaW5nIHtAbGluayBhcHBseUFjdGlvbkNvZGV9LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIGNvbnN0IGFjdGlvbkNvZGVTZXR0aW5ncyA9IHtcclxuICogICB1cmw6ICdodHRwczovL3d3dy5leGFtcGxlLmNvbS8/ZW1haWw9dXNlckBleGFtcGxlLmNvbScsXHJcbiAqICAgaU9TOiB7XHJcbiAqICAgICAgYnVuZGxlSWQ6ICdjb20uZXhhbXBsZS5pb3MnXHJcbiAqICAgfSxcclxuICogICBhbmRyb2lkOiB7XHJcbiAqICAgICBwYWNrYWdlTmFtZTogJ2NvbS5leGFtcGxlLmFuZHJvaWQnLFxyXG4gKiAgICAgaW5zdGFsbEFwcDogdHJ1ZSxcclxuICogICAgIG1pbmltdW1WZXJzaW9uOiAnMTInXHJcbiAqICAgfSxcclxuICogICBoYW5kbGVDb2RlSW5BcHA6IHRydWVcclxuICogfTtcclxuICogYXdhaXQgc2VuZEVtYWlsVmVyaWZpY2F0aW9uKHVzZXIsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAqIC8vIE9idGFpbiBjb2RlIGZyb20gdGhlIHVzZXIuXHJcbiAqIGF3YWl0IGFwcGx5QWN0aW9uQ29kZShhdXRoLCBjb2RlKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBhY3Rpb25Db2RlU2V0dGluZ3MgLSBUaGUge0BsaW5rIEFjdGlvbkNvZGVTZXR0aW5nc30uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNlbmRFbWFpbFZlcmlmaWNhdGlvbih1c2VyLCBhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGNvbnN0IGlkVG9rZW4gPSBhd2FpdCB1c2VyLmdldElkVG9rZW4oKTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgcmVxdWVzdFR5cGU6IFwiVkVSSUZZX0VNQUlMXCIgLyogVkVSSUZZX0VNQUlMICovLFxyXG4gICAgICAgIGlkVG9rZW5cclxuICAgIH07XHJcbiAgICBpZiAoYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICAgICAgX3NldEFjdGlvbkNvZGVTZXR0aW5nc09uUmVxdWVzdCh1c2VySW50ZXJuYWwuYXV0aCwgcmVxdWVzdCwgYWN0aW9uQ29kZVNldHRpbmdzKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHsgZW1haWwgfSA9IGF3YWl0IHNlbmRFbWFpbFZlcmlmaWNhdGlvbiQxKHVzZXJJbnRlcm5hbC5hdXRoLCByZXF1ZXN0KTtcclxuICAgIGlmIChlbWFpbCAhPT0gdXNlci5lbWFpbCkge1xyXG4gICAgICAgIGF3YWl0IHVzZXIucmVsb2FkKCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFNlbmRzIGEgdmVyaWZpY2F0aW9uIGVtYWlsIHRvIGEgbmV3IGVtYWlsIGFkZHJlc3MuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRoZSB1c2VyJ3MgZW1haWwgd2lsbCBiZSB1cGRhdGVkIHRvIHRoZSBuZXcgb25lIGFmdGVyIGJlaW5nIHZlcmlmaWVkLlxyXG4gKlxyXG4gKiBJZiB5b3UgaGF2ZSBhIGN1c3RvbSBlbWFpbCBhY3Rpb24gaGFuZGxlciwgeW91IGNhbiBjb21wbGV0ZSB0aGUgdmVyaWZpY2F0aW9uIHByb2Nlc3MgYnkgY2FsbGluZ1xyXG4gKiB7QGxpbmsgYXBwbHlBY3Rpb25Db2RlfS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBjb25zdCBhY3Rpb25Db2RlU2V0dGluZ3MgPSB7XHJcbiAqICAgdXJsOiAnaHR0cHM6Ly93d3cuZXhhbXBsZS5jb20vP2VtYWlsPXVzZXJAZXhhbXBsZS5jb20nLFxyXG4gKiAgIGlPUzoge1xyXG4gKiAgICAgIGJ1bmRsZUlkOiAnY29tLmV4YW1wbGUuaW9zJ1xyXG4gKiAgIH0sXHJcbiAqICAgYW5kcm9pZDoge1xyXG4gKiAgICAgcGFja2FnZU5hbWU6ICdjb20uZXhhbXBsZS5hbmRyb2lkJyxcclxuICogICAgIGluc3RhbGxBcHA6IHRydWUsXHJcbiAqICAgICBtaW5pbXVtVmVyc2lvbjogJzEyJ1xyXG4gKiAgIH0sXHJcbiAqICAgaGFuZGxlQ29kZUluQXBwOiB0cnVlXHJcbiAqIH07XHJcbiAqIGF3YWl0IHZlcmlmeUJlZm9yZVVwZGF0ZUVtYWlsKHVzZXIsICduZXdlbWFpbEBleGFtcGxlLmNvbScsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAqIC8vIE9idGFpbiBjb2RlIGZyb20gdGhlIHVzZXIuXHJcbiAqIGF3YWl0IGFwcGx5QWN0aW9uQ29kZShhdXRoLCBjb2RlKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBuZXdFbWFpbCAtIFRoZSBuZXcgZW1haWwgYWRkcmVzcyB0byBiZSB2ZXJpZmllZCBiZWZvcmUgdXBkYXRlLlxyXG4gKiBAcGFyYW0gYWN0aW9uQ29kZVNldHRpbmdzIC0gVGhlIHtAbGluayBBY3Rpb25Db2RlU2V0dGluZ3N9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiB2ZXJpZnlCZWZvcmVVcGRhdGVFbWFpbCh1c2VyLCBuZXdFbWFpbCwgYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBjb25zdCBpZFRva2VuID0gYXdhaXQgdXNlci5nZXRJZFRva2VuKCk7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0ge1xyXG4gICAgICAgIHJlcXVlc3RUeXBlOiBcIlZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMXCIgLyogVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwgKi8sXHJcbiAgICAgICAgaWRUb2tlbixcclxuICAgICAgICBuZXdFbWFpbFxyXG4gICAgfTtcclxuICAgIGlmIChhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgICAgICBfc2V0QWN0aW9uQ29kZVNldHRpbmdzT25SZXF1ZXN0KHVzZXJJbnRlcm5hbC5hdXRoLCByZXF1ZXN0LCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgeyBlbWFpbCB9ID0gYXdhaXQgdmVyaWZ5QW5kQ2hhbmdlRW1haWwodXNlckludGVybmFsLmF1dGgsIHJlcXVlc3QpO1xyXG4gICAgaWYgKGVtYWlsICE9PSB1c2VyLmVtYWlsKSB7XHJcbiAgICAgICAgLy8gSWYgdGhlIGxvY2FsIGNvcHkgb2YgdGhlIGVtYWlsIG9uIHVzZXIgaXMgb3V0ZGF0ZWQsIHJlbG9hZCB0aGVcclxuICAgICAgICAvLyB1c2VyLlxyXG4gICAgICAgIGF3YWl0IHVzZXIucmVsb2FkKCk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlUHJvZmlsZSQxKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6dXBkYXRlXCIgLyogU0VUX0FDQ09VTlRfSU5GTyAqLywgcmVxdWVzdCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFVwZGF0ZXMgYSB1c2VyJ3MgcHJvZmlsZSBkYXRhLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gcHJvZmlsZSAtIFRoZSBwcm9maWxlJ3MgYGRpc3BsYXlOYW1lYCBhbmQgYHBob3RvVVJMYCB0byB1cGRhdGUuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVByb2ZpbGUodXNlciwgeyBkaXNwbGF5TmFtZSwgcGhvdG9VUkw6IHBob3RvVXJsIH0pIHtcclxuICAgIGlmIChkaXNwbGF5TmFtZSA9PT0gdW5kZWZpbmVkICYmIHBob3RvVXJsID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBjb25zdCBpZFRva2VuID0gYXdhaXQgdXNlckludGVybmFsLmdldElkVG9rZW4oKTtcclxuICAgIGNvbnN0IHByb2ZpbGVSZXF1ZXN0ID0ge1xyXG4gICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgZGlzcGxheU5hbWUsXHJcbiAgICAgICAgcGhvdG9VcmwsXHJcbiAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWVcclxuICAgIH07XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHVzZXJJbnRlcm5hbCwgdXBkYXRlUHJvZmlsZSQxKHVzZXJJbnRlcm5hbC5hdXRoLCBwcm9maWxlUmVxdWVzdCkpO1xyXG4gICAgdXNlckludGVybmFsLmRpc3BsYXlOYW1lID0gcmVzcG9uc2UuZGlzcGxheU5hbWUgfHwgbnVsbDtcclxuICAgIHVzZXJJbnRlcm5hbC5waG90b1VSTCA9IHJlc3BvbnNlLnBob3RvVXJsIHx8IG51bGw7XHJcbiAgICAvLyBVcGRhdGUgdGhlIHBhc3N3b3JkIHByb3ZpZGVyIGFzIHdlbGxcclxuICAgIGNvbnN0IHBhc3N3b3JkUHJvdmlkZXIgPSB1c2VySW50ZXJuYWwucHJvdmlkZXJEYXRhLmZpbmQoKHsgcHJvdmlkZXJJZCB9KSA9PiBwcm92aWRlcklkID09PSBcInBhc3N3b3JkXCIgLyogUEFTU1dPUkQgKi8pO1xyXG4gICAgaWYgKHBhc3N3b3JkUHJvdmlkZXIpIHtcclxuICAgICAgICBwYXNzd29yZFByb3ZpZGVyLmRpc3BsYXlOYW1lID0gdXNlckludGVybmFsLmRpc3BsYXlOYW1lO1xyXG4gICAgICAgIHBhc3N3b3JkUHJvdmlkZXIucGhvdG9VUkwgPSB1c2VySW50ZXJuYWwucGhvdG9VUkw7XHJcbiAgICB9XHJcbiAgICBhd2FpdCB1c2VySW50ZXJuYWwuX3VwZGF0ZVRva2Vuc0lmTmVjZXNzYXJ5KHJlc3BvbnNlKTtcclxufVxyXG4vKipcclxuICogVXBkYXRlcyB0aGUgdXNlcidzIGVtYWlsIGFkZHJlc3MuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEFuIGVtYWlsIHdpbGwgYmUgc2VudCB0byB0aGUgb3JpZ2luYWwgZW1haWwgYWRkcmVzcyAoaWYgaXQgd2FzIHNldCkgdGhhdCBhbGxvd3MgdG8gcmV2b2tlIHRoZVxyXG4gKiBlbWFpbCBhZGRyZXNzIGNoYW5nZSwgaW4gb3JkZXIgdG8gcHJvdGVjdCB0aGVtIGZyb20gYWNjb3VudCBoaWphY2tpbmcuXHJcbiAqXHJcbiAqIEltcG9ydGFudDogdGhpcyBpcyBhIHNlY3VyaXR5IHNlbnNpdGl2ZSBvcGVyYXRpb24gdGhhdCByZXF1aXJlcyB0aGUgdXNlciB0byBoYXZlIHJlY2VudGx5IHNpZ25lZFxyXG4gKiBpbi4gSWYgdGhpcyByZXF1aXJlbWVudCBpc24ndCBtZXQsIGFzayB0aGUgdXNlciB0byBhdXRoZW50aWNhdGUgYWdhaW4gYW5kIHRoZW4gY2FsbFxyXG4gKiB7QGxpbmsgcmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbH0uXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBuZXdFbWFpbCAtIFRoZSBuZXcgZW1haWwgYWRkcmVzcy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlRW1haWwodXNlciwgbmV3RW1haWwpIHtcclxuICAgIHJldHVybiB1cGRhdGVFbWFpbE9yUGFzc3dvcmQoZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpLCBuZXdFbWFpbCwgbnVsbCk7XHJcbn1cclxuLyoqXHJcbiAqIFVwZGF0ZXMgdGhlIHVzZXIncyBwYXNzd29yZC5cclxuICpcclxuICogQHJlbWFya3NcclxuICogSW1wb3J0YW50OiB0aGlzIGlzIGEgc2VjdXJpdHkgc2Vuc2l0aXZlIG9wZXJhdGlvbiB0aGF0IHJlcXVpcmVzIHRoZSB1c2VyIHRvIGhhdmUgcmVjZW50bHkgc2lnbmVkXHJcbiAqIGluLiBJZiB0aGlzIHJlcXVpcmVtZW50IGlzbid0IG1ldCwgYXNrIHRoZSB1c2VyIHRvIGF1dGhlbnRpY2F0ZSBhZ2FpbiBhbmQgdGhlbiBjYWxsXHJcbiAqIHtAbGluayByZWF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFsfS5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIG5ld1Bhc3N3b3JkIC0gVGhlIG5ldyBwYXNzd29yZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlUGFzc3dvcmQodXNlciwgbmV3UGFzc3dvcmQpIHtcclxuICAgIHJldHVybiB1cGRhdGVFbWFpbE9yUGFzc3dvcmQoZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpLCBudWxsLCBuZXdQYXNzd29yZCk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlRW1haWxPclBhc3N3b3JkKHVzZXIsIGVtYWlsLCBwYXNzd29yZCkge1xyXG4gICAgY29uc3QgeyBhdXRoIH0gPSB1c2VyO1xyXG4gICAgY29uc3QgaWRUb2tlbiA9IGF3YWl0IHVzZXIuZ2V0SWRUb2tlbigpO1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICBpZFRva2VuLFxyXG4gICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlXHJcbiAgICB9O1xyXG4gICAgaWYgKGVtYWlsKSB7XHJcbiAgICAgICAgcmVxdWVzdC5lbWFpbCA9IGVtYWlsO1xyXG4gICAgfVxyXG4gICAgaWYgKHBhc3N3b3JkKSB7XHJcbiAgICAgICAgcmVxdWVzdC5wYXNzd29yZCA9IHBhc3N3b3JkO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfbG9nb3V0SWZJbnZhbGlkYXRlZCh1c2VyLCB1cGRhdGVFbWFpbFBhc3N3b3JkKGF1dGgsIHJlcXVlc3QpKTtcclxuICAgIGF3YWl0IHVzZXIuX3VwZGF0ZVRva2Vuc0lmTmVjZXNzYXJ5KHJlc3BvbnNlLCAvKiByZWxvYWQgKi8gdHJ1ZSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFBhcnNlIHRoZSBgQWRkaXRpb25hbFVzZXJJbmZvYCBmcm9tIHRoZSBJRCB0b2tlbiByZXNwb25zZS5cclxuICpcclxuICovXHJcbmZ1bmN0aW9uIF9mcm9tSWRUb2tlblJlc3BvbnNlKGlkVG9rZW5SZXNwb25zZSkge1xyXG4gICAgdmFyIF9hLCBfYjtcclxuICAgIGlmICghaWRUb2tlblJlc3BvbnNlKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBjb25zdCB7IHByb3ZpZGVySWQgfSA9IGlkVG9rZW5SZXNwb25zZTtcclxuICAgIGNvbnN0IHByb2ZpbGUgPSBpZFRva2VuUmVzcG9uc2UucmF3VXNlckluZm9cclxuICAgICAgICA/IEpTT04ucGFyc2UoaWRUb2tlblJlc3BvbnNlLnJhd1VzZXJJbmZvKVxyXG4gICAgICAgIDoge307XHJcbiAgICBjb25zdCBpc05ld1VzZXIgPSBpZFRva2VuUmVzcG9uc2UuaXNOZXdVc2VyIHx8XHJcbiAgICAgICAgaWRUb2tlblJlc3BvbnNlLmtpbmQgPT09IFwiaWRlbnRpdHl0b29sa2l0I1NpZ251cE5ld1VzZXJSZXNwb25zZVwiIC8qIFNpZ251cE5ld1VzZXIgKi87XHJcbiAgICBpZiAoIXByb3ZpZGVySWQgJiYgKGlkVG9rZW5SZXNwb25zZSA9PT0gbnVsbCB8fCBpZFRva2VuUmVzcG9uc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGlkVG9rZW5SZXNwb25zZS5pZFRva2VuKSkge1xyXG4gICAgICAgIGNvbnN0IHNpZ25JblByb3ZpZGVyID0gKF9iID0gKF9hID0gX3BhcnNlVG9rZW4oaWRUb2tlblJlc3BvbnNlLmlkVG9rZW4pKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZmlyZWJhc2UpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYlsnc2lnbl9pbl9wcm92aWRlciddO1xyXG4gICAgICAgIGlmIChzaWduSW5Qcm92aWRlcikge1xyXG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJlZFByb3ZpZGVySWQgPSBzaWduSW5Qcm92aWRlciAhPT0gXCJhbm9ueW1vdXNcIiAvKiBBTk9OWU1PVVMgKi8gJiZcclxuICAgICAgICAgICAgICAgIHNpZ25JblByb3ZpZGVyICE9PSBcImN1c3RvbVwiIC8qIENVU1RPTSAqL1xyXG4gICAgICAgICAgICAgICAgPyBzaWduSW5Qcm92aWRlclxyXG4gICAgICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgICAgICAgICAvLyBVc2VzIGdlbmVyaWMgY2xhc3MgaW4gYWNjb3JkYW5jZSB3aXRoIHRoZSBsZWdhY3kgU0RLLlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdlbmVyaWNBZGRpdGlvbmFsVXNlckluZm8oaXNOZXdVc2VyLCBmaWx0ZXJlZFByb3ZpZGVySWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICghcHJvdmlkZXJJZCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgc3dpdGNoIChwcm92aWRlcklkKSB7XHJcbiAgICAgICAgY2FzZSBcImZhY2Vib29rLmNvbVwiIC8qIEZBQ0VCT09LICovOlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEZhY2Vib29rQWRkaXRpb25hbFVzZXJJbmZvKGlzTmV3VXNlciwgcHJvZmlsZSk7XHJcbiAgICAgICAgY2FzZSBcImdpdGh1Yi5jb21cIiAvKiBHSVRIVUIgKi86XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR2l0aHViQWRkaXRpb25hbFVzZXJJbmZvKGlzTmV3VXNlciwgcHJvZmlsZSk7XHJcbiAgICAgICAgY2FzZSBcImdvb2dsZS5jb21cIiAvKiBHT09HTEUgKi86XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR29vZ2xlQWRkaXRpb25hbFVzZXJJbmZvKGlzTmV3VXNlciwgcHJvZmlsZSk7XHJcbiAgICAgICAgY2FzZSBcInR3aXR0ZXIuY29tXCIgLyogVFdJVFRFUiAqLzpcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUd2l0dGVyQWRkaXRpb25hbFVzZXJJbmZvKGlzTmV3VXNlciwgcHJvZmlsZSwgaWRUb2tlblJlc3BvbnNlLnNjcmVlbk5hbWUgfHwgbnVsbCk7XHJcbiAgICAgICAgY2FzZSBcImN1c3RvbVwiIC8qIENVU1RPTSAqLzpcclxuICAgICAgICBjYXNlIFwiYW5vbnltb3VzXCIgLyogQU5PTllNT1VTICovOlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdlbmVyaWNBZGRpdGlvbmFsVXNlckluZm8oaXNOZXdVc2VyLCBudWxsKTtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdlbmVyaWNBZGRpdGlvbmFsVXNlckluZm8oaXNOZXdVc2VyLCBwcm92aWRlcklkLCBwcm9maWxlKTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBHZW5lcmljQWRkaXRpb25hbFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKGlzTmV3VXNlciwgcHJvdmlkZXJJZCwgcHJvZmlsZSA9IHt9KSB7XHJcbiAgICAgICAgdGhpcy5pc05ld1VzZXIgPSBpc05ld1VzZXI7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlcklkID0gcHJvdmlkZXJJZDtcclxuICAgICAgICB0aGlzLnByb2ZpbGUgPSBwcm9maWxlO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIEZlZGVyYXRlZEFkZGl0aW9uYWxVc2VySW5mb1dpdGhVc2VybmFtZSBleHRlbmRzIEdlbmVyaWNBZGRpdGlvbmFsVXNlckluZm8ge1xyXG4gICAgY29uc3RydWN0b3IoaXNOZXdVc2VyLCBwcm92aWRlcklkLCBwcm9maWxlLCB1c2VybmFtZSkge1xyXG4gICAgICAgIHN1cGVyKGlzTmV3VXNlciwgcHJvdmlkZXJJZCwgcHJvZmlsZSk7XHJcbiAgICAgICAgdGhpcy51c2VybmFtZSA9IHVzZXJuYW1lO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIEZhY2Vib29rQWRkaXRpb25hbFVzZXJJbmZvIGV4dGVuZHMgR2VuZXJpY0FkZGl0aW9uYWxVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcihpc05ld1VzZXIsIHByb2ZpbGUpIHtcclxuICAgICAgICBzdXBlcihpc05ld1VzZXIsIFwiZmFjZWJvb2suY29tXCIgLyogRkFDRUJPT0sgKi8sIHByb2ZpbGUpO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIEdpdGh1YkFkZGl0aW9uYWxVc2VySW5mbyBleHRlbmRzIEZlZGVyYXRlZEFkZGl0aW9uYWxVc2VySW5mb1dpdGhVc2VybmFtZSB7XHJcbiAgICBjb25zdHJ1Y3Rvcihpc05ld1VzZXIsIHByb2ZpbGUpIHtcclxuICAgICAgICBzdXBlcihpc05ld1VzZXIsIFwiZ2l0aHViLmNvbVwiIC8qIEdJVEhVQiAqLywgcHJvZmlsZSwgdHlwZW9mIChwcm9maWxlID09PSBudWxsIHx8IHByb2ZpbGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHByb2ZpbGUubG9naW4pID09PSAnc3RyaW5nJyA/IHByb2ZpbGUgPT09IG51bGwgfHwgcHJvZmlsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcHJvZmlsZS5sb2dpbiA6IG51bGwpO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIEdvb2dsZUFkZGl0aW9uYWxVc2VySW5mbyBleHRlbmRzIEdlbmVyaWNBZGRpdGlvbmFsVXNlckluZm8ge1xyXG4gICAgY29uc3RydWN0b3IoaXNOZXdVc2VyLCBwcm9maWxlKSB7XHJcbiAgICAgICAgc3VwZXIoaXNOZXdVc2VyLCBcImdvb2dsZS5jb21cIiAvKiBHT09HTEUgKi8sIHByb2ZpbGUpO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIFR3aXR0ZXJBZGRpdGlvbmFsVXNlckluZm8gZXh0ZW5kcyBGZWRlcmF0ZWRBZGRpdGlvbmFsVXNlckluZm9XaXRoVXNlcm5hbWUge1xyXG4gICAgY29uc3RydWN0b3IoaXNOZXdVc2VyLCBwcm9maWxlLCBzY3JlZW5OYW1lKSB7XHJcbiAgICAgICAgc3VwZXIoaXNOZXdVc2VyLCBcInR3aXR0ZXIuY29tXCIgLyogVFdJVFRFUiAqLywgcHJvZmlsZSwgc2NyZWVuTmFtZSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEV4dHJhY3RzIHByb3ZpZGVyIHNwZWNpZmljIHtAbGluayBBZGRpdGlvbmFsVXNlckluZm99IGZvciB0aGUgZ2l2ZW4gY3JlZGVudGlhbC5cclxuICpcclxuICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QWRkaXRpb25hbFVzZXJJbmZvKHVzZXJDcmVkZW50aWFsKSB7XHJcbiAgICBjb25zdCB7IHVzZXIsIF90b2tlblJlc3BvbnNlIH0gPSB1c2VyQ3JlZGVudGlhbDtcclxuICAgIGlmICh1c2VyLmlzQW5vbnltb3VzICYmICFfdG9rZW5SZXNwb25zZSkge1xyXG4gICAgICAgIC8vIEhhbmRsZSB0aGUgc3BlY2lhbCBjYXNlIHdoZXJlIHNpZ25JbkFub255bW91c2x5KCkgZ2V0cyBjYWxsZWQgdHdpY2UuXHJcbiAgICAgICAgLy8gTm8gbmV0d29yayBjYWxsIGlzIG1hZGUgc28gdGhlcmUncyBub3RoaW5nIHRvIGFjdHVhbGx5IGZpbGwgdGhpcyBpblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQ6IG51bGwsXHJcbiAgICAgICAgICAgIGlzTmV3VXNlcjogZmFsc2UsXHJcbiAgICAgICAgICAgIHByb2ZpbGU6IG51bGxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9mcm9tSWRUb2tlblJlc3BvbnNlKF90b2tlblJlc3BvbnNlKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBOb24tb3B0aW9uYWwgYXV0aCBtZXRob2RzLlxyXG4vKipcclxuICogQ2hhbmdlcyB0aGUgdHlwZSBvZiBwZXJzaXN0ZW5jZSBvbiB0aGUge0BsaW5rIEF1dGh9IGluc3RhbmNlIGZvciB0aGUgY3VycmVudGx5IHNhdmVkXHJcbiAqIGBBdXRoYCBzZXNzaW9uIGFuZCBhcHBsaWVzIHRoaXMgdHlwZSBvZiBwZXJzaXN0ZW5jZSBmb3IgZnV0dXJlIHNpZ24taW4gcmVxdWVzdHMsIGluY2x1ZGluZ1xyXG4gKiBzaWduLWluIHdpdGggcmVkaXJlY3QgcmVxdWVzdHMuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRoaXMgbWFrZXMgaXQgZWFzeSBmb3IgYSB1c2VyIHNpZ25pbmcgaW4gdG8gc3BlY2lmeSB3aGV0aGVyIHRoZWlyIHNlc3Npb24gc2hvdWxkIGJlXHJcbiAqIHJlbWVtYmVyZWQgb3Igbm90LiBJdCBhbHNvIG1ha2VzIGl0IGVhc2llciB0byBuZXZlciBwZXJzaXN0IHRoZSBgQXV0aGAgc3RhdGUgZm9yIGFwcGxpY2F0aW9uc1xyXG4gKiB0aGF0IGFyZSBzaGFyZWQgYnkgb3RoZXIgdXNlcnMgb3IgaGF2ZSBzZW5zaXRpdmUgZGF0YS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBzZXRQZXJzaXN0ZW5jZShhdXRoLCBicm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIHBlcnNpc3RlbmNlIC0gVGhlIHtAbGluayBQZXJzaXN0ZW5jZX0gdG8gdXNlLlxyXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHJlc29sdmVzIG9uY2UgdGhlIHBlcnNpc3RlbmNlIGNoYW5nZSBoYXMgY29tcGxldGVkXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHNldFBlcnNpc3RlbmNlKGF1dGgsIHBlcnNpc3RlbmNlKSB7XHJcbiAgICByZXR1cm4gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLnNldFBlcnNpc3RlbmNlKHBlcnNpc3RlbmNlKTtcclxufVxyXG4vKipcclxuICogQWRkcyBhbiBvYnNlcnZlciBmb3IgY2hhbmdlcyB0byB0aGUgc2lnbmVkLWluIHVzZXIncyBJRCB0b2tlbiwgd2hpY2ggaW5jbHVkZXMgc2lnbi1pbixcclxuICogc2lnbi1vdXQsIGFuZCB0b2tlbiByZWZyZXNoIGV2ZW50cy5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gbmV4dE9yT2JzZXJ2ZXIgLSBjYWxsYmFjayB0cmlnZ2VyZWQgb24gY2hhbmdlLlxyXG4gKiBAcGFyYW0gZXJyb3IgLSBjYWxsYmFjayB0cmlnZ2VyZWQgb24gZXJyb3IuXHJcbiAqIEBwYXJhbSBjb21wbGV0ZWQgLSBjYWxsYmFjayB0cmlnZ2VyZWQgd2hlbiBvYnNlcnZlciBpcyByZW1vdmVkLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBvbklkVG9rZW5DaGFuZ2VkKGF1dGgsIG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKSB7XHJcbiAgICByZXR1cm4gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLm9uSWRUb2tlbkNoYW5nZWQobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpO1xyXG59XHJcbi8qKlxyXG4gKiBBZGRzIGFuIG9ic2VydmVyIGZvciBjaGFuZ2VzIHRvIHRoZSB1c2VyJ3Mgc2lnbi1pbiBzdGF0ZS5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVG8ga2VlcCB0aGUgb2xkIGJlaGF2aW9yLCBzZWUge0BsaW5rIG9uSWRUb2tlbkNoYW5nZWR9LlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBuZXh0T3JPYnNlcnZlciAtIGNhbGxiYWNrIHRyaWdnZXJlZCBvbiBjaGFuZ2UuXHJcbiAqIEBwYXJhbSBlcnJvciAtIGNhbGxiYWNrIHRyaWdnZXJlZCBvbiBlcnJvci5cclxuICogQHBhcmFtIGNvbXBsZXRlZCAtIGNhbGxiYWNrIHRyaWdnZXJlZCB3aGVuIG9ic2VydmVyIGlzIHJlbW92ZWQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIG9uQXV0aFN0YXRlQ2hhbmdlZChhdXRoLCBuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCkge1xyXG4gICAgcmV0dXJuIGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKS5vbkF1dGhTdGF0ZUNoYW5nZWQobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpO1xyXG59XHJcbi8qKlxyXG4gKiBTZXRzIHRoZSBjdXJyZW50IGxhbmd1YWdlIHRvIHRoZSBkZWZhdWx0IGRldmljZS9icm93c2VyIHByZWZlcmVuY2UuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gdXNlRGV2aWNlTGFuZ3VhZ2UoYXV0aCkge1xyXG4gICAgZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLnVzZURldmljZUxhbmd1YWdlKCk7XHJcbn1cclxuLyoqXHJcbiAqIEFzeW5jaHJvbm91c2x5IHNldHMgdGhlIHByb3ZpZGVkIHVzZXIgYXMge0BsaW5rIEF1dGguY3VycmVudFVzZXJ9IG9uIHRoZVxyXG4gKiB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEEgbmV3IGluc3RhbmNlIGNvcHkgb2YgdGhlIHVzZXIgcHJvdmlkZWQgd2lsbCBiZSBtYWRlIGFuZCBzZXQgYXMgY3VycmVudFVzZXIuXHJcbiAqXHJcbiAqIFRoaXMgd2lsbCB0cmlnZ2VyIHtAbGluayBvbkF1dGhTdGF0ZUNoYW5nZWR9IGFuZCB7QGxpbmsgb25JZFRva2VuQ2hhbmdlZH0gbGlzdGVuZXJzXHJcbiAqIGxpa2Ugb3RoZXIgc2lnbiBpbiBtZXRob2RzLlxyXG4gKlxyXG4gKiBUaGUgb3BlcmF0aW9uIGZhaWxzIHdpdGggYW4gZXJyb3IgaWYgdGhlIHVzZXIgdG8gYmUgdXBkYXRlZCBiZWxvbmdzIHRvIGEgZGlmZmVyZW50IEZpcmViYXNlXHJcbiAqIHByb2plY3QuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIHVzZXIgLSBUaGUgbmV3IHtAbGluayBVc2VyfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlQ3VycmVudFVzZXIoYXV0aCwgdXNlcikge1xyXG4gICAgcmV0dXJuIGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKS51cGRhdGVDdXJyZW50VXNlcih1c2VyKTtcclxufVxyXG4vKipcclxuICogU2lnbnMgb3V0IHRoZSBjdXJyZW50IHVzZXIuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gc2lnbk91dChhdXRoKSB7XHJcbiAgICByZXR1cm4gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLnNpZ25PdXQoKTtcclxufVxyXG4vKipcclxuICogRGVsZXRlcyBhbmQgc2lnbnMgb3V0IHRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJbXBvcnRhbnQ6IHRoaXMgaXMgYSBzZWN1cml0eS1zZW5zaXRpdmUgb3BlcmF0aW9uIHRoYXQgcmVxdWlyZXMgdGhlIHVzZXIgdG8gaGF2ZSByZWNlbnRseVxyXG4gKiBzaWduZWQgaW4uIElmIHRoaXMgcmVxdWlyZW1lbnQgaXNuJ3QgbWV0LCBhc2sgdGhlIHVzZXIgdG8gYXV0aGVudGljYXRlIGFnYWluIGFuZCB0aGVuIGNhbGxcclxuICoge0BsaW5rIHJlYXV0aGVudGljYXRlV2l0aENyZWRlbnRpYWx9LlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBkZWxldGVVc2VyKHVzZXIpIHtcclxuICAgIHJldHVybiBnZXRNb2R1bGFySW5zdGFuY2UodXNlcikuZGVsZXRlKCk7XHJcbn1cblxuY2xhc3MgTXVsdGlGYWN0b3JTZXNzaW9uSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih0eXBlLCBjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLmNyZWRlbnRpYWwgPSBjcmVkZW50aWFsO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIF9mcm9tSWR0b2tlbihpZFRva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNdWx0aUZhY3RvclNlc3Npb25JbXBsKFwiZW5yb2xsXCIgLyogRU5ST0xMICovLCBpZFRva2VuKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBfZnJvbU1mYVBlbmRpbmdDcmVkZW50aWFsKG1mYVBlbmRpbmdDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNdWx0aUZhY3RvclNlc3Npb25JbXBsKFwic2lnbmluXCIgLyogU0lHTl9JTiAqLywgbWZhUGVuZGluZ0NyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIGNvbnN0IGtleSA9IHRoaXMudHlwZSA9PT0gXCJlbnJvbGxcIiAvKiBFTlJPTEwgKi9cclxuICAgICAgICAgICAgPyAnaWRUb2tlbidcclxuICAgICAgICAgICAgOiAncGVuZGluZ0NyZWRlbnRpYWwnO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG11bHRpRmFjdG9yU2Vzc2lvbjoge1xyXG4gICAgICAgICAgICAgICAgW2tleV06IHRoaXMuY3JlZGVudGlhbFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBmcm9tSlNPTihvYmopIHtcclxuICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgIGlmIChvYmogPT09IG51bGwgfHwgb2JqID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmoubXVsdGlGYWN0b3JTZXNzaW9uKSB7XHJcbiAgICAgICAgICAgIGlmICgoX2EgPSBvYmoubXVsdGlGYWN0b3JTZXNzaW9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucGVuZGluZ0NyZWRlbnRpYWwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBNdWx0aUZhY3RvclNlc3Npb25JbXBsLl9mcm9tTWZhUGVuZGluZ0NyZWRlbnRpYWwob2JqLm11bHRpRmFjdG9yU2Vzc2lvbi5wZW5kaW5nQ3JlZGVudGlhbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoKF9iID0gb2JqLm11bHRpRmFjdG9yU2Vzc2lvbikgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmlkVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBNdWx0aUZhY3RvclNlc3Npb25JbXBsLl9mcm9tSWR0b2tlbihvYmoubXVsdGlGYWN0b3JTZXNzaW9uLmlkVG9rZW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIE11bHRpRmFjdG9yUmVzb2x2ZXJJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKHNlc3Npb24sIGhpbnRzLCBzaWduSW5SZXNvbHZlcikge1xyXG4gICAgICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247XHJcbiAgICAgICAgdGhpcy5oaW50cyA9IGhpbnRzO1xyXG4gICAgICAgIHRoaXMuc2lnbkluUmVzb2x2ZXIgPSBzaWduSW5SZXNvbHZlcjtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIHN0YXRpYyBfZnJvbUVycm9yKGF1dGhFeHRlcm4sIGVycm9yKSB7XHJcbiAgICAgICAgY29uc3QgYXV0aCA9IF9jYXN0QXV0aChhdXRoRXh0ZXJuKTtcclxuICAgICAgICBjb25zdCBzZXJ2ZXJSZXNwb25zZSA9IGVycm9yLmN1c3RvbURhdGEuX3NlcnZlclJlc3BvbnNlO1xyXG4gICAgICAgIGNvbnN0IGhpbnRzID0gKHNlcnZlclJlc3BvbnNlLm1mYUluZm8gfHwgW10pLm1hcChlbnJvbGxtZW50ID0+IE11bHRpRmFjdG9ySW5mb0ltcGwuX2Zyb21TZXJ2ZXJSZXNwb25zZShhdXRoLCBlbnJvbGxtZW50KSk7XHJcbiAgICAgICAgX2Fzc2VydChzZXJ2ZXJSZXNwb25zZS5tZmFQZW5kaW5nQ3JlZGVudGlhbCwgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICBjb25zdCBzZXNzaW9uID0gTXVsdGlGYWN0b3JTZXNzaW9uSW1wbC5fZnJvbU1mYVBlbmRpbmdDcmVkZW50aWFsKHNlcnZlclJlc3BvbnNlLm1mYVBlbmRpbmdDcmVkZW50aWFsKTtcclxuICAgICAgICByZXR1cm4gbmV3IE11bHRpRmFjdG9yUmVzb2x2ZXJJbXBsKHNlc3Npb24sIGhpbnRzLCBhc3luYyAoYXNzZXJ0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1mYVJlc3BvbnNlID0gYXdhaXQgYXNzZXJ0aW9uLl9wcm9jZXNzKGF1dGgsIHNlc3Npb24pO1xyXG4gICAgICAgICAgICAvLyBDbGVhciBvdXQgdGhlIHVubmVlZGVkIGZpZWxkcyBmcm9tIHRoZSBvbGQgbG9naW4gcmVzcG9uc2VcclxuICAgICAgICAgICAgZGVsZXRlIHNlcnZlclJlc3BvbnNlLm1mYUluZm87XHJcbiAgICAgICAgICAgIGRlbGV0ZSBzZXJ2ZXJSZXNwb25zZS5tZmFQZW5kaW5nQ3JlZGVudGlhbDtcclxuICAgICAgICAgICAgLy8gVXNlIGluIHRoZSBuZXcgdG9rZW4gJiByZWZyZXNoIHRva2VuIGluIHRoZSBvbGQgcmVzcG9uc2VcclxuICAgICAgICAgICAgY29uc3QgaWRUb2tlblJlc3BvbnNlID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBzZXJ2ZXJSZXNwb25zZSksIHsgaWRUb2tlbjogbWZhUmVzcG9uc2UuaWRUb2tlbiwgcmVmcmVzaFRva2VuOiBtZmFSZXNwb25zZS5yZWZyZXNoVG9rZW4gfSk7XHJcbiAgICAgICAgICAgIC8vIFRPRE86IHdlIHNob3VsZCBjb2xsYXBzZSB0aGlzIHN3aXRjaCBzdGF0ZW1lbnQgaW50byBVc2VyQ3JlZGVudGlhbEltcGwuX2Zvck9wZXJhdGlvbiBhbmQgaGF2ZSBpdCBzdXBwb3J0IHRoZSBTSUdOX0lOIGNhc2VcclxuICAgICAgICAgICAgc3dpdGNoIChlcnJvci5vcGVyYXRpb25UeXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwic2lnbkluXCIgLyogU0lHTl9JTiAqLzpcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IFVzZXJDcmVkZW50aWFsSW1wbC5fZnJvbUlkVG9rZW5SZXNwb25zZShhdXRoLCBlcnJvci5vcGVyYXRpb25UeXBlLCBpZFRva2VuUmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGF1dGguX3VwZGF0ZUN1cnJlbnRVc2VyKHVzZXJDcmVkZW50aWFsLnVzZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1c2VyQ3JlZGVudGlhbDtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJyZWF1dGhlbnRpY2F0ZVwiIC8qIFJFQVVUSEVOVElDQVRFICovOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hc3NlcnQoZXJyb3IudXNlciwgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gVXNlckNyZWRlbnRpYWxJbXBsLl9mb3JPcGVyYXRpb24oZXJyb3IudXNlciwgZXJyb3Iub3BlcmF0aW9uVHlwZSwgaWRUb2tlblJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgX2ZhaWwoYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgcmVzb2x2ZVNpZ25Jbihhc3NlcnRpb25FeHRlcm4pIHtcclxuICAgICAgICBjb25zdCBhc3NlcnRpb24gPSBhc3NlcnRpb25FeHRlcm47XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2lnbkluUmVzb2x2ZXIoYXNzZXJ0aW9uKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogUHJvdmlkZXMgYSB7QGxpbmsgTXVsdGlGYWN0b3JSZXNvbHZlcn0gc3VpdGFibGUgZm9yIGNvbXBsZXRpb24gb2YgYVxyXG4gKiBtdWx0aS1mYWN0b3IgZmxvdy5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gZXJyb3IgLSBUaGUge0BsaW5rIE11bHRpRmFjdG9yRXJyb3J9IHJhaXNlZCBkdXJpbmcgYSBzaWduLWluLCBvclxyXG4gKiByZWF1dGhlbnRpY2F0aW9uIG9wZXJhdGlvbi5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0TXVsdGlGYWN0b3JSZXNvbHZlcihhdXRoLCBlcnJvcikge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgY29uc3QgYXV0aE1vZHVsYXIgPSBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCk7XHJcbiAgICBjb25zdCBlcnJvckludGVybmFsID0gZXJyb3I7XHJcbiAgICBfYXNzZXJ0KGVycm9yLmN1c3RvbURhdGEub3BlcmF0aW9uVHlwZSwgYXV0aE1vZHVsYXIsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICBfYXNzZXJ0KChfYSA9IGVycm9ySW50ZXJuYWwuY3VzdG9tRGF0YS5fc2VydmVyUmVzcG9uc2UpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tZmFQZW5kaW5nQ3JlZGVudGlhbCwgYXV0aE1vZHVsYXIsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICByZXR1cm4gTXVsdGlGYWN0b3JSZXNvbHZlckltcGwuX2Zyb21FcnJvcihhdXRoTW9kdWxhciwgZXJyb3JJbnRlcm5hbCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gc3RhcnRFbnJvbGxQaG9uZU1mYShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YyL2FjY291bnRzL21mYUVucm9sbG1lbnQ6c3RhcnRcIiAvKiBTVEFSVF9QSE9ORV9NRkFfRU5ST0xMTUVOVCAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxyXG5mdW5jdGlvbiBmaW5hbGl6ZUVucm9sbFBob25lTWZhKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjIvYWNjb3VudHMvbWZhRW5yb2xsbWVudDpmaW5hbGl6ZVwiIC8qIEZJTkFMSVpFX1BIT05FX01GQV9FTlJPTExNRU5UICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XHJcbmZ1bmN0aW9uIHdpdGhkcmF3TWZhKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjIvYWNjb3VudHMvbWZhRW5yb2xsbWVudDp3aXRoZHJhd1wiIC8qIFdJVEhEUkFXX01GQSAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxuXG5jbGFzcyBNdWx0aUZhY3RvclVzZXJJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKHVzZXIpIHtcclxuICAgICAgICB0aGlzLnVzZXIgPSB1c2VyO1xyXG4gICAgICAgIHRoaXMuZW5yb2xsZWRGYWN0b3JzID0gW107XHJcbiAgICAgICAgdXNlci5fb25SZWxvYWQodXNlckluZm8gPT4ge1xyXG4gICAgICAgICAgICBpZiAodXNlckluZm8ubWZhSW5mbykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbnJvbGxlZEZhY3RvcnMgPSB1c2VySW5mby5tZmFJbmZvLm1hcChlbnJvbGxtZW50ID0+IE11bHRpRmFjdG9ySW5mb0ltcGwuX2Zyb21TZXJ2ZXJSZXNwb25zZSh1c2VyLmF1dGgsIGVucm9sbG1lbnQpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIF9mcm9tVXNlcih1c2VyKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNdWx0aUZhY3RvclVzZXJJbXBsKHVzZXIpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2V0U2Vzc2lvbigpIHtcclxuICAgICAgICByZXR1cm4gTXVsdGlGYWN0b3JTZXNzaW9uSW1wbC5fZnJvbUlkdG9rZW4oYXdhaXQgdGhpcy51c2VyLmdldElkVG9rZW4oKSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBlbnJvbGwoYXNzZXJ0aW9uRXh0ZXJuLCBkaXNwbGF5TmFtZSkge1xyXG4gICAgICAgIGNvbnN0IGFzc2VydGlvbiA9IGFzc2VydGlvbkV4dGVybjtcclxuICAgICAgICBjb25zdCBzZXNzaW9uID0gKGF3YWl0IHRoaXMuZ2V0U2Vzc2lvbigpKTtcclxuICAgICAgICBjb25zdCBmaW5hbGl6ZU1mYVJlc3BvbnNlID0gYXdhaXQgX2xvZ291dElmSW52YWxpZGF0ZWQodGhpcy51c2VyLCBhc3NlcnRpb24uX3Byb2Nlc3ModGhpcy51c2VyLmF1dGgsIHNlc3Npb24sIGRpc3BsYXlOYW1lKSk7XHJcbiAgICAgICAgLy8gTmV3IHRva2VucyB3aWxsIGJlIGlzc3VlZCBhZnRlciBlbnJvbGxtZW50IG9mIHRoZSBuZXcgc2Vjb25kIGZhY3RvcnMuXHJcbiAgICAgICAgLy8gVGhleSBuZWVkIHRvIGJlIHVwZGF0ZWQgb24gdGhlIHVzZXIuXHJcbiAgICAgICAgYXdhaXQgdGhpcy51c2VyLl91cGRhdGVUb2tlbnNJZk5lY2Vzc2FyeShmaW5hbGl6ZU1mYVJlc3BvbnNlKTtcclxuICAgICAgICAvLyBUaGUgdXNlciBuZWVkcyB0byBiZSByZWxvYWRlZCB0byBnZXQgdGhlIG5ldyBtdWx0aS1mYWN0b3IgaW5mb3JtYXRpb25cclxuICAgICAgICAvLyBmcm9tIHNlcnZlci4gVVNFUl9SRUxPQURFRCBldmVudCB3aWxsIGJlIHRyaWdnZXJlZCBhbmQgYGVucm9sbGVkRmFjdG9yc2BcclxuICAgICAgICAvLyB3aWxsIGJlIHVwZGF0ZWQuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMudXNlci5yZWxvYWQoKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHVuZW5yb2xsKGluZm9PclVpZCkge1xyXG4gICAgICAgIGNvbnN0IG1mYUVucm9sbG1lbnRJZCA9IHR5cGVvZiBpbmZvT3JVaWQgPT09ICdzdHJpbmcnID8gaW5mb09yVWlkIDogaW5mb09yVWlkLnVpZDtcclxuICAgICAgICBjb25zdCBpZFRva2VuID0gYXdhaXQgdGhpcy51c2VyLmdldElkVG9rZW4oKTtcclxuICAgICAgICBjb25zdCBpZFRva2VuUmVzcG9uc2UgPSBhd2FpdCBfbG9nb3V0SWZJbnZhbGlkYXRlZCh0aGlzLnVzZXIsIHdpdGhkcmF3TWZhKHRoaXMudXNlci5hdXRoLCB7XHJcbiAgICAgICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgICAgIG1mYUVucm9sbG1lbnRJZFxyXG4gICAgICAgIH0pKTtcclxuICAgICAgICAvLyBSZW1vdmUgdGhlIHNlY29uZCBmYWN0b3IgZnJvbSB0aGUgdXNlcidzIGxpc3QuXHJcbiAgICAgICAgdGhpcy5lbnJvbGxlZEZhY3RvcnMgPSB0aGlzLmVucm9sbGVkRmFjdG9ycy5maWx0ZXIoKHsgdWlkIH0pID0+IHVpZCAhPT0gbWZhRW5yb2xsbWVudElkKTtcclxuICAgICAgICAvLyBEZXBlbmRpbmcgb24gd2hldGhlciB0aGUgYmFja2VuZCBkZWNpZGVkIHRvIHJldm9rZSB0aGUgdXNlcidzIHNlc3Npb24sXHJcbiAgICAgICAgLy8gdGhlIHRva2VuUmVzcG9uc2UgbWF5IGJlIGVtcHR5LiBJZiB0aGUgdG9rZW5zIHdlcmUgbm90IHVwZGF0ZWQgKGFuZCB0aGV5XHJcbiAgICAgICAgLy8gYXJlIG5vdyBpbnZhbGlkKSwgcmVsb2FkaW5nIHRoZSB1c2VyIHdpbGwgZGlzY292ZXIgdGhpcyBhbmQgaW52YWxpZGF0ZVxyXG4gICAgICAgIC8vIHRoZSB1c2VyJ3Mgc3RhdGUgYWNjb3JkaW5nbHkuXHJcbiAgICAgICAgYXdhaXQgdGhpcy51c2VyLl91cGRhdGVUb2tlbnNJZk5lY2Vzc2FyeShpZFRva2VuUmVzcG9uc2UpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXNlci5yZWxvYWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgaWYgKGUuY29kZSAhPT0gYGF1dGgvJHtcInVzZXItdG9rZW4tZXhwaXJlZFwiIC8qIFRPS0VOX0VYUElSRUQgKi99YCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5jb25zdCBtdWx0aUZhY3RvclVzZXJDYWNoZSA9IG5ldyBXZWFrTWFwKCk7XHJcbi8qKlxyXG4gKiBUaGUge0BsaW5rIE11bHRpRmFjdG9yVXNlcn0gY29ycmVzcG9uZGluZyB0byB0aGUgdXNlci5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhpcyBpcyB1c2VkIHRvIGFjY2VzcyBhbGwgbXVsdGktZmFjdG9yIHByb3BlcnRpZXMgYW5kIG9wZXJhdGlvbnMgcmVsYXRlZCB0byB0aGUgdXNlci5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gbXVsdGlGYWN0b3IodXNlcikge1xyXG4gICAgY29uc3QgdXNlck1vZHVsYXIgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBpZiAoIW11bHRpRmFjdG9yVXNlckNhY2hlLmhhcyh1c2VyTW9kdWxhcikpIHtcclxuICAgICAgICBtdWx0aUZhY3RvclVzZXJDYWNoZS5zZXQodXNlck1vZHVsYXIsIE11bHRpRmFjdG9yVXNlckltcGwuX2Zyb21Vc2VyKHVzZXJNb2R1bGFyKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbXVsdGlGYWN0b3JVc2VyQ2FjaGUuZ2V0KHVzZXJNb2R1bGFyKTtcclxufVxuXG5jb25zdCBTVE9SQUdFX0FWQUlMQUJMRV9LRVkgPSAnX19zYWsnO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBUaGVyZSBhcmUgdHdvIGRpZmZlcmVudCBicm93c2VyIHBlcnNpc3RlbmNlIHR5cGVzOiBsb2NhbCBhbmQgc2Vzc2lvbi5cclxuLy8gQm90aCBoYXZlIHRoZSBzYW1lIGltcGxlbWVudGF0aW9uIGJ1dCB1c2UgYSBkaWZmZXJlbnQgdW5kZXJseWluZyBzdG9yYWdlXHJcbi8vIG9iamVjdC5cclxuY2xhc3MgQnJvd3NlclBlcnNpc3RlbmNlQ2xhc3Mge1xyXG4gICAgY29uc3RydWN0b3Ioc3RvcmFnZVJldHJpZXZlciwgdHlwZSkge1xyXG4gICAgICAgIHRoaXMuc3RvcmFnZVJldHJpZXZlciA9IHN0b3JhZ2VSZXRyaWV2ZXI7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgIH1cclxuICAgIF9pc0F2YWlsYWJsZSgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RvcmFnZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0oU1RPUkFHRV9BVkFJTEFCTEVfS0VZLCAnMScpO1xyXG4gICAgICAgICAgICB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbShTVE9SQUdFX0FWQUlMQUJMRV9LRVkpO1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX3NldChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH1cclxuICAgIF9nZXQoa2V5KSB7XHJcbiAgICAgICAgY29uc3QganNvbiA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShqc29uID8gSlNPTi5wYXJzZShqc29uKSA6IG51bGwpO1xyXG4gICAgfVxyXG4gICAgX3JlbW92ZShrZXkpIHtcclxuICAgICAgICB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH1cclxuICAgIGdldCBzdG9yYWdlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0b3JhZ2VSZXRyaWV2ZXIoKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfaWZyYW1lQ2Fubm90U3luY1dlYlN0b3JhZ2UoKSB7XHJcbiAgICBjb25zdCB1YSA9IGdldFVBKCk7XHJcbiAgICByZXR1cm4gX2lzU2FmYXJpKHVhKSB8fCBfaXNJT1ModWEpO1xyXG59XHJcbi8vIFRoZSBwb2xsaW5nIHBlcmlvZCBpbiBjYXNlIGV2ZW50cyBhcmUgbm90IHN1cHBvcnRlZFxyXG5jb25zdCBfUE9MTElOR19JTlRFUlZBTF9NUyQxID0gMTAwMDtcclxuLy8gVGhlIElFIDEwIGxvY2FsU3RvcmFnZSBjcm9zcyB0YWIgc3luY2hyb25pemF0aW9uIGRlbGF5IGluIG1pbGxpc2Vjb25kc1xyXG5jb25zdCBJRTEwX0xPQ0FMX1NUT1JBR0VfU1lOQ19ERUxBWSA9IDEwO1xyXG5jbGFzcyBCcm93c2VyTG9jYWxQZXJzaXN0ZW5jZSBleHRlbmRzIEJyb3dzZXJQZXJzaXN0ZW5jZUNsYXNzIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCgpID0+IHdpbmRvdy5sb2NhbFN0b3JhZ2UsIFwiTE9DQUxcIiAvKiBMT0NBTCAqLyk7XHJcbiAgICAgICAgdGhpcy5ib3VuZEV2ZW50SGFuZGxlciA9IChldmVudCwgcG9sbCkgPT4gdGhpcy5vblN0b3JhZ2VFdmVudChldmVudCwgcG9sbCk7XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSB7fTtcclxuICAgICAgICB0aGlzLmxvY2FsQ2FjaGUgPSB7fTtcclxuICAgICAgICAvLyBzZXRUaW1lb3V0IHJldHVybiB2YWx1ZSBpcyBwbGF0Zm9ybSBzcGVjaWZpY1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgdGhpcy5wb2xsVGltZXIgPSBudWxsO1xyXG4gICAgICAgIC8vIFNhZmFyaSBvciBpT1MgYnJvd3NlciBhbmQgZW1iZWRkZWQgaW4gYW4gaWZyYW1lLlxyXG4gICAgICAgIHRoaXMuc2FmYXJpTG9jYWxTdG9yYWdlTm90U3luY2VkID0gX2lmcmFtZUNhbm5vdFN5bmNXZWJTdG9yYWdlKCkgJiYgX2lzSWZyYW1lKCk7XHJcbiAgICAgICAgLy8gV2hldGhlciB0byB1c2UgcG9sbGluZyBpbnN0ZWFkIG9mIGRlcGVuZGluZyBvbiB3aW5kb3cgZXZlbnRzXHJcbiAgICAgICAgdGhpcy5mYWxsYmFja1RvUG9sbGluZyA9IF9pc01vYmlsZUJyb3dzZXIoKTtcclxuICAgICAgICB0aGlzLl9zaG91bGRBbGxvd01pZ3JhdGlvbiA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBmb3JBbGxDaGFuZ2VkS2V5cyhjYikge1xyXG4gICAgICAgIC8vIENoZWNrIGFsbCBrZXlzIHdpdGggbGlzdGVuZXJzIG9uIHRoZW0uXHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXModGhpcy5saXN0ZW5lcnMpKSB7XHJcbiAgICAgICAgICAgIC8vIEdldCB2YWx1ZSBmcm9tIGxvY2FsU3RvcmFnZS5cclxuICAgICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xyXG4gICAgICAgICAgICBjb25zdCBvbGRWYWx1ZSA9IHRoaXMubG9jYWxDYWNoZVtrZXldO1xyXG4gICAgICAgICAgICAvLyBJZiBsb2NhbCBtYXAgdmFsdWUgZG9lcyBub3QgbWF0Y2gsIHRyaWdnZXIgbGlzdGVuZXIgd2l0aCBzdG9yYWdlIGV2ZW50LlxyXG4gICAgICAgICAgICAvLyBEaWZmZXJlbnRpYXRlIHRoaXMgc2ltdWxhdGVkIGV2ZW50IGZyb20gdGhlIHJlYWwgc3RvcmFnZSBldmVudC5cclxuICAgICAgICAgICAgaWYgKG5ld1ZhbHVlICE9PSBvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgY2Ioa2V5LCBvbGRWYWx1ZSwgbmV3VmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgb25TdG9yYWdlRXZlbnQoZXZlbnQsIHBvbGwgPSBmYWxzZSkge1xyXG4gICAgICAgIC8vIEtleSB3b3VsZCBiZSBudWxsIGluIHNvbWUgc2l0dWF0aW9ucywgbGlrZSB3aGVuIGxvY2FsU3RvcmFnZSBpcyBjbGVhcmVkXHJcbiAgICAgICAgaWYgKCFldmVudC5rZXkpIHtcclxuICAgICAgICAgICAgdGhpcy5mb3JBbGxDaGFuZ2VkS2V5cygoa2V5LCBfb2xkVmFsdWUsIG5ld1ZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeUxpc3RlbmVycyhrZXksIG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qga2V5ID0gZXZlbnQua2V5O1xyXG4gICAgICAgIC8vIENoZWNrIHRoZSBtZWNoYW5pc20gaG93IHRoaXMgZXZlbnQgd2FzIGRldGVjdGVkLlxyXG4gICAgICAgIC8vIFRoZSBmaXJzdCBldmVudCB3aWxsIGRpY3RhdGUgdGhlIG1lY2hhbmlzbSB0byBiZSB1c2VkLlxyXG4gICAgICAgIGlmIChwb2xsKSB7XHJcbiAgICAgICAgICAgIC8vIEVudmlyb25tZW50IGRldGVjdHMgc3RvcmFnZSBjaGFuZ2VzIHZpYSBwb2xsaW5nLlxyXG4gICAgICAgICAgICAvLyBSZW1vdmUgc3RvcmFnZSBldmVudCBsaXN0ZW5lciB0byBwcmV2ZW50IHBvc3NpYmxlIGV2ZW50IGR1cGxpY2F0aW9uLlxyXG4gICAgICAgICAgICB0aGlzLmRldGFjaExpc3RlbmVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBFbnZpcm9ubWVudCBkZXRlY3RzIHN0b3JhZ2UgY2hhbmdlcyB2aWEgc3RvcmFnZSBldmVudCBsaXN0ZW5lci5cclxuICAgICAgICAgICAgLy8gUmVtb3ZlIHBvbGxpbmcgbGlzdGVuZXIgdG8gcHJldmVudCBwb3NzaWJsZSBldmVudCBkdXBsaWNhdGlvbi5cclxuICAgICAgICAgICAgdGhpcy5zdG9wUG9sbGluZygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTYWZhcmkgZW1iZWRkZWQgaWZyYW1lLiBTdG9yYWdlIGV2ZW50IHdpbGwgdHJpZ2dlciB3aXRoIHRoZSBkZWx0YVxyXG4gICAgICAgIC8vIGNoYW5nZXMgYnV0IG5vIGNoYW5nZXMgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBpZnJhbWUgbG9jYWxTdG9yYWdlLlxyXG4gICAgICAgIGlmICh0aGlzLnNhZmFyaUxvY2FsU3RvcmFnZU5vdFN5bmNlZCkge1xyXG4gICAgICAgICAgICAvLyBHZXQgY3VycmVudCBpZnJhbWUgcGFnZSB2YWx1ZS5cclxuICAgICAgICAgICAgY29uc3Qgc3RvcmVkVmFsdWUgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xyXG4gICAgICAgICAgICAvLyBWYWx1ZSBub3Qgc3luY2hyb25pemVkLCBzeW5jaHJvbml6ZSBtYW51YWxseS5cclxuICAgICAgICAgICAgaWYgKGV2ZW50Lm5ld1ZhbHVlICE9PSBzdG9yZWRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50Lm5ld1ZhbHVlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVmFsdWUgY2hhbmdlZCBmcm9tIGN1cnJlbnQgdmFsdWUuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0oa2V5LCBldmVudC5uZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBDdXJyZW50IHZhbHVlIGRlbGV0ZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmxvY2FsQ2FjaGVba2V5XSA9PT0gZXZlbnQubmV3VmFsdWUgJiYgIXBvbGwpIHtcclxuICAgICAgICAgICAgICAgIC8vIEFscmVhZHkgZGV0ZWN0ZWQgYW5kIHByb2Nlc3NlZCwgZG8gbm90IHRyaWdnZXIgbGlzdGVuZXJzIGFnYWluLlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHRyaWdnZXJMaXN0ZW5lcnMgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIEtlZXAgbG9jYWwgbWFwIHVwIHRvIGRhdGUgaW4gY2FzZSBzdG9yYWdlIGV2ZW50IGlzIHRyaWdnZXJlZCBiZWZvcmVcclxuICAgICAgICAgICAgLy8gcG9sbC5cclxuICAgICAgICAgICAgY29uc3Qgc3RvcmVkVmFsdWUgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xyXG4gICAgICAgICAgICBpZiAoIXBvbGwgJiYgdGhpcy5sb2NhbENhY2hlW2tleV0gPT09IHN0b3JlZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZWFsIHN0b3JhZ2UgZXZlbnQgd2hpY2ggaGFzIGFscmVhZHkgYmVlbiBkZXRlY3RlZCwgZG8gbm90aGluZy5cclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgc2VlbXMgdG8gdHJpZ2dlciBpbiBzb21lIElFIGJyb3dzZXJzIGZvciBzb21lIHJlYXNvbi5cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLm5vdGlmeUxpc3RlbmVycyhrZXksIHN0b3JlZFZhbHVlKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHN0b3JlZFZhbHVlID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuICAgICAgICBpZiAoX2lzSUUxMCgpICYmXHJcbiAgICAgICAgICAgIHN0b3JlZFZhbHVlICE9PSBldmVudC5uZXdWYWx1ZSAmJlxyXG4gICAgICAgICAgICBldmVudC5uZXdWYWx1ZSAhPT0gZXZlbnQub2xkVmFsdWUpIHtcclxuICAgICAgICAgICAgLy8gSUUgMTAgaGFzIHRoaXMgd2VpcmQgYnVnIHdoZXJlIGEgc3RvcmFnZSBldmVudCB3b3VsZCB0cmlnZ2VyIHdpdGggdGhlXHJcbiAgICAgICAgICAgIC8vIGNvcnJlY3Qga2V5LCBvbGRWYWx1ZSBhbmQgbmV3VmFsdWUgYnV0IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSkgZG9lc1xyXG4gICAgICAgICAgICAvLyBub3QgeWllbGQgdGhlIHVwZGF0ZWQgdmFsdWUgdW50aWwgYSBmZXcgbWlsbGlzZWNvbmRzLiBUaGlzIGVuc3VyZXNcclxuICAgICAgICAgICAgLy8gdGhpcyByZWNvdmVycyBmcm9tIHRoYXQgc2l0dWF0aW9uLlxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHRyaWdnZXJMaXN0ZW5lcnMsIElFMTBfTE9DQUxfU1RPUkFHRV9TWU5DX0RFTEFZKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRyaWdnZXJMaXN0ZW5lcnMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBub3RpZnlMaXN0ZW5lcnMoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMubG9jYWxDYWNoZVtrZXldID0gdmFsdWU7XHJcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnNba2V5XTtcclxuICAgICAgICBpZiAobGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgbGlzdGVuZXIgb2YgQXJyYXkuZnJvbShsaXN0ZW5lcnMpKSB7XHJcbiAgICAgICAgICAgICAgICBsaXN0ZW5lcih2YWx1ZSA/IEpTT04ucGFyc2UodmFsdWUpIDogdmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc3RhcnRQb2xsaW5nKCkge1xyXG4gICAgICAgIHRoaXMuc3RvcFBvbGxpbmcoKTtcclxuICAgICAgICB0aGlzLnBvbGxUaW1lciA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5mb3JBbGxDaGFuZ2VkS2V5cygoa2V5LCBvbGRWYWx1ZSwgbmV3VmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25TdG9yYWdlRXZlbnQobmV3IFN0b3JhZ2VFdmVudCgnc3RvcmFnZScsIHtcclxuICAgICAgICAgICAgICAgICAgICBrZXksXHJcbiAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWVcclxuICAgICAgICAgICAgICAgIH0pLCBcclxuICAgICAgICAgICAgICAgIC8qIHBvbGwgKi8gdHJ1ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sIF9QT0xMSU5HX0lOVEVSVkFMX01TJDEpO1xyXG4gICAgfVxyXG4gICAgc3RvcFBvbGxpbmcoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucG9sbFRpbWVyKSB7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5wb2xsVGltZXIpO1xyXG4gICAgICAgICAgICB0aGlzLnBvbGxUaW1lciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYXR0YWNoTGlzdGVuZXIoKSB7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3N0b3JhZ2UnLCB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyKTtcclxuICAgIH1cclxuICAgIGRldGFjaExpc3RlbmVyKCkge1xyXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdzdG9yYWdlJywgdGhpcy5ib3VuZEV2ZW50SGFuZGxlcik7XHJcbiAgICB9XHJcbiAgICBfYWRkTGlzdGVuZXIoa2V5LCBsaXN0ZW5lcikge1xyXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLmxpc3RlbmVycykubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIC8vIFdoZXRoZXIgYnJvd3NlciBjYW4gZGV0ZWN0IHN0b3JhZ2UgZXZlbnQgd2hlbiBpdCBoYWQgYWxyZWFkeSBiZWVuIHB1c2hlZCB0byB0aGUgYmFja2dyb3VuZC5cclxuICAgICAgICAgICAgLy8gVGhpcyBtYXkgaGFwcGVuIGluIHNvbWUgbW9iaWxlIGJyb3dzZXJzLiBBIGxvY2FsU3RvcmFnZSBjaGFuZ2UgaW4gdGhlIGZvcmVncm91bmQgd2luZG93XHJcbiAgICAgICAgICAgIC8vIHdpbGwgbm90IGJlIGRldGVjdGVkIGluIHRoZSBiYWNrZ3JvdW5kIHdpbmRvdyB2aWEgdGhlIHN0b3JhZ2UgZXZlbnQuXHJcbiAgICAgICAgICAgIC8vIFRoaXMgd2FzIGRldGVjdGVkIGluIGlPUyA3LnggbW9iaWxlIGJyb3dzZXJzXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmZhbGxiYWNrVG9Qb2xsaW5nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0UG9sbGluZygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hdHRhY2hMaXN0ZW5lcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5saXN0ZW5lcnNba2V5XSkge1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVyc1trZXldID0gbmV3IFNldCgpO1xyXG4gICAgICAgICAgICAvLyBQb3B1bGF0ZSB0aGUgY2FjaGUgdG8gYXZvaWQgc3B1cmlvdXNseSB0cmlnZ2VyaW5nIG9uIGZpcnN0IHBvbGwuXHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxDYWNoZVtrZXldID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnNba2V5XS5hZGQobGlzdGVuZXIpO1xyXG4gICAgfVxyXG4gICAgX3JlbW92ZUxpc3RlbmVyKGtleSwgbGlzdGVuZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5saXN0ZW5lcnNba2V5XSkge1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVyc1trZXldLmRlbGV0ZShsaXN0ZW5lcik7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxpc3RlbmVyc1trZXldLnNpemUgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmxpc3RlbmVyc1trZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLmxpc3RlbmVycykubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGV0YWNoTGlzdGVuZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5zdG9wUG9sbGluZygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIFVwZGF0ZSBsb2NhbCBjYWNoZSBvbiBiYXNlIG9wZXJhdGlvbnM6XHJcbiAgICBhc3luYyBfc2V0KGtleSwgdmFsdWUpIHtcclxuICAgICAgICBhd2FpdCBzdXBlci5fc2V0KGtleSwgdmFsdWUpO1xyXG4gICAgICAgIHRoaXMubG9jYWxDYWNoZVtrZXldID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX2dldChrZXkpIHtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHN1cGVyLl9nZXQoa2V5KTtcclxuICAgICAgICB0aGlzLmxvY2FsQ2FjaGVba2V5XSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfcmVtb3ZlKGtleSkge1xyXG4gICAgICAgIGF3YWl0IHN1cGVyLl9yZW1vdmUoa2V5KTtcclxuICAgICAgICBkZWxldGUgdGhpcy5sb2NhbENhY2hlW2tleV07XHJcbiAgICB9XHJcbn1cclxuQnJvd3NlckxvY2FsUGVyc2lzdGVuY2UudHlwZSA9ICdMT0NBTCc7XHJcbi8qKlxyXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgUGVyc2lzdGVuY2V9IG9mIHR5cGUgYExPQ0FMYCB1c2luZyBgbG9jYWxTdG9yYWdlYFxyXG4gKiBmb3IgdGhlIHVuZGVybHlpbmcgc3RvcmFnZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgYnJvd3NlckxvY2FsUGVyc2lzdGVuY2UgPSBCcm93c2VyTG9jYWxQZXJzaXN0ZW5jZTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgQnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZSBleHRlbmRzIEJyb3dzZXJQZXJzaXN0ZW5jZUNsYXNzIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCgpID0+IHdpbmRvdy5zZXNzaW9uU3RvcmFnZSwgXCJTRVNTSU9OXCIgLyogU0VTU0lPTiAqLyk7XHJcbiAgICB9XHJcbiAgICBfYWRkTGlzdGVuZXIoX2tleSwgX2xpc3RlbmVyKSB7XHJcbiAgICAgICAgLy8gTGlzdGVuZXJzIGFyZSBub3Qgc3VwcG9ydGVkIGZvciBzZXNzaW9uIHN0b3JhZ2Ugc2luY2UgaXQgY2Fubm90IGJlIHNoYXJlZCBhY3Jvc3Mgd2luZG93c1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIF9yZW1vdmVMaXN0ZW5lcihfa2V5LCBfbGlzdGVuZXIpIHtcclxuICAgICAgICAvLyBMaXN0ZW5lcnMgYXJlIG5vdCBzdXBwb3J0ZWQgZm9yIHNlc3Npb24gc3RvcmFnZSBzaW5jZSBpdCBjYW5ub3QgYmUgc2hhcmVkIGFjcm9zcyB3aW5kb3dzXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG59XHJcbkJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UudHlwZSA9ICdTRVNTSU9OJztcclxuLyoqXHJcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBQZXJzaXN0ZW5jZX0gb2YgYFNFU1NJT05gIHVzaW5nIGBzZXNzaW9uU3RvcmFnZWBcclxuICogZm9yIHRoZSB1bmRlcmx5aW5nIHN0b3JhZ2UuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UgPSBCcm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogU2hpbSBmb3IgUHJvbWlzZS5hbGxTZXR0bGVkLCBub3RlIHRoZSBzbGlnaHRseSBkaWZmZXJlbnQgZm9ybWF0IG9mIGBmdWxmaWxsZWRgIHZzIGBzdGF0dXNgLlxyXG4gKlxyXG4gKiBAcGFyYW0gcHJvbWlzZXMgLSBBcnJheSBvZiBwcm9taXNlcyB0byB3YWl0IG9uLlxyXG4gKi9cclxuZnVuY3Rpb24gX2FsbFNldHRsZWQocHJvbWlzZXMpIHtcclxuICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcy5tYXAoYXN5bmMgKHByb21pc2UpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHByb21pc2U7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBmdWxmaWxsZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAocmVhc29uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBmdWxmaWxsZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgcmVhc29uXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfSkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBJbnRlcmZhY2UgY2xhc3MgZm9yIHJlY2VpdmluZyBtZXNzYWdlcy5cclxuICpcclxuICovXHJcbmNsYXNzIFJlY2VpdmVyIHtcclxuICAgIGNvbnN0cnVjdG9yKGV2ZW50VGFyZ2V0KSB7XHJcbiAgICAgICAgdGhpcy5ldmVudFRhcmdldCA9IGV2ZW50VGFyZ2V0O1xyXG4gICAgICAgIHRoaXMuaGFuZGxlcnNNYXAgPSB7fTtcclxuICAgICAgICB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyID0gdGhpcy5oYW5kbGVFdmVudC5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBPYnRhaW4gYW4gaW5zdGFuY2Ugb2YgYSBSZWNlaXZlciBmb3IgYSBnaXZlbiBldmVudCB0YXJnZXQsIGlmIG5vbmUgZXhpc3RzIGl0IHdpbGwgYmUgY3JlYXRlZC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRUYXJnZXQgLSBBbiBldmVudCB0YXJnZXQgKHN1Y2ggYXMgd2luZG93IG9yIHNlbGYpIHRocm91Z2ggd2hpY2ggdGhlIHVuZGVybHlpbmdcclxuICAgICAqIG1lc3NhZ2VzIHdpbGwgYmUgcmVjZWl2ZWQuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBfZ2V0SW5zdGFuY2UoZXZlbnRUYXJnZXQpIHtcclxuICAgICAgICAvLyBUaGUgcmVzdWx0cyBhcmUgc3RvcmVkIGluIGFuIGFycmF5IHNpbmNlIG9iamVjdHMgY2FuJ3QgYmUga2V5cyBmb3Igb3RoZXJcclxuICAgICAgICAvLyBvYmplY3RzLiBJbiBhZGRpdGlvbiwgc2V0dGluZyBhIHVuaXF1ZSBwcm9wZXJ0eSBvbiBhbiBldmVudCB0YXJnZXQgYXMgYVxyXG4gICAgICAgIC8vIGhhc2ggbWFwIGtleSBtYXkgbm90IGJlIGFsbG93ZWQgZHVlIHRvIENPUlMgcmVzdHJpY3Rpb25zLlxyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nSW5zdGFuY2UgPSB0aGlzLnJlY2VpdmVycy5maW5kKHJlY2VpdmVyID0+IHJlY2VpdmVyLmlzTGlzdGVuaW5ndG8oZXZlbnRUYXJnZXQpKTtcclxuICAgICAgICBpZiAoZXhpc3RpbmdJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZXhpc3RpbmdJbnN0YW5jZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbmV3SW5zdGFuY2UgPSBuZXcgUmVjZWl2ZXIoZXZlbnRUYXJnZXQpO1xyXG4gICAgICAgIHRoaXMucmVjZWl2ZXJzLnB1c2gobmV3SW5zdGFuY2UpO1xyXG4gICAgICAgIHJldHVybiBuZXdJbnN0YW5jZTtcclxuICAgIH1cclxuICAgIGlzTGlzdGVuaW5ndG8oZXZlbnRUYXJnZXQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ldmVudFRhcmdldCA9PT0gZXZlbnRUYXJnZXQ7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEZhbnMgb3V0IGEgTWVzc2FnZUV2ZW50IHRvIHRoZSBhcHByb3ByaWF0ZSBsaXN0ZW5lcnMuXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIFNlbmRzIGFuIHtAbGluayBTdGF0dXMuQUNLfSB1cG9uIHJlY2VpcHQgYW5kIGEge0BsaW5rIFN0YXR1cy5ET05FfSBvbmNlIGFsbCBoYW5kbGVycyBoYXZlXHJcbiAgICAgKiBmaW5pc2hlZCBwcm9jZXNzaW5nLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBldmVudCAtIFRoZSBNZXNzYWdlRXZlbnQuXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBhc3luYyBoYW5kbGVFdmVudChldmVudCkge1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VFdmVudCA9IGV2ZW50O1xyXG4gICAgICAgIGNvbnN0IHsgZXZlbnRJZCwgZXZlbnRUeXBlLCBkYXRhIH0gPSBtZXNzYWdlRXZlbnQuZGF0YTtcclxuICAgICAgICBjb25zdCBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnNNYXBbZXZlbnRUeXBlXTtcclxuICAgICAgICBpZiAoIShoYW5kbGVycyA9PT0gbnVsbCB8fCBoYW5kbGVycyA9PT0gdm9pZCAwID8gdm9pZCAwIDogaGFuZGxlcnMuc2l6ZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtZXNzYWdlRXZlbnQucG9ydHNbMF0ucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICBzdGF0dXM6IFwiYWNrXCIgLyogQUNLICovLFxyXG4gICAgICAgICAgICBldmVudElkLFxyXG4gICAgICAgICAgICBldmVudFR5cGVcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBwcm9taXNlcyA9IEFycmF5LmZyb20oaGFuZGxlcnMpLm1hcChhc3luYyAoaGFuZGxlcikgPT4gaGFuZGxlcihtZXNzYWdlRXZlbnQub3JpZ2luLCBkYXRhKSk7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfYWxsU2V0dGxlZChwcm9taXNlcyk7XHJcbiAgICAgICAgbWVzc2FnZUV2ZW50LnBvcnRzWzBdLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgc3RhdHVzOiBcImRvbmVcIiAvKiBET05FICovLFxyXG4gICAgICAgICAgICBldmVudElkLFxyXG4gICAgICAgICAgICBldmVudFR5cGUsXHJcbiAgICAgICAgICAgIHJlc3BvbnNlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN1YnNjcmliZSBhbiBldmVudCBoYW5kbGVyIGZvciBhIHBhcnRpY3VsYXIgZXZlbnQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGV2ZW50VHlwZSAtIEV2ZW50IG5hbWUgdG8gc3Vic2NyaWJlIHRvLlxyXG4gICAgICogQHBhcmFtIGV2ZW50SGFuZGxlciAtIFRoZSBldmVudCBoYW5kbGVyIHdoaWNoIHNob3VsZCByZWNlaXZlIHRoZSBldmVudHMuXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBfc3Vic2NyaWJlKGV2ZW50VHlwZSwgZXZlbnRIYW5kbGVyKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMuaGFuZGxlcnNNYXApLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50VGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmhhbmRsZXJzTWFwW2V2ZW50VHlwZV0pIHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVyc01hcFtldmVudFR5cGVdID0gbmV3IFNldCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmhhbmRsZXJzTWFwW2V2ZW50VHlwZV0uYWRkKGV2ZW50SGFuZGxlcik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVuc3Vic2NyaWJlIGFuIGV2ZW50IGhhbmRsZXIgZnJvbSBhIHBhcnRpY3VsYXIgZXZlbnQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGV2ZW50VHlwZSAtIEV2ZW50IG5hbWUgdG8gdW5zdWJzY3JpYmUgZnJvbS5cclxuICAgICAqIEBwYXJhbSBldmVudEhhbmRsZXIgLSBPcHRpbm9hbCBldmVudCBoYW5kbGVyLCBpZiBub25lIHByb3ZpZGVkLCB1bnN1YnNjcmliZSBhbGwgaGFuZGxlcnMgb24gdGhpcyBldmVudC5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIF91bnN1YnNjcmliZShldmVudFR5cGUsIGV2ZW50SGFuZGxlcikge1xyXG4gICAgICAgIGlmICh0aGlzLmhhbmRsZXJzTWFwW2V2ZW50VHlwZV0gJiYgZXZlbnRIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlcnNNYXBbZXZlbnRUeXBlXS5kZWxldGUoZXZlbnRIYW5kbGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFldmVudEhhbmRsZXIgfHwgdGhpcy5oYW5kbGVyc01hcFtldmVudFR5cGVdLnNpemUgPT09IDApIHtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuaGFuZGxlcnNNYXBbZXZlbnRUeXBlXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMuaGFuZGxlcnNNYXApLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50VGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuUmVjZWl2ZXIucmVjZWl2ZXJzID0gW107XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9nZW5lcmF0ZUV2ZW50SWQocHJlZml4ID0gJycsIGRpZ2l0cyA9IDEwKSB7XHJcbiAgICBsZXQgcmFuZG9tID0gJyc7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRpZ2l0czsgaSsrKSB7XHJcbiAgICAgICAgcmFuZG9tICs9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKTtcclxuICAgIH1cclxuICAgIHJldHVybiBwcmVmaXggKyByYW5kb207XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEludGVyZmFjZSBmb3Igc2VuZGluZyBtZXNzYWdlcyBhbmQgd2FpdGluZyBmb3IgYSBjb21wbGV0aW9uIHJlc3BvbnNlLlxyXG4gKlxyXG4gKi9cclxuY2xhc3MgU2VuZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKHRhcmdldCkge1xyXG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xyXG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSBuZXcgU2V0KCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVuc3Vic2NyaWJlIHRoZSBoYW5kbGVyIGFuZCByZW1vdmUgaXQgZnJvbSBvdXIgdHJhY2tpbmcgU2V0LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBoYW5kbGVyIC0gVGhlIGhhbmRsZXIgdG8gdW5zdWJzY3JpYmUuXHJcbiAgICAgKi9cclxuICAgIHJlbW92ZU1lc3NhZ2VIYW5kbGVyKGhhbmRsZXIpIHtcclxuICAgICAgICBpZiAoaGFuZGxlci5tZXNzYWdlQ2hhbm5lbCkge1xyXG4gICAgICAgICAgICBoYW5kbGVyLm1lc3NhZ2VDaGFubmVsLnBvcnQxLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBoYW5kbGVyLm9uTWVzc2FnZSk7XHJcbiAgICAgICAgICAgIGhhbmRsZXIubWVzc2FnZUNoYW5uZWwucG9ydDEuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5oYW5kbGVycy5kZWxldGUoaGFuZGxlcik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFNlbmQgYSBtZXNzYWdlIHRvIHRoZSBSZWNlaXZlciBsb2NhdGVkIGF0IHtAbGluayB0YXJnZXR9LlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiBXZSdsbCBmaXJzdCB3YWl0IGEgYml0IGZvciBhbiBBQ0sgLCBpZiB3ZSBnZXQgb25lIHdlIHdpbGwgd2FpdCBzaWduaWZpY2FudGx5IGxvbmdlciB1bnRpbCB0aGVcclxuICAgICAqIHJlY2VpdmVyIGhhcyBoYWQgYSBjaGFuY2UgdG8gZnVsbHkgcHJvY2VzcyB0aGUgZXZlbnQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGV2ZW50VHlwZSAtIFR5cGUgb2YgZXZlbnQgdG8gc2VuZC5cclxuICAgICAqIEBwYXJhbSBkYXRhIC0gVGhlIHBheWxvYWQgb2YgdGhlIGV2ZW50LlxyXG4gICAgICogQHBhcmFtIHRpbWVvdXQgLSBUaW1lb3V0IGZvciB3YWl0aW5nIG9uIGFuIEFDSyBmcm9tIHRoZSByZWNlaXZlci5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBBbiBhcnJheSBvZiBzZXR0bGVkIHByb21pc2VzIGZyb20gYWxsIHRoZSBoYW5kbGVycyB0aGF0IHdlcmUgbGlzdGVuaW5nIG9uIHRoZSByZWNlaXZlci5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgX3NlbmQoZXZlbnRUeXBlLCBkYXRhLCB0aW1lb3V0ID0gNTAgLyogQUNLICovKSB7XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZUNoYW5uZWwgPSB0eXBlb2YgTWVzc2FnZUNoYW5uZWwgIT09ICd1bmRlZmluZWQnID8gbmV3IE1lc3NhZ2VDaGFubmVsKCkgOiBudWxsO1xyXG4gICAgICAgIGlmICghbWVzc2FnZUNoYW5uZWwpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY29ubmVjdGlvbl91bmF2YWlsYWJsZVwiIC8qIENPTk5FQ1RJT05fVU5BVkFJTEFCTEUgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBOb2RlIHRpbWVycyBhbmQgYnJvd3NlciB0aW1lcnMgcmV0dXJuIGZ1bmRhbWVudGFsbHkgZGlmZmVyZW50IHR5cGVzLlxyXG4gICAgICAgIC8vIFdlIGRvbid0IGFjdHVhbGx5IGNhcmUgd2hhdCB0aGUgdmFsdWUgaXMgYnV0IFRTIHdvbid0IGFjY2VwdCB1bmtub3duIGFuZFxyXG4gICAgICAgIC8vIHdlIGNhbid0IGNhc3QgcHJvcGVybHkgaW4gYm90aCBlbnZpcm9ubWVudHMuXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICBsZXQgY29tcGxldGlvblRpbWVyO1xyXG4gICAgICAgIGxldCBoYW5kbGVyO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50SWQgPSBfZ2VuZXJhdGVFdmVudElkKCcnLCAyMCk7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VDaGFubmVsLnBvcnQxLnN0YXJ0KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGFja1RpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwidW5zdXBwb3J0ZWRfZXZlbnRcIiAvKiBVTlNVUFBPUlRFRF9FVkVOVCAqLykpO1xyXG4gICAgICAgICAgICB9LCB0aW1lb3V0KTtcclxuICAgICAgICAgICAgaGFuZGxlciA9IHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VDaGFubmVsLFxyXG4gICAgICAgICAgICAgICAgb25NZXNzYWdlKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZUV2ZW50ID0gZXZlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2VFdmVudC5kYXRhLmV2ZW50SWQgIT09IGV2ZW50SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1lc3NhZ2VFdmVudC5kYXRhLnN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYWNrXCIgLyogQUNLICovOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHJlY2VpdmVyIHNob3VsZCBBQ0sgZmlyc3QuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoYWNrVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGlvblRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcInRpbWVvdXRcIiAvKiBUSU1FT1VUICovKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDAwIC8qIENPTVBMRVRJT04gKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJkb25lXCIgLyogRE9ORSAqLzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9uY2UgdGhlIHJlY2VpdmVyJ3MgaGFuZGxlcnMgYXJlIGZpbmlzaGVkIHdlIHdpbGwgZ2V0IHRoZSByZXN1bHRzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGNvbXBsZXRpb25UaW1lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKG1lc3NhZ2VFdmVudC5kYXRhLnJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGFja1RpbWVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChjb21wbGV0aW9uVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcImludmFsaWRfcmVzcG9uc2VcIiAvKiBJTlZBTElEX1JFU1BPTlNFICovKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlcnMuYWRkKGhhbmRsZXIpO1xyXG4gICAgICAgICAgICBtZXNzYWdlQ2hhbm5lbC5wb3J0MS5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgaGFuZGxlci5vbk1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgICAgICBldmVudFR5cGUsXHJcbiAgICAgICAgICAgICAgICBldmVudElkLFxyXG4gICAgICAgICAgICAgICAgZGF0YVxyXG4gICAgICAgICAgICB9LCBbbWVzc2FnZUNoYW5uZWwucG9ydDJdKTtcclxuICAgICAgICB9KS5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGhhbmRsZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlTWVzc2FnZUhhbmRsZXIoaGFuZGxlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogTGF6eSBhY2Nlc3NvciBmb3Igd2luZG93LCBzaW5jZSB0aGUgY29tcGF0IGxheWVyIHdvbid0IHRyZWUgc2hha2UgdGhpcyBvdXQsXHJcbiAqIHdlIG5lZWQgdG8gbWFrZSBzdXJlIG5vdCB0byBtZXNzIHdpdGggd2luZG93IHVubGVzcyB3ZSBoYXZlIHRvXHJcbiAqL1xyXG5mdW5jdGlvbiBfd2luZG93KCkge1xyXG4gICAgcmV0dXJuIHdpbmRvdztcclxufVxyXG5mdW5jdGlvbiBfc2V0V2luZG93TG9jYXRpb24odXJsKSB7XHJcbiAgICBfd2luZG93KCkubG9jYXRpb24uaHJlZiA9IHVybDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX2lzV29ya2VyKCkge1xyXG4gICAgcmV0dXJuICh0eXBlb2YgX3dpbmRvdygpWydXb3JrZXJHbG9iYWxTY29wZSddICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgIHR5cGVvZiBfd2luZG93KClbJ2ltcG9ydFNjcmlwdHMnXSA9PT0gJ2Z1bmN0aW9uJyk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX2dldEFjdGl2ZVNlcnZpY2VXb3JrZXIoKSB7XHJcbiAgICBpZiAoIShuYXZpZ2F0b3IgPT09IG51bGwgfHwgbmF2aWdhdG9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlcikpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVnaXN0cmF0aW9uID0gYXdhaXQgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVhZHk7XHJcbiAgICAgICAgcmV0dXJuIHJlZ2lzdHJhdGlvbi5hY3RpdmU7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBfZ2V0U2VydmljZVdvcmtlckNvbnRyb2xsZXIoKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICByZXR1cm4gKChfYSA9IG5hdmlnYXRvciA9PT0gbnVsbCB8fCBuYXZpZ2F0b3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY29udHJvbGxlcikgfHwgbnVsbDtcclxufVxyXG5mdW5jdGlvbiBfZ2V0V29ya2VyR2xvYmFsU2NvcGUoKSB7XHJcbiAgICByZXR1cm4gX2lzV29ya2VyKCkgPyBzZWxmIDogbnVsbDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBEQl9OQU1FID0gJ2ZpcmViYXNlTG9jYWxTdG9yYWdlRGInO1xyXG5jb25zdCBEQl9WRVJTSU9OID0gMTtcclxuY29uc3QgREJfT0JKRUNUU1RPUkVfTkFNRSA9ICdmaXJlYmFzZUxvY2FsU3RvcmFnZSc7XHJcbmNvbnN0IERCX0RBVEFfS0VZUEFUSCA9ICdmYmFzZV9rZXknO1xyXG4vKipcclxuICogUHJvbWlzZSB3cmFwcGVyIGZvciBJREJSZXF1ZXN0XHJcbiAqXHJcbiAqIFVuZm9ydHVuYXRlbHkgd2UgY2FuJ3QgY2xlYW5seSBleHRlbmQgUHJvbWlzZTxUPiBzaW5jZSBwcm9taXNlcyBhcmUgbm90IGNhbGxhYmxlIGluIEVTNlxyXG4gKlxyXG4gKi9cclxuY2xhc3MgREJQcm9taXNlIHtcclxuICAgIGNvbnN0cnVjdG9yKHJlcXVlc3QpIHtcclxuICAgICAgICB0aGlzLnJlcXVlc3QgPSByZXF1ZXN0O1xyXG4gICAgfVxyXG4gICAgdG9Qcm9taXNlKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdzdWNjZXNzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnJlcXVlc3QucmVzdWx0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlamVjdCh0aGlzLnJlcXVlc3QuZXJyb3IpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBnZXRPYmplY3RTdG9yZShkYiwgaXNSZWFkV3JpdGUpIHtcclxuICAgIHJldHVybiBkYlxyXG4gICAgICAgIC50cmFuc2FjdGlvbihbREJfT0JKRUNUU1RPUkVfTkFNRV0sIGlzUmVhZFdyaXRlID8gJ3JlYWR3cml0ZScgOiAncmVhZG9ubHknKVxyXG4gICAgICAgIC5vYmplY3RTdG9yZShEQl9PQkpFQ1RTVE9SRV9OQU1FKTtcclxufVxyXG5mdW5jdGlvbiBfZGVsZXRlRGF0YWJhc2UoKSB7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKERCX05BTUUpO1xyXG4gICAgcmV0dXJuIG5ldyBEQlByb21pc2UocmVxdWVzdCkudG9Qcm9taXNlKCk7XHJcbn1cclxuZnVuY3Rpb24gX29wZW5EYXRhYmFzZSgpIHtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIub3BlbihEQl9OQU1FLCBEQl9WRVJTSU9OKTtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsICgpID0+IHtcclxuICAgICAgICAgICAgcmVqZWN0KHJlcXVlc3QuZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigndXBncmFkZW5lZWRlZCcsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGIgPSByZXF1ZXN0LnJlc3VsdDtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGRiLmNyZWF0ZU9iamVjdFN0b3JlKERCX09CSkVDVFNUT1JFX05BTUUsIHsga2V5UGF0aDogREJfREFUQV9LRVlQQVRIIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Y2Nlc3MnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRiID0gcmVxdWVzdC5yZXN1bHQ7XHJcbiAgICAgICAgICAgIC8vIFN0cmFuZ2UgYnVnIHRoYXQgb2NjdXJzIGluIEZpcmVmb3ggd2hlbiBtdWx0aXBsZSB0YWJzIGFyZSBvcGVuZWQgYXQgdGhlXHJcbiAgICAgICAgICAgIC8vIHNhbWUgdGltZS4gVGhlIG9ubHkgd2F5IHRvIHJlY292ZXIgc2VlbXMgdG8gYmUgZGVsZXRpbmcgdGhlIGRhdGFiYXNlXHJcbiAgICAgICAgICAgIC8vIGFuZCByZS1pbml0aWFsaXppbmcgaXQuXHJcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvaXNzdWVzLzYzNFxyXG4gICAgICAgICAgICBpZiAoIWRiLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoREJfT0JKRUNUU1RPUkVfTkFNRSkpIHtcclxuICAgICAgICAgICAgICAgIC8vIE5lZWQgdG8gY2xvc2UgdGhlIGRhdGFiYXNlIG9yIGVsc2UgeW91IGdldCBhIGBibG9ja2VkYCBldmVudFxyXG4gICAgICAgICAgICAgICAgZGIuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IF9kZWxldGVEYXRhYmFzZSgpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShhd2FpdCBfb3BlbkRhdGFiYXNlKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShkYik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9wdXRPYmplY3QoZGIsIGtleSwgdmFsdWUpIHtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBnZXRPYmplY3RTdG9yZShkYiwgdHJ1ZSkucHV0KHtcclxuICAgICAgICBbREJfREFUQV9LRVlQQVRIXToga2V5LFxyXG4gICAgICAgIHZhbHVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBuZXcgREJQcm9taXNlKHJlcXVlc3QpLnRvUHJvbWlzZSgpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIGdldE9iamVjdChkYiwga2V5KSB7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gZ2V0T2JqZWN0U3RvcmUoZGIsIGZhbHNlKS5nZXQoa2V5KTtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBuZXcgREJQcm9taXNlKHJlcXVlc3QpLnRvUHJvbWlzZSgpO1xyXG4gICAgcmV0dXJuIGRhdGEgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBkYXRhLnZhbHVlO1xyXG59XHJcbmZ1bmN0aW9uIF9kZWxldGVPYmplY3QoZGIsIGtleSkge1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IGdldE9iamVjdFN0b3JlKGRiLCB0cnVlKS5kZWxldGUoa2V5KTtcclxuICAgIHJldHVybiBuZXcgREJQcm9taXNlKHJlcXVlc3QpLnRvUHJvbWlzZSgpO1xyXG59XHJcbmNvbnN0IF9QT0xMSU5HX0lOVEVSVkFMX01TID0gODAwO1xyXG5jb25zdCBfVFJBTlNBQ1RJT05fUkVUUllfQ09VTlQgPSAzO1xyXG5jbGFzcyBJbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMudHlwZSA9IFwiTE9DQUxcIiAvKiBMT0NBTCAqLztcclxuICAgICAgICB0aGlzLl9zaG91bGRBbGxvd01pZ3JhdGlvbiA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSB7fTtcclxuICAgICAgICB0aGlzLmxvY2FsQ2FjaGUgPSB7fTtcclxuICAgICAgICAvLyBzZXRUaW1lb3V0IHJldHVybiB2YWx1ZSBpcyBwbGF0Zm9ybSBzcGVjaWZpY1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgdGhpcy5wb2xsVGltZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1dyaXRlcyA9IDA7XHJcbiAgICAgICAgdGhpcy5yZWNlaXZlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zZW5kZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc2VydmljZVdvcmtlclJlY2VpdmVyQXZhaWxhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVTZXJ2aWNlV29ya2VyID0gbnVsbDtcclxuICAgICAgICAvLyBGaXJlICYgZm9yZ2V0IHRoZSBzZXJ2aWNlIHdvcmtlciByZWdpc3RyYXRpb24gYXMgaXQgbWF5IG5ldmVyIHJlc29sdmVcclxuICAgICAgICB0aGlzLl93b3JrZXJJbml0aWFsaXphdGlvblByb21pc2UgPVxyXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVTZXJ2aWNlV29ya2VyTWVzc2FnaW5nKCkudGhlbigoKSA9PiB7IH0sICgpID0+IHsgfSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfb3BlbkRiKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmRiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRiO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRiID0gYXdhaXQgX29wZW5EYXRhYmFzZSgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRiO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX3dpdGhSZXRyaWVzKG9wKSB7XHJcbiAgICAgICAgbGV0IG51bUF0dGVtcHRzID0gMDtcclxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGIgPSBhd2FpdCB0aGlzLl9vcGVuRGIoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBvcChkYik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChudW1BdHRlbXB0cysrID4gX1RSQU5TQUNUSU9OX1JFVFJZX0NPVU5UKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYi5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGIgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBjb25zaWRlciBhZGRpbmcgZXhwb25lbnRpYWwgYmFja29mZlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbmRleGVkREIgZXZlbnRzIGRvIG5vdCBwcm9wYWdhdGUgZnJvbSB0aGUgbWFpbiB3aW5kb3cgdG8gdGhlIHdvcmtlciBjb250ZXh0LiAgV2UgcmVseSBvbiBhXHJcbiAgICAgKiBwb3N0TWVzc2FnZSBpbnRlcmZhY2UgdG8gc2VuZCB0aGVzZSBldmVudHMgdG8gdGhlIHdvcmtlciBvdXJzZWx2ZXMuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGluaXRpYWxpemVTZXJ2aWNlV29ya2VyTWVzc2FnaW5nKCkge1xyXG4gICAgICAgIHJldHVybiBfaXNXb3JrZXIoKSA/IHRoaXMuaW5pdGlhbGl6ZVJlY2VpdmVyKCkgOiB0aGlzLmluaXRpYWxpemVTZW5kZXIoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQXMgdGhlIHdvcmtlciB3ZSBzaG91bGQgbGlzdGVuIHRvIGV2ZW50cyBmcm9tIHRoZSBtYWluIHdpbmRvdy5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgaW5pdGlhbGl6ZVJlY2VpdmVyKCkge1xyXG4gICAgICAgIHRoaXMucmVjZWl2ZXIgPSBSZWNlaXZlci5fZ2V0SW5zdGFuY2UoX2dldFdvcmtlckdsb2JhbFNjb3BlKCkpO1xyXG4gICAgICAgIC8vIFJlZnJlc2ggZnJvbSBwZXJzaXN0ZW5jZSBpZiB3ZSByZWNlaXZlIGEgS2V5Q2hhbmdlZCBtZXNzYWdlLlxyXG4gICAgICAgIHRoaXMucmVjZWl2ZXIuX3N1YnNjcmliZShcImtleUNoYW5nZWRcIiAvKiBLRVlfQ0hBTkdFRCAqLywgYXN5bmMgKF9vcmlnaW4sIGRhdGEpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qga2V5cyA9IGF3YWl0IHRoaXMuX3BvbGwoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGtleVByb2Nlc3NlZDoga2V5cy5pbmNsdWRlcyhkYXRhLmtleSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBMZXQgdGhlIHNlbmRlciBrbm93IHRoYXQgd2UgYXJlIGxpc3RlbmluZyBzbyB0aGV5IGdpdmUgdXMgbW9yZSB0aW1lb3V0LlxyXG4gICAgICAgIHRoaXMucmVjZWl2ZXIuX3N1YnNjcmliZShcInBpbmdcIiAvKiBQSU5HICovLCBhc3luYyAoX29yaWdpbiwgX2RhdGEpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIFtcImtleUNoYW5nZWRcIiAvKiBLRVlfQ0hBTkdFRCAqL107XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEFzIHRoZSBtYWluIHdpbmRvdywgd2Ugc2hvdWxkIGxldCB0aGUgd29ya2VyIGtub3cgd2hlbiBrZXlzIGNoYW5nZSAoc2V0IGFuZCByZW1vdmUpLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1NlcnZpY2VXb3JrZXJDb250YWluZXIvcmVhZHkgfCBTZXJ2aWNlV29ya2VyQ29udGFpbmVyLnJlYWR5fVxyXG4gICAgICogbWF5IG5vdCByZXNvbHZlLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBpbml0aWFsaXplU2VuZGVyKCkge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHRoZXJlJ3MgYW4gYWN0aXZlIHNlcnZpY2Ugd29ya2VyLlxyXG4gICAgICAgIHRoaXMuYWN0aXZlU2VydmljZVdvcmtlciA9IGF3YWl0IF9nZXRBY3RpdmVTZXJ2aWNlV29ya2VyKCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLmFjdGl2ZVNlcnZpY2VXb3JrZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNlbmRlciA9IG5ldyBTZW5kZXIodGhpcy5hY3RpdmVTZXJ2aWNlV29ya2VyKTtcclxuICAgICAgICAvLyBQaW5nIHRoZSBzZXJ2aWNlIHdvcmtlciB0byBjaGVjayB3aGF0IGV2ZW50cyB0aGV5IGNhbiBoYW5kbGUuXHJcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHRoaXMuc2VuZGVyLl9zZW5kKFwicGluZ1wiIC8qIFBJTkcgKi8sIHt9LCA4MDAgLyogTE9OR19BQ0sgKi8pO1xyXG4gICAgICAgIGlmICghcmVzdWx0cykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgoKF9hID0gcmVzdWx0c1swXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZ1bGZpbGxlZCkgJiZcclxuICAgICAgICAgICAgKChfYiA9IHJlc3VsdHNbMF0pID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi52YWx1ZS5pbmNsdWRlcyhcImtleUNoYW5nZWRcIiAvKiBLRVlfQ0hBTkdFRCAqLykpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VydmljZVdvcmtlclJlY2VpdmVyQXZhaWxhYmxlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIExldCB0aGUgd29ya2VyIGtub3cgYWJvdXQgYSBjaGFuZ2VkIGtleSwgdGhlIGV4YWN0IGtleSBkb2Vzbid0IHRlY2huaWNhbGx5IG1hdHRlciBzaW5jZSB0aGVcclxuICAgICAqIHdvcmtlciB3aWxsIGp1c3QgdHJpZ2dlciBhIGZ1bGwgc3luYyBhbnl3YXkuXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIEZvciBub3csIHdlIG9ubHkgc3VwcG9ydCBvbmUgc2VydmljZSB3b3JrZXIgcGVyIHBhZ2UuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGtleSAtIFN0b3JhZ2Uga2V5IHdoaWNoIGNoYW5nZWQuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIG5vdGlmeVNlcnZpY2VXb3JrZXIoa2V5KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNlbmRlciB8fFxyXG4gICAgICAgICAgICAhdGhpcy5hY3RpdmVTZXJ2aWNlV29ya2VyIHx8XHJcbiAgICAgICAgICAgIF9nZXRTZXJ2aWNlV29ya2VyQ29udHJvbGxlcigpICE9PSB0aGlzLmFjdGl2ZVNlcnZpY2VXb3JrZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNlbmRlci5fc2VuZChcImtleUNoYW5nZWRcIiAvKiBLRVlfQ0hBTkdFRCAqLywgeyBrZXkgfSwgXHJcbiAgICAgICAgICAgIC8vIFVzZSBsb25nIHRpbWVvdXQgaWYgcmVjZWl2ZXIgaGFzIHByZXZpb3VzbHkgcmVzcG9uZGVkIHRvIGEgcGluZyBmcm9tIHVzLlxyXG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VXb3JrZXJSZWNlaXZlckF2YWlsYWJsZVxyXG4gICAgICAgICAgICAgICAgPyA4MDAgLyogTE9OR19BQ0sgKi9cclxuICAgICAgICAgICAgICAgIDogNTAgLyogQUNLICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBiZXN0IGVmZm9ydCBhcHByb2FjaC4gSWdub3JlIGVycm9ycy5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBhc3luYyBfaXNBdmFpbGFibGUoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKCFpbmRleGVkREIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBkYiA9IGF3YWl0IF9vcGVuRGF0YWJhc2UoKTtcclxuICAgICAgICAgICAgYXdhaXQgX3B1dE9iamVjdChkYiwgU1RPUkFHRV9BVkFJTEFCTEVfS0VZLCAnMScpO1xyXG4gICAgICAgICAgICBhd2FpdCBfZGVsZXRlT2JqZWN0KGRiLCBTVE9SQUdFX0FWQUlMQUJMRV9LRVkpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKF9hKSB7IH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfd2l0aFBlbmRpbmdXcml0ZSh3cml0ZSkge1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1dyaXRlcysrO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHdyaXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkge1xyXG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdXcml0ZXMtLTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBhc3luYyBfc2V0KGtleSwgdmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fd2l0aFBlbmRpbmdXcml0ZShhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX3dpdGhSZXRyaWVzKChkYikgPT4gX3B1dE9iamVjdChkYiwga2V5LCB2YWx1ZSkpO1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsQ2FjaGVba2V5XSA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub3RpZnlTZXJ2aWNlV29ya2VyKGtleSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfZ2V0KGtleSkge1xyXG4gICAgICAgIGNvbnN0IG9iaiA9IChhd2FpdCB0aGlzLl93aXRoUmV0cmllcygoZGIpID0+IGdldE9iamVjdChkYiwga2V5KSkpO1xyXG4gICAgICAgIHRoaXMubG9jYWxDYWNoZVtrZXldID0gb2JqO1xyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfcmVtb3ZlKGtleSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl93aXRoUGVuZGluZ1dyaXRlKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fd2l0aFJldHJpZXMoKGRiKSA9PiBfZGVsZXRlT2JqZWN0KGRiLCBrZXkpKTtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMubG9jYWxDYWNoZVtrZXldO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub3RpZnlTZXJ2aWNlV29ya2VyKGtleSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfcG9sbCgpIHtcclxuICAgICAgICAvLyBUT0RPOiBjaGVjayBpZiB3ZSBuZWVkIHRvIGZhbGxiYWNrIGlmIGdldEFsbCBpcyBub3Qgc3VwcG9ydGVkXHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5fd2l0aFJldHJpZXMoKGRiKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGdldEFsbFJlcXVlc3QgPSBnZXRPYmplY3RTdG9yZShkYiwgZmFsc2UpLmdldEFsbCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERCUHJvbWlzZShnZXRBbGxSZXF1ZXN0KS50b1Byb21pc2UoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoIXJlc3VsdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIHdlIGhhdmUgcGVuZGluZyB3cml0ZXMgaW4gcHJvZ3Jlc3MgYWJvcnQsIHdlJ2xsIGdldCBwaWNrZWQgdXAgb24gdGhlIG5leHQgcG9sbFxyXG4gICAgICAgIGlmICh0aGlzLnBlbmRpbmdXcml0ZXMgIT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBrZXlzID0gW107XHJcbiAgICAgICAgY29uc3Qga2V5c0luUmVzdWx0ID0gbmV3IFNldCgpO1xyXG4gICAgICAgIGZvciAoY29uc3QgeyBmYmFzZV9rZXk6IGtleSwgdmFsdWUgfSBvZiByZXN1bHQpIHtcclxuICAgICAgICAgICAga2V5c0luUmVzdWx0LmFkZChrZXkpO1xyXG4gICAgICAgICAgICBpZiAoSlNPTi5zdHJpbmdpZnkodGhpcy5sb2NhbENhY2hlW2tleV0pICE9PSBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5TGlzdGVuZXJzKGtleSwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAga2V5cy5wdXNoKGtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChjb25zdCBsb2NhbEtleSBvZiBPYmplY3Qua2V5cyh0aGlzLmxvY2FsQ2FjaGUpKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxvY2FsQ2FjaGVbbG9jYWxLZXldICYmICFrZXlzSW5SZXN1bHQuaGFzKGxvY2FsS2V5KSkge1xyXG4gICAgICAgICAgICAgICAgLy8gRGVsZXRlZFxyXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMobG9jYWxLZXksIG51bGwpO1xyXG4gICAgICAgICAgICAgICAga2V5cy5wdXNoKGxvY2FsS2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ga2V5cztcclxuICAgIH1cclxuICAgIG5vdGlmeUxpc3RlbmVycyhrZXksIG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5sb2NhbENhY2hlW2tleV0gPSBuZXdWYWx1ZTtcclxuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVyc1trZXldO1xyXG4gICAgICAgIGlmIChsaXN0ZW5lcnMpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiBBcnJheS5mcm9tKGxpc3RlbmVycykpIHtcclxuICAgICAgICAgICAgICAgIGxpc3RlbmVyKG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHN0YXJ0UG9sbGluZygpIHtcclxuICAgICAgICB0aGlzLnN0b3BQb2xsaW5nKCk7XHJcbiAgICAgICAgdGhpcy5wb2xsVGltZXIgPSBzZXRJbnRlcnZhbChhc3luYyAoKSA9PiB0aGlzLl9wb2xsKCksIF9QT0xMSU5HX0lOVEVSVkFMX01TKTtcclxuICAgIH1cclxuICAgIHN0b3BQb2xsaW5nKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnBvbGxUaW1lcikge1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMucG9sbFRpbWVyKTtcclxuICAgICAgICAgICAgdGhpcy5wb2xsVGltZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9hZGRMaXN0ZW5lcihrZXksIGxpc3RlbmVyKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMubGlzdGVuZXJzKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5zdGFydFBvbGxpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmxpc3RlbmVyc1trZXldKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzW2tleV0gPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgICAgIC8vIFBvcHVsYXRlIHRoZSBjYWNoZSB0byBhdm9pZCBzcHVyaW91c2x5IHRyaWdnZXJpbmcgb24gZmlyc3QgcG9sbC5cclxuICAgICAgICAgICAgdm9pZCB0aGlzLl9nZXQoa2V5KTsgLy8gVGhpcyBjYW4gaGFwcGVuIGluIHRoZSBiYWNrZ3JvdW5kIGFzeW5jIGFuZCB3ZSBjYW4gcmV0dXJuIGltbWVkaWF0ZWx5LlxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxpc3RlbmVyc1trZXldLmFkZChsaXN0ZW5lcik7XHJcbiAgICB9XHJcbiAgICBfcmVtb3ZlTGlzdGVuZXIoa2V5LCBsaXN0ZW5lcikge1xyXG4gICAgICAgIGlmICh0aGlzLmxpc3RlbmVyc1trZXldKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzW2tleV0uZGVsZXRlKGxpc3RlbmVyKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMubGlzdGVuZXJzW2tleV0uc2l6ZSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMubGlzdGVuZXJzW2tleV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMubGlzdGVuZXJzKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5zdG9wUG9sbGluZygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5JbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlLnR5cGUgPSAnTE9DQUwnO1xyXG4vKipcclxuICogQW4gaW1wbGVtZW50YXRpb24gb2Yge0BsaW5rIFBlcnNpc3RlbmNlfSBvZiB0eXBlIGBMT0NBTGAgdXNpbmcgYGluZGV4ZWREQmBcclxuICogZm9yIHRoZSB1bmRlcmx5aW5nIHN0b3JhZ2UuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2UgPSBJbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBzdGFydFNpZ25JblBob25lTWZhKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjIvYWNjb3VudHMvbWZhU2lnbkluOnN0YXJ0XCIgLyogU1RBUlRfUEhPTkVfTUZBX1NJR05fSU4gKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuZnVuY3Rpb24gZmluYWxpemVTaWduSW5QaG9uZU1mYShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YyL2FjY291bnRzL21mYVNpZ25JbjpmaW5hbGl6ZVwiIC8qIEZJTkFMSVpFX1BIT05FX01GQV9TSUdOX0lOICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGdldFJlY2FwdGNoYVBhcmFtcyhhdXRoKSB7XHJcbiAgICByZXR1cm4gKChhd2FpdCBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJHRVRcIiAvKiBHRVQgKi8sIFwiL3YxL3JlY2FwdGNoYVBhcmFtc1wiIC8qIEdFVF9SRUNBUFRDSEFfUEFSQU0gKi8pKS5yZWNhcHRjaGFTaXRlS2V5IHx8ICcnKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRTY3JpcHRQYXJlbnRFbGVtZW50KCkge1xyXG4gICAgdmFyIF9hLCBfYjtcclxuICAgIHJldHVybiAoX2IgPSAoX2EgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbMF0pICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IGRvY3VtZW50O1xyXG59XHJcbmZ1bmN0aW9uIF9sb2FkSlModXJsKSB7XHJcbiAgICAvLyBUT0RPOiBjb25zaWRlciBhZGRpbmcgdGltZW91dCBzdXBwb3J0ICYgY2FuY2VsbGF0aW9uXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdzcmMnLCB1cmwpO1xyXG4gICAgICAgIGVsLm9ubG9hZCA9IHJlc29sdmU7XHJcbiAgICAgICAgZWwub25lcnJvciA9IGUgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IF9jcmVhdGVFcnJvcihcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgICAgICBlcnJvci5jdXN0b21EYXRhID0gZTtcclxuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGVsLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcclxuICAgICAgICBlbC5jaGFyc2V0ID0gJ1VURi04JztcclxuICAgICAgICBnZXRTY3JpcHRQYXJlbnRFbGVtZW50KCkuYXBwZW5kQ2hpbGQoZWwpO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gX2dlbmVyYXRlQ2FsbGJhY2tOYW1lKHByZWZpeCkge1xyXG4gICAgcmV0dXJuIGBfXyR7cHJlZml4fSR7TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDAwMCl9YDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBfU09MVkVfVElNRV9NUyA9IDUwMDtcclxuY29uc3QgX0VYUElSQVRJT05fVElNRV9NUyA9IDYwMDAwO1xyXG5jb25zdCBfV0lER0VUX0lEX1NUQVJUID0gMTAwMDAwMDAwMDAwMDtcclxuY2xhc3MgTW9ja1JlQ2FwdGNoYSB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoKSB7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gYXV0aDtcclxuICAgICAgICB0aGlzLmNvdW50ZXIgPSBfV0lER0VUX0lEX1NUQVJUO1xyXG4gICAgICAgIHRoaXMuX3dpZGdldHMgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICByZW5kZXIoY29udGFpbmVyLCBwYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgY29uc3QgaWQgPSB0aGlzLmNvdW50ZXI7XHJcbiAgICAgICAgdGhpcy5fd2lkZ2V0cy5zZXQoaWQsIG5ldyBNb2NrV2lkZ2V0KGNvbnRhaW5lciwgdGhpcy5hdXRoLm5hbWUsIHBhcmFtZXRlcnMgfHwge30pKTtcclxuICAgICAgICB0aGlzLmNvdW50ZXIrKztcclxuICAgICAgICByZXR1cm4gaWQ7XHJcbiAgICB9XHJcbiAgICByZXNldChvcHRXaWRnZXRJZCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBjb25zdCBpZCA9IG9wdFdpZGdldElkIHx8IF9XSURHRVRfSURfU1RBUlQ7XHJcbiAgICAgICAgdm9pZCAoKF9hID0gdGhpcy5fd2lkZ2V0cy5nZXQoaWQpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZGVsZXRlKCkpO1xyXG4gICAgICAgIHRoaXMuX3dpZGdldHMuZGVsZXRlKGlkKTtcclxuICAgIH1cclxuICAgIGdldFJlc3BvbnNlKG9wdFdpZGdldElkKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IGlkID0gb3B0V2lkZ2V0SWQgfHwgX1dJREdFVF9JRF9TVEFSVDtcclxuICAgICAgICByZXR1cm4gKChfYSA9IHRoaXMuX3dpZGdldHMuZ2V0KGlkKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldFJlc3BvbnNlKCkpIHx8ICcnO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZXhlY3V0ZShvcHRXaWRnZXRJZCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBjb25zdCBpZCA9IG9wdFdpZGdldElkIHx8IF9XSURHRVRfSURfU1RBUlQ7XHJcbiAgICAgICAgdm9pZCAoKF9hID0gdGhpcy5fd2lkZ2V0cy5nZXQoaWQpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZXhlY3V0ZSgpKTtcclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgTW9ja1dpZGdldCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXJPcklkLCBhcHBOYW1lLCBwYXJhbXMpIHtcclxuICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcclxuICAgICAgICB0aGlzLnRpbWVySWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZGVsZXRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucmVzcG9uc2VUb2tlbiA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jbGlja0hhbmRsZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZXhlY3V0ZSgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdHlwZW9mIGNvbnRhaW5lck9ySWQgPT09ICdzdHJpbmcnXHJcbiAgICAgICAgICAgID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29udGFpbmVyT3JJZClcclxuICAgICAgICAgICAgOiBjb250YWluZXJPcklkO1xyXG4gICAgICAgIF9hc3NlcnQoY29udGFpbmVyLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8sIHsgYXBwTmFtZSB9KTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLmlzVmlzaWJsZSA9IHRoaXMucGFyYW1zLnNpemUgIT09ICdpbnZpc2libGUnO1xyXG4gICAgICAgIGlmICh0aGlzLmlzVmlzaWJsZSkge1xyXG4gICAgICAgICAgICB0aGlzLmV4ZWN1dGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldFJlc3BvbnNlKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tJZkRlbGV0ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZXNwb25zZVRva2VuO1xyXG4gICAgfVxyXG4gICAgZGVsZXRlKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tJZkRlbGV0ZWQoKTtcclxuICAgICAgICB0aGlzLmRlbGV0ZWQgPSB0cnVlO1xyXG4gICAgICAgIGlmICh0aGlzLnRpbWVySWQpIHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXJJZCk7XHJcbiAgICAgICAgICAgIHRoaXMudGltZXJJZCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIpO1xyXG4gICAgfVxyXG4gICAgZXhlY3V0ZSgpIHtcclxuICAgICAgICB0aGlzLmNoZWNrSWZEZWxldGVkKCk7XHJcbiAgICAgICAgaWYgKHRoaXMudGltZXJJZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudGltZXJJZCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZXNwb25zZVRva2VuID0gZ2VuZXJhdGVSYW5kb21BbHBoYU51bWVyaWNTdHJpbmcoNTApO1xyXG4gICAgICAgICAgICBjb25zdCB7IGNhbGxiYWNrLCAnZXhwaXJlZC1jYWxsYmFjayc6IGV4cGlyZWRDYWxsYmFjayB9ID0gdGhpcy5wYXJhbXM7XHJcbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayh0aGlzLnJlc3BvbnNlVG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMudGltZXJJZCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudGltZXJJZCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3BvbnNlVG9rZW4gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgaWYgKGV4cGlyZWRDYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyZWRDYWxsYmFjaygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1Zpc2libGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgX0VYUElSQVRJT05fVElNRV9NUyk7XHJcbiAgICAgICAgfSwgX1NPTFZFX1RJTUVfTVMpO1xyXG4gICAgfVxyXG4gICAgY2hlY2tJZkRlbGV0ZWQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGVsZXRlZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3JlQ0FQVENIQSBtb2NrIHdhcyBhbHJlYWR5IGRlbGV0ZWQhJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGdlbmVyYXRlUmFuZG9tQWxwaGFOdW1lcmljU3RyaW5nKGxlbikge1xyXG4gICAgY29uc3QgY2hhcnMgPSBbXTtcclxuICAgIGNvbnN0IGFsbG93ZWRDaGFycyA9ICcxMjM0NTY3ODkwYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWic7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgY2hhcnMucHVzaChhbGxvd2VkQ2hhcnMuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGFsbG93ZWRDaGFycy5sZW5ndGgpKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY2hhcnMuam9pbignJyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gUmVDYXB0Y2hhIHdpbGwgbG9hZCB1c2luZyB0aGUgc2FtZSBjYWxsYmFjaywgc28gdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIG5lZWRzXHJcbi8vIHRvIGJlIGtlcHQgYXJvdW5kXHJcbmNvbnN0IF9KU0xPQURfQ0FMTEJBQ0sgPSBfZ2VuZXJhdGVDYWxsYmFja05hbWUoJ3JjYicpO1xyXG5jb25zdCBORVRXT1JLX1RJTUVPVVRfREVMQVkgPSBuZXcgRGVsYXkoMzAwMDAsIDYwMDAwKTtcclxuY29uc3QgUkVDQVBUQ0hBX0JBU0UgPSAnaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9yZWNhcHRjaGEvYXBpLmpzPyc7XHJcbi8qKlxyXG4gKiBMb2FkZXIgZm9yIHRoZSBHUmVDYXB0Y2hhIGxpYnJhcnkuIFRoZXJlIHNob3VsZCBvbmx5IGV2ZXIgYmUgb25lIG9mIHRoaXMuXHJcbiAqL1xyXG5jbGFzcyBSZUNhcHRjaGFMb2FkZXJJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuaG9zdExhbmd1YWdlID0gJyc7XHJcbiAgICAgICAgdGhpcy5jb3VudGVyID0gMDtcclxuICAgICAgICB0aGlzLmxpYnJhcnlTZXBhcmF0ZWx5TG9hZGVkID0gISFfd2luZG93KCkuZ3JlY2FwdGNoYTtcclxuICAgIH1cclxuICAgIGxvYWQoYXV0aCwgaGwgPSAnJykge1xyXG4gICAgICAgIF9hc3NlcnQoaXNIb3N0TGFuZ3VhZ2VWYWxpZChobCksIGF1dGgsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgaWYgKHRoaXMuc2hvdWxkUmVzb2x2ZUltbWVkaWF0ZWx5KGhsKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKF93aW5kb3coKS5ncmVjYXB0Y2hhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbmV0d29ya1RpbWVvdXQgPSBfd2luZG93KCkuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoX2NyZWF0ZUVycm9yKGF1dGgsIFwibmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiIC8qIE5FVFdPUktfUkVRVUVTVF9GQUlMRUQgKi8pKTtcclxuICAgICAgICAgICAgfSwgTkVUV09SS19USU1FT1VUX0RFTEFZLmdldCgpKTtcclxuICAgICAgICAgICAgX3dpbmRvdygpW19KU0xPQURfQ0FMTEJBQ0tdID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgX3dpbmRvdygpLmNsZWFyVGltZW91dChuZXR3b3JrVGltZW91dCk7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgX3dpbmRvdygpW19KU0xPQURfQ0FMTEJBQ0tdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVjYXB0Y2hhID0gX3dpbmRvdygpLmdyZWNhcHRjaGE7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXJlY2FwdGNoYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChfY3JlYXRlRXJyb3IoYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gV3JhcCB0aGUgZ3JlcHRjaGEgcmVuZGVyIGZ1bmN0aW9uIHNvIHRoYXQgd2Uga25vdyBpZiB0aGUgZGV2ZWxvcGVyIGhhc1xyXG4gICAgICAgICAgICAgICAgLy8gY2FsbGVkIGl0IHNlcGFyYXRlbHlcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlbmRlciA9IHJlY2FwdGNoYS5yZW5kZXI7XHJcbiAgICAgICAgICAgICAgICByZWNhcHRjaGEucmVuZGVyID0gKGNvbnRhaW5lciwgcGFyYW1zKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2lkZ2V0SWQgPSByZW5kZXIoY29udGFpbmVyLCBwYXJhbXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY291bnRlcisrO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3aWRnZXRJZDtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhvc3RMYW5ndWFnZSA9IGhsO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZWNhcHRjaGEpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjb25zdCB1cmwgPSBgJHtSRUNBUFRDSEFfQkFTRX0/JHtxdWVyeXN0cmluZyh7XHJcbiAgICAgICAgICAgICAgICBvbmxvYWQ6IF9KU0xPQURfQ0FMTEJBQ0ssXHJcbiAgICAgICAgICAgICAgICByZW5kZXI6ICdleHBsaWNpdCcsXHJcbiAgICAgICAgICAgICAgICBobFxyXG4gICAgICAgICAgICB9KX1gO1xyXG4gICAgICAgICAgICBfbG9hZEpTKHVybCkuY2F0Y2goKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KG5ldHdvcmtUaW1lb3V0KTtcclxuICAgICAgICAgICAgICAgIHJlamVjdChfY3JlYXRlRXJyb3IoYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY2xlYXJlZE9uZUluc3RhbmNlKCkge1xyXG4gICAgICAgIHRoaXMuY291bnRlci0tO1xyXG4gICAgfVxyXG4gICAgc2hvdWxkUmVzb2x2ZUltbWVkaWF0ZWx5KGhsKSB7XHJcbiAgICAgICAgLy8gV2UgY2FuIHJlc29sdmUgaW1tZWRpYXRlbHkgaWY6XHJcbiAgICAgICAgLy8gICDigKIgZ3JlY2FwdGNoYSBpcyBhbHJlYWR5IGRlZmluZWQgQU5EIChcclxuICAgICAgICAvLyAgICAgMS4gdGhlIHJlcXVlc3RlZCBsYW5ndWFnZSBjb2RlcyBhcmUgdGhlIHNhbWUgT1JcclxuICAgICAgICAvLyAgICAgMi4gdGhlcmUgZXhpc3RzIGFscmVhZHkgYSBSZUNhcHRjaGEgb24gdGhlIHBhZ2VcclxuICAgICAgICAvLyAgICAgMy4gdGhlIGxpYnJhcnkgd2FzIGFscmVhZHkgbG9hZGVkIGJ5IHRoZSBhcHBcclxuICAgICAgICAvLyBJbiBjYXNlcyAoMikgYW5kICgzKSwgd2UgX2Nhbid0XyByZWxvYWQgYXMgaXQgd291bGQgYnJlYWsgdGhlIHJlY2FwdGNoYXNcclxuICAgICAgICAvLyB0aGF0IGFyZSBhbHJlYWR5IGluIHRoZSBwYWdlXHJcbiAgICAgICAgcmV0dXJuICghIV93aW5kb3coKS5ncmVjYXB0Y2hhICYmXHJcbiAgICAgICAgICAgIChobCA9PT0gdGhpcy5ob3N0TGFuZ3VhZ2UgfHxcclxuICAgICAgICAgICAgICAgIHRoaXMuY291bnRlciA+IDAgfHxcclxuICAgICAgICAgICAgICAgIHRoaXMubGlicmFyeVNlcGFyYXRlbHlMb2FkZWQpKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBpc0hvc3RMYW5ndWFnZVZhbGlkKGhsKSB7XHJcbiAgICByZXR1cm4gaGwubGVuZ3RoIDw9IDYgJiYgL15cXHMqW2EtekEtWjAtOVxcLV0qXFxzKiQvLnRlc3QoaGwpO1xyXG59XHJcbmNsYXNzIE1vY2tSZUNhcHRjaGFMb2FkZXJJbXBsIHtcclxuICAgIGFzeW5jIGxvYWQoYXV0aCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgTW9ja1JlQ2FwdGNoYShhdXRoKTtcclxuICAgIH1cclxuICAgIGNsZWFyZWRPbmVJbnN0YW5jZSgpIHsgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IFJFQ0FQVENIQV9WRVJJRklFUl9UWVBFID0gJ3JlY2FwdGNoYSc7XHJcbmNvbnN0IERFRkFVTFRfUEFSQU1TID0ge1xyXG4gICAgdGhlbWU6ICdsaWdodCcsXHJcbiAgICB0eXBlOiAnaW1hZ2UnXHJcbn07XHJcbi8qKlxyXG4gKiBBbiB7QGxpbmsgaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9yZWNhcHRjaGEvIHwgcmVDQVBUQ0hBfS1iYXNlZCBhcHBsaWNhdGlvbiB2ZXJpZmllci5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgUmVjYXB0Y2hhVmVyaWZpZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNvbnRhaW5lck9ySWQgLSBUaGUgcmVDQVBUQ0hBIGNvbnRhaW5lciBwYXJhbWV0ZXIuXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIFRoaXMgaGFzIGRpZmZlcmVudCBtZWFuaW5nIGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSByZUNBUFRDSEEgaXMgaGlkZGVuIG9yIHZpc2libGUuIEZvciBhXHJcbiAgICAgKiB2aXNpYmxlIHJlQ0FQVENIQSB0aGUgY29udGFpbmVyIG11c3QgYmUgZW1wdHkuIElmIGEgc3RyaW5nIGlzIHVzZWQsIGl0IGhhcyB0byBjb3JyZXNwb25kIHRvXHJcbiAgICAgKiBhbiBlbGVtZW50IElELiBUaGUgY29ycmVzcG9uZGluZyBlbGVtZW50IG11c3QgYWxzbyBtdXN0IGJlIGluIHRoZSBET00gYXQgdGhlIHRpbWUgb2ZcclxuICAgICAqIGluaXRpYWxpemF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwYXJhbWV0ZXJzIC0gVGhlIG9wdGlvbmFsIHJlQ0FQVENIQSBwYXJhbWV0ZXJzLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiBDaGVjayB0aGUgcmVDQVBUQ0hBIGRvY3MgZm9yIGEgY29tcHJlaGVuc2l2ZSBsaXN0LiBBbGwgcGFyYW1ldGVycyBhcmUgYWNjZXB0ZWQgZXhjZXB0IGZvclxyXG4gICAgICogdGhlIHNpdGVrZXkuIEZpcmViYXNlIEF1dGggYmFja2VuZCBwcm92aXNpb25zIGEgcmVDQVBUQ0hBIGZvciBlYWNoIHByb2plY3QgYW5kIHdpbGxcclxuICAgICAqIGNvbmZpZ3VyZSB0aGlzIHVwb24gcmVuZGVyaW5nLiBGb3IgYW4gaW52aXNpYmxlIHJlQ0FQVENIQSwgYSBzaXplIGtleSBtdXN0IGhhdmUgdGhlIHZhbHVlXHJcbiAgICAgKiAnaW52aXNpYmxlJy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gYXV0aEV4dGVybiAtIFRoZSBjb3JyZXNwb25kaW5nIEZpcmViYXNlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogSWYgbm9uZSBpcyBwcm92aWRlZCwgdGhlIGRlZmF1bHQgRmlyZWJhc2Uge0BsaW5rIEF1dGh9IGluc3RhbmNlIGlzIHVzZWQuIEEgRmlyZWJhc2Uge0BsaW5rIEF1dGh9IGluc3RhbmNlXHJcbiAgICAgKiBtdXN0IGJlIGluaXRpYWxpemVkIHdpdGggYW4gQVBJIGtleSwgb3RoZXJ3aXNlIGFuIGVycm9yIHdpbGwgYmUgdGhyb3duLlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXJPcklkLCBwYXJhbWV0ZXJzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9QQVJBTVMpLCBhdXRoRXh0ZXJuKSB7XHJcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJzID0gcGFyYW1ldGVycztcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgYXBwbGljYXRpb24gdmVyaWZpZXIgdHlwZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZW1hcmtzXHJcbiAgICAgICAgICogRm9yIGEgcmVDQVBUQ0hBIHZlcmlmaWVyLCB0aGlzIGlzICdyZWNhcHRjaGEnLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMudHlwZSA9IFJFQ0FQVENIQV9WRVJJRklFUl9UWVBFO1xyXG4gICAgICAgIHRoaXMuZGVzdHJveWVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy53aWRnZXRJZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy50b2tlbkNoYW5nZUxpc3RlbmVycyA9IG5ldyBTZXQoKTtcclxuICAgICAgICB0aGlzLnJlbmRlclByb21pc2UgPSBudWxsO1xyXG4gICAgICAgIHRoaXMucmVjYXB0Y2hhID0gbnVsbDtcclxuICAgICAgICB0aGlzLmF1dGggPSBfY2FzdEF1dGgoYXV0aEV4dGVybik7XHJcbiAgICAgICAgdGhpcy5pc0ludmlzaWJsZSA9IHRoaXMucGFyYW1ldGVycy5zaXplID09PSAnaW52aXNpYmxlJztcclxuICAgICAgICBfYXNzZXJ0KHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcsIHRoaXMuYXV0aCwgXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIgLyogT1BFUkFUSU9OX05PVF9TVVBQT1JURUQgKi8pO1xyXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHR5cGVvZiBjb250YWluZXJPcklkID09PSAnc3RyaW5nJ1xyXG4gICAgICAgICAgICA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbnRhaW5lck9ySWQpXHJcbiAgICAgICAgICAgIDogY29udGFpbmVyT3JJZDtcclxuICAgICAgICBfYXNzZXJ0KGNvbnRhaW5lciwgdGhpcy5hdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIHRoaXMucGFyYW1ldGVycy5jYWxsYmFjayA9IHRoaXMubWFrZVRva2VuQ2FsbGJhY2sodGhpcy5wYXJhbWV0ZXJzLmNhbGxiYWNrKTtcclxuICAgICAgICB0aGlzLl9yZWNhcHRjaGFMb2FkZXIgPSB0aGlzLmF1dGguc2V0dGluZ3MuYXBwVmVyaWZpY2F0aW9uRGlzYWJsZWRGb3JUZXN0aW5nXHJcbiAgICAgICAgICAgID8gbmV3IE1vY2tSZUNhcHRjaGFMb2FkZXJJbXBsKClcclxuICAgICAgICAgICAgOiBuZXcgUmVDYXB0Y2hhTG9hZGVySW1wbCgpO1xyXG4gICAgICAgIHRoaXMudmFsaWRhdGVTdGFydGluZ1N0YXRlKCk7XHJcbiAgICAgICAgLy8gVE9ETzogRmlndXJlIG91dCBpZiBzZGsgdmVyc2lvbiBpcyBuZWVkZWRcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogV2FpdHMgZm9yIHRoZSB1c2VyIHRvIHNvbHZlIHRoZSByZUNBUFRDSEEgYW5kIHJlc29sdmVzIHdpdGggdGhlIHJlQ0FQVENIQSB0b2tlbi5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgZm9yIHRoZSByZUNBUFRDSEEgdG9rZW4uXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHZlcmlmeSgpIHtcclxuICAgICAgICB0aGlzLmFzc2VydE5vdERlc3Ryb3llZCgpO1xyXG4gICAgICAgIGNvbnN0IGlkID0gYXdhaXQgdGhpcy5yZW5kZXIoKTtcclxuICAgICAgICBjb25zdCByZWNhcHRjaGEgPSB0aGlzLmdldEFzc2VydGVkUmVjYXB0Y2hhKCk7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSByZWNhcHRjaGEuZ2V0UmVzcG9uc2UoaWQpO1xyXG4gICAgICAgIGlmIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdG9rZW5DaGFuZ2UgPSAodG9rZW4pID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghdG9rZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIElnbm9yZSB0b2tlbiBleHBpcmF0aW9ucy5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMudG9rZW5DaGFuZ2VMaXN0ZW5lcnMuZGVsZXRlKHRva2VuQ2hhbmdlKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUodG9rZW4pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLnRva2VuQ2hhbmdlTGlzdGVuZXJzLmFkZCh0b2tlbkNoYW5nZSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzSW52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICByZWNhcHRjaGEuZXhlY3V0ZShpZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmVuZGVycyB0aGUgcmVDQVBUQ0hBIHdpZGdldCBvbiB0aGUgcGFnZS5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSByZUNBUFRDSEEgd2lkZ2V0IElELlxyXG4gICAgICovXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGhpcy5hc3NlcnROb3REZXN0cm95ZWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgLy8gVGhpcyBtZXRob2QgcmV0dXJucyBhIHByb21pc2UuIFNpbmNlIGl0J3Mgbm90IGFzeW5jICh3ZSB3YW50IHRvIHJldHVybiB0aGVcclxuICAgICAgICAgICAgLy8gX3NhbWVfIHByb21pc2UgaWYgcmVuZGVyaW5nIGlzIHN0aWxsIG9jY3VycmluZyksIHRoZSBBUEkgc3VyZmFjZSBzaG91bGRcclxuICAgICAgICAgICAgLy8gcmVqZWN0IHdpdGggdGhlIGVycm9yIHJhdGhlciB0aGFuIGp1c3QgdGhyb3dcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5yZW5kZXJQcm9taXNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlclByb21pc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVuZGVyUHJvbWlzZSA9IHRoaXMubWFrZVJlbmRlclByb21pc2UoKS5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJQcm9taXNlID0gbnVsbDtcclxuICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJQcm9taXNlO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX3Jlc2V0KCkge1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90RGVzdHJveWVkKCk7XHJcbiAgICAgICAgaWYgKHRoaXMud2lkZ2V0SWQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5nZXRBc3NlcnRlZFJlY2FwdGNoYSgpLnJlc2V0KHRoaXMud2lkZ2V0SWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ2xlYXJzIHRoZSByZUNBUFRDSEEgd2lkZ2V0IGZyb20gdGhlIHBhZ2UgYW5kIGRlc3Ryb3lzIHRoZSBpbnN0YW5jZS5cclxuICAgICAqL1xyXG4gICAgY2xlYXIoKSB7XHJcbiAgICAgICAgdGhpcy5hc3NlcnROb3REZXN0cm95ZWQoKTtcclxuICAgICAgICB0aGlzLmRlc3Ryb3llZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fcmVjYXB0Y2hhTG9hZGVyLmNsZWFyZWRPbmVJbnN0YW5jZSgpO1xyXG4gICAgICAgIGlmICghdGhpcy5pc0ludmlzaWJsZSkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5jaGlsZE5vZGVzLmZvckVhY2gobm9kZSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZW1vdmVDaGlsZChub2RlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdmFsaWRhdGVTdGFydGluZ1N0YXRlKCkge1xyXG4gICAgICAgIF9hc3NlcnQoIXRoaXMucGFyYW1ldGVycy5zaXRla2V5LCB0aGlzLmF1dGgsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgX2Fzc2VydCh0aGlzLmlzSW52aXNpYmxlIHx8ICF0aGlzLmNvbnRhaW5lci5oYXNDaGlsZE5vZGVzKCksIHRoaXMuYXV0aCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICBfYXNzZXJ0KHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcsIHRoaXMuYXV0aCwgXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIgLyogT1BFUkFUSU9OX05PVF9TVVBQT1JURUQgKi8pO1xyXG4gICAgfVxyXG4gICAgbWFrZVRva2VuQ2FsbGJhY2soZXhpc3RpbmcpIHtcclxuICAgICAgICByZXR1cm4gdG9rZW4gPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnRva2VuQ2hhbmdlTGlzdGVuZXJzLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIodG9rZW4pKTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBleGlzdGluZyA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgZXhpc3RpbmcodG9rZW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBleGlzdGluZyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdsb2JhbEZ1bmMgPSBfd2luZG93KClbZXhpc3RpbmddO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBnbG9iYWxGdW5jID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2xvYmFsRnVuYyh0b2tlbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgYXNzZXJ0Tm90RGVzdHJveWVkKCkge1xyXG4gICAgICAgIF9hc3NlcnQoIXRoaXMuZGVzdHJveWVkLCB0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBtYWtlUmVuZGVyUHJvbWlzZSgpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLmluaXQoKTtcclxuICAgICAgICBpZiAoIXRoaXMud2lkZ2V0SWQpIHtcclxuICAgICAgICAgICAgbGV0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNJbnZpc2libGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGd1YXJhbnRlZWRFbXB0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGd1YXJhbnRlZWRFbXB0eSk7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIgPSBndWFyYW50ZWVkRW1wdHk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy53aWRnZXRJZCA9IHRoaXMuZ2V0QXNzZXJ0ZWRSZWNhcHRjaGEoKS5yZW5kZXIoY29udGFpbmVyLCB0aGlzLnBhcmFtZXRlcnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy53aWRnZXRJZDtcclxuICAgIH1cclxuICAgIGFzeW5jIGluaXQoKSB7XHJcbiAgICAgICAgX2Fzc2VydChfaXNIdHRwT3JIdHRwcygpICYmICFfaXNXb3JrZXIoKSwgdGhpcy5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGF3YWl0IGRvbVJlYWR5KCk7XHJcbiAgICAgICAgdGhpcy5yZWNhcHRjaGEgPSBhd2FpdCB0aGlzLl9yZWNhcHRjaGFMb2FkZXIubG9hZCh0aGlzLmF1dGgsIHRoaXMuYXV0aC5sYW5ndWFnZUNvZGUgfHwgdW5kZWZpbmVkKTtcclxuICAgICAgICBjb25zdCBzaXRlS2V5ID0gYXdhaXQgZ2V0UmVjYXB0Y2hhUGFyYW1zKHRoaXMuYXV0aCk7XHJcbiAgICAgICAgX2Fzc2VydChzaXRlS2V5LCB0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJzLnNpdGVrZXkgPSBzaXRlS2V5O1xyXG4gICAgfVxyXG4gICAgZ2V0QXNzZXJ0ZWRSZWNhcHRjaGEoKSB7XHJcbiAgICAgICAgX2Fzc2VydCh0aGlzLnJlY2FwdGNoYSwgdGhpcy5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlY2FwdGNoYTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBkb21SZWFkeSgpIHtcclxuICAgIGxldCByZXNvbHZlciA9IG51bGw7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScpIHtcclxuICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIERvY3VtZW50IG5vdCByZWFkeSwgd2FpdCBmb3IgbG9hZCBiZWZvcmUgcmVzb2x2aW5nLlxyXG4gICAgICAgIC8vIFNhdmUgcmVzb2x2ZXIsIHNvIHdlIGNhbiByZW1vdmUgbGlzdGVuZXIgaW4gY2FzZSBpdCB3YXMgZXh0ZXJuYWxseVxyXG4gICAgICAgIC8vIGNhbmNlbGxlZC5cclxuICAgICAgICByZXNvbHZlciA9ICgpID0+IHJlc29sdmUoKTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIHJlc29sdmVyKTtcclxuICAgIH0pLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgIGlmIChyZXNvbHZlcikge1xyXG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9hZCcsIHJlc29sdmVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgZTtcclxuICAgIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIENvbmZpcm1hdGlvblJlc3VsdEltcGwge1xyXG4gICAgY29uc3RydWN0b3IodmVyaWZpY2F0aW9uSWQsIG9uQ29uZmlybWF0aW9uKSB7XHJcbiAgICAgICAgdGhpcy52ZXJpZmljYXRpb25JZCA9IHZlcmlmaWNhdGlvbklkO1xyXG4gICAgICAgIHRoaXMub25Db25maXJtYXRpb24gPSBvbkNvbmZpcm1hdGlvbjtcclxuICAgIH1cclxuICAgIGNvbmZpcm0odmVyaWZpY2F0aW9uQ29kZSkge1xyXG4gICAgICAgIGNvbnN0IGF1dGhDcmVkZW50aWFsID0gUGhvbmVBdXRoQ3JlZGVudGlhbC5fZnJvbVZlcmlmaWNhdGlvbih0aGlzLnZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5vbkNvbmZpcm1hdGlvbihhdXRoQ3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEFzeW5jaHJvbm91c2x5IHNpZ25zIGluIHVzaW5nIGEgcGhvbmUgbnVtYmVyLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUaGlzIG1ldGhvZCBzZW5kcyBhIGNvZGUgdmlhIFNNUyB0byB0aGUgZ2l2ZW5cclxuICogcGhvbmUgbnVtYmVyLCBhbmQgcmV0dXJucyBhIHtAbGluayBDb25maXJtYXRpb25SZXN1bHR9LiBBZnRlciB0aGUgdXNlclxyXG4gKiBwcm92aWRlcyB0aGUgY29kZSBzZW50IHRvIHRoZWlyIHBob25lLCBjYWxsIHtAbGluayBDb25maXJtYXRpb25SZXN1bHQuY29uZmlybX1cclxuICogd2l0aCB0aGUgY29kZSB0byBzaWduIHRoZSB1c2VyIGluLlxyXG4gKlxyXG4gKiBGb3IgYWJ1c2UgcHJldmVudGlvbiwgdGhpcyBtZXRob2QgYWxzbyByZXF1aXJlcyBhIHtAbGluayBBcHBsaWNhdGlvblZlcmlmaWVyfS5cclxuICogVGhpcyBTREsgaW5jbHVkZXMgYSByZUNBUFRDSEEtYmFzZWQgaW1wbGVtZW50YXRpb24sIHtAbGluayBSZWNhcHRjaGFWZXJpZmllcn0uXHJcbiAqIFRoaXMgZnVuY3Rpb24gY2FuIHdvcmsgb24gb3RoZXIgcGxhdGZvcm1zIHRoYXQgZG8gbm90IHN1cHBvcnQgdGhlXHJcbiAqIHtAbGluayBSZWNhcHRjaGFWZXJpZmllcn0gKGxpa2UgUmVhY3QgTmF0aXZlKSwgYnV0IHlvdSBuZWVkIHRvIHVzZSBhXHJcbiAqIHRoaXJkLXBhcnR5IHtAbGluayBBcHBsaWNhdGlvblZlcmlmaWVyfSBpbXBsZW1lbnRhdGlvbi5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyAncmVjYXB0Y2hhLWNvbnRhaW5lcicgaXMgdGhlIElEIG9mIGFuIGVsZW1lbnQgaW4gdGhlIERPTS5cclxuICogY29uc3QgYXBwbGljYXRpb25WZXJpZmllciA9IG5ldyBmaXJlYmFzZS5hdXRoLlJlY2FwdGNoYVZlcmlmaWVyKCdyZWNhcHRjaGEtY29udGFpbmVyJyk7XHJcbiAqIGNvbnN0IGNvbmZpcm1hdGlvblJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhQaG9uZU51bWJlcihhdXRoLCBwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcik7XHJcbiAqIC8vIE9idGFpbiBhIHZlcmlmaWNhdGlvbkNvZGUgZnJvbSB0aGUgdXNlci5cclxuICogY29uc3QgY3JlZGVudGlhbCA9IGF3YWl0IGNvbmZpcm1hdGlvblJlc3VsdC5jb25maXJtKHZlcmlmaWNhdGlvbkNvZGUpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gcGhvbmVOdW1iZXIgLSBUaGUgdXNlcidzIHBob25lIG51bWJlciBpbiBFLjE2NCBmb3JtYXQgKGUuZy4gKzE2NTA1NTUwMTAxKS5cclxuICogQHBhcmFtIGFwcFZlcmlmaWVyIC0gVGhlIHtAbGluayBBcHBsaWNhdGlvblZlcmlmaWVyfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aFBob25lTnVtYmVyKGF1dGgsIHBob25lTnVtYmVyLCBhcHBWZXJpZmllcikge1xyXG4gICAgY29uc3QgYXV0aEludGVybmFsID0gX2Nhc3RBdXRoKGF1dGgpO1xyXG4gICAgY29uc3QgdmVyaWZpY2F0aW9uSWQgPSBhd2FpdCBfdmVyaWZ5UGhvbmVOdW1iZXIoYXV0aEludGVybmFsLCBwaG9uZU51bWJlciwgZ2V0TW9kdWxhckluc3RhbmNlKGFwcFZlcmlmaWVyKSk7XHJcbiAgICByZXR1cm4gbmV3IENvbmZpcm1hdGlvblJlc3VsdEltcGwodmVyaWZpY2F0aW9uSWQsIGNyZWQgPT4gc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aEludGVybmFsLCBjcmVkKSk7XHJcbn1cclxuLyoqXHJcbiAqIExpbmtzIHRoZSB1c2VyIGFjY291bnQgd2l0aCB0aGUgZ2l2ZW4gcGhvbmUgbnVtYmVyLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gcGhvbmVOdW1iZXIgLSBUaGUgdXNlcidzIHBob25lIG51bWJlciBpbiBFLjE2NCBmb3JtYXQgKGUuZy4gKzE2NTA1NTUwMTAxKS5cclxuICogQHBhcmFtIGFwcFZlcmlmaWVyIC0gVGhlIHtAbGluayBBcHBsaWNhdGlvblZlcmlmaWVyfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gbGlua1dpdGhQaG9uZU51bWJlcih1c2VyLCBwaG9uZU51bWJlciwgYXBwVmVyaWZpZXIpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGF3YWl0IF9hc3NlcnRMaW5rZWRTdGF0dXMoZmFsc2UsIHVzZXJJbnRlcm5hbCwgXCJwaG9uZVwiIC8qIFBIT05FICovKTtcclxuICAgIGNvbnN0IHZlcmlmaWNhdGlvbklkID0gYXdhaXQgX3ZlcmlmeVBob25lTnVtYmVyKHVzZXJJbnRlcm5hbC5hdXRoLCBwaG9uZU51bWJlciwgZ2V0TW9kdWxhckluc3RhbmNlKGFwcFZlcmlmaWVyKSk7XHJcbiAgICByZXR1cm4gbmV3IENvbmZpcm1hdGlvblJlc3VsdEltcGwodmVyaWZpY2F0aW9uSWQsIGNyZWQgPT4gbGlua1dpdGhDcmVkZW50aWFsKHVzZXJJbnRlcm5hbCwgY3JlZCkpO1xyXG59XHJcbi8qKlxyXG4gKiBSZS1hdXRoZW50aWNhdGVzIGEgdXNlciB1c2luZyBhIGZyZXNoIHBob25lIGNyZWRlbnRpYWwuXHJcbiAqXHJcbiAqIEByZW1hcmtzIFVzZSBiZWZvcmUgb3BlcmF0aW9ucyBzdWNoIGFzIHtAbGluayB1cGRhdGVQYXNzd29yZH0gdGhhdCByZXF1aXJlIHRva2VucyBmcm9tIHJlY2VudCBzaWduLWluIGF0dGVtcHRzLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gcGhvbmVOdW1iZXIgLSBUaGUgdXNlcidzIHBob25lIG51bWJlciBpbiBFLjE2NCBmb3JtYXQgKGUuZy4gKzE2NTA1NTUwMTAxKS5cclxuICogQHBhcmFtIGFwcFZlcmlmaWVyIC0gVGhlIHtAbGluayBBcHBsaWNhdGlvblZlcmlmaWVyfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gcmVhdXRoZW50aWNhdGVXaXRoUGhvbmVOdW1iZXIodXNlciwgcGhvbmVOdW1iZXIsIGFwcFZlcmlmaWVyKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBjb25zdCB2ZXJpZmljYXRpb25JZCA9IGF3YWl0IF92ZXJpZnlQaG9uZU51bWJlcih1c2VySW50ZXJuYWwuYXV0aCwgcGhvbmVOdW1iZXIsIGdldE1vZHVsYXJJbnN0YW5jZShhcHBWZXJpZmllcikpO1xyXG4gICAgcmV0dXJuIG5ldyBDb25maXJtYXRpb25SZXN1bHRJbXBsKHZlcmlmaWNhdGlvbklkLCBjcmVkID0+IHJlYXV0aGVudGljYXRlV2l0aENyZWRlbnRpYWwodXNlckludGVybmFsLCBjcmVkKSk7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgYSB2ZXJpZmljYXRpb24gSUQgdG8gYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIHRoZSBTTVMgY29kZSB0aGF0IGlzIHNlbnQuXHJcbiAqXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBfdmVyaWZ5UGhvbmVOdW1iZXIoYXV0aCwgb3B0aW9ucywgdmVyaWZpZXIpIHtcclxuICAgIHZhciBfYTtcclxuICAgIGNvbnN0IHJlY2FwdGNoYVRva2VuID0gYXdhaXQgdmVyaWZpZXIudmVyaWZ5KCk7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIHJlY2FwdGNoYVRva2VuID09PSAnc3RyaW5nJywgYXV0aCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICBfYXNzZXJ0KHZlcmlmaWVyLnR5cGUgPT09IFJFQ0FQVENIQV9WRVJJRklFUl9UWVBFLCBhdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIGxldCBwaG9uZUluZm9PcHRpb25zO1xyXG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgcGhvbmVJbmZvT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgIHBob25lTnVtYmVyOiBvcHRpb25zXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwaG9uZUluZm9PcHRpb25zID0gb3B0aW9ucztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCdzZXNzaW9uJyBpbiBwaG9uZUluZm9PcHRpb25zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlc3Npb24gPSBwaG9uZUluZm9PcHRpb25zLnNlc3Npb247XHJcbiAgICAgICAgICAgIGlmICgncGhvbmVOdW1iZXInIGluIHBob25lSW5mb09wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIF9hc3NlcnQoc2Vzc2lvbi50eXBlID09PSBcImVucm9sbFwiIC8qIEVOUk9MTCAqLywgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc3RhcnRFbnJvbGxQaG9uZU1mYShhdXRoLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWRUb2tlbjogc2Vzc2lvbi5jcmVkZW50aWFsLFxyXG4gICAgICAgICAgICAgICAgICAgIHBob25lRW5yb2xsbWVudEluZm86IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IHBob25lSW5mb09wdGlvbnMucGhvbmVOdW1iZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2FwdGNoYVRva2VuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UucGhvbmVTZXNzaW9uSW5mby5zZXNzaW9uSW5mbztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF9hc3NlcnQoc2Vzc2lvbi50eXBlID09PSBcInNpZ25pblwiIC8qIFNJR05fSU4gKi8sIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZmFFbnJvbGxtZW50SWQgPSAoKF9hID0gcGhvbmVJbmZvT3B0aW9ucy5tdWx0aUZhY3RvckhpbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS51aWQpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgcGhvbmVJbmZvT3B0aW9ucy5tdWx0aUZhY3RvclVpZDtcclxuICAgICAgICAgICAgICAgIF9hc3NlcnQobWZhRW5yb2xsbWVudElkLCBhdXRoLCBcIm1pc3NpbmctbXVsdGktZmFjdG9yLWluZm9cIiAvKiBNSVNTSU5HX01GQV9JTkZPICovKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc3RhcnRTaWduSW5QaG9uZU1mYShhdXRoLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWZhUGVuZGluZ0NyZWRlbnRpYWw6IHNlc3Npb24uY3JlZGVudGlhbCxcclxuICAgICAgICAgICAgICAgICAgICBtZmFFbnJvbGxtZW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgcGhvbmVTaWduSW5JbmZvOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2FwdGNoYVRva2VuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UucGhvbmVSZXNwb25zZUluZm8uc2Vzc2lvbkluZm87XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgc2Vzc2lvbkluZm8gfSA9IGF3YWl0IHNlbmRQaG9uZVZlcmlmaWNhdGlvbkNvZGUoYXV0aCwge1xyXG4gICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IHBob25lSW5mb09wdGlvbnMucGhvbmVOdW1iZXIsXHJcbiAgICAgICAgICAgICAgICByZWNhcHRjaGFUb2tlblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHNlc3Npb25JbmZvO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHZlcmlmaWVyLl9yZXNldCgpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBVcGRhdGVzIHRoZSB1c2VyJ3MgcGhvbmUgbnVtYmVyLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBcclxuICogLy8gJ3JlY2FwdGNoYS1jb250YWluZXInIGlzIHRoZSBJRCBvZiBhbiBlbGVtZW50IGluIHRoZSBET00uXHJcbiAqIGNvbnN0IGFwcGxpY2F0aW9uVmVyaWZpZXIgPSBuZXcgUmVjYXB0Y2hhVmVyaWZpZXIoJ3JlY2FwdGNoYS1jb250YWluZXInKTtcclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgUGhvbmVBdXRoUHJvdmlkZXIoYXV0aCk7XHJcbiAqIGNvbnN0IHZlcmlmaWNhdGlvbklkID0gYXdhaXQgcHJvdmlkZXIudmVyaWZ5UGhvbmVOdW1iZXIoJysxNjUwNTU1MDEwMScsIGFwcGxpY2F0aW9uVmVyaWZpZXIpO1xyXG4gKiAvLyBPYnRhaW4gdGhlIHZlcmlmaWNhdGlvbkNvZGUgZnJvbSB0aGUgdXNlci5cclxuICogY29uc3QgcGhvbmVDcmVkZW50aWFsID0gUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbCh2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAqIGF3YWl0IHVwZGF0ZVBob25lTnVtYmVyKHVzZXIsIHBob25lQ3JlZGVudGlhbCk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gY3JlZGVudGlhbCAtIEEgY3JlZGVudGlhbCBhdXRoZW50aWNhdGluZyB0aGUgbmV3IHBob25lIG51bWJlci5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlUGhvbmVOdW1iZXIodXNlciwgY3JlZGVudGlhbCkge1xyXG4gICAgYXdhaXQgX2xpbmskMShnZXRNb2R1bGFySW5zdGFuY2UodXNlciksIGNyZWRlbnRpYWwpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgZ2VuZXJhdGluZyBhbiB7QGxpbmsgUGhvbmVBdXRoQ3JlZGVudGlhbH0uXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gJ3JlY2FwdGNoYS1jb250YWluZXInIGlzIHRoZSBJRCBvZiBhbiBlbGVtZW50IGluIHRoZSBET00uXHJcbiAqIGNvbnN0IGFwcGxpY2F0aW9uVmVyaWZpZXIgPSBuZXcgUmVjYXB0Y2hhVmVyaWZpZXIoJ3JlY2FwdGNoYS1jb250YWluZXInKTtcclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgUGhvbmVBdXRoUHJvdmlkZXIoYXV0aCk7XHJcbiAqIGNvbnN0IHZlcmlmaWNhdGlvbklkID0gYXdhaXQgcHJvdmlkZXIudmVyaWZ5UGhvbmVOdW1iZXIoJysxNjUwNTU1MDEwMScsIGFwcGxpY2F0aW9uVmVyaWZpZXIpO1xyXG4gKiAvLyBPYnRhaW4gdGhlIHZlcmlmaWNhdGlvbkNvZGUgZnJvbSB0aGUgdXNlci5cclxuICogY29uc3QgcGhvbmVDcmVkZW50aWFsID0gUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbCh2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aCwgcGhvbmVDcmVkZW50aWFsKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIFBob25lQXV0aFByb3ZpZGVyIHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGF1dGggLSBUaGUgRmlyZWJhc2Uge0BsaW5rIEF1dGh9IGluc3RhbmNlIGluIHdoaWNoIHNpZ24taW5zIHNob3VsZCBvY2N1ci5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGF1dGgpIHtcclxuICAgICAgICAvKiogQWx3YXlzIHNldCB0byB7QGxpbmsgUHJvdmlkZXJJZH0uUEhPTkUuICovXHJcbiAgICAgICAgdGhpcy5wcm92aWRlcklkID0gUGhvbmVBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQ7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gX2Nhc3RBdXRoKGF1dGgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogU3RhcnRzIGEgcGhvbmUgbnVtYmVyIGF1dGhlbnRpY2F0aW9uIGZsb3cgYnkgc2VuZGluZyBhIHZlcmlmaWNhdGlvbiBjb2RlIHRvIHRoZSBnaXZlbiBwaG9uZVxyXG4gICAgICogbnVtYmVyLlxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiBjb25zdCBwcm92aWRlciA9IG5ldyBQaG9uZUF1dGhQcm92aWRlcihhdXRoKTtcclxuICAgICAqIGNvbnN0IHZlcmlmaWNhdGlvbklkID0gYXdhaXQgcHJvdmlkZXIudmVyaWZ5UGhvbmVOdW1iZXIocGhvbmVOdW1iZXIsIGFwcGxpY2F0aW9uVmVyaWZpZXIpO1xyXG4gICAgICogLy8gT2J0YWluIHZlcmlmaWNhdGlvbkNvZGUgZnJvbSB0aGUgdXNlci5cclxuICAgICAqIGNvbnN0IGF1dGhDcmVkZW50aWFsID0gUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbCh2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAgICAgKiBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IHNpZ25JbldpdGhDcmVkZW50aWFsKGF1dGgsIGF1dGhDcmVkZW50aWFsKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBBbiBhbHRlcm5hdGl2ZSBmbG93IGlzIHByb3ZpZGVkIHVzaW5nIHRoZSBgc2lnbkluV2l0aFBob25lTnVtYmVyYCBtZXRob2QuXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiBjb25zdCBjb25maXJtYXRpb25SZXN1bHQgPSBzaWduSW5XaXRoUGhvbmVOdW1iZXIoYXV0aCwgcGhvbmVOdW1iZXIsIGFwcGxpY2F0aW9uVmVyaWZpZXIpO1xyXG4gICAgICogLy8gT2J0YWluIHZlcmlmaWNhdGlvbkNvZGUgZnJvbSB0aGUgdXNlci5cclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gY29uZmlybWF0aW9uUmVzdWx0LmNvbmZpcm0odmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcGhvbmVJbmZvT3B0aW9ucyAtIFRoZSB1c2VyJ3Mge0BsaW5rIFBob25lSW5mb09wdGlvbnN9LiBUaGUgcGhvbmUgbnVtYmVyIHNob3VsZCBiZSBpblxyXG4gICAgICogRS4xNjQgZm9ybWF0IChlLmcuICsxNjUwNTU1MDEwMSkuXHJcbiAgICAgKiBAcGFyYW0gYXBwbGljYXRpb25WZXJpZmllciAtIEZvciBhYnVzZSBwcmV2ZW50aW9uLCB0aGlzIG1ldGhvZCBhbHNvIHJlcXVpcmVzIGFcclxuICAgICAqIHtAbGluayBBcHBsaWNhdGlvblZlcmlmaWVyfS4gVGhpcyBTREsgaW5jbHVkZXMgYSByZUNBUFRDSEEtYmFzZWQgaW1wbGVtZW50YXRpb24sXHJcbiAgICAgKiB7QGxpbmsgUmVjYXB0Y2hhVmVyaWZpZXJ9LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSBmb3IgYSB2ZXJpZmljYXRpb24gSUQgdGhhdCBjYW4gYmUgcGFzc2VkIHRvXHJcbiAgICAgKiB7QGxpbmsgUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbH0gdG8gaWRlbnRpZnkgdGhpcyBmbG93Li5cclxuICAgICAqL1xyXG4gICAgdmVyaWZ5UGhvbmVOdW1iZXIocGhvbmVPcHRpb25zLCBhcHBsaWNhdGlvblZlcmlmaWVyKSB7XHJcbiAgICAgICAgcmV0dXJuIF92ZXJpZnlQaG9uZU51bWJlcih0aGlzLmF1dGgsIHBob25lT3B0aW9ucywgZ2V0TW9kdWxhckluc3RhbmNlKGFwcGxpY2F0aW9uVmVyaWZpZXIpKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIHBob25lIGF1dGggY3JlZGVudGlhbCwgZ2l2ZW4gdGhlIHZlcmlmaWNhdGlvbiBJRCBmcm9tXHJcbiAgICAgKiB7QGxpbmsgUGhvbmVBdXRoUHJvdmlkZXIudmVyaWZ5UGhvbmVOdW1iZXJ9IGFuZCB0aGUgY29kZSB0aGF0IHdhcyBzZW50IHRvIHRoZSB1c2VyJ3NcclxuICAgICAqIG1vYmlsZSBkZXZpY2UuXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IFBob25lQXV0aFByb3ZpZGVyKGF1dGgpO1xyXG4gICAgICogY29uc3QgdmVyaWZpY2F0aW9uSWQgPSBwcm92aWRlci52ZXJpZnlQaG9uZU51bWJlcihwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcik7XHJcbiAgICAgKiAvLyBPYnRhaW4gdmVyaWZpY2F0aW9uQ29kZSBmcm9tIHRoZSB1c2VyLlxyXG4gICAgICogY29uc3QgYXV0aENyZWRlbnRpYWwgPSBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsKHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlKTtcclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aCwgYXV0aENyZWRlbnRpYWwpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIEFuIGFsdGVybmF0aXZlIGZsb3cgaXMgcHJvdmlkZWQgdXNpbmcgdGhlIGBzaWduSW5XaXRoUGhvbmVOdW1iZXJgIG1ldGhvZC5cclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGNvbnN0IGNvbmZpcm1hdGlvblJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhQaG9uZU51bWJlcihhdXRoLCBwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcik7XHJcbiAgICAgKiAvLyBPYnRhaW4gdmVyaWZpY2F0aW9uQ29kZSBmcm9tIHRoZSB1c2VyLlxyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBjb25maXJtYXRpb25SZXN1bHQuY29uZmlybSh2ZXJpZmljYXRpb25Db2RlKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB2ZXJpZmljYXRpb25JZCAtIFRoZSB2ZXJpZmljYXRpb24gSUQgcmV0dXJuZWQgZnJvbSB7QGxpbmsgUGhvbmVBdXRoUHJvdmlkZXIudmVyaWZ5UGhvbmVOdW1iZXJ9LlxyXG4gICAgICogQHBhcmFtIHZlcmlmaWNhdGlvbkNvZGUgLSBUaGUgdmVyaWZpY2F0aW9uIGNvZGUgc2VudCB0byB0aGUgdXNlcidzIG1vYmlsZSBkZXZpY2UuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgVGhlIGF1dGggcHJvdmlkZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWwodmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUpIHtcclxuICAgICAgICByZXR1cm4gUGhvbmVBdXRoQ3JlZGVudGlhbC5fZnJvbVZlcmlmaWNhdGlvbih2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlcyBhbiB7QGxpbmsgQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgVXNlckNyZWRlbnRpYWx9LlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tUmVzdWx0KHVzZXJDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgY29uc3QgY3JlZGVudGlhbCA9IHVzZXJDcmVkZW50aWFsO1xyXG4gICAgICAgIHJldHVybiBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdChjcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhbiB7QGxpbmsgQXV0aENyZWRlbnRpYWx9IHdoZW4gcGFzc2VkIGFuIGVycm9yLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKlxyXG4gICAgICogVGhpcyBtZXRob2Qgd29ya3MgZm9yIGVycm9ycyBsaWtlXHJcbiAgICAgKiBgYXV0aC9hY2NvdW50LWV4aXN0cy13aXRoLWRpZmZlcmVudC1jcmVkZW50aWFsc2AuIFRoaXMgaXMgdXNlZnVsIGZvclxyXG4gICAgICogcmVjb3ZlcmluZyB3aGVuIGF0dGVtcHRpbmcgdG8gc2V0IGEgdXNlcidzIHBob25lIG51bWJlciBidXQgdGhlIG51bWJlclxyXG4gICAgICogaW4gcXVlc3Rpb24gaXMgYWxyZWFkeSB0aWVkIHRvIGFub3RoZXIgYWNjb3VudC4gRm9yIGV4YW1wbGUsIHRoZSBmb2xsb3dpbmdcclxuICAgICAqIGNvZGUgdHJpZXMgdG8gdXBkYXRlIHRoZSBjdXJyZW50IHVzZXIncyBwaG9uZSBudW1iZXIsIGFuZCBpZiB0aGF0XHJcbiAgICAgKiBmYWlscywgbGlua3MgdGhlIHVzZXIgd2l0aCB0aGUgYWNjb3VudCBhc3NvY2lhdGVkIHdpdGggdGhhdCBudW1iZXI6XHJcbiAgICAgKlxyXG4gICAgICogYGBganNcclxuICAgICAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IFBob25lQXV0aFByb3ZpZGVyKGF1dGgpO1xyXG4gICAgICogY29uc3QgdmVyaWZpY2F0aW9uSWQgPSBhd2FpdCBwcm92aWRlci52ZXJpZnlQaG9uZU51bWJlcihudW1iZXIsIHZlcmlmaWVyKTtcclxuICAgICAqIHRyeSB7XHJcbiAgICAgKiAgIGNvbnN0IGNvZGUgPSAnJzsgLy8gUHJvbXB0IHRoZSB1c2VyIGZvciB0aGUgdmVyaWZpY2F0aW9uIGNvZGVcclxuICAgICAqICAgYXdhaXQgdXBkYXRlUGhvbmVOdW1iZXIoXHJcbiAgICAgKiAgICAgICBhdXRoLmN1cnJlbnRVc2VyLFxyXG4gICAgICogICAgICAgUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbCh2ZXJpZmljYXRpb25JZCwgY29kZSkpO1xyXG4gICAgICogfSBjYXRjaCAoZSkge1xyXG4gICAgICogICBpZiAoZS5jb2RlID09PSAnYXV0aC9hY2NvdW50LWV4aXN0cy13aXRoLWRpZmZlcmVudC1jcmVkZW50aWFsJykge1xyXG4gICAgICogICAgIGNvbnN0IGNyZWQgPSBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbUVycm9yKGUpO1xyXG4gICAgICogICAgIGF3YWl0IGxpbmtXaXRoQ3JlZGVudGlhbChhdXRoLmN1cnJlbnRVc2VyLCBjcmVkKTtcclxuICAgICAqICAgfVxyXG4gICAgICogfVxyXG4gICAgICpcclxuICAgICAqIC8vIEF0IHRoaXMgcG9pbnQsIGF1dGguY3VycmVudFVzZXIucGhvbmVOdW1iZXIgPT09IG51bWJlci5cclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBlcnJvciAtIFRoZSBlcnJvciB0byBnZW5lcmF0ZSBhIGNyZWRlbnRpYWwgZnJvbS5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tRXJyb3IoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoKGVycm9yLmN1c3RvbURhdGEgfHwge30pKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh7IF90b2tlblJlc3BvbnNlOiB0b2tlblJlc3BvbnNlIH0pIHtcclxuICAgICAgICBpZiAoIXRva2VuUmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgcGhvbmVOdW1iZXIsIHRlbXBvcmFyeVByb29mIH0gPSB0b2tlblJlc3BvbnNlO1xyXG4gICAgICAgIGlmIChwaG9uZU51bWJlciAmJiB0ZW1wb3JhcnlQcm9vZikge1xyXG4gICAgICAgICAgICByZXR1cm4gUGhvbmVBdXRoQ3JlZGVudGlhbC5fZnJvbVRva2VuUmVzcG9uc2UocGhvbmVOdW1iZXIsIHRlbXBvcmFyeVByb29mKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn1cclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFByb3ZpZGVySWR9LlBIT05FLiAqL1xyXG5QaG9uZUF1dGhQcm92aWRlci5QUk9WSURFUl9JRCA9IFwicGhvbmVcIiAvKiBQSE9ORSAqLztcclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFNpZ25Jbk1ldGhvZH0uUEhPTkUuICovXHJcblBob25lQXV0aFByb3ZpZGVyLlBIT05FX1NJR05fSU5fTUVUSE9EID0gXCJwaG9uZVwiIC8qIFBIT05FICovO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQ2hvb3NlcyBhIHBvcHVwL3JlZGlyZWN0IHJlc29sdmVyIHRvIHVzZS4gVGhpcyBwcmVmZXJzIHRoZSBvdmVycmlkZSAod2hpY2hcclxuICogaXMgZGlyZWN0bHkgcGFzc2VkIGluKSwgYW5kIGZhbGxzIGJhY2sgdG8gdGhlIHByb3BlcnR5IHNldCBvbiB0aGUgYXV0aFxyXG4gKiBvYmplY3QuIElmIG5laXRoZXIgYXJlIGF2YWlsYWJsZSwgdGhpcyBmdW5jdGlvbiBlcnJvcnMgdy8gYW4gYXJndW1lbnQgZXJyb3IuXHJcbiAqL1xyXG5mdW5jdGlvbiBfd2l0aERlZmF1bHRSZXNvbHZlcihhdXRoLCByZXNvbHZlck92ZXJyaWRlKSB7XHJcbiAgICBpZiAocmVzb2x2ZXJPdmVycmlkZSkge1xyXG4gICAgICAgIHJldHVybiBfZ2V0SW5zdGFuY2UocmVzb2x2ZXJPdmVycmlkZSk7XHJcbiAgICB9XHJcbiAgICBfYXNzZXJ0KGF1dGguX3BvcHVwUmVkaXJlY3RSZXNvbHZlciwgYXV0aCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgIHJldHVybiBhdXRoLl9wb3B1cFJlZGlyZWN0UmVzb2x2ZXI7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgSWRwQ3JlZGVudGlhbCBleHRlbmRzIEF1dGhDcmVkZW50aWFsIHtcclxuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xyXG4gICAgICAgIHN1cGVyKFwiY3VzdG9tXCIgLyogQ1VTVE9NICovLCBcImN1c3RvbVwiIC8qIENVU1RPTSAqLyk7XHJcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XHJcbiAgICB9XHJcbiAgICBfZ2V0SWRUb2tlblJlc3BvbnNlKGF1dGgpIHtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aElkcChhdXRoLCB0aGlzLl9idWlsZElkcFJlcXVlc3QoKSk7XHJcbiAgICB9XHJcbiAgICBfbGlua1RvSWRUb2tlbihhdXRoLCBpZFRva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhJZHAoYXV0aCwgdGhpcy5fYnVpbGRJZHBSZXF1ZXN0KGlkVG9rZW4pKTtcclxuICAgIH1cclxuICAgIF9nZXRSZWF1dGhlbnRpY2F0aW9uUmVzb2x2ZXIoYXV0aCkge1xyXG4gICAgICAgIHJldHVybiBzaWduSW5XaXRoSWRwKGF1dGgsIHRoaXMuX2J1aWxkSWRwUmVxdWVzdCgpKTtcclxuICAgIH1cclxuICAgIF9idWlsZElkcFJlcXVlc3QoaWRUb2tlbikge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RVcmk6IHRoaXMucGFyYW1zLnJlcXVlc3RVcmksXHJcbiAgICAgICAgICAgIHNlc3Npb25JZDogdGhpcy5wYXJhbXMuc2Vzc2lvbklkLFxyXG4gICAgICAgICAgICBwb3N0Qm9keTogdGhpcy5wYXJhbXMucG9zdEJvZHksXHJcbiAgICAgICAgICAgIHRlbmFudElkOiB0aGlzLnBhcmFtcy50ZW5hbnRJZCxcclxuICAgICAgICAgICAgcGVuZGluZ1Rva2VuOiB0aGlzLnBhcmFtcy5wZW5kaW5nVG9rZW4sXHJcbiAgICAgICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlLFxyXG4gICAgICAgICAgICByZXR1cm5JZHBDcmVkZW50aWFsOiB0cnVlXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAoaWRUb2tlbikge1xyXG4gICAgICAgICAgICByZXF1ZXN0LmlkVG9rZW4gPSBpZFRva2VuO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVxdWVzdDtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBfc2lnbkluKHBhcmFtcykge1xyXG4gICAgcmV0dXJuIF9zaWduSW5XaXRoQ3JlZGVudGlhbChwYXJhbXMuYXV0aCwgbmV3IElkcENyZWRlbnRpYWwocGFyYW1zKSwgcGFyYW1zLmJ5cGFzc0F1dGhTdGF0ZSk7XHJcbn1cclxuZnVuY3Rpb24gX3JlYXV0aChwYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgYXV0aCwgdXNlciB9ID0gcGFyYW1zO1xyXG4gICAgX2Fzc2VydCh1c2VyLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgcmV0dXJuIF9yZWF1dGhlbnRpY2F0ZSh1c2VyLCBuZXcgSWRwQ3JlZGVudGlhbChwYXJhbXMpLCBwYXJhbXMuYnlwYXNzQXV0aFN0YXRlKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfbGluayhwYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgYXV0aCwgdXNlciB9ID0gcGFyYW1zO1xyXG4gICAgX2Fzc2VydCh1c2VyLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgcmV0dXJuIF9saW5rJDEodXNlciwgbmV3IElkcENyZWRlbnRpYWwocGFyYW1zKSwgcGFyYW1zLmJ5cGFzc0F1dGhTdGF0ZSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFBvcHVwIGV2ZW50IG1hbmFnZXIuIEhhbmRsZXMgdGhlIHBvcHVwJ3MgZW50aXJlIGxpZmVjeWNsZTsgbGlzdGVucyB0byBhdXRoXHJcbiAqIGV2ZW50c1xyXG4gKi9cclxuY2xhc3MgQWJzdHJhY3RQb3B1cFJlZGlyZWN0T3BlcmF0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgsIGZpbHRlciwgcmVzb2x2ZXIsIHVzZXIsIGJ5cGFzc0F1dGhTdGF0ZSA9IGZhbHNlKSB7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gYXV0aDtcclxuICAgICAgICB0aGlzLnJlc29sdmVyID0gcmVzb2x2ZXI7XHJcbiAgICAgICAgdGhpcy51c2VyID0gdXNlcjtcclxuICAgICAgICB0aGlzLmJ5cGFzc0F1dGhTdGF0ZSA9IGJ5cGFzc0F1dGhTdGF0ZTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdQcm9taXNlID0gbnVsbDtcclxuICAgICAgICB0aGlzLmV2ZW50TWFuYWdlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5maWx0ZXIgPSBBcnJheS5pc0FycmF5KGZpbHRlcikgPyBmaWx0ZXIgOiBbZmlsdGVyXTtcclxuICAgIH1cclxuICAgIGV4ZWN1dGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wZW5kaW5nUHJvbWlzZSA9IHsgcmVzb2x2ZSwgcmVqZWN0IH07XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50TWFuYWdlciA9IGF3YWl0IHRoaXMucmVzb2x2ZXIuX2luaXRpYWxpemUodGhpcy5hdXRoKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMub25FeGVjdXRpb24oKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyLnJlZ2lzdGVyQ29uc3VtZXIodGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVqZWN0KGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBvbkF1dGhFdmVudChldmVudCkge1xyXG4gICAgICAgIGNvbnN0IHsgdXJsUmVzcG9uc2UsIHNlc3Npb25JZCwgcG9zdEJvZHksIHRlbmFudElkLCBlcnJvciwgdHlwZSB9ID0gZXZlbnQ7XHJcbiAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgICAgICAgIGF1dGg6IHRoaXMuYXV0aCxcclxuICAgICAgICAgICAgcmVxdWVzdFVyaTogdXJsUmVzcG9uc2UsXHJcbiAgICAgICAgICAgIHNlc3Npb25JZDogc2Vzc2lvbklkLFxyXG4gICAgICAgICAgICB0ZW5hbnRJZDogdGVuYW50SWQgfHwgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBwb3N0Qm9keTogcG9zdEJvZHkgfHwgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICB1c2VyOiB0aGlzLnVzZXIsXHJcbiAgICAgICAgICAgIGJ5cGFzc0F1dGhTdGF0ZTogdGhpcy5ieXBhc3NBdXRoU3RhdGVcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZShhd2FpdCB0aGlzLmdldElkcFRhc2sodHlwZSkocGFyYW1zKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVqZWN0KGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9uRXJyb3IoZXJyb3IpIHtcclxuICAgICAgICB0aGlzLnJlamVjdChlcnJvcik7XHJcbiAgICB9XHJcbiAgICBnZXRJZHBUYXNrKHR5cGUpIHtcclxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBcInNpZ25JblZpYVBvcHVwXCIgLyogU0lHTl9JTl9WSUFfUE9QVVAgKi86XHJcbiAgICAgICAgICAgIGNhc2UgXCJzaWduSW5WaWFSZWRpcmVjdFwiIC8qIFNJR05fSU5fVklBX1JFRElSRUNUICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9zaWduSW47XHJcbiAgICAgICAgICAgIGNhc2UgXCJsaW5rVmlhUG9wdXBcIiAvKiBMSU5LX1ZJQV9QT1BVUCAqLzpcclxuICAgICAgICAgICAgY2FzZSBcImxpbmtWaWFSZWRpcmVjdFwiIC8qIExJTktfVklBX1JFRElSRUNUICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9saW5rO1xyXG4gICAgICAgICAgICBjYXNlIFwicmVhdXRoVmlhUG9wdXBcIiAvKiBSRUFVVEhfVklBX1BPUFVQICovOlxyXG4gICAgICAgICAgICBjYXNlIFwicmVhdXRoVmlhUmVkaXJlY3RcIiAvKiBSRUFVVEhfVklBX1JFRElSRUNUICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9yZWF1dGg7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBfZmFpbCh0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmVzb2x2ZShjcmVkKSB7XHJcbiAgICAgICAgZGVidWdBc3NlcnQodGhpcy5wZW5kaW5nUHJvbWlzZSwgJ1BlbmRpbmcgcHJvbWlzZSB3YXMgbmV2ZXIgc2V0Jyk7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nUHJvbWlzZS5yZXNvbHZlKGNyZWQpO1xyXG4gICAgICAgIHRoaXMudW5yZWdpc3RlckFuZENsZWFuVXAoKTtcclxuICAgIH1cclxuICAgIHJlamVjdChlcnJvcikge1xyXG4gICAgICAgIGRlYnVnQXNzZXJ0KHRoaXMucGVuZGluZ1Byb21pc2UsICdQZW5kaW5nIHByb21pc2Ugd2FzIG5ldmVyIHNldCcpO1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1Byb21pc2UucmVqZWN0KGVycm9yKTtcclxuICAgICAgICB0aGlzLnVucmVnaXN0ZXJBbmRDbGVhblVwKCk7XHJcbiAgICB9XHJcbiAgICB1bnJlZ2lzdGVyQW5kQ2xlYW5VcCgpIHtcclxuICAgICAgICBpZiAodGhpcy5ldmVudE1hbmFnZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudE1hbmFnZXIudW5yZWdpc3RlckNvbnN1bWVyKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBlbmRpbmdQcm9taXNlID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNsZWFuVXAoKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBfUE9MTF9XSU5ET1dfQ0xPU0VfVElNRU9VVCA9IG5ldyBEZWxheSgyMDAwLCAxMDAwMCk7XHJcbi8qKlxyXG4gKiBBdXRoZW50aWNhdGVzIGEgRmlyZWJhc2UgY2xpZW50IHVzaW5nIGEgcG9wdXAtYmFzZWQgT0F1dGggYXV0aGVudGljYXRpb24gZmxvdy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogSWYgc3VjY2VlZHMsIHJldHVybnMgdGhlIHNpZ25lZCBpbiB1c2VyIGFsb25nIHdpdGggdGhlIHByb3ZpZGVyJ3MgY3JlZGVudGlhbC4gSWYgc2lnbiBpbiB3YXNcclxuICogdW5zdWNjZXNzZnVsLCByZXR1cm5zIGFuIGVycm9yIG9iamVjdCBjb250YWluaW5nIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGVycm9yLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSBwb3B1cC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aFBvcHVwKGF1dGgsIHByb3ZpZGVyKTtcclxuICpcclxuICogLy8gVGhlIHNpZ25lZC1pbiB1c2VyIGluZm8uXHJcbiAqIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogLy8gVGhpcyBnaXZlcyB5b3UgYSBGYWNlYm9vayBBY2Nlc3MgVG9rZW4uXHJcbiAqIGNvbnN0IGNyZWRlbnRpYWwgPSBwcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChhdXRoLCByZXN1bHQpO1xyXG4gKiBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBwcm92aWRlciAtIFRoZSBwcm92aWRlciB0byBhdXRoZW50aWNhdGUuIFRoZSBwcm92aWRlciBoYXMgdG8gYmUgYW4ge0BsaW5rIE9BdXRoUHJvdmlkZXJ9LlxyXG4gKiBOb24tT0F1dGggcHJvdmlkZXJzIGxpa2Uge0BsaW5rIEVtYWlsQXV0aFByb3ZpZGVyfSB3aWxsIHRocm93IGFuIGVycm9yLlxyXG4gKiBAcGFyYW0gcmVzb2x2ZXIgLSBBbiBpbnN0YW5jZSBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSwgb3B0aW9uYWxcclxuICogaWYgYWxyZWFkeSBzdXBwbGllZCB0byB7QGxpbmsgaW5pdGlhbGl6ZUF1dGh9IG9yIHByb3ZpZGVkIGJ5IHtAbGluayBnZXRBdXRofS5cclxuICpcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aFBvcHVwKGF1dGgsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgY29uc3QgYXV0aEludGVybmFsID0gX2Nhc3RBdXRoKGF1dGgpO1xyXG4gICAgX2Fzc2VydEluc3RhbmNlT2YoYXV0aCwgcHJvdmlkZXIsIEZlZGVyYXRlZEF1dGhQcm92aWRlcik7XHJcbiAgICBjb25zdCByZXNvbHZlckludGVybmFsID0gX3dpdGhEZWZhdWx0UmVzb2x2ZXIoYXV0aEludGVybmFsLCByZXNvbHZlcik7XHJcbiAgICBjb25zdCBhY3Rpb24gPSBuZXcgUG9wdXBPcGVyYXRpb24oYXV0aEludGVybmFsLCBcInNpZ25JblZpYVBvcHVwXCIgLyogU0lHTl9JTl9WSUFfUE9QVVAgKi8sIHByb3ZpZGVyLCByZXNvbHZlckludGVybmFsKTtcclxuICAgIHJldHVybiBhY3Rpb24uZXhlY3V0ZU5vdE51bGwoKTtcclxufVxyXG4vKipcclxuICogUmVhdXRoZW50aWNhdGVzIHRoZSBjdXJyZW50IHVzZXIgd2l0aCB0aGUgc3BlY2lmaWVkIHtAbGluayBPQXV0aFByb3ZpZGVyfSB1c2luZyBhIHBvcC11cCBiYXNlZFxyXG4gKiBPQXV0aCBmbG93LlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJZiB0aGUgcmVhdXRoZW50aWNhdGlvbiBpcyBzdWNjZXNzZnVsLCB0aGUgcmV0dXJuZWQgcmVzdWx0IHdpbGwgY29udGFpbiB0aGUgdXNlciBhbmQgdGhlXHJcbiAqIHByb3ZpZGVyJ3MgY3JlZGVudGlhbC5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcG9wdXAuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEZhY2Vib29rQXV0aFByb3ZpZGVyKCk7XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhQb3B1cChhdXRoLCBwcm92aWRlcik7XHJcbiAqIC8vIFJlYXV0aGVudGljYXRlIHVzaW5nIGEgcG9wdXAuXHJcbiAqIGF3YWl0IHJlYXV0aGVudGljYXRlV2l0aFBvcHVwKHJlc3VsdC51c2VyLCBwcm92aWRlcik7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gcHJvdmlkZXIgLSBUaGUgcHJvdmlkZXIgdG8gYXV0aGVudGljYXRlLiBUaGUgcHJvdmlkZXIgaGFzIHRvIGJlIGFuIHtAbGluayBPQXV0aFByb3ZpZGVyfS5cclxuICogTm9uLU9BdXRoIHByb3ZpZGVycyBsaWtlIHtAbGluayBFbWFpbEF1dGhQcm92aWRlcn0gd2lsbCB0aHJvdyBhbiBlcnJvci5cclxuICogQHBhcmFtIHJlc29sdmVyIC0gQW4gaW5zdGFuY2Ugb2Yge0BsaW5rIFBvcHVwUmVkaXJlY3RSZXNvbHZlcn0sIG9wdGlvbmFsXHJcbiAqIGlmIGFscmVhZHkgc3VwcGxpZWQgdG8ge0BsaW5rIGluaXRpYWxpemVBdXRofSBvciBwcm92aWRlZCBieSB7QGxpbmsgZ2V0QXV0aH0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlYXV0aGVudGljYXRlV2l0aFBvcHVwKHVzZXIsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgX2Fzc2VydEluc3RhbmNlT2YodXNlckludGVybmFsLmF1dGgsIHByb3ZpZGVyLCBGZWRlcmF0ZWRBdXRoUHJvdmlkZXIpO1xyXG4gICAgY29uc3QgcmVzb2x2ZXJJbnRlcm5hbCA9IF93aXRoRGVmYXVsdFJlc29sdmVyKHVzZXJJbnRlcm5hbC5hdXRoLCByZXNvbHZlcik7XHJcbiAgICBjb25zdCBhY3Rpb24gPSBuZXcgUG9wdXBPcGVyYXRpb24odXNlckludGVybmFsLmF1dGgsIFwicmVhdXRoVmlhUG9wdXBcIiAvKiBSRUFVVEhfVklBX1BPUFVQICovLCBwcm92aWRlciwgcmVzb2x2ZXJJbnRlcm5hbCwgdXNlckludGVybmFsKTtcclxuICAgIHJldHVybiBhY3Rpb24uZXhlY3V0ZU5vdE51bGwoKTtcclxufVxyXG4vKipcclxuICogTGlua3MgdGhlIGF1dGhlbnRpY2F0ZWQgcHJvdmlkZXIgdG8gdGhlIHVzZXIgYWNjb3VudCB1c2luZyBhIHBvcC11cCBiYXNlZCBPQXV0aCBmbG93LlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJZiB0aGUgbGlua2luZyBpcyBzdWNjZXNzZnVsLCB0aGUgcmV0dXJuZWQgcmVzdWx0IHdpbGwgY29udGFpbiB0aGUgdXNlciBhbmQgdGhlIHByb3ZpZGVyJ3MgY3JlZGVudGlhbC5cclxuICpcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIHNvbWUgb3RoZXIgcHJvdmlkZXIuXHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLCBwYXNzd29yZCk7XHJcbiAqIC8vIExpbmsgdXNpbmcgYSBwb3B1cC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcclxuICogYXdhaXQgbGlua1dpdGhQb3B1cChyZXN1bHQudXNlciwgcHJvdmlkZXIpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIHByb3ZpZGVyIC0gVGhlIHByb3ZpZGVyIHRvIGF1dGhlbnRpY2F0ZS4gVGhlIHByb3ZpZGVyIGhhcyB0byBiZSBhbiB7QGxpbmsgT0F1dGhQcm92aWRlcn0uXHJcbiAqIE5vbi1PQXV0aCBwcm92aWRlcnMgbGlrZSB7QGxpbmsgRW1haWxBdXRoUHJvdmlkZXJ9IHdpbGwgdGhyb3cgYW4gZXJyb3IuXHJcbiAqIEBwYXJhbSByZXNvbHZlciAtIEFuIGluc3RhbmNlIG9mIHtAbGluayBQb3B1cFJlZGlyZWN0UmVzb2x2ZXJ9LCBvcHRpb25hbFxyXG4gKiBpZiBhbHJlYWR5IHN1cHBsaWVkIHRvIHtAbGluayBpbml0aWFsaXplQXV0aH0gb3IgcHJvdmlkZWQgYnkge0BsaW5rIGdldEF1dGh9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBsaW5rV2l0aFBvcHVwKHVzZXIsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgX2Fzc2VydEluc3RhbmNlT2YodXNlckludGVybmFsLmF1dGgsIHByb3ZpZGVyLCBGZWRlcmF0ZWRBdXRoUHJvdmlkZXIpO1xyXG4gICAgY29uc3QgcmVzb2x2ZXJJbnRlcm5hbCA9IF93aXRoRGVmYXVsdFJlc29sdmVyKHVzZXJJbnRlcm5hbC5hdXRoLCByZXNvbHZlcik7XHJcbiAgICBjb25zdCBhY3Rpb24gPSBuZXcgUG9wdXBPcGVyYXRpb24odXNlckludGVybmFsLmF1dGgsIFwibGlua1ZpYVBvcHVwXCIgLyogTElOS19WSUFfUE9QVVAgKi8sIHByb3ZpZGVyLCByZXNvbHZlckludGVybmFsLCB1c2VySW50ZXJuYWwpO1xyXG4gICAgcmV0dXJuIGFjdGlvbi5leGVjdXRlTm90TnVsbCgpO1xyXG59XHJcbi8qKlxyXG4gKiBQb3B1cCBldmVudCBtYW5hZ2VyLiBIYW5kbGVzIHRoZSBwb3B1cCdzIGVudGlyZSBsaWZlY3ljbGU7IGxpc3RlbnMgdG8gYXV0aFxyXG4gKiBldmVudHNcclxuICpcclxuICovXHJcbmNsYXNzIFBvcHVwT3BlcmF0aW9uIGV4dGVuZHMgQWJzdHJhY3RQb3B1cFJlZGlyZWN0T3BlcmF0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgsIGZpbHRlciwgcHJvdmlkZXIsIHJlc29sdmVyLCB1c2VyKSB7XHJcbiAgICAgICAgc3VwZXIoYXV0aCwgZmlsdGVyLCByZXNvbHZlciwgdXNlcik7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlciA9IHByb3ZpZGVyO1xyXG4gICAgICAgIHRoaXMuYXV0aFdpbmRvdyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5wb2xsSWQgPSBudWxsO1xyXG4gICAgICAgIGlmIChQb3B1cE9wZXJhdGlvbi5jdXJyZW50UG9wdXBBY3Rpb24pIHtcclxuICAgICAgICAgICAgUG9wdXBPcGVyYXRpb24uY3VycmVudFBvcHVwQWN0aW9uLmNhbmNlbCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBQb3B1cE9wZXJhdGlvbi5jdXJyZW50UG9wdXBBY3Rpb24gPSB0aGlzO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZXhlY3V0ZU5vdE51bGwoKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5leGVjdXRlKCk7XHJcbiAgICAgICAgX2Fzc2VydChyZXN1bHQsIHRoaXMuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgYXN5bmMgb25FeGVjdXRpb24oKSB7XHJcbiAgICAgICAgZGVidWdBc3NlcnQodGhpcy5maWx0ZXIubGVuZ3RoID09PSAxLCAnUG9wdXAgb3BlcmF0aW9ucyBvbmx5IGhhbmRsZSBvbmUgZXZlbnQnKTtcclxuICAgICAgICBjb25zdCBldmVudElkID0gX2dlbmVyYXRlRXZlbnRJZCgpO1xyXG4gICAgICAgIHRoaXMuYXV0aFdpbmRvdyA9IGF3YWl0IHRoaXMucmVzb2x2ZXIuX29wZW5Qb3B1cCh0aGlzLmF1dGgsIHRoaXMucHJvdmlkZXIsIHRoaXMuZmlsdGVyWzBdLCAvLyBUaGVyZSdzIGFsd2F5cyBvbmUsIHNlZSBjb25zdHJ1Y3RvclxyXG4gICAgICAgIGV2ZW50SWQpO1xyXG4gICAgICAgIHRoaXMuYXV0aFdpbmRvdy5hc3NvY2lhdGVkRXZlbnQgPSBldmVudElkO1xyXG4gICAgICAgIC8vIENoZWNrIGZvciB3ZWIgc3RvcmFnZSBzdXBwb3J0IGFuZCBvcmlnaW4gdmFsaWRhdGlvbiBfYWZ0ZXJfIHRoZSBwb3B1cCBpc1xyXG4gICAgICAgIC8vIGxvYWRlZC4gVGhlc2Ugb3BlcmF0aW9ucyBhcmUgc2xvdyAofjEgc2Vjb25kIG9yIHNvKSBSYXRoZXIgdGhhblxyXG4gICAgICAgIC8vIHdhaXRpbmcgb24gdGhlbSBiZWZvcmUgb3BlbmluZyB0aGUgd2luZG93LCBvcHRpbWlzdGljYWxseSBvcGVuIHRoZSBwb3B1cFxyXG4gICAgICAgIC8vIGFuZCBjaGVjayBmb3Igc3RvcmFnZSBzdXBwb3J0IGF0IHRoZSBzYW1lIHRpbWUuIElmIHN0b3JhZ2Ugc3VwcG9ydCBpc1xyXG4gICAgICAgIC8vIG5vdCBhdmFpbGFibGUsIHRoaXMgd2lsbCBjYXVzZSB0aGUgd2hvbGUgdGhpbmcgdG8gcmVqZWN0IHByb3Blcmx5LiBJdFxyXG4gICAgICAgIC8vIHdpbGwgYWxzbyBjbG9zZSB0aGUgcG9wdXAsIGJ1dCBzaW5jZSB0aGUgcHJvbWlzZSBoYXMgYWxyZWFkeSByZWplY3RlZCxcclxuICAgICAgICAvLyB0aGUgcG9wdXAgY2xvc2VkIGJ5IHVzZXIgcG9sbCB3aWxsIHJlamVjdCBpbnRvIHRoZSB2b2lkLlxyXG4gICAgICAgIHRoaXMucmVzb2x2ZXIuX29yaWdpblZhbGlkYXRpb24odGhpcy5hdXRoKS5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZWplY3QoZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5yZXNvbHZlci5faXNJZnJhbWVXZWJTdG9yYWdlU3VwcG9ydGVkKHRoaXMuYXV0aCwgaXNTdXBwb3J0ZWQgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWlzU3VwcG9ydGVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlamVjdChfY3JlYXRlRXJyb3IodGhpcy5hdXRoLCBcIndlYi1zdG9yYWdlLXVuc3VwcG9ydGVkXCIgLyogV0VCX1NUT1JBR0VfVU5TVVBQT1JURUQgKi8pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIEhhbmRsZSB1c2VyIGNsb3N1cmUuIE5vdGljZSB0aGlzIGRvZXMgKm5vdCogdXNlIGF3YWl0XHJcbiAgICAgICAgdGhpcy5wb2xsVXNlckNhbmNlbGxhdGlvbigpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGV2ZW50SWQoKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHJldHVybiAoKF9hID0gdGhpcy5hdXRoV2luZG93KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuYXNzb2NpYXRlZEV2ZW50KSB8fCBudWxsO1xyXG4gICAgfVxyXG4gICAgY2FuY2VsKCkge1xyXG4gICAgICAgIHRoaXMucmVqZWN0KF9jcmVhdGVFcnJvcih0aGlzLmF1dGgsIFwiY2FuY2VsbGVkLXBvcHVwLXJlcXVlc3RcIiAvKiBFWFBJUkVEX1BPUFVQX1JFUVVFU1QgKi8pKTtcclxuICAgIH1cclxuICAgIGNsZWFuVXAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYXV0aFdpbmRvdykge1xyXG4gICAgICAgICAgICB0aGlzLmF1dGhXaW5kb3cuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucG9sbElkKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5wb2xsSWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmF1dGhXaW5kb3cgPSBudWxsO1xyXG4gICAgICAgIHRoaXMucG9sbElkID0gbnVsbDtcclxuICAgICAgICBQb3B1cE9wZXJhdGlvbi5jdXJyZW50UG9wdXBBY3Rpb24gPSBudWxsO1xyXG4gICAgfVxyXG4gICAgcG9sbFVzZXJDYW5jZWxsYXRpb24oKSB7XHJcbiAgICAgICAgY29uc3QgcG9sbCA9ICgpID0+IHtcclxuICAgICAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICAgICAgaWYgKChfYiA9IChfYSA9IHRoaXMuYXV0aFdpbmRvdykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLndpbmRvdykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNsb3NlZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgdGhlcmUgaXMgc3VmZmljaWVudCB0aW1lIGZvciB3aGF0ZXZlciBhY3Rpb24gdG9cclxuICAgICAgICAgICAgICAgIC8vIGNvbXBsZXRlLiBUaGUgd2luZG93IGNvdWxkIGhhdmUgY2xvc2VkIGJ1dCB0aGUgc2lnbiBpbiBuZXR3b3JrXHJcbiAgICAgICAgICAgICAgICAvLyBjYWxsIGNvdWxkIHN0aWxsIGJlIGluIGZsaWdodC5cclxuICAgICAgICAgICAgICAgIHRoaXMucG9sbElkID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9sbElkID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlamVjdChfY3JlYXRlRXJyb3IodGhpcy5hdXRoLCBcInBvcHVwLWNsb3NlZC1ieS11c2VyXCIgLyogUE9QVVBfQ0xPU0VEX0JZX1VTRVIgKi8pKTtcclxuICAgICAgICAgICAgICAgIH0sIDIwMDAgLyogQVVUSF9FVkVOVCAqLyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5wb2xsSWQgPSB3aW5kb3cuc2V0VGltZW91dChwb2xsLCBfUE9MTF9XSU5ET1dfQ0xPU0VfVElNRU9VVC5nZXQoKSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBwb2xsKCk7XHJcbiAgICB9XHJcbn1cclxuLy8gT25seSBvbmUgcG9wdXAgaXMgZXZlciBzaG93biBhdCBvbmNlLiBUaGUgbGlmZWN5Y2xlIG9mIHRoZSBjdXJyZW50IHBvcHVwXHJcbi8vIGNhbiBiZSBtYW5hZ2VkIC8gY2FuY2VsbGVkIGJ5IHRoZSBjb25zdHJ1Y3Rvci5cclxuUG9wdXBPcGVyYXRpb24uY3VycmVudFBvcHVwQWN0aW9uID0gbnVsbDtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgUEVORElOR19SRURJUkVDVF9LRVkgPSAncGVuZGluZ1JlZGlyZWN0JztcclxuLy8gV2Ugb25seSBnZXQgb25lIHJlZGlyZWN0IG91dGNvbWUgZm9yIGFueSBvbmUgYXV0aCwgc28ganVzdCBzdG9yZSBpdFxyXG4vLyBpbiBoZXJlLlxyXG5jb25zdCByZWRpcmVjdE91dGNvbWVNYXAgPSBuZXcgTWFwKCk7XHJcbmNsYXNzIFJlZGlyZWN0QWN0aW9uIGV4dGVuZHMgQWJzdHJhY3RQb3B1cFJlZGlyZWN0T3BlcmF0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgsIHJlc29sdmVyLCBieXBhc3NBdXRoU3RhdGUgPSBmYWxzZSkge1xyXG4gICAgICAgIHN1cGVyKGF1dGgsIFtcclxuICAgICAgICAgICAgXCJzaWduSW5WaWFSZWRpcmVjdFwiIC8qIFNJR05fSU5fVklBX1JFRElSRUNUICovLFxyXG4gICAgICAgICAgICBcImxpbmtWaWFSZWRpcmVjdFwiIC8qIExJTktfVklBX1JFRElSRUNUICovLFxyXG4gICAgICAgICAgICBcInJlYXV0aFZpYVJlZGlyZWN0XCIgLyogUkVBVVRIX1ZJQV9SRURJUkVDVCAqLyxcclxuICAgICAgICAgICAgXCJ1bmtub3duXCIgLyogVU5LTk9XTiAqL1xyXG4gICAgICAgIF0sIHJlc29sdmVyLCB1bmRlZmluZWQsIGJ5cGFzc0F1dGhTdGF0ZSk7XHJcbiAgICAgICAgdGhpcy5ldmVudElkID0gbnVsbDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogT3ZlcnJpZGUgdGhlIGV4ZWN1dGUgZnVuY3Rpb247IGlmIHdlIGFscmVhZHkgaGF2ZSBhIHJlZGlyZWN0IHJlc3VsdCwgdGhlblxyXG4gICAgICoganVzdCByZXR1cm4gaXQuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGV4ZWN1dGUoKSB7XHJcbiAgICAgICAgbGV0IHJlYWR5T3V0Y29tZSA9IHJlZGlyZWN0T3V0Y29tZU1hcC5nZXQodGhpcy5hdXRoLl9rZXkoKSk7XHJcbiAgICAgICAgaWYgKCFyZWFkeU91dGNvbWUpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhhc1BlbmRpbmdSZWRpcmVjdCA9IGF3YWl0IF9nZXRBbmRDbGVhclBlbmRpbmdSZWRpcmVjdFN0YXR1cyh0aGlzLnJlc29sdmVyLCB0aGlzLmF1dGgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gaGFzUGVuZGluZ1JlZGlyZWN0ID8gYXdhaXQgc3VwZXIuZXhlY3V0ZSgpIDogbnVsbDtcclxuICAgICAgICAgICAgICAgIHJlYWR5T3V0Y29tZSA9ICgpID0+IFByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICByZWFkeU91dGNvbWUgPSAoKSA9PiBQcm9taXNlLnJlamVjdChlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZWRpcmVjdE91dGNvbWVNYXAuc2V0KHRoaXMuYXV0aC5fa2V5KCksIHJlYWR5T3V0Y29tZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIHdlJ3JlIG5vdCBieXBhc3NpbmcgYXV0aCBzdGF0ZSwgdGhlIHJlYWR5IG91dGNvbWUgc2hvdWxkIGJlIHNldCB0b1xyXG4gICAgICAgIC8vIG51bGwuXHJcbiAgICAgICAgaWYgKCF0aGlzLmJ5cGFzc0F1dGhTdGF0ZSkge1xyXG4gICAgICAgICAgICByZWRpcmVjdE91dGNvbWVNYXAuc2V0KHRoaXMuYXV0aC5fa2V5KCksICgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZWFkeU91dGNvbWUoKTtcclxuICAgIH1cclxuICAgIGFzeW5jIG9uQXV0aEV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09IFwic2lnbkluVmlhUmVkaXJlY3RcIiAvKiBTSUdOX0lOX1ZJQV9SRURJUkVDVCAqLykge1xyXG4gICAgICAgICAgICByZXR1cm4gc3VwZXIub25BdXRoRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChldmVudC50eXBlID09PSBcInVua25vd25cIiAvKiBVTktOT1dOICovKSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBzZW50aW5lbCB2YWx1ZSBpbmRpY2F0aW5nIHRoZXJlJ3Mgbm8gcGVuZGluZyByZWRpcmVjdFxyXG4gICAgICAgICAgICB0aGlzLnJlc29sdmUobnVsbCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGV2ZW50LmV2ZW50SWQpIHtcclxuICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHRoaXMuYXV0aC5fcmVkaXJlY3RVc2VyRm9ySWQoZXZlbnQuZXZlbnRJZCk7XHJcbiAgICAgICAgICAgIGlmICh1c2VyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVzZXIgPSB1c2VyO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLm9uQXV0aEV2ZW50KGV2ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzb2x2ZShudWxsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGFzeW5jIG9uRXhlY3V0aW9uKCkgeyB9XHJcbiAgICBjbGVhblVwKCkgeyB9XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX2dldEFuZENsZWFyUGVuZGluZ1JlZGlyZWN0U3RhdHVzKHJlc29sdmVyLCBhdXRoKSB7XHJcbiAgICBjb25zdCBrZXkgPSBwZW5kaW5nUmVkaXJlY3RLZXkoYXV0aCk7XHJcbiAgICBjb25zdCBwZXJzaXN0ZW5jZSA9IHJlc29sdmVyUGVyc2lzdGVuY2UocmVzb2x2ZXIpO1xyXG4gICAgaWYgKCEoYXdhaXQgcGVyc2lzdGVuY2UuX2lzQXZhaWxhYmxlKCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgY29uc3QgaGFzUGVuZGluZ1JlZGlyZWN0ID0gKGF3YWl0IHBlcnNpc3RlbmNlLl9nZXQoa2V5KSkgPT09ICd0cnVlJztcclxuICAgIGF3YWl0IHBlcnNpc3RlbmNlLl9yZW1vdmUoa2V5KTtcclxuICAgIHJldHVybiBoYXNQZW5kaW5nUmVkaXJlY3Q7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX3NldFBlbmRpbmdSZWRpcmVjdFN0YXR1cyhyZXNvbHZlciwgYXV0aCkge1xyXG4gICAgcmV0dXJuIHJlc29sdmVyUGVyc2lzdGVuY2UocmVzb2x2ZXIpLl9zZXQocGVuZGluZ1JlZGlyZWN0S2V5KGF1dGgpLCAndHJ1ZScpO1xyXG59XHJcbmZ1bmN0aW9uIF9jbGVhclJlZGlyZWN0T3V0Y29tZXMoKSB7XHJcbiAgICByZWRpcmVjdE91dGNvbWVNYXAuY2xlYXIoKTtcclxufVxyXG5mdW5jdGlvbiByZXNvbHZlclBlcnNpc3RlbmNlKHJlc29sdmVyKSB7XHJcbiAgICByZXR1cm4gX2dldEluc3RhbmNlKHJlc29sdmVyLl9yZWRpcmVjdFBlcnNpc3RlbmNlKTtcclxufVxyXG5mdW5jdGlvbiBwZW5kaW5nUmVkaXJlY3RLZXkoYXV0aCkge1xyXG4gICAgcmV0dXJuIF9wZXJzaXN0ZW5jZUtleU5hbWUoUEVORElOR19SRURJUkVDVF9LRVksIGF1dGguY29uZmlnLmFwaUtleSwgYXV0aC5uYW1lKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQXV0aGVudGljYXRlcyBhIEZpcmViYXNlIGNsaWVudCB1c2luZyBhIGZ1bGwtcGFnZSByZWRpcmVjdCBmbG93LlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUbyBoYW5kbGUgdGhlIHJlc3VsdHMgYW5kIGVycm9ycyBmb3IgdGhpcyBvcGVyYXRpb24sIHJlZmVyIHRvIHtAbGluayBnZXRSZWRpcmVjdFJlc3VsdH0uXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBGYWNlYm9va0F1dGhQcm92aWRlcigpO1xyXG4gKiAvLyBZb3UgY2FuIGFkZCBhZGRpdGlvbmFsIHNjb3BlcyB0byB0aGUgcHJvdmlkZXI6XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCd1c2VyX2JpcnRoZGF5Jyk7XHJcbiAqIC8vIFN0YXJ0IGEgc2lnbiBpbiBwcm9jZXNzIGZvciBhbiB1bmF1dGhlbnRpY2F0ZWQgdXNlci5cclxuICogYXdhaXQgc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIGlmIChyZXN1bHQpIHtcclxuICogICAvLyBUaGlzIGlzIHRoZSBzaWduZWQtaW4gdXNlclxyXG4gKiAgIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogICAvLyBUaGlzIGdpdmVzIHlvdSBhIEZhY2Vib29rIEFjY2VzcyBUb2tlbi5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gcHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQoYXV0aCwgcmVzdWx0KTtcclxuICogICBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIH1cclxuICogLy8gQXMgdGhpcyBBUEkgY2FuIGJlIHVzZWQgZm9yIHNpZ24taW4sIGxpbmtpbmcgYW5kIHJlYXV0aGVudGljYXRpb24sXHJcbiAqIC8vIGNoZWNrIHRoZSBvcGVyYXRpb25UeXBlIHRvIGRldGVybWluZSB3aGF0IHRyaWdnZXJlZCB0aGlzIHJlZGlyZWN0XHJcbiAqIC8vIG9wZXJhdGlvbi5cclxuICogY29uc3Qgb3BlcmF0aW9uVHlwZSA9IHJlc3VsdC5vcGVyYXRpb25UeXBlO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gcHJvdmlkZXIgLSBUaGUgcHJvdmlkZXIgdG8gYXV0aGVudGljYXRlLiBUaGUgcHJvdmlkZXIgaGFzIHRvIGJlIGFuIHtAbGluayBPQXV0aFByb3ZpZGVyfS5cclxuICogTm9uLU9BdXRoIHByb3ZpZGVycyBsaWtlIHtAbGluayBFbWFpbEF1dGhQcm92aWRlcn0gd2lsbCB0aHJvdyBhbiBlcnJvci5cclxuICogQHBhcmFtIHJlc29sdmVyIC0gQW4gaW5zdGFuY2Ugb2Yge0BsaW5rIFBvcHVwUmVkaXJlY3RSZXNvbHZlcn0sIG9wdGlvbmFsXHJcbiAqIGlmIGFscmVhZHkgc3VwcGxpZWQgdG8ge0BsaW5rIGluaXRpYWxpemVBdXRofSBvciBwcm92aWRlZCBieSB7QGxpbmsgZ2V0QXV0aH0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHNpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlciwgcmVzb2x2ZXIpIHtcclxuICAgIHJldHVybiBfc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyLCByZXNvbHZlcik7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX3NpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlciwgcmVzb2x2ZXIpIHtcclxuICAgIGNvbnN0IGF1dGhJbnRlcm5hbCA9IF9jYXN0QXV0aChhdXRoKTtcclxuICAgIF9hc3NlcnRJbnN0YW5jZU9mKGF1dGgsIHByb3ZpZGVyLCBGZWRlcmF0ZWRBdXRoUHJvdmlkZXIpO1xyXG4gICAgY29uc3QgcmVzb2x2ZXJJbnRlcm5hbCA9IF93aXRoRGVmYXVsdFJlc29sdmVyKGF1dGhJbnRlcm5hbCwgcmVzb2x2ZXIpO1xyXG4gICAgYXdhaXQgX3NldFBlbmRpbmdSZWRpcmVjdFN0YXR1cyhyZXNvbHZlckludGVybmFsLCBhdXRoSW50ZXJuYWwpO1xyXG4gICAgcmV0dXJuIHJlc29sdmVySW50ZXJuYWwuX29wZW5SZWRpcmVjdChhdXRoSW50ZXJuYWwsIHByb3ZpZGVyLCBcInNpZ25JblZpYVJlZGlyZWN0XCIgLyogU0lHTl9JTl9WSUFfUkVESVJFQ1QgKi8pO1xyXG59XHJcbi8qKlxyXG4gKiBSZWF1dGhlbnRpY2F0ZXMgdGhlIGN1cnJlbnQgdXNlciB3aXRoIHRoZSBzcGVjaWZpZWQge0BsaW5rIE9BdXRoUHJvdmlkZXJ9IHVzaW5nIGEgZnVsbC1wYWdlIHJlZGlyZWN0IGZsb3cuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBGYWNlYm9va0F1dGhQcm92aWRlcigpO1xyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogLy8gTGluayB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBhd2FpdCBsaW5rV2l0aFJlZGlyZWN0KHJlc3VsdC51c2VyLCBwcm92aWRlcik7XHJcbiAqIC8vIFRoaXMgd2lsbCBhZ2FpbiB0cmlnZ2VyIGEgZnVsbCBwYWdlIHJlZGlyZWN0IGF3YXkgZnJvbSB5b3VyIGFwcFxyXG4gKlxyXG4gKiAvLyBBZnRlciByZXR1cm5pbmcgZnJvbSB0aGUgcmVkaXJlY3Qgd2hlbiB5b3VyIGFwcCBpbml0aWFsaXplcyB5b3UgY2FuIG9idGFpbiB0aGUgcmVzdWx0XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJlZGlyZWN0UmVzdWx0KGF1dGgpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIHByb3ZpZGVyIC0gVGhlIHByb3ZpZGVyIHRvIGF1dGhlbnRpY2F0ZS4gVGhlIHByb3ZpZGVyIGhhcyB0byBiZSBhbiB7QGxpbmsgT0F1dGhQcm92aWRlcn0uXHJcbiAqIE5vbi1PQXV0aCBwcm92aWRlcnMgbGlrZSB7QGxpbmsgRW1haWxBdXRoUHJvdmlkZXJ9IHdpbGwgdGhyb3cgYW4gZXJyb3IuXHJcbiAqIEBwYXJhbSByZXNvbHZlciAtIEFuIGluc3RhbmNlIG9mIHtAbGluayBQb3B1cFJlZGlyZWN0UmVzb2x2ZXJ9LCBvcHRpb25hbFxyXG4gKiBpZiBhbHJlYWR5IHN1cHBsaWVkIHRvIHtAbGluayBpbml0aWFsaXplQXV0aH0gb3IgcHJvdmlkZWQgYnkge0BsaW5rIGdldEF1dGh9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiByZWF1dGhlbnRpY2F0ZVdpdGhSZWRpcmVjdCh1c2VyLCBwcm92aWRlciwgcmVzb2x2ZXIpIHtcclxuICAgIHJldHVybiBfcmVhdXRoZW50aWNhdGVXaXRoUmVkaXJlY3QodXNlciwgcHJvdmlkZXIsIHJlc29sdmVyKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfcmVhdXRoZW50aWNhdGVXaXRoUmVkaXJlY3QodXNlciwgcHJvdmlkZXIsIHJlc29sdmVyKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBfYXNzZXJ0SW5zdGFuY2VPZih1c2VySW50ZXJuYWwuYXV0aCwgcHJvdmlkZXIsIEZlZGVyYXRlZEF1dGhQcm92aWRlcik7XHJcbiAgICAvLyBBbGxvdyB0aGUgcmVzb2x2ZXIgdG8gZXJyb3IgYmVmb3JlIHBlcnNpc3RpbmcgdGhlIHJlZGlyZWN0IHVzZXJcclxuICAgIGNvbnN0IHJlc29sdmVySW50ZXJuYWwgPSBfd2l0aERlZmF1bHRSZXNvbHZlcih1c2VySW50ZXJuYWwuYXV0aCwgcmVzb2x2ZXIpO1xyXG4gICAgYXdhaXQgX3NldFBlbmRpbmdSZWRpcmVjdFN0YXR1cyhyZXNvbHZlckludGVybmFsLCB1c2VySW50ZXJuYWwuYXV0aCk7XHJcbiAgICBjb25zdCBldmVudElkID0gYXdhaXQgcHJlcGFyZVVzZXJGb3JSZWRpcmVjdCh1c2VySW50ZXJuYWwpO1xyXG4gICAgcmV0dXJuIHJlc29sdmVySW50ZXJuYWwuX29wZW5SZWRpcmVjdCh1c2VySW50ZXJuYWwuYXV0aCwgcHJvdmlkZXIsIFwicmVhdXRoVmlhUmVkaXJlY3RcIiAvKiBSRUFVVEhfVklBX1JFRElSRUNUICovLCBldmVudElkKTtcclxufVxyXG4vKipcclxuICogTGlua3MgdGhlIHtAbGluayBPQXV0aFByb3ZpZGVyfSB0byB0aGUgdXNlciBhY2NvdW50IHVzaW5nIGEgZnVsbC1wYWdlIHJlZGlyZWN0IGZsb3cuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBzb21lIG90aGVyIHByb3ZpZGVyLlxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbCwgcGFzc3dvcmQpO1xyXG4gKiAvLyBMaW5rIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEZhY2Vib29rQXV0aFByb3ZpZGVyKCk7XHJcbiAqIGF3YWl0IGxpbmtXaXRoUmVkaXJlY3QocmVzdWx0LnVzZXIsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gcHJvdmlkZXIgLSBUaGUgcHJvdmlkZXIgdG8gYXV0aGVudGljYXRlLiBUaGUgcHJvdmlkZXIgaGFzIHRvIGJlIGFuIHtAbGluayBPQXV0aFByb3ZpZGVyfS5cclxuICogTm9uLU9BdXRoIHByb3ZpZGVycyBsaWtlIHtAbGluayBFbWFpbEF1dGhQcm92aWRlcn0gd2lsbCB0aHJvdyBhbiBlcnJvci5cclxuICogQHBhcmFtIHJlc29sdmVyIC0gQW4gaW5zdGFuY2Ugb2Yge0BsaW5rIFBvcHVwUmVkaXJlY3RSZXNvbHZlcn0sIG9wdGlvbmFsXHJcbiAqIGlmIGFscmVhZHkgc3VwcGxpZWQgdG8ge0BsaW5rIGluaXRpYWxpemVBdXRofSBvciBwcm92aWRlZCBieSB7QGxpbmsgZ2V0QXV0aH0uXHJcbiAqXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGxpbmtXaXRoUmVkaXJlY3QodXNlciwgcHJvdmlkZXIsIHJlc29sdmVyKSB7XHJcbiAgICByZXR1cm4gX2xpbmtXaXRoUmVkaXJlY3QodXNlciwgcHJvdmlkZXIsIHJlc29sdmVyKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfbGlua1dpdGhSZWRpcmVjdCh1c2VyLCBwcm92aWRlciwgcmVzb2x2ZXIpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIF9hc3NlcnRJbnN0YW5jZU9mKHVzZXJJbnRlcm5hbC5hdXRoLCBwcm92aWRlciwgRmVkZXJhdGVkQXV0aFByb3ZpZGVyKTtcclxuICAgIC8vIEFsbG93IHRoZSByZXNvbHZlciB0byBlcnJvciBiZWZvcmUgcGVyc2lzdGluZyB0aGUgcmVkaXJlY3QgdXNlclxyXG4gICAgY29uc3QgcmVzb2x2ZXJJbnRlcm5hbCA9IF93aXRoRGVmYXVsdFJlc29sdmVyKHVzZXJJbnRlcm5hbC5hdXRoLCByZXNvbHZlcik7XHJcbiAgICBhd2FpdCBfYXNzZXJ0TGlua2VkU3RhdHVzKGZhbHNlLCB1c2VySW50ZXJuYWwsIHByb3ZpZGVyLnByb3ZpZGVySWQpO1xyXG4gICAgYXdhaXQgX3NldFBlbmRpbmdSZWRpcmVjdFN0YXR1cyhyZXNvbHZlckludGVybmFsLCB1c2VySW50ZXJuYWwuYXV0aCk7XHJcbiAgICBjb25zdCBldmVudElkID0gYXdhaXQgcHJlcGFyZVVzZXJGb3JSZWRpcmVjdCh1c2VySW50ZXJuYWwpO1xyXG4gICAgcmV0dXJuIHJlc29sdmVySW50ZXJuYWwuX29wZW5SZWRpcmVjdCh1c2VySW50ZXJuYWwuYXV0aCwgcHJvdmlkZXIsIFwibGlua1ZpYVJlZGlyZWN0XCIgLyogTElOS19WSUFfUkVESVJFQ1QgKi8sIGV2ZW50SWQpO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEge0BsaW5rIFVzZXJDcmVkZW50aWFsfSBmcm9tIHRoZSByZWRpcmVjdC1iYXNlZCBzaWduLWluIGZsb3cuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIElmIHNpZ24taW4gc3VjY2VlZGVkLCByZXR1cm5zIHRoZSBzaWduZWQgaW4gdXNlci4gSWYgc2lnbi1pbiB3YXMgdW5zdWNjZXNzZnVsLCBmYWlscyB3aXRoIGFuXHJcbiAqIGVycm9yLiBJZiBubyByZWRpcmVjdCBvcGVyYXRpb24gd2FzIGNhbGxlZCwgcmV0dXJucyBhIHtAbGluayBVc2VyQ3JlZGVudGlhbH1cclxuICogd2l0aCBhIG51bGwgYHVzZXJgLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSByZWRpcmVjdC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcclxuICogLy8gWW91IGNhbiBhZGQgYWRkaXRpb25hbCBzY29wZXMgdG8gdGhlIHByb3ZpZGVyOlxyXG4gKiBwcm92aWRlci5hZGRTY29wZSgndXNlcl9iaXJ0aGRheScpO1xyXG4gKiAvLyBTdGFydCBhIHNpZ24gaW4gcHJvY2VzcyBmb3IgYW4gdW5hdXRoZW50aWNhdGVkIHVzZXIuXHJcbiAqIGF3YWl0IHNpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlcik7XHJcbiAqIC8vIFRoaXMgd2lsbCB0cmlnZ2VyIGEgZnVsbCBwYWdlIHJlZGlyZWN0IGF3YXkgZnJvbSB5b3VyIGFwcFxyXG4gKlxyXG4gKiAvLyBBZnRlciByZXR1cm5pbmcgZnJvbSB0aGUgcmVkaXJlY3Qgd2hlbiB5b3VyIGFwcCBpbml0aWFsaXplcyB5b3UgY2FuIG9idGFpbiB0aGUgcmVzdWx0XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJlZGlyZWN0UmVzdWx0KGF1dGgpO1xyXG4gKiBpZiAocmVzdWx0KSB7XHJcbiAqICAgLy8gVGhpcyBpcyB0aGUgc2lnbmVkLWluIHVzZXJcclxuICogICBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqICAgLy8gVGhpcyBnaXZlcyB5b3UgYSBGYWNlYm9vayBBY2Nlc3MgVG9rZW4uXHJcbiAqICAgY29uc3QgY3JlZGVudGlhbCA9IHByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KGF1dGgsIHJlc3VsdCk7XHJcbiAqICAgY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiB9XHJcbiAqIC8vIEFzIHRoaXMgQVBJIGNhbiBiZSB1c2VkIGZvciBzaWduLWluLCBsaW5raW5nIGFuZCByZWF1dGhlbnRpY2F0aW9uLFxyXG4gKiAvLyBjaGVjayB0aGUgb3BlcmF0aW9uVHlwZSB0byBkZXRlcm1pbmUgd2hhdCB0cmlnZ2VyZWQgdGhpcyByZWRpcmVjdFxyXG4gKiAvLyBvcGVyYXRpb24uXHJcbiAqIGNvbnN0IG9wZXJhdGlvblR5cGUgPSByZXN1bHQub3BlcmF0aW9uVHlwZTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIHJlc29sdmVyIC0gQW4gaW5zdGFuY2Ugb2Yge0BsaW5rIFBvcHVwUmVkaXJlY3RSZXNvbHZlcn0sIG9wdGlvbmFsXHJcbiAqIGlmIGFscmVhZHkgc3VwcGxpZWQgdG8ge0BsaW5rIGluaXRpYWxpemVBdXRofSBvciBwcm92aWRlZCBieSB7QGxpbmsgZ2V0QXV0aH0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGdldFJlZGlyZWN0UmVzdWx0KGF1dGgsIHJlc29sdmVyKSB7XHJcbiAgICBhd2FpdCBfY2FzdEF1dGgoYXV0aCkuX2luaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgIHJldHVybiBfZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCwgcmVzb2x2ZXIsIGZhbHNlKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCwgcmVzb2x2ZXJFeHRlcm4sIGJ5cGFzc0F1dGhTdGF0ZSA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCBhdXRoSW50ZXJuYWwgPSBfY2FzdEF1dGgoYXV0aCk7XHJcbiAgICBjb25zdCByZXNvbHZlciA9IF93aXRoRGVmYXVsdFJlc29sdmVyKGF1dGhJbnRlcm5hbCwgcmVzb2x2ZXJFeHRlcm4pO1xyXG4gICAgY29uc3QgYWN0aW9uID0gbmV3IFJlZGlyZWN0QWN0aW9uKGF1dGhJbnRlcm5hbCwgcmVzb2x2ZXIsIGJ5cGFzc0F1dGhTdGF0ZSk7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhY3Rpb24uZXhlY3V0ZSgpO1xyXG4gICAgaWYgKHJlc3VsdCAmJiAhYnlwYXNzQXV0aFN0YXRlKSB7XHJcbiAgICAgICAgZGVsZXRlIHJlc3VsdC51c2VyLl9yZWRpcmVjdEV2ZW50SWQ7XHJcbiAgICAgICAgYXdhaXQgYXV0aEludGVybmFsLl9wZXJzaXN0VXNlcklmQ3VycmVudChyZXN1bHQudXNlcik7XHJcbiAgICAgICAgYXdhaXQgYXV0aEludGVybmFsLl9zZXRSZWRpcmVjdFVzZXIobnVsbCwgcmVzb2x2ZXJFeHRlcm4pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBwcmVwYXJlVXNlckZvclJlZGlyZWN0KHVzZXIpIHtcclxuICAgIGNvbnN0IGV2ZW50SWQgPSBfZ2VuZXJhdGVFdmVudElkKGAke3VzZXIudWlkfTo6OmApO1xyXG4gICAgdXNlci5fcmVkaXJlY3RFdmVudElkID0gZXZlbnRJZDtcclxuICAgIGF3YWl0IHVzZXIuYXV0aC5fc2V0UmVkaXJlY3RVc2VyKHVzZXIpO1xyXG4gICAgYXdhaXQgdXNlci5hdXRoLl9wZXJzaXN0VXNlcklmQ3VycmVudCh1c2VyKTtcclxuICAgIHJldHVybiBldmVudElkO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIFRoZSBhbW91bnQgb2YgdGltZSB0byBzdG9yZSB0aGUgVUlEcyBvZiBzZWVuIGV2ZW50czsgdGhpcyBpc1xyXG4vLyBzZXQgdG8gMTAgbWluIGJ5IGRlZmF1bHRcclxuY29uc3QgRVZFTlRfRFVQTElDQVRJT05fQ0FDSEVfRFVSQVRJT05fTVMgPSAxMCAqIDYwICogMTAwMDtcclxuY2xhc3MgQXV0aEV2ZW50TWFuYWdlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoKSB7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gYXV0aDtcclxuICAgICAgICB0aGlzLmNhY2hlZEV2ZW50VWlkcyA9IG5ldyBTZXQoKTtcclxuICAgICAgICB0aGlzLmNvbnN1bWVycyA9IG5ldyBTZXQoKTtcclxuICAgICAgICB0aGlzLnF1ZXVlZFJlZGlyZWN0RXZlbnQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaGFzSGFuZGxlZFBvdGVudGlhbFJlZGlyZWN0ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5sYXN0UHJvY2Vzc2VkRXZlbnRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgIH1cclxuICAgIHJlZ2lzdGVyQ29uc3VtZXIoYXV0aEV2ZW50Q29uc3VtZXIpIHtcclxuICAgICAgICB0aGlzLmNvbnN1bWVycy5hZGQoYXV0aEV2ZW50Q29uc3VtZXIpO1xyXG4gICAgICAgIGlmICh0aGlzLnF1ZXVlZFJlZGlyZWN0RXZlbnQgJiZcclxuICAgICAgICAgICAgdGhpcy5pc0V2ZW50Rm9yQ29uc3VtZXIodGhpcy5xdWV1ZWRSZWRpcmVjdEV2ZW50LCBhdXRoRXZlbnRDb25zdW1lcikpIHtcclxuICAgICAgICAgICAgdGhpcy5zZW5kVG9Db25zdW1lcih0aGlzLnF1ZXVlZFJlZGlyZWN0RXZlbnQsIGF1dGhFdmVudENvbnN1bWVyKTtcclxuICAgICAgICAgICAgdGhpcy5zYXZlRXZlbnRUb0NhY2hlKHRoaXMucXVldWVkUmVkaXJlY3RFdmVudCk7XHJcbiAgICAgICAgICAgIHRoaXMucXVldWVkUmVkaXJlY3RFdmVudCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdW5yZWdpc3RlckNvbnN1bWVyKGF1dGhFdmVudENvbnN1bWVyKSB7XHJcbiAgICAgICAgdGhpcy5jb25zdW1lcnMuZGVsZXRlKGF1dGhFdmVudENvbnN1bWVyKTtcclxuICAgIH1cclxuICAgIG9uRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgZXZlbnQgaGFzIGFscmVhZHkgYmVlbiBoYW5kbGVkXHJcbiAgICAgICAgaWYgKHRoaXMuaGFzRXZlbnRCZWVuSGFuZGxlZChldmVudCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgaGFuZGxlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuY29uc3VtZXJzLmZvckVhY2goY29uc3VtZXIgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0V2ZW50Rm9yQ29uc3VtZXIoZXZlbnQsIGNvbnN1bWVyKSkge1xyXG4gICAgICAgICAgICAgICAgaGFuZGxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmRUb0NvbnN1bWVyKGV2ZW50LCBjb25zdW1lcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmVFdmVudFRvQ2FjaGUoZXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHRoaXMuaGFzSGFuZGxlZFBvdGVudGlhbFJlZGlyZWN0IHx8ICFpc1JlZGlyZWN0RXZlbnQoZXZlbnQpKSB7XHJcbiAgICAgICAgICAgIC8vIElmIHdlJ3ZlIGFscmVhZHkgc2VlbiBhIHJlZGlyZWN0IGJlZm9yZSwgb3IgdGhpcyBpcyBhIHBvcHVwIGV2ZW50LFxyXG4gICAgICAgICAgICAvLyBiYWlsIG5vd1xyXG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5oYXNIYW5kbGVkUG90ZW50aWFsUmVkaXJlY3QgPSB0cnVlO1xyXG4gICAgICAgIC8vIElmIHRoZSByZWRpcmVjdCB3YXNuJ3QgaGFuZGxlZCwgaGFuZyBvbiB0byBpdFxyXG4gICAgICAgIGlmICghaGFuZGxlZCkge1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXVlZFJlZGlyZWN0RXZlbnQgPSBldmVudDtcclxuICAgICAgICAgICAgaGFuZGxlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBoYW5kbGVkO1xyXG4gICAgfVxyXG4gICAgc2VuZFRvQ29uc3VtZXIoZXZlbnQsIGNvbnN1bWVyKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGlmIChldmVudC5lcnJvciAmJiAhaXNOdWxsUmVkaXJlY3RFdmVudChldmVudCkpIHtcclxuICAgICAgICAgICAgY29uc3QgY29kZSA9ICgoX2EgPSBldmVudC5lcnJvci5jb2RlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc3BsaXQoJ2F1dGgvJylbMV0pIHx8XHJcbiAgICAgICAgICAgICAgICBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi87XHJcbiAgICAgICAgICAgIGNvbnN1bWVyLm9uRXJyb3IoX2NyZWF0ZUVycm9yKHRoaXMuYXV0aCwgY29kZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3VtZXIub25BdXRoRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlzRXZlbnRGb3JDb25zdW1lcihldmVudCwgY29uc3VtZXIpIHtcclxuICAgICAgICBjb25zdCBldmVudElkTWF0Y2hlcyA9IGNvbnN1bWVyLmV2ZW50SWQgPT09IG51bGwgfHxcclxuICAgICAgICAgICAgKCEhZXZlbnQuZXZlbnRJZCAmJiBldmVudC5ldmVudElkID09PSBjb25zdW1lci5ldmVudElkKTtcclxuICAgICAgICByZXR1cm4gY29uc3VtZXIuZmlsdGVyLmluY2x1ZGVzKGV2ZW50LnR5cGUpICYmIGV2ZW50SWRNYXRjaGVzO1xyXG4gICAgfVxyXG4gICAgaGFzRXZlbnRCZWVuSGFuZGxlZChldmVudCkge1xyXG4gICAgICAgIGlmIChEYXRlLm5vdygpIC0gdGhpcy5sYXN0UHJvY2Vzc2VkRXZlbnRUaW1lID49XHJcbiAgICAgICAgICAgIEVWRU5UX0RVUExJQ0FUSU9OX0NBQ0hFX0RVUkFUSU9OX01TKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FjaGVkRXZlbnRVaWRzLmNsZWFyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmNhY2hlZEV2ZW50VWlkcy5oYXMoZXZlbnRVaWQoZXZlbnQpKTtcclxuICAgIH1cclxuICAgIHNhdmVFdmVudFRvQ2FjaGUoZXZlbnQpIHtcclxuICAgICAgICB0aGlzLmNhY2hlZEV2ZW50VWlkcy5hZGQoZXZlbnRVaWQoZXZlbnQpKTtcclxuICAgICAgICB0aGlzLmxhc3RQcm9jZXNzZWRFdmVudFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGV2ZW50VWlkKGUpIHtcclxuICAgIHJldHVybiBbZS50eXBlLCBlLmV2ZW50SWQsIGUuc2Vzc2lvbklkLCBlLnRlbmFudElkXS5maWx0ZXIodiA9PiB2KS5qb2luKCctJyk7XHJcbn1cclxuZnVuY3Rpb24gaXNOdWxsUmVkaXJlY3RFdmVudCh7IHR5cGUsIGVycm9yIH0pIHtcclxuICAgIHJldHVybiAodHlwZSA9PT0gXCJ1bmtub3duXCIgLyogVU5LTk9XTiAqLyAmJlxyXG4gICAgICAgIChlcnJvciA9PT0gbnVsbCB8fCBlcnJvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXJyb3IuY29kZSkgPT09IGBhdXRoLyR7XCJuby1hdXRoLWV2ZW50XCIgLyogTk9fQVVUSF9FVkVOVCAqL31gKTtcclxufVxyXG5mdW5jdGlvbiBpc1JlZGlyZWN0RXZlbnQoZXZlbnQpIHtcclxuICAgIHN3aXRjaCAoZXZlbnQudHlwZSkge1xyXG4gICAgICAgIGNhc2UgXCJzaWduSW5WaWFSZWRpcmVjdFwiIC8qIFNJR05fSU5fVklBX1JFRElSRUNUICovOlxyXG4gICAgICAgIGNhc2UgXCJsaW5rVmlhUmVkaXJlY3RcIiAvKiBMSU5LX1ZJQV9SRURJUkVDVCAqLzpcclxuICAgICAgICBjYXNlIFwicmVhdXRoVmlhUmVkaXJlY3RcIiAvKiBSRUFVVEhfVklBX1JFRElSRUNUICovOlxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICBjYXNlIFwidW5rbm93blwiIC8qIFVOS05PV04gKi86XHJcbiAgICAgICAgICAgIHJldHVybiBpc051bGxSZWRpcmVjdEV2ZW50KGV2ZW50KTtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX2dldFByb2plY3RDb25maWcoYXV0aCwgcmVxdWVzdCA9IHt9KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiR0VUXCIgLyogR0VUICovLCBcIi92MS9wcm9qZWN0c1wiIC8qIEdFVF9QUk9KRUNUX0NPTkZJRyAqLywgcmVxdWVzdCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgSVBfQUREUkVTU19SRUdFWCA9IC9eXFxkezEsM31cXC5cXGR7MSwzfVxcLlxcZHsxLDN9XFwuXFxkezEsM30kLztcclxuY29uc3QgSFRUUF9SRUdFWCA9IC9eaHR0cHM/LztcclxuYXN5bmMgZnVuY3Rpb24gX3ZhbGlkYXRlT3JpZ2luKGF1dGgpIHtcclxuICAgIC8vIFNraXAgb3JpZ2luIHZhbGlkYXRpb24gaWYgd2UgYXJlIGluIGFuIGVtdWxhdGVkIGVudmlyb25tZW50XHJcbiAgICBpZiAoYXV0aC5jb25maWcuZW11bGF0b3IpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCB7IGF1dGhvcml6ZWREb21haW5zIH0gPSBhd2FpdCBfZ2V0UHJvamVjdENvbmZpZyhhdXRoKTtcclxuICAgIGZvciAoY29uc3QgZG9tYWluIG9mIGF1dGhvcml6ZWREb21haW5zKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKG1hdGNoRG9tYWluKGRvbWFpbikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgLy8gRG8gbm90aGluZyBpZiB0aGVyZSdzIGEgVVJMIGVycm9yOyBqdXN0IGNvbnRpbnVlIHNlYXJjaGluZ1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIEluIHRoZSBvbGQgU0RLLCB0aGlzIGVycm9yIGFsc28gcHJvdmlkZXMgaGVscGZ1bCBtZXNzYWdlcy5cclxuICAgIF9mYWlsKGF1dGgsIFwidW5hdXRob3JpemVkLWRvbWFpblwiIC8qIElOVkFMSURfT1JJR0lOICovKTtcclxufVxyXG5mdW5jdGlvbiBtYXRjaERvbWFpbihleHBlY3RlZCkge1xyXG4gICAgY29uc3QgY3VycmVudFVybCA9IF9nZXRDdXJyZW50VXJsKCk7XHJcbiAgICBjb25zdCB7IHByb3RvY29sLCBob3N0bmFtZSB9ID0gbmV3IFVSTChjdXJyZW50VXJsKTtcclxuICAgIGlmIChleHBlY3RlZC5zdGFydHNXaXRoKCdjaHJvbWUtZXh0ZW5zaW9uOi8vJykpIHtcclxuICAgICAgICBjb25zdCBjZVVybCA9IG5ldyBVUkwoZXhwZWN0ZWQpO1xyXG4gICAgICAgIGlmIChjZVVybC5ob3N0bmFtZSA9PT0gJycgJiYgaG9zdG5hbWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgIC8vIEZvciBzb21lIHJlYXNvbiB3ZSdyZSBub3QgcGFyc2luZyBjaHJvbWUgVVJMcyBwcm9wZXJseVxyXG4gICAgICAgICAgICByZXR1cm4gKHByb3RvY29sID09PSAnY2hyb21lLWV4dGVuc2lvbjonICYmXHJcbiAgICAgICAgICAgICAgICBleHBlY3RlZC5yZXBsYWNlKCdjaHJvbWUtZXh0ZW5zaW9uOi8vJywgJycpID09PVxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRVcmwucmVwbGFjZSgnY2hyb21lLWV4dGVuc2lvbjovLycsICcnKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwcm90b2NvbCA9PT0gJ2Nocm9tZS1leHRlbnNpb246JyAmJiBjZVVybC5ob3N0bmFtZSA9PT0gaG9zdG5hbWU7XHJcbiAgICB9XHJcbiAgICBpZiAoIUhUVFBfUkVHRVgudGVzdChwcm90b2NvbCkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBpZiAoSVBfQUREUkVTU19SRUdFWC50ZXN0KGV4cGVjdGVkKSkge1xyXG4gICAgICAgIC8vIFRoZSBkb21haW4gaGFzIHRvIGJlIGV4YWN0bHkgZXF1YWwgdG8gdGhlIHBhdHRlcm4sIGFzIGFuIElQIGRvbWFpbiB3aWxsXHJcbiAgICAgICAgLy8gb25seSBjb250YWluIHRoZSBJUCwgbm8gZXh0cmEgY2hhcmFjdGVyLlxyXG4gICAgICAgIHJldHVybiBob3N0bmFtZSA9PT0gZXhwZWN0ZWQ7XHJcbiAgICB9XHJcbiAgICAvLyBEb3RzIGluIHBhdHRlcm4gc2hvdWxkIGJlIGVzY2FwZWQuXHJcbiAgICBjb25zdCBlc2NhcGVkRG9tYWluUGF0dGVybiA9IGV4cGVjdGVkLnJlcGxhY2UoL1xcLi9nLCAnXFxcXC4nKTtcclxuICAgIC8vIE5vbiBpcCBhZGRyZXNzIGRvbWFpbnMuXHJcbiAgICAvLyBkb21haW4uY29tID0gKi5kb21haW4uY29tIE9SIGRvbWFpbi5jb21cclxuICAgIGNvbnN0IHJlID0gbmV3IFJlZ0V4cCgnXiguK1xcXFwuJyArIGVzY2FwZWREb21haW5QYXR0ZXJuICsgJ3wnICsgZXNjYXBlZERvbWFpblBhdHRlcm4gKyAnKSQnLCAnaScpO1xyXG4gICAgcmV0dXJuIHJlLnRlc3QoaG9zdG5hbWUpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBORVRXT1JLX1RJTUVPVVQgPSBuZXcgRGVsYXkoMzAwMDAsIDYwMDAwKTtcclxuLyoqXHJcbiAqIFJlc2V0IHVubGFvZGVkIEdBcGkgbW9kdWxlcy4gSWYgZ2FwaS5sb2FkIGZhaWxzIGR1ZSB0byBhIG5ldHdvcmsgZXJyb3IsXHJcbiAqIGl0IHdpbGwgc3RvcCB3b3JraW5nIGFmdGVyIGEgcmV0cmlhbC4gVGhpcyBpcyBhIGhhY2sgdG8gZml4IHRoaXMgaXNzdWUuXHJcbiAqL1xyXG5mdW5jdGlvbiByZXNldFVubG9hZGVkR2FwaU1vZHVsZXMoKSB7XHJcbiAgICAvLyBDbGVhciBsYXN0IGZhaWxlZCBnYXBpLmxvYWQgc3RhdGUgdG8gZm9yY2UgbmV4dCBnYXBpLmxvYWQgdG8gZmlyc3RcclxuICAgIC8vIGxvYWQgdGhlIGZhaWxlZCBnYXBpLmlmcmFtZXMgbW9kdWxlLlxyXG4gICAgLy8gR2V0IGdhcGl4LmJlYWNvbiBjb250ZXh0LlxyXG4gICAgY29uc3QgYmVhY29uID0gX3dpbmRvdygpLl9fX2pzbDtcclxuICAgIC8vIEdldCBjdXJyZW50IGhpbnQuXHJcbiAgICBpZiAoYmVhY29uID09PSBudWxsIHx8IGJlYWNvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogYmVhY29uLkgpIHtcclxuICAgICAgICAvLyBHZXQgZ2FwaSBoaW50LlxyXG4gICAgICAgIGZvciAoY29uc3QgaGludCBvZiBPYmplY3Qua2V5cyhiZWFjb24uSCkpIHtcclxuICAgICAgICAgICAgLy8gUmVxdWVzdGVkIG1vZHVsZXMuXHJcbiAgICAgICAgICAgIGJlYWNvbi5IW2hpbnRdLnIgPSBiZWFjb24uSFtoaW50XS5yIHx8IFtdO1xyXG4gICAgICAgICAgICAvLyBMb2FkZWQgbW9kdWxlcy5cclxuICAgICAgICAgICAgYmVhY29uLkhbaGludF0uTCA9IGJlYWNvbi5IW2hpbnRdLkwgfHwgW107XHJcbiAgICAgICAgICAgIC8vIFNldCByZXF1ZXN0ZWQgbW9kdWxlcyB0byBhIGNvcHkgb2YgdGhlIGxvYWRlZCBtb2R1bGVzLlxyXG4gICAgICAgICAgICBiZWFjb24uSFtoaW50XS5yID0gWy4uLmJlYWNvbi5IW2hpbnRdLkxdO1xyXG4gICAgICAgICAgICAvLyBDbGVhciBwZW5kaW5nIGNhbGxiYWNrcy5cclxuICAgICAgICAgICAgaWYgKGJlYWNvbi5DUCkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiZWFjb24uQ1AubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgYWxsIGZhaWxlZCBwZW5kaW5nIGNhbGxiYWNrcy5cclxuICAgICAgICAgICAgICAgICAgICBiZWFjb24uQ1BbaV0gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGxvYWRHYXBpKGF1dGgpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XHJcbiAgICAgICAgLy8gRnVuY3Rpb24gdG8gcnVuIHdoZW4gZ2FwaS5sb2FkIGlzIHJlYWR5LlxyXG4gICAgICAgIGZ1bmN0aW9uIGxvYWRHYXBpSWZyYW1lKCkge1xyXG4gICAgICAgICAgICAvLyBUaGUgZGV2ZWxvcGVyIG1heSBoYXZlIHRyaWVkIHRvIHByZXZpb3VzbHkgcnVuIGdhcGkubG9hZCBhbmQgZmFpbGVkLlxyXG4gICAgICAgICAgICAvLyBSdW4gdGhpcyB0byBmaXggdGhhdC5cclxuICAgICAgICAgICAgcmVzZXRVbmxvYWRlZEdhcGlNb2R1bGVzKCk7XHJcbiAgICAgICAgICAgIGdhcGkubG9hZCgnZ2FwaS5pZnJhbWVzJywge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGdhcGkuaWZyYW1lcy5nZXRDb250ZXh0KCkpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9udGltZW91dDogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBhYm92ZSByZXNldCBtYXkgYmUgc3VmZmljaWVudCwgYnV0IGhhdmluZyB0aGlzIHJlc2V0IGFmdGVyXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZmFpbHVyZSBlbnN1cmVzIHRoYXQgaWYgdGhlIGRldmVsb3BlciBjYWxscyBnYXBpLmxvYWQgYWZ0ZXIgdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29ubmVjdGlvbiBpcyByZS1lc3RhYmxpc2hlZCBhbmQgYmVmb3JlIGFub3RoZXIgYXR0ZW1wdCB0byBlbWJlZFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBpZnJhbWUsIGl0IHdvdWxkIHdvcmsgYW5kIHdvdWxkIG5vdCBiZSBicm9rZW4gYmVjYXVzZSBvZiBvdXJcclxuICAgICAgICAgICAgICAgICAgICAvLyBmYWlsZWQgYXR0ZW1wdC5cclxuICAgICAgICAgICAgICAgICAgICAvLyBUaW1lb3V0IHdoZW4gZ2FwaS5pZnJhbWVzLklmcmFtZSBub3QgbG9hZGVkLlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc2V0VW5sb2FkZWRHYXBpTW9kdWxlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChfY3JlYXRlRXJyb3IoYXV0aCwgXCJuZXR3b3JrLXJlcXVlc3QtZmFpbGVkXCIgLyogTkVUV09SS19SRVFVRVNUX0ZBSUxFRCAqLykpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHRpbWVvdXQ6IE5FVFdPUktfVElNRU9VVC5nZXQoKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKChfYiA9IChfYSA9IF93aW5kb3coKS5nYXBpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaWZyYW1lcykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLklmcmFtZSkge1xyXG4gICAgICAgICAgICAvLyBJZiBnYXBpLmlmcmFtZXMuSWZyYW1lIGF2YWlsYWJsZSwgcmVzb2x2ZS5cclxuICAgICAgICAgICAgcmVzb2x2ZShnYXBpLmlmcmFtZXMuZ2V0Q29udGV4dCgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoISEoKF9jID0gX3dpbmRvdygpLmdhcGkpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5sb2FkKSkge1xyXG4gICAgICAgICAgICAvLyBHYXBpIGxvYWRlciByZWFkeSwgbG9hZCBnYXBpLmlmcmFtZXMuXHJcbiAgICAgICAgICAgIGxvYWRHYXBpSWZyYW1lKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgaWZyYW1lIGNhbGxiYWNrIHdoZW4gdGhpcyBpcyBjYWxsZWQgc28gYXMgbm90IHRvIG92ZXJ3cml0ZVxyXG4gICAgICAgICAgICAvLyBhbnkgcHJldmlvdXMgZGVmaW5lZCBjYWxsYmFjay4gVGhpcyBoYXBwZW5zIGlmIHRoaXMgbWV0aG9kIGlzIGNhbGxlZFxyXG4gICAgICAgICAgICAvLyBtdWx0aXBsZSB0aW1lcyBpbiBwYXJhbGxlbCBhbmQgY291bGQgcmVzdWx0IGluIHRoZSBsYXRlciBjYWxsYmFja1xyXG4gICAgICAgICAgICAvLyBvdmVyd3JpdGluZyB0aGUgcHJldmlvdXMgb25lLiBUaGlzIHdvdWxkIGVuZCB1cCB3aXRoIGEgaWZyYW1lXHJcbiAgICAgICAgICAgIC8vIHRpbWVvdXQuXHJcbiAgICAgICAgICAgIGNvbnN0IGNiTmFtZSA9IF9nZW5lcmF0ZUNhbGxiYWNrTmFtZSgnaWZyYW1lZmNiJyk7XHJcbiAgICAgICAgICAgIC8vIEdBcGkgbG9hZGVyIG5vdCBhdmFpbGFibGUsIGR5bmFtaWNhbGx5IGxvYWQgcGxhdGZvcm0uanMuXHJcbiAgICAgICAgICAgIF93aW5kb3coKVtjYk5hbWVdID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gR0FwaSBsb2FkZXIgc2hvdWxkIGJlIHJlYWR5LlxyXG4gICAgICAgICAgICAgICAgaWYgKCEhZ2FwaS5sb2FkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9hZEdhcGlJZnJhbWUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEdhcGkgbG9hZGVyIGZhaWxlZCwgdGhyb3cgZXJyb3IuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KF9jcmVhdGVFcnJvcihhdXRoLCBcIm5ldHdvcmstcmVxdWVzdC1mYWlsZWRcIiAvKiBORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8vIExvYWQgR0FwaSBsb2FkZXIuXHJcbiAgICAgICAgICAgIHJldHVybiBfbG9hZEpTKGBodHRwczovL2FwaXMuZ29vZ2xlLmNvbS9qcy9hcGkuanM/b25sb2FkPSR7Y2JOYW1lfWApLmNhdGNoKGUgPT4gcmVqZWN0KGUpKTtcclxuICAgICAgICB9XHJcbiAgICB9KS5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgLy8gUmVzZXQgY2FjaGVkIHByb21pc2UgdG8gYWxsb3cgZm9yIHJldHJpYWwuXHJcbiAgICAgICAgY2FjaGVkR0FwaUxvYWRlciA9IG51bGw7XHJcbiAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9KTtcclxufVxyXG5sZXQgY2FjaGVkR0FwaUxvYWRlciA9IG51bGw7XHJcbmZ1bmN0aW9uIF9sb2FkR2FwaShhdXRoKSB7XHJcbiAgICBjYWNoZWRHQXBpTG9hZGVyID0gY2FjaGVkR0FwaUxvYWRlciB8fCBsb2FkR2FwaShhdXRoKTtcclxuICAgIHJldHVybiBjYWNoZWRHQXBpTG9hZGVyO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBQSU5HX1RJTUVPVVQgPSBuZXcgRGVsYXkoNTAwMCwgMTUwMDApO1xyXG5jb25zdCBJRlJBTUVfUEFUSCA9ICdfXy9hdXRoL2lmcmFtZSc7XHJcbmNvbnN0IEVNVUxBVEVEX0lGUkFNRV9QQVRIID0gJ2VtdWxhdG9yL2F1dGgvaWZyYW1lJztcclxuY29uc3QgSUZSQU1FX0FUVFJJQlVURVMgPSB7XHJcbiAgICBzdHlsZToge1xyXG4gICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxyXG4gICAgICAgIHRvcDogJy0xMDBweCcsXHJcbiAgICAgICAgd2lkdGg6ICcxcHgnLFxyXG4gICAgICAgIGhlaWdodDogJzFweCdcclxuICAgIH0sXHJcbiAgICAnYXJpYS1oaWRkZW4nOiAndHJ1ZScsXHJcbiAgICB0YWJpbmRleDogJy0xJ1xyXG59O1xyXG4vLyBNYXAgZnJvbSBhcGlIb3N0IHRvIGVuZHBvaW50IElEIGZvciBwYXNzaW5nIGludG8gaWZyYW1lLiBJbiBjdXJyZW50IFNESywgYXBpSG9zdCBjYW4gYmUgc2V0IHRvXHJcbi8vIGFueXRoaW5nIChub3QgZnJvbSBhIGxpc3Qgb2YgZW5kcG9pbnRzIHdpdGggSURzIGFzIGluIGxlZ2FjeSksIHNvIHRoaXMgaXMgdGhlIGNsb3Nlc3Qgd2UgY2FuIGdldC5cclxuY29uc3QgRUlEX0ZST01fQVBJSE9TVCA9IG5ldyBNYXAoW1xyXG4gICAgW1wiaWRlbnRpdHl0b29sa2l0Lmdvb2dsZWFwaXMuY29tXCIgLyogQVBJX0hPU1QgKi8sICdwJ10sXHJcbiAgICBbJ3N0YWdpbmctaWRlbnRpdHl0b29sa2l0LnNhbmRib3guZ29vZ2xlYXBpcy5jb20nLCAncyddLFxyXG4gICAgWyd0ZXN0LWlkZW50aXR5dG9vbGtpdC5zYW5kYm94Lmdvb2dsZWFwaXMuY29tJywgJ3QnXSAvLyB0ZXN0XHJcbl0pO1xyXG5mdW5jdGlvbiBnZXRJZnJhbWVVcmwoYXV0aCkge1xyXG4gICAgY29uc3QgY29uZmlnID0gYXV0aC5jb25maWc7XHJcbiAgICBfYXNzZXJ0KGNvbmZpZy5hdXRoRG9tYWluLCBhdXRoLCBcImF1dGgtZG9tYWluLWNvbmZpZy1yZXF1aXJlZFwiIC8qIE1JU1NJTkdfQVVUSF9ET01BSU4gKi8pO1xyXG4gICAgY29uc3QgdXJsID0gY29uZmlnLmVtdWxhdG9yXHJcbiAgICAgICAgPyBfZW11bGF0b3JVcmwoY29uZmlnLCBFTVVMQVRFRF9JRlJBTUVfUEFUSClcclxuICAgICAgICA6IGBodHRwczovLyR7YXV0aC5jb25maWcuYXV0aERvbWFpbn0vJHtJRlJBTUVfUEFUSH1gO1xyXG4gICAgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgICAgIGFwaUtleTogY29uZmlnLmFwaUtleSxcclxuICAgICAgICBhcHBOYW1lOiBhdXRoLm5hbWUsXHJcbiAgICAgICAgdjogU0RLX1ZFUlNJT05cclxuICAgIH07XHJcbiAgICBjb25zdCBlaWQgPSBFSURfRlJPTV9BUElIT1NULmdldChhdXRoLmNvbmZpZy5hcGlIb3N0KTtcclxuICAgIGlmIChlaWQpIHtcclxuICAgICAgICBwYXJhbXMuZWlkID0gZWlkO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZnJhbWV3b3JrcyA9IGF1dGguX2dldEZyYW1ld29ya3MoKTtcclxuICAgIGlmIChmcmFtZXdvcmtzLmxlbmd0aCkge1xyXG4gICAgICAgIHBhcmFtcy5mdyA9IGZyYW1ld29ya3Muam9pbignLCcpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGAke3VybH0/JHtxdWVyeXN0cmluZyhwYXJhbXMpLnNsaWNlKDEpfWA7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX29wZW5JZnJhbWUoYXV0aCkge1xyXG4gICAgY29uc3QgY29udGV4dCA9IGF3YWl0IF9sb2FkR2FwaShhdXRoKTtcclxuICAgIGNvbnN0IGdhcGkgPSBfd2luZG93KCkuZ2FwaTtcclxuICAgIF9hc3NlcnQoZ2FwaSwgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIHJldHVybiBjb250ZXh0Lm9wZW4oe1xyXG4gICAgICAgIHdoZXJlOiBkb2N1bWVudC5ib2R5LFxyXG4gICAgICAgIHVybDogZ2V0SWZyYW1lVXJsKGF1dGgpLFxyXG4gICAgICAgIG1lc3NhZ2VIYW5kbGVyc0ZpbHRlcjogZ2FwaS5pZnJhbWVzLkNST1NTX09SSUdJTl9JRlJBTUVTX0ZJTFRFUixcclxuICAgICAgICBhdHRyaWJ1dGVzOiBJRlJBTUVfQVRUUklCVVRFUyxcclxuICAgICAgICBkb250Y2xlYXI6IHRydWVcclxuICAgIH0sIChpZnJhbWUpID0+IG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBhd2FpdCBpZnJhbWUucmVzdHlsZSh7XHJcbiAgICAgICAgICAgIC8vIFByZXZlbnQgaWZyYW1lIGZyb20gY2xvc2luZyBvbiBtb3VzZSBvdXQuXHJcbiAgICAgICAgICAgIHNldEhpZGVPbkxlYXZlOiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IG5ldHdvcmtFcnJvciA9IF9jcmVhdGVFcnJvcihhdXRoLCBcIm5ldHdvcmstcmVxdWVzdC1mYWlsZWRcIiAvKiBORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovKTtcclxuICAgICAgICAvLyBDb25maXJtIGlmcmFtZSBpcyBjb3JyZWN0bHkgbG9hZGVkLlxyXG4gICAgICAgIC8vIFRvIGZhbGxiYWNrIG9uIGZhaWx1cmUsIHNldCBhIHRpbWVvdXQuXHJcbiAgICAgICAgY29uc3QgbmV0d29ya0Vycm9yVGltZXIgPSBfd2luZG93KCkuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHJlamVjdChuZXR3b3JrRXJyb3IpO1xyXG4gICAgICAgIH0sIFBJTkdfVElNRU9VVC5nZXQoKSk7XHJcbiAgICAgICAgLy8gQ2xlYXIgdGltZXIgYW5kIHJlc29sdmUgcGVuZGluZyBpZnJhbWUgcmVhZHkgcHJvbWlzZS5cclxuICAgICAgICBmdW5jdGlvbiBjbGVhclRpbWVyQW5kUmVzb2x2ZSgpIHtcclxuICAgICAgICAgICAgX3dpbmRvdygpLmNsZWFyVGltZW91dChuZXR3b3JrRXJyb3JUaW1lcik7XHJcbiAgICAgICAgICAgIHJlc29sdmUoaWZyYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVGhpcyByZXR1cm5zIGFuIElUaGVuYWJsZS4gSG93ZXZlciB0aGUgcmVqZWN0IHBhcnQgZG9lcyBub3QgY2FsbFxyXG4gICAgICAgIC8vIHdoZW4gdGhlIGlmcmFtZSBpcyBub3QgbG9hZGVkLlxyXG4gICAgICAgIGlmcmFtZS5waW5nKGNsZWFyVGltZXJBbmRSZXNvbHZlKS50aGVuKGNsZWFyVGltZXJBbmRSZXNvbHZlLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJlamVjdChuZXR3b3JrRXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBCQVNFX1BPUFVQX09QVElPTlMgPSB7XHJcbiAgICBsb2NhdGlvbjogJ3llcycsXHJcbiAgICByZXNpemFibGU6ICd5ZXMnLFxyXG4gICAgc3RhdHVzYmFyOiAneWVzJyxcclxuICAgIHRvb2xiYXI6ICdubydcclxufTtcclxuY29uc3QgREVGQVVMVF9XSURUSCA9IDUwMDtcclxuY29uc3QgREVGQVVMVF9IRUlHSFQgPSA2MDA7XHJcbmNvbnN0IFRBUkdFVF9CTEFOSyA9ICdfYmxhbmsnO1xyXG5jb25zdCBGSVJFRk9YX0VNUFRZX1VSTCA9ICdodHRwOi8vbG9jYWxob3N0JztcclxuY2xhc3MgQXV0aFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHdpbmRvdykge1xyXG4gICAgICAgIHRoaXMud2luZG93ID0gd2luZG93O1xyXG4gICAgICAgIHRoaXMuYXNzb2NpYXRlZEV2ZW50ID0gbnVsbDtcclxuICAgIH1cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLndpbmRvdykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53aW5kb3cuY2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIF9vcGVuKGF1dGgsIHVybCwgbmFtZSwgd2lkdGggPSBERUZBVUxUX1dJRFRILCBoZWlnaHQgPSBERUZBVUxUX0hFSUdIVCkge1xyXG4gICAgY29uc3QgdG9wID0gTWF0aC5tYXgoKHdpbmRvdy5zY3JlZW4uYXZhaWxIZWlnaHQgLSBoZWlnaHQpIC8gMiwgMCkudG9TdHJpbmcoKTtcclxuICAgIGNvbnN0IGxlZnQgPSBNYXRoLm1heCgod2luZG93LnNjcmVlbi5hdmFpbFdpZHRoIC0gd2lkdGgpIC8gMiwgMCkudG9TdHJpbmcoKTtcclxuICAgIGxldCB0YXJnZXQgPSAnJztcclxuICAgIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIEJBU0VfUE9QVVBfT1BUSU9OUyksIHsgd2lkdGg6IHdpZHRoLnRvU3RyaW5nKCksIGhlaWdodDogaGVpZ2h0LnRvU3RyaW5nKCksIHRvcCxcclxuICAgICAgICBsZWZ0IH0pO1xyXG4gICAgLy8gQ2hyb21lIGlPUyA3IGFuZCA4IGlzIHJldHVybmluZyBhbiB1bmRlZmluZWQgcG9wdXAgd2luIHdoZW4gdGFyZ2V0IGlzXHJcbiAgICAvLyBzcGVjaWZpZWQsIGV2ZW4gdGhvdWdoIHRoZSBwb3B1cCBpcyBub3QgbmVjZXNzYXJpbHkgYmxvY2tlZC5cclxuICAgIGNvbnN0IHVhID0gZ2V0VUEoKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgaWYgKG5hbWUpIHtcclxuICAgICAgICB0YXJnZXQgPSBfaXNDaHJvbWVJT1ModWEpID8gVEFSR0VUX0JMQU5LIDogbmFtZTtcclxuICAgIH1cclxuICAgIGlmIChfaXNGaXJlZm94KHVhKSkge1xyXG4gICAgICAgIC8vIEZpcmVmb3ggY29tcGxhaW5zIHdoZW4gaW52YWxpZCBVUkxzIGFyZSBwb3BwZWQgb3V0LiBIYWNreSB3YXkgdG8gYnlwYXNzLlxyXG4gICAgICAgIHVybCA9IHVybCB8fCBGSVJFRk9YX0VNUFRZX1VSTDtcclxuICAgICAgICAvLyBGaXJlZm94IGRpc2FibGVzIGJ5IGRlZmF1bHQgc2Nyb2xsaW5nIG9uIHBvcHVwIHdpbmRvd3MsIHdoaWNoIGNhbiBjcmVhdGVcclxuICAgICAgICAvLyBpc3N1ZXMgd2hlbiB0aGUgdXNlciBoYXMgbWFueSBHb29nbGUgYWNjb3VudHMsIGZvciBpbnN0YW5jZS5cclxuICAgICAgICBvcHRpb25zLnNjcm9sbGJhcnMgPSAneWVzJztcclxuICAgIH1cclxuICAgIGNvbnN0IG9wdGlvbnNTdHJpbmcgPSBPYmplY3QuZW50cmllcyhvcHRpb25zKS5yZWR1Y2UoKGFjY3VtLCBba2V5LCB2YWx1ZV0pID0+IGAke2FjY3VtfSR7a2V5fT0ke3ZhbHVlfSxgLCAnJyk7XHJcbiAgICBpZiAoX2lzSU9TU3RhbmRhbG9uZSh1YSkgJiYgdGFyZ2V0ICE9PSAnX3NlbGYnKSB7XHJcbiAgICAgICAgb3BlbkFzTmV3V2luZG93SU9TKHVybCB8fCAnJywgdGFyZ2V0KTtcclxuICAgICAgICByZXR1cm4gbmV3IEF1dGhQb3B1cChudWxsKTtcclxuICAgIH1cclxuICAgIC8vIGFib3V0OmJsYW5rIGdldHRpbmcgc2FuaXRpemVkIGNhdXNpbmcgYnJvd3NlcnMgbGlrZSBJRS9FZGdlIHRvIGRpc3BsYXlcclxuICAgIC8vIGJyaWVmIGVycm9yIG1lc3NhZ2UgYmVmb3JlIHJlZGlyZWN0aW5nIHRvIGhhbmRsZXIuXHJcbiAgICBjb25zdCBuZXdXaW4gPSB3aW5kb3cub3Blbih1cmwgfHwgJycsIHRhcmdldCwgb3B0aW9uc1N0cmluZyk7XHJcbiAgICBfYXNzZXJ0KG5ld1dpbiwgYXV0aCwgXCJwb3B1cC1ibG9ja2VkXCIgLyogUE9QVVBfQkxPQ0tFRCAqLyk7XHJcbiAgICAvLyBGbGFreSBvbiBJRSBlZGdlLCBlbmNhcHN1bGF0ZSB3aXRoIGEgdHJ5IGFuZCBjYXRjaC5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgbmV3V2luLmZvY3VzKCk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICByZXR1cm4gbmV3IEF1dGhQb3B1cChuZXdXaW4pO1xyXG59XHJcbmZ1bmN0aW9uIG9wZW5Bc05ld1dpbmRvd0lPUyh1cmwsIHRhcmdldCkge1xyXG4gICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICBlbC5ocmVmID0gdXJsO1xyXG4gICAgZWwudGFyZ2V0ID0gdGFyZ2V0O1xyXG4gICAgY29uc3QgY2xpY2sgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnTW91c2VFdmVudCcpO1xyXG4gICAgY2xpY2suaW5pdE1vdXNlRXZlbnQoJ2NsaWNrJywgdHJ1ZSwgdHJ1ZSwgd2luZG93LCAxLCAwLCAwLCAwLCAwLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgMSwgbnVsbCk7XHJcbiAgICBlbC5kaXNwYXRjaEV2ZW50KGNsaWNrKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVVJMIGZvciBBdXRoZW50aWNhdGlvbiB3aWRnZXQgd2hpY2ggd2lsbCBpbml0aWF0ZSB0aGUgT0F1dGggaGFuZHNoYWtlXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3QgV0lER0VUX1BBVEggPSAnX18vYXV0aC9oYW5kbGVyJztcclxuLyoqXHJcbiAqIFVSTCBmb3IgZW11bGF0ZWQgZW52aXJvbm1lbnRcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBFTVVMQVRPUl9XSURHRVRfUEFUSCA9ICdlbXVsYXRvci9hdXRoL2hhbmRsZXInO1xyXG5mdW5jdGlvbiBfZ2V0UmVkaXJlY3RVcmwoYXV0aCwgcHJvdmlkZXIsIGF1dGhUeXBlLCByZWRpcmVjdFVybCwgZXZlbnRJZCwgYWRkaXRpb25hbFBhcmFtcykge1xyXG4gICAgX2Fzc2VydChhdXRoLmNvbmZpZy5hdXRoRG9tYWluLCBhdXRoLCBcImF1dGgtZG9tYWluLWNvbmZpZy1yZXF1aXJlZFwiIC8qIE1JU1NJTkdfQVVUSF9ET01BSU4gKi8pO1xyXG4gICAgX2Fzc2VydChhdXRoLmNvbmZpZy5hcGlLZXksIGF1dGgsIFwiaW52YWxpZC1hcGkta2V5XCIgLyogSU5WQUxJRF9BUElfS0VZICovKTtcclxuICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgICBhcGlLZXk6IGF1dGguY29uZmlnLmFwaUtleSxcclxuICAgICAgICBhcHBOYW1lOiBhdXRoLm5hbWUsXHJcbiAgICAgICAgYXV0aFR5cGUsXHJcbiAgICAgICAgcmVkaXJlY3RVcmwsXHJcbiAgICAgICAgdjogU0RLX1ZFUlNJT04sXHJcbiAgICAgICAgZXZlbnRJZFxyXG4gICAgfTtcclxuICAgIGlmIChwcm92aWRlciBpbnN0YW5jZW9mIEZlZGVyYXRlZEF1dGhQcm92aWRlcikge1xyXG4gICAgICAgIHByb3ZpZGVyLnNldERlZmF1bHRMYW5ndWFnZShhdXRoLmxhbmd1YWdlQ29kZSk7XHJcbiAgICAgICAgcGFyYW1zLnByb3ZpZGVySWQgPSBwcm92aWRlci5wcm92aWRlcklkIHx8ICcnO1xyXG4gICAgICAgIGlmICghaXNFbXB0eShwcm92aWRlci5nZXRDdXN0b21QYXJhbWV0ZXJzKCkpKSB7XHJcbiAgICAgICAgICAgIHBhcmFtcy5jdXN0b21QYXJhbWV0ZXJzID0gSlNPTi5zdHJpbmdpZnkocHJvdmlkZXIuZ2V0Q3VzdG9tUGFyYW1ldGVycygpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVE9ETyBzZXQgYWRkaXRpb25hbFBhcmFtcyBmcm9tIHRoZSBwcm92aWRlciBhcyB3ZWxsP1xyXG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGFkZGl0aW9uYWxQYXJhbXMgfHwge30pKSB7XHJcbiAgICAgICAgICAgIHBhcmFtc1trZXldID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHByb3ZpZGVyIGluc3RhbmNlb2YgQmFzZU9BdXRoUHJvdmlkZXIpIHtcclxuICAgICAgICBjb25zdCBzY29wZXMgPSBwcm92aWRlci5nZXRTY29wZXMoKS5maWx0ZXIoc2NvcGUgPT4gc2NvcGUgIT09ICcnKTtcclxuICAgICAgICBpZiAoc2NvcGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgcGFyYW1zLnNjb3BlcyA9IHNjb3Blcy5qb2luKCcsJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGF1dGgudGVuYW50SWQpIHtcclxuICAgICAgICBwYXJhbXMudGlkID0gYXV0aC50ZW5hbnRJZDtcclxuICAgIH1cclxuICAgIC8vIFRPRE86IG1heWJlIHNldCBlaWQgYXMgZW5kaXBvaW50SWRcclxuICAgIC8vIFRPRE86IG1heWJlIHNldCBmdyBhcyBGcmFtZXdvcmtzLmpvaW4oXCIsXCIpXHJcbiAgICBjb25zdCBwYXJhbXNEaWN0ID0gcGFyYW1zO1xyXG4gICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMocGFyYW1zRGljdCkpIHtcclxuICAgICAgICBpZiAocGFyYW1zRGljdFtrZXldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgZGVsZXRlIHBhcmFtc0RpY3Rba2V5XTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYCR7Z2V0SGFuZGxlckJhc2UoYXV0aCl9PyR7cXVlcnlzdHJpbmcocGFyYW1zRGljdCkuc2xpY2UoMSl9YDtcclxufVxyXG5mdW5jdGlvbiBnZXRIYW5kbGVyQmFzZSh7IGNvbmZpZyB9KSB7XHJcbiAgICBpZiAoIWNvbmZpZy5lbXVsYXRvcikge1xyXG4gICAgICAgIHJldHVybiBgaHR0cHM6Ly8ke2NvbmZpZy5hdXRoRG9tYWlufS8ke1dJREdFVF9QQVRIfWA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX2VtdWxhdG9yVXJsKGNvbmZpZywgRU1VTEFUT1JfV0lER0VUX1BBVEgpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaGUgc3BlY2lhbCB3ZWIgc3RvcmFnZSBldmVudFxyXG4gKlxyXG4gKi9cclxuY29uc3QgV0VCX1NUT1JBR0VfU1VQUE9SVF9LRVkgPSAnd2ViU3RvcmFnZVN1cHBvcnQnO1xyXG5jbGFzcyBCcm93c2VyUG9wdXBSZWRpcmVjdFJlc29sdmVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VycyA9IHt9O1xyXG4gICAgICAgIHRoaXMuaWZyYW1lcyA9IHt9O1xyXG4gICAgICAgIHRoaXMub3JpZ2luVmFsaWRhdGlvblByb21pc2VzID0ge307XHJcbiAgICAgICAgdGhpcy5fcmVkaXJlY3RQZXJzaXN0ZW5jZSA9IGJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2U7XHJcbiAgICAgICAgdGhpcy5fY29tcGxldGVSZWRpcmVjdEZuID0gX2dldFJlZGlyZWN0UmVzdWx0O1xyXG4gICAgfVxyXG4gICAgLy8gV3JhcHBpbmcgaW4gYXN5bmMgZXZlbiB0aG91Z2ggd2UgZG9uJ3QgYXdhaXQgYW55d2hlcmUgaW4gb3JkZXJcclxuICAgIC8vIHRvIG1ha2Ugc3VyZSBlcnJvcnMgYXJlIHJhaXNlZCBhcyBwcm9taXNlIHJlamVjdGlvbnNcclxuICAgIGFzeW5jIF9vcGVuUG9wdXAoYXV0aCwgcHJvdmlkZXIsIGF1dGhUeXBlLCBldmVudElkKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGRlYnVnQXNzZXJ0KChfYSA9IHRoaXMuZXZlbnRNYW5hZ2Vyc1thdXRoLl9rZXkoKV0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tYW5hZ2VyLCAnX2luaXRpYWxpemUoKSBub3QgY2FsbGVkIGJlZm9yZSBfb3BlblBvcHVwKCknKTtcclxuICAgICAgICBjb25zdCB1cmwgPSBfZ2V0UmVkaXJlY3RVcmwoYXV0aCwgcHJvdmlkZXIsIGF1dGhUeXBlLCBfZ2V0Q3VycmVudFVybCgpLCBldmVudElkKTtcclxuICAgICAgICByZXR1cm4gX29wZW4oYXV0aCwgdXJsLCBfZ2VuZXJhdGVFdmVudElkKCkpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX29wZW5SZWRpcmVjdChhdXRoLCBwcm92aWRlciwgYXV0aFR5cGUsIGV2ZW50SWQpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLl9vcmlnaW5WYWxpZGF0aW9uKGF1dGgpO1xyXG4gICAgICAgIF9zZXRXaW5kb3dMb2NhdGlvbihfZ2V0UmVkaXJlY3RVcmwoYXV0aCwgcHJvdmlkZXIsIGF1dGhUeXBlLCBfZ2V0Q3VycmVudFVybCgpLCBldmVudElkKSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCgpID0+IHsgfSk7XHJcbiAgICB9XHJcbiAgICBfaW5pdGlhbGl6ZShhdXRoKSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gYXV0aC5fa2V5KCk7XHJcbiAgICAgICAgaWYgKHRoaXMuZXZlbnRNYW5hZ2Vyc1trZXldKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgbWFuYWdlciwgcHJvbWlzZSB9ID0gdGhpcy5ldmVudE1hbmFnZXJzW2tleV07XHJcbiAgICAgICAgICAgIGlmIChtYW5hZ2VyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG1hbmFnZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZGVidWdBc3NlcnQocHJvbWlzZSwgJ0lmIG1hbmFnZXIgaXMgbm90IHNldCwgcHJvbWlzZSBzaG91bGQgYmUnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLmluaXRBbmRHZXRNYW5hZ2VyKGF1dGgpO1xyXG4gICAgICAgIHRoaXMuZXZlbnRNYW5hZ2Vyc1trZXldID0geyBwcm9taXNlIH07XHJcbiAgICAgICAgLy8gSWYgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQsIHRoZSBrZXkgc2hvdWxkIGJlIHJlbW92ZWQgc28gdGhhdCB0aGVcclxuICAgICAgICAvLyBvcGVyYXRpb24gY2FuIGJlIHJldHJpZWQgbGF0ZXIuXHJcbiAgICAgICAgcHJvbWlzZS5jYXRjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmV2ZW50TWFuYWdlcnNba2V5XTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgIH1cclxuICAgIGFzeW5jIGluaXRBbmRHZXRNYW5hZ2VyKGF1dGgpIHtcclxuICAgICAgICBjb25zdCBpZnJhbWUgPSBhd2FpdCBfb3BlbklmcmFtZShhdXRoKTtcclxuICAgICAgICBjb25zdCBtYW5hZ2VyID0gbmV3IEF1dGhFdmVudE1hbmFnZXIoYXV0aCk7XHJcbiAgICAgICAgaWZyYW1lLnJlZ2lzdGVyKCdhdXRoRXZlbnQnLCAoaWZyYW1lRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgX2Fzc2VydChpZnJhbWVFdmVudCA9PT0gbnVsbCB8fCBpZnJhbWVFdmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogaWZyYW1lRXZlbnQuYXV0aEV2ZW50LCBhdXRoLCBcImludmFsaWQtYXV0aC1ldmVudFwiIC8qIElOVkFMSURfQVVUSF9FVkVOVCAqLyk7XHJcbiAgICAgICAgICAgIC8vIFRPRE86IENvbnNpZGVyIHNwbGl0dGluZyByZWRpcmVjdCBhbmQgcG9wdXAgZXZlbnRzIGVhcmxpZXIgb25cclxuICAgICAgICAgICAgY29uc3QgaGFuZGxlZCA9IG1hbmFnZXIub25FdmVudChpZnJhbWVFdmVudC5hdXRoRXZlbnQpO1xyXG4gICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IGhhbmRsZWQgPyBcIkFDS1wiIC8qIEFDSyAqLyA6IFwiRVJST1JcIiAvKiBFUlJPUiAqLyB9O1xyXG4gICAgICAgIH0sIGdhcGkuaWZyYW1lcy5DUk9TU19PUklHSU5fSUZSQU1FU19GSUxURVIpO1xyXG4gICAgICAgIHRoaXMuZXZlbnRNYW5hZ2Vyc1thdXRoLl9rZXkoKV0gPSB7IG1hbmFnZXIgfTtcclxuICAgICAgICB0aGlzLmlmcmFtZXNbYXV0aC5fa2V5KCldID0gaWZyYW1lO1xyXG4gICAgICAgIHJldHVybiBtYW5hZ2VyO1xyXG4gICAgfVxyXG4gICAgX2lzSWZyYW1lV2ViU3RvcmFnZVN1cHBvcnRlZChhdXRoLCBjYikge1xyXG4gICAgICAgIGNvbnN0IGlmcmFtZSA9IHRoaXMuaWZyYW1lc1thdXRoLl9rZXkoKV07XHJcbiAgICAgICAgaWZyYW1lLnNlbmQoV0VCX1NUT1JBR0VfU1VQUE9SVF9LRVksIHsgdHlwZTogV0VCX1NUT1JBR0VfU1VQUE9SVF9LRVkgfSwgcmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICBjb25zdCBpc1N1cHBvcnRlZCA9IChfYSA9IHJlc3VsdCA9PT0gbnVsbCB8fCByZXN1bHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlc3VsdFswXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hW1dFQl9TVE9SQUdFX1NVUFBPUlRfS0VZXTtcclxuICAgICAgICAgICAgaWYgKGlzU3VwcG9ydGVkICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGNiKCEhaXNTdXBwb3J0ZWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF9mYWlsKGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgfSwgZ2FwaS5pZnJhbWVzLkNST1NTX09SSUdJTl9JRlJBTUVTX0ZJTFRFUik7XHJcbiAgICB9XHJcbiAgICBfb3JpZ2luVmFsaWRhdGlvbihhdXRoKSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gYXV0aC5fa2V5KCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLm9yaWdpblZhbGlkYXRpb25Qcm9taXNlc1trZXldKSB7XHJcbiAgICAgICAgICAgIHRoaXMub3JpZ2luVmFsaWRhdGlvblByb21pc2VzW2tleV0gPSBfdmFsaWRhdGVPcmlnaW4oYXV0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLm9yaWdpblZhbGlkYXRpb25Qcm9taXNlc1trZXldO1xyXG4gICAgfVxyXG4gICAgZ2V0IF9zaG91bGRJbml0UHJvYWN0aXZlbHkoKSB7XHJcbiAgICAgICAgLy8gTW9iaWxlIGJyb3dzZXJzIGFuZCBTYWZhcmkgbmVlZCB0byBvcHRpbWlzdGljYWxseSBpbml0aWFsaXplXHJcbiAgICAgICAgcmV0dXJuIF9pc01vYmlsZUJyb3dzZXIoKSB8fCBfaXNTYWZhcmkoKSB8fCBfaXNJT1MoKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQW4gaW1wbGVtZW50YXRpb24gb2Yge0BsaW5rIFBvcHVwUmVkaXJlY3RSZXNvbHZlcn0gc3VpdGFibGUgZm9yIGJyb3dzZXJcclxuICogYmFzZWQgYXBwbGljYXRpb25zLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBicm93c2VyUG9wdXBSZWRpcmVjdFJlc29sdmVyID0gQnJvd3NlclBvcHVwUmVkaXJlY3RSZXNvbHZlcjtcblxuY2xhc3MgTXVsdGlGYWN0b3JBc3NlcnRpb25JbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGZhY3RvcklkKSB7XHJcbiAgICAgICAgdGhpcy5mYWN0b3JJZCA9IGZhY3RvcklkO1xyXG4gICAgfVxyXG4gICAgX3Byb2Nlc3MoYXV0aCwgc2Vzc2lvbiwgZGlzcGxheU5hbWUpIHtcclxuICAgICAgICBzd2l0Y2ggKHNlc3Npb24udHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiZW5yb2xsXCIgLyogRU5ST0xMICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ZpbmFsaXplRW5yb2xsKGF1dGgsIHNlc3Npb24uY3JlZGVudGlhbCwgZGlzcGxheU5hbWUpO1xyXG4gICAgICAgICAgICBjYXNlIFwic2lnbmluXCIgLyogU0lHTl9JTiAqLzpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9maW5hbGl6ZVNpZ25JbihhdXRoLCBzZXNzaW9uLmNyZWRlbnRpYWwpO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlYnVnRmFpbCgndW5leHBlY3RlZCBNdWx0aUZhY3RvclNlc3Npb25UeXBlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiB7QGluaGVyaXRkb2MgUGhvbmVNdWx0aUZhY3RvckFzc2VydGlvbn1cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgUGhvbmVNdWx0aUZhY3RvckFzc2VydGlvbkltcGwgZXh0ZW5kcyBNdWx0aUZhY3RvckFzc2VydGlvbkltcGwge1xyXG4gICAgY29uc3RydWN0b3IoY3JlZGVudGlhbCkge1xyXG4gICAgICAgIHN1cGVyKFwicGhvbmVcIiAvKiBQSE9ORSAqLyk7XHJcbiAgICAgICAgdGhpcy5jcmVkZW50aWFsID0gY3JlZGVudGlhbDtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIHN0YXRpYyBfZnJvbUNyZWRlbnRpYWwoY3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUGhvbmVNdWx0aUZhY3RvckFzc2VydGlvbkltcGwoY3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZmluYWxpemVFbnJvbGwoYXV0aCwgaWRUb2tlbiwgZGlzcGxheU5hbWUpIHtcclxuICAgICAgICByZXR1cm4gZmluYWxpemVFbnJvbGxQaG9uZU1mYShhdXRoLCB7XHJcbiAgICAgICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICBwaG9uZVZlcmlmaWNhdGlvbkluZm86IHRoaXMuY3JlZGVudGlhbC5fbWFrZVZlcmlmaWNhdGlvblJlcXVlc3QoKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2ZpbmFsaXplU2lnbkluKGF1dGgsIG1mYVBlbmRpbmdDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIGZpbmFsaXplU2lnbkluUGhvbmVNZmEoYXV0aCwge1xyXG4gICAgICAgICAgICBtZmFQZW5kaW5nQ3JlZGVudGlhbCxcclxuICAgICAgICAgICAgcGhvbmVWZXJpZmljYXRpb25JbmZvOiB0aGlzLmNyZWRlbnRpYWwuX21ha2VWZXJpZmljYXRpb25SZXF1ZXN0KClcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGdlbmVyYXRpbmcgYSB7QGxpbmsgUGhvbmVNdWx0aUZhY3RvckFzc2VydGlvbn0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIFBob25lTXVsdGlGYWN0b3JHZW5lcmF0b3Ige1xyXG4gICAgY29uc3RydWN0b3IoKSB7IH1cclxuICAgIC8qKlxyXG4gICAgICogUHJvdmlkZXMgYSB7QGxpbmsgUGhvbmVNdWx0aUZhY3RvckFzc2VydGlvbn0gdG8gY29uZmlybSBvd25lcnNoaXAgb2YgdGhlIHBob25lIHNlY29uZCBmYWN0b3IuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBob25lQXV0aENyZWRlbnRpYWwgLSBBIGNyZWRlbnRpYWwgcHJvdmlkZWQgYnkge0BsaW5rIFBob25lQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWx9LlxyXG4gICAgICogQHJldHVybnMgQSB7QGxpbmsgUGhvbmVNdWx0aUZhY3RvckFzc2VydGlvbn0gd2hpY2ggY2FuIGJlIHVzZWQgd2l0aFxyXG4gICAgICoge0BsaW5rIE11bHRpRmFjdG9yUmVzb2x2ZXIucmVzb2x2ZVNpZ25Jbn1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFzc2VydGlvbihjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIFBob25lTXVsdGlGYWN0b3JBc3NlcnRpb25JbXBsLl9mcm9tQ3JlZGVudGlhbChjcmVkZW50aWFsKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogVGhlIGlkZW50aWZpZXIgb2YgdGhlIHBob25lIHNlY29uZCBmYWN0b3I6IGBwaG9uZWAuXHJcbiAqL1xyXG5QaG9uZU11bHRpRmFjdG9yR2VuZXJhdG9yLkZBQ1RPUl9JRCA9ICdwaG9uZSc7XG5cbnZhciBuYW1lID0gXCJAZmlyZWJhc2UvYXV0aFwiO1xudmFyIHZlcnNpb24gPSBcIjAuMTkuNFwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBBdXRoSW50ZXJvcCB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoKSB7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gYXV0aDtcclxuICAgICAgICB0aGlzLmludGVybmFsTGlzdGVuZXJzID0gbmV3IE1hcCgpO1xyXG4gICAgfVxyXG4gICAgZ2V0VWlkKCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICB0aGlzLmFzc2VydEF1dGhDb25maWd1cmVkKCk7XHJcbiAgICAgICAgcmV0dXJuICgoX2EgPSB0aGlzLmF1dGguY3VycmVudFVzZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS51aWQpIHx8IG51bGw7XHJcbiAgICB9XHJcbiAgICBhc3luYyBnZXRUb2tlbihmb3JjZVJlZnJlc2gpIHtcclxuICAgICAgICB0aGlzLmFzc2VydEF1dGhDb25maWd1cmVkKCk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5hdXRoLl9pbml0aWFsaXphdGlvblByb21pc2U7XHJcbiAgICAgICAgaWYgKCF0aGlzLmF1dGguY3VycmVudFVzZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gYXdhaXQgdGhpcy5hdXRoLmN1cnJlbnRVc2VyLmdldElkVG9rZW4oZm9yY2VSZWZyZXNoKTtcclxuICAgICAgICByZXR1cm4geyBhY2Nlc3NUb2tlbiB9O1xyXG4gICAgfVxyXG4gICAgYWRkQXV0aFRva2VuTGlzdGVuZXIobGlzdGVuZXIpIHtcclxuICAgICAgICB0aGlzLmFzc2VydEF1dGhDb25maWd1cmVkKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuaW50ZXJuYWxMaXN0ZW5lcnMuaGFzKGxpc3RlbmVyKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gdGhpcy5hdXRoLm9uSWRUb2tlbkNoYW5nZWQodXNlciA9PiB7XHJcbiAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgbGlzdGVuZXIoKChfYSA9IHVzZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zdHNUb2tlbk1hbmFnZXIuYWNjZXNzVG9rZW4pIHx8IG51bGwpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuaW50ZXJuYWxMaXN0ZW5lcnMuc2V0KGxpc3RlbmVyLCB1bnN1YnNjcmliZSk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVQcm9hY3RpdmVSZWZyZXNoKCk7XHJcbiAgICB9XHJcbiAgICByZW1vdmVBdXRoVG9rZW5MaXN0ZW5lcihsaXN0ZW5lcikge1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0QXV0aENvbmZpZ3VyZWQoKTtcclxuICAgICAgICBjb25zdCB1bnN1YnNjcmliZSA9IHRoaXMuaW50ZXJuYWxMaXN0ZW5lcnMuZ2V0KGxpc3RlbmVyKTtcclxuICAgICAgICBpZiAoIXVuc3Vic2NyaWJlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbnRlcm5hbExpc3RlbmVycy5kZWxldGUobGlzdGVuZXIpO1xyXG4gICAgICAgIHVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVQcm9hY3RpdmVSZWZyZXNoKCk7XHJcbiAgICB9XHJcbiAgICBhc3NlcnRBdXRoQ29uZmlndXJlZCgpIHtcclxuICAgICAgICBfYXNzZXJ0KHRoaXMuYXV0aC5faW5pdGlhbGl6YXRpb25Qcm9taXNlLCBcImRlcGVuZGVudC1zZGstaW5pdGlhbGl6ZWQtYmVmb3JlLWF1dGhcIiAvKiBERVBFTkRFTlRfU0RLX0lOSVRfQkVGT1JFX0FVVEggKi8pO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlUHJvYWN0aXZlUmVmcmVzaCgpIHtcclxuICAgICAgICBpZiAodGhpcy5pbnRlcm5hbExpc3RlbmVycy5zaXplID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmF1dGguX3N0YXJ0UHJvYWN0aXZlUmVmcmVzaCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5hdXRoLl9zdG9wUHJvYWN0aXZlUmVmcmVzaCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRWZXJzaW9uRm9yUGxhdGZvcm0oY2xpZW50UGxhdGZvcm0pIHtcclxuICAgIHN3aXRjaCAoY2xpZW50UGxhdGZvcm0pIHtcclxuICAgICAgICBjYXNlIFwiTm9kZVwiIC8qIE5PREUgKi86XHJcbiAgICAgICAgICAgIHJldHVybiAnbm9kZSc7XHJcbiAgICAgICAgY2FzZSBcIlJlYWN0TmF0aXZlXCIgLyogUkVBQ1RfTkFUSVZFICovOlxyXG4gICAgICAgICAgICByZXR1cm4gJ3JuJztcclxuICAgICAgICBjYXNlIFwiV29ya2VyXCIgLyogV09SS0VSICovOlxyXG4gICAgICAgICAgICByZXR1cm4gJ3dlYndvcmtlcic7XHJcbiAgICAgICAgY2FzZSBcIkNvcmRvdmFcIiAvKiBDT1JET1ZBICovOlxyXG4gICAgICAgICAgICByZXR1cm4gJ2NvcmRvdmEnO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbn1cclxuLyoqIEBpbnRlcm5hbCAqL1xyXG5mdW5jdGlvbiByZWdpc3RlckF1dGgoY2xpZW50UGxhdGZvcm0pIHtcclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KFwiYXV0aFwiIC8qIEFVVEggKi8sIChjb250YWluZXIsIHsgb3B0aW9uczogZGVwcyB9KSA9PiB7XHJcbiAgICAgICAgY29uc3QgYXBwID0gY29udGFpbmVyLmdldFByb3ZpZGVyKCdhcHAnKS5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICBjb25zdCB7IGFwaUtleSwgYXV0aERvbWFpbiB9ID0gYXBwLm9wdGlvbnM7XHJcbiAgICAgICAgcmV0dXJuIChhcHAgPT4ge1xyXG4gICAgICAgICAgICBfYXNzZXJ0KGFwaUtleSAmJiAhYXBpS2V5LmluY2x1ZGVzKCc6JyksIFwiaW52YWxpZC1hcGkta2V5XCIgLyogSU5WQUxJRF9BUElfS0VZICovLCB7IGFwcE5hbWU6IGFwcC5uYW1lIH0pO1xyXG4gICAgICAgICAgICAvLyBBdXRoIGRvbWFpbiBpcyBvcHRpb25hbCBpZiBJZFAgc2lnbiBpbiBpc24ndCBiZWluZyB1c2VkXHJcbiAgICAgICAgICAgIF9hc3NlcnQoIShhdXRoRG9tYWluID09PSBudWxsIHx8IGF1dGhEb21haW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGF1dGhEb21haW4uaW5jbHVkZXMoJzonKSksIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLywge1xyXG4gICAgICAgICAgICAgICAgYXBwTmFtZTogYXBwLm5hbWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IHtcclxuICAgICAgICAgICAgICAgIGFwaUtleSxcclxuICAgICAgICAgICAgICAgIGF1dGhEb21haW4sXHJcbiAgICAgICAgICAgICAgICBjbGllbnRQbGF0Zm9ybSxcclxuICAgICAgICAgICAgICAgIGFwaUhvc3Q6IFwiaWRlbnRpdHl0b29sa2l0Lmdvb2dsZWFwaXMuY29tXCIgLyogQVBJX0hPU1QgKi8sXHJcbiAgICAgICAgICAgICAgICB0b2tlbkFwaUhvc3Q6IFwic2VjdXJldG9rZW4uZ29vZ2xlYXBpcy5jb21cIiAvKiBUT0tFTl9BUElfSE9TVCAqLyxcclxuICAgICAgICAgICAgICAgIGFwaVNjaGVtZTogXCJodHRwc1wiIC8qIEFQSV9TQ0hFTUUgKi8sXHJcbiAgICAgICAgICAgICAgICBzZGtDbGllbnRWZXJzaW9uOiBfZ2V0Q2xpZW50VmVyc2lvbihjbGllbnRQbGF0Zm9ybSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY29uc3QgYXV0aEluc3RhbmNlID0gbmV3IEF1dGhJbXBsKGFwcCwgY29uZmlnKTtcclxuICAgICAgICAgICAgX2luaXRpYWxpemVBdXRoSW5zdGFuY2UoYXV0aEluc3RhbmNlLCBkZXBzKTtcclxuICAgICAgICAgICAgcmV0dXJuIGF1dGhJbnN0YW5jZTtcclxuICAgICAgICB9KShhcHApO1xyXG4gICAgfSwgXCJQVUJMSUNcIiAvKiBQVUJMSUMgKi8pXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQXV0aCBjYW4gb25seSBiZSBpbml0aWFsaXplZCBieSBleHBsaWNpdGx5IGNhbGxpbmcgZ2V0QXV0aCgpIG9yIGluaXRpYWxpemVBdXRoKClcclxuICAgICAgICAgKiBGb3Igd2h5IHdlIGRvIHRoaXMsIFNlZSBnby9maXJlYmFzZS1uZXh0LWF1dGgtaW5pdFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIC5zZXRJbnN0YW50aWF0aW9uTW9kZShcIkVYUExJQ0lUXCIgLyogRVhQTElDSVQgKi8pXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQmVjYXVzZSBhbGwgZmlyZWJhc2UgcHJvZHVjdHMgdGhhdCBkZXBlbmQgb24gYXV0aCBkZXBlbmQgb24gYXV0aC1pbnRlcm5hbCBkaXJlY3RseSxcclxuICAgICAgICAgKiB3ZSBuZWVkIHRvIGluaXRpYWxpemUgYXV0aC1pbnRlcm5hbCBhZnRlciBhdXRoIGlzIGluaXRpYWxpemVkIHRvIG1ha2UgaXQgYXZhaWxhYmxlIHRvIG90aGVyIGZpcmViYXNlIHByb2R1Y3RzLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIC5zZXRJbnN0YW5jZUNyZWF0ZWRDYWxsYmFjaygoY29udGFpbmVyLCBfaW5zdGFuY2VJZGVudGlmaWVyLCBfaW5zdGFuY2UpID0+IHtcclxuICAgICAgICBjb25zdCBhdXRoSW50ZXJuYWxQcm92aWRlciA9IGNvbnRhaW5lci5nZXRQcm92aWRlcihcImF1dGgtaW50ZXJuYWxcIiAvKiBBVVRIX0lOVEVSTkFMICovKTtcclxuICAgICAgICBhdXRoSW50ZXJuYWxQcm92aWRlci5pbml0aWFsaXplKCk7XHJcbiAgICB9KSk7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChcImF1dGgtaW50ZXJuYWxcIiAvKiBBVVRIX0lOVEVSTkFMICovLCBjb250YWluZXIgPT4ge1xyXG4gICAgICAgIGNvbnN0IGF1dGggPSBfY2FzdEF1dGgoY29udGFpbmVyLmdldFByb3ZpZGVyKFwiYXV0aFwiIC8qIEFVVEggKi8pLmdldEltbWVkaWF0ZSgpKTtcclxuICAgICAgICByZXR1cm4gKGF1dGggPT4gbmV3IEF1dGhJbnRlcm9wKGF1dGgpKShhdXRoKTtcclxuICAgIH0sIFwiUFJJVkFURVwiIC8qIFBSSVZBVEUgKi8pLnNldEluc3RhbnRpYXRpb25Nb2RlKFwiRVhQTElDSVRcIiAvKiBFWFBMSUNJVCAqLykpO1xyXG4gICAgcmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24sIGdldFZlcnNpb25Gb3JQbGF0Zm9ybShjbGllbnRQbGF0Zm9ybSkpO1xyXG4gICAgLy8gQlVJTERfVEFSR0VUIHdpbGwgYmUgcmVwbGFjZWQgYnkgdmFsdWVzIGxpa2UgZXNtNSwgZXNtMjAxNywgY2pzNSwgZXRjIGR1cmluZyB0aGUgY29tcGlsYXRpb25cclxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uLCAnZXNtMjAxNycpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSBBdXRoIGluc3RhbmNlIGFzc29jaWF0ZWQgd2l0aCB0aGUgcHJvdmlkZWQge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9LlxyXG4gKiBJZiBubyBpbnN0YW5jZSBleGlzdHMsIGluaXRpYWxpemVzIGFuIEF1dGggaW5zdGFuY2Ugd2l0aCBwbGF0Zm9ybS1zcGVjaWZpYyBkZWZhdWx0IGRlcGVuZGVuY2llcy5cclxuICpcclxuICogQHBhcmFtIGFwcCAtIFRoZSBGaXJlYmFzZSBBcHAuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGdldEF1dGgoYXBwID0gZ2V0QXBwKCkpIHtcclxuICAgIGNvbnN0IHByb3ZpZGVyID0gX2dldFByb3ZpZGVyKGFwcCwgJ2F1dGgnKTtcclxuICAgIGlmIChwcm92aWRlci5pc0luaXRpYWxpemVkKCkpIHtcclxuICAgICAgICByZXR1cm4gcHJvdmlkZXIuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaW5pdGlhbGl6ZUF1dGgoYXBwLCB7XHJcbiAgICAgICAgcG9wdXBSZWRpcmVjdFJlc29sdmVyOiBicm93c2VyUG9wdXBSZWRpcmVjdFJlc29sdmVyLFxyXG4gICAgICAgIHBlcnNpc3RlbmNlOiBbXHJcbiAgICAgICAgICAgIGluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2UsXHJcbiAgICAgICAgICAgIGJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlLFxyXG4gICAgICAgICAgICBicm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlXHJcbiAgICAgICAgXVxyXG4gICAgfSk7XHJcbn1cclxucmVnaXN0ZXJBdXRoKFwiQnJvd3NlclwiIC8qIEJST1dTRVIgKi8pO1xuXG5leHBvcnQgeyBzZW5kUGFzc3dvcmRSZXNldEVtYWlsIGFzICQsIEFjdGlvbkNvZGVPcGVyYXRpb24gYXMgQSwgcHJvZEVycm9yTWFwIGFzIEIsIEFVVEhfRVJST1JfQ09ERVNfTUFQX0RPX05PVF9VU0VfSU5URVJOQUxMWSBhcyBDLCBpbml0aWFsaXplQXV0aCBhcyBELCBjb25uZWN0QXV0aEVtdWxhdG9yIGFzIEUsIEZhY3RvcklkIGFzIEYsIEF1dGhDcmVkZW50aWFsIGFzIEcsIEVtYWlsQXV0aENyZWRlbnRpYWwgYXMgSCwgT0F1dGhDcmVkZW50aWFsIGFzIEksIFBob25lQXV0aENyZWRlbnRpYWwgYXMgSiwgaW5NZW1vcnlQZXJzaXN0ZW5jZSBhcyBLLCBFbWFpbEF1dGhQcm92aWRlciBhcyBMLCBGYWNlYm9va0F1dGhQcm92aWRlciBhcyBNLCBHb29nbGVBdXRoUHJvdmlkZXIgYXMgTiwgT3BlcmF0aW9uVHlwZSBhcyBPLCBQaG9uZUF1dGhQcm92aWRlciBhcyBQLCBHaXRodWJBdXRoUHJvdmlkZXIgYXMgUSwgUmVjYXB0Y2hhVmVyaWZpZXIgYXMgUiwgU2lnbkluTWV0aG9kIGFzIFMsIE9BdXRoUHJvdmlkZXIgYXMgVCwgU0FNTEF1dGhQcm92aWRlciBhcyBVLCBUd2l0dGVyQXV0aFByb3ZpZGVyIGFzIFYsIHNpZ25JbkFub255bW91c2x5IGFzIFcsIHNpZ25JbldpdGhDcmVkZW50aWFsIGFzIFgsIGxpbmtXaXRoQ3JlZGVudGlhbCBhcyBZLCByZWF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFsIGFzIFosIHNpZ25JbldpdGhDdXN0b21Ub2tlbiBhcyBfLCBicm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlIGFzIGEsIGNvbmZpcm1QYXNzd29yZFJlc2V0IGFzIGEwLCBhcHBseUFjdGlvbkNvZGUgYXMgYTEsIGNoZWNrQWN0aW9uQ29kZSBhcyBhMiwgdmVyaWZ5UGFzc3dvcmRSZXNldENvZGUgYXMgYTMsIGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCBhcyBhNCwgc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQgYXMgYTUsIHNlbmRTaWduSW5MaW5rVG9FbWFpbCBhcyBhNiwgaXNTaWduSW5XaXRoRW1haWxMaW5rIGFzIGE3LCBzaWduSW5XaXRoRW1haWxMaW5rIGFzIGE4LCBmZXRjaFNpZ25Jbk1ldGhvZHNGb3JFbWFpbCBhcyBhOSwgX2dldFJlZGlyZWN0UmVzdWx0IGFzIGFBLCBfY2xlYXJSZWRpcmVjdE91dGNvbWVzIGFzIGFCLCBfY2FzdEF1dGggYXMgYUMsIFVzZXJJbXBsIGFzIGFELCBBdXRoSW1wbCBhcyBhRSwgX2dldENsaWVudFZlcnNpb24gYXMgYUYsIF9nZW5lcmF0ZUV2ZW50SWQgYXMgYUcsIEF1dGhQb3B1cCBhcyBhSCwgRmV0Y2hQcm92aWRlciBhcyBhSSwgU0FNTEF1dGhDcmVkZW50aWFsIGFzIGFKLCBzZW5kRW1haWxWZXJpZmljYXRpb24gYXMgYWEsIHZlcmlmeUJlZm9yZVVwZGF0ZUVtYWlsIGFzIGFiLCBBY3Rpb25Db2RlVVJMIGFzIGFjLCBwYXJzZUFjdGlvbkNvZGVVUkwgYXMgYWQsIHVwZGF0ZVByb2ZpbGUgYXMgYWUsIHVwZGF0ZUVtYWlsIGFzIGFmLCB1cGRhdGVQYXNzd29yZCBhcyBhZywgZ2V0SWRUb2tlbiBhcyBhaCwgZ2V0SWRUb2tlblJlc3VsdCBhcyBhaSwgdW5saW5rIGFzIGFqLCBnZXRBZGRpdGlvbmFsVXNlckluZm8gYXMgYWssIHJlbG9hZCBhcyBhbCwgZ2V0TXVsdGlGYWN0b3JSZXNvbHZlciBhcyBhbSwgbXVsdGlGYWN0b3IgYXMgYW4sIF9pc0lPUzdPcjggYXMgYW8sIGRlYnVnQXNzZXJ0IGFzIGFwLCBfaXNJT1MgYXMgYXEsIF9pc0FuZHJvaWQgYXMgYXIsIF9mYWlsIGFzIGFzLCBfZ2V0UmVkaXJlY3RVcmwgYXMgYXQsIF9nZXRQcm9qZWN0Q29uZmlnIGFzIGF1LCBfY3JlYXRlRXJyb3IgYXMgYXYsIF9hc3NlcnQgYXMgYXcsIF9nZXRJbnN0YW5jZSBhcyBheCwgX3BlcnNpc3RlbmNlS2V5TmFtZSBhcyBheSwgQXV0aEV2ZW50TWFuYWdlciBhcyBheiwgYnJvd3NlckxvY2FsUGVyc2lzdGVuY2UgYXMgYiwgc2lnbkluV2l0aFBvcHVwIGFzIGMsIGxpbmtXaXRoUG9wdXAgYXMgZCwgcmVhdXRoZW50aWNhdGVXaXRoUG9wdXAgYXMgZSwgc2lnbkluV2l0aFJlZGlyZWN0IGFzIGYsIGxpbmtXaXRoUmVkaXJlY3QgYXMgZywgcmVhdXRoZW50aWNhdGVXaXRoUmVkaXJlY3QgYXMgaCwgaW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZSBhcyBpLCBnZXRSZWRpcmVjdFJlc3VsdCBhcyBqLCBicm93c2VyUG9wdXBSZWRpcmVjdFJlc29sdmVyIGFzIGssIGxpbmtXaXRoUGhvbmVOdW1iZXIgYXMgbCwgUGhvbmVNdWx0aUZhY3RvckdlbmVyYXRvciBhcyBtLCBnZXRBdXRoIGFzIG4sIFByb3ZpZGVySWQgYXMgbywgc2V0UGVyc2lzdGVuY2UgYXMgcCwgb25JZFRva2VuQ2hhbmdlZCBhcyBxLCByZWF1dGhlbnRpY2F0ZVdpdGhQaG9uZU51bWJlciBhcyByLCBzaWduSW5XaXRoUGhvbmVOdW1iZXIgYXMgcywgb25BdXRoU3RhdGVDaGFuZ2VkIGFzIHQsIHVwZGF0ZVBob25lTnVtYmVyIGFzIHUsIHVzZURldmljZUxhbmd1YWdlIGFzIHYsIHVwZGF0ZUN1cnJlbnRVc2VyIGFzIHcsIHNpZ25PdXQgYXMgeCwgZGVsZXRlVXNlciBhcyB5LCBkZWJ1Z0Vycm9yTWFwIGFzIHogfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LTgzOWRlNTEwLmpzLm1hcFxuIiwiaW1wb3J0IHsgYW8gYXMgX2lzSU9TN09yOCwgYXAgYXMgZGVidWdBc3NlcnQsIGFxIGFzIF9pc0lPUywgYXIgYXMgX2lzQW5kcm9pZCwgYXMgYXMgX2ZhaWwsIGF0IGFzIF9nZXRSZWRpcmVjdFVybCwgYXUgYXMgX2dldFByb2plY3RDb25maWcsIGF2IGFzIF9jcmVhdGVFcnJvciwgYXcgYXMgX2Fzc2VydCwgYXggYXMgX2dldEluc3RhbmNlLCBiIGFzIGJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlLCBheSBhcyBfcGVyc2lzdGVuY2VLZXlOYW1lLCBheiBhcyBBdXRoRXZlbnRNYW5hZ2VyLCBhIGFzIGJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UsIGFBIGFzIF9nZXRSZWRpcmVjdFJlc3VsdCwgYUIgYXMgX2NsZWFyUmVkaXJlY3RPdXRjb21lcywgYUMgYXMgX2Nhc3RBdXRoIH0gZnJvbSAnLi9pbmRleC04MzlkZTUxMC5qcyc7XG5leHBvcnQgeyBBIGFzIEFjdGlvbkNvZGVPcGVyYXRpb24sIGFjIGFzIEFjdGlvbkNvZGVVUkwsIEcgYXMgQXV0aENyZWRlbnRpYWwsIEMgYXMgQXV0aEVycm9yQ29kZXMsIGFFIGFzIEF1dGhJbXBsLCBhSCBhcyBBdXRoUG9wdXAsIEggYXMgRW1haWxBdXRoQ3JlZGVudGlhbCwgTCBhcyBFbWFpbEF1dGhQcm92aWRlciwgTSBhcyBGYWNlYm9va0F1dGhQcm92aWRlciwgRiBhcyBGYWN0b3JJZCwgYUkgYXMgRmV0Y2hQcm92aWRlciwgUSBhcyBHaXRodWJBdXRoUHJvdmlkZXIsIE4gYXMgR29vZ2xlQXV0aFByb3ZpZGVyLCBJIGFzIE9BdXRoQ3JlZGVudGlhbCwgVCBhcyBPQXV0aFByb3ZpZGVyLCBPIGFzIE9wZXJhdGlvblR5cGUsIEogYXMgUGhvbmVBdXRoQ3JlZGVudGlhbCwgUCBhcyBQaG9uZUF1dGhQcm92aWRlciwgbSBhcyBQaG9uZU11bHRpRmFjdG9yR2VuZXJhdG9yLCBvIGFzIFByb3ZpZGVySWQsIFIgYXMgUmVjYXB0Y2hhVmVyaWZpZXIsIGFKIGFzIFNBTUxBdXRoQ3JlZGVudGlhbCwgVSBhcyBTQU1MQXV0aFByb3ZpZGVyLCBTIGFzIFNpZ25Jbk1ldGhvZCwgViBhcyBUd2l0dGVyQXV0aFByb3ZpZGVyLCBhRCBhcyBVc2VySW1wbCwgYXcgYXMgX2Fzc2VydCwgYUMgYXMgX2Nhc3RBdXRoLCBhcyBhcyBfZmFpbCwgYUcgYXMgX2dlbmVyYXRlRXZlbnRJZCwgYUYgYXMgX2dldENsaWVudFZlcnNpb24sIGF4IGFzIF9nZXRJbnN0YW5jZSwgYUEgYXMgX2dldFJlZGlyZWN0UmVzdWx0LCBheSBhcyBfcGVyc2lzdGVuY2VLZXlOYW1lLCBhMSBhcyBhcHBseUFjdGlvbkNvZGUsIGIgYXMgYnJvd3NlckxvY2FsUGVyc2lzdGVuY2UsIGsgYXMgYnJvd3NlclBvcHVwUmVkaXJlY3RSZXNvbHZlciwgYSBhcyBicm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlLCBhMiBhcyBjaGVja0FjdGlvbkNvZGUsIGEwIGFzIGNvbmZpcm1QYXNzd29yZFJlc2V0LCBFIGFzIGNvbm5lY3RBdXRoRW11bGF0b3IsIGE0IGFzIGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCwgeiBhcyBkZWJ1Z0Vycm9yTWFwLCB5IGFzIGRlbGV0ZVVzZXIsIGE5IGFzIGZldGNoU2lnbkluTWV0aG9kc0ZvckVtYWlsLCBhayBhcyBnZXRBZGRpdGlvbmFsVXNlckluZm8sIG4gYXMgZ2V0QXV0aCwgYWggYXMgZ2V0SWRUb2tlbiwgYWkgYXMgZ2V0SWRUb2tlblJlc3VsdCwgYW0gYXMgZ2V0TXVsdGlGYWN0b3JSZXNvbHZlciwgaiBhcyBnZXRSZWRpcmVjdFJlc3VsdCwgSyBhcyBpbk1lbW9yeVBlcnNpc3RlbmNlLCBpIGFzIGluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2UsIEQgYXMgaW5pdGlhbGl6ZUF1dGgsIGE3IGFzIGlzU2lnbkluV2l0aEVtYWlsTGluaywgWSBhcyBsaW5rV2l0aENyZWRlbnRpYWwsIGwgYXMgbGlua1dpdGhQaG9uZU51bWJlciwgZCBhcyBsaW5rV2l0aFBvcHVwLCBnIGFzIGxpbmtXaXRoUmVkaXJlY3QsIGFuIGFzIG11bHRpRmFjdG9yLCB0IGFzIG9uQXV0aFN0YXRlQ2hhbmdlZCwgcSBhcyBvbklkVG9rZW5DaGFuZ2VkLCBhZCBhcyBwYXJzZUFjdGlvbkNvZGVVUkwsIEIgYXMgcHJvZEVycm9yTWFwLCBaIGFzIHJlYXV0aGVudGljYXRlV2l0aENyZWRlbnRpYWwsIHIgYXMgcmVhdXRoZW50aWNhdGVXaXRoUGhvbmVOdW1iZXIsIGUgYXMgcmVhdXRoZW50aWNhdGVXaXRoUG9wdXAsIGggYXMgcmVhdXRoZW50aWNhdGVXaXRoUmVkaXJlY3QsIGFsIGFzIHJlbG9hZCwgYWEgYXMgc2VuZEVtYWlsVmVyaWZpY2F0aW9uLCAkIGFzIHNlbmRQYXNzd29yZFJlc2V0RW1haWwsIGE2IGFzIHNlbmRTaWduSW5MaW5rVG9FbWFpbCwgcCBhcyBzZXRQZXJzaXN0ZW5jZSwgVyBhcyBzaWduSW5Bbm9ueW1vdXNseSwgWCBhcyBzaWduSW5XaXRoQ3JlZGVudGlhbCwgXyBhcyBzaWduSW5XaXRoQ3VzdG9tVG9rZW4sIGE1IGFzIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkLCBhOCBhcyBzaWduSW5XaXRoRW1haWxMaW5rLCBzIGFzIHNpZ25JbldpdGhQaG9uZU51bWJlciwgYyBhcyBzaWduSW5XaXRoUG9wdXAsIGYgYXMgc2lnbkluV2l0aFJlZGlyZWN0LCB4IGFzIHNpZ25PdXQsIGFqIGFzIHVubGluaywgdyBhcyB1cGRhdGVDdXJyZW50VXNlciwgYWYgYXMgdXBkYXRlRW1haWwsIGFnIGFzIHVwZGF0ZVBhc3N3b3JkLCB1IGFzIHVwZGF0ZVBob25lTnVtYmVyLCBhZSBhcyB1cGRhdGVQcm9maWxlLCB2IGFzIHVzZURldmljZUxhbmd1YWdlLCBhYiBhcyB2ZXJpZnlCZWZvcmVVcGRhdGVFbWFpbCwgYTMgYXMgdmVyaWZ5UGFzc3dvcmRSZXNldENvZGUgfSBmcm9tICcuL2luZGV4LTgzOWRlNTEwLmpzJztcbmltcG9ydCB7IHF1ZXJ5c3RyaW5nRGVjb2RlIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0ICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCAndHNsaWInO1xuaW1wb3J0ICdAZmlyZWJhc2UvbG9nZ2VyJztcbmltcG9ydCAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9jb3Jkb3ZhV2luZG93KCkge1xyXG4gICAgcmV0dXJuIHdpbmRvdztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogSG93IGxvbmcgdG8gd2FpdCBhZnRlciB0aGUgYXBwIGNvbWVzIGJhY2sgaW50byBmb2N1cyBiZWZvcmUgY29uY2x1ZGluZyB0aGF0XHJcbiAqIHRoZSB1c2VyIGNsb3NlZCB0aGUgc2lnbiBpbiB0YWIuXHJcbiAqL1xyXG5jb25zdCBSRURJUkVDVF9USU1FT1VUX01TID0gMjAwMDtcclxuLyoqXHJcbiAqIEdlbmVyYXRlcyB0aGUgVVJMIGZvciB0aGUgT0F1dGggaGFuZGxlci5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF9nZW5lcmF0ZUhhbmRsZXJVcmwoYXV0aCwgZXZlbnQsIHByb3ZpZGVyKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICAvLyBHZXQgdGhlIGNvcmRvdmEgcGx1Z2luc1xyXG4gICAgY29uc3QgeyBCdWlsZEluZm8gfSA9IF9jb3Jkb3ZhV2luZG93KCk7XHJcbiAgICBkZWJ1Z0Fzc2VydChldmVudC5zZXNzaW9uSWQsICdBdXRoRXZlbnQgZGlkIG5vdCBjb250YWluIGEgc2Vzc2lvbiBJRCcpO1xyXG4gICAgY29uc3Qgc2Vzc2lvbkRpZ2VzdCA9IGF3YWl0IGNvbXB1dGVTaGEyNTYoZXZlbnQuc2Vzc2lvbklkKTtcclxuICAgIGNvbnN0IGFkZGl0aW9uYWxQYXJhbXMgPSB7fTtcclxuICAgIGlmIChfaXNJT1MoKSkge1xyXG4gICAgICAgIC8vIGlPUyBhcHAgaWRlbnRpZmllclxyXG4gICAgICAgIGFkZGl0aW9uYWxQYXJhbXNbJ2liaSddID0gQnVpbGRJbmZvLnBhY2thZ2VOYW1lO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoX2lzQW5kcm9pZCgpKSB7XHJcbiAgICAgICAgLy8gQW5kcm9pZCBhcHAgaWRlbnRpZmllclxyXG4gICAgICAgIGFkZGl0aW9uYWxQYXJhbXNbJ2FwbiddID0gQnVpbGRJbmZvLnBhY2thZ2VOYW1lO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgX2ZhaWwoYXV0aCwgXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIgLyogT1BFUkFUSU9OX05PVF9TVVBQT1JURUQgKi8pO1xyXG4gICAgfVxyXG4gICAgLy8gQWRkIHRoZSBkaXNwbGF5IG5hbWUgaWYgYXZhaWxhYmxlXHJcbiAgICBpZiAoQnVpbGRJbmZvLmRpc3BsYXlOYW1lKSB7XHJcbiAgICAgICAgYWRkaXRpb25hbFBhcmFtc1snYXBwRGlzcGxheU5hbWUnXSA9IEJ1aWxkSW5mby5kaXNwbGF5TmFtZTtcclxuICAgIH1cclxuICAgIC8vIEF0dGFjaGVkIHRoZSBoYXNoZWQgc2Vzc2lvbiBJRFxyXG4gICAgYWRkaXRpb25hbFBhcmFtc1snc2Vzc2lvbklkJ10gPSBzZXNzaW9uRGlnZXN0O1xyXG4gICAgcmV0dXJuIF9nZXRSZWRpcmVjdFVybChhdXRoLCBwcm92aWRlciwgZXZlbnQudHlwZSwgdW5kZWZpbmVkLCAoX2EgPSBldmVudC5ldmVudElkKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB1bmRlZmluZWQsIGFkZGl0aW9uYWxQYXJhbXMpO1xyXG59XHJcbi8qKlxyXG4gKiBWYWxpZGF0ZXMgdGhhdCB0aGlzIGFwcCBpcyB2YWxpZCBmb3IgdGhpcyBwcm9qZWN0IGNvbmZpZ3VyYXRpb25cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF92YWxpZGF0ZU9yaWdpbihhdXRoKSB7XHJcbiAgICBjb25zdCB7IEJ1aWxkSW5mbyB9ID0gX2NvcmRvdmFXaW5kb3coKTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7fTtcclxuICAgIGlmIChfaXNJT1MoKSkge1xyXG4gICAgICAgIHJlcXVlc3QuaW9zQnVuZGxlSWQgPSBCdWlsZEluZm8ucGFja2FnZU5hbWU7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChfaXNBbmRyb2lkKCkpIHtcclxuICAgICAgICByZXF1ZXN0LmFuZHJvaWRQYWNrYWdlTmFtZSA9IEJ1aWxkSW5mby5wYWNrYWdlTmFtZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIF9mYWlsKGF1dGgsIFwib3BlcmF0aW9uLW5vdC1zdXBwb3J0ZWQtaW4tdGhpcy1lbnZpcm9ubWVudFwiIC8qIE9QRVJBVElPTl9OT1RfU1VQUE9SVEVEICovKTtcclxuICAgIH1cclxuICAgIC8vIFdpbGwgZmFpbCBhdXRvbWF0aWNhbGx5IGlmIHBhY2thZ2UgbmFtZSBpcyBub3QgYXV0aG9yaXplZFxyXG4gICAgYXdhaXQgX2dldFByb2plY3RDb25maWcoYXV0aCwgcmVxdWVzdCk7XHJcbn1cclxuZnVuY3Rpb24gX3BlcmZvcm1SZWRpcmVjdChoYW5kbGVyVXJsKSB7XHJcbiAgICAvLyBHZXQgdGhlIGNvcmRvdmEgcGx1Z2luc1xyXG4gICAgY29uc3QgeyBjb3Jkb3ZhIH0gPSBfY29yZG92YVdpbmRvdygpO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICAgIGNvcmRvdmEucGx1Z2lucy5icm93c2VydGFiLmlzQXZhaWxhYmxlKGJyb3dzZXJUYWJJc0F2YWlsYWJsZSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBpYWJSZWYgPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAoYnJvd3NlclRhYklzQXZhaWxhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICBjb3Jkb3ZhLnBsdWdpbnMuYnJvd3NlcnRhYi5vcGVuVXJsKGhhbmRsZXJVcmwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogUmV0dXJuIHRoZSBpbmFwcGJyb3dzZXIgcmVmIHRoYXQncyByZXR1cm5lZCBmcm9tIHRoZSBvcGVuIGNhbGxcclxuICAgICAgICAgICAgICAgIGlhYlJlZiA9IGNvcmRvdmEuSW5BcHBCcm93c2VyLm9wZW4oaGFuZGxlclVybCwgX2lzSU9TN09yOCgpID8gJ19ibGFuaycgOiAnX3N5c3RlbScsICdsb2NhdGlvbj15ZXMnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXNvbHZlKGlhYlJlZik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG4vKipcclxuICogVGhpcyBmdW5jdGlvbiB3YWl0cyBmb3IgYXBwIGFjdGl2aXR5IHRvIGJlIHNlZW4gYmVmb3JlIHJlc29sdmluZy4gSXQgZG9lc1xyXG4gKiB0aGlzIGJ5IGF0dGFjaGluZyBsaXN0ZW5lcnMgdG8gdmFyaW91cyBkb20gZXZlbnRzLiBPbmNlIHRoZSBhcHAgaXMgZGV0ZXJtaW5lZFxyXG4gKiB0byBiZSB2aXNpYmxlLCB0aGlzIHByb21pc2UgcmVzb2x2ZXMuIEFGVEVSIHRoYXQgcmVzb2x1dGlvbiwgdGhlIGxpc3RlbmVyc1xyXG4gKiBhcmUgZGV0YWNoZWQgYW5kIGFueSBicm93c2VyIHRhYnMgbGVmdCBvcGVuIHdpbGwgYmUgY2xvc2VkLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX3dhaXRGb3JBcHBSZXN1bWUoYXV0aCwgZXZlbnRMaXN0ZW5lciwgaWFiUmVmKSB7XHJcbiAgICAvLyBHZXQgdGhlIGNvcmRvdmEgcGx1Z2luc1xyXG4gICAgY29uc3QgeyBjb3Jkb3ZhIH0gPSBfY29yZG92YVdpbmRvdygpO1xyXG4gICAgbGV0IGNsZWFudXAgPSAoKSA9PiB7IH07XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgbGV0IG9uQ2xvc2VUaW1lciA9IG51bGw7XHJcbiAgICAgICAgICAgIC8vIERFRklORSBBTEwgVEhFIENBTExCQUNLUyA9PT09PVxyXG4gICAgICAgICAgICBmdW5jdGlvbiBhdXRoRXZlbnRTZWVuKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICAgICAgLy8gQXV0aCBldmVudCB3YXMgZGV0ZWN0ZWQuIFJlc29sdmUgdGhpcyBwcm9taXNlIGFuZCBjbG9zZSB0aGUgZXh0cmFcclxuICAgICAgICAgICAgICAgIC8vIHdpbmRvdyBpZiBpdCdzIHN0aWxsIG9wZW4uXHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjbG9zZUJyb3dzZXJUYWIgPSAoX2EgPSBjb3Jkb3ZhLnBsdWdpbnMuYnJvd3NlcnRhYikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNsb3NlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjbG9zZUJyb3dzZXJUYWIgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBjbG9zZUJyb3dzZXJUYWIoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIENsb3NlIGluYXBwYnJvd3NlciBlbWViZWRkZWQgd2VidmlldyBpbiBpT1M3IGFuZCA4IGNhc2UgaWYgc3RpbGxcclxuICAgICAgICAgICAgICAgIC8vIG9wZW4uXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIChpYWJSZWYgPT09IG51bGwgfHwgaWFiUmVmID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpYWJSZWYuY2xvc2UpID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWFiUmVmLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZnVuY3Rpb24gcmVzdW1lZCgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvbkNsb3NlVGltZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGNvZGUgYWxyZWFkeSByYW47IGRvIG5vdCByZXJ1bi5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBvbkNsb3NlVGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gV2FpdCB0d28gc2VlY29uZHMgYWZ0ZXIgcmVzdW1lIHRoZW4gcmVqZWN0LlxyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChfY3JlYXRlRXJyb3IoYXV0aCwgXCJyZWRpcmVjdC1jYW5jZWxsZWQtYnktdXNlclwiIC8qIFJFRElSRUNUX0NBTkNFTExFRF9CWV9VU0VSICovKSk7XHJcbiAgICAgICAgICAgICAgICB9LCBSRURJUkVDVF9USU1FT1VUX01TKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmdW5jdGlvbiB2aXNpYmlsaXR5Q2hhbmdlZCgpIHtcclxuICAgICAgICAgICAgICAgIGlmICgoZG9jdW1lbnQgPT09IG51bGwgfHwgZG9jdW1lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSkgPT09ICd2aXNpYmxlJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VtZWQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBBVFRBQ0ggQUxMIFRIRSBMSVNURU5FUlMgPT09PT1cclxuICAgICAgICAgICAgLy8gTGlzdGVuIGZvciB0aGUgYXV0aCBldmVudFxyXG4gICAgICAgICAgICBldmVudExpc3RlbmVyLmFkZFBhc3NpdmVMaXN0ZW5lcihhdXRoRXZlbnRTZWVuKTtcclxuICAgICAgICAgICAgLy8gTGlzdGVuIGZvciByZXN1bWUgYW5kIHZpc2liaWxpdHkgZXZlbnRzXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc3VtZScsIHJlc3VtZWQsIGZhbHNlKTtcclxuICAgICAgICAgICAgaWYgKF9pc0FuZHJvaWQoKSkge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsIHZpc2liaWxpdHlDaGFuZ2VkLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gU0VUVVAgVEhFIENMRUFOVVAgRlVOQ1RJT04gPT09PT1cclxuICAgICAgICAgICAgY2xlYW51cCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGV2ZW50TGlzdGVuZXIucmVtb3ZlUGFzc2l2ZUxpc3RlbmVyKGF1dGhFdmVudFNlZW4pO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzdW1lJywgcmVzdW1lZCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsIHZpc2liaWxpdHlDaGFuZ2VkLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAob25DbG9zZVRpbWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dChvbkNsb3NlVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgY2xlYW51cCgpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBDaGVja3MgdGhlIGNvbmZpZ3VyYXRpb24gb2YgdGhlIENvcmRvdmEgZW52aXJvbm1lbnQuIFRoaXMgaGFzIG5vIHNpZGUgZWZmZWN0XHJcbiAqIGlmIHRoZSBjb25maWd1cmF0aW9uIGlzIGNvcnJlY3Q7IG90aGVyd2lzZSBpdCB0aHJvd3MgYW4gZXJyb3Igd2l0aCB0aGVcclxuICogbWlzc2luZyBwbHVnaW4uXHJcbiAqL1xyXG5mdW5jdGlvbiBfY2hlY2tDb3Jkb3ZhQ29uZmlndXJhdGlvbihhdXRoKSB7XHJcbiAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfaiwgX2s7XHJcbiAgICBjb25zdCB3aW4gPSBfY29yZG92YVdpbmRvdygpO1xyXG4gICAgLy8gQ2hlY2sgYWxsIGRlcGVuZGVuY2llcyBpbnN0YWxsZWQuXHJcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbm9yZG5ldC9jb3Jkb3ZhLXVuaXZlcnNhbC1saW5rcy1wbHVnaW5cclxuICAgIC8vIE5vdGUgdGhhdCBjb3Jkb3ZhLXVuaXZlcnNhbC1saW5rcy1wbHVnaW4gaGFzIGJlZW4gYWJhbmRvbmVkLlxyXG4gICAgLy8gQSBmb3JrIHdpdGggbGF0ZXN0IGZpeGVzIGlzIGF2YWlsYWJsZSBhdDpcclxuICAgIC8vIGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL2NvcmRvdmEtdW5pdmVyc2FsLWxpbmtzLXBsdWdpbi1maXhcclxuICAgIF9hc3NlcnQodHlwZW9mICgoX2EgPSB3aW4gPT09IG51bGwgfHwgd2luID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3aW4udW5pdmVyc2FsTGlua3MpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zdWJzY3JpYmUpID09PSAnZnVuY3Rpb24nLCBhdXRoLCBcImludmFsaWQtY29yZG92YS1jb25maWd1cmF0aW9uXCIgLyogSU5WQUxJRF9DT1JET1ZBX0NPTkZJR1VSQVRJT04gKi8sIHtcclxuICAgICAgICBtaXNzaW5nUGx1Z2luOiAnY29yZG92YS11bml2ZXJzYWwtbGlua3MtcGx1Z2luLWZpeCdcclxuICAgIH0pO1xyXG4gICAgLy8gaHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvY29yZG92YS1wbHVnaW4tYnVpbGRpbmZvXHJcbiAgICBfYXNzZXJ0KHR5cGVvZiAoKF9iID0gd2luID09PSBudWxsIHx8IHdpbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogd2luLkJ1aWxkSW5mbykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnBhY2thZ2VOYW1lKSAhPT0gJ3VuZGVmaW5lZCcsIGF1dGgsIFwiaW52YWxpZC1jb3Jkb3ZhLWNvbmZpZ3VyYXRpb25cIiAvKiBJTlZBTElEX0NPUkRPVkFfQ09ORklHVVJBVElPTiAqLywge1xyXG4gICAgICAgIG1pc3NpbmdQbHVnaW46ICdjb3Jkb3ZhLXBsdWdpbi1idWlsZEluZm8nXHJcbiAgICB9KTtcclxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY29yZG92YS1wbHVnaW4tYnJvd3NlcnRhYlxyXG4gICAgX2Fzc2VydCh0eXBlb2YgKChfZSA9IChfZCA9IChfYyA9IHdpbiA9PT0gbnVsbCB8fCB3aW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHdpbi5jb3Jkb3ZhKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MucGx1Z2lucykgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLmJyb3dzZXJ0YWIpID09PSBudWxsIHx8IF9lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZS5vcGVuVXJsKSA9PT0gJ2Z1bmN0aW9uJywgYXV0aCwgXCJpbnZhbGlkLWNvcmRvdmEtY29uZmlndXJhdGlvblwiIC8qIElOVkFMSURfQ09SRE9WQV9DT05GSUdVUkFUSU9OICovLCB7XHJcbiAgICAgICAgbWlzc2luZ1BsdWdpbjogJ2NvcmRvdmEtcGx1Z2luLWJyb3dzZXJ0YWInXHJcbiAgICB9KTtcclxuICAgIF9hc3NlcnQodHlwZW9mICgoX2ggPSAoX2cgPSAoX2YgPSB3aW4gPT09IG51bGwgfHwgd2luID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3aW4uY29yZG92YSkgPT09IG51bGwgfHwgX2YgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9mLnBsdWdpbnMpID09PSBudWxsIHx8IF9nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZy5icm93c2VydGFiKSA9PT0gbnVsbCB8fCBfaCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2guaXNBdmFpbGFibGUpID09PSAnZnVuY3Rpb24nLCBhdXRoLCBcImludmFsaWQtY29yZG92YS1jb25maWd1cmF0aW9uXCIgLyogSU5WQUxJRF9DT1JET1ZBX0NPTkZJR1VSQVRJT04gKi8sIHtcclxuICAgICAgICBtaXNzaW5nUGx1Z2luOiAnY29yZG92YS1wbHVnaW4tYnJvd3NlcnRhYidcclxuICAgIH0pO1xyXG4gICAgLy8gaHR0cHM6Ly9jb3Jkb3ZhLmFwYWNoZS5vcmcvZG9jcy9lbi9sYXRlc3QvcmVmZXJlbmNlL2NvcmRvdmEtcGx1Z2luLWluYXBwYnJvd3Nlci9cclxuICAgIF9hc3NlcnQodHlwZW9mICgoX2sgPSAoX2ogPSB3aW4gPT09IG51bGwgfHwgd2luID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3aW4uY29yZG92YSkgPT09IG51bGwgfHwgX2ogPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9qLkluQXBwQnJvd3NlcikgPT09IG51bGwgfHwgX2sgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9rLm9wZW4pID09PSAnZnVuY3Rpb24nLCBhdXRoLCBcImludmFsaWQtY29yZG92YS1jb25maWd1cmF0aW9uXCIgLyogSU5WQUxJRF9DT1JET1ZBX0NPTkZJR1VSQVRJT04gKi8sIHtcclxuICAgICAgICBtaXNzaW5nUGx1Z2luOiAnY29yZG92YS1wbHVnaW4taW5hcHBicm93c2VyJ1xyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqIENvbXB1dGVzIHRoZSBTSEEtMjU2IG9mIGEgc2Vzc2lvbiBJRC4gVGhlIFN1YnRsZUNyeXB0byBpbnRlcmZhY2UgaXMgb25seVxyXG4gKiBhdmFpbGFibGUgaW4gXCJzZWN1cmVcIiBjb250ZXh0cywgd2hpY2ggY292ZXJzIENvcmRvdmEgKHdoaWNoIGlzIHNlcnZlZCBvbiBhIGZpbGVcclxuICogcHJvdG9jb2wpLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gY29tcHV0ZVNoYTI1NihzZXNzaW9uSWQpIHtcclxuICAgIGNvbnN0IGJ5dGVzID0gc3RyaW5nVG9BcnJheUJ1ZmZlcihzZXNzaW9uSWQpO1xyXG4gICAgLy8gVE9ETzogRm9yIElFMTEgY3J5cHRvIGhhcyBhIGRpZmZlcmVudCBuYW1lIGFuZCB0aGlzIG9wZXJhdGlvbiBjb21lcyBiYWNrXHJcbiAgICAvLyAgICAgICBhcyBhbiBvYmplY3QsIG5vdCBhIHByb21pc2UuIFRoaXMgaXMgdGhlIG9sZCBwcm9wb3NlZCBzdGFuZGFyZCB0aGF0XHJcbiAgICAvLyAgICAgICBpcyB1c2VkIGJ5IElFMTE6XHJcbiAgICAvLyBodHRwczovL3d3dy53My5vcmcvVFIvMjAxMy9XRC1XZWJDcnlwdG9BUEktMjAxMzAxMDgvI2NyeXB0b29wZXJhdGlvbi1pbnRlcmZhY2VcclxuICAgIGNvbnN0IGJ1ZiA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuZGlnZXN0KCdTSEEtMjU2JywgYnl0ZXMpO1xyXG4gICAgY29uc3QgYXJyID0gQXJyYXkuZnJvbShuZXcgVWludDhBcnJheShidWYpKTtcclxuICAgIHJldHVybiBhcnIubWFwKG51bSA9PiBudW0udG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICcwJykpLmpvaW4oJycpO1xyXG59XHJcbmZ1bmN0aW9uIHN0cmluZ1RvQXJyYXlCdWZmZXIoc3RyKSB7XHJcbiAgICAvLyBUaGlzIGZ1bmN0aW9uIGlzIG9ubHkgbWVhbnQgdG8gZGVhbCB3aXRoIGFuIEFTQ0lJIGNoYXJzZXQgYW5kIG1ha2VzXHJcbiAgICAvLyBjZXJ0YWluIHNpbXBsaWZ5aW5nIGFzc3VtcHRpb25zLlxyXG4gICAgZGVidWdBc3NlcnQoL1swLTlhLXpBLVpdKy8udGVzdChzdHIpLCAnQ2FuIG9ubHkgY29udmVydCBhbHBoYS1udW1lcmljIHN0cmluZ3MnKTtcclxuICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzdHIpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYnVmZiA9IG5ldyBBcnJheUJ1ZmZlcihzdHIubGVuZ3RoKTtcclxuICAgIGNvbnN0IHZpZXcgPSBuZXcgVWludDhBcnJheShidWZmKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmlld1tpXSA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZpZXc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgU0VTU0lPTl9JRF9MRU5HVEggPSAyMDtcclxuLyoqIEN1c3RvbSBBdXRoRXZlbnRNYW5hZ2VyIHRoYXQgYWRkcyBwYXNzaXZlIGxpc3RlbmVycyB0byBldmVudHMgKi9cclxuY2xhc3MgQ29yZG92YUF1dGhFdmVudE1hbmFnZXIgZXh0ZW5kcyBBdXRoRXZlbnRNYW5hZ2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XHJcbiAgICAgICAgdGhpcy5wYXNzaXZlTGlzdGVuZXJzID0gbmV3IFNldCgpO1xyXG4gICAgICAgIHRoaXMuaW5pdFByb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZXNvbHZlSW5pYWxpemVkID0gcmVzb2x2ZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGFkZFBhc3NpdmVMaXN0ZW5lcihjYikge1xyXG4gICAgICAgIHRoaXMucGFzc2l2ZUxpc3RlbmVycy5hZGQoY2IpO1xyXG4gICAgfVxyXG4gICAgcmVtb3ZlUGFzc2l2ZUxpc3RlbmVyKGNiKSB7XHJcbiAgICAgICAgdGhpcy5wYXNzaXZlTGlzdGVuZXJzLmRlbGV0ZShjYik7XHJcbiAgICB9XHJcbiAgICAvLyBJbiBhIENvcmRvdmEgZW52aXJvbm1lbnQsIHRoaXMgbWFuYWdlciBjYW4gbGl2ZSB0aHJvdWdoIG11bHRpcGxlIHJlZGlyZWN0XHJcbiAgICAvLyBvcGVyYXRpb25zXHJcbiAgICByZXNldFJlZGlyZWN0KCkge1xyXG4gICAgICAgIHRoaXMucXVldWVkUmVkaXJlY3RFdmVudCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5oYXNIYW5kbGVkUG90ZW50aWFsUmVkaXJlY3QgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIC8qKiBPdmVycmlkZSB0aGUgb25FdmVudCBtZXRob2QgKi9cclxuICAgIG9uRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICB0aGlzLnJlc29sdmVJbmlhbGl6ZWQoKTtcclxuICAgICAgICB0aGlzLnBhc3NpdmVMaXN0ZW5lcnMuZm9yRWFjaChjYiA9PiBjYihldmVudCkpO1xyXG4gICAgICAgIHJldHVybiBzdXBlci5vbkV2ZW50KGV2ZW50KTtcclxuICAgIH1cclxuICAgIGFzeW5jIGluaXRpYWxpemVkKCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdFByb21pc2U7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEdlbmVyYXRlcyBhIChwYXJ0aWFsKSB7QGxpbmsgQXV0aEV2ZW50fS5cclxuICovXHJcbmZ1bmN0aW9uIF9nZW5lcmF0ZU5ld0V2ZW50KGF1dGgsIHR5cGUsIGV2ZW50SWQgPSBudWxsKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHR5cGUsXHJcbiAgICAgICAgZXZlbnRJZCxcclxuICAgICAgICB1cmxSZXNwb25zZTogbnVsbCxcclxuICAgICAgICBzZXNzaW9uSWQ6IGdlbmVyYXRlU2Vzc2lvbklkKCksXHJcbiAgICAgICAgcG9zdEJvZHk6IG51bGwsXHJcbiAgICAgICAgdGVuYW50SWQ6IGF1dGgudGVuYW50SWQsXHJcbiAgICAgICAgZXJyb3I6IF9jcmVhdGVFcnJvcihhdXRoLCBcIm5vLWF1dGgtZXZlbnRcIiAvKiBOT19BVVRIX0VWRU5UICovKVxyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBfc2F2ZVBhcnRpYWxFdmVudChhdXRoLCBldmVudCkge1xyXG4gICAgcmV0dXJuIHN0b3JhZ2UoKS5fc2V0KHBlcnNpc3RlbmNlS2V5KGF1dGgpLCBldmVudCk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX2dldEFuZFJlbW92ZUV2ZW50KGF1dGgpIHtcclxuICAgIGNvbnN0IGV2ZW50ID0gKGF3YWl0IHN0b3JhZ2UoKS5fZ2V0KHBlcnNpc3RlbmNlS2V5KGF1dGgpKSk7XHJcbiAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgICBhd2FpdCBzdG9yYWdlKCkuX3JlbW92ZShwZXJzaXN0ZW5jZUtleShhdXRoKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZXZlbnQ7XHJcbn1cclxuZnVuY3Rpb24gX2V2ZW50RnJvbVBhcnRpYWxBbmRVcmwocGFydGlhbEV2ZW50LCB1cmwpIHtcclxuICAgIHZhciBfYSwgX2I7XHJcbiAgICAvLyBQYXJzZSB0aGUgZGVlcCBsaW5rIHdpdGhpbiB0aGUgZHluYW1pYyBsaW5rIFVSTC5cclxuICAgIGNvbnN0IGNhbGxiYWNrVXJsID0gX2dldERlZXBMaW5rRnJvbUNhbGxiYWNrKHVybCk7XHJcbiAgICAvLyBDb25maXJtIGl0IGlzIGFjdHVhbGx5IGEgY2FsbGJhY2sgVVJMLlxyXG4gICAgLy8gQ3VycmVudGx5IHRoZSB1bml2ZXJzYWwgbGluayB3aWxsIGJlIG9mIHRoaXMgZm9ybWF0OlxyXG4gICAgLy8gaHR0cHM6Ly88QVVUSF9ET01BSU4+L19fL2F1dGgvY2FsbGJhY2s8T0FVVEhfUkVTUE9OU0U+XHJcbiAgICAvLyBUaGlzIGlzIGEgZmFrZSBVUkwgYnV0IGlzIG5vdCBpbnRlbmRlZCB0byB0YWtlIHRoZSB1c2VyIGFueXdoZXJlXHJcbiAgICAvLyBhbmQganVzdCByZWRpcmVjdCB0byB0aGUgYXBwLlxyXG4gICAgaWYgKGNhbGxiYWNrVXJsLmluY2x1ZGVzKCcvX18vYXV0aC9jYWxsYmFjaycpKSB7XHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYW4gZXJyb3IgaW4gdGhlIFVSTC5cclxuICAgICAgICAvLyBUaGlzIG1lY2hhbmlzbSBpcyBhbHNvIHVzZWQgdG8gcGFzcyBlcnJvcnMgYmFjayB0byB0aGUgYXBwOlxyXG4gICAgICAgIC8vIGh0dHBzOi8vPEFVVEhfRE9NQUlOPi9fXy9hdXRoL2NhbGxiYWNrP2ZpcmViYXNlRXJyb3I9PFNUUklOR0lGSUVEX0VSUk9SPlxyXG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHNlYXJjaFBhcmFtc09yRW1wdHkoY2FsbGJhY2tVcmwpO1xyXG4gICAgICAgIC8vIEdldCB0aGUgZXJyb3Igb2JqZWN0IGNvcnJlc3BvbmRpbmcgdG8gdGhlIHN0cmluZ2lmaWVkIGVycm9yIGlmIGZvdW5kLlxyXG4gICAgICAgIGNvbnN0IGVycm9yT2JqZWN0ID0gcGFyYW1zWydmaXJlYmFzZUVycm9yJ11cclxuICAgICAgICAgICAgPyBwYXJzZUpzb25Pck51bGwoZGVjb2RlVVJJQ29tcG9uZW50KHBhcmFtc1snZmlyZWJhc2VFcnJvciddKSlcclxuICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgICAgIGNvbnN0IGNvZGUgPSAoX2IgPSAoX2EgPSBlcnJvck9iamVjdCA9PT0gbnVsbCB8fCBlcnJvck9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXJyb3JPYmplY3RbJ2NvZGUnXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNwbGl0KCdhdXRoLycpKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2JbMV07XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBjb2RlID8gX2NyZWF0ZUVycm9yKGNvZGUpIDogbnVsbDtcclxuICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IHBhcnRpYWxFdmVudC50eXBlLFxyXG4gICAgICAgICAgICAgICAgZXZlbnRJZDogcGFydGlhbEV2ZW50LmV2ZW50SWQsXHJcbiAgICAgICAgICAgICAgICB0ZW5hbnRJZDogcGFydGlhbEV2ZW50LnRlbmFudElkLFxyXG4gICAgICAgICAgICAgICAgZXJyb3IsXHJcbiAgICAgICAgICAgICAgICB1cmxSZXNwb25zZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIHNlc3Npb25JZDogbnVsbCxcclxuICAgICAgICAgICAgICAgIHBvc3RCb2R5OiBudWxsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogcGFydGlhbEV2ZW50LnR5cGUsXHJcbiAgICAgICAgICAgICAgICBldmVudElkOiBwYXJ0aWFsRXZlbnQuZXZlbnRJZCxcclxuICAgICAgICAgICAgICAgIHRlbmFudElkOiBwYXJ0aWFsRXZlbnQudGVuYW50SWQsXHJcbiAgICAgICAgICAgICAgICBzZXNzaW9uSWQ6IHBhcnRpYWxFdmVudC5zZXNzaW9uSWQsXHJcbiAgICAgICAgICAgICAgICB1cmxSZXNwb25zZTogY2FsbGJhY2tVcmwsXHJcbiAgICAgICAgICAgICAgICBwb3N0Qm9keTogbnVsbFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59XHJcbmZ1bmN0aW9uIGdlbmVyYXRlU2Vzc2lvbklkKCkge1xyXG4gICAgY29uc3QgY2hhcnMgPSBbXTtcclxuICAgIGNvbnN0IGFsbG93ZWRDaGFycyA9ICcxMjM0NTY3ODkwYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWic7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IFNFU1NJT05fSURfTEVOR1RIOyBpKyspIHtcclxuICAgICAgICBjb25zdCBpZHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhbGxvd2VkQ2hhcnMubGVuZ3RoKTtcclxuICAgICAgICBjaGFycy5wdXNoKGFsbG93ZWRDaGFycy5jaGFyQXQoaWR4KSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY2hhcnMuam9pbignJyk7XHJcbn1cclxuZnVuY3Rpb24gc3RvcmFnZSgpIHtcclxuICAgIHJldHVybiBfZ2V0SW5zdGFuY2UoYnJvd3NlckxvY2FsUGVyc2lzdGVuY2UpO1xyXG59XHJcbmZ1bmN0aW9uIHBlcnNpc3RlbmNlS2V5KGF1dGgpIHtcclxuICAgIHJldHVybiBfcGVyc2lzdGVuY2VLZXlOYW1lKFwiYXV0aEV2ZW50XCIgLyogQVVUSF9FVkVOVCAqLywgYXV0aC5jb25maWcuYXBpS2V5LCBhdXRoLm5hbWUpO1xyXG59XHJcbmZ1bmN0aW9uIHBhcnNlSnNvbk9yTnVsbChqc29uKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGpzb24pO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufVxyXG4vLyBFeHBvcnRlZCBmb3IgdGVzdGluZ1xyXG5mdW5jdGlvbiBfZ2V0RGVlcExpbmtGcm9tQ2FsbGJhY2sodXJsKSB7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBzZWFyY2hQYXJhbXNPckVtcHR5KHVybCk7XHJcbiAgICBjb25zdCBsaW5rID0gcGFyYW1zWydsaW5rJ10gPyBkZWNvZGVVUklDb21wb25lbnQocGFyYW1zWydsaW5rJ10pIDogdW5kZWZpbmVkO1xyXG4gICAgLy8gRG91YmxlIGxpbmsgY2FzZSAoYXV0b21hdGljIHJlZGlyZWN0KVxyXG4gICAgY29uc3QgZG91YmxlRGVlcExpbmsgPSBzZWFyY2hQYXJhbXNPckVtcHR5KGxpbmspWydsaW5rJ107XHJcbiAgICAvLyBpT1MgY3VzdG9tIHNjaGVtZSBsaW5rcy5cclxuICAgIGNvbnN0IGlPU0RlZXBMaW5rID0gcGFyYW1zWydkZWVwX2xpbmtfaWQnXVxyXG4gICAgICAgID8gZGVjb2RlVVJJQ29tcG9uZW50KHBhcmFtc1snZGVlcF9saW5rX2lkJ10pXHJcbiAgICAgICAgOiB1bmRlZmluZWQ7XHJcbiAgICBjb25zdCBpT1NEb3VibGVEZWVwTGluayA9IHNlYXJjaFBhcmFtc09yRW1wdHkoaU9TRGVlcExpbmspWydsaW5rJ107XHJcbiAgICByZXR1cm4gaU9TRG91YmxlRGVlcExpbmsgfHwgaU9TRGVlcExpbmsgfHwgZG91YmxlRGVlcExpbmsgfHwgbGluayB8fCB1cmw7XHJcbn1cclxuLyoqXHJcbiAqIE9wdGltaXN0aWNhbGx5IHRyaWVzIHRvIGdldCBzZWFyY2ggcGFyYW1zIGZyb20gYSBzdHJpbmcsIG9yIGVsc2UgcmV0dXJucyBhblxyXG4gKiBlbXB0eSBzZWFyY2ggcGFyYW1zIG9iamVjdC5cclxuICovXHJcbmZ1bmN0aW9uIHNlYXJjaFBhcmFtc09yRW1wdHkodXJsKSB7XHJcbiAgICBpZiAoISh1cmwgPT09IG51bGwgfHwgdXJsID09PSB2b2lkIDAgPyB2b2lkIDAgOiB1cmwuaW5jbHVkZXMoJz8nKSkpIHtcclxuICAgICAgICByZXR1cm4ge307XHJcbiAgICB9XHJcbiAgICBjb25zdCBbXywgLi4ucmVzdF0gPSB1cmwuc3BsaXQoJz8nKTtcclxuICAgIHJldHVybiBxdWVyeXN0cmluZ0RlY29kZShyZXN0LmpvaW4oJz8nKSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEhvdyBsb25nIHRvIHdhaXQgZm9yIHRoZSBpbml0aWFsIGF1dGggZXZlbnQgYmVmb3JlIGNvbmNsdWRpbmcgbm9cclxuICogcmVkaXJlY3QgcGVuZGluZ1xyXG4gKi9cclxuY29uc3QgSU5JVElBTF9FVkVOVF9USU1FT1VUX01TID0gNTAwO1xyXG5jbGFzcyBDb3Jkb3ZhUG9wdXBSZWRpcmVjdFJlc29sdmVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuX3JlZGlyZWN0UGVyc2lzdGVuY2UgPSBicm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlO1xyXG4gICAgICAgIHRoaXMuX3Nob3VsZEluaXRQcm9hY3RpdmVseSA9IHRydWU7IC8vIFRoaXMgaXMgbGlnaHR3ZWlnaHQgZm9yIENvcmRvdmFcclxuICAgICAgICB0aGlzLmV2ZW50TWFuYWdlcnMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5vcmlnaW5WYWxpZGF0aW9uUHJvbWlzZXMgPSB7fTtcclxuICAgICAgICB0aGlzLl9jb21wbGV0ZVJlZGlyZWN0Rm4gPSBfZ2V0UmVkaXJlY3RSZXN1bHQ7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfaW5pdGlhbGl6ZShhdXRoKSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gYXV0aC5fa2V5KCk7XHJcbiAgICAgICAgbGV0IG1hbmFnZXIgPSB0aGlzLmV2ZW50TWFuYWdlcnMuZ2V0KGtleSk7XHJcbiAgICAgICAgaWYgKCFtYW5hZ2VyKSB7XHJcbiAgICAgICAgICAgIG1hbmFnZXIgPSBuZXcgQ29yZG92YUF1dGhFdmVudE1hbmFnZXIoYXV0aCk7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRNYW5hZ2Vycy5zZXQoa2V5LCBtYW5hZ2VyKTtcclxuICAgICAgICAgICAgdGhpcy5hdHRhY2hDYWxsYmFja0xpc3RlbmVycyhhdXRoLCBtYW5hZ2VyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1hbmFnZXI7XHJcbiAgICB9XHJcbiAgICBfb3BlblBvcHVwKGF1dGgpIHtcclxuICAgICAgICBfZmFpbChhdXRoLCBcIm9wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnRcIiAvKiBPUEVSQVRJT05fTk9UX1NVUFBPUlRFRCAqLyk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfb3BlblJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyLCBhdXRoVHlwZSwgZXZlbnRJZCkge1xyXG4gICAgICAgIF9jaGVja0NvcmRvdmFDb25maWd1cmF0aW9uKGF1dGgpO1xyXG4gICAgICAgIGNvbnN0IG1hbmFnZXIgPSBhd2FpdCB0aGlzLl9pbml0aWFsaXplKGF1dGgpO1xyXG4gICAgICAgIGF3YWl0IG1hbmFnZXIuaW5pdGlhbGl6ZWQoKTtcclxuICAgICAgICAvLyBSZXNldCB0aGUgcGVyc2lzdGVkIHJlZGlyZWN0IHN0YXRlcy4gVGhpcyBkb2VzIG5vdCBtYXR0ZXIgb24gV2ViIHdoZXJlXHJcbiAgICAgICAgLy8gdGhlIHJlZGlyZWN0IGFsd2F5cyBibG93cyBhd2F5IGFwcGxpY2F0aW9uIHN0YXRlIGVudGlyZWx5LiBPbiBDb3Jkb3ZhLFxyXG4gICAgICAgIC8vIHRoZSBhcHAgbWFpbnRhaW5zIGNvbnRyb2wgZmxvdyB0aHJvdWdoIHRoZSByZWRpcmVjdC5cclxuICAgICAgICBtYW5hZ2VyLnJlc2V0UmVkaXJlY3QoKTtcclxuICAgICAgICBfY2xlYXJSZWRpcmVjdE91dGNvbWVzKCk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5fb3JpZ2luVmFsaWRhdGlvbihhdXRoKTtcclxuICAgICAgICBjb25zdCBldmVudCA9IF9nZW5lcmF0ZU5ld0V2ZW50KGF1dGgsIGF1dGhUeXBlLCBldmVudElkKTtcclxuICAgICAgICBhd2FpdCBfc2F2ZVBhcnRpYWxFdmVudChhdXRoLCBldmVudCk7XHJcbiAgICAgICAgY29uc3QgdXJsID0gYXdhaXQgX2dlbmVyYXRlSGFuZGxlclVybChhdXRoLCBldmVudCwgcHJvdmlkZXIpO1xyXG4gICAgICAgIGNvbnN0IGlhYlJlZiA9IGF3YWl0IF9wZXJmb3JtUmVkaXJlY3QodXJsKTtcclxuICAgICAgICByZXR1cm4gX3dhaXRGb3JBcHBSZXN1bWUoYXV0aCwgbWFuYWdlciwgaWFiUmVmKTtcclxuICAgIH1cclxuICAgIF9pc0lmcmFtZVdlYlN0b3JhZ2VTdXBwb3J0ZWQoX2F1dGgsIF9jYikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC4nKTtcclxuICAgIH1cclxuICAgIF9vcmlnaW5WYWxpZGF0aW9uKGF1dGgpIHtcclxuICAgICAgICBjb25zdCBrZXkgPSBhdXRoLl9rZXkoKTtcclxuICAgICAgICBpZiAoIXRoaXMub3JpZ2luVmFsaWRhdGlvblByb21pc2VzW2tleV0pIHtcclxuICAgICAgICAgICAgdGhpcy5vcmlnaW5WYWxpZGF0aW9uUHJvbWlzZXNba2V5XSA9IF92YWxpZGF0ZU9yaWdpbihhdXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3JpZ2luVmFsaWRhdGlvblByb21pc2VzW2tleV07XHJcbiAgICB9XHJcbiAgICBhdHRhY2hDYWxsYmFja0xpc3RlbmVycyhhdXRoLCBtYW5hZ2VyKSB7XHJcbiAgICAgICAgLy8gR2V0IHRoZSBnbG9iYWwgcGx1Z2luc1xyXG4gICAgICAgIGNvbnN0IHsgdW5pdmVyc2FsTGlua3MsIGhhbmRsZU9wZW5VUkwsIEJ1aWxkSW5mbyB9ID0gX2NvcmRvdmFXaW5kb3coKTtcclxuICAgICAgICBjb25zdCBub0V2ZW50VGltZW91dCA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBXZSBkaWRuJ3Qgc2VlIHRoYXQgaW5pdGlhbCBldmVudC4gQ2xlYXIgYW55IHBlbmRpbmcgb2JqZWN0IGFuZFxyXG4gICAgICAgICAgICAvLyBkaXNwYXRjaCBubyBldmVudFxyXG4gICAgICAgICAgICBhd2FpdCBfZ2V0QW5kUmVtb3ZlRXZlbnQoYXV0aCk7XHJcbiAgICAgICAgICAgIG1hbmFnZXIub25FdmVudChnZW5lcmF0ZU5vRXZlbnQoKSk7XHJcbiAgICAgICAgfSwgSU5JVElBTF9FVkVOVF9USU1FT1VUX01TKTtcclxuICAgICAgICBjb25zdCB1bml2ZXJzYWxMaW5rc0NiID0gYXN5bmMgKGV2ZW50RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBXZSBoYXZlIGFuIGV2ZW50IHNvIHdlIGNhbiBjbGVhciB0aGUgbm8gZXZlbnQgdGltZW91dFxyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQobm9FdmVudFRpbWVvdXQpO1xyXG4gICAgICAgICAgICBjb25zdCBwYXJ0aWFsRXZlbnQgPSBhd2FpdCBfZ2V0QW5kUmVtb3ZlRXZlbnQoYXV0aCk7XHJcbiAgICAgICAgICAgIGxldCBmaW5hbEV2ZW50ID0gbnVsbDtcclxuICAgICAgICAgICAgaWYgKHBhcnRpYWxFdmVudCAmJiAoZXZlbnREYXRhID09PSBudWxsIHx8IGV2ZW50RGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXZlbnREYXRhWyd1cmwnXSkpIHtcclxuICAgICAgICAgICAgICAgIGZpbmFsRXZlbnQgPSBfZXZlbnRGcm9tUGFydGlhbEFuZFVybChwYXJ0aWFsRXZlbnQsIGV2ZW50RGF0YVsndXJsJ10pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIElmIGZpbmFsRXZlbnQgaXMgbmV2ZXIgZmlsbGVkLCB0cmlnZ2VyIHdpdGggbm8gZXZlbnRcclxuICAgICAgICAgICAgbWFuYWdlci5vbkV2ZW50KGZpbmFsRXZlbnQgfHwgZ2VuZXJhdGVOb0V2ZW50KCkpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gVW5pdmVyc2FsIGxpbmtzIHN1YnNjcmliZXIgZG9lc24ndCBleGlzdCBmb3IgaU9TLCBzbyB3ZSBuZWVkIHRvIGNoZWNrXHJcbiAgICAgICAgaWYgKHR5cGVvZiB1bml2ZXJzYWxMaW5rcyAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICAgICAgdHlwZW9mIHVuaXZlcnNhbExpbmtzLnN1YnNjcmliZSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICB1bml2ZXJzYWxMaW5rcy5zdWJzY3JpYmUobnVsbCwgdW5pdmVyc2FsTGlua3NDYik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlPUyA3IG9yIDggY3VzdG9tIFVSTCBzY2hlbWVzLlxyXG4gICAgICAgIC8vIFRoaXMgaXMgYWxzbyB0aGUgY3VycmVudCBkZWZhdWx0IGJlaGF2aW9yIGZvciBpT1MgOSsuXHJcbiAgICAgICAgLy8gRm9yIHRoaXMgdG8gd29yaywgY29yZG92YS1wbHVnaW4tY3VzdG9tdXJsc2NoZW1lIG5lZWRzIHRvIGJlIGluc3RhbGxlZC5cclxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vRWRkeVZlcmJydWdnZW4vQ3VzdG9tLVVSTC1zY2hlbWVcclxuICAgICAgICAvLyBEbyBub3Qgb3ZlcndyaXRlIHRoZSBleGlzdGluZyBkZXZlbG9wZXIncyBVUkwgaGFuZGxlci5cclxuICAgICAgICBjb25zdCBleGlzdGluZ0hhbmRsZU9wZW5VUkwgPSBoYW5kbGVPcGVuVVJMO1xyXG4gICAgICAgIGNvbnN0IHBhY2thZ2VQcmVmaXggPSBgJHtCdWlsZEluZm8ucGFja2FnZU5hbWUudG9Mb3dlckNhc2UoKX06Ly9gO1xyXG4gICAgICAgIF9jb3Jkb3ZhV2luZG93KCkuaGFuZGxlT3BlblVSTCA9IGFzeW5jICh1cmwpID0+IHtcclxuICAgICAgICAgICAgaWYgKHVybC50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgocGFja2FnZVByZWZpeCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIFdlIHdhbnQgdGhpcyBpbnRlbnRpb25hbGx5IHRvIGZsb2F0XHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgICAgICAgICB1bml2ZXJzYWxMaW5rc0NiKHsgdXJsIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIENhbGwgdGhlIGRldmVsb3BlcidzIGhhbmRsZXIgaWYgaXQgaXMgcHJlc2VudC5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBleGlzdGluZ0hhbmRsZU9wZW5VUkwgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdIYW5kbGVPcGVuVVJMKHVybCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBkZXZlbG9wZXIgZXJyb3IuIERvbid0IHN0b3AgdGhlIGZsb3cgb2YgdGhlIFNESy5cclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQW4gaW1wbGVtZW50YXRpb24gb2Yge0BsaW5rIFBvcHVwUmVkaXJlY3RSZXNvbHZlcn0gc3VpdGFibGUgZm9yIENvcmRvdmFcclxuICogYmFzZWQgYXBwbGljYXRpb25zLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBjb3Jkb3ZhUG9wdXBSZWRpcmVjdFJlc29sdmVyID0gQ29yZG92YVBvcHVwUmVkaXJlY3RSZXNvbHZlcjtcclxuZnVuY3Rpb24gZ2VuZXJhdGVOb0V2ZW50KCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB0eXBlOiBcInVua25vd25cIiAvKiBVTktOT1dOICovLFxyXG4gICAgICAgIGV2ZW50SWQ6IG51bGwsXHJcbiAgICAgICAgc2Vzc2lvbklkOiBudWxsLFxyXG4gICAgICAgIHVybFJlc3BvbnNlOiBudWxsLFxyXG4gICAgICAgIHBvc3RCb2R5OiBudWxsLFxyXG4gICAgICAgIHRlbmFudElkOiBudWxsLFxyXG4gICAgICAgIGVycm9yOiBfY3JlYXRlRXJyb3IoXCJuby1hdXRoLWV2ZW50XCIgLyogTk9fQVVUSF9FVkVOVCAqLylcclxuICAgIH07XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gVGhpcyBmdW5jdGlvbiBzaG91bGQgb25seSBiZSBjYWxsZWQgYnkgZnJhbWV3b3JrcyAoZS5nLiBGaXJlYmFzZVVJLXdlYikgdG8gbG9nIHRoZWlyIHVzYWdlLlxyXG4vLyBJdCBpcyBub3QgaW50ZW5kZWQgZm9yIGRpcmVjdCB1c2UgYnkgZGV2ZWxvcGVyIGFwcHMuIE5PIGpzZG9jIGhlcmUgdG8gaW50ZW50aW9uYWxseSBsZWF2ZSBpdCBvdXRcclxuLy8gb2YgYXV0b2dlbmVyYXRlZCBkb2N1bWVudGF0aW9uIHBhZ2VzIHRvIHJlZHVjZSBhY2NpZGVudGFsIG1pc3VzZS5cclxuZnVuY3Rpb24gYWRkRnJhbWV3b3JrRm9yTG9nZ2luZyhhdXRoLCBmcmFtZXdvcmspIHtcclxuICAgIF9jYXN0QXV0aChhdXRoKS5fbG9nRnJhbWV3b3JrKGZyYW1ld29yayk7XHJcbn1cblxuZXhwb3J0IHsgYWRkRnJhbWV3b3JrRm9yTG9nZ2luZywgY29yZG92YVBvcHVwUmVkaXJlY3RSZXNvbHZlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJuYWwuanMubWFwXG4iLCJpbXBvcnQgeyBfcmVnaXN0ZXJDb21wb25lbnQsIHJlZ2lzdGVyVmVyc2lvbiwgX2dldFByb3ZpZGVyLCBnZXRBcHAsIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UsIFNES19WRVJTSU9OIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCB7IExvZ2dlciwgTG9nTGV2ZWwgfSBmcm9tICdAZmlyZWJhc2UvbG9nZ2VyJztcbmltcG9ydCB7IGNyZWF0ZU1vY2tVc2VyVG9rZW4sIGdldE1vZHVsYXJJbnN0YW5jZSwgZGVlcEVxdWFsLCBnZXRVQSwgaXNJbmRleGVkREJBdmFpbGFibGUsIGlzU2FmYXJpLCBpc01vYmlsZUNvcmRvdmEsIGlzUmVhY3ROYXRpdmUsIGlzRWxlY3Ryb24sIGlzSUUsIGlzVVdQLCBpc0Jyb3dzZXJFeHRlbnNpb24gfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBYaHJJbywgRXZlbnRUeXBlLCBFcnJvckNvZGUsIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQsIGdldFN0YXRFdmVudFRhcmdldCwgRmV0Y2hYbWxIdHRwRmFjdG9yeSwgV2ViQ2hhbm5lbCwgRXZlbnQsIFN0YXQgfSBmcm9tICdAZmlyZWJhc2Uvd2ViY2hhbm5lbC13cmFwcGVyJztcblxuY29uc3QgUyA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBTaW1wbGUgd3JhcHBlciBhcm91bmQgYSBudWxsYWJsZSBVSUQuIE1vc3RseSBleGlzdHMgdG8gbWFrZSBjb2RlIG1vcmVcbiAqIHJlYWRhYmxlLlxuICovXG5jbGFzcyBEIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudWlkID0gdDtcbiAgICB9XG4gICAgaXNBdXRoZW50aWNhdGVkKCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPSB0aGlzLnVpZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGtleSByZXByZXNlbnRpbmcgdGhpcyB1c2VyLCBzdWl0YWJsZSBmb3IgaW5jbHVzaW9uIGluIGFcbiAgICAgKiBkaWN0aW9uYXJ5LlxuICAgICAqLyAgICB0b0tleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNBdXRoZW50aWNhdGVkKCkgPyBcInVpZDpcIiArIHRoaXMudWlkIDogXCJhbm9ueW1vdXMtdXNlclwiO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHQudWlkID09PSB0aGlzLnVpZDtcbiAgICB9XG59XG5cbi8qKiBBIHVzZXIgd2l0aCBhIG51bGwgVUlELiAqLyBELlVOQVVUSEVOVElDQVRFRCA9IG5ldyBEKG51bGwpLCBcbi8vIFRPRE8obWlrZWxlaGVuKTogTG9vayBpbnRvIGdldHRpbmcgYSBwcm9wZXIgdWlkLWVxdWl2YWxlbnQgZm9yXG4vLyBub24tRmlyZWJhc2VBdXRoIHByb3ZpZGVycy5cbkQuR09PR0xFX0NSRURFTlRJQUxTID0gbmV3IEQoXCJnb29nbGUtY3JlZGVudGlhbHMtdWlkXCIpLCBELkZJUlNUX1BBUlRZID0gbmV3IEQoXCJmaXJzdC1wYXJ0eS11aWRcIiksIFxuRC5NT0NLX1VTRVIgPSBuZXcgRChcIm1vY2stdXNlclwiKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmxldCBDID0gXCI5LjYuMVwiO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgTiA9IG5ldyBMb2dnZXIoXCJAZmlyZWJhc2UvZmlyZXN0b3JlXCIpO1xuXG4vLyBIZWxwZXIgbWV0aG9kcyBhcmUgbmVlZGVkIGJlY2F1c2UgdmFyaWFibGVzIGNhbid0IGJlIGV4cG9ydGVkIGFzIHJlYWQvd3JpdGVcbmZ1bmN0aW9uIGsoKSB7XG4gICAgcmV0dXJuIE4ubG9nTGV2ZWw7XG59XG5cbi8qKlxuICogU2V0cyB0aGUgdmVyYm9zaXR5IG9mIENsb3VkIEZpcmVzdG9yZSBsb2dzIChkZWJ1ZywgZXJyb3IsIG9yIHNpbGVudCkuXG4gKlxuICogQHBhcmFtIGxvZ0xldmVsIC0gVGhlIHZlcmJvc2l0eSB5b3Ugc2V0IGZvciBhY3Rpdml0eSBhbmQgZXJyb3IgbG9nZ2luZy4gQ2FuXG4gKiAgIGJlIGFueSBvZiB0aGUgZm9sbG93aW5nIHZhbHVlczpcbiAqXG4gKiAgIDx1bD5cbiAqICAgICA8bGk+YGRlYnVnYCBmb3IgdGhlIG1vc3QgdmVyYm9zZSBsb2dnaW5nIGxldmVsLCBwcmltYXJpbHkgZm9yXG4gKiAgICAgZGVidWdnaW5nLjwvbGk+XG4gKiAgICAgPGxpPmBlcnJvcmAgdG8gbG9nIGVycm9ycyBvbmx5LjwvbGk+XG4gKiAgICAgPGxpPjxjb2RlPmBzaWxlbnRgIHRvIHR1cm4gb2ZmIGxvZ2dpbmcuPC9saT5cbiAqICAgPC91bD5cbiAqLyBmdW5jdGlvbiB4KHQpIHtcbiAgICBOLnNldExvZ0xldmVsKHQpO1xufVxuXG5mdW5jdGlvbiAkKHQsIC4uLmUpIHtcbiAgICBpZiAoTi5sb2dMZXZlbCA8PSBMb2dMZXZlbC5ERUJVRykge1xuICAgICAgICBjb25zdCBuID0gZS5tYXAoTSk7XG4gICAgICAgIE4uZGVidWcoYEZpcmVzdG9yZSAoJHtDfSk6ICR7dH1gLCAuLi5uKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEYodCwgLi4uZSkge1xuICAgIGlmIChOLmxvZ0xldmVsIDw9IExvZ0xldmVsLkVSUk9SKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLm1hcChNKTtcbiAgICAgICAgTi5lcnJvcihgRmlyZXN0b3JlICgke0N9KTogJHt0fWAsIC4uLm4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBPKHQsIC4uLmUpIHtcbiAgICBpZiAoTi5sb2dMZXZlbCA8PSBMb2dMZXZlbC5XQVJOKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLm1hcChNKTtcbiAgICAgICAgTi53YXJuKGBGaXJlc3RvcmUgKCR7Q30pOiAke3R9YCwgLi4ubik7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIGFkZGl0aW9uYWwgbG9nIHBhcmFtZXRlciB0byBhIHN0cmluZyByZXByZXNlbnRhdGlvbi5cbiAqLyBmdW5jdGlvbiBNKHQpIHtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCkgcmV0dXJuIHQ7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGUgPSB0LCBKU09OLnN0cmluZ2lmeShlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIENvbnZlcnRpbmcgdG8gSlNPTiBmYWlsZWQsIGp1c3QgbG9nIHRoZSBvYmplY3QgZGlyZWN0bHlcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgLyoqIEZvcm1hdHMgYW4gb2JqZWN0IGFzIGEgSlNPTiBzdHJpbmcsIHN1aXRhYmxlIGZvciBsb2dnaW5nLiAqL1xuICAgIHZhciBlO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBVbmNvbmRpdGlvbmFsbHkgZmFpbHMsIHRocm93aW5nIGFuIEVycm9yIHdpdGggdGhlIGdpdmVuIG1lc3NhZ2UuXG4gKiBNZXNzYWdlcyBhcmUgc3RyaXBwZWQgaW4gcHJvZHVjdGlvbiBidWlsZHMuXG4gKlxuICogUmV0dXJucyBgbmV2ZXJgIGFuZCBjYW4gYmUgdXNlZCBpbiBleHByZXNzaW9uczpcbiAqIEBleGFtcGxlXG4gKiBsZXQgZnV0dXJlVmFyID0gZmFpbCgnbm90IGltcGxlbWVudGVkIHlldCcpO1xuICovIGZ1bmN0aW9uIEwodCA9IFwiVW5leHBlY3RlZCBzdGF0ZVwiKSB7XG4gICAgLy8gTG9nIHRoZSBmYWlsdXJlIGluIGFkZGl0aW9uIHRvIHRocm93IGFuIGV4Y2VwdGlvbiwganVzdCBpbiBjYXNlIHRoZVxuICAgIC8vIGV4Y2VwdGlvbiBpcyBzd2FsbG93ZWQuXG4gICAgY29uc3QgZSA9IGBGSVJFU1RPUkUgKCR7Q30pIElOVEVSTkFMIEFTU0VSVElPTiBGQUlMRUQ6IGAgKyB0O1xuICAgIC8vIE5PVEU6IFdlIGRvbid0IHVzZSBGaXJlc3RvcmVFcnJvciBoZXJlIGJlY2F1c2UgdGhlc2UgYXJlIGludGVybmFsIGZhaWx1cmVzXG4gICAgLy8gdGhhdCBjYW5ub3QgYmUgaGFuZGxlZCBieSB0aGUgdXNlci4gKEFsc28gaXQgd291bGQgY3JlYXRlIGEgY2lyY3VsYXJcbiAgICAvLyBkZXBlbmRlbmN5IGJldHdlZW4gdGhlIGVycm9yIGFuZCBhc3NlcnQgbW9kdWxlcyB3aGljaCBkb2Vzbid0IHdvcmsuKVxuICAgIHRocm93IEYoZSksIG5ldyBFcnJvcihlKTtcbn1cblxuLyoqXG4gKiBGYWlscyBpZiB0aGUgZ2l2ZW4gYXNzZXJ0aW9uIGNvbmRpdGlvbiBpcyBmYWxzZSwgdGhyb3dpbmcgYW4gRXJyb3Igd2l0aCB0aGVcbiAqIGdpdmVuIG1lc3NhZ2UgaWYgaXQgZGlkLlxuICpcbiAqIE1lc3NhZ2VzIGFyZSBzdHJpcHBlZCBpbiBwcm9kdWN0aW9uIGJ1aWxkcy5cbiAqLyBmdW5jdGlvbiBCKHQsIGUpIHtcbiAgICB0IHx8IEwoKTtcbn1cblxuLyoqXG4gKiBGYWlscyBpZiB0aGUgZ2l2ZW4gYXNzZXJ0aW9uIGNvbmRpdGlvbiBpcyBmYWxzZSwgdGhyb3dpbmcgYW4gRXJyb3Igd2l0aCB0aGVcbiAqIGdpdmVuIG1lc3NhZ2UgaWYgaXQgZGlkLlxuICpcbiAqIFRoZSBjb2RlIG9mIGNhbGxzaXRlcyBpbnZva2luZyB0aGlzIGZ1bmN0aW9uIGFyZSBzdHJpcHBlZCBvdXQgaW4gcHJvZHVjdGlvblxuICogYnVpbGRzLiBBbnkgc2lkZS1lZmZlY3RzIG9mIGNvZGUgd2l0aGluIHRoZSBkZWJ1Z0Fzc2VydCgpIGludm9jYXRpb24gd2lsbCBub3RcbiAqIGhhcHBlbiBpbiB0aGlzIGNhc2UuXG4gKlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gVSh0LCBlKSB7XG4gICAgdCB8fCBMKCk7XG59XG5cbi8qKlxuICogQ2FzdHMgYG9iamAgdG8gYFRgLiBJbiBub24tcHJvZHVjdGlvbiBidWlsZHMsIHZlcmlmaWVzIHRoYXQgYG9iamAgaXMgYW5cbiAqIGluc3RhbmNlIG9mIGBUYCBiZWZvcmUgY2FzdGluZy5cbiAqLyBmdW5jdGlvbiBxKHQsIFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmUpIHtcbiAgICByZXR1cm4gdDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgSyA9IHtcbiAgICAvLyBDYXVzZXMgYXJlIGNvcGllZCBmcm9tOlxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ncnBjL2dycGMvYmxvYi9iY2VlYzk0ZWE0ZmM1ZjAwODVkODEyMzVkOGUxYzA2Nzk4ZGMzNDFhL2luY2x1ZGUvZ3JwYyUyQiUyQi9pbXBsL2NvZGVnZW4vc3RhdHVzX2NvZGVfZW51bS5oXG4gICAgLyoqIE5vdCBhbiBlcnJvcjsgcmV0dXJuZWQgb24gc3VjY2Vzcy4gKi9cbiAgICBPSzogXCJva1wiLFxuICAgIC8qKiBUaGUgb3BlcmF0aW9uIHdhcyBjYW5jZWxsZWQgKHR5cGljYWxseSBieSB0aGUgY2FsbGVyKS4gKi9cbiAgICBDQU5DRUxMRUQ6IFwiY2FuY2VsbGVkXCIsXG4gICAgLyoqIFVua25vd24gZXJyb3Igb3IgYW4gZXJyb3IgZnJvbSBhIGRpZmZlcmVudCBlcnJvciBkb21haW4uICovXG4gICAgVU5LTk9XTjogXCJ1bmtub3duXCIsXG4gICAgLyoqXG4gICAgICogQ2xpZW50IHNwZWNpZmllZCBhbiBpbnZhbGlkIGFyZ3VtZW50LiBOb3RlIHRoYXQgdGhpcyBkaWZmZXJzIGZyb21cbiAgICAgKiBGQUlMRURfUFJFQ09ORElUSU9OLiBJTlZBTElEX0FSR1VNRU5UIGluZGljYXRlcyBhcmd1bWVudHMgdGhhdCBhcmVcbiAgICAgKiBwcm9ibGVtYXRpYyByZWdhcmRsZXNzIG9mIHRoZSBzdGF0ZSBvZiB0aGUgc3lzdGVtIChlLmcuLCBhIG1hbGZvcm1lZCBmaWxlXG4gICAgICogbmFtZSkuXG4gICAgICovXG4gICAgSU5WQUxJRF9BUkdVTUVOVDogXCJpbnZhbGlkLWFyZ3VtZW50XCIsXG4gICAgLyoqXG4gICAgICogRGVhZGxpbmUgZXhwaXJlZCBiZWZvcmUgb3BlcmF0aW9uIGNvdWxkIGNvbXBsZXRlLiBGb3Igb3BlcmF0aW9ucyB0aGF0XG4gICAgICogY2hhbmdlIHRoZSBzdGF0ZSBvZiB0aGUgc3lzdGVtLCB0aGlzIGVycm9yIG1heSBiZSByZXR1cm5lZCBldmVuIGlmIHRoZVxuICAgICAqIG9wZXJhdGlvbiBoYXMgY29tcGxldGVkIHN1Y2Nlc3NmdWxseS4gRm9yIGV4YW1wbGUsIGEgc3VjY2Vzc2Z1bCByZXNwb25zZVxuICAgICAqIGZyb20gYSBzZXJ2ZXIgY291bGQgaGF2ZSBiZWVuIGRlbGF5ZWQgbG9uZyBlbm91Z2ggZm9yIHRoZSBkZWFkbGluZSB0b1xuICAgICAqIGV4cGlyZS5cbiAgICAgKi9cbiAgICBERUFETElORV9FWENFRURFRDogXCJkZWFkbGluZS1leGNlZWRlZFwiLFxuICAgIC8qKiBTb21lIHJlcXVlc3RlZCBlbnRpdHkgKGUuZy4sIGZpbGUgb3IgZGlyZWN0b3J5KSB3YXMgbm90IGZvdW5kLiAqL1xuICAgIE5PVF9GT1VORDogXCJub3QtZm91bmRcIixcbiAgICAvKipcbiAgICAgKiBTb21lIGVudGl0eSB0aGF0IHdlIGF0dGVtcHRlZCB0byBjcmVhdGUgKGUuZy4sIGZpbGUgb3IgZGlyZWN0b3J5KSBhbHJlYWR5XG4gICAgICogZXhpc3RzLlxuICAgICAqL1xuICAgIEFMUkVBRFlfRVhJU1RTOiBcImFscmVhZHktZXhpc3RzXCIsXG4gICAgLyoqXG4gICAgICogVGhlIGNhbGxlciBkb2VzIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gZXhlY3V0ZSB0aGUgc3BlY2lmaWVkIG9wZXJhdGlvbi5cbiAgICAgKiBQRVJNSVNTSU9OX0RFTklFRCBtdXN0IG5vdCBiZSB1c2VkIGZvciByZWplY3Rpb25zIGNhdXNlZCBieSBleGhhdXN0aW5nXG4gICAgICogc29tZSByZXNvdXJjZSAodXNlIFJFU09VUkNFX0VYSEFVU1RFRCBpbnN0ZWFkIGZvciB0aG9zZSBlcnJvcnMpLlxuICAgICAqIFBFUk1JU1NJT05fREVOSUVEIG11c3Qgbm90IGJlIHVzZWQgaWYgdGhlIGNhbGxlciBjYW4gbm90IGJlIGlkZW50aWZpZWRcbiAgICAgKiAodXNlIFVOQVVUSEVOVElDQVRFRCBpbnN0ZWFkIGZvciB0aG9zZSBlcnJvcnMpLlxuICAgICAqL1xuICAgIFBFUk1JU1NJT05fREVOSUVEOiBcInBlcm1pc3Npb24tZGVuaWVkXCIsXG4gICAgLyoqXG4gICAgICogVGhlIHJlcXVlc3QgZG9lcyBub3QgaGF2ZSB2YWxpZCBhdXRoZW50aWNhdGlvbiBjcmVkZW50aWFscyBmb3IgdGhlXG4gICAgICogb3BlcmF0aW9uLlxuICAgICAqL1xuICAgIFVOQVVUSEVOVElDQVRFRDogXCJ1bmF1dGhlbnRpY2F0ZWRcIixcbiAgICAvKipcbiAgICAgKiBTb21lIHJlc291cmNlIGhhcyBiZWVuIGV4aGF1c3RlZCwgcGVyaGFwcyBhIHBlci11c2VyIHF1b3RhLCBvciBwZXJoYXBzIHRoZVxuICAgICAqIGVudGlyZSBmaWxlIHN5c3RlbSBpcyBvdXQgb2Ygc3BhY2UuXG4gICAgICovXG4gICAgUkVTT1VSQ0VfRVhIQVVTVEVEOiBcInJlc291cmNlLWV4aGF1c3RlZFwiLFxuICAgIC8qKlxuICAgICAqIE9wZXJhdGlvbiB3YXMgcmVqZWN0ZWQgYmVjYXVzZSB0aGUgc3lzdGVtIGlzIG5vdCBpbiBhIHN0YXRlIHJlcXVpcmVkIGZvclxuICAgICAqIHRoZSBvcGVyYXRpb24ncyBleGVjdXRpb24uIEZvciBleGFtcGxlLCBkaXJlY3RvcnkgdG8gYmUgZGVsZXRlZCBtYXkgYmVcbiAgICAgKiBub24tZW1wdHksIGFuIHJtZGlyIG9wZXJhdGlvbiBpcyBhcHBsaWVkIHRvIGEgbm9uLWRpcmVjdG9yeSwgZXRjLlxuICAgICAqXG4gICAgICogQSBsaXRtdXMgdGVzdCB0aGF0IG1heSBoZWxwIGEgc2VydmljZSBpbXBsZW1lbnRvciBpbiBkZWNpZGluZ1xuICAgICAqIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiwgQUJPUlRFRCwgYW5kIFVOQVZBSUxBQkxFOlxuICAgICAqICAoYSkgVXNlIFVOQVZBSUxBQkxFIGlmIHRoZSBjbGllbnQgY2FuIHJldHJ5IGp1c3QgdGhlIGZhaWxpbmcgY2FsbC5cbiAgICAgKiAgKGIpIFVzZSBBQk9SVEVEIGlmIHRoZSBjbGllbnQgc2hvdWxkIHJldHJ5IGF0IGEgaGlnaGVyLWxldmVsXG4gICAgICogICAgICAoZS5nLiwgcmVzdGFydGluZyBhIHJlYWQtbW9kaWZ5LXdyaXRlIHNlcXVlbmNlKS5cbiAgICAgKiAgKGMpIFVzZSBGQUlMRURfUFJFQ09ORElUSU9OIGlmIHRoZSBjbGllbnQgc2hvdWxkIG5vdCByZXRyeSB1bnRpbFxuICAgICAqICAgICAgdGhlIHN5c3RlbSBzdGF0ZSBoYXMgYmVlbiBleHBsaWNpdGx5IGZpeGVkLiBFLmcuLCBpZiBhbiBcInJtZGlyXCJcbiAgICAgKiAgICAgIGZhaWxzIGJlY2F1c2UgdGhlIGRpcmVjdG9yeSBpcyBub24tZW1wdHksIEZBSUxFRF9QUkVDT05ESVRJT05cbiAgICAgKiAgICAgIHNob3VsZCBiZSByZXR1cm5lZCBzaW5jZSB0aGUgY2xpZW50IHNob3VsZCBub3QgcmV0cnkgdW5sZXNzXG4gICAgICogICAgICB0aGV5IGhhdmUgZmlyc3QgZml4ZWQgdXAgdGhlIGRpcmVjdG9yeSBieSBkZWxldGluZyBmaWxlcyBmcm9tIGl0LlxuICAgICAqICAoZCkgVXNlIEZBSUxFRF9QUkVDT05ESVRJT04gaWYgdGhlIGNsaWVudCBwZXJmb3JtcyBjb25kaXRpb25hbFxuICAgICAqICAgICAgUkVTVCBHZXQvVXBkYXRlL0RlbGV0ZSBvbiBhIHJlc291cmNlIGFuZCB0aGUgcmVzb3VyY2Ugb24gdGhlXG4gICAgICogICAgICBzZXJ2ZXIgZG9lcyBub3QgbWF0Y2ggdGhlIGNvbmRpdGlvbi4gRS5nLiwgY29uZmxpY3RpbmdcbiAgICAgKiAgICAgIHJlYWQtbW9kaWZ5LXdyaXRlIG9uIHRoZSBzYW1lIHJlc291cmNlLlxuICAgICAqL1xuICAgIEZBSUxFRF9QUkVDT05ESVRJT046IFwiZmFpbGVkLXByZWNvbmRpdGlvblwiLFxuICAgIC8qKlxuICAgICAqIFRoZSBvcGVyYXRpb24gd2FzIGFib3J0ZWQsIHR5cGljYWxseSBkdWUgdG8gYSBjb25jdXJyZW5jeSBpc3N1ZSBsaWtlXG4gICAgICogc2VxdWVuY2VyIGNoZWNrIGZhaWx1cmVzLCB0cmFuc2FjdGlvbiBhYm9ydHMsIGV0Yy5cbiAgICAgKlxuICAgICAqIFNlZSBsaXRtdXMgdGVzdCBhYm92ZSBmb3IgZGVjaWRpbmcgYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OLCBBQk9SVEVELFxuICAgICAqIGFuZCBVTkFWQUlMQUJMRS5cbiAgICAgKi9cbiAgICBBQk9SVEVEOiBcImFib3J0ZWRcIixcbiAgICAvKipcbiAgICAgKiBPcGVyYXRpb24gd2FzIGF0dGVtcHRlZCBwYXN0IHRoZSB2YWxpZCByYW5nZS4gRS5nLiwgc2Vla2luZyBvciByZWFkaW5nXG4gICAgICogcGFzdCBlbmQgb2YgZmlsZS5cbiAgICAgKlxuICAgICAqIFVubGlrZSBJTlZBTElEX0FSR1VNRU5ULCB0aGlzIGVycm9yIGluZGljYXRlcyBhIHByb2JsZW0gdGhhdCBtYXkgYmUgZml4ZWRcbiAgICAgKiBpZiB0aGUgc3lzdGVtIHN0YXRlIGNoYW5nZXMuIEZvciBleGFtcGxlLCBhIDMyLWJpdCBmaWxlIHN5c3RlbSB3aWxsXG4gICAgICogZ2VuZXJhdGUgSU5WQUxJRF9BUkdVTUVOVCBpZiBhc2tlZCB0byByZWFkIGF0IGFuIG9mZnNldCB0aGF0IGlzIG5vdCBpbiB0aGVcbiAgICAgKiByYW5nZSBbMCwyXjMyLTFdLCBidXQgaXQgd2lsbCBnZW5lcmF0ZSBPVVRfT0ZfUkFOR0UgaWYgYXNrZWQgdG8gcmVhZCBmcm9tXG4gICAgICogYW4gb2Zmc2V0IHBhc3QgdGhlIGN1cnJlbnQgZmlsZSBzaXplLlxuICAgICAqXG4gICAgICogVGhlcmUgaXMgYSBmYWlyIGJpdCBvZiBvdmVybGFwIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiBhbmRcbiAgICAgKiBPVVRfT0ZfUkFOR0UuIFdlIHJlY29tbWVuZCB1c2luZyBPVVRfT0ZfUkFOR0UgKHRoZSBtb3JlIHNwZWNpZmljIGVycm9yKVxuICAgICAqIHdoZW4gaXQgYXBwbGllcyBzbyB0aGF0IGNhbGxlcnMgd2hvIGFyZSBpdGVyYXRpbmcgdGhyb3VnaCBhIHNwYWNlIGNhblxuICAgICAqIGVhc2lseSBsb29rIGZvciBhbiBPVVRfT0ZfUkFOR0UgZXJyb3IgdG8gZGV0ZWN0IHdoZW4gdGhleSBhcmUgZG9uZS5cbiAgICAgKi9cbiAgICBPVVRfT0ZfUkFOR0U6IFwib3V0LW9mLXJhbmdlXCIsXG4gICAgLyoqIE9wZXJhdGlvbiBpcyBub3QgaW1wbGVtZW50ZWQgb3Igbm90IHN1cHBvcnRlZC9lbmFibGVkIGluIHRoaXMgc2VydmljZS4gKi9cbiAgICBVTklNUExFTUVOVEVEOiBcInVuaW1wbGVtZW50ZWRcIixcbiAgICAvKipcbiAgICAgKiBJbnRlcm5hbCBlcnJvcnMuIE1lYW5zIHNvbWUgaW52YXJpYW50cyBleHBlY3RlZCBieSB1bmRlcmx5aW5nIFN5c3RlbSBoYXNcbiAgICAgKiBiZWVuIGJyb2tlbi4gSWYgeW91IHNlZSBvbmUgb2YgdGhlc2UgZXJyb3JzLCBTb21ldGhpbmcgaXMgdmVyeSBicm9rZW4uXG4gICAgICovXG4gICAgSU5URVJOQUw6IFwiaW50ZXJuYWxcIixcbiAgICAvKipcbiAgICAgKiBUaGUgc2VydmljZSBpcyBjdXJyZW50bHkgdW5hdmFpbGFibGUuIFRoaXMgaXMgYSBtb3N0IGxpa2VseSBhIHRyYW5zaWVudFxuICAgICAqIGNvbmRpdGlvbiBhbmQgbWF5IGJlIGNvcnJlY3RlZCBieSByZXRyeWluZyB3aXRoIGEgYmFja29mZi5cbiAgICAgKlxuICAgICAqIFNlZSBsaXRtdXMgdGVzdCBhYm92ZSBmb3IgZGVjaWRpbmcgYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OLCBBQk9SVEVELFxuICAgICAqIGFuZCBVTkFWQUlMQUJMRS5cbiAgICAgKi9cbiAgICBVTkFWQUlMQUJMRTogXCJ1bmF2YWlsYWJsZVwiLFxuICAgIC8qKiBVbnJlY292ZXJhYmxlIGRhdGEgbG9zcyBvciBjb3JydXB0aW9uLiAqL1xuICAgIERBVEFfTE9TUzogXCJkYXRhLWxvc3NcIlxufTtcblxuLyoqIEFuIGVycm9yIHJldHVybmVkIGJ5IGEgRmlyZXN0b3JlIG9wZXJhdGlvbi4gKi8gY2xhc3MgaiBleHRlbmRzIEVycm9yIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBiYWNrZW5kIGVycm9yIGNvZGUgYXNzb2NpYXRlZCB3aXRoIHRoaXMgZXJyb3IuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogQSBjdXN0b20gZXJyb3IgZGVzY3JpcHRpb24uXG4gICAgICovXG4gICAgZSkge1xuICAgICAgICBzdXBlcihlKSwgdGhpcy5jb2RlID0gdCwgdGhpcy5tZXNzYWdlID0gZSwgXG4gICAgICAgIC8qKiBUaGUgY3VzdG9tIG5hbWUgZm9yIGFsbCBGaXJlc3RvcmVFcnJvcnMuICovXG4gICAgICAgIHRoaXMubmFtZSA9IFwiRmlyZWJhc2VFcnJvclwiLCBcbiAgICAgICAgLy8gSEFDSzogV2Ugd3JpdGUgYSB0b1N0cmluZyBwcm9wZXJ0eSBkaXJlY3RseSBiZWNhdXNlIEVycm9yIGlzIG5vdCBhIHJlYWxcbiAgICAgICAgLy8gY2xhc3MgYW5kIHNvIGluaGVyaXRhbmNlIGRvZXMgbm90IHdvcmsgY29ycmVjdGx5LiBXZSBjb3VsZCBhbHRlcm5hdGl2ZWx5XG4gICAgICAgIC8vIGRvIHRoZSBzYW1lIFwiYmFjay1kb29yIGluaGVyaXRhbmNlXCIgdHJpY2sgdGhhdCBGaXJlYmFzZUVycm9yIGRvZXMuXG4gICAgICAgIHRoaXMudG9TdHJpbmcgPSAoKSA9PiBgJHt0aGlzLm5hbWV9OiBbY29kZT0ke3RoaXMuY29kZX1dOiAke3RoaXMubWVzc2FnZX1gO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgUSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlID0gdCwgdGhpcy5yZWplY3QgPSBlO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBXIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMudXNlciA9IGUsIHRoaXMudHlwZSA9IFwiT0F1dGhcIiwgdGhpcy5oZWFkZXJzID0gbmV3IE1hcCwgdGhpcy5oZWFkZXJzLnNldChcIkF1dGhvcml6YXRpb25cIiwgYEJlYXJlciAke3R9YCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgQ3JlZGVudGlhbHNQcm92aWRlciB0aGF0IGFsd2F5cyB5aWVsZHMgYW4gZW1wdHkgdG9rZW4uXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBHIHtcbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICB9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge31cbiAgICBzdGFydCh0LCBlKSB7XG4gICAgICAgIC8vIEZpcmUgd2l0aCBpbml0aWFsIHVzZXIuXG4gICAgICAgIHQuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gZShELlVOQVVUSEVOVElDQVRFRCkpKTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7fVxufVxuXG4vKipcbiAqIEEgQ3JlZGVudGlhbHNQcm92aWRlciB0aGF0IGFsd2F5cyByZXR1cm5zIGEgY29uc3RhbnQgdG9rZW4uIFVzZWQgZm9yXG4gKiBlbXVsYXRvciB0b2tlbiBtb2NraW5nLlxuICovIGNsYXNzIHoge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy50b2tlbiA9IHQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogU3RvcmVzIHRoZSBsaXN0ZW5lciByZWdpc3RlcmVkIHdpdGggc2V0Q2hhbmdlTGlzdGVuZXIoKVxuICAgICAgICAgKiBUaGlzIGlzbid0IGFjdHVhbGx5IG5lY2Vzc2FyeSBzaW5jZSB0aGUgVUlEIG5ldmVyIGNoYW5nZXMsIGJ1dCB3ZSB1c2UgdGhpc1xuICAgICAgICAgKiB0byB2ZXJpZnkgdGhlIGxpc3RlbiBjb250cmFjdCBpcyBhZGhlcmVkIHRvIGluIHRlc3RzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IG51bGw7XG4gICAgfVxuICAgIGdldFRva2VuKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMudG9rZW4pO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7fVxuICAgIHN0YXJ0KHQsIGUpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IGUsIFxuICAgICAgICAvLyBGaXJlIHdpdGggaW5pdGlhbCB1c2VyLlxuICAgICAgICB0LmVucXVldWVSZXRyeWFibGUoKCgpID0+IGUodGhpcy50b2tlbi51c2VyKSkpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IG51bGw7XG4gICAgfVxufVxuXG5jbGFzcyBIIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudCA9IHQsIFxuICAgICAgICAvKiogVHJhY2tzIHRoZSBjdXJyZW50IFVzZXIuICovXG4gICAgICAgIHRoaXMuY3VycmVudFVzZXIgPSBELlVOQVVUSEVOVElDQVRFRCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb3VudGVyIHVzZWQgdG8gZGV0ZWN0IGlmIHRoZSB0b2tlbiBjaGFuZ2VkIHdoaWxlIGEgZ2V0VG9rZW4gcmVxdWVzdCB3YXNcbiAgICAgICAgICogb3V0c3RhbmRpbmcuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmkgPSAwLCB0aGlzLmZvcmNlUmVmcmVzaCA9ICExLCB0aGlzLmF1dGggPSBudWxsO1xuICAgIH1cbiAgICBzdGFydCh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gdGhpcy5pO1xuICAgICAgICAvLyBBIGNoYW5nZSBsaXN0ZW5lciB0aGF0IHByZXZlbnRzIGRvdWJsZS1maXJpbmcgZm9yIHRoZSBzYW1lIHRva2VuIGNoYW5nZS5cbiAgICAgICAgICAgICAgICBjb25zdCBzID0gdCA9PiB0aGlzLmkgIT09IG4gPyAobiA9IHRoaXMuaSwgZSh0KSkgOiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgLy8gQSBwcm9taXNlIHRoYXQgY2FuIGJlIHdhaXRlZCBvbiB0byBibG9jayBvbiB0aGUgbmV4dCB0b2tlbiBjaGFuZ2UuXG4gICAgICAgIC8vIFRoaXMgcHJvbWlzZSBpcyByZS1jcmVhdGVkIGFmdGVyIGVhY2ggY2hhbmdlLlxuICAgICAgICAgICAgICAgIGxldCBpID0gbmV3IFE7XG4gICAgICAgIHRoaXMubyA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaSsrLCB0aGlzLmN1cnJlbnRVc2VyID0gdGhpcy51KCksIGkucmVzb2x2ZSgpLCBpID0gbmV3IFEsIHQuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gcyh0aGlzLmN1cnJlbnRVc2VyKSkpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCByID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IGk7XG4gICAgICAgICAgICB0LmVucXVldWVSZXRyeWFibGUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBlLnByb21pc2UsIGF3YWl0IHModGhpcy5jdXJyZW50VXNlcik7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0sIG8gPSB0ID0+IHtcbiAgICAgICAgICAgICQoXCJGaXJlYmFzZUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyXCIsIFwiQXV0aCBkZXRlY3RlZFwiKSwgdGhpcy5hdXRoID0gdCwgdGhpcy5hdXRoLmFkZEF1dGhUb2tlbkxpc3RlbmVyKHRoaXMubyksIFxuICAgICAgICAgICAgcigpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnQub25Jbml0KCh0ID0+IG8odCkpKSwgXG4gICAgICAgIC8vIE91ciB1c2VycyBjYW4gaW5pdGlhbGl6ZSBBdXRoIHJpZ2h0IGFmdGVyIEZpcmVzdG9yZSwgc28gd2UgZ2l2ZSBpdFxuICAgICAgICAvLyBhIGNoYW5jZSB0byByZWdpc3RlciBpdHNlbGYgd2l0aCB0aGUgY29tcG9uZW50IGZyYW1ld29yayBiZWZvcmUgd2VcbiAgICAgICAgLy8gZGV0ZXJtaW5lIHdoZXRoZXIgdG8gc3RhcnQgdXAgaW4gdW5hdXRoZW50aWNhdGVkIG1vZGUuXG4gICAgICAgIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5hdXRoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMudC5nZXRJbW1lZGlhdGUoe1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogITBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0ID8gbyh0KSA6IChcbiAgICAgICAgICAgICAgICAvLyBJZiBhdXRoIGlzIHN0aWxsIG5vdCBhdmFpbGFibGUsIHByb2NlZWQgd2l0aCBgbnVsbGAgdXNlclxuICAgICAgICAgICAgICAgICQoXCJGaXJlYmFzZUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyXCIsIFwiQXV0aCBub3QgeWV0IGRldGVjdGVkXCIpLCBpLnJlc29sdmUoKSwgaSA9IG5ldyBRKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksIDApLCByKCk7XG4gICAgfVxuICAgIGdldFRva2VuKCkge1xuICAgICAgICAvLyBUYWtlIG5vdGUgb2YgdGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIHRva2VuQ291bnRlciBzbyB0aGF0IHRoaXMgbWV0aG9kXG4gICAgICAgIC8vIGNhbiBmYWlsICh3aXRoIGFuIEFCT1JURUQgZXJyb3IpIGlmIHRoZXJlIGlzIGEgdG9rZW4gY2hhbmdlIHdoaWxlIHRoZVxuICAgICAgICAvLyByZXF1ZXN0IGlzIG91dHN0YW5kaW5nLlxuICAgICAgICBjb25zdCB0ID0gdGhpcy5pLCBlID0gdGhpcy5mb3JjZVJlZnJlc2g7XG4gICAgICAgIHJldHVybiB0aGlzLmZvcmNlUmVmcmVzaCA9ICExLCB0aGlzLmF1dGggPyB0aGlzLmF1dGguZ2V0VG9rZW4oZSkudGhlbigoZSA9PiBcbiAgICAgICAgLy8gQ2FuY2VsIHRoZSByZXF1ZXN0IHNpbmNlIHRoZSB0b2tlbiBjaGFuZ2VkIHdoaWxlIHRoZSByZXF1ZXN0IHdhc1xuICAgICAgICAvLyBvdXRzdGFuZGluZyBzbyB0aGUgcmVzcG9uc2UgaXMgcG90ZW50aWFsbHkgZm9yIGEgcHJldmlvdXMgdXNlciAod2hpY2hcbiAgICAgICAgLy8gdXNlciwgd2UgY2FuJ3QgYmUgc3VyZSkuXG4gICAgICAgIHRoaXMuaSAhPT0gdCA/ICgkKFwiRmlyZWJhc2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlclwiLCBcImdldFRva2VuIGFib3J0ZWQgZHVlIHRvIHRva2VuIGNoYW5nZS5cIiksIFxuICAgICAgICB0aGlzLmdldFRva2VuKCkpIDogZSA/IChCKFwic3RyaW5nXCIgPT0gdHlwZW9mIGUuYWNjZXNzVG9rZW4pLCBuZXcgVyhlLmFjY2Vzc1Rva2VuLCB0aGlzLmN1cnJlbnRVc2VyKSkgOiBudWxsKSkgOiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb2tlbigpIHtcbiAgICAgICAgdGhpcy5mb3JjZVJlZnJlc2ggPSAhMDtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIHRoaXMuYXV0aCAmJiB0aGlzLmF1dGgucmVtb3ZlQXV0aFRva2VuTGlzdGVuZXIodGhpcy5vKTtcbiAgICB9XG4gICAgLy8gQXV0aC5nZXRVaWQoKSBjYW4gcmV0dXJuIG51bGwgZXZlbiB3aXRoIGEgdXNlciBsb2dnZWQgaW4uIEl0IGlzIGJlY2F1c2VcbiAgICAvLyBnZXRVaWQoKSBpcyBzeW5jaHJvbm91cywgYnV0IHRoZSBhdXRoIGNvZGUgcG9wdWxhdGluZyBVaWQgaXMgYXN5bmNocm9ub3VzLlxuICAgIC8vIFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBpbiB0aGUgQXV0aFRva2VuTGlzdGVuZXIgY2FsbGJhY2tcbiAgICAvLyB0byBndWFyYW50ZWUgdG8gZ2V0IHRoZSBhY3R1YWwgdXNlci5cbiAgICB1KCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5hdXRoICYmIHRoaXMuYXV0aC5nZXRVaWQoKTtcbiAgICAgICAgcmV0dXJuIEIobnVsbCA9PT0gdCB8fCBcInN0cmluZ1wiID09IHR5cGVvZiB0KSwgbmV3IEQodCk7XG4gICAgfVxufVxuXG4vKlxuICogRmlyc3RQYXJ0eVRva2VuIHByb3ZpZGVzIGEgZnJlc2ggdG9rZW4gZWFjaCB0aW1lIGl0cyB2YWx1ZVxuICogaXMgcmVxdWVzdGVkLCBiZWNhdXNlIGlmIHRoZSB0b2tlbiBpcyB0b28gb2xkLCByZXF1ZXN0cyB3aWxsIGJlIHJlamVjdGVkLlxuICogVGVjaG5pY2FsbHkgdGhpcyBtYXkgbm8gbG9uZ2VyIGJlIG5lY2Vzc2FyeSBzaW5jZSB0aGUgU0RLIHNob3VsZCBncmFjZWZ1bGx5XG4gKiByZWNvdmVyIGZyb20gdW5hdXRoZW50aWNhdGVkIGVycm9ycyAoc2VlIGIvMzMxNDc4MTggZm9yIGNvbnRleHQpLCBidXQgaXQnc1xuICogc2FmZXIgdG8ga2VlcCB0aGUgaW1wbGVtZW50YXRpb24gYXMtaXMuXG4gKi8gY2xhc3MgSiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLnR5cGUgPSBcIkZpcnN0UGFydHlcIiwgdGhpcy51c2VyID0gRC5GSVJTVF9QQVJUWSwgdGhpcy5oZWFkZXJzID0gbmV3IE1hcCwgdGhpcy5oZWFkZXJzLnNldChcIlgtR29vZy1BdXRoVXNlclwiLCBlKTtcbiAgICAgICAgY29uc3QgcyA9IHQuYXV0aC5nZXRBdXRoSGVhZGVyVmFsdWVGb3JGaXJzdFBhcnR5KFtdKTtcbiAgICAgICAgcyAmJiB0aGlzLmhlYWRlcnMuc2V0KFwiQXV0aG9yaXphdGlvblwiLCBzKSwgbiAmJiB0aGlzLmhlYWRlcnMuc2V0KFwiWC1Hb29nLUlhbS1BdXRob3JpemF0aW9uLVRva2VuXCIsIG4pO1xuICAgIH1cbn1cblxuLypcbiAqIFByb3ZpZGVzIHVzZXIgY3JlZGVudGlhbHMgcmVxdWlyZWQgZm9yIHRoZSBGaXJlc3RvcmUgSmF2YVNjcmlwdCBTREtcbiAqIHRvIGF1dGhlbnRpY2F0ZSB0aGUgdXNlciwgdXNpbmcgdGVjaG5pcXVlIHRoYXQgaXMgb25seSBhdmFpbGFibGVcbiAqIHRvIGFwcGxpY2F0aW9ucyBob3N0ZWQgYnkgR29vZ2xlLlxuICovIGNsYXNzIFkge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5oID0gdCwgdGhpcy5sID0gZSwgdGhpcy5tID0gbjtcbiAgICB9XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEoodGhpcy5oLCB0aGlzLmwsIHRoaXMubSkpO1xuICAgIH1cbiAgICBzdGFydCh0LCBlKSB7XG4gICAgICAgIC8vIEZpcmUgd2l0aCBpbml0aWFsIHVpZC5cbiAgICAgICAgdC5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiBlKEQuRklSU1RfUEFSVFkpKSk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge31cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7fVxufVxuXG5jbGFzcyBYIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0LCB0aGlzLnR5cGUgPSBcIkFwcENoZWNrXCIsIHRoaXMuaGVhZGVycyA9IG5ldyBNYXAsIHQgJiYgdC5sZW5ndGggPiAwICYmIHRoaXMuaGVhZGVycy5zZXQoXCJ4LWZpcmViYXNlLWFwcGNoZWNrXCIsIHRoaXMudmFsdWUpO1xuICAgIH1cbn1cblxuY2xhc3MgWiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmcgPSB0LCB0aGlzLmZvcmNlUmVmcmVzaCA9ICExLCB0aGlzLmFwcENoZWNrID0gbnVsbDtcbiAgICB9XG4gICAgc3RhcnQodCwgZSkge1xuICAgICAgICB0aGlzLm8gPSBuID0+IHtcbiAgICAgICAgICAgIHQuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gKHQgPT4gKG51bGwgIT0gdC5lcnJvciAmJiAkKFwiRmlyZWJhc2VBcHBDaGVja1Rva2VuUHJvdmlkZXJcIiwgYEVycm9yIGdldHRpbmcgQXBwIENoZWNrIHRva2VuOyB1c2luZyBwbGFjZWhvbGRlciB0b2tlbiBpbnN0ZWFkLiBFcnJvcjogJHt0LmVycm9yLm1lc3NhZ2V9YCksIFxuICAgICAgICAgICAgZSh0LnRva2VuKSkpKG4pKSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG4gPSB0ID0+IHtcbiAgICAgICAgICAgICQoXCJGaXJlYmFzZUFwcENoZWNrVG9rZW5Qcm92aWRlclwiLCBcIkFwcENoZWNrIGRldGVjdGVkXCIpLCB0aGlzLmFwcENoZWNrID0gdCwgdGhpcy5hcHBDaGVjay5hZGRUb2tlbkxpc3RlbmVyKHRoaXMubyk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZy5vbkluaXQoKHQgPT4gbih0KSkpLCBcbiAgICAgICAgLy8gT3VyIHVzZXJzIGNhbiBpbml0aWFsaXplIEFwcENoZWNrIGFmdGVyIEZpcmVzdG9yZSwgc28gd2UgZ2l2ZSBpdFxuICAgICAgICAvLyBhIGNoYW5jZSB0byByZWdpc3RlciBpdHNlbGYgd2l0aCB0aGUgY29tcG9uZW50IGZyYW1ld29yay5cbiAgICAgICAgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmFwcENoZWNrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuZy5nZXRJbW1lZGlhdGUoe1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogITBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0ID8gbih0KSA6IFxuICAgICAgICAgICAgICAgIC8vIElmIEFwcENoZWNrIGlzIHN0aWxsIG5vdCBhdmFpbGFibGUsIHByb2NlZWQgd2l0aG91dCBpdC5cbiAgICAgICAgICAgICAgICAkKFwiRmlyZWJhc2VBcHBDaGVja1Rva2VuUHJvdmlkZXJcIiwgXCJBcHBDaGVjayBub3QgeWV0IGRldGVjdGVkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSwgMCk7XG4gICAgfVxuICAgIGdldFRva2VuKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5mb3JjZVJlZnJlc2g7XG4gICAgICAgIHJldHVybiB0aGlzLmZvcmNlUmVmcmVzaCA9ICExLCB0aGlzLmFwcENoZWNrID8gdGhpcy5hcHBDaGVjay5nZXRUb2tlbih0KS50aGVuKCh0ID0+IHQgPyAoQihcInN0cmluZ1wiID09IHR5cGVvZiB0LnRva2VuKSwgXG4gICAgICAgIG5ldyBYKHQudG9rZW4pKSA6IG51bGwpKSA6IFByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICB9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge1xuICAgICAgICB0aGlzLmZvcmNlUmVmcmVzaCA9ICEwO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgdGhpcy5hcHBDaGVjayAmJiB0aGlzLmFwcENoZWNrLnJlbW92ZVRva2VuTGlzdGVuZXIodGhpcy5vKTtcbiAgICB9XG59XG5cbi8qKlxuICogQW4gQXBwQ2hlY2sgdG9rZW4gcHJvdmlkZXIgdGhhdCBhbHdheXMgeWllbGRzIGFuIGVtcHR5IHRva2VuLlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgdHQge1xuICAgIGdldFRva2VuKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBYKFwiXCIpKTtcbiAgICB9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge31cbiAgICBzdGFydCh0LCBlKSB7fVxuICAgIHNodXRkb3duKCkge31cbn1cblxuLyoqXG4gKiBCdWlsZHMgYSBDcmVkZW50aWFsc1Byb3ZpZGVyIGRlcGVuZGluZyBvbiB0aGUgdHlwZSBvZlxuICogdGhlIGNyZWRlbnRpYWxzIHBhc3NlZCBpbi5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogYExpc3RlblNlcXVlbmNlYCBpcyBhIG1vbm90b25pYyBzZXF1ZW5jZS4gSXQgaXMgaW5pdGlhbGl6ZWQgd2l0aCBhIG1pbmltdW0gdmFsdWUgdG9cbiAqIGV4Y2VlZC4gQWxsIHN1YnNlcXVlbnQgY2FsbHMgdG8gbmV4dCB3aWxsIHJldHVybiBpbmNyZWFzaW5nIHZhbHVlcy4gSWYgcHJvdmlkZWQgd2l0aCBhXG4gKiBgU2VxdWVuY2VOdW1iZXJTeW5jZXJgLCBpdCB3aWxsIGFkZGl0aW9uYWxseSBidW1wIGl0cyBuZXh0IHZhbHVlIHdoZW4gdG9sZCBvZiBhIG5ldyB2YWx1ZSwgYXNcbiAqIHdlbGwgYXMgd3JpdGUgb3V0IHNlcXVlbmNlIG51bWJlcnMgdGhhdCBpdCBwcm9kdWNlcyB2aWEgYG5leHQoKWAuXG4gKi9cbmNsYXNzIGV0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucHJldmlvdXNWYWx1ZSA9IHQsIGUgJiYgKGUuc2VxdWVuY2VOdW1iZXJIYW5kbGVyID0gdCA9PiB0aGlzLnAodCksIHRoaXMuVCA9IHQgPT4gZS53cml0ZVNlcXVlbmNlTnVtYmVyKHQpKTtcbiAgICB9XG4gICAgcCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByZXZpb3VzVmFsdWUgPSBNYXRoLm1heCh0LCB0aGlzLnByZXZpb3VzVmFsdWUpLCB0aGlzLnByZXZpb3VzVmFsdWU7XG4gICAgfVxuICAgIG5leHQoKSB7XG4gICAgICAgIGNvbnN0IHQgPSArK3RoaXMucHJldmlvdXNWYWx1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXMuVCAmJiB0aGlzLlQodCksIHQ7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBHZW5lcmF0ZXMgYG5CeXRlc2Agb2YgcmFuZG9tIGJ5dGVzLlxuICpcbiAqIElmIGBuQnl0ZXMgPCAwYCAsIGFuIGVycm9yIHdpbGwgYmUgdGhyb3duLlxuICovXG5mdW5jdGlvbiBudCh0KSB7XG4gICAgLy8gUG9seWZpbGxzIGZvciBJRSBhbmQgV2ViV29ya2VyIGJ5IHVzaW5nIGBzZWxmYCBhbmQgYG1zQ3J5cHRvYCB3aGVuIGBjcnlwdG9gIGlzIG5vdCBhdmFpbGFibGUuXG4gICAgY29uc3QgZSA9IFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2Ygc2VsZiAmJiAoc2VsZi5jcnlwdG8gfHwgc2VsZi5tc0NyeXB0byksIG4gPSBuZXcgVWludDhBcnJheSh0KTtcbiAgICBpZiAoZSAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGUuZ2V0UmFuZG9tVmFsdWVzKSBlLmdldFJhbmRvbVZhbHVlcyhuKTsgZWxzZSBcbiAgICAvLyBGYWxscyBiYWNrIHRvIE1hdGgucmFuZG9tXG4gICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0OyBlKyspIG5bZV0gPSBNYXRoLmZsb29yKDI1NiAqIE1hdGgucmFuZG9tKCkpO1xuICAgIHJldHVybiBuO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBldC5JID0gLTE7XG5cbmNsYXNzIHN0IHtcbiAgICBzdGF0aWMgQSgpIHtcbiAgICAgICAgLy8gQWxwaGFudW1lcmljIGNoYXJhY3RlcnNcbiAgICAgICAgY29uc3QgdCA9IFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODlcIiwgZSA9IE1hdGguZmxvb3IoMjU2IC8gdC5sZW5ndGgpICogdC5sZW5ndGg7XG4gICAgICAgIC8vIFRoZSBsYXJnZXN0IGJ5dGUgdmFsdWUgdGhhdCBpcyBhIG11bHRpcGxlIG9mIGBjaGFyLmxlbmd0aGAuXG4gICAgICAgICAgICAgICAgbGV0IG4gPSBcIlwiO1xuICAgICAgICBmb3IgKDtuLmxlbmd0aCA8IDIwOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBudCg0MCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHMubGVuZ3RoOyArK2kpIFxuICAgICAgICAgICAgLy8gT25seSBhY2NlcHQgdmFsdWVzIHRoYXQgYXJlIFswLCBtYXhNdWx0aXBsZSksIHRoaXMgZW5zdXJlcyB0aGV5IGNhblxuICAgICAgICAgICAgLy8gYmUgZXZlbmx5IG1hcHBlZCB0byBpbmRpY2VzIG9mIGBjaGFyc2AgdmlhIGEgbW9kdWxvIG9wZXJhdGlvbi5cbiAgICAgICAgICAgIG4ubGVuZ3RoIDwgMjAgJiYgc1tpXSA8IGUgJiYgKG4gKz0gdC5jaGFyQXQoc1tpXSAlIHQubGVuZ3RoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG47XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpdCh0LCBlKSB7XG4gICAgcmV0dXJuIHQgPCBlID8gLTEgOiB0ID4gZSA/IDEgOiAwO1xufVxuXG4vKiogSGVscGVyIHRvIGNvbXBhcmUgYXJyYXlzIHVzaW5nIGlzRXF1YWwoKS4gKi8gZnVuY3Rpb24gcnQodCwgZSwgbikge1xuICAgIHJldHVybiB0Lmxlbmd0aCA9PT0gZS5sZW5ndGggJiYgdC5ldmVyeSgoKHQsIHMpID0+IG4odCwgZVtzXSkpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBpbW1lZGlhdGUgbGV4aWNvZ3JhcGhpY2FsbHktZm9sbG93aW5nIHN0cmluZy4gVGhpcyBpcyB1c2VmdWwgdG9cbiAqIGNvbnN0cnVjdCBhbiBpbmNsdXNpdmUgcmFuZ2UgZm9yIGluZGV4ZWRkYiBpdGVyYXRvcnMuXG4gKi8gZnVuY3Rpb24gb3QodCkge1xuICAgIC8vIFJldHVybiB0aGUgaW5wdXQgc3RyaW5nLCB3aXRoIGFuIGFkZGl0aW9uYWwgTlVMIGJ5dGUgYXBwZW5kZWQuXG4gICAgcmV0dXJuIHQgKyBcIlxcMFwiO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gVGhlIGVhcmxpZXN0IGRhdGUgc3VwcG9ydGVkIGJ5IEZpcmVzdG9yZSB0aW1lc3RhbXBzICgwMDAxLTAxLTAxVDAwOjAwOjAwWikuXG4vKipcbiAqIEEgYFRpbWVzdGFtcGAgcmVwcmVzZW50cyBhIHBvaW50IGluIHRpbWUgaW5kZXBlbmRlbnQgb2YgYW55IHRpbWUgem9uZSBvclxuICogY2FsZW5kYXIsIHJlcHJlc2VudGVkIGFzIHNlY29uZHMgYW5kIGZyYWN0aW9ucyBvZiBzZWNvbmRzIGF0IG5hbm9zZWNvbmRcbiAqIHJlc29sdXRpb24gaW4gVVRDIEVwb2NoIHRpbWUuXG4gKlxuICogSXQgaXMgZW5jb2RlZCB1c2luZyB0aGUgUHJvbGVwdGljIEdyZWdvcmlhbiBDYWxlbmRhciB3aGljaCBleHRlbmRzIHRoZVxuICogR3JlZ29yaWFuIGNhbGVuZGFyIGJhY2t3YXJkcyB0byB5ZWFyIG9uZS4gSXQgaXMgZW5jb2RlZCBhc3N1bWluZyBhbGwgbWludXRlc1xuICogYXJlIDYwIHNlY29uZHMgbG9uZywgaS5lLiBsZWFwIHNlY29uZHMgYXJlIFwic21lYXJlZFwiIHNvIHRoYXQgbm8gbGVhcCBzZWNvbmRcbiAqIHRhYmxlIGlzIG5lZWRlZCBmb3IgaW50ZXJwcmV0YXRpb24uIFJhbmdlIGlzIGZyb20gMDAwMS0wMS0wMVQwMDowMDowMFogdG9cbiAqIDk5OTktMTItMzFUMjM6NTk6NTkuOTk5OTk5OTk5Wi5cbiAqXG4gKiBGb3IgZXhhbXBsZXMgYW5kIGZ1cnRoZXIgc3BlY2lmaWNhdGlvbnMsIHJlZmVyIHRvIHRoZVxuICoge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvcHJvdG9idWYvYmxvYi9tYXN0ZXIvc3JjL2dvb2dsZS9wcm90b2J1Zi90aW1lc3RhbXAucHJvdG8gfCBUaW1lc3RhbXAgZGVmaW5pdGlvbn0uXG4gKi9cbmNsYXNzIGF0IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRpbWVzdGFtcC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzZWNvbmRzIC0gVGhlIG51bWJlciBvZiBzZWNvbmRzIG9mIFVUQyB0aW1lIHNpbmNlIFVuaXggZXBvY2hcbiAgICAgKiAgICAgMTk3MC0wMS0wMVQwMDowMDowMFouIE11c3QgYmUgZnJvbSAwMDAxLTAxLTAxVDAwOjAwOjAwWiB0b1xuICAgICAqICAgICA5OTk5LTEyLTMxVDIzOjU5OjU5WiBpbmNsdXNpdmUuXG4gICAgICogQHBhcmFtIG5hbm9zZWNvbmRzIC0gVGhlIG5vbi1uZWdhdGl2ZSBmcmFjdGlvbnMgb2YgYSBzZWNvbmQgYXQgbmFub3NlY29uZFxuICAgICAqICAgICByZXNvbHV0aW9uLiBOZWdhdGl2ZSBzZWNvbmQgdmFsdWVzIHdpdGggZnJhY3Rpb25zIG11c3Qgc3RpbGwgaGF2ZVxuICAgICAqICAgICBub24tbmVnYXRpdmUgbmFub3NlY29uZHMgdmFsdWVzIHRoYXQgY291bnQgZm9yd2FyZCBpbiB0aW1lLiBNdXN0IGJlXG4gICAgICogICAgIGZyb20gMCB0byA5OTksOTk5LDk5OSBpbmNsdXNpdmUuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBzZWNvbmRzIG9mIFVUQyB0aW1lIHNpbmNlIFVuaXggZXBvY2ggMTk3MC0wMS0wMVQwMDowMDowMFouXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIGZyYWN0aW9ucyBvZiBhIHNlY29uZCBhdCBuYW5vc2Vjb25kIHJlc29sdXRpb24uKlxuICAgICAqL1xuICAgIGUpIHtcbiAgICAgICAgaWYgKHRoaXMuc2Vjb25kcyA9IHQsIHRoaXMubmFub3NlY29uZHMgPSBlLCBlIDwgMCkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIlRpbWVzdGFtcCBuYW5vc2Vjb25kcyBvdXQgb2YgcmFuZ2U6IFwiICsgZSk7XG4gICAgICAgIGlmIChlID49IDFlOSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIlRpbWVzdGFtcCBuYW5vc2Vjb25kcyBvdXQgb2YgcmFuZ2U6IFwiICsgZSk7XG4gICAgICAgIGlmICh0IDwgLTYyMTM1NTk2ODAwKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiVGltZXN0YW1wIHNlY29uZHMgb3V0IG9mIHJhbmdlOiBcIiArIHQpO1xuICAgICAgICAvLyBUaGlzIHdpbGwgYnJlYWsgaW4gdGhlIHllYXIgMTAsMDAwLlxuICAgICAgICAgICAgICAgIGlmICh0ID49IDI1MzQwMjMwMDgwMCkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIlRpbWVzdGFtcCBzZWNvbmRzIG91dCBvZiByYW5nZTogXCIgKyB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0aW1lc3RhbXAgd2l0aCB0aGUgY3VycmVudCBkYXRlLCB3aXRoIG1pbGxpc2Vjb25kIHByZWNpc2lvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIGEgbmV3IHRpbWVzdGFtcCByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgZGF0ZS5cbiAgICAgKi8gICAgc3RhdGljIG5vdygpIHtcbiAgICAgICAgcmV0dXJuIGF0LmZyb21NaWxsaXMoRGF0ZS5ub3coKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGltZXN0YW1wIGZyb20gdGhlIGdpdmVuIGRhdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGF0ZSAtIFRoZSBkYXRlIHRvIGluaXRpYWxpemUgdGhlIGBUaW1lc3RhbXBgIGZyb20uXG4gICAgICogQHJldHVybnMgQSBuZXcgYFRpbWVzdGFtcGAgcmVwcmVzZW50aW5nIHRoZSBzYW1lIHBvaW50IGluIHRpbWUgYXMgdGhlIGdpdmVuXG4gICAgICogICAgIGRhdGUuXG4gICAgICovICAgIHN0YXRpYyBmcm9tRGF0ZSh0KSB7XG4gICAgICAgIHJldHVybiBhdC5mcm9tTWlsbGlzKHQuZ2V0VGltZSgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0aW1lc3RhbXAgZnJvbSB0aGUgZ2l2ZW4gbnVtYmVyIG9mIG1pbGxpc2Vjb25kcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtaWxsaXNlY29uZHMgLSBOdW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIFVuaXggZXBvY2hcbiAgICAgKiAgICAgMTk3MC0wMS0wMVQwMDowMDowMFouXG4gICAgICogQHJldHVybnMgQSBuZXcgYFRpbWVzdGFtcGAgcmVwcmVzZW50aW5nIHRoZSBzYW1lIHBvaW50IGluIHRpbWUgYXMgdGhlIGdpdmVuXG4gICAgICogICAgIG51bWJlciBvZiBtaWxsaXNlY29uZHMuXG4gICAgICovICAgIHN0YXRpYyBmcm9tTWlsbGlzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IE1hdGguZmxvb3IodCAvIDFlMyksIG4gPSBNYXRoLmZsb29yKDFlNiAqICh0IC0gMWUzICogZSkpO1xuICAgICAgICByZXR1cm4gbmV3IGF0KGUsIG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIGBUaW1lc3RhbXBgIHRvIGEgSmF2YVNjcmlwdCBgRGF0ZWAgb2JqZWN0LiBUaGlzIGNvbnZlcnNpb25cbiAgICAgKiBjYXVzZXMgYSBsb3NzIG9mIHByZWNpc2lvbiBzaW5jZSBgRGF0ZWAgb2JqZWN0cyBvbmx5IHN1cHBvcnQgbWlsbGlzZWNvbmRcbiAgICAgKiBwcmVjaXNpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBKYXZhU2NyaXB0IGBEYXRlYCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzYW1lIHBvaW50IGluIHRpbWUgYXNcbiAgICAgKiAgICAgdGhpcyBgVGltZXN0YW1wYCwgd2l0aCBtaWxsaXNlY29uZCBwcmVjaXNpb24uXG4gICAgICovICAgIHRvRGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMudG9NaWxsaXMoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGEgYFRpbWVzdGFtcGAgdG8gYSBudW1lcmljIHRpbWVzdGFtcCAoaW4gbWlsbGlzZWNvbmRzIHNpbmNlXG4gICAgICogZXBvY2gpLiBUaGlzIG9wZXJhdGlvbiBjYXVzZXMgYSBsb3NzIG9mIHByZWNpc2lvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBwb2ludCBpbiB0aW1lIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyB0aW1lc3RhbXAsIHJlcHJlc2VudGVkIGFzXG4gICAgICogICAgIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIFVuaXggZXBvY2ggMTk3MC0wMS0wMVQwMDowMDowMFouXG4gICAgICovICAgIHRvTWlsbGlzKCkge1xuICAgICAgICByZXR1cm4gMWUzICogdGhpcy5zZWNvbmRzICsgdGhpcy5uYW5vc2Vjb25kcyAvIDFlNjtcbiAgICB9XG4gICAgX2NvbXBhcmVUbyh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlY29uZHMgPT09IHQuc2Vjb25kcyA/IGl0KHRoaXMubmFub3NlY29uZHMsIHQubmFub3NlY29uZHMpIDogaXQodGhpcy5zZWNvbmRzLCB0LnNlY29uZHMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgVGltZXN0YW1wYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBUaW1lc3RhbXBgIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYFRpbWVzdGFtcGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0LnNlY29uZHMgPT09IHRoaXMuc2Vjb25kcyAmJiB0Lm5hbm9zZWNvbmRzID09PSB0aGlzLm5hbm9zZWNvbmRzO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIHRleHR1YWwgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBgVGltZXN0YW1wYC4gKi8gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBcIlRpbWVzdGFtcChzZWNvbmRzPVwiICsgdGhpcy5zZWNvbmRzICsgXCIsIG5hbm9zZWNvbmRzPVwiICsgdGhpcy5uYW5vc2Vjb25kcyArIFwiKVwiO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgYFRpbWVzdGFtcGAuICovICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNlY29uZHM6IHRoaXMuc2Vjb25kcyxcbiAgICAgICAgICAgIG5hbm9zZWNvbmRzOiB0aGlzLm5hbm9zZWNvbmRzXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoaXMgb2JqZWN0IHRvIGEgcHJpbWl0aXZlIHN0cmluZywgd2hpY2ggYWxsb3dzIGBUaW1lc3RhbXBgIG9iamVjdHNcbiAgICAgKiB0byBiZSBjb21wYXJlZCB1c2luZyB0aGUgYD5gLCBgPD1gLCBgPj1gIGFuZCBgPmAgb3BlcmF0b3JzLlxuICAgICAqLyAgICB2YWx1ZU9mKCkge1xuICAgICAgICAvLyBUaGlzIG1ldGhvZCByZXR1cm5zIGEgc3RyaW5nIG9mIHRoZSBmb3JtIDxzZWNvbmRzPi48bmFub3NlY29uZHM+IHdoZXJlXG4gICAgICAgIC8vIDxzZWNvbmRzPiBpcyB0cmFuc2xhdGVkIHRvIGhhdmUgYSBub24tbmVnYXRpdmUgdmFsdWUgYW5kIGJvdGggPHNlY29uZHM+XG4gICAgICAgIC8vIGFuZCA8bmFub3NlY29uZHM+IGFyZSBsZWZ0LXBhZGRlZCB3aXRoIHplcm9lcyB0byBiZSBhIGNvbnNpc3RlbnQgbGVuZ3RoLlxuICAgICAgICAvLyBTdHJpbmdzIHdpdGggdGhpcyBmb3JtYXQgdGhlbiBoYXZlIGEgbGV4aW9ncmFwaGljYWwgb3JkZXJpbmcgdGhhdCBtYXRjaGVzXG4gICAgICAgIC8vIHRoZSBleHBlY3RlZCBvcmRlcmluZy4gVGhlIDxzZWNvbmRzPiB0cmFuc2xhdGlvbiBpcyBkb25lIHRvIGF2b2lkIGhhdmluZ1xuICAgICAgICAvLyBhIGxlYWRpbmcgbmVnYXRpdmUgc2lnbiAoaS5lLiBhIGxlYWRpbmcgJy0nIGNoYXJhY3RlcikgaW4gaXRzIHN0cmluZ1xuICAgICAgICAvLyByZXByZXNlbnRhdGlvbiwgd2hpY2ggd291bGQgYWZmZWN0IGl0cyBsZXhpb2dyYXBoaWNhbCBvcmRlcmluZy5cbiAgICAgICAgY29uc3QgdCA9IHRoaXMuc2Vjb25kcyAtIC02MjEzNTU5NjgwMDtcbiAgICAgICAgLy8gTm90ZTogVXAgdG8gMTIgZGVjaW1hbCBkaWdpdHMgYXJlIHJlcXVpcmVkIHRvIHJlcHJlc2VudCBhbGwgdmFsaWRcbiAgICAgICAgLy8gJ3NlY29uZHMnIHZhbHVlcy5cbiAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nKHQpLnBhZFN0YXJ0KDEyLCBcIjBcIikgKyBcIi5cIiArIFN0cmluZyh0aGlzLm5hbm9zZWNvbmRzKS5wYWRTdGFydCg5LCBcIjBcIik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHZlcnNpb24gb2YgYSBkb2N1bWVudCBpbiBGaXJlc3RvcmUuIFRoaXMgY29ycmVzcG9uZHMgdG8gdGhlIHZlcnNpb25cbiAqIHRpbWVzdGFtcCwgc3VjaCBhcyB1cGRhdGVfdGltZSBvciByZWFkX3RpbWUuXG4gKi8gY2xhc3MgY3Qge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0O1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVRpbWVzdGFtcCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgY3QodCk7XG4gICAgfVxuICAgIHN0YXRpYyBtaW4oKSB7XG4gICAgICAgIHJldHVybiBuZXcgY3QobmV3IGF0KDAsIDApKTtcbiAgICB9XG4gICAgY29tcGFyZVRvKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wLl9jb21wYXJlVG8odC50aW1lc3RhbXApO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wLmlzRXF1YWwodC50aW1lc3RhbXApO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIG51bWJlciByZXByZXNlbnRhdGlvbiBvZiB0aGUgdmVyc2lvbiBmb3IgdXNlIGluIHNwZWMgdGVzdHMuICovICAgIHRvTWljcm9zZWNvbmRzKCkge1xuICAgICAgICAvLyBDb252ZXJ0IHRvIG1pY3Jvc2Vjb25kcy5cbiAgICAgICAgcmV0dXJuIDFlNiAqIHRoaXMudGltZXN0YW1wLnNlY29uZHMgKyB0aGlzLnRpbWVzdGFtcC5uYW5vc2Vjb25kcyAvIDFlMztcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBcIlNuYXBzaG90VmVyc2lvbihcIiArIHRoaXMudGltZXN0YW1wLnRvU3RyaW5nKCkgKyBcIilcIjtcbiAgICB9XG4gICAgdG9UaW1lc3RhbXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIHV0KHQpIHtcbiAgICBsZXQgZSA9IDA7XG4gICAgZm9yIChjb25zdCBuIGluIHQpIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCBuKSAmJiBlKys7XG4gICAgcmV0dXJuIGU7XG59XG5cbmZ1bmN0aW9uIGh0KHQsIGUpIHtcbiAgICBmb3IgKGNvbnN0IG4gaW4gdCkgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsIG4pICYmIGUobiwgdFtuXSk7XG59XG5cbmZ1bmN0aW9uIGx0KHQpIHtcbiAgICBmb3IgKGNvbnN0IGUgaW4gdCkgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCBlKSkgcmV0dXJuICExO1xuICAgIHJldHVybiAhMDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUGF0aCByZXByZXNlbnRzIGFuIG9yZGVyZWQgc2VxdWVuY2Ugb2Ygc3RyaW5nIHNlZ21lbnRzLlxuICovXG5jbGFzcyBmdCB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB2b2lkIDAgPT09IGUgPyBlID0gMCA6IGUgPiB0Lmxlbmd0aCAmJiBMKCksIHZvaWQgMCA9PT0gbiA/IG4gPSB0Lmxlbmd0aCAtIGUgOiBuID4gdC5sZW5ndGggLSBlICYmIEwoKSwgXG4gICAgICAgIHRoaXMuc2VnbWVudHMgPSB0LCB0aGlzLm9mZnNldCA9IGUsIHRoaXMubGVuID0gbjtcbiAgICB9XG4gICAgZ2V0IGxlbmd0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVuO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIDAgPT09IGZ0LmNvbXBhcmF0b3IodGhpcywgdCk7XG4gICAgfVxuICAgIGNoaWxkKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc2VnbWVudHMuc2xpY2UodGhpcy5vZmZzZXQsIHRoaXMubGltaXQoKSk7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgZnQgPyB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgZS5wdXNoKHQpO1xuICAgICAgICB9KSkgOiBlLnB1c2godCksIHRoaXMuY29uc3RydWN0KGUpO1xuICAgIH1cbiAgICAvKiogVGhlIGluZGV4IG9mIG9uZSBwYXN0IHRoZSBsYXN0IHNlZ21lbnQgb2YgdGhlIHBhdGguICovICAgIGxpbWl0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vZmZzZXQgKyB0aGlzLmxlbmd0aDtcbiAgICB9XG4gICAgcG9wRmlyc3QodCkge1xuICAgICAgICByZXR1cm4gdCA9IHZvaWQgMCA9PT0gdCA/IDEgOiB0LCB0aGlzLmNvbnN0cnVjdCh0aGlzLnNlZ21lbnRzLCB0aGlzLm9mZnNldCArIHQsIHRoaXMubGVuZ3RoIC0gdCk7XG4gICAgfVxuICAgIHBvcExhc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdCh0aGlzLnNlZ21lbnRzLCB0aGlzLm9mZnNldCwgdGhpcy5sZW5ndGggLSAxKTtcbiAgICB9XG4gICAgZmlyc3RTZWdtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWdtZW50c1t0aGlzLm9mZnNldF07XG4gICAgfVxuICAgIGxhc3RTZWdtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQodGhpcy5sZW5ndGggLSAxKTtcbiAgICB9XG4gICAgZ2V0KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VnbWVudHNbdGhpcy5vZmZzZXQgKyB0XTtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIDAgPT09IHRoaXMubGVuZ3RoO1xuICAgIH1cbiAgICBpc1ByZWZpeE9mKHQpIHtcbiAgICAgICAgaWYgKHQubGVuZ3RoIDwgdGhpcy5sZW5ndGgpIHJldHVybiAhMTtcbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0aGlzLmxlbmd0aDsgZSsrKSBpZiAodGhpcy5nZXQoZSkgIT09IHQuZ2V0KGUpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgaXNJbW1lZGlhdGVQYXJlbnRPZih0KSB7XG4gICAgICAgIGlmICh0aGlzLmxlbmd0aCArIDEgIT09IHQubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdGhpcy5sZW5ndGg7IGUrKykgaWYgKHRoaXMuZ2V0KGUpICE9PSB0LmdldChlKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIGZvckVhY2godCkge1xuICAgICAgICBmb3IgKGxldCBlID0gdGhpcy5vZmZzZXQsIG4gPSB0aGlzLmxpbWl0KCk7IGUgPCBuOyBlKyspIHQodGhpcy5zZWdtZW50c1tlXSk7XG4gICAgfVxuICAgIHRvQXJyYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRzLnNsaWNlKHRoaXMub2Zmc2V0LCB0aGlzLmxpbWl0KCkpO1xuICAgIH1cbiAgICBzdGF0aWMgY29tcGFyYXRvcih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBNYXRoLm1pbih0Lmxlbmd0aCwgZS5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBzID0gMDsgcyA8IG47IHMrKykge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuZ2V0KHMpLCBpID0gZS5nZXQocyk7XG4gICAgICAgICAgICBpZiAobiA8IGkpIHJldHVybiAtMTtcbiAgICAgICAgICAgIGlmIChuID4gaSkgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQubGVuZ3RoIDwgZS5sZW5ndGggPyAtMSA6IHQubGVuZ3RoID4gZS5sZW5ndGggPyAxIDogMDtcbiAgICB9XG59XG5cbi8qKlxuICogQSBzbGFzaC1zZXBhcmF0ZWQgcGF0aCBmb3IgbmF2aWdhdGluZyByZXNvdXJjZXMgKGRvY3VtZW50cyBhbmQgY29sbGVjdGlvbnMpXG4gKiB3aXRoaW4gRmlyZXN0b3JlLlxuICpcbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIGR0IGV4dGVuZHMgZnQge1xuICAgIGNvbnN0cnVjdCh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgZHQodCwgZSwgbik7XG4gICAgfVxuICAgIGNhbm9uaWNhbFN0cmluZygpIHtcbiAgICAgICAgLy8gTk9URTogVGhlIGNsaWVudCBpcyBpZ25vcmFudCBvZiBhbnkgcGF0aCBzZWdtZW50cyBjb250YWluaW5nIGVzY2FwZVxuICAgICAgICAvLyBzZXF1ZW5jZXMgKGUuZy4gX19pZDEyM19fKSBhbmQganVzdCBwYXNzZXMgdGhlbSB0aHJvdWdoIHJhdyAodGhleSBleGlzdFxuICAgICAgICAvLyBmb3IgbGVnYWN5IHJlYXNvbnMgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBmcmVxdWVudGx5KS5cbiAgICAgICAgcmV0dXJuIHRoaXMudG9BcnJheSgpLmpvaW4oXCIvXCIpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSByZXNvdXJjZSBwYXRoIGZyb20gdGhlIGdpdmVuIHNsYXNoLWRlbGltaXRlZCBzdHJpbmcuIElmIG11bHRpcGxlXG4gICAgICogYXJndW1lbnRzIGFyZSBwcm92aWRlZCwgYWxsIGNvbXBvbmVudHMgYXJlIGNvbWJpbmVkLiBMZWFkaW5nIGFuZCB0cmFpbGluZ1xuICAgICAqIHNsYXNoZXMgZnJvbSBhbGwgY29tcG9uZW50cyBhcmUgaWdub3JlZC5cbiAgICAgKi8gICAgc3RhdGljIGZyb21TdHJpbmcoLi4udCkge1xuICAgICAgICAvLyBOT1RFOiBUaGUgY2xpZW50IGlzIGlnbm9yYW50IG9mIGFueSBwYXRoIHNlZ21lbnRzIGNvbnRhaW5pbmcgZXNjYXBlXG4gICAgICAgIC8vIHNlcXVlbmNlcyAoZS5nLiBfX2lkMTIzX18pIGFuZCBqdXN0IHBhc3NlcyB0aGVtIHRocm91Z2ggcmF3ICh0aGV5IGV4aXN0XG4gICAgICAgIC8vIGZvciBsZWdhY3kgcmVhc29ucyBhbmQgc2hvdWxkIG5vdCBiZSB1c2VkIGZyZXF1ZW50bHkpLlxuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiB0KSB7XG4gICAgICAgICAgICBpZiAobi5pbmRleE9mKFwiLy9cIikgPj0gMCkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBzZWdtZW50ICgke259KS4gUGF0aHMgbXVzdCBub3QgY29udGFpbiAvLyBpbiB0aGVtLmApO1xuICAgICAgICAgICAgLy8gU3RyaXAgbGVhZGluZyBhbmQgdHJhbGluZyBzbGFzaGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgZS5wdXNoKC4uLm4uc3BsaXQoXCIvXCIpLmZpbHRlcigodCA9PiB0Lmxlbmd0aCA+IDApKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBkdChlKTtcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5UGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBkdChbXSk7XG4gICAgfVxufVxuXG5jb25zdCB3dCA9IC9eW19hLXpBLVpdW19hLXpBLVowLTldKiQvO1xuXG4vKipcbiAqIEEgZG90LXNlcGFyYXRlZCBwYXRoIGZvciBuYXZpZ2F0aW5nIHN1Yi1vYmplY3RzIHdpdGhpbiBhIGRvY3VtZW50LlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgX3QgZXh0ZW5kcyBmdCB7XG4gICAgY29uc3RydWN0KHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBfdCh0LCBlLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBzdHJpbmcgY291bGQgYmUgdXNlZCBhcyBhIHNlZ21lbnQgaW4gYSBmaWVsZCBwYXRoXG4gICAgICogd2l0aG91dCBlc2NhcGluZy5cbiAgICAgKi8gICAgc3RhdGljIGlzVmFsaWRJZGVudGlmaWVyKHQpIHtcbiAgICAgICAgcmV0dXJuIHd0LnRlc3QodCk7XG4gICAgfVxuICAgIGNhbm9uaWNhbFN0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9BcnJheSgpLm1hcCgodCA9PiAodCA9IHQucmVwbGFjZSgvXFxcXC9nLCBcIlxcXFxcXFxcXCIpLnJlcGxhY2UoL2AvZywgXCJcXFxcYFwiKSwgXG4gICAgICAgIF90LmlzVmFsaWRJZGVudGlmaWVyKHQpIHx8ICh0ID0gXCJgXCIgKyB0ICsgXCJgXCIpLCB0KSkpLmpvaW4oXCIuXCIpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGZpZWxkIHJlZmVyZW5jZXMgdGhlIGtleSBvZiBhIGRvY3VtZW50LlxuICAgICAqLyAgICBpc0tleUZpZWxkKCkge1xuICAgICAgICByZXR1cm4gMSA9PT0gdGhpcy5sZW5ndGggJiYgXCJfX25hbWVfX1wiID09PSB0aGlzLmdldCgwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGZpZWxkIGRlc2lnbmF0aW5nIHRoZSBrZXkgb2YgYSBkb2N1bWVudC5cbiAgICAgKi8gICAgc3RhdGljIGtleUZpZWxkKCkge1xuICAgICAgICByZXR1cm4gbmV3IF90KFsgXCJfX25hbWVfX1wiIF0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBmaWVsZCBzdHJpbmcgZnJvbSB0aGUgZ2l2ZW4gc2VydmVyLWZvcm1hdHRlZCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiAtIFNwbGl0dGluZyB0aGUgZW1wdHkgc3RyaW5nIGlzIG5vdCBhbGxvd2VkIChmb3Igbm93IGF0IGxlYXN0KS5cbiAgICAgKiAtIEVtcHR5IHNlZ21lbnRzIHdpdGhpbiB0aGUgc3RyaW5nIChlLmcuIGlmIHRoZXJlIGFyZSB0d28gY29uc2VjdXRpdmVcbiAgICAgKiAgIHNlcGFyYXRvcnMpIGFyZSBub3QgYWxsb3dlZC5cbiAgICAgKlxuICAgICAqIFRPRE8oYi8zNzI0NDE1Nyk6IHdlIHNob3VsZCBtYWtlIHRoaXMgbW9yZSBzdHJpY3QuIFJpZ2h0IG5vdywgaXQgYWxsb3dzXG4gICAgICogbm9uLWlkZW50aWZpZXIgcGF0aCBjb21wb25lbnRzLCBldmVuIGlmIHRoZXkgYXJlbid0IGVzY2FwZWQuXG4gICAgICovICAgIHN0YXRpYyBmcm9tU2VydmVyRm9ybWF0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICBsZXQgbiA9IFwiXCIsIHMgPSAwO1xuICAgICAgICBjb25zdCBpID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKDAgPT09IG4ubGVuZ3RoKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIGZpZWxkIHBhdGggKCR7dH0pLiBQYXRocyBtdXN0IG5vdCBiZSBlbXB0eSwgYmVnaW4gd2l0aCAnLicsIGVuZCB3aXRoICcuJywgb3IgY29udGFpbiAnLi4nYCk7XG4gICAgICAgICAgICBlLnB1c2gobiksIG4gPSBcIlwiO1xuICAgICAgICB9O1xuICAgICAgICBsZXQgciA9ICExO1xuICAgICAgICBmb3IgKDtzIDwgdC5sZW5ndGg7ICkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRbc107XG4gICAgICAgICAgICBpZiAoXCJcXFxcXCIgPT09IGUpIHtcbiAgICAgICAgICAgICAgICBpZiAocyArIDEgPT09IHQubGVuZ3RoKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiUGF0aCBoYXMgdHJhaWxpbmcgZXNjYXBlIGNoYXJhY3RlcjogXCIgKyB0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdFtzICsgMV07XG4gICAgICAgICAgICAgICAgaWYgKFwiXFxcXFwiICE9PSBlICYmIFwiLlwiICE9PSBlICYmIFwiYFwiICE9PSBlKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiUGF0aCBoYXMgaW52YWxpZCBlc2NhcGUgc2VxdWVuY2U6IFwiICsgdCk7XG4gICAgICAgICAgICAgICAgbiArPSBlLCBzICs9IDI7XG4gICAgICAgICAgICB9IGVsc2UgXCJgXCIgPT09IGUgPyAociA9ICFyLCBzKyspIDogXCIuXCIgIT09IGUgfHwgciA/IChuICs9IGUsIHMrKykgOiAoaSgpLCBzKyspO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpKCksIHIpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJVbnRlcm1pbmF0ZWQgYCBpbiBwYXRoOiBcIiArIHQpO1xuICAgICAgICByZXR1cm4gbmV3IF90KGUpO1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHlQYXRoKCkge1xuICAgICAgICByZXR1cm4gbmV3IF90KFtdKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFByb3ZpZGVzIGEgc2V0IG9mIGZpZWxkcyB0aGF0IGNhbiBiZSB1c2VkIHRvIHBhcnRpYWxseSBwYXRjaCBhIGRvY3VtZW50LlxuICogRmllbGRNYXNrIGlzIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBPYmplY3RWYWx1ZS5cbiAqIEV4YW1wbGVzOlxuICogICBmb28gLSBPdmVyd3JpdGVzIGZvbyBlbnRpcmVseSB3aXRoIHRoZSBwcm92aWRlZCB2YWx1ZS4gSWYgZm9vIGlzIG5vdFxuICogICAgICAgICBwcmVzZW50IGluIHRoZSBjb21wYW5pb24gT2JqZWN0VmFsdWUsIHRoZSBmaWVsZCBpcyBkZWxldGVkLlxuICogICBmb28uYmFyIC0gT3ZlcndyaXRlcyBvbmx5IHRoZSBmaWVsZCBiYXIgb2YgdGhlIG9iamVjdCBmb28uXG4gKiAgICAgICAgICAgICBJZiBmb28gaXMgbm90IGFuIG9iamVjdCwgZm9vIGlzIHJlcGxhY2VkIHdpdGggYW4gb2JqZWN0XG4gKiAgICAgICAgICAgICBjb250YWluaW5nIGZvb1xuICovIGNsYXNzIG10IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuZmllbGRzID0gdCwgXG4gICAgICAgIC8vIFRPRE8oZGltb25kKTogdmFsaWRhdGlvbiBvZiBGaWVsZE1hc2tcbiAgICAgICAgLy8gU29ydCB0aGUgZmllbGQgbWFzayB0byBzdXBwb3J0IGBGaWVsZE1hc2suaXNFcXVhbCgpYCBhbmQgYXNzZXJ0IGJlbG93LlxuICAgICAgICB0LnNvcnQoX3QuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIHRoYXQgYGZpZWxkUGF0aGAgaXMgaW5jbHVkZWQgYnkgYXQgbGVhc3Qgb25lIGZpZWxkIGluIHRoaXMgZmllbGRcbiAgICAgKiBtYXNrLlxuICAgICAqXG4gICAgICogVGhpcyBpcyBhbiBPKG4pIG9wZXJhdGlvbiwgd2hlcmUgYG5gIGlzIHRoZSBzaXplIG9mIHRoZSBmaWVsZCBtYXNrLlxuICAgICAqLyAgICBjb3ZlcnModCkge1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy5maWVsZHMpIGlmIChlLmlzUHJlZml4T2YodCkpIHJldHVybiAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHJ0KHRoaXMuZmllbGRzLCB0LmZpZWxkcywgKCh0LCBlKSA9PiB0LmlzRXF1YWwoZSkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogQ29udmVydHMgYSBCYXNlNjQgZW5jb2RlZCBzdHJpbmcgdG8gYSBiaW5hcnkgc3RyaW5nLiAqL1xuLyoqIFRydWUgaWYgYW5kIG9ubHkgaWYgdGhlIEJhc2U2NCBjb252ZXJzaW9uIGZ1bmN0aW9ucyBhcmUgYXZhaWxhYmxlLiAqL1xuZnVuY3Rpb24gZ3QoKSB7XG4gICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIGF0b2I7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEltbXV0YWJsZSBjbGFzcyB0aGF0IHJlcHJlc2VudHMgYSBcInByb3RvXCIgYnl0ZSBzdHJpbmcuXG4gKlxuICogUHJvdG8gYnl0ZSBzdHJpbmdzIGNhbiBlaXRoZXIgYmUgQmFzZTY0LWVuY29kZWQgc3RyaW5ncyBvciBVaW50OEFycmF5cyB3aGVuXG4gKiBzZW50IG9uIHRoZSB3aXJlLiBUaGlzIGNsYXNzIGFic3RyYWN0cyBhd2F5IHRoaXMgZGlmZmVyZW50aWF0aW9uIGJ5IGhvbGRpbmdcbiAqIHRoZSBwcm90byBieXRlIHN0cmluZyBpbiBhIGNvbW1vbiBjbGFzcyB0aGF0IG11c3QgYmUgY29udmVydGVkIGludG8gYSBzdHJpbmdcbiAqIGJlZm9yZSBiZWluZyBzZW50IGFzIGEgcHJvdG8uXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyB5dCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmJpbmFyeVN0cmluZyA9IHQ7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tQmFzZTY0U3RyaW5nKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IGF0b2IodCk7XG4gICAgICAgIHJldHVybiBuZXcgeXQoZSk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tVWludDhBcnJheSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBcbiAgICAgICAgLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gY29udmVydCBhbiBVaW50OGFycmF5IHRvIGEgYmluYXJ5IHN0cmluZy5cbiAqL1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBsZXQgZSA9IFwiXCI7XG4gICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQubGVuZ3RoOyArK24pIGUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSh0W25dKTtcbiAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIGNvbnZlcnQgYSBiaW5hcnkgc3RyaW5nIHRvIGFuIFVpbnQ4QXJyYXkuXG4gKi8gKHQpO1xuICAgICAgICByZXR1cm4gbmV3IHl0KGUpO1xuICAgIH1cbiAgICB0b0Jhc2U2NCgpIHtcbiAgICAgICAgcmV0dXJuIHQgPSB0aGlzLmJpbmFyeVN0cmluZywgYnRvYSh0KTtcbiAgICAgICAgLyoqIENvbnZlcnRzIGEgYmluYXJ5IHN0cmluZyB0byBhIEJhc2U2NCBlbmNvZGVkIHN0cmluZy4gKi9cbiAgICAgICAgdmFyIHQ7XG4gICAgfVxuICAgIHRvVWludDhBcnJheSgpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgVWludDhBcnJheSh0Lmxlbmd0aCk7XG4gICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQubGVuZ3RoOyBuKyspIGVbbl0gPSB0LmNoYXJDb2RlQXQobik7XG4gICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgICAgICAvLyBBIFJlZ0V4cCBtYXRjaGluZyBJU08gODYwMSBVVEMgdGltZXN0YW1wcyB3aXRoIG9wdGlvbmFsIGZyYWN0aW9uLlxuICAgICAgICAodGhpcy5iaW5hcnlTdHJpbmcpO1xuICAgIH1cbiAgICBhcHByb3hpbWF0ZUJ5dGVTaXplKCkge1xuICAgICAgICByZXR1cm4gMiAqIHRoaXMuYmluYXJ5U3RyaW5nLmxlbmd0aDtcbiAgICB9XG4gICAgY29tcGFyZVRvKHQpIHtcbiAgICAgICAgcmV0dXJuIGl0KHRoaXMuYmluYXJ5U3RyaW5nLCB0LmJpbmFyeVN0cmluZyk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iaW5hcnlTdHJpbmcgPT09IHQuYmluYXJ5U3RyaW5nO1xuICAgIH1cbn1cblxueXQuRU1QVFlfQllURV9TVFJJTkcgPSBuZXcgeXQoXCJcIik7XG5cbmNvbnN0IHB0ID0gbmV3IFJlZ0V4cCgvXlxcZHs0fS1cXGRcXGQtXFxkXFxkVFxcZFxcZDpcXGRcXGQ6XFxkXFxkKD86XFwuKFxcZCspKT9aJC8pO1xuXG4vKipcbiAqIENvbnZlcnRzIHRoZSBwb3NzaWJsZSBQcm90byB2YWx1ZXMgZm9yIGEgdGltZXN0YW1wIHZhbHVlIGludG8gYSBcInNlY29uZHMgYW5kXG4gKiBuYW5vc1wiIHJlcHJlc2VudGF0aW9uLlxuICovIGZ1bmN0aW9uIFR0KHQpIHtcbiAgICAvLyBUaGUganNvbiBpbnRlcmZhY2UgKGZvciB0aGUgYnJvd3Nlcikgd2lsbCByZXR1cm4gYW4gaXNvIHRpbWVzdGFtcCBzdHJpbmcsXG4gICAgLy8gd2hpbGUgdGhlIHByb3RvIGpzIGxpYnJhcnkgKGZvciBub2RlKSB3aWxsIHJldHVybiBhXG4gICAgLy8gZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcCBpbnN0YW5jZS5cbiAgICBpZiAoQighIXQpLCBcInN0cmluZ1wiID09IHR5cGVvZiB0KSB7XG4gICAgICAgIC8vIFRoZSBkYXRlIHN0cmluZyBjYW4gaGF2ZSBoaWdoZXIgcHJlY2lzaW9uIChuYW5vcykgdGhhbiB0aGUgRGF0ZSBjbGFzc1xuICAgICAgICAvLyAobWlsbGlzKSwgc28gd2UgZG8gc29tZSBjdXN0b20gcGFyc2luZyBoZXJlLlxuICAgICAgICAvLyBQYXJzZSB0aGUgbmFub3MgcmlnaHQgb3V0IG9mIHRoZSBzdHJpbmcuXG4gICAgICAgIGxldCBlID0gMDtcbiAgICAgICAgY29uc3QgbiA9IHB0LmV4ZWModCk7XG4gICAgICAgIGlmIChCKCEhbiksIG5bMV0pIHtcbiAgICAgICAgICAgIC8vIFBhZCB0aGUgZnJhY3Rpb24gb3V0IHRvIDkgZGlnaXRzIChuYW5vcykuXG4gICAgICAgICAgICBsZXQgdCA9IG5bMV07XG4gICAgICAgICAgICB0ID0gKHQgKyBcIjAwMDAwMDAwMFwiKS5zdWJzdHIoMCwgOSksIGUgPSBOdW1iZXIodCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUGFyc2UgdGhlIGRhdGUgdG8gZ2V0IHRoZSBzZWNvbmRzLlxuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgRGF0ZSh0KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNlY29uZHM6IE1hdGguZmxvb3Iocy5nZXRUaW1lKCkgLyAxZTMpLFxuICAgICAgICAgICAgbmFub3M6IGVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2Vjb25kczogRXQodC5zZWNvbmRzKSxcbiAgICAgICAgbmFub3M6IEV0KHQubmFub3MpXG4gICAgfTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgcG9zc2libGUgUHJvdG8gdHlwZXMgZm9yIG51bWJlcnMgaW50byBhIEphdmFTY3JpcHQgbnVtYmVyLlxuICogUmV0dXJucyAwIGlmIHRoZSB2YWx1ZSBpcyBub3QgbnVtZXJpYy5cbiAqLyBmdW5jdGlvbiBFdCh0KSB7XG4gICAgLy8gVE9ETyhiam9ybmljayk6IEhhbmRsZSBpbnQ2NCBncmVhdGVyIHRoYW4gNTMgYml0cy5cbiAgICByZXR1cm4gXCJudW1iZXJcIiA9PSB0eXBlb2YgdCA/IHQgOiBcInN0cmluZ1wiID09IHR5cGVvZiB0ID8gTnVtYmVyKHQpIDogMDtcbn1cblxuLyoqIENvbnZlcnRzIHRoZSBwb3NzaWJsZSBQcm90byB0eXBlcyBmb3IgQmxvYnMgaW50byBhIEJ5dGVTdHJpbmcuICovIGZ1bmN0aW9uIEl0KHQpIHtcbiAgICByZXR1cm4gXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCA/IHl0LmZyb21CYXNlNjRTdHJpbmcodCkgOiB5dC5mcm9tVWludDhBcnJheSh0KTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhIGxvY2FsbHktYXBwbGllZCBTZXJ2ZXJUaW1lc3RhbXAuXG4gKlxuICogU2VydmVyIFRpbWVzdGFtcHMgYXJlIGJhY2tlZCBieSBNYXBWYWx1ZXMgdGhhdCBjb250YWluIGFuIGludGVybmFsIGZpZWxkXG4gKiBgX190eXBlX19gIHdpdGggYSB2YWx1ZSBvZiBgc2VydmVyX3RpbWVzdGFtcGAuIFRoZSBwcmV2aW91cyB2YWx1ZSBhbmQgbG9jYWxcbiAqIHdyaXRlIHRpbWUgYXJlIHN0b3JlZCBpbiBpdHMgYF9fcHJldmlvdXNfdmFsdWVfX2AgYW5kIGBfX2xvY2FsX3dyaXRlX3RpbWVfX2BcbiAqIGZpZWxkcyByZXNwZWN0aXZlbHkuXG4gKlxuICogTm90ZXM6XG4gKiAtIFNlcnZlclRpbWVzdGFtcFZhbHVlIGluc3RhbmNlcyBhcmUgY3JlYXRlZCBhcyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIGFcbiAqICAgdHJhbnNmb3JtLiBUaGV5IGNhbiBvbmx5IGV4aXN0IGluIHRoZSBsb2NhbCB2aWV3IG9mIGEgZG9jdW1lbnQuIFRoZXJlZm9yZVxuICogICB0aGV5IGRvIG5vdCBuZWVkIHRvIGJlIHBhcnNlZCBvciBzZXJpYWxpemVkLlxuICogLSBXaGVuIGV2YWx1YXRlZCBsb2NhbGx5IChlLmcuIGZvciBzbmFwc2hvdC5kYXRhKCkpLCB0aGV5IGJ5IGRlZmF1bHRcbiAqICAgZXZhbHVhdGUgdG8gYG51bGxgLiBUaGlzIGJlaGF2aW9yIGNhbiBiZSBjb25maWd1cmVkIGJ5IHBhc3NpbmcgY3VzdG9tXG4gKiAgIEZpZWxkVmFsdWVPcHRpb25zIHRvIHZhbHVlKCkuXG4gKiAtIFdpdGggcmVzcGVjdCB0byBvdGhlciBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZXMsIHRoZXkgc29ydCBieSB0aGVpclxuICogICBsb2NhbFdyaXRlVGltZS5cbiAqLyBmdW5jdGlvbiBBdCh0KSB7XG4gICAgdmFyIGUsIG47XG4gICAgcmV0dXJuIFwic2VydmVyX3RpbWVzdGFtcFwiID09PSAobnVsbCA9PT0gKG4gPSAoKG51bGwgPT09IChlID0gbnVsbCA9PSB0ID8gdm9pZCAwIDogdC5tYXBWYWx1ZSkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5maWVsZHMpIHx8IHt9KS5fX3R5cGVfXykgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5zdHJpbmdWYWx1ZSk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBTZXJ2ZXJUaW1lc3RhbXAgcHJvdG8gdmFsdWUgKHVzaW5nIHRoZSBpbnRlcm5hbCBmb3JtYXQpLlxuICovXG4vKipcbiAqIFJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBmaWVsZCBiZWZvcmUgdGhpcyBTZXJ2ZXJUaW1lc3RhbXAgd2FzIHNldC5cbiAqXG4gKiBQcmVzZXJ2aW5nIHRoZSBwcmV2aW91cyB2YWx1ZXMgYWxsb3dzIHRoZSB1c2VyIHRvIGRpc3BsYXkgdGhlIGxhc3QgcmVzb2xlZFxuICogdmFsdWUgdW50aWwgdGhlIGJhY2tlbmQgcmVzcG9uZHMgd2l0aCB0aGUgdGltZXN0YW1wLlxuICovXG5mdW5jdGlvbiBSdCh0KSB7XG4gICAgY29uc3QgZSA9IHQubWFwVmFsdWUuZmllbGRzLl9fcHJldmlvdXNfdmFsdWVfXztcbiAgICByZXR1cm4gQXQoZSkgPyBSdChlKSA6IGU7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgbG9jYWwgdGltZSBhdCB3aGljaCB0aGlzIHRpbWVzdGFtcCB3YXMgZmlyc3Qgc2V0LlxuICovIGZ1bmN0aW9uIFB0KHQpIHtcbiAgICBjb25zdCBlID0gVHQodC5tYXBWYWx1ZS5maWVsZHMuX19sb2NhbF93cml0ZV90aW1lX18udGltZXN0YW1wVmFsdWUpO1xuICAgIHJldHVybiBuZXcgYXQoZS5zZWNvbmRzLCBlLm5hbm9zKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBTZW50aW5lbCB2YWx1ZSB0aGF0IHNvcnRzIGJlZm9yZSBhbnkgTXV0YXRpb24gQmF0Y2ggSUQuICovXG4vKipcbiAqIFJldHVybnMgd2hldGhlciBhIHZhcmlhYmxlIGlzIGVpdGhlciB1bmRlZmluZWQgb3IgbnVsbC5cbiAqL1xuZnVuY3Rpb24gYnQodCkge1xuICAgIHJldHVybiBudWxsID09IHQ7XG59XG5cbi8qKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHZhbHVlIHJlcHJlc2VudHMgLTAuICovIGZ1bmN0aW9uIHZ0KHQpIHtcbiAgICAvLyBEZXRlY3QgaWYgdGhlIHZhbHVlIGlzIC0wLjAuIEJhc2VkIG9uIHBvbHlmaWxsIGZyb21cbiAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvaXNcbiAgICByZXR1cm4gMCA9PT0gdCAmJiAxIC8gdCA9PSAtMSAvIDA7XG59XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIGEgdmFsdWUgaXMgYW4gaW50ZWdlciBhbmQgaW4gdGhlIHNhZmUgaW50ZWdlciByYW5nZVxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIHRlc3QgZm9yIGJlaW5nIGFuIGludGVnZXIgYW5kIGluIHRoZSBzYWZlIHJhbmdlXG4gKi8gZnVuY3Rpb24gVnQodCkge1xuICAgIHJldHVybiBcIm51bWJlclwiID09IHR5cGVvZiB0ICYmIE51bWJlci5pc0ludGVnZXIodCkgJiYgIXZ0KHQpICYmIHQgPD0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgJiYgdCA+PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgU3Qge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5wYXRoID0gdDtcbiAgICB9XG4gICAgc3RhdGljIGZyb21QYXRoKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTdChkdC5mcm9tU3RyaW5nKHQpKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21OYW1lKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTdChkdC5mcm9tU3RyaW5nKHQpLnBvcEZpcnN0KDUpKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZG9jdW1lbnQgaXMgaW4gdGhlIHNwZWNpZmllZCBjb2xsZWN0aW9uSWQuICovICAgIGhhc0NvbGxlY3Rpb25JZCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGgubGVuZ3RoID49IDIgJiYgdGhpcy5wYXRoLmdldCh0aGlzLnBhdGgubGVuZ3RoIC0gMikgPT09IHQ7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdCAmJiAwID09PSBkdC5jb21wYXJhdG9yKHRoaXMucGF0aCwgdC5wYXRoKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGgudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmF0b3IodCwgZSkge1xuICAgICAgICByZXR1cm4gZHQuY29tcGFyYXRvcih0LnBhdGgsIGUucGF0aCk7XG4gICAgfVxuICAgIHN0YXRpYyBpc0RvY3VtZW50S2V5KHQpIHtcbiAgICAgICAgcmV0dXJuIHQubGVuZ3RoICUgMiA9PSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgbmV3IGRvY3VtZW50IGtleSB3aXRoIHRoZSBnaXZlbiBzZWdtZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzZWdtZW50cyAtIFRoZSBzZWdtZW50cyBvZiB0aGUgcGF0aCB0byB0aGUgZG9jdW1lbnRcbiAgICAgKiBAcmV0dXJucyBBIG5ldyBpbnN0YW5jZSBvZiBEb2N1bWVudEtleVxuICAgICAqLyAgICBzdGF0aWMgZnJvbVNlZ21lbnRzKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTdChuZXcgZHQodC5zbGljZSgpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIEV4dHJhY3RzIHRoZSBiYWNrZW5kJ3MgdHlwZSBvcmRlciBmb3IgdGhlIHByb3ZpZGVkIHZhbHVlLiAqLyBmdW5jdGlvbiBEdCh0KSB7XG4gICAgcmV0dXJuIFwibnVsbFZhbHVlXCIgaW4gdCA/IDAgLyogTnVsbFZhbHVlICovIDogXCJib29sZWFuVmFsdWVcIiBpbiB0ID8gMSAvKiBCb29sZWFuVmFsdWUgKi8gOiBcImludGVnZXJWYWx1ZVwiIGluIHQgfHwgXCJkb3VibGVWYWx1ZVwiIGluIHQgPyAyIC8qIE51bWJlclZhbHVlICovIDogXCJ0aW1lc3RhbXBWYWx1ZVwiIGluIHQgPyAzIC8qIFRpbWVzdGFtcFZhbHVlICovIDogXCJzdHJpbmdWYWx1ZVwiIGluIHQgPyA1IC8qIFN0cmluZ1ZhbHVlICovIDogXCJieXRlc1ZhbHVlXCIgaW4gdCA/IDYgLyogQmxvYlZhbHVlICovIDogXCJyZWZlcmVuY2VWYWx1ZVwiIGluIHQgPyA3IC8qIFJlZlZhbHVlICovIDogXCJnZW9Qb2ludFZhbHVlXCIgaW4gdCA/IDggLyogR2VvUG9pbnRWYWx1ZSAqLyA6IFwiYXJyYXlWYWx1ZVwiIGluIHQgPyA5IC8qIEFycmF5VmFsdWUgKi8gOiBcIm1hcFZhbHVlXCIgaW4gdCA/IEF0KHQpID8gNCAvKiBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZSAqLyA6IDEwIC8qIE9iamVjdFZhbHVlICovIDogTCgpO1xufVxuXG4vKiogVGVzdHMgYGxlZnRgIGFuZCBgcmlnaHRgIGZvciBlcXVhbGl0eSBiYXNlZCBvbiB0aGUgYmFja2VuZCBzZW1hbnRpY3MuICovIGZ1bmN0aW9uIEN0KHQsIGUpIHtcbiAgICBjb25zdCBuID0gRHQodCk7XG4gICAgaWYgKG4gIT09IER0KGUpKSByZXR1cm4gITE7XG4gICAgc3dpdGNoIChuKSB7XG4gICAgICBjYXNlIDAgLyogTnVsbFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuICEwO1xuXG4gICAgICBjYXNlIDEgLyogQm9vbGVhblZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIHQuYm9vbGVhblZhbHVlID09PSBlLmJvb2xlYW5WYWx1ZTtcblxuICAgICAgY2FzZSA0IC8qIFNlcnZlclRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIFB0KHQpLmlzRXF1YWwoUHQoZSkpO1xuXG4gICAgICBjYXNlIDMgLyogVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQudGltZXN0YW1wVmFsdWUgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZS50aW1lc3RhbXBWYWx1ZSAmJiB0LnRpbWVzdGFtcFZhbHVlLmxlbmd0aCA9PT0gZS50aW1lc3RhbXBWYWx1ZS5sZW5ndGgpIFxuICAgICAgICAgICAgLy8gVXNlIHN0cmluZyBlcXVhbGl0eSBmb3IgSVNPIDg2MDEgdGltZXN0YW1wc1xuICAgICAgICAgICAgcmV0dXJuIHQudGltZXN0YW1wVmFsdWUgPT09IGUudGltZXN0YW1wVmFsdWU7XG4gICAgICAgICAgICBjb25zdCBuID0gVHQodC50aW1lc3RhbXBWYWx1ZSksIHMgPSBUdChlLnRpbWVzdGFtcFZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBuLnNlY29uZHMgPT09IHMuc2Vjb25kcyAmJiBuLm5hbm9zID09PSBzLm5hbm9zO1xuICAgICAgICB9KHQsIGUpO1xuXG4gICAgICBjYXNlIDUgLyogU3RyaW5nVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gdC5zdHJpbmdWYWx1ZSA9PT0gZS5zdHJpbmdWYWx1ZTtcblxuICAgICAgY2FzZSA2IC8qIEJsb2JWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gSXQodC5ieXRlc1ZhbHVlKS5pc0VxdWFsKEl0KGUuYnl0ZXNWYWx1ZSkpO1xuICAgICAgICB9KHQsIGUpO1xuXG4gICAgICBjYXNlIDcgLyogUmVmVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gdC5yZWZlcmVuY2VWYWx1ZSA9PT0gZS5yZWZlcmVuY2VWYWx1ZTtcblxuICAgICAgY2FzZSA4IC8qIEdlb1BvaW50VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIEV0KHQuZ2VvUG9pbnRWYWx1ZS5sYXRpdHVkZSkgPT09IEV0KGUuZ2VvUG9pbnRWYWx1ZS5sYXRpdHVkZSkgJiYgRXQodC5nZW9Qb2ludFZhbHVlLmxvbmdpdHVkZSkgPT09IEV0KGUuZ2VvUG9pbnRWYWx1ZS5sb25naXR1ZGUpO1xuICAgICAgICB9KHQsIGUpO1xuXG4gICAgICBjYXNlIDIgLyogTnVtYmVyVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgaWYgKFwiaW50ZWdlclZhbHVlXCIgaW4gdCAmJiBcImludGVnZXJWYWx1ZVwiIGluIGUpIHJldHVybiBFdCh0LmludGVnZXJWYWx1ZSkgPT09IEV0KGUuaW50ZWdlclZhbHVlKTtcbiAgICAgICAgICAgIGlmIChcImRvdWJsZVZhbHVlXCIgaW4gdCAmJiBcImRvdWJsZVZhbHVlXCIgaW4gZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBFdCh0LmRvdWJsZVZhbHVlKSwgcyA9IEV0KGUuZG91YmxlVmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuID09PSBzID8gdnQobikgPT09IHZ0KHMpIDogaXNOYU4obikgJiYgaXNOYU4ocyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gITE7XG4gICAgICAgIH0odCwgZSk7XG5cbiAgICAgIGNhc2UgOSAvKiBBcnJheVZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIHJ0KHQuYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW10sIGUuYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW10sIEN0KTtcblxuICAgICAgY2FzZSAxMCAvKiBPYmplY3RWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5tYXBWYWx1ZS5maWVsZHMgfHwge30sIHMgPSBlLm1hcFZhbHVlLmZpZWxkcyB8fCB7fTtcbiAgICAgICAgICAgIGlmICh1dChuKSAhPT0gdXQocykpIHJldHVybiAhMTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBpbiBuKSBpZiAobi5oYXNPd25Qcm9wZXJ0eSh0KSAmJiAodm9pZCAwID09PSBzW3RdIHx8ICFDdChuW3RdLCBzW3RdKSkpIHJldHVybiAhMTtcbiAgICAgICAgICAgIHJldHVybiAhMDtcbiAgICAgICAgfVxuICAgICAgICAvKiogUmV0dXJucyB0cnVlIGlmIHRoZSBBcnJheVZhbHVlIGNvbnRhaW5zIHRoZSBzcGVjaWZpZWQgZWxlbWVudC4gKi8gKHQsIGUpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gTCgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gTnQodCwgZSkge1xuICAgIHJldHVybiB2b2lkIDAgIT09ICh0LnZhbHVlcyB8fCBbXSkuZmluZCgodCA9PiBDdCh0LCBlKSkpO1xufVxuXG5mdW5jdGlvbiBrdCh0LCBlKSB7XG4gICAgY29uc3QgbiA9IER0KHQpLCBzID0gRHQoZSk7XG4gICAgaWYgKG4gIT09IHMpIHJldHVybiBpdChuLCBzKTtcbiAgICBzd2l0Y2ggKG4pIHtcbiAgICAgIGNhc2UgMCAvKiBOdWxsVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gMDtcblxuICAgICAgY2FzZSAxIC8qIEJvb2xlYW5WYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBpdCh0LmJvb2xlYW5WYWx1ZSwgZS5ib29sZWFuVmFsdWUpO1xuXG4gICAgICBjYXNlIDIgLyogTnVtYmVyVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IEV0KHQuaW50ZWdlclZhbHVlIHx8IHQuZG91YmxlVmFsdWUpLCBzID0gRXQoZS5pbnRlZ2VyVmFsdWUgfHwgZS5kb3VibGVWYWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gbiA8IHMgPyAtMSA6IG4gPiBzID8gMSA6IG4gPT09IHMgPyAwIDogXG4gICAgICAgICAgICAvLyBvbmUgb3IgYm90aCBhcmUgTmFOLlxuICAgICAgICAgICAgaXNOYU4obikgPyBpc05hTihzKSA/IDAgOiAtMSA6IDE7XG4gICAgICAgIH0odCwgZSk7XG5cbiAgICAgIGNhc2UgMyAvKiBUaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiB4dCh0LnRpbWVzdGFtcFZhbHVlLCBlLnRpbWVzdGFtcFZhbHVlKTtcblxuICAgICAgY2FzZSA0IC8qIFNlcnZlclRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIHh0KFB0KHQpLCBQdChlKSk7XG5cbiAgICAgIGNhc2UgNSAvKiBTdHJpbmdWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBpdCh0LnN0cmluZ1ZhbHVlLCBlLnN0cmluZ1ZhbHVlKTtcblxuICAgICAgY2FzZSA2IC8qIEJsb2JWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gSXQodCksIHMgPSBJdChlKTtcbiAgICAgICAgICAgIHJldHVybiBuLmNvbXBhcmVUbyhzKTtcbiAgICAgICAgfSh0LmJ5dGVzVmFsdWUsIGUuYnl0ZXNWYWx1ZSk7XG5cbiAgICAgIGNhc2UgNyAvKiBSZWZWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5zcGxpdChcIi9cIiksIHMgPSBlLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgbi5sZW5ndGggJiYgdCA8IHMubGVuZ3RoOyB0KyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gaXQoblt0XSwgc1t0XSk7XG4gICAgICAgICAgICAgICAgaWYgKDAgIT09IGUpIHJldHVybiBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGl0KG4ubGVuZ3RoLCBzLmxlbmd0aCk7XG4gICAgICAgIH0odC5yZWZlcmVuY2VWYWx1ZSwgZS5yZWZlcmVuY2VWYWx1ZSk7XG5cbiAgICAgIGNhc2UgOCAvKiBHZW9Qb2ludFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBpdChFdCh0LmxhdGl0dWRlKSwgRXQoZS5sYXRpdHVkZSkpO1xuICAgICAgICAgICAgaWYgKDAgIT09IG4pIHJldHVybiBuO1xuICAgICAgICAgICAgcmV0dXJuIGl0KEV0KHQubG9uZ2l0dWRlKSwgRXQoZS5sb25naXR1ZGUpKTtcbiAgICAgICAgfSh0Lmdlb1BvaW50VmFsdWUsIGUuZ2VvUG9pbnRWYWx1ZSk7XG5cbiAgICAgIGNhc2UgOSAvKiBBcnJheVZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LnZhbHVlcyB8fCBbXSwgcyA9IGUudmFsdWVzIHx8IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBuLmxlbmd0aCAmJiB0IDwgcy5sZW5ndGg7ICsrdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBrdChuW3RdLCBzW3RdKTtcbiAgICAgICAgICAgICAgICBpZiAoZSkgcmV0dXJuIGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXQobi5sZW5ndGgsIHMubGVuZ3RoKTtcbiAgICAgICAgfSh0LmFycmF5VmFsdWUsIGUuYXJyYXlWYWx1ZSk7XG5cbiAgICAgIGNhc2UgMTAgLyogT2JqZWN0VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuZmllbGRzIHx8IHt9LCBzID0gT2JqZWN0LmtleXMobiksIGkgPSBlLmZpZWxkcyB8fCB7fSwgciA9IE9iamVjdC5rZXlzKGkpO1xuICAgICAgICAgICAgLy8gRXZlbiB0aG91Z2ggTWFwVmFsdWVzIGFyZSBsaWtlbHkgc29ydGVkIGNvcnJlY3RseSBiYXNlZCBvbiB0aGVpciBpbnNlcnRpb25cbiAgICAgICAgICAgIC8vIG9yZGVyIChlLmcuIHdoZW4gcmVjZWl2ZWQgZnJvbSB0aGUgYmFja2VuZCksIGxvY2FsIG1vZGlmaWNhdGlvbnMgY2FuIGJyaW5nXG4gICAgICAgICAgICAvLyBlbGVtZW50cyBvdXQgb2Ygb3JkZXIuIFdlIG5lZWQgdG8gcmUtc29ydCB0aGUgZWxlbWVudHMgdG8gZW5zdXJlIHRoYXRcbiAgICAgICAgICAgIC8vIGNhbm9uaWNhbCBJRHMgYXJlIGluZGVwZW5kZW50IG9mIGluc2VydGlvbiBvcmRlci5cbiAgICAgICAgICAgIHMuc29ydCgpLCByLnNvcnQoKTtcbiAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgcy5sZW5ndGggJiYgdCA8IHIubGVuZ3RoOyArK3QpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gaXQoc1t0XSwgclt0XSk7XG4gICAgICAgICAgICAgICAgaWYgKDAgIT09IGUpIHJldHVybiBlO1xuICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBrdChuW3NbdF1dLCBpW3JbdF1dKTtcbiAgICAgICAgICAgICAgICBpZiAoMCAhPT0gbykgcmV0dXJuIG87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXQocy5sZW5ndGgsIHIubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEdlbmVyYXRlcyB0aGUgY2Fub25pY2FsIElEIGZvciB0aGUgcHJvdmlkZWQgZmllbGQgdmFsdWUgKGFzIHVzZWQgaW4gVGFyZ2V0XG4gKiBzZXJpYWxpemF0aW9uKS5cbiAqLyAodC5tYXBWYWx1ZSwgZS5tYXBWYWx1ZSk7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IEwoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHh0KHQsIGUpIHtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCAmJiBcInN0cmluZ1wiID09IHR5cGVvZiBlICYmIHQubGVuZ3RoID09PSBlLmxlbmd0aCkgcmV0dXJuIGl0KHQsIGUpO1xuICAgIGNvbnN0IG4gPSBUdCh0KSwgcyA9IFR0KGUpLCBpID0gaXQobi5zZWNvbmRzLCBzLnNlY29uZHMpO1xuICAgIHJldHVybiAwICE9PSBpID8gaSA6IGl0KG4ubmFub3MsIHMubmFub3MpO1xufVxuXG5mdW5jdGlvbiAkdCh0KSB7XG4gICAgcmV0dXJuIEZ0KHQpO1xufVxuXG5mdW5jdGlvbiBGdCh0KSB7XG4gICAgcmV0dXJuIFwibnVsbFZhbHVlXCIgaW4gdCA/IFwibnVsbFwiIDogXCJib29sZWFuVmFsdWVcIiBpbiB0ID8gXCJcIiArIHQuYm9vbGVhblZhbHVlIDogXCJpbnRlZ2VyVmFsdWVcIiBpbiB0ID8gXCJcIiArIHQuaW50ZWdlclZhbHVlIDogXCJkb3VibGVWYWx1ZVwiIGluIHQgPyBcIlwiICsgdC5kb3VibGVWYWx1ZSA6IFwidGltZXN0YW1wVmFsdWVcIiBpbiB0ID8gZnVuY3Rpb24odCkge1xuICAgICAgICBjb25zdCBlID0gVHQodCk7XG4gICAgICAgIHJldHVybiBgdGltZSgke2Uuc2Vjb25kc30sJHtlLm5hbm9zfSlgO1xuICAgIH0odC50aW1lc3RhbXBWYWx1ZSkgOiBcInN0cmluZ1ZhbHVlXCIgaW4gdCA/IHQuc3RyaW5nVmFsdWUgOiBcImJ5dGVzVmFsdWVcIiBpbiB0ID8gSXQodC5ieXRlc1ZhbHVlKS50b0Jhc2U2NCgpIDogXCJyZWZlcmVuY2VWYWx1ZVwiIGluIHQgPyAobiA9IHQucmVmZXJlbmNlVmFsdWUsIFxuICAgIFN0LmZyb21OYW1lKG4pLnRvU3RyaW5nKCkpIDogXCJnZW9Qb2ludFZhbHVlXCIgaW4gdCA/IGBnZW8oJHsoZSA9IHQuZ2VvUG9pbnRWYWx1ZSkubGF0aXR1ZGV9LCR7ZS5sb25naXR1ZGV9KWAgOiBcImFycmF5VmFsdWVcIiBpbiB0ID8gZnVuY3Rpb24odCkge1xuICAgICAgICBsZXQgZSA9IFwiW1wiLCBuID0gITA7XG4gICAgICAgIGZvciAoY29uc3QgcyBvZiB0LnZhbHVlcyB8fCBbXSkgbiA/IG4gPSAhMSA6IGUgKz0gXCIsXCIsIGUgKz0gRnQocyk7XG4gICAgICAgIHJldHVybiBlICsgXCJdXCI7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgcmVmZXJlbmNlIHZhbHVlIGZvciB0aGUgcHJvdmlkZWQgZGF0YWJhc2UgYW5kIGtleS4gKi8gKHQuYXJyYXlWYWx1ZSkgOiBcIm1hcFZhbHVlXCIgaW4gdCA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgLy8gSXRlcmF0aW9uIG9yZGVyIGluIEphdmFTY3JpcHQgaXMgbm90IGd1YXJhbnRlZWQuIFRvIGVuc3VyZSB0aGF0IHdlIGdlbmVyYXRlXG4gICAgICAgIC8vIG1hdGNoaW5nIGNhbm9uaWNhbCBJRHMgZm9yIGlkZW50aWNhbCBtYXBzLCB3ZSBuZWVkIHRvIHNvcnQgdGhlIGtleXMuXG4gICAgICAgIGNvbnN0IGUgPSBPYmplY3Qua2V5cyh0LmZpZWxkcyB8fCB7fSkuc29ydCgpO1xuICAgICAgICBsZXQgbiA9IFwie1wiLCBzID0gITA7XG4gICAgICAgIGZvciAoY29uc3QgaSBvZiBlKSBzID8gcyA9ICExIDogbiArPSBcIixcIiwgbiArPSBgJHtpfToke0Z0KHQuZmllbGRzW2ldKX1gO1xuICAgICAgICByZXR1cm4gbiArIFwifVwiO1xuICAgIH0odC5tYXBWYWx1ZSkgOiBMKCk7XG4gICAgdmFyIGUsIG47XG59XG5cbmZ1bmN0aW9uIE90KHQsIGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByZWZlcmVuY2VWYWx1ZTogYHByb2plY3RzLyR7dC5wcm9qZWN0SWR9L2RhdGFiYXNlcy8ke3QuZGF0YWJhc2V9L2RvY3VtZW50cy8ke2UucGF0aC5jYW5vbmljYWxTdHJpbmcoKX1gXG4gICAgfTtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGFuIEludGVnZXJWYWx1ZSAuICovIGZ1bmN0aW9uIE10KHQpIHtcbiAgICByZXR1cm4gISF0ICYmIFwiaW50ZWdlclZhbHVlXCIgaW4gdDtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGEgRG91YmxlVmFsdWUuICovXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgYW4gQXJyYXlWYWx1ZS4gKi9cbmZ1bmN0aW9uIEx0KHQpIHtcbiAgICByZXR1cm4gISF0ICYmIFwiYXJyYXlWYWx1ZVwiIGluIHQ7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhIE51bGxWYWx1ZS4gKi8gZnVuY3Rpb24gQnQodCkge1xuICAgIHJldHVybiAhIXQgJiYgXCJudWxsVmFsdWVcIiBpbiB0O1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgTmFOLiAqLyBmdW5jdGlvbiBVdCh0KSB7XG4gICAgcmV0dXJuICEhdCAmJiBcImRvdWJsZVZhbHVlXCIgaW4gdCAmJiBpc05hTihOdW1iZXIodC5kb3VibGVWYWx1ZSkpO1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgYSBNYXBWYWx1ZS4gKi8gZnVuY3Rpb24gcXQodCkge1xuICAgIHJldHVybiAhIXQgJiYgXCJtYXBWYWx1ZVwiIGluIHQ7XG59XG5cbi8qKiBDcmVhdGVzIGEgZGVlcCBjb3B5IG9mIGBzb3VyY2VgLiAqLyBmdW5jdGlvbiBLdCh0KSB7XG4gICAgaWYgKHQuZ2VvUG9pbnRWYWx1ZSkgcmV0dXJuIHtcbiAgICAgICAgZ2VvUG9pbnRWYWx1ZTogT2JqZWN0LmFzc2lnbih7fSwgdC5nZW9Qb2ludFZhbHVlKVxuICAgIH07XG4gICAgaWYgKHQudGltZXN0YW1wVmFsdWUgJiYgXCJvYmplY3RcIiA9PSB0eXBlb2YgdC50aW1lc3RhbXBWYWx1ZSkgcmV0dXJuIHtcbiAgICAgICAgdGltZXN0YW1wVmFsdWU6IE9iamVjdC5hc3NpZ24oe30sIHQudGltZXN0YW1wVmFsdWUpXG4gICAgfTtcbiAgICBpZiAodC5tYXBWYWx1ZSkge1xuICAgICAgICBjb25zdCBlID0ge1xuICAgICAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgICAgICBmaWVsZHM6IHt9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBodCh0Lm1hcFZhbHVlLmZpZWxkcywgKCh0LCBuKSA9PiBlLm1hcFZhbHVlLmZpZWxkc1t0XSA9IEt0KG4pKSksIGU7XG4gICAgfVxuICAgIGlmICh0LmFycmF5VmFsdWUpIHtcbiAgICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZXM6IFtdXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgKHQuYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW10pLmxlbmd0aDsgKytuKSBlLmFycmF5VmFsdWUudmFsdWVzW25dID0gS3QodC5hcnJheVZhbHVlLnZhbHVlc1tuXSk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgdCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIE9iamVjdFZhbHVlIHJlcHJlc2VudHMgYSBNYXBWYWx1ZSBpbiB0aGUgRmlyZXN0b3JlIFByb3RvIGFuZCBvZmZlcnMgdGhlXG4gKiBhYmlsaXR5IHRvIGFkZCBhbmQgcmVtb3ZlIGZpZWxkcyAodmlhIHRoZSBPYmplY3RWYWx1ZUJ1aWxkZXIpLlxuICovIGNsYXNzIGp0IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0O1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcganQoe1xuICAgICAgICAgICAgbWFwVmFsdWU6IHt9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB2YWx1ZSBhdCB0aGUgZ2l2ZW4gcGF0aCBvciBudWxsLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGggLSB0aGUgcGF0aCB0byBzZWFyY2hcbiAgICAgKiBAcmV0dXJucyBUaGUgdmFsdWUgYXQgdGhlIHBhdGggb3IgbnVsbCBpZiB0aGUgcGF0aCBpcyBub3Qgc2V0LlxuICAgICAqLyAgICBmaWVsZCh0KSB7XG4gICAgICAgIGlmICh0LmlzRW1wdHkoKSkgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGxldCBlID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5sZW5ndGggLSAxOyArK24pIGlmIChlID0gKGUubWFwVmFsdWUuZmllbGRzIHx8IHt9KVt0LmdldChuKV0sIFxuICAgICAgICAgICAgIXF0KGUpKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiBlID0gKGUubWFwVmFsdWUuZmllbGRzIHx8IHt9KVt0Lmxhc3RTZWdtZW50KCldLCBlIHx8IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgZmllbGQgdG8gdGhlIHByb3ZpZGVkIHZhbHVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGggLSBUaGUgZmllbGQgcGF0aCB0byBzZXQuXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIHNldC5cbiAgICAgKi8gICAgc2V0KHQsIGUpIHtcbiAgICAgICAgdGhpcy5nZXRGaWVsZHNNYXAodC5wb3BMYXN0KCkpW3QubGFzdFNlZ21lbnQoKV0gPSBLdChlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgcHJvdmlkZWQgZmllbGRzIHRvIHRoZSBwcm92aWRlZCB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGF0YSAtIEEgbWFwIG9mIGZpZWxkcyB0byB2YWx1ZXMgKG9yIG51bGwgZm9yIGRlbGV0ZXMpLlxuICAgICAqLyAgICBzZXRBbGwodCkge1xuICAgICAgICBsZXQgZSA9IF90LmVtcHR5UGF0aCgpLCBuID0ge30sIHMgPSBbXTtcbiAgICAgICAgdC5mb3JFYWNoKCgodCwgaSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFlLmlzSW1tZWRpYXRlUGFyZW50T2YoaSkpIHtcbiAgICAgICAgICAgICAgICAvLyBJbnNlcnQgdGhlIGFjY3VtdWxhdGVkIGNoYW5nZXMgYXQgdGhpcyBwYXJlbnQgbG9jYXRpb25cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5nZXRGaWVsZHNNYXAoZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBseUNoYW5nZXModCwgbiwgcyksIG4gPSB7fSwgcyA9IFtdLCBlID0gaS5wb3BMYXN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ID8gbltpLmxhc3RTZWdtZW50KCldID0gS3QodCkgOiBzLnB1c2goaS5sYXN0U2VnbWVudCgpKTtcbiAgICAgICAgfSkpO1xuICAgICAgICBjb25zdCBpID0gdGhpcy5nZXRGaWVsZHNNYXAoZSk7XG4gICAgICAgIHRoaXMuYXBwbHlDaGFuZ2VzKGksIG4sIHMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBmaWVsZCBhdCB0aGUgc3BlY2lmaWVkIHBhdGguIElmIHRoZXJlIGlzIG5vIGZpZWxkIGF0IHRoZVxuICAgICAqIHNwZWNpZmllZCBwYXRoLCBub3RoaW5nIGlzIGNoYW5nZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aCAtIFRoZSBmaWVsZCBwYXRoIHRvIHJlbW92ZS5cbiAgICAgKi8gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZmllbGQodC5wb3BMYXN0KCkpO1xuICAgICAgICBxdChlKSAmJiBlLm1hcFZhbHVlLmZpZWxkcyAmJiBkZWxldGUgZS5tYXBWYWx1ZS5maWVsZHNbdC5sYXN0U2VnbWVudCgpXTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiBDdCh0aGlzLnZhbHVlLCB0LnZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbWFwIHRoYXQgY29udGFpbnMgdGhlIGxlYWYgZWxlbWVudCBvZiBgcGF0aGAuIElmIHRoZSBwYXJlbnRcbiAgICAgKiBlbnRyeSBkb2VzIG5vdCB5ZXQgZXhpc3QsIG9yIGlmIGl0IGlzIG5vdCBhIG1hcCwgYSBuZXcgbWFwIHdpbGwgYmUgY3JlYXRlZC5cbiAgICAgKi8gICAgZ2V0RmllbGRzTWFwKHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLnZhbHVlO1xuICAgICAgICBlLm1hcFZhbHVlLmZpZWxkcyB8fCAoZS5tYXBWYWx1ZSA9IHtcbiAgICAgICAgICAgIGZpZWxkczoge31cbiAgICAgICAgfSk7XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5sZW5ndGg7ICsrbikge1xuICAgICAgICAgICAgbGV0IHMgPSBlLm1hcFZhbHVlLmZpZWxkc1t0LmdldChuKV07XG4gICAgICAgICAgICBxdChzKSAmJiBzLm1hcFZhbHVlLmZpZWxkcyB8fCAocyA9IHtcbiAgICAgICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZHM6IHt9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgZS5tYXBWYWx1ZS5maWVsZHNbdC5nZXQobildID0gcyksIGUgPSBzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlLm1hcFZhbHVlLmZpZWxkcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogTW9kaWZpZXMgYGZpZWxkc01hcGAgYnkgYWRkaW5nLCByZXBsYWNpbmcgb3IgZGVsZXRpbmcgdGhlIHNwZWNpZmllZFxuICAgICAqIGVudHJpZXMuXG4gICAgICovICAgIGFwcGx5Q2hhbmdlcyh0LCBlLCBuKSB7XG4gICAgICAgIGh0KGUsICgoZSwgbikgPT4gdFtlXSA9IG4pKTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIG4pIGRlbGV0ZSB0W2VdO1xuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBqdChLdCh0aGlzLnZhbHVlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSBGaWVsZE1hc2sgYnVpbHQgZnJvbSBhbGwgZmllbGRzIGluIGEgTWFwVmFsdWUuXG4gKi8gZnVuY3Rpb24gUXQodCkge1xuICAgIGNvbnN0IGUgPSBbXTtcbiAgICByZXR1cm4gaHQodC5maWVsZHMsICgodCwgbikgPT4ge1xuICAgICAgICBjb25zdCBzID0gbmV3IF90KFsgdCBdKTtcbiAgICAgICAgaWYgKHF0KG4pKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gUXQobi5tYXBWYWx1ZSkuZmllbGRzO1xuICAgICAgICAgICAgaWYgKDAgPT09IHQubGVuZ3RoKSBcbiAgICAgICAgICAgIC8vIFByZXNlcnZlIHRoZSBlbXB0eSBtYXAgYnkgYWRkaW5nIGl0IHRvIHRoZSBGaWVsZE1hc2suXG4gICAgICAgICAgICBlLnB1c2gocyk7IGVsc2UgXG4gICAgICAgICAgICAvLyBGb3IgbmVzdGVkIGFuZCBub24tZW1wdHkgT2JqZWN0VmFsdWVzLCBhZGQgdGhlIEZpZWxkUGF0aCBvZiB0aGVcbiAgICAgICAgICAgIC8vIGxlYWYgbm9kZXMuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdCkgZS5wdXNoKHMuY2hpbGQobikpO1xuICAgICAgICB9IGVsc2UgXG4gICAgICAgIC8vIEZvciBuZXN0ZWQgYW5kIG5vbi1lbXB0eSBPYmplY3RWYWx1ZXMsIGFkZCB0aGUgRmllbGRQYXRoIG9mIHRoZSBsZWFmXG4gICAgICAgIC8vIG5vZGVzLlxuICAgICAgICBlLnB1c2gocyk7XG4gICAgfSkpLCBuZXcgbXQoZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYSBkb2N1bWVudCBpbiBGaXJlc3RvcmUgd2l0aCBhIGtleSwgdmVyc2lvbiwgZGF0YSBhbmQgd2hldGhlciBpdFxuICogaGFzIGxvY2FsIG11dGF0aW9ucyBhcHBsaWVkIHRvIGl0LlxuICpcbiAqIERvY3VtZW50cyBjYW4gdHJhbnNpdGlvbiBiZXR3ZWVuIHN0YXRlcyB2aWEgYGNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQoKWAsXG4gKiBgY29udmVydFRvTm9Eb2N1bWVudCgpYCBhbmQgYGNvbnZlcnRUb1Vua25vd25Eb2N1bWVudCgpYC4gSWYgYSBkb2N1bWVudCBkb2VzXG4gKiBub3QgdHJhbnNpdGlvbiB0byBvbmUgb2YgdGhlc2Ugc3RhdGVzIGV2ZW4gYWZ0ZXIgYWxsIG11dGF0aW9ucyBoYXZlIGJlZW5cbiAqIGFwcGxpZWQsIGBpc1ZhbGlkRG9jdW1lbnQoKWAgcmV0dXJucyBmYWxzZSBhbmQgdGhlIGRvY3VtZW50IHNob3VsZCBiZSByZW1vdmVkXG4gKiBmcm9tIGFsbCB2aWV3cy5cbiAqLyBjbGFzcyBXdCB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSkge1xuICAgICAgICB0aGlzLmtleSA9IHQsIHRoaXMuZG9jdW1lbnRUeXBlID0gZSwgdGhpcy52ZXJzaW9uID0gbiwgdGhpcy5kYXRhID0gcywgdGhpcy5kb2N1bWVudFN0YXRlID0gaTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGRvY3VtZW50IHdpdGggbm8ga25vd24gdmVyc2lvbiBvciBkYXRhLCBidXQgd2hpY2ggY2FuIHNlcnZlIGFzXG4gICAgICogYmFzZSBkb2N1bWVudCBmb3IgbXV0YXRpb25zLlxuICAgICAqLyAgICBzdGF0aWMgbmV3SW52YWxpZERvY3VtZW50KHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBXdCh0LCAwIC8qIElOVkFMSUQgKi8gLCBjdC5taW4oKSwganQuZW1wdHkoKSwgMCAvKiBTWU5DRUQgKi8pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGRvY3VtZW50IHRoYXQgaXMga25vd24gdG8gZXhpc3Qgd2l0aCB0aGUgZ2l2ZW4gZGF0YSBhdCB0aGVcbiAgICAgKiBnaXZlbiB2ZXJzaW9uLlxuICAgICAqLyAgICBzdGF0aWMgbmV3Rm91bmREb2N1bWVudCh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgV3QodCwgMSAvKiBGT1VORF9ET0NVTUVOVCAqLyAsIGUsIG4sIDAgLyogU1lOQ0VEICovKTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgZG9jdW1lbnQgdGhhdCBpcyBrbm93biB0byBub3QgZXhpc3QgYXQgdGhlIGdpdmVuIHZlcnNpb24uICovICAgIHN0YXRpYyBuZXdOb0RvY3VtZW50KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBXdCh0LCAyIC8qIE5PX0RPQ1VNRU5UICovICwgZSwganQuZW1wdHkoKSwgMCAvKiBTWU5DRUQgKi8pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGRvY3VtZW50IHRoYXQgaXMga25vd24gdG8gZXhpc3QgYXQgdGhlIGdpdmVuIHZlcnNpb24gYnV0XG4gICAgICogd2hvc2UgZGF0YSBpcyBub3Qga25vd24gKGUuZy4gYSBkb2N1bWVudCB0aGF0IHdhcyB1cGRhdGVkIHdpdGhvdXQgYSBrbm93blxuICAgICAqIGJhc2UgZG9jdW1lbnQpLlxuICAgICAqLyAgICBzdGF0aWMgbmV3VW5rbm93bkRvY3VtZW50KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBXdCh0LCAzIC8qIFVOS05PV05fRE9DVU1FTlQgKi8gLCBlLCBqdC5lbXB0eSgpLCAyIC8qIEhBU19DT01NSVRURURfTVVUQVRJT05TICovKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hhbmdlcyB0aGUgZG9jdW1lbnQgdHlwZSB0byBpbmRpY2F0ZSB0aGF0IGl0IGV4aXN0cyBhbmQgdGhhdCBpdHMgdmVyc2lvblxuICAgICAqIGFuZCBkYXRhIGFyZSBrbm93bi5cbiAgICAgKi8gICAgY29udmVydFRvRm91bmREb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZlcnNpb24gPSB0LCB0aGlzLmRvY3VtZW50VHlwZSA9IDEgLyogRk9VTkRfRE9DVU1FTlQgKi8gLCB0aGlzLmRhdGEgPSBlLCBcbiAgICAgICAgdGhpcy5kb2N1bWVudFN0YXRlID0gMCAvKiBTWU5DRUQgKi8gLCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGFuZ2VzIHRoZSBkb2N1bWVudCB0eXBlIHRvIGluZGljYXRlIHRoYXQgaXQgZG9lc24ndCBleGlzdCBhdCB0aGUgZ2l2ZW5cbiAgICAgKiB2ZXJzaW9uLlxuICAgICAqLyAgICBjb252ZXJ0VG9Ob0RvY3VtZW50KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmVyc2lvbiA9IHQsIHRoaXMuZG9jdW1lbnRUeXBlID0gMiAvKiBOT19ET0NVTUVOVCAqLyAsIHRoaXMuZGF0YSA9IGp0LmVtcHR5KCksIFxuICAgICAgICB0aGlzLmRvY3VtZW50U3RhdGUgPSAwIC8qIFNZTkNFRCAqLyAsIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZXMgdGhlIGRvY3VtZW50IHR5cGUgdG8gaW5kaWNhdGUgdGhhdCBpdCBleGlzdHMgYXQgYSBnaXZlbiB2ZXJzaW9uIGJ1dFxuICAgICAqIHRoYXQgaXRzIGRhdGEgaXMgbm90IGtub3duIChlLmcuIGEgZG9jdW1lbnQgdGhhdCB3YXMgdXBkYXRlZCB3aXRob3V0IGEga25vd25cbiAgICAgKiBiYXNlIGRvY3VtZW50KS5cbiAgICAgKi8gICAgY29udmVydFRvVW5rbm93bkRvY3VtZW50KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmVyc2lvbiA9IHQsIHRoaXMuZG9jdW1lbnRUeXBlID0gMyAvKiBVTktOT1dOX0RPQ1VNRU5UICovICwgdGhpcy5kYXRhID0ganQuZW1wdHkoKSwgXG4gICAgICAgIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IDIgLyogSEFTX0NPTU1JVFRFRF9NVVRBVElPTlMgKi8gLCB0aGlzO1xuICAgIH1cbiAgICBzZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50U3RhdGUgPSAyIC8qIEhBU19DT01NSVRURURfTVVUQVRJT05TICovICwgdGhpcztcbiAgICB9XG4gICAgc2V0SGFzTG9jYWxNdXRhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50U3RhdGUgPSAxIC8qIEhBU19MT0NBTF9NVVRBVElPTlMgKi8gLCB0aGlzO1xuICAgIH1cbiAgICBnZXQgaGFzTG9jYWxNdXRhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiAxIC8qIEhBU19MT0NBTF9NVVRBVElPTlMgKi8gPT09IHRoaXMuZG9jdW1lbnRTdGF0ZTtcbiAgICB9XG4gICAgZ2V0IGhhc0NvbW1pdHRlZE11dGF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIDIgLyogSEFTX0NPTU1JVFRFRF9NVVRBVElPTlMgKi8gPT09IHRoaXMuZG9jdW1lbnRTdGF0ZTtcbiAgICB9XG4gICAgZ2V0IGhhc1BlbmRpbmdXcml0ZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhc0xvY2FsTXV0YXRpb25zIHx8IHRoaXMuaGFzQ29tbWl0dGVkTXV0YXRpb25zO1xuICAgIH1cbiAgICBpc1ZhbGlkRG9jdW1lbnQoKSB7XG4gICAgICAgIHJldHVybiAwIC8qIElOVkFMSUQgKi8gIT09IHRoaXMuZG9jdW1lbnRUeXBlO1xuICAgIH1cbiAgICBpc0ZvdW5kRG9jdW1lbnQoKSB7XG4gICAgICAgIHJldHVybiAxIC8qIEZPVU5EX0RPQ1VNRU5UICovID09PSB0aGlzLmRvY3VtZW50VHlwZTtcbiAgICB9XG4gICAgaXNOb0RvY3VtZW50KCkge1xuICAgICAgICByZXR1cm4gMiAvKiBOT19ET0NVTUVOVCAqLyA9PT0gdGhpcy5kb2N1bWVudFR5cGU7XG4gICAgfVxuICAgIGlzVW5rbm93bkRvY3VtZW50KCkge1xuICAgICAgICByZXR1cm4gMyAvKiBVTktOT1dOX0RPQ1VNRU5UICovID09PSB0aGlzLmRvY3VtZW50VHlwZTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgV3QgJiYgdGhpcy5rZXkuaXNFcXVhbCh0LmtleSkgJiYgdGhpcy52ZXJzaW9uLmlzRXF1YWwodC52ZXJzaW9uKSAmJiB0aGlzLmRvY3VtZW50VHlwZSA9PT0gdC5kb2N1bWVudFR5cGUgJiYgdGhpcy5kb2N1bWVudFN0YXRlID09PSB0LmRvY3VtZW50U3RhdGUgJiYgdGhpcy5kYXRhLmlzRXF1YWwodC5kYXRhKTtcbiAgICB9XG4gICAgY2xvbmUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgV3QodGhpcy5rZXksIHRoaXMuZG9jdW1lbnRUeXBlLCB0aGlzLnZlcnNpb24sIHRoaXMuZGF0YS5jbG9uZSgpLCB0aGlzLmRvY3VtZW50U3RhdGUpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIGBEb2N1bWVudCgke3RoaXMua2V5fSwgJHt0aGlzLnZlcnNpb259LCAke0pTT04uc3RyaW5naWZ5KHRoaXMuZGF0YS52YWx1ZSl9LCB7ZG9jdW1lbnRUeXBlOiAke3RoaXMuZG9jdW1lbnRUeXBlfX0pLCB7ZG9jdW1lbnRTdGF0ZTogJHt0aGlzLmRvY3VtZW50U3RhdGV9fSlgO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDb21wYXJlcyB0aGUgdmFsdWUgZm9yIGZpZWxkIGBmaWVsZGAgaW4gdGhlIHByb3ZpZGVkIGRvY3VtZW50cy4gVGhyb3dzIGlmXG4gKiB0aGUgZmllbGQgZG9lcyBub3QgZXhpc3QgaW4gYm90aCBkb2N1bWVudHMuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXG5jbGFzcyBHdCB7XG4gICAgY29uc3RydWN0b3IodCwgZSA9IG51bGwsIG4gPSBbXSwgcyA9IFtdLCBpID0gbnVsbCwgciA9IG51bGwsIG8gPSBudWxsKSB7XG4gICAgICAgIHRoaXMucGF0aCA9IHQsIHRoaXMuY29sbGVjdGlvbkdyb3VwID0gZSwgdGhpcy5vcmRlckJ5ID0gbiwgdGhpcy5maWx0ZXJzID0gcywgdGhpcy5saW1pdCA9IGksIFxuICAgICAgICB0aGlzLnN0YXJ0QXQgPSByLCB0aGlzLmVuZEF0ID0gbywgdGhpcy5SID0gbnVsbDtcbiAgICB9XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgYSBUYXJnZXQgd2l0aCBhIHBhdGggYW5kIG9wdGlvbmFsIGFkZGl0aW9uYWwgcXVlcnkgY29uc3RyYWludHMuXG4gKiBQYXRoIG11c3QgY3VycmVudGx5IGJlIGVtcHR5IGlmIHRoaXMgaXMgYSBjb2xsZWN0aW9uIGdyb3VwIHF1ZXJ5LlxuICpcbiAqIE5PVEU6IHlvdSBzaG91bGQgYWx3YXlzIGNvbnN0cnVjdCBgVGFyZ2V0YCBmcm9tIGBRdWVyeS50b1RhcmdldGAgaW5zdGVhZCBvZlxuICogdXNpbmcgdGhpcyBmYWN0b3J5IG1ldGhvZCwgYmVjYXVzZSBgUXVlcnlgIHByb3ZpZGVzIGFuIGltcGxpY2l0IGBvcmRlckJ5YFxuICogcHJvcGVydHkuXG4gKi8gZnVuY3Rpb24genQodCwgZSA9IG51bGwsIG4gPSBbXSwgcyA9IFtdLCBpID0gbnVsbCwgciA9IG51bGwsIG8gPSBudWxsKSB7XG4gICAgcmV0dXJuIG5ldyBHdCh0LCBlLCBuLCBzLCBpLCByLCBvKTtcbn1cblxuZnVuY3Rpb24gSHQodCkge1xuICAgIGNvbnN0IGUgPSBxKHQpO1xuICAgIGlmIChudWxsID09PSBlLlIpIHtcbiAgICAgICAgbGV0IHQgPSBlLnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgICAgIG51bGwgIT09IGUuY29sbGVjdGlvbkdyb3VwICYmICh0ICs9IFwifGNnOlwiICsgZS5jb2xsZWN0aW9uR3JvdXApLCB0ICs9IFwifGY6XCIsIHQgKz0gZS5maWx0ZXJzLm1hcCgodCA9PiB0ZSh0KSkpLmpvaW4oXCIsXCIpLCBcbiAgICAgICAgdCArPSBcInxvYjpcIiwgdCArPSBlLm9yZGVyQnkubWFwKCh0ID0+IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIC8vIFRPRE8oYi8yOTE4MzE2NSk6IE1ha2UgdGhpcyBjb2xsaXNpb24gcm9idXN0LlxuICAgICAgICAgICAgcmV0dXJuIHQuZmllbGQuY2Fub25pY2FsU3RyaW5nKCkgKyB0LmRpcjtcbiAgICAgICAgfSh0KSkpLmpvaW4oXCIsXCIpLCBidChlLmxpbWl0KSB8fCAodCArPSBcInxsOlwiLCB0ICs9IGUubGltaXQpLCBlLnN0YXJ0QXQgJiYgKHQgKz0gXCJ8bGI6XCIsIFxuICAgICAgICB0ICs9IGhlKGUuc3RhcnRBdCkpLCBlLmVuZEF0ICYmICh0ICs9IFwifHViOlwiLCB0ICs9IGhlKGUuZW5kQXQpKSwgZS5SID0gdDtcbiAgICB9XG4gICAgcmV0dXJuIGUuUjtcbn1cblxuZnVuY3Rpb24gSnQodCkge1xuICAgIGxldCBlID0gdC5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIHJldHVybiBudWxsICE9PSB0LmNvbGxlY3Rpb25Hcm91cCAmJiAoZSArPSBcIiBjb2xsZWN0aW9uR3JvdXA9XCIgKyB0LmNvbGxlY3Rpb25Hcm91cCksIFxuICAgIHQuZmlsdGVycy5sZW5ndGggPiAwICYmIChlICs9IGAsIGZpbHRlcnM6IFske3QuZmlsdGVycy5tYXAoKHQgPT4ge1xuICAgICAgICByZXR1cm4gYCR7KGUgPSB0KS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKX0gJHtlLm9wfSAkeyR0KGUudmFsdWUpfWA7XG4gICAgICAgIC8qKiBSZXR1cm5zIGEgZGVidWcgZGVzY3JpcHRpb24gZm9yIGBmaWx0ZXJgLiAqL1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgLyoqIEZpbHRlciB0aGF0IG1hdGNoZXMgb24ga2V5IGZpZWxkcyAoaS5lLiAnX19uYW1lX18nKS4gKi8gICAgfSkpLmpvaW4oXCIsIFwiKX1dYCksIFxuICAgIGJ0KHQubGltaXQpIHx8IChlICs9IFwiLCBsaW1pdDogXCIgKyB0LmxpbWl0KSwgdC5vcmRlckJ5Lmxlbmd0aCA+IDAgJiYgKGUgKz0gYCwgb3JkZXJCeTogWyR7dC5vcmRlckJ5Lm1hcCgodCA9PiBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBgJHt0LmZpZWxkLmNhbm9uaWNhbFN0cmluZygpfSAoJHt0LmRpcn0pYDtcbiAgICB9KHQpKSkuam9pbihcIiwgXCIpfV1gKSwgdC5zdGFydEF0ICYmIChlICs9IFwiLCBzdGFydEF0OiBcIiArIGhlKHQuc3RhcnRBdCkpLCB0LmVuZEF0ICYmIChlICs9IFwiLCBlbmRBdDogXCIgKyBoZSh0LmVuZEF0KSksIFxuICAgIGBUYXJnZXQoJHtlfSlgO1xufVxuXG5mdW5jdGlvbiBZdCh0LCBlKSB7XG4gICAgaWYgKHQubGltaXQgIT09IGUubGltaXQpIHJldHVybiAhMTtcbiAgICBpZiAodC5vcmRlckJ5Lmxlbmd0aCAhPT0gZS5vcmRlckJ5Lmxlbmd0aCkgcmV0dXJuICExO1xuICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5vcmRlckJ5Lmxlbmd0aDsgbisrKSBpZiAoIWZlKHQub3JkZXJCeVtuXSwgZS5vcmRlckJ5W25dKSkgcmV0dXJuICExO1xuICAgIGlmICh0LmZpbHRlcnMubGVuZ3RoICE9PSBlLmZpbHRlcnMubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0LmZpbHRlcnMubGVuZ3RoOyBpKyspIGlmIChuID0gdC5maWx0ZXJzW2ldLCBzID0gZS5maWx0ZXJzW2ldLCBcbiAgICBuLm9wICE9PSBzLm9wIHx8ICFuLmZpZWxkLmlzRXF1YWwocy5maWVsZCkgfHwgIUN0KG4udmFsdWUsIHMudmFsdWUpKSByZXR1cm4gITE7XG4gICAgdmFyIG4sIHM7XG4gICAgcmV0dXJuIHQuY29sbGVjdGlvbkdyb3VwID09PSBlLmNvbGxlY3Rpb25Hcm91cCAmJiAoISF0LnBhdGguaXNFcXVhbChlLnBhdGgpICYmICghIXdlKHQuc3RhcnRBdCwgZS5zdGFydEF0KSAmJiB3ZSh0LmVuZEF0LCBlLmVuZEF0KSkpO1xufVxuXG5mdW5jdGlvbiBYdCh0KSB7XG4gICAgcmV0dXJuIFN0LmlzRG9jdW1lbnRLZXkodC5wYXRoKSAmJiBudWxsID09PSB0LmNvbGxlY3Rpb25Hcm91cCAmJiAwID09PSB0LmZpbHRlcnMubGVuZ3RoO1xufVxuXG5jbGFzcyBadCBleHRlbmRzIGNsYXNzIHt9IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZmllbGQgPSB0LCB0aGlzLm9wID0gZSwgdGhpcy52YWx1ZSA9IG47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmaWx0ZXIgYmFzZWQgb24gdGhlIHByb3ZpZGVkIGFyZ3VtZW50cy5cbiAgICAgKi8gICAgc3RhdGljIGNyZWF0ZSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0LmlzS2V5RmllbGQoKSA/IFwiaW5cIiAvKiBJTiAqLyA9PT0gZSB8fCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyA9PT0gZSA/IHRoaXMuUCh0LCBlLCBuKSA6IG5ldyBlZSh0LCBlLCBuKSA6IFwiYXJyYXktY29udGFpbnNcIiAvKiBBUlJBWV9DT05UQUlOUyAqLyA9PT0gZSA/IG5ldyByZSh0LCBuKSA6IFwiaW5cIiAvKiBJTiAqLyA9PT0gZSA/IG5ldyBvZSh0LCBuKSA6IFwibm90LWluXCIgLyogTk9UX0lOICovID09PSBlID8gbmV3IGFlKHQsIG4pIDogXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi8gPT09IGUgPyBuZXcgY2UodCwgbikgOiBuZXcgWnQodCwgZSwgbik7XG4gICAgfVxuICAgIHN0YXRpYyBQKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIFwiaW5cIiAvKiBJTiAqLyA9PT0gZSA/IG5ldyBuZSh0LCBuKSA6IG5ldyBzZSh0LCBuKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmRhdGEuZmllbGQodGhpcy5maWVsZCk7XG4gICAgICAgIC8vIFR5cGVzIGRvIG5vdCBoYXZlIHRvIG1hdGNoIGluIE5PVF9FUVVBTCBmaWx0ZXJzLlxuICAgICAgICAgICAgICAgIHJldHVybiBcIiE9XCIgLyogTk9UX0VRVUFMICovID09PSB0aGlzLm9wID8gbnVsbCAhPT0gZSAmJiB0aGlzLnYoa3QoZSwgdGhpcy52YWx1ZSkpIDogbnVsbCAhPT0gZSAmJiBEdCh0aGlzLnZhbHVlKSA9PT0gRHQoZSkgJiYgdGhpcy52KGt0KGUsIHRoaXMudmFsdWUpKTtcbiAgICAgICAgLy8gT25seSBjb21wYXJlIHR5cGVzIHdpdGggbWF0Y2hpbmcgYmFja2VuZCBvcmRlciAoc3VjaCBhcyBkb3VibGUgYW5kIGludCkuXG4gICAgICAgIH1cbiAgICB2KHQpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLm9wKSB7XG4gICAgICAgICAgY2FzZSBcIjxcIiAvKiBMRVNTX1RIQU4gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHQgPCAwO1xuXG4gICAgICAgICAgY2FzZSBcIjw9XCIgLyogTEVTU19USEFOX09SX0VRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiB0IDw9IDA7XG5cbiAgICAgICAgICBjYXNlIFwiPT1cIiAvKiBFUVVBTCAqLyA6XG4gICAgICAgICAgICByZXR1cm4gMCA9PT0gdDtcblxuICAgICAgICAgIGNhc2UgXCIhPVwiIC8qIE5PVF9FUVVBTCAqLyA6XG4gICAgICAgICAgICByZXR1cm4gMCAhPT0gdDtcblxuICAgICAgICAgIGNhc2UgXCI+XCIgLyogR1JFQVRFUl9USEFOICovIDpcbiAgICAgICAgICAgIHJldHVybiB0ID4gMDtcblxuICAgICAgICAgIGNhc2UgXCI+PVwiIC8qIEdSRUFURVJfVEhBTl9PUl9FUVVBTCAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdCA+PSAwO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBMKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgVigpIHtcbiAgICAgICAgcmV0dXJuIFsgXCI8XCIgLyogTEVTU19USEFOICovICwgXCI8PVwiIC8qIExFU1NfVEhBTl9PUl9FUVVBTCAqLyAsIFwiPlwiIC8qIEdSRUFURVJfVEhBTiAqLyAsIFwiPj1cIiAvKiBHUkVBVEVSX1RIQU5fT1JfRVFVQUwgKi8gLCBcIiE9XCIgLyogTk9UX0VRVUFMICovICwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gXS5pbmRleE9mKHRoaXMub3ApID49IDA7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB0ZSh0KSB7XG4gICAgLy8gVE9ETyhiLzI5MTgzMTY1KTogVGVjaG5pY2FsbHksIHRoaXMgd29uJ3QgYmUgdW5pcXVlIGlmIHR3byB2YWx1ZXMgaGF2ZVxuICAgIC8vIHRoZSBzYW1lIGRlc2NyaXB0aW9uLCBzdWNoIGFzIHRoZSBpbnQgMyBhbmQgdGhlIHN0cmluZyBcIjNcIi4gU28gd2Ugc2hvdWxkXG4gICAgLy8gYWRkIHRoZSB0eXBlcyBpbiBoZXJlIHNvbWVob3csIHRvby5cbiAgICByZXR1cm4gdC5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSArIHQub3AudG9TdHJpbmcoKSArICR0KHQudmFsdWUpO1xufVxuXG5jbGFzcyBlZSBleHRlbmRzIFp0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKHQsIGUsIG4pLCB0aGlzLmtleSA9IFN0LmZyb21OYW1lKG4ucmVmZXJlbmNlVmFsdWUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFN0LmNvbXBhcmF0b3IodC5rZXksIHRoaXMua2V5KTtcbiAgICAgICAgcmV0dXJuIHRoaXMudihlKTtcbiAgICB9XG59XG5cbi8qKiBGaWx0ZXIgdGhhdCBtYXRjaGVzIG9uIGtleSBmaWVsZHMgd2l0aGluIGFuIGFycmF5LiAqLyBjbGFzcyBuZSBleHRlbmRzIFp0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIFwiaW5cIiAvKiBJTiAqLyAsIGUpLCB0aGlzLmtleXMgPSBpZShcImluXCIgLyogSU4gKi8gLCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtleXMuc29tZSgoZSA9PiBlLmlzRXF1YWwodC5rZXkpKSk7XG4gICAgfVxufVxuXG4vKiogRmlsdGVyIHRoYXQgbWF0Y2hlcyBvbiBrZXkgZmllbGRzIG5vdCBwcmVzZW50IHdpdGhpbiBhbiBhcnJheS4gKi8gY2xhc3Mgc2UgZXh0ZW5kcyBadCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyAsIGUpLCB0aGlzLmtleXMgPSBpZShcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyAsIGUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmtleXMuc29tZSgoZSA9PiBlLmlzRXF1YWwodC5rZXkpKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpZSh0LCBlKSB7XG4gICAgdmFyIG47XG4gICAgcmV0dXJuICgobnVsbCA9PT0gKG4gPSBlLmFycmF5VmFsdWUpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4udmFsdWVzKSB8fCBbXSkubWFwKCh0ID0+IFN0LmZyb21OYW1lKHQucmVmZXJlbmNlVmFsdWUpKSk7XG59XG5cbi8qKiBBIEZpbHRlciB0aGF0IGltcGxlbWVudHMgdGhlIGFycmF5LWNvbnRhaW5zIG9wZXJhdG9yLiAqLyBjbGFzcyByZSBleHRlbmRzIFp0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIFwiYXJyYXktY29udGFpbnNcIiAvKiBBUlJBWV9DT05UQUlOUyAqLyAsIGUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIEx0KGUpICYmIE50KGUuYXJyYXlWYWx1ZSwgdGhpcy52YWx1ZSk7XG4gICAgfVxufVxuXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBJTiBvcGVyYXRvci4gKi8gY2xhc3Mgb2UgZXh0ZW5kcyBadCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBcImluXCIgLyogSU4gKi8gLCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmRhdGEuZmllbGQodGhpcy5maWVsZCk7XG4gICAgICAgIHJldHVybiBudWxsICE9PSBlICYmIE50KHRoaXMudmFsdWUuYXJyYXlWYWx1ZSwgZSk7XG4gICAgfVxufVxuXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBub3QtaW4gb3BlcmF0b3IuICovIGNsYXNzIGFlIGV4dGVuZHMgWnQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gLCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIGlmIChOdCh0aGlzLnZhbHVlLmFycmF5VmFsdWUsIHtcbiAgICAgICAgICAgIG51bGxWYWx1ZTogXCJOVUxMX1ZBTFVFXCJcbiAgICAgICAgfSkpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgZSA9IHQuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IGUgJiYgIU50KHRoaXMudmFsdWUuYXJyYXlWYWx1ZSwgZSk7XG4gICAgfVxufVxuXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBhcnJheS1jb250YWlucy1hbnkgb3BlcmF0b3IuICovIGNsYXNzIGNlIGV4dGVuZHMgWnQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi8gLCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmRhdGEuZmllbGQodGhpcy5maWVsZCk7XG4gICAgICAgIHJldHVybiAhKCFMdChlKSB8fCAhZS5hcnJheVZhbHVlLnZhbHVlcykgJiYgZS5hcnJheVZhbHVlLnZhbHVlcy5zb21lKCh0ID0+IE50KHRoaXMudmFsdWUuYXJyYXlWYWx1ZSwgdCkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyBhIGJvdW5kIG9mIGEgcXVlcnkuXG4gKlxuICogVGhlIGJvdW5kIGlzIHNwZWNpZmllZCB3aXRoIHRoZSBnaXZlbiBjb21wb25lbnRzIHJlcHJlc2VudGluZyBhIHBvc2l0aW9uIGFuZFxuICogd2hldGhlciBpdCdzIGp1c3QgYmVmb3JlIG9yIGp1c3QgYWZ0ZXIgdGhlIHBvc2l0aW9uIChyZWxhdGl2ZSB0byB3aGF0ZXZlciB0aGVcbiAqIHF1ZXJ5IG9yZGVyIGlzKS5cbiAqXG4gKiBUaGUgcG9zaXRpb24gcmVwcmVzZW50cyBhIGxvZ2ljYWwgaW5kZXggcG9zaXRpb24gZm9yIGEgcXVlcnkuIEl0J3MgYSBwcmVmaXhcbiAqIG9mIHZhbHVlcyBmb3IgdGhlIChwb3RlbnRpYWxseSBpbXBsaWNpdCkgb3JkZXIgYnkgY2xhdXNlcyBvZiBhIHF1ZXJ5LlxuICpcbiAqIEJvdW5kIHByb3ZpZGVzIGEgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIHdoZXRoZXIgYSBkb2N1bWVudCBjb21lcyBiZWZvcmUgb3JcbiAqIGFmdGVyIGEgYm91bmQuIFRoaXMgaXMgaW5mbHVlbmNlZCBieSB3aGV0aGVyIHRoZSBwb3NpdGlvbiBpcyBqdXN0IGJlZm9yZSBvclxuICoganVzdCBhZnRlciB0aGUgcHJvdmlkZWQgdmFsdWVzLlxuICovIGNsYXNzIHVlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucG9zaXRpb24gPSB0LCB0aGlzLmJlZm9yZSA9IGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBoZSh0KSB7XG4gICAgLy8gVE9ETyhiLzI5MTgzMTY1KTogTWFrZSB0aGlzIGNvbGxpc2lvbiByb2J1c3QuXG4gICAgcmV0dXJuIGAke3QuYmVmb3JlID8gXCJiXCIgOiBcImFcIn06JHt0LnBvc2l0aW9uLm1hcCgodCA9PiAkdCh0KSkpLmpvaW4oXCIsXCIpfWA7XG59XG5cbi8qKlxuICogQW4gb3JkZXJpbmcgb24gYSBmaWVsZCwgaW4gc29tZSBEaXJlY3Rpb24uIERpcmVjdGlvbiBkZWZhdWx0cyB0byBBU0NFTkRJTkcuXG4gKi8gY2xhc3MgbGUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUgPSBcImFzY1wiIC8qIEFTQ0VORElORyAqLykge1xuICAgICAgICB0aGlzLmZpZWxkID0gdCwgdGhpcy5kaXIgPSBlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZmUodCwgZSkge1xuICAgIHJldHVybiB0LmRpciA9PT0gZS5kaXIgJiYgdC5maWVsZC5pc0VxdWFsKGUuZmllbGQpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBhIGRvY3VtZW50IHNvcnRzIGJlZm9yZSBhIGJvdW5kIHVzaW5nIHRoZSBwcm92aWRlZCBzb3J0XG4gKiBvcmRlci5cbiAqLyBmdW5jdGlvbiBkZSh0LCBlLCBuKSB7XG4gICAgbGV0IHMgPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdC5wb3NpdGlvbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCByID0gZVtpXSwgbyA9IHQucG9zaXRpb25baV07XG4gICAgICAgIGlmIChyLmZpZWxkLmlzS2V5RmllbGQoKSkgcyA9IFN0LmNvbXBhcmF0b3IoU3QuZnJvbU5hbWUoby5yZWZlcmVuY2VWYWx1ZSksIG4ua2V5KTsgZWxzZSB7XG4gICAgICAgICAgICBzID0ga3Qobywgbi5kYXRhLmZpZWxkKHIuZmllbGQpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXCJkZXNjXCIgLyogREVTQ0VORElORyAqLyA9PT0gci5kaXIgJiYgKHMgKj0gLTEpLCAwICE9PSBzKSBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIHQuYmVmb3JlID8gcyA8PSAwIDogcyA8IDA7XG59XG5cbmZ1bmN0aW9uIHdlKHQsIGUpIHtcbiAgICBpZiAobnVsbCA9PT0gdCkgcmV0dXJuIG51bGwgPT09IGU7XG4gICAgaWYgKG51bGwgPT09IGUpIHJldHVybiAhMTtcbiAgICBpZiAodC5iZWZvcmUgIT09IGUuYmVmb3JlIHx8IHQucG9zaXRpb24ubGVuZ3RoICE9PSBlLnBvc2l0aW9uLmxlbmd0aCkgcmV0dXJuICExO1xuICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5wb3NpdGlvbi5sZW5ndGg7IG4rKykge1xuICAgICAgICBpZiAoIUN0KHQucG9zaXRpb25bbl0sIGUucG9zaXRpb25bbl0pKSByZXR1cm4gITE7XG4gICAgfVxuICAgIHJldHVybiAhMDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUXVlcnkgZW5jYXBzdWxhdGVzIGFsbCB0aGUgcXVlcnkgYXR0cmlidXRlcyB3ZSBzdXBwb3J0IGluIHRoZSBTREsuIEl0IGNhblxuICogYmUgcnVuIGFnYWluc3QgdGhlIExvY2FsU3RvcmUsIGFzIHdlbGwgYXMgYmUgY29udmVydGVkIHRvIGEgYFRhcmdldGAgdG9cbiAqIHF1ZXJ5IHRoZSBSZW1vdGVTdG9yZSByZXN1bHRzLlxuICpcbiAqIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gKi8gY2xhc3MgX2Uge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIGEgUXVlcnkgd2l0aCBhIHBhdGggYW5kIG9wdGlvbmFsIGFkZGl0aW9uYWwgcXVlcnkgY29uc3RyYWludHMuXG4gICAgICogUGF0aCBtdXN0IGN1cnJlbnRseSBiZSBlbXB0eSBpZiB0aGlzIGlzIGEgY29sbGVjdGlvbiBncm91cCBxdWVyeS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlID0gbnVsbCwgbiA9IFtdLCBzID0gW10sIGkgPSBudWxsLCByID0gXCJGXCIgLyogRmlyc3QgKi8gLCBvID0gbnVsbCwgYSA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5wYXRoID0gdCwgdGhpcy5jb2xsZWN0aW9uR3JvdXAgPSBlLCB0aGlzLmV4cGxpY2l0T3JkZXJCeSA9IG4sIHRoaXMuZmlsdGVycyA9IHMsIFxuICAgICAgICB0aGlzLmxpbWl0ID0gaSwgdGhpcy5saW1pdFR5cGUgPSByLCB0aGlzLnN0YXJ0QXQgPSBvLCB0aGlzLmVuZEF0ID0gYSwgdGhpcy5TID0gbnVsbCwgXG4gICAgICAgIC8vIFRoZSBjb3JyZXNwb25kaW5nIGBUYXJnZXRgIG9mIHRoaXMgYFF1ZXJ5YCBpbnN0YW5jZS5cbiAgICAgICAgdGhpcy5EID0gbnVsbCwgdGhpcy5zdGFydEF0LCB0aGlzLmVuZEF0O1xuICAgIH1cbn1cblxuLyoqIENyZWF0ZXMgYSBuZXcgUXVlcnkgaW5zdGFuY2Ugd2l0aCB0aGUgb3B0aW9ucyBwcm92aWRlZC4gKi8gZnVuY3Rpb24gbWUodCwgZSwgbiwgcywgaSwgciwgbywgYSkge1xuICAgIHJldHVybiBuZXcgX2UodCwgZSwgbiwgcywgaSwgciwgbywgYSk7XG59XG5cbi8qKiBDcmVhdGVzIGEgbmV3IFF1ZXJ5IGZvciBhIHF1ZXJ5IHRoYXQgbWF0Y2hlcyBhbGwgZG9jdW1lbnRzIGF0IGBwYXRoYCAqLyBmdW5jdGlvbiBnZSh0KSB7XG4gICAgcmV0dXJuIG5ldyBfZSh0KTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gY29udmVydCBhIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcnkgaW50byBhIGNvbGxlY3Rpb24gcXVlcnkgYXQgYVxuICogc3BlY2lmaWMgcGF0aC4gVGhpcyBpcyB1c2VkIHdoZW4gZXhlY3V0aW5nIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcmllcywgc2luY2VcbiAqIHdlIGhhdmUgdG8gc3BsaXQgdGhlIHF1ZXJ5IGludG8gYSBzZXQgb2YgY29sbGVjdGlvbiBxdWVyaWVzIGF0IG11bHRpcGxlXG4gKiBwYXRocy5cbiAqLyBmdW5jdGlvbiB5ZSh0KSB7XG4gICAgcmV0dXJuICFidCh0LmxpbWl0KSAmJiBcIkZcIiAvKiBGaXJzdCAqLyA9PT0gdC5saW1pdFR5cGU7XG59XG5cbmZ1bmN0aW9uIHBlKHQpIHtcbiAgICByZXR1cm4gIWJ0KHQubGltaXQpICYmIFwiTFwiIC8qIExhc3QgKi8gPT09IHQubGltaXRUeXBlO1xufVxuXG5mdW5jdGlvbiBUZSh0KSB7XG4gICAgcmV0dXJuIHQuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCA+IDAgPyB0LmV4cGxpY2l0T3JkZXJCeVswXS5maWVsZCA6IG51bGw7XG59XG5cbmZ1bmN0aW9uIEVlKHQpIHtcbiAgICBmb3IgKGNvbnN0IGUgb2YgdC5maWx0ZXJzKSBpZiAoZS5WKCkpIHJldHVybiBlLmZpZWxkO1xuICAgIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBhbnkgb2YgdGhlIHByb3ZpZGVkIE9wZXJhdG9ycyBhcmUgaW5jbHVkZWQgaW4gdGhlIHF1ZXJ5IGFuZFxuICogcmV0dXJucyB0aGUgZmlyc3Qgb25lIHRoYXQgaXMsIG9yIG51bGwgaWYgbm9uZSBhcmUuXG4gKi9cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSBxdWVyeSBtYXRjaGVzIGEgY29sbGVjdGlvbiBncm91cCByYXRoZXIgdGhhbiBhIHNwZWNpZmljXG4gKiBjb2xsZWN0aW9uLlxuICovXG5mdW5jdGlvbiBJZSh0KSB7XG4gICAgcmV0dXJuIG51bGwgIT09IHQuY29sbGVjdGlvbkdyb3VwO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGltcGxpY2l0IG9yZGVyIGJ5IGNvbnN0cmFpbnQgdGhhdCBpcyB1c2VkIHRvIGV4ZWN1dGUgdGhlIFF1ZXJ5LFxuICogd2hpY2ggY2FuIGJlIGRpZmZlcmVudCBmcm9tIHRoZSBvcmRlciBieSBjb25zdHJhaW50cyB0aGUgdXNlciBwcm92aWRlZCAoZS5nLlxuICogdGhlIFNESyBhbmQgYmFja2VuZCBhbHdheXMgb3JkZXJzIGJ5IGBfX25hbWVfX2ApLlxuICovIGZ1bmN0aW9uIEFlKHQpIHtcbiAgICBjb25zdCBlID0gcSh0KTtcbiAgICBpZiAobnVsbCA9PT0gZS5TKSB7XG4gICAgICAgIGUuUyA9IFtdO1xuICAgICAgICBjb25zdCB0ID0gRWUoZSksIG4gPSBUZShlKTtcbiAgICAgICAgaWYgKG51bGwgIT09IHQgJiYgbnVsbCA9PT0gbikgXG4gICAgICAgIC8vIEluIG9yZGVyIHRvIGltcGxpY2l0bHkgYWRkIGtleSBvcmRlcmluZywgd2UgbXVzdCBhbHNvIGFkZCB0aGVcbiAgICAgICAgLy8gaW5lcXVhbGl0eSBmaWx0ZXIgZmllbGQgZm9yIGl0IHRvIGJlIGEgdmFsaWQgcXVlcnkuXG4gICAgICAgIC8vIE5vdGUgdGhhdCB0aGUgZGVmYXVsdCBpbmVxdWFsaXR5IGZpZWxkIGFuZCBrZXkgb3JkZXJpbmcgaXMgYXNjZW5kaW5nLlxuICAgICAgICB0LmlzS2V5RmllbGQoKSB8fCBlLlMucHVzaChuZXcgbGUodCkpLCBlLlMucHVzaChuZXcgbGUoX3Qua2V5RmllbGQoKSwgXCJhc2NcIiAvKiBBU0NFTkRJTkcgKi8pKTsgZWxzZSB7XG4gICAgICAgICAgICBsZXQgdCA9ICExO1xuICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIGUuZXhwbGljaXRPcmRlckJ5KSBlLlMucHVzaChuKSwgbi5maWVsZC5pc0tleUZpZWxkKCkgJiYgKHQgPSAhMCk7XG4gICAgICAgICAgICBpZiAoIXQpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgb3JkZXIgb2YgdGhlIGltcGxpY2l0IGtleSBvcmRlcmluZyBhbHdheXMgbWF0Y2hlcyB0aGUgbGFzdFxuICAgICAgICAgICAgICAgIC8vIGV4cGxpY2l0IG9yZGVyIGJ5XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGUuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCA+IDAgPyBlLmV4cGxpY2l0T3JkZXJCeVtlLmV4cGxpY2l0T3JkZXJCeS5sZW5ndGggLSAxXS5kaXIgOiBcImFzY1wiIC8qIEFTQ0VORElORyAqLztcbiAgICAgICAgICAgICAgICBlLlMucHVzaChuZXcgbGUoX3Qua2V5RmllbGQoKSwgdCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBlLlM7XG59XG5cbi8qKlxuICogQ29udmVydHMgdGhpcyBgUXVlcnlgIGluc3RhbmNlIHRvIGl0J3MgY29ycmVzcG9uZGluZyBgVGFyZ2V0YCByZXByZXNlbnRhdGlvbi5cbiAqLyBmdW5jdGlvbiBSZSh0KSB7XG4gICAgY29uc3QgZSA9IHEodCk7XG4gICAgaWYgKCFlLkQpIGlmIChcIkZcIiAvKiBGaXJzdCAqLyA9PT0gZS5saW1pdFR5cGUpIGUuRCA9IHp0KGUucGF0aCwgZS5jb2xsZWN0aW9uR3JvdXAsIEFlKGUpLCBlLmZpbHRlcnMsIGUubGltaXQsIGUuc3RhcnRBdCwgZS5lbmRBdCk7IGVsc2Uge1xuICAgICAgICAvLyBGbGlwIHRoZSBvcmRlckJ5IGRpcmVjdGlvbnMgc2luY2Ugd2Ugd2FudCB0aGUgbGFzdCByZXN1bHRzXG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIEFlKGUpKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gXCJkZXNjXCIgLyogREVTQ0VORElORyAqLyA9PT0gbi5kaXIgPyBcImFzY1wiIC8qIEFTQ0VORElORyAqLyA6IFwiZGVzY1wiIC8qIERFU0NFTkRJTkcgKi87XG4gICAgICAgICAgICB0LnB1c2gobmV3IGxlKG4uZmllbGQsIGUpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBXZSBuZWVkIHRvIHN3YXAgdGhlIGN1cnNvcnMgdG8gbWF0Y2ggdGhlIG5vdy1mbGlwcGVkIHF1ZXJ5IG9yZGVyaW5nLlxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBlLmVuZEF0ID8gbmV3IHVlKGUuZW5kQXQucG9zaXRpb24sICFlLmVuZEF0LmJlZm9yZSkgOiBudWxsLCBzID0gZS5zdGFydEF0ID8gbmV3IHVlKGUuc3RhcnRBdC5wb3NpdGlvbiwgIWUuc3RhcnRBdC5iZWZvcmUpIDogbnVsbDtcbiAgICAgICAgLy8gTm93IHJldHVybiBhcyBhIExpbWl0VHlwZS5GaXJzdCBxdWVyeS5cbiAgICAgICAgZS5EID0genQoZS5wYXRoLCBlLmNvbGxlY3Rpb25Hcm91cCwgdCwgZS5maWx0ZXJzLCBlLmxpbWl0LCBuLCBzKTtcbiAgICB9XG4gICAgcmV0dXJuIGUuRDtcbn1cblxuZnVuY3Rpb24gUGUodCwgZSwgbikge1xuICAgIHJldHVybiBuZXcgX2UodC5wYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgdC5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgdC5maWx0ZXJzLnNsaWNlKCksIGUsIG4sIHQuc3RhcnRBdCwgdC5lbmRBdCk7XG59XG5cbmZ1bmN0aW9uIGJlKHQsIGUpIHtcbiAgICByZXR1cm4gWXQoUmUodCksIFJlKGUpKSAmJiB0LmxpbWl0VHlwZSA9PT0gZS5saW1pdFR5cGU7XG59XG5cbi8vIFRPRE8oYi8yOTE4MzE2NSk6IFRoaXMgaXMgdXNlZCB0byBnZXQgYSB1bmlxdWUgc3RyaW5nIGZyb20gYSBxdWVyeSB0bywgZm9yXG4vLyBleGFtcGxlLCB1c2UgYXMgYSBkaWN0aW9uYXJ5IGtleSwgYnV0IHRoZSBpbXBsZW1lbnRhdGlvbiBpcyBzdWJqZWN0IHRvXG4vLyBjb2xsaXNpb25zLiBNYWtlIGl0IGNvbGxpc2lvbi1mcmVlLlxuZnVuY3Rpb24gdmUodCkge1xuICAgIHJldHVybiBgJHtIdChSZSh0KSl9fGx0OiR7dC5saW1pdFR5cGV9YDtcbn1cblxuZnVuY3Rpb24gVmUodCkge1xuICAgIHJldHVybiBgUXVlcnkodGFyZ2V0PSR7SnQoUmUodCkpfTsgbGltaXRUeXBlPSR7dC5saW1pdFR5cGV9KWA7XG59XG5cbi8qKiBSZXR1cm5zIHdoZXRoZXIgYGRvY2AgbWF0Y2hlcyB0aGUgY29uc3RyYWludHMgb2YgYHF1ZXJ5YC4gKi8gZnVuY3Rpb24gU2UodCwgZSkge1xuICAgIHJldHVybiBlLmlzRm91bmREb2N1bWVudCgpICYmIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUua2V5LnBhdGg7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0LmNvbGxlY3Rpb25Hcm91cCA/IGUua2V5Lmhhc0NvbGxlY3Rpb25JZCh0LmNvbGxlY3Rpb25Hcm91cCkgJiYgdC5wYXRoLmlzUHJlZml4T2YobikgOiBTdC5pc0RvY3VtZW50S2V5KHQucGF0aCkgPyB0LnBhdGguaXNFcXVhbChuKSA6IHQucGF0aC5pc0ltbWVkaWF0ZVBhcmVudE9mKG4pO1xuICAgIH1cbiAgICAvKipcbiAqIEEgZG9jdW1lbnQgbXVzdCBoYXZlIGEgdmFsdWUgZm9yIGV2ZXJ5IG9yZGVyaW5nIGNsYXVzZSBpbiBvcmRlciB0byBzaG93IHVwXG4gKiBpbiB0aGUgcmVzdWx0cy5cbiAqLyAodCwgZSkgJiYgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdC5leHBsaWNpdE9yZGVyQnkpIFxuICAgICAgICAvLyBvcmRlciBieSBrZXkgYWx3YXlzIG1hdGNoZXNcbiAgICAgICAgaWYgKCFuLmZpZWxkLmlzS2V5RmllbGQoKSAmJiBudWxsID09PSBlLmRhdGEuZmllbGQobi5maWVsZCkpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH0odCwgZSkgJiYgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdC5maWx0ZXJzKSBpZiAoIW4ubWF0Y2hlcyhlKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIC8qKiBNYWtlcyBzdXJlIGEgZG9jdW1lbnQgaXMgd2l0aGluIHRoZSBib3VuZHMsIGlmIHByb3ZpZGVkLiAqLyAodCwgZSkgJiYgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBpZiAodC5zdGFydEF0ICYmICFkZSh0LnN0YXJ0QXQsIEFlKHQpLCBlKSkgcmV0dXJuICExO1xuICAgICAgICBpZiAodC5lbmRBdCAmJiBkZSh0LmVuZEF0LCBBZSh0KSwgZSkpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICAvKipcbiAqIFJldHVybnMgYSBuZXcgY29tcGFyYXRvciBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGNvbXBhcmUgdHdvIGRvY3VtZW50c1xuICogYmFzZWQgb24gdGhlIFF1ZXJ5J3Mgb3JkZXJpbmcgY29uc3RyYWludC5cbiAqLyAodCwgZSk7XG59XG5cbmZ1bmN0aW9uIERlKHQpIHtcbiAgICByZXR1cm4gKGUsIG4pID0+IHtcbiAgICAgICAgbGV0IHMgPSAhMTtcbiAgICAgICAgZm9yIChjb25zdCBpIG9mIEFlKHQpKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gQ2UoaSwgZSwgbik7XG4gICAgICAgICAgICBpZiAoMCAhPT0gdCkgcmV0dXJuIHQ7XG4gICAgICAgICAgICBzID0gcyB8fCBpLmZpZWxkLmlzS2V5RmllbGQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMDtcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBDZSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHQuZmllbGQuaXNLZXlGaWVsZCgpID8gU3QuY29tcGFyYXRvcihlLmtleSwgbi5rZXkpIDogZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gZS5kYXRhLmZpZWxkKHQpLCBpID0gbi5kYXRhLmZpZWxkKHQpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gcyAmJiBudWxsICE9PSBpID8ga3QocywgaSkgOiBMKCk7XG4gICAgfSh0LmZpZWxkLCBlLCBuKTtcbiAgICBzd2l0Y2ggKHQuZGlyKSB7XG4gICAgICBjYXNlIFwiYXNjXCIgLyogQVNDRU5ESU5HICovIDpcbiAgICAgICAgcmV0dXJuIHM7XG5cbiAgICAgIGNhc2UgXCJkZXNjXCIgLyogREVTQ0VORElORyAqLyA6XG4gICAgICAgIHJldHVybiAtMSAqIHM7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBMKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIGFuIERvdWJsZVZhbHVlIGZvciBgdmFsdWVgIHRoYXQgaXMgZW5jb2RlZCBiYXNlZCB0aGUgc2VyaWFsaXplcidzXG4gKiBgdXNlUHJvdG8zSnNvbmAgc2V0dGluZy5cbiAqLyBmdW5jdGlvbiBOZSh0LCBlKSB7XG4gICAgaWYgKHQuQykge1xuICAgICAgICBpZiAoaXNOYU4oZSkpIHJldHVybiB7XG4gICAgICAgICAgICBkb3VibGVWYWx1ZTogXCJOYU5cIlxuICAgICAgICB9O1xuICAgICAgICBpZiAoZSA9PT0gMSAvIDApIHJldHVybiB7XG4gICAgICAgICAgICBkb3VibGVWYWx1ZTogXCJJbmZpbml0eVwiXG4gICAgICAgIH07XG4gICAgICAgIGlmIChlID09PSAtMSAvIDApIHJldHVybiB7XG4gICAgICAgICAgICBkb3VibGVWYWx1ZTogXCItSW5maW5pdHlcIlxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBkb3VibGVWYWx1ZTogdnQoZSkgPyBcIi0wXCIgOiBlXG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGFuIEludGVnZXJWYWx1ZSBmb3IgYHZhbHVlYC5cbiAqLyBmdW5jdGlvbiBrZSh0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW50ZWdlclZhbHVlOiBcIlwiICsgdFxuICAgIH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHZhbHVlIGZvciBhIG51bWJlciB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGludG8gYSBwcm90by5cbiAqIFRoZSByZXR1cm4gdmFsdWUgaXMgYW4gSW50ZWdlclZhbHVlIGlmIGl0IGNhbiBzYWZlbHkgcmVwcmVzZW50IHRoZSB2YWx1ZSxcbiAqIG90aGVyd2lzZSBhIERvdWJsZVZhbHVlIGlzIHJldHVybmVkLlxuICovIGZ1bmN0aW9uIHhlKHQsIGUpIHtcbiAgICByZXR1cm4gVnQoZSkgPyBrZShlKSA6IE5lKHQsIGUpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFVzZWQgdG8gcmVwcmVzZW50IGEgZmllbGQgdHJhbnNmb3JtIG9uIGEgbXV0YXRpb24uICovIGNsYXNzICRlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgdGhlIHN0cnVjdHVyYWwgdHlwZSBvZiBgVHJhbnNmb3JtT3BlcmF0aW9uYCBpcyB1bmlxdWUuXG4gICAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQvaXNzdWVzLzU0NTFcbiAgICAgICAgdGhpcy5fID0gdm9pZCAwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDb21wdXRlcyB0aGUgbG9jYWwgdHJhbnNmb3JtIHJlc3VsdCBhZ2FpbnN0IHRoZSBwcm92aWRlZCBgcHJldmlvdXNWYWx1ZWAsXG4gKiBvcHRpb25hbGx5IHVzaW5nIHRoZSBwcm92aWRlZCBsb2NhbFdyaXRlVGltZS5cbiAqLyBmdW5jdGlvbiBGZSh0LCBlLCBuKSB7XG4gICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBMZSA/IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHtcbiAgICAgICAgICAgIGZpZWxkczoge1xuICAgICAgICAgICAgICAgIF9fdHlwZV9fOiB7XG4gICAgICAgICAgICAgICAgICAgIHN0cmluZ1ZhbHVlOiBcInNlcnZlcl90aW1lc3RhbXBcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgX19sb2NhbF93cml0ZV90aW1lX186IHtcbiAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wVmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZHM6IHQuc2Vjb25kcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbm9zOiB0Lm5hbm9zZWNvbmRzXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBlICYmIChuLmZpZWxkcy5fX3ByZXZpb3VzX3ZhbHVlX18gPSBlKSwge1xuICAgICAgICAgICAgbWFwVmFsdWU6IG5cbiAgICAgICAgfTtcbiAgICB9KG4sIGUpIDogdCBpbnN0YW5jZW9mIEJlID8gVWUodCwgZSkgOiB0IGluc3RhbmNlb2YgcWUgPyBLZSh0LCBlKSA6IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBTaW5jZSBKYXZhU2NyaXB0J3MgaW50ZWdlciBhcml0aG1ldGljIGlzIGxpbWl0ZWQgdG8gNTMgYml0XG4gICAgICAgIC8vIHByZWNpc2lvbiBhbmQgcmVzb2x2ZXMgb3ZlcmZsb3dzIGJ5IHJlZHVjaW5nIHByZWNpc2lvbiwgd2UgZG8gbm90XG4gICAgICAgIC8vIG1hbnVhbGx5IGNhcCBvdmVyZmxvd3MgYXQgMl42My5cbiAgICAgICAgY29uc3QgbiA9IE1lKHQsIGUpLCBzID0gUWUobikgKyBRZSh0Lk4pO1xuICAgICAgICByZXR1cm4gTXQobikgJiYgTXQodC5OKSA/IGtlKHMpIDogTmUodC5rLCBzKTtcbiAgICB9KHQsIGUpO1xufVxuXG4vKipcbiAqIENvbXB1dGVzIGEgZmluYWwgdHJhbnNmb3JtIHJlc3VsdCBhZnRlciB0aGUgdHJhbnNmb3JtIGhhcyBiZWVuIGFja25vd2xlZGdlZFxuICogYnkgdGhlIHNlcnZlciwgcG90ZW50aWFsbHkgdXNpbmcgdGhlIHNlcnZlci1wcm92aWRlZCB0cmFuc2Zvcm1SZXN1bHQuXG4gKi8gZnVuY3Rpb24gT2UodCwgZSwgbikge1xuICAgIC8vIFRoZSBzZXJ2ZXIganVzdCBzZW5kcyBudWxsIGFzIHRoZSB0cmFuc2Zvcm0gcmVzdWx0IGZvciBhcnJheSBvcGVyYXRpb25zLFxuICAgIC8vIHNvIHdlIGhhdmUgdG8gY2FsY3VsYXRlIGEgcmVzdWx0IHRoZSBzYW1lIGFzIHdlIGRvIGZvciBsb2NhbFxuICAgIC8vIGFwcGxpY2F0aW9ucy5cbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIEJlID8gVWUodCwgZSkgOiB0IGluc3RhbmNlb2YgcWUgPyBLZSh0LCBlKSA6IG47XG59XG5cbi8qKlxuICogSWYgdGhpcyB0cmFuc2Zvcm0gb3BlcmF0aW9uIGlzIG5vdCBpZGVtcG90ZW50LCByZXR1cm5zIHRoZSBiYXNlIHZhbHVlIHRvXG4gKiBwZXJzaXN0IGZvciB0aGlzIHRyYW5zZm9ybS4gSWYgYSBiYXNlIHZhbHVlIGlzIHJldHVybmVkLCB0aGUgdHJhbnNmb3JtXG4gKiBvcGVyYXRpb24gaXMgYWx3YXlzIGFwcGxpZWQgdG8gdGhpcyBiYXNlIHZhbHVlLCBldmVuIGlmIGRvY3VtZW50IGhhc1xuICogYWxyZWFkeSBiZWVuIHVwZGF0ZWQuXG4gKlxuICogQmFzZSB2YWx1ZXMgcHJvdmlkZSBjb25zaXN0ZW50IGJlaGF2aW9yIGZvciBub24taWRlbXBvdGVudCB0cmFuc2Zvcm1zIGFuZFxuICogYWxsb3cgdXMgdG8gcmV0dXJuIHRoZSBzYW1lIGxhdGVuY3ktY29tcGVuc2F0ZWQgdmFsdWUgZXZlbiBpZiB0aGUgYmFja2VuZFxuICogaGFzIGFscmVhZHkgYXBwbGllZCB0aGUgdHJhbnNmb3JtIG9wZXJhdGlvbi4gVGhlIGJhc2UgdmFsdWUgaXMgbnVsbCBmb3JcbiAqIGlkZW1wb3RlbnQgdHJhbnNmb3JtcywgYXMgdGhleSBjYW4gYmUgcmUtcGxheWVkIGV2ZW4gaWYgdGhlIGJhY2tlbmQgaGFzXG4gKiBhbHJlYWR5IGFwcGxpZWQgdGhlbS5cbiAqXG4gKiBAcmV0dXJucyBhIGJhc2UgdmFsdWUgdG8gc3RvcmUgYWxvbmcgd2l0aCB0aGUgbXV0YXRpb24sIG9yIG51bGwgZm9yXG4gKiBpZGVtcG90ZW50IHRyYW5zZm9ybXMuXG4gKi8gZnVuY3Rpb24gTWUodCwgZSkge1xuICAgIHJldHVybiB0IGluc3RhbmNlb2YgamUgPyBNdChuID0gZSkgfHwgZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gISF0ICYmIFwiZG91YmxlVmFsdWVcIiBpbiB0O1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgZWl0aGVyIGFuIEludGVnZXJWYWx1ZSBvciBhIERvdWJsZVZhbHVlLiAqLyAobikgPyBlIDoge1xuICAgICAgICBpbnRlZ2VyVmFsdWU6IDBcbiAgICB9IDogbnVsbDtcbiAgICB2YXIgbjtcbn1cblxuLyoqIFRyYW5zZm9ybXMgYSB2YWx1ZSBpbnRvIGEgc2VydmVyLWdlbmVyYXRlZCB0aW1lc3RhbXAuICovXG5jbGFzcyBMZSBleHRlbmRzICRlIHt9XG5cbi8qKiBUcmFuc2Zvcm1zIGFuIGFycmF5IHZhbHVlIHZpYSBhIHVuaW9uIG9wZXJhdGlvbi4gKi8gY2xhc3MgQmUgZXh0ZW5kcyAkZSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmVsZW1lbnRzID0gdDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFVlKHQsIGUpIHtcbiAgICBjb25zdCBuID0gV2UoZSk7XG4gICAgZm9yIChjb25zdCBlIG9mIHQuZWxlbWVudHMpIG4uc29tZSgodCA9PiBDdCh0LCBlKSkpIHx8IG4ucHVzaChlKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICB2YWx1ZXM6IG5cbiAgICAgICAgfVxuICAgIH07XG59XG5cbi8qKiBUcmFuc2Zvcm1zIGFuIGFycmF5IHZhbHVlIHZpYSBhIHJlbW92ZSBvcGVyYXRpb24uICovIGNsYXNzIHFlIGV4dGVuZHMgJGUge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5lbGVtZW50cyA9IHQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBLZSh0LCBlKSB7XG4gICAgbGV0IG4gPSBXZShlKTtcbiAgICBmb3IgKGNvbnN0IGUgb2YgdC5lbGVtZW50cykgbiA9IG4uZmlsdGVyKCh0ID0+ICFDdCh0LCBlKSkpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgIHZhbHVlczogblxuICAgICAgICB9XG4gICAgfTtcbn1cblxuLyoqXG4gKiBJbXBsZW1lbnRzIHRoZSBiYWNrZW5kIHNlbWFudGljcyBmb3IgbG9jYWxseSBjb21wdXRlZCBOVU1FUklDX0FERCAoaW5jcmVtZW50KVxuICogdHJhbnNmb3Jtcy4gQ29udmVydHMgYWxsIGZpZWxkIHZhbHVlcyB0byBpbnRlZ2VycyBvciBkb3VibGVzLCBidXQgdW5saWtlIHRoZVxuICogYmFja2VuZCBkb2VzIG5vdCBjYXAgaW50ZWdlciB2YWx1ZXMgYXQgMl42My4gSW5zdGVhZCwgSmF2YVNjcmlwdCBudW1iZXJcbiAqIGFyaXRobWV0aWMgaXMgdXNlZCBhbmQgcHJlY2lzaW9uIGxvc3MgY2FuIG9jY3VyIGZvciB2YWx1ZXMgZ3JlYXRlciB0aGFuIDJeNTMuXG4gKi8gY2xhc3MgamUgZXh0ZW5kcyAkZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmsgPSB0LCB0aGlzLk4gPSBlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gUWUodCkge1xuICAgIHJldHVybiBFdCh0LmludGVnZXJWYWx1ZSB8fCB0LmRvdWJsZVZhbHVlKTtcbn1cblxuZnVuY3Rpb24gV2UodCkge1xuICAgIHJldHVybiBMdCh0KSAmJiB0LmFycmF5VmFsdWUudmFsdWVzID8gdC5hcnJheVZhbHVlLnZhbHVlcy5zbGljZSgpIDogW107XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogQSBmaWVsZCBwYXRoIGFuZCB0aGUgVHJhbnNmb3JtT3BlcmF0aW9uIHRvIHBlcmZvcm0gdXBvbiBpdC4gKi8gY2xhc3MgR2Uge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5maWVsZCA9IHQsIHRoaXMudHJhbnNmb3JtID0gZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHplKHQsIGUpIHtcbiAgICByZXR1cm4gdC5maWVsZC5pc0VxdWFsKGUuZmllbGQpICYmIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBCZSAmJiBlIGluc3RhbmNlb2YgQmUgfHwgdCBpbnN0YW5jZW9mIHFlICYmIGUgaW5zdGFuY2VvZiBxZSA/IHJ0KHQuZWxlbWVudHMsIGUuZWxlbWVudHMsIEN0KSA6IHQgaW5zdGFuY2VvZiBqZSAmJiBlIGluc3RhbmNlb2YgamUgPyBDdCh0Lk4sIGUuTikgOiB0IGluc3RhbmNlb2YgTGUgJiYgZSBpbnN0YW5jZW9mIExlO1xuICAgIH0odC50cmFuc2Zvcm0sIGUudHJhbnNmb3JtKTtcbn1cblxuLyoqIFRoZSByZXN1bHQgb2Ygc3VjY2Vzc2Z1bGx5IGFwcGx5aW5nIGEgbXV0YXRpb24gdG8gdGhlIGJhY2tlbmQuICovXG5jbGFzcyBIZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIHZlcnNpb24gYXQgd2hpY2ggdGhlIG11dGF0aW9uIHdhcyBjb21taXR0ZWQ6XG4gICAgICpcbiAgICAgKiAtIEZvciBtb3N0IG9wZXJhdGlvbnMsIHRoaXMgaXMgdGhlIHVwZGF0ZVRpbWUgaW4gdGhlIFdyaXRlUmVzdWx0LlxuICAgICAqIC0gRm9yIGRlbGV0ZXMsIHRoZSBjb21taXRUaW1lIG9mIHRoZSBXcml0ZVJlc3BvbnNlIChiZWNhdXNlIGRlbGV0ZXMgYXJlXG4gICAgICogICBub3Qgc3RvcmVkIGFuZCBoYXZlIG5vIHVwZGF0ZVRpbWUpLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IHRoZXNlIHZlcnNpb25zIGNhbiBiZSBkaWZmZXJlbnQ6IE5vLW9wIHdyaXRlcyB3aWxsIG5vdCBjaGFuZ2VcbiAgICAgKiB0aGUgdXBkYXRlVGltZSBldmVuIHRob3VnaCB0aGUgY29tbWl0VGltZSBhZHZhbmNlcy5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgcmVzdWx0aW5nIGZpZWxkcyByZXR1cm5lZCBmcm9tIHRoZSBiYWNrZW5kIGFmdGVyIGEgbXV0YXRpb25cbiAgICAgKiBjb250YWluaW5nIGZpZWxkIHRyYW5zZm9ybXMgaGFzIGJlZW4gY29tbWl0dGVkLiBDb250YWlucyBvbmUgRmllbGRWYWx1ZVxuICAgICAqIGZvciBlYWNoIEZpZWxkVHJhbnNmb3JtIHRoYXQgd2FzIGluIHRoZSBtdXRhdGlvbi5cbiAgICAgKlxuICAgICAqIFdpbGwgYmUgZW1wdHkgaWYgdGhlIG11dGF0aW9uIGRpZCBub3QgY29udGFpbiBhbnkgZmllbGQgdHJhbnNmb3Jtcy5cbiAgICAgKi9cbiAgICBlKSB7XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IHQsIHRoaXMudHJhbnNmb3JtUmVzdWx0cyA9IGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEVuY29kZXMgYSBwcmVjb25kaXRpb24gZm9yIGEgbXV0YXRpb24uIFRoaXMgZm9sbG93cyB0aGUgbW9kZWwgdGhhdCB0aGVcbiAqIGJhY2tlbmQgYWNjZXB0cyB3aXRoIHRoZSBzcGVjaWFsIGNhc2Ugb2YgYW4gZXhwbGljaXQgXCJlbXB0eVwiIHByZWNvbmRpdGlvblxuICogKG1lYW5pbmcgbm8gcHJlY29uZGl0aW9uKS5cbiAqLyBjbGFzcyBKZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnVwZGF0ZVRpbWUgPSB0LCB0aGlzLmV4aXN0cyA9IGU7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IGVtcHR5IFByZWNvbmRpdGlvbi4gKi8gICAgc3RhdGljIG5vbmUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgSmU7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IFByZWNvbmRpdGlvbiB3aXRoIGFuIGV4aXN0cyBmbGFnLiAqLyAgICBzdGF0aWMgZXhpc3RzKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBKZSh2b2lkIDAsIHQpO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyBQcmVjb25kaXRpb24gYmFzZWQgb24gYSB2ZXJzaW9uIGEgZG9jdW1lbnQgZXhpc3RzIGF0LiAqLyAgICBzdGF0aWMgdXBkYXRlVGltZSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgSmUodCk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHdoZXRoZXIgdGhpcyBQcmVjb25kaXRpb24gaXMgZW1wdHkuICovICAgIGdldCBpc05vbmUoKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgPT09IHRoaXMudXBkYXRlVGltZSAmJiB2b2lkIDAgPT09IHRoaXMuZXhpc3RzO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhpc3RzID09PSB0LmV4aXN0cyAmJiAodGhpcy51cGRhdGVUaW1lID8gISF0LnVwZGF0ZVRpbWUgJiYgdGhpcy51cGRhdGVUaW1lLmlzRXF1YWwodC51cGRhdGVUaW1lKSA6ICF0LnVwZGF0ZVRpbWUpO1xuICAgIH1cbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcHJlY29uZGl0aW9ucyBpcyB2YWxpZCBmb3IgdGhlIGdpdmVuIGRvY3VtZW50LiAqLyBmdW5jdGlvbiBZZSh0LCBlKSB7XG4gICAgcmV0dXJuIHZvaWQgMCAhPT0gdC51cGRhdGVUaW1lID8gZS5pc0ZvdW5kRG9jdW1lbnQoKSAmJiBlLnZlcnNpb24uaXNFcXVhbCh0LnVwZGF0ZVRpbWUpIDogdm9pZCAwID09PSB0LmV4aXN0cyB8fCB0LmV4aXN0cyA9PT0gZS5pc0ZvdW5kRG9jdW1lbnQoKTtcbn1cblxuLyoqXG4gKiBBIG11dGF0aW9uIGRlc2NyaWJlcyBhIHNlbGYtY29udGFpbmVkIGNoYW5nZSB0byBhIGRvY3VtZW50LiBNdXRhdGlvbnMgY2FuXG4gKiBjcmVhdGUsIHJlcGxhY2UsIGRlbGV0ZSwgYW5kIHVwZGF0ZSBzdWJzZXRzIG9mIGRvY3VtZW50cy5cbiAqXG4gKiBNdXRhdGlvbnMgbm90IG9ubHkgYWN0IG9uIHRoZSB2YWx1ZSBvZiB0aGUgZG9jdW1lbnQgYnV0IGFsc28gaXRzIHZlcnNpb24uXG4gKlxuICogRm9yIGxvY2FsIG11dGF0aW9ucyAobXV0YXRpb25zIHRoYXQgaGF2ZW4ndCBiZWVuIGNvbW1pdHRlZCB5ZXQpLCB3ZSBwcmVzZXJ2ZVxuICogdGhlIGV4aXN0aW5nIHZlcnNpb24gZm9yIFNldCBhbmQgUGF0Y2ggbXV0YXRpb25zLiBGb3IgRGVsZXRlIG11dGF0aW9ucywgd2VcbiAqIHJlc2V0IHRoZSB2ZXJzaW9uIHRvIDAuXG4gKlxuICogSGVyZSdzIHRoZSBleHBlY3RlZCB0cmFuc2l0aW9uIHRhYmxlLlxuICpcbiAqIE1VVEFUSU9OICAgICAgICAgICBBUFBMSUVEIFRPICAgICAgICAgICAgUkVTVUxUUyBJTlxuICpcbiAqIFNldE11dGF0aW9uICAgICAgICBEb2N1bWVudCh2MykgICAgICAgICAgRG9jdW1lbnQodjMpXG4gKiBTZXRNdXRhdGlvbiAgICAgICAgTm9Eb2N1bWVudCh2MykgICAgICAgIERvY3VtZW50KHYwKVxuICogU2V0TXV0YXRpb24gICAgICAgIEludmFsaWREb2N1bWVudCh2MCkgICBEb2N1bWVudCh2MClcbiAqIFBhdGNoTXV0YXRpb24gICAgICBEb2N1bWVudCh2MykgICAgICAgICAgRG9jdW1lbnQodjMpXG4gKiBQYXRjaE11dGF0aW9uICAgICAgTm9Eb2N1bWVudCh2MykgICAgICAgIE5vRG9jdW1lbnQodjMpXG4gKiBQYXRjaE11dGF0aW9uICAgICAgSW52YWxpZERvY3VtZW50KHYwKSAgIFVua25vd25Eb2N1bWVudCh2MylcbiAqIERlbGV0ZU11dGF0aW9uICAgICBEb2N1bWVudCh2MykgICAgICAgICAgTm9Eb2N1bWVudCh2MClcbiAqIERlbGV0ZU11dGF0aW9uICAgICBOb0RvY3VtZW50KHYzKSAgICAgICAgTm9Eb2N1bWVudCh2MClcbiAqIERlbGV0ZU11dGF0aW9uICAgICBJbnZhbGlkRG9jdW1lbnQodjApICAgTm9Eb2N1bWVudCh2MClcbiAqXG4gKiBGb3IgYWNrbm93bGVkZ2VkIG11dGF0aW9ucywgd2UgdXNlIHRoZSB1cGRhdGVUaW1lIG9mIHRoZSBXcml0ZVJlc3BvbnNlIGFzXG4gKiB0aGUgcmVzdWx0aW5nIHZlcnNpb24gZm9yIFNldCBhbmQgUGF0Y2ggbXV0YXRpb25zLiBBcyBkZWxldGVzIGhhdmUgbm9cbiAqIGV4cGxpY2l0IHVwZGF0ZSB0aW1lLCB3ZSB1c2UgdGhlIGNvbW1pdFRpbWUgb2YgdGhlIFdyaXRlUmVzcG9uc2UgZm9yXG4gKiBEZWxldGUgbXV0YXRpb25zLlxuICpcbiAqIElmIGEgbXV0YXRpb24gaXMgYWNrbm93bGVkZ2VkIGJ5IHRoZSBiYWNrZW5kIGJ1dCBmYWlscyB0aGUgcHJlY29uZGl0aW9uIGNoZWNrXG4gKiBsb2NhbGx5LCB3ZSB0cmFuc2l0aW9uIHRvIGFuIGBVbmtub3duRG9jdW1lbnRgIGFuZCByZWx5IG9uIFdhdGNoIHRvIHNlbmQgdXNcbiAqIHRoZSB1cGRhdGVkIHZlcnNpb24uXG4gKlxuICogRmllbGQgdHJhbnNmb3JtcyBhcmUgdXNlZCBvbmx5IHdpdGggUGF0Y2ggYW5kIFNldCBNdXRhdGlvbnMuIFdlIHVzZSB0aGVcbiAqIGB1cGRhdGVUcmFuc2Zvcm1zYCBtZXNzYWdlIHRvIHN0b3JlIHRyYW5zZm9ybXMsIHJhdGhlciB0aGFuIHRoZSBgdHJhbnNmb3Jtc2BzXG4gKiBtZXNzYWdlcy5cbiAqXG4gKiAjIyBTdWJjbGFzc2luZyBOb3Rlc1xuICpcbiAqIEV2ZXJ5IHR5cGUgb2YgbXV0YXRpb24gbmVlZHMgdG8gaW1wbGVtZW50IGl0cyBvd24gYXBwbHlUb1JlbW90ZURvY3VtZW50KCkgYW5kXG4gKiBhcHBseVRvTG9jYWxWaWV3KCkgdG8gaW1wbGVtZW50IHRoZSBhY3R1YWwgYmVoYXZpb3Igb2YgYXBwbHlpbmcgdGhlIG11dGF0aW9uXG4gKiB0byBzb21lIHNvdXJjZSBkb2N1bWVudCAoc2VlIGBzZXRNdXRhdGlvbkFwcGx5VG9SZW1vdGVEb2N1bWVudCgpYCBmb3IgYW5cbiAqIGV4YW1wbGUpLlxuICovIGNsYXNzIFhlIHt9XG5cbi8qKlxuICogQXBwbGllcyB0aGlzIG11dGF0aW9uIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBmb3IgdGhlIHB1cnBvc2VzIG9mIGNvbXB1dGluZyBhXG4gKiBuZXcgcmVtb3RlIGRvY3VtZW50LiBJZiB0aGUgaW5wdXQgZG9jdW1lbnQgZG9lc24ndCBtYXRjaCB0aGUgZXhwZWN0ZWQgc3RhdGVcbiAqIChlLmcuIGl0IGlzIGludmFsaWQgb3Igb3V0ZGF0ZWQpLCB0aGUgZG9jdW1lbnQgdHlwZSBtYXkgdHJhbnNpdGlvbiB0b1xuICogdW5rbm93bi5cbiAqXG4gKiBAcGFyYW0gbXV0YXRpb24gLSBUaGUgbXV0YXRpb24gdG8gYXBwbHkuXG4gKiBAcGFyYW0gZG9jdW1lbnQgLSBUaGUgZG9jdW1lbnQgdG8gbXV0YXRlLiBUaGUgaW5wdXQgZG9jdW1lbnQgY2FuIGJlIGFuXG4gKiAgICAgaW52YWxpZCBkb2N1bWVudCBpZiB0aGUgY2xpZW50IGhhcyBubyBrbm93bGVkZ2Ugb2YgdGhlIHByZS1tdXRhdGlvbiBzdGF0ZVxuICogICAgIG9mIHRoZSBkb2N1bWVudC5cbiAqIEBwYXJhbSBtdXRhdGlvblJlc3VsdCAtIFRoZSByZXN1bHQgb2YgYXBwbHlpbmcgdGhlIG11dGF0aW9uIGZyb20gdGhlIGJhY2tlbmQuXG4gKi8gZnVuY3Rpb24gWmUodCwgZSwgbikge1xuICAgIHQgaW5zdGFuY2VvZiBybiA/IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gVW5saWtlIHNldE11dGF0aW9uQXBwbHlUb0xvY2FsVmlldywgaWYgd2UncmUgYXBwbHlpbmcgYSBtdXRhdGlvbiB0byBhXG4gICAgICAgIC8vIHJlbW90ZSBkb2N1bWVudCB0aGUgc2VydmVyIGhhcyBhY2NlcHRlZCB0aGUgbXV0YXRpb24gc28gdGhlIHByZWNvbmRpdGlvblxuICAgICAgICAvLyBtdXN0IGhhdmUgaGVsZC5cbiAgICAgICAgY29uc3QgcyA9IHQudmFsdWUuY2xvbmUoKSwgaSA9IGNuKHQuZmllbGRUcmFuc2Zvcm1zLCBlLCBuLnRyYW5zZm9ybVJlc3VsdHMpO1xuICAgICAgICBzLnNldEFsbChpKSwgZS5jb252ZXJ0VG9Gb3VuZERvY3VtZW50KG4udmVyc2lvbiwgcykuc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCk7XG4gICAgfSh0LCBlLCBuKSA6IHQgaW5zdGFuY2VvZiBvbiA/IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgaWYgKCFZZSh0LnByZWNvbmRpdGlvbiwgZSkpIFxuICAgICAgICAvLyBTaW5jZSB0aGUgbXV0YXRpb24gd2FzIG5vdCByZWplY3RlZCwgd2Uga25vdyB0aGF0IHRoZSBwcmVjb25kaXRpb25cbiAgICAgICAgLy8gbWF0Y2hlZCBvbiB0aGUgYmFja2VuZC4gV2UgdGhlcmVmb3JlIG11c3Qgbm90IGhhdmUgdGhlIGV4cGVjdGVkIHZlcnNpb25cbiAgICAgICAgLy8gb2YgdGhlIGRvY3VtZW50IGluIG91ciBjYWNoZSBhbmQgY29udmVydCB0byBhbiBVbmtub3duRG9jdW1lbnQgd2l0aCBhXG4gICAgICAgIC8vIGtub3duIHVwZGF0ZVRpbWUuXG4gICAgICAgIHJldHVybiB2b2lkIGUuY29udmVydFRvVW5rbm93bkRvY3VtZW50KG4udmVyc2lvbik7XG4gICAgICAgIGNvbnN0IHMgPSBjbih0LmZpZWxkVHJhbnNmb3JtcywgZSwgbi50cmFuc2Zvcm1SZXN1bHRzKSwgaSA9IGUuZGF0YTtcbiAgICAgICAgaS5zZXRBbGwoYW4odCkpLCBpLnNldEFsbChzKSwgZS5jb252ZXJ0VG9Gb3VuZERvY3VtZW50KG4udmVyc2lvbiwgaSkuc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCk7XG4gICAgfSh0LCBlLCBuKSA6IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gVW5saWtlIGFwcGx5VG9Mb2NhbFZpZXcsIGlmIHdlJ3JlIGFwcGx5aW5nIGEgbXV0YXRpb24gdG8gYSByZW1vdGVcbiAgICAgICAgLy8gZG9jdW1lbnQgdGhlIHNlcnZlciBoYXMgYWNjZXB0ZWQgdGhlIG11dGF0aW9uIHNvIHRoZSBwcmVjb25kaXRpb24gbXVzdFxuICAgICAgICAvLyBoYXZlIGhlbGQuXG4gICAgICAgIGUuY29udmVydFRvTm9Eb2N1bWVudChuLnZlcnNpb24pLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpO1xuICAgIH0oMCwgZSwgbik7XG59XG5cbi8qKlxuICogQXBwbGllcyB0aGlzIG11dGF0aW9uIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBmb3IgdGhlIHB1cnBvc2VzIG9mIGNvbXB1dGluZ1xuICogdGhlIG5ldyBsb2NhbCB2aWV3IG9mIGEgZG9jdW1lbnQuIElmIHRoZSBpbnB1dCBkb2N1bWVudCBkb2Vzbid0IG1hdGNoIHRoZVxuICogZXhwZWN0ZWQgc3RhdGUsIHRoZSBkb2N1bWVudCBpcyBub3QgbW9kaWZpZWQuXG4gKlxuICogQHBhcmFtIG11dGF0aW9uIC0gVGhlIG11dGF0aW9uIHRvIGFwcGx5LlxuICogQHBhcmFtIGRvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIG11dGF0ZS4gVGhlIGlucHV0IGRvY3VtZW50IGNhbiBiZSBhblxuICogICAgIGludmFsaWQgZG9jdW1lbnQgaWYgdGhlIGNsaWVudCBoYXMgbm8ga25vd2xlZGdlIG9mIHRoZSBwcmUtbXV0YXRpb24gc3RhdGVcbiAqICAgICBvZiB0aGUgZG9jdW1lbnQuXG4gKiBAcGFyYW0gbG9jYWxXcml0ZVRpbWUgLSBBIHRpbWVzdGFtcCBpbmRpY2F0aW5nIHRoZSBsb2NhbCB3cml0ZSB0aW1lIG9mIHRoZVxuICogICAgIGJhdGNoIHRoaXMgbXV0YXRpb24gaXMgYSBwYXJ0IG9mLlxuICovIGZ1bmN0aW9uIHRuKHQsIGUsIG4pIHtcbiAgICB0IGluc3RhbmNlb2Ygcm4gPyBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGlmICghWWUodC5wcmVjb25kaXRpb24sIGUpKSBcbiAgICAgICAgLy8gVGhlIG11dGF0aW9uIGZhaWxlZCB0byBhcHBseSAoZS5nLiBhIGRvY3VtZW50IElEIGNyZWF0ZWQgd2l0aCBhZGQoKVxuICAgICAgICAvLyBjYXVzZWQgYSBuYW1lIGNvbGxpc2lvbikuXG4gICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgcyA9IHQudmFsdWUuY2xvbmUoKSwgaSA9IHVuKHQuZmllbGRUcmFuc2Zvcm1zLCBuLCBlKTtcbiAgICAgICAgcy5zZXRBbGwoaSksIGUuY29udmVydFRvRm91bmREb2N1bWVudChzbihlKSwgcykuc2V0SGFzTG9jYWxNdXRhdGlvbnMoKTtcbiAgICB9XG4gICAgLyoqXG4gKiBBIG11dGF0aW9uIHRoYXQgbW9kaWZpZXMgZmllbGRzIG9mIHRoZSBkb2N1bWVudCBhdCB0aGUgZ2l2ZW4ga2V5IHdpdGggdGhlXG4gKiBnaXZlbiB2YWx1ZXMuIFRoZSB2YWx1ZXMgYXJlIGFwcGxpZWQgdGhyb3VnaCBhIGZpZWxkIG1hc2s6XG4gKlxuICogICogV2hlbiBhIGZpZWxkIGlzIGluIGJvdGggdGhlIG1hc2sgYW5kIHRoZSB2YWx1ZXMsIHRoZSBjb3JyZXNwb25kaW5nIGZpZWxkXG4gKiAgICBpcyB1cGRhdGVkLlxuICogICogV2hlbiBhIGZpZWxkIGlzIGluIG5laXRoZXIgdGhlIG1hc2sgbm9yIHRoZSB2YWx1ZXMsIHRoZSBjb3JyZXNwb25kaW5nXG4gKiAgICBmaWVsZCBpcyB1bm1vZGlmaWVkLlxuICogICogV2hlbiBhIGZpZWxkIGlzIGluIHRoZSBtYXNrIGJ1dCBub3QgaW4gdGhlIHZhbHVlcywgdGhlIGNvcnJlc3BvbmRpbmcgZmllbGRcbiAqICAgIGlzIGRlbGV0ZWQuXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgbm90IGluIHRoZSBtYXNrIGJ1dCBpcyBpbiB0aGUgdmFsdWVzLCB0aGUgdmFsdWVzIG1hcCBpc1xuICogICAgaWdub3JlZC5cbiAqLyAodCwgZSwgbikgOiB0IGluc3RhbmNlb2Ygb24gPyBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGlmICghWWUodC5wcmVjb25kaXRpb24sIGUpKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHMgPSB1bih0LmZpZWxkVHJhbnNmb3JtcywgbiwgZSksIGkgPSBlLmRhdGE7XG4gICAgICAgIGkuc2V0QWxsKGFuKHQpKSwgaS5zZXRBbGwocyksIGUuY29udmVydFRvRm91bmREb2N1bWVudChzbihlKSwgaSkuc2V0SGFzTG9jYWxNdXRhdGlvbnMoKTtcbiAgICB9XG4gICAgLyoqXG4gKiBSZXR1cm5zIGEgRmllbGRQYXRoL1ZhbHVlIG1hcCB3aXRoIHRoZSBjb250ZW50IG9mIHRoZSBQYXRjaE11dGF0aW9uLlxuICovICh0LCBlLCBuKSA6IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgWWUodC5wcmVjb25kaXRpb24sIGUpICYmIFxuICAgICAgICAvLyBXZSBkb24ndCBjYWxsIGBzZXRIYXNMb2NhbE11dGF0aW9ucygpYCBzaW5jZSB3ZSB3YW50IHRvIGJlIGJhY2t3YXJkc1xuICAgICAgICAvLyBjb21wYXRpYmxlIHdpdGggdGhlIGV4aXN0aW5nIFNESyBiZWhhdmlvci5cbiAgICAgICAgZS5jb252ZXJ0VG9Ob0RvY3VtZW50KGN0Lm1pbigpKTtcbiAgICB9XG4gICAgLyoqXG4gKiBBIG11dGF0aW9uIHRoYXQgdmVyaWZpZXMgdGhlIGV4aXN0ZW5jZSBvZiB0aGUgZG9jdW1lbnQgYXQgdGhlIGdpdmVuIGtleSB3aXRoXG4gKiB0aGUgcHJvdmlkZWQgcHJlY29uZGl0aW9uLlxuICpcbiAqIFRoZSBgdmVyaWZ5YCBvcGVyYXRpb24gaXMgb25seSB1c2VkIGluIFRyYW5zYWN0aW9ucywgYW5kIHRoaXMgY2xhc3Mgc2VydmVzXG4gKiBwcmltYXJpbHkgdG8gZmFjaWxpdGF0ZSBzZXJpYWxpemF0aW9uIGludG8gcHJvdG9zLlxuICovICh0LCBlKTtcbn1cblxuLyoqXG4gKiBJZiB0aGlzIG11dGF0aW9uIGlzIG5vdCBpZGVtcG90ZW50LCByZXR1cm5zIHRoZSBiYXNlIHZhbHVlIHRvIHBlcnNpc3Qgd2l0aFxuICogdGhpcyBtdXRhdGlvbi4gSWYgYSBiYXNlIHZhbHVlIGlzIHJldHVybmVkLCB0aGUgbXV0YXRpb24gaXMgYWx3YXlzIGFwcGxpZWRcbiAqIHRvIHRoaXMgYmFzZSB2YWx1ZSwgZXZlbiBpZiBkb2N1bWVudCBoYXMgYWxyZWFkeSBiZWVuIHVwZGF0ZWQuXG4gKlxuICogVGhlIGJhc2UgdmFsdWUgaXMgYSBzcGFyc2Ugb2JqZWN0IHRoYXQgY29uc2lzdHMgb2Ygb25seSB0aGUgZG9jdW1lbnRcbiAqIGZpZWxkcyBmb3Igd2hpY2ggdGhpcyBtdXRhdGlvbiBjb250YWlucyBhIG5vbi1pZGVtcG90ZW50IHRyYW5zZm9ybWF0aW9uXG4gKiAoZS5nLiBhIG51bWVyaWMgaW5jcmVtZW50KS4gVGhlIHByb3ZpZGVkIHZhbHVlIGd1YXJhbnRlZXMgY29uc2lzdGVudFxuICogYmVoYXZpb3IgZm9yIG5vbi1pZGVtcG90ZW50IHRyYW5zZm9ybXMgYW5kIGFsbG93IHVzIHRvIHJldHVybiB0aGUgc2FtZVxuICogbGF0ZW5jeS1jb21wZW5zYXRlZCB2YWx1ZSBldmVuIGlmIHRoZSBiYWNrZW5kIGhhcyBhbHJlYWR5IGFwcGxpZWQgdGhlXG4gKiBtdXRhdGlvbi4gVGhlIGJhc2UgdmFsdWUgaXMgbnVsbCBmb3IgaWRlbXBvdGVudCBtdXRhdGlvbnMsIGFzIHRoZXkgY2FuIGJlXG4gKiByZS1wbGF5ZWQgZXZlbiBpZiB0aGUgYmFja2VuZCBoYXMgYWxyZWFkeSBhcHBsaWVkIHRoZW0uXG4gKlxuICogQHJldHVybnMgYSBiYXNlIHZhbHVlIHRvIHN0b3JlIGFsb25nIHdpdGggdGhlIG11dGF0aW9uLCBvciBudWxsIGZvclxuICogaWRlbXBvdGVudCBtdXRhdGlvbnMuXG4gKi8gZnVuY3Rpb24gZW4odCwgZSkge1xuICAgIGxldCBuID0gbnVsbDtcbiAgICBmb3IgKGNvbnN0IHMgb2YgdC5maWVsZFRyYW5zZm9ybXMpIHtcbiAgICAgICAgY29uc3QgdCA9IGUuZGF0YS5maWVsZChzLmZpZWxkKSwgaSA9IE1lKHMudHJhbnNmb3JtLCB0IHx8IG51bGwpO1xuICAgICAgICBudWxsICE9IGkgJiYgKG51bGwgPT0gbiAmJiAobiA9IGp0LmVtcHR5KCkpLCBuLnNldChzLmZpZWxkLCBpKSk7XG4gICAgfVxuICAgIHJldHVybiBuIHx8IG51bGw7XG59XG5cbmZ1bmN0aW9uIG5uKHQsIGUpIHtcbiAgICByZXR1cm4gdC50eXBlID09PSBlLnR5cGUgJiYgKCEhdC5rZXkuaXNFcXVhbChlLmtleSkgJiYgKCEhdC5wcmVjb25kaXRpb24uaXNFcXVhbChlLnByZWNvbmRpdGlvbikgJiYgKCEhZnVuY3Rpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gdm9pZCAwID09PSB0ICYmIHZvaWQgMCA9PT0gZSB8fCAhKCF0IHx8ICFlKSAmJiBydCh0LCBlLCAoKHQsIGUpID0+IHplKHQsIGUpKSk7XG4gICAgfSh0LmZpZWxkVHJhbnNmb3JtcywgZS5maWVsZFRyYW5zZm9ybXMpICYmICgwIC8qIFNldCAqLyA9PT0gdC50eXBlID8gdC52YWx1ZS5pc0VxdWFsKGUudmFsdWUpIDogMSAvKiBQYXRjaCAqLyAhPT0gdC50eXBlIHx8IHQuZGF0YS5pc0VxdWFsKGUuZGF0YSkgJiYgdC5maWVsZE1hc2suaXNFcXVhbChlLmZpZWxkTWFzaykpKSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHZlcnNpb24gZnJvbSB0aGUgZ2l2ZW4gZG9jdW1lbnQgZm9yIHVzZSBhcyB0aGUgcmVzdWx0IG9mIGFcbiAqIG11dGF0aW9uLiBNdXRhdGlvbnMgYXJlIGRlZmluZWQgdG8gcmV0dXJuIHRoZSB2ZXJzaW9uIG9mIHRoZSBiYXNlIGRvY3VtZW50XG4gKiBvbmx5IGlmIGl0IGlzIGFuIGV4aXN0aW5nIGRvY3VtZW50LiBEZWxldGVkIGFuZCB1bmtub3duIGRvY3VtZW50cyBoYXZlIGFcbiAqIHBvc3QtbXV0YXRpb24gdmVyc2lvbiBvZiBTbmFwc2hvdFZlcnNpb24ubWluKCkuXG4gKi8gZnVuY3Rpb24gc24odCkge1xuICAgIHJldHVybiB0LmlzRm91bmREb2N1bWVudCgpID8gdC52ZXJzaW9uIDogY3QubWluKCk7XG59XG5cbi8qKlxuICogQSBtdXRhdGlvbiB0aGF0IGNyZWF0ZXMgb3IgcmVwbGFjZXMgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkgd2l0aCB0aGVcbiAqIG9iamVjdCB2YWx1ZSBjb250ZW50cy5cbiAqLyBjbGFzcyBybiBleHRlbmRzIFhlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzID0gW10pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5rZXkgPSB0LCB0aGlzLnZhbHVlID0gZSwgdGhpcy5wcmVjb25kaXRpb24gPSBuLCB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IHMsIFxuICAgICAgICB0aGlzLnR5cGUgPSAwIC8qIFNldCAqLztcbiAgICB9XG59XG5cbmNsYXNzIG9uIGV4dGVuZHMgWGUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGkgPSBbXSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmtleSA9IHQsIHRoaXMuZGF0YSA9IGUsIHRoaXMuZmllbGRNYXNrID0gbiwgdGhpcy5wcmVjb25kaXRpb24gPSBzLCBcbiAgICAgICAgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBpLCB0aGlzLnR5cGUgPSAxIC8qIFBhdGNoICovO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gYW4odCkge1xuICAgIGNvbnN0IGUgPSBuZXcgTWFwO1xuICAgIHJldHVybiB0LmZpZWxkTWFzay5maWVsZHMuZm9yRWFjaCgobiA9PiB7XG4gICAgICAgIGlmICghbi5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0LmRhdGEuZmllbGQobik7XG4gICAgICAgICAgICBlLnNldChuLCBzKTtcbiAgICAgICAgfVxuICAgIH0pKSwgZTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbGlzdCBvZiBcInRyYW5zZm9ybSByZXN1bHRzXCIgKGEgdHJhbnNmb3JtIHJlc3VsdCBpcyBhIGZpZWxkIHZhbHVlXG4gKiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdCBvZiBhcHBseWluZyBhIHRyYW5zZm9ybSkgZm9yIHVzZSBhZnRlciBhIG11dGF0aW9uXG4gKiBjb250YWluaW5nIHRyYW5zZm9ybXMgaGFzIGJlZW4gYWNrbm93bGVkZ2VkIGJ5IHRoZSBzZXJ2ZXIuXG4gKlxuICogQHBhcmFtIGZpZWxkVHJhbnNmb3JtcyAtIFRoZSBmaWVsZCB0cmFuc2Zvcm1zIHRvIGFwcGx5IHRoZSByZXN1bHQgdG8uXG4gKiBAcGFyYW0gbXV0YWJsZURvY3VtZW50IC0gVGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGRvY3VtZW50IGFmdGVyIGFwcGx5aW5nIGFsbFxuICogcHJldmlvdXMgbXV0YXRpb25zLlxuICogQHBhcmFtIHNlcnZlclRyYW5zZm9ybVJlc3VsdHMgLSBUaGUgdHJhbnNmb3JtIHJlc3VsdHMgcmVjZWl2ZWQgYnkgdGhlIHNlcnZlci5cbiAqIEByZXR1cm5zIFRoZSB0cmFuc2Zvcm0gcmVzdWx0cyBsaXN0LlxuICovIGZ1bmN0aW9uIGNuKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gbmV3IE1hcDtcbiAgICBCKHQubGVuZ3RoID09PSBuLmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHIgPSB0W2ldLCBvID0gci50cmFuc2Zvcm0sIGEgPSBlLmRhdGEuZmllbGQoci5maWVsZCk7XG4gICAgICAgIHMuc2V0KHIuZmllbGQsIE9lKG8sIGEsIG5baV0pKTtcbiAgICB9XG4gICAgcmV0dXJuIHM7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGxpc3Qgb2YgXCJ0cmFuc2Zvcm0gcmVzdWx0c1wiIChhIHRyYW5zZm9ybSByZXN1bHQgaXMgYSBmaWVsZCB2YWx1ZVxuICogcmVwcmVzZW50aW5nIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYSB0cmFuc2Zvcm0pIGZvciB1c2Ugd2hlbiBhcHBseWluZyBhXG4gKiB0cmFuc2Zvcm0gbG9jYWxseS5cbiAqXG4gKiBAcGFyYW0gZmllbGRUcmFuc2Zvcm1zIC0gVGhlIGZpZWxkIHRyYW5zZm9ybXMgdG8gYXBwbHkgdGhlIHJlc3VsdCB0by5cbiAqIEBwYXJhbSBsb2NhbFdyaXRlVGltZSAtIFRoZSBsb2NhbCB0aW1lIG9mIHRoZSBtdXRhdGlvbiAodXNlZCB0b1xuICogICAgIGdlbmVyYXRlIFNlcnZlclRpbWVzdGFtcFZhbHVlcykuXG4gKiBAcGFyYW0gbXV0YWJsZURvY3VtZW50IC0gVGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGRvY3VtZW50IGFmdGVyIGFwcGx5aW5nIGFsbFxuICogICAgIHByZXZpb3VzIG11dGF0aW9ucy5cbiAqIEByZXR1cm5zIFRoZSB0cmFuc2Zvcm0gcmVzdWx0cyBsaXN0LlxuICovIGZ1bmN0aW9uIHVuKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gbmV3IE1hcDtcbiAgICBmb3IgKGNvbnN0IGkgb2YgdCkge1xuICAgICAgICBjb25zdCB0ID0gaS50cmFuc2Zvcm0sIHIgPSBuLmRhdGEuZmllbGQoaS5maWVsZCk7XG4gICAgICAgIHMuc2V0KGkuZmllbGQsIEZlKHQsIHIsIGUpKTtcbiAgICB9XG4gICAgcmV0dXJuIHM7XG59XG5cbi8qKiBBIG11dGF0aW9uIHRoYXQgZGVsZXRlcyB0aGUgZG9jdW1lbnQgYXQgdGhlIGdpdmVuIGtleS4gKi8gY2xhc3MgaG4gZXh0ZW5kcyBYZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmtleSA9IHQsIHRoaXMucHJlY29uZGl0aW9uID0gZSwgdGhpcy50eXBlID0gMiAvKiBEZWxldGUgKi8gLCB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IFtdO1xuICAgIH1cbn1cblxuY2xhc3MgbG4gZXh0ZW5kcyBYZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmtleSA9IHQsIHRoaXMucHJlY29uZGl0aW9uID0gZSwgdGhpcy50eXBlID0gMyAvKiBWZXJpZnkgKi8gLCB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IFtdO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgZm4ge1xuICAgIC8vIFRPRE8oYi8zMzA3ODE2Myk6IGp1c3QgdXNlIHNpbXBsZXN0IGZvcm0gb2YgZXhpc3RlbmNlIGZpbHRlciBmb3Igbm93XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmNvdW50ID0gdDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEVycm9yIENvZGVzIGRlc2NyaWJpbmcgdGhlIGRpZmZlcmVudCB3YXlzIEdSUEMgY2FuIGZhaWwuIFRoZXNlIGFyZSBjb3BpZWRcbiAqIGRpcmVjdGx5IGZyb20gR1JQQydzIHNvdXJjZXMgaGVyZTpcbiAqXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ3JwYy9ncnBjL2Jsb2IvYmNlZWM5NGVhNGZjNWYwMDg1ZDgxMjM1ZDhlMWMwNjc5OGRjMzQxYS9pbmNsdWRlL2dycGMlMkIlMkIvaW1wbC9jb2RlZ2VuL3N0YXR1c19jb2RlX2VudW0uaFxuICpcbiAqIEltcG9ydGFudCEgVGhlIG5hbWVzIG9mIHRoZXNlIGlkZW50aWZpZXJzIG1hdHRlciBiZWNhdXNlIHRoZSBzdHJpbmcgZm9ybXNcbiAqIGFyZSB1c2VkIGZvciByZXZlcnNlIGxvb2t1cHMgZnJvbSB0aGUgd2ViY2hhbm5lbCBzdHJlYW0uIERvIE5PVCBjaGFuZ2UgdGhlXG4gKiBuYW1lcyBvZiB0aGVzZSBpZGVudGlmaWVycyBvciBjaGFuZ2UgdGhpcyBpbnRvIGEgY29uc3QgZW51bS5cbiAqLyB2YXIgZG4sIHduO1xuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciBhbiBlcnJvciBjb2RlIHJlcHJlc2VudHMgYSBwZXJtYW5lbnQgZXJyb3Igd2hlbiByZWNlaXZlZFxuICogaW4gcmVzcG9uc2UgdG8gYSBub24td3JpdGUgb3BlcmF0aW9uLlxuICpcbiAqIFNlZSBpc1Blcm1hbmVudFdyaXRlRXJyb3IgZm9yIGNsYXNzaWZ5aW5nIHdyaXRlIGVycm9ycy5cbiAqL1xuZnVuY3Rpb24gX24odCkge1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIEwoKTtcblxuICAgICAgY2FzZSBLLkNBTkNFTExFRDpcbiAgICAgIGNhc2UgSy5VTktOT1dOOlxuICAgICAgY2FzZSBLLkRFQURMSU5FX0VYQ0VFREVEOlxuICAgICAgY2FzZSBLLlJFU09VUkNFX0VYSEFVU1RFRDpcbiAgICAgIGNhc2UgSy5JTlRFUk5BTDpcbiAgICAgIGNhc2UgSy5VTkFWQUlMQUJMRTpcbiAvLyBVbmF1dGhlbnRpY2F0ZWQgbWVhbnMgc29tZXRoaW5nIHdlbnQgd3Jvbmcgd2l0aCBvdXIgdG9rZW4gYW5kIHdlIG5lZWRcbiAgICAgICAgLy8gdG8gcmV0cnkgd2l0aCBuZXcgY3JlZGVudGlhbHMgd2hpY2ggd2lsbCBoYXBwZW4gYXV0b21hdGljYWxseS5cbiAgICAgICAgICAgICAgY2FzZSBLLlVOQVVUSEVOVElDQVRFRDpcbiAgICAgICAgcmV0dXJuICExO1xuXG4gICAgICBjYXNlIEsuSU5WQUxJRF9BUkdVTUVOVDpcbiAgICAgIGNhc2UgSy5OT1RfRk9VTkQ6XG4gICAgICBjYXNlIEsuQUxSRUFEWV9FWElTVFM6XG4gICAgICBjYXNlIEsuUEVSTUlTU0lPTl9ERU5JRUQ6XG4gICAgICBjYXNlIEsuRkFJTEVEX1BSRUNPTkRJVElPTjpcbiAvLyBBYm9ydGVkIG1pZ2h0IGJlIHJldHJpZWQgaW4gc29tZSBzY2VuYXJpb3MsIGJ1dCB0aGF0IGlzIGRlcGVuZGFudCBvblxuICAgICAgICAvLyB0aGUgY29udGV4dCBhbmQgc2hvdWxkIGhhbmRsZWQgaW5kaXZpZHVhbGx5IGJ5IHRoZSBjYWxsaW5nIGNvZGUuXG4gICAgICAgIC8vIFNlZSBodHRwczovL2Nsb3VkLmdvb2dsZS5jb20vYXBpcy9kZXNpZ24vZXJyb3JzLlxuICAgICAgICAgICAgICBjYXNlIEsuQUJPUlRFRDpcbiAgICAgIGNhc2UgSy5PVVRfT0ZfUkFOR0U6XG4gICAgICBjYXNlIEsuVU5JTVBMRU1FTlRFRDpcbiAgICAgIGNhc2UgSy5EQVRBX0xPU1M6XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIGFuIGVycm9yIGNvZGUgcmVwcmVzZW50cyBhIHBlcm1hbmVudCBlcnJvciB3aGVuIHJlY2VpdmVkXG4gKiBpbiByZXNwb25zZSB0byBhIHdyaXRlIG9wZXJhdGlvbi5cbiAqXG4gKiBXcml0ZSBvcGVyYXRpb25zIG11c3QgYmUgaGFuZGxlZCBzcGVjaWFsbHkgYmVjYXVzZSBhcyBvZiBiLzExOTQzNzc2NCwgQUJPUlRFRFxuICogZXJyb3JzIG9uIHRoZSB3cml0ZSBzdHJlYW0gc2hvdWxkIGJlIHJldHJpZWQgdG9vIChldmVuIHRob3VnaCBBQk9SVEVEIGVycm9yc1xuICogYXJlIG5vdCBnZW5lcmFsbHkgcmV0cnlhYmxlKS5cbiAqXG4gKiBOb3RlIHRoYXQgZHVyaW5nIHRoZSBpbml0aWFsIGhhbmRzaGFrZSBvbiB0aGUgd3JpdGUgc3RyZWFtIGFuIEFCT1JURUQgZXJyb3JcbiAqIHNpZ25hbHMgdGhhdCB3ZSBzaG91bGQgZGlzY2FyZCBvdXIgc3RyZWFtIHRva2VuIChpLmUuIGl0IGlzIHBlcm1hbmVudCkuIFRoaXNcbiAqIG1lYW5zIGEgaGFuZHNoYWtlIGVycm9yIHNob3VsZCBiZSBjbGFzc2lmaWVkIHdpdGggaXNQZXJtYW5lbnRFcnJvciwgYWJvdmUuXG4gKi9cbi8qKlxuICogTWFwcyBhbiBlcnJvciBDb2RlIGZyb20gR1JQQyBzdGF0dXMgY29kZSBudW1iZXIsIGxpa2UgMCwgMSwgb3IgMTQuIFRoZXNlXG4gKiBhcmUgbm90IHRoZSBzYW1lIGFzIEhUVFAgc3RhdHVzIGNvZGVzLlxuICpcbiAqIEByZXR1cm5zIFRoZSBDb2RlIGVxdWl2YWxlbnQgdG8gdGhlIGdpdmVuIEdSUEMgc3RhdHVzIGNvZGUuIEZhaWxzIGlmIHRoZXJlXG4gKiAgICAgaXMgbm8gbWF0Y2guXG4gKi9cbmZ1bmN0aW9uIG1uKHQpIHtcbiAgICBpZiAodm9pZCAwID09PSB0KSBcbiAgICAvLyBUaGlzIHNob3VsZG4ndCBub3JtYWxseSBoYXBwZW4sIGJ1dCBpbiBjZXJ0YWluIGVycm9yIGNhc2VzIChsaWtlIHRyeWluZ1xuICAgIC8vIHRvIHNlbmQgaW52YWxpZCBwcm90byBtZXNzYWdlcykgd2UgbWF5IGdldCBhbiBlcnJvciB3aXRoIG5vIEdSUEMgY29kZS5cbiAgICByZXR1cm4gRihcIkdSUEMgZXJyb3IgaGFzIG5vIC5jb2RlXCIpLCBLLlVOS05PV047XG4gICAgc3dpdGNoICh0KSB7XG4gICAgICBjYXNlIGRuLk9LOlxuICAgICAgICByZXR1cm4gSy5PSztcblxuICAgICAgY2FzZSBkbi5DQU5DRUxMRUQ6XG4gICAgICAgIHJldHVybiBLLkNBTkNFTExFRDtcblxuICAgICAgY2FzZSBkbi5VTktOT1dOOlxuICAgICAgICByZXR1cm4gSy5VTktOT1dOO1xuXG4gICAgICBjYXNlIGRuLkRFQURMSU5FX0VYQ0VFREVEOlxuICAgICAgICByZXR1cm4gSy5ERUFETElORV9FWENFRURFRDtcblxuICAgICAgY2FzZSBkbi5SRVNPVVJDRV9FWEhBVVNURUQ6XG4gICAgICAgIHJldHVybiBLLlJFU09VUkNFX0VYSEFVU1RFRDtcblxuICAgICAgY2FzZSBkbi5JTlRFUk5BTDpcbiAgICAgICAgcmV0dXJuIEsuSU5URVJOQUw7XG5cbiAgICAgIGNhc2UgZG4uVU5BVkFJTEFCTEU6XG4gICAgICAgIHJldHVybiBLLlVOQVZBSUxBQkxFO1xuXG4gICAgICBjYXNlIGRuLlVOQVVUSEVOVElDQVRFRDpcbiAgICAgICAgcmV0dXJuIEsuVU5BVVRIRU5USUNBVEVEO1xuXG4gICAgICBjYXNlIGRuLklOVkFMSURfQVJHVU1FTlQ6XG4gICAgICAgIHJldHVybiBLLklOVkFMSURfQVJHVU1FTlQ7XG5cbiAgICAgIGNhc2UgZG4uTk9UX0ZPVU5EOlxuICAgICAgICByZXR1cm4gSy5OT1RfRk9VTkQ7XG5cbiAgICAgIGNhc2UgZG4uQUxSRUFEWV9FWElTVFM6XG4gICAgICAgIHJldHVybiBLLkFMUkVBRFlfRVhJU1RTO1xuXG4gICAgICBjYXNlIGRuLlBFUk1JU1NJT05fREVOSUVEOlxuICAgICAgICByZXR1cm4gSy5QRVJNSVNTSU9OX0RFTklFRDtcblxuICAgICAgY2FzZSBkbi5GQUlMRURfUFJFQ09ORElUSU9OOlxuICAgICAgICByZXR1cm4gSy5GQUlMRURfUFJFQ09ORElUSU9OO1xuXG4gICAgICBjYXNlIGRuLkFCT1JURUQ6XG4gICAgICAgIHJldHVybiBLLkFCT1JURUQ7XG5cbiAgICAgIGNhc2UgZG4uT1VUX09GX1JBTkdFOlxuICAgICAgICByZXR1cm4gSy5PVVRfT0ZfUkFOR0U7XG5cbiAgICAgIGNhc2UgZG4uVU5JTVBMRU1FTlRFRDpcbiAgICAgICAgcmV0dXJuIEsuVU5JTVBMRU1FTlRFRDtcblxuICAgICAgY2FzZSBkbi5EQVRBX0xPU1M6XG4gICAgICAgIHJldHVybiBLLkRBVEFfTE9TUztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIEwoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ29udmVydHMgYW4gSFRUUCByZXNwb25zZSdzIGVycm9yIHN0YXR1cyB0byB0aGUgZXF1aXZhbGVudCBlcnJvciBjb2RlLlxuICpcbiAqIEBwYXJhbSBzdGF0dXMgLSBBbiBIVFRQIGVycm9yIHJlc3BvbnNlIHN0YXR1cyAoXCJGQUlMRURfUFJFQ09ORElUSU9OXCIsXG4gKiBcIlVOS05PV05cIiwgZXRjLilcbiAqIEByZXR1cm5zIFRoZSBlcXVpdmFsZW50IENvZGUuIE5vbi1tYXRjaGluZyByZXNwb25zZXMgYXJlIG1hcHBlZCB0b1xuICogICAgIENvZGUuVU5LTk9XTi5cbiAqLyAod24gPSBkbiB8fCAoZG4gPSB7fSkpW3duLk9LID0gMF0gPSBcIk9LXCIsIHduW3duLkNBTkNFTExFRCA9IDFdID0gXCJDQU5DRUxMRURcIiwgXG53blt3bi5VTktOT1dOID0gMl0gPSBcIlVOS05PV05cIiwgd25bd24uSU5WQUxJRF9BUkdVTUVOVCA9IDNdID0gXCJJTlZBTElEX0FSR1VNRU5UXCIsIFxud25bd24uREVBRExJTkVfRVhDRUVERUQgPSA0XSA9IFwiREVBRExJTkVfRVhDRUVERURcIiwgd25bd24uTk9UX0ZPVU5EID0gNV0gPSBcIk5PVF9GT1VORFwiLCBcbnduW3duLkFMUkVBRFlfRVhJU1RTID0gNl0gPSBcIkFMUkVBRFlfRVhJU1RTXCIsIHduW3duLlBFUk1JU1NJT05fREVOSUVEID0gN10gPSBcIlBFUk1JU1NJT05fREVOSUVEXCIsIFxud25bd24uVU5BVVRIRU5USUNBVEVEID0gMTZdID0gXCJVTkFVVEhFTlRJQ0FURURcIiwgd25bd24uUkVTT1VSQ0VfRVhIQVVTVEVEID0gOF0gPSBcIlJFU09VUkNFX0VYSEFVU1RFRFwiLCBcbnduW3duLkZBSUxFRF9QUkVDT05ESVRJT04gPSA5XSA9IFwiRkFJTEVEX1BSRUNPTkRJVElPTlwiLCB3blt3bi5BQk9SVEVEID0gMTBdID0gXCJBQk9SVEVEXCIsIFxud25bd24uT1VUX09GX1JBTkdFID0gMTFdID0gXCJPVVRfT0ZfUkFOR0VcIiwgd25bd24uVU5JTVBMRU1FTlRFRCA9IDEyXSA9IFwiVU5JTVBMRU1FTlRFRFwiLCBcbnduW3duLklOVEVSTkFMID0gMTNdID0gXCJJTlRFUk5BTFwiLCB3blt3bi5VTkFWQUlMQUJMRSA9IDE0XSA9IFwiVU5BVkFJTEFCTEVcIiwgd25bd24uREFUQV9MT1NTID0gMTVdID0gXCJEQVRBX0xPU1NcIjtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIEFuIGltbXV0YWJsZSBzb3J0ZWQgbWFwIGltcGxlbWVudGF0aW9uLCBiYXNlZCBvbiBhIExlZnQtbGVhbmluZyBSZWQtQmxhY2tcbi8vIHRyZWUuXG5jbGFzcyBnbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmNvbXBhcmF0b3IgPSB0LCB0aGlzLnJvb3QgPSBlIHx8IHBuLkVNUFRZO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgbWFwLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5L3ZhbHVlIGFkZGVkIG9yIHJlcGxhY2VkLlxuICAgIGluc2VydCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgZ24odGhpcy5jb21wYXJhdG9yLCB0aGlzLnJvb3QuaW5zZXJ0KHQsIGUsIHRoaXMuY29tcGFyYXRvcikuY29weShudWxsLCBudWxsLCBwbi5CTEFDSywgbnVsbCwgbnVsbCkpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgbWFwLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IHJlbW92ZWQuXG4gICAgcmVtb3ZlKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBnbih0aGlzLmNvbXBhcmF0b3IsIHRoaXMucm9vdC5yZW1vdmUodCwgdGhpcy5jb21wYXJhdG9yKS5jb3B5KG51bGwsIG51bGwsIHBuLkJMQUNLLCBudWxsLCBudWxsKSk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBub2RlIHdpdGggdGhlIGdpdmVuIGtleSwgb3IgbnVsbC5cbiAgICBnZXQodCkge1xuICAgICAgICBsZXQgZSA9IHRoaXMucm9vdDtcbiAgICAgICAgZm9yICg7IWUuaXNFbXB0eSgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLmNvbXBhcmF0b3IodCwgZS5rZXkpO1xuICAgICAgICAgICAgaWYgKDAgPT09IG4pIHJldHVybiBlLnZhbHVlO1xuICAgICAgICAgICAgbiA8IDAgPyBlID0gZS5sZWZ0IDogbiA+IDAgJiYgKGUgPSBlLnJpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGVsZW1lbnQgaW4gdGhpcyBzb3J0ZWQgbWFwLCBvciAtMSBpZiBpdCBkb2Vzbid0XG4gICAgLy8gZXhpc3QuXG4gICAgaW5kZXhPZih0KSB7XG4gICAgICAgIC8vIE51bWJlciBvZiBub2RlcyB0aGF0IHdlcmUgcHJ1bmVkIHdoZW4gZGVzY2VuZGluZyByaWdodFxuICAgICAgICBsZXQgZSA9IDAsIG4gPSB0aGlzLnJvb3Q7XG4gICAgICAgIGZvciAoOyFuLmlzRW1wdHkoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gdGhpcy5jb21wYXJhdG9yKHQsIG4ua2V5KTtcbiAgICAgICAgICAgIGlmICgwID09PSBzKSByZXR1cm4gZSArIG4ubGVmdC5zaXplO1xuICAgICAgICAgICAgcyA8IDAgPyBuID0gbi5sZWZ0IDogKFxuICAgICAgICAgICAgLy8gQ291bnQgYWxsIG5vZGVzIGxlZnQgb2YgdGhlIG5vZGUgcGx1cyB0aGUgbm9kZSBpdHNlbGZcbiAgICAgICAgICAgIGUgKz0gbi5sZWZ0LnNpemUgKyAxLCBuID0gbi5yaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTm9kZSBub3QgZm91bmRcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QuaXNFbXB0eSgpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSB0b3RhbCBudW1iZXIgb2Ygbm9kZXMgaW4gdGhlIG1hcC5cbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5zaXplO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtaW5pbXVtIGtleSBpbiB0aGUgbWFwLlxuICAgIG1pbktleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5taW5LZXkoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWF4aW11bSBrZXkgaW4gdGhlIG1hcC5cbiAgICBtYXhLZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QubWF4S2V5KCk7XG4gICAgfVxuICAgIC8vIFRyYXZlcnNlcyB0aGUgbWFwIGluIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb24gZnVuY3Rpb25cbiAgICAvLyBmb3IgZWFjaCBrZXkvdmFsdWUgcGFpci4gSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxuICAgIGlub3JkZXJUcmF2ZXJzYWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290Lmlub3JkZXJUcmF2ZXJzYWwodCk7XG4gICAgfVxuICAgIGZvckVhY2godCkge1xuICAgICAgICB0aGlzLmlub3JkZXJUcmF2ZXJzYWwoKChlLCBuKSA9PiAodChlLCBuKSwgITEpKSk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmlub3JkZXJUcmF2ZXJzYWwoKChlLCBuKSA9PiAodC5wdXNoKGAke2V9OiR7bn1gKSwgITEpKSksIGB7JHt0LmpvaW4oXCIsIFwiKX19YDtcbiAgICB9XG4gICAgLy8gVHJhdmVyc2VzIHRoZSBtYXAgaW4gcmV2ZXJzZSBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uXG4gICAgLy8gZnVuY3Rpb24gZm9yIGVhY2gga2V5L3ZhbHVlIHBhaXIuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpc1xuICAgIC8vIGFib3J0ZWQuXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxuICAgIHJldmVyc2VUcmF2ZXJzYWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290LnJldmVyc2VUcmF2ZXJzYWwodCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYW4gaXRlcmF0b3Igb3ZlciB0aGUgU29ydGVkTWFwLlxuICAgIGdldEl0ZXJhdG9yKCkge1xuICAgICAgICByZXR1cm4gbmV3IHluKHRoaXMucm9vdCwgbnVsbCwgdGhpcy5jb21wYXJhdG9yLCAhMSk7XG4gICAgfVxuICAgIGdldEl0ZXJhdG9yRnJvbSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgeW4odGhpcy5yb290LCB0LCB0aGlzLmNvbXBhcmF0b3IsICExKTtcbiAgICB9XG4gICAgZ2V0UmV2ZXJzZUl0ZXJhdG9yKCkge1xuICAgICAgICByZXR1cm4gbmV3IHluKHRoaXMucm9vdCwgbnVsbCwgdGhpcy5jb21wYXJhdG9yLCAhMCk7XG4gICAgfVxuICAgIGdldFJldmVyc2VJdGVyYXRvckZyb20odCkge1xuICAgICAgICByZXR1cm4gbmV3IHluKHRoaXMucm9vdCwgdCwgdGhpcy5jb21wYXJhdG9yLCAhMCk7XG4gICAgfVxufVxuXG4gLy8gZW5kIFNvcnRlZE1hcFxuLy8gQW4gaXRlcmF0b3Igb3ZlciBhbiBMTFJCTm9kZS5cbmNsYXNzIHluIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMuaXNSZXZlcnNlID0gcywgdGhpcy5ub2RlU3RhY2sgPSBbXTtcbiAgICAgICAgbGV0IGkgPSAxO1xuICAgICAgICBmb3IgKDshdC5pc0VtcHR5KCk7ICkgaWYgKGkgPSBlID8gbih0LmtleSwgZSkgOiAxLCBcbiAgICAgICAgLy8gZmxpcCB0aGUgY29tcGFyaXNvbiBpZiB3ZSdyZSBnb2luZyBpbiByZXZlcnNlXG4gICAgICAgIHMgJiYgKGkgKj0gLTEpLCBpIDwgMCkgXG4gICAgICAgIC8vIFRoaXMgbm9kZSBpcyBsZXNzIHRoYW4gb3VyIHN0YXJ0IGtleS4gaWdub3JlIGl0XG4gICAgICAgIHQgPSB0aGlzLmlzUmV2ZXJzZSA/IHQubGVmdCA6IHQucmlnaHQ7IGVsc2Uge1xuICAgICAgICAgICAgaWYgKDAgPT09IGkpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIG5vZGUgaXMgZXhhY3RseSBlcXVhbCB0byBvdXIgc3RhcnQga2V5LiBQdXNoIGl0IG9uIHRoZSBzdGFjayxcbiAgICAgICAgICAgICAgICAvLyBidXQgc3RvcCBpdGVyYXRpbmc7XG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlU3RhY2sucHVzaCh0KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRoaXMgbm9kZSBpcyBncmVhdGVyIHRoYW4gb3VyIHN0YXJ0IGtleSwgYWRkIGl0IHRvIHRoZSBzdGFjayBhbmQgbW92ZVxuICAgICAgICAgICAgLy8gdG8gdGhlIG5leHQgb25lXG4gICAgICAgICAgICB0aGlzLm5vZGVTdGFjay5wdXNoKHQpLCB0ID0gdGhpcy5pc1JldmVyc2UgPyB0LnJpZ2h0IDogdC5sZWZ0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldE5leHQoKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcy5ub2RlU3RhY2sucG9wKCk7XG4gICAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgICAgICBrZXk6IHQua2V5LFxuICAgICAgICAgICAgdmFsdWU6IHQudmFsdWVcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuaXNSZXZlcnNlKSBmb3IgKHQgPSB0LmxlZnQ7ICF0LmlzRW1wdHkoKTsgKSB0aGlzLm5vZGVTdGFjay5wdXNoKHQpLCB0ID0gdC5yaWdodDsgZWxzZSBmb3IgKHQgPSB0LnJpZ2h0OyAhdC5pc0VtcHR5KCk7ICkgdGhpcy5ub2RlU3RhY2sucHVzaCh0KSwgXG4gICAgICAgIHQgPSB0LmxlZnQ7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICBoYXNOZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ub2RlU3RhY2subGVuZ3RoID4gMDtcbiAgICB9XG4gICAgcGVlaygpIHtcbiAgICAgICAgaWYgKDAgPT09IHRoaXMubm9kZVN0YWNrLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLm5vZGVTdGFja1t0aGlzLm5vZGVTdGFjay5sZW5ndGggLSAxXTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtleTogdC5rZXksXG4gICAgICAgICAgICB2YWx1ZTogdC52YWx1ZVxuICAgICAgICB9O1xuICAgIH1cbn1cblxuIC8vIGVuZCBTb3J0ZWRNYXBJdGVyYXRvclxuLy8gUmVwcmVzZW50cyBhIG5vZGUgaW4gYSBMZWZ0LWxlYW5pbmcgUmVkLUJsYWNrIHRyZWUuXG5jbGFzcyBwbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSkge1xuICAgICAgICB0aGlzLmtleSA9IHQsIHRoaXMudmFsdWUgPSBlLCB0aGlzLmNvbG9yID0gbnVsbCAhPSBuID8gbiA6IHBuLlJFRCwgdGhpcy5sZWZ0ID0gbnVsbCAhPSBzID8gcyA6IHBuLkVNUFRZLCBcbiAgICAgICAgdGhpcy5yaWdodCA9IG51bGwgIT0gaSA/IGkgOiBwbi5FTVBUWSwgdGhpcy5zaXplID0gdGhpcy5sZWZ0LnNpemUgKyAxICsgdGhpcy5yaWdodC5zaXplO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgY3VycmVudCBub2RlLCBvcHRpb25hbGx5IHJlcGxhY2luZyBwaWVjZXMgb2YgaXQuXG4gICAgY29weSh0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHJldHVybiBuZXcgcG4obnVsbCAhPSB0ID8gdCA6IHRoaXMua2V5LCBudWxsICE9IGUgPyBlIDogdGhpcy52YWx1ZSwgbnVsbCAhPSBuID8gbiA6IHRoaXMuY29sb3IsIG51bGwgIT0gcyA/IHMgOiB0aGlzLmxlZnQsIG51bGwgIT0gaSA/IGkgOiB0aGlzLnJpZ2h0KTtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICAvLyBUcmF2ZXJzZXMgdGhlIHRyZWUgaW4ga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvbiBmdW5jdGlvblxuICAgIC8vIGZvciBlYWNoIG5vZGUuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpcyBhYm9ydGVkLlxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cbiAgICBpbm9yZGVyVHJhdmVyc2FsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5pbm9yZGVyVHJhdmVyc2FsKHQpIHx8IHQodGhpcy5rZXksIHRoaXMudmFsdWUpIHx8IHRoaXMucmlnaHQuaW5vcmRlclRyYXZlcnNhbCh0KTtcbiAgICB9XG4gICAgLy8gVHJhdmVyc2VzIHRoZSB0cmVlIGluIHJldmVyc2Uga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvblxuICAgIC8vIGZ1bmN0aW9uIGZvciBlYWNoIG5vZGUuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpcyBhYm9ydGVkLlxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cbiAgICByZXZlcnNlVHJhdmVyc2FsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmlnaHQucmV2ZXJzZVRyYXZlcnNhbCh0KSB8fCB0KHRoaXMua2V5LCB0aGlzLnZhbHVlKSB8fCB0aGlzLmxlZnQucmV2ZXJzZVRyYXZlcnNhbCh0KTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWluaW11bSBub2RlIGluIHRoZSB0cmVlLlxuICAgIG1pbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5pc0VtcHR5KCkgPyB0aGlzIDogdGhpcy5sZWZ0Lm1pbigpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtYXhpbXVtIGtleSBpbiB0aGUgdHJlZS5cbiAgICBtaW5LZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbigpLmtleTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWF4aW11bSBrZXkgaW4gdGhlIHRyZWUuXG4gICAgbWF4S2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yaWdodC5pc0VtcHR5KCkgPyB0aGlzLmtleSA6IHRoaXMucmlnaHQubWF4S2V5KCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgbmV3IHRyZWUsIHdpdGggdGhlIGtleS92YWx1ZSBhZGRlZC5cbiAgICBpbnNlcnQodCwgZSwgbikge1xuICAgICAgICBsZXQgcyA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGkgPSBuKHQsIHMua2V5KTtcbiAgICAgICAgcmV0dXJuIHMgPSBpIDwgMCA/IHMuY29weShudWxsLCBudWxsLCBudWxsLCBzLmxlZnQuaW5zZXJ0KHQsIGUsIG4pLCBudWxsKSA6IDAgPT09IGkgPyBzLmNvcHkobnVsbCwgZSwgbnVsbCwgbnVsbCwgbnVsbCkgOiBzLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgcy5yaWdodC5pbnNlcnQodCwgZSwgbikpLCBcbiAgICAgICAgcy5maXhVcCgpO1xuICAgIH1cbiAgICByZW1vdmVNaW4oKSB7XG4gICAgICAgIGlmICh0aGlzLmxlZnQuaXNFbXB0eSgpKSByZXR1cm4gcG4uRU1QVFk7XG4gICAgICAgIGxldCB0ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHQubGVmdC5pc1JlZCgpIHx8IHQubGVmdC5sZWZ0LmlzUmVkKCkgfHwgKHQgPSB0Lm1vdmVSZWRMZWZ0KCkpLCB0ID0gdC5jb3B5KG51bGwsIG51bGwsIG51bGwsIHQubGVmdC5yZW1vdmVNaW4oKSwgbnVsbCksIFxuICAgICAgICB0LmZpeFVwKCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgbmV3IHRyZWUsIHdpdGggdGhlIHNwZWNpZmllZCBpdGVtIHJlbW92ZWQuXG4gICAgcmVtb3ZlKHQsIGUpIHtcbiAgICAgICAgbGV0IG4sIHMgPSB0aGlzO1xuICAgICAgICBpZiAoZSh0LCBzLmtleSkgPCAwKSBzLmxlZnQuaXNFbXB0eSgpIHx8IHMubGVmdC5pc1JlZCgpIHx8IHMubGVmdC5sZWZ0LmlzUmVkKCkgfHwgKHMgPSBzLm1vdmVSZWRMZWZ0KCkpLCBcbiAgICAgICAgcyA9IHMuY29weShudWxsLCBudWxsLCBudWxsLCBzLmxlZnQucmVtb3ZlKHQsIGUpLCBudWxsKTsgZWxzZSB7XG4gICAgICAgICAgICBpZiAocy5sZWZ0LmlzUmVkKCkgJiYgKHMgPSBzLnJvdGF0ZVJpZ2h0KCkpLCBzLnJpZ2h0LmlzRW1wdHkoKSB8fCBzLnJpZ2h0LmlzUmVkKCkgfHwgcy5yaWdodC5sZWZ0LmlzUmVkKCkgfHwgKHMgPSBzLm1vdmVSZWRSaWdodCgpKSwgXG4gICAgICAgICAgICAwID09PSBlKHQsIHMua2V5KSkge1xuICAgICAgICAgICAgICAgIGlmIChzLnJpZ2h0LmlzRW1wdHkoKSkgcmV0dXJuIHBuLkVNUFRZO1xuICAgICAgICAgICAgICAgIG4gPSBzLnJpZ2h0Lm1pbigpLCBzID0gcy5jb3B5KG4ua2V5LCBuLnZhbHVlLCBudWxsLCBudWxsLCBzLnJpZ2h0LnJlbW92ZU1pbigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHMgPSBzLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgcy5yaWdodC5yZW1vdmUodCwgZSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzLmZpeFVwKCk7XG4gICAgfVxuICAgIGlzUmVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2xvcjtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBuZXcgdHJlZSBhZnRlciBwZXJmb3JtaW5nIGFueSBuZWVkZWQgcm90YXRpb25zLlxuICAgIGZpeFVwKCkge1xuICAgICAgICBsZXQgdCA9IHRoaXM7XG4gICAgICAgIHJldHVybiB0LnJpZ2h0LmlzUmVkKCkgJiYgIXQubGVmdC5pc1JlZCgpICYmICh0ID0gdC5yb3RhdGVMZWZ0KCkpLCB0LmxlZnQuaXNSZWQoKSAmJiB0LmxlZnQubGVmdC5pc1JlZCgpICYmICh0ID0gdC5yb3RhdGVSaWdodCgpKSwgXG4gICAgICAgIHQubGVmdC5pc1JlZCgpICYmIHQucmlnaHQuaXNSZWQoKSAmJiAodCA9IHQuY29sb3JGbGlwKCkpLCB0O1xuICAgIH1cbiAgICBtb3ZlUmVkTGVmdCgpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzLmNvbG9yRmxpcCgpO1xuICAgICAgICByZXR1cm4gdC5yaWdodC5sZWZ0LmlzUmVkKCkgJiYgKHQgPSB0LmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgdC5yaWdodC5yb3RhdGVSaWdodCgpKSwgXG4gICAgICAgIHQgPSB0LnJvdGF0ZUxlZnQoKSwgdCA9IHQuY29sb3JGbGlwKCkpLCB0O1xuICAgIH1cbiAgICBtb3ZlUmVkUmlnaHQoKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcy5jb2xvckZsaXAoKTtcbiAgICAgICAgcmV0dXJuIHQubGVmdC5sZWZ0LmlzUmVkKCkgJiYgKHQgPSB0LnJvdGF0ZVJpZ2h0KCksIHQgPSB0LmNvbG9yRmxpcCgpKSwgdDtcbiAgICB9XG4gICAgcm90YXRlTGVmdCgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuY29weShudWxsLCBudWxsLCBwbi5SRUQsIG51bGwsIHRoaXMucmlnaHQubGVmdCk7XG4gICAgICAgIHJldHVybiB0aGlzLnJpZ2h0LmNvcHkobnVsbCwgbnVsbCwgdGhpcy5jb2xvciwgdCwgbnVsbCk7XG4gICAgfVxuICAgIHJvdGF0ZVJpZ2h0KCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5jb3B5KG51bGwsIG51bGwsIHBuLlJFRCwgdGhpcy5sZWZ0LnJpZ2h0LCBudWxsKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5jb3B5KG51bGwsIG51bGwsIHRoaXMuY29sb3IsIG51bGwsIHQpO1xuICAgIH1cbiAgICBjb2xvckZsaXAoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmxlZnQuY29weShudWxsLCBudWxsLCAhdGhpcy5sZWZ0LmNvbG9yLCBudWxsLCBudWxsKSwgZSA9IHRoaXMucmlnaHQuY29weShudWxsLCBudWxsLCAhdGhpcy5yaWdodC5jb2xvciwgbnVsbCwgbnVsbCk7XG4gICAgICAgIHJldHVybiB0aGlzLmNvcHkobnVsbCwgbnVsbCwgIXRoaXMuY29sb3IsIHQsIGUpO1xuICAgIH1cbiAgICAvLyBGb3IgdGVzdGluZy5cbiAgICBjaGVja01heERlcHRoKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5jaGVjaygpO1xuICAgICAgICByZXR1cm4gTWF0aC5wb3coMiwgdCkgPD0gdGhpcy5zaXplICsgMTtcbiAgICB9XG4gICAgLy8gSW4gYSBiYWxhbmNlZCBSQiB0cmVlLCB0aGUgYmxhY2stZGVwdGggKG51bWJlciBvZiBibGFjayBub2RlcykgZnJvbSByb290IHRvXG4gICAgLy8gbGVhdmVzIGlzIGVxdWFsIG9uIGJvdGggc2lkZXMuICBUaGlzIGZ1bmN0aW9uIHZlcmlmaWVzIHRoYXQgb3IgYXNzZXJ0cy5cbiAgICBjaGVjaygpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNSZWQoKSAmJiB0aGlzLmxlZnQuaXNSZWQoKSkgdGhyb3cgTCgpO1xuICAgICAgICBpZiAodGhpcy5yaWdodC5pc1JlZCgpKSB0aHJvdyBMKCk7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmxlZnQuY2hlY2soKTtcbiAgICAgICAgaWYgKHQgIT09IHRoaXMucmlnaHQuY2hlY2soKSkgdGhyb3cgTCgpO1xuICAgICAgICByZXR1cm4gdCArICh0aGlzLmlzUmVkKCkgPyAwIDogMSk7XG4gICAgfVxufVxuXG4gLy8gZW5kIExMUkJOb2RlXG4vLyBFbXB0eSBub2RlIGlzIHNoYXJlZCBiZXR3ZWVuIGFsbCBMTFJCIHRyZWVzLlxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbnBuLkVNUFRZID0gbnVsbCwgcG4uUkVEID0gITAsIHBuLkJMQUNLID0gITE7XG5cbi8vIGVuZCBMTFJCRW1wdHlOb2RlXG5wbi5FTVBUWSA9IG5ldyBcbi8vIFJlcHJlc2VudHMgYW4gZW1wdHkgbm9kZSAoYSBsZWFmIG5vZGUgaW4gdGhlIFJlZC1CbGFjayBUcmVlKS5cbmNsYXNzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zaXplID0gMDtcbiAgICB9XG4gICAgZ2V0IGtleSgpIHtcbiAgICAgICAgdGhyb3cgTCgpO1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIHRocm93IEwoKTtcbiAgICB9XG4gICAgZ2V0IGNvbG9yKCkge1xuICAgICAgICB0aHJvdyBMKCk7XG4gICAgfVxuICAgIGdldCBsZWZ0KCkge1xuICAgICAgICB0aHJvdyBMKCk7XG4gICAgfVxuICAgIGdldCByaWdodCgpIHtcbiAgICAgICAgdGhyb3cgTCgpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgY3VycmVudCBub2RlLlxuICAgIGNvcHkodCwgZSwgbiwgcywgaSkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIHRyZWUsIHdpdGggdGhlIHNwZWNpZmllZCBrZXkvdmFsdWUgYWRkZWQuXG4gICAgaW5zZXJ0KHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBwbih0LCBlKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIHRyZWUsIHdpdGggdGhlIHNwZWNpZmllZCBrZXkgcmVtb3ZlZC5cbiAgICByZW1vdmUodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICBpbm9yZGVyVHJhdmVyc2FsKHQpIHtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICByZXZlcnNlVHJhdmVyc2FsKHQpIHtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICBtaW5LZXkoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBtYXhLZXkoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpc1JlZCgpIHtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICAvLyBGb3IgdGVzdGluZy5cbiAgICBjaGVja01heERlcHRoKCkge1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIGNoZWNrKCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBTb3J0ZWRTZXQgaXMgYW4gaW1tdXRhYmxlIChjb3B5LW9uLXdyaXRlKSBjb2xsZWN0aW9uIHRoYXQgaG9sZHMgZWxlbWVudHNcbiAqIGluIG9yZGVyIHNwZWNpZmllZCBieSB0aGUgcHJvdmlkZWQgY29tcGFyYXRvci5cbiAqXG4gKiBOT1RFOiBpZiBwcm92aWRlZCBjb21wYXJhdG9yIHJldHVybnMgMCBmb3IgdHdvIGVsZW1lbnRzLCB3ZSBjb25zaWRlciB0aGVtIHRvXG4gKiBiZSBlcXVhbCFcbiAqL1xuY2xhc3MgVG4ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5jb21wYXJhdG9yID0gdCwgdGhpcy5kYXRhID0gbmV3IGduKHRoaXMuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIGhhcyh0KSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLmRhdGEuZ2V0KHQpO1xuICAgIH1cbiAgICBmaXJzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5taW5LZXkoKTtcbiAgICB9XG4gICAgbGFzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5tYXhLZXkoKTtcbiAgICB9XG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuc2l6ZTtcbiAgICB9XG4gICAgaW5kZXhPZih0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuaW5kZXhPZih0KTtcbiAgICB9XG4gICAgLyoqIEl0ZXJhdGVzIGVsZW1lbnRzIGluIG9yZGVyIGRlZmluZWQgYnkgXCJjb21wYXJhdG9yXCIgKi8gICAgZm9yRWFjaCh0KSB7XG4gICAgICAgIHRoaXMuZGF0YS5pbm9yZGVyVHJhdmVyc2FsKCgoZSwgbikgPT4gKHQoZSksICExKSkpO1xuICAgIH1cbiAgICAvKiogSXRlcmF0ZXMgb3ZlciBgZWxlbWBzIHN1Y2ggdGhhdDogcmFuZ2VbMF0gJmx0Oz0gZWxlbSAmbHQ7IHJhbmdlWzFdLiAqLyAgICBmb3JFYWNoSW5SYW5nZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmRhdGEuZ2V0SXRlcmF0b3JGcm9tKHRbMF0pO1xuICAgICAgICBmb3IgKDtuLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gbi5nZXROZXh0KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5jb21wYXJhdG9yKHMua2V5LCB0WzFdKSA+PSAwKSByZXR1cm47XG4gICAgICAgICAgICBlKHMua2V5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGBlbGVtYHMgc3VjaCB0aGF0OiBzdGFydCAmbHQ7PSBlbGVtIHVudGlsIGZhbHNlIGlzIHJldHVybmVkLlxuICAgICAqLyAgICBmb3JFYWNoV2hpbGUodCwgZSkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgZm9yIChuID0gdm9pZCAwICE9PSBlID8gdGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbShlKSA6IHRoaXMuZGF0YS5nZXRJdGVyYXRvcigpOyBuLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBpZiAoIXQobi5nZXROZXh0KCkua2V5KSkgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBGaW5kcyB0aGUgbGVhc3QgZWxlbWVudCBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gYGVsZW1gLiAqLyAgICBmaXJzdEFmdGVyT3JFcXVhbCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmRhdGEuZ2V0SXRlcmF0b3JGcm9tKHQpO1xuICAgICAgICByZXR1cm4gZS5oYXNOZXh0KCkgPyBlLmdldE5leHQoKS5rZXkgOiBudWxsO1xuICAgIH1cbiAgICBnZXRJdGVyYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBFbih0aGlzLmRhdGEuZ2V0SXRlcmF0b3IoKSk7XG4gICAgfVxuICAgIGdldEl0ZXJhdG9yRnJvbSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgRW4odGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbSh0KSk7XG4gICAgfVxuICAgIC8qKiBJbnNlcnRzIG9yIHVwZGF0ZXMgYW4gZWxlbWVudCAqLyAgICBhZGQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb3B5KHRoaXMuZGF0YS5yZW1vdmUodCkuaW5zZXJ0KHQsICEwKSk7XG4gICAgfVxuICAgIC8qKiBEZWxldGVzIGFuIGVsZW1lbnQgKi8gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzKHQpID8gdGhpcy5jb3B5KHRoaXMuZGF0YS5yZW1vdmUodCkpIDogdGhpcztcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5pc0VtcHR5KCk7XG4gICAgfVxuICAgIHVuaW9uV2l0aCh0KSB7XG4gICAgICAgIGxldCBlID0gdGhpcztcbiAgICAgICAgLy8gTWFrZSBzdXJlIGByZXN1bHRgIGFsd2F5cyByZWZlcnMgdG8gdGhlIGxhcmdlciBvbmUgb2YgdGhlIHR3byBzZXRzLlxuICAgICAgICAgICAgICAgIHJldHVybiBlLnNpemUgPCB0LnNpemUgJiYgKGUgPSB0LCB0ID0gdGhpcyksIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBlID0gZS5hZGQodCk7XG4gICAgICAgIH0pKSwgZTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIGlmICghKHQgaW5zdGFuY2VvZiBUbikpIHJldHVybiAhMTtcbiAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gdC5zaXplKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmRhdGEuZ2V0SXRlcmF0b3IoKSwgbiA9IHQuZGF0YS5nZXRJdGVyYXRvcigpO1xuICAgICAgICBmb3IgKDtlLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5nZXROZXh0KCkua2V5LCBzID0gbi5nZXROZXh0KCkua2V5O1xuICAgICAgICAgICAgaWYgKDAgIT09IHRoaXMuY29tcGFyYXRvcih0LCBzKSkgcmV0dXJuICExO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgdG9BcnJheSgpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHQucHVzaChlKTtcbiAgICAgICAgfSkpLCB0O1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKChlID0+IHQucHVzaChlKSkpLCBcIlNvcnRlZFNldChcIiArIHQudG9TdHJpbmcoKSArIFwiKVwiO1xuICAgIH1cbiAgICBjb3B5KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBUbih0aGlzLmNvbXBhcmF0b3IpO1xuICAgICAgICByZXR1cm4gZS5kYXRhID0gdCwgZTtcbiAgICB9XG59XG5cbmNsYXNzIEVuIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuaXRlciA9IHQ7XG4gICAgfVxuICAgIGdldE5leHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLml0ZXIuZ2V0TmV4dCgpLmtleTtcbiAgICB9XG4gICAgaGFzTmV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlci5oYXNOZXh0KCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBJbiA9IG5ldyBnbihTdC5jb21wYXJhdG9yKTtcblxuZnVuY3Rpb24gQW4oKSB7XG4gICAgcmV0dXJuIEluO1xufVxuXG5jb25zdCBSbiA9IG5ldyBnbihTdC5jb21wYXJhdG9yKTtcblxuZnVuY3Rpb24gUG4oKSB7XG4gICAgcmV0dXJuIFJuO1xufVxuXG5jb25zdCBibiA9IG5ldyBnbihTdC5jb21wYXJhdG9yKTtcblxuZnVuY3Rpb24gdm4oKSB7XG4gICAgcmV0dXJuIGJuO1xufVxuXG5jb25zdCBWbiA9IG5ldyBUbihTdC5jb21wYXJhdG9yKTtcblxuZnVuY3Rpb24gU24oLi4udCkge1xuICAgIGxldCBlID0gVm47XG4gICAgZm9yIChjb25zdCBuIG9mIHQpIGUgPSBlLmFkZChuKTtcbiAgICByZXR1cm4gZTtcbn1cblxuY29uc3QgRG4gPSBuZXcgVG4oaXQpO1xuXG5mdW5jdGlvbiBDbigpIHtcbiAgICByZXR1cm4gRG47XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGV2ZW50IGZyb20gdGhlIFJlbW90ZVN0b3JlLiBJdCBpcyBzcGxpdCBpbnRvIHRhcmdldENoYW5nZXMgKGNoYW5nZXMgdG8gdGhlXG4gKiBzdGF0ZSBvciB0aGUgc2V0IG9mIGRvY3VtZW50cyBpbiBvdXIgd2F0Y2hlZCB0YXJnZXRzKSBhbmQgZG9jdW1lbnRVcGRhdGVzXG4gKiAoY2hhbmdlcyB0byB0aGUgYWN0dWFsIGRvY3VtZW50cykuXG4gKi8gY2xhc3MgTm4ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBzbmFwc2hvdCB2ZXJzaW9uIHRoaXMgZXZlbnQgYnJpbmdzIHVzIHVwIHRvLCBvciBNSU4gaWYgbm90IHNldC5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBBIG1hcCBmcm9tIHRhcmdldCB0byBjaGFuZ2VzIHRvIHRoZSB0YXJnZXQuIFNlZSBUYXJnZXRDaGFuZ2UuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogQSBzZXQgb2YgdGFyZ2V0cyB0aGF0IGlzIGtub3duIHRvIGJlIGluY29uc2lzdGVudC4gTGlzdGVucyBmb3IgdGhlc2VcbiAgICAgKiB0YXJnZXRzIHNob3VsZCBiZSByZS1lc3RhYmxpc2hlZCB3aXRob3V0IHJlc3VtZSB0b2tlbnMuXG4gICAgICovXG4gICAgbiwgXG4gICAgLyoqXG4gICAgICogQSBzZXQgb2Ygd2hpY2ggZG9jdW1lbnRzIGhhdmUgY2hhbmdlZCBvciBiZWVuIGRlbGV0ZWQsIGFsb25nIHdpdGggdGhlXG4gICAgICogZG9jJ3MgbmV3IHZhbHVlcyAoaWYgbm90IGRlbGV0ZWQpLlxuICAgICAqL1xuICAgIHMsIFxuICAgIC8qKlxuICAgICAqIEEgc2V0IG9mIHdoaWNoIGRvY3VtZW50IHVwZGF0ZXMgYXJlIGR1ZSBvbmx5IHRvIGxpbWJvIHJlc29sdXRpb24gdGFyZ2V0cy5cbiAgICAgKi9cbiAgICBpKSB7XG4gICAgICAgIHRoaXMuc25hcHNob3RWZXJzaW9uID0gdCwgdGhpcy50YXJnZXRDaGFuZ2VzID0gZSwgdGhpcy50YXJnZXRNaXNtYXRjaGVzID0gbiwgdGhpcy5kb2N1bWVudFVwZGF0ZXMgPSBzLCBcbiAgICAgICAgdGhpcy5yZXNvbHZlZExpbWJvRG9jdW1lbnRzID0gaTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSEFDSzogVmlld3MgcmVxdWlyZSBSZW1vdGVFdmVudHMgaW4gb3JkZXIgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIHZpZXcgaXNcbiAgICAgKiBDVVJSRU5ULCBidXQgc2Vjb25kYXJ5IHRhYnMgZG9uJ3QgcmVjZWl2ZSByZW1vdGUgZXZlbnRzLiBTbyB0aGlzIG1ldGhvZCBpc1xuICAgICAqIHVzZWQgdG8gY3JlYXRlIGEgc3ludGhlc2l6ZWQgUmVtb3RlRXZlbnQgdGhhdCBjYW4gYmUgdXNlZCB0byBhcHBseSBhXG4gICAgICogQ1VSUkVOVCBzdGF0dXMgY2hhbmdlIHRvIGEgVmlldywgZm9yIHF1ZXJpZXMgZXhlY3V0ZWQgaW4gYSBkaWZmZXJlbnQgdGFiLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHlcbiAgICBzdGF0aWMgY3JlYXRlU3ludGhlc2l6ZWRSZW1vdGVFdmVudEZvckN1cnJlbnRDaGFuZ2UodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbmV3IE1hcDtcbiAgICAgICAgcmV0dXJuIG4uc2V0KHQsIGtuLmNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZSh0LCBlKSksIG5ldyBObihjdC5taW4oKSwgbiwgQ24oKSwgQW4oKSwgU24oKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgVGFyZ2V0Q2hhbmdlIHNwZWNpZmllcyB0aGUgc2V0IG9mIGNoYW5nZXMgZm9yIGEgc3BlY2lmaWMgdGFyZ2V0IGFzIHBhcnQgb2ZcbiAqIGEgUmVtb3RlRXZlbnQuIFRoZXNlIGNoYW5nZXMgdHJhY2sgd2hpY2ggZG9jdW1lbnRzIGFyZSBhZGRlZCwgbW9kaWZpZWQgb3JcbiAqIHJlbW92ZWQsIGFzIHdlbGwgYXMgdGhlIHRhcmdldCdzIHJlc3VtZSB0b2tlbiBhbmQgd2hldGhlciB0aGUgdGFyZ2V0IGlzXG4gKiBtYXJrZWQgQ1VSUkVOVC5cbiAqIFRoZSBhY3R1YWwgY2hhbmdlcyAqdG8qIGRvY3VtZW50cyBhcmUgbm90IHBhcnQgb2YgdGhlIFRhcmdldENoYW5nZSBzaW5jZVxuICogZG9jdW1lbnRzIG1heSBiZSBwYXJ0IG9mIG11bHRpcGxlIHRhcmdldHMuXG4gKi8gY2xhc3Mga24ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgcXVlcnkgdG8gYmUgcmVzdW1lZFxuICAgICAqIGFmdGVyIGRpc2Nvbm5lY3Rpbmcgd2l0aG91dCByZXRyYW5zbWl0dGluZyBhbGwgdGhlIGRhdGEgdGhhdCBtYXRjaGVzIHRoZVxuICAgICAqIHF1ZXJ5LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYSBwb2ludCBpbiB0aW1lIGZyb20gd2hpY2hcbiAgICAgKiB0aGUgc2VydmVyIHNob3VsZCByZXN1bWUgc2VuZGluZyByZXN1bHRzLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBcImN1cnJlbnRcIiAoc3luY2VkKSBzdGF0dXMgb2YgdGhpcyB0YXJnZXQuIE5vdGUgdGhhdCBcImN1cnJlbnRcIlxuICAgICAqIGhhcyBzcGVjaWFsIG1lYW5pbmcgaW4gdGhlIFJQQyBwcm90b2NvbCB0aGF0IGltcGxpZXMgdGhhdCBhIHRhcmdldCBpc1xuICAgICAqIGJvdGggdXAtdG8tZGF0ZSBhbmQgY29uc2lzdGVudCB3aXRoIHRoZSByZXN0IG9mIHRoZSB3YXRjaCBzdHJlYW0uXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCB3ZXJlIG5ld2x5IGFzc2lnbmVkIHRvIHRoaXMgdGFyZ2V0IGFzIHBhcnQgb2ZcbiAgICAgKiB0aGlzIHJlbW90ZSBldmVudC5cbiAgICAgKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBUaGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IHdlcmUgYWxyZWFkeSBhc3NpZ25lZCB0byB0aGlzIHRhcmdldCBidXQgcmVjZWl2ZWRcbiAgICAgKiBhbiB1cGRhdGUgZHVyaW5nIHRoaXMgcmVtb3RlIGV2ZW50LlxuICAgICAqL1xuICAgIHMsIFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgd2VyZSByZW1vdmVkIGZyb20gdGhpcyB0YXJnZXQgYXMgcGFydCBvZiB0aGlzXG4gICAgICogcmVtb3RlIGV2ZW50LlxuICAgICAqL1xuICAgIGkpIHtcbiAgICAgICAgdGhpcy5yZXN1bWVUb2tlbiA9IHQsIHRoaXMuY3VycmVudCA9IGUsIHRoaXMuYWRkZWREb2N1bWVudHMgPSBuLCB0aGlzLm1vZGlmaWVkRG9jdW1lbnRzID0gcywgXG4gICAgICAgIHRoaXMucmVtb3ZlZERvY3VtZW50cyA9IGk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gY3JlYXRlIGEgc3ludGhlc2l6ZWQgVGFyZ2V0Q2hhbmdlcyB0aGF0IGNhbiBiZSB1c2VkIHRvXG4gICAgICogYXBwbHkgYSBDVVJSRU5UIHN0YXR1cyBjaGFuZ2UgdG8gYSBWaWV3IChmb3IgcXVlcmllcyBleGVjdXRlZCBpbiBhIGRpZmZlcmVudFxuICAgICAqIHRhYikgb3IgZm9yIG5ldyBxdWVyaWVzICh0byByYWlzZSBzbmFwc2hvdHMgd2l0aCBjb3JyZWN0IENVUlJFTlQgc3RhdHVzKS5cbiAgICAgKi8gICAgc3RhdGljIGNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcga24oeXQuRU1QVFlfQllURV9TVFJJTkcsIGUsIFNuKCksIFNuKCksIFNuKCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhIGNoYW5nZWQgZG9jdW1lbnQgYW5kIGEgbGlzdCBvZiB0YXJnZXQgaWRzIHRvIHdoaWNoIHRoaXMgY2hhbmdlXG4gKiBhcHBsaWVzLlxuICpcbiAqIElmIGRvY3VtZW50IGhhcyBiZWVuIGRlbGV0ZWQgTm9Eb2N1bWVudCB3aWxsIGJlIHByb3ZpZGVkLlxuICovIGNsYXNzIHhuIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIG5ldyBkb2N1bWVudCBhcHBsaWVzIHRvIGFsbCBvZiB0aGVzZSB0YXJnZXRzLiAqL1xuICAgIHQsIFxuICAgIC8qKiBUaGUgbmV3IGRvY3VtZW50IGlzIHJlbW92ZWQgZnJvbSBhbGwgb2YgdGhlc2UgdGFyZ2V0cy4gKi9cbiAgICBlLCBcbiAgICAvKiogVGhlIGtleSBvZiB0aGUgZG9jdW1lbnQgZm9yIHRoaXMgY2hhbmdlLiAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIFRoZSBuZXcgZG9jdW1lbnQgb3IgTm9Eb2N1bWVudCBpZiBpdCB3YXMgZGVsZXRlZC4gSXMgbnVsbCBpZiB0aGVcbiAgICAgKiBkb2N1bWVudCB3ZW50IG91dCBvZiB2aWV3IHdpdGhvdXQgdGhlIHNlcnZlciBzZW5kaW5nIGEgbmV3IGRvY3VtZW50LlxuICAgICAqL1xuICAgIHMpIHtcbiAgICAgICAgdGhpcy4kID0gdCwgdGhpcy5yZW1vdmVkVGFyZ2V0SWRzID0gZSwgdGhpcy5rZXkgPSBuLCB0aGlzLkYgPSBzO1xuICAgIH1cbn1cblxuY2xhc3MgJG4ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHQsIHRoaXMuTyA9IGU7XG4gICAgfVxufVxuXG5jbGFzcyBGbiB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFdoYXQga2luZCBvZiBjaGFuZ2Ugb2NjdXJyZWQgdG8gdGhlIHdhdGNoIHRhcmdldC4gKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIHRhcmdldCBJRHMgdGhhdCB3ZXJlIGFkZGVkL3JlbW92ZWQvc2V0LiAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgdGFyZ2V0IHRvIGJlXG4gICAgICogcmVzdW1lZCBhZnRlciBkaXNjb25uZWN0aW5nIHdpdGhvdXQgcmV0cmFuc21pdHRpbmcgYWxsIHRoZSBkYXRhIHRoYXRcbiAgICAgKiBtYXRjaGVzIHRoZSB0YXJnZXQuIFRoZSByZXN1bWUgdG9rZW4gZXNzZW50aWFsbHkgaWRlbnRpZmllcyBhIHBvaW50IGluXG4gICAgICogdGltZSBmcm9tIHdoaWNoIHRoZSBzZXJ2ZXIgc2hvdWxkIHJlc3VtZSBzZW5kaW5nIHJlc3VsdHMuXG4gICAgICovXG4gICAgbiA9IHl0LkVNUFRZX0JZVEVfU1RSSU5HXG4gICAgLyoqIEFuIFJQQyBlcnJvciBpbmRpY2F0aW5nIHdoeSB0aGUgd2F0Y2ggZmFpbGVkLiAqLyAsIHMgPSBudWxsKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB0LCB0aGlzLnRhcmdldElkcyA9IGUsIHRoaXMucmVzdW1lVG9rZW4gPSBuLCB0aGlzLmNhdXNlID0gcztcbiAgICB9XG59XG5cbi8qKiBUcmFja3MgdGhlIGludGVybmFsIHN0YXRlIG9mIGEgV2F0Y2ggdGFyZ2V0LiAqLyBjbGFzcyBPbiB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbnVtYmVyIG9mIHBlbmRpbmcgcmVzcG9uc2VzIChhZGRzIG9yIHJlbW92ZXMpIHRoYXQgd2UgYXJlIHdhaXRpbmcgb24uXG4gICAgICAgICAqIFdlIG9ubHkgY29uc2lkZXIgdGFyZ2V0cyBhY3RpdmUgdGhhdCBoYXZlIG5vIHBlbmRpbmcgcmVzcG9uc2VzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5NID0gMCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBLZWVwcyB0cmFjayBvZiB0aGUgZG9jdW1lbnQgY2hhbmdlcyBzaW5jZSB0aGUgbGFzdCByYWlzZWQgc25hcHNob3QuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZXNlIGNoYW5nZXMgYXJlIGNvbnRpbnVvdXNseSB1cGRhdGVkIGFzIHdlIHJlY2VpdmUgZG9jdW1lbnQgdXBkYXRlcyBhbmRcbiAgICAgICAgICogYWx3YXlzIHJlZmxlY3QgdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMgYWdhaW5zdCB0aGUgbGFzdCBpc3N1ZWQgc25hcHNob3QuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkwgPSBCbigpLCBcbiAgICAgICAgLyoqIFNlZSBwdWJsaWMgZ2V0dGVycyBmb3IgZXhwbGFuYXRpb25zIG9mIHRoZXNlIGZpZWxkcy4gKi9cbiAgICAgICAgdGhpcy5CID0geXQuRU1QVFlfQllURV9TVFJJTkcsIHRoaXMuVSA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgdGhpcyB0YXJnZXQgc3RhdGUgc2hvdWxkIGJlIGluY2x1ZGVkIGluIHRoZSBuZXh0IHNuYXBzaG90LiBXZVxuICAgICAgICAgKiBpbml0aWFsaXplIHRvIHRydWUgc28gdGhhdCBuZXdseS1hZGRlZCB0YXJnZXRzIGFyZSBpbmNsdWRlZCBpbiB0aGUgbmV4dFxuICAgICAgICAgKiBSZW1vdGVFdmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucSA9ICEwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoaXMgdGFyZ2V0IGhhcyBiZWVuIG1hcmtlZCAnY3VycmVudCcuXG4gICAgICpcbiAgICAgKiAnQ3VycmVudCcgaGFzIHNwZWNpYWwgbWVhbmluZyBpbiB0aGUgUlBDIHByb3RvY29sOiBJdCBpbXBsaWVzIHRoYXQgdGhlXG4gICAgICogV2F0Y2ggYmFja2VuZCBoYXMgc2VudCB1cyBhbGwgY2hhbmdlcyB1cCB0byB0aGUgcG9pbnQgYXQgd2hpY2ggdGhlIHRhcmdldFxuICAgICAqIHdhcyBhZGRlZCBhbmQgdGhhdCB0aGUgdGFyZ2V0IGlzIGNvbnNpc3RlbnQgd2l0aCB0aGUgcmVzdCBvZiB0aGUgd2F0Y2hcbiAgICAgKiBzdHJlYW0uXG4gICAgICovICAgIGdldCBjdXJyZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5VO1xuICAgIH1cbiAgICAvKiogVGhlIGxhc3QgcmVzdW1lIHRva2VuIHNlbnQgdG8gdXMgZm9yIHRoaXMgdGFyZ2V0LiAqLyAgICBnZXQgcmVzdW1lVG9rZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkI7XG4gICAgfVxuICAgIC8qKiBXaGV0aGVyIHRoaXMgdGFyZ2V0IGhhcyBwZW5kaW5nIHRhcmdldCBhZGRzIG9yIHRhcmdldCByZW1vdmVzLiAqLyAgICBnZXQgSygpIHtcbiAgICAgICAgcmV0dXJuIDAgIT09IHRoaXMuTTtcbiAgICB9XG4gICAgLyoqIFdoZXRoZXIgd2UgaGF2ZSBtb2RpZmllZCBhbnkgc3RhdGUgdGhhdCBzaG91bGQgdHJpZ2dlciBhIHNuYXBzaG90LiAqLyAgICBnZXQgaigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyB0aGUgcmVzdW1lIHRva2VuIHRvIHRoZSBUYXJnZXRDaGFuZ2UsIGJ1dCBvbmx5IHdoZW4gaXQgaGFzIGEgbmV3XG4gICAgICogdmFsdWUuIEVtcHR5IHJlc3VtZVRva2VucyBhcmUgZGlzY2FyZGVkLlxuICAgICAqLyAgICBXKHQpIHtcbiAgICAgICAgdC5hcHByb3hpbWF0ZUJ5dGVTaXplKCkgPiAwICYmICh0aGlzLnEgPSAhMCwgdGhpcy5CID0gdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSB0YXJnZXQgY2hhbmdlIGZyb20gdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBUbyByZXNldCB0aGUgZG9jdW1lbnQgY2hhbmdlcyBhZnRlciByYWlzaW5nIHRoaXMgc25hcHNob3QsIGNhbGxcbiAgICAgKiBgY2xlYXJQZW5kaW5nQ2hhbmdlcygpYC5cbiAgICAgKi8gICAgRygpIHtcbiAgICAgICAgbGV0IHQgPSBTbigpLCBlID0gU24oKSwgbiA9IFNuKCk7XG4gICAgICAgIHJldHVybiB0aGlzLkwuZm9yRWFjaCgoKHMsIGkpID0+IHtcbiAgICAgICAgICAgIHN3aXRjaCAoaSkge1xuICAgICAgICAgICAgICBjYXNlIDAgLyogQWRkZWQgKi8gOlxuICAgICAgICAgICAgICAgIHQgPSB0LmFkZChzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDIgLyogTW9kaWZpZWQgKi8gOlxuICAgICAgICAgICAgICAgIGUgPSBlLmFkZChzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDEgLyogUmVtb3ZlZCAqLyA6XG4gICAgICAgICAgICAgICAgbiA9IG4uYWRkKHMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgTCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSksIG5ldyBrbih0aGlzLkIsIHRoaXMuVSwgdCwgZSwgbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgZG9jdW1lbnQgY2hhbmdlcyBhbmQgc2V0cyBgaGFzUGVuZGluZ0NoYW5nZXNgIHRvIGZhbHNlLlxuICAgICAqLyAgICBIKCkge1xuICAgICAgICB0aGlzLnEgPSAhMSwgdGhpcy5MID0gQm4oKTtcbiAgICB9XG4gICAgSih0LCBlKSB7XG4gICAgICAgIHRoaXMucSA9ICEwLCB0aGlzLkwgPSB0aGlzLkwuaW5zZXJ0KHQsIGUpO1xuICAgIH1cbiAgICBZKHQpIHtcbiAgICAgICAgdGhpcy5xID0gITAsIHRoaXMuTCA9IHRoaXMuTC5yZW1vdmUodCk7XG4gICAgfVxuICAgIFgoKSB7XG4gICAgICAgIHRoaXMuTSArPSAxO1xuICAgIH1cbiAgICBaKCkge1xuICAgICAgICB0aGlzLk0gLT0gMTtcbiAgICB9XG4gICAgdHQoKSB7XG4gICAgICAgIHRoaXMucSA9ICEwLCB0aGlzLlUgPSAhMDtcbiAgICB9XG59XG5cbi8qKlxuICogQSBoZWxwZXIgY2xhc3MgdG8gYWNjdW11bGF0ZSB3YXRjaCBjaGFuZ2VzIGludG8gYSBSZW1vdGVFdmVudC5cbiAqL1xuY2xhc3MgTW4ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5ldCA9IHQsIFxuICAgICAgICAvKiogVGhlIGludGVybmFsIHN0YXRlIG9mIGFsbCB0cmFja2VkIHRhcmdldHMuICovXG4gICAgICAgIHRoaXMubnQgPSBuZXcgTWFwLCBcbiAgICAgICAgLyoqIEtlZXBzIHRyYWNrIG9mIHRoZSBkb2N1bWVudHMgdG8gdXBkYXRlIHNpbmNlIHRoZSBsYXN0IHJhaXNlZCBzbmFwc2hvdC4gKi9cbiAgICAgICAgdGhpcy5zdCA9IEFuKCksIFxuICAgICAgICAvKiogQSBtYXBwaW5nIG9mIGRvY3VtZW50IGtleXMgdG8gdGhlaXIgc2V0IG9mIHRhcmdldCBJRHMuICovXG4gICAgICAgIHRoaXMuaXQgPSBMbigpLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbGlzdCBvZiB0YXJnZXRzIHdpdGggZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaGVzLiBUaGVzZSB0YXJnZXRzIGFyZVxuICAgICAgICAgKiBrbm93biB0byBiZSBpbmNvbnNpc3RlbnQgYW5kIHRoZWlyIGxpc3RlbnMgbmVlZHMgdG8gYmUgcmUtZXN0YWJsaXNoZWQgYnlcbiAgICAgICAgICogUmVtb3RlU3RvcmUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJ0ID0gbmV3IFRuKGl0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJvY2Vzc2VzIGFuZCBhZGRzIHRoZSBEb2N1bWVudFdhdGNoQ2hhbmdlIHRvIHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzLlxuICAgICAqLyAgICBvdCh0KSB7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0LiQpIHQuRiAmJiB0LkYuaXNGb3VuZERvY3VtZW50KCkgPyB0aGlzLmF0KGUsIHQuRikgOiB0aGlzLmN0KGUsIHQua2V5LCB0LkYpO1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdC5yZW1vdmVkVGFyZ2V0SWRzKSB0aGlzLmN0KGUsIHQua2V5LCB0LkYpO1xuICAgIH1cbiAgICAvKiogUHJvY2Vzc2VzIGFuZCBhZGRzIHRoZSBXYXRjaFRhcmdldENoYW5nZSB0byB0aGUgY3VycmVudCBzZXQgb2YgY2hhbmdlcy4gKi8gICAgdXQodCkge1xuICAgICAgICB0aGlzLmZvckVhY2hUYXJnZXQodCwgKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuaHQoZSk7XG4gICAgICAgICAgICBzd2l0Y2ggKHQuc3RhdGUpIHtcbiAgICAgICAgICAgICAgY2FzZSAwIC8qIE5vQ2hhbmdlICovIDpcbiAgICAgICAgICAgICAgICB0aGlzLmx0KGUpICYmIG4uVyh0LnJlc3VtZVRva2VuKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDEgLyogQWRkZWQgKi8gOlxuICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gZGVjcmVtZW50IHRoZSBudW1iZXIgb2YgcGVuZGluZyBhY2tzIG5lZWRlZCBmcm9tIHdhdGNoXG4gICAgICAgICAgICAgICAgLy8gZm9yIHRoaXMgdGFyZ2V0SWQuXG4gICAgICAgICAgICAgICAgbi5aKCksIG4uSyB8fCBcbiAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIGEgZnJlc2hseSBhZGRlZCB0YXJnZXQsIHNvIHdlIG5lZWQgdG8gcmVzZXQgYW55IHN0YXRlXG4gICAgICAgICAgICAgICAgLy8gdGhhdCB3ZSBoYWQgcHJldmlvdXNseS4gVGhpcyBjYW4gaGFwcGVuIGUuZy4gd2hlbiByZW1vdmUgYW5kIGFkZFxuICAgICAgICAgICAgICAgIC8vIGJhY2sgYSB0YXJnZXQgZm9yIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2hlcy5cbiAgICAgICAgICAgICAgICBuLkgoKSwgbi5XKHQucmVzdW1lVG9rZW4pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMiAvKiBSZW1vdmVkICovIDpcbiAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGtlZXAgdHJhY2sgb2YgcmVtb3ZlZCB0YXJnZXRzIHRvIHdlIGNhbiBwb3N0LWZpbHRlciBhbmRcbiAgICAgICAgICAgICAgICAvLyByZW1vdmUgYW55IHRhcmdldCBjaGFuZ2VzLlxuICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gZGVjcmVtZW50IHRoZSBudW1iZXIgb2YgcGVuZGluZyBhY2tzIG5lZWRlZCBmcm9tIHdhdGNoXG4gICAgICAgICAgICAgICAgLy8gZm9yIHRoaXMgdGFyZ2V0SWQuXG4gICAgICAgICAgICAgICAgbi5aKCksIG4uSyB8fCB0aGlzLnJlbW92ZVRhcmdldChlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDMgLyogQ3VycmVudCAqLyA6XG4gICAgICAgICAgICAgICAgdGhpcy5sdChlKSAmJiAobi50dCgpLCBuLlcodC5yZXN1bWVUb2tlbikpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgNCAvKiBSZXNldCAqLyA6XG4gICAgICAgICAgICAgICAgdGhpcy5sdChlKSAmJiAoXG4gICAgICAgICAgICAgICAgLy8gUmVzZXQgdGhlIHRhcmdldCBhbmQgc3ludGhlc2l6ZXMgcmVtb3ZlcyBmb3IgYWxsIGV4aXN0aW5nXG4gICAgICAgICAgICAgICAgLy8gZG9jdW1lbnRzLiBUaGUgYmFja2VuZCB3aWxsIHJlLWFkZCBhbnkgZG9jdW1lbnRzIHRoYXQgc3RpbGxcbiAgICAgICAgICAgICAgICAvLyBtYXRjaCB0aGUgdGFyZ2V0IGJlZm9yZSBpdCBzZW5kcyB0aGUgbmV4dCBnbG9iYWwgc25hcHNob3QuXG4gICAgICAgICAgICAgICAgdGhpcy5mdChlKSwgbi5XKHQucmVzdW1lVG9rZW4pKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIEwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGFsbCB0YXJnZXRJZHMgdGhhdCB0aGUgd2F0Y2ggY2hhbmdlIGFwcGxpZXMgdG86IGVpdGhlciB0aGVcbiAgICAgKiB0YXJnZXRJZHMgZXhwbGljaXRseSBsaXN0ZWQgaW4gdGhlIGNoYW5nZSBvciB0aGUgdGFyZ2V0SWRzIG9mIGFsbCBjdXJyZW50bHlcbiAgICAgKiBhY3RpdmUgdGFyZ2V0cy5cbiAgICAgKi8gICAgZm9yRWFjaFRhcmdldCh0LCBlKSB7XG4gICAgICAgIHQudGFyZ2V0SWRzLmxlbmd0aCA+IDAgPyB0LnRhcmdldElkcy5mb3JFYWNoKGUpIDogdGhpcy5udC5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgdGhpcy5sdChuKSAmJiBlKG4pO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgZXhpc3RlbmNlIGZpbHRlcnMgYW5kIHN5bnRoZXNpemVzIGRlbGV0ZXMgZm9yIGZpbHRlciBtaXNtYXRjaGVzLlxuICAgICAqIFRhcmdldHMgdGhhdCBhcmUgaW52YWxpZGF0ZWQgYnkgZmlsdGVyIG1pc21hdGNoZXMgYXJlIGFkZGVkIHRvXG4gICAgICogYHBlbmRpbmdUYXJnZXRSZXNldHNgLlxuICAgICAqLyAgICBkdCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LnRhcmdldElkLCBuID0gdC5PLmNvdW50LCBzID0gdGhpcy53dChlKTtcbiAgICAgICAgaWYgKHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBzLnRhcmdldDtcbiAgICAgICAgICAgIGlmIChYdCh0KSkgaWYgKDAgPT09IG4pIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgZXhpc3RlbmNlIGZpbHRlciB0b2xkIHVzIHRoZSBkb2N1bWVudCBkb2VzIG5vdCBleGlzdC4gV2UgZGVkdWNlXG4gICAgICAgICAgICAgICAgLy8gdGhhdCB0aGlzIGRvY3VtZW50IGRvZXMgbm90IGV4aXN0IGFuZCBhcHBseSBhIGRlbGV0ZWQgZG9jdW1lbnQgdG9cbiAgICAgICAgICAgICAgICAvLyBvdXIgdXBkYXRlcy4gV2l0aG91dCBhcHBseWluZyB0aGlzIGRlbGV0ZWQgZG9jdW1lbnQgdGhlcmUgbWlnaHQgYmVcbiAgICAgICAgICAgICAgICAvLyBhbm90aGVyIHF1ZXJ5IHRoYXQgd2lsbCByYWlzZSB0aGlzIGRvY3VtZW50IGFzIHBhcnQgb2YgYSBzbmFwc2hvdFxuICAgICAgICAgICAgICAgIC8vIHVudGlsIGl0IGlzIHJlc29sdmVkLCBlc3NlbnRpYWxseSBleHBvc2luZyBpbmNvbnNpc3RlbmN5IGJldHdlZW5cbiAgICAgICAgICAgICAgICAvLyBxdWVyaWVzLlxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgU3QodC5wYXRoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmN0KGUsIG4sIFd0Lm5ld05vRG9jdW1lbnQobiwgY3QubWluKCkpKTtcbiAgICAgICAgICAgIH0gZWxzZSBCKDEgPT09IG4pOyBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl90KGUpICE9PSBuICYmIChcbiAgICAgICAgICAgICAgICAvLyBFeGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoOiBXZSByZXNldCB0aGUgbWFwcGluZyBhbmQgcmFpc2UgYSBuZXdcbiAgICAgICAgICAgICAgICAvLyBzbmFwc2hvdCB3aXRoIGBpc0Zyb21DYWNoZTp0cnVlYC5cbiAgICAgICAgICAgICAgICB0aGlzLmZ0KGUpLCB0aGlzLnJ0ID0gdGhpcy5ydC5hZGQoZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoZSBjdXJyZW50bHkgYWNjdW11bGF0ZWQgc3RhdGUgaW50byBhIHJlbW90ZSBldmVudCBhdCB0aGVcbiAgICAgKiBwcm92aWRlZCBzbmFwc2hvdCB2ZXJzaW9uLiBSZXNldHMgdGhlIGFjY3VtdWxhdGVkIGNoYW5nZXMgYmVmb3JlIHJldHVybmluZy5cbiAgICAgKi8gICAgZ3QodCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IE1hcDtcbiAgICAgICAgdGhpcy5udC5mb3JFYWNoKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMud3Qocyk7XG4gICAgICAgICAgICBpZiAoaSkge1xuICAgICAgICAgICAgICAgIGlmIChuLmN1cnJlbnQgJiYgWHQoaS50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIERvY3VtZW50IHF1ZXJpZXMgZm9yIGRvY3VtZW50IHRoYXQgZG9uJ3QgZXhpc3QgY2FuIHByb2R1Y2UgYW4gZW1wdHlcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVzdWx0IHNldC4gVG8gdXBkYXRlIG91ciBsb2NhbCBjYWNoZSwgd2Ugc3ludGhlc2l6ZSBhIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBpZiB3ZSBoYXZlIG5vdCBwcmV2aW91c2x5IHJlY2VpdmVkIHRoZSBkb2N1bWVudC4gVGhpc1xuICAgICAgICAgICAgICAgICAgICAvLyByZXNvbHZlcyB0aGUgbGltYm8gc3RhdGUgb2YgdGhlIGRvY3VtZW50LCByZW1vdmluZyBpdCBmcm9tXG4gICAgICAgICAgICAgICAgICAgIC8vIGxpbWJvRG9jdW1lbnRSZWZzLlxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IElkZWFsbHkgd2Ugd291bGQgaGF2ZSBhbiBleHBsaWNpdCBsb29rdXAgdGFyZ2V0XG4gICAgICAgICAgICAgICAgICAgIC8vIGluc3RlYWQgcmVzdWx0aW5nIGluIGFuIGV4cGxpY2l0IGRlbGV0ZSBtZXNzYWdlIGFuZCB3ZSBjb3VsZFxuICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgdGhpcyBzcGVjaWFsIGxvZ2ljLlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gbmV3IFN0KGkudGFyZ2V0LnBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBudWxsICE9PSB0aGlzLnN0LmdldChlKSB8fCB0aGlzLnl0KHMsIGUpIHx8IHRoaXMuY3QocywgZSwgV3QubmV3Tm9Eb2N1bWVudChlLCB0KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG4uaiAmJiAoZS5zZXQocywgbi5HKCkpLCBuLkgoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgbGV0IG4gPSBTbigpO1xuICAgICAgICAvLyBXZSBleHRyYWN0IHRoZSBzZXQgb2YgbGltYm8tb25seSBkb2N1bWVudCB1cGRhdGVzIGFzIHRoZSBHQyBsb2dpY1xuICAgICAgICAvLyBzcGVjaWFsLWNhc2VzIGRvY3VtZW50cyB0aGF0IGRvIG5vdCBhcHBlYXIgaW4gdGhlIHRhcmdldCBjYWNoZS5cbiAgICAgICAgXG4gICAgICAgIC8vIFRPRE8oZ3NvbHRpcyk6IEV4cGFuZCBvbiB0aGlzIGNvbW1lbnQgb25jZSBHQyBpcyBhdmFpbGFibGUgaW4gdGhlIEpTXG4gICAgICAgIC8vIGNsaWVudC5cbiAgICAgICAgICAgICAgICB0aGlzLml0LmZvckVhY2goKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBsZXQgcyA9ICEwO1xuICAgICAgICAgICAgZS5mb3JFYWNoV2hpbGUoKHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLnd0KHQpO1xuICAgICAgICAgICAgICAgIHJldHVybiAhZSB8fCAyIC8qIExpbWJvUmVzb2x1dGlvbiAqLyA9PT0gZS5wdXJwb3NlIHx8IChzID0gITEsICExKTtcbiAgICAgICAgICAgIH0pKSwgcyAmJiAobiA9IG4uYWRkKHQpKTtcbiAgICAgICAgfSkpO1xuICAgICAgICBjb25zdCBzID0gbmV3IE5uKHQsIGUsIHRoaXMucnQsIHRoaXMuc3QsIG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5zdCA9IEFuKCksIHRoaXMuaXQgPSBMbigpLCB0aGlzLnJ0ID0gbmV3IFRuKGl0KSwgcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyB0aGUgcHJvdmlkZWQgZG9jdW1lbnQgdG8gdGhlIGludGVybmFsIGxpc3Qgb2YgZG9jdW1lbnQgdXBkYXRlcyBhbmRcbiAgICAgKiBpdHMgZG9jdW1lbnQga2V5IHRvIHRoZSBnaXZlbiB0YXJnZXQncyBtYXBwaW5nLlxuICAgICAqL1xuICAgIC8vIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gICAgYXQodCwgZSkge1xuICAgICAgICBpZiAoIXRoaXMubHQodCkpIHJldHVybjtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMueXQodCwgZS5rZXkpID8gMiAvKiBNb2RpZmllZCAqLyA6IDAgLyogQWRkZWQgKi87XG4gICAgICAgIHRoaXMuaHQodCkuSihlLmtleSwgbiksIHRoaXMuc3QgPSB0aGlzLnN0Lmluc2VydChlLmtleSwgZSksIHRoaXMuaXQgPSB0aGlzLml0Lmluc2VydChlLmtleSwgdGhpcy5UdChlLmtleSkuYWRkKHQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgcHJvdmlkZWQgZG9jdW1lbnQgZnJvbSB0aGUgdGFyZ2V0IG1hcHBpbmcuIElmIHRoZVxuICAgICAqIGRvY3VtZW50IG5vIGxvbmdlciBtYXRjaGVzIHRoZSB0YXJnZXQsIGJ1dCB0aGUgZG9jdW1lbnQncyBzdGF0ZSBpcyBzdGlsbFxuICAgICAqIGtub3duIChlLmcuIHdlIGtub3cgdGhhdCB0aGUgZG9jdW1lbnQgd2FzIGRlbGV0ZWQgb3Igd2UgcmVjZWl2ZWQgdGhlIGNoYW5nZVxuICAgICAqIHRoYXQgY2F1c2VkIHRoZSBmaWx0ZXIgbWlzbWF0Y2gpLCB0aGUgbmV3IGRvY3VtZW50IGNhbiBiZSBwcm92aWRlZFxuICAgICAqIHRvIHVwZGF0ZSB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlLlxuICAgICAqL1xuICAgIC8vIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gICAgY3QodCwgZSwgbikge1xuICAgICAgICBpZiAoIXRoaXMubHQodCkpIHJldHVybjtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuaHQodCk7XG4gICAgICAgIHRoaXMueXQodCwgZSkgPyBzLkooZSwgMSAvKiBSZW1vdmVkICovKSA6IFxuICAgICAgICAvLyBUaGUgZG9jdW1lbnQgbWF5IGhhdmUgZW50ZXJlZCBhbmQgbGVmdCB0aGUgdGFyZ2V0IGJlZm9yZSB3ZSByYWlzZWQgYVxuICAgICAgICAvLyBzbmFwc2hvdCwgc28gd2UgY2FuIGp1c3QgaWdub3JlIHRoZSBjaGFuZ2UuXG4gICAgICAgIHMuWShlKSwgdGhpcy5pdCA9IHRoaXMuaXQuaW5zZXJ0KGUsIHRoaXMuVHQoZSkuZGVsZXRlKHQpKSwgbiAmJiAodGhpcy5zdCA9IHRoaXMuc3QuaW5zZXJ0KGUsIG4pKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0KHQpIHtcbiAgICAgICAgdGhpcy5udC5kZWxldGUodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgY291bnQgb2YgZG9jdW1lbnRzIGluIHRoZSB0YXJnZXQuIFRoaXMgaW5jbHVkZXMgYm90aFxuICAgICAqIHRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHRoYXQgdGhlIExvY2FsU3RvcmUgY29uc2lkZXJzIHRvIGJlIHBhcnQgb2YgdGhlXG4gICAgICogdGFyZ2V0IGFzIHdlbGwgYXMgYW55IGFjY3VtdWxhdGVkIGNoYW5nZXMuXG4gICAgICovICAgIF90KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuaHQodCkuRygpO1xuICAgICAgICByZXR1cm4gdGhpcy5ldC5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KHQpLnNpemUgKyBlLmFkZGVkRG9jdW1lbnRzLnNpemUgLSBlLnJlbW92ZWREb2N1bWVudHMuc2l6ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5jcmVtZW50IHRoZSBudW1iZXIgb2YgYWNrcyBuZWVkZWQgZnJvbSB3YXRjaCBiZWZvcmUgd2UgY2FuIGNvbnNpZGVyIHRoZVxuICAgICAqIHNlcnZlciB0byBiZSAnaW4tc3luYycgd2l0aCB0aGUgY2xpZW50J3MgYWN0aXZlIHRhcmdldHMuXG4gICAgICovICAgIFgodCkge1xuICAgICAgICB0aGlzLmh0KHQpLlgoKTtcbiAgICB9XG4gICAgaHQodCkge1xuICAgICAgICBsZXQgZSA9IHRoaXMubnQuZ2V0KHQpO1xuICAgICAgICByZXR1cm4gZSB8fCAoZSA9IG5ldyBPbiwgdGhpcy5udC5zZXQodCwgZSkpLCBlO1xuICAgIH1cbiAgICBUdCh0KSB7XG4gICAgICAgIGxldCBlID0gdGhpcy5pdC5nZXQodCk7XG4gICAgICAgIHJldHVybiBlIHx8IChlID0gbmV3IFRuKGl0KSwgdGhpcy5pdCA9IHRoaXMuaXQuaW5zZXJ0KHQsIGUpKSwgZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVmVyaWZpZXMgdGhhdCB0aGUgdXNlciBpcyBzdGlsbCBpbnRlcmVzdGVkIGluIHRoaXMgdGFyZ2V0IChieSBjYWxsaW5nXG4gICAgICogYGdldFRhcmdldERhdGFGb3JUYXJnZXQoKWApIGFuZCB0aGF0IHdlIGFyZSBub3Qgd2FpdGluZyBmb3IgcGVuZGluZyBBRERzXG4gICAgICogZnJvbSB3YXRjaC5cbiAgICAgKi8gICAgbHQodCkge1xuICAgICAgICBjb25zdCBlID0gbnVsbCAhPT0gdGhpcy53dCh0KTtcbiAgICAgICAgcmV0dXJuIGUgfHwgJChcIldhdGNoQ2hhbmdlQWdncmVnYXRvclwiLCBcIkRldGVjdGVkIGluYWN0aXZlIHRhcmdldFwiLCB0KSwgZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgVGFyZ2V0RGF0YSBmb3IgYW4gYWN0aXZlIHRhcmdldCAoaS5lLiBhIHRhcmdldCB0aGF0IHRoZSB1c2VyXG4gICAgICogaXMgc3RpbGwgaW50ZXJlc3RlZCBpbiB0aGF0IGhhcyBubyBvdXRzdGFuZGluZyB0YXJnZXQgY2hhbmdlIHJlcXVlc3RzKS5cbiAgICAgKi8gICAgd3QodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5udC5nZXQodCk7XG4gICAgICAgIHJldHVybiBlICYmIGUuSyA/IG51bGwgOiB0aGlzLmV0LkV0KHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIHN0YXRlIG9mIGEgV2F0Y2ggdGFyZ2V0IHRvIGl0cyBpbml0aWFsIHN0YXRlIChlLmcuIHNldHNcbiAgICAgKiAnY3VycmVudCcgdG8gZmFsc2UsIGNsZWFycyB0aGUgcmVzdW1lIHRva2VuIGFuZCByZW1vdmVzIGl0cyB0YXJnZXQgbWFwcGluZ1xuICAgICAqIGZyb20gYWxsIGRvY3VtZW50cykuXG4gICAgICovICAgIGZ0KHQpIHtcbiAgICAgICAgdGhpcy5udC5zZXQodCwgbmV3IE9uKTtcbiAgICAgICAgdGhpcy5ldC5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KHQpLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5jdCh0LCBlLCAvKnVwZGF0ZWREb2N1bWVudD0qLyBudWxsKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIExvY2FsU3RvcmUgY29uc2lkZXJzIHRoZSBkb2N1bWVudCB0byBiZSBwYXJ0IG9mIHRoZVxuICAgICAqIHNwZWNpZmllZCB0YXJnZXQuXG4gICAgICovICAgIHl0KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXQuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCh0KS5oYXMoZSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBMbigpIHtcbiAgICByZXR1cm4gbmV3IGduKFN0LmNvbXBhcmF0b3IpO1xufVxuXG5mdW5jdGlvbiBCbigpIHtcbiAgICByZXR1cm4gbmV3IGduKFN0LmNvbXBhcmF0b3IpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBVbiA9ICgoKSA9PiB7XG4gICAgY29uc3QgdCA9IHtcbiAgICAgICAgYXNjOiBcIkFTQ0VORElOR1wiLFxuICAgICAgICBkZXNjOiBcIkRFU0NFTkRJTkdcIlxuICAgIH07XG4gICAgcmV0dXJuIHQ7XG59KSgpLCBxbiA9ICgoKSA9PiB7XG4gICAgY29uc3QgdCA9IHtcbiAgICAgICAgXCI8XCI6IFwiTEVTU19USEFOXCIsXG4gICAgICAgIFwiPD1cIjogXCJMRVNTX1RIQU5fT1JfRVFVQUxcIixcbiAgICAgICAgXCI+XCI6IFwiR1JFQVRFUl9USEFOXCIsXG4gICAgICAgIFwiPj1cIjogXCJHUkVBVEVSX1RIQU5fT1JfRVFVQUxcIixcbiAgICAgICAgXCI9PVwiOiBcIkVRVUFMXCIsXG4gICAgICAgIFwiIT1cIjogXCJOT1RfRVFVQUxcIixcbiAgICAgICAgXCJhcnJheS1jb250YWluc1wiOiBcIkFSUkFZX0NPTlRBSU5TXCIsXG4gICAgICAgIGluOiBcIklOXCIsXG4gICAgICAgIFwibm90LWluXCI6IFwiTk9UX0lOXCIsXG4gICAgICAgIFwiYXJyYXktY29udGFpbnMtYW55XCI6IFwiQVJSQVlfQ09OVEFJTlNfQU5ZXCJcbiAgICB9O1xuICAgIHJldHVybiB0O1xufSkoKTtcblxuLyoqXG4gKiBUaGlzIGNsYXNzIGdlbmVyYXRlcyBKc29uT2JqZWN0IHZhbHVlcyBmb3IgdGhlIERhdGFzdG9yZSBBUEkgc3VpdGFibGUgZm9yXG4gKiBzZW5kaW5nIHRvIGVpdGhlciBHUlBDIHN0dWIgbWV0aG9kcyBvciB2aWEgdGhlIEpTT04vSFRUUCBSRVNUIEFQSS5cbiAqXG4gKiBUaGUgc2VyaWFsaXplciBzdXBwb3J0cyBib3RoIFByb3RvYnVmLmpzIGFuZCBQcm90bzMgSlNPTiBmb3JtYXRzLiBCeVxuICogc2V0dGluZyBgdXNlUHJvdG8zSnNvbmAgdG8gdHJ1ZSwgdGhlIHNlcmlhbGl6ZXIgd2lsbCB1c2UgdGhlIFByb3RvMyBKU09OXG4gKiBmb3JtYXQuXG4gKlxuICogRm9yIGEgZGVzY3JpcHRpb24gb2YgdGhlIFByb3RvMyBKU09OIGZvcm1hdCBjaGVja1xuICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vcHJvdG9jb2wtYnVmZmVycy9kb2NzL3Byb3RvMyNqc29uXG4gKlxuICogVE9ETyhrbGltdCk6IFdlIGNhbiByZW1vdmUgdGhlIGRhdGFiYXNlSWQgYXJndW1lbnQgaWYgd2Uga2VlcCB0aGUgZnVsbFxuICogcmVzb3VyY2UgbmFtZSBpbiBkb2N1bWVudHMuXG4gKi9cbmNsYXNzIEtuIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZGF0YWJhc2VJZCA9IHQsIHRoaXMuQyA9IGU7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSB2YWx1ZSBmb3IgYSBEYXRlIHRoYXQncyBhcHByb3ByaWF0ZSB0byBwdXQgaW50byBhIHByb3RvLlxuICovXG5mdW5jdGlvbiBqbih0LCBlKSB7XG4gICAgaWYgKHQuQykge1xuICAgICAgICByZXR1cm4gYCR7bmV3IERhdGUoMWUzICogZS5zZWNvbmRzKS50b0lTT1N0cmluZygpLnJlcGxhY2UoL1xcLlxcZCovLCBcIlwiKS5yZXBsYWNlKFwiWlwiLCBcIlwiKX0uJHsoXCIwMDAwMDAwMDBcIiArIGUubmFub3NlY29uZHMpLnNsaWNlKC05KX1aYDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2Vjb25kczogXCJcIiArIGUuc2Vjb25kcyxcbiAgICAgICAgbmFub3M6IGUubmFub3NlY29uZHNcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSB2YWx1ZSBmb3IgYnl0ZXMgdGhhdCdzIGFwcHJvcHJpYXRlIHRvIHB1dCBpbiBhIHByb3RvLlxuICpcbiAqIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gKi9cbmZ1bmN0aW9uIFFuKHQsIGUpIHtcbiAgICByZXR1cm4gdC5DID8gZS50b0Jhc2U2NCgpIDogZS50b1VpbnQ4QXJyYXkoKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgQnl0ZVN0cmluZyBiYXNlZCBvbiB0aGUgcHJvdG8gc3RyaW5nIHZhbHVlLlxuICovIGZ1bmN0aW9uIFduKHQsIGUpIHtcbiAgICByZXR1cm4gam4odCwgZS50b1RpbWVzdGFtcCgpKTtcbn1cblxuZnVuY3Rpb24gR24odCkge1xuICAgIHJldHVybiBCKCEhdCksIGN0LmZyb21UaW1lc3RhbXAoZnVuY3Rpb24odCkge1xuICAgICAgICBjb25zdCBlID0gVHQodCk7XG4gICAgICAgIHJldHVybiBuZXcgYXQoZS5zZWNvbmRzLCBlLm5hbm9zKTtcbiAgICB9KHQpKTtcbn1cblxuZnVuY3Rpb24gem4odCwgZSkge1xuICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgZHQoWyBcInByb2plY3RzXCIsIHQucHJvamVjdElkLCBcImRhdGFiYXNlc1wiLCB0LmRhdGFiYXNlIF0pO1xuICAgIH0odCkuY2hpbGQoXCJkb2N1bWVudHNcIikuY2hpbGQoZSkuY2Fub25pY2FsU3RyaW5nKCk7XG59XG5cbmZ1bmN0aW9uIEhuKHQpIHtcbiAgICBjb25zdCBlID0gZHQuZnJvbVN0cmluZyh0KTtcbiAgICByZXR1cm4gQihBcyhlKSksIGU7XG59XG5cbmZ1bmN0aW9uIEpuKHQsIGUpIHtcbiAgICByZXR1cm4gem4odC5kYXRhYmFzZUlkLCBlLnBhdGgpO1xufVxuXG5mdW5jdGlvbiBZbih0LCBlKSB7XG4gICAgY29uc3QgbiA9IEhuKGUpO1xuICAgIGlmIChuLmdldCgxKSAhPT0gdC5kYXRhYmFzZUlkLnByb2plY3RJZCkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIlRyaWVkIHRvIGRlc2VyaWFsaXplIGtleSBmcm9tIGRpZmZlcmVudCBwcm9qZWN0OiBcIiArIG4uZ2V0KDEpICsgXCIgdnMgXCIgKyB0LmRhdGFiYXNlSWQucHJvamVjdElkKTtcbiAgICBpZiAobi5nZXQoMykgIT09IHQuZGF0YWJhc2VJZC5kYXRhYmFzZSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIlRyaWVkIHRvIGRlc2VyaWFsaXplIGtleSBmcm9tIGRpZmZlcmVudCBkYXRhYmFzZTogXCIgKyBuLmdldCgzKSArIFwiIHZzIFwiICsgdC5kYXRhYmFzZUlkLmRhdGFiYXNlKTtcbiAgICByZXR1cm4gbmV3IFN0KGVzKG4pKTtcbn1cblxuZnVuY3Rpb24gWG4odCwgZSkge1xuICAgIHJldHVybiB6bih0LmRhdGFiYXNlSWQsIGUpO1xufVxuXG5mdW5jdGlvbiBabih0KSB7XG4gICAgY29uc3QgZSA9IEhuKHQpO1xuICAgIC8vIEluIHYxYmV0YTEgcXVlcmllcyBmb3IgY29sbGVjdGlvbnMgYXQgdGhlIHJvb3QgZGlkIG5vdCBoYXZlIGEgdHJhaWxpbmdcbiAgICAvLyBcIi9kb2N1bWVudHNcIi4gSW4gdjEgYWxsIHJlc291cmNlIHBhdGhzIGNvbnRhaW4gXCIvZG9jdW1lbnRzXCIuIFByZXNlcnZlIHRoZVxuICAgIC8vIGFiaWxpdHkgdG8gcmVhZCB0aGUgdjFiZXRhMSBmb3JtIGZvciBjb21wYXRpYmlsaXR5IHdpdGggcXVlcmllcyBwZXJzaXN0ZWRcbiAgICAvLyBpbiB0aGUgbG9jYWwgdGFyZ2V0IGNhY2hlLlxuICAgICAgICByZXR1cm4gNCA9PT0gZS5sZW5ndGggPyBkdC5lbXB0eVBhdGgoKSA6IGVzKGUpO1xufVxuXG5mdW5jdGlvbiB0cyh0KSB7XG4gICAgcmV0dXJuIG5ldyBkdChbIFwicHJvamVjdHNcIiwgdC5kYXRhYmFzZUlkLnByb2plY3RJZCwgXCJkYXRhYmFzZXNcIiwgdC5kYXRhYmFzZUlkLmRhdGFiYXNlIF0pLmNhbm9uaWNhbFN0cmluZygpO1xufVxuXG5mdW5jdGlvbiBlcyh0KSB7XG4gICAgcmV0dXJuIEIodC5sZW5ndGggPiA0ICYmIFwiZG9jdW1lbnRzXCIgPT09IHQuZ2V0KDQpKSwgdC5wb3BGaXJzdCg1KTtcbn1cblxuLyoqIENyZWF0ZXMgYSBEb2N1bWVudCBwcm90byBmcm9tIGtleSBhbmQgZmllbGRzIChidXQgbm8gY3JlYXRlL3VwZGF0ZSB0aW1lKSAqLyBmdW5jdGlvbiBucyh0LCBlLCBuKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogSm4odCwgZSksXG4gICAgICAgIGZpZWxkczogbi52YWx1ZS5tYXBWYWx1ZS5maWVsZHNcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBzcyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IFluKHQsIGUubmFtZSksIGkgPSBHbihlLnVwZGF0ZVRpbWUpLCByID0gbmV3IGp0KHtcbiAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgIGZpZWxkczogZS5maWVsZHNcbiAgICAgICAgfVxuICAgIH0pLCBvID0gV3QubmV3Rm91bmREb2N1bWVudChzLCBpLCByKTtcbiAgICByZXR1cm4gbiAmJiBvLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpLCBuID8gby5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKSA6IG87XG59XG5cbmZ1bmN0aW9uIGlzKHQsIGUpIHtcbiAgICByZXR1cm4gXCJmb3VuZFwiIGluIGUgPyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIEIoISFlLmZvdW5kKSwgZS5mb3VuZC5uYW1lLCBlLmZvdW5kLnVwZGF0ZVRpbWU7XG4gICAgICAgIGNvbnN0IG4gPSBZbih0LCBlLmZvdW5kLm5hbWUpLCBzID0gR24oZS5mb3VuZC51cGRhdGVUaW1lKSwgaSA9IG5ldyBqdCh7XG4gICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgIGZpZWxkczogZS5mb3VuZC5maWVsZHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBXdC5uZXdGb3VuZERvY3VtZW50KG4sIHMsIGkpO1xuICAgIH0odCwgZSkgOiBcIm1pc3NpbmdcIiBpbiBlID8gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBCKCEhZS5taXNzaW5nKSwgQighIWUucmVhZFRpbWUpO1xuICAgICAgICBjb25zdCBuID0gWW4odCwgZS5taXNzaW5nKSwgcyA9IEduKGUucmVhZFRpbWUpO1xuICAgICAgICByZXR1cm4gV3QubmV3Tm9Eb2N1bWVudChuLCBzKTtcbiAgICB9KHQsIGUpIDogTCgpO1xufVxuXG5mdW5jdGlvbiBycyh0LCBlKSB7XG4gICAgbGV0IG47XG4gICAgaWYgKFwidGFyZ2V0Q2hhbmdlXCIgaW4gZSkge1xuICAgICAgICBlLnRhcmdldENoYW5nZTtcbiAgICAgICAgLy8gcHJvdG8zIGRlZmF1bHQgdmFsdWUgaXMgdW5zZXQgaW4gSlNPTiAodW5kZWZpbmVkKSwgc28gdXNlICdOT19DSEFOR0UnXG4gICAgICAgIC8vIGlmIHVuc2V0XG4gICAgICAgIGNvbnN0IHMgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gXCJOT19DSEFOR0VcIiA9PT0gdCA/IDAgLyogTm9DaGFuZ2UgKi8gOiBcIkFERFwiID09PSB0ID8gMSAvKiBBZGRlZCAqLyA6IFwiUkVNT1ZFXCIgPT09IHQgPyAyIC8qIFJlbW92ZWQgKi8gOiBcIkNVUlJFTlRcIiA9PT0gdCA/IDMgLyogQ3VycmVudCAqLyA6IFwiUkVTRVRcIiA9PT0gdCA/IDQgLyogUmVzZXQgKi8gOiBMKCk7XG4gICAgICAgIH0oZS50YXJnZXRDaGFuZ2UudGFyZ2V0Q2hhbmdlVHlwZSB8fCBcIk5PX0NIQU5HRVwiKSwgaSA9IGUudGFyZ2V0Q2hhbmdlLnRhcmdldElkcyB8fCBbXSwgciA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0LkMgPyAoQih2b2lkIDAgPT09IGUgfHwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSksIHl0LmZyb21CYXNlNjRTdHJpbmcoZSB8fCBcIlwiKSkgOiAoQih2b2lkIDAgPT09IGUgfHwgZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpLCBcbiAgICAgICAgICAgIHl0LmZyb21VaW50OEFycmF5KGUgfHwgbmV3IFVpbnQ4QXJyYXkpKTtcbiAgICAgICAgfSh0LCBlLnRhcmdldENoYW5nZS5yZXN1bWVUb2tlbiksIG8gPSBlLnRhcmdldENoYW5nZS5jYXVzZSwgYSA9IG8gJiYgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHZvaWQgMCA9PT0gdC5jb2RlID8gSy5VTktOT1dOIDogbW4odC5jb2RlKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgaihlLCB0Lm1lc3NhZ2UgfHwgXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGEgbnVtYmVyIChvciBudWxsKSB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGludG9cbiAqIGEgZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUgcHJvdG8uXG4gKiBETyBOT1QgVVNFIFRISVMgRk9SIEFOWVRISU5HIEVMU0UuXG4gKiBUaGlzIG1ldGhvZCBjaGVhdHMuIEl0J3MgdHlwZWQgYXMgcmV0dXJuaW5nIFwibnVtYmVyXCIgYmVjYXVzZSB0aGF0J3Mgd2hhdFxuICogb3VyIGdlbmVyYXRlZCBwcm90byBpbnRlcmZhY2VzIHNheSBJbnQzMlZhbHVlIG11c3QgYmUuIEJ1dCBHUlBDIGFjdHVhbGx5XG4gKiBleHBlY3RzIGEgeyB2YWx1ZTogPG51bWJlcj4gfSBzdHJ1Y3QuXG4gKi8gKG8pO1xuICAgICAgICBuID0gbmV3IEZuKHMsIGksIHIsIGEgfHwgbnVsbCk7XG4gICAgfSBlbHNlIGlmIChcImRvY3VtZW50Q2hhbmdlXCIgaW4gZSkge1xuICAgICAgICBlLmRvY3VtZW50Q2hhbmdlO1xuICAgICAgICBjb25zdCBzID0gZS5kb2N1bWVudENoYW5nZTtcbiAgICAgICAgcy5kb2N1bWVudCwgcy5kb2N1bWVudC5uYW1lLCBzLmRvY3VtZW50LnVwZGF0ZVRpbWU7XG4gICAgICAgIGNvbnN0IGkgPSBZbih0LCBzLmRvY3VtZW50Lm5hbWUpLCByID0gR24ocy5kb2N1bWVudC51cGRhdGVUaW1lKSwgbyA9IG5ldyBqdCh7XG4gICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgIGZpZWxkczogcy5kb2N1bWVudC5maWVsZHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksIGEgPSBXdC5uZXdGb3VuZERvY3VtZW50KGksIHIsIG8pLCBjID0gcy50YXJnZXRJZHMgfHwgW10sIHUgPSBzLnJlbW92ZWRUYXJnZXRJZHMgfHwgW107XG4gICAgICAgIG4gPSBuZXcgeG4oYywgdSwgYS5rZXksIGEpO1xuICAgIH0gZWxzZSBpZiAoXCJkb2N1bWVudERlbGV0ZVwiIGluIGUpIHtcbiAgICAgICAgZS5kb2N1bWVudERlbGV0ZTtcbiAgICAgICAgY29uc3QgcyA9IGUuZG9jdW1lbnREZWxldGU7XG4gICAgICAgIHMuZG9jdW1lbnQ7XG4gICAgICAgIGNvbnN0IGkgPSBZbih0LCBzLmRvY3VtZW50KSwgciA9IHMucmVhZFRpbWUgPyBHbihzLnJlYWRUaW1lKSA6IGN0Lm1pbigpLCBvID0gV3QubmV3Tm9Eb2N1bWVudChpLCByKSwgYSA9IHMucmVtb3ZlZFRhcmdldElkcyB8fCBbXTtcbiAgICAgICAgbiA9IG5ldyB4bihbXSwgYSwgby5rZXksIG8pO1xuICAgIH0gZWxzZSBpZiAoXCJkb2N1bWVudFJlbW92ZVwiIGluIGUpIHtcbiAgICAgICAgZS5kb2N1bWVudFJlbW92ZTtcbiAgICAgICAgY29uc3QgcyA9IGUuZG9jdW1lbnRSZW1vdmU7XG4gICAgICAgIHMuZG9jdW1lbnQ7XG4gICAgICAgIGNvbnN0IGkgPSBZbih0LCBzLmRvY3VtZW50KSwgciA9IHMucmVtb3ZlZFRhcmdldElkcyB8fCBbXTtcbiAgICAgICAgbiA9IG5ldyB4bihbXSwgciwgaSwgbnVsbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCEoXCJmaWx0ZXJcIiBpbiBlKSkgcmV0dXJuIEwoKTtcbiAgICAgICAge1xuICAgICAgICAgICAgZS5maWx0ZXI7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5maWx0ZXI7XG4gICAgICAgICAgICB0LnRhcmdldElkO1xuICAgICAgICAgICAgY29uc3QgcyA9IHQuY291bnQgfHwgMCwgaSA9IG5ldyBmbihzKSwgciA9IHQudGFyZ2V0SWQ7XG4gICAgICAgICAgICBuID0gbmV3ICRuKHIsIGkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuO1xufVxuXG5mdW5jdGlvbiBvcyh0LCBlKSB7XG4gICAgbGV0IG47XG4gICAgaWYgKGUgaW5zdGFuY2VvZiBybikgbiA9IHtcbiAgICAgICAgdXBkYXRlOiBucyh0LCBlLmtleSwgZS52YWx1ZSlcbiAgICB9OyBlbHNlIGlmIChlIGluc3RhbmNlb2YgaG4pIG4gPSB7XG4gICAgICAgIGRlbGV0ZTogSm4odCwgZS5rZXkpXG4gICAgfTsgZWxzZSBpZiAoZSBpbnN0YW5jZW9mIG9uKSBuID0ge1xuICAgICAgICB1cGRhdGU6IG5zKHQsIGUua2V5LCBlLmRhdGEpLFxuICAgICAgICB1cGRhdGVNYXNrOiBJcyhlLmZpZWxkTWFzaylcbiAgICB9OyBlbHNlIHtcbiAgICAgICAgaWYgKCEoZSBpbnN0YW5jZW9mIGxuKSkgcmV0dXJuIEwoKTtcbiAgICAgICAgbiA9IHtcbiAgICAgICAgICAgIHZlcmlmeTogSm4odCwgZS5rZXkpXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBlLmZpZWxkVHJhbnNmb3Jtcy5sZW5ndGggPiAwICYmIChuLnVwZGF0ZVRyYW5zZm9ybXMgPSBlLmZpZWxkVHJhbnNmb3Jtcy5tYXAoKHQgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZS50cmFuc2Zvcm07XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgTGUpIHJldHVybiB7XG4gICAgICAgICAgICBmaWVsZFBhdGg6IGUuZmllbGQuY2Fub25pY2FsU3RyaW5nKCksXG4gICAgICAgICAgICBzZXRUb1NlcnZlclZhbHVlOiBcIlJFUVVFU1RfVElNRVwiXG4gICAgICAgIH07XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgQmUpIHJldHVybiB7XG4gICAgICAgICAgICBmaWVsZFBhdGg6IGUuZmllbGQuY2Fub25pY2FsU3RyaW5nKCksXG4gICAgICAgICAgICBhcHBlbmRNaXNzaW5nRWxlbWVudHM6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZXM6IG4uZWxlbWVudHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG4gaW5zdGFuY2VvZiBxZSkgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpZWxkUGF0aDogZS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxcbiAgICAgICAgICAgIHJlbW92ZUFsbEZyb21BcnJheToge1xuICAgICAgICAgICAgICAgIHZhbHVlczogbi5lbGVtZW50c1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIGplKSByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiBlLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxuICAgICAgICAgICAgaW5jcmVtZW50OiBuLk5cbiAgICAgICAgfTtcbiAgICAgICAgdGhyb3cgTCgpO1xuICAgIH0oMCwgdCkpKSksIGUucHJlY29uZGl0aW9uLmlzTm9uZSB8fCAobi5jdXJyZW50RG9jdW1lbnQgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IGUudXBkYXRlVGltZSA/IHtcbiAgICAgICAgICAgIHVwZGF0ZVRpbWU6IFduKHQsIGUudXBkYXRlVGltZSlcbiAgICAgICAgfSA6IHZvaWQgMCAhPT0gZS5leGlzdHMgPyB7XG4gICAgICAgICAgICBleGlzdHM6IGUuZXhpc3RzXG4gICAgICAgIH0gOiBMKCk7XG4gICAgfSh0LCBlLnByZWNvbmRpdGlvbikpLCBuO1xufVxuXG5mdW5jdGlvbiBhcyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IGUuY3VycmVudERvY3VtZW50ID8gZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB0LnVwZGF0ZVRpbWUgPyBKZS51cGRhdGVUaW1lKEduKHQudXBkYXRlVGltZSkpIDogdm9pZCAwICE9PSB0LmV4aXN0cyA/IEplLmV4aXN0cyh0LmV4aXN0cykgOiBKZS5ub25lKCk7XG4gICAgfShlLmN1cnJlbnREb2N1bWVudCkgOiBKZS5ub25lKCksIHMgPSBlLnVwZGF0ZVRyYW5zZm9ybXMgPyBlLnVwZGF0ZVRyYW5zZm9ybXMubWFwKChlID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBudWxsO1xuICAgICAgICBpZiAoXCJzZXRUb1NlcnZlclZhbHVlXCIgaW4gZSkgQihcIlJFUVVFU1RfVElNRVwiID09PSBlLnNldFRvU2VydmVyVmFsdWUpLCBuID0gbmV3IExlOyBlbHNlIGlmIChcImFwcGVuZE1pc3NpbmdFbGVtZW50c1wiIGluIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLmFwcGVuZE1pc3NpbmdFbGVtZW50cy52YWx1ZXMgfHwgW107XG4gICAgICAgICAgICBuID0gbmV3IEJlKHQpO1xuICAgICAgICB9IGVsc2UgaWYgKFwicmVtb3ZlQWxsRnJvbUFycmF5XCIgaW4gZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUucmVtb3ZlQWxsRnJvbUFycmF5LnZhbHVlcyB8fCBbXTtcbiAgICAgICAgICAgIG4gPSBuZXcgcWUodCk7XG4gICAgICAgIH0gZWxzZSBcImluY3JlbWVudFwiIGluIGUgPyBuID0gbmV3IGplKHQsIGUuaW5jcmVtZW50KSA6IEwoKTtcbiAgICAgICAgY29uc3QgcyA9IF90LmZyb21TZXJ2ZXJGb3JtYXQoZS5maWVsZFBhdGgpO1xuICAgICAgICByZXR1cm4gbmV3IEdlKHMsIG4pO1xuICAgIH0odCwgZSkpKSA6IFtdO1xuICAgIGlmIChlLnVwZGF0ZSkge1xuICAgICAgICBlLnVwZGF0ZS5uYW1lO1xuICAgICAgICBjb25zdCBpID0gWW4odCwgZS51cGRhdGUubmFtZSksIHIgPSBuZXcganQoe1xuICAgICAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgICAgICBmaWVsZHM6IGUudXBkYXRlLmZpZWxkc1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGUudXBkYXRlTWFzaykge1xuICAgICAgICAgICAgY29uc3QgdCA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdC5maWVsZFBhdGhzIHx8IFtdO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgbXQoZS5tYXAoKHQgPT4gX3QuZnJvbVNlcnZlckZvcm1hdCh0KSkpKTtcbiAgICAgICAgICAgIH0oZS51cGRhdGVNYXNrKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgb24oaSwgciwgdCwgbiwgcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBybihpLCByLCBuLCBzKTtcbiAgICB9XG4gICAgaWYgKGUuZGVsZXRlKSB7XG4gICAgICAgIGNvbnN0IHMgPSBZbih0LCBlLmRlbGV0ZSk7XG4gICAgICAgIHJldHVybiBuZXcgaG4ocywgbik7XG4gICAgfVxuICAgIGlmIChlLnZlcmlmeSkge1xuICAgICAgICBjb25zdCBzID0gWW4odCwgZS52ZXJpZnkpO1xuICAgICAgICByZXR1cm4gbmV3IGxuKHMsIG4pO1xuICAgIH1cbiAgICByZXR1cm4gTCgpO1xufVxuXG5mdW5jdGlvbiBjcyh0LCBlKSB7XG4gICAgcmV0dXJuIHQgJiYgdC5sZW5ndGggPiAwID8gKEIodm9pZCAwICE9PSBlKSwgdC5tYXAoKHQgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAvLyBOT1RFOiBEZWxldGVzIGRvbid0IGhhdmUgYW4gdXBkYXRlVGltZS5cbiAgICAgICAgbGV0IG4gPSB0LnVwZGF0ZVRpbWUgPyBHbih0LnVwZGF0ZVRpbWUpIDogR24oZSk7XG4gICAgICAgIHJldHVybiBuLmlzRXF1YWwoY3QubWluKCkpICYmIChcbiAgICAgICAgLy8gVGhlIEZpcmVzdG9yZSBFbXVsYXRvciBjdXJyZW50bHkgcmV0dXJucyBhbiB1cGRhdGUgdGltZSBvZiAwIGZvclxuICAgICAgICAvLyBkZWxldGVzIG9mIG5vbi1leGlzdGluZyBkb2N1bWVudHMgKHJhdGhlciB0aGFuIG51bGwpLiBUaGlzIGJyZWFrcyB0aGVcbiAgICAgICAgLy8gdGVzdCBcImdldCBkZWxldGVkIGRvYyB3aGlsZSBvZmZsaW5lIHdpdGggc291cmNlPWNhY2hlXCIgYXMgTm9Eb2N1bWVudHNcbiAgICAgICAgLy8gd2l0aCB2ZXJzaW9uIDAgYXJlIGZpbHRlcmVkIGJ5IEluZGV4ZWREYidzIFJlbW90ZURvY3VtZW50Q2FjaGUuXG4gICAgICAgIC8vIFRPRE8oIzIxNDkpOiBSZW1vdmUgdGhpcyB3aGVuIEVtdWxhdG9yIGlzIGZpeGVkXG4gICAgICAgIG4gPSBHbihlKSksIG5ldyBIZShuLCB0LnRyYW5zZm9ybVJlc3VsdHMgfHwgW10pO1xuICAgIH0odCwgZSkpKSkgOiBbXTtcbn1cblxuZnVuY3Rpb24gdXModCwgZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGRvY3VtZW50czogWyBYbih0LCBlLnBhdGgpIF1cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBocyh0LCBlKSB7XG4gICAgLy8gRGlzc2VjdCB0aGUgcGF0aCBpbnRvIHBhcmVudCwgY29sbGVjdGlvbklkLCBhbmQgb3B0aW9uYWwga2V5IGZpbHRlci5cbiAgICBjb25zdCBuID0ge1xuICAgICAgICBzdHJ1Y3R1cmVkUXVlcnk6IHt9XG4gICAgfSwgcyA9IGUucGF0aDtcbiAgICBudWxsICE9PSBlLmNvbGxlY3Rpb25Hcm91cCA/IChuLnBhcmVudCA9IFhuKHQsIHMpLCBuLnN0cnVjdHVyZWRRdWVyeS5mcm9tID0gWyB7XG4gICAgICAgIGNvbGxlY3Rpb25JZDogZS5jb2xsZWN0aW9uR3JvdXAsXG4gICAgICAgIGFsbERlc2NlbmRhbnRzOiAhMFxuICAgIH0gXSkgOiAobi5wYXJlbnQgPSBYbih0LCBzLnBvcExhc3QoKSksIG4uc3RydWN0dXJlZFF1ZXJ5LmZyb20gPSBbIHtcbiAgICAgICAgY29sbGVjdGlvbklkOiBzLmxhc3RTZWdtZW50KClcbiAgICB9IF0pO1xuICAgIGNvbnN0IGkgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIGlmICgwID09PSB0Lmxlbmd0aCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBlID0gdC5tYXAoKHQgPT4gXG4gICAgICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgaWYgKFwiPT1cIiAvKiBFUVVBTCAqLyA9PT0gdC5vcCkge1xuICAgICAgICAgICAgICAgIGlmIChVdCh0LnZhbHVlKSkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdW5hcnlGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkOiB5cyh0LmZpZWxkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wOiBcIklTX05BTlwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChCdCh0LnZhbHVlKSkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdW5hcnlGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkOiB5cyh0LmZpZWxkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wOiBcIklTX05VTExcIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXCIhPVwiIC8qIE5PVF9FUVVBTCAqLyA9PT0gdC5vcCkge1xuICAgICAgICAgICAgICAgIGlmIChVdCh0LnZhbHVlKSkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdW5hcnlGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkOiB5cyh0LmZpZWxkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wOiBcIklTX05PVF9OQU5cIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAoQnQodC52YWx1ZSkpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHVuYXJ5RmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogeXModC5maWVsZCksXG4gICAgICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OT1RfTlVMTFwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBmaWVsZEZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZDogeXModC5maWVsZCksXG4gICAgICAgICAgICAgICAgICAgIG9wOiBncyh0Lm9wKSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHQudmFsdWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KHQpKSk7XG4gICAgICAgIGlmICgxID09PSBlLmxlbmd0aCkgcmV0dXJuIGVbMF07XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb21wb3NpdGVGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICBvcDogXCJBTkRcIixcbiAgICAgICAgICAgICAgICBmaWx0ZXJzOiBlXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfShlLmZpbHRlcnMpO1xuICAgIGkgJiYgKG4uc3RydWN0dXJlZFF1ZXJ5LndoZXJlID0gaSk7XG4gICAgY29uc3QgciA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgaWYgKDAgPT09IHQubGVuZ3RoKSByZXR1cm47XG4gICAgICAgIHJldHVybiB0Lm1hcCgodCA9PiBcbiAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGZpZWxkOiB5cyh0LmZpZWxkKSxcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb246IG1zKHQuZGlyKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSh0KSkpO1xuICAgIH0oZS5vcmRlckJ5KTtcbiAgICByICYmIChuLnN0cnVjdHVyZWRRdWVyeS5vcmRlckJ5ID0gcik7XG4gICAgY29uc3QgbyA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHQuQyB8fCBidChlKSA/IGUgOiB7XG4gICAgICAgICAgICB2YWx1ZTogZVxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAqIFJldHVybnMgYSBudW1iZXIgKG9yIG51bGwpIGZyb20gYSBnb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZSBwcm90by5cbiAqLyAodCwgZS5saW1pdCk7XG4gICAgcmV0dXJuIG51bGwgIT09IG8gJiYgKG4uc3RydWN0dXJlZFF1ZXJ5LmxpbWl0ID0gbyksIGUuc3RhcnRBdCAmJiAobi5zdHJ1Y3R1cmVkUXVlcnkuc3RhcnRBdCA9IHdzKGUuc3RhcnRBdCkpLCBcbiAgICBlLmVuZEF0ICYmIChuLnN0cnVjdHVyZWRRdWVyeS5lbmRBdCA9IHdzKGUuZW5kQXQpKSwgbjtcbn1cblxuZnVuY3Rpb24gbHModCkge1xuICAgIGxldCBlID0gWm4odC5wYXJlbnQpO1xuICAgIGNvbnN0IG4gPSB0LnN0cnVjdHVyZWRRdWVyeSwgcyA9IG4uZnJvbSA/IG4uZnJvbS5sZW5ndGggOiAwO1xuICAgIGxldCBpID0gbnVsbDtcbiAgICBpZiAocyA+IDApIHtcbiAgICAgICAgQigxID09PSBzKTtcbiAgICAgICAgY29uc3QgdCA9IG4uZnJvbVswXTtcbiAgICAgICAgdC5hbGxEZXNjZW5kYW50cyA/IGkgPSB0LmNvbGxlY3Rpb25JZCA6IGUgPSBlLmNoaWxkKHQuY29sbGVjdGlvbklkKTtcbiAgICB9XG4gICAgbGV0IHIgPSBbXTtcbiAgICBuLndoZXJlICYmIChyID0gZHMobi53aGVyZSkpO1xuICAgIGxldCBvID0gW107XG4gICAgbi5vcmRlckJ5ICYmIChvID0gbi5vcmRlckJ5Lm1hcCgodCA9PiBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgbGUocHModC5maWVsZCksIFxuICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHN3aXRjaCAodCkge1xuICAgICAgICAgICAgICBjYXNlIFwiQVNDRU5ESU5HXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYXNjXCIgLyogQVNDRU5ESU5HICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJERVNDRU5ESU5HXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZGVzY1wiIC8qIERFU0NFTkRJTkcgKi87XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICAodC5kaXJlY3Rpb24pKTtcbiAgICB9KHQpKSkpO1xuICAgIGxldCBhID0gbnVsbDtcbiAgICBuLmxpbWl0ICYmIChhID0gZnVuY3Rpb24odCkge1xuICAgICAgICBsZXQgZTtcbiAgICAgICAgcmV0dXJuIGUgPSBcIm9iamVjdFwiID09IHR5cGVvZiB0ID8gdC52YWx1ZSA6IHQsIGJ0KGUpID8gbnVsbCA6IGU7XG4gICAgfShuLmxpbWl0KSk7XG4gICAgbGV0IGMgPSBudWxsO1xuICAgIG4uc3RhcnRBdCAmJiAoYyA9IF9zKG4uc3RhcnRBdCkpO1xuICAgIGxldCB1ID0gbnVsbDtcbiAgICByZXR1cm4gbi5lbmRBdCAmJiAodSA9IF9zKG4uZW5kQXQpKSwgbWUoZSwgaSwgbywgciwgYSwgXCJGXCIgLyogRmlyc3QgKi8gLCBjLCB1KTtcbn1cblxuZnVuY3Rpb24gZnModCwgZSkge1xuICAgIGNvbnN0IG4gPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHN3aXRjaCAoZSkge1xuICAgICAgICAgIGNhc2UgMCAvKiBMaXN0ZW4gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgICBjYXNlIDEgLyogRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2ggKi8gOlxuICAgICAgICAgICAgcmV0dXJuIFwiZXhpc3RlbmNlLWZpbHRlci1taXNtYXRjaFwiO1xuXG4gICAgICAgICAgY2FzZSAyIC8qIExpbWJvUmVzb2x1dGlvbiAqLyA6XG4gICAgICAgICAgICByZXR1cm4gXCJsaW1iby1kb2N1bWVudFwiO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBMKCk7XG4gICAgICAgIH1cbiAgICB9KDAsIGUucHVycG9zZSk7XG4gICAgcmV0dXJuIG51bGwgPT0gbiA/IG51bGwgOiB7XG4gICAgICAgIFwiZ29vZy1saXN0ZW4tdGFnc1wiOiBuXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gZHModCkge1xuICAgIHJldHVybiB0ID8gdm9pZCAwICE9PSB0LnVuYXJ5RmlsdGVyID8gWyBFcyh0KSBdIDogdm9pZCAwICE9PSB0LmZpZWxkRmlsdGVyID8gWyBUcyh0KSBdIDogdm9pZCAwICE9PSB0LmNvbXBvc2l0ZUZpbHRlciA/IHQuY29tcG9zaXRlRmlsdGVyLmZpbHRlcnMubWFwKCh0ID0+IGRzKHQpKSkucmVkdWNlKCgodCwgZSkgPT4gdC5jb25jYXQoZSkpKSA6IEwoKSA6IFtdO1xufVxuXG5mdW5jdGlvbiB3cyh0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYmVmb3JlOiB0LmJlZm9yZSxcbiAgICAgICAgdmFsdWVzOiB0LnBvc2l0aW9uXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gX3ModCkge1xuICAgIGNvbnN0IGUgPSAhIXQuYmVmb3JlLCBuID0gdC52YWx1ZXMgfHwgW107XG4gICAgcmV0dXJuIG5ldyB1ZShuLCBlKTtcbn1cblxuLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuZnVuY3Rpb24gbXModCkge1xuICAgIHJldHVybiBVblt0XTtcbn1cblxuZnVuY3Rpb24gZ3ModCkge1xuICAgIHJldHVybiBxblt0XTtcbn1cblxuZnVuY3Rpb24geXModCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGZpZWxkUGF0aDogdC5jYW5vbmljYWxTdHJpbmcoKVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIHBzKHQpIHtcbiAgICByZXR1cm4gX3QuZnJvbVNlcnZlckZvcm1hdCh0LmZpZWxkUGF0aCk7XG59XG5cbmZ1bmN0aW9uIFRzKHQpIHtcbiAgICByZXR1cm4gWnQuY3JlYXRlKHBzKHQuZmllbGRGaWx0ZXIuZmllbGQpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgIHN3aXRjaCAodCkge1xuICAgICAgICAgIGNhc2UgXCJFUVVBTFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiPT1cIiAvKiBFUVVBTCAqLztcblxuICAgICAgICAgIGNhc2UgXCJOT1RfRVFVQUxcIjpcbiAgICAgICAgICAgIHJldHVybiBcIiE9XCIgLyogTk9UX0VRVUFMICovO1xuXG4gICAgICAgICAgY2FzZSBcIkdSRUFURVJfVEhBTlwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiPlwiIC8qIEdSRUFURVJfVEhBTiAqLztcblxuICAgICAgICAgIGNhc2UgXCJHUkVBVEVSX1RIQU5fT1JfRVFVQUxcIjpcbiAgICAgICAgICAgIHJldHVybiBcIj49XCIgLyogR1JFQVRFUl9USEFOX09SX0VRVUFMICovO1xuXG4gICAgICAgICAgY2FzZSBcIkxFU1NfVEhBTlwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiPFwiIC8qIExFU1NfVEhBTiAqLztcblxuICAgICAgICAgIGNhc2UgXCJMRVNTX1RIQU5fT1JfRVFVQUxcIjpcbiAgICAgICAgICAgIHJldHVybiBcIjw9XCIgLyogTEVTU19USEFOX09SX0VRVUFMICovO1xuXG4gICAgICAgICAgY2FzZSBcIkFSUkFZX0NPTlRBSU5TXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJhcnJheS1jb250YWluc1wiIC8qIEFSUkFZX0NPTlRBSU5TICovO1xuXG4gICAgICAgICAgY2FzZSBcIklOXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJpblwiIC8qIElOICovO1xuXG4gICAgICAgICAgY2FzZSBcIk5PVF9JTlwiOlxuICAgICAgICAgICAgcmV0dXJuIFwibm90LWluXCIgLyogTk9UX0lOICovO1xuXG4gICAgICAgICAgY2FzZSBcIkFSUkFZX0NPTlRBSU5TX0FOWVwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogQVJSQVlfQ09OVEFJTlNfQU5ZICovO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBMKCk7XG4gICAgICAgIH1cbiAgICB9KHQuZmllbGRGaWx0ZXIub3ApLCB0LmZpZWxkRmlsdGVyLnZhbHVlKTtcbn1cblxuZnVuY3Rpb24gRXModCkge1xuICAgIHN3aXRjaCAodC51bmFyeUZpbHRlci5vcCkge1xuICAgICAgY2FzZSBcIklTX05BTlwiOlxuICAgICAgICBjb25zdCBlID0gcHModC51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgIHJldHVybiBadC5jcmVhdGUoZSwgXCI9PVwiIC8qIEVRVUFMICovICwge1xuICAgICAgICAgICAgZG91YmxlVmFsdWU6IE5hTlxuICAgICAgICB9KTtcblxuICAgICAgY2FzZSBcIklTX05VTExcIjpcbiAgICAgICAgY29uc3QgbiA9IHBzKHQudW5hcnlGaWx0ZXIuZmllbGQpO1xuICAgICAgICByZXR1cm4gWnQuY3JlYXRlKG4sIFwiPT1cIiAvKiBFUVVBTCAqLyAsIHtcbiAgICAgICAgICAgIG51bGxWYWx1ZTogXCJOVUxMX1ZBTFVFXCJcbiAgICAgICAgfSk7XG5cbiAgICAgIGNhc2UgXCJJU19OT1RfTkFOXCI6XG4gICAgICAgIGNvbnN0IHMgPSBwcyh0LnVuYXJ5RmlsdGVyLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIFp0LmNyZWF0ZShzLCBcIiE9XCIgLyogTk9UX0VRVUFMICovICwge1xuICAgICAgICAgICAgZG91YmxlVmFsdWU6IE5hTlxuICAgICAgICB9KTtcblxuICAgICAgY2FzZSBcIklTX05PVF9OVUxMXCI6XG4gICAgICAgIGNvbnN0IGkgPSBwcyh0LnVuYXJ5RmlsdGVyLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIFp0LmNyZWF0ZShpLCBcIiE9XCIgLyogTk9UX0VRVUFMICovICwge1xuICAgICAgICAgICAgbnVsbFZhbHVlOiBcIk5VTExfVkFMVUVcIlxuICAgICAgICB9KTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIEwoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIElzKHQpIHtcbiAgICBjb25zdCBlID0gW107XG4gICAgcmV0dXJuIHQuZmllbGRzLmZvckVhY2goKHQgPT4gZS5wdXNoKHQuY2Fub25pY2FsU3RyaW5nKCkpKSksIHtcbiAgICAgICAgZmllbGRQYXRoczogZVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIEFzKHQpIHtcbiAgICAvLyBSZXNvdXJjZSBuYW1lcyBoYXZlIGF0IGxlYXN0IDQgY29tcG9uZW50cyAocHJvamVjdCBJRCwgZGF0YWJhc2UgSUQpXG4gICAgcmV0dXJuIHQubGVuZ3RoID49IDQgJiYgXCJwcm9qZWN0c1wiID09PSB0LmdldCgwKSAmJiBcImRhdGFiYXNlc1wiID09PSB0LmdldCgyKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRW5jb2RlcyBhIHJlc291cmNlIHBhdGggaW50byBhIEluZGV4ZWREYi1jb21wYXRpYmxlIHN0cmluZyBmb3JtLlxuICovXG5mdW5jdGlvbiBScyh0KSB7XG4gICAgbGV0IGUgPSBcIlwiO1xuICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5sZW5ndGg7IG4rKykgZS5sZW5ndGggPiAwICYmIChlID0gYnMoZSkpLCBlID0gUHModC5nZXQobiksIGUpO1xuICAgIHJldHVybiBicyhlKTtcbn1cblxuLyoqIEVuY29kZXMgYSBzaW5nbGUgc2VnbWVudCBvZiBhIHJlc291cmNlIHBhdGggaW50byB0aGUgZ2l2ZW4gcmVzdWx0ICovIGZ1bmN0aW9uIFBzKHQsIGUpIHtcbiAgICBsZXQgbiA9IGU7XG4gICAgY29uc3QgcyA9IHQubGVuZ3RoO1xuICAgIGZvciAobGV0IGUgPSAwOyBlIDwgczsgZSsrKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0LmNoYXJBdChlKTtcbiAgICAgICAgc3dpdGNoIChzKSB7XG4gICAgICAgICAgY2FzZSBcIlxcMFwiOlxuICAgICAgICAgICAgbiArPSBcIlx1MDAwMVx1MDAxMFwiO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiXHUwMDAxXCI6XG4gICAgICAgICAgICBuICs9IFwiXHUwMDAxXHUwMDExXCI7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBuICs9IHM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG47XG59XG5cbi8qKiBFbmNvZGVzIGEgcGF0aCBzZXBhcmF0b3IgaW50byB0aGUgZ2l2ZW4gcmVzdWx0ICovIGZ1bmN0aW9uIGJzKHQpIHtcbiAgICByZXR1cm4gdCArIFwiXHUwMDAxXHUwMDAxXCI7XG59XG5cbi8qKlxuICogRGVjb2RlcyB0aGUgZ2l2ZW4gSW5kZXhlZERiLWNvbXBhdGlibGUgc3RyaW5nIGZvcm0gb2YgYSByZXNvdXJjZSBwYXRoIGludG9cbiAqIGEgUmVzb3VyY2VQYXRoIGluc3RhbmNlLiBOb3RlIHRoYXQgdGhpcyBtZXRob2QgaXMgbm90IHN1aXRhYmxlIGZvciB1c2Ugd2l0aFxuICogZGVjb2RpbmcgcmVzb3VyY2UgbmFtZXMgZnJvbSB0aGUgc2VydmVyOyB0aG9zZSBhcmUgT25lIFBsYXRmb3JtIGZvcm1hdFxuICogc3RyaW5ncy5cbiAqLyBmdW5jdGlvbiB2cyh0KSB7XG4gICAgLy8gRXZlbnQgdGhlIGVtcHR5IHBhdGggbXVzdCBlbmNvZGUgYXMgYSBwYXRoIG9mIGF0IGxlYXN0IGxlbmd0aCAyLiBBIHBhdGhcbiAgICAvLyB3aXRoIGV4YWN0bHkgMiBtdXN0IGJlIHRoZSBlbXB0eSBwYXRoLlxuICAgIGNvbnN0IGUgPSB0Lmxlbmd0aDtcbiAgICBpZiAoQihlID49IDIpLCAyID09PSBlKSByZXR1cm4gQihcIlx1MDAwMVwiID09PSB0LmNoYXJBdCgwKSAmJiBcIlx1MDAwMVwiID09PSB0LmNoYXJBdCgxKSksIGR0LmVtcHR5UGF0aCgpO1xuICAgIC8vIEVzY2FwZSBjaGFyYWN0ZXJzIGNhbm5vdCBleGlzdCBwYXN0IHRoZSBzZWNvbmQtdG8tbGFzdCBwb3NpdGlvbiBpbiB0aGVcbiAgICAvLyBzb3VyY2UgdmFsdWUuXG4gICAgICAgIGNvbnN0IG4gPSBlIC0gMiwgcyA9IFtdO1xuICAgIGxldCBpID0gXCJcIjtcbiAgICBmb3IgKGxldCByID0gMDsgciA8IGU7ICkge1xuICAgICAgICAvLyBUaGUgbGFzdCB0d28gY2hhcmFjdGVycyBvZiBhIHZhbGlkIGVuY29kZWQgcGF0aCBtdXN0IGJlIGEgc2VwYXJhdG9yLCBzb1xuICAgICAgICAvLyB0aGVyZSBtdXN0IGJlIGFuIGVuZCB0byB0aGlzIHNlZ21lbnQuXG4gICAgICAgIGNvbnN0IGUgPSB0LmluZGV4T2YoXCJcdTAwMDFcIiwgcik7XG4gICAgICAgIChlIDwgMCB8fCBlID4gbikgJiYgTCgpO1xuICAgICAgICBzd2l0Y2ggKHQuY2hhckF0KGUgKyAxKSkge1xuICAgICAgICAgIGNhc2UgXCJcdTAwMDFcIjpcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LnN1YnN0cmluZyhyLCBlKTtcbiAgICAgICAgICAgIGxldCBvO1xuICAgICAgICAgICAgMCA9PT0gaS5sZW5ndGggPyBcbiAgICAgICAgICAgIC8vIEF2b2lkIGNvcHlpbmcgZm9yIHRoZSBjb21tb24gY2FzZSBvZiBhIHNlZ21lbnQgdGhhdCBleGNsdWRlcyBcXDBcbiAgICAgICAgICAgIC8vIGFuZCBcXDAwMVxuICAgICAgICAgICAgbyA9IG4gOiAoaSArPSBuLCBvID0gaSwgaSA9IFwiXCIpLCBzLnB1c2gobyk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJcdTAwMTBcIjpcbiAgICAgICAgICAgIGkgKz0gdC5zdWJzdHJpbmcociwgZSksIGkgKz0gXCJcXDBcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIlx1MDAxMVwiOlxuICAgICAgICAgICAgLy8gVGhlIGVzY2FwZSBjaGFyYWN0ZXIgY2FuIGJlIHVzZWQgaW4gdGhlIG91dHB1dCB0byBlbmNvZGUgaXRzZWxmLlxuICAgICAgICAgICAgaSArPSB0LnN1YnN0cmluZyhyLCBlICsgMSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBMKCk7XG4gICAgICAgIH1cbiAgICAgICAgciA9IGUgKyAyO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IGR0KHMpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBTY2hlbWEgVmVyc2lvbiBmb3IgdGhlIFdlYiBjbGllbnQ6XG4gKiAxLiAgSW5pdGlhbCB2ZXJzaW9uIGluY2x1ZGluZyBNdXRhdGlvbiBRdWV1ZSwgUXVlcnkgQ2FjaGUsIGFuZCBSZW1vdGVcbiAqICAgICBEb2N1bWVudCBDYWNoZVxuICogMi4gIFVzZWQgdG8gZW5zdXJlIGEgdGFyZ2V0R2xvYmFsIG9iamVjdCBleGlzdHMgYW5kIGFkZCB0YXJnZXRDb3VudCB0byBpdC4gTm9cbiAqICAgICBsb25nZXIgcmVxdWlyZWQgYmVjYXVzZSBtaWdyYXRpb24gMyB1bmNvbmRpdGlvbmFsbHkgY2xlYXJzIGl0LlxuICogMy4gIERyb3BwZWQgYW5kIHJlLWNyZWF0ZWQgUXVlcnkgQ2FjaGUgdG8gZGVhbCB3aXRoIGNhY2hlIGNvcnJ1cHRpb24gcmVsYXRlZFxuICogICAgIHRvIGxpbWJvIHJlc29sdXRpb24uIEFkZHJlc3Nlc1xuICogICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1pb3Mtc2RrL2lzc3Vlcy8xNTQ4XG4gKiA0LiAgTXVsdGktVGFiIFN1cHBvcnQuXG4gKiA1LiAgUmVtb3ZhbCBvZiBoZWxkIHdyaXRlIGFja3MuXG4gKiA2LiAgQ3JlYXRlIGRvY3VtZW50IGdsb2JhbCBmb3IgdHJhY2tpbmcgZG9jdW1lbnQgY2FjaGUgc2l6ZS5cbiAqIDcuICBFbnN1cmUgZXZlcnkgY2FjaGVkIGRvY3VtZW50IGhhcyBhIHNlbnRpbmVsIHJvdyB3aXRoIGEgc2VxdWVuY2UgbnVtYmVyLlxuICogOC4gIEFkZCBjb2xsZWN0aW9uLXBhcmVudCBpbmRleCBmb3IgQ29sbGVjdGlvbiBHcm91cCBxdWVyaWVzLlxuICogOS4gIENoYW5nZSBSZW1vdGVEb2N1bWVudENoYW5nZXMgc3RvcmUgdG8gYmUga2V5ZWQgYnkgcmVhZFRpbWUgcmF0aGVyIHRoYW5cbiAqICAgICBhbiBhdXRvLWluY3JlbWVudGluZyBJRC4gVGhpcyBpcyByZXF1aXJlZCBmb3IgSW5kZXgtRnJlZSBxdWVyaWVzLlxuICogMTAuIFJld3JpdGUgdGhlIGNhbm9uaWNhbCBJRHMgdG8gdGhlIGV4cGxpY2l0IFByb3RvYnVmLWJhc2VkIGZvcm1hdC5cbiAqIDExLiBBZGQgYnVuZGxlcyBhbmQgbmFtZWRfcXVlcmllcyBmb3IgYnVuZGxlIHN1cHBvcnQuXG4gKi9cbi8qKlxuICogV3JhcHBlciBjbGFzcyB0byBzdG9yZSB0aW1lc3RhbXBzIChzZWNvbmRzIGFuZCBuYW5vcykgaW4gSW5kZXhlZERiIG9iamVjdHMuXG4gKi9cbmNsYXNzIFZzIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuc2Vjb25kcyA9IHQsIHRoaXMubmFub3NlY29uZHMgPSBlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIHNpbmdsZXRvbiBvYmplY3QgdG8gYmUgc3RvcmVkIGluIHRoZSAnb3duZXInIHN0b3JlIGluIEluZGV4ZWREYi5cbiAqXG4gKiBBIGdpdmVuIGRhdGFiYXNlIGNhbiBoYXZlIGEgc2luZ2xlIHByaW1hcnkgdGFiIGFzc2lnbmVkIGF0IGEgZ2l2ZW4gdGltZS4gVGhhdFxuICogdGFiIG11c3QgdmFsaWRhdGUgdGhhdCBpdCBpcyBzdGlsbCBob2xkaW5nIHRoZSBwcmltYXJ5IGxlYXNlIGJlZm9yZSBldmVyeVxuICogb3BlcmF0aW9uIHRoYXQgcmVxdWlyZXMgbG9ja2VkIGFjY2Vzcy4gVGhlIHByaW1hcnkgdGFiIHNob3VsZCByZWd1bGFybHlcbiAqIHdyaXRlIGFuIHVwZGF0ZWQgdGltZXN0YW1wIHRvIHRoaXMgbGVhc2UgdG8gcHJldmVudCBvdGhlciB0YWJzIGZyb21cbiAqIFwic3RlYWxpbmdcIiB0aGUgcHJpbWFyeSBsZWFzZVxuICovIGNsYXNzIFNzIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBcbiAgICAvKiogV2hldGhlciB0byBhbGxvdyBzaGFyZWQgYWNjZXNzIGZyb20gbXVsdGlwbGUgdGFicy4gKi9cbiAgICBlLCBuKSB7XG4gICAgICAgIHRoaXMub3duZXJJZCA9IHQsIHRoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24gPSBlLCB0aGlzLmxlYXNlVGltZXN0YW1wTXMgPSBuO1xuICAgIH1cbn1cblxuLyoqXG4gKiBOYW1lIG9mIHRoZSBJbmRleGVkRGIgb2JqZWN0IHN0b3JlLlxuICpcbiAqIE5vdGUgdGhhdCB0aGUgbmFtZSAnb3duZXInIGlzIGNob3NlbiB0byBlbnN1cmUgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgd2l0aFxuICogb2xkZXIgY2xpZW50cyB0aGF0IG9ubHkgc3VwcG9ydGVkIHNpbmdsZSBsb2NrZWQgYWNjZXNzIHRvIHRoZSBwZXJzaXN0ZW5jZVxuICogbGF5ZXIuXG4gKi8gU3Muc3RvcmUgPSBcIm93bmVyXCIsIFxuLyoqXG4gKiBUaGUga2V5IHN0cmluZyB1c2VkIGZvciB0aGUgc2luZ2xlIG9iamVjdCB0aGF0IGV4aXN0cyBpbiB0aGVcbiAqIERiUHJpbWFyeUNsaWVudCBzdG9yZS5cbiAqL1xuU3Mua2V5ID0gXCJvd25lclwiO1xuXG4vKipcbiAqIEFuIG9iamVjdCB0byBiZSBzdG9yZWQgaW4gdGhlICdtdXRhdGlvblF1ZXVlcycgc3RvcmUgaW4gSW5kZXhlZERiLlxuICpcbiAqIEVhY2ggdXNlciBnZXRzIGEgc2luZ2xlIHF1ZXVlIG9mIE11dGF0aW9uQmF0Y2hlcyB0byBhcHBseSB0byB0aGUgc2VydmVyLlxuICogRGJNdXRhdGlvblF1ZXVlIHRyYWNrcyB0aGUgbWV0YWRhdGEgYWJvdXQgdGhlIHF1ZXVlLlxuICovXG5jbGFzcyBEcyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIG5vcm1hbGl6ZWQgdXNlciBJRCB0byB3aGljaCB0aGlzIHF1ZXVlIGJlbG9uZ3MuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogQW4gaWRlbnRpZmllciBmb3IgdGhlIGhpZ2hlc3QgbnVtYmVyZWQgYmF0Y2ggdGhhdCBoYXMgYmVlbiBhY2tub3dsZWRnZWRcbiAgICAgKiBieSB0aGUgc2VydmVyLiBBbGwgTXV0YXRpb25CYXRjaGVzIGluIHRoaXMgcXVldWUgd2l0aCBiYXRjaElkcyBsZXNzXG4gICAgICogdGhhbiBvciBlcXVhbCB0byB0aGlzIHZhbHVlIGFyZSBjb25zaWRlcmVkIHRvIGhhdmUgYmVlbiBhY2tub3dsZWRnZWQgYnlcbiAgICAgKiB0aGUgc2VydmVyLlxuICAgICAqXG4gICAgICogTk9URTogdGhpcyBpcyBkZXByZWNhdGVkIGFuZCBubyBsb25nZXIgdXNlZCBieSB0aGUgY29kZS5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBBIHN0cmVhbSB0b2tlbiB0aGF0IHdhcyBwcmV2aW91c2x5IHNlbnQgYnkgdGhlIHNlcnZlci5cbiAgICAgKlxuICAgICAqIFNlZSBTdHJlYW1pbmdXcml0ZVJlcXVlc3QgaW4gZGF0YXN0b3JlLnByb3RvIGZvciBtb3JlIGRldGFpbHMgYWJvdXRcbiAgICAgKiB1c2FnZS5cbiAgICAgKlxuICAgICAqIEFmdGVyIHNlbmRpbmcgdGhpcyB0b2tlbiwgZWFybGllciB0b2tlbnMgbWF5IG5vdCBiZSB1c2VkIGFueW1vcmUgc29cbiAgICAgKiBvbmx5IGEgc2luZ2xlIHN0cmVhbSB0b2tlbiBpcyByZXRhaW5lZC5cbiAgICAgKlxuICAgICAqIE5PVEU6IHRoaXMgaXMgZGVwcmVjYXRlZCBhbmQgbm8gbG9uZ2VyIHVzZWQgYnkgdGhlIGNvZGUuXG4gICAgICovXG4gICAgbikge1xuICAgICAgICB0aGlzLnVzZXJJZCA9IHQsIHRoaXMubGFzdEFja25vd2xlZGdlZEJhdGNoSWQgPSBlLCB0aGlzLmxhc3RTdHJlYW1Ub2tlbiA9IG47XG4gICAgfVxufVxuXG4vKiogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS4gICovIERzLnN0b3JlID0gXCJtdXRhdGlvblF1ZXVlc1wiLCBcbi8qKiBLZXlzIGFyZSBhdXRvbWF0aWNhbGx5IGFzc2lnbmVkIHZpYSB0aGUgdXNlcklkIHByb3BlcnR5LiAqL1xuRHMua2V5UGF0aCA9IFwidXNlcklkXCI7XG5cbi8qKlxuICogQW4gb2JqZWN0IHRvIGJlIHN0b3JlZCBpbiB0aGUgJ211dGF0aW9ucycgc3RvcmUgaW4gSW5kZXhlZERiLlxuICpcbiAqIFJlcHJlc2VudHMgYSBiYXRjaCBvZiB1c2VyLWxldmVsIG11dGF0aW9ucyBpbnRlbmRlZCB0byBiZSBzZW50IHRvIHRoZSBzZXJ2ZXJcbiAqIGluIGEgc2luZ2xlIHdyaXRlLiBFYWNoIHVzZXItbGV2ZWwgYmF0Y2ggZ2V0cyBhIHNlcGFyYXRlIERiTXV0YXRpb25CYXRjaFxuICogd2l0aCBhIG5ldyBiYXRjaElkLlxuICovXG5jbGFzcyBDcyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIG5vcm1hbGl6ZWQgdXNlciBJRCB0byB3aGljaCB0aGlzIGJhdGNoIGJlbG9uZ3MuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogQW4gaWRlbnRpZmllciBmb3IgdGhpcyBiYXRjaCwgYWxsb2NhdGVkIHVzaW5nIGFuIGF1dG8tZ2VuZXJhdGVkIGtleS5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBUaGUgbG9jYWwgd3JpdGUgdGltZSBvZiB0aGUgYmF0Y2gsIHN0b3JlZCBhcyBtaWxsaXNlY29uZHMgc2luY2UgdGhlXG4gICAgICogZXBvY2guXG4gICAgICovXG4gICAgbiwgXG4gICAgLyoqXG4gICAgICogQSBsaXN0IG9mIFwibXV0YXRpb25zXCIgdGhhdCByZXByZXNlbnQgYSBwYXJ0aWFsIGJhc2Ugc3RhdGUgZnJvbSB3aGVuIHRoaXNcbiAgICAgKiB3cml0ZSBiYXRjaCB3YXMgaW5pdGlhbGx5IGNyZWF0ZWQuIER1cmluZyBsb2NhbCBhcHBsaWNhdGlvbiBvZiB0aGUgd3JpdGVcbiAgICAgKiBiYXRjaCwgdGhlc2UgYmFzZU11dGF0aW9ucyBhcmUgYXBwbGllZCBwcmlvciB0byB0aGUgcmVhbCB3cml0ZXMgaW4gb3JkZXJcbiAgICAgKiB0byBvdmVycmlkZSBjZXJ0YWluIGRvY3VtZW50IGZpZWxkcyBmcm9tIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUuIFRoaXNcbiAgICAgKiBpcyBuZWNlc3NhcnkgaW4gdGhlIGNhc2Ugb2Ygbm9uLWlkZW1wb3RlbnQgd3JpdGVzIChlLmcuIGBpbmNyZW1lbnQoKWBcbiAgICAgKiB0cmFuc2Zvcm1zKSB0byBtYWtlIHN1cmUgdGhhdCB0aGUgbG9jYWwgdmlldyBvZiB0aGUgbW9kaWZpZWQgZG9jdW1lbnRzXG4gICAgICogZG9lc24ndCBmbGlja2VyIGlmIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUgcmVjZWl2ZXMgdGhlIHJlc3VsdCBvZiB0aGVcbiAgICAgKiBub24taWRlbXBvdGVudCB3cml0ZSBiZWZvcmUgdGhlIHdyaXRlIGlzIHJlbW92ZWQgZnJvbSB0aGUgcXVldWUuXG4gICAgICpcbiAgICAgKiBUaGVzZSBtdXRhdGlvbnMgYXJlIG5ldmVyIHNlbnQgdG8gdGhlIGJhY2tlbmQuXG4gICAgICovXG4gICAgcywgXG4gICAgLyoqXG4gICAgICogQSBsaXN0IG9mIG11dGF0aW9ucyB0byBhcHBseS4gQWxsIG11dGF0aW9ucyB3aWxsIGJlIGFwcGxpZWQgYXRvbWljYWxseS5cbiAgICAgKlxuICAgICAqIE11dGF0aW9ucyBhcmUgc2VyaWFsaXplZCB2aWEgdG9NdXRhdGlvbigpLlxuICAgICAqL1xuICAgIGkpIHtcbiAgICAgICAgdGhpcy51c2VySWQgPSB0LCB0aGlzLmJhdGNoSWQgPSBlLCB0aGlzLmxvY2FsV3JpdGVUaW1lTXMgPSBuLCB0aGlzLmJhc2VNdXRhdGlvbnMgPSBzLCBcbiAgICAgICAgdGhpcy5tdXRhdGlvbnMgPSBpO1xuICAgIH1cbn1cblxuLyoqIE5hbWUgb2YgdGhlIEluZGV4ZWREYiBvYmplY3Qgc3RvcmUuICAqLyBDcy5zdG9yZSA9IFwibXV0YXRpb25zXCIsIFxuLyoqIEtleXMgYXJlIGF1dG9tYXRpY2FsbHkgYXNzaWduZWQgdmlhIHRoZSB1c2VySWQsIGJhdGNoSWQgcHJvcGVydGllcy4gKi9cbkNzLmtleVBhdGggPSBcImJhdGNoSWRcIiwgXG4vKiogVGhlIGluZGV4IG5hbWUgZm9yIGxvb2t1cCBvZiBtdXRhdGlvbnMgYnkgdXNlci4gKi9cbkNzLnVzZXJNdXRhdGlvbnNJbmRleCA9IFwidXNlck11dGF0aW9uc0luZGV4XCIsIFxuLyoqIFRoZSB1c2VyIG11dGF0aW9ucyBpbmRleCBpcyBrZXllZCBieSBbdXNlcklkLCBiYXRjaElkXSBwYWlycy4gKi9cbkNzLnVzZXJNdXRhdGlvbnNLZXlQYXRoID0gWyBcInVzZXJJZFwiLCBcImJhdGNoSWRcIiBdO1xuXG4vKipcbiAqIEFuIG9iamVjdCB0byBiZSBzdG9yZWQgaW4gdGhlICdkb2N1bWVudE11dGF0aW9ucycgc3RvcmUgaW4gSW5kZXhlZERiLlxuICpcbiAqIEEgbWFudWFsbHkgbWFpbnRhaW5lZCBpbmRleCBvZiBhbGwgdGhlIG11dGF0aW9uIGJhdGNoZXMgdGhhdCBhZmZlY3QgYSBnaXZlblxuICogZG9jdW1lbnQga2V5LiBUaGUgcm93cyBpbiB0aGlzIHRhYmxlIGFyZSByZWZlcmVuY2VzIGJhc2VkIG9uIHRoZSBjb250ZW50cyBvZlxuICogRGJNdXRhdGlvbkJhdGNoLm11dGF0aW9ucy5cbiAqL1xuY2xhc3MgTnMge1xuICAgIGNvbnN0cnVjdG9yKCkge31cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgW3VzZXJJZF0ga2V5IGZvciB1c2UgaW4gdGhlIERiRG9jdW1lbnRNdXRhdGlvbnMgaW5kZXggdG8gaXRlcmF0ZVxuICAgICAqIG92ZXIgYWxsIG9mIGEgdXNlcidzIGRvY3VtZW50IG11dGF0aW9ucy5cbiAgICAgKi8gICAgc3RhdGljIHByZWZpeEZvclVzZXIodCkge1xuICAgICAgICByZXR1cm4gWyB0IF07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBbdXNlcklkLCBlbmNvZGVkUGF0aF0ga2V5IGZvciB1c2UgaW4gdGhlIERiRG9jdW1lbnRNdXRhdGlvbnNcbiAgICAgKiBpbmRleCB0byBpdGVyYXRlIG92ZXIgYWxsIGF0IGRvY3VtZW50IG11dGF0aW9ucyBmb3IgYSBnaXZlbiBwYXRoIG9yIGxvd2VyLlxuICAgICAqLyAgICBzdGF0aWMgcHJlZml4Rm9yUGF0aCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBbIHQsIFJzKGUpIF07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdWxsIGluZGV4IGtleSBvZiBbdXNlcklkLCBlbmNvZGVkUGF0aCwgYmF0Y2hJZF0gZm9yIGluc2VydGluZ1xuICAgICAqIGFuZCBkZWxldGluZyBpbnRvIHRoZSBEYkRvY3VtZW50TXV0YXRpb25zIGluZGV4LlxuICAgICAqLyAgICBzdGF0aWMga2V5KHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIFsgdCwgUnMoZSksIG4gXTtcbiAgICB9XG59XG5cbk5zLnN0b3JlID0gXCJkb2N1bWVudE11dGF0aW9uc1wiLCBcbi8qKlxuICogQmVjYXVzZSB3ZSBzdG9yZSBhbGwgdGhlIHVzZWZ1bCBpbmZvcm1hdGlvbiBmb3IgdGhpcyBzdG9yZSBpbiB0aGUga2V5LFxuICogdGhlcmUgaXMgbm8gdXNlZnVsIGluZm9ybWF0aW9uIHRvIHN0b3JlIGFzIHRoZSB2YWx1ZS4gVGhlIHJhdyAodW5lbmNvZGVkKVxuICogcGF0aCBjYW5ub3QgYmUgc3RvcmVkIGJlY2F1c2UgSW5kZXhlZERiIGRvZXNuJ3Qgc3RvcmUgcHJvdG90eXBlXG4gKiBpbmZvcm1hdGlvbi5cbiAqL1xuTnMuUExBQ0VIT0xERVIgPSBuZXcgTnM7XG5cbi8qKlxuICogUmVwcmVzZW50cyB0aGUga25vd24gYWJzZW5jZSBvZiBhIGRvY3VtZW50IGF0IGEgcGFydGljdWxhciB2ZXJzaW9uLlxuICogU3RvcmVkIGluIEluZGV4ZWREYiBhcyBwYXJ0IG9mIGEgRGJSZW1vdGVEb2N1bWVudCBvYmplY3QuXG4gKi9cbmNsYXNzIGtzIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucGF0aCA9IHQsIHRoaXMucmVhZFRpbWUgPSBlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgZG9jdW1lbnQgdGhhdCBpcyBrbm93biB0byBleGlzdCBidXQgd2hvc2UgZGF0YSBpcyB1bmtub3duLlxuICogU3RvcmVkIGluIEluZGV4ZWREYiBhcyBwYXJ0IG9mIGEgRGJSZW1vdGVEb2N1bWVudCBvYmplY3QuXG4gKi8gY2xhc3MgeHMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5wYXRoID0gdCwgdGhpcy52ZXJzaW9uID0gZTtcbiAgICB9XG59XG5cbi8qKlxuICogQW4gb2JqZWN0IHRvIGJlIHN0b3JlZCBpbiB0aGUgJ3JlbW90ZURvY3VtZW50cycgc3RvcmUgaW4gSW5kZXhlZERiLlxuICogSXQgcmVwcmVzZW50cyBlaXRoZXI6XG4gKlxuICogLSBBIGNvbXBsZXRlIGRvY3VtZW50LlxuICogLSBBIFwibm8gZG9jdW1lbnRcIiByZXByZXNlbnRpbmcgYSBkb2N1bWVudCB0aGF0IGlzIGtub3duIG5vdCB0byBleGlzdCAoYXRcbiAqIHNvbWUgdmVyc2lvbikuXG4gKiAtIEFuIFwidW5rbm93biBkb2N1bWVudFwiIHJlcHJlc2VudGluZyBhIGRvY3VtZW50IHRoYXQgaXMga25vd24gdG8gZXhpc3QgKGF0XG4gKiBzb21lIHZlcnNpb24pIGJ1dCB3aG9zZSBjb250ZW50cyBhcmUgdW5rbm93bi5cbiAqXG4gKiBOb3RlOiBUaGlzIGlzIHRoZSBwZXJzaXN0ZWQgZXF1aXZhbGVudCBvZiBhIE1heWJlRG9jdW1lbnQgYW5kIGNvdWxkIHBlcmhhcHNcbiAqIGJlIG1hZGUgbW9yZSBnZW5lcmFsIGlmIG5lY2Vzc2FyeS5cbiAqLyBjbGFzcyAkcyB7XG4gICAgLy8gVE9ETzogV2UgYXJlIGN1cnJlbnRseSBzdG9yaW5nIGZ1bGwgZG9jdW1lbnQga2V5cyBhbG1vc3QgdGhyZWUgdGltZXNcbiAgICAvLyAob25jZSBhcyBwYXJ0IG9mIHRoZSBwcmltYXJ5IGtleSwgb25jZSAtIHBhcnRseSAtIGFzIGBwYXJlbnRQYXRoYCBhbmQgb25jZVxuICAgIC8vIGluc2lkZSB0aGUgZW5jb2RlZCBkb2N1bWVudHMpLiBEdXJpbmcgb3VyIG5leHQgbWlncmF0aW9uLCB3ZSBzaG91bGRcbiAgICAvLyByZXdyaXRlIHRoZSBwcmltYXJ5IGtleSBhcyBwYXJlbnRQYXRoICsgZG9jdW1lbnQgSUQgd2hpY2ggd291bGQgYWxsb3cgdXNcbiAgICAvLyB0byBkcm9wIG9uZSB2YWx1ZS5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBTZXQgdG8gYW4gaW5zdGFuY2Ugb2YgRGJVbmtub3duRG9jdW1lbnQgaWYgdGhlIGRhdGEgZm9yIGEgZG9jdW1lbnQgaXNcbiAgICAgKiBub3Qga25vd24sIGJ1dCBpdCBpcyBrbm93biB0aGF0IGEgZG9jdW1lbnQgZXhpc3RzIGF0IHRoZSBzcGVjaWZpZWRcbiAgICAgKiB2ZXJzaW9uIChlLmcuIGl0IGhhZCBhIHN1Y2Nlc3NmdWwgdXBkYXRlIGFwcGxpZWQgdG8gaXQpXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogU2V0IHRvIGFuIGluc3RhbmNlIG9mIGEgRGJOb0RvY3VtZW50IGlmIGl0IGlzIGtub3duIHRoYXQgbm8gZG9jdW1lbnRcbiAgICAgKiBleGlzdHMuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogU2V0IHRvIGFuIGluc3RhbmNlIG9mIGEgRG9jdW1lbnQgaWYgdGhlcmUncyBhIGNhY2hlZCB2ZXJzaW9uIG9mIHRoZVxuICAgICAqIGRvY3VtZW50LlxuICAgICAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIERvY3VtZW50cyB0aGF0IHdlcmUgd3JpdHRlbiB0byB0aGUgcmVtb3RlIGRvY3VtZW50IHN0b3JlIGJhc2VkIG9uXG4gICAgICogYSB3cml0ZSBhY2tub3dsZWRnbWVudCBhcmUgbWFya2VkIHdpdGggYGhhc0NvbW1pdHRlZE11dGF0aW9uc2AuIFRoZXNlXG4gICAgICogZG9jdW1lbnRzIGFyZSBwb3RlbnRpYWxseSBpbmNvbnNpc3RlbnQgd2l0aCB0aGUgYmFja2VuZCdzIGNvcHkgYW5kIHVzZVxuICAgICAqIHRoZSB3cml0ZSdzIGNvbW1pdCB2ZXJzaW9uIGFzIHRoZWlyIGRvY3VtZW50IHZlcnNpb24uXG4gICAgICovXG4gICAgcywgXG4gICAgLyoqXG4gICAgICogV2hlbiB0aGUgZG9jdW1lbnQgd2FzIHJlYWQgZnJvbSB0aGUgYmFja2VuZC4gVW5kZWZpbmVkIGZvciBkYXRhIHdyaXR0ZW5cbiAgICAgKiBwcmlvciB0byBzY2hlbWEgdmVyc2lvbiA5LlxuICAgICAqL1xuICAgIGksIFxuICAgIC8qKlxuICAgICAqIFRoZSBwYXRoIG9mIHRoZSBjb2xsZWN0aW9uIHRoaXMgZG9jdW1lbnQgaXMgcGFydCBvZi4gVW5kZWZpbmVkIGZvciBkYXRhXG4gICAgICogd3JpdHRlbiBwcmlvciB0byBzY2hlbWEgdmVyc2lvbiA5LlxuICAgICAqL1xuICAgIHIpIHtcbiAgICAgICAgdGhpcy51bmtub3duRG9jdW1lbnQgPSB0LCB0aGlzLm5vRG9jdW1lbnQgPSBlLCB0aGlzLmRvY3VtZW50ID0gbiwgdGhpcy5oYXNDb21taXR0ZWRNdXRhdGlvbnMgPSBzLCBcbiAgICAgICAgdGhpcy5yZWFkVGltZSA9IGksIHRoaXMucGFyZW50UGF0aCA9IHI7XG4gICAgfVxufVxuXG4kcy5zdG9yZSA9IFwicmVtb3RlRG9jdW1lbnRzXCIsIFxuLyoqXG4gKiBBbiBpbmRleCB0aGF0IHByb3ZpZGVzIGFjY2VzcyB0byBhbGwgZW50cmllcyBzb3J0ZWQgYnkgcmVhZCB0aW1lICh3aGljaFxuICogY29ycmVzcG9uZHMgdG8gdGhlIGxhc3QgbW9kaWZpY2F0aW9uIHRpbWUgb2YgZWFjaCByb3cpLlxuICpcbiAqIFRoaXMgaW5kZXggaXMgdXNlZCB0byBwcm92aWRlIGEgY2hhbmdlbG9nIGZvciBNdWx0aS1UYWIuXG4gKi9cbiRzLnJlYWRUaW1lSW5kZXggPSBcInJlYWRUaW1lSW5kZXhcIiwgJHMucmVhZFRpbWVJbmRleFBhdGggPSBcInJlYWRUaW1lXCIsIFxuLyoqXG4gKiBBbiBpbmRleCB0aGF0IHByb3ZpZGVzIGFjY2VzcyB0byBkb2N1bWVudHMgaW4gYSBjb2xsZWN0aW9uIHNvcnRlZCBieSByZWFkXG4gKiB0aW1lLlxuICpcbiAqIFRoaXMgaW5kZXggaXMgdXNlZCB0byBhbGxvdyB0aGUgUmVtb3RlRG9jdW1lbnRDYWNoZSB0byBmZXRjaCBuZXdseSBjaGFuZ2VkXG4gKiBkb2N1bWVudHMgaW4gYSBjb2xsZWN0aW9uLlxuICovXG4kcy5jb2xsZWN0aW9uUmVhZFRpbWVJbmRleCA9IFwiY29sbGVjdGlvblJlYWRUaW1lSW5kZXhcIiwgJHMuY29sbGVjdGlvblJlYWRUaW1lSW5kZXhQYXRoID0gWyBcInBhcmVudFBhdGhcIiwgXCJyZWFkVGltZVwiIF07XG5cbi8qKlxuICogQ29udGFpbnMgYSBzaW5nbGUgZW50cnkgdGhhdCBoYXMgbWV0YWRhdGEgYWJvdXQgdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZS5cbiAqL1xuY2xhc3MgRnMge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBieXRlU2l6ZSAtIEFwcHJveGltYXRlbHkgdGhlIHRvdGFsIHNpemUgaW4gYnl0ZXMgb2YgYWxsIHRoZVxuICAgICAqIGRvY3VtZW50cyBpbiB0aGUgZG9jdW1lbnQgY2FjaGUuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmJ5dGVTaXplID0gdDtcbiAgICB9XG59XG5cbkZzLnN0b3JlID0gXCJyZW1vdGVEb2N1bWVudEdsb2JhbFwiLCBGcy5rZXkgPSBcInJlbW90ZURvY3VtZW50R2xvYmFsS2V5XCI7XG5cbi8qKlxuICogQW4gb2JqZWN0IHRvIGJlIHN0b3JlZCBpbiB0aGUgJ3RhcmdldHMnIHN0b3JlIGluIEluZGV4ZWREYi5cbiAqXG4gKiBUaGlzIGlzIGJhc2VkIG9uIGFuZCBzaG91bGQgYmUga2VwdCBpbiBzeW5jIHdpdGggdGhlIHByb3RvIHVzZWQgaW4gdGhlIGlPU1xuICogY2xpZW50LlxuICpcbiAqIEVhY2ggcXVlcnkgdGhlIGNsaWVudCBsaXN0ZW5zIHRvIGFnYWluc3QgdGhlIHNlcnZlciBpcyB0cmFja2VkIG9uIGRpc2sgc29cbiAqIHRoYXQgdGhlIHF1ZXJ5IGNhbiBiZSBlZmZpY2llbnRseSByZXN1bWVkIG9uIHJlc3RhcnQuXG4gKi9cbmNsYXNzIE9zIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBBbiBhdXRvLWdlbmVyYXRlZCBzZXF1ZW50aWFsIG51bWVyaWMgaWRlbnRpZmllciBmb3IgdGhlIHF1ZXJ5LlxuICAgICAqXG4gICAgICogUXVlcmllcyBhcmUgc3RvcmVkIHVzaW5nIHRoZWlyIGNhbm9uaWNhbElkIGFzIHRoZSBrZXksIGJ1dCB0aGVzZVxuICAgICAqIGNhbm9uaWNhbElkcyBjYW4gYmUgcXVpdGUgbG9uZyBzbyB3ZSBhZGRpdGlvbmFsbHkgYXNzaWduIGEgdW5pcXVlXG4gICAgICogcXVlcnlJZCB3aGljaCBjYW4gYmUgdXNlZCBieSByZWZlcmVuY2VkIGRhdGEgc3RydWN0dXJlcyAoZS5nLlxuICAgICAqIGluZGV4ZXMpIHRvIG1pbmltaXplIHRoZSBvbi1kaXNrIGNvc3QuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIGNhbm9uaWNhbCBzdHJpbmcgcmVwcmVzZW50aW5nIHRoaXMgcXVlcnkuIFRoaXMgaXMgbm90IHVuaXF1ZS5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBUaGUgbGFzdCByZWFkVGltZSByZWNlaXZlZCBmcm9tIHRoZSBXYXRjaCBTZXJ2aWNlIGZvciB0aGlzIHF1ZXJ5LlxuICAgICAqXG4gICAgICogVGhpcyBpcyB0aGUgc2FtZSB2YWx1ZSBhcyBUYXJnZXRDaGFuZ2UucmVhZF90aW1lIGluIHRoZSBwcm90b3MuXG4gICAgICovXG4gICAgbiwgXG4gICAgLyoqXG4gICAgICogQW4gb3BhcXVlLCBzZXJ2ZXItYXNzaWduZWQgdG9rZW4gdGhhdCBhbGxvd3Mgd2F0Y2hpbmcgYSBxdWVyeSB0byBiZVxuICAgICAqIHJlc3VtZWQgYWZ0ZXIgZGlzY29ubmVjdGluZyB3aXRob3V0IHJldHJhbnNtaXR0aW5nIGFsbCB0aGUgZGF0YVxuICAgICAqIHRoYXQgbWF0Y2hlcyB0aGUgcXVlcnkuIFRoZSByZXN1bWUgdG9rZW4gZXNzZW50aWFsbHkgaWRlbnRpZmllcyBhXG4gICAgICogcG9pbnQgaW4gdGltZSBmcm9tIHdoaWNoIHRoZSBzZXJ2ZXIgc2hvdWxkIHJlc3VtZSBzZW5kaW5nIHJlc3VsdHMuXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIHJlbGF0ZWQgdG8gdGhlIHNuYXBzaG90VmVyc2lvbiBpbiB0aGF0IHRoZSByZXN1bWVUb2tlblxuICAgICAqIGVmZmVjdGl2ZWx5IGFsc28gZW5jb2RlcyB0aGF0IHZhbHVlLCBidXQgdGhlIHJlc3VtZVRva2VuIGlzIG9wYXF1ZVxuICAgICAqIGFuZCBzb21ldGltZXMgZW5jb2RlcyBhZGRpdGlvbmFsIGluZm9ybWF0aW9uLlxuICAgICAqXG4gICAgICogQSBjb25zZXF1ZW5jZSBvZiB0aGlzIGlzIHRoYXQgdGhlIHJlc3VtZVRva2VuIHNob3VsZCBiZSB1c2VkIHdoZW5cbiAgICAgKiBhc2tpbmcgdGhlIHNlcnZlciB0byByZWFzb24gYWJvdXQgd2hlcmUgdGhpcyBjbGllbnQgaXMgaW4gdGhlIHdhdGNoXG4gICAgICogc3RyZWFtLCBidXQgdGhlIGNsaWVudCBzaG91bGQgdXNlIHRoZSBzbmFwc2hvdFZlcnNpb24gZm9yIGl0cyBvd25cbiAgICAgKiBwdXJwb3Nlcy5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgdGhlIHNhbWUgdmFsdWUgYXMgVGFyZ2V0Q2hhbmdlLnJlc3VtZV90b2tlbiBpbiB0aGUgcHJvdG9zLlxuICAgICAqL1xuICAgIHMsIFxuICAgIC8qKlxuICAgICAqIEEgc2VxdWVuY2UgbnVtYmVyIHJlcHJlc2VudGluZyB0aGUgbGFzdCB0aW1lIHRoaXMgcXVlcnkgd2FzXG4gICAgICogbGlzdGVuZWQgdG8sIHVzZWQgZm9yIGdhcmJhZ2UgY29sbGVjdGlvbiBwdXJwb3Nlcy5cbiAgICAgKlxuICAgICAqIENvbnZlbnRpb25hbGx5IHRoaXMgd291bGQgYmUgYSB0aW1lc3RhbXAgdmFsdWUsIGJ1dCBkZXZpY2UtbG9jYWxcbiAgICAgKiBjbG9ja3MgYXJlIHVucmVsaWFibGUgYW5kIHRoZXkgbXVzdCBiZSBhYmxlIHRvIGNyZWF0ZSBuZXcgbGlzdGVuc1xuICAgICAqIGV2ZW4gd2hpbGUgZGlzY29ubmVjdGVkLiBJbnN0ZWFkIHRoaXMgc2hvdWxkIGJlIGEgbW9ub3RvbmljYWxseVxuICAgICAqIGluY3JlYXNpbmcgbnVtYmVyIHRoYXQncyBpbmNyZW1lbnRlZCBvbiBlYWNoIGxpc3RlbiBjYWxsLlxuICAgICAqXG4gICAgICogVGhpcyBpcyBkaWZmZXJlbnQgZnJvbSB0aGUgcXVlcnlJZCBzaW5jZSB0aGUgcXVlcnlJZCBpcyBhblxuICAgICAqIGltbXV0YWJsZSBpZGVudGlmaWVyIGFzc2lnbmVkIHRvIHRoZSBRdWVyeSBvbiBmaXJzdCB1c2Ugd2hpbGVcbiAgICAgKiBsYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgaXMgdXBkYXRlZCBldmVyeSB0aW1lIHRoZSBxdWVyeSBpc1xuICAgICAqIGxpc3RlbmVkIHRvLlxuICAgICAqL1xuICAgIGksIFxuICAgIC8qKlxuICAgICAqIERlbm90ZXMgdGhlIG1heGltdW0gc25hcHNob3QgdmVyc2lvbiBhdCB3aGljaCB0aGUgYXNzb2NpYXRlZCBxdWVyeSB2aWV3XG4gICAgICogY29udGFpbmVkIG5vIGxpbWJvIGRvY3VtZW50cy4gIFVuZGVmaW5lZCBmb3IgZGF0YSB3cml0dGVuIHByaW9yIHRvXG4gICAgICogc2NoZW1hIHZlcnNpb24gOS5cbiAgICAgKi9cbiAgICByLCBcbiAgICAvKipcbiAgICAgKiBUaGUgcXVlcnkgZm9yIHRoaXMgdGFyZ2V0LlxuICAgICAqXG4gICAgICogQmVjYXVzZSBjYW5vbmljYWwgaWRzIGFyZSBub3QgdW5pcXVlIHdlIG11c3Qgc3RvcmUgdGhlIGFjdHVhbCBxdWVyeS4gV2VcbiAgICAgKiB1c2UgdGhlIHByb3RvIHRvIGhhdmUgYW4gb2JqZWN0IHdlIGNhbiBwZXJzaXN0IHdpdGhvdXQgaGF2aW5nIHRvXG4gICAgICogZHVwbGljYXRlIHRyYW5zbGF0aW9uIGxvZ2ljIHRvIGFuZCBmcm9tIGEgYFF1ZXJ5YCBvYmplY3QuXG4gICAgICovXG4gICAgbykge1xuICAgICAgICB0aGlzLnRhcmdldElkID0gdCwgdGhpcy5jYW5vbmljYWxJZCA9IGUsIHRoaXMucmVhZFRpbWUgPSBuLCB0aGlzLnJlc3VtZVRva2VuID0gcywgXG4gICAgICAgIHRoaXMubGFzdExpc3RlblNlcXVlbmNlTnVtYmVyID0gaSwgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uID0gciwgdGhpcy5xdWVyeSA9IG87XG4gICAgfVxufVxuXG5Pcy5zdG9yZSA9IFwidGFyZ2V0c1wiLCBcbi8qKiBLZXlzIGFyZSBhdXRvbWF0aWNhbGx5IGFzc2lnbmVkIHZpYSB0aGUgdGFyZ2V0SWQgcHJvcGVydHkuICovXG5Pcy5rZXlQYXRoID0gXCJ0YXJnZXRJZFwiLCBcbi8qKiBUaGUgbmFtZSBvZiB0aGUgcXVlcnlUYXJnZXRzIGluZGV4LiAqL1xuT3MucXVlcnlUYXJnZXRzSW5kZXhOYW1lID0gXCJxdWVyeVRhcmdldHNJbmRleFwiLCBcbi8qKlxuICogVGhlIGluZGV4IG9mIGFsbCBjYW5vbmljYWxJZHMgdG8gdGhlIHRhcmdldHMgdGhhdCB0aGV5IG1hdGNoLiBUaGlzIGlzIG5vdFxuICogYSB1bmlxdWUgbWFwcGluZyBiZWNhdXNlIGNhbm9uaWNhbElkIGRvZXMgbm90IHByb21pc2UgYSB1bmlxdWUgbmFtZSBmb3IgYWxsXG4gKiBwb3NzaWJsZSBxdWVyaWVzLCBzbyB3ZSBhcHBlbmQgdGhlIHRhcmdldElkIHRvIG1ha2UgdGhlIG1hcHBpbmcgdW5pcXVlLlxuICovXG5Pcy5xdWVyeVRhcmdldHNLZXlQYXRoID0gWyBcImNhbm9uaWNhbElkXCIsIFwidGFyZ2V0SWRcIiBdO1xuXG4vKipcbiAqIEFuIG9iamVjdCByZXByZXNlbnRpbmcgYW4gYXNzb2NpYXRpb24gYmV0d2VlbiBhIHRhcmdldCBhbmQgYSBkb2N1bWVudCwgb3IgYVxuICogc2VudGluZWwgcm93IG1hcmtpbmcgdGhlIGxhc3Qgc2VxdWVuY2UgbnVtYmVyIGF0IHdoaWNoIGEgZG9jdW1lbnQgd2FzIHVzZWQuXG4gKiBFYWNoIGRvY3VtZW50IGNhY2hlZCBtdXN0IGhhdmUgYSBjb3JyZXNwb25kaW5nIHNlbnRpbmVsIHJvdyBiZWZvcmUgbHJ1XG4gKiBnYXJiYWdlIGNvbGxlY3Rpb24gaXMgZW5hYmxlZC5cbiAqXG4gKiBUaGUgdGFyZ2V0IGFzc29jaWF0aW9ucyBhbmQgc2VudGluZWwgcm93cyBhcmUgY28tbG9jYXRlZCBzbyB0aGF0IG9ycGhhbmVkXG4gKiBkb2N1bWVudHMgYW5kIHRoZWlyIHNlcXVlbmNlIG51bWJlcnMgY2FuIGJlIGlkZW50aWZpZWQgZWZmaWNpZW50bHkgdmlhIGEgc2NhblxuICogb2YgdGhpcyBzdG9yZS5cbiAqL1xuY2xhc3MgTXMge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSB0YXJnZXRJZCBpZGVudGlmeWluZyBhIHRhcmdldCBvciAwIGZvciBhIHNlbnRpbmVsIHJvdy5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgcGF0aCB0byB0aGUgZG9jdW1lbnQsIGFzIGVuY29kZWQgaW4gdGhlIGtleS5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBJZiB0aGlzIGlzIGEgc2VudGluZWwgcm93LCB0aGlzIHNob3VsZCBiZSB0aGUgc2VxdWVuY2UgbnVtYmVyIG9mIHRoZSBsYXN0XG4gICAgICogdGltZSB0aGUgZG9jdW1lbnQgc3BlY2lmaWVkIGJ5IGBwYXRoYCB3YXMgdXNlZC4gT3RoZXJ3aXNlLCBpdCBzaG91bGQgYmVcbiAgICAgKiBgdW5kZWZpbmVkYC5cbiAgICAgKi9cbiAgICBuKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSB0LCB0aGlzLnBhdGggPSBlLCB0aGlzLnNlcXVlbmNlTnVtYmVyID0gbjtcbiAgICB9XG59XG5cbi8qKiBOYW1lIG9mIHRoZSBJbmRleGVkRGIgb2JqZWN0IHN0b3JlLiAgKi8gTXMuc3RvcmUgPSBcInRhcmdldERvY3VtZW50c1wiLCBcbi8qKiBLZXlzIGFyZSBhdXRvbWF0aWNhbGx5IGFzc2lnbmVkIHZpYSB0aGUgdGFyZ2V0SWQsIHBhdGggcHJvcGVydGllcy4gKi9cbk1zLmtleVBhdGggPSBbIFwidGFyZ2V0SWRcIiwgXCJwYXRoXCIgXSwgXG4vKiogVGhlIGluZGV4IG5hbWUgZm9yIHRoZSByZXZlcnNlIGluZGV4LiAqL1xuTXMuZG9jdW1lbnRUYXJnZXRzSW5kZXggPSBcImRvY3VtZW50VGFyZ2V0c0luZGV4XCIsIFxuLyoqIFdlIGFsc28gbmVlZCB0byBjcmVhdGUgdGhlIHJldmVyc2UgaW5kZXggZm9yIHRoZXNlIHByb3BlcnRpZXMuICovXG5Ncy5kb2N1bWVudFRhcmdldHNLZXlQYXRoID0gWyBcInBhdGhcIiwgXCJ0YXJnZXRJZFwiIF07XG5cbi8qKlxuICogQSByZWNvcmQgb2YgZ2xvYmFsIHN0YXRlIHRyYWNrZWQgYWNyb3NzIGFsbCBUYXJnZXRzLCB0cmFja2VkIHNlcGFyYXRlbHlcbiAqIHRvIGF2b2lkIHRoZSBuZWVkIGZvciBleHRyYSBpbmRleGVzLlxuICpcbiAqIFRoaXMgc2hvdWxkIGJlIGtlcHQgaW4tc3luYyB3aXRoIHRoZSBwcm90byB1c2VkIGluIHRoZSBpT1MgY2xpZW50LlxuICovXG5jbGFzcyBMcyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIGhpZ2hlc3QgbnVtYmVyZWQgdGFyZ2V0IGlkIGFjcm9zcyBhbGwgdGFyZ2V0cy5cbiAgICAgKlxuICAgICAqIFNlZSBEYlRhcmdldC50YXJnZXRJZC5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgaGlnaGVzdCBudW1iZXJlZCBsYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgYWNyb3NzIGFsbCB0YXJnZXRzLlxuICAgICAqXG4gICAgICogU2VlIERiVGFyZ2V0Lmxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlci5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBBIGdsb2JhbCBzbmFwc2hvdCB2ZXJzaW9uIHJlcHJlc2VudGluZyB0aGUgbGFzdCBjb25zaXN0ZW50IHNuYXBzaG90IHdlXG4gICAgICogcmVjZWl2ZWQgZnJvbSB0aGUgYmFja2VuZC4gVGhpcyBpcyBtb25vdG9uaWNhbGx5IGluY3JlYXNpbmcgYW5kIGFueVxuICAgICAqIHNuYXBzaG90cyByZWNlaXZlZCBmcm9tIHRoZSBiYWNrZW5kIHByaW9yIHRvIHRoaXMgdmVyc2lvbiAoZS5nLiBmb3JcbiAgICAgKiB0YXJnZXRzIHJlc3VtZWQgd2l0aCBhIHJlc3VtZVRva2VuKSBzaG91bGQgYmUgc3VwcHJlc3NlZCAoYnVmZmVyZWQpXG4gICAgICogdW50aWwgdGhlIGJhY2tlbmQgaGFzIGNhdWdodCB1cCB0byB0aGlzIHNuYXBzaG90IHZlcnNpb24gYWdhaW4uIFRoaXNcbiAgICAgKiBwcmV2ZW50cyBvdXIgY2FjaGUgZnJvbSBldmVyIGdvaW5nIGJhY2t3YXJkcyBpbiB0aW1lLlxuICAgICAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2YgdGFyZ2V0cyBwZXJzaXN0ZWQuXG4gICAgICovXG4gICAgcykge1xuICAgICAgICB0aGlzLmhpZ2hlc3RUYXJnZXRJZCA9IHQsIHRoaXMuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyID0gZSwgdGhpcy5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uID0gbiwgXG4gICAgICAgIHRoaXMudGFyZ2V0Q291bnQgPSBzO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUaGUga2V5IHN0cmluZyB1c2VkIGZvciB0aGUgc2luZ2xlIG9iamVjdCB0aGF0IGV4aXN0cyBpbiB0aGVcbiAqIERiVGFyZ2V0R2xvYmFsIHN0b3JlLlxuICovIExzLmtleSA9IFwidGFyZ2V0R2xvYmFsS2V5XCIsIExzLnN0b3JlID0gXCJ0YXJnZXRHbG9iYWxcIjtcblxuLyoqXG4gKiBBbiBvYmplY3QgcmVwcmVzZW50aW5nIGFuIGFzc29jaWF0aW9uIGJldHdlZW4gYSBDb2xsZWN0aW9uIGlkIChlLmcuICdtZXNzYWdlcycpXG4gKiB0byBhIHBhcmVudCBwYXRoIChlLmcuICcvY2hhdHMvMTIzJykgdGhhdCBjb250YWlucyBpdCBhcyBhIChzdWIpY29sbGVjdGlvbi5cbiAqIFRoaXMgaXMgdXNlZCB0byBlZmZpY2llbnRseSBmaW5kIGFsbCBjb2xsZWN0aW9ucyB0byBxdWVyeSB3aGVuIHBlcmZvcm1pbmdcbiAqIGEgQ29sbGVjdGlvbiBHcm91cCBxdWVyeS5cbiAqL1xuY2xhc3MgQnMge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBjb2xsZWN0aW9uSWQgKGUuZy4gJ21lc3NhZ2VzJylcbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgcGF0aCB0byB0aGUgcGFyZW50IChlaXRoZXIgYSBkb2N1bWVudCBsb2NhdGlvbiBvciBhbiBlbXB0eSBwYXRoIGZvclxuICAgICAqIGEgcm9vdC1sZXZlbCBjb2xsZWN0aW9uKS5cbiAgICAgKi9cbiAgICBlKSB7XG4gICAgICAgIHRoaXMuY29sbGVjdGlvbklkID0gdCwgdGhpcy5wYXJlbnQgPSBlO1xuICAgIH1cbn1cblxuLyoqIE5hbWUgb2YgdGhlIEluZGV4ZWREYiBvYmplY3Qgc3RvcmUuICovIEJzLnN0b3JlID0gXCJjb2xsZWN0aW9uUGFyZW50c1wiLCBcbi8qKiBLZXlzIGFyZSBhdXRvbWF0aWNhbGx5IGFzc2lnbmVkIHZpYSB0aGUgY29sbGVjdGlvbklkLCBwYXJlbnQgcHJvcGVydGllcy4gKi9cbkJzLmtleVBhdGggPSBbIFwiY29sbGVjdGlvbklkXCIsIFwicGFyZW50XCIgXTtcblxuLyoqXG4gKiBBIHJlY29yZCBvZiB0aGUgbWV0YWRhdGEgc3RhdGUgb2YgZWFjaCBjbGllbnQuXG4gKlxuICogUE9SVElORyBOT1RFOiBUaGlzIGlzIHVzZWQgdG8gc3luY2hyb25pemUgbXVsdGktdGFiIHN0YXRlIGFuZCBkb2VzIG5vdCBuZWVkXG4gKiB0byBiZSBwb3J0ZWQgdG8gaU9TIG9yIEFuZHJvaWQuXG4gKi9cbmNsYXNzIFVzIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvLyBOb3RlOiBQcmV2aW91cyBzY2hlbWEgdmVyc2lvbnMgaW5jbHVkZWQgYSBmaWVsZFxuICAgIC8vIFwibGFzdFByb2Nlc3NlZERvY3VtZW50Q2hhbmdlSWRcIi4gRG9uJ3QgdXNlIGFueW1vcmUuXG4gICAgLyoqIFRoZSBhdXRvLWdlbmVyYXRlZCBjbGllbnQgaWQgYXNzaWduZWQgYXQgY2xpZW50IHN0YXJ0dXAuICovXG4gICAgdCwgXG4gICAgLyoqIFRoZSBsYXN0IHRpbWUgdGhpcyBzdGF0ZSB3YXMgdXBkYXRlZC4gKi9cbiAgICBlLCBcbiAgICAvKiogV2hldGhlciB0aGUgY2xpZW50J3MgbmV0d29yayBjb25uZWN0aW9uIGlzIGVuYWJsZWQuICovXG4gICAgbiwgXG4gICAgLyoqIFdoZXRoZXIgdGhpcyBjbGllbnQgaXMgcnVubmluZyBpbiBhIGZvcmVncm91bmQgdGFiLiAqL1xuICAgIHMpIHtcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IHQsIHRoaXMudXBkYXRlVGltZU1zID0gZSwgdGhpcy5uZXR3b3JrRW5hYmxlZCA9IG4sIHRoaXMuaW5Gb3JlZ3JvdW5kID0gcztcbiAgICB9XG59XG5cbi8qKiBOYW1lIG9mIHRoZSBJbmRleGVkRGIgb2JqZWN0IHN0b3JlLiAqLyBVcy5zdG9yZSA9IFwiY2xpZW50TWV0YWRhdGFcIiwgXG4vKiogS2V5cyBhcmUgYXV0b21hdGljYWxseSBhc3NpZ25lZCB2aWEgdGhlIGNsaWVudElkIHByb3BlcnRpZXMuICovXG5Vcy5rZXlQYXRoID0gXCJjbGllbnRJZFwiO1xuXG4vKipcbiAqIEEgb2JqZWN0IHJlcHJlc2VudGluZyBhIGJ1bmRsZSBsb2FkZWQgYnkgdGhlIFNESy5cbiAqL1xuY2xhc3MgcXMge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgSUQgb2YgdGhlIGxvYWRlZCBidW5kbGUuICovXG4gICAgdCwgXG4gICAgLyoqIFRoZSBjcmVhdGUgdGltZSBvZiB0aGUgbG9hZGVkIGJ1bmRsZS4gKi9cbiAgICBlLCBcbiAgICAvKiogVGhlIHNjaGVtYSB2ZXJzaW9uIG9mIHRoZSBsb2FkZWQgYnVuZGxlLiAqL1xuICAgIG4pIHtcbiAgICAgICAgdGhpcy5idW5kbGVJZCA9IHQsIHRoaXMuY3JlYXRlVGltZSA9IGUsIHRoaXMudmVyc2lvbiA9IG47XG4gICAgfVxufVxuXG4vKiogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS4gKi8gcXMuc3RvcmUgPSBcImJ1bmRsZXNcIiwgcXMua2V5UGF0aCA9IFwiYnVuZGxlSWRcIjtcblxuLyoqXG4gKiBBIG9iamVjdCByZXByZXNlbnRpbmcgYSBuYW1lZCBxdWVyeSBsb2FkZWQgYnkgdGhlIFNESyB2aWEgYSBidW5kbGUuXG4gKi9cbmNsYXNzIEtzIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIG5hbWUgb2YgdGhlIHF1ZXJ5LiAqL1xuICAgIHQsIFxuICAgIC8qKiBUaGUgcmVhZCB0aW1lIG9mIHRoZSByZXN1bHRzIHNhdmVkIGluIHRoZSBidW5kbGUgZnJvbSB0aGUgbmFtZWQgcXVlcnkuICovXG4gICAgZSwgXG4gICAgLyoqIFRoZSBxdWVyeSBzYXZlZCBpbiB0aGUgYnVuZGxlLiAqL1xuICAgIG4pIHtcbiAgICAgICAgdGhpcy5uYW1lID0gdCwgdGhpcy5yZWFkVGltZSA9IGUsIHRoaXMuYnVuZGxlZFF1ZXJ5ID0gbjtcbiAgICB9XG59XG5cbi8qKiBOYW1lIG9mIHRoZSBJbmRleGVkRGIgb2JqZWN0IHN0b3JlLiAqLyBLcy5zdG9yZSA9IFwibmFtZWRRdWVyaWVzXCIsIEtzLmtleVBhdGggPSBcIm5hbWVcIjtcblxuLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xuY29uc3QganMgPSBbIC4uLlsgLi4uWyAuLi5bIC4uLlsgRHMuc3RvcmUsIENzLnN0b3JlLCBOcy5zdG9yZSwgJHMuc3RvcmUsIE9zLnN0b3JlLCBTcy5zdG9yZSwgTHMuc3RvcmUsIE1zLnN0b3JlIF0sIFVzLnN0b3JlIF0sIEZzLnN0b3JlIF0sIEJzLnN0b3JlIF0sIHFzLnN0b3JlLCBLcy5zdG9yZSBdLCBRcyA9IFwiVGhlIGN1cnJlbnQgdGFiIGlzIG5vdCBpbiB0aGUgcmVxdWlyZWQgc3RhdGUgdG8gcGVyZm9ybSB0aGlzIG9wZXJhdGlvbi4gSXQgbWlnaHQgYmUgbmVjZXNzYXJ5IHRvIHJlZnJlc2ggdGhlIGJyb3dzZXIgdGFiLlwiO1xuXG4vLyBWMiBpcyBubyBsb25nZXIgdXNhYmxlIChzZWUgY29tbWVudCBhdCB0b3Agb2YgZmlsZSlcbi8vIFZpc2libGUgZm9yIHRlc3Rpbmdcbi8qKlxuICogQSBiYXNlIGNsYXNzIHJlcHJlc2VudGluZyBhIHBlcnNpc3RlbmNlIHRyYW5zYWN0aW9uLCBlbmNhcHN1bGF0aW5nIGJvdGggdGhlXG4gKiB0cmFuc2FjdGlvbidzIHNlcXVlbmNlIG51bWJlcnMgYXMgd2VsbCBhcyBhIGxpc3Qgb2Ygb25Db21taXR0ZWQgbGlzdGVuZXJzLlxuICpcbiAqIFdoZW4geW91IGNhbGwgUGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oKSwgaXQgd2lsbCBjcmVhdGUgYSB0cmFuc2FjdGlvbiBhbmRcbiAqIHBhc3MgaXQgdG8geW91ciBjYWxsYmFjay4gWW91IHRoZW4gcGFzcyBpdCB0byBhbnkgbWV0aG9kIHRoYXQgb3BlcmF0ZXNcbiAqIG9uIHBlcnNpc3RlbmNlLlxuICovXG5jbGFzcyBXcyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMub25Db21taXR0ZWRMaXN0ZW5lcnMgPSBbXTtcbiAgICB9XG4gICAgYWRkT25Db21taXR0ZWRMaXN0ZW5lcih0KSB7XG4gICAgICAgIHRoaXMub25Db21taXR0ZWRMaXN0ZW5lcnMucHVzaCh0KTtcbiAgICB9XG4gICAgcmFpc2VPbkNvbW1pdHRlZEV2ZW50KCkge1xuICAgICAgICB0aGlzLm9uQ29tbWl0dGVkTGlzdGVuZXJzLmZvckVhY2goKHQgPT4gdCgpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBQZXJzaXN0ZW5jZVByb21pc2UgaXMgZXNzZW50aWFsbHkgYSByZS1pbXBsZW1lbnRhdGlvbiBvZiBQcm9taXNlIGV4Y2VwdFxuICogaXQgaGFzIGEgLm5leHQoKSBtZXRob2QgaW5zdGVhZCBvZiAudGhlbigpIGFuZCAubmV4dCgpIGFuZCAuY2F0Y2goKSBjYWxsYmFja3NcbiAqIGFyZSBleGVjdXRlZCBzeW5jaHJvbm91c2x5IHdoZW4gYSBQZXJzaXN0ZW5jZVByb21pc2UgcmVzb2x2ZXMgcmF0aGVyIHRoYW5cbiAqIGFzeW5jaHJvbm91c2x5IChQcm9taXNlIGltcGxlbWVudGF0aW9ucyB1c2Ugc2V0SW1tZWRpYXRlKCkgb3Igc2ltaWxhcikuXG4gKlxuICogVGhpcyBpcyBuZWNlc3NhcnkgdG8gaW50ZXJvcGVyYXRlIHdpdGggSW5kZXhlZERCIHdoaWNoIHdpbGwgYXV0b21hdGljYWxseVxuICogY29tbWl0IHRyYW5zYWN0aW9ucyBpZiBjb250cm9sIGlzIHJldHVybmVkIHRvIHRoZSBldmVudCBsb29wIHdpdGhvdXRcbiAqIHN5bmNocm9ub3VzbHkgaW5pdGlhdGluZyBhbm90aGVyIG9wZXJhdGlvbiBvbiB0aGUgdHJhbnNhY3Rpb24uXG4gKlxuICogTk9URTogLnRoZW4oKSBhbmQgLmNhdGNoKCkgb25seSBhbGxvdyBhIHNpbmdsZSBjb25zdW1lciwgdW5saWtlIG5vcm1hbFxuICogUHJvbWlzZXMuXG4gKi8gY2xhc3MgR3Mge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgLy8gTk9URTogbmV4dC9jYXRjaENhbGxiYWNrIHdpbGwgYWx3YXlzIHBvaW50IHRvIG91ciBvd24gd3JhcHBlciBmdW5jdGlvbnMsXG4gICAgICAgIC8vIG5vdCB0aGUgdXNlcidzIHJhdyBuZXh0KCkgb3IgY2F0Y2goKSBjYWxsYmFja3MuXG4gICAgICAgIHRoaXMubmV4dENhbGxiYWNrID0gbnVsbCwgdGhpcy5jYXRjaENhbGxiYWNrID0gbnVsbCwgXG4gICAgICAgIC8vIFdoZW4gdGhlIG9wZXJhdGlvbiByZXNvbHZlcywgd2UnbGwgc2V0IHJlc3VsdCBvciBlcnJvciBhbmQgbWFyayBpc0RvbmUuXG4gICAgICAgIHRoaXMucmVzdWx0ID0gdm9pZCAwLCB0aGlzLmVycm9yID0gdm9pZCAwLCB0aGlzLmlzRG9uZSA9ICExLCBcbiAgICAgICAgLy8gU2V0IHRvIHRydWUgd2hlbiAudGhlbigpIG9yIC5jYXRjaCgpIGFyZSBjYWxsZWQgYW5kIHByZXZlbnRzIGFkZGl0aW9uYWxcbiAgICAgICAgLy8gY2hhaW5pbmcuXG4gICAgICAgIHRoaXMuY2FsbGJhY2tBdHRhY2hlZCA9ICExLCB0KCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNEb25lID0gITAsIHRoaXMucmVzdWx0ID0gdCwgdGhpcy5uZXh0Q2FsbGJhY2sgJiYgXG4gICAgICAgICAgICAvLyB2YWx1ZSBzaG91bGQgYmUgZGVmaW5lZCB1bmxlc3MgVCBpcyBWb2lkLCBidXQgd2UgY2FuJ3QgZXhwcmVzc1xuICAgICAgICAgICAgLy8gdGhhdCBpbiB0aGUgdHlwZSBzeXN0ZW0uXG4gICAgICAgICAgICB0aGlzLm5leHRDYWxsYmFjayh0KTtcbiAgICAgICAgfSksICh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNEb25lID0gITAsIHRoaXMuZXJyb3IgPSB0LCB0aGlzLmNhdGNoQ2FsbGJhY2sgJiYgdGhpcy5jYXRjaENhbGxiYWNrKHQpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGNhdGNoKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmV4dCh2b2lkIDAsIHQpO1xuICAgIH1cbiAgICBuZXh0KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbGJhY2tBdHRhY2hlZCAmJiBMKCksIHRoaXMuY2FsbGJhY2tBdHRhY2hlZCA9ICEwLCB0aGlzLmlzRG9uZSA/IHRoaXMuZXJyb3IgPyB0aGlzLndyYXBGYWlsdXJlKGUsIHRoaXMuZXJyb3IpIDogdGhpcy53cmFwU3VjY2Vzcyh0LCB0aGlzLnJlc3VsdCkgOiBuZXcgR3MoKChuLCBzKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm5leHRDYWxsYmFjayA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMud3JhcFN1Y2Nlc3ModCwgZSkubmV4dChuLCBzKTtcbiAgICAgICAgICAgIH0sIHRoaXMuY2F0Y2hDYWxsYmFjayA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMud3JhcEZhaWx1cmUoZSwgdCkubmV4dChuLCBzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdG9Qcm9taXNlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm5leHQodCwgZSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgd3JhcFVzZXJGdW5jdGlvbih0KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdCgpO1xuICAgICAgICAgICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBHcyA/IGUgOiBHcy5yZXNvbHZlKGUpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICByZXR1cm4gR3MucmVqZWN0KHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdyYXBTdWNjZXNzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHQgPyB0aGlzLndyYXBVc2VyRnVuY3Rpb24oKCgpID0+IHQoZSkpKSA6IEdzLnJlc29sdmUoZSk7XG4gICAgfVxuICAgIHdyYXBGYWlsdXJlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHQgPyB0aGlzLndyYXBVc2VyRnVuY3Rpb24oKCgpID0+IHQoZSkpKSA6IEdzLnJlamVjdChlKTtcbiAgICB9XG4gICAgc3RhdGljIHJlc29sdmUodCkge1xuICAgICAgICByZXR1cm4gbmV3IEdzKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgZSh0KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzdGF0aWMgcmVqZWN0KHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBHcygoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIG4odCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc3RhdGljIHdhaXRGb3IoXG4gICAgLy8gQWNjZXB0IGFsbCBQcm9taXNlIHR5cGVzIGluIHdhaXRGb3IoKS5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBHcygoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIGxldCBzID0gMCwgaSA9IDAsIHIgPSAhMTtcbiAgICAgICAgICAgIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgKytzLCB0Lm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgKytpLCByICYmIGkgPT09IHMgJiYgZSgpO1xuICAgICAgICAgICAgICAgIH0pLCAodCA9PiBuKHQpKSk7XG4gICAgICAgICAgICB9KSksIHIgPSAhMCwgaSA9PT0gcyAmJiBlKCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2l2ZW4gYW4gYXJyYXkgb2YgcHJlZGljYXRlIGZ1bmN0aW9ucyB0aGF0IGFzeW5jaHJvbm91c2x5IGV2YWx1YXRlIHRvIGFcbiAgICAgKiBib29sZWFuLCBpbXBsZW1lbnRzIGEgc2hvcnQtY2lyY3VpdGluZyBgb3JgIGJldHdlZW4gdGhlIHJlc3VsdHMuIFByZWRpY2F0ZXNcbiAgICAgKiB3aWxsIGJlIGV2YWx1YXRlZCB1bnRpbCBvbmUgb2YgdGhlbSByZXR1cm5zIGB0cnVlYCwgdGhlbiBzdG9wLiBUaGUgZmluYWxcbiAgICAgKiByZXN1bHQgd2lsbCBiZSB3aGV0aGVyIGFueSBvZiB0aGVtIHJldHVybmVkIGB0cnVlYC5cbiAgICAgKi8gICAgc3RhdGljIG9yKHQpIHtcbiAgICAgICAgbGV0IGUgPSBHcy5yZXNvbHZlKCExKTtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIHQpIGUgPSBlLm5leHQoKHQgPT4gdCA/IEdzLnJlc29sdmUodCkgOiBuKCkpKTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIHN0YXRpYyBmb3JFYWNoKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IFtdO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKCgodCwgcykgPT4ge1xuICAgICAgICAgICAgbi5wdXNoKGUuY2FsbCh0aGlzLCB0LCBzKSk7XG4gICAgICAgIH0pKSwgdGhpcy53YWl0Rm9yKG4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIFJlZmVyZW5jZXMgdG8gYHdpbmRvd2AgYXJlIGd1YXJkZWQgYnkgU2ltcGxlRGIuaXNBdmFpbGFibGUoKVxuLyogZXNsaW50LWRpc2FibGUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzICovXG4vKipcbiAqIFdyYXBzIGFuIElEQlRyYW5zYWN0aW9uIGFuZCBleHBvc2VzIGEgc3RvcmUoKSBtZXRob2QgdG8gZ2V0IGEgaGFuZGxlIHRvIGFcbiAqIHNwZWNpZmljIG9iamVjdCBzdG9yZS5cbiAqL1xuY2xhc3MgenMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5hY3Rpb24gPSB0LCB0aGlzLnRyYW5zYWN0aW9uID0gZSwgdGhpcy5hYm9ydGVkID0gITEsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBgUHJvbWlzZWAgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSByZXN1bHQgb2YgdGhlIEluZGV4ZWREYiB0cmFuc2FjdGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuSXQgPSBuZXcgUSwgdGhpcy50cmFuc2FjdGlvbi5vbmNvbXBsZXRlID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5JdC5yZXNvbHZlKCk7XG4gICAgICAgIH0sIHRoaXMudHJhbnNhY3Rpb24ub25hYm9ydCA9ICgpID0+IHtcbiAgICAgICAgICAgIGUuZXJyb3IgPyB0aGlzLkl0LnJlamVjdChuZXcgWXModCwgZS5lcnJvcikpIDogdGhpcy5JdC5yZXNvbHZlKCk7XG4gICAgICAgIH0sIHRoaXMudHJhbnNhY3Rpb24ub25lcnJvciA9IGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IG5pKGUudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgIHRoaXMuSXQucmVqZWN0KG5ldyBZcyh0LCBuKSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHN0YXRpYyBvcGVuKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgenMoZSwgdC50cmFuc2FjdGlvbihzLCBuKSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBZcyhlLCB0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgQXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkl0LnByb21pc2U7XG4gICAgfVxuICAgIGFib3J0KHQpIHtcbiAgICAgICAgdCAmJiB0aGlzLkl0LnJlamVjdCh0KSwgdGhpcy5hYm9ydGVkIHx8ICgkKFwiU2ltcGxlRGJcIiwgXCJBYm9ydGluZyB0cmFuc2FjdGlvbjpcIiwgdCA/IHQubWVzc2FnZSA6IFwiQ2xpZW50LWluaXRpYXRlZCBhYm9ydFwiKSwgXG4gICAgICAgIHRoaXMuYWJvcnRlZCA9ICEwLCB0aGlzLnRyYW5zYWN0aW9uLmFib3J0KCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgU2ltcGxlRGJTdG9yZTxLZXlUeXBlLCBWYWx1ZVR5cGU+IGZvciB0aGUgc3BlY2lmaWVkIHN0b3JlLiBBbGxcbiAgICAgKiBvcGVyYXRpb25zIHBlcmZvcm1lZCBvbiB0aGUgU2ltcGxlRGJTdG9yZSBoYXBwZW4gd2l0aGluIHRoZSBjb250ZXh0IG9mIHRoaXNcbiAgICAgKiB0cmFuc2FjdGlvbiBhbmQgaXQgY2Fubm90IGJlIHVzZWQgYW55bW9yZSBvbmNlIHRoZSB0cmFuc2FjdGlvbiBpc1xuICAgICAqIGNvbXBsZXRlZC5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB3ZSBjYW4ndCBhY3R1YWxseSBlbmZvcmNlIHRoYXQgdGhlIEtleVR5cGUgYW5kIFZhbHVlVHlwZSBhcmVcbiAgICAgKiBjb3JyZWN0LCBidXQgdGhleSBhbGxvdyB0eXBlIHNhZmV0eSB0aHJvdWdoIHRoZSByZXN0IG9mIHRoZSBjb25zdW1pbmcgY29kZS5cbiAgICAgKi8gICAgc3RvcmUodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy50cmFuc2FjdGlvbi5vYmplY3RTdG9yZSh0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBacyhlKTtcbiAgICB9XG59XG5cbi8qKlxuICogUHJvdmlkZXMgYSB3cmFwcGVyIGFyb3VuZCBJbmRleGVkRGIgd2l0aCBhIHNpbXBsaWZpZWQgaW50ZXJmYWNlIHRoYXQgdXNlc1xuICogUHJvbWlzZS1saWtlIHJldHVybiB2YWx1ZXMgdG8gY2hhaW4gb3BlcmF0aW9ucy4gUmVhbCBwcm9taXNlcyBjYW5ub3QgYmUgdXNlZFxuICogc2luY2UgLnRoZW4oKSBjb250aW51YXRpb25zIGFyZSBleGVjdXRlZCBhc3luY2hyb25vdXNseSAoZS5nLiB2aWFcbiAqIC5zZXRJbW1lZGlhdGUpLCB3aGljaCB3b3VsZCBjYXVzZSBJbmRleGVkREIgdG8gZW5kIHRoZSB0cmFuc2FjdGlvbi5cbiAqIFNlZSBQZXJzaXN0ZW5jZVByb21pc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqLyBjbGFzcyBIcyB7XG4gICAgLypcbiAgICAgKiBDcmVhdGVzIGEgbmV3IFNpbXBsZURiIHdyYXBwZXIgZm9yIEluZGV4ZWREYiBkYXRhYmFzZSBgbmFtZWAuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgYHZlcnNpb25gIG11c3Qgbm90IGJlIGEgZG93bmdyYWRlLiBJbmRleGVkREIgZG9lcyBub3Qgc3VwcG9ydFxuICAgICAqIGRvd25ncmFkaW5nIHRoZSBzY2hlbWEgdmVyc2lvbi4gV2UgY3VycmVudGx5IGRvIG5vdCBzdXBwb3J0IGFueSB3YXkgdG8gZG9cbiAgICAgKiB2ZXJzaW9uaW5nIG91dHNpZGUgb2YgSW5kZXhlZERCJ3MgdmVyc2lvbmluZyBtZWNoYW5pc20sIGFzIG9ubHlcbiAgICAgKiB2ZXJzaW9uLXVwZ3JhZGUgdHJhbnNhY3Rpb25zIGFyZSBhbGxvd2VkIHRvIGRvIHRoaW5ncyBsaWtlIGNyZWF0ZVxuICAgICAqIG9iamVjdHN0b3Jlcy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IHQsIHRoaXMudmVyc2lvbiA9IGUsIHRoaXMuUnQgPSBuO1xuICAgICAgICAvLyBOT1RFOiBBY2NvcmRpbmcgdG8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTE5NzA1MCwgdGhlXG4gICAgICAgIC8vIGJ1ZyB3ZSdyZSBjaGVja2luZyBmb3Igc2hvdWxkIGV4aXN0IGluIGlPUyA+PSAxMi4yIGFuZCA8IDEzLCBidXQgZm9yXG4gICAgICAgIC8vIHdoYXRldmVyIHJlYXNvbiBpdCdzIG11Y2ggaGFyZGVyIHRvIGhpdCBhZnRlciAxMi4yIHNvIHdlIG9ubHkgcHJvYWN0aXZlbHlcbiAgICAgICAgLy8gbG9nIG9uIDEyLjIuXG4gICAgICAgIDEyLjIgPT09IEhzLlB0KGdldFVBKCkpICYmIEYoXCJGaXJlc3RvcmUgcGVyc2lzdGVuY2Ugc3VmZmVycyBmcm9tIGEgYnVnIGluIGlPUyAxMi4yIFNhZmFyaSB0aGF0IG1heSBjYXVzZSB5b3VyIGFwcCB0byBzdG9wIHdvcmtpbmcuIFNlZSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3EvNTY0OTYyOTYvMTEwOTE1IGZvciBkZXRhaWxzIGFuZCBhIHBvdGVudGlhbCB3b3JrYXJvdW5kLlwiKTtcbiAgICB9XG4gICAgLyoqIERlbGV0ZXMgdGhlIHNwZWNpZmllZCBkYXRhYmFzZS4gKi8gICAgc3RhdGljIGRlbGV0ZSh0KSB7XG4gICAgICAgIHJldHVybiAkKFwiU2ltcGxlRGJcIiwgXCJSZW1vdmluZyBkYXRhYmFzZTpcIiwgdCksIHRpKHdpbmRvdy5pbmRleGVkREIuZGVsZXRlRGF0YWJhc2UodCkpLnRvUHJvbWlzZSgpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIEluZGV4ZWREQiBpcyBhdmFpbGFibGUgaW4gdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuICovICAgIHN0YXRpYyBidCgpIHtcbiAgICAgICAgaWYgKCFpc0luZGV4ZWREQkF2YWlsYWJsZSgpKSByZXR1cm4gITE7XG4gICAgICAgIGlmIChIcy52dCgpKSByZXR1cm4gITA7XG4gICAgICAgIC8vIFdlIGV4dGVuc2l2ZWx5IHVzZSBpbmRleGVkIGFycmF5IHZhbHVlcyBhbmQgY29tcG91bmQga2V5cyxcbiAgICAgICAgLy8gd2hpY2ggSUUgYW5kIEVkZ2UgZG8gbm90IHN1cHBvcnQuIEhvd2V2ZXIsIHRoZXkgc3RpbGwgaGF2ZSBpbmRleGVkREJcbiAgICAgICAgLy8gZGVmaW5lZCBvbiB0aGUgd2luZG93LCBzbyB3ZSBuZWVkIHRvIGNoZWNrIGZvciB0aGVtIGhlcmUgYW5kIG1ha2Ugc3VyZVxuICAgICAgICAvLyB0byByZXR1cm4gdGhhdCBwZXJzaXN0ZW5jZSBpcyBub3QgZW5hYmxlZCBmb3IgdGhvc2UgYnJvd3NlcnMuXG4gICAgICAgIC8vIEZvciB0cmFja2luZyBzdXBwb3J0IG9mIHRoaXMgZmVhdHVyZSwgc2VlIGhlcmU6XG4gICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1pY3Jvc29mdC5jb20vZW4tdXMvbWljcm9zb2Z0LWVkZ2UvcGxhdGZvcm0vc3RhdHVzL2luZGV4ZWRkYmFycmF5c2FuZG11bHRpZW50cnlzdXBwb3J0L1xuICAgICAgICAvLyBDaGVjayB0aGUgVUEgc3RyaW5nIHRvIGZpbmQgb3V0IHRoZSBicm93c2VyLlxuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBnZXRVQSgpLCBlID0gSHMuUHQodCksIG4gPSAwIDwgZSAmJiBlIDwgMTAsIHMgPSBIcy5WdCh0KSwgaSA9IDAgPCBzICYmIHMgPCA0LjU7XG4gICAgICAgIC8vIElFIDEwXG4gICAgICAgIC8vIHVhID0gJ01vemlsbGEvNS4wIChjb21wYXRpYmxlOyBNU0lFIDEwLjA7IFdpbmRvd3MgTlQgNi4yOyBUcmlkZW50LzYuMCknO1xuICAgICAgICAvLyBJRSAxMVxuICAgICAgICAvLyB1YSA9ICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCA2LjM7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tvJztcbiAgICAgICAgLy8gRWRnZVxuICAgICAgICAvLyB1YSA9ICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXT1c2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCxcbiAgICAgICAgLy8gbGlrZSBHZWNrbykgQ2hyb21lLzM5LjAuMjE3MS43MSBTYWZhcmkvNTM3LjM2IEVkZ2UvMTIuMCc7XG4gICAgICAgIC8vIGlPUyBTYWZhcmk6IERpc2FibGUgZm9yIHVzZXJzIHJ1bm5pbmcgaU9TIHZlcnNpb24gPCAxMC5cbiAgICAgICAgICAgICAgICByZXR1cm4gISh0LmluZGV4T2YoXCJNU0lFIFwiKSA+IDAgfHwgdC5pbmRleE9mKFwiVHJpZGVudC9cIikgPiAwIHx8IHQuaW5kZXhPZihcIkVkZ2UvXCIpID4gMCB8fCBuIHx8IGkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGJhY2tpbmcgSW5kZXhlZERCIHN0b3JlIGlzIHRoZSBOb2RlIEluZGV4ZWREQlNoaW1cbiAgICAgKiAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9heGVtY2xpb24vSW5kZXhlZERCU2hpbSkuXG4gICAgICovICAgIHN0YXRpYyB2dCgpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIHJldHVybiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBwcm9jZXNzICYmIFwiWUVTXCIgPT09IChudWxsID09PSAodCA9IHByb2Nlc3MuZW52KSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LlN0KTtcbiAgICB9XG4gICAgLyoqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZyb20gYSB0cmFuc2FjdGlvbi4gKi8gICAgc3RhdGljIER0KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHQuc3RvcmUoZSk7XG4gICAgfVxuICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAvKiogUGFyc2UgVXNlciBBZ2VudCB0byBkZXRlcm1pbmUgaU9TIHZlcnNpb24uIFJldHVybnMgLTEgaWYgbm90IGZvdW5kLiAqL1xuICAgIHN0YXRpYyBQdCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0Lm1hdGNoKC9pKD86cGhvbmV8cGFkfHBvZCkgb3MgKFtcXGRfXSspL2kpLCBuID0gZSA/IGVbMV0uc3BsaXQoXCJfXCIpLnNsaWNlKDAsIDIpLmpvaW4oXCIuXCIpIDogXCItMVwiO1xuICAgICAgICByZXR1cm4gTnVtYmVyKG4pO1xuICAgIH1cbiAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgLyoqIFBhcnNlIFVzZXIgQWdlbnQgdG8gZGV0ZXJtaW5lIEFuZHJvaWQgdmVyc2lvbi4gUmV0dXJucyAtMSBpZiBub3QgZm91bmQuICovXG4gICAgc3RhdGljIFZ0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQubWF0Y2goL0FuZHJvaWQgKFtcXGQuXSspL2kpLCBuID0gZSA/IGVbMV0uc3BsaXQoXCIuXCIpLnNsaWNlKDAsIDIpLmpvaW4oXCIuXCIpIDogXCItMVwiO1xuICAgICAgICByZXR1cm4gTnVtYmVyKG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBPcGVucyB0aGUgc3BlY2lmaWVkIGRhdGFiYXNlLCBjcmVhdGluZyBvciB1cGdyYWRpbmcgaXQgaWYgbmVjZXNzYXJ5LlxuICAgICAqLyAgICBhc3luYyBDdCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiIHx8ICgkKFwiU2ltcGxlRGJcIiwgXCJPcGVuaW5nIGRhdGFiYXNlOlwiLCB0aGlzLm5hbWUpLCB0aGlzLmRiID0gYXdhaXQgbmV3IFByb21pc2UoKChlLCBuKSA9PiB7XG4gICAgICAgICAgICAvLyBUT0RPKG1pa2VsZWhlbik6IEludmVzdGlnYXRlIGJyb3dzZXIgY29tcGF0aWJpbGl0eS5cbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9JbmRleGVkREJfQVBJL1VzaW5nX0luZGV4ZWREQlxuICAgICAgICAgICAgLy8gc3VnZ2VzdHMgSUU5IGFuZCBvbGRlciBXZWJLaXQgYnJvd3NlcnMgaGFuZGxlIHVwZ3JhZGVcbiAgICAgICAgICAgIC8vIGRpZmZlcmVudGx5LiBUaGV5IGV4cGVjdCBzZXRWZXJzaW9uLCBhcyBkZXNjcmliZWQgaGVyZTpcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9JREJWZXJzaW9uQ2hhbmdlUmVxdWVzdC9zZXRWZXJzaW9uXG4gICAgICAgICAgICBjb25zdCBzID0gaW5kZXhlZERCLm9wZW4odGhpcy5uYW1lLCB0aGlzLnZlcnNpb24pO1xuICAgICAgICAgICAgcy5vbnN1Y2Nlc3MgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gdC50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgIGUobik7XG4gICAgICAgICAgICB9LCBzLm9uYmxvY2tlZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBuKG5ldyBZcyh0LCBcIkNhbm5vdCB1cGdyYWRlIEluZGV4ZWREQiBzY2hlbWEgd2hpbGUgYW5vdGhlciB0YWIgaXMgb3Blbi4gQ2xvc2UgYWxsIHRhYnMgdGhhdCBhY2Nlc3MgRmlyZXN0b3JlIGFuZCByZWxvYWQgdGhpcyBwYWdlIHRvIHByb2NlZWQuXCIpKTtcbiAgICAgICAgICAgIH0sIHMub25lcnJvciA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBlLnRhcmdldC5lcnJvcjtcbiAgICAgICAgICAgICAgICBcIlZlcnNpb25FcnJvclwiID09PSBzLm5hbWUgPyBuKG5ldyBqKEsuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJBIG5ld2VyIHZlcnNpb24gb2YgdGhlIEZpcmVzdG9yZSBTREsgd2FzIHByZXZpb3VzbHkgdXNlZCBhbmQgc28gdGhlIHBlcnNpc3RlZCBkYXRhIGlzIG5vdCBjb21wYXRpYmxlIHdpdGggdGhlIHZlcnNpb24gb2YgdGhlIFNESyB5b3UgYXJlIG5vdyB1c2luZy4gVGhlIFNESyB3aWxsIG9wZXJhdGUgd2l0aCBwZXJzaXN0ZW5jZSBkaXNhYmxlZC4gSWYgeW91IG5lZWQgcGVyc2lzdGVuY2UsIHBsZWFzZSByZS11cGdyYWRlIHRvIGEgbmV3ZXIgdmVyc2lvbiBvZiB0aGUgU0RLIG9yIGVsc2UgY2xlYXIgdGhlIHBlcnNpc3RlZCBJbmRleGVkREIgZGF0YSBmb3IgeW91ciBhcHAgdG8gc3RhcnQgZnJlc2guXCIpKSA6IFwiSW52YWxpZFN0YXRlRXJyb3JcIiA9PT0gcy5uYW1lID8gbihuZXcgaihLLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiVW5hYmxlIHRvIG9wZW4gYW4gSW5kZXhlZERCIGNvbm5lY3Rpb24uIFRoaXMgY291bGQgYmUgZHVlIHRvIHJ1bm5pbmcgaW4gYSBwcml2YXRlIGJyb3dzaW5nIHNlc3Npb24gb24gYSBicm93c2VyIHdob3NlIHByaXZhdGUgYnJvd3Npbmcgc2Vzc2lvbnMgZG8gbm90IHN1cHBvcnQgSW5kZXhlZERCOiBcIiArIHMpKSA6IG4obmV3IFlzKHQsIHMpKTtcbiAgICAgICAgICAgIH0sIHMub251cGdyYWRlbmVlZGVkID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgJChcIlNpbXBsZURiXCIsICdEYXRhYmFzZSBcIicgKyB0aGlzLm5hbWUgKyAnXCIgcmVxdWlyZXMgdXBncmFkZSBmcm9tIHZlcnNpb246JywgdC5vbGRWZXJzaW9uKTtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdC50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgIHRoaXMuUnQuTnQoZSwgcy50cmFuc2FjdGlvbiwgdC5vbGRWZXJzaW9uLCB0aGlzLnZlcnNpb24pLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgJChcIlNpbXBsZURiXCIsIFwiRGF0YWJhc2UgdXBncmFkZSB0byB2ZXJzaW9uIFwiICsgdGhpcy52ZXJzaW9uICsgXCIgY29tcGxldGVcIik7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpKSwgdGhpcy5rdCAmJiAodGhpcy5kYi5vbnZlcnNpb25jaGFuZ2UgPSB0ID0+IHRoaXMua3QodCkpLCB0aGlzLmRiO1xuICAgIH1cbiAgICB4dCh0KSB7XG4gICAgICAgIHRoaXMua3QgPSB0LCB0aGlzLmRiICYmICh0aGlzLmRiLm9udmVyc2lvbmNoYW5nZSA9IGUgPT4gdChlKSk7XG4gICAgfVxuICAgIGFzeW5jIHJ1blRyYW5zYWN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IFwicmVhZG9ubHlcIiA9PT0gZTtcbiAgICAgICAgbGV0IHIgPSAwO1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICArK3I7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGIgPSBhd2FpdCB0aGlzLkN0KHQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB6cy5vcGVuKHRoaXMuZGIsIHQsIGkgPyBcInJlYWRvbmx5XCIgOiBcInJlYWR3cml0ZVwiLCBuKSwgciA9IHMoZSkuY2F0Y2goKHQgPT4gKFxuICAgICAgICAgICAgICAgIC8vIEFib3J0IHRoZSB0cmFuc2FjdGlvbiBpZiB0aGVyZSB3YXMgYW4gZXJyb3IuXG4gICAgICAgICAgICAgICAgZS5hYm9ydCh0KSwgR3MucmVqZWN0KHQpKSkpLnRvUHJvbWlzZSgpO1xuICAgICAgICAgICAgICAgIC8vIEFzIG5vdGVkIGFib3ZlLCBlcnJvcnMgYXJlIHByb3BhZ2F0ZWQgYnkgYWJvcnRpbmcgdGhlIHRyYW5zYWN0aW9uLiBTb1xuICAgICAgICAgICAgICAgIC8vIHdlIHN3YWxsb3cgYW55IGVycm9yIGhlcmUgdG8gYXZvaWQgdGhlIGJyb3dzZXIgbG9nZ2luZyBpdCBhcyB1bmhhbmRsZWQuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHIuY2F0Y2goKCgpID0+IHt9KSksIFxuICAgICAgICAgICAgICAgIC8vIFdhaXQgZm9yIHRoZSB0cmFuc2FjdGlvbiB0byBjb21wbGV0ZSAoaS5lLiBJbmRleGVkRGIncyBvbnN1Y2Nlc3MgZXZlbnQgdG9cbiAgICAgICAgICAgICAgICAvLyBmaXJlKSwgYnV0IHN0aWxsIHJldHVybiB0aGUgb3JpZ2luYWwgdHJhbnNhY3Rpb25GblJlc3VsdCBiYWNrIHRvIHRoZVxuICAgICAgICAgICAgICAgIC8vIGNhbGxlci5cbiAgICAgICAgICAgICAgICBhd2FpdCBlLkF0LCByO1xuICAgICAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgICAgIC8vIFRPRE8oc2NobWlkdC1zZWJhc3RpYW4pOiBXZSBjb3VsZCBwcm9iYWJseSBiZSBzbWFydGVyIGFib3V0IHRoaXMgYW5kXG4gICAgICAgICAgICAgICAgLy8gbm90IHJldHJ5IGV4Y2VwdGlvbnMgdGhhdCBhcmUgbGlrZWx5IHVucmVjb3ZlcmFibGUgKHN1Y2ggYXMgcXVvdGFcbiAgICAgICAgICAgICAgICAvLyBleGNlZWRlZCBlcnJvcnMpLlxuICAgICAgICAgICAgICAgIC8vIE5vdGU6IFdlIGNhbm5vdCB1c2UgYW4gaW5zdGFuY2VvZiBjaGVjayBmb3IgRmlyZXN0b3JlRXhjZXB0aW9uLCBzaW5jZSB0aGVcbiAgICAgICAgICAgICAgICAvLyBleGNlcHRpb24gaXMgd3JhcHBlZCBpbiBhIGdlbmVyaWMgZXJyb3IgYnkgb3VyIGFzeW5jL2F3YWl0IGhhbmRsaW5nLlxuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBcIkZpcmViYXNlRXJyb3JcIiAhPT0gdC5uYW1lICYmIHIgPCAzO1xuICAgICAgICAgICAgICAgIGlmICgkKFwiU2ltcGxlRGJcIiwgXCJUcmFuc2FjdGlvbiBmYWlsZWQgd2l0aCBlcnJvcjpcIiwgdC5tZXNzYWdlLCBcIlJldHJ5aW5nOlwiLCBlKSwgXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpLCAhZSkgcmV0dXJuIFByb21pc2UucmVqZWN0KHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLmRiICYmIHRoaXMuZGIuY2xvc2UoKSwgdGhpcy5kYiA9IHZvaWQgMDtcbiAgICB9XG59XG5cbi8qKlxuICogQSBjb250cm9sbGVyIGZvciBpdGVyYXRpbmcgb3ZlciBhIGtleSByYW5nZSBvciBpbmRleC4gSXQgYWxsb3dzIGFuIGl0ZXJhdGVcbiAqIGNhbGxiYWNrIHRvIGRlbGV0ZSB0aGUgY3VycmVudGx5LXJlZmVyZW5jZWQgb2JqZWN0LCBvciBqdW1wIHRvIGEgbmV3IGtleVxuICogd2l0aGluIHRoZSBrZXkgcmFuZ2Ugb3IgaW5kZXguXG4gKi8gY2xhc3MgSnMge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy4kdCA9IHQsIHRoaXMuRnQgPSAhMSwgdGhpcy5PdCA9IG51bGw7XG4gICAgfVxuICAgIGdldCBpc0RvbmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkZ0O1xuICAgIH1cbiAgICBnZXQgTXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLk90O1xuICAgIH1cbiAgICBzZXQgY3Vyc29yKHQpIHtcbiAgICAgICAgdGhpcy4kdCA9IHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gY2FuIGJlIGNhbGxlZCB0byBzdG9wIGl0ZXJhdGlvbiBhdCBhbnkgcG9pbnQuXG4gICAgICovICAgIGRvbmUoKSB7XG4gICAgICAgIHRoaXMuRnQgPSAhMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBjYW4gYmUgY2FsbGVkIHRvIHNraXAgdG8gdGhhdCBuZXh0IGtleSwgd2hpY2ggY291bGQgYmVcbiAgICAgKiBhbiBpbmRleCBvciBhIHByaW1hcnkga2V5LlxuICAgICAqLyAgICBMdCh0KSB7XG4gICAgICAgIHRoaXMuT3QgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGUgdGhlIGN1cnJlbnQgY3Vyc29yIHZhbHVlIGZyb20gdGhlIG9iamVjdCBzdG9yZS5cbiAgICAgKlxuICAgICAqIE5PVEU6IFlvdSBDQU5OT1QgZG8gdGhpcyB3aXRoIGEga2V5c09ubHkgcXVlcnkuXG4gICAgICovICAgIGRlbGV0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRpKHRoaXMuJHQuZGVsZXRlKCkpO1xuICAgIH1cbn1cblxuLyoqIEFuIGVycm9yIHRoYXQgd3JhcHMgZXhjZXB0aW9ucyB0aGF0IHRocm93biBkdXJpbmcgSW5kZXhlZERCIGV4ZWN1dGlvbi4gKi8gY2xhc3MgWXMgZXh0ZW5kcyBqIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKEsuVU5BVkFJTEFCTEUsIGBJbmRleGVkREIgdHJhbnNhY3Rpb24gJyR7dH0nIGZhaWxlZDogJHtlfWApLCB0aGlzLm5hbWUgPSBcIkluZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3JcIjtcbiAgICB9XG59XG5cbi8qKiBWZXJpZmllcyB3aGV0aGVyIGBlYCBpcyBhbiBJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yLiAqLyBmdW5jdGlvbiBYcyh0KSB7XG4gICAgLy8gVXNlIG5hbWUgZXF1YWxpdHksIGFzIGluc3RhbmNlb2YgY2hlY2tzIG9uIGVycm9ycyBkb24ndCB3b3JrIHdpdGggZXJyb3JzXG4gICAgLy8gdGhhdCB3cmFwIG90aGVyIGVycm9ycy5cbiAgICByZXR1cm4gXCJJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yXCIgPT09IHQubmFtZTtcbn1cblxuLyoqXG4gKiBBIHdyYXBwZXIgYXJvdW5kIGFuIElEQk9iamVjdFN0b3JlIHByb3ZpZGluZyBhbiBBUEkgdGhhdDpcbiAqXG4gKiAxKSBIYXMgZ2VuZXJpYyBLZXlUeXBlIC8gVmFsdWVUeXBlIHBhcmFtZXRlcnMgdG8gcHJvdmlkZSBzdHJvbmdseS10eXBlZFxuICogbWV0aG9kcyBmb3IgYWN0aW5nIGFnYWluc3QgdGhlIG9iamVjdCBzdG9yZS5cbiAqIDIpIERlYWxzIHdpdGggSW5kZXhlZERCJ3Mgb25zdWNjZXNzIC8gb25lcnJvciBldmVudCBjYWxsYmFja3MsIG1ha2luZyBldmVyeVxuICogbWV0aG9kIHJldHVybiBhIFBlcnNpc3RlbmNlUHJvbWlzZSBpbnN0ZWFkLlxuICogMykgUHJvdmlkZXMgYSBoaWdoZXItbGV2ZWwgQVBJIHRvIGF2b2lkIG5lZWRpbmcgdG8gZG8gZXhjZXNzaXZlIHdyYXBwaW5nIG9mXG4gKiBpbnRlcm1lZGlhdGUgSW5kZXhlZERCIHR5cGVzIChJREJDdXJzb3JXaXRoVmFsdWUsIGV0Yy4pXG4gKi8gY2xhc3MgWnMge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5zdG9yZSA9IHQ7XG4gICAgfVxuICAgIHB1dCh0LCBlKSB7XG4gICAgICAgIGxldCBuO1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBlID8gKCQoXCJTaW1wbGVEYlwiLCBcIlBVVFwiLCB0aGlzLnN0b3JlLm5hbWUsIHQsIGUpLCBuID0gdGhpcy5zdG9yZS5wdXQoZSwgdCkpIDogKCQoXCJTaW1wbGVEYlwiLCBcIlBVVFwiLCB0aGlzLnN0b3JlLm5hbWUsIFwiPGF1dG8ta2V5PlwiLCB0KSwgXG4gICAgICAgIG4gPSB0aGlzLnN0b3JlLnB1dCh0KSksIHRpKG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbmV3IHZhbHVlIGludG8gYW4gT2JqZWN0IFN0b3JlIGFuZCByZXR1cm5zIHRoZSBuZXcga2V5LiBTaW1pbGFyIHRvXG4gICAgICogSW5kZXhlZERiJ3MgYGFkZCgpYCwgdGhpcyBtZXRob2Qgd2lsbCBmYWlsIG9uIHByaW1hcnkga2V5IGNvbGxpc2lvbnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgb2JqZWN0IHRvIHdyaXRlLlxuICAgICAqIEByZXR1cm5zIFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGFkZC5cbiAgICAgKi8gICAgYWRkKHQpIHtcbiAgICAgICAgJChcIlNpbXBsZURiXCIsIFwiQUREXCIsIHRoaXMuc3RvcmUubmFtZSwgdCwgdCk7XG4gICAgICAgIHJldHVybiB0aSh0aGlzLnN0b3JlLmFkZCh0KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIG9iamVjdCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IGZyb20gdGhlIHNwZWNpZmllZCBzdG9yZSwgb3IgbnVsbFxuICAgICAqIGlmIG5vIG9iamVjdCBleGlzdHMgd2l0aCB0aGUgc3BlY2lmaWVkIGtleS5cbiAgICAgKlxuICAgICAqIEBrZXkgVGhlIGtleSBvZiB0aGUgb2JqZWN0IHRvIGdldC5cbiAgICAgKiBAcmV0dXJucyBUaGUgb2JqZWN0IHdpdGggdGhlIHNwZWNpZmllZCBrZXkgb3IgbnVsbCBpZiBubyBvYmplY3QgZXhpc3RzLlxuICAgICAqLyAgICBnZXQodCkge1xuICAgICAgICAvLyBXZSdyZSBkb2luZyBhbiB1bnNhZmUgY2FzdCB0byBWYWx1ZVR5cGUuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiB0aSh0aGlzLnN0b3JlLmdldCh0KSkubmV4dCgoZSA9PiAoXG4gICAgICAgIC8vIE5vcm1hbGl6ZSBub25leGlzdGVuY2UgdG8gbnVsbC5cbiAgICAgICAgdm9pZCAwID09PSBlICYmIChlID0gbnVsbCksICQoXCJTaW1wbGVEYlwiLCBcIkdFVFwiLCB0aGlzLnN0b3JlLm5hbWUsIHQsIGUpLCBlKSkpO1xuICAgIH1cbiAgICBkZWxldGUodCkge1xuICAgICAgICAkKFwiU2ltcGxlRGJcIiwgXCJERUxFVEVcIiwgdGhpcy5zdG9yZS5uYW1lLCB0KTtcbiAgICAgICAgcmV0dXJuIHRpKHRoaXMuc3RvcmUuZGVsZXRlKHQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSWYgd2UgZXZlciBuZWVkIG1vcmUgb2YgdGhlIGNvdW50IHZhcmlhbnRzLCB3ZSBjYW4gYWRkIG92ZXJsb2Fkcy4gRm9yIG5vdyxcbiAgICAgKiBhbGwgd2UgbmVlZCBpcyB0byBjb3VudCBldmVyeXRoaW5nIGluIGEgc3RvcmUuXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygcm93cyBpbiB0aGUgc3RvcmUuXG4gICAgICovICAgIGNvdW50KCkge1xuICAgICAgICAkKFwiU2ltcGxlRGJcIiwgXCJDT1VOVFwiLCB0aGlzLnN0b3JlLm5hbWUpO1xuICAgICAgICByZXR1cm4gdGkodGhpcy5zdG9yZS5jb3VudCgpKTtcbiAgICB9XG4gICAgQnQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5jdXJzb3IodGhpcy5vcHRpb25zKHQsIGUpKSwgcyA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5VdChuLCAoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIHMucHVzaChlKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHMpKTtcbiAgICB9XG4gICAgcXQodCwgZSkge1xuICAgICAgICAkKFwiU2ltcGxlRGJcIiwgXCJERUxFVEUgQUxMXCIsIHRoaXMuc3RvcmUubmFtZSk7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLm9wdGlvbnModCwgZSk7XG4gICAgICAgIG4uS3QgPSAhMTtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuY3Vyc29yKG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5VdChzLCAoKHQsIGUsIG4pID0+IG4uZGVsZXRlKCkpKTtcbiAgICB9XG4gICAganQodCwgZSkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgZSA/IG4gPSB0IDogKG4gPSB7fSwgZSA9IHQpO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5jdXJzb3Iobik7XG4gICAgICAgIHJldHVybiB0aGlzLlV0KHMsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGEgc3RvcmUsIGJ1dCB3YWl0cyBmb3IgdGhlIGdpdmVuIGNhbGxiYWNrIHRvIGNvbXBsZXRlIGZvclxuICAgICAqIGVhY2ggZW50cnkgYmVmb3JlIGl0ZXJhdGluZyB0aGUgbmV4dCBlbnRyeS4gVGhpcyBhbGxvd3MgdGhlIGNhbGxiYWNrIHRvIGRvXG4gICAgICogYXN5bmNocm9ub3VzIHdvcmsgdG8gZGV0ZXJtaW5lIGlmIHRoaXMgaXRlcmF0aW9uIHNob3VsZCBjb250aW51ZS5cbiAgICAgKlxuICAgICAqIFRoZSBwcm92aWRlZCBjYWxsYmFjayBzaG91bGQgcmV0dXJuIGB0cnVlYCB0byBjb250aW51ZSBpdGVyYXRpb24sIGFuZFxuICAgICAqIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqLyAgICBRdCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmN1cnNvcih7fSk7XG4gICAgICAgIHJldHVybiBuZXcgR3MoKChuLCBzKSA9PiB7XG4gICAgICAgICAgICBlLm9uZXJyb3IgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gbmkodC50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgICAgIHMoZSk7XG4gICAgICAgICAgICB9LCBlLm9uc3VjY2VzcyA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBlLnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgcyA/IHQocy5wcmltYXJ5S2V5LCBzLnZhbHVlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdCA/IHMuY29udGludWUoKSA6IG4oKTtcbiAgICAgICAgICAgICAgICB9KSkgOiBuKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIFV0KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IFtdO1xuICAgICAgICByZXR1cm4gbmV3IEdzKCgocywgaSkgPT4ge1xuICAgICAgICAgICAgdC5vbmVycm9yID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgaSh0LnRhcmdldC5lcnJvcik7XG4gICAgICAgICAgICB9LCB0Lm9uc3VjY2VzcyA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSB0LnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgaWYgKCFpKSByZXR1cm4gdm9pZCBzKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IG5ldyBKcyhpKSwgbyA9IGUoaS5wcmltYXJ5S2V5LCBpLnZhbHVlLCByKTtcbiAgICAgICAgICAgICAgICBpZiAobyBpbnN0YW5jZW9mIEdzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBvLmNhdGNoKCh0ID0+IChyLmRvbmUoKSwgR3MucmVqZWN0KHQpKSkpO1xuICAgICAgICAgICAgICAgICAgICBuLnB1c2godCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHIuaXNEb25lID8gcygpIDogbnVsbCA9PT0gci5NdCA/IGkuY29udGludWUoKSA6IGkuY29udGludWUoci5NdCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gR3Mud2FpdEZvcihuKSkpO1xuICAgIH1cbiAgICBvcHRpb25zKHQsIGUpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHQgJiYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgPyBuID0gdCA6IGUgPSB0KSwge1xuICAgICAgICAgICAgaW5kZXg6IG4sXG4gICAgICAgICAgICByYW5nZTogZVxuICAgICAgICB9O1xuICAgIH1cbiAgICBjdXJzb3IodCkge1xuICAgICAgICBsZXQgZSA9IFwibmV4dFwiO1xuICAgICAgICBpZiAodC5yZXZlcnNlICYmIChlID0gXCJwcmV2XCIpLCB0LmluZGV4KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5zdG9yZS5pbmRleCh0LmluZGV4KTtcbiAgICAgICAgICAgIHJldHVybiB0Lkt0ID8gbi5vcGVuS2V5Q3Vyc29yKHQucmFuZ2UsIGUpIDogbi5vcGVuQ3Vyc29yKHQucmFuZ2UsIGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnN0b3JlLm9wZW5DdXJzb3IodC5yYW5nZSwgZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFdyYXBzIGFuIElEQlJlcXVlc3QgaW4gYSBQZXJzaXN0ZW5jZVByb21pc2UsIHVzaW5nIHRoZSBvbnN1Y2Nlc3MgLyBvbmVycm9yXG4gKiBoYW5kbGVycyB0byByZXNvbHZlIC8gcmVqZWN0IHRoZSBQZXJzaXN0ZW5jZVByb21pc2UgYXMgYXBwcm9wcmlhdGUuXG4gKi8gZnVuY3Rpb24gdGkodCkge1xuICAgIHJldHVybiBuZXcgR3MoKChlLCBuKSA9PiB7XG4gICAgICAgIHQub25zdWNjZXNzID0gdCA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgZShuKTtcbiAgICAgICAgfSwgdC5vbmVycm9yID0gdCA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gbmkodC50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgbihlKTtcbiAgICAgICAgfTtcbiAgICB9KSk7XG59XG5cbi8vIEd1YXJkIHNvIHdlIG9ubHkgcmVwb3J0IHRoZSBlcnJvciBvbmNlLlxubGV0IGVpID0gITE7XG5cbmZ1bmN0aW9uIG5pKHQpIHtcbiAgICBjb25zdCBlID0gSHMuUHQoZ2V0VUEoKSk7XG4gICAgaWYgKGUgPj0gMTIuMiAmJiBlIDwgMTMpIHtcbiAgICAgICAgY29uc3QgZSA9IFwiQW4gaW50ZXJuYWwgZXJyb3Igd2FzIGVuY291bnRlcmVkIGluIHRoZSBJbmRleGVkIERhdGFiYXNlIHNlcnZlclwiO1xuICAgICAgICBpZiAodC5tZXNzYWdlLmluZGV4T2YoZSkgPj0gMCkge1xuICAgICAgICAgICAgLy8gV3JhcCBlcnJvciBpbiBhIG1vcmUgZGVzY3JpcHRpdmUgb25lLlxuICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBqKFwiaW50ZXJuYWxcIiwgYElPU19JTkRFWEVEREJfQlVHMTogSW5kZXhlZERiIGhhcyB0aHJvd24gJyR7ZX0nLiBUaGlzIGlzIGxpa2VseSBkdWUgdG8gYW4gdW5hdm9pZGFibGUgYnVnIGluIGlPUy4gU2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcS81NjQ5NjI5Ni8xMTA5MTUgZm9yIGRldGFpbHMgYW5kIGEgcG90ZW50aWFsIHdvcmthcm91bmQuYCk7XG4gICAgICAgICAgICByZXR1cm4gZWkgfHwgKGVpID0gITAsIFxuICAgICAgICAgICAgLy8gVGhyb3cgYSBnbG9iYWwgZXhjZXB0aW9uIG91dHNpZGUgb2YgdGhpcyBwcm9taXNlIGNoYWluLCBmb3IgdGhlIHVzZXIgdG9cbiAgICAgICAgICAgIC8vIHBvdGVudGlhbGx5IGNhdGNoLlxuICAgICAgICAgICAgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRocm93IHQ7XG4gICAgICAgICAgICB9KSwgMCkpLCB0O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBzaSBleHRlbmRzIFdzIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuV3QgPSB0LCB0aGlzLmN1cnJlbnRTZXF1ZW5jZU51bWJlciA9IGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpaSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IHEodCk7XG4gICAgcmV0dXJuIEhzLkR0KG4uV3QsIGUpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGJhdGNoIG9mIG11dGF0aW9ucyB0aGF0IHdpbGwgYmUgc2VudCBhcyBvbmUgdW5pdCB0byB0aGUgYmFja2VuZC5cbiAqLyBjbGFzcyByaSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGJhdGNoSWQgLSBUaGUgdW5pcXVlIElEIG9mIHRoaXMgbXV0YXRpb24gYmF0Y2guXG4gICAgICogQHBhcmFtIGxvY2FsV3JpdGVUaW1lIC0gVGhlIG9yaWdpbmFsIHdyaXRlIHRpbWUgb2YgdGhpcyBtdXRhdGlvbi5cbiAgICAgKiBAcGFyYW0gYmFzZU11dGF0aW9ucyAtIE11dGF0aW9ucyB0aGF0IGFyZSB1c2VkIHRvIHBvcHVsYXRlIHRoZSBiYXNlXG4gICAgICogdmFsdWVzIHdoZW4gdGhpcyBtdXRhdGlvbiBpcyBhcHBsaWVkIGxvY2FsbHkuIFRoaXMgY2FuIGJlIHVzZWQgdG8gbG9jYWxseVxuICAgICAqIG92ZXJ3cml0ZSB2YWx1ZXMgdGhhdCBhcmUgcGVyc2lzdGVkIGluIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUuIEJhc2VcbiAgICAgKiBtdXRhdGlvbnMgYXJlIG5ldmVyIHNlbnQgdG8gdGhlIGJhY2tlbmQuXG4gICAgICogQHBhcmFtIG11dGF0aW9ucyAtIFRoZSB1c2VyLXByb3ZpZGVkIG11dGF0aW9ucyBpbiB0aGlzIG11dGF0aW9uIGJhdGNoLlxuICAgICAqIFVzZXItcHJvdmlkZWQgbXV0YXRpb25zIGFyZSBhcHBsaWVkIGJvdGggbG9jYWxseSBhbmQgcmVtb3RlbHkgb24gdGhlXG4gICAgICogYmFja2VuZC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMuYmF0Y2hJZCA9IHQsIHRoaXMubG9jYWxXcml0ZVRpbWUgPSBlLCB0aGlzLmJhc2VNdXRhdGlvbnMgPSBuLCB0aGlzLm11dGF0aW9ucyA9IHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgYWxsIHRoZSBtdXRhdGlvbnMgaW4gdGhpcyBNdXRhdGlvbkJhdGNoIHRvIHRoZSBzcGVjaWZpZWQgZG9jdW1lbnRcbiAgICAgKiB0byBjb21wdXRlIHRoZSBzdGF0ZSBvZiB0aGUgcmVtb3RlIGRvY3VtZW50XG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnQgLSBUaGUgZG9jdW1lbnQgdG8gYXBwbHkgbXV0YXRpb25zIHRvLlxuICAgICAqIEBwYXJhbSBiYXRjaFJlc3VsdCAtIFRoZSByZXN1bHQgb2YgYXBwbHlpbmcgdGhlIE11dGF0aW9uQmF0Y2ggdG8gdGhlXG4gICAgICogYmFja2VuZC5cbiAgICAgKi8gICAgYXBwbHlUb1JlbW90ZURvY3VtZW50KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUubXV0YXRpb25SZXN1bHRzO1xuICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHRoaXMubXV0YXRpb25zLmxlbmd0aDsgZSsrKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gdGhpcy5tdXRhdGlvbnNbZV07XG4gICAgICAgICAgICBpZiAocy5rZXkuaXNFcXVhbCh0LmtleSkpIHtcbiAgICAgICAgICAgICAgICBaZShzLCB0LCBuW2VdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wdXRlcyB0aGUgbG9jYWwgdmlldyBvZiBhIGRvY3VtZW50IGdpdmVuIGFsbCB0aGUgbXV0YXRpb25zIGluIHRoaXNcbiAgICAgKiBiYXRjaC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudCAtIFRoZSBkb2N1bWVudCB0byBhcHBseSBtdXRhdGlvbnMgdG8uXG4gICAgICovICAgIGFwcGx5VG9Mb2NhbFZpZXcodCkge1xuICAgICAgICAvLyBGaXJzdCwgYXBwbHkgdGhlIGJhc2Ugc3RhdGUuIFRoaXMgYWxsb3dzIHVzIHRvIGFwcGx5IG5vbi1pZGVtcG90ZW50XG4gICAgICAgIC8vIHRyYW5zZm9ybSBhZ2FpbnN0IGEgY29uc2lzdGVudCBzZXQgb2YgdmFsdWVzLlxuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy5iYXNlTXV0YXRpb25zKSBlLmtleS5pc0VxdWFsKHQua2V5KSAmJiB0bihlLCB0LCB0aGlzLmxvY2FsV3JpdGVUaW1lKTtcbiAgICAgICAgLy8gU2Vjb25kLCBhcHBseSBhbGwgdXNlci1wcm92aWRlZCBtdXRhdGlvbnMuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMubXV0YXRpb25zKSBlLmtleS5pc0VxdWFsKHQua2V5KSAmJiB0bihlLCB0LCB0aGlzLmxvY2FsV3JpdGVUaW1lKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tcHV0ZXMgdGhlIGxvY2FsIHZpZXcgZm9yIGFsbCBwcm92aWRlZCBkb2N1bWVudHMgZ2l2ZW4gdGhlIG11dGF0aW9ucyBpblxuICAgICAqIHRoaXMgYmF0Y2guXG4gICAgICovICAgIGFwcGx5VG9Mb2NhbERvY3VtZW50U2V0KHQpIHtcbiAgICAgICAgLy8gVE9ETyhtcnNjaG1pZHQpOiBUaGlzIGltcGxlbWVudGF0aW9uIGlzIE8obl4yKS4gSWYgd2UgYXBwbHkgdGhlIG11dGF0aW9uc1xuICAgICAgICAvLyBkaXJlY3RseSAoYXMgZG9uZSBpbiBgYXBwbHlUb0xvY2FsVmlldygpYCksIHdlIGNhbiByZWR1Y2UgdGhlIGNvbXBsZXhpdHlcbiAgICAgICAgLy8gdG8gTyhuKS5cbiAgICAgICAgdGhpcy5tdXRhdGlvbnMuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5nZXQoZS5rZXkpLCBzID0gbjtcbiAgICAgICAgICAgIC8vIFRPRE8obXV0YWJsZWRvY3VtZW50cyk6IFRoaXMgbWV0aG9kIHNob3VsZCB0YWtlIGEgTXV0YWJsZURvY3VtZW50TWFwXG4gICAgICAgICAgICAvLyBhbmQgd2Ugc2hvdWxkIHJlbW92ZSB0aGlzIGNhc3QuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5VG9Mb2NhbFZpZXcocyksIG4uaXNWYWxpZERvY3VtZW50KCkgfHwgcy5jb252ZXJ0VG9Ob0RvY3VtZW50KGN0Lm1pbigpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBrZXlzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tdXRhdGlvbnMucmVkdWNlKCgodCwgZSkgPT4gdC5hZGQoZS5rZXkpKSwgU24oKSk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iYXRjaElkID09PSB0LmJhdGNoSWQgJiYgcnQodGhpcy5tdXRhdGlvbnMsIHQubXV0YXRpb25zLCAoKHQsIGUpID0+IG5uKHQsIGUpKSkgJiYgcnQodGhpcy5iYXNlTXV0YXRpb25zLCB0LmJhc2VNdXRhdGlvbnMsICgodCwgZSkgPT4gbm4odCwgZSkpKTtcbiAgICB9XG59XG5cbi8qKiBUaGUgcmVzdWx0IG9mIGFwcGx5aW5nIGEgbXV0YXRpb24gYmF0Y2ggdG8gdGhlIGJhY2tlbmQuICovIGNsYXNzIG9pIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBcbiAgICAvKipcbiAgICAgKiBBIHByZS1jb21wdXRlZCBtYXBwaW5nIGZyb20gZWFjaCBtdXRhdGVkIGRvY3VtZW50IHRvIHRoZSByZXN1bHRpbmdcbiAgICAgKiB2ZXJzaW9uLlxuICAgICAqL1xuICAgIHMpIHtcbiAgICAgICAgdGhpcy5iYXRjaCA9IHQsIHRoaXMuY29tbWl0VmVyc2lvbiA9IGUsIHRoaXMubXV0YXRpb25SZXN1bHRzID0gbiwgdGhpcy5kb2NWZXJzaW9ucyA9IHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgTXV0YXRpb25CYXRjaFJlc3VsdCBmb3IgdGhlIGdpdmVuIGJhdGNoIGFuZCByZXN1bHRzLiBUaGVyZVxuICAgICAqIG11c3QgYmUgb25lIHJlc3VsdCBmb3IgZWFjaCBtdXRhdGlvbiBpbiB0aGUgYmF0Y2guIFRoaXMgc3RhdGljIGZhY3RvcnlcbiAgICAgKiBjYWNoZXMgYSBkb2N1bWVudD0mZ3Q7dmVyc2lvbiBtYXBwaW5nIChkb2NWZXJzaW9ucykuXG4gICAgICovICAgIHN0YXRpYyBmcm9tKHQsIGUsIG4pIHtcbiAgICAgICAgQih0Lm11dGF0aW9ucy5sZW5ndGggPT09IG4ubGVuZ3RoKTtcbiAgICAgICAgbGV0IHMgPSB2bigpO1xuICAgICAgICBjb25zdCBpID0gdC5tdXRhdGlvbnM7XG4gICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgaS5sZW5ndGg7IHQrKykgcyA9IHMuaW5zZXJ0KGlbdF0ua2V5LCBuW3RdLnZlcnNpb24pO1xuICAgICAgICByZXR1cm4gbmV3IG9pKHQsIGUsIG4sIHMpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW1tdXRhYmxlIHNldCBvZiBtZXRhZGF0YSB0aGF0IHRoZSBsb2NhbCBzdG9yZSB0cmFja3MgZm9yIGVhY2ggdGFyZ2V0LlxuICovIGNsYXNzIGFpIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIHRhcmdldCBiZWluZyBsaXN0ZW5lZCB0by4gKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgdGFyZ2V0IElEIHRvIHdoaWNoIHRoZSB0YXJnZXQgY29ycmVzcG9uZHM7IEFzc2lnbmVkIGJ5IHRoZVxuICAgICAqIExvY2FsU3RvcmUgZm9yIHVzZXIgbGlzdGVucyBhbmQgYnkgdGhlIFN5bmNFbmdpbmUgZm9yIGxpbWJvIHdhdGNoZXMuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqIFRoZSBwdXJwb3NlIG9mIHRoZSB0YXJnZXQuICovXG4gICAgbiwgXG4gICAgLyoqXG4gICAgICogVGhlIHNlcXVlbmNlIG51bWJlciBvZiB0aGUgbGFzdCB0cmFuc2FjdGlvbiBkdXJpbmcgd2hpY2ggdGhpcyB0YXJnZXQgZGF0YVxuICAgICAqIHdhcyBtb2RpZmllZC5cbiAgICAgKi9cbiAgICBzLCBcbiAgICAvKiogVGhlIGxhdGVzdCBzbmFwc2hvdCB2ZXJzaW9uIHNlZW4gZm9yIHRoaXMgdGFyZ2V0LiAqL1xuICAgIGkgPSBjdC5taW4oKVxuICAgIC8qKlxuICAgICAqIFRoZSBtYXhpbXVtIHNuYXBzaG90IHZlcnNpb24gYXQgd2hpY2ggdGhlIGFzc29jaWF0ZWQgdmlld1xuICAgICAqIGNvbnRhaW5lZCBubyBsaW1ibyBkb2N1bWVudHMuXG4gICAgICovICwgciA9IGN0Lm1pbigpXG4gICAgLyoqXG4gICAgICogQW4gb3BhcXVlLCBzZXJ2ZXItYXNzaWduZWQgdG9rZW4gdGhhdCBhbGxvd3Mgd2F0Y2hpbmcgYSB0YXJnZXQgdG8gYmVcbiAgICAgKiByZXN1bWVkIGFmdGVyIGRpc2Nvbm5lY3Rpbmcgd2l0aG91dCByZXRyYW5zbWl0dGluZyBhbGwgdGhlIGRhdGEgdGhhdFxuICAgICAqIG1hdGNoZXMgdGhlIHRhcmdldC4gVGhlIHJlc3VtZSB0b2tlbiBlc3NlbnRpYWxseSBpZGVudGlmaWVzIGEgcG9pbnQgaW5cbiAgICAgKiB0aW1lIGZyb20gd2hpY2ggdGhlIHNlcnZlciBzaG91bGQgcmVzdW1lIHNlbmRpbmcgcmVzdWx0cy5cbiAgICAgKi8gLCBvID0geXQuRU1QVFlfQllURV9TVFJJTkcpIHtcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0LCB0aGlzLnRhcmdldElkID0gZSwgdGhpcy5wdXJwb3NlID0gbiwgdGhpcy5zZXF1ZW5jZU51bWJlciA9IHMsIHRoaXMuc25hcHNob3RWZXJzaW9uID0gaSwgXG4gICAgICAgIHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiA9IHIsIHRoaXMucmVzdW1lVG9rZW4gPSBvO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgZGF0YSBpbnN0YW5jZSB3aXRoIGFuIHVwZGF0ZWQgc2VxdWVuY2UgbnVtYmVyLiAqLyAgICB3aXRoU2VxdWVuY2VOdW1iZXIodCkge1xuICAgICAgICByZXR1cm4gbmV3IGFpKHRoaXMudGFyZ2V0LCB0aGlzLnRhcmdldElkLCB0aGlzLnB1cnBvc2UsIHQsIHRoaXMuc25hcHNob3RWZXJzaW9uLCB0aGlzLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24sIHRoaXMucmVzdW1lVG9rZW4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRhcmdldCBkYXRhIGluc3RhbmNlIHdpdGggYW4gdXBkYXRlZCByZXN1bWUgdG9rZW4gYW5kXG4gICAgICogc25hcHNob3QgdmVyc2lvbi5cbiAgICAgKi8gICAgd2l0aFJlc3VtZVRva2VuKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBhaSh0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRJZCwgdGhpcy5wdXJwb3NlLCB0aGlzLnNlcXVlbmNlTnVtYmVyLCBlLCB0aGlzLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24sIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRhcmdldCBkYXRhIGluc3RhbmNlIHdpdGggYW4gdXBkYXRlZCBsYXN0IGxpbWJvIGZyZWVcbiAgICAgKiBzbmFwc2hvdCB2ZXJzaW9uIG51bWJlci5cbiAgICAgKi8gICAgd2l0aExhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24odCkge1xuICAgICAgICByZXR1cm4gbmV3IGFpKHRoaXMudGFyZ2V0LCB0aGlzLnRhcmdldElkLCB0aGlzLnB1cnBvc2UsIHRoaXMuc2VxdWVuY2VOdW1iZXIsIHRoaXMuc25hcHNob3RWZXJzaW9uLCB0LCB0aGlzLnJlc3VtZVRva2VuKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogU2VyaWFsaXplciBmb3IgdmFsdWVzIHN0b3JlZCBpbiB0aGUgTG9jYWxTdG9yZS4gKi8gY2xhc3MgY2kge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5HdCA9IHQ7XG4gICAgfVxufVxuXG4vKiogRGVjb2RlcyBhIHJlbW90ZSBkb2N1bWVudCBmcm9tIHN0b3JhZ2UgbG9jYWxseSB0byBhIERvY3VtZW50LiAqLyBmdW5jdGlvbiB1aSh0LCBlKSB7XG4gICAgaWYgKGUuZG9jdW1lbnQpIHJldHVybiBzcyh0Lkd0LCBlLmRvY3VtZW50LCAhIWUuaGFzQ29tbWl0dGVkTXV0YXRpb25zKTtcbiAgICBpZiAoZS5ub0RvY3VtZW50KSB7XG4gICAgICAgIGNvbnN0IHQgPSBTdC5mcm9tU2VnbWVudHMoZS5ub0RvY3VtZW50LnBhdGgpLCBuID0gd2koZS5ub0RvY3VtZW50LnJlYWRUaW1lKSwgcyA9IFd0Lm5ld05vRG9jdW1lbnQodCwgbik7XG4gICAgICAgIHJldHVybiBlLmhhc0NvbW1pdHRlZE11dGF0aW9ucyA/IHMuc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCkgOiBzO1xuICAgIH1cbiAgICBpZiAoZS51bmtub3duRG9jdW1lbnQpIHtcbiAgICAgICAgY29uc3QgdCA9IFN0LmZyb21TZWdtZW50cyhlLnVua25vd25Eb2N1bWVudC5wYXRoKSwgbiA9IHdpKGUudW5rbm93bkRvY3VtZW50LnZlcnNpb24pO1xuICAgICAgICByZXR1cm4gV3QubmV3VW5rbm93bkRvY3VtZW50KHQsIG4pO1xuICAgIH1cbiAgICByZXR1cm4gTCgpO1xufVxuXG4vKiogRW5jb2RlcyBhIGRvY3VtZW50IGZvciBzdG9yYWdlIGxvY2FsbHkuICovIGZ1bmN0aW9uIGhpKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gbGkobiksIGkgPSBlLmtleS5wYXRoLnBvcExhc3QoKS50b0FycmF5KCk7XG4gICAgaWYgKGUuaXNGb3VuZERvY3VtZW50KCkpIHtcbiAgICAgICAgY29uc3QgbiA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbmFtZTogSm4odCwgZS5rZXkpLFxuICAgICAgICAgICAgICAgIGZpZWxkczogZS5kYXRhLnZhbHVlLm1hcFZhbHVlLmZpZWxkcyxcbiAgICAgICAgICAgICAgICB1cGRhdGVUaW1lOiBqbih0LCBlLnZlcnNpb24udG9UaW1lc3RhbXAoKSlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0odC5HdCwgZSksIHIgPSBlLmhhc0NvbW1pdHRlZE11dGF0aW9ucztcbiAgICAgICAgcmV0dXJuIG5ldyAkcyhcbiAgICAgICAgLyogdW5rbm93bkRvY3VtZW50PSAqLyBudWxsLCBcbiAgICAgICAgLyogbm9Eb2N1bWVudD0gKi8gbnVsbCwgbiwgciwgcywgaSk7XG4gICAgfVxuICAgIGlmIChlLmlzTm9Eb2N1bWVudCgpKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLmtleS5wYXRoLnRvQXJyYXkoKSwgbiA9IGRpKGUudmVyc2lvbiksIHIgPSBlLmhhc0NvbW1pdHRlZE11dGF0aW9ucztcbiAgICAgICAgcmV0dXJuIG5ldyAkcyhcbiAgICAgICAgLyogdW5rbm93bkRvY3VtZW50PSAqLyBudWxsLCBuZXcga3ModCwgbiksIFxuICAgICAgICAvKiBkb2N1bWVudD0gKi8gbnVsbCwgciwgcywgaSk7XG4gICAgfVxuICAgIGlmIChlLmlzVW5rbm93bkRvY3VtZW50KCkpIHtcbiAgICAgICAgY29uc3QgdCA9IGUua2V5LnBhdGgudG9BcnJheSgpLCBuID0gZGkoZS52ZXJzaW9uKTtcbiAgICAgICAgcmV0dXJuIG5ldyAkcyhuZXcgeHModCwgbiksIFxuICAgICAgICAvKiBub0RvY3VtZW50PSAqLyBudWxsLCBcbiAgICAgICAgLyogZG9jdW1lbnQ9ICovIG51bGwsIFxuICAgICAgICAvKiBoYXNDb21taXR0ZWRNdXRhdGlvbnM9ICovICEwLCBzLCBpKTtcbiAgICB9XG4gICAgcmV0dXJuIEwoKTtcbn1cblxuZnVuY3Rpb24gbGkodCkge1xuICAgIGNvbnN0IGUgPSB0LnRvVGltZXN0YW1wKCk7XG4gICAgcmV0dXJuIFsgZS5zZWNvbmRzLCBlLm5hbm9zZWNvbmRzIF07XG59XG5cbmZ1bmN0aW9uIGZpKHQpIHtcbiAgICBjb25zdCBlID0gbmV3IGF0KHRbMF0sIHRbMV0pO1xuICAgIHJldHVybiBjdC5mcm9tVGltZXN0YW1wKGUpO1xufVxuXG5mdW5jdGlvbiBkaSh0KSB7XG4gICAgY29uc3QgZSA9IHQudG9UaW1lc3RhbXAoKTtcbiAgICByZXR1cm4gbmV3IFZzKGUuc2Vjb25kcywgZS5uYW5vc2Vjb25kcyk7XG59XG5cbmZ1bmN0aW9uIHdpKHQpIHtcbiAgICBjb25zdCBlID0gbmV3IGF0KHQuc2Vjb25kcywgdC5uYW5vc2Vjb25kcyk7XG4gICAgcmV0dXJuIGN0LmZyb21UaW1lc3RhbXAoZSk7XG59XG5cbi8qKiBFbmNvZGVzIGEgYmF0Y2ggb2YgbXV0YXRpb25zIGludG8gYSBEYk11dGF0aW9uQmF0Y2ggZm9yIGxvY2FsIHN0b3JhZ2UuICovXG4vKiogRGVjb2RlcyBhIERiTXV0YXRpb25CYXRjaCBpbnRvIGEgTXV0YXRpb25CYXRjaCAqL1xuZnVuY3Rpb24gX2kodCwgZSkge1xuICAgIGNvbnN0IG4gPSAoZS5iYXNlTXV0YXRpb25zIHx8IFtdKS5tYXAoKGUgPT4gYXModC5HdCwgZSkpKTtcbiAgICAvLyBTcXVhc2ggb2xkIHRyYW5zZm9ybSBtdXRhdGlvbnMgaW50byBleGlzdGluZyBwYXRjaCBvciBzZXQgbXV0YXRpb25zLlxuICAgIC8vIFRoZSByZXBsYWNlbWVudCBvZiByZXByZXNlbnRpbmcgYHRyYW5zZm9ybXNgIHdpdGggYHVwZGF0ZV90cmFuc2Zvcm1zYFxuICAgIC8vIG9uIHRoZSBTREsgbWVhbnMgdGhhdCBvbGQgYHRyYW5zZm9ybWAgbXV0YXRpb25zIHN0b3JlZCBpbiBJbmRleGVkREIgbmVlZFxuICAgIC8vIHRvIGJlIHVwZGF0ZWQgdG8gYHVwZGF0ZV90cmFuc2Zvcm1zYC5cbiAgICAvLyBUT0RPKGIvMTc0NjA4Mzc0KTogUmVtb3ZlIHRoaXMgY29kZSBvbmNlIHdlIHBlcmZvcm0gYSBzY2hlbWEgbWlncmF0aW9uLlxuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IGUubXV0YXRpb25zLmxlbmd0aCAtIDE7ICsrdCkge1xuICAgICAgICBjb25zdCBuID0gZS5tdXRhdGlvbnNbdF07XG4gICAgICAgIGlmICh0ICsgMSA8IGUubXV0YXRpb25zLmxlbmd0aCAmJiB2b2lkIDAgIT09IGUubXV0YXRpb25zW3QgKyAxXS50cmFuc2Zvcm0pIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBlLm11dGF0aW9uc1t0ICsgMV07XG4gICAgICAgICAgICBuLnVwZGF0ZVRyYW5zZm9ybXMgPSBzLnRyYW5zZm9ybS5maWVsZFRyYW5zZm9ybXMsIGUubXV0YXRpb25zLnNwbGljZSh0ICsgMSwgMSksIFxuICAgICAgICAgICAgKyt0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHMgPSBlLm11dGF0aW9ucy5tYXAoKGUgPT4gYXModC5HdCwgZSkpKSwgaSA9IGF0LmZyb21NaWxsaXMoZS5sb2NhbFdyaXRlVGltZU1zKTtcbiAgICByZXR1cm4gbmV3IHJpKGUuYmF0Y2hJZCwgaSwgbiwgcyk7XG59XG5cbi8qKiBEZWNvZGVzIGEgRGJUYXJnZXQgaW50byBUYXJnZXREYXRhICovIGZ1bmN0aW9uIG1pKHQpIHtcbiAgICBjb25zdCBlID0gd2kodC5yZWFkVGltZSksIG4gPSB2b2lkIDAgIT09IHQubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiA/IHdpKHQubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbikgOiBjdC5taW4oKTtcbiAgICBsZXQgcztcbiAgICB2YXIgaTtcbiAgICByZXR1cm4gdm9pZCAwICE9PSB0LnF1ZXJ5LmRvY3VtZW50cyA/IChCKDEgPT09IChpID0gdC5xdWVyeSkuZG9jdW1lbnRzLmxlbmd0aCksIFxuICAgIHMgPSBSZShnZShabihpLmRvY3VtZW50c1swXSkpKSkgOiBzID0gZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gUmUobHModCkpO1xuICAgIH0odC5xdWVyeSksIG5ldyBhaShzLCB0LnRhcmdldElkLCAwIC8qIExpc3RlbiAqLyAsIHQubGFzdExpc3RlblNlcXVlbmNlTnVtYmVyLCBlLCBuLCB5dC5mcm9tQmFzZTY0U3RyaW5nKHQucmVzdW1lVG9rZW4pKTtcbn1cblxuLyoqIEVuY29kZXMgVGFyZ2V0RGF0YSBpbnRvIGEgRGJUYXJnZXQgZm9yIHN0b3JhZ2UgbG9jYWxseS4gKi8gZnVuY3Rpb24gZ2kodCwgZSkge1xuICAgIGNvbnN0IG4gPSBkaShlLnNuYXBzaG90VmVyc2lvbiksIHMgPSBkaShlLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24pO1xuICAgIGxldCBpO1xuICAgIGkgPSBYdChlLnRhcmdldCkgPyB1cyh0Lkd0LCBlLnRhcmdldCkgOiBocyh0Lkd0LCBlLnRhcmdldCk7XG4gICAgLy8gV2UgY2FuJ3Qgc3RvcmUgdGhlIHJlc3VtZVRva2VuIGFzIGEgQnl0ZVN0cmluZyBpbiBJbmRleGVkRGIsIHNvIHdlXG4gICAgLy8gY29udmVydCBpdCB0byBhIGJhc2U2NCBzdHJpbmcgZm9yIHN0b3JhZ2UuXG4gICAgICAgIGNvbnN0IHIgPSBlLnJlc3VtZVRva2VuLnRvQmFzZTY0KCk7XG4gICAgLy8gbGFzdExpc3RlblNlcXVlbmNlTnVtYmVyIGlzIGFsd2F5cyAwIHVudGlsIHdlIGRvIHJlYWwgR0MuXG4gICAgICAgIHJldHVybiBuZXcgT3MoZS50YXJnZXRJZCwgSHQoZS50YXJnZXQpLCBuLCByLCBlLnNlcXVlbmNlTnVtYmVyLCBzLCBpKTtcbn1cblxuLyoqXG4gKiBBIGhlbHBlciBmdW5jdGlvbiBmb3IgZmlndXJpbmcgb3V0IHdoYXQga2luZCBvZiBxdWVyeSBoYXMgYmVlbiBzdG9yZWQuXG4gKi9cbi8qKlxuICogRW5jb2RlcyBhIGBCdW5kbGVkUXVlcnlgIGZyb20gYnVuZGxlIHByb3RvIHRvIGEgUXVlcnkgb2JqZWN0LlxuICpcbiAqIFRoaXMgcmVjb25zdHJ1Y3RzIHRoZSBvcmlnaW5hbCBxdWVyeSB1c2VkIHRvIGJ1aWxkIHRoZSBidW5kbGUgYmVpbmcgbG9hZGVkLFxuICogaW5jbHVkaW5nIGZlYXR1cmVzIGV4aXN0cyBvbmx5IGluIFNES3MgKGZvciBleGFtcGxlOiBsaW1pdC10by1sYXN0KS5cbiAqL1xuZnVuY3Rpb24geWkodCkge1xuICAgIGNvbnN0IGUgPSBscyh7XG4gICAgICAgIHBhcmVudDogdC5wYXJlbnQsXG4gICAgICAgIHN0cnVjdHVyZWRRdWVyeTogdC5zdHJ1Y3R1cmVkUXVlcnlcbiAgICB9KTtcbiAgICByZXR1cm4gXCJMQVNUXCIgPT09IHQubGltaXRUeXBlID8gUGUoZSwgZS5saW1pdCwgXCJMXCIgLyogTGFzdCAqLykgOiBlO1xufVxuXG4vKiogRW5jb2RlcyBhIE5hbWVkUXVlcnkgcHJvdG8gb2JqZWN0IHRvIGEgTmFtZWRRdWVyeSBtb2RlbCBvYmplY3QuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY2xhc3MgcGkge1xuICAgIGdldEJ1bmRsZU1ldGFkYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIFRpKHQpLmdldChlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGlmICh0KSByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlkOiAoZSA9IHQpLmJ1bmRsZUlkLFxuICAgICAgICAgICAgICAgIGNyZWF0ZVRpbWU6IHdpKGUuY3JlYXRlVGltZSksXG4gICAgICAgICAgICAgICAgdmVyc2lvbjogZS52ZXJzaW9uXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLyoqIEVuY29kZXMgYSBEYkJ1bmRsZSB0byBhIEJ1bmRsZU1ldGFkYXRhIG9iamVjdC4gKi9cbiAgICAgICAgICAgIHZhciBlO1xuICAgICAgICAgICAgLyoqIEVuY29kZXMgYSBCdW5kbGVNZXRhZGF0YSB0byBhIERiQnVuZGxlLiAqLyAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzYXZlQnVuZGxlTWV0YWRhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gVGkodCkucHV0KHtcbiAgICAgICAgICAgIGJ1bmRsZUlkOiAobiA9IGUpLmlkLFxuICAgICAgICAgICAgY3JlYXRlVGltZTogZGkoR24obi5jcmVhdGVUaW1lKSksXG4gICAgICAgICAgICB2ZXJzaW9uOiBuLnZlcnNpb25cbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBuO1xuICAgICAgICAvKiogRW5jb2RlcyBhIERiTmFtZWRRdWVyeSB0byBhIE5hbWVkUXVlcnkuICovICAgIH1cbiAgICBnZXROYW1lZFF1ZXJ5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIEVpKHQpLmdldChlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGlmICh0KSByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5hbWU6IChlID0gdCkubmFtZSxcbiAgICAgICAgICAgICAgICBxdWVyeTogeWkoZS5idW5kbGVkUXVlcnkpLFxuICAgICAgICAgICAgICAgIHJlYWRUaW1lOiB3aShlLnJlYWRUaW1lKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBlO1xuICAgICAgICAgICAgLyoqIEVuY29kZXMgYSBOYW1lZFF1ZXJ5IGZyb20gYSBidW5kbGUgcHJvdG8gdG8gYSBEYk5hbWVkUXVlcnkuICovICAgICAgICB9KSk7XG4gICAgfVxuICAgIHNhdmVOYW1lZFF1ZXJ5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIEVpKHQpLnB1dChmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5hbWU6IHQubmFtZSxcbiAgICAgICAgICAgICAgICByZWFkVGltZTogZGkoR24odC5yZWFkVGltZSkpLFxuICAgICAgICAgICAgICAgIGJ1bmRsZWRRdWVyeTogdC5idW5kbGVkUXVlcnlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0oZSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGJ1bmRsZXMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIFRpKHQpIHtcbiAgICByZXR1cm4gaWkodCwgcXMuc3RvcmUpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgbmFtZWRRdWVyaWVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBFaSh0KSB7XG4gICAgcmV0dXJuIGlpKHQsIEtzLnN0b3JlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW4tbWVtb3J5IGltcGxlbWVudGF0aW9uIG9mIEluZGV4TWFuYWdlci5cbiAqLyBjbGFzcyBJaSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuenQgPSBuZXcgQWk7XG4gICAgfVxuICAgIGFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuenQuYWRkKGUpLCBHcy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldENvbGxlY3Rpb25QYXJlbnRzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIEdzLnJlc29sdmUodGhpcy56dC5nZXRFbnRyaWVzKGUpKTtcbiAgICB9XG59XG5cbi8qKlxuICogSW50ZXJuYWwgaW1wbGVtZW50YXRpb24gb2YgdGhlIGNvbGxlY3Rpb24tcGFyZW50IGluZGV4IGV4cG9zZWQgYnkgTWVtb3J5SW5kZXhNYW5hZ2VyLlxuICogQWxzbyB1c2VkIGZvciBpbi1tZW1vcnkgY2FjaGluZyBieSBJbmRleGVkRGJJbmRleE1hbmFnZXIgYW5kIGluaXRpYWwgaW5kZXggcG9wdWxhdGlvblxuICogaW4gaW5kZXhlZGRiX3NjaGVtYS50c1xuICovIGNsYXNzIEFpIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5pbmRleCA9IHt9O1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGZhbHNlIGlmIHRoZSBlbnRyeSBhbHJlYWR5IGV4aXN0ZWQuXG4gICAgYWRkKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQubGFzdFNlZ21lbnQoKSwgbiA9IHQucG9wTGFzdCgpLCBzID0gdGhpcy5pbmRleFtlXSB8fCBuZXcgVG4oZHQuY29tcGFyYXRvciksIGkgPSAhcy5oYXMobik7XG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4W2VdID0gcy5hZGQobiksIGk7XG4gICAgfVxuICAgIGhhcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0Lmxhc3RTZWdtZW50KCksIG4gPSB0LnBvcExhc3QoKSwgcyA9IHRoaXMuaW5kZXhbZV07XG4gICAgICAgIHJldHVybiBzICYmIHMuaGFzKG4pO1xuICAgIH1cbiAgICBnZXRFbnRyaWVzKHQpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmluZGV4W3RdIHx8IG5ldyBUbihkdC5jb21wYXJhdG9yKSkudG9BcnJheSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBwZXJzaXN0ZWQgaW1wbGVtZW50YXRpb24gb2YgSW5kZXhNYW5hZ2VyLlxuICovIGNsYXNzIFJpIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFuIGluLW1lbW9yeSBjb3B5IG9mIHRoZSBpbmRleCBlbnRyaWVzIHdlJ3ZlIGFscmVhZHkgd3JpdHRlbiBzaW5jZSB0aGUgU0RLXG4gICAgICAgICAqIGxhdW5jaGVkLiBVc2VkIHRvIGF2b2lkIHJlLXdyaXRpbmcgdGhlIHNhbWUgZW50cnkgcmVwZWF0ZWRseS5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhpcyBpcyAqTk9UKiBhIGNvbXBsZXRlIGNhY2hlIG9mIHdoYXQncyBpbiBwZXJzaXN0ZW5jZSBhbmQgc28gY2FuIG5ldmVyIGJlIHVzZWQgdG9cbiAgICAgICAgICogc2F0aXNmeSByZWFkcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuSHQgPSBuZXcgQWk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBuZXcgZW50cnkgdG8gdGhlIGNvbGxlY3Rpb24gcGFyZW50IGluZGV4LlxuICAgICAqXG4gICAgICogUmVwZWF0ZWQgY2FsbHMgZm9yIHRoZSBzYW1lIGNvbGxlY3Rpb25QYXRoIHNob3VsZCBiZSBhdm9pZGVkIHdpdGhpbiBhXG4gICAgICogdHJhbnNhY3Rpb24gYXMgSW5kZXhlZERiSW5kZXhNYW5hZ2VyIG9ubHkgY2FjaGVzIHdyaXRlcyBvbmNlIGEgdHJhbnNhY3Rpb25cbiAgICAgKiBoYXMgYmVlbiBjb21taXR0ZWQuXG4gICAgICovICAgIGFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KHQsIGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLkh0LmhhcyhlKSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IGUubGFzdFNlZ21lbnQoKSwgcyA9IGUucG9wTGFzdCgpO1xuICAgICAgICAgICAgdC5hZGRPbkNvbW1pdHRlZExpc3RlbmVyKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBjb2xsZWN0aW9uIHRvIHRoZSBpbiBtZW1vcnkgY2FjaGUgb25seSBpZiB0aGUgdHJhbnNhY3Rpb24gd2FzXG4gICAgICAgICAgICAgICAgLy8gc3VjY2Vzc2Z1bGx5IGNvbW1pdHRlZC5cbiAgICAgICAgICAgICAgICB0aGlzLkh0LmFkZChlKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB7XG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbklkOiBuLFxuICAgICAgICAgICAgICAgIHBhcmVudDogUnMocylcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gUGkodCkucHV0KGkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBHcy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldENvbGxlY3Rpb25QYXJlbnRzKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IFtdLCBzID0gSURCS2V5UmFuZ2UuYm91bmQoWyBlLCBcIlwiIF0sIFsgb3QoZSksIFwiXCIgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gITApO1xuICAgICAgICByZXR1cm4gUGkodCkuQnQocykubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHMgb2YgdCkge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgY29sbGVjdGlvbklkIGd1YXJkIHNob3VsZG4ndCBiZSBuZWNlc3NhcnkgKGFuZCBpc24ndCBhcyBsb25nXG4gICAgICAgICAgICAgICAgLy8gYXMgd2UncmUgcnVubmluZyBpbiBhIHJlYWwgYnJvd3NlciksIGJ1dCB0aGVyZSdzIGEgYnVnIGluXG4gICAgICAgICAgICAgICAgLy8gaW5kZXhlZGRic2hpbSB0aGF0IGJyZWFrcyBvdXIgcmFuZ2UgaW4gb3VyIHRlc3RzIHJ1bm5pbmcgaW4gbm9kZTpcbiAgICAgICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYXhlbWNsaW9uL0luZGV4ZWREQlNoaW0vaXNzdWVzLzMzNFxuICAgICAgICAgICAgICAgIGlmIChzLmNvbGxlY3Rpb25JZCAhPT0gZSkgYnJlYWs7XG4gICAgICAgICAgICAgICAgbi5wdXNoKHZzKHMucGFyZW50KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbjtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGNvbGxlY3Rpb25QYXJlbnRzXG4gKiBkb2N1bWVudCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBQaSh0KSB7XG4gICAgcmV0dXJuIGlpKHQsIEJzLnN0b3JlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgYmkgPSB7XG4gICAgZGlkUnVuOiAhMSxcbiAgICBzZXF1ZW5jZU51bWJlcnNDb2xsZWN0ZWQ6IDAsXG4gICAgdGFyZ2V0c1JlbW92ZWQ6IDAsXG4gICAgZG9jdW1lbnRzUmVtb3ZlZDogMFxufTtcblxuY2xhc3Mgdmkge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8vIFdoZW4gd2UgYXR0ZW1wdCB0byBjb2xsZWN0LCB3ZSB3aWxsIG9ubHkgZG8gc28gaWYgdGhlIGNhY2hlIHNpemUgaXMgZ3JlYXRlciB0aGFuIHRoaXNcbiAgICAvLyB0aHJlc2hvbGQuIFBhc3NpbmcgYENPTExFQ1RJT05fRElTQUJMRURgIGhlcmUgd2lsbCBjYXVzZSBjb2xsZWN0aW9uIHRvIGFsd2F5cyBiZSBza2lwcGVkLlxuICAgIHQsIFxuICAgIC8vIFRoZSBwZXJjZW50YWdlIG9mIHNlcXVlbmNlIG51bWJlcnMgdGhhdCB3ZSB3aWxsIGF0dGVtcHQgdG8gY29sbGVjdFxuICAgIGUsIFxuICAgIC8vIEEgY2FwIG9uIHRoZSB0b3RhbCBudW1iZXIgb2Ygc2VxdWVuY2UgbnVtYmVycyB0aGF0IHdpbGwgYmUgY29sbGVjdGVkLiBUaGlzIHByZXZlbnRzXG4gICAgLy8gdXMgZnJvbSBjb2xsZWN0aW5nIGEgaHVnZSBudW1iZXIgb2Ygc2VxdWVuY2UgbnVtYmVycyBpZiB0aGUgY2FjaGUgaGFzIGdyb3duIHZlcnkgbGFyZ2UuXG4gICAgbikge1xuICAgICAgICB0aGlzLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQgPSB0LCB0aGlzLnBlcmNlbnRpbGVUb0NvbGxlY3QgPSBlLCB0aGlzLm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QgPSBuO1xuICAgIH1cbiAgICBzdGF0aWMgd2l0aENhY2hlU2l6ZSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgdmkodCwgdmkuREVGQVVMVF9DT0xMRUNUSU9OX1BFUkNFTlRJTEUsIHZpLkRFRkFVTFRfTUFYX1NFUVVFTkNFX05VTUJFUlNfVE9fQ09MTEVDVCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBEZWxldGUgYSBtdXRhdGlvbiBiYXRjaCBhbmQgdGhlIGFzc29jaWF0ZWQgZG9jdW1lbnQgbXV0YXRpb25zLlxuICogQHJldHVybnMgQSBQZXJzaXN0ZW5jZVByb21pc2Ugb2YgdGhlIGRvY3VtZW50IG11dGF0aW9ucyB0aGF0IHdlcmUgcmVtb3ZlZC5cbiAqL1xuZnVuY3Rpb24gVmkodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSB0LnN0b3JlKENzLnN0b3JlKSwgaSA9IHQuc3RvcmUoTnMuc3RvcmUpLCByID0gW10sIG8gPSBJREJLZXlSYW5nZS5vbmx5KG4uYmF0Y2hJZCk7XG4gICAgbGV0IGEgPSAwO1xuICAgIGNvbnN0IGMgPSBzLmp0KHtcbiAgICAgICAgcmFuZ2U6IG9cbiAgICB9LCAoKHQsIGUsIG4pID0+IChhKyssIG4uZGVsZXRlKCkpKSk7XG4gICAgci5wdXNoKGMubmV4dCgoKCkgPT4ge1xuICAgICAgICBCKDEgPT09IGEpO1xuICAgIH0pKSk7XG4gICAgY29uc3QgdSA9IFtdO1xuICAgIGZvciAoY29uc3QgdCBvZiBuLm11dGF0aW9ucykge1xuICAgICAgICBjb25zdCBzID0gTnMua2V5KGUsIHQua2V5LnBhdGgsIG4uYmF0Y2hJZCk7XG4gICAgICAgIHIucHVzaChpLmRlbGV0ZShzKSksIHUucHVzaCh0LmtleSk7XG4gICAgfVxuICAgIHJldHVybiBHcy53YWl0Rm9yKHIpLm5leHQoKCgpID0+IHUpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGFuIGFwcHJveGltYXRlIHNpemUgZm9yIHRoZSBnaXZlbiBkb2N1bWVudC5cbiAqLyBmdW5jdGlvbiBTaSh0KSB7XG4gICAgaWYgKCF0KSByZXR1cm4gMDtcbiAgICBsZXQgZTtcbiAgICBpZiAodC5kb2N1bWVudCkgZSA9IHQuZG9jdW1lbnQ7IGVsc2UgaWYgKHQudW5rbm93bkRvY3VtZW50KSBlID0gdC51bmtub3duRG9jdW1lbnQ7IGVsc2Uge1xuICAgICAgICBpZiAoIXQubm9Eb2N1bWVudCkgdGhyb3cgTCgpO1xuICAgICAgICBlID0gdC5ub0RvY3VtZW50O1xuICAgIH1cbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZSkubGVuZ3RoO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIEEgbXV0YXRpb24gcXVldWUgZm9yIGEgc3BlY2lmaWMgdXNlciwgYmFja2VkIGJ5IEluZGV4ZWREQi4gKi8gdmkuREVGQVVMVF9DT0xMRUNUSU9OX1BFUkNFTlRJTEUgPSAxMCwgXG52aS5ERUZBVUxUX01BWF9TRVFVRU5DRV9OVU1CRVJTX1RPX0NPTExFQ1QgPSAxZTMsIHZpLkRFRkFVTFQgPSBuZXcgdmkoNDE5NDMwNDAsIHZpLkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFLCB2aS5ERUZBVUxUX01BWF9TRVFVRU5DRV9OVU1CRVJTX1RPX0NPTExFQ1QpLCBcbnZpLkRJU0FCTEVEID0gbmV3IHZpKC0xLCAwLCAwKTtcblxuY2xhc3MgRGkge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBub3JtYWxpemVkIHVzZXJJZCAoZS5nLiBudWxsIFVJRCA9PiBcIlwiIHVzZXJJZCkgdXNlZCB0byBzdG9yZSAvXG4gICAgICogcmV0cmlldmUgbXV0YXRpb25zLlxuICAgICAqL1xuICAgIHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy51c2VySWQgPSB0LCB0aGlzLmsgPSBlLCB0aGlzLkp0ID0gbiwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IHMsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FjaGVzIHRoZSBkb2N1bWVudCBrZXlzIGZvciBwZW5kaW5nIG11dGF0aW9uIGJhdGNoZXMuIElmIHRoZSBtdXRhdGlvblxuICAgICAgICAgKiBoYXMgYmVlbiByZW1vdmVkIGZyb20gSW5kZXhlZERiLCB0aGUgY2FjaGVkIHZhbHVlIG1heSBjb250aW51ZSB0b1xuICAgICAgICAgKiBiZSB1c2VkIHRvIHJldHJpZXZlIHRoZSBiYXRjaCdzIGRvY3VtZW50IGtleXMuIFRvIHJlbW92ZSBhIGNhY2hlZCB2YWx1ZVxuICAgICAgICAgKiBsb2NhbGx5LCBgcmVtb3ZlQ2FjaGVkTXV0YXRpb25LZXlzKClgIHNob3VsZCBiZSBpbnZva2VkIGVpdGhlciBkaXJlY3RseVxuICAgICAgICAgKiBvciB0aHJvdWdoIGByZW1vdmVNdXRhdGlvbkJhdGNoZXMoKWAuXG4gICAgICAgICAqXG4gICAgICAgICAqIFdpdGggbXVsdGktdGFiLCB3aGVuIHRoZSBwcmltYXJ5IGNsaWVudCBhY2tub3dsZWRnZXMgb3IgcmVqZWN0cyBhIG11dGF0aW9uLFxuICAgICAgICAgKiB0aGlzIGNhY2hlIGlzIHVzZWQgYnkgc2Vjb25kYXJ5IGNsaWVudHMgdG8gaW52YWxpZGF0ZSB0aGUgbG9jYWxcbiAgICAgICAgICogdmlldyBvZiB0aGUgZG9jdW1lbnRzIHRoYXQgd2VyZSBwcmV2aW91c2x5IGFmZmVjdGVkIGJ5IHRoZSBtdXRhdGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgICAgIHRoaXMuWXQgPSB7fTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBtdXRhdGlvbiBxdWV1ZSBmb3IgdGhlIGdpdmVuIHVzZXIuXG4gICAgICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlciBmb3Igd2hpY2ggdG8gY3JlYXRlIGEgbXV0YXRpb24gcXVldWUuXG4gICAgICogQHBhcmFtIHNlcmlhbGl6ZXIgLSBUaGUgc2VyaWFsaXplciB0byB1c2Ugd2hlbiBwZXJzaXN0aW5nIHRvIEluZGV4ZWREYi5cbiAgICAgKi8gICAgc3RhdGljIFh0KHQsIGUsIG4sIHMpIHtcbiAgICAgICAgLy8gVE9ETyhtY2cpOiBGaWd1cmUgb3V0IHdoYXQgY29uc3RyYWludHMgdGhlcmUgYXJlIG9uIHVzZXJJRHNcbiAgICAgICAgLy8gSW4gcGFydGljdWxhciwgYXJlIHRoZXJlIGFueSByZXNlcnZlZCBjaGFyYWN0ZXJzPyBhcmUgZW1wdHkgaWRzIGFsbG93ZWQ/XG4gICAgICAgIC8vIEZvciB0aGUgbW9tZW50IHN0b3JlIHRoZXNlIHRvZ2V0aGVyIGluIHRoZSBzYW1lIG11dGF0aW9ucyB0YWJsZSBhc3N1bWluZ1xuICAgICAgICAvLyB0aGF0IGVtcHR5IHVzZXJJRHMgYXJlbid0IGFsbG93ZWQuXG4gICAgICAgIEIoXCJcIiAhPT0gdC51aWQpO1xuICAgICAgICBjb25zdCBpID0gdC5pc0F1dGhlbnRpY2F0ZWQoKSA/IHQudWlkIDogXCJcIjtcbiAgICAgICAgcmV0dXJuIG5ldyBEaShpLCBlLCBuLCBzKTtcbiAgICB9XG4gICAgY2hlY2tFbXB0eSh0KSB7XG4gICAgICAgIGxldCBlID0gITA7XG4gICAgICAgIGNvbnN0IG4gPSBJREJLZXlSYW5nZS5ib3VuZChbIHRoaXMudXNlcklkLCBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkgXSwgWyB0aGlzLnVzZXJJZCwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIF0pO1xuICAgICAgICByZXR1cm4gTmkodCkuanQoe1xuICAgICAgICAgICAgaW5kZXg6IENzLnVzZXJNdXRhdGlvbnNJbmRleCxcbiAgICAgICAgICAgIHJhbmdlOiBuXG4gICAgICAgIH0sICgodCwgbiwgcykgPT4ge1xuICAgICAgICAgICAgZSA9ICExLCBzLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGUpKTtcbiAgICB9XG4gICAgYWRkTXV0YXRpb25CYXRjaCh0LCBlLCBuLCBzKSB7XG4gICAgICAgIGNvbnN0IGkgPSBraSh0KSwgciA9IE5pKHQpO1xuICAgICAgICAvLyBUaGUgSW5kZXhlZERiIGltcGxlbWVudGF0aW9uIGluIENocm9tZSAoYW5kIEZpcmVmb3gpIGRvZXMgbm90IGhhbmRsZVxuICAgICAgICAvLyBjb21wb3VuZCBpbmRpY2VzIHRoYXQgaW5jbHVkZSBhdXRvLWdlbmVyYXRlZCBrZXlzIGNvcnJlY3RseS4gVG8gZW5zdXJlXG4gICAgICAgIC8vIHRoYXQgdGhlIGluZGV4IGVudHJ5IGlzIGFkZGVkIGNvcnJlY3RseSBpbiBhbGwgYnJvd3NlcnMsIHdlIHBlcmZvcm0gdHdvXG4gICAgICAgIC8vIHdyaXRlczogVGhlIGZpcnN0IHdyaXRlIGlzIHVzZWQgdG8gcmV0cmlldmUgdGhlIG5leHQgYXV0by1nZW5lcmF0ZWQgQmF0Y2hcbiAgICAgICAgLy8gSUQsIGFuZCB0aGUgc2Vjb25kIHdyaXRlIHBvcHVsYXRlcyB0aGUgaW5kZXggYW5kIHN0b3JlcyB0aGUgYWN0dWFsXG4gICAgICAgIC8vIG11dGF0aW9uIGJhdGNoLlxuICAgICAgICAvLyBTZWU6IGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTcwMTk3MlxuICAgICAgICAvLyBXZSB3cml0ZSBhbiBlbXB0eSBvYmplY3QgdG8gb2J0YWluIGtleVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gci5hZGQoe30pLm5leHQoKG8gPT4ge1xuICAgICAgICAgICAgQihcIm51bWJlclwiID09IHR5cGVvZiBvKTtcbiAgICAgICAgICAgIGNvbnN0IGEgPSBuZXcgcmkobywgZSwgbiwgcyksIGMgPSBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IG4uYmFzZU11dGF0aW9ucy5tYXAoKGUgPT4gb3ModC5HdCwgZSkpKSwgaSA9IG4ubXV0YXRpb25zLm1hcCgoZSA9PiBvcyh0Lkd0LCBlKSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ3MoZSwgbi5iYXRjaElkLCBuLmxvY2FsV3JpdGVUaW1lLnRvTWlsbGlzKCksIHMsIGkpO1xuICAgICAgICAgICAgfSh0aGlzLmssIHRoaXMudXNlcklkLCBhKSwgdSA9IFtdO1xuICAgICAgICAgICAgbGV0IGggPSBuZXcgVG4oKCh0LCBlKSA9PiBpdCh0LmNhbm9uaWNhbFN0cmluZygpLCBlLmNhbm9uaWNhbFN0cmluZygpKSkpO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gTnMua2V5KHRoaXMudXNlcklkLCB0LmtleS5wYXRoLCBvKTtcbiAgICAgICAgICAgICAgICBoID0gaC5hZGQodC5rZXkucGF0aC5wb3BMYXN0KCkpLCB1LnB1c2goci5wdXQoYykpLCB1LnB1c2goaS5wdXQoZSwgTnMuUExBQ0VIT0xERVIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBoLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgIHUucHVzaCh0aGlzLkp0LmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KHQsIGUpKTtcbiAgICAgICAgICAgIH0pKSwgdC5hZGRPbkNvbW1pdHRlZExpc3RlbmVyKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5ZdFtvXSA9IGEua2V5cygpO1xuICAgICAgICAgICAgfSkpLCBHcy53YWl0Rm9yKHUpLm5leHQoKCgpID0+IGEpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBsb29rdXBNdXRhdGlvbkJhdGNoKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIE5pKHQpLmdldChlKS5uZXh0KCh0ID0+IHQgPyAoQih0LnVzZXJJZCA9PT0gdGhpcy51c2VySWQpLCBfaSh0aGlzLmssIHQpKSA6IG51bGwpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgZG9jdW1lbnQga2V5cyBmb3IgdGhlIG11dGF0aW9uIGJhdGNoIHdpdGggdGhlIGdpdmVuIGJhdGNoSWQuXG4gICAgICogRm9yIHByaW1hcnkgY2xpZW50cywgdGhpcyBtZXRob2QgcmV0dXJucyBgbnVsbGAgYWZ0ZXJcbiAgICAgKiBgcmVtb3ZlTXV0YXRpb25CYXRjaGVzKClgIGhhcyBiZWVuIGNhbGxlZC4gU2Vjb25kYXJ5IGNsaWVudHMgcmV0dXJuIGFcbiAgICAgKiBjYWNoZWQgcmVzdWx0IHVudGlsIGByZW1vdmVDYWNoZWRNdXRhdGlvbktleXMoKWAgaXMgaW52b2tlZC5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgIFp0KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuWXRbZV0gPyBHcy5yZXNvbHZlKHRoaXMuWXRbZV0pIDogdGhpcy5sb29rdXBNdXRhdGlvbkJhdGNoKHQsIGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gdC5rZXlzKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuWXRbZV0gPSBuLCBuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZSArIDEsIHMgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKFsgdGhpcy51c2VySWQsIG4gXSk7XG4gICAgICAgIGxldCBpID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIE5pKHQpLmp0KHtcbiAgICAgICAgICAgIGluZGV4OiBDcy51c2VyTXV0YXRpb25zSW5kZXgsXG4gICAgICAgICAgICByYW5nZTogc1xuICAgICAgICB9LCAoKHQsIGUsIHMpID0+IHtcbiAgICAgICAgICAgIGUudXNlcklkID09PSB0aGlzLnVzZXJJZCAmJiAoQihlLmJhdGNoSWQgPj0gbiksIGkgPSBfaSh0aGlzLmssIGUpKSwgcy5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIGdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQodCkge1xuICAgICAgICBjb25zdCBlID0gSURCS2V5UmFuZ2UudXBwZXJCb3VuZChbIHRoaXMudXNlcklkLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSk7XG4gICAgICAgIGxldCBuID0gLTE7XG4gICAgICAgIHJldHVybiBOaSh0KS5qdCh7XG4gICAgICAgICAgICBpbmRleDogQ3MudXNlck11dGF0aW9uc0luZGV4LFxuICAgICAgICAgICAgcmFuZ2U6IGUsXG4gICAgICAgICAgICByZXZlcnNlOiAhMFxuICAgICAgICB9LCAoKHQsIGUsIHMpID0+IHtcbiAgICAgICAgICAgIG4gPSBlLmJhdGNoSWQsIHMuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gbikpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXModCkge1xuICAgICAgICBjb25zdCBlID0gSURCS2V5UmFuZ2UuYm91bmQoWyB0aGlzLnVzZXJJZCwgLTEgXSwgWyB0aGlzLnVzZXJJZCwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIF0pO1xuICAgICAgICByZXR1cm4gTmkodCkuQnQoQ3MudXNlck11dGF0aW9uc0luZGV4LCBlKS5uZXh0KCh0ID0+IHQubWFwKCh0ID0+IF9pKHRoaXMuaywgdCkpKSkpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleSh0LCBlKSB7XG4gICAgICAgIC8vIFNjYW4gdGhlIGRvY3VtZW50LW11dGF0aW9uIGluZGV4IHN0YXJ0aW5nIHdpdGggYSBwcmVmaXggc3RhcnRpbmcgd2l0aFxuICAgICAgICAvLyB0aGUgZ2l2ZW4gZG9jdW1lbnRLZXkuXG4gICAgICAgIGNvbnN0IG4gPSBOcy5wcmVmaXhGb3JQYXRoKHRoaXMudXNlcklkLCBlLnBhdGgpLCBzID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChuKSwgaSA9IFtdO1xuICAgICAgICByZXR1cm4ga2kodCkuanQoe1xuICAgICAgICAgICAgcmFuZ2U6IHNcbiAgICAgICAgfSwgKChuLCBzLCByKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBbbywgYSwgY10gPSBuLCB1ID0gdnMoYSk7XG4gICAgICAgICAgICAvLyBPbmx5IGNvbnNpZGVyIHJvd3MgbWF0Y2hpbmcgZXhhY3RseSB0aGUgc3BlY2lmaWMga2V5IG9mXG4gICAgICAgICAgICAvLyBpbnRlcmVzdC4gTm90ZSB0aGF0IGJlY2F1c2Ugd2Ugb3JkZXIgYnkgcGF0aCBmaXJzdCwgYW5kIHdlXG4gICAgICAgICAgICAvLyBvcmRlciB0ZXJtaW5hdG9ycyBiZWZvcmUgcGF0aCBzZXBhcmF0b3JzLCB3ZSdsbCBlbmNvdW50ZXIgYWxsXG4gICAgICAgICAgICAvLyB0aGUgaW5kZXggcm93cyBmb3IgZG9jdW1lbnRLZXkgY29udGlndW91c2x5LiBJbiBwYXJ0aWN1bGFyLCBhbGxcbiAgICAgICAgICAgIC8vIHRoZSByb3dzIGZvciBkb2N1bWVudEtleSB3aWxsIG9jY3VyIGJlZm9yZSBhbnkgcm93cyBmb3JcbiAgICAgICAgICAgIC8vIGRvY3VtZW50cyBuZXN0ZWQgaW4gYSBzdWJjb2xsZWN0aW9uIGJlbmVhdGggZG9jdW1lbnRLZXkgc28gd2VcbiAgICAgICAgICAgIC8vIGNhbiBzdG9wIGFzIHNvb24gYXMgd2UgaGl0IGFueSBzdWNoIHJvdy5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvID09PSB0aGlzLnVzZXJJZCAmJiBlLnBhdGguaXNFcXVhbCh1KSkgXG4gICAgICAgICAgICAvLyBMb29rIHVwIHRoZSBtdXRhdGlvbiBiYXRjaCBpbiB0aGUgc3RvcmUuXG4gICAgICAgICAgICByZXR1cm4gTmkodCkuZ2V0KGMpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdCkgdGhyb3cgTCgpO1xuICAgICAgICAgICAgICAgIEIodC51c2VySWQgPT09IHRoaXMudXNlcklkKSwgaS5wdXNoKF9pKHRoaXMuaywgdCkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgci5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5cyh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gbmV3IFRuKGl0KTtcbiAgICAgICAgY29uc3QgcyA9IFtdO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBOcy5wcmVmaXhGb3JQYXRoKHRoaXMudXNlcklkLCBlLnBhdGgpLCByID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChpKSwgbyA9IGtpKHQpLmp0KHtcbiAgICAgICAgICAgICAgICByYW5nZTogclxuICAgICAgICAgICAgfSwgKCh0LCBzLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgW3IsIG8sIGFdID0gdCwgYyA9IHZzKG8pO1xuICAgICAgICAgICAgICAgIC8vIE9ubHkgY29uc2lkZXIgcm93cyBtYXRjaGluZyBleGFjdGx5IHRoZSBzcGVjaWZpYyBrZXkgb2ZcbiAgICAgICAgICAgICAgICAvLyBpbnRlcmVzdC4gTm90ZSB0aGF0IGJlY2F1c2Ugd2Ugb3JkZXIgYnkgcGF0aCBmaXJzdCwgYW5kIHdlXG4gICAgICAgICAgICAgICAgLy8gb3JkZXIgdGVybWluYXRvcnMgYmVmb3JlIHBhdGggc2VwYXJhdG9ycywgd2UnbGwgZW5jb3VudGVyIGFsbFxuICAgICAgICAgICAgICAgIC8vIHRoZSBpbmRleCByb3dzIGZvciBkb2N1bWVudEtleSBjb250aWd1b3VzbHkuIEluIHBhcnRpY3VsYXIsIGFsbFxuICAgICAgICAgICAgICAgIC8vIHRoZSByb3dzIGZvciBkb2N1bWVudEtleSB3aWxsIG9jY3VyIGJlZm9yZSBhbnkgcm93cyBmb3JcbiAgICAgICAgICAgICAgICAvLyBkb2N1bWVudHMgbmVzdGVkIGluIGEgc3ViY29sbGVjdGlvbiBiZW5lYXRoIGRvY3VtZW50S2V5IHNvIHdlXG4gICAgICAgICAgICAgICAgLy8gY2FuIHN0b3AgYXMgc29vbiBhcyB3ZSBoaXQgYW55IHN1Y2ggcm93LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID09PSB0aGlzLnVzZXJJZCAmJiBlLnBhdGguaXNFcXVhbChjKSA/IG4gPSBuLmFkZChhKSA6IGkuZG9uZSgpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgcy5wdXNoKG8pO1xuICAgICAgICB9KSksIEdzLndhaXRGb3IocykubmV4dCgoKCkgPT4gdGhpcy50ZSh0LCBuKSkpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdRdWVyeSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLnBhdGgsIHMgPSBuLmxlbmd0aCArIDEsIGkgPSBOcy5wcmVmaXhGb3JQYXRoKHRoaXMudXNlcklkLCBuKSwgciA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoaSk7XG4gICAgICAgIC8vIENvbGxlY3QgdXAgdW5pcXVlIGJhdGNoSURzIGVuY291bnRlcmVkIGR1cmluZyBhIHNjYW4gb2YgdGhlIGluZGV4LiBVc2UgYVxuICAgICAgICAvLyBTb3J0ZWRTZXQgdG8gYWNjdW11bGF0ZSBiYXRjaCBJRHMgc28gdGhleSBjYW4gYmUgdHJhdmVyc2VkIGluIG9yZGVyIGluIGFcbiAgICAgICAgLy8gc2NhbiBvZiB0aGUgbWFpbiB0YWJsZS5cbiAgICAgICAgbGV0IG8gPSBuZXcgVG4oaXQpO1xuICAgICAgICByZXR1cm4ga2kodCkuanQoe1xuICAgICAgICAgICAgcmFuZ2U6IHJcbiAgICAgICAgfSwgKCh0LCBlLCBpKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBbciwgYSwgY10gPSB0LCB1ID0gdnMoYSk7XG4gICAgICAgICAgICByID09PSB0aGlzLnVzZXJJZCAmJiBuLmlzUHJlZml4T2YodSkgPyBcbiAgICAgICAgICAgIC8vIFJvd3Mgd2l0aCBkb2N1bWVudCBrZXlzIG1vcmUgdGhhbiBvbmUgc2VnbWVudCBsb25nZXIgdGhhbiB0aGVcbiAgICAgICAgICAgIC8vIHF1ZXJ5IHBhdGggY2FuJ3QgYmUgbWF0Y2hlcy4gRm9yIGV4YW1wbGUsIGEgcXVlcnkgb24gJ3Jvb21zJ1xuICAgICAgICAgICAgLy8gY2FuJ3QgbWF0Y2ggdGhlIGRvY3VtZW50IC9yb29tcy9hYmMvbWVzc2FnZXMveHl4LlxuICAgICAgICAgICAgLy8gVE9ETyhtY2cpOiB3ZSdsbCBuZWVkIGEgZGlmZmVyZW50IHNjYW5uZXIgd2hlbiB3ZSBpbXBsZW1lbnRcbiAgICAgICAgICAgIC8vIGFuY2VzdG9yIHF1ZXJpZXMuXG4gICAgICAgICAgICB1Lmxlbmd0aCA9PT0gcyAmJiAobyA9IG8uYWRkKGMpKSA6IGkuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gdGhpcy50ZSh0LCBvKSkpO1xuICAgIH1cbiAgICB0ZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBbXSwgcyA9IFtdO1xuICAgICAgICAvLyBUT0RPKHJvY2t3b29kKTogSW1wbGVtZW50IHRoaXMgdXNpbmcgaXRlcmF0ZS5cbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICBzLnB1c2goTmkodCkuZ2V0KGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChudWxsID09PSB0KSB0aHJvdyBMKCk7XG4gICAgICAgICAgICAgICAgQih0LnVzZXJJZCA9PT0gdGhpcy51c2VySWQpLCBuLnB1c2goX2kodGhpcy5rLCB0KSk7XG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICB9KSksIEdzLndhaXRGb3IocykubmV4dCgoKCkgPT4gbikpO1xuICAgIH1cbiAgICByZW1vdmVNdXRhdGlvbkJhdGNoKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIFZpKHQuV3QsIHRoaXMudXNlcklkLCBlKS5uZXh0KChuID0+ICh0LmFkZE9uQ29tbWl0dGVkTGlzdGVuZXIoKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZWUoZS5iYXRjaElkKTtcbiAgICAgICAgfSkpLCBHcy5mb3JFYWNoKG4sIChlID0+IHRoaXMucmVmZXJlbmNlRGVsZWdhdGUubWFya1BvdGVudGlhbGx5T3JwaGFuZWQodCwgZSkpKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYXJzIHRoZSBjYWNoZWQga2V5cyBmb3IgYSBtdXRhdGlvbiBiYXRjaC4gVGhpcyBtZXRob2Qgc2hvdWxkIGJlXG4gICAgICogY2FsbGVkIGJ5IHNlY29uZGFyeSBjbGllbnRzIGFmdGVyIHRoZXkgcHJvY2VzcyBtdXRhdGlvbiB1cGRhdGVzLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IHRoaXMgbWV0aG9kIGRvZXMgbm90IGhhdmUgdG8gYmUgY2FsbGVkIGZyb20gcHJpbWFyeSBjbGllbnRzIGFzXG4gICAgICogdGhlIGNvcnJlc3BvbmRpbmcgY2FjaGUgZW50cmllcyBhcmUgY2xlYXJlZCB3aGVuIGFuIGFja25vd2xlZGdlZCBvclxuICAgICAqIHJlamVjdGVkIGJhdGNoIGlzIHJlbW92ZWQgZnJvbSB0aGUgbXV0YXRpb24gcXVldWUuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seVxuICAgIGVlKHQpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuWXRbdF07XG4gICAgfVxuICAgIHBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2tFbXB0eSh0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGlmICghZSkgcmV0dXJuIEdzLnJlc29sdmUoKTtcbiAgICAgICAgICAgIC8vIFZlcmlmeSB0aGF0IHRoZXJlIGFyZSBubyBlbnRyaWVzIGluIHRoZSBkb2N1bWVudE11dGF0aW9ucyBpbmRleCBpZlxuICAgICAgICAgICAgLy8gdGhlIHF1ZXVlIGlzIGVtcHR5LlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoTnMucHJlZml4Rm9yVXNlcih0aGlzLnVzZXJJZCkpLCBzID0gW107XG4gICAgICAgICAgICByZXR1cm4ga2kodCkuanQoe1xuICAgICAgICAgICAgICAgIHJhbmdlOiBuXG4gICAgICAgICAgICB9LCAoKHQsIGUsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodFswXSA9PT0gdGhpcy51c2VySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IHZzKHRbMV0pO1xuICAgICAgICAgICAgICAgICAgICBzLnB1c2goZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIG4uZG9uZSgpO1xuICAgICAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICBCKDAgPT09IHMubGVuZ3RoKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBjb250YWluc0tleSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBDaSh0LCB0aGlzLnVzZXJJZCwgZSk7XG4gICAgfVxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkgKHN0YXRlIGlzIGhlbGQgaW4gbWVtb3J5IGluIG90aGVyIGNsaWVudHMpLlxuICAgIC8qKiBSZXR1cm5zIHRoZSBtdXRhdGlvbiBxdWV1ZSdzIG1ldGFkYXRhIGZyb20gSW5kZXhlZERiLiAqL1xuICAgIG5lKHQpIHtcbiAgICAgICAgcmV0dXJuIHhpKHQpLmdldCh0aGlzLnVzZXJJZCkubmV4dCgodCA9PiB0IHx8IG5ldyBEcyh0aGlzLnVzZXJJZCwgLTEsIFxuICAgICAgICAvKmxhc3RTdHJlYW1Ub2tlbj0qLyBcIlwiKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBtdXRhdGlvbiBxdWV1ZSBmb3IgdGhlIGdpdmVuIHVzZXIgY29udGFpbnMgYSBwZW5kaW5nXG4gKiAgICAgICAgIG11dGF0aW9uIGZvciB0aGUgZ2l2ZW4ga2V5LlxuICovIGZ1bmN0aW9uIENpKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gTnMucHJlZml4Rm9yUGF0aChlLCBuLnBhdGgpLCBpID0gc1sxXSwgciA9IElEQktleVJhbmdlLmxvd2VyQm91bmQocyk7XG4gICAgbGV0IG8gPSAhMTtcbiAgICByZXR1cm4ga2kodCkuanQoe1xuICAgICAgICByYW5nZTogcixcbiAgICAgICAgS3Q6ICEwXG4gICAgfSwgKCh0LCBuLCBzKSA9PiB7XG4gICAgICAgIGNvbnN0IFtyLCBhLCAvKmJhdGNoSUQqLyBjXSA9IHQ7XG4gICAgICAgIHIgPT09IGUgJiYgYSA9PT0gaSAmJiAobyA9ICEwKSwgcy5kb25lKCk7XG4gICAgfSkpLm5leHQoKCgpID0+IG8pKTtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBhbnkgbXV0YXRpb24gcXVldWUgY29udGFpbnMgdGhlIGdpdmVuIGRvY3VtZW50LiAqL1xuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG11dGF0aW9ucyBvYmplY3Qgc3RvcmUuXG4gKi9cbmZ1bmN0aW9uIE5pKHQpIHtcbiAgICByZXR1cm4gaWkodCwgQ3Muc3RvcmUpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgbXV0YXRpb25RdWV1ZXMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIGtpKHQpIHtcbiAgICByZXR1cm4gaWkodCwgTnMuc3RvcmUpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgbXV0YXRpb25RdWV1ZXMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIHhpKHQpIHtcbiAgICByZXR1cm4gaWkodCwgRHMuc3RvcmUpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIE9mZnNldCB0byBlbnN1cmUgbm9uLW92ZXJsYXBwaW5nIHRhcmdldCBpZHMuICovXG4vKipcbiAqIEdlbmVyYXRlcyBtb25vdG9uaWNhbGx5IGluY3JlYXNpbmcgdGFyZ2V0IElEcyBmb3Igc2VuZGluZyB0YXJnZXRzIHRvIHRoZVxuICogd2F0Y2ggc3RyZWFtLlxuICpcbiAqIFRoZSBjbGllbnQgY29uc3RydWN0cyB0d28gZ2VuZXJhdG9ycywgb25lIGZvciB0aGUgdGFyZ2V0IGNhY2hlLCBhbmQgb25lIGZvclxuICogZm9yIHRoZSBzeW5jIGVuZ2luZSAodG8gZ2VuZXJhdGUgbGltYm8gZG9jdW1lbnRzIHRhcmdldHMpLiBUaGVzZVxuICogZ2VuZXJhdG9ycyBwcm9kdWNlIG5vbi1vdmVybGFwcGluZyBJRHMgKGJ5IHVzaW5nIGV2ZW4gYW5kIG9kZCBJRHNcbiAqIHJlc3BlY3RpdmVseSkuXG4gKlxuICogQnkgc2VwYXJhdGluZyB0aGUgdGFyZ2V0IElEIHNwYWNlLCB0aGUgcXVlcnkgY2FjaGUgY2FuIGdlbmVyYXRlIHRhcmdldCBJRHNcbiAqIHRoYXQgcGVyc2lzdCBhY3Jvc3MgY2xpZW50IHJlc3RhcnRzLCB3aGlsZSBzeW5jIGVuZ2luZSBjYW4gaW5kZXBlbmRlbnRseVxuICogZ2VuZXJhdGUgaW4tbWVtb3J5IHRhcmdldCBJRHMgdGhhdCBhcmUgdHJhbnNpZW50IGFuZCBjYW4gYmUgcmV1c2VkIGFmdGVyIGFcbiAqIHJlc3RhcnQuXG4gKi9cbmNsYXNzICRpIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuc2UgPSB0O1xuICAgIH1cbiAgICBuZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZSArPSAyLCB0aGlzLnNlO1xuICAgIH1cbiAgICBzdGF0aWMgaWUoKSB7XG4gICAgICAgIC8vIFRoZSB0YXJnZXQgY2FjaGUgZ2VuZXJhdG9yIG11c3QgcmV0dXJuICcyJyBpbiBpdHMgZmlyc3QgY2FsbCB0byBgbmV4dCgpYFxuICAgICAgICAvLyBhcyB0aGVyZSBpcyBubyBkaWZmZXJlbnRpYXRpb24gaW4gdGhlIHByb3RvY29sIGxheWVyIGJldHdlZW4gYW4gdW5zZXRcbiAgICAgICAgLy8gbnVtYmVyIGFuZCB0aGUgbnVtYmVyICcwJy4gSWYgd2Ugd2VyZSB0byBzZW50IGEgdGFyZ2V0IHdpdGggdGFyZ2V0IElEXG4gICAgICAgIC8vICcwJywgdGhlIGJhY2tlbmQgd291bGQgY29uc2lkZXIgaXQgdW5zZXQgYW5kIHJlcGxhY2UgaXQgd2l0aCBpdHMgb3duIElELlxuICAgICAgICByZXR1cm4gbmV3ICRpKDApO1xuICAgIH1cbiAgICBzdGF0aWMgcmUoKSB7XG4gICAgICAgIC8vIFN5bmMgZW5naW5lIGFzc2lnbnMgdGFyZ2V0IElEcyBmb3IgbGltYm8gZG9jdW1lbnQgZGV0ZWN0aW9uLlxuICAgICAgICByZXR1cm4gbmV3ICRpKC0xKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIEZpIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSB0LCB0aGlzLmsgPSBlO1xuICAgIH1cbiAgICAvLyBQT1JUSU5HIE5PVEU6IFdlIGRvbid0IGNhY2hlIGdsb2JhbCBtZXRhZGF0YSBmb3IgdGhlIHRhcmdldCBjYWNoZSwgc2luY2VcbiAgICAvLyBzb21lIG9mIGl0IChpbiBwYXJ0aWN1bGFyIGBoaWdoZXN0VGFyZ2V0SWRgKSBjYW4gYmUgbW9kaWZpZWQgYnkgc2Vjb25kYXJ5XG4gICAgLy8gdGFicy4gV2UgY291bGQgcGVyaGFwcyBiZSBtb3JlIGdyYW51bGFyIChhbmQgZS5nLiBzdGlsbCBjYWNoZVxuICAgIC8vIGBsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uYCBpbiBtZW1vcnkpIGJ1dCBmb3Igc2ltcGxpY2l0eSB3ZSBjdXJyZW50bHkgZ29cbiAgICAvLyB0byBJbmRleGVkRGIgd2hlbmV2ZXIgd2UgbmVlZCB0byByZWFkIG1ldGFkYXRhLiBXZSBjYW4gcmV2aXNpdCBpZiBpdCB0dXJuc1xuICAgIC8vIG91dCB0byBoYXZlIGEgbWVhbmluZ2Z1bCBwZXJmb3JtYW5jZSBpbXBhY3QuXG4gICAgYWxsb2NhdGVUYXJnZXRJZCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9lKHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IG5ldyAkaShlLmhpZ2hlc3RUYXJnZXRJZCk7XG4gICAgICAgICAgICByZXR1cm4gZS5oaWdoZXN0VGFyZ2V0SWQgPSBuLm5leHQoKSwgdGhpcy5hZSh0LCBlKS5uZXh0KCgoKSA9PiBlLmhpZ2hlc3RUYXJnZXRJZCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24odCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vZSh0KS5uZXh0KCh0ID0+IGN0LmZyb21UaW1lc3RhbXAobmV3IGF0KHQubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbi5zZWNvbmRzLCB0Lmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24ubmFub3NlY29uZHMpKSkpO1xuICAgIH1cbiAgICBnZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vZSh0KS5uZXh0KCh0ID0+IHQuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyKSk7XG4gICAgfVxuICAgIHNldFRhcmdldHNNZXRhZGF0YSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9lKHQpLm5leHQoKHMgPT4gKHMuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyID0gZSwgbiAmJiAocy5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uID0gbi50b1RpbWVzdGFtcCgpKSwgXG4gICAgICAgIGUgPiBzLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciAmJiAocy5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgPSBlKSwgdGhpcy5hZSh0LCBzKSkpKTtcbiAgICB9XG4gICAgYWRkVGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNlKHQsIGUpLm5leHQoKCgpID0+IHRoaXMub2UodCkubmV4dCgobiA9PiAobi50YXJnZXRDb3VudCArPSAxLCB0aGlzLnVlKGUsIG4pLCBcbiAgICAgICAgdGhpcy5hZSh0LCBuKSkpKSkpO1xuICAgIH1cbiAgICB1cGRhdGVUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2UodCwgZSk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldERhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBlLnRhcmdldElkKS5uZXh0KCgoKSA9PiBPaSh0KS5kZWxldGUoZS50YXJnZXRJZCkpKS5uZXh0KCgoKSA9PiB0aGlzLm9lKHQpKSkubmV4dCgoZSA9PiAoQihlLnRhcmdldENvdW50ID4gMCksIFxuICAgICAgICBlLnRhcmdldENvdW50IC09IDEsIHRoaXMuYWUodCwgZSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERyb3BzIGFueSB0YXJnZXRzIHdpdGggc2VxdWVuY2UgbnVtYmVyIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgdXBwZXIgYm91bmQsIGV4Y2VwdGluZyB0aG9zZVxuICAgICAqIHByZXNlbnQgaW4gYGFjdGl2ZVRhcmdldElkc2AuIERvY3VtZW50IGFzc29jaWF0aW9ucyBmb3IgdGhlIHJlbW92ZWQgdGFyZ2V0cyBhcmUgYWxzbyByZW1vdmVkLlxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiB0YXJnZXRzIHJlbW92ZWQuXG4gICAgICovICAgIHJlbW92ZVRhcmdldHModCwgZSwgbikge1xuICAgICAgICBsZXQgcyA9IDA7XG4gICAgICAgIGNvbnN0IGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIE9pKHQpLmp0KCgociwgbykgPT4ge1xuICAgICAgICAgICAgY29uc3QgYSA9IG1pKG8pO1xuICAgICAgICAgICAgYS5zZXF1ZW5jZU51bWJlciA8PSBlICYmIG51bGwgPT09IG4uZ2V0KGEudGFyZ2V0SWQpICYmIChzKyssIGkucHVzaCh0aGlzLnJlbW92ZVRhcmdldERhdGEodCwgYSkpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IEdzLndhaXRGb3IoaSkpKS5uZXh0KCgoKSA9PiBzKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGwgcHJvdmlkZWQgZnVuY3Rpb24gd2l0aCBlYWNoIGBUYXJnZXREYXRhYCB0aGF0IHdlIGhhdmUgY2FjaGVkLlxuICAgICAqLyAgICBmb3JFYWNoVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIE9pKHQpLmp0KCgodCwgbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IG1pKG4pO1xuICAgICAgICAgICAgZShzKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBvZSh0KSB7XG4gICAgICAgIHJldHVybiBNaSh0KS5nZXQoTHMua2V5KS5uZXh0KCh0ID0+IChCKG51bGwgIT09IHQpLCB0KSkpO1xuICAgIH1cbiAgICBhZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBNaSh0KS5wdXQoTHMua2V5LCBlKTtcbiAgICB9XG4gICAgY2UodCwgZSkge1xuICAgICAgICByZXR1cm4gT2kodCkucHV0KGdpKHRoaXMuaywgZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbi1wbGFjZSB1cGRhdGVzIHRoZSBwcm92aWRlZCBtZXRhZGF0YSB0byBhY2NvdW50IGZvciB2YWx1ZXMgaW4gdGhlIGdpdmVuXG4gICAgICogVGFyZ2V0RGF0YS4gU2F2aW5nIGlzIGRvbmUgc2VwYXJhdGVseS4gUmV0dXJucyB0cnVlIGlmIHRoZXJlIHdlcmUgYW55XG4gICAgICogY2hhbmdlcyB0byB0aGUgbWV0YWRhdGEuXG4gICAgICovICAgIHVlKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSAhMTtcbiAgICAgICAgcmV0dXJuIHQudGFyZ2V0SWQgPiBlLmhpZ2hlc3RUYXJnZXRJZCAmJiAoZS5oaWdoZXN0VGFyZ2V0SWQgPSB0LnRhcmdldElkLCBuID0gITApLCBcbiAgICAgICAgdC5zZXF1ZW5jZU51bWJlciA+IGUuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyICYmIChlLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IHQuc2VxdWVuY2VOdW1iZXIsIFxuICAgICAgICBuID0gITApLCBuO1xuICAgIH1cbiAgICBnZXRUYXJnZXRDb3VudCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9lKHQpLm5leHQoKHQgPT4gdC50YXJnZXRDb3VudCkpO1xuICAgIH1cbiAgICBnZXRUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgLy8gSXRlcmF0aW5nIGJ5IHRoZSBjYW5vbmljYWxJZCBtYXkgeWllbGQgbW9yZSB0aGFuIG9uZSByZXN1bHQgYmVjYXVzZVxuICAgICAgICAvLyBjYW5vbmljYWxJZCB2YWx1ZXMgYXJlIG5vdCByZXF1aXJlZCB0byBiZSB1bmlxdWUgcGVyIHRhcmdldC4gVGhpcyBxdWVyeVxuICAgICAgICAvLyBkZXBlbmRzIG9uIHRoZSBxdWVyeVRhcmdldHMgaW5kZXggdG8gYmUgZWZmaWNpZW50LlxuICAgICAgICBjb25zdCBuID0gSHQoZSksIHMgPSBJREJLZXlSYW5nZS5ib3VuZChbIG4sIE51bWJlci5ORUdBVElWRV9JTkZJTklUWSBdLCBbIG4sIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdKTtcbiAgICAgICAgbGV0IGkgPSBudWxsO1xuICAgICAgICByZXR1cm4gT2kodCkuanQoe1xuICAgICAgICAgICAgcmFuZ2U6IHMsXG4gICAgICAgICAgICBpbmRleDogT3MucXVlcnlUYXJnZXRzSW5kZXhOYW1lXG4gICAgICAgIH0sICgodCwgbiwgcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IG1pKG4pO1xuICAgICAgICAgICAgLy8gQWZ0ZXIgZmluZGluZyBhIHBvdGVudGlhbCBtYXRjaCwgY2hlY2sgdGhhdCB0aGUgdGFyZ2V0IGlzXG4gICAgICAgICAgICAvLyBhY3R1YWxseSBlcXVhbCB0byB0aGUgcmVxdWVzdGVkIHRhcmdldC5cbiAgICAgICAgICAgICAgICAgICAgICAgIFl0KGUsIHIudGFyZ2V0KSAmJiAoaSA9IHIsIHMuZG9uZSgpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgYWRkTWF0Y2hpbmdLZXlzKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBUaGUgcmV2ZXJzZSBpbmRleCAoZG9jdW1lbnRzVGFyZ2V0cykgaXMgbWFpbnRhaW5lZCBieVxuICAgICAgICAvLyBJbmRleGVkRGIuXG4gICAgICAgIGNvbnN0IHMgPSBbXSwgaSA9IExpKHQpO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBScyhlLnBhdGgpO1xuICAgICAgICAgICAgcy5wdXNoKGkucHV0KG5ldyBNcyhuLCByKSkpLCBzLnB1c2godGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5hZGRSZWZlcmVuY2UodCwgbiwgZSkpO1xuICAgICAgICB9KSksIEdzLndhaXRGb3Iocyk7XG4gICAgfVxuICAgIHJlbW92ZU1hdGNoaW5nS2V5cyh0LCBlLCBuKSB7XG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogVGhlIHJldmVyc2UgaW5kZXggKGRvY3VtZW50c1RhcmdldHMpIGlzIG1haW50YWluZWQgYnlcbiAgICAgICAgLy8gSW5kZXhlZERiLlxuICAgICAgICBjb25zdCBzID0gTGkodCk7XG4gICAgICAgIHJldHVybiBHcy5mb3JFYWNoKGUsIChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBScyhlLnBhdGgpO1xuICAgICAgICAgICAgcmV0dXJuIEdzLndhaXRGb3IoWyBzLmRlbGV0ZShbIG4sIGkgXSksIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUucmVtb3ZlUmVmZXJlbmNlKHQsIG4sIGUpIF0pO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IExpKHQpLCBzID0gSURCS2V5UmFuZ2UuYm91bmQoWyBlIF0sIFsgZSArIDEgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gITApO1xuICAgICAgICByZXR1cm4gbi5kZWxldGUocyk7XG4gICAgfVxuICAgIGdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IElEQktleVJhbmdlLmJvdW5kKFsgZSBdLCBbIGUgKyAxIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKSwgcyA9IExpKHQpO1xuICAgICAgICBsZXQgaSA9IFNuKCk7XG4gICAgICAgIHJldHVybiBzLmp0KHtcbiAgICAgICAgICAgIHJhbmdlOiBuLFxuICAgICAgICAgICAgS3Q6ICEwXG4gICAgICAgIH0sICgodCwgZSwgbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IHZzKHRbMV0pLCByID0gbmV3IFN0KHMpO1xuICAgICAgICAgICAgaSA9IGkuYWRkKHIpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICBjb250YWluc0tleSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBScyhlLnBhdGgpLCBzID0gSURCS2V5UmFuZ2UuYm91bmQoWyBuIF0sIFsgb3QobikgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gITApO1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIHJldHVybiBMaSh0KS5qdCh7XG4gICAgICAgICAgICBpbmRleDogTXMuZG9jdW1lbnRUYXJnZXRzSW5kZXgsXG4gICAgICAgICAgICBLdDogITAsXG4gICAgICAgICAgICByYW5nZTogc1xuICAgICAgICB9LCAoKFt0LCBlXSwgbiwgcykgPT4ge1xuICAgICAgICAgICAgLy8gSGF2aW5nIGEgc2VudGluZWwgcm93IGZvciBhIGRvY3VtZW50IGRvZXMgbm90IGNvdW50IGFzIGNvbnRhaW5pbmcgdGhhdCBkb2N1bWVudDtcbiAgICAgICAgICAgIC8vIEZvciB0aGUgdGFyZ2V0IGNhY2hlLCBjb250YWluaW5nIHRoZSBkb2N1bWVudCBtZWFucyB0aGUgZG9jdW1lbnQgaXMgcGFydCBvZiBzb21lXG4gICAgICAgICAgICAvLyB0YXJnZXQuXG4gICAgICAgICAgICAwICE9PSB0ICYmIChpKyssIHMuZG9uZSgpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkgPiAwKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvb2tzIHVwIGEgVGFyZ2V0RGF0YSBlbnRyeSBieSB0YXJnZXQgSUQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGFyZ2V0SWQgLSBUaGUgdGFyZ2V0IElEIG9mIHRoZSBUYXJnZXREYXRhIGVudHJ5IHRvIGxvb2sgdXAuXG4gICAgICogQHJldHVybnMgVGhlIGNhY2hlZCBUYXJnZXREYXRhIGVudHJ5LCBvciBudWxsIGlmIHRoZSBjYWNoZSBoYXMgbm8gZW50cnkgZm9yXG4gICAgICogdGhlIHRhcmdldC5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgIEV0KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIE9pKHQpLmdldChlKS5uZXh0KCh0ID0+IHQgPyBtaSh0KSA6IG51bGwpKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBxdWVyaWVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBPaSh0KSB7XG4gICAgcmV0dXJuIGlpKHQsIE9zLnN0b3JlKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIHRhcmdldCBnbG9iYWxzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBNaSh0KSB7XG4gICAgcmV0dXJuIGlpKHQsIExzLnN0b3JlKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGRvY3VtZW50IHRhcmdldCBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gTGkodCkge1xuICAgIHJldHVybiBpaSh0LCBNcy5zdG9yZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFZlcmlmaWVzIHRoZSBlcnJvciB0aHJvd24gYnkgYSBMb2NhbFN0b3JlIG9wZXJhdGlvbi4gSWYgYSBMb2NhbFN0b3JlXG4gKiBvcGVyYXRpb24gZmFpbHMgYmVjYXVzZSB0aGUgcHJpbWFyeSBsZWFzZSBoYXMgYmVlbiB0YWtlbiBieSBhbm90aGVyIGNsaWVudCxcbiAqIHdlIGlnbm9yZSB0aGUgZXJyb3IgKHRoZSBwZXJzaXN0ZW5jZSBsYXllciB3aWxsIGltbWVkaWF0ZWx5IGNhbGxcbiAqIGBhcHBseVByaW1hcnlMZWFzZWAgdG8gcHJvcGFnYXRlIHRoZSBwcmltYXJ5IHN0YXRlIGNoYW5nZSkuIEFsbCBvdGhlciBlcnJvcnNcbiAqIGFyZSByZS10aHJvd24uXG4gKlxuICogQHBhcmFtIGVyciAtIEFuIGVycm9yIHJldHVybmVkIGJ5IGEgTG9jYWxTdG9yZSBvcGVyYXRpb24uXG4gKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyBhZnRlciB3ZSByZWNvdmVyZWQsIG9yIHRoZSBvcmlnaW5hbCBlcnJvci5cbiAqLyBhc3luYyBmdW5jdGlvbiBCaSh0KSB7XG4gICAgaWYgKHQuY29kZSAhPT0gSy5GQUlMRURfUFJFQ09ORElUSU9OIHx8IHQubWVzc2FnZSAhPT0gUXMpIHRocm93IHQ7XG4gICAgJChcIkxvY2FsU3RvcmVcIiwgXCJVbmV4cGVjdGVkbHkgbG9zdCBwcmltYXJ5IGxlYXNlXCIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBmdW5jdGlvbiBVaShbdCwgZV0sIFtuLCBzXSkge1xuICAgIGNvbnN0IGkgPSBpdCh0LCBuKTtcbiAgICByZXR1cm4gMCA9PT0gaSA/IGl0KGUsIHMpIDogaTtcbn1cblxuLyoqXG4gKiBVc2VkIHRvIGNhbGN1bGF0ZSB0aGUgbnRoIHNlcXVlbmNlIG51bWJlci4gS2VlcHMgYSByb2xsaW5nIGJ1ZmZlciBvZiB0aGVcbiAqIGxvd2VzdCBuIHZhbHVlcyBwYXNzZWQgdG8gYGFkZEVsZW1lbnRgLCBhbmQgZmluYWxseSByZXBvcnRzIHRoZSBsYXJnZXN0IG9mXG4gKiB0aGVtIGluIGBtYXhWYWx1ZWAuXG4gKi8gY2xhc3MgcWkge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5oZSA9IHQsIHRoaXMuYnVmZmVyID0gbmV3IFRuKFVpKSwgdGhpcy5sZSA9IDA7XG4gICAgfVxuICAgIGZlKCkge1xuICAgICAgICByZXR1cm4gKyt0aGlzLmxlO1xuICAgIH1cbiAgICBkZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBbIHQsIHRoaXMuZmUoKSBdO1xuICAgICAgICBpZiAodGhpcy5idWZmZXIuc2l6ZSA8IHRoaXMuaGUpIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuYWRkKGUpOyBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmJ1ZmZlci5sYXN0KCk7XG4gICAgICAgICAgICBVaShlLCB0KSA8IDAgJiYgKHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuZGVsZXRlKHQpLmFkZChlKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IG1heFZhbHVlKCkge1xuICAgICAgICAvLyBHdWFyYW50ZWVkIHRvIGJlIG5vbi1lbXB0eS4gSWYgd2UgZGVjaWRlIHdlIGFyZSBub3QgY29sbGVjdGluZyBhbnlcbiAgICAgICAgLy8gc2VxdWVuY2UgbnVtYmVycywgbnRoU2VxdWVuY2VOdW1iZXIgYmVsb3cgc2hvcnQtY2lyY3VpdHMuIElmIHdlIGhhdmVcbiAgICAgICAgLy8gZGVjaWRlZCB0aGF0IHdlIGFyZSBjb2xsZWN0aW5nIG4gc2VxdWVuY2UgbnVtYmVycywgaXQncyBiZWNhdXNlIG4gaXMgc29tZVxuICAgICAgICAvLyBwZXJjZW50YWdlIG9mIHRoZSBleGlzdGluZyBzZXF1ZW5jZSBudW1iZXJzLiBUaGF0IG1lYW5zIHdlIHNob3VsZCBuZXZlclxuICAgICAgICAvLyBiZSBpbiBhIHNpdHVhdGlvbiB3aGVyZSB3ZSBhcmUgY29sbGVjdGluZyBzZXF1ZW5jZSBudW1iZXJzIGJ1dCBkb24ndFxuICAgICAgICAvLyBhY3R1YWxseSBoYXZlIGFueS5cbiAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyLmxhc3QoKVswXTtcbiAgICB9XG59XG5cbi8qKlxuICogVGhpcyBjbGFzcyBpcyByZXNwb25zaWJsZSBmb3IgdGhlIHNjaGVkdWxpbmcgb2YgTFJVIGdhcmJhZ2UgY29sbGVjdGlvbi4gSXQgaGFuZGxlcyBjaGVja2luZ1xuICogd2hldGhlciBvciBub3QgR0MgaXMgZW5hYmxlZCwgYXMgd2VsbCBhcyB3aGljaCBkZWxheSB0byB1c2UgYmVmb3JlIHRoZSBuZXh0IHJ1bi5cbiAqLyBjbGFzcyBLaSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmdhcmJhZ2VDb2xsZWN0b3IgPSB0LCB0aGlzLmFzeW5jUXVldWUgPSBlLCB0aGlzLndlID0gITEsIHRoaXMuX2UgPSBudWxsO1xuICAgIH1cbiAgICBzdGFydCh0KSB7XG4gICAgICAgIC0xICE9PSB0aGlzLmdhcmJhZ2VDb2xsZWN0b3IucGFyYW1zLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQgJiYgdGhpcy5tZSh0KTtcbiAgICB9XG4gICAgc3RvcCgpIHtcbiAgICAgICAgdGhpcy5fZSAmJiAodGhpcy5fZS5jYW5jZWwoKSwgdGhpcy5fZSA9IG51bGwpO1xuICAgIH1cbiAgICBnZXQgc3RhcnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHRoaXMuX2U7XG4gICAgfVxuICAgIG1lKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMud2UgPyAzZTUgOiA2ZTQ7XG4gICAgICAgICQoXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIGBHYXJiYWdlIGNvbGxlY3Rpb24gc2NoZWR1bGVkIGluICR7ZX1tc2ApLCB0aGlzLl9lID0gdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBZnRlckRlbGF5KFwibHJ1X2dhcmJhZ2VfY29sbGVjdGlvblwiIC8qIExydUdhcmJhZ2VDb2xsZWN0aW9uICovICwgZSwgKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2UgPSBudWxsLCB0aGlzLndlID0gITA7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHQuY29sbGVjdEdhcmJhZ2UodGhpcy5nYXJiYWdlQ29sbGVjdG9yKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICBYcyh0KSA/ICQoXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIFwiSWdub3JpbmcgSW5kZXhlZERCIGVycm9yIGR1cmluZyBnYXJiYWdlIGNvbGxlY3Rpb246IFwiLCB0KSA6IGF3YWl0IEJpKHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5tZSh0KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuLyoqIEltcGxlbWVudHMgdGhlIHN0ZXBzIGZvciBMUlUgZ2FyYmFnZSBjb2xsZWN0aW9uLiAqLyBjbGFzcyBqaSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmdlID0gdCwgdGhpcy5wYXJhbXMgPSBlO1xuICAgIH1cbiAgICBjYWxjdWxhdGVUYXJnZXRDb3VudCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdlLnllKHQpLm5leHQoKHQgPT4gTWF0aC5mbG9vcihlIC8gMTAwICogdCkpKTtcbiAgICB9XG4gICAgbnRoU2VxdWVuY2VOdW1iZXIodCwgZSkge1xuICAgICAgICBpZiAoMCA9PT0gZSkgcmV0dXJuIEdzLnJlc29sdmUoZXQuSSk7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgcWkoZSk7XG4gICAgICAgIHJldHVybiB0aGlzLmdlLmZvckVhY2hUYXJnZXQodCwgKHQgPT4gbi5kZSh0LnNlcXVlbmNlTnVtYmVyKSkpLm5leHQoKCgpID0+IHRoaXMuZ2UucGUodCwgKHQgPT4gbi5kZSh0KSkpKSkubmV4dCgoKCkgPT4gbi5tYXhWYWx1ZSkpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXRzKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2UucmVtb3ZlVGFyZ2V0cyh0LCBlLCBuKTtcbiAgICB9XG4gICAgcmVtb3ZlT3JwaGFuZWREb2N1bWVudHModCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZS5yZW1vdmVPcnBoYW5lZERvY3VtZW50cyh0LCBlKTtcbiAgICB9XG4gICAgY29sbGVjdCh0LCBlKSB7XG4gICAgICAgIHJldHVybiAtMSA9PT0gdGhpcy5wYXJhbXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCA/ICgkKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBcIkdhcmJhZ2UgY29sbGVjdGlvbiBza2lwcGVkOyBkaXNhYmxlZFwiKSwgXG4gICAgICAgIEdzLnJlc29sdmUoYmkpKSA6IHRoaXMuZ2V0Q2FjaGVTaXplKHQpLm5leHQoKG4gPT4gbiA8IHRoaXMucGFyYW1zLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQgPyAoJChcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgYEdhcmJhZ2UgY29sbGVjdGlvbiBza2lwcGVkOyBDYWNoZSBzaXplICR7bn0gaXMgbG93ZXIgdGhhbiB0aHJlc2hvbGQgJHt0aGlzLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkfWApLCBcbiAgICAgICAgYmkpIDogdGhpcy5UZSh0LCBlKSkpO1xuICAgIH1cbiAgICBnZXRDYWNoZVNpemUodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZS5nZXRDYWNoZVNpemUodCk7XG4gICAgfVxuICAgIFRlKHQsIGUpIHtcbiAgICAgICAgbGV0IG4sIHMsIGksIHIsIG8sIGMsIHU7XG4gICAgICAgIGNvbnN0IGggPSBEYXRlLm5vdygpO1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxjdWxhdGVUYXJnZXRDb3VudCh0LCB0aGlzLnBhcmFtcy5wZXJjZW50aWxlVG9Db2xsZWN0KS5uZXh0KChlID0+IChcbiAgICAgICAgLy8gQ2FwIGF0IHRoZSBjb25maWd1cmVkIG1heFxuICAgICAgICBlID4gdGhpcy5wYXJhbXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCA/ICgkKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBgQ2FwcGluZyBzZXF1ZW5jZSBudW1iZXJzIHRvIGNvbGxlY3QgZG93biB0byB0aGUgbWF4aW11bSBvZiAke3RoaXMucGFyYW1zLm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3R9IGZyb20gJHtlfWApLCBcbiAgICAgICAgcyA9IHRoaXMucGFyYW1zLm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QpIDogcyA9IGUsIHIgPSBEYXRlLm5vdygpLCB0aGlzLm50aFNlcXVlbmNlTnVtYmVyKHQsIHMpKSkpLm5leHQoKHMgPT4gKG4gPSBzLCBcbiAgICAgICAgbyA9IERhdGUubm93KCksIHRoaXMucmVtb3ZlVGFyZ2V0cyh0LCBuLCBlKSkpKS5uZXh0KChlID0+IChpID0gZSwgYyA9IERhdGUubm93KCksIFxuICAgICAgICB0aGlzLnJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzKHQsIG4pKSkpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKHUgPSBEYXRlLm5vdygpLCBrKCkgPD0gTG9nTGV2ZWwuREVCVUcpIHtcbiAgICAgICAgICAgICAgICAkKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBgTFJVIEdhcmJhZ2UgQ29sbGVjdGlvblxcblxcdENvdW50ZWQgdGFyZ2V0cyBpbiAke3IgLSBofW1zXFxuXFx0RGV0ZXJtaW5lZCBsZWFzdCByZWNlbnRseSB1c2VkICR7c30gaW4gYCArIChvIC0gcikgKyBcIm1zXFxuXCIgKyBgXFx0UmVtb3ZlZCAke2l9IHRhcmdldHMgaW4gYCArIChjIC0gbykgKyBcIm1zXFxuXCIgKyBgXFx0UmVtb3ZlZCAke3R9IGRvY3VtZW50cyBpbiBgICsgKHUgLSBjKSArIFwibXNcXG5cIiArIGBUb3RhbCBEdXJhdGlvbjogJHt1IC0gaH1tc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIEdzLnJlc29sdmUoe1xuICAgICAgICAgICAgICAgIGRpZFJ1bjogITAsXG4gICAgICAgICAgICAgICAgc2VxdWVuY2VOdW1iZXJzQ29sbGVjdGVkOiBzLFxuICAgICAgICAgICAgICAgIHRhcmdldHNSZW1vdmVkOiBpLFxuICAgICAgICAgICAgICAgIGRvY3VtZW50c1JlbW92ZWQ6IHRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFByb3ZpZGVzIExSVSBmdW5jdGlvbmFsaXR5IGZvciBJbmRleGVkREIgcGVyc2lzdGVuY2UuICovXG5jbGFzcyBRaSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmRiID0gdCwgdGhpcy5nYXJiYWdlQ29sbGVjdG9yID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBqaSh0LCBlKTtcbiAgICAgICAgfSh0aGlzLCBlKTtcbiAgICB9XG4gICAgeWUodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5FZSh0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0VGFyZ2V0Q2FjaGUoKS5nZXRUYXJnZXRDb3VudCh0KS5uZXh0KCh0ID0+IGUubmV4dCgoZSA9PiB0ICsgZSkpKSk7XG4gICAgfVxuICAgIEVlKHQpIHtcbiAgICAgICAgbGV0IGUgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcy5wZSh0LCAodCA9PiB7XG4gICAgICAgICAgICBlKys7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBlKSk7XG4gICAgfVxuICAgIGZvckVhY2hUYXJnZXQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLmZvckVhY2hUYXJnZXQodCwgZSk7XG4gICAgfVxuICAgIHBlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSWUodCwgKCh0LCBuKSA9PiBlKG4pKSk7XG4gICAgfVxuICAgIGFkZFJlZmVyZW5jZSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBXaSh0LCBuKTtcbiAgICB9XG4gICAgcmVtb3ZlUmVmZXJlbmNlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIFdpKHQsIG4pO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXRzKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0VGFyZ2V0Q2FjaGUoKS5yZW1vdmVUYXJnZXRzKHQsIGUsIG4pO1xuICAgIH1cbiAgICBtYXJrUG90ZW50aWFsbHlPcnBoYW5lZCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBXaSh0LCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIGFueXRoaW5nIHdvdWxkIHByZXZlbnQgdGhpcyBkb2N1bWVudCBmcm9tIGJlaW5nIGdhcmJhZ2VcbiAgICAgKiBjb2xsZWN0ZWQsIGdpdmVuIHRoYXQgdGhlIGRvY3VtZW50IGluIHF1ZXN0aW9uIGlzIG5vdCBwcmVzZW50IGluIGFueVxuICAgICAqIHRhcmdldHMgYW5kIGhhcyBhIHNlcXVlbmNlIG51bWJlciBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHVwcGVyIGJvdW5kIGZvclxuICAgICAqIHRoZSBjb2xsZWN0aW9uIHJ1bi5cbiAgICAgKi8gICAgQWUodCwgZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgbGV0IG4gPSAhMTtcbiAgICAgICAgICAgIHJldHVybiB4aSh0KS5RdCgocyA9PiBDaSh0LCBzLCBlKS5uZXh0KCh0ID0+ICh0ICYmIChuID0gITApLCBHcy5yZXNvbHZlKCF0KSkpKSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICAgICAgfSh0LCBlKTtcbiAgICB9XG4gICAgcmVtb3ZlT3JwaGFuZWREb2N1bWVudHModCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5kYi5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCkubmV3Q2hhbmdlQnVmZmVyKCksIHMgPSBbXTtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcy5JZSh0LCAoKHIsIG8pID0+IHtcbiAgICAgICAgICAgIGlmIChvIDw9IGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5BZSh0LCByKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlKSBcbiAgICAgICAgICAgICAgICAgICAgLy8gT3VyIHNpemUgYWNjb3VudGluZyByZXF1aXJlcyB1cyB0byByZWFkIGFsbCBkb2N1bWVudHMgYmVmb3JlXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92aW5nIHRoZW0uXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpKyssIG4uZ2V0RW50cnkodCwgcikubmV4dCgoKCkgPT4gKG4ucmVtb3ZlRW50cnkociksIExpKHQpLmRlbGV0ZShbIDAsIFJzKHIucGF0aCkgXSkpKSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHMucHVzaChlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpLm5leHQoKCgpID0+IEdzLndhaXRGb3IocykpKS5uZXh0KCgoKSA9PiBuLmFwcGx5KHQpKSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZS53aXRoU2VxdWVuY2VOdW1iZXIodC5jdXJyZW50U2VxdWVuY2VOdW1iZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLnVwZGF0ZVRhcmdldERhdGEodCwgbik7XG4gICAgfVxuICAgIHVwZGF0ZUxpbWJvRG9jdW1lbnQodCwgZSkge1xuICAgICAgICByZXR1cm4gV2kodCwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGwgcHJvdmlkZWQgZnVuY3Rpb24gZm9yIGVhY2ggZG9jdW1lbnQgaW4gdGhlIGNhY2hlIHRoYXQgaXMgJ29ycGhhbmVkJy4gT3JwaGFuZWRcbiAgICAgKiBtZWFucyBub3QgYSBwYXJ0IG9mIGFueSB0YXJnZXQsIHNvIHRoZSBvbmx5IGVudHJ5IGluIHRoZSB0YXJnZXQtZG9jdW1lbnQgaW5kZXggZm9yXG4gICAgICogdGhhdCBkb2N1bWVudCB3aWxsIGJlIHRoZSBzZW50aW5lbCByb3cgKHRhcmdldElkIDApLCB3aGljaCB3aWxsIGFsc28gaGF2ZSB0aGUgc2VxdWVuY2VcbiAgICAgKiBudW1iZXIgZm9yIHRoZSBsYXN0IHRpbWUgdGhlIGRvY3VtZW50IHdhcyBhY2Nlc3NlZC5cbiAgICAgKi8gICAgSWUodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gTGkodCk7XG4gICAgICAgIGxldCBzLCBpID0gZXQuSTtcbiAgICAgICAgcmV0dXJuIG4uanQoe1xuICAgICAgICAgICAgaW5kZXg6IE1zLmRvY3VtZW50VGFyZ2V0c0luZGV4XG4gICAgICAgIH0sICgoW3QsIG5dLCB7cGF0aDogciwgc2VxdWVuY2VOdW1iZXI6IG99KSA9PiB7XG4gICAgICAgICAgICAwID09PSB0ID8gKFxuICAgICAgICAgICAgLy8gaWYgbmV4dFRvUmVwb3J0IGlzIHZhbGlkLCByZXBvcnQgaXQsIHRoaXMgaXMgYSBuZXcga2V5IHNvIHRoZVxuICAgICAgICAgICAgLy8gbGFzdCBvbmUgbXVzdCBub3QgYmUgYSBtZW1iZXIgb2YgYW55IHRhcmdldHMuXG4gICAgICAgICAgICBpICE9PSBldC5JICYmIGUobmV3IFN0KHZzKHMpKSwgaSksIFxuICAgICAgICAgICAgLy8gc2V0IG5leHRUb1JlcG9ydCB0byBiZSB0aGlzIHNlcXVlbmNlIG51bWJlci4gSXQncyB0aGUgbmV4dCBvbmUgd2VcbiAgICAgICAgICAgIC8vIG1pZ2h0IHJlcG9ydCwgaWYgd2UgZG9uJ3QgZmluZCBhbnkgdGFyZ2V0cyBmb3IgdGhpcyBkb2N1bWVudC5cbiAgICAgICAgICAgIC8vIE5vdGUgdGhhdCB0aGUgc2VxdWVuY2UgbnVtYmVyIG11c3QgYmUgZGVmaW5lZCB3aGVuIHRoZSB0YXJnZXRJZFxuICAgICAgICAgICAgLy8gaXMgMC5cbiAgICAgICAgICAgIGkgPSBvLCBzID0gcikgOiBcbiAgICAgICAgICAgIC8vIHNldCBuZXh0VG9SZXBvcnQgdG8gYmUgaW52YWxpZCwgd2Uga25vdyB3ZSBkb24ndCBuZWVkIHRvIHJlcG9ydFxuICAgICAgICAgICAgLy8gdGhpcyBvbmUgc2luY2Ugd2UgZm91bmQgYSB0YXJnZXQgZm9yIGl0LlxuICAgICAgICAgICAgaSA9IGV0Lkk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBTaW5jZSB3ZSByZXBvcnQgc2VxdWVuY2UgbnVtYmVycyBhZnRlciBnZXR0aW5nIHRvIHRoZSBuZXh0IGtleSwgd2VcbiAgICAgICAgICAgIC8vIG5lZWQgdG8gY2hlY2sgaWYgdGhlIGxhc3Qga2V5IHdlIGl0ZXJhdGVkIG92ZXIgd2FzIGFuIG9ycGhhbmVkXG4gICAgICAgICAgICAvLyBkb2N1bWVudCBhbmQgcmVwb3J0IGl0LlxuICAgICAgICAgICAgaSAhPT0gZXQuSSAmJiBlKG5ldyBTdCh2cyhzKSksIGkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldENhY2hlU2l6ZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKS5nZXRTaXplKHQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gV2kodCwgZSkge1xuICAgIHJldHVybiBMaSh0KS5wdXQoXG4gICAgLyoqXG4gKiBAcmV0dXJucyBBIHZhbHVlIHN1aXRhYmxlIGZvciB3cml0aW5nIGEgc2VudGluZWwgcm93IGluIHRoZSB0YXJnZXQtZG9jdW1lbnRcbiAqIHN0b3JlLlxuICovXG4gICAgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IE1zKDAsIFJzKHQucGF0aCksIGUpO1xuICAgIH0oZSwgdC5jdXJyZW50U2VxdWVuY2VOdW1iZXIpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBtYXAgaW1wbGVtZW50YXRpb24gdGhhdCB1c2VzIG9iamVjdHMgYXMga2V5cy4gT2JqZWN0cyBtdXN0IGhhdmUgYW5cbiAqIGFzc29jaWF0ZWQgZXF1YWxzIGZ1bmN0aW9uIGFuZCBtdXN0IGJlIGltbXV0YWJsZS4gRW50cmllcyBpbiB0aGUgbWFwIGFyZVxuICogc3RvcmVkIHRvZ2V0aGVyIHdpdGggdGhlIGtleSBiZWluZyBwcm9kdWNlZCBmcm9tIHRoZSBtYXBLZXlGbi4gVGhpcyBtYXBcbiAqIGF1dG9tYXRpY2FsbHkgaGFuZGxlcyBjb2xsaXNpb25zIG9mIGtleXMuXG4gKi8gY2xhc3MgR2kge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5tYXBLZXlGbiA9IHQsIHRoaXMuZXF1YWxzRm4gPSBlLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBpbm5lciBtYXAgZm9yIGEga2V5L3ZhbHVlIHBhaXIuIER1ZSB0byB0aGUgcG9zc2liaWxpdHkgb2YgY29sbGlzaW9ucyB3ZVxuICAgICAgICAgKiBrZWVwIGEgbGlzdCBvZiBlbnRyaWVzIHRoYXQgd2UgZG8gYSBsaW5lYXIgc2VhcmNoIHRocm91Z2ggdG8gZmluZCBhbiBhY3R1YWxcbiAgICAgICAgICogbWF0Y2guIE5vdGUgdGhhdCBjb2xsaXNpb25zIHNob3VsZCBiZSByYXJlLCBzbyB3ZSBzdGlsbCBleHBlY3QgbmVhclxuICAgICAgICAgKiBjb25zdGFudCB0aW1lIGxvb2t1cHMgaW4gcHJhY3RpY2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlubmVyID0ge307XG4gICAgfVxuICAgIC8qKiBHZXQgYSB2YWx1ZSBmb3IgdGhpcyBrZXksIG9yIHVuZGVmaW5lZCBpZiBpdCBkb2VzIG5vdCBleGlzdC4gKi8gICAgZ2V0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMubWFwS2V5Rm4odCksIG4gPSB0aGlzLmlubmVyW2VdO1xuICAgICAgICBpZiAodm9pZCAwICE9PSBuKSBmb3IgKGNvbnN0IFtlLCBzXSBvZiBuKSBpZiAodGhpcy5lcXVhbHNGbihlLCB0KSkgcmV0dXJuIHM7XG4gICAgfVxuICAgIGhhcyh0KSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHRoaXMuZ2V0KHQpO1xuICAgIH1cbiAgICAvKiogUHV0IHRoaXMga2V5IGFuZCB2YWx1ZSBpbiB0aGUgbWFwLiAqLyAgICBzZXQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5tYXBLZXlGbih0KSwgcyA9IHRoaXMuaW5uZXJbbl07XG4gICAgICAgIGlmICh2b2lkIDAgIT09IHMpIHtcbiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgcy5sZW5ndGg7IG4rKykgaWYgKHRoaXMuZXF1YWxzRm4oc1tuXVswXSwgdCkpIHJldHVybiB2b2lkIChzW25dID0gWyB0LCBlIF0pO1xuICAgICAgICAgICAgcy5wdXNoKFsgdCwgZSBdKTtcbiAgICAgICAgfSBlbHNlIHRoaXMuaW5uZXJbbl0gPSBbIFsgdCwgZSBdIF07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGlzIGtleSBmcm9tIHRoZSBtYXAuIFJldHVybnMgYSBib29sZWFuIGlmIGFueXRoaW5nIHdhcyBkZWxldGVkLlxuICAgICAqLyAgICBkZWxldGUodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5tYXBLZXlGbih0KSwgbiA9IHRoaXMuaW5uZXJbZV07XG4gICAgICAgIGlmICh2b2lkIDAgPT09IG4pIHJldHVybiAhMTtcbiAgICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCBuLmxlbmd0aDsgcysrKSBpZiAodGhpcy5lcXVhbHNGbihuW3NdWzBdLCB0KSkgcmV0dXJuIDEgPT09IG4ubGVuZ3RoID8gZGVsZXRlIHRoaXMuaW5uZXJbZV0gOiBuLnNwbGljZShzLCAxKSwgXG4gICAgICAgICEwO1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIGZvckVhY2godCkge1xuICAgICAgICBodCh0aGlzLmlubmVyLCAoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2UsIHNdIG9mIG4pIHQoZSwgcyk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIGx0KHRoaXMuaW5uZXIpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW4tbWVtb3J5IGJ1ZmZlciBvZiBlbnRyaWVzIHRvIGJlIHdyaXR0ZW4gdG8gYSBSZW1vdGVEb2N1bWVudENhY2hlLlxuICogSXQgY2FuIGJlIHVzZWQgdG8gYmF0Y2ggdXAgYSBzZXQgb2YgY2hhbmdlcyB0byBiZSB3cml0dGVuIHRvIHRoZSBjYWNoZSwgYnV0XG4gKiBhZGRpdGlvbmFsbHkgc3VwcG9ydHMgcmVhZGluZyBlbnRyaWVzIGJhY2sgd2l0aCB0aGUgYGdldEVudHJ5KClgIG1ldGhvZCxcbiAqIGZhbGxpbmcgYmFjayB0byB0aGUgdW5kZXJseWluZyBSZW1vdGVEb2N1bWVudENhY2hlIGlmIG5vIGVudHJ5IGlzXG4gKiBidWZmZXJlZC5cbiAqXG4gKiBFbnRyaWVzIGFkZGVkIHRvIHRoZSBjYWNoZSAqbXVzdCogYmUgcmVhZCBmaXJzdC4gVGhpcyBpcyB0byBmYWNpbGl0YXRlXG4gKiBjYWxjdWxhdGluZyB0aGUgc2l6ZSBkZWx0YSBvZiB0aGUgcGVuZGluZyBjaGFuZ2VzLlxuICpcbiAqIFBPUlRJTkcgTk9URTogVGhpcyBjbGFzcyB3YXMgaW1wbGVtZW50ZWQgdGhlbiByZW1vdmVkIGZyb20gb3RoZXIgcGxhdGZvcm1zLlxuICogSWYgYnl0ZS1jb3VudGluZyBlbmRzIHVwIGJlaW5nIG5lZWRlZCBvbiB0aGUgb3RoZXIgcGxhdGZvcm1zLCBjb25zaWRlclxuICogcG9ydGluZyB0aGlzIGNsYXNzIGFzIHBhcnQgb2YgdGhhdCBpbXBsZW1lbnRhdGlvbiB3b3JrLlxuICovIGNsYXNzIHppIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gQSBtYXBwaW5nIG9mIGRvY3VtZW50IGtleSB0byB0aGUgbmV3IGNhY2hlIGVudHJ5IHRoYXQgc2hvdWxkIGJlIHdyaXR0ZW4gKG9yIG51bGwgaWYgYW55XG4gICAgICAgIC8vIGV4aXN0aW5nIGNhY2hlIGVudHJ5IHNob3VsZCBiZSByZW1vdmVkKS5cbiAgICAgICAgdGhpcy5jaGFuZ2VzID0gbmV3IEdpKCh0ID0+IHQudG9TdHJpbmcoKSksICgodCwgZSkgPT4gdC5pc0VxdWFsKGUpKSksIHRoaXMuY2hhbmdlc0FwcGxpZWQgPSAhMTtcbiAgICB9XG4gICAgZ2V0UmVhZFRpbWUodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5jaGFuZ2VzLmdldCh0KTtcbiAgICAgICAgcmV0dXJuIGUgPyBlLnJlYWRUaW1lIDogY3QubWluKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJ1ZmZlcnMgYSBgUmVtb3RlRG9jdW1lbnRDYWNoZS5hZGRFbnRyeSgpYCBjYWxsLlxuICAgICAqXG4gICAgICogWW91IGNhbiBvbmx5IG1vZGlmeSBkb2N1bWVudHMgdGhhdCBoYXZlIGFscmVhZHkgYmVlbiByZXRyaWV2ZWQgdmlhXG4gICAgICogYGdldEVudHJ5KCkvZ2V0RW50cmllcygpYCAoZW5mb3JjZWQgdmlhIEluZGV4ZWREYnMgYGFwcGx5KClgKS5cbiAgICAgKi8gICAgYWRkRW50cnkodCwgZSkge1xuICAgICAgICB0aGlzLmFzc2VydE5vdEFwcGxpZWQoKSwgdGhpcy5jaGFuZ2VzLnNldCh0LmtleSwge1xuICAgICAgICAgICAgZG9jdW1lbnQ6IHQsXG4gICAgICAgICAgICByZWFkVGltZTogZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQnVmZmVycyBhIGBSZW1vdGVEb2N1bWVudENhY2hlLnJlbW92ZUVudHJ5KClgIGNhbGwuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIG9ubHkgcmVtb3ZlIGRvY3VtZW50cyB0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIHJldHJpZXZlZCB2aWFcbiAgICAgKiBgZ2V0RW50cnkoKS9nZXRFbnRyaWVzKClgIChlbmZvcmNlZCB2aWEgSW5kZXhlZERicyBgYXBwbHkoKWApLlxuICAgICAqLyAgICByZW1vdmVFbnRyeSh0LCBlID0gbnVsbCkge1xuICAgICAgICB0aGlzLmFzc2VydE5vdEFwcGxpZWQoKSwgdGhpcy5jaGFuZ2VzLnNldCh0LCB7XG4gICAgICAgICAgICBkb2N1bWVudDogV3QubmV3SW52YWxpZERvY3VtZW50KHQpLFxuICAgICAgICAgICAgcmVhZFRpbWU6IGVcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvb2tzIHVwIGFuIGVudHJ5IGluIHRoZSBjYWNoZS4gVGhlIGJ1ZmZlcmVkIGNoYW5nZXMgd2lsbCBmaXJzdCBiZSBjaGVja2VkLFxuICAgICAqIGFuZCBpZiBubyBidWZmZXJlZCBjaGFuZ2UgYXBwbGllcywgdGhpcyB3aWxsIGZvcndhcmQgdG9cbiAgICAgKiBgUmVtb3RlRG9jdW1lbnRDYWNoZS5nZXRFbnRyeSgpYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbiAtIFRoZSB0cmFuc2FjdGlvbiBpbiB3aGljaCB0byBwZXJmb3JtIGFueSBwZXJzaXN0ZW5jZVxuICAgICAqICAgICBvcGVyYXRpb25zLlxuICAgICAqIEBwYXJhbSBkb2N1bWVudEtleSAtIFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGxvb2sgdXAuXG4gICAgICogQHJldHVybnMgVGhlIGNhY2hlZCBkb2N1bWVudCBvciBhbiBpbnZhbGlkIGRvY3VtZW50IGlmIHdlIGhhdmUgbm90aGluZ1xuICAgICAqIGNhY2hlZC5cbiAgICAgKi8gICAgZ2V0RW50cnkodCwgZSkge1xuICAgICAgICB0aGlzLmFzc2VydE5vdEFwcGxpZWQoKTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuY2hhbmdlcy5nZXQoZSk7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IG4gPyBHcy5yZXNvbHZlKG4uZG9jdW1lbnQpIDogdGhpcy5nZXRGcm9tQ2FjaGUodCwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvb2tzIHVwIHNldmVyYWwgZW50cmllcyBpbiB0aGUgY2FjaGUsIGZvcndhcmRpbmcgdG9cbiAgICAgKiBgUmVtb3RlRG9jdW1lbnRDYWNoZS5nZXRFbnRyeSgpYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbiAtIFRoZSB0cmFuc2FjdGlvbiBpbiB3aGljaCB0byBwZXJmb3JtIGFueSBwZXJzaXN0ZW5jZVxuICAgICAqICAgICBvcGVyYXRpb25zLlxuICAgICAqIEBwYXJhbSBkb2N1bWVudEtleXMgLSBUaGUga2V5cyBvZiB0aGUgZW50cmllcyB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIEEgbWFwIG9mIGNhY2hlZCBkb2N1bWVudHMsIGluZGV4ZWQgYnkga2V5LiBJZiBhbiBlbnRyeSBjYW5ub3QgYmVcbiAgICAgKiAgICAgZm91bmQsIHRoZSBjb3JyZXNwb25kaW5nIGtleSB3aWxsIGJlIG1hcHBlZCB0byBhbiBpbnZhbGlkIGRvY3VtZW50LlxuICAgICAqLyAgICBnZXRFbnRyaWVzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QWxsRnJvbUNhY2hlKHQsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIGJ1ZmZlcmVkIGNoYW5nZXMgdG8gdGhlIHVuZGVybHlpbmcgUmVtb3RlRG9jdW1lbnRDYWNoZSwgdXNpbmdcbiAgICAgKiB0aGUgcHJvdmlkZWQgdHJhbnNhY3Rpb24uXG4gICAgICovICAgIGFwcGx5KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpLCB0aGlzLmNoYW5nZXNBcHBsaWVkID0gITAsIHRoaXMuYXBwbHlDaGFuZ2VzKHQpO1xuICAgIH1cbiAgICAvKiogSGVscGVyIHRvIGFzc2VydCB0aGlzLmNoYW5nZXMgaXMgbm90IG51bGwgICovICAgIGFzc2VydE5vdEFwcGxpZWQoKSB7fVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgUmVtb3RlRG9jdW1lbnRDYWNoZSBmb3IgSW5kZXhlZERiLiBUbyBjb25zdHJ1Y3QsIGludm9rZVxuICogYG5ld0luZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUoKWAuXG4gKi8gY2xhc3MgSGkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBzZXJpYWxpemVyIC0gVGhlIGRvY3VtZW50IHNlcmlhbGl6ZXIuXG4gICAgICogQHBhcmFtIGluZGV4TWFuYWdlciAtIFRoZSBxdWVyeSBpbmRleGVzIHRoYXQgbmVlZCB0byBiZSBtYWludGFpbmVkLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5rID0gdCwgdGhpcy5KdCA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgdGhlIHN1cHBsaWVkIGVudHJpZXMgdG8gdGhlIGNhY2hlLlxuICAgICAqXG4gICAgICogQWxsIGNhbGxzIG9mIGBhZGRFbnRyeWAgYXJlIHJlcXVpcmVkIHRvIGdvIHRocm91Z2ggdGhlIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyXG4gICAgICogcmV0dXJuZWQgYnkgYG5ld0NoYW5nZUJ1ZmZlcigpYCB0byBlbnN1cmUgcHJvcGVyIGFjY291bnRpbmcgb2YgbWV0YWRhdGEuXG4gICAgICovICAgIGFkZEVudHJ5KHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIFhpKHQpLnB1dChaaShlKSwgbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSBkb2N1bWVudCBmcm9tIHRoZSBjYWNoZS5cbiAgICAgKlxuICAgICAqIEFsbCBjYWxscyBvZiBgcmVtb3ZlRW50cnlgICBhcmUgcmVxdWlyZWQgdG8gZ28gdGhyb3VnaCB0aGUgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgIHRvIGVuc3VyZSBwcm9wZXIgYWNjb3VudGluZyBvZiBtZXRhZGF0YS5cbiAgICAgKi8gICAgcmVtb3ZlRW50cnkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gWGkodCksIHMgPSBaaShlKTtcbiAgICAgICAgcmV0dXJuIG4uZGVsZXRlKHMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBjdXJyZW50IGNhY2hlIHNpemUuXG4gICAgICpcbiAgICAgKiBDYWxsZXJzIHRvIGBhZGRFbnRyeSgpYCBhbmQgYHJlbW92ZUVudHJ5KClgICptdXN0KiBjYWxsIHRoaXMgYWZ0ZXJ3YXJkcyB0byB1cGRhdGUgdGhlXG4gICAgICogY2FjaGUncyBtZXRhZGF0YS5cbiAgICAgKi8gICAgdXBkYXRlTWV0YWRhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRNZXRhZGF0YSh0KS5uZXh0KChuID0+IChuLmJ5dGVTaXplICs9IGUsIHRoaXMuUmUodCwgbikpKSk7XG4gICAgfVxuICAgIGdldEVudHJ5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIFhpKHQpLmdldChaaShlKSkubmV4dCgodCA9PiB0aGlzLlBlKGUsIHQpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvb2tzIHVwIGFuIGVudHJ5IGluIHRoZSBjYWNoZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudEtleSAtIFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGxvb2sgdXAuXG4gICAgICogQHJldHVybnMgVGhlIGNhY2hlZCBkb2N1bWVudCBlbnRyeSBhbmQgaXRzIHNpemUuXG4gICAgICovICAgIGJlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIFhpKHQpLmdldChaaShlKSkubmV4dCgodCA9PiAoe1xuICAgICAgICAgICAgZG9jdW1lbnQ6IHRoaXMuUGUoZSwgdCksXG4gICAgICAgICAgICBzaXplOiBTaSh0KVxuICAgICAgICB9KSkpO1xuICAgIH1cbiAgICBnZXRFbnRyaWVzKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBBbigpO1xuICAgICAgICByZXR1cm4gdGhpcy52ZSh0LCBlLCAoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0aGlzLlBlKHQsIGUpO1xuICAgICAgICAgICAgbiA9IG4uaW5zZXJ0KHQsIHMpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gbikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBzZXZlcmFsIGVudHJpZXMgaW4gdGhlIGNhY2hlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5cyAtIFRoZSBzZXQgb2Yga2V5cyBlbnRyaWVzIHRvIGxvb2sgdXAuXG4gICAgICogQHJldHVybnMgQSBtYXAgb2YgZG9jdW1lbnRzIGluZGV4ZWQgYnkga2V5IGFuZCBhIG1hcCBvZiBzaXplcyBpbmRleGVkIGJ5XG4gICAgICogICAgIGtleSAoemVybyBpZiB0aGUgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3QpLlxuICAgICAqLyAgICBWZSh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gQW4oKSwgcyA9IG5ldyBnbihTdC5jb21wYXJhdG9yKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudmUodCwgZSwgKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gdGhpcy5QZSh0LCBlKTtcbiAgICAgICAgICAgIG4gPSBuLmluc2VydCh0LCBpKSwgcyA9IHMuaW5zZXJ0KHQsIFNpKGUpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+ICh7XG4gICAgICAgICAgICBkb2N1bWVudHM6IG4sXG4gICAgICAgICAgICBTZTogc1xuICAgICAgICB9KSkpO1xuICAgIH1cbiAgICB2ZSh0LCBlLCBuKSB7XG4gICAgICAgIGlmIChlLmlzRW1wdHkoKSkgcmV0dXJuIEdzLnJlc29sdmUoKTtcbiAgICAgICAgY29uc3QgcyA9IElEQktleVJhbmdlLmJvdW5kKGUuZmlyc3QoKS5wYXRoLnRvQXJyYXkoKSwgZS5sYXN0KCkucGF0aC50b0FycmF5KCkpLCBpID0gZS5nZXRJdGVyYXRvcigpO1xuICAgICAgICBsZXQgciA9IGkuZ2V0TmV4dCgpO1xuICAgICAgICByZXR1cm4gWGkodCkuanQoe1xuICAgICAgICAgICAgcmFuZ2U6IHNcbiAgICAgICAgfSwgKCh0LCBlLCBzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvID0gU3QuZnJvbVNlZ21lbnRzKHQpO1xuICAgICAgICAgICAgLy8gR28gdGhyb3VnaCBrZXlzIG5vdCBmb3VuZCBpbiBjYWNoZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoO3IgJiYgU3QuY29tcGFyYXRvcihyLCBvKSA8IDA7ICkgbihyLCBudWxsKSwgciA9IGkuZ2V0TmV4dCgpO1xuICAgICAgICAgICAgciAmJiByLmlzRXF1YWwobykgJiYgKFxuICAgICAgICAgICAgLy8gS2V5IGZvdW5kIGluIGNhY2hlLlxuICAgICAgICAgICAgbihyLCBlKSwgciA9IGkuaGFzTmV4dCgpID8gaS5nZXROZXh0KCkgOiBudWxsKSwgXG4gICAgICAgICAgICAvLyBTa2lwIHRvIHRoZSBuZXh0IGtleSAoaWYgdGhlcmUgaXMgb25lKS5cbiAgICAgICAgICAgIHIgPyBzLkx0KHIucGF0aC50b0FycmF5KCkpIDogcy5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBUaGUgcmVzdCBvZiB0aGUga2V5cyBhcmUgbm90IGluIHRoZSBjYWNoZS4gT25lIGNhc2Ugd2hlcmUgYGl0ZXJhdGVgXG4gICAgICAgICAgICAvLyBhYm92ZSB3b24ndCBnbyB0aHJvdWdoIHRoZW0gaXMgd2hlbiB0aGUgY2FjaGUgaXMgZW1wdHkuXG4gICAgICAgICAgICBmb3IgKDtyOyApIG4ociwgbnVsbCksIHIgPSBpLmhhc05leHQoKSA/IGkuZ2V0TmV4dCgpIDogbnVsbDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIGUsIG4pIHtcbiAgICAgICAgbGV0IHMgPSBBbigpO1xuICAgICAgICBjb25zdCBpID0gZS5wYXRoLmxlbmd0aCArIDEsIHIgPSB7fTtcbiAgICAgICAgaWYgKG4uaXNFcXVhbChjdC5taW4oKSkpIHtcbiAgICAgICAgICAgIC8vIERvY3VtZW50cyBhcmUgb3JkZXJlZCBieSBrZXksIHNvIHdlIGNhbiB1c2UgYSBwcmVmaXggc2NhbiB0byBuYXJyb3dcbiAgICAgICAgICAgIC8vIGRvd24gdGhlIGRvY3VtZW50cyB3ZSBuZWVkIHRvIG1hdGNoIHRoZSBxdWVyeSBhZ2FpbnN0LlxuICAgICAgICAgICAgY29uc3QgdCA9IGUucGF0aC50b0FycmF5KCk7XG4gICAgICAgICAgICByLnJhbmdlID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZCh0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEV4ZWN1dGUgYW4gaW5kZXgtZnJlZSBxdWVyeSBhbmQgZmlsdGVyIGJ5IHJlYWQgdGltZS4gVGhpcyBpcyBzYWZlXG4gICAgICAgICAgICAvLyBzaW5jZSBhbGwgZG9jdW1lbnQgY2hhbmdlcyB0byBxdWVyaWVzIHRoYXQgaGF2ZSBhXG4gICAgICAgICAgICAvLyBsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uIChgc2luY2VSZWFkVGltZWApIGhhdmUgYSByZWFkIHRpbWUgc2V0LlxuICAgICAgICAgICAgY29uc3QgdCA9IGUucGF0aC50b0FycmF5KCksIHMgPSBsaShuKTtcbiAgICAgICAgICAgIHIucmFuZ2UgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKFsgdCwgcyBdLCBcbiAgICAgICAgICAgIC8qIG9wZW49ICovICEwKSwgci5pbmRleCA9ICRzLmNvbGxlY3Rpb25SZWFkVGltZUluZGV4O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBYaSh0KS5qdChyLCAoKHQsIG4sIHIpID0+IHtcbiAgICAgICAgICAgIC8vIFRoZSBxdWVyeSBpcyBhY3R1YWxseSByZXR1cm5pbmcgYW55IHBhdGggdGhhdCBzdGFydHMgd2l0aCB0aGUgcXVlcnlcbiAgICAgICAgICAgIC8vIHBhdGggcHJlZml4IHdoaWNoIG1heSBpbmNsdWRlIGRvY3VtZW50cyBpbiBzdWJjb2xsZWN0aW9ucy4gRm9yXG4gICAgICAgICAgICAvLyBleGFtcGxlLCBhIHF1ZXJ5IG9uICdyb29tcycgd2lsbCByZXR1cm4gcm9vbXMvYWJjL21lc3NhZ2VzL3h5eCBidXQgd2VcbiAgICAgICAgICAgIC8vIHNob3VsZG4ndCBtYXRjaCBpdC4gRml4IHRoaXMgYnkgZGlzY2FyZGluZyByb3dzIHdpdGggZG9jdW1lbnQga2V5c1xuICAgICAgICAgICAgLy8gbW9yZSB0aGFuIG9uZSBzZWdtZW50IGxvbmdlciB0aGFuIHRoZSBxdWVyeSBwYXRoLlxuICAgICAgICAgICAgaWYgKHQubGVuZ3RoICE9PSBpKSByZXR1cm47XG4gICAgICAgICAgICBjb25zdCBvID0gdWkodGhpcy5rLCBuKTtcbiAgICAgICAgICAgIGUucGF0aC5pc1ByZWZpeE9mKG8ua2V5LnBhdGgpID8gU2UoZSwgbykgJiYgKHMgPSBzLmluc2VydChvLmtleSwgbykpIDogci5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBzKSk7XG4gICAgfVxuICAgIG5ld0NoYW5nZUJ1ZmZlcih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgSmkodGhpcywgISF0ICYmIHQudHJhY2tSZW1vdmFscyk7XG4gICAgfVxuICAgIGdldFNpemUodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRNZXRhZGF0YSh0KS5uZXh0KCh0ID0+IHQuYnl0ZVNpemUpKTtcbiAgICB9XG4gICAgZ2V0TWV0YWRhdGEodCkge1xuICAgICAgICByZXR1cm4gWWkodCkuZ2V0KEZzLmtleSkubmV4dCgodCA9PiAoQighIXQpLCB0KSkpO1xuICAgIH1cbiAgICBSZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBZaSh0KS5wdXQoRnMua2V5LCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVjb2RlcyBgcmVtb3RlRG9jYCBhbmQgcmV0dXJucyB0aGUgZG9jdW1lbnQgKG9yIG51bGwsIGlmIHRoZSBkb2N1bWVudFxuICAgICAqIGNvcnJlc3BvbmRzIHRvIHRoZSBmb3JtYXQgdXNlZCBmb3Igc2VudGluZWwgZGVsZXRlcykuXG4gICAgICovICAgIFBlKHQsIGUpIHtcbiAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB1aSh0aGlzLmssIGUpO1xuICAgICAgICAgICAgLy8gV2hldGhlciB0aGUgZG9jdW1lbnQgaXMgYSBzZW50aW5lbCByZW1vdmFsIGFuZCBzaG91bGQgb25seSBiZSB1c2VkIGluIHRoZVxuICAgICAgICAgICAgLy8gYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodC5pc05vRG9jdW1lbnQoKSAmJiB0LnZlcnNpb24uaXNFcXVhbChjdC5taW4oKSkpKSByZXR1cm4gdDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gV3QubmV3SW52YWxpZERvY3VtZW50KHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKlxuICogQHBhcmFtIHNlcmlhbGl6ZXIgLSBUaGUgZG9jdW1lbnQgc2VyaWFsaXplci5cbiAqIEBwYXJhbSBpbmRleE1hbmFnZXIgLSBUaGUgcXVlcnkgaW5kZXhlcyB0aGF0IG5lZWQgdG8gYmUgbWFpbnRhaW5lZC5cbiAqL1xuLyoqXG4gKiBIYW5kbGVzIHRoZSBkZXRhaWxzIG9mIGFkZGluZyBhbmQgdXBkYXRpbmcgZG9jdW1lbnRzIGluIHRoZSBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLlxuICpcbiAqIFVubGlrZSB0aGUgTWVtb3J5UmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIsIHRoZSBJbmRleGVkRGIgaW1wbGVtZW50YXRpb24gY29tcHV0ZXMgdGhlIHNpemVcbiAqIGRlbHRhIGZvciBhbGwgc3VibWl0dGVkIGNoYW5nZXMuIFRoaXMgYXZvaWRzIGhhdmluZyB0byByZS1yZWFkIGFsbCBkb2N1bWVudHMgZnJvbSBJbmRleGVkRGJcbiAqIHdoZW4gd2UgYXBwbHkgdGhlIGNoYW5nZXMuXG4gKi9cbmNsYXNzIEppIGV4dGVuZHMgemkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudENhY2hlIC0gVGhlIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUgdG8gYXBwbHkgdGhlIGNoYW5nZXMgdG8uXG4gICAgICogQHBhcmFtIHRyYWNrUmVtb3ZhbHMgLSBXaGV0aGVyIHRvIGNyZWF0ZSBzZW50aW5lbCBkZWxldGVzIHRoYXQgY2FuIGJlIHRyYWNrZWQgYnlcbiAgICAgKiBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5EZSA9IHQsIHRoaXMudHJhY2tSZW1vdmFscyA9IGUsIFxuICAgICAgICAvLyBBIG1hcCBvZiBkb2N1bWVudCBzaXplcyBwcmlvciB0byBhcHBseWluZyB0aGUgY2hhbmdlcyBpbiB0aGlzIGJ1ZmZlci5cbiAgICAgICAgdGhpcy5DZSA9IG5ldyBHaSgodCA9PiB0LnRvU3RyaW5nKCkpLCAoKHQsIGUpID0+IHQuaXNFcXVhbChlKSkpO1xuICAgIH1cbiAgICBhcHBseUNoYW5nZXModCkge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIGxldCBuID0gMCwgcyA9IG5ldyBUbigoKHQsIGUpID0+IGl0KHQuY2Fub25pY2FsU3RyaW5nKCksIGUuY2Fub25pY2FsU3RyaW5nKCkpKSk7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYW5nZXMuZm9yRWFjaCgoKGksIHIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG8gPSB0aGlzLkNlLmdldChpKTtcbiAgICAgICAgICAgIGlmIChyLmRvY3VtZW50LmlzVmFsaWREb2N1bWVudCgpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYSA9IGhpKHRoaXMuRGUuaywgci5kb2N1bWVudCwgdGhpcy5nZXRSZWFkVGltZShpKSk7XG4gICAgICAgICAgICAgICAgcyA9IHMuYWRkKGkucGF0aC5wb3BMYXN0KCkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGMgPSBTaShhKTtcbiAgICAgICAgICAgICAgICBuICs9IGMgLSBvLCBlLnB1c2godGhpcy5EZS5hZGRFbnRyeSh0LCBpLCBhKSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG4gLT0gbywgdGhpcy50cmFja1JlbW92YWxzKSB7XG4gICAgICAgICAgICAgICAgLy8gSW4gb3JkZXIgdG8gdHJhY2sgcmVtb3ZhbHMsIHdlIHN0b3JlIGEgXCJzZW50aW5lbCBkZWxldGVcIiBpbiB0aGVcbiAgICAgICAgICAgICAgICAvLyBSZW1vdGVEb2N1bWVudENhY2hlLiBUaGlzIGVudHJ5IGlzIHJlcHJlc2VudGVkIGJ5IGEgTm9Eb2N1bWVudFxuICAgICAgICAgICAgICAgIC8vIHdpdGggYSB2ZXJzaW9uIG9mIDAgYW5kIGlnbm9yZWQgYnkgYG1heWJlRGVjb2RlRG9jdW1lbnQoKWAgYnV0XG4gICAgICAgICAgICAgICAgLy8gcHJlc2VydmVkIGluIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWAuXG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IGhpKHRoaXMuRGUuaywgV3QubmV3Tm9Eb2N1bWVudChpLCBjdC5taW4oKSksIHRoaXMuZ2V0UmVhZFRpbWUoaSkpO1xuICAgICAgICAgICAgICAgIGUucHVzaCh0aGlzLkRlLmFkZEVudHJ5KHQsIGksIG4pKTtcbiAgICAgICAgICAgIH0gZWxzZSBlLnB1c2godGhpcy5EZS5yZW1vdmVFbnRyeSh0LCBpKSk7XG4gICAgICAgIH0pKSwgcy5mb3JFYWNoKChuID0+IHtcbiAgICAgICAgICAgIGUucHVzaCh0aGlzLkRlLkp0LmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KHQsIG4pKTtcbiAgICAgICAgfSkpLCBlLnB1c2godGhpcy5EZS51cGRhdGVNZXRhZGF0YSh0LCBuKSksIEdzLndhaXRGb3IoZSk7XG4gICAgfVxuICAgIGdldEZyb21DYWNoZSh0LCBlKSB7XG4gICAgICAgIC8vIFJlY29yZCB0aGUgc2l6ZSBvZiBldmVyeXRoaW5nIHdlIGxvYWQgZnJvbSB0aGUgY2FjaGUgc28gd2UgY2FuIGNvbXB1dGUgYSBkZWx0YSBsYXRlci5cbiAgICAgICAgcmV0dXJuIHRoaXMuRGUuYmUodCwgZSkubmV4dCgodCA9PiAodGhpcy5DZS5zZXQoZSwgdC5zaXplKSwgdC5kb2N1bWVudCkpKTtcbiAgICB9XG4gICAgZ2V0QWxsRnJvbUNhY2hlKHQsIGUpIHtcbiAgICAgICAgLy8gUmVjb3JkIHRoZSBzaXplIG9mIGV2ZXJ5dGhpbmcgd2UgbG9hZCBmcm9tIHRoZSBjYWNoZSBzbyB3ZSBjYW4gY29tcHV0ZVxuICAgICAgICAvLyBhIGRlbHRhIGxhdGVyLlxuICAgICAgICByZXR1cm4gdGhpcy5EZS5WZSh0LCBlKS5uZXh0KCgoe2RvY3VtZW50czogdCwgU2U6IGV9KSA9PiAoXG4gICAgICAgIC8vIE5vdGU6IGBnZXRBbGxGcm9tQ2FjaGVgIHJldHVybnMgdHdvIG1hcHMgaW5zdGVhZCBvZiBhIHNpbmdsZSBtYXAgZnJvbVxuICAgICAgICAvLyBrZXlzIHRvIGBEb2N1bWVudFNpemVFbnRyeWBzLiBUaGlzIGlzIHRvIGFsbG93IHJldHVybmluZyB0aGVcbiAgICAgICAgLy8gYE11dGFibGVEb2N1bWVudE1hcGAgZGlyZWN0bHksIHdpdGhvdXQgYSBjb252ZXJzaW9uLlxuICAgICAgICBlLmZvckVhY2goKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLkNlLnNldCh0LCBlKTtcbiAgICAgICAgfSkpLCB0KSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gWWkodCkge1xuICAgIHJldHVybiBpaSh0LCBGcy5zdG9yZSk7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSByZW1vdGVEb2N1bWVudHMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIFhpKHQpIHtcbiAgICByZXR1cm4gaWkodCwgJHMuc3RvcmUpO1xufVxuXG5mdW5jdGlvbiBaaSh0KSB7XG4gICAgcmV0dXJuIHQucGF0aC50b0FycmF5KCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogUGVyZm9ybXMgZGF0YWJhc2UgY3JlYXRpb24gYW5kIHNjaGVtYSB1cGdyYWRlcy4gKi8gY2xhc3MgdHIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5rID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgZGF0YWJhc2UgY3JlYXRpb24gYW5kIHNjaGVtYSB1cGdyYWRlcy5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCBpbiBwcm9kdWN0aW9uLCB0aGlzIG1ldGhvZCBpcyBvbmx5IGV2ZXIgdXNlZCB0byB1cGdyYWRlIHRoZSBzY2hlbWFcbiAgICAgKiB0byBTQ0hFTUFfVkVSU0lPTi4gRGlmZmVyZW50IHZhbHVlcyBvZiB0b1ZlcnNpb24gYXJlIG9ubHkgdXNlZCBmb3IgdGVzdGluZ1xuICAgICAqIGFuZCBsb2NhbCBmZWF0dXJlIGRldmVsb3BtZW50LlxuICAgICAqLyAgICBOdCh0LCBlLCBuLCBzKSB7XG4gICAgICAgIEIobiA8IHMgJiYgbiA+PSAwICYmIHMgPD0gMTEpO1xuICAgICAgICBjb25zdCBpID0gbmV3IHpzKFwiY3JlYXRlT3JVcGdyYWRlXCIsIGUpO1xuICAgICAgICBuIDwgMSAmJiBzID49IDEgJiYgKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoU3Muc3RvcmUpO1xuICAgICAgICB9KHQpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKERzLnN0b3JlLCB7XG4gICAgICAgICAgICAgICAga2V5UGF0aDogRHMua2V5UGF0aFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKENzLnN0b3JlLCB7XG4gICAgICAgICAgICAgICAga2V5UGF0aDogQ3Mua2V5UGF0aCxcbiAgICAgICAgICAgICAgICBhdXRvSW5jcmVtZW50OiAhMFxuICAgICAgICAgICAgfSkuY3JlYXRlSW5kZXgoQ3MudXNlck11dGF0aW9uc0luZGV4LCBDcy51c2VyTXV0YXRpb25zS2V5UGF0aCwge1xuICAgICAgICAgICAgICAgIHVuaXF1ZTogITBcbiAgICAgICAgICAgIH0pLCB0LmNyZWF0ZU9iamVjdFN0b3JlKE5zLnN0b3JlKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFVwZ3JhZGUgZnVuY3Rpb24gdG8gbWlncmF0ZSB0aGUgJ211dGF0aW9ucycgc3RvcmUgZnJvbSBWMSB0byBWMy4gTG9hZHNcbiAqIGFuZCByZXdyaXRlcyBhbGwgZGF0YS5cbiAqLyAodCksIGVyKHQpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKCRzLnN0b3JlKTtcbiAgICAgICAgfSh0KSk7XG4gICAgICAgIC8vIE1pZ3JhdGlvbiAyIHRvIHBvcHVsYXRlIHRoZSB0YXJnZXRHbG9iYWwgb2JqZWN0IG5vIGxvbmdlciBuZWVkZWQgc2luY2VcbiAgICAgICAgLy8gbWlncmF0aW9uIDMgdW5jb25kaXRpb25hbGx5IGNsZWFycyBpdC5cbiAgICAgICAgICAgICAgICBsZXQgciA9IEdzLnJlc29sdmUoKTtcbiAgICAgICAgcmV0dXJuIG4gPCAzICYmIHMgPj0gMyAmJiAoXG4gICAgICAgIC8vIEJyYW5kIG5ldyBjbGllbnRzIGRvbid0IG5lZWQgdG8gZHJvcCBhbmQgcmVjcmVhdGUtLW9ubHkgY2xpZW50cyB0aGF0XG4gICAgICAgIC8vIHBvdGVudGlhbGx5IGhhdmUgY29ycnVwdCBkYXRhLlxuICAgICAgICAwICE9PSBuICYmICghZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgdC5kZWxldGVPYmplY3RTdG9yZShNcy5zdG9yZSksIHQuZGVsZXRlT2JqZWN0U3RvcmUoT3Muc3RvcmUpLCB0LmRlbGV0ZU9iamVjdFN0b3JlKExzLnN0b3JlKTtcbiAgICAgICAgfSh0KSwgZXIodCkpLCByID0gci5uZXh0KCgoKSA9PiBcbiAgICAgICAgLyoqXG4gKiBDcmVhdGVzIHRoZSB0YXJnZXQgZ2xvYmFsIHNpbmdsZXRvbiByb3cuXG4gKlxuICogQHBhcmFtIHR4biAtIFRoZSB2ZXJzaW9uIHVwZ3JhZGUgdHJhbnNhY3Rpb24gZm9yIGluZGV4ZWRkYlxuICovXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LnN0b3JlKExzLnN0b3JlKSwgbiA9IG5ldyBMcyhcbiAgICAgICAgICAgIC8qaGlnaGVzdFRhcmdldElkPSovIDAsIFxuICAgICAgICAgICAgLypsYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXI9Ki8gMCwgY3QubWluKCkudG9UaW1lc3RhbXAoKSwgXG4gICAgICAgICAgICAvKnRhcmdldENvdW50PSovIDApO1xuICAgICAgICAgICAgcmV0dXJuIGUucHV0KExzLmtleSwgbik7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBDcmVhdGVzIGluZGljZXMgb24gdGhlIFJlbW90ZURvY3VtZW50cyBzdG9yZSB1c2VkIGZvciBib3RoIG11bHRpLXRhYlxuICogYW5kIEluZGV4LUZyZWUgcXVlcmllcy5cbiAqLyAoaSkpKSksIG4gPCA0ICYmIHMgPj0gNCAmJiAoMCAhPT0gbiAmJiAoXG4gICAgICAgIC8vIFNjaGVtYSB2ZXJzaW9uIDMgdXNlcyBhdXRvLWdlbmVyYXRlZCBrZXlzIHRvIGdlbmVyYXRlIGdsb2JhbGx5IHVuaXF1ZVxuICAgICAgICAvLyBtdXRhdGlvbiBiYXRjaCBJRHMgKHRoaXMgd2FzIHByZXZpb3VzbHkgZW5zdXJlZCBpbnRlcm5hbGx5IGJ5IHRoZVxuICAgICAgICAvLyBjbGllbnQpLiBUbyBtaWdyYXRlIHRvIHRoZSBuZXcgc2NoZW1hLCB3ZSBoYXZlIHRvIHJlYWQgYWxsIG11dGF0aW9uc1xuICAgICAgICAvLyBhbmQgd3JpdGUgdGhlbSBiYWNrIG91dC4gV2UgcHJlc2VydmUgdGhlIGV4aXN0aW5nIGJhdGNoIElEcyB0byBndWFyYW50ZWVcbiAgICAgICAgLy8gY29uc2lzdGVuY3kgd2l0aCBvdGhlciBvYmplY3Qgc3RvcmVzLiBBbnkgZnVydGhlciBtdXRhdGlvbiBiYXRjaCBJRHMgd2lsbFxuICAgICAgICAvLyBiZSBhdXRvLWdlbmVyYXRlZC5cbiAgICAgICAgciA9IHIubmV4dCgoKCkgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIGUuc3RvcmUoQ3Muc3RvcmUpLkJ0KCkubmV4dCgobiA9PiB7XG4gICAgICAgICAgICAgICAgdC5kZWxldGVPYmplY3RTdG9yZShDcy5zdG9yZSk7XG4gICAgICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShDcy5zdG9yZSwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBDcy5rZXlQYXRoLFxuICAgICAgICAgICAgICAgICAgICBhdXRvSW5jcmVtZW50OiAhMFxuICAgICAgICAgICAgICAgIH0pLmNyZWF0ZUluZGV4KENzLnVzZXJNdXRhdGlvbnNJbmRleCwgQ3MudXNlck11dGF0aW9uc0tleVBhdGgsIHtcbiAgICAgICAgICAgICAgICAgICAgdW5pcXVlOiAhMFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBlLnN0b3JlKENzLnN0b3JlKSwgaSA9IG4ubWFwKCh0ID0+IHMucHV0KHQpKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEdzLndhaXRGb3IoaSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0odCwgaSkpKSksIHIgPSByLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICFmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShVcy5zdG9yZSwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBVcy5rZXlQYXRoXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KHQpO1xuICAgICAgICB9KSkpLCBuIDwgNSAmJiBzID49IDUgJiYgKHIgPSByLm5leHQoKCgpID0+IHRoaXMuTmUoaSkpKSksIG4gPCA2ICYmIHMgPj0gNiAmJiAociA9IHIubmV4dCgoKCkgPT4gKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoRnMuc3RvcmUpO1xuICAgICAgICB9KHQpLCB0aGlzLmtlKGkpKSkpKSwgbiA8IDcgJiYgcyA+PSA3ICYmIChyID0gci5uZXh0KCgoKSA9PiB0aGlzLnhlKGkpKSkpLCBuIDwgOCAmJiBzID49IDggJiYgKHIgPSByLm5leHQoKCgpID0+IHRoaXMuJGUodCwgaSkpKSksIFxuICAgICAgICBuIDwgOSAmJiBzID49IDkgJiYgKHIgPSByLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIE11bHRpLVRhYiB1c2VkIHRvIG1hbmFnZSBpdHMgb3duIGNoYW5nZWxvZywgYnV0IHRoaXMgaGFzIGJlZW4gbW92ZWRcbiAgICAgICAgICAgIC8vIHRvIHRoZSBEYlJlbW90ZURvY3VtZW50IG9iamVjdCBzdG9yZSBpdHNlbGYuIFNpbmNlIHRoZSBwcmV2aW91cyBjaGFuZ2VcbiAgICAgICAgICAgIC8vIGxvZyBvbmx5IGNvbnRhaW5lZCB0cmFuc2llbnQgZGF0YSwgd2UgY2FuIGRyb3AgaXRzIG9iamVjdCBzdG9yZS5cbiAgICAgICAgICAgICFmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgdC5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKFwicmVtb3RlRG9jdW1lbnRDaGFuZ2VzXCIpICYmIHQuZGVsZXRlT2JqZWN0U3RvcmUoXCJyZW1vdGVEb2N1bWVudENoYW5nZXNcIik7XG4gICAgICAgICAgICB9KHQpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQub2JqZWN0U3RvcmUoJHMuc3RvcmUpO1xuICAgICAgICAgICAgICAgIGUuY3JlYXRlSW5kZXgoJHMucmVhZFRpbWVJbmRleCwgJHMucmVhZFRpbWVJbmRleFBhdGgsIHtcbiAgICAgICAgICAgICAgICAgICAgdW5pcXVlOiAhMVxuICAgICAgICAgICAgICAgIH0pLCBlLmNyZWF0ZUluZGV4KCRzLmNvbGxlY3Rpb25SZWFkVGltZUluZGV4LCAkcy5jb2xsZWN0aW9uUmVhZFRpbWVJbmRleFBhdGgsIHtcbiAgICAgICAgICAgICAgICAgICAgdW5pcXVlOiAhMVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfShlKTtcbiAgICAgICAgfSkpKSwgbiA8IDEwICYmIHMgPj0gMTAgJiYgKHIgPSByLm5leHQoKCgpID0+IHRoaXMuRmUoaSkpKSksIG4gPCAxMSAmJiBzID49IDExICYmIChyID0gci5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAhZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUocXMuc3RvcmUsIHtcbiAgICAgICAgICAgICAgICAgICAga2V5UGF0aDogcXMua2V5UGF0aFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSh0KSwgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoS3Muc3RvcmUsIHtcbiAgICAgICAgICAgICAgICAgICAga2V5UGF0aDogS3Mua2V5UGF0aFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKHQpO1xuICAgICAgICB9KSkpLCByO1xuICAgIH1cbiAgICBrZSh0KSB7XG4gICAgICAgIGxldCBlID0gMDtcbiAgICAgICAgcmV0dXJuIHQuc3RvcmUoJHMuc3RvcmUpLmp0KCgodCwgbikgPT4ge1xuICAgICAgICAgICAgZSArPSBTaShuKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgRnMoZSk7XG4gICAgICAgICAgICByZXR1cm4gdC5zdG9yZShGcy5zdG9yZSkucHV0KEZzLmtleSwgbik7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgTmUodCkge1xuICAgICAgICBjb25zdCBlID0gdC5zdG9yZShEcy5zdG9yZSksIG4gPSB0LnN0b3JlKENzLnN0b3JlKTtcbiAgICAgICAgcmV0dXJuIGUuQnQoKS5uZXh0KChlID0+IEdzLmZvckVhY2goZSwgKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IElEQktleVJhbmdlLmJvdW5kKFsgZS51c2VySWQsIC0xIF0sIFsgZS51c2VySWQsIGUubGFzdEFja25vd2xlZGdlZEJhdGNoSWQgXSk7XG4gICAgICAgICAgICByZXR1cm4gbi5CdChDcy51c2VyTXV0YXRpb25zSW5kZXgsIHMpLm5leHQoKG4gPT4gR3MuZm9yRWFjaChuLCAobiA9PiB7XG4gICAgICAgICAgICAgICAgQihuLnVzZXJJZCA9PT0gZS51c2VySWQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBfaSh0aGlzLmssIG4pO1xuICAgICAgICAgICAgICAgIHJldHVybiBWaSh0LCBlLnVzZXJJZCwgcykubmV4dCgoKCkgPT4ge30pKTtcbiAgICAgICAgICAgIH0pKSkpO1xuICAgICAgICB9KSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5zdXJlcyB0aGF0IGV2ZXJ5IGRvY3VtZW50IGluIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUgaGFzIGEgY29ycmVzcG9uZGluZyBzZW50aW5lbCByb3dcbiAgICAgKiB3aXRoIGEgc2VxdWVuY2UgbnVtYmVyLiBNaXNzaW5nIHJvd3MgYXJlIGdpdmVuIHRoZSBtb3N0IHJlY2VudGx5IHVzZWQgc2VxdWVuY2UgbnVtYmVyLlxuICAgICAqLyAgICB4ZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LnN0b3JlKE1zLnN0b3JlKSwgbiA9IHQuc3RvcmUoJHMuc3RvcmUpO1xuICAgICAgICByZXR1cm4gdC5zdG9yZShMcy5zdG9yZSkuZ2V0KExzLmtleSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gW107XG4gICAgICAgICAgICByZXR1cm4gbi5qdCgoKG4sIGkpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gbmV3IGR0KG4pLCBvID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyAwLCBScyh0KSBdO1xuICAgICAgICAgICAgICAgIH0ocik7XG4gICAgICAgICAgICAgICAgcy5wdXNoKGUuZ2V0KG8pLm5leHQoKG4gPT4gbiA/IEdzLnJlc29sdmUoKSA6IChuID0+IGUucHV0KG5ldyBNcygwLCBScyhuKSwgdC5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIpKSkocikpKSk7XG4gICAgICAgICAgICB9KSkubmV4dCgoKCkgPT4gR3Mud2FpdEZvcihzKSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgICRlKHQsIGUpIHtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBpbmRleC5cbiAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShCcy5zdG9yZSwge1xuICAgICAgICAgICAga2V5UGF0aDogQnMua2V5UGF0aFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbiA9IGUuc3RvcmUoQnMuc3RvcmUpLCBzID0gbmV3IEFpLCBpID0gdCA9PiB7XG4gICAgICAgICAgICBpZiAocy5hZGQodCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdC5sYXN0U2VnbWVudCgpLCBzID0gdC5wb3BMYXN0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4ucHV0KHtcbiAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbklkOiBlLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IFJzKHMpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8vIEhlbHBlciB0byBhZGQgYW4gaW5kZXggZW50cnkgaWZmIHdlIGhhdmVuJ3QgYWxyZWFkeSB3cml0dGVuIGl0LlxuICAgICAgICAgICAgICAgIC8vIEluZGV4IGV4aXN0aW5nIHJlbW90ZSBkb2N1bWVudHMuXG4gICAgICAgIHJldHVybiBlLnN0b3JlKCRzLnN0b3JlKS5qdCh7XG4gICAgICAgICAgICBLdDogITBcbiAgICAgICAgfSwgKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gbmV3IGR0KHQpO1xuICAgICAgICAgICAgcmV0dXJuIGkobi5wb3BMYXN0KCkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gZS5zdG9yZShOcy5zdG9yZSkuanQoe1xuICAgICAgICAgICAgS3Q6ICEwXG4gICAgICAgIH0sICgoW3QsIGUsIG5dLCBzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gdnMoZSk7XG4gICAgICAgICAgICByZXR1cm4gaShyLnBvcExhc3QoKSk7XG4gICAgICAgIH0pKSkpO1xuICAgIH1cbiAgICBGZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LnN0b3JlKE9zLnN0b3JlKTtcbiAgICAgICAgcmV0dXJuIGUuanQoKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gbWkobiksIGkgPSBnaSh0aGlzLmssIHMpO1xuICAgICAgICAgICAgcmV0dXJuIGUucHV0KGkpO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBlcih0KSB7XG4gICAgdC5jcmVhdGVPYmplY3RTdG9yZShNcy5zdG9yZSwge1xuICAgICAgICBrZXlQYXRoOiBNcy5rZXlQYXRoXG4gICAgfSkuY3JlYXRlSW5kZXgoTXMuZG9jdW1lbnRUYXJnZXRzSW5kZXgsIE1zLmRvY3VtZW50VGFyZ2V0c0tleVBhdGgsIHtcbiAgICAgICAgdW5pcXVlOiAhMFxuICAgIH0pO1xuICAgIC8vIE5PVEU6IFRoaXMgaXMgdW5pcXVlIG9ubHkgYmVjYXVzZSB0aGUgVGFyZ2V0SWQgaXMgdGhlIHN1ZmZpeC5cbiAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKE9zLnN0b3JlLCB7XG4gICAgICAgIGtleVBhdGg6IE9zLmtleVBhdGhcbiAgICB9KS5jcmVhdGVJbmRleChPcy5xdWVyeVRhcmdldHNJbmRleE5hbWUsIE9zLnF1ZXJ5VGFyZ2V0c0tleVBhdGgsIHtcbiAgICAgICAgdW5pcXVlOiAhMFxuICAgIH0pLCB0LmNyZWF0ZU9iamVjdFN0b3JlKExzLnN0b3JlKTtcbn1cblxuY29uc3QgbnIgPSBcIkZhaWxlZCB0byBvYnRhaW4gZXhjbHVzaXZlIGFjY2VzcyB0byB0aGUgcGVyc2lzdGVuY2UgbGF5ZXIuIFRvIGFsbG93IHNoYXJlZCBhY2Nlc3MsIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24gaGFzIHRvIGJlIGVuYWJsZWQgaW4gYWxsIHRhYnMuIElmIHlvdSBhcmUgdXNpbmcgYGV4cGVyaW1lbnRhbEZvcmNlT3duaW5nVGFiOnRydWVgLCBtYWtlIHN1cmUgdGhhdCBvbmx5IG9uZSB0YWIgaGFzIHBlcnNpc3RlbmNlIGVuYWJsZWQgYXQgYW55IGdpdmVuIHRpbWUuXCI7XG5cbi8qKlxuICogT2xkZXN0IGFjY2VwdGFibGUgYWdlIGluIG1pbGxpc2Vjb25kcyBmb3IgY2xpZW50IG1ldGFkYXRhIGJlZm9yZSB0aGUgY2xpZW50XG4gKiBpcyBjb25zaWRlcmVkIGluYWN0aXZlIGFuZCBpdHMgYXNzb2NpYXRlZCBkYXRhIGlzIGdhcmJhZ2UgY29sbGVjdGVkLlxuICovXG4vKipcbiAqIEFuIEluZGV4ZWREQi1iYWNrZWQgaW5zdGFuY2Ugb2YgUGVyc2lzdGVuY2UuIERhdGEgaXMgc3RvcmVkIHBlcnNpc3RlbnRseVxuICogYWNyb3NzIHNlc3Npb25zLlxuICpcbiAqIE9uIFdlYiBvbmx5LCB0aGUgRmlyZXN0b3JlIFNES3Mgc3VwcG9ydCBzaGFyZWQgYWNjZXNzIHRvIGl0cyBwZXJzaXN0ZW5jZVxuICogbGF5ZXIuIFRoaXMgYWxsb3dzIG11bHRpcGxlIGJyb3dzZXIgdGFicyB0byByZWFkIGFuZCB3cml0ZSB0byBJbmRleGVkRGIgYW5kXG4gKiB0byBzeW5jaHJvbml6ZSBzdGF0ZSBldmVuIHdpdGhvdXQgbmV0d29yayBjb25uZWN0aXZpdHkuIFNoYXJlZCBhY2Nlc3MgaXNcbiAqIGN1cnJlbnRseSBvcHRpb25hbCBhbmQgbm90IGVuYWJsZWQgdW5sZXNzIGFsbCBjbGllbnRzIGludm9rZVxuICogYGVuYWJsZVBlcnNpc3RlbmNlKClgIHdpdGggYHtzeW5jaHJvbml6ZVRhYnM6dHJ1ZX1gLlxuICpcbiAqIEluIG11bHRpLXRhYiBtb2RlLCBpZiBtdWx0aXBsZSBjbGllbnRzIGFyZSBhY3RpdmUgYXQgdGhlIHNhbWUgdGltZSwgdGhlIFNES1xuICogd2lsbCBkZXNpZ25hdGUgb25lIGNsaWVudCBhcyB0aGUg4oCccHJpbWFyeSBjbGllbnTigJ0uIEFuIGVmZm9ydCBpcyBtYWRlIHRvIHBpY2tcbiAqIGEgdmlzaWJsZSwgbmV0d29yay1jb25uZWN0ZWQgYW5kIGFjdGl2ZSBjbGllbnQsIGFuZCB0aGlzIGNsaWVudCBpc1xuICogcmVzcG9uc2libGUgZm9yIGxldHRpbmcgb3RoZXIgY2xpZW50cyBrbm93IGFib3V0IGl0cyBwcmVzZW5jZS4gVGhlIHByaW1hcnlcbiAqIGNsaWVudCB3cml0ZXMgYSB1bmlxdWUgY2xpZW50LWdlbmVyYXRlZCBpZGVudGlmaWVyICh0aGUgY2xpZW50IElEKSB0b1xuICogSW5kZXhlZERi4oCZcyDigJxvd25lcuKAnSBzdG9yZSBldmVyeSA0IHNlY29uZHMuIElmIHRoZSBwcmltYXJ5IGNsaWVudCBmYWlscyB0b1xuICogdXBkYXRlIHRoaXMgZW50cnksIGFub3RoZXIgY2xpZW50IGNhbiBhY3F1aXJlIHRoZSBsZWFzZSBhbmQgdGFrZSBvdmVyIGFzXG4gKiBwcmltYXJ5LlxuICpcbiAqIFNvbWUgcGVyc2lzdGVuY2Ugb3BlcmF0aW9ucyBpbiB0aGUgU0RLIGFyZSBkZXNpZ25hdGVkIGFzIHByaW1hcnktY2xpZW50IG9ubHlcbiAqIG9wZXJhdGlvbnMuIFRoaXMgaW5jbHVkZXMgdGhlIGFja25vd2xlZGdtZW50IG9mIG11dGF0aW9ucyBhbmQgYWxsIHVwZGF0ZXMgb2ZcbiAqIHJlbW90ZSBkb2N1bWVudHMuIFRoZSBlZmZlY3RzIG9mIHRoZXNlIG9wZXJhdGlvbnMgYXJlIHdyaXR0ZW4gdG8gcGVyc2lzdGVuY2VcbiAqIGFuZCB0aGVuIGJyb2FkY2FzdCB0byBvdGhlciB0YWJzIHZpYSBMb2NhbFN0b3JhZ2UgKHNlZVxuICogYFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZWApLCB3aGljaCB0aGVuIHJlZnJlc2ggdGhlaXIgc3RhdGUgZnJvbVxuICogcGVyc2lzdGVuY2UuXG4gKlxuICogU2ltaWxhcmx5LCB0aGUgcHJpbWFyeSBjbGllbnQgbGlzdGVucyB0byBub3RpZmljYXRpb25zIHNlbnQgYnkgc2Vjb25kYXJ5XG4gKiBjbGllbnRzIHRvIGRpc2NvdmVyIHBlcnNpc3RlbmNlIGNoYW5nZXMgd3JpdHRlbiBieSBzZWNvbmRhcnkgY2xpZW50cywgc3VjaCBhc1xuICogdGhlIGFkZGl0aW9uIG9mIG5ldyBtdXRhdGlvbnMgYW5kIHF1ZXJ5IHRhcmdldHMuXG4gKlxuICogSWYgbXVsdGktdGFiIGlzIG5vdCBlbmFibGVkIGFuZCBhbm90aGVyIHRhYiBhbHJlYWR5IG9idGFpbmVkIHRoZSBwcmltYXJ5XG4gKiBsZWFzZSwgSW5kZXhlZERiUGVyc2lzdGVuY2UgZW50ZXJzIGEgZmFpbGVkIHN0YXRlIGFuZCBhbGwgc3Vic2VxdWVudFxuICogb3BlcmF0aW9ucyB3aWxsIGF1dG9tYXRpY2FsbHkgZmFpbC5cbiAqXG4gKiBBZGRpdGlvbmFsbHksIHRoZXJlIGlzIGFuIG9wdGltaXphdGlvbiBzbyB0aGF0IHdoZW4gYSB0YWIgaXMgY2xvc2VkLCB0aGVcbiAqIHByaW1hcnkgbGVhc2UgaXMgcmVsZWFzZWQgaW1tZWRpYXRlbHkgKHRoaXMgaXMgZXNwZWNpYWxseSBpbXBvcnRhbnQgdG8gbWFrZVxuICogc3VyZSB0aGF0IGEgcmVmcmVzaGVkIHRhYiBpcyBhYmxlIHRvIGltbWVkaWF0ZWx5IHJlLWFjcXVpcmUgdGhlIHByaW1hcnlcbiAqIGxlYXNlKS4gVW5mb3J0dW5hdGVseSwgSW5kZXhlZERCIGNhbm5vdCBiZSByZWxpYWJseSB1c2VkIGluIHdpbmRvdy51bmxvYWRcbiAqIHNpbmNlIGl0IGlzIGFuIGFzeW5jaHJvbm91cyBBUEkuIFNvIGluIGFkZGl0aW9uIHRvIGF0dGVtcHRpbmcgdG8gZ2l2ZSB1cCB0aGVcbiAqIGxlYXNlLCB0aGUgbGVhc2Vob2xkZXIgd3JpdGVzIGl0cyBjbGllbnQgSUQgdG8gYSBcInpvbWJpZWRDbGllbnRcIiBlbnRyeSBpblxuICogTG9jYWxTdG9yYWdlIHdoaWNoIGFjdHMgYXMgYW4gaW5kaWNhdG9yIHRoYXQgYW5vdGhlciB0YWIgc2hvdWxkIGdvIGFoZWFkIGFuZFxuICogdGFrZSB0aGUgcHJpbWFyeSBsZWFzZSBpbW1lZGlhdGVseSByZWdhcmRsZXNzIG9mIHRoZSBjdXJyZW50IGxlYXNlIHRpbWVzdGFtcC5cbiAqXG4gKiBUT0RPKGIvMTE0MjI2MjM0KTogUmVtb3ZlIGBzeW5jaHJvbml6ZVRhYnNgIHNlY3Rpb24gd2hlbiBtdWx0aS10YWIgaXMgbm9cbiAqIGxvbmdlciBvcHRpb25hbC5cbiAqL1xuY2xhc3Mgc3Ige1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdG8gc3luY2hyb25pemUgdGhlIGluLW1lbW9yeSBzdGF0ZSBvZiBtdWx0aXBsZSB0YWJzIGFuZCBzaGFyZVxuICAgICAqIGFjY2VzcyB0byBsb2NhbCBwZXJzaXN0ZW5jZS5cbiAgICAgKi9cbiAgICB0LCBlLCBuLCBzLCBpLCByLCBvLCBhLCBjLCBcbiAgICAvKipcbiAgICAgKiBJZiBzZXQgdG8gdHJ1ZSwgZm9yY2VmdWxseSBvYnRhaW5zIGRhdGFiYXNlIGFjY2Vzcy4gRXhpc3RpbmcgdGFicyB3aWxsXG4gICAgICogbm8gbG9uZ2VyIGJlIGFibGUgdG8gYWNjZXNzIEluZGV4ZWREQi5cbiAgICAgKi9cbiAgICB1KSB7XG4gICAgICAgIGlmICh0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uID0gdCwgdGhpcy5wZXJzaXN0ZW5jZUtleSA9IGUsIHRoaXMuY2xpZW50SWQgPSBuLCBcbiAgICAgICAgdGhpcy5PZSA9IGksIHRoaXMud2luZG93ID0gciwgdGhpcy5kb2N1bWVudCA9IG8sIHRoaXMuTWUgPSBjLCB0aGlzLkxlID0gdSwgdGhpcy5CZSA9IG51bGwsIFxuICAgICAgICB0aGlzLlVlID0gITEsIHRoaXMuaXNQcmltYXJ5ID0gITEsIHRoaXMubmV0d29ya0VuYWJsZWQgPSAhMCwgXG4gICAgICAgIC8qKiBPdXIgd2luZG93LnVubG9hZCBoYW5kbGVyLCBpZiByZWdpc3RlcmVkLiAqL1xuICAgICAgICB0aGlzLnFlID0gbnVsbCwgdGhpcy5pbkZvcmVncm91bmQgPSAhMSwgXG4gICAgICAgIC8qKiBPdXIgJ3Zpc2liaWxpdHljaGFuZ2UnIGxpc3RlbmVyIGlmIHJlZ2lzdGVyZWQuICovXG4gICAgICAgIHRoaXMuS2UgPSBudWxsLCBcbiAgICAgICAgLyoqIFRoZSBjbGllbnQgbWV0YWRhdGEgcmVmcmVzaCB0YXNrLiAqL1xuICAgICAgICB0aGlzLmplID0gbnVsbCwgXG4gICAgICAgIC8qKiBUaGUgbGFzdCB0aW1lIHdlIGdhcmJhZ2UgY29sbGVjdGVkIHRoZSBjbGllbnQgbWV0YWRhdGEgb2JqZWN0IHN0b3JlLiAqL1xuICAgICAgICB0aGlzLlFlID0gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLCBcbiAgICAgICAgLyoqIEEgbGlzdGVuZXIgdG8gbm90aWZ5IG9uIHByaW1hcnkgc3RhdGUgY2hhbmdlcy4gKi9cbiAgICAgICAgdGhpcy5XZSA9IHQgPT4gUHJvbWlzZS5yZXNvbHZlKCksICFzci5idCgpKSB0aHJvdyBuZXcgaihLLlVOSU1QTEVNRU5URUQsIFwiVGhpcyBwbGF0Zm9ybSBpcyBlaXRoZXIgbWlzc2luZyBJbmRleGVkREIgb3IgaXMga25vd24gdG8gaGF2ZSBhbiBpbmNvbXBsZXRlIGltcGxlbWVudGF0aW9uLiBPZmZsaW5lIHBlcnNpc3RlbmNlIGhhcyBiZWVuIGRpc2FibGVkLlwiKTtcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IG5ldyBRaSh0aGlzLCBzKSwgdGhpcy5HZSA9IGUgKyBcIm1haW5cIiwgdGhpcy5rID0gbmV3IGNpKGEpLCBcbiAgICAgICAgdGhpcy56ZSA9IG5ldyBIcyh0aGlzLkdlLCAxMSwgbmV3IHRyKHRoaXMuaykpLCB0aGlzLkhlID0gbmV3IEZpKHRoaXMucmVmZXJlbmNlRGVsZWdhdGUsIHRoaXMuayksIFxuICAgICAgICB0aGlzLkp0ID0gbmV3IFJpLCB0aGlzLkplID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBIaSh0LCBlKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFJldHVybnMgdGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCBoYXZlIGNoYW5nZWQgc2luY2UgdGhlIHNwZWNpZmllZCByZWFkXG4gKiB0aW1lLlxuICovXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24uXG4gICAgICAgICh0aGlzLmssIHRoaXMuSnQpLCB0aGlzLlllID0gbmV3IHBpLCB0aGlzLndpbmRvdyAmJiB0aGlzLndpbmRvdy5sb2NhbFN0b3JhZ2UgPyB0aGlzLlhlID0gdGhpcy53aW5kb3cubG9jYWxTdG9yYWdlIDogKHRoaXMuWGUgPSBudWxsLCBcbiAgICAgICAgITEgPT09IHUgJiYgRihcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIFwiTG9jYWxTdG9yYWdlIGlzIHVuYXZhaWxhYmxlLiBBcyBhIHJlc3VsdCwgcGVyc2lzdGVuY2UgbWF5IG5vdCB3b3JrIHJlbGlhYmx5LiBJbiBwYXJ0aWN1bGFyIGVuYWJsZVBlcnNpc3RlbmNlKCkgY291bGQgZmFpbCBpbW1lZGlhdGVseSBhZnRlciByZWZyZXNoaW5nIHRoZSBwYWdlLlwiKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEF0dGVtcHQgdG8gc3RhcnQgSW5kZXhlZERiIHBlcnNpc3RlbmNlLlxuICAgICAqXG4gICAgICogQHJldHVybnMgV2hldGhlciBwZXJzaXN0ZW5jZSB3YXMgZW5hYmxlZC5cbiAgICAgKi8gICAgc3RhcnQoKSB7XG4gICAgICAgIC8vIE5PVEU6IFRoaXMgaXMgZXhwZWN0ZWQgdG8gZmFpbCBzb21ldGltZXMgKGluIHRoZSBjYXNlIG9mIGFub3RoZXIgdGFiXG4gICAgICAgIC8vIGFscmVhZHkgaGF2aW5nIHRoZSBwZXJzaXN0ZW5jZSBsb2NrKSwgc28gaXQncyB0aGUgZmlyc3QgdGhpbmcgd2Ugc2hvdWxkXG4gICAgICAgIC8vIGRvLlxuICAgICAgICByZXR1cm4gdGhpcy5aZSgpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1ByaW1hcnkgJiYgIXRoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24pIFxuICAgICAgICAgICAgLy8gRmFpbCBgc3RhcnQoKWAgaWYgYHN5bmNocm9uaXplVGFic2AgaXMgZGlzYWJsZWQgYW5kIHdlIGNhbm5vdFxuICAgICAgICAgICAgLy8gb2J0YWluIHRoZSBwcmltYXJ5IGxlYXNlLlxuICAgICAgICAgICAgdGhyb3cgbmV3IGooSy5GQUlMRURfUFJFQ09ORElUSU9OLCBucik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50bigpLCB0aGlzLmVuKCksIHRoaXMubm4oKSwgdGhpcy5ydW5UcmFuc2FjdGlvbihcImdldEhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlclwiLCBcInJlYWRvbmx5XCIsICh0ID0+IHRoaXMuSGUuZ2V0SGlnaGVzdFNlcXVlbmNlTnVtYmVyKHQpKSk7XG4gICAgICAgIH0pKS50aGVuKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuQmUgPSBuZXcgZXQodCwgdGhpcy5NZSk7XG4gICAgICAgIH0pKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLlVlID0gITA7XG4gICAgICAgIH0pKS5jYXRjaCgodCA9PiAodGhpcy56ZSAmJiB0aGlzLnplLmNsb3NlKCksIFByb21pc2UucmVqZWN0KHQpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgYSBsaXN0ZW5lciB0aGF0IGdldHMgY2FsbGVkIHdoZW4gdGhlIHByaW1hcnkgc3RhdGUgb2YgdGhlXG4gICAgICogaW5zdGFuY2UgY2hhbmdlcy4gVXBvbiByZWdpc3RlcmluZywgdGhpcyBsaXN0ZW5lciBpcyBpbnZva2VkIGltbWVkaWF0ZWx5XG4gICAgICogd2l0aCB0aGUgY3VycmVudCBwcmltYXJ5IHN0YXRlLlxuICAgICAqXG4gICAgICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgV2ViIG11bHRpLXRhYi5cbiAgICAgKi8gICAgc24odCkge1xuICAgICAgICByZXR1cm4gdGhpcy5XZSA9IGFzeW5jIGUgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhcnRlZCkgcmV0dXJuIHQoZSk7XG4gICAgICAgIH0sIHQodGhpcy5pc1ByaW1hcnkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgYSBsaXN0ZW5lciB0aGF0IGdldHMgY2FsbGVkIHdoZW4gdGhlIGRhdGFiYXNlIHJlY2VpdmVzIGFcbiAgICAgKiB2ZXJzaW9uIGNoYW5nZSBldmVudCBpbmRpY2F0aW5nIHRoYXQgaXQgaGFzIGRlbGV0ZWQuXG4gICAgICpcbiAgICAgKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBXZWIgbXVsdGktdGFiLlxuICAgICAqLyAgICBzZXREYXRhYmFzZURlbGV0ZWRMaXN0ZW5lcih0KSB7XG4gICAgICAgIHRoaXMuemUueHQoKGFzeW5jIGUgPT4ge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgYW4gYXR0ZW1wdCBpcyBtYWRlIHRvIGRlbGV0ZSBJbmRleGVkREIuXG4gICAgICAgICAgICBudWxsID09PSBlLm5ld1ZlcnNpb24gJiYgYXdhaXQgdCgpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkanVzdHMgdGhlIGN1cnJlbnQgbmV0d29yayBzdGF0ZSBpbiB0aGUgY2xpZW50J3MgbWV0YWRhdGEsIHBvdGVudGlhbGx5XG4gICAgICogYWZmZWN0aW5nIHRoZSBwcmltYXJ5IGxlYXNlLlxuICAgICAqXG4gICAgICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgV2ViIG11bHRpLXRhYi5cbiAgICAgKi8gICAgc2V0TmV0d29ya0VuYWJsZWQodCkge1xuICAgICAgICB0aGlzLm5ldHdvcmtFbmFibGVkICE9PSB0ICYmICh0aGlzLm5ldHdvcmtFbmFibGVkID0gdCwgXG4gICAgICAgIC8vIFNjaGVkdWxlIGEgcHJpbWFyeSBsZWFzZSByZWZyZXNoIGZvciBpbW1lZGlhdGUgZXhlY3V0aW9uLiBUaGUgZXZlbnR1YWxcbiAgICAgICAgLy8gbGVhc2UgdXBkYXRlIHdpbGwgYmUgcHJvcGFnYXRlZCB2aWEgYHByaW1hcnlTdGF0ZUxpc3RlbmVyYC5cbiAgICAgICAgdGhpcy5PZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0ZWQgJiYgYXdhaXQgdGhpcy5aZSgpO1xuICAgICAgICB9KSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBjbGllbnQgbWV0YWRhdGEgaW4gSW5kZXhlZERiIGFuZCBhdHRlbXB0cyB0byBlaXRoZXIgb2J0YWluIG9yXG4gICAgICogZXh0ZW5kIHRoZSBwcmltYXJ5IGxlYXNlIGZvciB0aGUgbG9jYWwgY2xpZW50LiBBc3luY2hyb25vdXNseSBub3RpZmllcyB0aGVcbiAgICAgKiBwcmltYXJ5IHN0YXRlIGxpc3RlbmVyIGlmIHRoZSBjbGllbnQgZWl0aGVyIG5ld2x5IG9idGFpbmVkIG9yIHJlbGVhc2VkIGl0c1xuICAgICAqIHByaW1hcnkgbGVhc2UuXG4gICAgICovICAgIFplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ydW5UcmFuc2FjdGlvbihcInVwZGF0ZUNsaWVudE1ldGFkYXRhQW5kVHJ5QmVjb21lUHJpbWFyeVwiLCBcInJlYWR3cml0ZVwiLCAodCA9PiBycih0KS5wdXQobmV3IFVzKHRoaXMuY2xpZW50SWQsIERhdGUubm93KCksIHRoaXMubmV0d29ya0VuYWJsZWQsIHRoaXMuaW5Gb3JlZ3JvdW5kKSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNQcmltYXJ5KSByZXR1cm4gdGhpcy5ybih0KS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICB0IHx8ICh0aGlzLmlzUHJpbWFyeSA9ICExLCB0aGlzLk9lLmVucXVldWVSZXRyeWFibGUoKCgpID0+IHRoaXMuV2UoITEpKSkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gdGhpcy5vbih0KSkpLm5leHQoKGUgPT4gdGhpcy5pc1ByaW1hcnkgJiYgIWUgPyB0aGlzLmFuKHQpLm5leHQoKCgpID0+ICExKSkgOiAhIWUgJiYgdGhpcy5jbih0KS5uZXh0KCgoKSA9PiAhMCkpKSkpKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICBpZiAoWHModCkpIFxuICAgICAgICAgICAgLy8gUHJvY2VlZCB3aXRoIHRoZSBleGlzdGluZyBzdGF0ZS4gQW55IHN1YnNlcXVlbnQgYWNjZXNzIHRvXG4gICAgICAgICAgICAvLyBJbmRleGVkREIgd2lsbCB2ZXJpZnkgdGhlIGxlYXNlLlxuICAgICAgICAgICAgcmV0dXJuICQoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIkZhaWxlZCB0byBleHRlbmQgb3duZXIgbGVhc2U6IFwiLCB0KSwgdGhpcy5pc1ByaW1hcnk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24pIHRocm93IHQ7XG4gICAgICAgICAgICByZXR1cm4gJChcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIFwiUmVsZWFzaW5nIG93bmVyIGxlYXNlIGFmdGVyIGVycm9yIGR1cmluZyBsZWFzZSByZWZyZXNoXCIsIHQpLCBcbiAgICAgICAgICAgIC8qIGlzUHJpbWFyeT0gKi8gITE7XG4gICAgICAgIH0pKS50aGVuKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNQcmltYXJ5ICE9PSB0ICYmIHRoaXMuT2UuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gdGhpcy5XZSh0KSkpLCB0aGlzLmlzUHJpbWFyeSA9IHQ7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgcm4odCkge1xuICAgICAgICByZXR1cm4gaXIodCkuZ2V0KFNzLmtleSkubmV4dCgodCA9PiBHcy5yZXNvbHZlKHRoaXMudW4odCkpKSk7XG4gICAgfVxuICAgIGhuKHQpIHtcbiAgICAgICAgcmV0dXJuIHJyKHQpLmRlbGV0ZSh0aGlzLmNsaWVudElkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSWYgdGhlIGdhcmJhZ2UgY29sbGVjdGlvbiB0aHJlc2hvbGQgaGFzIHBhc3NlZCwgcHJ1bmVzIHRoZVxuICAgICAqIFJlbW90ZURvY3VtZW50Q2hhbmdlcyBhbmQgdGhlIENsaWVudE1ldGFkYXRhIHN0b3JlIGJhc2VkIG9uIHRoZSBsYXN0IHVwZGF0ZVxuICAgICAqIHRpbWUgb2YgYWxsIGNsaWVudHMuXG4gICAgICovICAgIGFzeW5jIGxuKCkge1xuICAgICAgICBpZiAodGhpcy5pc1ByaW1hcnkgJiYgIXRoaXMuZm4odGhpcy5RZSwgMThlNSkpIHtcbiAgICAgICAgICAgIHRoaXMuUWUgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgY29uc3QgdCA9IGF3YWl0IHRoaXMucnVuVHJhbnNhY3Rpb24oXCJtYXliZUdhcmJhZ2VDb2xsZWN0TXVsdGlDbGllbnRTdGF0ZVwiLCBcInJlYWR3cml0ZS1wcmltYXJ5XCIsICh0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gaWkodCwgVXMuc3RvcmUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBlLkJ0KCkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLmRuKHQsIDE4ZTUpLCBzID0gdC5maWx0ZXIoKHQgPT4gLTEgPT09IG4uaW5kZXhPZih0KSkpO1xuICAgICAgICAgICAgICAgICAgICAvLyBEZWxldGUgbWV0YWRhdGEgZm9yIGNsaWVudHMgdGhhdCBhcmUgbm8gbG9uZ2VyIGNvbnNpZGVyZWQgYWN0aXZlLlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gR3MuZm9yRWFjaChzLCAodCA9PiBlLmRlbGV0ZSh0LmNsaWVudElkKSkpLm5leHQoKCgpID0+IHMpKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSkuY2F0Y2goKCgpID0+IFtdKSk7XG4gICAgICAgICAgICAvLyBEZWxldGUgcG90ZW50aWFsIGxlZnRvdmVyIGVudHJpZXMgdGhhdCBtYXkgY29udGludWUgdG8gbWFyayB0aGVcbiAgICAgICAgICAgIC8vIGluYWN0aXZlIGNsaWVudHMgYXMgem9tYmllZCBpbiBMb2NhbFN0b3JhZ2UuXG4gICAgICAgICAgICAvLyBJZGVhbGx5IHdlJ2QgZGVsZXRlIHRoZSBJbmRleGVkRGIgYW5kIExvY2FsU3RvcmFnZSB6b21iaWUgZW50cmllcyBmb3JcbiAgICAgICAgICAgIC8vIHRoZSBjbGllbnQgYXRvbWljYWxseSwgYnV0IHdlIGNhbid0LiBTbyB3ZSBvcHQgdG8gZGVsZXRlIHRoZSBJbmRleGVkRGJcbiAgICAgICAgICAgIC8vIGVudHJpZXMgZmlyc3QgdG8gYXZvaWQgcG90ZW50aWFsbHkgcmV2aXZpbmcgYSB6b21iaWVkIGNsaWVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLlhlKSBmb3IgKGNvbnN0IGUgb2YgdCkgdGhpcy5YZS5yZW1vdmVJdGVtKHRoaXMud24oZS5jbGllbnRJZCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNjaGVkdWxlcyBhIHJlY3VycmluZyB0aW1lciB0byB1cGRhdGUgdGhlIGNsaWVudCBtZXRhZGF0YSBhbmQgdG8gZWl0aGVyXG4gICAgICogZXh0ZW5kIG9yIGFjcXVpcmUgdGhlIHByaW1hcnkgbGVhc2UgaWYgdGhlIGNsaWVudCBpcyBlbGlnaWJsZS5cbiAgICAgKi8gICAgbm4oKSB7XG4gICAgICAgIHRoaXMuamUgPSB0aGlzLk9lLmVucXVldWVBZnRlckRlbGF5KFwiY2xpZW50X21ldGFkYXRhX3JlZnJlc2hcIiAvKiBDbGllbnRNZXRhZGF0YVJlZnJlc2ggKi8gLCA0ZTMsICgoKSA9PiB0aGlzLlplKCkudGhlbigoKCkgPT4gdGhpcy5sbigpKSkudGhlbigoKCkgPT4gdGhpcy5ubigpKSkpKTtcbiAgICB9XG4gICAgLyoqIENoZWNrcyB3aGV0aGVyIGBjbGllbnRgIGlzIHRoZSBsb2NhbCBjbGllbnQuICovICAgIHVuKHQpIHtcbiAgICAgICAgcmV0dXJuICEhdCAmJiB0Lm93bmVySWQgPT09IHRoaXMuY2xpZW50SWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV2YWx1YXRlIHRoZSBzdGF0ZSBvZiBhbGwgYWN0aXZlIGNsaWVudHMgYW5kIGRldGVybWluZSB3aGV0aGVyIHRoZSBsb2NhbFxuICAgICAqIGNsaWVudCBpcyBvciBjYW4gYWN0IGFzIHRoZSBob2xkZXIgb2YgdGhlIHByaW1hcnkgbGVhc2UuIFJldHVybnMgd2hldGhlclxuICAgICAqIHRoZSBjbGllbnQgaXMgZWxpZ2libGUgZm9yIHRoZSBsZWFzZSwgYnV0IGRvZXMgbm90IGFjdHVhbGx5IGFjcXVpcmUgaXQuXG4gICAgICogTWF5IHJldHVybiAnZmFsc2UnIGV2ZW4gaWYgdGhlcmUgaXMgbm8gYWN0aXZlIGxlYXNlaG9sZGVyIGFuZCBhbm90aGVyXG4gICAgICogKGZvcmVncm91bmQpIGNsaWVudCBzaG91bGQgYmVjb21lIGxlYXNlaG9sZGVyIGluc3RlYWQuXG4gICAgICovICAgIG9uKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuTGUpIHJldHVybiBHcy5yZXNvbHZlKCEwKTtcbiAgICAgICAgcmV0dXJuIGlyKHQpLmdldChTcy5rZXkpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgLy8gQSBjbGllbnQgaXMgZWxpZ2libGUgZm9yIHRoZSBwcmltYXJ5IGxlYXNlIGlmOlxuICAgICAgICAgICAgLy8gLSBpdHMgbmV0d29yayBpcyBlbmFibGVkIGFuZCB0aGUgY2xpZW50J3MgdGFiIGlzIGluIHRoZSBmb3JlZ3JvdW5kLlxuICAgICAgICAgICAgLy8gLSBpdHMgbmV0d29yayBpcyBlbmFibGVkIGFuZCBubyBvdGhlciBjbGllbnQncyB0YWIgaXMgaW4gdGhlXG4gICAgICAgICAgICAvLyAgIGZvcmVncm91bmQuXG4gICAgICAgICAgICAvLyAtIGV2ZXJ5IGNsaWVudHMgbmV0d29yayBpcyBkaXNhYmxlZCBhbmQgdGhlIGNsaWVudCdzIHRhYiBpcyBpbiB0aGVcbiAgICAgICAgICAgIC8vICAgZm9yZWdyb3VuZC5cbiAgICAgICAgICAgIC8vIC0gZXZlcnkgY2xpZW50cyBuZXR3b3JrIGlzIGRpc2FibGVkIGFuZCBubyBvdGhlciBjbGllbnQncyB0YWIgaXMgaW5cbiAgICAgICAgICAgIC8vICAgdGhlIGZvcmVncm91bmQuXG4gICAgICAgICAgICAvLyAtIHRoZSBgZm9yY2VPd25pbmdUYWJgIHNldHRpbmcgd2FzIHBhc3NlZCBpbi5cbiAgICAgICAgICAgIGlmIChudWxsICE9PSBlICYmIHRoaXMuZm4oZS5sZWFzZVRpbWVzdGFtcE1zLCA1ZTMpICYmICF0aGlzLl9uKGUub3duZXJJZCkpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy51bihlKSAmJiB0aGlzLm5ldHdvcmtFbmFibGVkKSByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnVuKGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZS5hbGxvd1RhYlN5bmNocm9uaXphdGlvbikgXG4gICAgICAgICAgICAgICAgICAgIC8vIEZhaWwgdGhlIGBjYW5BY3RBc1ByaW1hcnlgIGNoZWNrIGlmIHRoZSBjdXJyZW50IGxlYXNlaG9sZGVyIGhhc1xuICAgICAgICAgICAgICAgICAgICAvLyBub3Qgb3B0ZWQgaW50byBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uLiBJZiB0aGlzIGhhcHBlbnMgYXRcbiAgICAgICAgICAgICAgICAgICAgLy8gY2xpZW50IHN0YXJ0dXAsIHdlIHJlamVjdCB0aGUgUHJvbWlzZSByZXR1cm5lZCBieVxuICAgICAgICAgICAgICAgICAgICAvLyBgZW5hYmxlUGVyc2lzdGVuY2UoKWAgYW5kIHRoZSB1c2VyIGNhbiBjb250aW51ZSB0byB1c2UgRmlyZXN0b3JlXG4gICAgICAgICAgICAgICAgICAgIC8vIHdpdGggaW4tbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGlzIGZhaWxzIGR1cmluZyBhIGxlYXNlIHJlZnJlc2gsIHdlIHdpbGwgaW5zdGVhZCBibG9jayB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gQXN5bmNRdWV1ZSBmcm9tIGV4ZWN1dGluZyBmdXJ0aGVyIG9wZXJhdGlvbnMuIE5vdGUgdGhhdCB0aGlzIGlzXG4gICAgICAgICAgICAgICAgICAgIC8vIGFjY2VwdGFibGUgc2luY2UgbWl4aW5nICYgbWF0Y2hpbmcgZGlmZmVyZW50IGBzeW5jaHJvbml6ZVRhYnNgXG4gICAgICAgICAgICAgICAgICAgIC8vIHNldHRpbmdzIGlzIG5vdCBzdXBwb3J0ZWQuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE8oYi8xMTQyMjYyMzQpOiBSZW1vdmUgdGhpcyBjaGVjayB3aGVuIGBzeW5jaHJvbml6ZVRhYnNgIGNhblxuICAgICAgICAgICAgICAgICAgICAvLyBubyBsb25nZXIgYmUgdHVybmVkIG9mZi5cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IGooSy5GQUlMRURfUFJFQ09ORElUSU9OLCBucik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gISghdGhpcy5uZXR3b3JrRW5hYmxlZCB8fCAhdGhpcy5pbkZvcmVncm91bmQpIHx8IHJyKHQpLkJ0KCkubmV4dCgodCA9PiB2b2lkIDAgPT09IHRoaXMuZG4odCwgNWUzKS5maW5kKCh0ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jbGllbnRJZCAhPT0gdC5jbGllbnRJZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gIXRoaXMubmV0d29ya0VuYWJsZWQgJiYgdC5uZXR3b3JrRW5hYmxlZCwgbiA9ICF0aGlzLmluRm9yZWdyb3VuZCAmJiB0LmluRm9yZWdyb3VuZCwgcyA9IHRoaXMubmV0d29ya0VuYWJsZWQgPT09IHQubmV0d29ya0VuYWJsZWQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlIHx8IG4gJiYgcykgcmV0dXJuICEwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gITE7XG4gICAgICAgICAgICB9KSkpKTtcbiAgICAgICAgfSkpLm5leHQoKHQgPT4gKHRoaXMuaXNQcmltYXJ5ICE9PSB0ICYmICQoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBgQ2xpZW50ICR7dCA/IFwiaXNcIiA6IFwiaXMgbm90XCJ9IGVsaWdpYmxlIGZvciBhIHByaW1hcnkgbGVhc2UuYCksIFxuICAgICAgICB0KSkpO1xuICAgIH1cbiAgICBhc3luYyBzaHV0ZG93bigpIHtcbiAgICAgICAgLy8gVGhlIHNodXRkb3duKCkgb3BlcmF0aW9ucyBhcmUgaWRlbXBvdGVudCBhbmQgY2FuIGJlIGNhbGxlZCBldmVuIHdoZW5cbiAgICAgICAgLy8gc3RhcnQoKSBhYm9ydGVkIChlLmcuIGJlY2F1c2UgaXQgY291bGRuJ3QgYWNxdWlyZSB0aGUgcGVyc2lzdGVuY2UgbGVhc2UpLlxuICAgICAgICB0aGlzLlVlID0gITEsIHRoaXMubW4oKSwgdGhpcy5qZSAmJiAodGhpcy5qZS5jYW5jZWwoKSwgdGhpcy5qZSA9IG51bGwpLCB0aGlzLmduKCksIFxuICAgICAgICB0aGlzLnluKCksIFxuICAgICAgICAvLyBVc2UgYFNpbXBsZURiLnJ1blRyYW5zYWN0aW9uYCBkaXJlY3RseSB0byBhdm9pZCBmYWlsaW5nIGlmIGFub3RoZXIgdGFiXG4gICAgICAgIC8vIGhhcyBvYnRhaW5lZCB0aGUgcHJpbWFyeSBsZWFzZS5cbiAgICAgICAgYXdhaXQgdGhpcy56ZS5ydW5UcmFuc2FjdGlvbihcInNodXRkb3duXCIsIFwicmVhZHdyaXRlXCIsIFsgU3Muc3RvcmUsIFVzLnN0b3JlIF0sICh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgc2kodCwgZXQuSSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hbihlKS5uZXh0KCgoKSA9PiB0aGlzLmhuKGUpKSk7XG4gICAgICAgIH0pKSwgdGhpcy56ZS5jbG9zZSgpLCBcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBlbnRyeSBtYXJraW5nIHRoZSBjbGllbnQgYXMgem9tYmllZCBmcm9tIExvY2FsU3RvcmFnZSBzaW5jZVxuICAgICAgICAvLyB3ZSBzdWNjZXNzZnVsbHkgZGVsZXRlZCBpdHMgbWV0YWRhdGEgZnJvbSBJbmRleGVkRGIuXG4gICAgICAgIHRoaXMucG4oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBjbGllbnRzIHRoYXQgYXJlIG5vdCB6b21iaWVkIGFuZCBoYXZlIGFuIHVwZGF0ZVRpbWUgd2l0aGluIHRoZVxuICAgICAqIHByb3ZpZGVkIHRocmVzaG9sZC5cbiAgICAgKi8gICAgZG4odCwgZSkge1xuICAgICAgICByZXR1cm4gdC5maWx0ZXIoKHQgPT4gdGhpcy5mbih0LnVwZGF0ZVRpbWVNcywgZSkgJiYgIXRoaXMuX24odC5jbGllbnRJZCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgSURzIG9mIHRoZSBjbGllbnRzIHRoYXQgYXJlIGN1cnJlbnRseSBhY3RpdmUuIElmIG11bHRpLXRhYlxuICAgICAqIGlzIG5vdCBzdXBwb3J0ZWQsIHJldHVybnMgYW4gYXJyYXkgdGhhdCBvbmx5IGNvbnRhaW5zIHRoZSBsb2NhbCBjbGllbnQnc1xuICAgICAqIElELlxuICAgICAqXG4gICAgICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgV2ViIG11bHRpLXRhYi5cbiAgICAgKi8gICAgVG4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJ1blRyYW5zYWN0aW9uKFwiZ2V0QWN0aXZlQ2xpZW50c1wiLCBcInJlYWRvbmx5XCIsICh0ID0+IHJyKHQpLkJ0KCkubmV4dCgodCA9PiB0aGlzLmRuKHQsIDE4ZTUpLm1hcCgodCA9PiB0LmNsaWVudElkKSkpKSkpO1xuICAgIH1cbiAgICBnZXQgc3RhcnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuVWU7XG4gICAgfVxuICAgIGdldE11dGF0aW9uUXVldWUodCkge1xuICAgICAgICByZXR1cm4gRGkuWHQodCwgdGhpcy5rLCB0aGlzLkp0LCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlKTtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0Q2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkhlO1xuICAgIH1cbiAgICBnZXRSZW1vdGVEb2N1bWVudENhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5KZTtcbiAgICB9XG4gICAgZ2V0SW5kZXhNYW5hZ2VyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5KdDtcbiAgICB9XG4gICAgZ2V0QnVuZGxlQ2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlllO1xuICAgIH1cbiAgICBydW5UcmFuc2FjdGlvbih0LCBlLCBuKSB7XG4gICAgICAgICQoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIlN0YXJ0aW5nIHRyYW5zYWN0aW9uOlwiLCB0KTtcbiAgICAgICAgY29uc3QgcyA9IFwicmVhZG9ubHlcIiA9PT0gZSA/IFwicmVhZG9ubHlcIiA6IFwicmVhZHdyaXRlXCI7XG4gICAgICAgIGxldCBpO1xuICAgICAgICAvLyBEbyBhbGwgdHJhbnNhY3Rpb25zIGFzIHJlYWR3cml0ZSBhZ2FpbnN0IGFsbCBvYmplY3Qgc3RvcmVzLCBzaW5jZSB3ZVxuICAgICAgICAvLyBhcmUgdGhlIG9ubHkgcmVhZGVyL3dyaXRlci5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy56ZS5ydW5UcmFuc2FjdGlvbih0LCBzLCBqcywgKHMgPT4gKGkgPSBuZXcgc2kocywgdGhpcy5CZSA/IHRoaXMuQmUubmV4dCgpIDogZXQuSSksIFxuICAgICAgICBcInJlYWR3cml0ZS1wcmltYXJ5XCIgPT09IGUgPyB0aGlzLnJuKGkpLm5leHQoKHQgPT4gISF0IHx8IHRoaXMub24oaSkpKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGlmICghZSkgdGhyb3cgRihgRmFpbGVkIHRvIG9idGFpbiBwcmltYXJ5IGxlYXNlIGZvciBhY3Rpb24gJyR7dH0nLmApLCB0aGlzLmlzUHJpbWFyeSA9ICExLCBcbiAgICAgICAgICAgIHRoaXMuT2UuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gdGhpcy5XZSghMSkpKSwgbmV3IGooSy5GQUlMRURfUFJFQ09ORElUSU9OLCBRcyk7XG4gICAgICAgICAgICByZXR1cm4gbihpKTtcbiAgICAgICAgfSkpLm5leHQoKHQgPT4gdGhpcy5jbihpKS5uZXh0KCgoKSA9PiB0KSkpKSA6IHRoaXMuRW4oaSkubmV4dCgoKCkgPT4gbihpKSkpKSkpLnRoZW4oKHQgPT4gKGkucmFpc2VPbkNvbW1pdHRlZEV2ZW50KCksIFxuICAgICAgICB0KSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBWZXJpZmllcyB0aGF0IHRoZSBjdXJyZW50IHRhYiBpcyB0aGUgcHJpbWFyeSBsZWFzZWhvbGRlciBvciBhbHRlcm5hdGl2ZWx5XG4gICAgICogdGhhdCB0aGUgbGVhc2Vob2xkZXIgaGFzIG9wdGVkIGludG8gbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbi5cbiAgICAgKi9cbiAgICAvLyBUT0RPKGIvMTE0MjI2MjM0KTogUmVtb3ZlIHRoaXMgY2hlY2sgd2hlbiBgc3luY2hyb25pemVUYWJzYCBjYW4gbm8gbG9uZ2VyXG4gICAgLy8gYmUgdHVybmVkIG9mZi5cbiAgICBFbih0KSB7XG4gICAgICAgIHJldHVybiBpcih0KS5nZXQoU3Mua2V5KS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSB0ICYmIHRoaXMuZm4odC5sZWFzZVRpbWVzdGFtcE1zLCA1ZTMpICYmICF0aGlzLl9uKHQub3duZXJJZCkgJiYgIXRoaXMudW4odCkgJiYgISh0aGlzLkxlIHx8IHRoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24gJiYgdC5hbGxvd1RhYlN5bmNocm9uaXphdGlvbikpIHRocm93IG5ldyBqKEsuRkFJTEVEX1BSRUNPTkRJVElPTiwgbnIpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE9idGFpbnMgb3IgZXh0ZW5kcyB0aGUgbmV3IHByaW1hcnkgbGVhc2UgZm9yIHRoZSBsb2NhbCBjbGllbnQuIFRoaXNcbiAgICAgKiBtZXRob2QgZG9lcyBub3QgdmVyaWZ5IHRoYXQgdGhlIGNsaWVudCBpcyBlbGlnaWJsZSBmb3IgdGhpcyBsZWFzZS5cbiAgICAgKi8gICAgY24odCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IFNzKHRoaXMuY2xpZW50SWQsIHRoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24sIERhdGUubm93KCkpO1xuICAgICAgICByZXR1cm4gaXIodCkucHV0KFNzLmtleSwgZSk7XG4gICAgfVxuICAgIHN0YXRpYyBidCgpIHtcbiAgICAgICAgcmV0dXJuIEhzLmJ0KCk7XG4gICAgfVxuICAgIC8qKiBDaGVja3MgdGhlIHByaW1hcnkgbGVhc2UgYW5kIHJlbW92ZXMgaXQgaWYgd2UgYXJlIHRoZSBjdXJyZW50IHByaW1hcnkuICovICAgIGFuKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IGlyKHQpO1xuICAgICAgICByZXR1cm4gZS5nZXQoU3Mua2V5KS5uZXh0KCh0ID0+IHRoaXMudW4odCkgPyAoJChcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIFwiUmVsZWFzaW5nIHByaW1hcnkgbGVhc2UuXCIpLCBcbiAgICAgICAgZS5kZWxldGUoU3Mua2V5KSkgOiBHcy5yZXNvbHZlKCkpKTtcbiAgICB9XG4gICAgLyoqIFZlcmlmaWVzIHRoYXQgYHVwZGF0ZVRpbWVNc2AgaXMgd2l0aGluIGBtYXhBZ2VNc2AuICovICAgIGZuKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IERhdGUubm93KCk7XG4gICAgICAgIHJldHVybiAhKHQgPCBuIC0gZSkgJiYgKCEodCA+IG4pIHx8IChGKGBEZXRlY3RlZCBhbiB1cGRhdGUgdGltZSB0aGF0IGlzIGluIHRoZSBmdXR1cmU6ICR7dH0gPiAke259YCksIFxuICAgICAgICAhMSkpO1xuICAgIH1cbiAgICB0bigpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy5kb2N1bWVudCAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHRoaXMuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAmJiAodGhpcy5LZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuT2UuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gKHRoaXMuaW5Gb3JlZ3JvdW5kID0gXCJ2aXNpYmxlXCIgPT09IHRoaXMuZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlLCBcbiAgICAgICAgICAgIHRoaXMuWmUoKSkpKTtcbiAgICAgICAgfSwgdGhpcy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB0aGlzLktlKSwgdGhpcy5pbkZvcmVncm91bmQgPSBcInZpc2libGVcIiA9PT0gdGhpcy5kb2N1bWVudC52aXNpYmlsaXR5U3RhdGUpO1xuICAgIH1cbiAgICBnbigpIHtcbiAgICAgICAgdGhpcy5LZSAmJiAodGhpcy5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB0aGlzLktlKSwgdGhpcy5LZSA9IG51bGwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBdHRhY2hlcyBhIHdpbmRvdy51bmxvYWQgaGFuZGxlciB0aGF0IHdpbGwgc3luY2hyb25vdXNseSB3cml0ZSBvdXJcbiAgICAgKiBjbGllbnRJZCB0byBhIFwiem9tYmllIGNsaWVudCBpZFwiIGxvY2F0aW9uIGluIExvY2FsU3RvcmFnZS4gVGhpcyBjYW4gYmUgdXNlZFxuICAgICAqIGJ5IHRhYnMgdHJ5aW5nIHRvIGFjcXVpcmUgdGhlIHByaW1hcnkgbGVhc2UgdG8gZGV0ZXJtaW5lIHRoYXQgdGhlIGxlYXNlXG4gICAgICogaXMgbm8gbG9uZ2VyIHZhbGlkIGV2ZW4gaWYgdGhlIHRpbWVzdGFtcCBpcyByZWNlbnQuIFRoaXMgaXMgcGFydGljdWxhcmx5XG4gICAgICogaW1wb3J0YW50IGZvciB0aGUgcmVmcmVzaCBjYXNlIChzbyB0aGUgdGFiIGNvcnJlY3RseSByZS1hY3F1aXJlcyB0aGVcbiAgICAgKiBwcmltYXJ5IGxlYXNlKS4gTG9jYWxTdG9yYWdlIGlzIHVzZWQgZm9yIHRoaXMgcmF0aGVyIHRoYW4gSW5kZXhlZERiIGJlY2F1c2VcbiAgICAgKiBpdCBpcyBhIHN5bmNocm9ub3VzIEFQSSBhbmQgc28gY2FuIGJlIHVzZWQgcmVsaWFibHkgZnJvbSAgYW4gdW5sb2FkXG4gICAgICogaGFuZGxlci5cbiAgICAgKi8gICAgZW4oKSB7XG4gICAgICAgIHZhciB0O1xuICAgICAgICBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIChudWxsID09PSAodCA9IHRoaXMud2luZG93KSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LmFkZEV2ZW50TGlzdGVuZXIpICYmICh0aGlzLnFlID0gKCkgPT4ge1xuICAgICAgICAgICAgLy8gTm90ZTogSW4gdGhlb3J5LCB0aGlzIHNob3VsZCBiZSBzY2hlZHVsZWQgb24gdGhlIEFzeW5jUXVldWUgc2luY2UgaXRcbiAgICAgICAgICAgIC8vIGFjY2Vzc2VzIGludGVybmFsIHN0YXRlLiBXZSBleGVjdXRlIHRoaXMgY29kZSBkaXJlY3RseSBkdXJpbmcgc2h1dGRvd25cbiAgICAgICAgICAgIC8vIHRvIG1ha2Ugc3VyZSBpdCBnZXRzIGEgY2hhbmNlIHRvIHJ1bi5cbiAgICAgICAgICAgIHRoaXMubW4oKSwgaXNTYWZhcmkoKSAmJiBuYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaCgvVmVyc2lvblxcLzFbNDVdLykgJiYgXG4gICAgICAgICAgICAvLyBPbiBTYWZhcmkgMTQgYW5kIDE1LCB3ZSBkbyBub3QgcnVuIGFueSBjbGVhbnVwIGFjdGlvbnMgYXMgaXQgbWlnaHRcbiAgICAgICAgICAgIC8vIHRyaWdnZXIgYSBidWcgdGhhdCBwcmV2ZW50cyBTYWZhcmkgZnJvbSByZS1vcGVuaW5nIEluZGV4ZWREQiBkdXJpbmdcbiAgICAgICAgICAgIC8vIHRoZSBuZXh0IHBhZ2UgbG9hZC5cbiAgICAgICAgICAgIC8vIFNlZSBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MjI2NTQ3XG4gICAgICAgICAgICB0aGlzLk9lLmVudGVyUmVzdHJpY3RlZE1vZGUoLyogcHVyZ2VFeGlzdGluZ1Rhc2tzPSAqLyAhMCksIHRoaXMuT2UuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gdGhpcy5zaHV0ZG93bigpKSk7XG4gICAgICAgIH0sIHRoaXMud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwYWdlaGlkZVwiLCB0aGlzLnFlKSk7XG4gICAgfVxuICAgIHluKCkge1xuICAgICAgICB0aGlzLnFlICYmICh0aGlzLndpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicGFnZWhpZGVcIiwgdGhpcy5xZSksIHRoaXMucWUgPSBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIGEgY2xpZW50IGlzIFwiem9tYmllZFwiIGJhc2VkIG9uIGl0cyBMb2NhbFN0b3JhZ2UgZW50cnkuXG4gICAgICogQ2xpZW50cyBiZWNvbWUgem9tYmllZCB3aGVuIHRoZWlyIHRhYiBjbG9zZXMgd2l0aG91dCBydW5uaW5nIGFsbCBvZiB0aGVcbiAgICAgKiBjbGVhbnVwIGxvZ2ljIGluIGBzaHV0ZG93bigpYC5cbiAgICAgKi8gICAgX24odCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBudWxsICE9PSAobnVsbCA9PT0gKGUgPSB0aGlzLlhlKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmdldEl0ZW0odGhpcy53bih0KSkpO1xuICAgICAgICAgICAgcmV0dXJuICQoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBgQ2xpZW50ICcke3R9JyAke24gPyBcImlzXCIgOiBcImlzIG5vdFwifSB6b21iaWVkIGluIExvY2FsU3RvcmFnZWApLCBcbiAgICAgICAgICAgIG47XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIC8vIEdyYWNlZnVsbHkgaGFuZGxlIGlmIExvY2FsU3RvcmFnZSBpc24ndCB3b3JraW5nLlxuICAgICAgICAgICAgcmV0dXJuIEYoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIkZhaWxlZCB0byBnZXQgem9tYmllZCBjbGllbnQgaWQuXCIsIHQpLCAhMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWNvcmQgY2xpZW50IGFzIHpvbWJpZWQgKGEgY2xpZW50IHRoYXQgaGFkIGl0cyB0YWIgY2xvc2VkKS4gWm9tYmllZFxuICAgICAqIGNsaWVudHMgYXJlIGlnbm9yZWQgZHVyaW5nIHByaW1hcnkgdGFiIHNlbGVjdGlvbi5cbiAgICAgKi8gICAgbW4oKSB7XG4gICAgICAgIGlmICh0aGlzLlhlKSB0cnkge1xuICAgICAgICAgICAgdGhpcy5YZS5zZXRJdGVtKHRoaXMud24odGhpcy5jbGllbnRJZCksIFN0cmluZyhEYXRlLm5vdygpKSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIC8vIEdyYWNlZnVsbHkgaGFuZGxlIGlmIExvY2FsU3RvcmFnZSBpc24ndCBhdmFpbGFibGUgLyB3b3JraW5nLlxuICAgICAgICAgICAgRihcIkZhaWxlZCB0byBzZXQgem9tYmllIGNsaWVudCBpZC5cIiwgdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIFJlbW92ZXMgdGhlIHpvbWJpZWQgY2xpZW50IGVudHJ5IGlmIGl0IGV4aXN0cy4gKi8gICAgcG4oKSB7XG4gICAgICAgIGlmICh0aGlzLlhlKSB0cnkge1xuICAgICAgICAgICAgdGhpcy5YZS5yZW1vdmVJdGVtKHRoaXMud24odGhpcy5jbGllbnRJZCkpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAvLyBJZ25vcmVcbiAgICAgICAgfVxuICAgIH1cbiAgICB3bih0KSB7XG4gICAgICAgIHJldHVybiBgZmlyZXN0b3JlX3pvbWJpZV8ke3RoaXMucGVyc2lzdGVuY2VLZXl9XyR7dH1gO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIHByaW1hcnkgY2xpZW50IG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBpcih0KSB7XG4gICAgcmV0dXJuIGlpKHQsIFNzLnN0b3JlKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGNsaWVudCBtZXRhZGF0YSBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gcnIodCkge1xuICAgIHJldHVybiBpaSh0LCBVcy5zdG9yZSk7XG59XG5cbi8qKlxuICogR2VuZXJhdGVzIGEgc3RyaW5nIHVzZWQgYXMgYSBwcmVmaXggd2hlbiBzdG9yaW5nIGRhdGEgaW4gSW5kZXhlZERCIGFuZFxuICogTG9jYWxTdG9yYWdlLlxuICovIGZ1bmN0aW9uIG9yKHQsIGUpIHtcbiAgICAvLyBVc2UgdHdvIGRpZmZlcmVudCBwcmVmaXggZm9ybWF0czpcbiAgICAvLyAgICogZmlyZXN0b3JlIC8gcGVyc2lzdGVuY2VLZXkgLyBwcm9qZWN0SUQgLiBkYXRhYmFzZUlEIC8gLi4uXG4gICAgLy8gICAqIGZpcmVzdG9yZSAvIHBlcnNpc3RlbmNlS2V5IC8gcHJvamVjdElEIC8gLi4uXG4gICAgLy8gcHJvamVjdElEcyBhcmUgRE5TLWNvbXBhdGlibGUgbmFtZXMgYW5kIGNhbm5vdCBjb250YWluIGRvdHNcbiAgICAvLyBzbyB0aGVyZSdzIG5vIGRhbmdlciBvZiBjb2xsaXNpb25zLlxuICAgIGxldCBuID0gdC5wcm9qZWN0SWQ7XG4gICAgcmV0dXJuIHQuaXNEZWZhdWx0RGF0YWJhc2UgfHwgKG4gKz0gXCIuXCIgKyB0LmRhdGFiYXNlKSwgXCJmaXJlc3RvcmUvXCIgKyBlICsgXCIvXCIgKyBuICsgXCIvXCI7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jbGFzcyBhciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnByb2dyZXNzID0gdCwgdGhpcy5JbiA9IGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHJlYWRvbmx5IHZpZXcgb2YgdGhlIGxvY2FsIHN0YXRlIG9mIGFsbCBkb2N1bWVudHMgd2UncmUgdHJhY2tpbmcgKGkuZS4gd2VcbiAqIGhhdmUgYSBjYWNoZWQgdmVyc2lvbiBpbiByZW1vdGVEb2N1bWVudENhY2hlIG9yIGxvY2FsIG11dGF0aW9ucyBmb3IgdGhlXG4gKiBkb2N1bWVudCkuIFRoZSB2aWV3IGlzIGNvbXB1dGVkIGJ5IGFwcGx5aW5nIHRoZSBtdXRhdGlvbnMgaW4gdGhlXG4gKiBNdXRhdGlvblF1ZXVlIHRvIHRoZSBSZW1vdGVEb2N1bWVudENhY2hlLlxuICovIGNsYXNzIGNyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuSmUgPSB0LCB0aGlzLkFuID0gZSwgdGhpcy5KdCA9IG47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbG9jYWwgdmlldyBvZiB0aGUgZG9jdW1lbnQgaWRlbnRpZmllZCBieSBga2V5YC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIExvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50IG9yIG51bGwgaWYgd2UgZG9uJ3QgaGF2ZSBhbnkgY2FjaGVkXG4gICAgICogc3RhdGUgZm9yIGl0LlxuICAgICAqLyAgICBSbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkFuLmdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5KHQsIGUpLm5leHQoKG4gPT4gdGhpcy5Qbih0LCBlLCBuKSkpO1xuICAgIH1cbiAgICAvKiogSW50ZXJuYWwgdmVyc2lvbiBvZiBgZ2V0RG9jdW1lbnRgIHRoYXQgYWxsb3dzIHJldXNpbmcgYmF0Y2hlcy4gKi8gICAgUG4odCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5KZS5nZXRFbnRyeSh0LCBlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiBuKSBlLmFwcGx5VG9Mb2NhbFZpZXcodCk7XG4gICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSB2aWV3IG9mIHRoZSBnaXZlbiBgZG9jc2AgYXMgdGhleSB3b3VsZCBhcHBlYXIgYWZ0ZXIgYXBwbHlpbmdcbiAgICAvLyBhbGwgbXV0YXRpb25zIGluIHRoZSBnaXZlbiBgYmF0Y2hlc2AuXG4gICAgYm4odCwgZSkge1xuICAgICAgICB0LmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkgdC5hcHBseVRvTG9jYWxWaWV3KG4pO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGxvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50cyBpZGVudGlmaWVkIGJ5IGBrZXlzYC5cbiAgICAgKlxuICAgICAqIElmIHdlIGRvbid0IGhhdmUgY2FjaGVkIHN0YXRlIGZvciBhIGRvY3VtZW50IGluIGBrZXlzYCwgYSBOb0RvY3VtZW50IHdpbGxcbiAgICAgKiBiZSBzdG9yZWQgZm9yIHRoYXQga2V5IGluIHRoZSByZXN1bHRpbmcgc2V0LlxuICAgICAqLyAgICB2bih0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkplLmdldEVudHJpZXModCwgZSkubmV4dCgoZSA9PiB0aGlzLlZuKHQsIGUpLm5leHQoKCgpID0+IGUpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHRoZSBsb2NhbCB2aWV3IHRoZSBnaXZlbiBgYmFzZURvY3NgIHdpdGhvdXQgcmV0cmlldmluZyBkb2N1bWVudHNcbiAgICAgKiBmcm9tIHRoZSBsb2NhbCBzdG9yZS5cbiAgICAgKi8gICAgVm4odCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Bbi5nZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleXModCwgZSkubmV4dCgodCA9PiB0aGlzLmJuKGUsIHQpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGEgcXVlcnkgYWdhaW5zdCB0aGUgbG9jYWwgdmlldyBvZiBhbGwgZG9jdW1lbnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uIC0gVGhlIHBlcnNpc3RlbmNlIHRyYW5zYWN0aW9uLlxuICAgICAqIEBwYXJhbSBxdWVyeSAtIFRoZSBxdWVyeSB0byBtYXRjaCBkb2N1bWVudHMgYWdhaW5zdC5cbiAgICAgKiBAcGFyYW0gc2luY2VSZWFkVGltZSAtIElmIG5vdCBzZXQgdG8gU25hcHNob3RWZXJzaW9uLm1pbigpLCByZXR1cm4gb25seVxuICAgICAqICAgICBkb2N1bWVudHMgdGhhdCBoYXZlIGJlZW4gcmVhZCBzaW5jZSB0aGlzIHNuYXBzaG90IHZlcnNpb24gKGV4Y2x1c2l2ZSkuXG4gICAgICovICAgIGdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbikge1xuICAgICAgICAvKipcbiAqIFJldHVybnMgd2hldGhlciB0aGUgcXVlcnkgbWF0Y2hlcyBhIHNpbmdsZSBkb2N1bWVudCBieSBwYXRoIChyYXRoZXIgdGhhbiBhXG4gKiBjb2xsZWN0aW9uKS5cbiAqL1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIFN0LmlzRG9jdW1lbnRLZXkodC5wYXRoKSAmJiBudWxsID09PSB0LmNvbGxlY3Rpb25Hcm91cCAmJiAwID09PSB0LmZpbHRlcnMubGVuZ3RoO1xuICAgICAgICB9KGUpID8gdGhpcy5Tbih0LCBlLnBhdGgpIDogSWUoZSkgPyB0aGlzLkRuKHQsIGUsIG4pIDogdGhpcy5Dbih0LCBlLCBuKTtcbiAgICB9XG4gICAgU24odCwgZSkge1xuICAgICAgICAvLyBKdXN0IGRvIGEgc2ltcGxlIGRvY3VtZW50IGxvb2t1cC5cbiAgICAgICAgcmV0dXJuIHRoaXMuUm4odCwgbmV3IFN0KGUpKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGxldCBlID0gUG4oKTtcbiAgICAgICAgICAgIHJldHVybiB0LmlzRm91bmREb2N1bWVudCgpICYmIChlID0gZS5pbnNlcnQodC5rZXksIHQpKSwgZTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBEbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBlLmNvbGxlY3Rpb25Hcm91cDtcbiAgICAgICAgbGV0IGkgPSBQbigpO1xuICAgICAgICByZXR1cm4gdGhpcy5KdC5nZXRDb2xsZWN0aW9uUGFyZW50cyh0LCBzKS5uZXh0KChyID0+IEdzLmZvckVhY2gociwgKHIgPT4ge1xuICAgICAgICAgICAgY29uc3QgbyA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IF9lKGUsIFxuICAgICAgICAgICAgICAgIC8qY29sbGVjdGlvbkdyb3VwPSovIG51bGwsIHQuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIHQuZmlsdGVycy5zbGljZSgpLCB0LmxpbWl0LCB0LmxpbWl0VHlwZSwgdC5zdGFydEF0LCB0LmVuZEF0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoaXMgcXVlcnkgZG9lcyBub3Qgc3BlY2lmeSBhbnkgcXVlcnkgY29uc3RyYWludHMgdGhhdFxuICogY291bGQgcmVtb3ZlIHJlc3VsdHMuXG4gKi8gKGUsIHIuY2hpbGQocykpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuQ24odCwgbywgbikubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgdC5mb3JFYWNoKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpID0gaS5pbnNlcnQodCwgZSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpKSk7XG4gICAgfVxuICAgIENuKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gUXVlcnkgdGhlIHJlbW90ZSBkb2N1bWVudHMgYW5kIG92ZXJsYXkgbXV0YXRpb25zLlxuICAgICAgICBsZXQgcywgaTtcbiAgICAgICAgcmV0dXJuIHRoaXMuSmUuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSh0LCBlLCBuKS5uZXh0KChuID0+IChzID0gbiwgdGhpcy5Bbi5nZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdRdWVyeSh0LCBlKSkpKS5uZXh0KChlID0+IChpID0gZSwgXG4gICAgICAgIHRoaXMuTm4odCwgaSwgcykubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBzID0gdDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBpKSBmb3IgKGNvbnN0IGUgb2YgdC5tdXRhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gZS5rZXk7XG4gICAgICAgICAgICAgICAgbGV0IGkgPSBzLmdldChuKTtcbiAgICAgICAgICAgICAgICBudWxsID09IGkgJiYgKFxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBpbnZhbGlkIGRvY3VtZW50IHRvIGFwcGx5IG11dGF0aW9ucyBvbiB0b3Agb2ZcbiAgICAgICAgICAgICAgICBpID0gV3QubmV3SW52YWxpZERvY3VtZW50KG4pLCBzID0gcy5pbnNlcnQobiwgaSkpLCB0bihlLCBpLCB0LmxvY2FsV3JpdGVUaW1lKSwgaS5pc0ZvdW5kRG9jdW1lbnQoKSB8fCAocyA9IHMucmVtb3ZlKG4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpKSkpLm5leHQoKCgpID0+IChcbiAgICAgICAgLy8gRmluYWxseSwgZmlsdGVyIG91dCBhbnkgZG9jdW1lbnRzIHRoYXQgZG9uJ3QgYWN0dWFsbHkgbWF0Y2hcbiAgICAgICAgLy8gdGhlIHF1ZXJ5LlxuICAgICAgICBzLmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBTZShlLCBuKSB8fCAocyA9IHMucmVtb3ZlKHQpKTtcbiAgICAgICAgfSkpLCBzKSkpO1xuICAgIH1cbiAgICBObih0LCBlLCBuKSB7XG4gICAgICAgIGxldCBzID0gU24oKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIGZvciAoY29uc3QgZSBvZiB0Lm11dGF0aW9ucykgZSBpbnN0YW5jZW9mIG9uICYmIG51bGwgPT09IG4uZ2V0KGUua2V5KSAmJiAocyA9IHMuYWRkKGUua2V5KSk7XG4gICAgICAgIGxldCBpID0gbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuSmUuZ2V0RW50cmllcyh0LCBzKS5uZXh0KCh0ID0+ICh0LmZvckVhY2goKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBlLmlzRm91bmREb2N1bWVudCgpICYmIChpID0gaS5pbnNlcnQodCwgZSkpO1xuICAgICAgICB9KSksIGkpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHNldCBvZiBjaGFuZ2VzIHRvIHdoYXQgZG9jdW1lbnRzIGFyZSBjdXJyZW50bHkgaW4gdmlldyBhbmQgb3V0IG9mIHZpZXcgZm9yXG4gKiBhIGdpdmVuIHF1ZXJ5LiBUaGVzZSBjaGFuZ2VzIGFyZSBzZW50IHRvIHRoZSBMb2NhbFN0b3JlIGJ5IHRoZSBWaWV3ICh2aWFcbiAqIHRoZSBTeW5jRW5naW5lKSBhbmQgYXJlIHVzZWQgdG8gcGluIC8gdW5waW4gZG9jdW1lbnRzIGFzIGFwcHJvcHJpYXRlLlxuICovIGNsYXNzIHVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSB0LCB0aGlzLmZyb21DYWNoZSA9IGUsIHRoaXMua24gPSBuLCB0aGlzLnhuID0gcztcbiAgICB9XG4gICAgc3RhdGljICRuKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBTbigpLCBzID0gU24oKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUuZG9jQ2hhbmdlcykgc3dpdGNoICh0LnR5cGUpIHtcbiAgICAgICAgICBjYXNlIDAgLyogQWRkZWQgKi8gOlxuICAgICAgICAgICAgbiA9IG4uYWRkKHQuZG9jLmtleSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMSAvKiBSZW1vdmVkICovIDpcbiAgICAgICAgICAgIHMgPSBzLmFkZCh0LmRvYy5rZXkpO1xuIC8vIGRvIG5vdGhpbmdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgdXIodCwgZS5mcm9tQ2FjaGUsIG4sIHMpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBxdWVyeSBlbmdpbmUgdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgdGhlIHRhcmdldCBkb2N1bWVudCBtYXBwaW5nIGluIHRoZVxuICogUXVlcnlDYWNoZS4gUXVlcnkgZXhlY3V0aW9uIGlzIG9wdGltaXplZCBieSBvbmx5IHJlYWRpbmcgdGhlIGRvY3VtZW50cyB0aGF0XG4gKiBwcmV2aW91c2x5IG1hdGNoZWQgYSBxdWVyeSBwbHVzIGFueSBkb2N1bWVudHMgdGhhdCB3ZXJlIGVkaXRlZCBhZnRlciB0aGVcbiAqIHF1ZXJ5IHdhcyBsYXN0IGxpc3RlbmVkIHRvLlxuICpcbiAqIFRoZXJlIGFyZSBzb21lIGNhc2VzIHdoZW4gdGhpcyBvcHRpbWl6YXRpb24gaXMgbm90IGd1YXJhbnRlZWQgdG8gcHJvZHVjZVxuICogdGhlIHNhbWUgcmVzdWx0cyBhcyBmdWxsIGNvbGxlY3Rpb24gc2NhbnMuIEluIHRoZXNlIGNhc2VzLCBxdWVyeVxuICogcHJvY2Vzc2luZyBmYWxscyBiYWNrIHRvIGZ1bGwgc2NhbnMuIFRoZXNlIGNhc2VzIGFyZTpcbiAqXG4gKiAtIExpbWl0IHF1ZXJpZXMgd2hlcmUgYSBkb2N1bWVudCB0aGF0IG1hdGNoZWQgdGhlIHF1ZXJ5IHByZXZpb3VzbHkgbm8gbG9uZ2VyXG4gKiAgIG1hdGNoZXMgdGhlIHF1ZXJ5LlxuICpcbiAqIC0gTGltaXQgcXVlcmllcyB3aGVyZSBhIGRvY3VtZW50IGVkaXQgbWF5IGNhdXNlIHRoZSBkb2N1bWVudCB0byBzb3J0IGJlbG93XG4gKiAgIGFub3RoZXIgZG9jdW1lbnQgdGhhdCBpcyBpbiB0aGUgbG9jYWwgY2FjaGUuXG4gKlxuICogLSBRdWVyaWVzIHRoYXQgaGF2ZSBuZXZlciBiZWVuIENVUlJFTlQgb3IgZnJlZSBvZiBsaW1ibyBkb2N1bWVudHMuXG4gKi8gY2xhc3MgaHIge1xuICAgIC8qKiBTZXRzIHRoZSBkb2N1bWVudCB2aWV3IHRvIHF1ZXJ5IGFnYWluc3QuICovXG4gICAgRm4odCkge1xuICAgICAgICB0aGlzLk9uID0gdDtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYWxsIGxvY2FsIGRvY3VtZW50cyBtYXRjaGluZyB0aGUgc3BlY2lmaWVkIHF1ZXJ5LiAqLyAgICBnZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIGUsIG4sIHMpIHtcbiAgICAgICAgLy8gUXVlcmllcyB0aGF0IG1hdGNoIGFsbCBkb2N1bWVudHMgZG9uJ3QgYmVuZWZpdCBmcm9tIHVzaW5nXG4gICAgICAgIC8vIGtleS1iYXNlZCBsb29rdXBzLiBJdCBpcyBtb3JlIGVmZmljaWVudCB0byBzY2FuIGFsbCBkb2N1bWVudHMgaW4gYVxuICAgICAgICAvLyBjb2xsZWN0aW9uLCByYXRoZXIgdGhhbiB0byBwZXJmb3JtIGluZGl2aWR1YWwgbG9va3Vwcy5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiAwID09PSB0LmZpbHRlcnMubGVuZ3RoICYmIG51bGwgPT09IHQubGltaXQgJiYgbnVsbCA9PSB0LnN0YXJ0QXQgJiYgbnVsbCA9PSB0LmVuZEF0ICYmICgwID09PSB0LmV4cGxpY2l0T3JkZXJCeS5sZW5ndGggfHwgMSA9PT0gdC5leHBsaWNpdE9yZGVyQnkubGVuZ3RoICYmIHQuZXhwbGljaXRPcmRlckJ5WzBdLmZpZWxkLmlzS2V5RmllbGQoKSk7XG4gICAgICAgIH0oZSkgfHwgbi5pc0VxdWFsKGN0Lm1pbigpKSA/IHRoaXMuTW4odCwgZSkgOiB0aGlzLk9uLnZuKHQsIHMpLm5leHQoKGkgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuTG4oZSwgaSk7XG4gICAgICAgICAgICByZXR1cm4gKHllKGUpIHx8IHBlKGUpKSAmJiB0aGlzLkJuKGUubGltaXRUeXBlLCByLCBzLCBuKSA/IHRoaXMuTW4odCwgZSkgOiAoaygpIDw9IExvZ0xldmVsLkRFQlVHICYmICQoXCJRdWVyeUVuZ2luZVwiLCBcIlJlLXVzaW5nIHByZXZpb3VzIHJlc3VsdCBmcm9tICVzIHRvIGV4ZWN1dGUgcXVlcnk6ICVzXCIsIG4udG9TdHJpbmcoKSwgVmUoZSkpLCBcbiAgICAgICAgICAgIHRoaXMuT24uZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSh0LCBlLCBuKS5uZXh0KCh0ID0+IChcbiAgICAgICAgICAgIC8vIFdlIG1lcmdlIGBwcmV2aW91c1Jlc3VsdHNgIGludG8gYHVwZGF0ZVJlc3VsdHNgLCBzaW5jZVxuICAgICAgICAgICAgLy8gYHVwZGF0ZVJlc3VsdHNgIGlzIGFscmVhZHkgYSBEb2N1bWVudE1hcC4gSWYgYSBkb2N1bWVudCBpc1xuICAgICAgICAgICAgLy8gY29udGFpbmVkIGluIGJvdGggbGlzdHMsIHRoZW4gaXRzIGNvbnRlbnRzIGFyZSB0aGUgc2FtZS5cbiAgICAgICAgICAgIHIuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgdCA9IHQuaW5zZXJ0KGUua2V5LCBlKTtcbiAgICAgICAgICAgIH0pKSwgdCkpKSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgLy8gUXVlcmllcyB0aGF0IGhhdmUgbmV2ZXIgc2VlbiBhIHNuYXBzaG90IHdpdGhvdXQgbGltYm8gZnJlZSBkb2N1bWVudHNcbiAgICAgICAgLy8gc2hvdWxkIGFsc28gYmUgcnVuIGFzIGEgZnVsbCBjb2xsZWN0aW9uIHNjYW4uXG4gICAgICAgIH1cbiAgICAvKiogQXBwbGllcyB0aGUgcXVlcnkgZmlsdGVyIGFuZCBzb3J0aW5nIHRvIHRoZSBwcm92aWRlZCBkb2N1bWVudHMuICAqLyAgICBMbih0LCBlKSB7XG4gICAgICAgIC8vIFNvcnQgdGhlIGRvY3VtZW50cyBhbmQgcmUtYXBwbHkgdGhlIHF1ZXJ5IGZpbHRlciBzaW5jZSBwcmV2aW91c2x5XG4gICAgICAgIC8vIG1hdGNoaW5nIGRvY3VtZW50cyBkbyBub3QgbmVjZXNzYXJpbHkgc3RpbGwgbWF0Y2ggdGhlIHF1ZXJ5LlxuICAgICAgICBsZXQgbiA9IG5ldyBUbihEZSh0KSk7XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKChlLCBzKSA9PiB7XG4gICAgICAgICAgICBTZSh0LCBzKSAmJiAobiA9IG4uYWRkKHMpKTtcbiAgICAgICAgfSkpLCBuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIGlmIGEgbGltaXQgcXVlcnkgbmVlZHMgdG8gYmUgcmVmaWxsZWQgZnJvbSBjYWNoZSwgbWFraW5nIGl0XG4gICAgICogaW5lbGlnaWJsZSBmb3IgaW5kZXgtZnJlZSBleGVjdXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc29ydGVkUHJldmlvdXNSZXN1bHRzIC0gVGhlIGRvY3VtZW50cyB0aGF0IG1hdGNoZWQgdGhlIHF1ZXJ5IHdoZW4gaXRcbiAgICAgKiB3YXMgbGFzdCBzeW5jaHJvbml6ZWQsIHNvcnRlZCBieSB0aGUgcXVlcnkncyBjb21wYXJhdG9yLlxuICAgICAqIEBwYXJhbSByZW1vdGVLZXlzIC0gVGhlIGRvY3VtZW50IGtleXMgdGhhdCBtYXRjaGVkIHRoZSBxdWVyeSBhdCB0aGUgbGFzdFxuICAgICAqIHNuYXBzaG90LlxuICAgICAqIEBwYXJhbSBsaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gLSBUaGUgdmVyc2lvbiBvZiB0aGUgc25hcHNob3Qgd2hlbiB0aGVcbiAgICAgKiBxdWVyeSB3YXMgbGFzdCBzeW5jaHJvbml6ZWQuXG4gICAgICovICAgIEJuKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgLy8gVGhlIHF1ZXJ5IG5lZWRzIHRvIGJlIHJlZmlsbGVkIGlmIGEgcHJldmlvdXNseSBtYXRjaGluZyBkb2N1bWVudCBub1xuICAgICAgICAvLyBsb25nZXIgbWF0Y2hlcy5cbiAgICAgICAgaWYgKG4uc2l6ZSAhPT0gZS5zaXplKSByZXR1cm4gITA7XG4gICAgICAgIC8vIExpbWl0IHF1ZXJpZXMgYXJlIG5vdCBlbGlnaWJsZSBmb3IgaW5kZXgtZnJlZSBxdWVyeSBleGVjdXRpb24gaWYgdGhlcmUgaXNcbiAgICAgICAgLy8gYSBwb3RlbnRpYWwgdGhhdCBhbiBvbGRlciBkb2N1bWVudCBmcm9tIGNhY2hlIG5vdyBzb3J0cyBiZWZvcmUgYSBkb2N1bWVudFxuICAgICAgICAvLyB0aGF0IHdhcyBwcmV2aW91c2x5IHBhcnQgb2YgdGhlIGxpbWl0LiBUaGlzLCBob3dldmVyLCBjYW4gb25seSBoYXBwZW4gaWZcbiAgICAgICAgLy8gdGhlIGRvY3VtZW50IGF0IHRoZSBlZGdlIG9mIHRoZSBsaW1pdCBnb2VzIG91dCBvZiBsaW1pdC5cbiAgICAgICAgLy8gSWYgYSBkb2N1bWVudCB0aGF0IGlzIG5vdCB0aGUgbGltaXQgYm91bmRhcnkgc29ydHMgZGlmZmVyZW50bHksXG4gICAgICAgIC8vIHRoZSBib3VuZGFyeSBvZiB0aGUgbGltaXQgaXRzZWxmIGRpZCBub3QgY2hhbmdlIGFuZCBkb2N1bWVudHMgZnJvbSBjYWNoZVxuICAgICAgICAvLyB3aWxsIGNvbnRpbnVlIHRvIGJlIFwicmVqZWN0ZWRcIiBieSB0aGlzIGJvdW5kYXJ5LiBUaGVyZWZvcmUsIHdlIGNhbiBpZ25vcmVcbiAgICAgICAgLy8gYW55IG1vZGlmaWNhdGlvbnMgdGhhdCBkb24ndCBhZmZlY3QgdGhlIGxhc3QgZG9jdW1lbnQuXG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IFwiRlwiIC8qIEZpcnN0ICovID09PSB0ID8gZS5sYXN0KCkgOiBlLmZpcnN0KCk7XG4gICAgICAgIHJldHVybiAhIWkgJiYgKGkuaGFzUGVuZGluZ1dyaXRlcyB8fCBpLnZlcnNpb24uY29tcGFyZVRvKHMpID4gMCk7XG4gICAgfVxuICAgIE1uKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIGsoKSA8PSBMb2dMZXZlbC5ERUJVRyAmJiAkKFwiUXVlcnlFbmdpbmVcIiwgXCJVc2luZyBmdWxsIGNvbGxlY3Rpb24gc2NhbiB0byBleGVjdXRlIHF1ZXJ5OlwiLCBWZShlKSksIFxuICAgICAgICB0aGlzLk9uLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgY3QubWluKCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSW1wbGVtZW50cyBgTG9jYWxTdG9yZWAgaW50ZXJmYWNlLlxuICpcbiAqIE5vdGU6IHNvbWUgZmllbGQgZGVmaW5lZCBpbiB0aGlzIGNsYXNzIG1pZ2h0IGhhdmUgcHVibGljIGFjY2VzcyBsZXZlbCwgYnV0XG4gKiB0aGUgY2xhc3MgaXMgbm90IGV4cG9ydGVkIHNvIHRoZXkgYXJlIG9ubHkgYWNjZXNzaWJsZSBmcm9tIHRoaXMgbW9kdWxlLlxuICogVGhpcyBpcyB1c2VmdWwgdG8gaW1wbGVtZW50IG9wdGlvbmFsIGZlYXR1cmVzIChsaWtlIGJ1bmRsZXMpIGluIGZyZWVcbiAqIGZ1bmN0aW9ucywgc3VjaCB0aGF0IHRoZXkgYXJlIHRyZWUtc2hha2VhYmxlLlxuICovXG5jbGFzcyBsciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIE1hbmFnZXMgb3VyIGluLW1lbW9yeSBvciBkdXJhYmxlIHBlcnNpc3RlbmNlLiAqL1xuICAgIHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IHQsIHRoaXMuVW4gPSBlLCB0aGlzLmsgPSBzLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1hcHMgYSB0YXJnZXRJRCB0byBkYXRhIGFib3V0IGl0cyB0YXJnZXQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFBPUlRJTkcgTk9URTogV2UgYXJlIHVzaW5nIGFuIGltbXV0YWJsZSBkYXRhIHN0cnVjdHVyZSBvbiBXZWIgdG8gbWFrZSByZS1ydW5zXG4gICAgICAgICAqIG9mIGBhcHBseVJlbW90ZUV2ZW50KClgIGlkZW1wb3RlbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnFuID0gbmV3IGduKGl0KSwgXG4gICAgICAgIC8qKiBNYXBzIGEgdGFyZ2V0IHRvIGl0cyB0YXJnZXRJRC4gKi9cbiAgICAgICAgLy8gVE9ETyh3dWFuZHkpOiBFdmFsdWF0ZSBpZiBUYXJnZXRJZCBjYW4gYmUgcGFydCBvZiBUYXJnZXQuXG4gICAgICAgIHRoaXMuS24gPSBuZXcgR2koKHQgPT4gSHQodCkpLCBZdCksIFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHJlYWQgdGltZSBvZiB0aGUgbGFzdCBlbnRyeSBwcm9jZXNzZWQgYnkgYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYC5cbiAgICAgICAgICpcbiAgICAgICAgICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuam4gPSBjdC5taW4oKSwgdGhpcy5BbiA9IHQuZ2V0TXV0YXRpb25RdWV1ZShuKSwgdGhpcy5RbiA9IHQuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLCBcbiAgICAgICAgdGhpcy5IZSA9IHQuZ2V0VGFyZ2V0Q2FjaGUoKSwgdGhpcy5XbiA9IG5ldyBjcih0aGlzLlFuLCB0aGlzLkFuLCB0aGlzLnBlcnNpc3RlbmNlLmdldEluZGV4TWFuYWdlcigpKSwgXG4gICAgICAgIHRoaXMuWWUgPSB0LmdldEJ1bmRsZUNhY2hlKCksIHRoaXMuVW4uRm4odGhpcy5Xbik7XG4gICAgfVxuICAgIGNvbGxlY3RHYXJiYWdlKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJDb2xsZWN0IGdhcmJhZ2VcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAoZSA9PiB0LmNvbGxlY3QoZSwgdGhpcy5xbikpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGZyKFxuLyoqIE1hbmFnZXMgb3VyIGluLW1lbW9yeSBvciBkdXJhYmxlIHBlcnNpc3RlbmNlLiAqL1xudCwgZSwgbiwgcykge1xuICAgIHJldHVybiBuZXcgbHIodCwgZSwgbiwgcyk7XG59XG5cbi8qKlxuICogVGVsbHMgdGhlIExvY2FsU3RvcmUgdGhhdCB0aGUgY3VycmVudGx5IGF1dGhlbnRpY2F0ZWQgdXNlciBoYXMgY2hhbmdlZC5cbiAqXG4gKiBJbiByZXNwb25zZSB0aGUgbG9jYWwgc3RvcmUgc3dpdGNoZXMgdGhlIG11dGF0aW9uIHF1ZXVlIHRvIHRoZSBuZXcgdXNlciBhbmRcbiAqIHJldHVybnMgYW55IHJlc3VsdGluZyBkb2N1bWVudCBjaGFuZ2VzLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IEFuZHJvaWQgYW5kIGlPUyBvbmx5IHJldHVybiB0aGUgZG9jdW1lbnRzIGFmZmVjdGVkIGJ5IHRoZVxuLy8gY2hhbmdlLlxuYXN5bmMgZnVuY3Rpb24gZHIodCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgIGxldCBzID0gbi5BbiwgaSA9IG4uV247XG4gICAgY29uc3QgciA9IGF3YWl0IG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJIYW5kbGUgdXNlciBjaGFuZ2VcIiwgXCJyZWFkb25seVwiLCAodCA9PiB7XG4gICAgICAgIC8vIFN3YXAgb3V0IHRoZSBtdXRhdGlvbiBxdWV1ZSwgZ3JhYmJpbmcgdGhlIHBlbmRpbmcgbXV0YXRpb24gYmF0Y2hlc1xuICAgICAgICAvLyBiZWZvcmUgYW5kIGFmdGVyLlxuICAgICAgICBsZXQgcjtcbiAgICAgICAgcmV0dXJuIG4uQW4uZ2V0QWxsTXV0YXRpb25CYXRjaGVzKHQpLm5leHQoKG8gPT4gKHIgPSBvLCBzID0gbi5wZXJzaXN0ZW5jZS5nZXRNdXRhdGlvblF1ZXVlKGUpLCBcbiAgICAgICAgLy8gUmVjcmVhdGUgb3VyIExvY2FsRG9jdW1lbnRzVmlldyB1c2luZyB0aGUgbmV3XG4gICAgICAgIC8vIE11dGF0aW9uUXVldWUuXG4gICAgICAgIGkgPSBuZXcgY3Iobi5Rbiwgcywgbi5wZXJzaXN0ZW5jZS5nZXRJbmRleE1hbmFnZXIoKSksIHMuZ2V0QWxsTXV0YXRpb25CYXRjaGVzKHQpKSkpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IFtdLCBzID0gW107XG4gICAgICAgICAgICAvLyBVbmlvbiB0aGUgb2xkL25ldyBjaGFuZ2VkIGtleXMuXG4gICAgICAgICAgICBsZXQgbyA9IFNuKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2Ygcikge1xuICAgICAgICAgICAgICAgIG4ucHVzaCh0LmJhdGNoSWQpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiB0Lm11dGF0aW9ucykgbyA9IG8uYWRkKGUua2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSB7XG4gICAgICAgICAgICAgICAgcy5wdXNoKHQuYmF0Y2hJZCk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHQubXV0YXRpb25zKSBvID0gby5hZGQoZS5rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBzZXQgb2YgYWxsIChwb3RlbnRpYWxseSkgY2hhbmdlZCBkb2N1bWVudHMgYW5kIHRoZSBsaXN0XG4gICAgICAgICAgICAvLyBvZiBtdXRhdGlvbiBiYXRjaCBJRHMgdGhhdCB3ZXJlIGFmZmVjdGVkIGJ5IGNoYW5nZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpLnZuKHQsIG8pLm5leHQoKHQgPT4gKHtcbiAgICAgICAgICAgICAgICBHbjogdCxcbiAgICAgICAgICAgICAgICByZW1vdmVkQmF0Y2hJZHM6IG4sXG4gICAgICAgICAgICAgICAgYWRkZWRCYXRjaElkczogc1xuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgfSkpO1xuICAgIH0pKTtcbiAgICByZXR1cm4gbi5BbiA9IHMsIG4uV24gPSBpLCBuLlVuLkZuKG4uV24pLCByO1xufVxuXG4vKiBBY2NlcHRzIGxvY2FsbHkgZ2VuZXJhdGVkIE11dGF0aW9ucyBhbmQgY29tbWl0IHRoZW0gdG8gc3RvcmFnZS4gKi9cbi8qKlxuICogQWNrbm93bGVkZ2VzIHRoZSBnaXZlbiBiYXRjaC5cbiAqXG4gKiBPbiB0aGUgaGFwcHkgcGF0aCB3aGVuIGEgYmF0Y2ggaXMgYWNrbm93bGVkZ2VkLCB0aGUgbG9jYWwgc3RvcmUgd2lsbFxuICpcbiAqICArIHJlbW92ZSB0aGUgYmF0Y2ggZnJvbSB0aGUgbXV0YXRpb24gcXVldWU7XG4gKiAgKyBhcHBseSB0aGUgY2hhbmdlcyB0byB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlO1xuICogICsgcmVjYWxjdWxhdGUgdGhlIGxhdGVuY3kgY29tcGVuc2F0ZWQgdmlldyBpbXBsaWVkIGJ5IHRob3NlIGNoYW5nZXMgKHRoZXJlXG4gKiAgICBtYXkgYmUgbXV0YXRpb25zIGluIHRoZSBxdWV1ZSB0aGF0IGFmZmVjdCB0aGUgZG9jdW1lbnRzIGJ1dCBoYXZlbid0IGJlZW5cbiAqICAgIGFja25vd2xlZGdlZCB5ZXQpOyBhbmRcbiAqICArIGdpdmUgdGhlIGNoYW5nZWQgZG9jdW1lbnRzIGJhY2sgdGhlIHN5bmMgZW5naW5lXG4gKlxuICogQHJldHVybnMgVGhlIHJlc3VsdGluZyAobW9kaWZpZWQpIGRvY3VtZW50cy5cbiAqL1xuZnVuY3Rpb24gd3IodCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQWNrbm93bGVkZ2UgYmF0Y2hcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAodCA9PiB7XG4gICAgICAgIGNvbnN0IHMgPSBlLmJhdGNoLmtleXMoKSwgaSA9IG4uUW4ubmV3Q2hhbmdlQnVmZmVyKHtcbiAgICAgICAgICAgIHRyYWNrUmVtb3ZhbHM6ICEwXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSwgbiwgcykge1xuICAgICAgICAgICAgY29uc3QgaSA9IG4uYmF0Y2gsIHIgPSBpLmtleXMoKTtcbiAgICAgICAgICAgIGxldCBvID0gR3MucmVzb2x2ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHIuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgbyA9IG8ubmV4dCgoKCkgPT4gcy5nZXRFbnRyeShlLCB0KSkpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByID0gbi5kb2NWZXJzaW9ucy5nZXQodCk7XG4gICAgICAgICAgICAgICAgICAgIEIobnVsbCAhPT0gciksIGUudmVyc2lvbi5jb21wYXJlVG8ocikgPCAwICYmIChpLmFwcGx5VG9SZW1vdGVEb2N1bWVudChlLCBuKSwgZS5pc1ZhbGlkRG9jdW1lbnQoKSAmJiBcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgdXNlIHRoZSBjb21taXRWZXJzaW9uIGFzIHRoZSByZWFkVGltZSByYXRoZXIgdGhhbiB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gZG9jdW1lbnQncyB1cGRhdGVUaW1lIHNpbmNlIHRoZSB1cGRhdGVUaW1lIGlzIG5vdCBhZHZhbmNlZFxuICAgICAgICAgICAgICAgICAgICAvLyBmb3IgdXBkYXRlcyB0aGF0IGRvIG5vdCBtb2RpZnkgdGhlIHVuZGVybHlpbmcgZG9jdW1lbnQuXG4gICAgICAgICAgICAgICAgICAgIHMuYWRkRW50cnkoZSwgbi5jb21taXRWZXJzaW9uKSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSkpLCBvLm5leHQoKCgpID0+IHQuQW4ucmVtb3ZlTXV0YXRpb25CYXRjaChlLCBpKSkpO1xuICAgICAgICB9XG4gICAgICAgIC8qKiBSZXR1cm5zIHRoZSBsb2NhbCB2aWV3IG9mIHRoZSBkb2N1bWVudHMgYWZmZWN0ZWQgYnkgYSBtdXRhdGlvbiBiYXRjaC4gKi9cbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbiAgICAgICAgKG4sIHQsIGUsIGkpLm5leHQoKCgpID0+IGkuYXBwbHkodCkpKS5uZXh0KCgoKSA9PiBuLkFuLnBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrKHQpKSkubmV4dCgoKCkgPT4gbi5Xbi52bih0LCBzKSkpO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIG11dGF0aW9ucyBmcm9tIHRoZSBNdXRhdGlvblF1ZXVlIGZvciB0aGUgc3BlY2lmaWVkIGJhdGNoO1xuICogTG9jYWxEb2N1bWVudHMgd2lsbCBiZSByZWNhbGN1bGF0ZWQuXG4gKlxuICogQHJldHVybnMgVGhlIHJlc3VsdGluZyBtb2RpZmllZCBkb2N1bWVudHMuXG4gKi9cbi8qKlxuICogUmV0dXJucyB0aGUgbGFzdCBjb25zaXN0ZW50IHNuYXBzaG90IHByb2Nlc3NlZCAodXNlZCBieSB0aGUgUmVtb3RlU3RvcmUgdG9cbiAqIGRldGVybWluZSB3aGV0aGVyIHRvIGJ1ZmZlciBpbmNvbWluZyBzbmFwc2hvdHMgZnJvbSB0aGUgYmFja2VuZCkuXG4gKi9cbmZ1bmN0aW9uIF9yKHQpIHtcbiAgICBjb25zdCBlID0gcSh0KTtcbiAgICByZXR1cm4gZS5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCBsYXN0IHJlbW90ZSBzbmFwc2hvdCB2ZXJzaW9uXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gZS5IZS5nZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKHQpKSk7XG59XG5cbi8qKlxuICogVXBkYXRlcyB0aGUgXCJncm91bmQtc3RhdGVcIiAocmVtb3RlKSBkb2N1bWVudHMuIFdlIGFzc3VtZSB0aGF0IHRoZSByZW1vdGVcbiAqIGV2ZW50IHJlZmxlY3RzIGFueSB3cml0ZSBiYXRjaGVzIHRoYXQgaGF2ZSBiZWVuIGFja25vd2xlZGdlZCBvciByZWplY3RlZFxuICogKGkuZS4gd2UgZG8gbm90IHJlLWFwcGx5IGxvY2FsIG11dGF0aW9ucyB0byB1cGRhdGVzIGZyb20gdGhpcyBldmVudCkuXG4gKlxuICogTG9jYWxEb2N1bWVudHMgYXJlIHJlLWNhbGN1bGF0ZWQgaWYgdGhlcmUgYXJlIHJlbWFpbmluZyBtdXRhdGlvbnMgaW4gdGhlXG4gKiBxdWV1ZS5cbiAqLyBmdW5jdGlvbiBtcih0LCBlKSB7XG4gICAgY29uc3QgbiA9IHEodCksIHMgPSBlLnNuYXBzaG90VmVyc2lvbjtcbiAgICBsZXQgaSA9IG4ucW47XG4gICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJBcHBseSByZW1vdGUgZXZlbnRcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAodCA9PiB7XG4gICAgICAgIGNvbnN0IHIgPSBuLlFuLm5ld0NoYW5nZUJ1ZmZlcih7XG4gICAgICAgICAgICB0cmFja1JlbW92YWxzOiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gUmVzZXQgbmV3VGFyZ2V0RGF0YUJ5VGFyZ2V0TWFwIGluIGNhc2UgdGhpcyB0cmFuc2FjdGlvbiBnZXRzIHJlLXJ1bi5cbiAgICAgICAgICAgICAgICBpID0gbi5xbjtcbiAgICAgICAgY29uc3QgbyA9IFtdO1xuICAgICAgICBlLnRhcmdldENoYW5nZXMuZm9yRWFjaCgoKGUsIHIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGEgPSBpLmdldChyKTtcbiAgICAgICAgICAgIGlmICghYSkgcmV0dXJuO1xuICAgICAgICAgICAgLy8gT25seSB1cGRhdGUgdGhlIHJlbW90ZSBrZXlzIGlmIHRoZSB0YXJnZXQgaXMgc3RpbGwgYWN0aXZlLiBUaGlzXG4gICAgICAgICAgICAvLyBlbnN1cmVzIHRoYXQgd2UgY2FuIHBlcnNpc3QgdGhlIHVwZGF0ZWQgdGFyZ2V0IGRhdGEgYWxvbmcgd2l0aFxuICAgICAgICAgICAgLy8gdGhlIHVwZGF0ZWQgYXNzaWdubWVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgIG8ucHVzaChuLkhlLnJlbW92ZU1hdGNoaW5nS2V5cyh0LCBlLnJlbW92ZWREb2N1bWVudHMsIHIpLm5leHQoKCgpID0+IG4uSGUuYWRkTWF0Y2hpbmdLZXlzKHQsIGUuYWRkZWREb2N1bWVudHMsIHIpKSkpO1xuICAgICAgICAgICAgY29uc3QgYyA9IGUucmVzdW1lVG9rZW47XG4gICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHJlc3VtZSB0b2tlbiBpZiB0aGUgY2hhbmdlIGluY2x1ZGVzIG9uZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjLmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCB1ID0gYS53aXRoUmVzdW1lVG9rZW4oYywgcykud2l0aFNlcXVlbmNlTnVtYmVyKHQuY3VycmVudFNlcXVlbmNlTnVtYmVyKTtcbiAgICAgICAgICAgICAgICBpID0gaS5pbnNlcnQociwgdSksIFxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgdGFyZ2V0IGRhdGEgaWYgdGhlcmUgYXJlIHRhcmdldCBjaGFuZ2VzIChvciBpZlxuICAgICAgICAgICAgICAgIC8vIHN1ZmZpY2llbnQgdGltZSBoYXMgcGFzc2VkIHNpbmNlIHRoZSBsYXN0IHVwZGF0ZSkuXG4gICAgICAgICAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIG5ld1RhcmdldERhdGEgc2hvdWxkIGJlIHBlcnNpc3RlZCBkdXJpbmcgYW4gdXBkYXRlIG9mXG4gKiBhbiBhY3RpdmUgdGFyZ2V0LiBUYXJnZXREYXRhIHNob3VsZCBhbHdheXMgYmUgcGVyc2lzdGVkIHdoZW4gYSB0YXJnZXQgaXNcbiAqIGJlaW5nIHJlbGVhc2VkIGFuZCBzaG91bGQgbm90IGNhbGwgdGhpcyBmdW5jdGlvbi5cbiAqXG4gKiBXaGlsZSB0aGUgdGFyZ2V0IGlzIGFjdGl2ZSwgVGFyZ2V0RGF0YSB1cGRhdGVzIGNhbiBiZSBvbWl0dGVkIHdoZW4gbm90aGluZ1xuICogYWJvdXQgdGhlIHRhcmdldCBoYXMgY2hhbmdlZCBleGNlcHQgbWV0YWRhdGEgbGlrZSB0aGUgcmVzdW1lIHRva2VuIG9yXG4gKiBzbmFwc2hvdCB2ZXJzaW9uLiBPY2Nhc2lvbmFsbHkgaXQncyB3b3J0aCB0aGUgZXh0cmEgd3JpdGUgdG8gcHJldmVudCB0aGVzZVxuICogdmFsdWVzIGZyb20gZ2V0dGluZyB0b28gc3RhbGUgYWZ0ZXIgYSBjcmFzaCwgYnV0IHRoaXMgZG9lc24ndCBoYXZlIHRvIGJlXG4gKiB0b28gZnJlcXVlbnQuXG4gKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFsd2F5cyBwZXJzaXN0IHRhcmdldCBkYXRhIGlmIHdlIGRvbid0IGFscmVhZHkgaGF2ZSBhIHJlc3VtZSB0b2tlbi5cbiAgICAgICAgICAgICAgICAgICAgaWYgKEIoZS5yZXN1bWVUb2tlbi5hcHByb3hpbWF0ZUJ5dGVTaXplKCkgPiAwKSwgMCA9PT0gdC5yZXN1bWVUb2tlbi5hcHByb3hpbWF0ZUJ5dGVTaXplKCkpIHJldHVybiAhMDtcbiAgICAgICAgICAgICAgICAgICAgLy8gRG9uJ3QgYWxsb3cgcmVzdW1lIHRva2VuIGNoYW5nZXMgdG8gYmUgYnVmZmVyZWQgaW5kZWZpbml0ZWx5LiBUaGlzXG4gICAgICAgICAgICAgICAgICAgIC8vIGFsbG93cyB1cyB0byBiZSByZWFzb25hYmx5IHVwLXRvLWRhdGUgYWZ0ZXIgYSBjcmFzaCBhbmQgYXZvaWRzIG5lZWRpbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gdG8gbG9vcCBvdmVyIGFsbCBhY3RpdmUgcXVlcmllcyBvbiBzaHV0ZG93bi4gRXNwZWNpYWxseSBpbiB0aGUgYnJvd3NlclxuICAgICAgICAgICAgICAgICAgICAvLyB3ZSBtYXkgbm90IGdldCB0aW1lIHRvIGRvIGFueXRoaW5nIGludGVyZXN0aW5nIHdoaWxlIHRoZSBjdXJyZW50IHRhYiBpc1xuICAgICAgICAgICAgICAgICAgICAvLyBjbG9zaW5nLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnNuYXBzaG90VmVyc2lvbi50b01pY3Jvc2Vjb25kcygpIC0gdC5zbmFwc2hvdFZlcnNpb24udG9NaWNyb3NlY29uZHMoKSA+PSAzZTgpIHJldHVybiAhMDtcbiAgICAgICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIGlmIHRoZSBvbmx5IHRoaW5nIHRoYXQgaGFzIGNoYW5nZWQgYWJvdXQgYSB0YXJnZXQgaXMgaXRzIHJlc3VtZVxuICAgICAgICAgICAgICAgICAgICAvLyB0b2tlbiBpdCdzIG5vdCB3b3J0aCBwZXJzaXN0aW5nLiBOb3RlIHRoYXQgdGhlIFJlbW90ZVN0b3JlIGtlZXBzIGFuXG4gICAgICAgICAgICAgICAgICAgIC8vIGluLW1lbW9yeSB2aWV3IG9mIHRoZSBjdXJyZW50bHkgYWN0aXZlIHRhcmdldHMgd2hpY2ggaW5jbHVkZXMgdGhlIGN1cnJlbnRcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVzdW1lIHRva2VuLCBzbyBzdHJlYW0gZmFpbHVyZSBvciB1c2VyIGNoYW5nZXMgd2lsbCBzdGlsbCB1c2UgYW5cbiAgICAgICAgICAgICAgICAgICAgLy8gdXAtdG8tZGF0ZSByZXN1bWUgdG9rZW4gcmVnYXJkbGVzcyBvZiB3aGF0IHdlIGRvIGhlcmUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uYWRkZWREb2N1bWVudHMuc2l6ZSArIG4ubW9kaWZpZWREb2N1bWVudHMuc2l6ZSArIG4ucmVtb3ZlZERvY3VtZW50cy5zaXplID4gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLyoqXG4gKiBOb3RpZmllcyBsb2NhbCBzdG9yZSBvZiB0aGUgY2hhbmdlZCB2aWV3cyB0byBsb2NhbGx5IHBpbiBkb2N1bWVudHMuXG4gKi8gKGEsIHUsIGUpICYmIG8ucHVzaChuLkhlLnVwZGF0ZVRhcmdldERhdGEodCwgdSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIGxldCBhID0gQW4oKTtcbiAgICAgICAgLy8gSEFDSzogVGhlIG9ubHkgcmVhc29uIHdlIGFsbG93IGEgbnVsbCBzbmFwc2hvdCB2ZXJzaW9uIGlzIHNvIHRoYXQgd2VcbiAgICAgICAgLy8gY2FuIHN5bnRoZXNpemUgcmVtb3RlIGV2ZW50cyB3aGVuIHdlIGdldCBwZXJtaXNzaW9uIGRlbmllZCBlcnJvcnMgd2hpbGVcbiAgICAgICAgLy8gdHJ5aW5nIHRvIHJlc29sdmUgdGhlIHN0YXRlIG9mIGEgbG9jYWxseSBjYWNoZWQgZG9jdW1lbnQgdGhhdCBpcyBpblxuICAgICAgICAvLyBsaW1iby5cbiAgICAgICAgaWYgKGUuZG9jdW1lbnRVcGRhdGVzLmZvckVhY2goKChzLCBpKSA9PiB7XG4gICAgICAgICAgICBlLnJlc29sdmVkTGltYm9Eb2N1bWVudHMuaGFzKHMpICYmIG8ucHVzaChuLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLnVwZGF0ZUxpbWJvRG9jdW1lbnQodCwgcykpO1xuICAgICAgICB9KSksIFxuICAgICAgICAvLyBFYWNoIGxvb3AgaXRlcmF0aW9uIG9ubHkgYWZmZWN0cyBpdHMgXCJvd25cIiBkb2MsIHNvIGl0J3Mgc2FmZSB0byBnZXQgYWxsIHRoZSByZW1vdGVcbiAgICAgICAgLy8gZG9jdW1lbnRzIGluIGFkdmFuY2UgaW4gYSBzaW5nbGUgY2FsbC5cbiAgICAgICAgby5wdXNoKGdyKHQsIHIsIGUuZG9jdW1lbnRVcGRhdGVzLCBzLCB2b2lkIDApLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgYSA9IHQ7XG4gICAgICAgIH0pKSksICFzLmlzRXF1YWwoY3QubWluKCkpKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gbi5IZS5nZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKHQpLm5leHQoKGUgPT4gbi5IZS5zZXRUYXJnZXRzTWV0YWRhdGEodCwgdC5jdXJyZW50U2VxdWVuY2VOdW1iZXIsIHMpKSk7XG4gICAgICAgICAgICBvLnB1c2goZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEdzLndhaXRGb3IobykubmV4dCgoKCkgPT4gci5hcHBseSh0KSkpLm5leHQoKCgpID0+IG4uV24uVm4odCwgYSkpKS5uZXh0KCgoKSA9PiBhKSk7XG4gICAgfSkpLnRoZW4oKHQgPT4gKG4ucW4gPSBpLCB0KSkpO1xufVxuXG4vKipcbiAqIFBvcHVsYXRlcyBkb2N1bWVudCBjaGFuZ2UgYnVmZmVyIHdpdGggZG9jdW1lbnRzIGZyb20gYmFja2VuZCBvciBhIGJ1bmRsZS5cbiAqIFJldHVybnMgdGhlIGRvY3VtZW50IGNoYW5nZXMgcmVzdWx0aW5nIGZyb20gYXBwbHlpbmcgdGhvc2UgZG9jdW1lbnRzLlxuICpcbiAqIEBwYXJhbSB0eG4gLSBUcmFuc2FjdGlvbiB0byB1c2UgdG8gcmVhZCBleGlzdGluZyBkb2N1bWVudHMgZnJvbSBzdG9yYWdlLlxuICogQHBhcmFtIGRvY3VtZW50QnVmZmVyIC0gRG9jdW1lbnQgYnVmZmVyIHRvIGNvbGxlY3QgdGhlIHJlc3VsdGVkIGNoYW5nZXMgdG8gYmVcbiAqICAgICAgICBhcHBsaWVkIHRvIHN0b3JhZ2UuXG4gKiBAcGFyYW0gZG9jdW1lbnRzIC0gRG9jdW1lbnRzIHRvIGJlIGFwcGxpZWQuXG4gKiBAcGFyYW0gZ2xvYmFsVmVyc2lvbiAtIEEgYFNuYXBzaG90VmVyc2lvbmAgcmVwcmVzZW50aW5nIHRoZSByZWFkIHRpbWUgaWYgYWxsXG4gKiAgICAgICAgZG9jdW1lbnRzIGhhdmUgdGhlIHNhbWUgcmVhZCB0aW1lLlxuICogQHBhcmFtIGRvY3VtZW50VmVyc2lvbnMgLSBBIERvY3VtZW50S2V5LXRvLVNuYXBzaG90VmVyc2lvbiBtYXAgaWYgZG9jdW1lbnRzXG4gKiAgICAgICAgaGF2ZSB0aGVpciBvd24gcmVhZCB0aW1lLlxuICpcbiAqIE5vdGU6IHRoaXMgZnVuY3Rpb24gd2lsbCB1c2UgYGRvY3VtZW50VmVyc2lvbnNgIGlmIGl0IGlzIGRlZmluZWQ7XG4gKiB3aGVuIGl0IGlzIG5vdCBkZWZpbmVkLCByZXNvcnRzIHRvIGBnbG9iYWxWZXJzaW9uYC5cbiAqLyBmdW5jdGlvbiBncih0LCBlLCBuLCBzLCBcbi8vIFRPRE8od3VhbmR5KTogV2UgY291bGQgYWRkIGByZWFkVGltZWAgdG8gTWF5YmVEb2N1bWVudCBpbnN0ZWFkIHRvIHJlbW92ZVxuLy8gdGhpcyBwYXJhbWV0ZXIuXG5pKSB7XG4gICAgbGV0IHIgPSBTbigpO1xuICAgIHJldHVybiBuLmZvckVhY2goKHQgPT4gciA9IHIuYWRkKHQpKSksIGUuZ2V0RW50cmllcyh0LCByKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgbGV0IHIgPSBBbigpO1xuICAgICAgICByZXR1cm4gbi5mb3JFYWNoKCgobiwgbykgPT4ge1xuICAgICAgICAgICAgY29uc3QgYSA9IHQuZ2V0KG4pLCBjID0gKG51bGwgPT0gaSA/IHZvaWQgMCA6IGkuZ2V0KG4pKSB8fCBzO1xuICAgICAgICAgICAgLy8gTm90ZTogVGhlIG9yZGVyIG9mIHRoZSBzdGVwcyBiZWxvdyBpcyBpbXBvcnRhbnQsIHNpbmNlIHdlIHdhbnRcbiAgICAgICAgICAgIC8vIHRvIGVuc3VyZSB0aGF0IHJlamVjdGVkIGxpbWJvIHJlc29sdXRpb25zICh3aGljaCBmYWJyaWNhdGVcbiAgICAgICAgICAgIC8vIE5vRG9jdW1lbnRzIHdpdGggU25hcHNob3RWZXJzaW9uLm1pbigpKSBuZXZlciBhZGQgZG9jdW1lbnRzIHRvXG4gICAgICAgICAgICAvLyBjYWNoZS5cbiAgICAgICAgICAgIG8uaXNOb0RvY3VtZW50KCkgJiYgby52ZXJzaW9uLmlzRXF1YWwoY3QubWluKCkpID8gKFxuICAgICAgICAgICAgLy8gTm9Eb2N1bWVudHMgd2l0aCBTbmFwc2hvdFZlcnNpb24ubWluKCkgYXJlIHVzZWQgaW4gbWFudWZhY3R1cmVkXG4gICAgICAgICAgICAvLyBldmVudHMuIFdlIHJlbW92ZSB0aGVzZSBkb2N1bWVudHMgZnJvbSBjYWNoZSBzaW5jZSB3ZSBsb3N0XG4gICAgICAgICAgICAvLyBhY2Nlc3MuXG4gICAgICAgICAgICBlLnJlbW92ZUVudHJ5KG4sIGMpLCByID0gci5pbnNlcnQobiwgbykpIDogIWEuaXNWYWxpZERvY3VtZW50KCkgfHwgby52ZXJzaW9uLmNvbXBhcmVUbyhhLnZlcnNpb24pID4gMCB8fCAwID09PSBvLnZlcnNpb24uY29tcGFyZVRvKGEudmVyc2lvbikgJiYgYS5oYXNQZW5kaW5nV3JpdGVzID8gKGUuYWRkRW50cnkobywgYyksIFxuICAgICAgICAgICAgciA9IHIuaW5zZXJ0KG4sIG8pKSA6ICQoXCJMb2NhbFN0b3JlXCIsIFwiSWdub3Jpbmcgb3V0ZGF0ZWQgd2F0Y2ggdXBkYXRlIGZvciBcIiwgbiwgXCIuIEN1cnJlbnQgdmVyc2lvbjpcIiwgYS52ZXJzaW9uLCBcIiBXYXRjaCB2ZXJzaW9uOlwiLCBvLnZlcnNpb24pO1xuICAgICAgICB9KSksIHI7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIG11dGF0aW9uIGJhdGNoIGFmdGVyIHRoZSBwYXNzZWQgaW4gYmF0Y2hJZCBpbiB0aGUgbXV0YXRpb24gcXVldWVcbiAqIG9yIG51bGwgaWYgZW1wdHkuXG4gKiBAcGFyYW0gYWZ0ZXJCYXRjaElkIC0gSWYgcHJvdmlkZWQsIHRoZSBiYXRjaCB0byBzZWFyY2ggYWZ0ZXIuXG4gKiBAcmV0dXJucyBUaGUgbmV4dCBtdXRhdGlvbiBvciBudWxsIGlmIHRoZXJlIHdhc24ndCBvbmUuXG4gKi9cbmZ1bmN0aW9uIHlyKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KTtcbiAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCBuZXh0IG11dGF0aW9uIGJhdGNoXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gKHZvaWQgMCA9PT0gZSAmJiAoZSA9IC0xKSwgXG4gICAgbi5Bbi5nZXROZXh0TXV0YXRpb25CYXRjaEFmdGVyQmF0Y2hJZCh0LCBlKSkpKTtcbn1cblxuLyoqXG4gKiBSZWFkcyB0aGUgY3VycmVudCB2YWx1ZSBvZiBhIERvY3VtZW50IHdpdGggYSBnaXZlbiBrZXkgb3IgbnVsbCBpZiBub3RcbiAqIGZvdW5kIC0gdXNlZCBmb3IgdGVzdGluZy5cbiAqL1xuLyoqXG4gKiBBc3NpZ25zIHRoZSBnaXZlbiB0YXJnZXQgYW4gaW50ZXJuYWwgSUQgc28gdGhhdCBpdHMgcmVzdWx0cyBjYW4gYmUgcGlubmVkIHNvXG4gKiB0aGV5IGRvbid0IGdldCBHQydkLiBBIHRhcmdldCBtdXN0IGJlIGFsbG9jYXRlZCBpbiB0aGUgbG9jYWwgc3RvcmUgYmVmb3JlXG4gKiB0aGUgc3RvcmUgY2FuIGJlIHVzZWQgdG8gbWFuYWdlIGl0cyB2aWV3LlxuICpcbiAqIEFsbG9jYXRpbmcgYW4gYWxyZWFkeSBhbGxvY2F0ZWQgYFRhcmdldGAgd2lsbCByZXR1cm4gdGhlIGV4aXN0aW5nIGBUYXJnZXREYXRhYFxuICogZm9yIHRoYXQgYFRhcmdldGAuXG4gKi9cbmZ1bmN0aW9uIHByKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KTtcbiAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFsbG9jYXRlIHRhcmdldFwiLCBcInJlYWR3cml0ZVwiLCAodCA9PiB7XG4gICAgICAgIGxldCBzO1xuICAgICAgICByZXR1cm4gbi5IZS5nZXRUYXJnZXREYXRhKHQsIGUpLm5leHQoKGkgPT4gaSA/IChcbiAgICAgICAgLy8gVGhpcyB0YXJnZXQgaGFzIGJlZW4gbGlzdGVuZWQgdG8gcHJldmlvdXNseSwgc28gcmV1c2UgdGhlXG4gICAgICAgIC8vIHByZXZpb3VzIHRhcmdldElELlxuICAgICAgICAvLyBUT0RPKG1jZyk6IGZyZXNoZW4gbGFzdCBhY2Nlc3NlZCBkYXRlP1xuICAgICAgICBzID0gaSwgR3MucmVzb2x2ZShzKSkgOiBuLkhlLmFsbG9jYXRlVGFyZ2V0SWQodCkubmV4dCgoaSA9PiAocyA9IG5ldyBhaShlLCBpLCAwIC8qIExpc3RlbiAqLyAsIHQuY3VycmVudFNlcXVlbmNlTnVtYmVyKSwgXG4gICAgICAgIG4uSGUuYWRkVGFyZ2V0RGF0YSh0LCBzKS5uZXh0KCgoKSA9PiBzKSkpKSkpKTtcbiAgICB9KSkudGhlbigodCA9PiB7XG4gICAgICAgIC8vIElmIE11bHRpLVRhYiBpcyBlbmFibGVkLCB0aGUgZXhpc3RpbmcgdGFyZ2V0IGRhdGEgbWF5IGJlIG5ld2VyIHRoYW5cbiAgICAgICAgLy8gdGhlIGluLW1lbW9yeSBkYXRhXG4gICAgICAgIGNvbnN0IHMgPSBuLnFuLmdldCh0LnRhcmdldElkKTtcbiAgICAgICAgcmV0dXJuIChudWxsID09PSBzIHx8IHQuc25hcHNob3RWZXJzaW9uLmNvbXBhcmVUbyhzLnNuYXBzaG90VmVyc2lvbikgPiAwKSAmJiAobi5xbiA9IG4ucW4uaW5zZXJ0KHQudGFyZ2V0SWQsIHQpLCBcbiAgICAgICAgbi5Lbi5zZXQoZSwgdC50YXJnZXRJZCkpLCB0O1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBUYXJnZXREYXRhIGFzIHNlZW4gYnkgdGhlIExvY2FsU3RvcmUsIGluY2x1ZGluZyB1cGRhdGVzIHRoYXQgbWF5XG4gKiBoYXZlIG5vdCB5ZXQgYmVlbiBwZXJzaXN0ZWQgdG8gdGhlIFRhcmdldENhY2hlLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuLyoqXG4gKiBVbnBpbnMgYWxsIHRoZSBkb2N1bWVudHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlbiB0YXJnZXQuIElmXG4gKiBga2VlcFBlcnNpc3RlZFRhcmdldERhdGFgIGlzIHNldCB0byBmYWxzZSBhbmQgRWFnZXIgR0MgZW5hYmxlZCwgdGhlIG1ldGhvZFxuICogZGlyZWN0bHkgcmVtb3ZlcyB0aGUgYXNzb2NpYXRlZCB0YXJnZXQgZGF0YSBmcm9tIHRoZSB0YXJnZXQgY2FjaGUuXG4gKlxuICogUmVsZWFzaW5nIGEgbm9uLWV4aXN0aW5nIGBUYXJnZXRgIGlzIGEgbm8tb3AuXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogYGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhYCBpcyBtdWx0aS10YWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIFRyKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gcSh0KSwgaSA9IHMucW4uZ2V0KGUpLCByID0gbiA/IFwicmVhZHdyaXRlXCIgOiBcInJlYWR3cml0ZS1wcmltYXJ5XCI7XG4gICAgdHJ5IHtcbiAgICAgICAgbiB8fCBhd2FpdCBzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiUmVsZWFzZSB0YXJnZXRcIiwgciwgKHQgPT4gcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5yZW1vdmVUYXJnZXQodCwgaSkpKTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIGlmICghWHModCkpIHRocm93IHQ7XG4gICAgICAgIC8vIEFsbCBgcmVsZWFzZVRhcmdldGAgZG9lcyBpcyByZWNvcmQgdGhlIGZpbmFsIG1ldGFkYXRhIHN0YXRlIGZvciB0aGVcbiAgICAgICAgLy8gdGFyZ2V0LCBidXQgd2UndmUgYmVlbiByZWNvcmRpbmcgdGhpcyBwZXJpb2RpY2FsbHkgZHVyaW5nIHRhcmdldFxuICAgICAgICAvLyBhY3Rpdml0eS4gSWYgd2UgbG9zZSB0aGlzIHdyaXRlIHRoaXMgY291bGQgY2F1c2UgYSB2ZXJ5IHNsaWdodFxuICAgICAgICAvLyBkaWZmZXJlbmNlIGluIHRoZSBvcmRlciBvZiB0YXJnZXQgZGVsZXRpb24gZHVyaW5nIEdDLCBidXQgd2VcbiAgICAgICAgLy8gZG9uJ3QgZGVmaW5lIGV4YWN0IExSVSBzZW1hbnRpY3Mgc28gdGhpcyBpcyBhY2NlcHRhYmxlLlxuICAgICAgICAkKFwiTG9jYWxTdG9yZVwiLCBgRmFpbGVkIHRvIHVwZGF0ZSBzZXF1ZW5jZSBudW1iZXJzIGZvciB0YXJnZXQgJHtlfTogJHt0fWApO1xuICAgIH1cbiAgICBzLnFuID0gcy5xbi5yZW1vdmUoZSksIHMuS24uZGVsZXRlKGkudGFyZ2V0KTtcbn1cblxuLyoqXG4gKiBSdW5zIHRoZSBzcGVjaWZpZWQgcXVlcnkgYWdhaW5zdCB0aGUgbG9jYWwgc3RvcmUgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMsXG4gKiBwb3RlbnRpYWxseSB0YWtpbmcgYWR2YW50YWdlIG9mIHF1ZXJ5IGRhdGEgZnJvbSBwcmV2aW91cyBleGVjdXRpb25zIChzdWNoXG4gKiBhcyB0aGUgc2V0IG9mIHJlbW90ZSBrZXlzKS5cbiAqXG4gKiBAcGFyYW0gdXNlUHJldmlvdXNSZXN1bHRzIC0gV2hldGhlciByZXN1bHRzIGZyb20gcHJldmlvdXMgZXhlY3V0aW9ucyBjYW5cbiAqIGJlIHVzZWQgdG8gb3B0aW1pemUgdGhpcyBxdWVyeSBleGVjdXRpb24uXG4gKi8gZnVuY3Rpb24gRXIodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBxKHQpO1xuICAgIGxldCBpID0gY3QubWluKCksIHIgPSBTbigpO1xuICAgIHJldHVybiBzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiRXhlY3V0ZSBxdWVyeVwiLCBcInJlYWRvbmx5XCIsICh0ID0+IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IHEodCksIGkgPSBzLktuLmdldChuKTtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gaSA/IEdzLnJlc29sdmUocy5xbi5nZXQoaSkpIDogcy5IZS5nZXRUYXJnZXREYXRhKGUsIG4pO1xuICAgIH0ocywgdCwgUmUoZSkpLm5leHQoKGUgPT4ge1xuICAgICAgICBpZiAoZSkgcmV0dXJuIGkgPSBlLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24sIHMuSGUuZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZS50YXJnZXRJZCkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICByID0gdDtcbiAgICAgICAgfSkpO1xuICAgIH0pKS5uZXh0KCgoKSA9PiBzLlVuLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbiA/IGkgOiBjdC5taW4oKSwgbiA/IHIgOiBTbigpKSkpLm5leHQoKHQgPT4gKHtcbiAgICAgICAgZG9jdW1lbnRzOiB0LFxuICAgICAgICB6bjogclxuICAgIH0pKSkpKTtcbn1cblxuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmZ1bmN0aW9uIElyKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KSwgcyA9IHEobi5IZSksIGkgPSBuLnFuLmdldChlKTtcbiAgICByZXR1cm4gaSA/IFByb21pc2UucmVzb2x2ZShpLnRhcmdldCkgOiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IHRhcmdldCBkYXRhXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gcy5FdCh0LCBlKS5uZXh0KCh0ID0+IHQgPyB0LnRhcmdldCA6IG51bGwpKSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCBoYXZlIGJlZW4gdXBkYXRlZCBzaW5jZSB0aGUgbGFzdCBjYWxsLlxuICogSWYgdGhpcyBpcyB0aGUgZmlyc3QgY2FsbCwgcmV0dXJucyB0aGUgc2V0IG9mIGNoYW5nZXMgc2luY2UgY2xpZW50XG4gKiBpbml0aWFsaXphdGlvbi4gRnVydGhlciBpbnZvY2F0aW9ucyB3aWxsIHJldHVybiBkb2N1bWVudCB0aGF0IGhhdmUgY2hhbmdlZFxuICogc2luY2UgdGhlIHByaW9yIGNhbGwuXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiBBcih0KSB7XG4gICAgY29uc3QgZSA9IHEodCk7XG4gICAgcmV0dXJuIGUucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbmV3IGRvY3VtZW50IGNoYW5nZXNcIiwgXCJyZWFkb25seVwiLCAodCA9PiBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBxKHQpO1xuICAgICAgICBsZXQgaSA9IEFuKCksIHIgPSBsaShuKTtcbiAgICAgICAgY29uc3QgbyA9IFhpKGUpLCBhID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChyLCAhMCk7XG4gICAgICAgIHJldHVybiBvLmp0KHtcbiAgICAgICAgICAgIGluZGV4OiAkcy5yZWFkVGltZUluZGV4LFxuICAgICAgICAgICAgcmFuZ2U6IGFcbiAgICAgICAgfSwgKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICAvLyBVbmxpa2UgYGdldEVudHJ5KClgIGFuZCBvdGhlcnMsIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWAgcGFyc2VzXG4gICAgICAgICAgICAvLyB0aGUgZG9jdW1lbnRzIGRpcmVjdGx5IHNpbmNlIHdlIHdhbnQgdG8ga2VlcCBzZW50aW5lbCBkZWxldGVzLlxuICAgICAgICAgICAgY29uc3QgbiA9IHVpKHMuaywgZSk7XG4gICAgICAgICAgICBpID0gaS5pbnNlcnQobi5rZXksIG4pLCByID0gZS5yZWFkVGltZTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+ICh7XG4gICAgICAgICAgICBJbjogaSxcbiAgICAgICAgICAgIHJlYWRUaW1lOiBmaShyKVxuICAgICAgICB9KSkpO1xuICAgIH1cbiAgICAvKipcbiAqIFJldHVybnMgdGhlIHJlYWQgdGltZSBvZiB0aGUgbW9zdCByZWNlbnRseSByZWFkIGRvY3VtZW50IGluIHRoZSBjYWNoZSwgb3JcbiAqIFNuYXBzaG90VmVyc2lvbi5taW4oKSBpZiBub3QgYXZhaWxhYmxlLlxuICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbi5cbiAgICAoZS5RbiwgdCwgZS5qbikpKS50aGVuKCgoe0luOiB0LCByZWFkVGltZTogbn0pID0+IChlLmpuID0gbiwgdCkpKTtcbn1cblxuLyoqXG4gKiBSZWFkcyB0aGUgbmV3ZXN0IGRvY3VtZW50IGNoYW5nZSBmcm9tIHBlcnNpc3RlbmNlIGFuZCBtb3ZlcyB0aGUgaW50ZXJuYWxcbiAqIHN5bmNocm9uaXphdGlvbiBtYXJrZXIgZm9yd2FyZCBzbyB0aGF0IGNhbGxzIHRvIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWBcbiAqIG9ubHkgcmV0dXJuIGNoYW5nZXMgdGhhdCBoYXBwZW5lZCBhZnRlciBjbGllbnQgaW5pdGlhbGl6YXRpb24uXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5hc3luYyBmdW5jdGlvbiBScih0KSB7XG4gICAgY29uc3QgZSA9IHEodCk7XG4gICAgcmV0dXJuIGUucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJTeW5jaHJvbml6ZSBsYXN0IGRvY3VtZW50IGNoYW5nZSByZWFkIHRpbWVcIiwgXCJyZWFkb25seVwiLCAodCA9PiBmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBYaSh0KTtcbiAgICAgICAgLy8gSWYgdGhlcmUgYXJlIG5vIGV4aXN0aW5nIGVudHJpZXMsIHdlIHJldHVybiBTbmFwc2hvdFZlcnNpb24ubWluKCkuXG4gICAgICAgICAgICAgICAgbGV0IG4gPSBjdC5taW4oKTtcbiAgICAgICAgcmV0dXJuIGUuanQoe1xuICAgICAgICAgICAgaW5kZXg6ICRzLnJlYWRUaW1lSW5kZXgsXG4gICAgICAgICAgICByZXZlcnNlOiAhMFxuICAgICAgICB9LCAoKHQsIGUsIHMpID0+IHtcbiAgICAgICAgICAgIGUucmVhZFRpbWUgJiYgKG4gPSBmaShlLnJlYWRUaW1lKSksIHMuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gbikpO1xuICAgIH0odCkpKS50aGVuKCh0ID0+IHtcbiAgICAgICAgZS5qbiA9IHQ7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IHVzaW5nIHRoZSBnaXZlbiBidW5kbGUgbmFtZSwgd2hpY2ggd2lsbCBiZSB1c2VkIHRvXG4gKiBob2xkIHRoZSBrZXlzIG9mIGFsbCBkb2N1bWVudHMgZnJvbSB0aGUgYnVuZGxlIGluIHF1ZXJ5LWRvY3VtZW50IG1hcHBpbmdzLlxuICogVGhpcyBlbnN1cmVzIHRoYXQgdGhlIGxvYWRlZCBkb2N1bWVudHMgZG8gbm90IGdldCBnYXJiYWdlIGNvbGxlY3RlZFxuICogcmlnaHQgYXdheS5cbiAqL1xuLyoqXG4gKiBBcHBsaWVzIHRoZSBkb2N1bWVudHMgZnJvbSBhIGJ1bmRsZSB0byB0aGUgXCJncm91bmQtc3RhdGVcIiAocmVtb3RlKVxuICogZG9jdW1lbnRzLlxuICpcbiAqIExvY2FsRG9jdW1lbnRzIGFyZSByZS1jYWxjdWxhdGVkIGlmIHRoZXJlIGFyZSByZW1haW5pbmcgbXV0YXRpb25zIGluIHRoZVxuICogcXVldWUuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIFByKHQsIGUsIG4sIHMpIHtcbiAgICBjb25zdCBpID0gcSh0KTtcbiAgICBsZXQgciA9IFNuKCksIG8gPSBBbigpLCBhID0gdm4oKTtcbiAgICBmb3IgKGNvbnN0IHQgb2Ygbikge1xuICAgICAgICBjb25zdCBuID0gZS5Ibih0Lm1ldGFkYXRhLm5hbWUpO1xuICAgICAgICB0LmRvY3VtZW50ICYmIChyID0gci5hZGQobikpLCBvID0gby5pbnNlcnQobiwgZS5Kbih0KSksIGEgPSBhLmluc2VydChuLCBlLlluKHQubWV0YWRhdGEucmVhZFRpbWUpKTtcbiAgICB9XG4gICAgY29uc3QgYyA9IGkuUW4ubmV3Q2hhbmdlQnVmZmVyKHtcbiAgICAgICAgdHJhY2tSZW1vdmFsczogITBcbiAgICB9KSwgdSA9IGF3YWl0IHByKGksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgLy8gSXQgaXMgT0sgdGhhdCB0aGUgcGF0aCB1c2VkIGZvciB0aGUgcXVlcnkgaXMgbm90IHZhbGlkLCBiZWNhdXNlIHRoaXMgd2lsbFxuICAgICAgICAvLyBub3QgYmUgcmVhZCBhbmQgcXVlcmllZC5cbiAgICAgICAgcmV0dXJuIFJlKGdlKGR0LmZyb21TdHJpbmcoYF9fYnVuZGxlX18vZG9jcy8ke3R9YCkpKTtcbiAgICB9KHMpKTtcbiAgICAvLyBBbGxvY2F0ZXMgYSB0YXJnZXQgdG8gaG9sZCBhbGwgZG9jdW1lbnQga2V5cyBmcm9tIHRoZSBidW5kbGUsIHN1Y2ggdGhhdFxuICAgIC8vIHRoZXkgd2lsbCBub3QgZ2V0IGdhcmJhZ2UgY29sbGVjdGVkIHJpZ2h0IGF3YXkuXG4gICAgICAgIHJldHVybiBpLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQXBwbHkgYnVuZGxlIGRvY3VtZW50c1wiLCBcInJlYWR3cml0ZVwiLCAodCA9PiBncih0LCBjLCBvLCBjdC5taW4oKSwgYSkubmV4dCgoZSA9PiAoYy5hcHBseSh0KSwgXG4gICAgZSkpKS5uZXh0KChlID0+IGkuSGUucmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgdS50YXJnZXRJZCkubmV4dCgoKCkgPT4gaS5IZS5hZGRNYXRjaGluZ0tleXModCwgciwgdS50YXJnZXRJZCkpKS5uZXh0KCgoKSA9PiBpLlduLlZuKHQsIGUpKSkubmV4dCgoKCkgPT4gZSkpKSkpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSBvZiBhIGJvb2xlYW4gdG8gaW5kaWNhdGUgaWYgdGhlIGdpdmVuIGJ1bmRsZSBoYXMgYWxyZWFkeVxuICogYmVlbiBsb2FkZWQgYW5kIHRoZSBjcmVhdGUgdGltZSBpcyBuZXdlciB0aGFuIHRoZSBjdXJyZW50IGxvYWRpbmcgYnVuZGxlLlxuICovXG4vKipcbiAqIFNhdmVzIHRoZSBnaXZlbiBgTmFtZWRRdWVyeWAgdG8gbG9jYWwgcGVyc2lzdGVuY2UuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGJyKHQsIGUsIG4gPSBTbigpKSB7XG4gICAgLy8gQWxsb2NhdGUgYSB0YXJnZXQgZm9yIHRoZSBuYW1lZCBxdWVyeSBzdWNoIHRoYXQgaXQgY2FuIGJlIHJlc3VtZWRcbiAgICAvLyBmcm9tIGFzc29jaWF0ZWQgcmVhZCB0aW1lIGlmIHVzZXJzIHVzZSBpdCB0byBsaXN0ZW4uXG4gICAgLy8gTk9URTogdGhpcyBhbHNvIG1lYW5zIGlmIG5vIGNvcnJlc3BvbmRpbmcgdGFyZ2V0IGV4aXN0cywgdGhlIG5ldyB0YXJnZXRcbiAgICAvLyB3aWxsIHJlbWFpbiBhY3RpdmUgYW5kIHdpbGwgbm90IGdldCBjb2xsZWN0ZWQsIHVubGVzcyB1c2VycyBoYXBwZW4gdG9cbiAgICAvLyB1bmxpc3RlbiB0aGUgcXVlcnkgc29tZWhvdy5cbiAgICBjb25zdCBzID0gYXdhaXQgcHIodCwgUmUoeWkoZS5idW5kbGVkUXVlcnkpKSksIGkgPSBxKHQpO1xuICAgIHJldHVybiBpLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiU2F2ZSBuYW1lZCBxdWVyeVwiLCBcInJlYWR3cml0ZVwiLCAodCA9PiB7XG4gICAgICAgIGNvbnN0IHIgPSBHbihlLnJlYWRUaW1lKTtcbiAgICAgICAgLy8gU2ltcGx5IHNhdmUgdGhlIHF1ZXJ5IGl0c2VsZiBpZiBpdCBpcyBvbGRlciB0aGFuIHdoYXQgdGhlIFNESyBhbHJlYWR5XG4gICAgICAgIC8vIGhhcy5cbiAgICAgICAgICAgICAgICBpZiAocy5zbmFwc2hvdFZlcnNpb24uY29tcGFyZVRvKHIpID49IDApIHJldHVybiBpLlllLnNhdmVOYW1lZFF1ZXJ5KHQsIGUpO1xuICAgICAgICAvLyBVcGRhdGUgZXhpc3RpbmcgdGFyZ2V0IGRhdGEgYmVjYXVzZSB0aGUgcXVlcnkgZnJvbSB0aGUgYnVuZGxlIGlzIG5ld2VyLlxuICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBzLndpdGhSZXN1bWVUb2tlbih5dC5FTVBUWV9CWVRFX1NUUklORywgcik7XG4gICAgICAgIHJldHVybiBpLnFuID0gaS5xbi5pbnNlcnQoby50YXJnZXRJZCwgbyksIGkuSGUudXBkYXRlVGFyZ2V0RGF0YSh0LCBvKS5uZXh0KCgoKSA9PiBpLkhlLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIHMudGFyZ2V0SWQpKSkubmV4dCgoKCkgPT4gaS5IZS5hZGRNYXRjaGluZ0tleXModCwgbiwgcy50YXJnZXRJZCkpKS5uZXh0KCgoKSA9PiBpLlllLnNhdmVOYW1lZFF1ZXJ5KHQsIGUpKSk7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyB2ciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmsgPSB0LCB0aGlzLlhuID0gbmV3IE1hcCwgdGhpcy5abiA9IG5ldyBNYXA7XG4gICAgfVxuICAgIGdldEJ1bmRsZU1ldGFkYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIEdzLnJlc29sdmUodGhpcy5Ybi5nZXQoZSkpO1xuICAgIH1cbiAgICBzYXZlQnVuZGxlTWV0YWRhdGEodCwgZSkge1xuICAgICAgICAvKiogRGVjb2RlcyBhIEJ1bmRsZU1ldGFkYXRhIHByb3RvIGludG8gYSBCdW5kbGVNZXRhZGF0YSBvYmplY3QuICovXG4gICAgICAgIHZhciBuO1xuICAgICAgICByZXR1cm4gdGhpcy5Ybi5zZXQoZS5pZCwge1xuICAgICAgICAgICAgaWQ6IChuID0gZSkuaWQsXG4gICAgICAgICAgICB2ZXJzaW9uOiBuLnZlcnNpb24sXG4gICAgICAgICAgICBjcmVhdGVUaW1lOiBHbihuLmNyZWF0ZVRpbWUpXG4gICAgICAgIH0pLCBHcy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldE5hbWVkUXVlcnkodCwgZSkge1xuICAgICAgICByZXR1cm4gR3MucmVzb2x2ZSh0aGlzLlpuLmdldChlKSk7XG4gICAgfVxuICAgIHNhdmVOYW1lZFF1ZXJ5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuWm4uc2V0KGUubmFtZSwgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0Lm5hbWUsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHlpKHQuYnVuZGxlZFF1ZXJ5KSxcbiAgICAgICAgICAgICAgICByZWFkVGltZTogR24odC5yZWFkVGltZSlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0oZSkpLCBHcy5yZXNvbHZlKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGNvbGxlY3Rpb24gb2YgcmVmZXJlbmNlcyB0byBhIGRvY3VtZW50IGZyb20gc29tZSBraW5kIG9mIG51bWJlcmVkIGVudGl0eVxuICogKGVpdGhlciBhIHRhcmdldCBJRCBvciBiYXRjaCBJRCkuIEFzIHJlZmVyZW5jZXMgYXJlIGFkZGVkIHRvIG9yIHJlbW92ZWQgZnJvbVxuICogdGhlIHNldCBjb3JyZXNwb25kaW5nIGV2ZW50cyBhcmUgZW1pdHRlZCB0byBhIHJlZ2lzdGVyZWQgZ2FyYmFnZSBjb2xsZWN0b3IuXG4gKlxuICogRWFjaCByZWZlcmVuY2UgaXMgcmVwcmVzZW50ZWQgYnkgYSBEb2N1bWVudFJlZmVyZW5jZSBvYmplY3QuIEVhY2ggb2YgdGhlbVxuICogY29udGFpbnMgZW5vdWdoIGluZm9ybWF0aW9uIHRvIHVuaXF1ZWx5IGlkZW50aWZ5IHRoZSByZWZlcmVuY2UuIFRoZXkgYXJlIGFsbFxuICogc3RvcmVkIHByaW1hcmlseSBpbiBhIHNldCBzb3J0ZWQgYnkga2V5LiBBIGRvY3VtZW50IGlzIGNvbnNpZGVyZWQgZ2FyYmFnZSBpZlxuICogdGhlcmUncyBubyByZWZlcmVuY2VzIGluIHRoYXQgc2V0ICh0aGlzIGNhbiBiZSBlZmZpY2llbnRseSBjaGVja2VkIHRoYW5rcyB0b1xuICogc29ydGluZyBieSBrZXkpLlxuICpcbiAqIFJlZmVyZW5jZVNldCBhbHNvIGtlZXBzIGEgc2Vjb25kYXJ5IHNldCB0aGF0IGNvbnRhaW5zIHJlZmVyZW5jZXMgc29ydGVkIGJ5XG4gKiBJRHMuIFRoaXMgb25lIGlzIHVzZWQgdG8gZWZmaWNpZW50bHkgaW1wbGVtZW50IHJlbW92YWwgb2YgYWxsIHJlZmVyZW5jZXMgYnlcbiAqIHNvbWUgdGFyZ2V0IElELlxuICovIGNsYXNzIFZyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gQSBzZXQgb2Ygb3V0c3RhbmRpbmcgcmVmZXJlbmNlcyB0byBhIGRvY3VtZW50IHNvcnRlZCBieSBrZXkuXG4gICAgICAgIHRoaXMudHMgPSBuZXcgVG4oU3IuZXMpLCBcbiAgICAgICAgLy8gQSBzZXQgb2Ygb3V0c3RhbmRpbmcgcmVmZXJlbmNlcyB0byBhIGRvY3VtZW50IHNvcnRlZCBieSB0YXJnZXQgaWQuXG4gICAgICAgIHRoaXMubnMgPSBuZXcgVG4oU3Iuc3MpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIHRoZSByZWZlcmVuY2Ugc2V0IGNvbnRhaW5zIG5vIHJlZmVyZW5jZXMuICovICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRzLmlzRW1wdHkoKTtcbiAgICB9XG4gICAgLyoqIEFkZHMgYSByZWZlcmVuY2UgdG8gdGhlIGdpdmVuIGRvY3VtZW50IGtleSBmb3IgdGhlIGdpdmVuIElELiAqLyAgICBhZGRSZWZlcmVuY2UodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbmV3IFNyKHQsIGUpO1xuICAgICAgICB0aGlzLnRzID0gdGhpcy50cy5hZGQobiksIHRoaXMubnMgPSB0aGlzLm5zLmFkZChuKTtcbiAgICB9XG4gICAgLyoqIEFkZCByZWZlcmVuY2VzIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBrZXlzIGZvciB0aGUgZ2l2ZW4gSUQuICovICAgIHJzKHQsIGUpIHtcbiAgICAgICAgdC5mb3JFYWNoKCh0ID0+IHRoaXMuYWRkUmVmZXJlbmNlKHQsIGUpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSByZWZlcmVuY2UgdG8gdGhlIGdpdmVuIGRvY3VtZW50IGtleSBmb3IgdGhlIGdpdmVuXG4gICAgICogSUQuXG4gICAgICovICAgIHJlbW92ZVJlZmVyZW5jZSh0LCBlKSB7XG4gICAgICAgIHRoaXMub3MobmV3IFNyKHQsIGUpKTtcbiAgICB9XG4gICAgY3ModCwgZSkge1xuICAgICAgICB0LmZvckVhY2goKHQgPT4gdGhpcy5yZW1vdmVSZWZlcmVuY2UodCwgZSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYXJzIGFsbCByZWZlcmVuY2VzIHdpdGggYSBnaXZlbiBJRC4gQ2FsbHMgcmVtb3ZlUmVmKCkgZm9yIGVhY2gga2V5XG4gICAgICogcmVtb3ZlZC5cbiAgICAgKi8gICAgdXModCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IFN0KG5ldyBkdChbXSkpLCBuID0gbmV3IFNyKGUsIHQpLCBzID0gbmV3IFNyKGUsIHQgKyAxKSwgaSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5ucy5mb3JFYWNoSW5SYW5nZShbIG4sIHMgXSwgKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5vcyh0KSwgaS5wdXNoKHQua2V5KTtcbiAgICAgICAgfSkpLCBpO1xuICAgIH1cbiAgICBocygpIHtcbiAgICAgICAgdGhpcy50cy5mb3JFYWNoKCh0ID0+IHRoaXMub3ModCkpKTtcbiAgICB9XG4gICAgb3ModCkge1xuICAgICAgICB0aGlzLnRzID0gdGhpcy50cy5kZWxldGUodCksIHRoaXMubnMgPSB0aGlzLm5zLmRlbGV0ZSh0KTtcbiAgICB9XG4gICAgbHModCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IFN0KG5ldyBkdChbXSkpLCBuID0gbmV3IFNyKGUsIHQpLCBzID0gbmV3IFNyKGUsIHQgKyAxKTtcbiAgICAgICAgbGV0IGkgPSBTbigpO1xuICAgICAgICByZXR1cm4gdGhpcy5ucy5mb3JFYWNoSW5SYW5nZShbIG4sIHMgXSwgKHQgPT4ge1xuICAgICAgICAgICAgaSA9IGkuYWRkKHQua2V5KTtcbiAgICAgICAgfSkpLCBpO1xuICAgIH1cbiAgICBjb250YWluc0tleSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgU3IodCwgMCksIG4gPSB0aGlzLnRzLmZpcnN0QWZ0ZXJPckVxdWFsKGUpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gbiAmJiB0LmlzRXF1YWwobi5rZXkpO1xuICAgIH1cbn1cblxuY2xhc3MgU3Ige1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5rZXkgPSB0LCB0aGlzLmZzID0gZTtcbiAgICB9XG4gICAgLyoqIENvbXBhcmUgYnkga2V5IHRoZW4gYnkgSUQgKi8gICAgc3RhdGljIGVzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIFN0LmNvbXBhcmF0b3IodC5rZXksIGUua2V5KSB8fCBpdCh0LmZzLCBlLmZzKTtcbiAgICB9XG4gICAgLyoqIENvbXBhcmUgYnkgSUQgdGhlbiBieSBrZXkgKi8gICAgc3RhdGljIHNzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIGl0KHQuZnMsIGUuZnMpIHx8IFN0LmNvbXBhcmF0b3IodC5rZXksIGUua2V5KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIERyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuSnQgPSB0LCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gZSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgc2V0IG9mIGFsbCBtdXRhdGlvbnMgdGhhdCBoYXZlIGJlZW4gc2VudCBidXQgbm90IHlldCBiZWVuIGFwcGxpZWQgdG9cbiAgICAgICAgICogdGhlIGJhY2tlbmQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkFuID0gW10sIFxuICAgICAgICAvKiogTmV4dCB2YWx1ZSB0byB1c2Ugd2hlbiBhc3NpZ25pbmcgc2VxdWVudGlhbCBJRHMgdG8gZWFjaCBtdXRhdGlvbiBiYXRjaC4gKi9cbiAgICAgICAgdGhpcy5kcyA9IDEsIFxuICAgICAgICAvKiogQW4gb3JkZXJlZCBtYXBwaW5nIGJldHdlZW4gZG9jdW1lbnRzIGFuZCB0aGUgbXV0YXRpb25zIGJhdGNoIElEcy4gKi9cbiAgICAgICAgdGhpcy53cyA9IG5ldyBUbihTci5lcyk7XG4gICAgfVxuICAgIGNoZWNrRW1wdHkodCkge1xuICAgICAgICByZXR1cm4gR3MucmVzb2x2ZSgwID09PSB0aGlzLkFuLmxlbmd0aCk7XG4gICAgfVxuICAgIGFkZE11dGF0aW9uQmF0Y2godCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0gdGhpcy5kcztcbiAgICAgICAgdGhpcy5kcysrLCB0aGlzLkFuLmxlbmd0aCA+IDAgJiYgdGhpcy5Bblt0aGlzLkFuLmxlbmd0aCAtIDFdO1xuICAgICAgICBjb25zdCByID0gbmV3IHJpKGksIGUsIG4sIHMpO1xuICAgICAgICB0aGlzLkFuLnB1c2gocik7XG4gICAgICAgIC8vIFRyYWNrIHJlZmVyZW5jZXMgYnkgZG9jdW1lbnQga2V5IGFuZCBpbmRleCBjb2xsZWN0aW9uIHBhcmVudHMuXG4gICAgICAgIGZvciAoY29uc3QgZSBvZiBzKSB0aGlzLndzID0gdGhpcy53cy5hZGQobmV3IFNyKGUua2V5LCBpKSksIHRoaXMuSnQuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodCwgZS5rZXkucGF0aC5wb3BMYXN0KCkpO1xuICAgICAgICByZXR1cm4gR3MucmVzb2x2ZShyKTtcbiAgICB9XG4gICAgbG9va3VwTXV0YXRpb25CYXRjaCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBHcy5yZXNvbHZlKHRoaXMuX3MoZSkpO1xuICAgIH1cbiAgICBnZXROZXh0TXV0YXRpb25CYXRjaEFmdGVyQmF0Y2hJZCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlICsgMSwgcyA9IHRoaXMuZ3MobiksIGkgPSBzIDwgMCA/IDAgOiBzO1xuICAgICAgICAvLyBUaGUgcmVxdWVzdGVkIGJhdGNoSWQgbWF5IHN0aWxsIGJlIG91dCBvZiByYW5nZSBzbyBub3JtYWxpemUgaXQgdG8gdGhlXG4gICAgICAgIC8vIHN0YXJ0IG9mIHRoZSBxdWV1ZS5cbiAgICAgICAgICAgICAgICByZXR1cm4gR3MucmVzb2x2ZSh0aGlzLkFuLmxlbmd0aCA+IGkgPyB0aGlzLkFuW2ldIDogbnVsbCk7XG4gICAgfVxuICAgIGdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQoKSB7XG4gICAgICAgIHJldHVybiBHcy5yZXNvbHZlKDAgPT09IHRoaXMuQW4ubGVuZ3RoID8gLTEgOiB0aGlzLmRzIC0gMSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlcyh0KSB7XG4gICAgICAgIHJldHVybiBHcy5yZXNvbHZlKHRoaXMuQW4uc2xpY2UoKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBTcihlLCAwKSwgcyA9IG5ldyBTcihlLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpLCBpID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLndzLmZvckVhY2hJblJhbmdlKFsgbiwgcyBdLCAodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5fcyh0LmZzKTtcbiAgICAgICAgICAgIGkucHVzaChlKTtcbiAgICAgICAgfSkpLCBHcy5yZXNvbHZlKGkpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleXModCwgZSkge1xuICAgICAgICBsZXQgbiA9IG5ldyBUbihpdCk7XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBTcih0LCAwKSwgcyA9IG5ldyBTcih0LCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpO1xuICAgICAgICAgICAgdGhpcy53cy5mb3JFYWNoSW5SYW5nZShbIGUsIHMgXSwgKHQgPT4ge1xuICAgICAgICAgICAgICAgIG4gPSBuLmFkZCh0LmZzKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLCBHcy5yZXNvbHZlKHRoaXMueXMobikpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdRdWVyeSh0LCBlKSB7XG4gICAgICAgIC8vIFVzZSB0aGUgcXVlcnkgcGF0aCBhcyBhIHByZWZpeCBmb3IgdGVzdGluZyBpZiBhIGRvY3VtZW50IG1hdGNoZXMgdGhlXG4gICAgICAgIC8vIHF1ZXJ5LlxuICAgICAgICBjb25zdCBuID0gZS5wYXRoLCBzID0gbi5sZW5ndGggKyAxO1xuICAgICAgICAvLyBDb25zdHJ1Y3QgYSBkb2N1bWVudCByZWZlcmVuY2UgZm9yIGFjdHVhbGx5IHNjYW5uaW5nIHRoZSBpbmRleC4gVW5saWtlXG4gICAgICAgIC8vIHRoZSBwcmVmaXggdGhlIGRvY3VtZW50IGtleSBpbiB0aGlzIHJlZmVyZW5jZSBtdXN0IGhhdmUgYW4gZXZlbiBudW1iZXIgb2ZcbiAgICAgICAgLy8gc2VnbWVudHMuIFRoZSBlbXB0eSBzZWdtZW50IGNhbiBiZSB1c2VkIGEgc3VmZml4IG9mIHRoZSBxdWVyeSBwYXRoXG4gICAgICAgIC8vIGJlY2F1c2UgaXQgcHJlY2VkZXMgYWxsIG90aGVyIHNlZ21lbnRzIGluIGFuIG9yZGVyZWQgdHJhdmVyc2FsLlxuICAgICAgICBsZXQgaSA9IG47XG4gICAgICAgIFN0LmlzRG9jdW1lbnRLZXkoaSkgfHwgKGkgPSBpLmNoaWxkKFwiXCIpKTtcbiAgICAgICAgY29uc3QgciA9IG5ldyBTcihuZXcgU3QoaSksIDApO1xuICAgICAgICAvLyBGaW5kIHVuaXF1ZSBiYXRjaElEcyByZWZlcmVuY2VkIGJ5IGFsbCBkb2N1bWVudHMgcG90ZW50aWFsbHkgbWF0Y2hpbmcgdGhlXG4gICAgICAgIC8vIHF1ZXJ5LlxuICAgICAgICAgICAgICAgIGxldCBvID0gbmV3IFRuKGl0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMud3MuZm9yRWFjaFdoaWxlKCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LmtleS5wYXRoO1xuICAgICAgICAgICAgcmV0dXJuICEhbi5pc1ByZWZpeE9mKGUpICYmIChcbiAgICAgICAgICAgIC8vIFJvd3Mgd2l0aCBkb2N1bWVudCBrZXlzIG1vcmUgdGhhbiBvbmUgc2VnbWVudCBsb25nZXIgdGhhbiB0aGUgcXVlcnlcbiAgICAgICAgICAgIC8vIHBhdGggY2FuJ3QgYmUgbWF0Y2hlcy4gRm9yIGV4YW1wbGUsIGEgcXVlcnkgb24gJ3Jvb21zJyBjYW4ndCBtYXRjaFxuICAgICAgICAgICAgLy8gdGhlIGRvY3VtZW50IC9yb29tcy9hYmMvbWVzc2FnZXMveHl4LlxuICAgICAgICAgICAgLy8gVE9ETyhtY2cpOiB3ZSdsbCBuZWVkIGEgZGlmZmVyZW50IHNjYW5uZXIgd2hlbiB3ZSBpbXBsZW1lbnRcbiAgICAgICAgICAgIC8vIGFuY2VzdG9yIHF1ZXJpZXMuXG4gICAgICAgICAgICBlLmxlbmd0aCA9PT0gcyAmJiAobyA9IG8uYWRkKHQuZnMpKSwgITApO1xuICAgICAgICB9KSwgciksIEdzLnJlc29sdmUodGhpcy55cyhvKSk7XG4gICAgfVxuICAgIHlzKHQpIHtcbiAgICAgICAgLy8gQ29uc3RydWN0IGFuIGFycmF5IG9mIG1hdGNoaW5nIGJhdGNoZXMsIHNvcnRlZCBieSBiYXRjaElEIHRvIGVuc3VyZSB0aGF0XG4gICAgICAgIC8vIG11bHRpcGxlIG11dGF0aW9ucyBhZmZlY3RpbmcgdGhlIHNhbWUgZG9jdW1lbnQga2V5IGFyZSBhcHBsaWVkIGluIG9yZGVyLlxuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuX3ModCk7XG4gICAgICAgICAgICBudWxsICE9PSBuICYmIGUucHVzaChuKTtcbiAgICAgICAgfSkpLCBlO1xuICAgIH1cbiAgICByZW1vdmVNdXRhdGlvbkJhdGNoKHQsIGUpIHtcbiAgICAgICAgQigwID09PSB0aGlzLnBzKGUuYmF0Y2hJZCwgXCJyZW1vdmVkXCIpKSwgdGhpcy5Bbi5zaGlmdCgpO1xuICAgICAgICBsZXQgbiA9IHRoaXMud3M7XG4gICAgICAgIHJldHVybiBHcy5mb3JFYWNoKGUubXV0YXRpb25zLCAocyA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gbmV3IFNyKHMua2V5LCBlLmJhdGNoSWQpO1xuICAgICAgICAgICAgcmV0dXJuIG4gPSBuLmRlbGV0ZShpKSwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5tYXJrUG90ZW50aWFsbHlPcnBoYW5lZCh0LCBzLmtleSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLndzID0gbjtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBlZSh0KSB7XG4gICAgICAgIC8vIE5vLW9wIHNpbmNlIHRoZSBtZW1vcnkgbXV0YXRpb24gcXVldWUgZG9lcyBub3QgbWFpbnRhaW4gYSBzZXBhcmF0ZSBjYWNoZS5cbiAgICB9XG4gICAgY29udGFpbnNLZXkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbmV3IFNyKGUsIDApLCBzID0gdGhpcy53cy5maXJzdEFmdGVyT3JFcXVhbChuKTtcbiAgICAgICAgcmV0dXJuIEdzLnJlc29sdmUoZS5pc0VxdWFsKHMgJiYgcy5rZXkpKTtcbiAgICB9XG4gICAgcGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2sodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Bbi5sZW5ndGgsIEdzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmluZHMgdGhlIGluZGV4IG9mIHRoZSBnaXZlbiBiYXRjaElkIGluIHRoZSBtdXRhdGlvbiBxdWV1ZSBhbmQgYXNzZXJ0cyB0aGF0XG4gICAgICogdGhlIHJlc3VsdGluZyBpbmRleCBpcyB3aXRoaW4gdGhlIGJvdW5kcyBvZiB0aGUgcXVldWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYmF0Y2hJZCAtIFRoZSBiYXRjaElkIHRvIHNlYXJjaCBmb3JcbiAgICAgKiBAcGFyYW0gYWN0aW9uIC0gQSBkZXNjcmlwdGlvbiBvZiB3aGF0IHRoZSBjYWxsZXIgaXMgZG9pbmcsIHBocmFzZWQgaW4gcGFzc2l2ZVxuICAgICAqIGZvcm0gKGUuZy4gXCJhY2tub3dsZWRnZWRcIiBpbiBhIHJvdXRpbmUgdGhhdCBhY2tub3dsZWRnZXMgYmF0Y2hlcykuXG4gICAgICovICAgIHBzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ3ModCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpbmRzIHRoZSBpbmRleCBvZiB0aGUgZ2l2ZW4gYmF0Y2hJZCBpbiB0aGUgbXV0YXRpb24gcXVldWUuIFRoaXMgb3BlcmF0aW9uXG4gICAgICogaXMgTygxKS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBjb21wdXRlZCBpbmRleCBvZiB0aGUgYmF0Y2ggd2l0aCB0aGUgZ2l2ZW4gYmF0Y2hJZCwgYmFzZWQgb25cbiAgICAgKiB0aGUgc3RhdGUgb2YgdGhlIHF1ZXVlLiBOb3RlIHRoaXMgaW5kZXggY2FuIGJlIG5lZ2F0aXZlIGlmIHRoZSByZXF1ZXN0ZWRcbiAgICAgKiBiYXRjaElkIGhhcyBhbHJlYWR5IGJlZW4gcmVtdm9lZCBmcm9tIHRoZSBxdWV1ZSBvciBwYXN0IHRoZSBlbmQgb2YgdGhlXG4gICAgICogcXVldWUgaWYgdGhlIGJhdGNoSWQgaXMgbGFyZ2VyIHRoYW4gdGhlIGxhc3QgYWRkZWQgYmF0Y2guXG4gICAgICovICAgIGdzKHQpIHtcbiAgICAgICAgaWYgKDAgPT09IHRoaXMuQW4ubGVuZ3RoKSBcbiAgICAgICAgLy8gQXMgYW4gaW5kZXggdGhpcyBpcyBwYXN0IHRoZSBlbmQgb2YgdGhlIHF1ZXVlXG4gICAgICAgIHJldHVybiAwO1xuICAgICAgICAvLyBFeGFtaW5lIHRoZSBmcm9udCBvZiB0aGUgcXVldWUgdG8gZmlndXJlIG91dCB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZVxuICAgICAgICAvLyBiYXRjaElkIGFuZCBpbmRleGVzIGluIHRoZSBhcnJheS4gTm90ZSB0aGF0IHNpbmNlIHRoZSBxdWV1ZSBpcyBvcmRlcmVkXG4gICAgICAgIC8vIGJ5IGJhdGNoSWQsIGlmIHRoZSBmaXJzdCBiYXRjaCBoYXMgYSBsYXJnZXIgYmF0Y2hJZCB0aGVuIHRoZSByZXF1ZXN0ZWRcbiAgICAgICAgLy8gYmF0Y2hJZCBkb2Vzbid0IGV4aXN0IGluIHRoZSBxdWV1ZS5cbiAgICAgICAgICAgICAgICByZXR1cm4gdCAtIHRoaXMuQW5bMF0uYmF0Y2hJZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSB2ZXJzaW9uIG9mIGxvb2t1cE11dGF0aW9uQmF0Y2ggdGhhdCBkb2Vzbid0IHJldHVybiBhIHByb21pc2UsIHRoaXMgbWFrZXNcbiAgICAgKiBvdGhlciBmdW5jdGlvbnMgdGhhdCB1c2VzIHRoaXMgY29kZSBlYXNpZXIgdG8gcmVhZCBhbmQgbW9yZSBlZmZpY2VudC5cbiAgICAgKi8gICAgX3ModCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5ncyh0KTtcbiAgICAgICAgaWYgKGUgPCAwIHx8IGUgPj0gdGhpcy5Bbi5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gdGhpcy5BbltlXTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRoZSBtZW1vcnktb25seSBSZW1vdGVEb2N1bWVudENhY2hlIGZvciBJbmRleGVkRGIuIFRvIGNvbnN0cnVjdCwgaW52b2tlXG4gKiBgbmV3TWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZSgpYC5cbiAqL1xuY2xhc3MgQ3Ige1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBzaXplciAtIFVzZWQgdG8gYXNzZXNzIHRoZSBzaXplIG9mIGEgZG9jdW1lbnQuIEZvciBlYWdlciBHQywgdGhpcyBpc1xuICAgICAqIGV4cGVjdGVkIHRvIGp1c3QgcmV0dXJuIDAgdG8gYXZvaWQgdW5uZWNlc3NhcmlseSBkb2luZyB0aGUgd29yayBvZlxuICAgICAqIGNhbGN1bGF0aW5nIHRoZSBzaXplLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5KdCA9IHQsIHRoaXMuVHMgPSBlLCBcbiAgICAgICAgLyoqIFVuZGVybHlpbmcgY2FjaGUgb2YgZG9jdW1lbnRzIGFuZCB0aGVpciByZWFkIHRpbWVzLiAqL1xuICAgICAgICB0aGlzLmRvY3MgPSBuZXcgZ24oU3QuY29tcGFyYXRvciksIFxuICAgICAgICAvKiogU2l6ZSBvZiBhbGwgY2FjaGVkIGRvY3VtZW50cy4gKi9cbiAgICAgICAgdGhpcy5zaXplID0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyB0aGUgc3VwcGxpZWQgZW50cnkgdG8gdGhlIGNhY2hlIGFuZCB1cGRhdGVzIHRoZSBjYWNoZSBzaXplIGFzIGFwcHJvcHJpYXRlLlxuICAgICAqXG4gICAgICogQWxsIGNhbGxzIG9mIGBhZGRFbnRyeWAgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxuICAgICAqIHJldHVybmVkIGJ5IGBuZXdDaGFuZ2VCdWZmZXIoKWAuXG4gICAgICovICAgIGFkZEVudHJ5KHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IGUua2V5LCBpID0gdGhpcy5kb2NzLmdldChzKSwgciA9IGkgPyBpLnNpemUgOiAwLCBvID0gdGhpcy5UcyhlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jcyA9IHRoaXMuZG9jcy5pbnNlcnQocywge1xuICAgICAgICAgICAgZG9jdW1lbnQ6IGUuY2xvbmUoKSxcbiAgICAgICAgICAgIHNpemU6IG8sXG4gICAgICAgICAgICByZWFkVGltZTogblxuICAgICAgICB9KSwgdGhpcy5zaXplICs9IG8gLSByLCB0aGlzLkp0LmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KHQsIHMucGF0aC5wb3BMYXN0KCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBzcGVjaWZpZWQgZW50cnkgZnJvbSB0aGUgY2FjaGUgYW5kIHVwZGF0ZXMgdGhlIGNhY2hlIHNpemUgYXMgYXBwcm9wcmlhdGUuXG4gICAgICpcbiAgICAgKiBBbGwgY2FsbHMgb2YgYHJlbW92ZUVudHJ5YCBhcmUgcmVxdWlyZWQgdG8gZ28gdGhyb3VnaCB0aGUgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgLlxuICAgICAqLyAgICByZW1vdmVFbnRyeSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmRvY3MuZ2V0KHQpO1xuICAgICAgICBlICYmICh0aGlzLmRvY3MgPSB0aGlzLmRvY3MucmVtb3ZlKHQpLCB0aGlzLnNpemUgLT0gZS5zaXplKTtcbiAgICB9XG4gICAgZ2V0RW50cnkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5kb2NzLmdldChlKTtcbiAgICAgICAgcmV0dXJuIEdzLnJlc29sdmUobiA/IG4uZG9jdW1lbnQuY2xvbmUoKSA6IFd0Lm5ld0ludmFsaWREb2N1bWVudChlKSk7XG4gICAgfVxuICAgIGdldEVudHJpZXModCwgZSkge1xuICAgICAgICBsZXQgbiA9IEFuKCk7XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuZG9jcy5nZXQodCk7XG4gICAgICAgICAgICBuID0gbi5pbnNlcnQodCwgZSA/IGUuZG9jdW1lbnQuY2xvbmUoKSA6IFd0Lm5ld0ludmFsaWREb2N1bWVudCh0KSk7XG4gICAgICAgIH0pKSwgR3MucmVzb2x2ZShuKTtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeSh0LCBlLCBuKSB7XG4gICAgICAgIGxldCBzID0gQW4oKTtcbiAgICAgICAgLy8gRG9jdW1lbnRzIGFyZSBvcmRlcmVkIGJ5IGtleSwgc28gd2UgY2FuIHVzZSBhIHByZWZpeCBzY2FuIHRvIG5hcnJvdyBkb3duXG4gICAgICAgIC8vIHRoZSBkb2N1bWVudHMgd2UgbmVlZCB0byBtYXRjaCB0aGUgcXVlcnkgYWdhaW5zdC5cbiAgICAgICAgICAgICAgICBjb25zdCBpID0gbmV3IFN0KGUucGF0aC5jaGlsZChcIlwiKSksIHIgPSB0aGlzLmRvY3MuZ2V0SXRlcmF0b3JGcm9tKGkpO1xuICAgICAgICBmb3IgKDtyLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCB7a2V5OiB0LCB2YWx1ZToge2RvY3VtZW50OiBpLCByZWFkVGltZTogb319ID0gci5nZXROZXh0KCk7XG4gICAgICAgICAgICBpZiAoIWUucGF0aC5pc1ByZWZpeE9mKHQucGF0aCkpIGJyZWFrO1xuICAgICAgICAgICAgby5jb21wYXJlVG8obikgPD0gMCB8fCBTZShlLCBpKSAmJiAocyA9IHMuaW5zZXJ0KGkua2V5LCBpLmNsb25lKCkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gR3MucmVzb2x2ZShzKTtcbiAgICB9XG4gICAgRXModCwgZSkge1xuICAgICAgICByZXR1cm4gR3MuZm9yRWFjaCh0aGlzLmRvY3MsICh0ID0+IGUodCkpKTtcbiAgICB9XG4gICAgbmV3Q2hhbmdlQnVmZmVyKHQpIHtcbiAgICAgICAgLy8gYHRyYWNrUmVtb3ZhbHNgIGlzIGlnbm9yZXMgc2luY2UgdGhlIE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUga2VlcHNcbiAgICAgICAgLy8gYSBzZXBhcmF0ZSBjaGFuZ2Vsb2cgYW5kIGRvZXMgbm90IG5lZWQgc3BlY2lhbCBoYW5kbGluZyBmb3IgcmVtb3ZhbHMuXG4gICAgICAgIHJldHVybiBuZXcgTnIodGhpcyk7XG4gICAgfVxuICAgIGdldFNpemUodCkge1xuICAgICAgICByZXR1cm4gR3MucmVzb2x2ZSh0aGlzLnNpemUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IG1lbW9yeS1vbmx5IFJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKlxuICogQHBhcmFtIGluZGV4TWFuYWdlciAtIEEgY2xhc3MgdGhhdCBtYW5hZ2VzIGNvbGxlY3Rpb24gZ3JvdXAgaW5kaWNlcy5cbiAqIEBwYXJhbSBzaXplciAtIFVzZWQgdG8gYXNzZXNzIHRoZSBzaXplIG9mIGEgZG9jdW1lbnQuIEZvciBlYWdlciBHQywgdGhpcyBpc1xuICogZXhwZWN0ZWQgdG8ganVzdCByZXR1cm4gMCB0byBhdm9pZCB1bm5lY2Vzc2FyaWx5IGRvaW5nIHRoZSB3b3JrIG9mXG4gKiBjYWxjdWxhdGluZyB0aGUgc2l6ZS5cbiAqL1xuLyoqXG4gKiBIYW5kbGVzIHRoZSBkZXRhaWxzIG9mIGFkZGluZyBhbmQgdXBkYXRpbmcgZG9jdW1lbnRzIGluIHRoZSBNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlLlxuICovXG5jbGFzcyBOciBleHRlbmRzIHppIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuRGUgPSB0O1xuICAgIH1cbiAgICBhcHBseUNoYW5nZXModCkge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmNoYW5nZXMuZm9yRWFjaCgoKG4sIHMpID0+IHtcbiAgICAgICAgICAgIHMuZG9jdW1lbnQuaXNWYWxpZERvY3VtZW50KCkgPyBlLnB1c2godGhpcy5EZS5hZGRFbnRyeSh0LCBzLmRvY3VtZW50LCB0aGlzLmdldFJlYWRUaW1lKG4pKSkgOiB0aGlzLkRlLnJlbW92ZUVudHJ5KG4pO1xuICAgICAgICB9KSksIEdzLndhaXRGb3IoZSk7XG4gICAgfVxuICAgIGdldEZyb21DYWNoZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkRlLmdldEVudHJ5KHQsIGUpO1xuICAgIH1cbiAgICBnZXRBbGxGcm9tQ2FjaGUodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5EZS5nZXRFbnRyaWVzKHQsIGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3Mga3Ige1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IHQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogTWFwcyBhIHRhcmdldCB0byB0aGUgZGF0YSBhYm91dCB0aGF0IHRhcmdldFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5JcyA9IG5ldyBHaSgodCA9PiBIdCh0KSksIFl0KSwgXG4gICAgICAgIC8qKiBUaGUgbGFzdCByZWNlaXZlZCBzbmFwc2hvdCB2ZXJzaW9uLiAqL1xuICAgICAgICB0aGlzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSBjdC5taW4oKSwgXG4gICAgICAgIC8qKiBUaGUgaGlnaGVzdCBudW1iZXJlZCB0YXJnZXQgSUQgZW5jb3VudGVyZWQuICovXG4gICAgICAgIHRoaXMuaGlnaGVzdFRhcmdldElkID0gMCwgXG4gICAgICAgIC8qKiBUaGUgaGlnaGVzdCBzZXF1ZW5jZSBudW1iZXIgZW5jb3VudGVyZWQuICovXG4gICAgICAgIHRoaXMuQXMgPSAwLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgb3JkZXJlZCBiaWRpcmVjdGlvbmFsIG1hcHBpbmcgYmV0d2VlbiBkb2N1bWVudHMgYW5kIHRoZSByZW1vdGUgdGFyZ2V0XG4gICAgICAgICAqIElEcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuUnMgPSBuZXcgVnIsIHRoaXMudGFyZ2V0Q291bnQgPSAwLCB0aGlzLlBzID0gJGkuaWUoKTtcbiAgICB9XG4gICAgZm9yRWFjaFRhcmdldCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLklzLmZvckVhY2goKCh0LCBuKSA9PiBlKG4pKSksIEdzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbih0KSB7XG4gICAgICAgIHJldHVybiBHcy5yZXNvbHZlKHRoaXMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbik7XG4gICAgfVxuICAgIGdldEhpZ2hlc3RTZXF1ZW5jZU51bWJlcih0KSB7XG4gICAgICAgIHJldHVybiBHcy5yZXNvbHZlKHRoaXMuQXMpO1xuICAgIH1cbiAgICBhbGxvY2F0ZVRhcmdldElkKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGlnaGVzdFRhcmdldElkID0gdGhpcy5Qcy5uZXh0KCksIEdzLnJlc29sdmUodGhpcy5oaWdoZXN0VGFyZ2V0SWQpO1xuICAgIH1cbiAgICBzZXRUYXJnZXRzTWV0YWRhdGEodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gbiAmJiAodGhpcy5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uID0gbiksIGUgPiB0aGlzLkFzICYmICh0aGlzLkFzID0gZSksIFxuICAgICAgICBHcy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGNlKHQpIHtcbiAgICAgICAgdGhpcy5Jcy5zZXQodC50YXJnZXQsIHQpO1xuICAgICAgICBjb25zdCBlID0gdC50YXJnZXRJZDtcbiAgICAgICAgZSA+IHRoaXMuaGlnaGVzdFRhcmdldElkICYmICh0aGlzLlBzID0gbmV3ICRpKGUpLCB0aGlzLmhpZ2hlc3RUYXJnZXRJZCA9IGUpLCB0LnNlcXVlbmNlTnVtYmVyID4gdGhpcy5BcyAmJiAodGhpcy5BcyA9IHQuc2VxdWVuY2VOdW1iZXIpO1xuICAgIH1cbiAgICBhZGRUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2UoZSksIHRoaXMudGFyZ2V0Q291bnQgKz0gMSwgR3MucmVzb2x2ZSgpO1xuICAgIH1cbiAgICB1cGRhdGVUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2UoZSksIEdzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLklzLmRlbGV0ZShlLnRhcmdldCksIHRoaXMuUnMudXMoZS50YXJnZXRJZCksIHRoaXMudGFyZ2V0Q291bnQgLT0gMSwgXG4gICAgICAgIEdzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0cyh0LCBlLCBuKSB7XG4gICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5Jcy5mb3JFYWNoKCgociwgbykgPT4ge1xuICAgICAgICAgICAgby5zZXF1ZW5jZU51bWJlciA8PSBlICYmIG51bGwgPT09IG4uZ2V0KG8udGFyZ2V0SWQpICYmICh0aGlzLklzLmRlbGV0ZShyKSwgaS5wdXNoKHRoaXMucmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgby50YXJnZXRJZCkpLCBcbiAgICAgICAgICAgIHMrKyk7XG4gICAgICAgIH0pKSwgR3Mud2FpdEZvcihpKS5uZXh0KCgoKSA9PiBzKSk7XG4gICAgfVxuICAgIGdldFRhcmdldENvdW50KHQpIHtcbiAgICAgICAgcmV0dXJuIEdzLnJlc29sdmUodGhpcy50YXJnZXRDb3VudCk7XG4gICAgfVxuICAgIGdldFRhcmdldERhdGEodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5Jcy5nZXQoZSkgfHwgbnVsbDtcbiAgICAgICAgcmV0dXJuIEdzLnJlc29sdmUobik7XG4gICAgfVxuICAgIGFkZE1hdGNoaW5nS2V5cyh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlJzLnJzKGUsIG4pLCBHcy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZU1hdGNoaW5nS2V5cyh0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuUnMuY3MoZSwgbik7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLCBpID0gW107XG4gICAgICAgIHJldHVybiBzICYmIGUuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICBpLnB1c2gocy5tYXJrUG90ZW50aWFsbHlPcnBoYW5lZCh0LCBlKSk7XG4gICAgICAgIH0pKSwgR3Mud2FpdEZvcihpKTtcbiAgICB9XG4gICAgcmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Scy51cyhlKSwgR3MucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLlJzLmxzKGUpO1xuICAgICAgICByZXR1cm4gR3MucmVzb2x2ZShuKTtcbiAgICB9XG4gICAgY29udGFpbnNLZXkodCwgZSkge1xuICAgICAgICByZXR1cm4gR3MucmVzb2x2ZSh0aGlzLlJzLmNvbnRhaW5zS2V5KGUpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgbWVtb3J5LWJhY2tlZCBpbnN0YW5jZSBvZiBQZXJzaXN0ZW5jZS4gRGF0YSBpcyBzdG9yZWQgb25seSBpbiBSQU0gYW5kXG4gKiBub3QgcGVyc2lzdGVkIGFjcm9zcyBzZXNzaW9ucy5cbiAqL1xuY2xhc3MgeHIge1xuICAgIC8qKlxuICAgICAqIFRoZSBjb25zdHJ1Y3RvciBhY2NlcHRzIGEgZmFjdG9yeSBmb3IgY3JlYXRpbmcgYSByZWZlcmVuY2UgZGVsZWdhdGUuIFRoaXNcbiAgICAgKiBhbGxvd3MgYm90aCB0aGUgZGVsZWdhdGUgYW5kIHRoaXMgaW5zdGFuY2UgdG8gaGF2ZSBzdHJvbmcgcmVmZXJlbmNlcyB0b1xuICAgICAqIGVhY2ggb3RoZXIgd2l0aG91dCBoYXZpbmcgbnVsbGFibGUgZmllbGRzIHRoYXQgd291bGQgdGhlbiBuZWVkIHRvIGJlXG4gICAgICogY2hlY2tlZCBvciBhc3NlcnRlZCBvbiBldmVyeSBhY2Nlc3MuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmJzID0ge30sIHRoaXMuQmUgPSBuZXcgZXQoMCksIHRoaXMuVWUgPSAhMSwgdGhpcy5VZSA9ICEwLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gdCh0aGlzKSwgXG4gICAgICAgIHRoaXMuSGUgPSBuZXcga3IodGhpcyk7XG4gICAgICAgIHRoaXMuSnQgPSBuZXcgSWksIHRoaXMuSmUgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IENyKHQsIGUpO1xuICAgICAgICB9KHRoaXMuSnQsICh0ID0+IHRoaXMucmVmZXJlbmNlRGVsZWdhdGUudnModCkpKSwgdGhpcy5rID0gbmV3IGNpKGUpLCB0aGlzLlllID0gbmV3IHZyKHRoaXMuayk7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICAvLyBObyBkdXJhYmxlIHN0YXRlIHRvIGVuc3VyZSBpcyBjbG9zZWQgb24gc2h1dGRvd24uXG4gICAgICAgIHJldHVybiB0aGlzLlVlID0gITEsIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXQgc3RhcnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuVWU7XG4gICAgfVxuICAgIHNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyKCkge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgc2V0TmV0d29ya0VuYWJsZWQoKSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICBnZXRJbmRleE1hbmFnZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkp0O1xuICAgIH1cbiAgICBnZXRNdXRhdGlvblF1ZXVlKHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLmJzW3QudG9LZXkoKV07XG4gICAgICAgIHJldHVybiBlIHx8IChlID0gbmV3IERyKHRoaXMuSnQsIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUpLCB0aGlzLmJzW3QudG9LZXkoKV0gPSBlKSwgXG4gICAgICAgIGU7XG4gICAgfVxuICAgIGdldFRhcmdldENhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5IZTtcbiAgICB9XG4gICAgZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSmU7XG4gICAgfVxuICAgIGdldEJ1bmRsZUNhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ZZTtcbiAgICB9XG4gICAgcnVuVHJhbnNhY3Rpb24odCwgZSwgbikge1xuICAgICAgICAkKFwiTWVtb3J5UGVyc2lzdGVuY2VcIiwgXCJTdGFydGluZyB0cmFuc2FjdGlvbjpcIiwgdCk7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgJHIodGhpcy5CZS5uZXh0KCkpO1xuICAgICAgICByZXR1cm4gdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5WcygpLCBuKHMpLm5leHQoKHQgPT4gdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5TcyhzKS5uZXh0KCgoKSA9PiB0KSkpKS50b1Byb21pc2UoKS50aGVuKCh0ID0+IChzLnJhaXNlT25Db21taXR0ZWRFdmVudCgpLCBcbiAgICAgICAgdCkpKTtcbiAgICB9XG4gICAgRHModCwgZSkge1xuICAgICAgICByZXR1cm4gR3Mub3IoT2JqZWN0LnZhbHVlcyh0aGlzLmJzKS5tYXAoKG4gPT4gKCkgPT4gbi5jb250YWluc0tleSh0LCBlKSkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogTWVtb3J5IHBlcnNpc3RlbmNlIGlzIG5vdCBhY3R1YWxseSB0cmFuc2FjdGlvbmFsLCBidXQgZnV0dXJlIGltcGxlbWVudGF0aW9uc1xuICogbWF5IGhhdmUgdHJhbnNhY3Rpb24tc2NvcGVkIHN0YXRlLlxuICovIGNsYXNzICRyIGV4dGVuZHMgV3Mge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5jdXJyZW50U2VxdWVuY2VOdW1iZXIgPSB0O1xuICAgIH1cbn1cblxuY2xhc3MgRnIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IHQsIFxuICAgICAgICAvKiogVHJhY2tzIGFsbCBkb2N1bWVudHMgdGhhdCBhcmUgYWN0aXZlIGluIFF1ZXJ5IHZpZXdzLiAqL1xuICAgICAgICB0aGlzLkNzID0gbmV3IFZyLCBcbiAgICAgICAgLyoqIFRoZSBsaXN0IG9mIGRvY3VtZW50cyB0aGF0IGFyZSBwb3RlbnRpYWxseSBHQ2VkIGFmdGVyIGVhY2ggdHJhbnNhY3Rpb24uICovXG4gICAgICAgIHRoaXMuTnMgPSBudWxsO1xuICAgIH1cbiAgICBzdGF0aWMga3ModCkge1xuICAgICAgICByZXR1cm4gbmV3IEZyKHQpO1xuICAgIH1cbiAgICBnZXQgeHMoKSB7XG4gICAgICAgIGlmICh0aGlzLk5zKSByZXR1cm4gdGhpcy5OcztcbiAgICAgICAgdGhyb3cgTCgpO1xuICAgIH1cbiAgICBhZGRSZWZlcmVuY2UodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5Dcy5hZGRSZWZlcmVuY2UobiwgZSksIHRoaXMueHMuZGVsZXRlKG4udG9TdHJpbmcoKSksIEdzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlUmVmZXJlbmNlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQ3MucmVtb3ZlUmVmZXJlbmNlKG4sIGUpLCB0aGlzLnhzLmFkZChuLnRvU3RyaW5nKCkpLCBHcy5yZXNvbHZlKCk7XG4gICAgfVxuICAgIG1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueHMuYWRkKGUudG9TdHJpbmcoKSksIEdzLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgdGhpcy5Dcy51cyhlLnRhcmdldElkKS5mb3JFYWNoKCh0ID0+IHRoaXMueHMuYWRkKHQudG9TdHJpbmcoKSkpKTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKTtcbiAgICAgICAgcmV0dXJuIG4uZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZS50YXJnZXRJZCkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICB0LmZvckVhY2goKHQgPT4gdGhpcy54cy5hZGQodC50b1N0cmluZygpKSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gbi5yZW1vdmVUYXJnZXREYXRhKHQsIGUpKSk7XG4gICAgfVxuICAgIFZzKCkge1xuICAgICAgICB0aGlzLk5zID0gbmV3IFNldDtcbiAgICB9XG4gICAgU3ModCkge1xuICAgICAgICAvLyBSZW1vdmUgbmV3bHkgb3JwaGFuZWQgZG9jdW1lbnRzLlxuICAgICAgICBjb25zdCBlID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCkubmV3Q2hhbmdlQnVmZmVyKCk7XG4gICAgICAgIHJldHVybiBHcy5mb3JFYWNoKHRoaXMueHMsIChuID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBTdC5mcm9tUGF0aChuKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRzKHQsIHMpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgIHQgfHwgZS5yZW1vdmVFbnRyeShzKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+ICh0aGlzLk5zID0gbnVsbCwgZS5hcHBseSh0KSkpKTtcbiAgICB9XG4gICAgdXBkYXRlTGltYm9Eb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRzKHQsIGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgdCA/IHRoaXMueHMuZGVsZXRlKGUudG9TdHJpbmcoKSkgOiB0aGlzLnhzLmFkZChlLnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHZzKHQpIHtcbiAgICAgICAgLy8gRm9yIGVhZ2VyIEdDLCB3ZSBkb24ndCBjYXJlIGFib3V0IHRoZSBkb2N1bWVudCBzaXplLCB0aGVyZSBhcmUgbm8gc2l6ZSB0aHJlc2hvbGRzLlxuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgJHModCwgZSkge1xuICAgICAgICByZXR1cm4gR3Mub3IoWyAoKSA9PiBHcy5yZXNvbHZlKHRoaXMuQ3MuY29udGFpbnNLZXkoZSkpLCAoKSA9PiB0aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCkuY29udGFpbnNLZXkodCwgZSksICgpID0+IHRoaXMucGVyc2lzdGVuY2UuRHModCwgZSkgXSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gVGhlIGZvcm1hdCBvZiB0aGUgTG9jYWxTdG9yYWdlIGtleSB0aGF0IHN0b3JlcyB0aGUgY2xpZW50IHN0YXRlIGlzOlxuLy8gICAgIGZpcmVzdG9yZV9jbGllbnRzXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XzxpbnN0YW5jZV9rZXk+XG4vKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIGEgY2xpZW50IHN0YXRlIGluIFdlYlN0b3JhZ2UgKi9cbmZ1bmN0aW9uIE9yKHQsIGUpIHtcbiAgICByZXR1cm4gYGZpcmVzdG9yZV9jbGllbnRzXyR7dH1fJHtlfWA7XG59XG5cbi8vIFRoZSBmb3JtYXQgb2YgdGhlIFdlYlN0b3JhZ2Uga2V5IHRoYXQgc3RvcmVzIHRoZSBtdXRhdGlvbiBzdGF0ZSBpczpcbi8vICAgICBmaXJlc3RvcmVfbXV0YXRpb25zXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XzxiYXRjaF9pZD5cbi8vICAgICAoZm9yIHVuYXV0aGVudGljYXRlZCB1c2Vycylcbi8vIG9yOiBmaXJlc3RvcmVfbXV0YXRpb25zXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XzxiYXRjaF9pZD5fPHVzZXJfdWlkPlxuXG4vLyAndXNlcl91aWQnIGlzIGxhc3QgdG8gYXZvaWQgbmVlZGluZyB0byBlc2NhcGUgJ18nIGNoYXJhY3RlcnMgdGhhdCBpdCBtaWdodFxuLy8gY29udGFpbi5cbi8qKiBBc3NlbWJsZXMgdGhlIGtleSBmb3IgYSBtdXRhdGlvbiBiYXRjaCBpbiBXZWJTdG9yYWdlICovXG5mdW5jdGlvbiBNcih0LCBlLCBuKSB7XG4gICAgbGV0IHMgPSBgZmlyZXN0b3JlX211dGF0aW9uc18ke3R9XyR7bn1gO1xuICAgIHJldHVybiBlLmlzQXV0aGVudGljYXRlZCgpICYmIChzICs9IGBfJHtlLnVpZH1gKSwgcztcbn1cblxuLy8gVGhlIGZvcm1hdCBvZiB0aGUgV2ViU3RvcmFnZSBrZXkgdGhhdCBzdG9yZXMgYSBxdWVyeSB0YXJnZXQncyBtZXRhZGF0YSBpczpcbi8vICAgICBmaXJlc3RvcmVfdGFyZ2V0c188cGVyc2lzdGVuY2VfcHJlZml4Pl88dGFyZ2V0X2lkPlxuLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciBhIHF1ZXJ5IHN0YXRlIGluIFdlYlN0b3JhZ2UgKi9cbmZ1bmN0aW9uIExyKHQsIGUpIHtcbiAgICByZXR1cm4gYGZpcmVzdG9yZV90YXJnZXRzXyR7dH1fJHtlfWA7XG59XG5cbi8vIFRoZSBXZWJTdG9yYWdlIHByZWZpeCB0aGF0IHN0b3JlcyB0aGUgcHJpbWFyeSB0YWIncyBvbmxpbmUgc3RhdGUuIFRoZVxuLy8gZm9ybWF0IG9mIHRoZSBrZXkgaXM6XG4vLyAgICAgZmlyZXN0b3JlX29ubGluZV9zdGF0ZV88cGVyc2lzdGVuY2VfcHJlZml4PlxuLyoqXG4gKiBIb2xkcyB0aGUgc3RhdGUgb2YgYSBtdXRhdGlvbiBiYXRjaCwgaW5jbHVkaW5nIGl0cyB1c2VyIElELCBiYXRjaCBJRCBhbmRcbiAqIHdoZXRoZXIgdGhlIGJhdGNoIGlzICdwZW5kaW5nJywgJ2Fja25vd2xlZGdlZCcgb3IgJ3JlamVjdGVkJy5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xuY2xhc3MgQnIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy51c2VyID0gdCwgdGhpcy5iYXRjaElkID0gZSwgdGhpcy5zdGF0ZSA9IG4sIHRoaXMuZXJyb3IgPSBzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBNdXRhdGlvbk1ldGFkYXRhIGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24gaW4gV2ViU3RvcmFnZS5cbiAgICAgKiBMb2dzIGEgd2FybmluZyBhbmQgcmV0dXJucyBudWxsIGlmIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgaXMgbm90IHZhbGlkLlxuICAgICAqLyAgICBzdGF0aWMgRnModCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gSlNPTi5wYXJzZShuKTtcbiAgICAgICAgbGV0IGksIHIgPSBcIm9iamVjdFwiID09IHR5cGVvZiBzICYmIC0xICE9PSBbIFwicGVuZGluZ1wiLCBcImFja25vd2xlZGdlZFwiLCBcInJlamVjdGVkXCIgXS5pbmRleE9mKHMuc3RhdGUpICYmICh2b2lkIDAgPT09IHMuZXJyb3IgfHwgXCJvYmplY3RcIiA9PSB0eXBlb2Ygcy5lcnJvcik7XG4gICAgICAgIHJldHVybiByICYmIHMuZXJyb3IgJiYgKHIgPSBcInN0cmluZ1wiID09IHR5cGVvZiBzLmVycm9yLm1lc3NhZ2UgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2Ygcy5lcnJvci5jb2RlLCBcbiAgICAgICAgciAmJiAoaSA9IG5ldyBqKHMuZXJyb3IuY29kZSwgcy5lcnJvci5tZXNzYWdlKSkpLCByID8gbmV3IEJyKHQsIGUsIHMuc3RhdGUsIGkpIDogKEYoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgRmFpbGVkIHRvIHBhcnNlIG11dGF0aW9uIHN0YXRlIGZvciBJRCAnJHtlfSc6ICR7bn1gKSwgXG4gICAgICAgIG51bGwpO1xuICAgIH1cbiAgICBPcygpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlLFxuICAgICAgICAgICAgdXBkYXRlVGltZU1zOiBEYXRlLm5vdygpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLmVycm9yICYmICh0LmVycm9yID0ge1xuICAgICAgICAgICAgY29kZTogdGhpcy5lcnJvci5jb2RlLFxuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5lcnJvci5tZXNzYWdlXG4gICAgICAgIH0pLCBKU09OLnN0cmluZ2lmeSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogSG9sZHMgdGhlIHN0YXRlIG9mIGEgcXVlcnkgdGFyZ2V0LCBpbmNsdWRpbmcgaXRzIHRhcmdldCBJRCBhbmQgd2hldGhlciB0aGVcbiAqIHRhcmdldCBpcyAnbm90LWN1cnJlbnQnLCAnY3VycmVudCcgb3IgJ3JlamVjdGVkJy5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xuY2xhc3MgVXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHQsIHRoaXMuc3RhdGUgPSBlLCB0aGlzLmVycm9yID0gbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgUXVlcnlUYXJnZXRNZXRhZGF0YSBmcm9tIGl0cyBKU09OIHJlcHJlc2VudGF0aW9uIGluIFdlYlN0b3JhZ2UuXG4gICAgICogTG9ncyBhIHdhcm5pbmcgYW5kIHJldHVybnMgbnVsbCBpZiB0aGUgZm9ybWF0IG9mIHRoZSBkYXRhIGlzIG5vdCB2YWxpZC5cbiAgICAgKi8gICAgc3RhdGljIEZzKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IEpTT04ucGFyc2UoZSk7XG4gICAgICAgIGxldCBzLCBpID0gXCJvYmplY3RcIiA9PSB0eXBlb2YgbiAmJiAtMSAhPT0gWyBcIm5vdC1jdXJyZW50XCIsIFwiY3VycmVudFwiLCBcInJlamVjdGVkXCIgXS5pbmRleE9mKG4uc3RhdGUpICYmICh2b2lkIDAgPT09IG4uZXJyb3IgfHwgXCJvYmplY3RcIiA9PSB0eXBlb2Ygbi5lcnJvcik7XG4gICAgICAgIHJldHVybiBpICYmIG4uZXJyb3IgJiYgKGkgPSBcInN0cmluZ1wiID09IHR5cGVvZiBuLmVycm9yLm1lc3NhZ2UgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2Ygbi5lcnJvci5jb2RlLCBcbiAgICAgICAgaSAmJiAocyA9IG5ldyBqKG4uZXJyb3IuY29kZSwgbi5lcnJvci5tZXNzYWdlKSkpLCBpID8gbmV3IFVyKHQsIG4uc3RhdGUsIHMpIDogKEYoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgRmFpbGVkIHRvIHBhcnNlIHRhcmdldCBzdGF0ZSBmb3IgSUQgJyR7dH0nOiAke2V9YCksIFxuICAgICAgICBudWxsKTtcbiAgICB9XG4gICAgT3MoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB7XG4gICAgICAgICAgICBzdGF0ZTogdGhpcy5zdGF0ZSxcbiAgICAgICAgICAgIHVwZGF0ZVRpbWVNczogRGF0ZS5ub3coKVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5lcnJvciAmJiAodC5lcnJvciA9IHtcbiAgICAgICAgICAgIGNvZGU6IHRoaXMuZXJyb3IuY29kZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuZXJyb3IubWVzc2FnZVxuICAgICAgICB9KSwgSlNPTi5zdHJpbmdpZnkodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgcmVwcmVzZW50cyB0aGUgaW1tdXRhYmxlIENsaWVudFN0YXRlIGZvciBhIGNsaWVudCByZWFkIGZyb21cbiAqIFdlYlN0b3JhZ2UsIGNvbnRhaW5pbmcgdGhlIGxpc3Qgb2YgYWN0aXZlIHF1ZXJ5IHRhcmdldHMuXG4gKi8gY2xhc3MgcXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IHQsIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgUmVtb3RlQ2xpZW50U3RhdGUgZnJvbSB0aGUgSlNPTiByZXByZXNlbnRhdGlvbiBpbiBXZWJTdG9yYWdlLlxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXG4gICAgICovICAgIHN0YXRpYyBGcyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBKU09OLnBhcnNlKGUpO1xuICAgICAgICBsZXQgcyA9IFwib2JqZWN0XCIgPT0gdHlwZW9mIG4gJiYgbi5hY3RpdmVUYXJnZXRJZHMgaW5zdGFuY2VvZiBBcnJheSwgaSA9IENuKCk7XG4gICAgICAgIGZvciAobGV0IHQgPSAwOyBzICYmIHQgPCBuLmFjdGl2ZVRhcmdldElkcy5sZW5ndGg7ICsrdCkgcyA9IFZ0KG4uYWN0aXZlVGFyZ2V0SWRzW3RdKSwgXG4gICAgICAgIGkgPSBpLmFkZChuLmFjdGl2ZVRhcmdldElkc1t0XSk7XG4gICAgICAgIHJldHVybiBzID8gbmV3IHFyKHQsIGkpIDogKEYoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgRmFpbGVkIHRvIHBhcnNlIGNsaWVudCBkYXRhIGZvciBpbnN0YW5jZSAnJHt0fSc6ICR7ZX1gKSwgXG4gICAgICAgIG51bGwpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIHJlcHJlc2VudHMgdGhlIG9ubGluZSBzdGF0ZSBmb3IgYWxsIGNsaWVudHMgcGFydGljaXBhdGluZyBpblxuICogbXVsdGktdGFiLiBUaGUgb25saW5lIHN0YXRlIGlzIG9ubHkgd3JpdHRlbiB0byBieSB0aGUgcHJpbWFyeSBjbGllbnQsIGFuZFxuICogdXNlZCBpbiBzZWNvbmRhcnkgY2xpZW50cyB0byB1cGRhdGUgdGhlaXIgcXVlcnkgdmlld3MuXG4gKi8gY2xhc3MgS3Ige1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IHQsIHRoaXMub25saW5lU3RhdGUgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBTaGFyZWRPbmxpbmVTdGF0ZSBmcm9tIGl0cyBKU09OIHJlcHJlc2VudGF0aW9uIGluIFdlYlN0b3JhZ2UuXG4gICAgICogTG9ncyBhIHdhcm5pbmcgYW5kIHJldHVybnMgbnVsbCBpZiB0aGUgZm9ybWF0IG9mIHRoZSBkYXRhIGlzIG5vdCB2YWxpZC5cbiAgICAgKi8gICAgc3RhdGljIEZzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IEpTT04ucGFyc2UodCk7XG4gICAgICAgIHJldHVybiBcIm9iamVjdFwiID09IHR5cGVvZiBlICYmIC0xICE9PSBbIFwiVW5rbm93blwiLCBcIk9ubGluZVwiLCBcIk9mZmxpbmVcIiBdLmluZGV4T2YoZS5vbmxpbmVTdGF0ZSkgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZS5jbGllbnRJZCA/IG5ldyBLcihlLmNsaWVudElkLCBlLm9ubGluZVN0YXRlKSA6IChGKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgYEZhaWxlZCB0byBwYXJzZSBvbmxpbmUgc3RhdGU6ICR7dH1gKSwgXG4gICAgICAgIG51bGwpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBNZXRhZGF0YSBzdGF0ZSBvZiB0aGUgbG9jYWwgY2xpZW50LiBVbmxpa2UgYFJlbW90ZUNsaWVudFN0YXRlYCwgdGhpcyBjbGFzcyBpc1xuICogbXV0YWJsZSBhbmQga2VlcHMgdHJhY2sgb2YgYWxsIHBlbmRpbmcgbXV0YXRpb25zLCB3aGljaCBhbGxvd3MgdXMgdG9cbiAqIHVwZGF0ZSB0aGUgcmFuZ2Ugb2YgcGVuZGluZyBtdXRhdGlvbiBiYXRjaCBJRHMgYXMgbmV3IG11dGF0aW9ucyBhcmUgYWRkZWQgb3JcbiAqIHJlbW92ZWQuXG4gKlxuICogVGhlIGRhdGEgaW4gYExvY2FsQ2xpZW50U3RhdGVgIGlzIG5vdCByZWFkIGZyb20gV2ViU3RvcmFnZSBhbmQgaW5zdGVhZFxuICogdXBkYXRlZCB2aWEgaXRzIGluc3RhbmNlIG1ldGhvZHMuIFRoZSB1cGRhdGVkIHN0YXRlIGNhbiBiZSBzZXJpYWxpemVkIHZpYVxuICogYHRvV2ViU3RvcmFnZUpTT04oKWAuXG4gKi9cbi8vIFZpc2libGUgZm9yIHRlc3RpbmcuXG5jbGFzcyBqciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gQ24oKTtcbiAgICB9XG4gICAgTXModCkge1xuICAgICAgICB0aGlzLmFjdGl2ZVRhcmdldElkcyA9IHRoaXMuYWN0aXZlVGFyZ2V0SWRzLmFkZCh0KTtcbiAgICB9XG4gICAgTHModCkge1xuICAgICAgICB0aGlzLmFjdGl2ZVRhcmdldElkcyA9IHRoaXMuYWN0aXZlVGFyZ2V0SWRzLmRlbGV0ZSh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhpcyBlbnRyeSBpbnRvIGEgSlNPTi1lbmNvZGVkIGZvcm1hdCB3ZSBjYW4gdXNlIGZvciBXZWJTdG9yYWdlLlxuICAgICAqIERvZXMgbm90IGVuY29kZSBgY2xpZW50SWRgIGFzIGl0IGlzIHBhcnQgb2YgdGhlIGtleSBpbiBXZWJTdG9yYWdlLlxuICAgICAqLyAgICBPcygpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIGFjdGl2ZVRhcmdldElkczogdGhpcy5hY3RpdmVUYXJnZXRJZHMudG9BcnJheSgpLFxuICAgICAgICAgICAgdXBkYXRlVGltZU1zOiBEYXRlLm5vdygpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogYFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZWAgdXNlcyBXZWJTdG9yYWdlICh3aW5kb3cubG9jYWxTdG9yYWdlKSBhcyB0aGVcbiAqIGJhY2tpbmcgc3RvcmUgZm9yIHRoZSBTaGFyZWRDbGllbnRTdGF0ZS4gSXQga2VlcHMgdHJhY2sgb2YgYWxsIGFjdGl2ZVxuICogY2xpZW50cyBhbmQgc3VwcG9ydHMgbW9kaWZpY2F0aW9ucyBvZiB0aGUgbG9jYWwgY2xpZW50J3MgZGF0YS5cbiAqLyBjbGFzcyBRciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSkge1xuICAgICAgICB0aGlzLndpbmRvdyA9IHQsIHRoaXMuT2UgPSBlLCB0aGlzLnBlcnNpc3RlbmNlS2V5ID0gbiwgdGhpcy5CcyA9IHMsIHRoaXMuc3luY0VuZ2luZSA9IG51bGwsIFxuICAgICAgICB0aGlzLm9ubGluZVN0YXRlSGFuZGxlciA9IG51bGwsIHRoaXMuc2VxdWVuY2VOdW1iZXJIYW5kbGVyID0gbnVsbCwgdGhpcy5VcyA9IHRoaXMucXMuYmluZCh0aGlzKSwgXG4gICAgICAgIHRoaXMuS3MgPSBuZXcgZ24oaXQpLCB0aGlzLnN0YXJ0ZWQgPSAhMSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYXB0dXJlcyBXZWJTdG9yYWdlIGV2ZW50cyB0aGF0IG9jY3VyIGJlZm9yZSBgc3RhcnQoKWAgaXMgY2FsbGVkLiBUaGVzZVxuICAgICAgICAgKiBldmVudHMgYXJlIHJlcGxheWVkIG9uY2UgYFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZWAgaXMgc3RhcnRlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuanMgPSBbXTtcbiAgICAgICAgLy8gRXNjYXBlIHRoZSBzcGVjaWFsIGNoYXJhY3RlcnMgbWVudGlvbmVkIGhlcmU6XG4gICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvR3VpZGUvUmVndWxhcl9FeHByZXNzaW9uc1xuICAgICAgICBjb25zdCByID0gbi5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgXCJcXFxcJCZcIik7XG4gICAgICAgIHRoaXMuc3RvcmFnZSA9IHRoaXMud2luZG93LmxvY2FsU3RvcmFnZSwgdGhpcy5jdXJyZW50VXNlciA9IGksIHRoaXMuUXMgPSBPcih0aGlzLnBlcnNpc3RlbmNlS2V5LCB0aGlzLkJzKSwgXG4gICAgICAgIHRoaXMuV3MgPSBcbiAgICAgICAgLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciB0aGUgY3VycmVudCBzZXF1ZW5jZSBudW1iZXIuICovXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBgZmlyZXN0b3JlX3NlcXVlbmNlX251bWJlcl8ke3R9YDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAodGhpcy5wZXJzaXN0ZW5jZUtleSksIHRoaXMuS3MgPSB0aGlzLktzLmluc2VydCh0aGlzLkJzLCBuZXcganIpLCB0aGlzLkdzID0gbmV3IFJlZ0V4cChgXmZpcmVzdG9yZV9jbGllbnRzXyR7cn1fKFteX10qKSRgKSwgXG4gICAgICAgIHRoaXMuenMgPSBuZXcgUmVnRXhwKGBeZmlyZXN0b3JlX211dGF0aW9uc18ke3J9XyhcXFxcZCspKD86XyguKikpPyRgKSwgdGhpcy5IcyA9IG5ldyBSZWdFeHAoYF5maXJlc3RvcmVfdGFyZ2V0c18ke3J9XyhcXFxcZCspJGApLCBcbiAgICAgICAgdGhpcy5KcyA9IFxuICAgICAgICAvKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIHRoZSBvbmxpbmUgc3RhdGUgb2YgdGhlIHByaW1hcnkgdGFiLiAqL1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gYGZpcmVzdG9yZV9vbmxpbmVfc3RhdGVfJHt0fWA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlIFdlYlN0b3JhZ2UgcHJlZml4IHRoYXQgcGxheXMgYXMgYSBldmVudCB0byBpbmRpY2F0ZSB0aGUgcmVtb3RlIGRvY3VtZW50c1xuICAgICAgICAvLyBtaWdodCBoYXZlIGNoYW5nZWQgZHVlIHRvIHNvbWUgc2Vjb25kYXJ5IHRhYnMgbG9hZGluZyBhIGJ1bmRsZS5cbiAgICAgICAgLy8gZm9ybWF0IG9mIHRoZSBrZXkgaXM6XG4gICAgICAgIC8vICAgICBmaXJlc3RvcmVfYnVuZGxlX2xvYWRlZF88cGVyc2lzdGVuY2VLZXk+XG4gICAgICAgICh0aGlzLnBlcnNpc3RlbmNlS2V5KSwgdGhpcy5ZcyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBgZmlyZXN0b3JlX2J1bmRsZV9sb2FkZWRfJHt0fWA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlIFdlYlN0b3JhZ2Uga2V5IHByZWZpeCBmb3IgdGhlIGtleSB0aGF0IHN0b3JlcyB0aGUgbGFzdCBzZXF1ZW5jZSBudW1iZXIgYWxsb2NhdGVkLiBUaGUga2V5XG4gICAgICAgIC8vIGxvb2tzIGxpa2UgJ2ZpcmVzdG9yZV9zZXF1ZW5jZV9udW1iZXJfPHBlcnNpc3RlbmNlX3ByZWZpeD4nLlxuICAgICAgICAodGhpcy5wZXJzaXN0ZW5jZUtleSksIFxuICAgICAgICAvLyBSYXRoZXIgdGhhbiBhZGRpbmcgdGhlIHN0b3JhZ2Ugb2JzZXJ2ZXIgZHVyaW5nIHN0YXJ0KCksIHdlIGFkZCB0aGVcbiAgICAgICAgLy8gc3RvcmFnZSBvYnNlcnZlciBkdXJpbmcgaW5pdGlhbGl6YXRpb24uIFRoaXMgZW5zdXJlcyB0aGF0IHdlIGNvbGxlY3RcbiAgICAgICAgLy8gZXZlbnRzIGJlZm9yZSBvdGhlciBjb21wb25lbnRzIHBvcHVsYXRlIHRoZWlyIGluaXRpYWwgc3RhdGUgKGR1cmluZyB0aGVpclxuICAgICAgICAvLyByZXNwZWN0aXZlIHN0YXJ0KCkgY2FsbHMpLiBPdGhlcndpc2UsIHdlIG1pZ2h0IGZvciBleGFtcGxlIG1pc3MgYVxuICAgICAgICAvLyBtdXRhdGlvbiB0aGF0IGlzIGFkZGVkIGFmdGVyIExvY2FsU3RvcmUncyBzdGFydCgpIHByb2Nlc3NlZCB0aGUgZXhpc3RpbmdcbiAgICAgICAgLy8gbXV0YXRpb25zIGJ1dCBiZWZvcmUgd2Ugb2JzZXJ2ZSBXZWJTdG9yYWdlIGV2ZW50cy5cbiAgICAgICAgdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInN0b3JhZ2VcIiwgdGhpcy5Vcyk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zICd0cnVlJyBpZiBXZWJTdG9yYWdlIGlzIGF2YWlsYWJsZSBpbiB0aGUgY3VycmVudCBlbnZpcm9ubWVudC4gKi8gICAgc3RhdGljIGJ0KHQpIHtcbiAgICAgICAgcmV0dXJuICEoIXQgfHwgIXQubG9jYWxTdG9yYWdlKTtcbiAgICB9XG4gICAgYXN5bmMgc3RhcnQoKSB7XG4gICAgICAgIC8vIFJldHJpZXZlIHRoZSBsaXN0IG9mIGV4aXN0aW5nIGNsaWVudHMgdG8gYmFja2ZpbGwgdGhlIGRhdGEgaW5cbiAgICAgICAgLy8gU2hhcmVkQ2xpZW50U3RhdGUuXG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCB0aGlzLnN5bmNFbmdpbmUuVG4oKTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHQpIHtcbiAgICAgICAgICAgIGlmIChlID09PSB0aGlzLkJzKSBjb250aW51ZTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmdldEl0ZW0oT3IodGhpcy5wZXJzaXN0ZW5jZUtleSwgZSkpO1xuICAgICAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gcXIuRnMoZSwgdCk7XG4gICAgICAgICAgICAgICAgbiAmJiAodGhpcy5LcyA9IHRoaXMuS3MuaW5zZXJ0KG4uY2xpZW50SWQsIG4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLlhzKCk7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGFuIGV4aXN0aW5nIG9ubGluZSBzdGF0ZSBhbmQgY2FsbCB0aGUgY2FsbGJhY2sgaGFuZGxlclxuICAgICAgICAvLyBpZiBhcHBsaWNhYmxlLlxuICAgICAgICBjb25zdCBlID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0odGhpcy5Kcyk7XG4gICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5acyhlKTtcbiAgICAgICAgICAgIHQgJiYgdGhpcy50aSh0KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5qcykgdGhpcy5xcyh0KTtcbiAgICAgICAgdGhpcy5qcyA9IFtdLCBcbiAgICAgICAgLy8gUmVnaXN0ZXIgYSB3aW5kb3cgdW5sb2FkIGhvb2sgdG8gcmVtb3ZlIHRoZSBjbGllbnQgbWV0YWRhdGEgZW50cnkgZnJvbVxuICAgICAgICAvLyBXZWJTdG9yYWdlIGV2ZW4gaWYgYHNodXRkb3duKClgIHdhcyBub3QgY2FsbGVkLlxuICAgICAgICB0aGlzLndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGFnZWhpZGVcIiwgKCgpID0+IHRoaXMuc2h1dGRvd24oKSkpLCB0aGlzLnN0YXJ0ZWQgPSAhMDtcbiAgICB9XG4gICAgd3JpdGVTZXF1ZW5jZU51bWJlcih0KSB7XG4gICAgICAgIHRoaXMuc2V0SXRlbSh0aGlzLldzLCBKU09OLnN0cmluZ2lmeSh0KSk7XG4gICAgfVxuICAgIGdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWkodGhpcy5Lcyk7XG4gICAgfVxuICAgIGlzQWN0aXZlUXVlcnlUYXJnZXQodCkge1xuICAgICAgICBsZXQgZSA9ICExO1xuICAgICAgICByZXR1cm4gdGhpcy5Lcy5mb3JFYWNoKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgcy5hY3RpdmVUYXJnZXRJZHMuaGFzKHQpICYmIChlID0gITApO1xuICAgICAgICB9KSksIGU7XG4gICAgfVxuICAgIGFkZFBlbmRpbmdNdXRhdGlvbih0KSB7XG4gICAgICAgIHRoaXMubmkodCwgXCJwZW5kaW5nXCIpO1xuICAgIH1cbiAgICB1cGRhdGVNdXRhdGlvblN0YXRlKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5uaSh0LCBlLCBuKSwgXG4gICAgICAgIC8vIE9uY2UgYSBmaW5hbCBtdXRhdGlvbiByZXN1bHQgaXMgb2JzZXJ2ZWQgYnkgb3RoZXIgY2xpZW50cywgdGhleSBubyBsb25nZXJcbiAgICAgICAgLy8gYWNjZXNzIHRoZSBtdXRhdGlvbidzIG1ldGFkYXRhIGVudHJ5LiBTaW5jZSBXZWJTdG9yYWdlIHJlcGxheXMgZXZlbnRzXG4gICAgICAgIC8vIGluIG9yZGVyLCBpdCBpcyBzYWZlIHRvIGRlbGV0ZSB0aGUgZW50cnkgcmlnaHQgYWZ0ZXIgdXBkYXRpbmcgaXQuXG4gICAgICAgIHRoaXMuc2kodCk7XG4gICAgfVxuICAgIGFkZExvY2FsUXVlcnlUYXJnZXQodCkge1xuICAgICAgICBsZXQgZSA9IFwibm90LWN1cnJlbnRcIjtcbiAgICAgICAgLy8gTG9va3VwIGFuIGV4aXN0aW5nIHF1ZXJ5IHN0YXRlIGlmIHRoZSB0YXJnZXQgSUQgd2FzIGFscmVhZHkgcmVnaXN0ZXJlZFxuICAgICAgICAvLyBieSBhbm90aGVyIHRhYlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQWN0aXZlUXVlcnlUYXJnZXQodCkpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShMcih0aGlzLnBlcnNpc3RlbmNlS2V5LCB0KSk7XG4gICAgICAgICAgICBpZiAobikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBVci5Gcyh0LCBuKTtcbiAgICAgICAgICAgICAgICBzICYmIChlID0gcy5zdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuaWkuTXModCksIHRoaXMuWHMoKSwgZTtcbiAgICB9XG4gICAgcmVtb3ZlTG9jYWxRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHRoaXMuaWkuTHModCksIHRoaXMuWHMoKTtcbiAgICB9XG4gICAgaXNMb2NhbFF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWkuYWN0aXZlVGFyZ2V0SWRzLmhhcyh0KTtcbiAgICB9XG4gICAgY2xlYXJRdWVyeVN0YXRlKHQpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVJdGVtKExyKHRoaXMucGVyc2lzdGVuY2VLZXksIHQpKTtcbiAgICB9XG4gICAgdXBkYXRlUXVlcnlTdGF0ZSh0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMucmkodCwgZSwgbik7XG4gICAgfVxuICAgIGhhbmRsZVVzZXJDaGFuZ2UodCwgZSwgbikge1xuICAgICAgICBlLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5zaSh0KTtcbiAgICAgICAgfSkpLCB0aGlzLmN1cnJlbnRVc2VyID0gdCwgbi5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuYWRkUGVuZGluZ011dGF0aW9uKHQpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHNldE9ubGluZVN0YXRlKHQpIHtcbiAgICAgICAgdGhpcy5vaSh0KTtcbiAgICB9XG4gICAgbm90aWZ5QnVuZGxlTG9hZGVkKCkge1xuICAgICAgICB0aGlzLmFpKCk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB0aGlzLnN0YXJ0ZWQgJiYgKHRoaXMud2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdG9yYWdlXCIsIHRoaXMuVXMpLCB0aGlzLnJlbW92ZUl0ZW0odGhpcy5RcyksIFxuICAgICAgICB0aGlzLnN0YXJ0ZWQgPSAhMSk7XG4gICAgfVxuICAgIGdldEl0ZW0odCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0odCk7XG4gICAgICAgIHJldHVybiAkKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgXCJSRUFEXCIsIHQsIGUpLCBlO1xuICAgIH1cbiAgICBzZXRJdGVtKHQsIGUpIHtcbiAgICAgICAgJChcIlNoYXJlZENsaWVudFN0YXRlXCIsIFwiU0VUXCIsIHQsIGUpLCB0aGlzLnN0b3JhZ2Uuc2V0SXRlbSh0LCBlKTtcbiAgICB9XG4gICAgcmVtb3ZlSXRlbSh0KSB7XG4gICAgICAgICQoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIlJFTU9WRVwiLCB0KSwgdGhpcy5zdG9yYWdlLnJlbW92ZUl0ZW0odCk7XG4gICAgfVxuICAgIHFzKHQpIHtcbiAgICAgICAgLy8gTm90ZTogVGhlIGZ1bmN0aW9uIGlzIHR5cGVkIHRvIHRha2UgRXZlbnQgdG8gYmUgaW50ZXJmYWNlLWNvbXBhdGlibGUgd2l0aFxuICAgICAgICAvLyBgV2luZG93LmFkZEV2ZW50TGlzdGVuZXJgLlxuICAgICAgICBjb25zdCBlID0gdDtcbiAgICAgICAgaWYgKGUuc3RvcmFnZUFyZWEgPT09IHRoaXMuc3RvcmFnZSkge1xuICAgICAgICAgICAgaWYgKCQoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIkVWRU5UXCIsIGUua2V5LCBlLm5ld1ZhbHVlKSwgZS5rZXkgPT09IHRoaXMuUXMpIHJldHVybiB2b2lkIEYoXCJSZWNlaXZlZCBXZWJTdG9yYWdlIG5vdGlmaWNhdGlvbiBmb3IgbG9jYWwgY2hhbmdlLiBBbm90aGVyIGNsaWVudCBtaWdodCBoYXZlIGdhcmJhZ2UtY29sbGVjdGVkIG91ciBzdGF0ZVwiKTtcbiAgICAgICAgICAgIHRoaXMuT2UuZW5xdWV1ZVJldHJ5YWJsZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IGUua2V5KSBpZiAodGhpcy5Hcy50ZXN0KGUua2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gZS5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmNpKGUua2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51aSh0LCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5oaShlLmtleSwgZS5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQpIHJldHVybiB0aGlzLnVpKHQuY2xpZW50SWQsIHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuenMudGVzdChlLmtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBlLm5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMubGkoZS5rZXksIGUubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0KSByZXR1cm4gdGhpcy5maSh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLkhzLnRlc3QoZS5rZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gZS5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmRpKGUua2V5LCBlLm5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodCkgcmV0dXJuIHRoaXMud2kodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09IHRoaXMuSnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBlLm5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuWnMoZS5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQpIHJldHVybiB0aGlzLnRpKHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSB0aGlzLldzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlID0gZXQuSTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSB0KSB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gSlNPTi5wYXJzZSh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQihcIm51bWJlclwiID09IHR5cGVvZiBuKSwgZSA9IG47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgXCJGYWlsZWQgdG8gcmVhZCBzZXF1ZW5jZSBudW1iZXIgZnJvbSBXZWJTdG9yYWdlXCIsIHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICogYE1lbW9yeVNoYXJlZENsaWVudFN0YXRlYCBpcyBhIHNpbXBsZSBpbXBsZW1lbnRhdGlvbiBvZiBTaGFyZWRDbGllbnRTdGF0ZSBmb3JcbiAqIGNsaWVudHMgdXNpbmcgbWVtb3J5IHBlcnNpc3RlbmNlLiBUaGUgc3RhdGUgaW4gdGhpcyBjbGFzcyByZW1haW5zIGZ1bGx5XG4gKiBpc29sYXRlZCBhbmQgbm8gc3luY2hyb25pemF0aW9uIGlzIHBlcmZvcm1lZC5cbiAqLyAoZS5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ICE9PSBldC5JICYmIHRoaXMuc2VxdWVuY2VOdW1iZXJIYW5kbGVyKHQpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSB0aGlzLllzKSByZXR1cm4gdGhpcy5zeW5jRW5naW5lLl9pKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHRoaXMuanMucHVzaChlKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgaWkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLktzLmdldCh0aGlzLkJzKTtcbiAgICB9XG4gICAgWHMoKSB7XG4gICAgICAgIHRoaXMuc2V0SXRlbSh0aGlzLlFzLCB0aGlzLmlpLk9zKCkpO1xuICAgIH1cbiAgICBuaSh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgQnIodGhpcy5jdXJyZW50VXNlciwgdCwgZSwgbiksIGkgPSBNcih0aGlzLnBlcnNpc3RlbmNlS2V5LCB0aGlzLmN1cnJlbnRVc2VyLCB0KTtcbiAgICAgICAgdGhpcy5zZXRJdGVtKGksIHMuT3MoKSk7XG4gICAgfVxuICAgIHNpKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IE1yKHRoaXMucGVyc2lzdGVuY2VLZXksIHRoaXMuY3VycmVudFVzZXIsIHQpO1xuICAgICAgICB0aGlzLnJlbW92ZUl0ZW0oZSk7XG4gICAgfVxuICAgIG9pKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLkJzLFxuICAgICAgICAgICAgb25saW5lU3RhdGU6IHRcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0odGhpcy5KcywgSlNPTi5zdHJpbmdpZnkoZSkpO1xuICAgIH1cbiAgICByaSh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBMcih0aGlzLnBlcnNpc3RlbmNlS2V5LCB0KSwgaSA9IG5ldyBVcih0LCBlLCBuKTtcbiAgICAgICAgdGhpcy5zZXRJdGVtKHMsIGkuT3MoKSk7XG4gICAgfVxuICAgIGFpKCkge1xuICAgICAgICB0aGlzLnNldEl0ZW0odGhpcy5ZcywgXCJ2YWx1ZS1ub3QtdXNlZFwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgY2xpZW50IHN0YXRlIGtleSBpbiBXZWJTdG9yYWdlLiBSZXR1cm5zIG51bGwgaWYgdGhlIGtleSBkb2VzIG5vdFxuICAgICAqIG1hdGNoIHRoZSBleHBlY3RlZCBrZXkgZm9ybWF0LlxuICAgICAqLyAgICBjaSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLkdzLmV4ZWModCk7XG4gICAgICAgIHJldHVybiBlID8gZVsxXSA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIGNsaWVudCBzdGF0ZSBpbiBXZWJTdG9yYWdlLiBSZXR1cm5zICdudWxsJyBpZiB0aGUgdmFsdWUgY291bGQgbm90XG4gICAgICogYmUgcGFyc2VkLlxuICAgICAqLyAgICBoaSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmNpKHQpO1xuICAgICAgICByZXR1cm4gcXIuRnMobiwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIG11dGF0aW9uIGJhdGNoIHN0YXRlIGluIFdlYlN0b3JhZ2UuIFJldHVybnMgJ251bGwnIGlmIHRoZSB2YWx1ZVxuICAgICAqIGNvdWxkIG5vdCBiZSBwYXJzZWQuXG4gICAgICovICAgIGxpKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuenMuZXhlYyh0KSwgcyA9IE51bWJlcihuWzFdKSwgaSA9IHZvaWQgMCAhPT0gblsyXSA/IG5bMl0gOiBudWxsO1xuICAgICAgICByZXR1cm4gQnIuRnMobmV3IEQoaSksIHMsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBxdWVyeSB0YXJnZXQgc3RhdGUgZnJvbSBXZWJTdG9yYWdlLiBSZXR1cm5zICdudWxsJyBpZiB0aGUgdmFsdWVcbiAgICAgKiBjb3VsZCBub3QgYmUgcGFyc2VkLlxuICAgICAqLyAgICBkaSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLkhzLmV4ZWModCksIHMgPSBOdW1iZXIoblsxXSk7XG4gICAgICAgIHJldHVybiBVci5GcyhzLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGFuIG9ubGluZSBzdGF0ZSBmcm9tIFdlYlN0b3JhZ2UuIFJldHVybnMgJ251bGwnIGlmIHRoZSB2YWx1ZVxuICAgICAqIGNvdWxkIG5vdCBiZSBwYXJzZWQuXG4gICAgICovICAgIFpzKHQpIHtcbiAgICAgICAgcmV0dXJuIEtyLkZzKHQpO1xuICAgIH1cbiAgICBhc3luYyBmaSh0KSB7XG4gICAgICAgIGlmICh0LnVzZXIudWlkID09PSB0aGlzLmN1cnJlbnRVc2VyLnVpZCkgcmV0dXJuIHRoaXMuc3luY0VuZ2luZS5taSh0LmJhdGNoSWQsIHQuc3RhdGUsIHQuZXJyb3IpO1xuICAgICAgICAkKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgYElnbm9yaW5nIG11dGF0aW9uIGZvciBub24tYWN0aXZlIHVzZXIgJHt0LnVzZXIudWlkfWApO1xuICAgIH1cbiAgICB3aSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN5bmNFbmdpbmUuZ2kodC50YXJnZXRJZCwgdC5zdGF0ZSwgdC5lcnJvcik7XG4gICAgfVxuICAgIHVpKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUgPyB0aGlzLktzLmluc2VydCh0LCBlKSA6IHRoaXMuS3MucmVtb3ZlKHQpLCBzID0gdGhpcy5laSh0aGlzLktzKSwgaSA9IHRoaXMuZWkobiksIHIgPSBbXSwgbyA9IFtdO1xuICAgICAgICByZXR1cm4gaS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHMuaGFzKHQpIHx8IHIucHVzaCh0KTtcbiAgICAgICAgfSkpLCBzLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgaS5oYXModCkgfHwgby5wdXNoKHQpO1xuICAgICAgICB9KSksIHRoaXMuc3luY0VuZ2luZS55aShyLCBvKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLktzID0gbjtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0aSh0KSB7XG4gICAgICAgIC8vIFdlIGNoZWNrIHdoZXRoZXIgdGhlIGNsaWVudCB0aGF0IHdyb3RlIHRoaXMgb25saW5lIHN0YXRlIGlzIHN0aWxsIGFjdGl2ZVxuICAgICAgICAvLyBieSBjb21wYXJpbmcgaXRzIGNsaWVudCBJRCB0byB0aGUgbGlzdCBvZiBjbGllbnRzIGtlcHQgYWN0aXZlIGluXG4gICAgICAgIC8vIEluZGV4ZWREYi4gSWYgYSBjbGllbnQgZG9lcyBub3QgdXBkYXRlIHRoZWlyIEluZGV4ZWREYiBjbGllbnQgc3RhdGVcbiAgICAgICAgLy8gd2l0aGluIDUgc2Vjb25kcywgaXQgaXMgY29uc2lkZXJlZCBpbmFjdGl2ZSBhbmQgd2UgZG9uJ3QgZW1pdCBhbiBvbmxpbmVcbiAgICAgICAgLy8gc3RhdGUgZXZlbnQuXG4gICAgICAgIHRoaXMuS3MuZ2V0KHQuY2xpZW50SWQpICYmIHRoaXMub25saW5lU3RhdGVIYW5kbGVyKHQub25saW5lU3RhdGUpO1xuICAgIH1cbiAgICBlaSh0KSB7XG4gICAgICAgIGxldCBlID0gQ24oKTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIGUgPSBlLnVuaW9uV2l0aChuLmFjdGl2ZVRhcmdldElkcyk7XG4gICAgICAgIH0pKSwgZTtcbiAgICB9XG59XG5cbmNsYXNzIFdyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5waSA9IG5ldyBqciwgdGhpcy5UaSA9IHt9LCB0aGlzLm9ubGluZVN0YXRlSGFuZGxlciA9IG51bGwsIHRoaXMuc2VxdWVuY2VOdW1iZXJIYW5kbGVyID0gbnVsbDtcbiAgICB9XG4gICAgYWRkUGVuZGluZ011dGF0aW9uKHQpIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIHVwZGF0ZU11dGF0aW9uU3RhdGUodCwgZSwgbikge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgYWRkTG9jYWxRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBpLk1zKHQpLCB0aGlzLlRpW3RdIHx8IFwibm90LWN1cnJlbnRcIjtcbiAgICB9XG4gICAgdXBkYXRlUXVlcnlTdGF0ZSh0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuVGlbdF0gPSBlO1xuICAgIH1cbiAgICByZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgdGhpcy5waS5Mcyh0KTtcbiAgICB9XG4gICAgaXNMb2NhbFF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGkuYWN0aXZlVGFyZ2V0SWRzLmhhcyh0KTtcbiAgICB9XG4gICAgY2xlYXJRdWVyeVN0YXRlKHQpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuVGlbdF07XG4gICAgfVxuICAgIGdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGkuYWN0aXZlVGFyZ2V0SWRzO1xuICAgIH1cbiAgICBpc0FjdGl2ZVF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGkuYWN0aXZlVGFyZ2V0SWRzLmhhcyh0KTtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBpID0gbmV3IGpyLCBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgaGFuZGxlVXNlckNoYW5nZSh0LCBlLCBuKSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICBzZXRPbmxpbmVTdGF0ZSh0KSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICBzaHV0ZG93bigpIHt9XG4gICAgd3JpdGVTZXF1ZW5jZU51bWJlcih0KSB7fVxuICAgIG5vdGlmeUJ1bmRsZUxvYWRlZCgpIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBHciB7XG4gICAgRWkodCkge1xuICAgICAgICAvLyBOby1vcC5cbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIC8vIE5vLW9wLlxuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIFJlZmVyZW5jZXMgdG8gYHdpbmRvd2AgYXJlIGd1YXJkZWQgYnkgQnJvd3NlckNvbm5lY3Rpdml0eU1vbml0b3IuaXNBdmFpbGFibGUoKVxuLyogZXNsaW50LWRpc2FibGUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzICovXG4vKipcbiAqIEJyb3dzZXIgaW1wbGVtZW50YXRpb24gb2YgQ29ubmVjdGl2aXR5TW9uaXRvci5cbiAqL1xuY2xhc3MgenIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLklpID0gKCkgPT4gdGhpcy5BaSgpLCB0aGlzLlJpID0gKCkgPT4gdGhpcy5QaSgpLCB0aGlzLmJpID0gW10sIHRoaXMudmkoKTtcbiAgICB9XG4gICAgRWkodCkge1xuICAgICAgICB0aGlzLmJpLnB1c2godCk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9ubGluZVwiLCB0aGlzLklpKSwgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvZmZsaW5lXCIsIHRoaXMuUmkpO1xuICAgIH1cbiAgICB2aSgpIHtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvbmxpbmVcIiwgdGhpcy5JaSksIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib2ZmbGluZVwiLCB0aGlzLlJpKTtcbiAgICB9XG4gICAgQWkoKSB7XG4gICAgICAgICQoXCJDb25uZWN0aXZpdHlNb25pdG9yXCIsIFwiTmV0d29yayBjb25uZWN0aXZpdHkgY2hhbmdlZDogQVZBSUxBQkxFXCIpO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5iaSkgdCgwIC8qIEFWQUlMQUJMRSAqLyk7XG4gICAgfVxuICAgIFBpKCkge1xuICAgICAgICAkKFwiQ29ubmVjdGl2aXR5TW9uaXRvclwiLCBcIk5ldHdvcmsgY29ubmVjdGl2aXR5IGNoYW5nZWQ6IFVOQVZBSUxBQkxFXCIpO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5iaSkgdCgxIC8qIFVOQVZBSUxBQkxFICovKTtcbiAgICB9XG4gICAgLy8gVE9ETyhjaGVuYnJpYW4pOiBDb25zaWRlciBwYXNzaW5nIGluIHdpbmRvdyBlaXRoZXIgaW50byB0aGlzIGNvbXBvbmVudCBvclxuICAgIC8vIGhlcmUgZm9yIHRlc3RpbmcgdmlhIEZha2VXaW5kb3cuXG4gICAgLyoqIENoZWNrcyB0aGF0IGFsbCB1c2VkIGF0dHJpYnV0ZXMgb2Ygd2luZG93IGFyZSBhdmFpbGFibGUuICovXG4gICAgc3RhdGljIGJ0KCkge1xuICAgICAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2Ygd2luZG93ICYmIHZvaWQgMCAhPT0gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgJiYgdm9pZCAwICE9PSB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcjtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IEhyID0ge1xuICAgIEJhdGNoR2V0RG9jdW1lbnRzOiBcImJhdGNoR2V0XCIsXG4gICAgQ29tbWl0OiBcImNvbW1pdFwiLFxuICAgIFJ1blF1ZXJ5OiBcInJ1blF1ZXJ5XCJcbn07XG5cbi8qKlxuICogTWFwcyBSUEMgbmFtZXMgdG8gdGhlIGNvcnJlc3BvbmRpbmcgUkVTVCBlbmRwb2ludCBuYW1lLlxuICpcbiAqIFdlIHVzZSBhcnJheSBub3RhdGlvbiB0byBhdm9pZCBtYW5nbGluZy5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUHJvdmlkZXMgYSBzaW1wbGUgaGVscGVyIGNsYXNzIHRoYXQgaW1wbGVtZW50cyB0aGUgU3RyZWFtIGludGVyZmFjZSB0b1xuICogYnJpZGdlIHRvIG90aGVyIGltcGxlbWVudGF0aW9ucyB0aGF0IGFyZSBzdHJlYW1zIGJ1dCBkbyBub3QgaW1wbGVtZW50IHRoZVxuICogaW50ZXJmYWNlLiBUaGUgc3RyZWFtIGNhbGxiYWNrcyBhcmUgaW52b2tlZCB3aXRoIHRoZSBjYWxsT24uLi4gbWV0aG9kcy5cbiAqL1xuY2xhc3MgSnIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5WaSA9IHQuVmksIHRoaXMuU2kgPSB0LlNpO1xuICAgIH1cbiAgICBEaSh0KSB7XG4gICAgICAgIHRoaXMuQ2kgPSB0O1xuICAgIH1cbiAgICBOaSh0KSB7XG4gICAgICAgIHRoaXMua2kgPSB0O1xuICAgIH1cbiAgICBvbk1lc3NhZ2UodCkge1xuICAgICAgICB0aGlzLnhpID0gdDtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuU2koKTtcbiAgICB9XG4gICAgc2VuZCh0KSB7XG4gICAgICAgIHRoaXMuVmkodCk7XG4gICAgfVxuICAgICRpKCkge1xuICAgICAgICB0aGlzLkNpKCk7XG4gICAgfVxuICAgIEZpKHQpIHtcbiAgICAgICAgdGhpcy5raSh0KTtcbiAgICB9XG4gICAgT2kodCkge1xuICAgICAgICB0aGlzLnhpKHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgWXIgZXh0ZW5kcyBcbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgYWxsIFJlc3QtYmFzZWQgY29ubmVjdGlvbnMgdG8gdGhlIGJhY2tlbmQgKFdlYkNoYW5uZWwgYW5kXG4gKiBIVFRQKS5cbiAqL1xuY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5kYXRhYmFzZUluZm8gPSB0LCB0aGlzLmRhdGFiYXNlSWQgPSB0LmRhdGFiYXNlSWQ7XG4gICAgICAgIGNvbnN0IGUgPSB0LnNzbCA/IFwiaHR0cHNcIiA6IFwiaHR0cFwiO1xuICAgICAgICB0aGlzLk1pID0gZSArIFwiOi8vXCIgKyB0Lmhvc3QsIHRoaXMuTGkgPSBcInByb2plY3RzL1wiICsgdGhpcy5kYXRhYmFzZUlkLnByb2plY3RJZCArIFwiL2RhdGFiYXNlcy9cIiArIHRoaXMuZGF0YWJhc2VJZC5kYXRhYmFzZSArIFwiL2RvY3VtZW50c1wiO1xuICAgIH1cbiAgICBCaSh0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLlVpKHQsIGUpO1xuICAgICAgICAkKFwiUmVzdENvbm5lY3Rpb25cIiwgXCJTZW5kaW5nOiBcIiwgciwgbik7XG4gICAgICAgIGNvbnN0IG8gPSB7fTtcbiAgICAgICAgcmV0dXJuIHRoaXMucWkobywgcywgaSksIHRoaXMuS2kodCwgciwgbywgbikudGhlbigodCA9PiAoJChcIlJlc3RDb25uZWN0aW9uXCIsIFwiUmVjZWl2ZWQ6IFwiLCB0KSwgXG4gICAgICAgIHQpKSwgKGUgPT4ge1xuICAgICAgICAgICAgdGhyb3cgTyhcIlJlc3RDb25uZWN0aW9uXCIsIGAke3R9IGZhaWxlZCB3aXRoIGVycm9yOiBgLCBlLCBcInVybDogXCIsIHIsIFwicmVxdWVzdDpcIiwgbiksIFxuICAgICAgICAgICAgZTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBqaSh0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIC8vIFRoZSBSRVNUIEFQSSBhdXRvbWF0aWNhbGx5IGFnZ3JlZ2F0ZXMgYWxsIG9mIHRoZSBzdHJlYW1lZCByZXN1bHRzLCBzbyB3ZVxuICAgICAgICAvLyBjYW4ganVzdCB1c2UgdGhlIG5vcm1hbCBpbnZva2UoKSBtZXRob2QuXG4gICAgICAgIHJldHVybiB0aGlzLkJpKHQsIGUsIG4sIHMsIGkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNb2RpZmllcyB0aGUgaGVhZGVycyBmb3IgYSByZXF1ZXN0LCBhZGRpbmcgYW55IGF1dGhvcml6YXRpb24gdG9rZW4gaWZcbiAgICAgKiBwcmVzZW50IGFuZCBhbnkgYWRkaXRpb25hbCBoZWFkZXJzIGZvciB0aGUgcmVxdWVzdC5cbiAgICAgKi8gICAgcWkodCwgZSwgbikge1xuICAgICAgICB0W1wiWC1Hb29nLUFwaS1DbGllbnRcIl0gPSBcImdsLWpzLyBmaXJlL1wiICsgQywgXG4gICAgICAgIC8vIENvbnRlbnQtVHlwZTogdGV4dC9wbGFpbiB3aWxsIGF2b2lkIHByZWZsaWdodCByZXF1ZXN0cyB3aGljaCBtaWdodFxuICAgICAgICAvLyBtZXNzIHdpdGggQ09SUyBhbmQgcmVkaXJlY3RzIGJ5IHByb3hpZXMuIElmIHdlIGFkZCBjdXN0b20gaGVhZGVyc1xuICAgICAgICAvLyB3ZSB3aWxsIG5lZWQgdG8gY2hhbmdlIHRoaXMgY29kZSB0byBwb3RlbnRpYWxseSB1c2UgdGhlICRodHRwT3ZlcndyaXRlXG4gICAgICAgIC8vIHBhcmFtZXRlciBzdXBwb3J0ZWQgYnkgRVNGIHRvIGF2b2lkIHRyaWdnZXJpbmcgcHJlZmxpZ2h0IHJlcXVlc3RzLlxuICAgICAgICB0W1wiQ29udGVudC1UeXBlXCJdID0gXCJ0ZXh0L3BsYWluXCIsIHRoaXMuZGF0YWJhc2VJbmZvLmFwcElkICYmICh0W1wiWC1GaXJlYmFzZS1HTVBJRFwiXSA9IHRoaXMuZGF0YWJhc2VJbmZvLmFwcElkKSwgXG4gICAgICAgIGUgJiYgZS5oZWFkZXJzLmZvckVhY2goKChlLCBuKSA9PiB0W25dID0gZSkpLCBuICYmIG4uaGVhZGVycy5mb3JFYWNoKCgoZSwgbikgPT4gdFtuXSA9IGUpKTtcbiAgICB9XG4gICAgVWkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gSHJbdF07XG4gICAgICAgIHJldHVybiBgJHt0aGlzLk1pfS92MS8ke2V9OiR7bn1gO1xuICAgIH1cbn0ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIodCksIHRoaXMuZm9yY2VMb25nUG9sbGluZyA9IHQuZm9yY2VMb25nUG9sbGluZywgdGhpcy5hdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPSB0LmF1dG9EZXRlY3RMb25nUG9sbGluZywgXG4gICAgICAgIHRoaXMudXNlRmV0Y2hTdHJlYW1zID0gdC51c2VGZXRjaFN0cmVhbXM7XG4gICAgfVxuICAgIEtpKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCgoaSwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgbyA9IG5ldyBYaHJJbztcbiAgICAgICAgICAgIG8ubGlzdGVuT25jZShFdmVudFR5cGUuQ09NUExFVEUsICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChvLmdldExhc3RFcnJvckNvZGUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRXJyb3JDb2RlLk5PX0VSUk9SOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IG8uZ2V0UmVzcG9uc2VKc29uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiQ29ubmVjdGlvblwiLCBcIlhIUiByZWNlaXZlZDpcIiwgSlNPTi5zdHJpbmdpZnkoZSkpLCBpKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVycm9yQ29kZS5USU1FT1VUOlxuICAgICAgICAgICAgICAgICAgICAgICAgJChcIkNvbm5lY3Rpb25cIiwgJ1JQQyBcIicgKyB0ICsgJ1wiIHRpbWVkIG91dCcpLCByKG5ldyBqKEsuREVBRExJTkVfRVhDRUVERUQsIFwiUmVxdWVzdCB0aW1lIG91dFwiKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRXJyb3JDb2RlLkhUVFBfRVJST1I6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gby5nZXRTdGF0dXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKFwiQ29ubmVjdGlvblwiLCAnUlBDIFwiJyArIHQgKyAnXCIgZmFpbGVkIHdpdGggc3RhdHVzOicsIG4sIFwicmVzcG9uc2UgdGV4dDpcIiwgby5nZXRSZXNwb25zZVRleHQoKSksIFxuICAgICAgICAgICAgICAgICAgICAgICAgbiA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gby5nZXRSZXNwb25zZUpzb24oKS5lcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiB0LnN0YXR1cyAmJiB0Lm1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0LnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXy9nLCBcIi1cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhLKS5pbmRleE9mKGUpID49IDAgPyBlIDogSy5VTktOT1dOO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KHQuc3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcihuZXcgaihlLCB0Lm1lc3NhZ2UpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgcihuZXcgaihLLlVOS05PV04sIFwiU2VydmVyIHJlc3BvbmRlZCB3aXRoIHN0YXR1cyBcIiArIG8uZ2V0U3RhdHVzKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIHJlY2VpdmVkIGFuIEhUVFBfRVJST1IgYnV0IHRoZXJlJ3Mgbm8gc3RhdHVzIGNvZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCdzIG1vc3QgcHJvYmFibHkgYSBjb25uZWN0aW9uIGlzc3VlXG4gICAgICAgICAgICAgICAgICAgICAgICByKG5ldyBqKEsuVU5BVkFJTEFCTEUsIFwiQ29ubmVjdGlvbiBmYWlsZWQuXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIEwoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgICQoXCJDb25uZWN0aW9uXCIsICdSUEMgXCInICsgdCArICdcIiBjb21wbGV0ZWQuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgY29uc3QgYSA9IEpTT04uc3RyaW5naWZ5KHMpO1xuICAgICAgICAgICAgby5zZW5kKGUsIFwiUE9TVFwiLCBhLCBuLCAxNSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgUWkodCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gWyB0aGlzLk1pLCBcIi9cIiwgXCJnb29nbGUuZmlyZXN0b3JlLnYxLkZpcmVzdG9yZVwiLCBcIi9cIiwgdCwgXCIvY2hhbm5lbFwiIF0sIGkgPSBjcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0KCksIHIgPSBnZXRTdGF0RXZlbnRUYXJnZXQoKSwgbyA9IHtcbiAgICAgICAgICAgIC8vIFJlcXVpcmVkIGZvciBiYWNrZW5kIHN0aWNraW5lc3MsIHJvdXRpbmcgYmVoYXZpb3IgaXMgYmFzZWQgb24gdGhpc1xuICAgICAgICAgICAgLy8gcGFyYW1ldGVyLlxuICAgICAgICAgICAgaHR0cFNlc3Npb25JZFBhcmFtOiBcImdzZXNzaW9uaWRcIixcbiAgICAgICAgICAgIGluaXRNZXNzYWdlSGVhZGVyczoge30sXG4gICAgICAgICAgICBtZXNzYWdlVXJsUGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBwYXJhbSBpcyB1c2VkIHRvIGltcHJvdmUgcm91dGluZyBhbmQgcHJvamVjdCBpc29sYXRpb24gYnkgdGhlXG4gICAgICAgICAgICAgICAgLy8gYmFja2VuZCBhbmQgbXVzdCBiZSBpbmNsdWRlZCBpbiBldmVyeSByZXF1ZXN0LlxuICAgICAgICAgICAgICAgIGRhdGFiYXNlOiBgcHJvamVjdHMvJHt0aGlzLmRhdGFiYXNlSWQucHJvamVjdElkfS9kYXRhYmFzZXMvJHt0aGlzLmRhdGFiYXNlSWQuZGF0YWJhc2V9YFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNlbmRSYXdKc29uOiAhMCxcbiAgICAgICAgICAgIHN1cHBvcnRzQ3Jvc3NEb21haW5YaHI6ICEwLFxuICAgICAgICAgICAgaW50ZXJuYWxDaGFubmVsUGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgLy8gT3ZlcnJpZGUgdGhlIGRlZmF1bHQgdGltZW91dCAocmFuZG9taXplZCBiZXR3ZWVuIDEwLTIwIHNlY29uZHMpIHNpbmNlXG4gICAgICAgICAgICAgICAgLy8gYSBsYXJnZSB3cml0ZSBiYXRjaCBvbiBhIHNsb3cgaW50ZXJuZXQgY29ubmVjdGlvbiBtYXkgdGFrZSBhIGxvbmdcbiAgICAgICAgICAgICAgICAvLyB0aW1lIHRvIHNlbmQgdG8gdGhlIGJhY2tlbmQuIFJhdGhlciB0aGFuIGhhdmUgV2ViQ2hhbm5lbCBpbXBvc2UgYVxuICAgICAgICAgICAgICAgIC8vIHRpZ2h0IHRpbWVvdXQgd2hpY2ggY291bGQgbGVhZCB0byBpbmZpbml0ZSB0aW1lb3V0cyBhbmQgcmV0cmllcywgd2VcbiAgICAgICAgICAgICAgICAvLyBzZXQgaXQgdmVyeSBsYXJnZSAoNS0xMCBtaW51dGVzKSBhbmQgcmVseSBvbiB0aGUgYnJvd3NlcidzIGJ1aWx0aW5cbiAgICAgICAgICAgICAgICAvLyB0aW1lb3V0cyB0byBraWNrIGluIGlmIHRoZSByZXF1ZXN0IGlzbid0IHdvcmtpbmcuXG4gICAgICAgICAgICAgICAgZm9yd2FyZENoYW5uZWxSZXF1ZXN0VGltZW91dE1zOiA2ZTVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmb3JjZUxvbmdQb2xsaW5nOiB0aGlzLmZvcmNlTG9uZ1BvbGxpbmcsXG4gICAgICAgICAgICBkZXRlY3RCdWZmZXJpbmdQcm94eTogdGhpcy5hdXRvRGV0ZWN0TG9uZ1BvbGxpbmdcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51c2VGZXRjaFN0cmVhbXMgJiYgKG8ueG1sSHR0cEZhY3RvcnkgPSBuZXcgRmV0Y2hYbWxIdHRwRmFjdG9yeSh7fSkpLCB0aGlzLnFpKG8uaW5pdE1lc3NhZ2VIZWFkZXJzLCBlLCBuKSwgXG4gICAgICAgIC8vIFNlbmRpbmcgdGhlIGN1c3RvbSBoZWFkZXJzIHdlIGp1c3QgYWRkZWQgdG8gcmVxdWVzdC5pbml0TWVzc2FnZUhlYWRlcnNcbiAgICAgICAgLy8gKEF1dGhvcml6YXRpb24sIGV0Yy4pIHdpbGwgdHJpZ2dlciB0aGUgYnJvd3NlciB0byBtYWtlIGEgQ09SUyBwcmVmbGlnaHRcbiAgICAgICAgLy8gcmVxdWVzdCBiZWNhdXNlIHRoZSBYSFIgd2lsbCBubyBsb25nZXIgbWVldCB0aGUgY3JpdGVyaWEgZm9yIGEgXCJzaW1wbGVcIlxuICAgICAgICAvLyBDT1JTIHJlcXVlc3Q6XG4gICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUVFAvQ09SUyNTaW1wbGVfcmVxdWVzdHNcbiAgICAgICAgLy8gVGhlcmVmb3JlIHRvIGF2b2lkIHRoZSBDT1JTIHByZWZsaWdodCByZXF1ZXN0IChhbiBleHRyYSBuZXR3b3JrXG4gICAgICAgIC8vIHJvdW5kdHJpcCksIHdlIHVzZSB0aGUgaHR0cEhlYWRlcnNPdmVyd3JpdGVQYXJhbSBvcHRpb24gdG8gc3BlY2lmeSB0aGF0XG4gICAgICAgIC8vIHRoZSBoZWFkZXJzIHNob3VsZCBpbnN0ZWFkIGJlIGVuY29kZWQgaW50byBhIHNwZWNpYWwgXCIkaHR0cEhlYWRlcnNcIiBxdWVyeVxuICAgICAgICAvLyBwYXJhbWV0ZXIsIHdoaWNoIGlzIHJlY29nbml6ZWQgYnkgdGhlIHdlYmNoYW5uZWwgYmFja2VuZC4gVGhpcyBpc1xuICAgICAgICAvLyBmb3JtYWxseSBkZWZpbmVkIGhlcmU6XG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY2xvc3VyZS1saWJyYXJ5L2Jsb2IvYjBlMTgxNWIxM2ZiOTJhNDZkN2M5YjNjMzBkZTVkNmEzOTZhMzI0NS9jbG9zdXJlL2dvb2cvbmV0L3JwYy9odHRwY29ycy5qcyNMMzJcbiAgICAgICAgLy8gVE9ETyhiLzE0NTYyNDc1Nik6IFRoZXJlIGlzIGEgYmFja2VuZCBidWcgd2hlcmUgJGh0dHBIZWFkZXJzIGlzbid0IHJlc3BlY3RlZCBpZiB0aGUgcmVxdWVzdFxuICAgICAgICAvLyBkb2Vzbid0IGhhdmUgYW4gT3JpZ2luIGhlYWRlci4gU28gd2UgaGF2ZSB0byBleGNsdWRlIGEgZmV3IGJyb3dzZXIgZW52aXJvbm1lbnRzIHRoYXQgYXJlXG4gICAgICAgIC8vIGtub3duIHRvIChzb21ldGltZXMpIG5vdCBpbmNsdWRlIGFuIE9yaWdpbi4gU2VlXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvaXNzdWVzLzE0OTEuXG4gICAgICAgIGlzTW9iaWxlQ29yZG92YSgpIHx8IGlzUmVhY3ROYXRpdmUoKSB8fCBpc0VsZWN0cm9uKCkgfHwgaXNJRSgpIHx8IGlzVVdQKCkgfHwgaXNCcm93c2VyRXh0ZW5zaW9uKCkgfHwgKG8uaHR0cEhlYWRlcnNPdmVyd3JpdGVQYXJhbSA9IFwiJGh0dHBIZWFkZXJzXCIpO1xuICAgICAgICBjb25zdCBhID0gcy5qb2luKFwiXCIpO1xuICAgICAgICAkKFwiQ29ubmVjdGlvblwiLCBcIkNyZWF0aW5nIFdlYkNoYW5uZWw6IFwiICsgYSwgbyk7XG4gICAgICAgIGNvbnN0IGMgPSBpLmNyZWF0ZVdlYkNoYW5uZWwoYSwgbyk7XG4gICAgICAgIC8vIFdlYkNoYW5uZWwgc3VwcG9ydHMgc2VuZGluZyB0aGUgZmlyc3QgbWVzc2FnZSB3aXRoIHRoZSBoYW5kc2hha2UgLSBzYXZpbmdcbiAgICAgICAgLy8gYSBuZXR3b3JrIHJvdW5kIHRyaXAuIEhvd2V2ZXIsIGl0IHdpbGwgaGF2ZSB0byBjYWxsIHNlbmQgaW4gdGhlIHNhbWVcbiAgICAgICAgLy8gSlMgZXZlbnQgbG9vcCBhcyBvcGVuLiBJbiBvcmRlciB0byBlbmZvcmNlIHRoaXMsIHdlIGRlbGF5IGFjdHVhbGx5XG4gICAgICAgIC8vIG9wZW5pbmcgdGhlIFdlYkNoYW5uZWwgdW50aWwgc2VuZCBpcyBjYWxsZWQuIFdoZXRoZXIgd2UgaGF2ZSBjYWxsZWRcbiAgICAgICAgLy8gb3BlbiBpcyB0cmFja2VkIHdpdGggdGhpcyB2YXJpYWJsZS5cbiAgICAgICAgICAgICAgICBsZXQgdSA9ICExLCBoID0gITE7XG4gICAgICAgIC8vIEEgZmxhZyB0byBkZXRlcm1pbmUgd2hldGhlciB0aGUgc3RyZWFtIHdhcyBjbG9zZWQgKGJ5IHVzIG9yIHRocm91Z2ggYW5cbiAgICAgICAgLy8gZXJyb3IvY2xvc2UgZXZlbnQpIHRvIGF2b2lkIGRlbGl2ZXJpbmcgbXVsdGlwbGUgY2xvc2UgZXZlbnRzIG9yIHNlbmRpbmdcbiAgICAgICAgLy8gb24gYSBjbG9zZWQgc3RyZWFtXG4gICAgICAgICAgICAgICAgY29uc3QgZyA9IG5ldyBKcih7XG4gICAgICAgICAgICBWaTogdCA9PiB7XG4gICAgICAgICAgICAgICAgaCA/ICQoXCJDb25uZWN0aW9uXCIsIFwiTm90IHNlbmRpbmcgYmVjYXVzZSBXZWJDaGFubmVsIGlzIGNsb3NlZDpcIiwgdCkgOiAodSB8fCAoJChcIkNvbm5lY3Rpb25cIiwgXCJPcGVuaW5nIFdlYkNoYW5uZWwgdHJhbnNwb3J0LlwiKSwgXG4gICAgICAgICAgICAgICAgYy5vcGVuKCksIHUgPSAhMCksICQoXCJDb25uZWN0aW9uXCIsIFwiV2ViQ2hhbm5lbCBzZW5kaW5nOlwiLCB0KSwgYy5zZW5kKHQpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBTaTogKCkgPT4gYy5jbG9zZSgpXG4gICAgICAgIH0pLCB5ID0gKHQsIGUsIG4pID0+IHtcbiAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogY2xvc3VyZSB0eXBpbmcgc2VlbXMgYnJva2VuIGJlY2F1c2UgV2ViQ2hhbm5lbCBkb2VzXG4gICAgICAgICAgICAvLyBub3QgaW1wbGVtZW50IGdvb2cuZXZlbnRzLkxpc3RlbmFibGVcbiAgICAgICAgICAgIHQubGlzdGVuKGUsICh0ID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBuKHQpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgdDtcbiAgICAgICAgICAgICAgICAgICAgfSksIDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gQ2xvc3VyZSBldmVudHMgYXJlIGd1YXJkZWQgYW5kIGV4Y2VwdGlvbnMgYXJlIHN3YWxsb3dlZCwgc28gY2F0Y2ggYW55XG4gICAgICAgIC8vIGV4Y2VwdGlvbiBhbmQgcmV0aHJvdyB1c2luZyBhIHNldFRpbWVvdXQgc28gdGhleSBiZWNvbWUgdmlzaWJsZSBhZ2Fpbi5cbiAgICAgICAgLy8gTm90ZSB0aGF0IGV2ZW50dWFsbHkgdGhpcyBmdW5jdGlvbiBjb3VsZCBnbyBhd2F5IGlmIHdlIGFyZSBjb25maWRlbnRcbiAgICAgICAgLy8gZW5vdWdoIHRoZSBjb2RlIGlzIGV4Y2VwdGlvbiBmcmVlLlxuICAgICAgICAgICAgICAgIHJldHVybiB5KGMsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLk9QRU4sICgoKSA9PiB7XG4gICAgICAgICAgICBoIHx8ICQoXCJDb25uZWN0aW9uXCIsIFwiV2ViQ2hhbm5lbCB0cmFuc3BvcnQgb3BlbmVkLlwiKTtcbiAgICAgICAgfSkpLCB5KGMsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLkNMT1NFLCAoKCkgPT4ge1xuICAgICAgICAgICAgaCB8fCAoaCA9ICEwLCAkKFwiQ29ubmVjdGlvblwiLCBcIldlYkNoYW5uZWwgdHJhbnNwb3J0IGNsb3NlZFwiKSwgZy5GaSgpKTtcbiAgICAgICAgfSkpLCB5KGMsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLkVSUk9SLCAodCA9PiB7XG4gICAgICAgICAgICBoIHx8IChoID0gITAsIE8oXCJDb25uZWN0aW9uXCIsIFwiV2ViQ2hhbm5lbCB0cmFuc3BvcnQgZXJyb3JlZDpcIiwgdCksIGcuRmkobmV3IGooSy5VTkFWQUlMQUJMRSwgXCJUaGUgb3BlcmF0aW9uIGNvdWxkIG5vdCBiZSBjb21wbGV0ZWRcIikpKTtcbiAgICAgICAgfSkpLCB5KGMsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLk1FU1NBR0UsICh0ID0+IHtcbiAgICAgICAgICAgIHZhciBlO1xuICAgICAgICAgICAgaWYgKCFoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHQuZGF0YVswXTtcbiAgICAgICAgICAgICAgICBCKCEhbik7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyhiLzM1MTQzODkxKTogVGhlcmUgaXMgYSBidWcgaW4gT25lIFBsYXRmb3JtIHRoYXQgY2F1c2VkIGVycm9yc1xuICAgICAgICAgICAgICAgIC8vIChhbmQgb25seSBlcnJvcnMpIHRvIGJlIHdyYXBwZWQgaW4gYW4gZXh0cmEgYXJyYXkuIFRvIGJlIGZvcndhcmRcbiAgICAgICAgICAgICAgICAvLyBjb21wYXRpYmxlIHdpdGggdGhlIGJ1ZyB3ZSBuZWVkIHRvIGNoZWNrIGVpdGhlciBjb25kaXRpb24uIFRoZSBsYXR0ZXJcbiAgICAgICAgICAgICAgICAvLyBjYW4gYmUgcmVtb3ZlZCBvbmNlIHRoZSBmaXggaGFzIGJlZW4gcm9sbGVkIG91dC5cbiAgICAgICAgICAgICAgICAvLyBVc2UgYW55IGJlY2F1c2UgbXNnRGF0YS5lcnJvciBpcyBub3QgdHlwZWQuXG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IG4sIGkgPSBzLmVycm9yIHx8IChudWxsID09PSAoZSA9IHNbMF0pIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuZXJyb3IpO1xuICAgICAgICAgICAgICAgIGlmIChpKSB7XG4gICAgICAgICAgICAgICAgICAgICQoXCJDb25uZWN0aW9uXCIsIFwiV2ViQ2hhbm5lbCByZWNlaXZlZCBlcnJvcjpcIiwgaSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVycm9yLnN0YXR1cyB3aWxsIGJlIGEgc3RyaW5nIGxpa2UgJ09LJyBvciAnTk9UX0ZPVU5EJy5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGkuc3RhdHVzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgZSA9IFxuICAgICAgICAgICAgICAgICAgICAvKipcbiAqIE1hcHMgYW4gZXJyb3IgQ29kZSBmcm9tIGEgR1JQQyBzdGF0dXMgaWRlbnRpZmllciBsaWtlICdOT1RfRk9VTkQnLlxuICpcbiAqIEByZXR1cm5zIFRoZSBDb2RlIGVxdWl2YWxlbnQgdG8gdGhlIGdpdmVuIHN0YXR1cyBzdHJpbmcgb3IgdW5kZWZpbmVkIGlmXG4gKiAgICAgdGhlcmUgaXMgbm8gbWF0Y2guXG4gKi9cbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9va3VwIGJ5IHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBkblt0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IGUpIHJldHVybiBtbihlKTtcbiAgICAgICAgICAgICAgICAgICAgfSh0KSwgbiA9IGkubWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgdm9pZCAwID09PSBlICYmIChlID0gSy5JTlRFUk5BTCwgbiA9IFwiVW5rbm93biBlcnJvciBzdGF0dXM6IFwiICsgdCArIFwiIHdpdGggbWVzc2FnZSBcIiArIGkubWVzc2FnZSksIFxuICAgICAgICAgICAgICAgICAgICAvLyBNYXJrIGNsb3NlZCBzbyBubyBmdXJ0aGVyIGV2ZW50cyBhcmUgcHJvcGFnYXRlZFxuICAgICAgICAgICAgICAgICAgICBoID0gITAsIGcuRmkobmV3IGooZSwgbikpLCBjLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlICQoXCJDb25uZWN0aW9uXCIsIFwiV2ViQ2hhbm5lbCByZWNlaXZlZDpcIiwgbiksIGcuT2kobik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSwgeShyLCBFdmVudC5TVEFUX0VWRU5ULCAodCA9PiB7XG4gICAgICAgICAgICB0LnN0YXQgPT09IFN0YXQuUFJPWFkgPyAkKFwiQ29ubmVjdGlvblwiLCBcIkRldGVjdGVkIGJ1ZmZlcmluZyBwcm94eVwiKSA6IHQuc3RhdCA9PT0gU3RhdC5OT1BST1hZICYmICQoXCJDb25uZWN0aW9uXCIsIFwiRGV0ZWN0ZWQgbm8gYnVmZmVyaW5nIHByb3h5XCIpO1xuICAgICAgICB9KSksIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIFRlY2huaWNhbGx5IHdlIGNvdWxkL3Nob3VsZCB3YWl0IGZvciB0aGUgV2ViQ2hhbm5lbCBvcGVuZWQgZXZlbnQsXG4gICAgICAgICAgICAvLyBidXQgYmVjYXVzZSB3ZSB3YW50IHRvIHNlbmQgdGhlIGZpcnN0IG1lc3NhZ2Ugd2l0aCB0aGUgV2ViQ2hhbm5lbFxuICAgICAgICAgICAgLy8gaGFuZHNoYWtlIHdlIHByZXRlbmQgdGhlIGNoYW5uZWwgb3BlbmVkIGhlcmUgKGFzeW5jaHJvbm91c2x5KSwgYW5kXG4gICAgICAgICAgICAvLyB0aGVuIGRlbGF5IHRoZSBhY3R1YWwgb3BlbiB1bnRpbCB0aGUgZmlyc3QgbWVzc2FnZSBpcyBzZW50LlxuICAgICAgICAgICAgZy4kaSgpO1xuICAgICAgICB9KSwgMCksIGc7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIEluaXRpYWxpemVzIHRoZSBXZWJDaGFubmVsQ29ubmVjdGlvbiBmb3IgdGhlIGJyb3dzZXIuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFRoZSBQbGF0Zm9ybSdzICd3aW5kb3cnIGltcGxlbWVudGF0aW9uIG9yIG51bGwgaWYgbm90IGF2YWlsYWJsZS4gKi9cbmZ1bmN0aW9uIFhyKCkge1xuICAgIC8vIGB3aW5kb3dgIGlzIG5vdCBhbHdheXMgYXZhaWxhYmxlLCBlLmcuIGluIFJlYWN0TmF0aXZlIGFuZCBXZWJXb3JrZXJzLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcbiAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2Ygd2luZG93ID8gd2luZG93IDogbnVsbDtcbn1cblxuLyoqIFRoZSBQbGF0Zm9ybSdzICdkb2N1bWVudCcgaW1wbGVtZW50YXRpb24gb3IgbnVsbCBpZiBub3QgYXZhaWxhYmxlLiAqLyBmdW5jdGlvbiBacigpIHtcbiAgICAvLyBgZG9jdW1lbnRgIGlzIG5vdCBhbHdheXMgYXZhaWxhYmxlLCBlLmcuIGluIFJlYWN0TmF0aXZlIGFuZCBXZWJXb3JrZXJzLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcbiAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgZG9jdW1lbnQgPyBkb2N1bWVudCA6IG51bGw7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIHRvKHQpIHtcbiAgICByZXR1cm4gbmV3IEtuKHQsIC8qIHVzZVByb3RvM0pzb249ICovICEwKTtcbn1cblxuLyoqXG4gKiBBbiBpbnN0YW5jZSBvZiB0aGUgUGxhdGZvcm0ncyAnVGV4dEVuY29kZXInIGltcGxlbWVudGF0aW9uLlxuICovXG4vKipcbiAqIEEgaGVscGVyIGZvciBydW5uaW5nIGRlbGF5ZWQgdGFza3MgZm9sbG93aW5nIGFuIGV4cG9uZW50aWFsIGJhY2tvZmYgY3VydmVcbiAqIGJldHdlZW4gYXR0ZW1wdHMuXG4gKlxuICogRWFjaCBkZWxheSBpcyBtYWRlIHVwIG9mIGEgXCJiYXNlXCIgZGVsYXkgd2hpY2ggZm9sbG93cyB0aGUgZXhwb25lbnRpYWxcbiAqIGJhY2tvZmYgY3VydmUsIGFuZCBhICsvLSA1MCUgXCJqaXR0ZXJcIiB0aGF0IGlzIGNhbGN1bGF0ZWQgYW5kIGFkZGVkIHRvIHRoZVxuICogYmFzZSBkZWxheS4gVGhpcyBwcmV2ZW50cyBjbGllbnRzIGZyb20gYWNjaWRlbnRhbGx5IHN5bmNocm9uaXppbmcgdGhlaXJcbiAqIGRlbGF5cyBjYXVzaW5nIHNwaWtlcyBvZiBsb2FkIHRvIHRoZSBiYWNrZW5kLlxuICovXG5jbGFzcyBlbyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIEFzeW5jUXVldWUgdG8gcnVuIGJhY2tvZmYgb3BlcmF0aW9ucyBvbi5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgSUQgdG8gdXNlIHdoZW4gc2NoZWR1bGluZyBiYWNrb2ZmIG9wZXJhdGlvbnMgb24gdGhlIEFzeW5jUXVldWUuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIGluaXRpYWwgZGVsYXkgKHVzZWQgYXMgdGhlIGJhc2UgZGVsYXkgb24gdGhlIGZpcnN0IHJldHJ5IGF0dGVtcHQpLlxuICAgICAqIE5vdGUgdGhhdCBqaXR0ZXIgd2lsbCBzdGlsbCBiZSBhcHBsaWVkLCBzbyB0aGUgYWN0dWFsIGRlbGF5IGNvdWxkIGJlIGFzXG4gICAgICogbGl0dGxlIGFzIDAuNSppbml0aWFsRGVsYXlNcy5cbiAgICAgKi9cbiAgICBuID0gMWUzXG4gICAgLyoqXG4gICAgICogVGhlIG11bHRpcGxpZXIgdG8gdXNlIHRvIGRldGVybWluZSB0aGUgZXh0ZW5kZWQgYmFzZSBkZWxheSBhZnRlciBlYWNoXG4gICAgICogYXR0ZW1wdC5cbiAgICAgKi8gLCBzID0gMS41XG4gICAgLyoqXG4gICAgICogVGhlIG1heGltdW0gYmFzZSBkZWxheSBhZnRlciB3aGljaCBubyBmdXJ0aGVyIGJhY2tvZmYgaXMgcGVyZm9ybWVkLlxuICAgICAqIE5vdGUgdGhhdCBqaXR0ZXIgd2lsbCBzdGlsbCBiZSBhcHBsaWVkLCBzbyB0aGUgYWN0dWFsIGRlbGF5IGNvdWxkIGJlIGFzXG4gICAgICogbXVjaCBhcyAxLjUqbWF4RGVsYXlNcy5cbiAgICAgKi8gLCBpID0gNmU0KSB7XG4gICAgICAgIHRoaXMuT2UgPSB0LCB0aGlzLnRpbWVySWQgPSBlLCB0aGlzLldpID0gbiwgdGhpcy5HaSA9IHMsIHRoaXMuemkgPSBpLCB0aGlzLkhpID0gMCwgXG4gICAgICAgIHRoaXMuSmkgPSBudWxsLCBcbiAgICAgICAgLyoqIFRoZSBsYXN0IGJhY2tvZmYgYXR0ZW1wdCwgYXMgZXBvY2ggbWlsbGlzZWNvbmRzLiAqL1xuICAgICAgICB0aGlzLllpID0gRGF0ZS5ub3coKSwgdGhpcy5yZXNldCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIGJhY2tvZmYgZGVsYXkuXG4gICAgICpcbiAgICAgKiBUaGUgdmVyeSBuZXh0IGJhY2tvZmZBbmRXYWl0KCkgd2lsbCBoYXZlIG5vIGRlbGF5LiBJZiBpdCBpcyBjYWxsZWQgYWdhaW5cbiAgICAgKiAoaS5lLiBkdWUgdG8gYW4gZXJyb3IpLCBpbml0aWFsRGVsYXlNcyAocGx1cyBqaXR0ZXIpIHdpbGwgYmUgdXNlZCwgYW5kXG4gICAgICogc3Vic2VxdWVudCBvbmVzIHdpbGwgaW5jcmVhc2UgYWNjb3JkaW5nIHRvIHRoZSBiYWNrb2ZmRmFjdG9yLlxuICAgICAqLyAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy5IaSA9IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgYmFja29mZiBkZWxheSB0byB0aGUgbWF4aW11bSBkZWxheSAoZS5nLiBmb3IgdXNlIGFmdGVyIGFcbiAgICAgKiBSRVNPVVJDRV9FWEhBVVNURUQgZXJyb3IpLlxuICAgICAqLyAgICBYaSgpIHtcbiAgICAgICAgdGhpcy5IaSA9IHRoaXMuemk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgY3VycmVudERlbGF5TXMsIGFuZCBpbmNyZWFzZXMgdGhlXG4gICAgICogZGVsYXkgZm9yIGFueSBzdWJzZXF1ZW50IGF0dGVtcHRzLiBJZiB0aGVyZSB3YXMgYSBwZW5kaW5nIGJhY2tvZmYgb3BlcmF0aW9uXG4gICAgICogYWxyZWFkeSwgaXQgd2lsbCBiZSBjYW5jZWxlZC5cbiAgICAgKi8gICAgWmkodCkge1xuICAgICAgICAvLyBDYW5jZWwgYW55IHBlbmRpbmcgYmFja29mZiBvcGVyYXRpb24uXG4gICAgICAgIHRoaXMuY2FuY2VsKCk7XG4gICAgICAgIC8vIEZpcnN0IHNjaGVkdWxlIHVzaW5nIHRoZSBjdXJyZW50IGJhc2UgKHdoaWNoIG1heSBiZSAwIGFuZCBzaG91bGQgYmVcbiAgICAgICAgLy8gaG9ub3JlZCBhcyBzdWNoKS5cbiAgICAgICAgY29uc3QgZSA9IE1hdGguZmxvb3IodGhpcy5IaSArIHRoaXMudHIoKSksIG4gPSBNYXRoLm1heCgwLCBEYXRlLm5vdygpIC0gdGhpcy5ZaSksIHMgPSBNYXRoLm1heCgwLCBlIC0gbik7XG4gICAgICAgIC8vIEd1YXJkIGFnYWluc3QgbGFzdEF0dGVtcHRUaW1lIGJlaW5nIGluIHRoZSBmdXR1cmUgZHVlIHRvIGEgY2xvY2sgY2hhbmdlLlxuICAgICAgICAgICAgICAgIHMgPiAwICYmICQoXCJFeHBvbmVudGlhbEJhY2tvZmZcIiwgYEJhY2tpbmcgb2ZmIGZvciAke3N9IG1zIChiYXNlIGRlbGF5OiAke3RoaXMuSGl9IG1zLCBkZWxheSB3aXRoIGppdHRlcjogJHtlfSBtcywgbGFzdCBhdHRlbXB0OiAke259IG1zIGFnbylgKSwgXG4gICAgICAgIHRoaXMuSmkgPSB0aGlzLk9lLmVucXVldWVBZnRlckRlbGF5KHRoaXMudGltZXJJZCwgcywgKCgpID0+ICh0aGlzLllpID0gRGF0ZS5ub3coKSwgXG4gICAgICAgIHQoKSkpKSwgXG4gICAgICAgIC8vIEFwcGx5IGJhY2tvZmYgZmFjdG9yIHRvIGRldGVybWluZSBuZXh0IGRlbGF5IGFuZCBlbnN1cmUgaXQgaXMgd2l0aGluXG4gICAgICAgIC8vIGJvdW5kcy5cbiAgICAgICAgdGhpcy5IaSAqPSB0aGlzLkdpLCB0aGlzLkhpIDwgdGhpcy5XaSAmJiAodGhpcy5IaSA9IHRoaXMuV2kpLCB0aGlzLkhpID4gdGhpcy56aSAmJiAodGhpcy5IaSA9IHRoaXMuemkpO1xuICAgIH1cbiAgICBlcigpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy5KaSAmJiAodGhpcy5KaS5za2lwRGVsYXkoKSwgdGhpcy5KaSA9IG51bGwpO1xuICAgIH1cbiAgICBjYW5jZWwoKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMuSmkgJiYgKHRoaXMuSmkuY2FuY2VsKCksIHRoaXMuSmkgPSBudWxsKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSByYW5kb20gdmFsdWUgaW4gdGhlIHJhbmdlIFstY3VycmVudEJhc2VNcy8yLCBjdXJyZW50QmFzZU1zLzJdICovICAgIHRyKCkge1xuICAgICAgICByZXR1cm4gKE1hdGgucmFuZG9tKCkgLSAuNSkgKiB0aGlzLkhpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBQZXJzaXN0ZW50U3RyZWFtIGlzIGFuIGFic3RyYWN0IGJhc2UgY2xhc3MgdGhhdCByZXByZXNlbnRzIGEgc3RyZWFtaW5nIFJQQ1xuICogdG8gdGhlIEZpcmVzdG9yZSBiYWNrZW5kLiBJdCdzIGJ1aWx0IG9uIHRvcCBvZiB0aGUgY29ubmVjdGlvbnMgb3duIHN1cHBvcnRcbiAqIGZvciBzdHJlYW1pbmcgUlBDcywgYW5kIGFkZHMgc2V2ZXJhbCBjcml0aWNhbCBmZWF0dXJlcyBmb3Igb3VyIGNsaWVudHM6XG4gKlxuICogICAtIEV4cG9uZW50aWFsIGJhY2tvZmYgb24gZmFpbHVyZVxuICogICAtIEF1dGhlbnRpY2F0aW9uIHZpYSBDcmVkZW50aWFsc1Byb3ZpZGVyXG4gKiAgIC0gRGlzcGF0Y2hpbmcgYWxsIGNhbGxiYWNrcyBpbnRvIHRoZSBzaGFyZWQgd29ya2VyIHF1ZXVlXG4gKiAgIC0gQ2xvc2luZyBpZGxlIHN0cmVhbXMgYWZ0ZXIgNjAgc2Vjb25kcyBvZiBpbmFjdGl2aXR5XG4gKlxuICogU3ViY2xhc3NlcyBvZiBQZXJzaXN0ZW50U3RyZWFtIGltcGxlbWVudCBzZXJpYWxpemF0aW9uIG9mIG1vZGVscyB0byBhbmRcbiAqIGZyb20gdGhlIEpTT04gcmVwcmVzZW50YXRpb24gb2YgdGhlIHByb3RvY29sIGJ1ZmZlcnMgZm9yIGEgc3BlY2lmaWNcbiAqIHN0cmVhbWluZyBSUEMuXG4gKlxuICogIyMgU3RhcnRpbmcgYW5kIFN0b3BwaW5nXG4gKlxuICogU3RyZWFtaW5nIFJQQ3MgYXJlIHN0YXRlZnVsIGFuZCBuZWVkIHRvIGJlIHN0YXJ0KCllZCBiZWZvcmUgbWVzc2FnZXMgY2FuXG4gKiBiZSBzZW50IGFuZCByZWNlaXZlZC4gVGhlIFBlcnNpc3RlbnRTdHJlYW0gd2lsbCBjYWxsIHRoZSBvbk9wZW4oKSBmdW5jdGlvblxuICogb2YgdGhlIGxpc3RlbmVyIG9uY2UgdGhlIHN0cmVhbSBpcyByZWFkeSB0byBhY2NlcHQgcmVxdWVzdHMuXG4gKlxuICogU2hvdWxkIGEgc3RhcnQoKSBmYWlsLCBQZXJzaXN0ZW50U3RyZWFtIHdpbGwgY2FsbCB0aGUgcmVnaXN0ZXJlZCBvbkNsb3NlKClcbiAqIGxpc3RlbmVyIHdpdGggYSBGaXJlc3RvcmVFcnJvciBpbmRpY2F0aW5nIHdoYXQgd2VudCB3cm9uZy5cbiAqXG4gKiBBIFBlcnNpc3RlbnRTdHJlYW0gY2FuIGJlIHN0YXJ0ZWQgYW5kIHN0b3BwZWQgcmVwZWF0ZWRseS5cbiAqXG4gKiBHZW5lcmljIHR5cGVzOlxuICogIFNlbmRUeXBlOiBUaGUgdHlwZSBvZiB0aGUgb3V0Z29pbmcgbWVzc2FnZSBvZiB0aGUgdW5kZXJseWluZ1xuICogICAgY29ubmVjdGlvbiBzdHJlYW1cbiAqICBSZWNlaXZlVHlwZTogVGhlIHR5cGUgb2YgdGhlIGluY29taW5nIG1lc3NhZ2Ugb2YgdGhlIHVuZGVybHlpbmdcbiAqICAgIGNvbm5lY3Rpb24gc3RyZWFtXG4gKiAgTGlzdGVuZXJUeXBlOiBUaGUgdHlwZSBvZiB0aGUgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIHVzZWQgZm9yIGNhbGxiYWNrc1xuICovXG5jbGFzcyBubyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgciwgbywgYSkge1xuICAgICAgICB0aGlzLk9lID0gdCwgdGhpcy5uciA9IG4sIHRoaXMuc3IgPSBzLCB0aGlzLmlyID0gaSwgdGhpcy5hdXRoQ3JlZGVudGlhbHNQcm92aWRlciA9IHIsIFxuICAgICAgICB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHNQcm92aWRlciA9IG8sIHRoaXMubGlzdGVuZXIgPSBhLCB0aGlzLnN0YXRlID0gMCAvKiBJbml0aWFsICovICwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGNsb3NlIGNvdW50IHRoYXQncyBpbmNyZW1lbnRlZCBldmVyeSB0aW1lIHRoZSBzdHJlYW0gaXMgY2xvc2VkOyB1c2VkIGJ5XG4gICAgICAgICAqIGdldENsb3NlR3VhcmRlZERpc3BhdGNoZXIoKSB0byBpbnZhbGlkYXRlIGNhbGxiYWNrcyB0aGF0IGhhcHBlbiBhZnRlclxuICAgICAgICAgKiBjbG9zZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucnIgPSAwLCB0aGlzLmFyID0gbnVsbCwgdGhpcy5jciA9IG51bGwsIHRoaXMuc3RyZWFtID0gbnVsbCwgdGhpcy51ciA9IG5ldyBlbyh0LCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHN0YXJ0KCkgaGFzIGJlZW4gY2FsbGVkIGFuZCBubyBlcnJvciBoYXMgb2NjdXJyZWQuIFRydWVcbiAgICAgKiBpbmRpY2F0ZXMgdGhlIHN0cmVhbSBpcyBvcGVuIG9yIGluIHRoZSBwcm9jZXNzIG9mIG9wZW5pbmcgKHdoaWNoXG4gICAgICogZW5jb21wYXNzZXMgcmVzcGVjdGluZyBiYWNrb2ZmLCBnZXR0aW5nIGF1dGggdG9rZW5zLCBhbmQgc3RhcnRpbmcgdGhlXG4gICAgICogYWN0dWFsIFJQQykuIFVzZSBpc09wZW4oKSB0byBkZXRlcm1pbmUgaWYgdGhlIHN0cmVhbSBpcyBvcGVuIGFuZCByZWFkeSBmb3JcbiAgICAgKiBvdXRib3VuZCByZXF1ZXN0cy5cbiAgICAgKi8gICAgaHIoKSB7XG4gICAgICAgIHJldHVybiAxIC8qIFN0YXJ0aW5nICovID09PSB0aGlzLnN0YXRlIHx8IDUgLyogQmFja29mZiAqLyA9PT0gdGhpcy5zdGF0ZSB8fCB0aGlzLmxyKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgdW5kZXJseWluZyBSUEMgaXMgb3BlbiAodGhlIG9uT3BlbigpIGxpc3RlbmVyIGhhcyBiZWVuXG4gICAgICogY2FsbGVkKSBhbmQgdGhlIHN0cmVhbSBpcyByZWFkeSBmb3Igb3V0Ym91bmQgcmVxdWVzdHMuXG4gICAgICovICAgIGxyKCkge1xuICAgICAgICByZXR1cm4gMiAvKiBPcGVuICovID09PSB0aGlzLnN0YXRlIHx8IDMgLyogSGVhbHRoeSAqLyA9PT0gdGhpcy5zdGF0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHRoZSBSUEMuIE9ubHkgYWxsb3dlZCBpZiBpc1N0YXJ0ZWQoKSByZXR1cm5zIGZhbHNlLiBUaGUgc3RyZWFtIGlzXG4gICAgICogbm90IGltbWVkaWF0ZWx5IHJlYWR5IGZvciB1c2U6IG9uT3BlbigpIHdpbGwgYmUgaW52b2tlZCB3aGVuIHRoZSBSUEMgaXNcbiAgICAgKiByZWFkeSBmb3Igb3V0Ym91bmQgcmVxdWVzdHMsIGF0IHdoaWNoIHBvaW50IGlzT3BlbigpIHdpbGwgcmV0dXJuIHRydWUuXG4gICAgICpcbiAgICAgKiBXaGVuIHN0YXJ0IHJldHVybnMsIGlzU3RhcnRlZCgpIHdpbGwgcmV0dXJuIHRydWUuXG4gICAgICovICAgIHN0YXJ0KCkge1xuICAgICAgICA0IC8qIEVycm9yICovICE9PSB0aGlzLnN0YXRlID8gdGhpcy5hdXRoKCkgOiB0aGlzLmRyKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0b3BzIHRoZSBSUEMuIFRoaXMgY2FsbCBpcyBpZGVtcG90ZW50IGFuZCBhbGxvd2VkIHJlZ2FyZGxlc3Mgb2YgdGhlXG4gICAgICogY3VycmVudCBpc1N0YXJ0ZWQoKSBzdGF0ZS5cbiAgICAgKlxuICAgICAqIFdoZW4gc3RvcCByZXR1cm5zLCBpc1N0YXJ0ZWQoKSBhbmQgaXNPcGVuKCkgd2lsbCBib3RoIHJldHVybiBmYWxzZS5cbiAgICAgKi8gICAgYXN5bmMgc3RvcCgpIHtcbiAgICAgICAgdGhpcy5ocigpICYmIGF3YWl0IHRoaXMuY2xvc2UoMCAvKiBJbml0aWFsICovKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWZ0ZXIgYW4gZXJyb3IgdGhlIHN0cmVhbSB3aWxsIHVzdWFsbHkgYmFjayBvZmYgb24gdGhlIG5leHQgYXR0ZW1wdCB0b1xuICAgICAqIHN0YXJ0IGl0LiBJZiB0aGUgZXJyb3Igd2FycmFudHMgYW4gaW1tZWRpYXRlIHJlc3RhcnQgb2YgdGhlIHN0cmVhbSwgdGhlXG4gICAgICogc2VuZGVyIGNhbiB1c2UgdGhpcyB0byBpbmRpY2F0ZSB0aGF0IHRoZSByZWNlaXZlciBzaG91bGQgbm90IGJhY2sgb2ZmLlxuICAgICAqXG4gICAgICogRWFjaCBlcnJvciB3aWxsIGNhbGwgdGhlIG9uQ2xvc2UoKSBsaXN0ZW5lci4gVGhhdCBmdW5jdGlvbiBjYW4gZGVjaWRlIHRvXG4gICAgICogaW5oaWJpdCBiYWNrb2ZmIGlmIHJlcXVpcmVkLlxuICAgICAqLyAgICB3cigpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IDAgLyogSW5pdGlhbCAqLyAsIHRoaXMudXIucmVzZXQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFya3MgdGhpcyBzdHJlYW0gYXMgaWRsZS4gSWYgbm8gZnVydGhlciBhY3Rpb25zIGFyZSBwZXJmb3JtZWQgb24gdGhlXG4gICAgICogc3RyZWFtIGZvciBvbmUgbWludXRlLCB0aGUgc3RyZWFtIHdpbGwgYXV0b21hdGljYWxseSBjbG9zZSBpdHNlbGYgYW5kXG4gICAgICogbm90aWZ5IHRoZSBzdHJlYW0ncyBvbkNsb3NlKCkgaGFuZGxlciB3aXRoIFN0YXR1cy5PSy4gVGhlIHN0cmVhbSB3aWxsIHRoZW5cbiAgICAgKiBiZSBpbiBhICFpc1N0YXJ0ZWQoKSBzdGF0ZSwgcmVxdWlyaW5nIHRoZSBjYWxsZXIgdG8gc3RhcnQgdGhlIHN0cmVhbSBhZ2FpblxuICAgICAqIGJlZm9yZSBmdXJ0aGVyIHVzZS5cbiAgICAgKlxuICAgICAqIE9ubHkgc3RyZWFtcyB0aGF0IGFyZSBpbiBzdGF0ZSAnT3BlbicgY2FuIGJlIG1hcmtlZCBpZGxlLCBhcyBhbGwgb3RoZXJcbiAgICAgKiBzdGF0ZXMgaW1wbHkgcGVuZGluZyBuZXR3b3JrIG9wZXJhdGlvbnMuXG4gICAgICovICAgIF9yKCkge1xuICAgICAgICAvLyBTdGFydHMgdGhlIGlkbGUgdGltZSBpZiB3ZSBhcmUgaW4gc3RhdGUgJ09wZW4nIGFuZCBhcmUgbm90IHlldCBhbHJlYWR5XG4gICAgICAgIC8vIHJ1bm5pbmcgYSB0aW1lciAoaW4gd2hpY2ggY2FzZSB0aGUgcHJldmlvdXMgaWRsZSB0aW1lb3V0IHN0aWxsIGFwcGxpZXMpLlxuICAgICAgICB0aGlzLmxyKCkgJiYgbnVsbCA9PT0gdGhpcy5hciAmJiAodGhpcy5hciA9IHRoaXMuT2UuZW5xdWV1ZUFmdGVyRGVsYXkodGhpcy5uciwgNmU0LCAoKCkgPT4gdGhpcy5tcigpKSkpO1xuICAgIH1cbiAgICAvKiogU2VuZHMgYSBtZXNzYWdlIHRvIHRoZSB1bmRlcmx5aW5nIHN0cmVhbS4gKi8gICAgZ3IodCkge1xuICAgICAgICB0aGlzLnlyKCksIHRoaXMuc3RyZWFtLnNlbmQodCk7XG4gICAgfVxuICAgIC8qKiBDYWxsZWQgYnkgdGhlIGlkbGUgdGltZXIgd2hlbiB0aGUgc3RyZWFtIHNob3VsZCBjbG9zZSBkdWUgdG8gaW5hY3Rpdml0eS4gKi8gICAgYXN5bmMgbXIoKSB7XG4gICAgICAgIGlmICh0aGlzLmxyKCkpIFxuICAgICAgICAvLyBXaGVuIHRpbWluZyBvdXQgYW4gaWRsZSBzdHJlYW0gdGhlcmUncyBubyByZWFzb24gdG8gZm9yY2UgdGhlIHN0cmVhbSBpbnRvIGJhY2tvZmYgd2hlblxuICAgICAgICAvLyBpdCByZXN0YXJ0cyBzbyBzZXQgdGhlIHN0cmVhbSBzdGF0ZSB0byBJbml0aWFsIGluc3RlYWQgb2YgRXJyb3IuXG4gICAgICAgIHJldHVybiB0aGlzLmNsb3NlKDAgLyogSW5pdGlhbCAqLyk7XG4gICAgfVxuICAgIC8qKiBNYXJrcyB0aGUgc3RyZWFtIGFzIGFjdGl2ZSBhZ2Fpbi4gKi8gICAgeXIoKSB7XG4gICAgICAgIHRoaXMuYXIgJiYgKHRoaXMuYXIuY2FuY2VsKCksIHRoaXMuYXIgPSBudWxsKTtcbiAgICB9XG4gICAgLyoqIENhbmNlbHMgdGhlIGhlYWx0aCBjaGVjayBkZWxheWVkIG9wZXJhdGlvbi4gKi8gICAgcHIoKSB7XG4gICAgICAgIHRoaXMuY3IgJiYgKHRoaXMuY3IuY2FuY2VsKCksIHRoaXMuY3IgPSBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvc2VzIHRoZSBzdHJlYW0gYW5kIGNsZWFucyB1cCBhcyBuZWNlc3Nhcnk6XG4gICAgICpcbiAgICAgKiAqIGNsb3NlcyB0aGUgdW5kZXJseWluZyBHUlBDIHN0cmVhbTtcbiAgICAgKiAqIGNhbGxzIHRoZSBvbkNsb3NlIGhhbmRsZXIgd2l0aCB0aGUgZ2l2ZW4gJ2Vycm9yJztcbiAgICAgKiAqIHNldHMgaW50ZXJuYWwgc3RyZWFtIHN0YXRlIHRvICdmaW5hbFN0YXRlJztcbiAgICAgKiAqIGFkanVzdHMgdGhlIGJhY2tvZmYgdGltZXIgYmFzZWQgb24gdGhlIGVycm9yXG4gICAgICpcbiAgICAgKiBBIG5ldyBzdHJlYW0gY2FuIGJlIG9wZW5lZCBieSBjYWxsaW5nIHN0YXJ0KCkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmluYWxTdGF0ZSAtIHRoZSBpbnRlbmRlZCBzdGF0ZSBvZiB0aGUgc3RyZWFtIGFmdGVyIGNsb3NpbmcuXG4gICAgICogQHBhcmFtIGVycm9yIC0gdGhlIGVycm9yIHRoZSBjb25uZWN0aW9uIHdhcyBjbG9zZWQgd2l0aC5cbiAgICAgKi8gICAgYXN5bmMgY2xvc2UodCwgZSkge1xuICAgICAgICAvLyBDYW5jZWwgYW55IG91dHN0YW5kaW5nIHRpbWVycyAodGhleSdyZSBndWFyYW50ZWVkIG5vdCB0byBleGVjdXRlKS5cbiAgICAgICAgdGhpcy55cigpLCB0aGlzLnByKCksIHRoaXMudXIuY2FuY2VsKCksIFxuICAgICAgICAvLyBJbnZhbGlkYXRlcyBhbnkgc3RyZWFtLXJlbGF0ZWQgY2FsbGJhY2tzIChlLmcuIGZyb20gYXV0aCBvciB0aGVcbiAgICAgICAgLy8gdW5kZXJseWluZyBzdHJlYW0pLCBndWFyYW50ZWVpbmcgdGhleSB3b24ndCBleGVjdXRlLlxuICAgICAgICB0aGlzLnJyKyssIDQgLyogRXJyb3IgKi8gIT09IHQgPyBcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBhbiBpbnRlbnRpb25hbCBjbG9zZSBlbnN1cmUgd2UgZG9uJ3QgZGVsYXkgb3VyIG5leHQgY29ubmVjdGlvbiBhdHRlbXB0LlxuICAgICAgICB0aGlzLnVyLnJlc2V0KCkgOiBlICYmIGUuY29kZSA9PT0gSy5SRVNPVVJDRV9FWEhBVVNURUQgPyAoXG4gICAgICAgIC8vIExvZyB0aGUgZXJyb3IuIChQcm9iYWJseSBlaXRoZXIgJ3F1b3RhIGV4Y2VlZGVkJyBvciAnbWF4IHF1ZXVlIGxlbmd0aCByZWFjaGVkJy4pXG4gICAgICAgIEYoZS50b1N0cmluZygpKSwgRihcIlVzaW5nIG1heGltdW0gYmFja29mZiBkZWxheSB0byBwcmV2ZW50IG92ZXJsb2FkaW5nIHRoZSBiYWNrZW5kLlwiKSwgXG4gICAgICAgIHRoaXMudXIuWGkoKSkgOiBlICYmIGUuY29kZSA9PT0gSy5VTkFVVEhFTlRJQ0FURUQgJiYgMyAvKiBIZWFsdGh5ICovICE9PSB0aGlzLnN0YXRlICYmIChcbiAgICAgICAgLy8gXCJ1bmF1dGhlbnRpY2F0ZWRcIiBlcnJvciBtZWFucyB0aGUgdG9rZW4gd2FzIHJlamVjdGVkLiBUaGlzIHNob3VsZCByYXJlbHlcbiAgICAgICAgLy8gaGFwcGVuIHNpbmNlIGJvdGggQXV0aCBhbmQgQXBwQ2hlY2sgZW5zdXJlIGEgc3VmZmljaWVudCBUVEwgd2hlbiB3ZVxuICAgICAgICAvLyByZXF1ZXN0IGEgdG9rZW4uIElmIGEgdXNlciBtYW51YWxseSByZXNldHMgdGhlaXIgc3lzdGVtIGNsb2NrIHRoaXMgY2FuXG4gICAgICAgIC8vIGZhaWwsIGhvd2V2ZXIuIEluIHRoaXMgY2FzZSwgd2Ugc2hvdWxkIGdldCBhIENvZGUuVU5BVVRIRU5USUNBVEVEIGVycm9yXG4gICAgICAgIC8vIGJlZm9yZSB3ZSByZWNlaXZlZCB0aGUgZmlyc3QgbWVzc2FnZSBhbmQgd2UgbmVlZCB0byBpbnZhbGlkYXRlIHRoZSB0b2tlblxuICAgICAgICAvLyB0byBlbnN1cmUgdGhhdCB3ZSBmZXRjaCBhIG5ldyB0b2tlbi5cbiAgICAgICAgdGhpcy5hdXRoQ3JlZGVudGlhbHNQcm92aWRlci5pbnZhbGlkYXRlVG9rZW4oKSwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzUHJvdmlkZXIuaW52YWxpZGF0ZVRva2VuKCkpLCBcbiAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIHVuZGVybHlpbmcgc3RyZWFtIGJlY2F1c2Ugd2UgYXJlIG5vIGxvbmdlciBpbnRlcmVzdGVkIGluIGV2ZW50cy5cbiAgICAgICAgbnVsbCAhPT0gdGhpcy5zdHJlYW0gJiYgKHRoaXMuVHIoKSwgdGhpcy5zdHJlYW0uY2xvc2UoKSwgdGhpcy5zdHJlYW0gPSBudWxsKSwgXG4gICAgICAgIC8vIFRoaXMgc3RhdGUgbXVzdCBiZSBhc3NpZ25lZCBiZWZvcmUgY2FsbGluZyBvbkNsb3NlKCkgdG8gYWxsb3cgdGhlIGNhbGxiYWNrIHRvXG4gICAgICAgIC8vIGluaGliaXQgYmFja29mZiBvciBvdGhlcndpc2UgbWFuaXB1bGF0ZSB0aGUgc3RhdGUgaW4gaXRzIG5vbi1zdGFydGVkIHN0YXRlLlxuICAgICAgICB0aGlzLnN0YXRlID0gdCwgXG4gICAgICAgIC8vIE5vdGlmeSB0aGUgbGlzdGVuZXIgdGhhdCB0aGUgc3RyZWFtIGNsb3NlZC5cbiAgICAgICAgYXdhaXQgdGhpcy5saXN0ZW5lci5OaShlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FuIGJlIG92ZXJyaWRkZW4gdG8gcGVyZm9ybSBhZGRpdGlvbmFsIGNsZWFudXAgYmVmb3JlIHRoZSBzdHJlYW0gaXMgY2xvc2VkLlxuICAgICAqIENhbGxpbmcgc3VwZXIudGVhckRvd24oKSBpcyBub3QgcmVxdWlyZWQuXG4gICAgICovICAgIFRyKCkge31cbiAgICBhdXRoKCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gMSAvKiBTdGFydGluZyAqLztcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuRXIodGhpcy5yciksIGUgPSB0aGlzLnJyO1xuICAgICAgICAvLyBUT0RPKG1pa2VsZWhlbik6IEp1c3QgdXNlIGRpc3BhdGNoSWZOb3RDbG9zZWQsIGJ1dCBzZWUgVE9ETyBiZWxvdy5cbiAgICAgICAgICAgICAgICBQcm9taXNlLmFsbChbIHRoaXMuYXV0aENyZWRlbnRpYWxzUHJvdmlkZXIuZ2V0VG9rZW4oKSwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzUHJvdmlkZXIuZ2V0VG9rZW4oKSBdKS50aGVuKCgoW3QsIG5dKSA9PiB7XG4gICAgICAgICAgICAvLyBTdHJlYW0gY2FuIGJlIHN0b3BwZWQgd2hpbGUgd2FpdGluZyBmb3IgYXV0aGVudGljYXRpb24uXG4gICAgICAgICAgICAvLyBUT0RPKG1pa2VsZWhlbik6IFdlIHJlYWxseSBzaG91bGQganVzdCB1c2UgZGlzcGF0Y2hJZk5vdENsb3NlZFxuICAgICAgICAgICAgLy8gYW5kIGxldCB0aGlzIGRpc3BhdGNoIG9udG8gdGhlIHF1ZXVlLCBidXQgdGhhdCBvcGVuZWQgYSBzcGVjIHRlc3QgY2FuXG4gICAgICAgICAgICAvLyBvZiB3b3JtcyB0aGF0IEkgZG9uJ3Qgd2FudCB0byBkZWFsIHdpdGggaW4gdGhpcyBQUi5cbiAgICAgICAgICAgIHRoaXMucnIgPT09IGUgJiYgXG4gICAgICAgICAgICAvLyBOb3JtYWxseSB3ZSdkIGhhdmUgdG8gc2NoZWR1bGUgdGhlIGNhbGxiYWNrIG9uIHRoZSBBc3luY1F1ZXVlLlxuICAgICAgICAgICAgLy8gSG93ZXZlciwgdGhlIGZvbGxvd2luZyBjYWxscyBhcmUgc2FmZSB0byBiZSBjYWxsZWQgb3V0c2lkZSB0aGVcbiAgICAgICAgICAgIC8vIEFzeW5jUXVldWUgc2luY2UgdGhleSBkb24ndCBjaGFpbiBhc3luY2hyb25vdXMgY2FsbHNcbiAgICAgICAgICAgIHRoaXMuSXIodCwgbik7XG4gICAgICAgIH0pLCAoZSA9PiB7XG4gICAgICAgICAgICB0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBqKEsuVU5LTk9XTiwgXCJGZXRjaGluZyBhdXRoIHRva2VuIGZhaWxlZDogXCIgKyBlLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLkFyKHQpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIElyKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuRXIodGhpcy5ycik7XG4gICAgICAgIHRoaXMuc3RyZWFtID0gdGhpcy5Scih0LCBlKSwgdGhpcy5zdHJlYW0uRGkoKCgpID0+IHtcbiAgICAgICAgICAgIG4oKCgpID0+ICh0aGlzLnN0YXRlID0gMiAvKiBPcGVuICovICwgdGhpcy5jciA9IHRoaXMuT2UuZW5xdWV1ZUFmdGVyRGVsYXkodGhpcy5zciwgMWU0LCAoKCkgPT4gKHRoaXMubHIoKSAmJiAodGhpcy5zdGF0ZSA9IDMgLyogSGVhbHRoeSAqLyksIFxuICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkpKSksIHRoaXMubGlzdGVuZXIuRGkoKSkpKTtcbiAgICAgICAgfSkpLCB0aGlzLnN0cmVhbS5OaSgodCA9PiB7XG4gICAgICAgICAgICBuKCgoKSA9PiB0aGlzLkFyKHQpKSk7XG4gICAgICAgIH0pKSwgdGhpcy5zdHJlYW0ub25NZXNzYWdlKCh0ID0+IHtcbiAgICAgICAgICAgIG4oKCgpID0+IHRoaXMub25NZXNzYWdlKHQpKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZHIoKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSA1IC8qIEJhY2tvZmYgKi8gLCB0aGlzLnVyLlppKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gMCAvKiBJbml0aWFsICovICwgdGhpcy5zdGFydCgpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8vIFZpc2libGUgZm9yIHRlc3RzXG4gICAgQXIodCkge1xuICAgICAgICAvLyBJbiB0aGVvcnkgdGhlIHN0cmVhbSBjb3VsZCBjbG9zZSBjbGVhbmx5LCBob3dldmVyLCBpbiBvdXIgY3VycmVudCBtb2RlbFxuICAgICAgICAvLyB3ZSBuZXZlciBleHBlY3QgdGhpcyB0byBoYXBwZW4gYmVjYXVzZSBpZiB3ZSBzdG9wIGEgc3RyZWFtIG91cnNlbHZlcyxcbiAgICAgICAgLy8gdGhpcyBjYWxsYmFjayB3aWxsIG5ldmVyIGJlIGNhbGxlZC4gVG8gcHJldmVudCBjYXNlcyB3aGVyZSB3ZSByZXRyeVxuICAgICAgICAvLyB3aXRob3V0IGEgYmFja29mZiBhY2NpZGVudGFsbHksIHdlIHNldCB0aGUgc3RyZWFtIHRvIGVycm9yIGluIGFsbCBjYXNlcy5cbiAgICAgICAgcmV0dXJuICQoXCJQZXJzaXN0ZW50U3RyZWFtXCIsIGBjbG9zZSB3aXRoIGVycm9yOiAke3R9YCksIHRoaXMuc3RyZWFtID0gbnVsbCwgdGhpcy5jbG9zZSg0IC8qIEVycm9yICovICwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBcImRpc3BhdGNoZXJcIiBmdW5jdGlvbiB0aGF0IGRpc3BhdGNoZXMgb3BlcmF0aW9ucyBvbnRvIHRoZVxuICAgICAqIEFzeW5jUXVldWUgYnV0IG9ubHkgcnVucyB0aGVtIGlmIGNsb3NlQ291bnQgcmVtYWlucyB1bmNoYW5nZWQuIFRoaXMgYWxsb3dzXG4gICAgICogdXMgdG8gdHVybiBhdXRoIC8gc3RyZWFtIGNhbGxiYWNrcyBpbnRvIG5vLW9wcyBpZiB0aGUgc3RyZWFtIGlzIGNsb3NlZCAvXG4gICAgICogcmUtb3BlbmVkLCBldGMuXG4gICAgICovICAgIEVyKHQpIHtcbiAgICAgICAgcmV0dXJuIGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5PZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiB0aGlzLnJyID09PSB0ID8gZSgpIDogKCQoXCJQZXJzaXN0ZW50U3RyZWFtXCIsIFwic3RyZWFtIGNhbGxiYWNrIHNraXBwZWQgYnkgZ2V0Q2xvc2VHdWFyZGVkRGlzcGF0Y2hlci5cIiksIFxuICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkpKSk7XG4gICAgICAgIH07XG4gICAgfVxufVxuXG4vKipcbiAqIEEgUGVyc2lzdGVudFN0cmVhbSB0aGF0IGltcGxlbWVudHMgdGhlIExpc3RlbiBSUEMuXG4gKlxuICogT25jZSB0aGUgTGlzdGVuIHN0cmVhbSBoYXMgY2FsbGVkIHRoZSBvbk9wZW4oKSBsaXN0ZW5lciwgYW55IG51bWJlciBvZlxuICogbGlzdGVuKCkgYW5kIHVubGlzdGVuKCkgY2FsbHMgY2FuIGJlIG1hZGUgdG8gY29udHJvbCB3aGF0IGNoYW5nZXMgd2lsbCBiZVxuICogc2VudCBmcm9tIHRoZSBzZXJ2ZXIgZm9yIExpc3RlblJlc3BvbnNlcy5cbiAqLyBjbGFzcyBzbyBleHRlbmRzIG5vIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByKSB7XG4gICAgICAgIHN1cGVyKHQsIFwibGlzdGVuX3N0cmVhbV9jb25uZWN0aW9uX2JhY2tvZmZcIiAvKiBMaXN0ZW5TdHJlYW1Db25uZWN0aW9uQmFja29mZiAqLyAsIFwibGlzdGVuX3N0cmVhbV9pZGxlXCIgLyogTGlzdGVuU3RyZWFtSWRsZSAqLyAsIFwiaGVhbHRoX2NoZWNrX3RpbWVvdXRcIiAvKiBIZWFsdGhDaGVja1RpbWVvdXQgKi8gLCBlLCBuLCBzLCByKSwgXG4gICAgICAgIHRoaXMuayA9IGk7XG4gICAgfVxuICAgIFJyKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXIuUWkoXCJMaXN0ZW5cIiwgdCwgZSk7XG4gICAgfVxuICAgIG9uTWVzc2FnZSh0KSB7XG4gICAgICAgIC8vIEEgc3VjY2Vzc2Z1bCByZXNwb25zZSBtZWFucyB0aGUgc3RyZWFtIGlzIGhlYWx0aHlcbiAgICAgICAgdGhpcy51ci5yZXNldCgpO1xuICAgICAgICBjb25zdCBlID0gcnModGhpcy5rLCB0KSwgbiA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIC8vIFdlIGhhdmUgb25seSByZWFjaGVkIGEgY29uc2lzdGVudCBzbmFwc2hvdCBmb3IgdGhlIGVudGlyZSBzdHJlYW0gaWYgdGhlcmVcbiAgICAgICAgICAgIC8vIGlzIGEgcmVhZF90aW1lIHNldCBhbmQgaXQgYXBwbGllcyB0byBhbGwgdGFyZ2V0cyAoaS5lLiB0aGUgbGlzdCBvZlxuICAgICAgICAgICAgLy8gdGFyZ2V0cyBpcyBlbXB0eSkuIFRoZSBiYWNrZW5kIGlzIGd1YXJhbnRlZWQgdG8gc2VuZCBzdWNoIHJlc3BvbnNlcy5cbiAgICAgICAgICAgIGlmICghKFwidGFyZ2V0Q2hhbmdlXCIgaW4gdCkpIHJldHVybiBjdC5taW4oKTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LnRhcmdldENoYW5nZTtcbiAgICAgICAgICAgIHJldHVybiBlLnRhcmdldElkcyAmJiBlLnRhcmdldElkcy5sZW5ndGggPyBjdC5taW4oKSA6IGUucmVhZFRpbWUgPyBHbihlLnJlYWRUaW1lKSA6IGN0Lm1pbigpO1xuICAgICAgICB9KHQpO1xuICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5QcihlLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGludGVyZXN0IGluIHRoZSByZXN1bHRzIG9mIHRoZSBnaXZlbiB0YXJnZXQuIElmIHRoZSB0YXJnZXRcbiAgICAgKiBpbmNsdWRlcyBhIHJlc3VtZVRva2VuIGl0IHdpbGwgYmUgaW5jbHVkZWQgaW4gdGhlIHJlcXVlc3QuIFJlc3VsdHMgdGhhdFxuICAgICAqIGFmZmVjdCB0aGUgdGFyZ2V0IHdpbGwgYmUgc3RyZWFtZWQgYmFjayBhcyBXYXRjaENoYW5nZSBtZXNzYWdlcyB0aGF0XG4gICAgICogcmVmZXJlbmNlIHRoZSB0YXJnZXRJZC5cbiAgICAgKi8gICAgYnIodCkge1xuICAgICAgICBjb25zdCBlID0ge307XG4gICAgICAgIGUuZGF0YWJhc2UgPSB0cyh0aGlzLmspLCBlLmFkZFRhcmdldCA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGxldCBuO1xuICAgICAgICAgICAgY29uc3QgcyA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgcmV0dXJuIG4gPSBYdChzKSA/IHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudHM6IHVzKHQsIHMpXG4gICAgICAgICAgICB9IDoge1xuICAgICAgICAgICAgICAgIHF1ZXJ5OiBocyh0LCBzKVxuICAgICAgICAgICAgfSwgbi50YXJnZXRJZCA9IGUudGFyZ2V0SWQsIGUucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCA/IG4ucmVzdW1lVG9rZW4gPSBRbih0LCBlLnJlc3VtZVRva2VuKSA6IGUuc25hcHNob3RWZXJzaW9uLmNvbXBhcmVUbyhjdC5taW4oKSkgPiAwICYmIChcbiAgICAgICAgICAgIC8vIFRPRE8od3VhbmR5KTogQ29uc2lkZXIgcmVtb3ZpbmcgYWJvdmUgY2hlY2sgYmVjYXVzZSBpdCBpcyBtb3N0IGxpa2VseSB0cnVlLlxuICAgICAgICAgICAgLy8gUmlnaHQgbm93LCBtYW55IHRlc3RzIGRlcGVuZCBvbiB0aGlzIGJlaGF2aW91ciB0aG91Z2ggKGxlYXZpbmcgbWluKCkgb3V0XG4gICAgICAgICAgICAvLyBvZiBzZXJpYWxpemF0aW9uKS5cbiAgICAgICAgICAgIG4ucmVhZFRpbWUgPSBqbih0LCBlLnNuYXBzaG90VmVyc2lvbi50b1RpbWVzdGFtcCgpKSksIG47XG4gICAgICAgIH0odGhpcy5rLCB0KTtcbiAgICAgICAgY29uc3QgbiA9IGZzKHRoaXMuaywgdCk7XG4gICAgICAgIG4gJiYgKGUubGFiZWxzID0gbiksIHRoaXMuZ3IoZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVucmVnaXN0ZXJzIGludGVyZXN0IGluIHRoZSByZXN1bHRzIG9mIHRoZSB0YXJnZXQgYXNzb2NpYXRlZCB3aXRoIHRoZVxuICAgICAqIGdpdmVuIHRhcmdldElkLlxuICAgICAqLyAgICB2cih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB7fTtcbiAgICAgICAgZS5kYXRhYmFzZSA9IHRzKHRoaXMuayksIGUucmVtb3ZlVGFyZ2V0ID0gdCwgdGhpcy5ncihlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBTdHJlYW0gdGhhdCBpbXBsZW1lbnRzIHRoZSBXcml0ZSBSUEMuXG4gKlxuICogVGhlIFdyaXRlIFJQQyByZXF1aXJlcyB0aGUgY2FsbGVyIHRvIG1haW50YWluIHNwZWNpYWwgc3RyZWFtVG9rZW5cbiAqIHN0YXRlIGluIGJldHdlZW4gY2FsbHMsIHRvIGhlbHAgdGhlIHNlcnZlciB1bmRlcnN0YW5kIHdoaWNoIHJlc3BvbnNlcyB0aGVcbiAqIGNsaWVudCBoYXMgcHJvY2Vzc2VkIGJ5IHRoZSB0aW1lIHRoZSBuZXh0IHJlcXVlc3QgaXMgbWFkZS4gRXZlcnkgcmVzcG9uc2VcbiAqIHdpbGwgY29udGFpbiBhIHN0cmVhbVRva2VuOyB0aGlzIHZhbHVlIG11c3QgYmUgcGFzc2VkIHRvIHRoZSBuZXh0XG4gKiByZXF1ZXN0LlxuICpcbiAqIEFmdGVyIGNhbGxpbmcgc3RhcnQoKSBvbiB0aGlzIHN0cmVhbSwgdGhlIG5leHQgcmVxdWVzdCBtdXN0IGJlIGEgaGFuZHNoYWtlLFxuICogY29udGFpbmluZyB3aGF0ZXZlciBzdHJlYW1Ub2tlbiBpcyBvbiBoYW5kLiBPbmNlIGEgcmVzcG9uc2UgdG8gdGhpc1xuICogcmVxdWVzdCBpcyByZWNlaXZlZCwgYWxsIHBlbmRpbmcgbXV0YXRpb25zIG1heSBiZSBzdWJtaXR0ZWQuIFdoZW5cbiAqIHN1Ym1pdHRpbmcgbXVsdGlwbGUgYmF0Y2hlcyBvZiBtdXRhdGlvbnMgYXQgdGhlIHNhbWUgdGltZSwgaXQnc1xuICogb2theSB0byB1c2UgdGhlIHNhbWUgc3RyZWFtVG9rZW4gZm9yIHRoZSBjYWxscyB0byB3cml0ZU11dGF0aW9ucy5cbiAqXG4gKiBUT0RPKGIvMzMyNzEyMzUpOiBVc2UgcHJvdG8gdHlwZXNcbiAqLyBjbGFzcyBpbyBleHRlbmRzIG5vIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByKSB7XG4gICAgICAgIHN1cGVyKHQsIFwid3JpdGVfc3RyZWFtX2Nvbm5lY3Rpb25fYmFja29mZlwiIC8qIFdyaXRlU3RyZWFtQ29ubmVjdGlvbkJhY2tvZmYgKi8gLCBcIndyaXRlX3N0cmVhbV9pZGxlXCIgLyogV3JpdGVTdHJlYW1JZGxlICovICwgXCJoZWFsdGhfY2hlY2tfdGltZW91dFwiIC8qIEhlYWx0aENoZWNrVGltZW91dCAqLyAsIGUsIG4sIHMsIHIpLCBcbiAgICAgICAgdGhpcy5rID0gaSwgdGhpcy5WciA9ICExO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFja3Mgd2hldGhlciBvciBub3QgYSBoYW5kc2hha2UgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IGV4Y2hhbmdlZCBhbmRcbiAgICAgKiB0aGUgc3RyZWFtIGlzIHJlYWR5IHRvIGFjY2VwdCBtdXRhdGlvbnMuXG4gICAgICovICAgIGdldCBTcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuVnI7XG4gICAgfVxuICAgIC8vIE92ZXJyaWRlIG9mIFBlcnNpc3RlbnRTdHJlYW0uc3RhcnRcbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5WciA9ICExLCB0aGlzLmxhc3RTdHJlYW1Ub2tlbiA9IHZvaWQgMCwgc3VwZXIuc3RhcnQoKTtcbiAgICB9XG4gICAgVHIoKSB7XG4gICAgICAgIHRoaXMuVnIgJiYgdGhpcy5EcihbXSk7XG4gICAgfVxuICAgIFJyKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXIuUWkoXCJXcml0ZVwiLCB0LCBlKTtcbiAgICB9XG4gICAgb25NZXNzYWdlKHQpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAvLyBBbHdheXMgY2FwdHVyZSB0aGUgbGFzdCBzdHJlYW0gdG9rZW4uXG4gICAgICAgIEIoISF0LnN0cmVhbVRva2VuKSwgdGhpcy5sYXN0U3RyZWFtVG9rZW4gPSB0LnN0cmVhbVRva2VuLCB0aGlzLlZyKSB7XG4gICAgICAgICAgICAvLyBBIHN1Y2Nlc3NmdWwgZmlyc3Qgd3JpdGUgcmVzcG9uc2UgbWVhbnMgdGhlIHN0cmVhbSBpcyBoZWFsdGh5LFxuICAgICAgICAgICAgLy8gTm90ZSwgdGhhdCB3ZSBjb3VsZCBjb25zaWRlciBhIHN1Y2Nlc3NmdWwgaGFuZHNoYWtlIGhlYWx0aHksIGhvd2V2ZXIsXG4gICAgICAgICAgICAvLyB0aGUgd3JpdGUgaXRzZWxmIG1pZ2h0IGJlIGNhdXNpbmcgYW4gZXJyb3Igd2Ugd2FudCB0byBiYWNrIG9mZiBmcm9tLlxuICAgICAgICAgICAgdGhpcy51ci5yZXNldCgpO1xuICAgICAgICAgICAgY29uc3QgZSA9IGNzKHQud3JpdGVSZXN1bHRzLCB0LmNvbW1pdFRpbWUpLCBuID0gR24odC5jb21taXRUaW1lKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLkNyKG4sIGUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSBmaXJzdCByZXNwb25zZSBpcyBhbHdheXMgdGhlIGhhbmRzaGFrZSByZXNwb25zZVxuICAgICAgICByZXR1cm4gQighdC53cml0ZVJlc3VsdHMgfHwgMCA9PT0gdC53cml0ZVJlc3VsdHMubGVuZ3RoKSwgdGhpcy5WciA9ICEwLCB0aGlzLmxpc3RlbmVyLk5yKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmRzIGFuIGluaXRpYWwgc3RyZWFtVG9rZW4gdG8gdGhlIHNlcnZlciwgcGVyZm9ybWluZyB0aGUgaGFuZHNoYWtlXG4gICAgICogcmVxdWlyZWQgdG8gbWFrZSB0aGUgU3RyZWFtaW5nV3JpdGUgUlBDIHdvcmsuIFN1YnNlcXVlbnRcbiAgICAgKiBjYWxscyBzaG91bGQgd2FpdCB1bnRpbCBvbkhhbmRzaGFrZUNvbXBsZXRlIHdhcyBjYWxsZWQuXG4gICAgICovICAgIGtyKCkge1xuICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IFN1cHBvcnQgc3RyZWFtIHJlc3VtcHRpb24uIFdlIGludGVudGlvbmFsbHkgZG8gbm90IHNldCB0aGVcbiAgICAgICAgLy8gc3RyZWFtIHRva2VuIG9uIHRoZSBoYW5kc2hha2UsIGlnbm9yaW5nIGFueSBzdHJlYW0gdG9rZW4gd2UgbWlnaHQgaGF2ZS5cbiAgICAgICAgY29uc3QgdCA9IHt9O1xuICAgICAgICB0LmRhdGFiYXNlID0gdHModGhpcy5rKSwgdGhpcy5ncih0KTtcbiAgICB9XG4gICAgLyoqIFNlbmRzIGEgZ3JvdXAgb2YgbXV0YXRpb25zIHRvIHRoZSBGaXJlc3RvcmUgYmFja2VuZCB0byBhcHBseS4gKi8gICAgRHIodCkge1xuICAgICAgICBjb25zdCBlID0ge1xuICAgICAgICAgICAgc3RyZWFtVG9rZW46IHRoaXMubGFzdFN0cmVhbVRva2VuLFxuICAgICAgICAgICAgd3JpdGVzOiB0Lm1hcCgodCA9PiBvcyh0aGlzLmssIHQpKSlcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5ncihlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIERhdGFzdG9yZSBhbmQgaXRzIHJlbGF0ZWQgbWV0aG9kcyBhcmUgYSB3cmFwcGVyIGFyb3VuZCB0aGUgZXh0ZXJuYWwgR29vZ2xlXG4gKiBDbG91ZCBEYXRhc3RvcmUgZ3JwYyBBUEksIHdoaWNoIHByb3ZpZGVzIGFuIGludGVyZmFjZSB0aGF0IGlzIG1vcmUgY29udmVuaWVudFxuICogZm9yIHRoZSByZXN0IG9mIHRoZSBjbGllbnQgU0RLIGFyY2hpdGVjdHVyZSB0byBjb25zdW1lLlxuICovXG4vKipcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIERhdGFzdG9yZSB0aGF0IGV4cG9zZXMgYWRkaXRpb25hbCBzdGF0ZSBmb3IgaW50ZXJuYWxcbiAqIGNvbnN1bXB0aW9uLlxuICovXG5jbGFzcyBybyBleHRlbmRzIGNsYXNzIHt9IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuYXV0aENyZWRlbnRpYWxzID0gdCwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzID0gZSwgdGhpcy5pciA9IG4sIHRoaXMuayA9IHMsIFxuICAgICAgICB0aGlzLiRyID0gITE7XG4gICAgfVxuICAgIEZyKCkge1xuICAgICAgICBpZiAodGhpcy4kcikgdGhyb3cgbmV3IGooSy5GQUlMRURfUFJFQ09ORElUSU9OLCBcIlRoZSBjbGllbnQgaGFzIGFscmVhZHkgYmVlbiB0ZXJtaW5hdGVkLlwiKTtcbiAgICB9XG4gICAgLyoqIEludm9rZXMgdGhlIHByb3ZpZGVkIFJQQyB3aXRoIGF1dGggYW5kIEFwcENoZWNrIHRva2Vucy4gKi8gICAgQmkodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5GcigpLCBQcm9taXNlLmFsbChbIHRoaXMuYXV0aENyZWRlbnRpYWxzLmdldFRva2VuKCksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5nZXRUb2tlbigpIF0pLnRoZW4oKChbcywgaV0pID0+IHRoaXMuaXIuQmkodCwgZSwgbiwgcywgaSkpKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICB0aHJvdyBcIkZpcmViYXNlRXJyb3JcIiA9PT0gdC5uYW1lID8gKHQuY29kZSA9PT0gSy5VTkFVVEhFTlRJQ0FURUQgJiYgKHRoaXMuYXV0aENyZWRlbnRpYWxzLmludmFsaWRhdGVUb2tlbigpLCBcbiAgICAgICAgICAgIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5pbnZhbGlkYXRlVG9rZW4oKSksIHQpIDogbmV3IGooSy5VTktOT1dOLCB0LnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKiBJbnZva2VzIHRoZSBwcm92aWRlZCBSUEMgd2l0aCBzdHJlYW1lZCByZXN1bHRzIHdpdGggYXV0aCBhbmQgQXBwQ2hlY2sgdG9rZW5zLiAqLyAgICBqaSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkZyKCksIFByb21pc2UuYWxsKFsgdGhpcy5hdXRoQ3JlZGVudGlhbHMuZ2V0VG9rZW4oKSwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzLmdldFRva2VuKCkgXSkudGhlbigoKFtzLCBpXSkgPT4gdGhpcy5pci5qaSh0LCBlLCBuLCBzLCBpKSkpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRocm93IFwiRmlyZWJhc2VFcnJvclwiID09PSB0Lm5hbWUgPyAodC5jb2RlID09PSBLLlVOQVVUSEVOVElDQVRFRCAmJiAodGhpcy5hdXRoQ3JlZGVudGlhbHMuaW52YWxpZGF0ZVRva2VuKCksIFxuICAgICAgICAgICAgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzLmludmFsaWRhdGVUb2tlbigpKSwgdCkgOiBuZXcgaihLLlVOS05PV04sIHQudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdGVybWluYXRlKCkge1xuICAgICAgICB0aGlzLiRyID0gITA7XG4gICAgfVxufVxuXG4vLyBUT0RPKGZpcmVzdG9yZXhwKTogTWFrZSBzdXJlIHRoZXJlIGlzIG9ubHkgb25lIERhdGFzdG9yZSBpbnN0YW5jZSBwZXJcbi8vIGZpcmVzdG9yZS1leHAgY2xpZW50LlxuLyoqXG4gKiBBIGNvbXBvbmVudCB1c2VkIGJ5IHRoZSBSZW1vdGVTdG9yZSB0byB0cmFjayB0aGUgT25saW5lU3RhdGUgKHRoYXQgaXMsXG4gKiB3aGV0aGVyIG9yIG5vdCB0aGUgY2xpZW50IGFzIGEgd2hvbGUgc2hvdWxkIGJlIGNvbnNpZGVyZWQgdG8gYmUgb25saW5lIG9yXG4gKiBvZmZsaW5lKSwgaW1wbGVtZW50aW5nIHRoZSBhcHByb3ByaWF0ZSBoZXVyaXN0aWNzLlxuICpcbiAqIEluIHBhcnRpY3VsYXIsIHdoZW4gdGhlIGNsaWVudCBpcyB0cnlpbmcgdG8gY29ubmVjdCB0byB0aGUgYmFja2VuZCwgd2VcbiAqIGFsbG93IHVwIHRvIE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMgd2l0aGluIE9OTElORV9TVEFURV9USU1FT1VUX01TIGZvclxuICogYSBjb25uZWN0aW9uIHRvIHN1Y2NlZWQuIElmIHdlIGhhdmUgdG9vIG1hbnkgZmFpbHVyZXMgb3IgdGhlIHRpbWVvdXQgZWxhcHNlcyxcbiAqIHRoZW4gd2Ugc2V0IHRoZSBPbmxpbmVTdGF0ZSB0byBPZmZsaW5lLCBhbmQgdGhlIGNsaWVudCB3aWxsIGJlaGF2ZSBhcyBpZlxuICogaXQgaXMgb2ZmbGluZSAoZ2V0KClzIHdpbGwgcmV0dXJuIGNhY2hlZCBkYXRhLCBldGMuKS5cbiAqL1xuY2xhc3Mgb28ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlID0gdCwgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIgPSBlLCBcbiAgICAgICAgLyoqIFRoZSBjdXJyZW50IE9ubGluZVN0YXRlLiAqL1xuICAgICAgICB0aGlzLnN0YXRlID0gXCJVbmtub3duXCIgLyogVW5rbm93biAqLyAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBjb3VudCBvZiBjb25zZWN1dGl2ZSBmYWlsdXJlcyB0byBvcGVuIHRoZSBzdHJlYW0uIElmIGl0IHJlYWNoZXMgdGhlXG4gICAgICAgICAqIG1heGltdW0gZGVmaW5lZCBieSBNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTLCB3ZSdsbCBzZXQgdGhlIE9ubGluZVN0YXRlIHRvXG4gICAgICAgICAqIE9mZmxpbmUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLk9yID0gMCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHRpbWVyIHRoYXQgZWxhcHNlcyBhZnRlciBPTkxJTkVfU1RBVEVfVElNRU9VVF9NUywgYXQgd2hpY2ggcG9pbnQgd2VcbiAgICAgICAgICogdHJhbnNpdGlvbiBmcm9tIE9ubGluZVN0YXRlLlVua25vd24gdG8gT25saW5lU3RhdGUuT2ZmbGluZSB3aXRob3V0IHdhaXRpbmdcbiAgICAgICAgICogZm9yIHRoZSBzdHJlYW0gdG8gYWN0dWFsbHkgZmFpbCAoTUFYX1dBVENIX1NUUkVBTV9GQUlMVVJFUyB0aW1lcykuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLk1yID0gbnVsbCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIHRoZSBjbGllbnQgc2hvdWxkIGxvZyBhIHdhcm5pbmcgbWVzc2FnZSBpZiBpdCBmYWlscyB0byBjb25uZWN0IHRvXG4gICAgICAgICAqIHRoZSBiYWNrZW5kIChpbml0aWFsbHkgdHJ1ZSwgY2xlYXJlZCBhZnRlciBhIHN1Y2Nlc3NmdWwgc3RyZWFtLCBvciBpZiB3ZSd2ZVxuICAgICAgICAgKiBsb2dnZWQgdGhlIG1lc3NhZ2UgYWxyZWFkeSkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkxyID0gITA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCBieSBSZW1vdGVTdG9yZSB3aGVuIGEgd2F0Y2ggc3RyZWFtIGlzIHN0YXJ0ZWQgKGluY2x1ZGluZyBvbiBlYWNoXG4gICAgICogYmFja29mZiBhdHRlbXB0KS5cbiAgICAgKlxuICAgICAqIElmIHRoaXMgaXMgdGhlIGZpcnN0IGF0dGVtcHQsIGl0IHNldHMgdGhlIE9ubGluZVN0YXRlIHRvIFVua25vd24gYW5kIHN0YXJ0c1xuICAgICAqIHRoZSBvbmxpbmVTdGF0ZVRpbWVyLlxuICAgICAqLyAgICBCcigpIHtcbiAgICAgICAgMCA9PT0gdGhpcy5PciAmJiAodGhpcy5VcihcIlVua25vd25cIiAvKiBVbmtub3duICovKSwgdGhpcy5NciA9IHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQWZ0ZXJEZWxheShcIm9ubGluZV9zdGF0ZV90aW1lb3V0XCIgLyogT25saW5lU3RhdGVUaW1lb3V0ICovICwgMWU0LCAoKCkgPT4gKHRoaXMuTXIgPSBudWxsLCBcbiAgICAgICAgdGhpcy5xcihcIkJhY2tlbmQgZGlkbid0IHJlc3BvbmQgd2l0aGluIDEwIHNlY29uZHMuXCIpLCB0aGlzLlVyKFwiT2ZmbGluZVwiIC8qIE9mZmxpbmUgKi8pLCBcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIG91ciBPbmxpbmVTdGF0ZSBhcyBhcHByb3ByaWF0ZSBhZnRlciB0aGUgd2F0Y2ggc3RyZWFtIHJlcG9ydHMgYVxuICAgICAqIGZhaWx1cmUuIFRoZSBmaXJzdCBmYWlsdXJlIG1vdmVzIHVzIHRvIHRoZSAnVW5rbm93bicgc3RhdGUuIFdlIHRoZW4gbWF5XG4gICAgICogYWxsb3cgbXVsdGlwbGUgZmFpbHVyZXMgKGJhc2VkIG9uIE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMpIGJlZm9yZSB3ZVxuICAgICAqIGFjdHVhbGx5IHRyYW5zaXRpb24gdG8gdGhlICdPZmZsaW5lJyBzdGF0ZS5cbiAgICAgKi8gICAgS3IodCkge1xuICAgICAgICBcIk9ubGluZVwiIC8qIE9ubGluZSAqLyA9PT0gdGhpcy5zdGF0ZSA/IHRoaXMuVXIoXCJVbmtub3duXCIgLyogVW5rbm93biAqLykgOiAodGhpcy5PcisrLCBcbiAgICAgICAgdGhpcy5PciA+PSAxICYmICh0aGlzLmpyKCksIHRoaXMucXIoYENvbm5lY3Rpb24gZmFpbGVkIDEgdGltZXMuIE1vc3QgcmVjZW50IGVycm9yOiAke3QudG9TdHJpbmcoKX1gKSwgXG4gICAgICAgIHRoaXMuVXIoXCJPZmZsaW5lXCIgLyogT2ZmbGluZSAqLykpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhwbGljaXRseSBzZXRzIHRoZSBPbmxpbmVTdGF0ZSB0byB0aGUgc3BlY2lmaWVkIHN0YXRlLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IHRoaXMgcmVzZXRzIG91ciB0aW1lcnMgLyBmYWlsdXJlIGNvdW50ZXJzLCBldGMuIHVzZWQgYnkgb3VyXG4gICAgICogT2ZmbGluZSBoZXVyaXN0aWNzLCBzbyBtdXN0IG5vdCBiZSB1c2VkIGluIHBsYWNlIG9mXG4gICAgICogaGFuZGxlV2F0Y2hTdHJlYW1TdGFydCgpIGFuZCBoYW5kbGVXYXRjaFN0cmVhbUZhaWx1cmUoKS5cbiAgICAgKi8gICAgc2V0KHQpIHtcbiAgICAgICAgdGhpcy5qcigpLCB0aGlzLk9yID0gMCwgXCJPbmxpbmVcIiAvKiBPbmxpbmUgKi8gPT09IHQgJiYgKFxuICAgICAgICAvLyBXZSd2ZSBjb25uZWN0ZWQgdG8gd2F0Y2ggYXQgbGVhc3Qgb25jZS4gRG9uJ3Qgd2FybiB0aGUgZGV2ZWxvcGVyXG4gICAgICAgIC8vIGFib3V0IGJlaW5nIG9mZmxpbmUgZ29pbmcgZm9yd2FyZC5cbiAgICAgICAgdGhpcy5MciA9ICExKSwgdGhpcy5Vcih0KTtcbiAgICB9XG4gICAgVXIodCkge1xuICAgICAgICB0ICE9PSB0aGlzLnN0YXRlICYmICh0aGlzLnN0YXRlID0gdCwgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIodCkpO1xuICAgIH1cbiAgICBxcih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBgQ291bGQgbm90IHJlYWNoIENsb3VkIEZpcmVzdG9yZSBiYWNrZW5kLiAke3R9XFxuVGhpcyB0eXBpY2FsbHkgaW5kaWNhdGVzIHRoYXQgeW91ciBkZXZpY2UgZG9lcyBub3QgaGF2ZSBhIGhlYWx0aHkgSW50ZXJuZXQgY29ubmVjdGlvbiBhdCB0aGUgbW9tZW50LiBUaGUgY2xpZW50IHdpbGwgb3BlcmF0ZSBpbiBvZmZsaW5lIG1vZGUgdW50aWwgaXQgaXMgYWJsZSB0byBzdWNjZXNzZnVsbHkgY29ubmVjdCB0byB0aGUgYmFja2VuZC5gO1xuICAgICAgICB0aGlzLkxyID8gKEYoZSksIHRoaXMuTHIgPSAhMSkgOiAkKFwiT25saW5lU3RhdGVUcmFja2VyXCIsIGUpO1xuICAgIH1cbiAgICBqcigpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy5NciAmJiAodGhpcy5Nci5jYW5jZWwoKSwgdGhpcy5NciA9IG51bGwpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgYW8ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBsb2NhbCBzdG9yZSwgdXNlZCB0byBmaWxsIHRoZSB3cml0ZSBwaXBlbGluZSB3aXRoIG91dGJvdW5kIG11dGF0aW9ucy5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIGNsaWVudC1zaWRlIHByb3h5IGZvciBpbnRlcmFjdGluZyB3aXRoIHRoZSBiYWNrZW5kLiAqL1xuICAgIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlID0gdCwgdGhpcy5kYXRhc3RvcmUgPSBlLCB0aGlzLmFzeW5jUXVldWUgPSBuLCB0aGlzLnJlbW90ZVN5bmNlciA9IHt9LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbGlzdCBvZiB1cCB0byBNQVhfUEVORElOR19XUklURVMgd3JpdGVzIHRoYXQgd2UgaGF2ZSBmZXRjaGVkIGZyb20gdGhlXG4gICAgICAgICAqIExvY2FsU3RvcmUgdmlhIGZpbGxXcml0ZVBpcGVsaW5lKCkgYW5kIGhhdmUgb3Igd2lsbCBzZW5kIHRvIHRoZSB3cml0ZVxuICAgICAgICAgKiBzdHJlYW0uXG4gICAgICAgICAqXG4gICAgICAgICAqIFdoZW5ldmVyIHdyaXRlUGlwZWxpbmUubGVuZ3RoID4gMCB0aGUgUmVtb3RlU3RvcmUgd2lsbCBhdHRlbXB0IHRvIHN0YXJ0IG9yXG4gICAgICAgICAqIHJlc3RhcnQgdGhlIHdyaXRlIHN0cmVhbS4gV2hlbiB0aGUgc3RyZWFtIGlzIGVzdGFibGlzaGVkIHRoZSB3cml0ZXMgaW4gdGhlXG4gICAgICAgICAqIHBpcGVsaW5lIHdpbGwgYmUgc2VudCBpbiBvcmRlci5cbiAgICAgICAgICpcbiAgICAgICAgICogV3JpdGVzIHJlbWFpbiBpbiB3cml0ZVBpcGVsaW5lIHVudGlsIHRoZXkgYXJlIGFja25vd2xlZGdlZCBieSB0aGUgYmFja2VuZFxuICAgICAgICAgKiBhbmQgdGh1cyB3aWxsIGF1dG9tYXRpY2FsbHkgYmUgcmUtc2VudCBpZiB0aGUgc3RyZWFtIGlzIGludGVycnVwdGVkIC9cbiAgICAgICAgICogcmVzdGFydGVkIGJlZm9yZSB0aGV5J3JlIGFja25vd2xlZGdlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogV3JpdGUgcmVzcG9uc2VzIGZyb20gdGhlIGJhY2tlbmQgYXJlIGxpbmtlZCB0byB0aGVpciBvcmlnaW5hdGluZyByZXF1ZXN0XG4gICAgICAgICAqIHB1cmVseSBiYXNlZCBvbiBvcmRlciwgYW5kIHNvIHdlIGNhbiBqdXN0IHNoaWZ0KCkgd3JpdGVzIGZyb20gdGhlIGZyb250IG9mXG4gICAgICAgICAqIHRoZSB3cml0ZVBpcGVsaW5lIGFzIHdlIHJlY2VpdmUgcmVzcG9uc2VzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5RciA9IFtdLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbWFwcGluZyBvZiB3YXRjaGVkIHRhcmdldHMgdGhhdCB0aGUgY2xpZW50IGNhcmVzIGFib3V0IHRyYWNraW5nIGFuZCB0aGVcbiAgICAgICAgICogdXNlciBoYXMgZXhwbGljaXRseSBjYWxsZWQgYSAnbGlzdGVuJyBmb3IgdGhpcyB0YXJnZXQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZXNlIHRhcmdldHMgbWF5IG9yIG1heSBub3QgaGF2ZSBiZWVuIHNlbnQgdG8gb3IgYWNrbm93bGVkZ2VkIGJ5IHRoZVxuICAgICAgICAgKiBzZXJ2ZXIuIE9uIHJlLWVzdGFibGlzaGluZyB0aGUgbGlzdGVuIHN0cmVhbSwgdGhlc2UgdGFyZ2V0cyBzaG91bGQgYmUgc2VudFxuICAgICAgICAgKiB0byB0aGUgc2VydmVyLiBUaGUgdGFyZ2V0cyByZW1vdmVkIHdpdGggdW5saXN0ZW5zIGFyZSByZW1vdmVkIGVhZ2VybHlcbiAgICAgICAgICogd2l0aG91dCB3YWl0aW5nIGZvciBjb25maXJtYXRpb24gZnJvbSB0aGUgbGlzdGVuIHN0cmVhbS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuV3IgPSBuZXcgTWFwLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgc2V0IG9mIHJlYXNvbnMgZm9yIHdoeSB0aGUgUmVtb3RlU3RvcmUgbWF5IGJlIG9mZmxpbmUuIElmIGVtcHR5LCB0aGVcbiAgICAgICAgICogUmVtb3RlU3RvcmUgbWF5IHN0YXJ0IGl0cyBuZXR3b3JrIGNvbm5lY3Rpb25zLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5HciA9IG5ldyBTZXQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogRXZlbnQgaGFuZGxlcnMgdGhhdCBnZXQgY2FsbGVkIHdoZW4gdGhlIG5ldHdvcmsgaXMgZGlzYWJsZWQgb3IgZW5hYmxlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogUE9SVElORyBOT1RFOiBUaGVzZSBmdW5jdGlvbnMgYXJlIHVzZWQgb24gdGhlIFdlYiBjbGllbnQgdG8gY3JlYXRlIHRoZVxuICAgICAgICAgKiB1bmRlcmx5aW5nIHN0cmVhbXMgKHRvIHN1cHBvcnQgdHJlZS1zaGFrZWFibGUgc3RyZWFtcykuIE9uIEFuZHJvaWQgYW5kIGlPUyxcbiAgICAgICAgICogdGhlIHN0cmVhbXMgYXJlIGNyZWF0ZWQgZHVyaW5nIGNvbnN0cnVjdGlvbiBvZiBSZW1vdGVTdG9yZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuenIgPSBbXSwgdGhpcy5IciA9IGksIHRoaXMuSHIuRWkoKHQgPT4ge1xuICAgICAgICAgICAgbi5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gUG9ydGluZyBOb3RlOiBVbmxpa2UgaU9TLCBgcmVzdGFydE5ldHdvcmsoKWAgaXMgY2FsbGVkIGV2ZW4gd2hlbiB0aGVcbiAgICAgICAgICAgICAgICAvLyBuZXR3b3JrIGJlY29tZXMgdW5yZWFjaGFibGUgYXMgd2UgZG9uJ3QgaGF2ZSBhbnkgb3RoZXIgd2F5IHRvIHRlYXJcbiAgICAgICAgICAgICAgICAvLyBkb3duIG91ciBzdHJlYW1zLlxuICAgICAgICAgICAgICAgIGdvKHRoaXMpICYmICgkKFwiUmVtb3RlU3RvcmVcIiwgXCJSZXN0YXJ0aW5nIHN0cmVhbXMgZm9yIG5ldHdvcmsgcmVhY2hhYmlsaXR5IGNoYW5nZS5cIiksIFxuICAgICAgICAgICAgICAgIGF3YWl0IGFzeW5jIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IHEodCk7XG4gICAgICAgICAgICAgICAgICAgIGUuR3IuYWRkKDQgLyogQ29ubmVjdGl2aXR5Q2hhbmdlICovKSwgYXdhaXQgdW8oZSksIGUuSnIuc2V0KFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pLCBcbiAgICAgICAgICAgICAgICAgICAgZS5Hci5kZWxldGUoNCAvKiBDb25uZWN0aXZpdHlDaGFuZ2UgKi8pLCBhd2FpdCBjbyhlKTtcbiAgICAgICAgICAgICAgICB9KHRoaXMpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLCB0aGlzLkpyID0gbmV3IG9vKG4sIHMpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gY28odCkge1xuICAgIGlmIChnbyh0KSkgZm9yIChjb25zdCBlIG9mIHQuenIpIGF3YWl0IGUoLyogZW5hYmxlZD0gKi8gITApO1xufVxuXG4vKipcbiAqIFRlbXBvcmFyaWx5IGRpc2FibGVzIHRoZSBuZXR3b3JrLiBUaGUgbmV0d29yayBjYW4gYmUgcmUtZW5hYmxlZCB1c2luZ1xuICogZW5hYmxlTmV0d29yaygpLlxuICovIGFzeW5jIGZ1bmN0aW9uIHVvKHQpIHtcbiAgICBmb3IgKGNvbnN0IGUgb2YgdC56cikgYXdhaXQgZSgvKiBlbmFibGVkPSAqLyAhMSk7XG59XG5cbi8qKlxuICogU3RhcnRzIG5ldyBsaXN0ZW4gZm9yIHRoZSBnaXZlbiB0YXJnZXQuIFVzZXMgcmVzdW1lIHRva2VuIGlmIHByb3ZpZGVkLiBJdFxuICogaXMgYSBuby1vcCBpZiB0aGUgdGFyZ2V0IG9mIGdpdmVuIGBUYXJnZXREYXRhYCBpcyBhbHJlYWR5IGJlaW5nIGxpc3RlbmVkIHRvLlxuICovXG5mdW5jdGlvbiBobyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IHEodCk7XG4gICAgbi5Xci5oYXMoZS50YXJnZXRJZCkgfHwgKFxuICAgIC8vIE1hcmsgdGhpcyBhcyBzb21ldGhpbmcgdGhlIGNsaWVudCBpcyBjdXJyZW50bHkgbGlzdGVuaW5nIGZvci5cbiAgICBuLldyLnNldChlLnRhcmdldElkLCBlKSwgbW8obikgPyBcbiAgICAvLyBUaGUgbGlzdGVuIHdpbGwgYmUgc2VudCBpbiBvbldhdGNoU3RyZWFtT3BlblxuICAgIF9vKG4pIDogeG8obikubHIoKSAmJiBmbyhuLCBlKSk7XG59XG5cbi8qKlxuICogUmVtb3ZlcyB0aGUgbGlzdGVuIGZyb20gc2VydmVyLiBJdCBpcyBhIG5vLW9wIGlmIHRoZSBnaXZlbiB0YXJnZXQgaWQgaXNcbiAqIG5vdCBiZWluZyBsaXN0ZW5lZCB0by5cbiAqLyBmdW5jdGlvbiBsbyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IHEodCksIHMgPSB4byhuKTtcbiAgICBuLldyLmRlbGV0ZShlKSwgcy5scigpICYmIHdvKG4sIGUpLCAwID09PSBuLldyLnNpemUgJiYgKHMubHIoKSA/IHMuX3IoKSA6IGdvKG4pICYmIFxuICAgIC8vIFJldmVydCB0byBPbmxpbmVTdGF0ZS5Vbmtub3duIGlmIHRoZSB3YXRjaCBzdHJlYW0gaXMgbm90IG9wZW4gYW5kIHdlXG4gICAgLy8gaGF2ZSBubyBsaXN0ZW5lcnMsIHNpbmNlIHdpdGhvdXQgYW55IGxpc3RlbnMgdG8gc2VuZCB3ZSBjYW5ub3RcbiAgICAvLyBjb25maXJtIGlmIHRoZSBzdHJlYW0gaXMgaGVhbHRoeSBhbmQgdXBncmFkZSB0byBPbmxpbmVTdGF0ZS5PbmxpbmUuXG4gICAgbi5Kci5zZXQoXCJVbmtub3duXCIgLyogVW5rbm93biAqLykpO1xufVxuXG4vKipcbiAqIFdlIG5lZWQgdG8gaW5jcmVtZW50IHRoZSB0aGUgZXhwZWN0ZWQgbnVtYmVyIG9mIHBlbmRpbmcgcmVzcG9uc2VzIHdlJ3JlIGR1ZVxuICogZnJvbSB3YXRjaCBzbyB3ZSB3YWl0IGZvciB0aGUgYWNrIHRvIHByb2Nlc3MgYW55IG1lc3NhZ2VzIGZyb20gdGhpcyB0YXJnZXQuXG4gKi8gZnVuY3Rpb24gZm8odCwgZSkge1xuICAgIHQuWXIuWChlLnRhcmdldElkKSwgeG8odCkuYnIoZSk7XG59XG5cbi8qKlxuICogV2UgbmVlZCB0byBpbmNyZW1lbnQgdGhlIGV4cGVjdGVkIG51bWJlciBvZiBwZW5kaW5nIHJlc3BvbnNlcyB3ZSdyZSBkdWVcbiAqIGZyb20gd2F0Y2ggc28gd2Ugd2FpdCBmb3IgdGhlIHJlbW92YWwgb24gdGhlIHNlcnZlciBiZWZvcmUgd2UgcHJvY2VzcyBhbnlcbiAqIG1lc3NhZ2VzIGZyb20gdGhpcyB0YXJnZXQuXG4gKi8gZnVuY3Rpb24gd28odCwgZSkge1xuICAgIHQuWXIuWChlKSwgeG8odCkudnIoZSk7XG59XG5cbmZ1bmN0aW9uIF9vKHQpIHtcbiAgICB0LllyID0gbmV3IE1uKHtcbiAgICAgICAgZ2V0UmVtb3RlS2V5c0ZvclRhcmdldDogZSA9PiB0LnJlbW90ZVN5bmNlci5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KGUpLFxuICAgICAgICBFdDogZSA9PiB0LldyLmdldChlKSB8fCBudWxsXG4gICAgfSksIHhvKHQpLnN0YXJ0KCksIHQuSnIuQnIoKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHdhdGNoIHN0cmVhbSBzaG91bGQgYmUgc3RhcnRlZCBiZWNhdXNlIGl0J3MgbmVjZXNzYXJ5XG4gKiBhbmQgaGFzIG5vdCB5ZXQgYmVlbiBzdGFydGVkLlxuICovIGZ1bmN0aW9uIG1vKHQpIHtcbiAgICByZXR1cm4gZ28odCkgJiYgIXhvKHQpLmhyKCkgJiYgdC5Xci5zaXplID4gMDtcbn1cblxuZnVuY3Rpb24gZ28odCkge1xuICAgIHJldHVybiAwID09PSBxKHQpLkdyLnNpemU7XG59XG5cbmZ1bmN0aW9uIHlvKHQpIHtcbiAgICB0LllyID0gdm9pZCAwO1xufVxuXG5hc3luYyBmdW5jdGlvbiBwbyh0KSB7XG4gICAgdC5Xci5mb3JFYWNoKCgoZSwgbikgPT4ge1xuICAgICAgICBmbyh0LCBlKTtcbiAgICB9KSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIFRvKHQsIGUpIHtcbiAgICB5byh0KSwgXG4gICAgLy8gSWYgd2Ugc3RpbGwgbmVlZCB0aGUgd2F0Y2ggc3RyZWFtLCByZXRyeSB0aGUgY29ubmVjdGlvbi5cbiAgICBtbyh0KSA/ICh0LkpyLktyKGUpLCBfbyh0KSkgOiBcbiAgICAvLyBObyBuZWVkIHRvIHJlc3RhcnQgd2F0Y2ggc3RyZWFtIGJlY2F1c2UgdGhlcmUgYXJlIG5vIGFjdGl2ZSB0YXJnZXRzLlxuICAgIC8vIFRoZSBvbmxpbmUgc3RhdGUgaXMgc2V0IHRvIHVua25vd24gYmVjYXVzZSB0aGVyZSBpcyBubyBhY3RpdmUgYXR0ZW1wdFxuICAgIC8vIGF0IGVzdGFibGlzaGluZyBhIGNvbm5lY3Rpb25cbiAgICB0LkpyLnNldChcIlVua25vd25cIiAvKiBVbmtub3duICovKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gRW8odCwgZSwgbikge1xuICAgIGlmIChcbiAgICAvLyBNYXJrIHRoZSBjbGllbnQgYXMgb25saW5lIHNpbmNlIHdlIGdvdCBhIG1lc3NhZ2UgZnJvbSB0aGUgc2VydmVyXG4gICAgdC5Kci5zZXQoXCJPbmxpbmVcIiAvKiBPbmxpbmUgKi8pLCBlIGluc3RhbmNlb2YgRm4gJiYgMiAvKiBSZW1vdmVkICovID09PSBlLnN0YXRlICYmIGUuY2F1c2UpIFxuICAgIC8vIFRoZXJlIHdhcyBhbiBlcnJvciBvbiBhIHRhcmdldCwgZG9uJ3Qgd2FpdCBmb3IgYSBjb25zaXN0ZW50IHNuYXBzaG90XG4gICAgLy8gdG8gcmFpc2UgZXZlbnRzXG4gICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgXG4gICAgICAgIC8qKiBIYW5kbGVzIGFuIGVycm9yIG9uIGEgdGFyZ2V0ICovXG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLmNhdXNlO1xuICAgICAgICAgICAgZm9yIChjb25zdCBzIG9mIGUudGFyZ2V0SWRzKSBcbiAgICAgICAgICAgIC8vIEEgd2F0Y2hlZCB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIHJlbW92ZWQgYWxyZWFkeS5cbiAgICAgICAgICAgIHQuV3IuaGFzKHMpICYmIChhd2FpdCB0LnJlbW90ZVN5bmNlci5yZWplY3RMaXN0ZW4ocywgbiksIHQuV3IuZGVsZXRlKHMpLCB0LllyLnJlbW92ZVRhcmdldChzKSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBBdHRlbXB0cyB0byBmaWxsIG91ciB3cml0ZSBwaXBlbGluZSB3aXRoIHdyaXRlcyBmcm9tIHRoZSBMb2NhbFN0b3JlLlxuICpcbiAqIENhbGxlZCBpbnRlcm5hbGx5IHRvIGJvb3RzdHJhcCBvciByZWZpbGwgdGhlIHdyaXRlIHBpcGVsaW5lIGFuZCBieVxuICogU3luY0VuZ2luZSB3aGVuZXZlciB0aGVyZSBhcmUgbmV3IG11dGF0aW9ucyB0byBwcm9jZXNzLlxuICpcbiAqIFN0YXJ0cyB0aGUgd3JpdGUgc3RyZWFtIGlmIG5lY2Vzc2FyeS5cbiAqLyAodCwgZSk7XG4gICAgfSBjYXRjaCAobikge1xuICAgICAgICAkKFwiUmVtb3RlU3RvcmVcIiwgXCJGYWlsZWQgdG8gcmVtb3ZlIHRhcmdldHMgJXM6ICVzIFwiLCBlLnRhcmdldElkcy5qb2luKFwiLFwiKSwgbiksIFxuICAgICAgICBhd2FpdCBJbyh0LCBuKTtcbiAgICB9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiB4biA/IHQuWXIub3QoZSkgOiBlIGluc3RhbmNlb2YgJG4gPyB0LllyLmR0KGUpIDogdC5Zci51dChlKSwgXG4gICAgIW4uaXNFcXVhbChjdC5taW4oKSkpIHRyeSB7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBfcih0LmxvY2FsU3RvcmUpO1xuICAgICAgICBuLmNvbXBhcmVUbyhlKSA+PSAwICYmIFxuICAgICAgICAvLyBXZSBoYXZlIHJlY2VpdmVkIGEgdGFyZ2V0IGNoYW5nZSB3aXRoIGEgZ2xvYmFsIHNuYXBzaG90IGlmIHRoZSBzbmFwc2hvdFxuICAgICAgICAvLyB2ZXJzaW9uIGlzIG5vdCBlcXVhbCB0byBTbmFwc2hvdFZlcnNpb24ubWluKCkuXG4gICAgICAgIGF3YWl0IFxuICAgICAgICAvKipcbiAqIFRha2VzIGEgYmF0Y2ggb2YgY2hhbmdlcyBmcm9tIHRoZSBEYXRhc3RvcmUsIHJlcGFja2FnZXMgdGhlbSBhcyBhXG4gKiBSZW1vdGVFdmVudCwgYW5kIHBhc3NlcyB0aGF0IG9uIHRvIHRoZSBsaXN0ZW5lciwgd2hpY2ggaXMgdHlwaWNhbGx5IHRoZVxuICogU3luY0VuZ2luZS5cbiAqL1xuICAgICAgICBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5Zci5ndChlKTtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBpbi1tZW1vcnkgcmVzdW1lIHRva2Vucy4gTG9jYWxTdG9yZSB3aWxsIHVwZGF0ZSB0aGVcbiAgICAgICAgICAgIC8vIHBlcnNpc3RlbnQgdmlldyBvZiB0aGVzZSB3aGVuIGFwcGx5aW5nIHRoZSBjb21wbGV0ZWQgUmVtb3RlRXZlbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi50YXJnZXRDaGFuZ2VzLmZvckVhY2goKChuLCBzKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG4ucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpID0gdC5Xci5nZXQocyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIEEgd2F0Y2hlZCB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIHJlbW92ZWQgYWxyZWFkeS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICYmIHQuV3Iuc2V0KHMsIGkud2l0aFJlc3VtZVRva2VuKG4ucmVzdW1lVG9rZW4sIGUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSksIFxuICAgICAgICAgICAgLy8gUmUtZXN0YWJsaXNoIGxpc3RlbnMgZm9yIHRoZSB0YXJnZXRzIHRoYXQgaGF2ZSBiZWVuIGludmFsaWRhdGVkIGJ5XG4gICAgICAgICAgICAvLyBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoZXMuXG4gICAgICAgICAgICBuLnRhcmdldE1pc21hdGNoZXMuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHQuV3IuZ2V0KGUpO1xuICAgICAgICAgICAgICAgIGlmICghbikgXG4gICAgICAgICAgICAgICAgLy8gQSB3YXRjaGVkIHRhcmdldCBtaWdodCBoYXZlIGJlZW4gcmVtb3ZlZCBhbHJlYWR5LlxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAvLyBDbGVhciB0aGUgcmVzdW1lIHRva2VuIGZvciB0aGUgdGFyZ2V0LCBzaW5jZSB3ZSdyZSBpbiBhIGtub3duIG1pc21hdGNoXG4gICAgICAgICAgICAgICAgLy8gc3RhdGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuV3Iuc2V0KGUsIG4ud2l0aFJlc3VtZVRva2VuKHl0LkVNUFRZX0JZVEVfU1RSSU5HLCBuLnNuYXBzaG90VmVyc2lvbikpLCBcbiAgICAgICAgICAgICAgICAvLyBDYXVzZSBhIGhhcmQgcmVzZXQgYnkgdW53YXRjaGluZyBhbmQgcmV3YXRjaGluZyBpbW1lZGlhdGVseSwgYnV0XG4gICAgICAgICAgICAgICAgLy8gZGVsaWJlcmF0ZWx5IGRvbid0IHNlbmQgYSByZXN1bWUgdG9rZW4gc28gdGhhdCB3ZSBnZXQgYSBmdWxsIHVwZGF0ZS5cbiAgICAgICAgICAgICAgICB3byh0LCBlKTtcbiAgICAgICAgICAgICAgICAvLyBNYXJrIHRoZSB0YXJnZXQgd2Ugc2VuZCBhcyBiZWluZyBvbiBiZWhhbGYgb2YgYW4gZXhpc3RlbmNlIGZpbHRlclxuICAgICAgICAgICAgICAgIC8vIG1pc21hdGNoLCBidXQgZG9uJ3QgYWN0dWFsbHkgcmV0YWluIHRoYXQgaW4gbGlzdGVuVGFyZ2V0cy4gVGhpcyBlbnN1cmVzXG4gICAgICAgICAgICAgICAgLy8gdGhhdCB3ZSBmbGFnIHRoZSBmaXJzdCByZS1saXN0ZW4gdGhpcyB3YXkgd2l0aG91dCBpbXBhY3RpbmcgZnV0dXJlXG4gICAgICAgICAgICAgICAgLy8gbGlzdGVucyBvZiB0aGlzIHRhcmdldCAodGhhdCBtaWdodCBoYXBwZW4gZS5nLiBvbiByZWNvbm5lY3QpLlxuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgYWkobi50YXJnZXQsIGUsIDEgLyogRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2ggKi8gLCBuLnNlcXVlbmNlTnVtYmVyKTtcbiAgICAgICAgICAgICAgICBmbyh0LCBzKTtcbiAgICAgICAgICAgIH0pKSwgdC5yZW1vdGVTeW5jZXIuYXBwbHlSZW1vdGVFdmVudChuKTtcbiAgICAgICAgfSh0LCBuKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICQoXCJSZW1vdGVTdG9yZVwiLCBcIkZhaWxlZCB0byByYWlzZSBzbmFwc2hvdDpcIiwgZSksIGF3YWl0IElvKHQsIGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZWNvdmVyeSBsb2dpYyBmb3IgSW5kZXhlZERCIGVycm9ycyB0aGF0IHRha2VzIHRoZSBuZXR3b3JrIG9mZmxpbmUgdW50aWxcbiAqIGBvcGAgc3VjY2VlZHMuIFJldHJpZXMgYXJlIHNjaGVkdWxlZCB3aXRoIGJhY2tvZmYgdXNpbmdcbiAqIGBlbnF1ZXVlUmV0cnlhYmxlKClgLiBJZiBgb3AoKWAgaXMgbm90IHByb3ZpZGVkLCBJbmRleGVkREIgYWNjZXNzIGlzXG4gKiB2YWxpZGF0ZWQgdmlhIGEgZ2VuZXJpYyBvcGVyYXRpb24uXG4gKlxuICogVGhlIHJldHVybmVkIFByb21pc2UgaXMgcmVzb2x2ZWQgb25jZSB0aGUgbmV0d29yayBpcyBkaXNhYmxlZCBhbmQgYmVmb3JlXG4gKiBhbnkgcmV0cnkgYXR0ZW1wdC5cbiAqLyBhc3luYyBmdW5jdGlvbiBJbyh0LCBlLCBuKSB7XG4gICAgaWYgKCFYcyhlKSkgdGhyb3cgZTtcbiAgICB0LkdyLmFkZCgxIC8qIEluZGV4ZWREYkZhaWxlZCAqLyksIFxuICAgIC8vIERpc2FibGUgbmV0d29yayBhbmQgcmFpc2Ugb2ZmbGluZSBzbmFwc2hvdHNcbiAgICBhd2FpdCB1byh0KSwgdC5Kci5zZXQoXCJPZmZsaW5lXCIgLyogT2ZmbGluZSAqLyksIG4gfHwgKFxuICAgIC8vIFVzZSBhIHNpbXBsZSByZWFkIG9wZXJhdGlvbiB0byBkZXRlcm1pbmUgaWYgSW5kZXhlZERCIHJlY292ZXJlZC5cbiAgICAvLyBJZGVhbGx5LCB3ZSB3b3VsZCBleHBvc2UgYSBoZWFsdGggY2hlY2sgZGlyZWN0bHkgb24gU2ltcGxlRGIsIGJ1dFxuICAgIC8vIFJlbW90ZVN0b3JlIG9ubHkgaGFzIGFjY2VzcyB0byBwZXJzaXN0ZW5jZSB0aHJvdWdoIExvY2FsU3RvcmUuXG4gICAgbiA9ICgpID0+IF9yKHQubG9jYWxTdG9yZSkpLCBcbiAgICAvLyBQcm9iZSBJbmRleGVkREIgcGVyaW9kaWNhbGx5IGFuZCByZS1lbmFibGUgbmV0d29ya1xuICAgIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlUmV0cnlhYmxlKChhc3luYyAoKSA9PiB7XG4gICAgICAgICQoXCJSZW1vdGVTdG9yZVwiLCBcIlJldHJ5aW5nIEluZGV4ZWREQiBhY2Nlc3NcIiksIGF3YWl0IG4oKSwgdC5Hci5kZWxldGUoMSAvKiBJbmRleGVkRGJGYWlsZWQgKi8pLCBcbiAgICAgICAgYXdhaXQgY28odCk7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIGBvcGAuIElmIGBvcGAgZmFpbHMsIHRha2VzIHRoZSBuZXR3b3JrIG9mZmxpbmUgdW50aWwgYG9wYFxuICogc3VjY2VlZHMuIFJldHVybnMgYWZ0ZXIgdGhlIGZpcnN0IGF0dGVtcHQuXG4gKi8gZnVuY3Rpb24gQW8odCwgZSkge1xuICAgIHJldHVybiBlKCkuY2F0Y2goKG4gPT4gSW8odCwgbiwgZSkpKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gUm8odCkge1xuICAgIGNvbnN0IGUgPSBxKHQpLCBuID0gJG8oZSk7XG4gICAgbGV0IHMgPSBlLlFyLmxlbmd0aCA+IDAgPyBlLlFyW2UuUXIubGVuZ3RoIC0gMV0uYmF0Y2hJZCA6IC0xO1xuICAgIGZvciAoO1BvKGUpOyApIHRyeSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCB5cihlLmxvY2FsU3RvcmUsIHMpO1xuICAgICAgICBpZiAobnVsbCA9PT0gdCkge1xuICAgICAgICAgICAgMCA9PT0gZS5Rci5sZW5ndGggJiYgbi5fcigpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcyA9IHQuYmF0Y2hJZCwgYm8oZSwgdCk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICBhd2FpdCBJbyhlLCB0KTtcbiAgICB9XG4gICAgdm8oZSkgJiYgVm8oZSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHdlIGNhbiBhZGQgdG8gdGhlIHdyaXRlIHBpcGVsaW5lIChpLmUuIHRoZSBuZXR3b3JrIGlzXG4gKiBlbmFibGVkIGFuZCB0aGUgd3JpdGUgcGlwZWxpbmUgaXMgbm90IGZ1bGwpLlxuICovIGZ1bmN0aW9uIFBvKHQpIHtcbiAgICByZXR1cm4gZ28odCkgJiYgdC5Rci5sZW5ndGggPCAxMDtcbn1cblxuLyoqXG4gKiBRdWV1ZXMgYWRkaXRpb25hbCB3cml0ZXMgdG8gYmUgc2VudCB0byB0aGUgd3JpdGUgc3RyZWFtLCBzZW5kaW5nIHRoZW1cbiAqIGltbWVkaWF0ZWx5IGlmIHRoZSB3cml0ZSBzdHJlYW0gaXMgZXN0YWJsaXNoZWQuXG4gKi8gZnVuY3Rpb24gYm8odCwgZSkge1xuICAgIHQuUXIucHVzaChlKTtcbiAgICBjb25zdCBuID0gJG8odCk7XG4gICAgbi5scigpICYmIG4uU3IgJiYgbi5EcihlLm11dGF0aW9ucyk7XG59XG5cbmZ1bmN0aW9uIHZvKHQpIHtcbiAgICByZXR1cm4gZ28odCkgJiYgISRvKHQpLmhyKCkgJiYgdC5Rci5sZW5ndGggPiAwO1xufVxuXG5mdW5jdGlvbiBWbyh0KSB7XG4gICAgJG8odCkuc3RhcnQoKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gU28odCkge1xuICAgICRvKHQpLmtyKCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIERvKHQpIHtcbiAgICBjb25zdCBlID0gJG8odCk7XG4gICAgLy8gU2VuZCB0aGUgd3JpdGUgcGlwZWxpbmUgbm93IHRoYXQgdGhlIHN0cmVhbSBpcyBlc3RhYmxpc2hlZC5cbiAgICAgICAgZm9yIChjb25zdCBuIG9mIHQuUXIpIGUuRHIobi5tdXRhdGlvbnMpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBDbyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHQuUXIuc2hpZnQoKSwgaSA9IG9pLmZyb20ocywgZSwgbik7XG4gICAgYXdhaXQgQW8odCwgKCgpID0+IHQucmVtb3RlU3luY2VyLmFwcGx5U3VjY2Vzc2Z1bFdyaXRlKGkpKSksIFxuICAgIC8vIEl0J3MgcG9zc2libGUgdGhhdCB3aXRoIHRoZSBjb21wbGV0aW9uIG9mIHRoaXMgbXV0YXRpb24gYW5vdGhlclxuICAgIC8vIHNsb3QgaGFzIGZyZWVkIHVwLlxuICAgIGF3YWl0IFJvKHQpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBObyh0LCBlKSB7XG4gICAgLy8gSWYgdGhlIHdyaXRlIHN0cmVhbSBjbG9zZWQgYWZ0ZXIgdGhlIHdyaXRlIGhhbmRzaGFrZSBjb21wbGV0ZXMsIGEgd3JpdGVcbiAgICAvLyBvcGVyYXRpb24gZmFpbGVkIGFuZCB3ZSBmYWlsIHRoZSBwZW5kaW5nIG9wZXJhdGlvbi5cbiAgICBlICYmICRvKHQpLlNyICYmIFxuICAgIC8vIFRoaXMgZXJyb3IgYWZmZWN0cyB0aGUgYWN0dWFsIHdyaXRlLlxuICAgIGF3YWl0IGFzeW5jIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgLy8gT25seSBoYW5kbGUgcGVybWFuZW50IGVycm9ycyBoZXJlLiBJZiBpdCdzIHRyYW5zaWVudCwganVzdCBsZXQgdGhlIHJldHJ5XG4gICAgICAgIC8vIGxvZ2ljIGtpY2sgaW4uXG4gICAgICAgIGlmIChuID0gZS5jb2RlLCBfbihuKSAmJiBuICE9PSBLLkFCT1JURUQpIHtcbiAgICAgICAgICAgIC8vIFRoaXMgd2FzIGEgcGVybWFuZW50IGVycm9yLCB0aGUgcmVxdWVzdCBpdHNlbGYgd2FzIHRoZSBwcm9ibGVtXG4gICAgICAgICAgICAvLyBzbyBpdCdzIG5vdCBnb2luZyB0byBzdWNjZWVkIGlmIHdlIHJlc2VuZCBpdC5cbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LlFyLnNoaWZ0KCk7XG4gICAgICAgICAgICAvLyBJbiB0aGlzIGNhc2UgaXQncyBhbHNvIHVubGlrZWx5IHRoYXQgdGhlIHNlcnZlciBpdHNlbGYgaXMgbWVsdGluZ1xuICAgICAgICAgICAgLy8gZG93biAtLSB0aGlzIHdhcyBqdXN0IGEgYmFkIHJlcXVlc3Qgc28gaW5oaWJpdCBiYWNrb2ZmIG9uIHRoZSBuZXh0XG4gICAgICAgICAgICAvLyByZXN0YXJ0LlxuICAgICAgICAgICAgICAgICAgICAgICAgJG8odCkud3IoKSwgYXdhaXQgQW8odCwgKCgpID0+IHQucmVtb3RlU3luY2VyLnJlamVjdEZhaWxlZFdyaXRlKG4uYmF0Y2hJZCwgZSkpKSwgXG4gICAgICAgICAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgd2l0aCB0aGUgY29tcGxldGlvbiBvZiB0aGlzIG11dGF0aW9uXG4gICAgICAgICAgICAvLyBhbm90aGVyIHNsb3QgaGFzIGZyZWVkIHVwLlxuICAgICAgICAgICAgYXdhaXQgUm8odCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG47XG4gICAgfSh0LCBlKSwgXG4gICAgLy8gVGhlIHdyaXRlIHN0cmVhbSBtaWdodCBoYXZlIGJlZW4gc3RhcnRlZCBieSByZWZpbGxpbmcgdGhlIHdyaXRlXG4gICAgLy8gcGlwZWxpbmUgZm9yIGZhaWxlZCB3cml0ZXNcbiAgICB2byh0KSAmJiBWbyh0KTtcbn1cblxuLyoqXG4gKiBUb2dnbGVzIHRoZSBuZXR3b3JrIHN0YXRlIHdoZW4gdGhlIGNsaWVudCBnYWlucyBvciBsb3NlcyBpdHMgcHJpbWFyeSBsZWFzZS5cbiAqL1xuYXN5bmMgZnVuY3Rpb24ga28odCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgIGUgPyAobi5Hci5kZWxldGUoMiAvKiBJc1NlY29uZGFyeSAqLyksIGF3YWl0IGNvKG4pKSA6IGUgfHwgKG4uR3IuYWRkKDIgLyogSXNTZWNvbmRhcnkgKi8pLCBcbiAgICBhd2FpdCB1byhuKSwgbi5Kci5zZXQoXCJVbmtub3duXCIgLyogVW5rbm93biAqLykpO1xufVxuXG4vKipcbiAqIElmIG5vdCB5ZXQgaW5pdGlhbGl6ZWQsIHJlZ2lzdGVycyB0aGUgV2F0Y2hTdHJlYW0gYW5kIGl0cyBuZXR3b3JrIHN0YXRlXG4gKiBjYWxsYmFjayB3aXRoIGByZW1vdGVTdG9yZUltcGxgLiBSZXR1cm5zIHRoZSBleGlzdGluZyBzdHJlYW0gaWYgb25lIGlzXG4gKiBhbHJlYWR5IGF2YWlsYWJsZS5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IE9uIGlPUyBhbmQgQW5kcm9pZCwgdGhlIFdhdGNoU3RyZWFtIGdldHMgcmVnaXN0ZXJlZCBvbiBzdGFydHVwLlxuICogVGhpcyBpcyBub3QgZG9uZSBvbiBXZWIgdG8gYWxsb3cgaXQgdG8gYmUgdHJlZS1zaGFrZW4uXG4gKi8gZnVuY3Rpb24geG8odCkge1xuICAgIHJldHVybiB0LlhyIHx8IChcbiAgICAvLyBDcmVhdGUgc3RyZWFtIChidXQgbm90ZSB0aGF0IGl0IGlzIG5vdCBzdGFydGVkIHlldCkuXG4gICAgdC5YciA9IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IHEodCk7XG4gICAgICAgIHJldHVybiBzLkZyKCksIG5ldyBzbyhlLCBzLmlyLCBzLmF1dGhDcmVkZW50aWFscywgcy5hcHBDaGVja0NyZWRlbnRpYWxzLCBzLmssIG4pO1xuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAodC5kYXRhc3RvcmUsIHQuYXN5bmNRdWV1ZSwge1xuICAgICAgICBEaTogcG8uYmluZChudWxsLCB0KSxcbiAgICAgICAgTmk6IFRvLmJpbmQobnVsbCwgdCksXG4gICAgICAgIFByOiBFby5iaW5kKG51bGwsIHQpXG4gICAgfSksIHQuenIucHVzaCgoYXN5bmMgZSA9PiB7XG4gICAgICAgIGUgPyAodC5Yci53cigpLCBtbyh0KSA/IF9vKHQpIDogdC5Kci5zZXQoXCJVbmtub3duXCIgLyogVW5rbm93biAqLykpIDogKGF3YWl0IHQuWHIuc3RvcCgpLCBcbiAgICAgICAgeW8odCkpO1xuICAgIH0pKSksIHQuWHI7XG59XG5cbi8qKlxuICogSWYgbm90IHlldCBpbml0aWFsaXplZCwgcmVnaXN0ZXJzIHRoZSBXcml0ZVN0cmVhbSBhbmQgaXRzIG5ldHdvcmsgc3RhdGVcbiAqIGNhbGxiYWNrIHdpdGggYHJlbW90ZVN0b3JlSW1wbGAuIFJldHVybnMgdGhlIGV4aXN0aW5nIHN0cmVhbSBpZiBvbmUgaXNcbiAqIGFscmVhZHkgYXZhaWxhYmxlLlxuICpcbiAqIFBPUlRJTkcgTk9URTogT24gaU9TIGFuZCBBbmRyb2lkLCB0aGUgV3JpdGVTdHJlYW0gZ2V0cyByZWdpc3RlcmVkIG9uIHN0YXJ0dXAuXG4gKiBUaGlzIGlzIG5vdCBkb25lIG9uIFdlYiB0byBhbGxvdyBpdCB0byBiZSB0cmVlLXNoYWtlbi5cbiAqLyBmdW5jdGlvbiAkbyh0KSB7XG4gICAgcmV0dXJuIHQuWnIgfHwgKFxuICAgIC8vIENyZWF0ZSBzdHJlYW0gKGJ1dCBub3RlIHRoYXQgaXQgaXMgbm90IHN0YXJ0ZWQgeWV0KS5cbiAgICB0LlpyID0gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gcSh0KTtcbiAgICAgICAgcmV0dXJuIHMuRnIoKSwgbmV3IGlvKGUsIHMuaXIsIHMuYXV0aENyZWRlbnRpYWxzLCBzLmFwcENoZWNrQ3JlZGVudGlhbHMsIHMuaywgbik7XG4gICAgfSh0LmRhdGFzdG9yZSwgdC5hc3luY1F1ZXVlLCB7XG4gICAgICAgIERpOiBTby5iaW5kKG51bGwsIHQpLFxuICAgICAgICBOaTogTm8uYmluZChudWxsLCB0KSxcbiAgICAgICAgTnI6IERvLmJpbmQobnVsbCwgdCksXG4gICAgICAgIENyOiBDby5iaW5kKG51bGwsIHQpXG4gICAgfSksIHQuenIucHVzaCgoYXN5bmMgZSA9PiB7XG4gICAgICAgIGUgPyAodC5aci53cigpLCBcbiAgICAgICAgLy8gVGhpcyB3aWxsIHN0YXJ0IHRoZSB3cml0ZSBzdHJlYW0gaWYgbmVjZXNzYXJ5LlxuICAgICAgICBhd2FpdCBSbyh0KSkgOiAoYXdhaXQgdC5aci5zdG9wKCksIHQuUXIubGVuZ3RoID4gMCAmJiAoJChcIlJlbW90ZVN0b3JlXCIsIGBTdG9wcGluZyB3cml0ZSBzdHJlYW0gd2l0aCAke3QuUXIubGVuZ3RofSBwZW5kaW5nIHdyaXRlc2ApLCBcbiAgICAgICAgdC5RciA9IFtdKSk7XG4gICAgfSkpKSwgdC5acjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhbiBvcGVyYXRpb24gc2NoZWR1bGVkIHRvIGJlIHJ1biBpbiB0aGUgZnV0dXJlIG9uIGFuIEFzeW5jUXVldWUuXG4gKlxuICogSXQgaXMgY3JlYXRlZCB2aWEgRGVsYXllZE9wZXJhdGlvbi5jcmVhdGVBbmRTY2hlZHVsZSgpLlxuICpcbiAqIFN1cHBvcnRzIGNhbmNlbGxhdGlvbiAodmlhIGNhbmNlbCgpKSBhbmQgZWFybHkgZXhlY3V0aW9uICh2aWEgc2tpcERlbGF5KCkpLlxuICpcbiAqIE5vdGU6IFdlIGltcGxlbWVudCBgUHJvbWlzZUxpa2VgIGluc3RlYWQgb2YgYFByb21pc2VgLCBhcyB0aGUgYFByb21pc2VgIHR5cGVcbiAqIGluIG5ld2VyIHZlcnNpb25zIG9mIFR5cGVTY3JpcHQgZGVmaW5lcyBgZmluYWxseWAsIHdoaWNoIGlzIG5vdCBhdmFpbGFibGUgaW5cbiAqIElFLlxuICovXG5jbGFzcyBGbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSkge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUgPSB0LCB0aGlzLnRpbWVySWQgPSBlLCB0aGlzLnRhcmdldFRpbWVNcyA9IG4sIHRoaXMub3AgPSBzLCB0aGlzLnJlbW92YWxDYWxsYmFjayA9IGksIFxuICAgICAgICB0aGlzLmRlZmVycmVkID0gbmV3IFEsIHRoaXMudGhlbiA9IHRoaXMuZGVmZXJyZWQucHJvbWlzZS50aGVuLmJpbmQodGhpcy5kZWZlcnJlZC5wcm9taXNlKSwgXG4gICAgICAgIC8vIEl0J3Mgbm9ybWFsIGZvciB0aGUgZGVmZXJyZWQgcHJvbWlzZSB0byBiZSBjYW5jZWxlZCAoZHVlIHRvIGNhbmNlbGxhdGlvbilcbiAgICAgICAgLy8gYW5kIHNvIHdlIGF0dGFjaCBhIGR1bW15IGNhdGNoIGNhbGxiYWNrIHRvIGF2b2lkXG4gICAgICAgIC8vICdVbmhhbmRsZWRQcm9taXNlUmVqZWN0aW9uV2FybmluZycgbG9nIHNwYW0uXG4gICAgICAgIHRoaXMuZGVmZXJyZWQucHJvbWlzZS5jYXRjaCgodCA9PiB7fSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgRGVsYXllZE9wZXJhdGlvbiB0aGF0IGhhcyBiZWVuIHNjaGVkdWxlZCB0byBiZVxuICAgICAqIGV4ZWN1dGVkIG9uIHRoZSBwcm92aWRlZCBhc3luY1F1ZXVlIGFmdGVyIHRoZSBwcm92aWRlZCBkZWxheU1zLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFzeW5jUXVldWUgLSBUaGUgcXVldWUgdG8gc2NoZWR1bGUgdGhlIG9wZXJhdGlvbiBvbi5cbiAgICAgKiBAcGFyYW0gaWQgLSBBIFRpbWVyIElEIGlkZW50aWZ5aW5nIHRoZSB0eXBlIG9mIG9wZXJhdGlvbiB0aGlzIGlzLlxuICAgICAqIEBwYXJhbSBkZWxheU1zIC0gVGhlIGRlbGF5IChtcykgYmVmb3JlIHRoZSBvcGVyYXRpb24gc2hvdWxkIGJlIHNjaGVkdWxlZC5cbiAgICAgKiBAcGFyYW0gb3AgLSBUaGUgb3BlcmF0aW9uIHRvIHJ1bi5cbiAgICAgKiBAcGFyYW0gcmVtb3ZhbENhbGxiYWNrIC0gQSBjYWxsYmFjayB0byBiZSBjYWxsZWQgc3luY2hyb25vdXNseSBvbmNlIHRoZVxuICAgICAqICAgb3BlcmF0aW9uIGlzIGV4ZWN1dGVkIG9yIGNhbmNlbGVkLCBub3RpZnlpbmcgdGhlIEFzeW5jUXVldWUgdG8gcmVtb3ZlIGl0XG4gICAgICogICBmcm9tIGl0cyBkZWxheWVkT3BlcmF0aW9ucyBsaXN0LlxuICAgICAqICAgUE9SVElORyBOT1RFOiBUaGlzIGV4aXN0cyB0byBwcmV2ZW50IG1ha2luZyByZW1vdmVEZWxheWVkT3BlcmF0aW9uKCkgYW5kXG4gICAgICogICB0aGUgRGVsYXllZE9wZXJhdGlvbiBjbGFzcyBwdWJsaWMuXG4gICAgICovICAgIHN0YXRpYyBjcmVhdGVBbmRTY2hlZHVsZSh0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIGNvbnN0IHIgPSBEYXRlLm5vdygpICsgbiwgbyA9IG5ldyBGbyh0LCBlLCByLCBzLCBpKTtcbiAgICAgICAgcmV0dXJuIG8uc3RhcnQobiksIG87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyB0aGUgdGltZXIuIFRoaXMgaXMgY2FsbGVkIGltbWVkaWF0ZWx5IGFmdGVyIGNvbnN0cnVjdGlvbiBieVxuICAgICAqIGNyZWF0ZUFuZFNjaGVkdWxlKCkuXG4gICAgICovICAgIHN0YXJ0KHQpIHtcbiAgICAgICAgdGhpcy50aW1lckhhbmRsZSA9IHNldFRpbWVvdXQoKCgpID0+IHRoaXMuaGFuZGxlRGVsYXlFbGFwc2VkKCkpLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUXVldWVzIHRoZSBvcGVyYXRpb24gdG8gcnVuIGltbWVkaWF0ZWx5IChpZiBpdCBoYXNuJ3QgYWxyZWFkeSBiZWVuIHJ1biBvclxuICAgICAqIGNhbmNlbGVkKS5cbiAgICAgKi8gICAgc2tpcERlbGF5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVEZWxheUVsYXBzZWQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FuY2VscyB0aGUgb3BlcmF0aW9uIGlmIGl0IGhhc24ndCBhbHJlYWR5IGJlZW4gZXhlY3V0ZWQgb3IgY2FuY2VsZWQuIFRoZVxuICAgICAqIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZC5cbiAgICAgKlxuICAgICAqIEFzIGxvbmcgYXMgdGhlIG9wZXJhdGlvbiBoYXMgbm90IHlldCBiZWVuIHJ1biwgY2FsbGluZyBjYW5jZWwoKSBwcm92aWRlcyBhXG4gICAgICogZ3VhcmFudGVlIHRoYXQgdGhlIG9wZXJhdGlvbiB3aWxsIG5vdCBiZSBydW4uXG4gICAgICovICAgIGNhbmNlbCh0KSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMudGltZXJIYW5kbGUgJiYgKHRoaXMuY2xlYXJUaW1lb3V0KCksIHRoaXMuZGVmZXJyZWQucmVqZWN0KG5ldyBqKEsuQ0FOQ0VMTEVELCBcIk9wZXJhdGlvbiBjYW5jZWxsZWRcIiArICh0ID8gXCI6IFwiICsgdCA6IFwiXCIpKSkpO1xuICAgIH1cbiAgICBoYW5kbGVEZWxheUVsYXBzZWQoKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiBudWxsICE9PSB0aGlzLnRpbWVySGFuZGxlID8gKHRoaXMuY2xlYXJUaW1lb3V0KCksIFxuICAgICAgICB0aGlzLm9wKCkudGhlbigodCA9PiB0aGlzLmRlZmVycmVkLnJlc29sdmUodCkpKSkgOiBQcm9taXNlLnJlc29sdmUoKSkpO1xuICAgIH1cbiAgICBjbGVhclRpbWVvdXQoKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMudGltZXJIYW5kbGUgJiYgKHRoaXMucmVtb3ZhbENhbGxiYWNrKHRoaXMpLCBjbGVhclRpbWVvdXQodGhpcy50aW1lckhhbmRsZSksIFxuICAgICAgICB0aGlzLnRpbWVySGFuZGxlID0gbnVsbCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSBGaXJlc3RvcmVFcnJvciB0aGF0IGNhbiBiZSBzdXJmYWNlZCB0byB0aGUgdXNlciBpZiB0aGUgcHJvdmlkZWRcbiAqIGVycm9yIGlzIGFuIEluZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IuIFJlLXRocm93cyB0aGUgZXJyb3Igb3RoZXJ3aXNlLlxuICovIGZ1bmN0aW9uIE9vKHQsIGUpIHtcbiAgICBpZiAoRihcIkFzeW5jUXVldWVcIiwgYCR7ZX06ICR7dH1gKSwgWHModCkpIHJldHVybiBuZXcgaihLLlVOQVZBSUxBQkxFLCBgJHtlfTogJHt0fWApO1xuICAgIHRocm93IHQ7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIERvY3VtZW50U2V0IGlzIGFuIGltbXV0YWJsZSAoY29weS1vbi13cml0ZSkgY29sbGVjdGlvbiB0aGF0IGhvbGRzIGRvY3VtZW50c1xuICogaW4gb3JkZXIgc3BlY2lmaWVkIGJ5IHRoZSBwcm92aWRlZCBjb21wYXJhdG9yLiBXZSBhbHdheXMgYWRkIGEgZG9jdW1lbnQga2V5XG4gKiBjb21wYXJhdG9yIG9uIHRvcCBvZiB3aGF0IGlzIHByb3ZpZGVkIHRvIGd1YXJhbnRlZSBkb2N1bWVudCBlcXVhbGl0eSBiYXNlZCBvblxuICogdGhlIGtleS5cbiAqLyBjbGFzcyBNbyB7XG4gICAgLyoqIFRoZSBkZWZhdWx0IG9yZGVyaW5nIGlzIGJ5IGtleSBpZiB0aGUgY29tcGFyYXRvciBpcyBvbWl0dGVkICovXG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICAvLyBXZSBhcmUgYWRkaW5nIGRvY3VtZW50IGtleSBjb21wYXJhdG9yIHRvIHRoZSBlbmQgYXMgaXQncyB0aGUgb25seVxuICAgICAgICAvLyBndWFyYW50ZWVkIHVuaXF1ZSBwcm9wZXJ0eSBvZiBhIGRvY3VtZW50LlxuICAgICAgICB0aGlzLmNvbXBhcmF0b3IgPSB0ID8gKGUsIG4pID0+IHQoZSwgbikgfHwgU3QuY29tcGFyYXRvcihlLmtleSwgbi5rZXkpIDogKHQsIGUpID0+IFN0LmNvbXBhcmF0b3IodC5rZXksIGUua2V5KSwgXG4gICAgICAgIHRoaXMua2V5ZWRNYXAgPSBQbigpLCB0aGlzLnNvcnRlZFNldCA9IG5ldyBnbih0aGlzLmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGVtcHR5IGNvcHkgb2YgdGhlIGV4aXN0aW5nIERvY3VtZW50U2V0LCB1c2luZyB0aGUgc2FtZVxuICAgICAqIGNvbXBhcmF0b3IuXG4gICAgICovICAgIHN0YXRpYyBlbXB0eVNldCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgTW8odC5jb21wYXJhdG9yKTtcbiAgICB9XG4gICAgaGFzKHQpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT0gdGhpcy5rZXllZE1hcC5nZXQodCk7XG4gICAgfVxuICAgIGdldCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtleWVkTWFwLmdldCh0KTtcbiAgICB9XG4gICAgZmlyc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5taW5LZXkoKTtcbiAgICB9XG4gICAgbGFzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydGVkU2V0Lm1heEtleSgpO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3J0ZWRTZXQuaXNFbXB0eSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgcHJvdmlkZWQga2V5IGluIHRoZSBkb2N1bWVudCBzZXQsIG9yIC0xIGlmIHRoZVxuICAgICAqIGRvY3VtZW50IGtleSBpcyBub3QgcHJlc2VudCBpbiB0aGUgc2V0O1xuICAgICAqLyAgICBpbmRleE9mKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMua2V5ZWRNYXAuZ2V0KHQpO1xuICAgICAgICByZXR1cm4gZSA/IHRoaXMuc29ydGVkU2V0LmluZGV4T2YoZSkgOiAtMTtcbiAgICB9XG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5zaXplO1xuICAgIH1cbiAgICAvKiogSXRlcmF0ZXMgZG9jdW1lbnRzIGluIG9yZGVyIGRlZmluZWQgYnkgXCJjb21wYXJhdG9yXCIgKi8gICAgZm9yRWFjaCh0KSB7XG4gICAgICAgIHRoaXMuc29ydGVkU2V0Lmlub3JkZXJUcmF2ZXJzYWwoKChlLCBuKSA9PiAodChlKSwgITEpKSk7XG4gICAgfVxuICAgIC8qKiBJbnNlcnRzIG9yIHVwZGF0ZXMgYSBkb2N1bWVudCB3aXRoIHRoZSBzYW1lIGtleSAqLyAgICBhZGQodCkge1xuICAgICAgICAvLyBGaXJzdCByZW1vdmUgdGhlIGVsZW1lbnQgaWYgd2UgaGF2ZSBpdC5cbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZGVsZXRlKHQua2V5KTtcbiAgICAgICAgcmV0dXJuIGUuY29weShlLmtleWVkTWFwLmluc2VydCh0LmtleSwgdCksIGUuc29ydGVkU2V0Lmluc2VydCh0LCBudWxsKSk7XG4gICAgfVxuICAgIC8qKiBEZWxldGVzIGEgZG9jdW1lbnQgd2l0aCBhIGdpdmVuIGtleSAqLyAgICBkZWxldGUodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5nZXQodCk7XG4gICAgICAgIHJldHVybiBlID8gdGhpcy5jb3B5KHRoaXMua2V5ZWRNYXAucmVtb3ZlKHQpLCB0aGlzLnNvcnRlZFNldC5yZW1vdmUoZSkpIDogdGhpcztcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIGlmICghKHQgaW5zdGFuY2VvZiBNbykpIHJldHVybiAhMTtcbiAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gdC5zaXplKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnNvcnRlZFNldC5nZXRJdGVyYXRvcigpLCBuID0gdC5zb3J0ZWRTZXQuZ2V0SXRlcmF0b3IoKTtcbiAgICAgICAgZm9yICg7ZS5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUuZ2V0TmV4dCgpLmtleSwgcyA9IG4uZ2V0TmV4dCgpLmtleTtcbiAgICAgICAgICAgIGlmICghdC5pc0VxdWFsKHMpKSByZXR1cm4gITE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHQucHVzaChlLnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSksIDAgPT09IHQubGVuZ3RoID8gXCJEb2N1bWVudFNldCAoKVwiIDogXCJEb2N1bWVudFNldCAoXFxuICBcIiArIHQuam9pbihcIiAgXFxuXCIpICsgXCJcXG4pXCI7XG4gICAgfVxuICAgIGNvcHkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbmV3IE1vO1xuICAgICAgICByZXR1cm4gbi5jb21wYXJhdG9yID0gdGhpcy5jb21wYXJhdG9yLCBuLmtleWVkTWFwID0gdCwgbi5zb3J0ZWRTZXQgPSBlLCBuO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRG9jdW1lbnRDaGFuZ2VTZXQga2VlcHMgdHJhY2sgb2YgYSBzZXQgb2YgY2hhbmdlcyB0byBkb2NzIGluIGEgcXVlcnksIG1lcmdpbmdcbiAqIGR1cGxpY2F0ZSBldmVudHMgZm9yIHRoZSBzYW1lIGRvYy5cbiAqLyBjbGFzcyBMbyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuZW8gPSBuZXcgZ24oU3QuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIHRyYWNrKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuZG9jLmtleSwgbiA9IHRoaXMuZW8uZ2V0KGUpO1xuICAgICAgICBuID8gXG4gICAgICAgIC8vIE1lcmdlIHRoZSBuZXcgY2hhbmdlIHdpdGggdGhlIGV4aXN0aW5nIGNoYW5nZS5cbiAgICAgICAgMCAvKiBBZGRlZCAqLyAhPT0gdC50eXBlICYmIDMgLyogTWV0YWRhdGEgKi8gPT09IG4udHlwZSA/IHRoaXMuZW8gPSB0aGlzLmVvLmluc2VydChlLCB0KSA6IDMgLyogTWV0YWRhdGEgKi8gPT09IHQudHlwZSAmJiAxIC8qIFJlbW92ZWQgKi8gIT09IG4udHlwZSA/IHRoaXMuZW8gPSB0aGlzLmVvLmluc2VydChlLCB7XG4gICAgICAgICAgICB0eXBlOiBuLnR5cGUsXG4gICAgICAgICAgICBkb2M6IHQuZG9jXG4gICAgICAgIH0pIDogMiAvKiBNb2RpZmllZCAqLyA9PT0gdC50eXBlICYmIDIgLyogTW9kaWZpZWQgKi8gPT09IG4udHlwZSA/IHRoaXMuZW8gPSB0aGlzLmVvLmluc2VydChlLCB7XG4gICAgICAgICAgICB0eXBlOiAyIC8qIE1vZGlmaWVkICovICxcbiAgICAgICAgICAgIGRvYzogdC5kb2NcbiAgICAgICAgfSkgOiAyIC8qIE1vZGlmaWVkICovID09PSB0LnR5cGUgJiYgMCAvKiBBZGRlZCAqLyA9PT0gbi50eXBlID8gdGhpcy5lbyA9IHRoaXMuZW8uaW5zZXJ0KGUsIHtcbiAgICAgICAgICAgIHR5cGU6IDAgLyogQWRkZWQgKi8gLFxuICAgICAgICAgICAgZG9jOiB0LmRvY1xuICAgICAgICB9KSA6IDEgLyogUmVtb3ZlZCAqLyA9PT0gdC50eXBlICYmIDAgLyogQWRkZWQgKi8gPT09IG4udHlwZSA/IHRoaXMuZW8gPSB0aGlzLmVvLnJlbW92ZShlKSA6IDEgLyogUmVtb3ZlZCAqLyA9PT0gdC50eXBlICYmIDIgLyogTW9kaWZpZWQgKi8gPT09IG4udHlwZSA/IHRoaXMuZW8gPSB0aGlzLmVvLmluc2VydChlLCB7XG4gICAgICAgICAgICB0eXBlOiAxIC8qIFJlbW92ZWQgKi8gLFxuICAgICAgICAgICAgZG9jOiBuLmRvY1xuICAgICAgICB9KSA6IDAgLyogQWRkZWQgKi8gPT09IHQudHlwZSAmJiAxIC8qIFJlbW92ZWQgKi8gPT09IG4udHlwZSA/IHRoaXMuZW8gPSB0aGlzLmVvLmluc2VydChlLCB7XG4gICAgICAgICAgICB0eXBlOiAyIC8qIE1vZGlmaWVkICovICxcbiAgICAgICAgICAgIGRvYzogdC5kb2NcbiAgICAgICAgfSkgOiBcbiAgICAgICAgLy8gVGhpcyBpbmNsdWRlcyB0aGVzZSBjYXNlcywgd2hpY2ggZG9uJ3QgbWFrZSBzZW5zZTpcbiAgICAgICAgLy8gQWRkZWQtPkFkZGVkXG4gICAgICAgIC8vIFJlbW92ZWQtPlJlbW92ZWRcbiAgICAgICAgLy8gTW9kaWZpZWQtPkFkZGVkXG4gICAgICAgIC8vIFJlbW92ZWQtPk1vZGlmaWVkXG4gICAgICAgIC8vIE1ldGFkYXRhLT5BZGRlZFxuICAgICAgICAvLyBSZW1vdmVkLT5NZXRhZGF0YVxuICAgICAgICBMKCkgOiB0aGlzLmVvID0gdGhpcy5lby5pbnNlcnQoZSwgdCk7XG4gICAgfVxuICAgIG5vKCkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmVvLmlub3JkZXJUcmF2ZXJzYWwoKChlLCBuKSA9PiB7XG4gICAgICAgICAgICB0LnB1c2gobik7XG4gICAgICAgIH0pKSwgdDtcbiAgICB9XG59XG5cbmNsYXNzIEJvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByLCBvLCBhKSB7XG4gICAgICAgIHRoaXMucXVlcnkgPSB0LCB0aGlzLmRvY3MgPSBlLCB0aGlzLm9sZERvY3MgPSBuLCB0aGlzLmRvY0NoYW5nZXMgPSBzLCB0aGlzLm11dGF0ZWRLZXlzID0gaSwgXG4gICAgICAgIHRoaXMuZnJvbUNhY2hlID0gciwgdGhpcy5zeW5jU3RhdGVDaGFuZ2VkID0gbywgdGhpcy5leGNsdWRlc01ldGFkYXRhQ2hhbmdlcyA9IGE7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgdmlldyBzbmFwc2hvdCBhcyBpZiBhbGwgZG9jdW1lbnRzIGluIHRoZSBzbmFwc2hvdCB3ZXJlIGFkZGVkLiAqLyAgICBzdGF0aWMgZnJvbUluaXRpYWxEb2N1bWVudHModCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0gW107XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgaS5wdXNoKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAwIC8qIEFkZGVkICovICxcbiAgICAgICAgICAgICAgICBkb2M6IHRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSksIG5ldyBCbyh0LCBlLCBNby5lbXB0eVNldChlKSwgaSwgbiwgcywgXG4gICAgICAgIC8qIHN5bmNTdGF0ZUNoYW5nZWQ9ICovICEwLCBcbiAgICAgICAgLyogZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXM9ICovICExKTtcbiAgICB9XG4gICAgZ2V0IGhhc1BlbmRpbmdXcml0ZXMoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5tdXRhdGVkS2V5cy5pc0VtcHR5KCk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICBpZiAoISh0aGlzLmZyb21DYWNoZSA9PT0gdC5mcm9tQ2FjaGUgJiYgdGhpcy5zeW5jU3RhdGVDaGFuZ2VkID09PSB0LnN5bmNTdGF0ZUNoYW5nZWQgJiYgdGhpcy5tdXRhdGVkS2V5cy5pc0VxdWFsKHQubXV0YXRlZEtleXMpICYmIGJlKHRoaXMucXVlcnksIHQucXVlcnkpICYmIHRoaXMuZG9jcy5pc0VxdWFsKHQuZG9jcykgJiYgdGhpcy5vbGREb2NzLmlzRXF1YWwodC5vbGREb2NzKSkpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZG9jQ2hhbmdlcywgbiA9IHQuZG9jQ2hhbmdlcztcbiAgICAgICAgaWYgKGUubGVuZ3RoICE9PSBuLmxlbmd0aCkgcmV0dXJuICExO1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IGUubGVuZ3RoOyB0KyspIGlmIChlW3RdLnR5cGUgIT09IG5bdF0udHlwZSB8fCAhZVt0XS5kb2MuaXNFcXVhbChuW3RdLmRvYykpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSG9sZHMgdGhlIGxpc3RlbmVycyBhbmQgdGhlIGxhc3QgcmVjZWl2ZWQgVmlld1NuYXBzaG90IGZvciBhIHF1ZXJ5IGJlaW5nXG4gKiB0cmFja2VkIGJ5IEV2ZW50TWFuYWdlci5cbiAqLyBjbGFzcyBVbyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc28gPSB2b2lkIDAsIHRoaXMubGlzdGVuZXJzID0gW107XG4gICAgfVxufVxuXG5jbGFzcyBxbyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucXVlcmllcyA9IG5ldyBHaSgodCA9PiB2ZSh0KSksIGJlKSwgdGhpcy5vbmxpbmVTdGF0ZSA9IFwiVW5rbm93blwiIC8qIFVua25vd24gKi8gLCBcbiAgICAgICAgdGhpcy5pbyA9IG5ldyBTZXQ7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBLbyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IHEodCksIHMgPSBlLnF1ZXJ5O1xuICAgIGxldCBpID0gITEsIHIgPSBuLnF1ZXJpZXMuZ2V0KHMpO1xuICAgIGlmIChyIHx8IChpID0gITAsIHIgPSBuZXcgVW8pLCBpKSB0cnkge1xuICAgICAgICByLnNvID0gYXdhaXQgbi5vbkxpc3RlbihzKTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBPbyh0LCBgSW5pdGlhbGl6YXRpb24gb2YgcXVlcnkgJyR7VmUoZS5xdWVyeSl9JyBmYWlsZWRgKTtcbiAgICAgICAgcmV0dXJuIHZvaWQgZS5vbkVycm9yKG4pO1xuICAgIH1cbiAgICBpZiAobi5xdWVyaWVzLnNldChzLCByKSwgci5saXN0ZW5lcnMucHVzaChlKSwgXG4gICAgLy8gUnVuIGdsb2JhbCBzbmFwc2hvdCBsaXN0ZW5lcnMgaWYgYSBjb25zaXN0ZW50IHNuYXBzaG90IGhhcyBiZWVuIGVtaXR0ZWQuXG4gICAgZS5ybyhuLm9ubGluZVN0YXRlKSwgci5zbykge1xuICAgICAgICBlLm9vKHIuc28pICYmIEdvKG4pO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gam8odCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpLCBzID0gZS5xdWVyeTtcbiAgICBsZXQgaSA9ICExO1xuICAgIGNvbnN0IHIgPSBuLnF1ZXJpZXMuZ2V0KHMpO1xuICAgIGlmIChyKSB7XG4gICAgICAgIGNvbnN0IHQgPSByLmxpc3RlbmVycy5pbmRleE9mKGUpO1xuICAgICAgICB0ID49IDAgJiYgKHIubGlzdGVuZXJzLnNwbGljZSh0LCAxKSwgaSA9IDAgPT09IHIubGlzdGVuZXJzLmxlbmd0aCk7XG4gICAgfVxuICAgIGlmIChpKSByZXR1cm4gbi5xdWVyaWVzLmRlbGV0ZShzKSwgbi5vblVubGlzdGVuKHMpO1xufVxuXG5mdW5jdGlvbiBRbyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IHEodCk7XG4gICAgbGV0IHMgPSAhMTtcbiAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICBjb25zdCBlID0gdC5xdWVyeSwgaSA9IG4ucXVlcmllcy5nZXQoZSk7XG4gICAgICAgIGlmIChpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgaS5saXN0ZW5lcnMpIGUub28odCkgJiYgKHMgPSAhMCk7XG4gICAgICAgICAgICBpLnNvID0gdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzICYmIEdvKG4pO1xufVxuXG5mdW5jdGlvbiBXbyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHEodCksIGkgPSBzLnF1ZXJpZXMuZ2V0KGUpO1xuICAgIGlmIChpKSBmb3IgKGNvbnN0IHQgb2YgaS5saXN0ZW5lcnMpIHQub25FcnJvcihuKTtcbiAgICAvLyBSZW1vdmUgYWxsIGxpc3RlbmVycy4gTk9URTogV2UgZG9uJ3QgbmVlZCB0byBjYWxsIHN5bmNFbmdpbmUudW5saXN0ZW4oKVxuICAgIC8vIGFmdGVyIGFuIGVycm9yLlxuICAgICAgICBzLnF1ZXJpZXMuZGVsZXRlKGUpO1xufVxuXG4vLyBDYWxsIGFsbCBnbG9iYWwgc25hcHNob3QgbGlzdGVuZXJzIHRoYXQgaGF2ZSBiZWVuIHNldC5cbmZ1bmN0aW9uIEdvKHQpIHtcbiAgICB0LmlvLmZvckVhY2goKHQgPT4ge1xuICAgICAgICB0Lm5leHQoKTtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogUXVlcnlMaXN0ZW5lciB0YWtlcyBhIHNlcmllcyBvZiBpbnRlcm5hbCB2aWV3IHNuYXBzaG90cyBhbmQgZGV0ZXJtaW5lc1xuICogd2hlbiB0byByYWlzZSB0aGUgZXZlbnQuXG4gKlxuICogSXQgdXNlcyBhbiBPYnNlcnZlciB0byBkaXNwYXRjaCBldmVudHMuXG4gKi8gY2xhc3Mgem8ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5xdWVyeSA9IHQsIHRoaXMuYW8gPSBlLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluaXRpYWwgc25hcHNob3RzIChlLmcuIGZyb20gY2FjaGUpIG1heSBub3QgYmUgcHJvcGFnYXRlZCB0byB0aGUgd3JhcHBlZFxuICAgICAgICAgKiBvYnNlcnZlci4gVGhpcyBmbGFnIGlzIHNldCB0byB0cnVlIG9uY2Ugd2UndmUgYWN0dWFsbHkgcmFpc2VkIGFuIGV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jbyA9ICExLCB0aGlzLnVvID0gbnVsbCwgdGhpcy5vbmxpbmVTdGF0ZSA9IFwiVW5rbm93blwiIC8qIFVua25vd24gKi8gLCB0aGlzLm9wdGlvbnMgPSBuIHx8IHt9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHRoZSBuZXcgVmlld1NuYXBzaG90IHRvIHRoaXMgbGlzdGVuZXIsIHJhaXNpbmcgYSB1c2VyLWZhY2luZyBldmVudFxuICAgICAqIGlmIGFwcGxpY2FibGUgKGRlcGVuZGluZyBvbiB3aGF0IGNoYW5nZWQsIHdoZXRoZXIgdGhlIHVzZXIgaGFzIG9wdGVkIGludG9cbiAgICAgKiBtZXRhZGF0YS1vbmx5IGNoYW5nZXMsIGV0Yy4pLiBSZXR1cm5zIHRydWUgaWYgYSB1c2VyLWZhY2luZyBldmVudCB3YXNcbiAgICAgKiBpbmRlZWQgcmFpc2VkLlxuICAgICAqLyAgICBvbyh0KSB7XG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXMpIHtcbiAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgbWV0YWRhdGEgb25seSBjaGFuZ2VzLlxuICAgICAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIHQuZG9jQ2hhbmdlcykgMyAvKiBNZXRhZGF0YSAqLyAhPT0gbi50eXBlICYmIGUucHVzaChuKTtcbiAgICAgICAgICAgIHQgPSBuZXcgQm8odC5xdWVyeSwgdC5kb2NzLCB0Lm9sZERvY3MsIGUsIHQubXV0YXRlZEtleXMsIHQuZnJvbUNhY2hlLCB0LnN5bmNTdGF0ZUNoYW5nZWQsIFxuICAgICAgICAgICAgLyogZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXM9ICovICEwKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZSA9ICExO1xuICAgICAgICByZXR1cm4gdGhpcy5jbyA/IHRoaXMuaG8odCkgJiYgKHRoaXMuYW8ubmV4dCh0KSwgZSA9ICEwKSA6IHRoaXMubG8odCwgdGhpcy5vbmxpbmVTdGF0ZSkgJiYgKHRoaXMuZm8odCksIFxuICAgICAgICBlID0gITApLCB0aGlzLnVvID0gdCwgZTtcbiAgICB9XG4gICAgb25FcnJvcih0KSB7XG4gICAgICAgIHRoaXMuYW8uZXJyb3IodCk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHdoZXRoZXIgYSBzbmFwc2hvdCB3YXMgcmFpc2VkLiAqLyAgICBybyh0KSB7XG4gICAgICAgIHRoaXMub25saW5lU3RhdGUgPSB0O1xuICAgICAgICBsZXQgZSA9ICExO1xuICAgICAgICByZXR1cm4gdGhpcy51byAmJiAhdGhpcy5jbyAmJiB0aGlzLmxvKHRoaXMudW8sIHQpICYmICh0aGlzLmZvKHRoaXMudW8pLCBlID0gITApLCBcbiAgICAgICAgZTtcbiAgICB9XG4gICAgbG8odCwgZSkge1xuICAgICAgICAvLyBBbHdheXMgcmFpc2UgdGhlIGZpcnN0IGV2ZW50IHdoZW4gd2UncmUgc3luY2VkXG4gICAgICAgIGlmICghdC5mcm9tQ2FjaGUpIHJldHVybiAhMDtcbiAgICAgICAgLy8gTk9URTogV2UgY29uc2lkZXIgT25saW5lU3RhdGUuVW5rbm93biBhcyBvbmxpbmUgKGl0IHNob3VsZCBiZWNvbWUgT2ZmbGluZVxuICAgICAgICAvLyBvciBPbmxpbmUgaWYgd2Ugd2FpdCBsb25nIGVub3VnaCkuXG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IFwiT2ZmbGluZVwiIC8qIE9mZmxpbmUgKi8gIT09IGU7XG4gICAgICAgIC8vIERvbid0IHJhaXNlIHRoZSBldmVudCBpZiB3ZSdyZSBvbmxpbmUsIGFyZW4ndCBzeW5jZWQgeWV0IChjaGVja2VkXG4gICAgICAgIC8vIGFib3ZlKSBhbmQgYXJlIHdhaXRpbmcgZm9yIGEgc3luYy5cbiAgICAgICAgICAgICAgICByZXR1cm4gKCF0aGlzLm9wdGlvbnMud28gfHwgIW4pICYmICghdC5kb2NzLmlzRW1wdHkoKSB8fCBcIk9mZmxpbmVcIiAvKiBPZmZsaW5lICovID09PSBlKTtcbiAgICAgICAgLy8gUmFpc2UgZGF0YSBmcm9tIGNhY2hlIGlmIHdlIGhhdmUgYW55IGRvY3VtZW50cyBvciB3ZSBhcmUgb2ZmbGluZVxuICAgICAgICB9XG4gICAgaG8odCkge1xuICAgICAgICAvLyBXZSBkb24ndCBuZWVkIHRvIGhhbmRsZSBpbmNsdWRlRG9jdW1lbnRNZXRhZGF0YUNoYW5nZXMgaGVyZSBiZWNhdXNlXG4gICAgICAgIC8vIHRoZSBNZXRhZGF0YSBvbmx5IGNoYW5nZXMgaGF2ZSBhbHJlYWR5IGJlZW4gc3RyaXBwZWQgb3V0IGlmIG5lZWRlZC5cbiAgICAgICAgLy8gQXQgdGhpcyBwb2ludCB0aGUgb25seSBjaGFuZ2VzIHdlIHdpbGwgc2VlIGFyZSB0aGUgb25lcyB3ZSBzaG91bGRcbiAgICAgICAgLy8gcHJvcGFnYXRlLlxuICAgICAgICBpZiAodC5kb2NDaGFuZ2VzLmxlbmd0aCA+IDApIHJldHVybiAhMDtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMudW8gJiYgdGhpcy51by5oYXNQZW5kaW5nV3JpdGVzICE9PSB0Lmhhc1BlbmRpbmdXcml0ZXM7XG4gICAgICAgIHJldHVybiAhKCF0LnN5bmNTdGF0ZUNoYW5nZWQgJiYgIWUpICYmICEwID09PSB0aGlzLm9wdGlvbnMuaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcztcbiAgICAgICAgLy8gR2VuZXJhbGx5IHdlIHNob3VsZCBoYXZlIGhpdCBvbmUgb2YgdGhlIGNhc2VzIGFib3ZlLCBidXQgaXQncyBwb3NzaWJsZVxuICAgICAgICAvLyB0byBnZXQgaGVyZSBpZiB0aGVyZSB3ZXJlIG9ubHkgbWV0YWRhdGEgZG9jQ2hhbmdlcyBhbmQgdGhleSBnb3RcbiAgICAgICAgLy8gc3RyaXBwZWQgb3V0LlxuICAgICAgICB9XG4gICAgZm8odCkge1xuICAgICAgICB0ID0gQm8uZnJvbUluaXRpYWxEb2N1bWVudHModC5xdWVyeSwgdC5kb2NzLCB0Lm11dGF0ZWRLZXlzLCB0LmZyb21DYWNoZSksIHRoaXMuY28gPSAhMCwgXG4gICAgICAgIHRoaXMuYW8ubmV4dCh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgY29tcGxldGUgZWxlbWVudCBpbiB0aGUgYnVuZGxlIHN0cmVhbSwgdG9nZXRoZXIgd2l0aCB0aGUgYnl0ZSBsZW5ndGggaXRcbiAqIG9jY3VwaWVzIGluIHRoZSBzdHJlYW0uXG4gKi8gY2xhc3MgSG8ge1xuICAgIGNvbnN0cnVjdG9yKHQsIFxuICAgIC8vIEhvdyBtYW55IGJ5dGVzIHRoaXMgZWxlbWVudCB0YWtlcyB0byBzdG9yZSBpbiB0aGUgYnVuZGxlLlxuICAgIGUpIHtcbiAgICAgICAgdGhpcy5wYXlsb2FkID0gdCwgdGhpcy5ieXRlTGVuZ3RoID0gZTtcbiAgICB9XG4gICAgX28oKSB7XG4gICAgICAgIHJldHVybiBcIm1ldGFkYXRhXCIgaW4gdGhpcy5wYXlsb2FkO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSGVscGVyIHRvIGNvbnZlcnQgb2JqZWN0cyBmcm9tIGJ1bmRsZXMgdG8gbW9kZWwgb2JqZWN0cyBpbiB0aGUgU0RLLlxuICovIGNsYXNzIEpvIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuayA9IHQ7XG4gICAgfVxuICAgIEhuKHQpIHtcbiAgICAgICAgcmV0dXJuIFluKHRoaXMuaywgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGEgQnVuZGxlRG9jdW1lbnQgdG8gYSBNdXRhYmxlRG9jdW1lbnQuXG4gICAgICovICAgIEpuKHQpIHtcbiAgICAgICAgcmV0dXJuIHQubWV0YWRhdGEuZXhpc3RzID8gc3ModGhpcy5rLCB0LmRvY3VtZW50LCAhMSkgOiBXdC5uZXdOb0RvY3VtZW50KHRoaXMuSG4odC5tZXRhZGF0YS5uYW1lKSwgdGhpcy5Zbih0Lm1ldGFkYXRhLnJlYWRUaW1lKSk7XG4gICAgfVxuICAgIFluKHQpIHtcbiAgICAgICAgcmV0dXJuIEduKHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGNsYXNzIHRvIHByb2Nlc3MgdGhlIGVsZW1lbnRzIGZyb20gYSBidW5kbGUsIGxvYWQgdGhlbSBpbnRvIGxvY2FsXG4gKiBzdG9yYWdlIGFuZCBwcm92aWRlIHByb2dyZXNzIHVwZGF0ZSB3aGlsZSBsb2FkaW5nLlxuICovIGNsYXNzIFlvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMubW8gPSB0LCB0aGlzLmxvY2FsU3RvcmUgPSBlLCB0aGlzLmsgPSBuLCBcbiAgICAgICAgLyoqIEJhdGNoZWQgcXVlcmllcyB0byBiZSBzYXZlZCBpbnRvIHN0b3JhZ2UgKi9cbiAgICAgICAgdGhpcy5xdWVyaWVzID0gW10sIFxuICAgICAgICAvKiogQmF0Y2hlZCBkb2N1bWVudHMgdG8gYmUgc2F2ZWQgaW50byBzdG9yYWdlICovXG4gICAgICAgIHRoaXMuZG9jdW1lbnRzID0gW10sIHRoaXMucHJvZ3Jlc3MgPSBYbyh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhbiBlbGVtZW50IGZyb20gdGhlIGJ1bmRsZSB0byB0aGUgbG9hZGVyLlxuICAgICAqXG4gICAgICogUmV0dXJucyBhIG5ldyBwcm9ncmVzcyBpZiBhZGRpbmcgdGhlIGVsZW1lbnQgbGVhZHMgdG8gYSBuZXcgcHJvZ3Jlc3MsXG4gICAgICogb3RoZXJ3aXNlIHJldHVybnMgbnVsbC5cbiAgICAgKi8gICAgeW8odCkge1xuICAgICAgICB0aGlzLnByb2dyZXNzLmJ5dGVzTG9hZGVkICs9IHQuYnl0ZUxlbmd0aDtcbiAgICAgICAgbGV0IGUgPSB0aGlzLnByb2dyZXNzLmRvY3VtZW50c0xvYWRlZDtcbiAgICAgICAgcmV0dXJuIHQucGF5bG9hZC5uYW1lZFF1ZXJ5ID8gdGhpcy5xdWVyaWVzLnB1c2godC5wYXlsb2FkLm5hbWVkUXVlcnkpIDogdC5wYXlsb2FkLmRvY3VtZW50TWV0YWRhdGEgPyAodGhpcy5kb2N1bWVudHMucHVzaCh7XG4gICAgICAgICAgICBtZXRhZGF0YTogdC5wYXlsb2FkLmRvY3VtZW50TWV0YWRhdGFcbiAgICAgICAgfSksIHQucGF5bG9hZC5kb2N1bWVudE1ldGFkYXRhLmV4aXN0cyB8fCArK2UpIDogdC5wYXlsb2FkLmRvY3VtZW50ICYmICh0aGlzLmRvY3VtZW50c1t0aGlzLmRvY3VtZW50cy5sZW5ndGggLSAxXS5kb2N1bWVudCA9IHQucGF5bG9hZC5kb2N1bWVudCwgXG4gICAgICAgICsrZSksIGUgIT09IHRoaXMucHJvZ3Jlc3MuZG9jdW1lbnRzTG9hZGVkID8gKHRoaXMucHJvZ3Jlc3MuZG9jdW1lbnRzTG9hZGVkID0gZSwgXG4gICAgICAgIE9iamVjdC5hc3NpZ24oe30sIHRoaXMucHJvZ3Jlc3MpKSA6IG51bGw7XG4gICAgfVxuICAgIHBvKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBNYXAsIG4gPSBuZXcgSm8odGhpcy5rKTtcbiAgICAgICAgZm9yIChjb25zdCBzIG9mIHQpIGlmIChzLm1ldGFkYXRhLnF1ZXJpZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuLkhuKHMubWV0YWRhdGEubmFtZSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2Ygcy5tZXRhZGF0YS5xdWVyaWVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IChlLmdldChuKSB8fCBTbigpKS5hZGQodCk7XG4gICAgICAgICAgICAgICAgZS5zZXQobiwgcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgcHJvZ3Jlc3MgdG8gJ1N1Y2Nlc3MnIGFuZCByZXR1cm4gdGhlIHVwZGF0ZWQgcHJvZ3Jlc3MuXG4gICAgICovICAgIGFzeW5jIGNvbXBsZXRlKCkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgUHIodGhpcy5sb2NhbFN0b3JlLCBuZXcgSm8odGhpcy5rKSwgdGhpcy5kb2N1bWVudHMsIHRoaXMubW8uaWQpLCBlID0gdGhpcy5wbyh0aGlzLmRvY3VtZW50cyk7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLnF1ZXJpZXMpIGF3YWl0IGJyKHRoaXMubG9jYWxTdG9yZSwgdCwgZS5nZXQodC5uYW1lKSk7XG4gICAgICAgIHJldHVybiB0aGlzLnByb2dyZXNzLnRhc2tTdGF0ZSA9IFwiU3VjY2Vzc1wiLCBuZXcgYXIoT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5wcm9ncmVzcyksIHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgYExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3NgIHJlcHJlc2VudGluZyB0aGUgaW5pdGlhbCBwcm9ncmVzcyBvZlxuICogbG9hZGluZyBhIGJ1bmRsZS5cbiAqLyBmdW5jdGlvbiBYbyh0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdGFza1N0YXRlOiBcIlJ1bm5pbmdcIixcbiAgICAgICAgZG9jdW1lbnRzTG9hZGVkOiAwLFxuICAgICAgICBieXRlc0xvYWRlZDogMCxcbiAgICAgICAgdG90YWxEb2N1bWVudHM6IHQudG90YWxEb2N1bWVudHMsXG4gICAgICAgIHRvdGFsQnl0ZXM6IHQudG90YWxCeXRlc1xuICAgIH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGBMb2FkQnVuZGxlVGFza1Byb2dyZXNzYCByZXByZXNlbnRpbmcgdGhlIHByb2dyZXNzIHRoYXQgdGhlIGxvYWRpbmdcbiAqIGhhcyBzdWNjZWVkZWQuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jbGFzcyBabyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmtleSA9IHQ7XG4gICAgfVxufVxuXG5jbGFzcyB0YSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmtleSA9IHQ7XG4gICAgfVxufVxuXG4vKipcbiAqIFZpZXcgaXMgcmVzcG9uc2libGUgZm9yIGNvbXB1dGluZyB0aGUgZmluYWwgbWVyZ2VkIHRydXRoIG9mIHdoYXQgZG9jcyBhcmUgaW5cbiAqIGEgcXVlcnkuIEl0IGdldHMgbm90aWZpZWQgb2YgbG9jYWwgYW5kIHJlbW90ZSBjaGFuZ2VzIHRvIGRvY3MsIGFuZCBhcHBsaWVzXG4gKiB0aGUgcXVlcnkgZmlsdGVycyBhbmQgbGltaXRzIHRvIGRldGVybWluZSB0aGUgbW9zdCBjb3JyZWN0IHBvc3NpYmxlIHJlc3VsdHMuXG4gKi8gY2xhc3MgZWEge1xuICAgIGNvbnN0cnVjdG9yKHQsIFxuICAgIC8qKiBEb2N1bWVudHMgaW5jbHVkZWQgaW4gdGhlIHJlbW90ZSB0YXJnZXQgKi9cbiAgICBlKSB7XG4gICAgICAgIHRoaXMucXVlcnkgPSB0LCB0aGlzLlRvID0gZSwgdGhpcy5FbyA9IG51bGwsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBmbGFnIHdoZXRoZXIgdGhlIHZpZXcgaXMgY3VycmVudCB3aXRoIHRoZSBiYWNrZW5kLiBBIHZpZXcgaXMgY29uc2lkZXJlZFxuICAgICAgICAgKiBjdXJyZW50IGFmdGVyIGl0IGhhcyBzZWVuIHRoZSBjdXJyZW50IGZsYWcgZnJvbSB0aGUgYmFja2VuZCBhbmQgZGlkIG5vdFxuICAgICAgICAgKiBsb3NlIGNvbnNpc3RlbmN5IHdpdGhpbiB0aGUgd2F0Y2ggc3RyZWFtIChlLmcuIGJlY2F1c2Ugb2YgYW4gZXhpc3RlbmNlXG4gICAgICAgICAqIGZpbHRlciBtaXNtYXRjaCkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmN1cnJlbnQgPSAhMSwgXG4gICAgICAgIC8qKiBEb2N1bWVudHMgaW4gdGhlIHZpZXcgYnV0IG5vdCBpbiB0aGUgcmVtb3RlIHRhcmdldCAqL1xuICAgICAgICB0aGlzLklvID0gU24oKSwgXG4gICAgICAgIC8qKiBEb2N1bWVudCBLZXlzIHRoYXQgaGF2ZSBsb2NhbCBjaGFuZ2VzICovXG4gICAgICAgIHRoaXMubXV0YXRlZEtleXMgPSBTbigpLCB0aGlzLkFvID0gRGUodCksIHRoaXMuUm8gPSBuZXcgTW8odGhpcy5Bbyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBzZXQgb2YgcmVtb3RlIGRvY3VtZW50cyB0aGF0IHRoZSBzZXJ2ZXIgaGFzIHRvbGQgdXMgYmVsb25ncyB0byB0aGUgdGFyZ2V0IGFzc29jaWF0ZWQgd2l0aFxuICAgICAqIHRoaXMgdmlldy5cbiAgICAgKi8gICAgZ2V0IFBvKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5UbztcbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBhIHNldCBvZiBkb2MgY2hhbmdlcywgYXBwbGllcyB0aGUgcXVlcnkgbGltaXQsIGFuZCBjb21wdXRlc1xuICAgICAqIHdoYXQgdGhlIG5ldyByZXN1bHRzIHNob3VsZCBiZSwgd2hhdCB0aGUgY2hhbmdlcyB3ZXJlLCBhbmQgd2hldGhlciB3ZSBtYXlcbiAgICAgKiBuZWVkIHRvIGdvIGJhY2sgdG8gdGhlIGxvY2FsIGNhY2hlIGZvciBtb3JlIHJlc3VsdHMuIERvZXMgbm90IG1ha2UgYW55XG4gICAgICogY2hhbmdlcyB0byB0aGUgdmlldy5cbiAgICAgKiBAcGFyYW0gZG9jQ2hhbmdlcyAtIFRoZSBkb2MgY2hhbmdlcyB0byBhcHBseSB0byB0aGlzIHZpZXcuXG4gICAgICogQHBhcmFtIHByZXZpb3VzQ2hhbmdlcyAtIElmIHRoaXMgaXMgYmVpbmcgY2FsbGVkIHdpdGggYSByZWZpbGwsIHRoZW4gc3RhcnRcbiAgICAgKiAgICAgICAgd2l0aCB0aGlzIHNldCBvZiBkb2NzIGFuZCBjaGFuZ2VzIGluc3RlYWQgb2YgdGhlIGN1cnJlbnQgdmlldy5cbiAgICAgKiBAcmV0dXJucyBhIG5ldyBzZXQgb2YgZG9jcywgY2hhbmdlcywgYW5kIHJlZmlsbCBmbGFnLlxuICAgICAqLyAgICBibyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlID8gZS52byA6IG5ldyBMbywgcyA9IGUgPyBlLlJvIDogdGhpcy5SbztcbiAgICAgICAgbGV0IGkgPSBlID8gZS5tdXRhdGVkS2V5cyA6IHRoaXMubXV0YXRlZEtleXMsIHIgPSBzLCBvID0gITE7XG4gICAgICAgIC8vIFRyYWNrIHRoZSBsYXN0IGRvYyBpbiBhIChmdWxsKSBsaW1pdC4gVGhpcyBpcyBuZWNlc3NhcnksIGJlY2F1c2Ugc29tZVxuICAgICAgICAvLyB1cGRhdGUgKGEgZGVsZXRlLCBvciBhbiB1cGRhdGUgbW92aW5nIGEgZG9jIHBhc3QgdGhlIG9sZCBsaW1pdCkgbWlnaHRcbiAgICAgICAgLy8gbWVhbiB0aGVyZSBpcyBzb21lIG90aGVyIGRvY3VtZW50IGluIHRoZSBsb2NhbCBjYWNoZSB0aGF0IGVpdGhlciBzaG91bGRcbiAgICAgICAgLy8gY29tZSAoMSkgYmV0d2VlbiB0aGUgb2xkIGxhc3QgbGltaXQgZG9jIGFuZCB0aGUgbmV3IGxhc3QgZG9jdW1lbnQsIGluIHRoZVxuICAgICAgICAvLyBjYXNlIG9mIHVwZGF0ZXMsIG9yICgyKSBhZnRlciB0aGUgbmV3IGxhc3QgZG9jdW1lbnQsIGluIHRoZSBjYXNlIG9mXG4gICAgICAgIC8vIGRlbGV0ZXMuIFNvIHdlIGtlZXAgdGhpcyBkb2MgYXQgdGhlIG9sZCBsaW1pdCB0byBjb21wYXJlIHRoZSB1cGRhdGVzIHRvLlxuICAgICAgICAvLyBOb3RlIHRoYXQgdGhpcyBzaG91bGQgbmV2ZXIgZ2V0IHVzZWQgaW4gYSByZWZpbGwgKHdoZW4gcHJldmlvdXNDaGFuZ2VzIGlzXG4gICAgICAgIC8vIHNldCksIGJlY2F1c2UgdGhlcmUgd2lsbCBvbmx5IGJlIGFkZHMgLS0gbm8gZGVsZXRlcyBvciB1cGRhdGVzLlxuICAgICAgICBjb25zdCBhID0geWUodGhpcy5xdWVyeSkgJiYgcy5zaXplID09PSB0aGlzLnF1ZXJ5LmxpbWl0ID8gcy5sYXN0KCkgOiBudWxsLCBjID0gcGUodGhpcy5xdWVyeSkgJiYgcy5zaXplID09PSB0aGlzLnF1ZXJ5LmxpbWl0ID8gcy5maXJzdCgpIDogbnVsbDtcbiAgICAgICAgLy8gRHJvcCBkb2N1bWVudHMgb3V0IHRvIG1lZXQgbGltaXQvbGltaXRUb0xhc3QgcmVxdWlyZW1lbnQuXG4gICAgICAgIGlmICh0Lmlub3JkZXJUcmF2ZXJzYWwoKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB1ID0gcy5nZXQodCksIGggPSBTZSh0aGlzLnF1ZXJ5LCBlKSA/IGUgOiBudWxsLCBsID0gISF1ICYmIHRoaXMubXV0YXRlZEtleXMuaGFzKHUua2V5KSwgZiA9ICEhaCAmJiAoaC5oYXNMb2NhbE11dGF0aW9ucyB8fCBcbiAgICAgICAgICAgIC8vIFdlIG9ubHkgY29uc2lkZXIgY29tbWl0dGVkIG11dGF0aW9ucyBmb3IgZG9jdW1lbnRzIHRoYXQgd2VyZVxuICAgICAgICAgICAgLy8gbXV0YXRlZCBkdXJpbmcgdGhlIGxpZmV0aW1lIG9mIHRoZSB2aWV3LlxuICAgICAgICAgICAgdGhpcy5tdXRhdGVkS2V5cy5oYXMoaC5rZXkpICYmIGguaGFzQ29tbWl0dGVkTXV0YXRpb25zKTtcbiAgICAgICAgICAgIGxldCBkID0gITE7XG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgY2hhbmdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodSAmJiBoKSB7XG4gICAgICAgICAgICAgICAgdS5kYXRhLmlzRXF1YWwoaC5kYXRhKSA/IGwgIT09IGYgJiYgKG4udHJhY2soe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAzIC8qIE1ldGFkYXRhICovICxcbiAgICAgICAgICAgICAgICAgICAgZG9jOiBoXG4gICAgICAgICAgICAgICAgfSksIGQgPSAhMCkgOiB0aGlzLlZvKHUsIGgpIHx8IChuLnRyYWNrKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogMiAvKiBNb2RpZmllZCAqLyAsXG4gICAgICAgICAgICAgICAgICAgIGRvYzogaFxuICAgICAgICAgICAgICAgIH0pLCBkID0gITAsIChhICYmIHRoaXMuQW8oaCwgYSkgPiAwIHx8IGMgJiYgdGhpcy5BbyhoLCBjKSA8IDApICYmIChcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGRvYyBtb3ZlZCBmcm9tIGluc2lkZSB0aGUgbGltaXQgdG8gb3V0c2lkZSB0aGUgbGltaXQuXG4gICAgICAgICAgICAgICAgLy8gVGhhdCBtZWFucyB0aGVyZSBtYXkgYmUgc29tZSBvdGhlciBkb2MgaW4gdGhlIGxvY2FsIGNhY2hlXG4gICAgICAgICAgICAgICAgLy8gdGhhdCBzaG91bGQgYmUgaW5jbHVkZWQgaW5zdGVhZC5cbiAgICAgICAgICAgICAgICBvID0gITApKTtcbiAgICAgICAgICAgIH0gZWxzZSAhdSAmJiBoID8gKG4udHJhY2soe1xuICAgICAgICAgICAgICAgIHR5cGU6IDAgLyogQWRkZWQgKi8gLFxuICAgICAgICAgICAgICAgIGRvYzogaFxuICAgICAgICAgICAgfSksIGQgPSAhMCkgOiB1ICYmICFoICYmIChuLnRyYWNrKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAxIC8qIFJlbW92ZWQgKi8gLFxuICAgICAgICAgICAgICAgIGRvYzogdVxuICAgICAgICAgICAgfSksIGQgPSAhMCwgKGEgfHwgYykgJiYgKFxuICAgICAgICAgICAgLy8gQSBkb2Mgd2FzIHJlbW92ZWQgZnJvbSBhIGZ1bGwgbGltaXQgcXVlcnkuIFdlJ2xsIG5lZWQgdG9cbiAgICAgICAgICAgIC8vIHJlcXVlcnkgZnJvbSB0aGUgbG9jYWwgY2FjaGUgdG8gc2VlIGlmIHdlIGtub3cgYWJvdXQgc29tZSBvdGhlclxuICAgICAgICAgICAgLy8gZG9jIHRoYXQgc2hvdWxkIGJlIGluIHRoZSByZXN1bHRzLlxuICAgICAgICAgICAgbyA9ICEwKSk7XG4gICAgICAgICAgICBkICYmIChoID8gKHIgPSByLmFkZChoKSwgaSA9IGYgPyBpLmFkZCh0KSA6IGkuZGVsZXRlKHQpKSA6IChyID0gci5kZWxldGUodCksIGkgPSBpLmRlbGV0ZSh0KSkpO1xuICAgICAgICB9KSksIHllKHRoaXMucXVlcnkpIHx8IHBlKHRoaXMucXVlcnkpKSBmb3IgKDtyLnNpemUgPiB0aGlzLnF1ZXJ5LmxpbWl0OyApIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB5ZSh0aGlzLnF1ZXJ5KSA/IHIubGFzdCgpIDogci5maXJzdCgpO1xuICAgICAgICAgICAgciA9IHIuZGVsZXRlKHQua2V5KSwgaSA9IGkuZGVsZXRlKHQua2V5KSwgbi50cmFjayh7XG4gICAgICAgICAgICAgICAgdHlwZTogMSAvKiBSZW1vdmVkICovICxcbiAgICAgICAgICAgICAgICBkb2M6IHRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBSbzogcixcbiAgICAgICAgICAgIHZvOiBuLFxuICAgICAgICAgICAgQm46IG8sXG4gICAgICAgICAgICBtdXRhdGVkS2V5czogaVxuICAgICAgICB9O1xuICAgIH1cbiAgICBWbyh0LCBlKSB7XG4gICAgICAgIC8vIFdlIHN1cHByZXNzIHRoZSBpbml0aWFsIGNoYW5nZSBldmVudCBmb3IgZG9jdW1lbnRzIHRoYXQgd2VyZSBtb2RpZmllZCBhc1xuICAgICAgICAvLyBwYXJ0IG9mIGEgd3JpdGUgYWNrbm93bGVkZ21lbnQgKGUuZy4gd2hlbiB0aGUgdmFsdWUgb2YgYSBzZXJ2ZXIgdHJhbnNmb3JtXG4gICAgICAgIC8vIGlzIGFwcGxpZWQpIGFzIFdhdGNoIHdpbGwgc2VuZCB1cyB0aGUgc2FtZSBkb2N1bWVudCBhZ2Fpbi5cbiAgICAgICAgLy8gQnkgc3VwcHJlc3NpbmcgdGhlIGV2ZW50LCB3ZSBvbmx5IHJhaXNlIHR3byB1c2VyIHZpc2libGUgZXZlbnRzIChvbmUgd2l0aFxuICAgICAgICAvLyBgaGFzUGVuZGluZ1dyaXRlc2AgYW5kIHRoZSBmaW5hbCBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQpIGluc3RlYWQgb2YgdGhyZWVcbiAgICAgICAgLy8gKG9uZSB3aXRoIGBoYXNQZW5kaW5nV3JpdGVzYCwgdGhlIG1vZGlmaWVkIGRvY3VtZW50IHdpdGhcbiAgICAgICAgLy8gYGhhc1BlbmRpbmdXcml0ZXNgIGFuZCB0aGUgZmluYWwgc3RhdGUgb2YgdGhlIGRvY3VtZW50KS5cbiAgICAgICAgcmV0dXJuIHQuaGFzTG9jYWxNdXRhdGlvbnMgJiYgZS5oYXNDb21taXR0ZWRNdXRhdGlvbnMgJiYgIWUuaGFzTG9jYWxNdXRhdGlvbnM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIHZpZXcgd2l0aCB0aGUgZ2l2ZW4gVmlld0RvY3VtZW50Q2hhbmdlcyBhbmQgb3B0aW9uYWxseSB1cGRhdGVzXG4gICAgICogbGltYm8gZG9jcyBhbmQgc3luYyBzdGF0ZSBmcm9tIHRoZSBwcm92aWRlZCB0YXJnZXQgY2hhbmdlLlxuICAgICAqIEBwYXJhbSBkb2NDaGFuZ2VzIC0gVGhlIHNldCBvZiBjaGFuZ2VzIHRvIG1ha2UgdG8gdGhlIHZpZXcncyBkb2NzLlxuICAgICAqIEBwYXJhbSB1cGRhdGVMaW1ib0RvY3VtZW50cyAtIFdoZXRoZXIgdG8gdXBkYXRlIGxpbWJvIGRvY3VtZW50cyBiYXNlZCBvblxuICAgICAqICAgICAgICB0aGlzIGNoYW5nZS5cbiAgICAgKiBAcGFyYW0gdGFyZ2V0Q2hhbmdlIC0gQSB0YXJnZXQgY2hhbmdlIHRvIGFwcGx5IGZvciBjb21wdXRpbmcgbGltYm8gZG9jcyBhbmRcbiAgICAgKiAgICAgICAgc3luYyBzdGF0ZS5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBWaWV3Q2hhbmdlIHdpdGggdGhlIGdpdmVuIGRvY3MsIGNoYW5nZXMsIGFuZCBzeW5jIHN0YXRlLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogVGhlIGlPUy9BbmRyb2lkIGNsaWVudHMgYWx3YXlzIGNvbXB1dGUgbGltYm8gZG9jdW1lbnQgY2hhbmdlcy5cbiAgICBhcHBseUNoYW5nZXModCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gdGhpcy5SbztcbiAgICAgICAgdGhpcy5SbyA9IHQuUm8sIHRoaXMubXV0YXRlZEtleXMgPSB0Lm11dGF0ZWRLZXlzO1xuICAgICAgICAvLyBTb3J0IGNoYW5nZXMgYmFzZWQgb24gdHlwZSBhbmQgcXVlcnkgY29tcGFyYXRvclxuICAgICAgICBjb25zdCBpID0gdC52by5ubygpO1xuICAgICAgICBpLnNvcnQoKCh0LCBlKSA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgICBjYXNlIDAgLyogQWRkZWQgKi8gOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcblxuICAgICAgICAgICAgICAgICAgY2FzZSAyIC8qIE1vZGlmaWVkICovIDpcbiAgICAgICAgICAgICAgICAgIGNhc2UgMyAvKiBNZXRhZGF0YSAqLyA6XG4gICAgICAgICAgICAgICAgICAgIC8vIEEgbWV0YWRhdGEgY2hhbmdlIGlzIGNvbnZlcnRlZCB0byBhIG1vZGlmaWVkIGNoYW5nZSBhdCB0aGUgcHVibGljXG4gICAgICAgICAgICAgICAgICAgIC8vIGFwaSBsYXllci4gIFNpbmNlIHdlIHNvcnQgYnkgZG9jdW1lbnQga2V5IGFuZCB0aGVuIGNoYW5nZSB0eXBlLFxuICAgICAgICAgICAgICAgICAgICAvLyBtZXRhZGF0YSBhbmQgbW9kaWZpZWQgY2hhbmdlcyBtdXN0IGJlIHNvcnRlZCBlcXVpdmFsZW50bHkuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAyO1xuXG4gICAgICAgICAgICAgICAgICBjYXNlIDEgLyogUmVtb3ZlZCAqLyA6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xuXG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gTCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gbih0KSAtIG4oZSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKHQudHlwZSwgZS50eXBlKSB8fCB0aGlzLkFvKHQuZG9jLCBlLmRvYykpKSwgdGhpcy5TbyhuKTtcbiAgICAgICAgY29uc3QgciA9IGUgPyB0aGlzLkRvKCkgOiBbXSwgbyA9IDAgPT09IHRoaXMuSW8uc2l6ZSAmJiB0aGlzLmN1cnJlbnQgPyAxIC8qIFN5bmNlZCAqLyA6IDAgLyogTG9jYWwgKi8gLCBhID0gbyAhPT0gdGhpcy5FbztcbiAgICAgICAgaWYgKHRoaXMuRW8gPSBvLCAwICE9PSBpLmxlbmd0aCB8fCBhKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHNuYXBzaG90OiBuZXcgQm8odGhpcy5xdWVyeSwgdC5SbywgcywgaSwgdC5tdXRhdGVkS2V5cywgMCAvKiBMb2NhbCAqLyA9PT0gbywgYSwgXG4gICAgICAgICAgICAgICAgLyogZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXM9ICovICExKSxcbiAgICAgICAgICAgICAgICBDbzogclxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAvLyBubyBjaGFuZ2VzXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBDbzogclxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIGFuIE9ubGluZVN0YXRlIGNoYW5nZSB0byB0aGUgdmlldywgcG90ZW50aWFsbHkgZ2VuZXJhdGluZyBhXG4gICAgICogVmlld0NoYW5nZSBpZiB0aGUgdmlldydzIHN5bmNTdGF0ZSBjaGFuZ2VzIGFzIGEgcmVzdWx0LlxuICAgICAqLyAgICBybyh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnQgJiYgXCJPZmZsaW5lXCIgLyogT2ZmbGluZSAqLyA9PT0gdCA/IChcbiAgICAgICAgLy8gSWYgd2UncmUgb2ZmbGluZSwgc2V0IGBjdXJyZW50YCB0byBmYWxzZSBhbmQgdGhlbiBjYWxsIGFwcGx5Q2hhbmdlcygpXG4gICAgICAgIC8vIHRvIHJlZnJlc2ggb3VyIHN5bmNTdGF0ZSBhbmQgZ2VuZXJhdGUgYSBWaWV3Q2hhbmdlIGFzIGFwcHJvcHJpYXRlLiBXZVxuICAgICAgICAvLyBhcmUgZ3VhcmFudGVlZCB0byBnZXQgYSBuZXcgVGFyZ2V0Q2hhbmdlIHRoYXQgc2V0cyBgY3VycmVudGAgYmFjayB0b1xuICAgICAgICAvLyB0cnVlIG9uY2UgdGhlIGNsaWVudCBpcyBiYWNrIG9ubGluZS5cbiAgICAgICAgdGhpcy5jdXJyZW50ID0gITEsIHRoaXMuYXBwbHlDaGFuZ2VzKHtcbiAgICAgICAgICAgIFJvOiB0aGlzLlJvLFxuICAgICAgICAgICAgdm86IG5ldyBMbyxcbiAgICAgICAgICAgIG11dGF0ZWRLZXlzOiB0aGlzLm11dGF0ZWRLZXlzLFxuICAgICAgICAgICAgQm46ICExXG4gICAgICAgIH0sIFxuICAgICAgICAvKiB1cGRhdGVMaW1ib0RvY3VtZW50cz0gKi8gITEpKSA6IHtcbiAgICAgICAgICAgIENvOiBbXVxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIGRvYyBmb3IgdGhlIGdpdmVuIGtleSBzaG91bGQgYmUgaW4gbGltYm8uXG4gICAgICovICAgIE5vKHQpIHtcbiAgICAgICAgLy8gSWYgdGhlIHJlbW90ZSBlbmQgc2F5cyBpdCdzIHBhcnQgb2YgdGhpcyBxdWVyeSwgaXQncyBub3QgaW4gbGltYm8uXG4gICAgICAgIHJldHVybiAhdGhpcy5Uby5oYXModCkgJiYgKFxuICAgICAgICAvLyBUaGUgbG9jYWwgc3RvcmUgZG9lc24ndCB0aGluayBpdCdzIGEgcmVzdWx0LCBzbyBpdCBzaG91bGRuJ3QgYmUgaW4gbGltYm8uXG4gICAgICAgICEhdGhpcy5Sby5oYXModCkgJiYgIXRoaXMuUm8uZ2V0KHQpLmhhc0xvY2FsTXV0YXRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBzeW5jZWREb2N1bWVudHMsIGN1cnJlbnQsIGFuZCBsaW1ibyBkb2NzIGJhc2VkIG9uIHRoZSBnaXZlbiBjaGFuZ2UuXG4gICAgICogUmV0dXJucyB0aGUgbGlzdCBvZiBjaGFuZ2VzIHRvIHdoaWNoIGRvY3MgYXJlIGluIGxpbWJvLlxuICAgICAqLyAgICBTbyh0KSB7XG4gICAgICAgIHQgJiYgKHQuYWRkZWREb2N1bWVudHMuZm9yRWFjaCgodCA9PiB0aGlzLlRvID0gdGhpcy5Uby5hZGQodCkpKSwgdC5tb2RpZmllZERvY3VtZW50cy5mb3JFYWNoKCh0ID0+IHt9KSksIFxuICAgICAgICB0LnJlbW92ZWREb2N1bWVudHMuZm9yRWFjaCgodCA9PiB0aGlzLlRvID0gdGhpcy5Uby5kZWxldGUodCkpKSwgdGhpcy5jdXJyZW50ID0gdC5jdXJyZW50KTtcbiAgICB9XG4gICAgRG8oKSB7XG4gICAgICAgIC8vIFdlIGNhbiBvbmx5IGRldGVybWluZSBsaW1ibyBkb2N1bWVudHMgd2hlbiB3ZSdyZSBpbi1zeW5jIHdpdGggdGhlIHNlcnZlci5cbiAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnQpIHJldHVybiBbXTtcbiAgICAgICAgLy8gVE9ETyhrbGltdCk6IERvIHRoaXMgaW5jcmVtZW50YWxseSBzbyB0aGF0IGl0J3Mgbm90IHF1YWRyYXRpYyB3aGVuXG4gICAgICAgIC8vIHVwZGF0aW5nIG1hbnkgZG9jdW1lbnRzLlxuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLklvO1xuICAgICAgICB0aGlzLklvID0gU24oKSwgdGhpcy5Sby5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuTm8odC5rZXkpICYmICh0aGlzLklvID0gdGhpcy5Jby5hZGQodC5rZXkpKTtcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyBEaWZmIHRoZSBuZXcgbGltYm8gZG9jcyB3aXRoIHRoZSBvbGQgbGltYm8gZG9jcy5cbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuSW8uaGFzKHQpIHx8IGUucHVzaChuZXcgdGEodCkpO1xuICAgICAgICB9KSksIHRoaXMuSW8uZm9yRWFjaCgobiA9PiB7XG4gICAgICAgICAgICB0LmhhcyhuKSB8fCBlLnB1c2gobmV3IFpvKG4pKTtcbiAgICAgICAgfSkpLCBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIGluLW1lbW9yeSBzdGF0ZSBvZiB0aGUgY3VycmVudCB2aWV3IHdpdGggdGhlIHN0YXRlIHJlYWQgZnJvbVxuICAgICAqIHBlcnNpc3RlbmNlLlxuICAgICAqXG4gICAgICogV2UgdXBkYXRlIHRoZSBxdWVyeSB2aWV3IHdoZW5ldmVyIGEgY2xpZW50J3MgcHJpbWFyeSBzdGF0dXMgY2hhbmdlczpcbiAgICAgKiAtIFdoZW4gYSBjbGllbnQgdHJhbnNpdGlvbnMgZnJvbSBwcmltYXJ5IHRvIHNlY29uZGFyeSwgaXQgY2FuIG1pc3NcbiAgICAgKiAgIExvY2FsU3RvcmFnZSB1cGRhdGVzIGFuZCBpdHMgcXVlcnkgdmlld3MgbWF5IHRlbXBvcmFyaWx5IG5vdCBiZVxuICAgICAqICAgc3luY2hyb25pemVkIHdpdGggdGhlIHN0YXRlIG9uIGRpc2suXG4gICAgICogLSBGb3Igc2Vjb25kYXJ5IHRvIHByaW1hcnkgdHJhbnNpdGlvbnMsIHRoZSBjbGllbnQgbmVlZHMgdG8gdXBkYXRlIHRoZSBsaXN0XG4gICAgICogICBvZiBgc3luY2VkRG9jdW1lbnRzYCBzaW5jZSBzZWNvbmRhcnkgY2xpZW50cyB1cGRhdGUgdGhlaXIgcXVlcnkgdmlld3NcbiAgICAgKiAgIGJhc2VkIHB1cmVseSBvbiBzeW50aGVzaXplZCBSZW1vdGVFdmVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcXVlcnlSZXN1bHQuZG9jdW1lbnRzIC0gVGhlIGRvY3VtZW50cyB0aGF0IG1hdGNoIHRoZSBxdWVyeSBhY2NvcmRpbmdcbiAgICAgKiB0byB0aGUgTG9jYWxTdG9yZS5cbiAgICAgKiBAcGFyYW0gcXVlcnlSZXN1bHQucmVtb3RlS2V5cyAtIFRoZSBrZXlzIG9mIHRoZSBkb2N1bWVudHMgdGhhdCBtYXRjaCB0aGVcbiAgICAgKiBxdWVyeSBhY2NvcmRpbmcgdG8gdGhlIGJhY2tlbmQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgVmlld0NoYW5nZSB0aGF0IHJlc3VsdGVkIGZyb20gdGhpcyBzeW5jaHJvbml6YXRpb24uXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICBrbyh0KSB7XG4gICAgICAgIHRoaXMuVG8gPSB0LnpuLCB0aGlzLklvID0gU24oKTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuYm8odC5kb2N1bWVudHMpO1xuICAgICAgICByZXR1cm4gdGhpcy5hcHBseUNoYW5nZXMoZSwgLyp1cGRhdGVMaW1ib0RvY3VtZW50cz0qLyAhMCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSB2aWV3IHNuYXBzaG90IGFzIGlmIHRoaXMgcXVlcnkgd2FzIGp1c3QgbGlzdGVuZWQgdG8uIENvbnRhaW5zXG4gICAgICogYSBkb2N1bWVudCBhZGQgZm9yIGV2ZXJ5IGV4aXN0aW5nIGRvY3VtZW50IGFuZCB0aGUgYGZyb21DYWNoZWAgYW5kXG4gICAgICogYGhhc1BlbmRpbmdXcml0ZXNgIHN0YXR1cyBvZiB0aGUgYWxyZWFkeSBlc3RhYmxpc2hlZCB2aWV3LlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgeG8oKSB7XG4gICAgICAgIHJldHVybiBCby5mcm9tSW5pdGlhbERvY3VtZW50cyh0aGlzLnF1ZXJ5LCB0aGlzLlJvLCB0aGlzLm11dGF0ZWRLZXlzLCAwIC8qIExvY2FsICovID09PSB0aGlzLkVvKTtcbiAgICB9XG59XG5cbi8qKlxuICogUXVlcnlWaWV3IGNvbnRhaW5zIGFsbCBvZiB0aGUgZGF0YSB0aGF0IFN5bmNFbmdpbmUgbmVlZHMgdG8ga2VlcCB0cmFjayBvZiBmb3JcbiAqIGEgcGFydGljdWxhciBxdWVyeS5cbiAqL1xuY2xhc3MgbmEge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBxdWVyeSBpdHNlbGYuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHRhcmdldCBudW1iZXIgY3JlYXRlZCBieSB0aGUgY2xpZW50IHRoYXQgaXMgdXNlZCBpbiB0aGUgd2F0Y2hcbiAgICAgKiBzdHJlYW0gdG8gaWRlbnRpZnkgdGhpcyBxdWVyeS5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBUaGUgdmlldyBpcyByZXNwb25zaWJsZSBmb3IgY29tcHV0aW5nIHRoZSBmaW5hbCBtZXJnZWQgdHJ1dGggb2Ygd2hhdFxuICAgICAqIGRvY3MgYXJlIGluIHRoZSBxdWVyeS4gSXQgZ2V0cyBub3RpZmllZCBvZiBsb2NhbCBhbmQgcmVtb3RlIGNoYW5nZXMsXG4gICAgICogYW5kIGFwcGxpZXMgdGhlIHF1ZXJ5IGZpbHRlcnMgYW5kIGxpbWl0cyB0byBkZXRlcm1pbmUgdGhlIG1vc3QgY29ycmVjdFxuICAgICAqIHBvc3NpYmxlIHJlc3VsdHMuXG4gICAgICovXG4gICAgbikge1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gdCwgdGhpcy50YXJnZXRJZCA9IGUsIHRoaXMudmlldyA9IG47XG4gICAgfVxufVxuXG4vKiogVHJhY2tzIGEgbGltYm8gcmVzb2x1dGlvbi4gKi8gY2xhc3Mgc2Ege1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5rZXkgPSB0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCB0byB0cnVlIG9uY2Ugd2UndmUgcmVjZWl2ZWQgYSBkb2N1bWVudC4gVGhpcyBpcyB1c2VkIGluXG4gICAgICAgICAqIGdldFJlbW90ZUtleXNGb3JUYXJnZXQoKSBhbmQgdWx0aW1hdGVseSB1c2VkIGJ5IFdhdGNoQ2hhbmdlQWdncmVnYXRvciB0b1xuICAgICAgICAgKiBkZWNpZGUgd2hldGhlciBpdCBuZWVkcyB0byBtYW51ZmFjdHVyZSBhIGRlbGV0ZSBldmVudCBmb3IgdGhlIHRhcmdldCBvbmNlXG4gICAgICAgICAqIHRoZSB0YXJnZXQgaXMgQ1VSUkVOVC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuJG8gPSAhMTtcbiAgICB9XG59XG5cbi8qKlxuICogQW4gaW1wbGVtZW50YXRpb24gb2YgYFN5bmNFbmdpbmVgIGNvb3JkaW5hdGluZyB3aXRoIG90aGVyIHBhcnRzIG9mIFNESy5cbiAqXG4gKiBUaGUgcGFydHMgb2YgU3luY0VuZ2luZSB0aGF0IGFjdCBhcyBhIGNhbGxiYWNrIHRvIFJlbW90ZVN0b3JlIG5lZWQgdG8gYmVcbiAqIHJlZ2lzdGVyZWQgaW5kaXZpZHVhbGx5LiBUaGlzIGlzIGRvbmUgaW4gYHN5bmNFbmdpbmVXcml0ZSgpYCBhbmRcbiAqIGBzeW5jRW5naW5lTGlzdGVuKClgIChhcyB3ZWxsIGFzIGBhcHBseVByaW1hcnlTdGF0ZSgpYCkgYXMgdGhlc2UgbWV0aG9kc1xuICogc2VydmUgYXMgZW50cnkgcG9pbnRzIHRvIFJlbW90ZVN0b3JlJ3MgZnVuY3Rpb25hbGl0eS5cbiAqXG4gKiBOb3RlOiBzb21lIGZpZWxkIGRlZmluZWQgaW4gdGhpcyBjbGFzcyBtaWdodCBoYXZlIHB1YmxpYyBhY2Nlc3MgbGV2ZWwsIGJ1dFxuICogdGhlIGNsYXNzIGlzIG5vdCBleHBvcnRlZCBzbyB0aGV5IGFyZSBvbmx5IGFjY2Vzc2libGUgZnJvbSB0aGlzIG1vZHVsZS5cbiAqIFRoaXMgaXMgdXNlZnVsIHRvIGltcGxlbWVudCBvcHRpb25hbCBmZWF0dXJlcyAobGlrZSBidW5kbGVzKSBpbiBmcmVlXG4gKiBmdW5jdGlvbnMsIHN1Y2ggdGhhdCB0aGV5IGFyZSB0cmVlLXNoYWtlYWJsZS5cbiAqLyBjbGFzcyBpYSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgXG4gICAgLy8gUE9SVElORyBOT1RFOiBNYW5hZ2VzIHN0YXRlIHN5bmNocm9uaXphdGlvbiBpbiBtdWx0aS10YWIgZW52aXJvbm1lbnRzLlxuICAgIHMsIGksIHIpIHtcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlID0gdCwgdGhpcy5yZW1vdGVTdG9yZSA9IGUsIHRoaXMuZXZlbnRNYW5hZ2VyID0gbiwgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSA9IHMsIFxuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gaSwgdGhpcy5tYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9ucyA9IHIsIHRoaXMuRm8gPSB7fSwgdGhpcy5PbyA9IG5ldyBHaSgodCA9PiB2ZSh0KSksIGJlKSwgXG4gICAgICAgIHRoaXMuTW8gPSBuZXcgTWFwLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBrZXlzIG9mIGRvY3VtZW50cyB0aGF0IGFyZSBpbiBsaW1ibyBmb3Igd2hpY2ggd2UgaGF2ZW4ndCB5ZXQgc3RhcnRlZCBhXG4gICAgICAgICAqIGxpbWJvIHJlc29sdXRpb24gcXVlcnkuIFRoZSBzdHJpbmdzIGluIHRoaXMgc2V0IGFyZSB0aGUgcmVzdWx0IG9mIGNhbGxpbmdcbiAgICAgICAgICogYGtleS5wYXRoLmNhbm9uaWNhbFN0cmluZygpYCB3aGVyZSBga2V5YCBpcyBhIGBEb2N1bWVudEtleWAgb2JqZWN0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGUgYFNldGAgdHlwZSB3YXMgY2hvc2VuIGJlY2F1c2UgaXQgcHJvdmlkZXMgZWZmaWNpZW50IGxvb2t1cCBhbmQgcmVtb3ZhbFxuICAgICAgICAgKiBvZiBhcmJpdHJhcnkgZWxlbWVudHMgYW5kIGl0IGFsc28gbWFpbnRhaW5zIGluc2VydGlvbiBvcmRlciwgcHJvdmlkaW5nIHRoZVxuICAgICAgICAgKiBkZXNpcmVkIHF1ZXVlLWxpa2UgRklGTyBzZW1hbnRpY3MuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkxvID0gbmV3IFNldCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBLZWVwcyB0cmFjayBvZiB0aGUgdGFyZ2V0IElEIGZvciBlYWNoIGRvY3VtZW50IHRoYXQgaXMgaW4gbGltYm8gd2l0aCBhblxuICAgICAgICAgKiBhY3RpdmUgdGFyZ2V0LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5CbyA9IG5ldyBnbihTdC5jb21wYXJhdG9yKSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBLZWVwcyB0cmFjayBvZiB0aGUgaW5mb3JtYXRpb24gYWJvdXQgYW4gYWN0aXZlIGxpbWJvIHJlc29sdXRpb24gZm9yIGVhY2hcbiAgICAgICAgICogYWN0aXZlIHRhcmdldCBJRCB0aGF0IHdhcyBzdGFydGVkIGZvciB0aGUgcHVycG9zZSBvZiBsaW1ibyByZXNvbHV0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5VbyA9IG5ldyBNYXAsIHRoaXMucW8gPSBuZXcgVnIsIFxuICAgICAgICAvKiogU3RvcmVzIHVzZXIgY29tcGxldGlvbiBoYW5kbGVycywgaW5kZXhlZCBieSBVc2VyIGFuZCBCYXRjaElkLiAqL1xuICAgICAgICB0aGlzLktvID0ge30sIFxuICAgICAgICAvKiogU3RvcmVzIHVzZXIgY2FsbGJhY2tzIHdhaXRpbmcgZm9yIGFsbCBwZW5kaW5nIHdyaXRlcyB0byBiZSBhY2tub3dsZWRnZWQuICovXG4gICAgICAgIHRoaXMuam8gPSBuZXcgTWFwLCB0aGlzLlFvID0gJGkucmUoKSwgdGhpcy5vbmxpbmVTdGF0ZSA9IFwiVW5rbm93blwiIC8qIFVua25vd24gKi8gLCBcbiAgICAgICAgLy8gVGhlIHByaW1hcnkgc3RhdGUgaXMgc2V0IHRvIGB0cnVlYCBvciBgZmFsc2VgIGltbWVkaWF0ZWx5IGFmdGVyIEZpcmVzdG9yZVxuICAgICAgICAvLyBzdGFydHVwLiBJbiB0aGUgaW50ZXJpbSwgYSBjbGllbnQgc2hvdWxkIG9ubHkgYmUgY29uc2lkZXJlZCBwcmltYXJ5IGlmXG4gICAgICAgIC8vIGBpc1ByaW1hcnlgIGlzIHRydWUuXG4gICAgICAgIHRoaXMuV28gPSB2b2lkIDA7XG4gICAgfVxuICAgIGdldCBpc1ByaW1hcnlDbGllbnQoKSB7XG4gICAgICAgIHJldHVybiAhMCA9PT0gdGhpcy5XbztcbiAgICB9XG59XG5cbi8qKlxuICogSW5pdGlhdGVzIHRoZSBuZXcgbGlzdGVuLCByZXNvbHZlcyBwcm9taXNlIHdoZW4gbGlzdGVuIGVucXVldWVkIHRvIHRoZVxuICogc2VydmVyLiBBbGwgdGhlIHN1YnNlcXVlbnQgdmlldyBzbmFwc2hvdHMgb3IgZXJyb3JzIGFyZSBzZW50IHRvIHRoZVxuICogc3Vic2NyaWJlZCBoYW5kbGVycy4gUmV0dXJucyB0aGUgaW5pdGlhbCBzbmFwc2hvdC5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gcmEodCwgZSkge1xuICAgIGNvbnN0IG4gPSB4YSh0KTtcbiAgICBsZXQgcywgaTtcbiAgICBjb25zdCByID0gbi5Pby5nZXQoZSk7XG4gICAgaWYgKHIpIFxuICAgIC8vIFBPUlRJTkcgTk9URTogV2l0aCBNdWx0aS1UYWIgV2ViLCBpdCBpcyBwb3NzaWJsZSB0aGF0IGEgcXVlcnkgdmlld1xuICAgIC8vIGFscmVhZHkgZXhpc3RzIHdoZW4gRXZlbnRNYW5hZ2VyIGNhbGxzIHVzIGZvciB0aGUgZmlyc3QgdGltZS4gVGhpc1xuICAgIC8vIGhhcHBlbnMgd2hlbiB0aGUgcHJpbWFyeSB0YWIgaXMgYWxyZWFkeSBsaXN0ZW5pbmcgdG8gdGhpcyBxdWVyeSBvblxuICAgIC8vIGJlaGFsZiBvZiBhbm90aGVyIHRhYiBhbmQgdGhlIHVzZXIgb2YgdGhlIHByaW1hcnkgYWxzbyBzdGFydHMgbGlzdGVuaW5nXG4gICAgLy8gdG8gdGhlIHF1ZXJ5LiBFdmVudE1hbmFnZXIgd2lsbCBub3QgaGF2ZSBhbiBhc3NpZ25lZCB0YXJnZXQgSUQgaW4gdGhpc1xuICAgIC8vIGNhc2UgYW5kIGNhbGxzIGBsaXN0ZW5gIHRvIG9idGFpbiB0aGlzIElELlxuICAgIHMgPSByLnRhcmdldElkLCBuLnNoYXJlZENsaWVudFN0YXRlLmFkZExvY2FsUXVlcnlUYXJnZXQocyksIGkgPSByLnZpZXcueG8oKTsgZWxzZSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBwcihuLmxvY2FsU3RvcmUsIFJlKGUpKSwgciA9IG4uc2hhcmVkQ2xpZW50U3RhdGUuYWRkTG9jYWxRdWVyeVRhcmdldCh0LnRhcmdldElkKTtcbiAgICAgICAgcyA9IHQudGFyZ2V0SWQsIGkgPSBhd2FpdCBvYShuLCBlLCBzLCBcImN1cnJlbnRcIiA9PT0gciksIG4uaXNQcmltYXJ5Q2xpZW50ICYmIGhvKG4ucmVtb3RlU3RvcmUsIHQpO1xuICAgIH1cbiAgICByZXR1cm4gaTtcbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgYSB2aWV3IGZvciBhIHByZXZpb3VzbHkgdW5rbm93biBxdWVyeSBhbmQgY29tcHV0ZXMgaXRzIGluaXRpYWxcbiAqIHNuYXBzaG90LlxuICovIGFzeW5jIGZ1bmN0aW9uIG9hKHQsIGUsIG4sIHMpIHtcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE9uIFdlYiBvbmx5LCB3ZSBpbmplY3QgdGhlIGNvZGUgdGhhdCByZWdpc3RlcnMgbmV3IExpbWJvXG4gICAgLy8gdGFyZ2V0cyBiYXNlZCBvbiB2aWV3IGNoYW5nZXMuIFRoaXMgYWxsb3dzIHVzIHRvIG9ubHkgZGVwZW5kIG9uIExpbWJvXG4gICAgLy8gY2hhbmdlcyB3aGVuIHVzZXIgY29kZSBpbmNsdWRlcyBxdWVyaWVzLlxuICAgIHQuR28gPSAoZSwgbiwgcykgPT4gYXN5bmMgZnVuY3Rpb24odCwgZSwgbiwgcykge1xuICAgICAgICBsZXQgaSA9IGUudmlldy5ibyhuKTtcbiAgICAgICAgaS5CbiAmJiAoXG4gICAgICAgIC8vIFRoZSBxdWVyeSBoYXMgYSBsaW1pdCBhbmQgc29tZSBkb2NzIHdlcmUgcmVtb3ZlZCwgc28gd2UgbmVlZFxuICAgICAgICAvLyB0byByZS1ydW4gdGhlIHF1ZXJ5IGFnYWluc3QgdGhlIGxvY2FsIHN0b3JlIHRvIG1ha2Ugc3VyZSB3ZVxuICAgICAgICAvLyBkaWRuJ3QgbG9zZSBhbnkgZ29vZCBkb2NzIHRoYXQgaGFkIGJlZW4gcGFzdCB0aGUgbGltaXQuXG4gICAgICAgIGkgPSBhd2FpdCBFcih0LmxvY2FsU3RvcmUsIGUucXVlcnksIFxuICAgICAgICAvKiB1c2VQcmV2aW91c1Jlc3VsdHM9ICovICExKS50aGVuKCgoe2RvY3VtZW50czogdH0pID0+IGUudmlldy5ibyh0LCBpKSkpKTtcbiAgICAgICAgY29uc3QgciA9IHMgJiYgcy50YXJnZXRDaGFuZ2VzLmdldChlLnRhcmdldElkKSwgbyA9IGUudmlldy5hcHBseUNoYW5nZXMoaSwgXG4gICAgICAgIC8qIHVwZGF0ZUxpbWJvRG9jdW1lbnRzPSAqLyB0LmlzUHJpbWFyeUNsaWVudCwgcik7XG4gICAgICAgIHJldHVybiBwYSh0LCBlLnRhcmdldElkLCBvLkNvKSwgby5zbmFwc2hvdDtcbiAgICB9KHQsIGUsIG4sIHMpO1xuICAgIGNvbnN0IGkgPSBhd2FpdCBFcih0LmxvY2FsU3RvcmUsIGUsIFxuICAgIC8qIHVzZVByZXZpb3VzUmVzdWx0cz0gKi8gITApLCByID0gbmV3IGVhKGUsIGkuem4pLCBvID0gci5ibyhpLmRvY3VtZW50cyksIGEgPSBrbi5jcmVhdGVTeW50aGVzaXplZFRhcmdldENoYW5nZUZvckN1cnJlbnRDaGFuZ2UobiwgcyAmJiBcIk9mZmxpbmVcIiAvKiBPZmZsaW5lICovICE9PSB0Lm9ubGluZVN0YXRlKSwgYyA9IHIuYXBwbHlDaGFuZ2VzKG8sIFxuICAgIC8qIHVwZGF0ZUxpbWJvRG9jdW1lbnRzPSAqLyB0LmlzUHJpbWFyeUNsaWVudCwgYSk7XG4gICAgcGEodCwgbiwgYy5Dbyk7XG4gICAgY29uc3QgdSA9IG5ldyBuYShlLCBuLCByKTtcbiAgICByZXR1cm4gdC5Pby5zZXQoZSwgdSksIHQuTW8uaGFzKG4pID8gdC5Nby5nZXQobikucHVzaChlKSA6IHQuTW8uc2V0KG4sIFsgZSBdKSwgYy5zbmFwc2hvdDtcbn1cblxuLyoqIFN0b3BzIGxpc3RlbmluZyB0byB0aGUgcXVlcnkuICovIGFzeW5jIGZ1bmN0aW9uIGFhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KSwgcyA9IG4uT28uZ2V0KGUpLCBpID0gbi5Nby5nZXQocy50YXJnZXRJZCk7XG4gICAgaWYgKGkubGVuZ3RoID4gMSkgcmV0dXJuIG4uTW8uc2V0KHMudGFyZ2V0SWQsIGkuZmlsdGVyKCh0ID0+ICFiZSh0LCBlKSkpKSwgdm9pZCBuLk9vLmRlbGV0ZShlKTtcbiAgICAvLyBObyBvdGhlciBxdWVyaWVzIGFyZSBtYXBwZWQgdG8gdGhlIHRhcmdldCwgY2xlYW4gdXAgdGhlIHF1ZXJ5IGFuZCB0aGUgdGFyZ2V0LlxuICAgICAgICBpZiAobi5pc1ByaW1hcnlDbGllbnQpIHtcbiAgICAgICAgLy8gV2UgbmVlZCB0byByZW1vdmUgdGhlIGxvY2FsIHF1ZXJ5IHRhcmdldCBmaXJzdCB0byBhbGxvdyB1cyB0byB2ZXJpZnlcbiAgICAgICAgLy8gd2hldGhlciBhbnkgb3RoZXIgY2xpZW50IGlzIHN0aWxsIGludGVyZXN0ZWQgaW4gdGhpcyB0YXJnZXQuXG4gICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUucmVtb3ZlTG9jYWxRdWVyeVRhcmdldChzLnRhcmdldElkKTtcbiAgICAgICAgbi5zaGFyZWRDbGllbnRTdGF0ZS5pc0FjdGl2ZVF1ZXJ5VGFyZ2V0KHMudGFyZ2V0SWQpIHx8IGF3YWl0IFRyKG4ubG9jYWxTdG9yZSwgcy50YXJnZXRJZCwgXG4gICAgICAgIC8qa2VlcFBlcnNpc3RlZFRhcmdldERhdGE9Ki8gITEpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUuY2xlYXJRdWVyeVN0YXRlKHMudGFyZ2V0SWQpLCBsbyhuLnJlbW90ZVN0b3JlLCBzLnRhcmdldElkKSwgXG4gICAgICAgICAgICBnYShuLCBzLnRhcmdldElkKTtcbiAgICAgICAgfSkpLmNhdGNoKEJpKTtcbiAgICB9IGVsc2UgZ2Eobiwgcy50YXJnZXRJZCksIGF3YWl0IFRyKG4ubG9jYWxTdG9yZSwgcy50YXJnZXRJZCwgXG4gICAgLyprZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YT0qLyAhMCk7XG59XG5cbi8qKlxuICogSW5pdGlhdGVzIHRoZSB3cml0ZSBvZiBsb2NhbCBtdXRhdGlvbiBiYXRjaCB3aGljaCBpbnZvbHZlcyBhZGRpbmcgdGhlXG4gKiB3cml0ZXMgdG8gdGhlIG11dGF0aW9uIHF1ZXVlLCBub3RpZnlpbmcgdGhlIHJlbW90ZSBzdG9yZSBhYm91dCBuZXdcbiAqIG11dGF0aW9ucyBhbmQgcmFpc2luZyBldmVudHMgZm9yIGFueSBjaGFuZ2VzIHRoaXMgd3JpdGUgY2F1c2VkLlxuICpcbiAqIFRoZSBwcm9taXNlIHJldHVybmVkIGJ5IHRoaXMgY2FsbCBpcyByZXNvbHZlZCB3aGVuIHRoZSBhYm92ZSBzdGVwc1xuICogaGF2ZSBjb21wbGV0ZWQsICpub3QqIHdoZW4gdGhlIHdyaXRlIHdhcyBhY2tlZCBieSB0aGUgYmFja2VuZC4gVGhlXG4gKiB1c2VyQ2FsbGJhY2sgaXMgcmVzb2x2ZWQgb25jZSB0aGUgd3JpdGUgd2FzIGFja2VkL3JlamVjdGVkIGJ5IHRoZVxuICogYmFja2VuZCAob3IgZmFpbGVkIGxvY2FsbHkgZm9yIGFueSBvdGhlciByZWFzb24pLlxuICovIGFzeW5jIGZ1bmN0aW9uIGNhKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gJGEodCk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBxKHQpLCBzID0gYXQubm93KCksIGkgPSBlLnJlZHVjZSgoKHQsIGUpID0+IHQuYWRkKGUua2V5KSksIFNuKCkpO1xuICAgICAgICAgICAgbGV0IHI7XG4gICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkxvY2FsbHkgd3JpdGUgbXV0YXRpb25zXCIsIFwicmVhZHdyaXRlXCIsICh0ID0+IG4uV24udm4odCwgaSkubmV4dCgoaSA9PiB7XG4gICAgICAgICAgICAgICAgciA9IGk7XG4gICAgICAgICAgICAgICAgLy8gRm9yIG5vbi1pZGVtcG90ZW50IG11dGF0aW9ucyAoc3VjaCBhcyBgRmllbGRWYWx1ZS5pbmNyZW1lbnQoKWApLFxuICAgICAgICAgICAgICAgIC8vIHdlIHJlY29yZCB0aGUgYmFzZSBzdGF0ZSBpbiBhIHNlcGFyYXRlIHBhdGNoIG11dGF0aW9uLiBUaGlzIGlzXG4gICAgICAgICAgICAgICAgLy8gbGF0ZXIgdXNlZCB0byBndWFyYW50ZWUgY29uc2lzdGVudCB2YWx1ZXMgYW5kIHByZXZlbnRzIGZsaWNrZXJcbiAgICAgICAgICAgICAgICAvLyBldmVuIGlmIHRoZSBiYWNrZW5kIHNlbmRzIHVzIGFuIHVwZGF0ZSB0aGF0IGFscmVhZHkgaW5jbHVkZXMgb3VyXG4gICAgICAgICAgICAgICAgLy8gdHJhbnNmb3JtLlxuICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gZW4odCwgci5nZXQodC5rZXkpKTtcbiAgICAgICAgICAgICAgICAgICAgbnVsbCAhPSBlICYmIFxuICAgICAgICAgICAgICAgICAgICAvLyBOT1RFOiBUaGUgYmFzZSBzdGF0ZSBzaG91bGQgb25seSBiZSBhcHBsaWVkIGlmIHRoZXJlJ3Mgc29tZVxuICAgICAgICAgICAgICAgICAgICAvLyBleGlzdGluZyBkb2N1bWVudCB0byBvdmVycmlkZSwgc28gdXNlIGEgUHJlY29uZGl0aW9uIG9mXG4gICAgICAgICAgICAgICAgICAgIC8vIGV4aXN0cz10cnVlXG4gICAgICAgICAgICAgICAgICAgIG8ucHVzaChuZXcgb24odC5rZXksIGUsIFF0KGUudmFsdWUubWFwVmFsdWUpLCBKZS5leGlzdHMoITApKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBuLkFuLmFkZE11dGF0aW9uQmF0Y2godCwgcywgbywgZSk7XG4gICAgICAgICAgICB9KSkpKS50aGVuKCh0ID0+ICh0LmFwcGx5VG9Mb2NhbERvY3VtZW50U2V0KHIpLCB7XG4gICAgICAgICAgICAgICAgYmF0Y2hJZDogdC5iYXRjaElkLFxuICAgICAgICAgICAgICAgIGNoYW5nZXM6IHJcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIH0ocy5sb2NhbFN0b3JlLCBlKTtcbiAgICAgICAgcy5zaGFyZWRDbGllbnRTdGF0ZS5hZGRQZW5kaW5nTXV0YXRpb24odC5iYXRjaElkKSwgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAgICAgbGV0IHMgPSB0LktvW3QuY3VycmVudFVzZXIudG9LZXkoKV07XG4gICAgICAgICAgICBzIHx8IChzID0gbmV3IGduKGl0KSk7XG4gICAgICAgICAgICBzID0gcy5pbnNlcnQoZSwgbiksIHQuS29bdC5jdXJyZW50VXNlci50b0tleSgpXSA9IHM7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBSZXNvbHZlcyBvciByZWplY3RzIHRoZSB1c2VyIGNhbGxiYWNrIGZvciB0aGUgZ2l2ZW4gYmF0Y2ggYW5kIHRoZW4gZGlzY2FyZHNcbiAqIGl0LlxuICovIChzLCB0LmJhdGNoSWQsIG4pLCBhd2FpdCBJYShzLCB0LmNoYW5nZXMpLCBhd2FpdCBSbyhzLnJlbW90ZVN0b3JlKTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIC8vIElmIHdlIGNhbid0IHBlcnNpc3QgdGhlIG11dGF0aW9uLCB3ZSByZWplY3QgdGhlIHVzZXIgY2FsbGJhY2sgYW5kXG4gICAgICAgIC8vIGRvbid0IHNlbmQgdGhlIG11dGF0aW9uLiBUaGUgdXNlciBjYW4gdGhlbiByZXRyeSB0aGUgd3JpdGUuXG4gICAgICAgIGNvbnN0IGUgPSBPbyh0LCBcIkZhaWxlZCB0byBwZXJzaXN0IHdyaXRlXCIpO1xuICAgICAgICBuLnJlamVjdChlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQXBwbGllcyBvbmUgcmVtb3RlIGV2ZW50IHRvIHRoZSBzeW5jIGVuZ2luZSwgbm90aWZ5aW5nIGFueSB2aWV3cyBvZiB0aGVcbiAqIGNoYW5nZXMsIGFuZCByZWxlYXNpbmcgYW55IHBlbmRpbmcgbXV0YXRpb24gYmF0Y2hlcyB0aGF0IHdvdWxkIGJlY29tZVxuICogdmlzaWJsZSBiZWNhdXNlIG9mIHRoZSBzbmFwc2hvdCB2ZXJzaW9uIHRoZSByZW1vdGUgZXZlbnQgY29udGFpbnMuXG4gKi8gYXN5bmMgZnVuY3Rpb24gdWEodCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBtcihuLmxvY2FsU3RvcmUsIGUpO1xuICAgICAgICAvLyBVcGRhdGUgYHJlY2VpdmVkRG9jdW1lbnRgIGFzIGFwcHJvcHJpYXRlIGZvciBhbnkgbGltYm8gdGFyZ2V0cy5cbiAgICAgICAgICAgICAgICBlLnRhcmdldENoYW5nZXMuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBuLlVvLmdldChlKTtcbiAgICAgICAgICAgIHMgJiYgKFxuICAgICAgICAgICAgLy8gU2luY2UgdGhpcyBpcyBhIGxpbWJvIHJlc29sdXRpb24gbG9va3VwLCBpdCdzIGZvciBhIHNpbmdsZSBkb2N1bWVudFxuICAgICAgICAgICAgLy8gYW5kIGl0IGNvdWxkIGJlIGFkZGVkLCBtb2RpZmllZCwgb3IgcmVtb3ZlZCwgYnV0IG5vdCBhIGNvbWJpbmF0aW9uLlxuICAgICAgICAgICAgQih0LmFkZGVkRG9jdW1lbnRzLnNpemUgKyB0Lm1vZGlmaWVkRG9jdW1lbnRzLnNpemUgKyB0LnJlbW92ZWREb2N1bWVudHMuc2l6ZSA8PSAxKSwgXG4gICAgICAgICAgICB0LmFkZGVkRG9jdW1lbnRzLnNpemUgPiAwID8gcy4kbyA9ICEwIDogdC5tb2RpZmllZERvY3VtZW50cy5zaXplID4gMCA/IEIocy4kbykgOiB0LnJlbW92ZWREb2N1bWVudHMuc2l6ZSA+IDAgJiYgKEIocy4kbyksIFxuICAgICAgICAgICAgcy4kbyA9ICExKSk7XG4gICAgICAgIH0pKSwgYXdhaXQgSWEobiwgdCwgZSk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICBhd2FpdCBCaSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQXBwbGllcyBhbiBPbmxpbmVTdGF0ZSBjaGFuZ2UgdG8gdGhlIHN5bmMgZW5naW5lIGFuZCBub3RpZmllcyBhbnkgdmlld3Mgb2ZcbiAqIHRoZSBjaGFuZ2UuXG4gKi8gZnVuY3Rpb24gaGEodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBxKHQpO1xuICAgIC8vIElmIHdlIGFyZSB0aGUgc2Vjb25kYXJ5IGNsaWVudCwgd2UgZXhwbGljaXRseSBpZ25vcmUgdGhlIHJlbW90ZSBzdG9yZSdzXG4gICAgLy8gb25saW5lIHN0YXRlICh0aGUgbG9jYWwgY2xpZW50IG1heSBnbyBvZmZsaW5lLCBldmVuIHRob3VnaCB0aGUgcHJpbWFyeVxuICAgIC8vIHRhYiByZW1haW5zIG9ubGluZSkgYW5kIG9ubHkgYXBwbHkgdGhlIHByaW1hcnkgdGFiJ3Mgb25saW5lIHN0YXRlIGZyb21cbiAgICAvLyBTaGFyZWRDbGllbnRTdGF0ZS5cbiAgICAgICAgaWYgKHMuaXNQcmltYXJ5Q2xpZW50ICYmIDAgLyogUmVtb3RlU3RvcmUgKi8gPT09IG4gfHwgIXMuaXNQcmltYXJ5Q2xpZW50ICYmIDEgLyogU2hhcmVkQ2xpZW50U3RhdGUgKi8gPT09IG4pIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICBzLk9vLmZvckVhY2goKChuLCBzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gcy52aWV3LnJvKGUpO1xuICAgICAgICAgICAgaS5zbmFwc2hvdCAmJiB0LnB1c2goaS5zbmFwc2hvdCk7XG4gICAgICAgIH0pKSwgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHEodCk7XG4gICAgICAgICAgICBuLm9ubGluZVN0YXRlID0gZTtcbiAgICAgICAgICAgIGxldCBzID0gITE7XG4gICAgICAgICAgICBuLnF1ZXJpZXMuZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2Ygbi5saXN0ZW5lcnMpIFxuICAgICAgICAgICAgICAgIC8vIFJ1biBnbG9iYWwgc25hcHNob3QgbGlzdGVuZXJzIGlmIGEgY29uc2lzdGVudCBzbmFwc2hvdCBoYXMgYmVlbiBlbWl0dGVkLlxuICAgICAgICAgICAgICAgIHQucm8oZSkgJiYgKHMgPSAhMCk7XG4gICAgICAgICAgICB9KSksIHMgJiYgR28obik7XG4gICAgICAgIH0ocy5ldmVudE1hbmFnZXIsIGUpLCB0Lmxlbmd0aCAmJiBzLkZvLlByKHQpLCBzLm9ubGluZVN0YXRlID0gZSwgcy5pc1ByaW1hcnlDbGllbnQgJiYgcy5zaGFyZWRDbGllbnRTdGF0ZS5zZXRPbmxpbmVTdGF0ZShlKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVqZWN0cyB0aGUgbGlzdGVuIGZvciB0aGUgZ2l2ZW4gdGFyZ2V0SUQuIFRoaXMgY2FuIGJlIHRyaWdnZXJlZCBieSB0aGVcbiAqIGJhY2tlbmQgZm9yIGFueSBhY3RpdmUgdGFyZ2V0LlxuICpcbiAqIEBwYXJhbSBzeW5jRW5naW5lIC0gVGhlIHN5bmMgZW5naW5lIGltcGxlbWVudGF0aW9uLlxuICogQHBhcmFtIHRhcmdldElkIC0gVGhlIHRhcmdldElEIGNvcnJlc3BvbmRzIHRvIG9uZSBwcmV2aW91c2x5IGluaXRpYXRlZCBieSB0aGVcbiAqIHVzZXIgYXMgcGFydCBvZiBUYXJnZXREYXRhIHBhc3NlZCB0byBsaXN0ZW4oKSBvbiBSZW1vdGVTdG9yZS5cbiAqIEBwYXJhbSBlcnIgLSBBIGRlc2NyaXB0aW9uIG9mIHRoZSBjb25kaXRpb24gdGhhdCBoYXMgZm9yY2VkIHRoZSByZWplY3Rpb24uXG4gKiBOZWFybHkgYWx3YXlzIHRoaXMgd2lsbCBiZSBhbiBpbmRpY2F0aW9uIHRoYXQgdGhlIHVzZXIgaXMgbm8gbG9uZ2VyXG4gKiBhdXRob3JpemVkIHRvIHNlZSB0aGUgZGF0YSBtYXRjaGluZyB0aGUgdGFyZ2V0LlxuICovIGFzeW5jIGZ1bmN0aW9uIGxhKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gcSh0KTtcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgICAgICBzLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZVF1ZXJ5U3RhdGUoZSwgXCJyZWplY3RlZFwiLCBuKTtcbiAgICBjb25zdCBpID0gcy5Vby5nZXQoZSksIHIgPSBpICYmIGkua2V5O1xuICAgIGlmIChyKSB7XG4gICAgICAgIC8vIFRPRE8oa2xpbXQpOiBXZSByZWFsbHkgb25seSBzaG91bGQgZG8gdGhlIGZvbGxvd2luZyBvbiBwZXJtaXNzaW9uXG4gICAgICAgIC8vIGRlbmllZCBlcnJvcnMsIGJ1dCB3ZSBkb24ndCBoYXZlIHRoZSBjYXVzZSBjb2RlIGhlcmUuXG4gICAgICAgIC8vIEl0J3MgYSBsaW1ibyBkb2MuIENyZWF0ZSBhIHN5bnRoZXRpYyBldmVudCBzYXlpbmcgaXQgd2FzIGRlbGV0ZWQuXG4gICAgICAgIC8vIFRoaXMgaXMga2luZCBvZiBhIGhhY2suIElkZWFsbHksIHdlIHdvdWxkIGhhdmUgYSBtZXRob2QgaW4gdGhlIGxvY2FsXG4gICAgICAgIC8vIHN0b3JlIHRvIHB1cmdlIGEgZG9jdW1lbnQuIEhvd2V2ZXIsIGl0IHdvdWxkIGJlIHRyaWNreSB0byBrZWVwIGFsbCBvZlxuICAgICAgICAvLyB0aGUgbG9jYWwgc3RvcmUncyBpbnZhcmlhbnRzIHdpdGggYW5vdGhlciBtZXRob2QuXG4gICAgICAgIGxldCB0ID0gbmV3IGduKFN0LmNvbXBhcmF0b3IpO1xuICAgICAgICB0ID0gdC5pbnNlcnQociwgV3QubmV3Tm9Eb2N1bWVudChyLCBjdC5taW4oKSkpO1xuICAgICAgICBjb25zdCBuID0gU24oKS5hZGQociksIGkgPSBuZXcgTm4oY3QubWluKCksIFxuICAgICAgICAvKiB0YXJnZXRDaGFuZ2VzPSAqLyBuZXcgTWFwLCBcbiAgICAgICAgLyogdGFyZ2V0TWlzbWF0Y2hlcz0gKi8gbmV3IFRuKGl0KSwgdCwgbik7XG4gICAgICAgIGF3YWl0IHVhKHMsIGkpLCBcbiAgICAgICAgLy8gU2luY2UgdGhpcyBxdWVyeSBmYWlsZWQsIHdlIHdvbid0IHdhbnQgdG8gbWFudWFsbHkgdW5saXN0ZW4gdG8gaXQuXG4gICAgICAgIC8vIFdlIG9ubHkgcmVtb3ZlIGl0IGZyb20gYm9va2tlZXBpbmcgYWZ0ZXIgd2Ugc3VjY2Vzc2Z1bGx5IGFwcGxpZWQgdGhlXG4gICAgICAgIC8vIFJlbW90ZUV2ZW50LiBJZiBgYXBwbHlSZW1vdGVFdmVudCgpYCB0aHJvd3MsIHdlIHdhbnQgdG8gcmUtbGlzdGVuIHRvXG4gICAgICAgIC8vIHRoaXMgcXVlcnkgd2hlbiB0aGUgUmVtb3RlU3RvcmUgcmVzdGFydHMgdGhlIFdhdGNoIHN0cmVhbSwgd2hpY2ggc2hvdWxkXG4gICAgICAgIC8vIHJlLXRyaWdnZXIgdGhlIHRhcmdldCBmYWlsdXJlLlxuICAgICAgICBzLkJvID0gcy5Cby5yZW1vdmUociksIHMuVW8uZGVsZXRlKGUpLCBFYShzKTtcbiAgICB9IGVsc2UgYXdhaXQgVHIocy5sb2NhbFN0b3JlLCBlLCBcbiAgICAvKiBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YSAqLyAhMSkudGhlbigoKCkgPT4gZ2EocywgZSwgbikpKS5jYXRjaChCaSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGZhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KSwgcyA9IGUuYmF0Y2guYmF0Y2hJZDtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgd3Iobi5sb2NhbFN0b3JlLCBlKTtcbiAgICAgICAgLy8gVGhlIGxvY2FsIHN0b3JlIG1heSBvciBtYXkgbm90IGJlIGFibGUgdG8gYXBwbHkgdGhlIHdyaXRlIHJlc3VsdCBhbmRcbiAgICAgICAgLy8gcmFpc2UgZXZlbnRzIGltbWVkaWF0ZWx5IChkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgd2F0Y2hlciBpcyBjYXVnaHRcbiAgICAgICAgLy8gdXApLCBzbyB3ZSByYWlzZSB1c2VyIGNhbGxiYWNrcyBmaXJzdCBzbyB0aGF0IHRoZXkgY29uc2lzdGVudGx5IGhhcHBlblxuICAgICAgICAvLyBiZWZvcmUgbGlzdGVuIGV2ZW50cy5cbiAgICAgICAgICAgICAgICBtYShuLCBzLCAvKmVycm9yPSovIG51bGwpLCBfYShuLCBzKSwgbi5zaGFyZWRDbGllbnRTdGF0ZS51cGRhdGVNdXRhdGlvblN0YXRlKHMsIFwiYWNrbm93bGVkZ2VkXCIpLCBcbiAgICAgICAgYXdhaXQgSWEobiwgdCk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICBhd2FpdCBCaSh0KTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGRhKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gcSh0KTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHEodCk7XG4gICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlJlamVjdCBiYXRjaFwiLCBcInJlYWR3cml0ZS1wcmltYXJ5XCIsICh0ID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgcztcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5Bbi5sb29rdXBNdXRhdGlvbkJhdGNoKHQsIGUpLm5leHQoKGUgPT4gKEIobnVsbCAhPT0gZSksIHMgPSBlLmtleXMoKSwgbi5Bbi5yZW1vdmVNdXRhdGlvbkJhdGNoKHQsIGUpKSkpLm5leHQoKCgpID0+IG4uQW4ucGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2sodCkpKS5uZXh0KCgoKSA9PiBuLlduLnZuKHQsIHMpKSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHRoZSBsYXJnZXN0IChsYXRlc3QpIGJhdGNoIGlkIGluIG11dGF0aW9uIHF1ZXVlIHRoYXQgaXMgcGVuZGluZ1xuICogc2VydmVyIHJlc3BvbnNlLlxuICpcbiAqIFJldHVybnMgYEJBVENISURfVU5LTk9XTmAgaWYgdGhlIHF1ZXVlIGlzIGVtcHR5LlxuICovIChzLmxvY2FsU3RvcmUsIGUpO1xuICAgICAgICAvLyBUaGUgbG9jYWwgc3RvcmUgbWF5IG9yIG1heSBub3QgYmUgYWJsZSB0byBhcHBseSB0aGUgd3JpdGUgcmVzdWx0IGFuZFxuICAgICAgICAvLyByYWlzZSBldmVudHMgaW1tZWRpYXRlbHkgKGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSB3YXRjaGVyIGlzIGNhdWdodCB1cCksXG4gICAgICAgIC8vIHNvIHdlIHJhaXNlIHVzZXIgY2FsbGJhY2tzIGZpcnN0IHNvIHRoYXQgdGhleSBjb25zaXN0ZW50bHkgaGFwcGVuIGJlZm9yZVxuICAgICAgICAvLyBsaXN0ZW4gZXZlbnRzLlxuICAgICAgICAgICAgICAgIG1hKHMsIGUsIG4pLCBfYShzLCBlKSwgcy5zaGFyZWRDbGllbnRTdGF0ZS51cGRhdGVNdXRhdGlvblN0YXRlKGUsIFwicmVqZWN0ZWRcIiwgbiksIFxuICAgICAgICBhd2FpdCBJYShzLCB0KTtcbiAgICB9IGNhdGNoIChuKSB7XG4gICAgICAgIGF3YWl0IEJpKG4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgYSB1c2VyIGNhbGxiYWNrIHRoYXQgcmVzb2x2ZXMgd2hlbiBhbGwgcGVuZGluZyBtdXRhdGlvbnMgYXQgdGhlIG1vbWVudCBvZiBjYWxsaW5nXG4gKiBhcmUgYWNrbm93bGVkZ2VkIC5cbiAqLyBhc3luYyBmdW5jdGlvbiB3YSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IHEodCk7XG4gICAgZ28obi5yZW1vdGVTdG9yZSkgfHwgJChcIlN5bmNFbmdpbmVcIiwgXCJUaGUgbmV0d29yayBpcyBkaXNhYmxlZC4gVGhlIHRhc2sgcmV0dXJuZWQgYnkgJ2F3YWl0UGVuZGluZ1dyaXRlcygpJyB3aWxsIG5vdCBjb21wbGV0ZSB1bnRpbCB0aGUgbmV0d29yayBpcyBlbmFibGVkLlwiKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHEodCk7XG4gICAgICAgICAgICByZXR1cm4gZS5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCBoaWdoZXN0IHVuYWNrbm93bGVkZ2VkIGJhdGNoIGlkXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gZS5Bbi5nZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkKHQpKSk7XG4gICAgICAgIH0obi5sb2NhbFN0b3JlKTtcbiAgICAgICAgaWYgKC0xID09PSB0KSBcbiAgICAgICAgLy8gVHJpZ2dlciB0aGUgY2FsbGJhY2sgcmlnaHQgYXdheSBpZiB0aGVyZSBpcyBubyBwZW5kaW5nIHdyaXRlcyBhdCB0aGUgbW9tZW50LlxuICAgICAgICByZXR1cm4gdm9pZCBlLnJlc29sdmUoKTtcbiAgICAgICAgY29uc3QgcyA9IG4uam8uZ2V0KHQpIHx8IFtdO1xuICAgICAgICBzLnB1c2goZSksIG4uam8uc2V0KHQsIHMpO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgY29uc3QgbiA9IE9vKHQsIFwiSW5pdGlhbGl6YXRpb24gb2Ygd2FpdEZvclBlbmRpbmdXcml0ZXMoKSBvcGVyYXRpb24gZmFpbGVkXCIpO1xuICAgICAgICBlLnJlamVjdChuKTtcbiAgICB9XG59XG5cbi8qKlxuICogVHJpZ2dlcnMgdGhlIGNhbGxiYWNrcyB0aGF0IGFyZSB3YWl0aW5nIGZvciB0aGlzIGJhdGNoIGlkIHRvIGdldCBhY2tub3dsZWRnZWQgYnkgc2VydmVyLFxuICogaWYgdGhlcmUgYXJlIGFueS5cbiAqLyBmdW5jdGlvbiBfYSh0LCBlKSB7XG4gICAgKHQuam8uZ2V0KGUpIHx8IFtdKS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgdC5yZXNvbHZlKCk7XG4gICAgfSkpLCB0LmpvLmRlbGV0ZShlKTtcbn1cblxuLyoqIFJlamVjdCBhbGwgb3V0c3RhbmRpbmcgY2FsbGJhY2tzIHdhaXRpbmcgZm9yIHBlbmRpbmcgd3JpdGVzIHRvIGNvbXBsZXRlLiAqLyBmdW5jdGlvbiBtYSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHEodCk7XG4gICAgbGV0IGkgPSBzLktvW3MuY3VycmVudFVzZXIudG9LZXkoKV07XG4gICAgLy8gTk9URTogTXV0YXRpb25zIHJlc3RvcmVkIGZyb20gcGVyc2lzdGVuY2Ugd29uJ3QgaGF2ZSBjYWxsYmFja3MsIHNvIGl0J3NcbiAgICAvLyBva2F5IGZvciB0aGVyZSB0byBiZSBubyBjYWxsYmFjayBmb3IgdGhpcyBJRC5cbiAgICAgICAgaWYgKGkpIHtcbiAgICAgICAgY29uc3QgdCA9IGkuZ2V0KGUpO1xuICAgICAgICB0ICYmIChuID8gdC5yZWplY3QobikgOiB0LnJlc29sdmUoKSwgaSA9IGkucmVtb3ZlKGUpKSwgcy5Lb1tzLmN1cnJlbnRVc2VyLnRvS2V5KCldID0gaTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdhKHQsIGUsIG4gPSBudWxsKSB7XG4gICAgdC5zaGFyZWRDbGllbnRTdGF0ZS5yZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0KGUpO1xuICAgIGZvciAoY29uc3QgcyBvZiB0Lk1vLmdldChlKSkgdC5Pby5kZWxldGUocyksIG4gJiYgdC5Gby56byhzLCBuKTtcbiAgICBpZiAodC5Nby5kZWxldGUoZSksIHQuaXNQcmltYXJ5Q2xpZW50KSB7XG4gICAgICAgIHQucW8udXMoZSkuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0LnFvLmNvbnRhaW5zS2V5KGUpIHx8IFxuICAgICAgICAgICAgLy8gV2UgcmVtb3ZlZCB0aGUgbGFzdCByZWZlcmVuY2UgZm9yIHRoaXMga2V5XG4gICAgICAgICAgICB5YSh0LCBlKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24geWEodCwgZSkge1xuICAgIHQuTG8uZGVsZXRlKGUucGF0aC5jYW5vbmljYWxTdHJpbmcoKSk7XG4gICAgLy8gSXQncyBwb3NzaWJsZSB0aGF0IHRoZSB0YXJnZXQgYWxyZWFkeSBnb3QgcmVtb3ZlZCBiZWNhdXNlIHRoZSBxdWVyeSBmYWlsZWQuIEluIHRoYXQgY2FzZSxcbiAgICAvLyB0aGUga2V5IHdvbid0IGV4aXN0IGluIGBsaW1ib1RhcmdldHNCeUtleWAuIE9ubHkgZG8gdGhlIGNsZWFudXAgaWYgd2Ugc3RpbGwgaGF2ZSB0aGUgdGFyZ2V0LlxuICAgIGNvbnN0IG4gPSB0LkJvLmdldChlKTtcbiAgICBudWxsICE9PSBuICYmIChsbyh0LnJlbW90ZVN0b3JlLCBuKSwgdC5CbyA9IHQuQm8ucmVtb3ZlKGUpLCB0LlVvLmRlbGV0ZShuKSwgRWEodCkpO1xufVxuXG5mdW5jdGlvbiBwYSh0LCBlLCBuKSB7XG4gICAgZm9yIChjb25zdCBzIG9mIG4pIGlmIChzIGluc3RhbmNlb2YgWm8pIHQucW8uYWRkUmVmZXJlbmNlKHMua2V5LCBlKSwgVGEodCwgcyk7IGVsc2UgaWYgKHMgaW5zdGFuY2VvZiB0YSkge1xuICAgICAgICAkKFwiU3luY0VuZ2luZVwiLCBcIkRvY3VtZW50IG5vIGxvbmdlciBpbiBsaW1ibzogXCIgKyBzLmtleSksIHQucW8ucmVtb3ZlUmVmZXJlbmNlKHMua2V5LCBlKTtcbiAgICAgICAgdC5xby5jb250YWluc0tleShzLmtleSkgfHwgXG4gICAgICAgIC8vIFdlIHJlbW92ZWQgdGhlIGxhc3QgcmVmZXJlbmNlIGZvciB0aGlzIGtleVxuICAgICAgICB5YSh0LCBzLmtleSk7XG4gICAgfSBlbHNlIEwoKTtcbn1cblxuZnVuY3Rpb24gVGEodCwgZSkge1xuICAgIGNvbnN0IG4gPSBlLmtleSwgcyA9IG4ucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICB0LkJvLmdldChuKSB8fCB0LkxvLmhhcyhzKSB8fCAoJChcIlN5bmNFbmdpbmVcIiwgXCJOZXcgZG9jdW1lbnQgaW4gbGltYm86IFwiICsgbiksIHQuTG8uYWRkKHMpLCBcbiAgICBFYSh0KSk7XG59XG5cbi8qKlxuICogU3RhcnRzIGxpc3RlbnMgZm9yIGRvY3VtZW50cyBpbiBsaW1ibyB0aGF0IGFyZSBlbnF1ZXVlZCBmb3IgcmVzb2x1dGlvbixcbiAqIHN1YmplY3QgdG8gYSBtYXhpbXVtIG51bWJlciBvZiBjb25jdXJyZW50IHJlc29sdXRpb25zLlxuICpcbiAqIFdpdGhvdXQgYm91bmRpbmcgdGhlIG51bWJlciBvZiBjb25jdXJyZW50IHJlc29sdXRpb25zLCB0aGUgc2VydmVyIGNhbiBmYWlsXG4gKiB3aXRoIFwicmVzb3VyY2UgZXhoYXVzdGVkXCIgZXJyb3JzIHdoaWNoIGNhbiBsZWFkIHRvIHBhdGhvbG9naWNhbCBjbGllbnRcbiAqIGJlaGF2aW9yIGFzIHNlZW4gaW4gaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWpzLXNkay9pc3N1ZXMvMjY4My5cbiAqLyBmdW5jdGlvbiBFYSh0KSB7XG4gICAgZm9yICg7dC5Mby5zaXplID4gMCAmJiB0LkJvLnNpemUgPCB0Lm1heENvbmN1cnJlbnRMaW1ib1Jlc29sdXRpb25zOyApIHtcbiAgICAgICAgY29uc3QgZSA9IHQuTG8udmFsdWVzKCkubmV4dCgpLnZhbHVlO1xuICAgICAgICB0LkxvLmRlbGV0ZShlKTtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBTdChkdC5mcm9tU3RyaW5nKGUpKSwgcyA9IHQuUW8ubmV4dCgpO1xuICAgICAgICB0LlVvLnNldChzLCBuZXcgc2EobikpLCB0LkJvID0gdC5Cby5pbnNlcnQobiwgcyksIGhvKHQucmVtb3RlU3RvcmUsIG5ldyBhaShSZShnZShuLnBhdGgpKSwgcywgMiAvKiBMaW1ib1Jlc29sdXRpb24gKi8gLCBldC5JKSk7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBJYSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHEodCksIGkgPSBbXSwgciA9IFtdLCBvID0gW107XG4gICAgcy5Pby5pc0VtcHR5KCkgfHwgKHMuT28uZm9yRWFjaCgoKHQsIGEpID0+IHtcbiAgICAgICAgby5wdXNoKHMuR28oYSwgZSwgbikudGhlbigodCA9PiB7XG4gICAgICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgICAgIHMuaXNQcmltYXJ5Q2xpZW50ICYmIHMuc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlUXVlcnlTdGF0ZShhLnRhcmdldElkLCB0LmZyb21DYWNoZSA/IFwibm90LWN1cnJlbnRcIiA6IFwiY3VycmVudFwiKSwgXG4gICAgICAgICAgICAgICAgaS5wdXNoKHQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB1ci4kbihhLnRhcmdldElkLCB0KTtcbiAgICAgICAgICAgICAgICByLnB1c2goZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSk7XG4gICAgfSkpLCBhd2FpdCBQcm9taXNlLmFsbChvKSwgcy5Gby5QcihpKSwgYXdhaXQgYXN5bmMgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gcSh0KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJub3RpZnlMb2NhbFZpZXdDaGFuZ2VzXCIsIFwicmVhZHdyaXRlXCIsICh0ID0+IEdzLmZvckVhY2goZSwgKGUgPT4gR3MuZm9yRWFjaChlLmtuLCAocyA9PiBuLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLmFkZFJlZmVyZW5jZSh0LCBlLnRhcmdldElkLCBzKSkpLm5leHQoKCgpID0+IEdzLmZvckVhY2goZS54biwgKHMgPT4gbi5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5yZW1vdmVSZWZlcmVuY2UodCwgZS50YXJnZXRJZCwgcykpKSkpKSkpKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgaWYgKCFYcyh0KSkgdGhyb3cgdDtcbiAgICAgICAgICAgIC8vIElmIGBub3RpZnlMb2NhbFZpZXdDaGFuZ2VzYCBmYWlscywgd2UgZGlkIG5vdCBhZHZhbmNlIHRoZSBzZXF1ZW5jZVxuICAgICAgICAgICAgLy8gbnVtYmVyIGZvciB0aGUgZG9jdW1lbnRzIHRoYXQgd2VyZSBpbmNsdWRlZCBpbiB0aGlzIHRyYW5zYWN0aW9uLlxuICAgICAgICAgICAgLy8gVGhpcyBtaWdodCB0cmlnZ2VyIHRoZW0gdG8gYmUgZGVsZXRlZCBlYXJsaWVyIHRoYW4gdGhleSBvdGhlcndpc2VcbiAgICAgICAgICAgIC8vIHdvdWxkIGhhdmUsIGJ1dCBpdCBzaG91bGQgbm90IGludmFsaWRhdGUgdGhlIGludGVncml0eSBvZiB0aGUgZGF0YS5cbiAgICAgICAgICAgICQoXCJMb2NhbFN0b3JlXCIsIFwiRmFpbGVkIHRvIHVwZGF0ZSBzZXF1ZW5jZSBudW1iZXJzOiBcIiArIHQpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC50YXJnZXRJZDtcbiAgICAgICAgICAgIGlmICghdC5mcm9tQ2FjaGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gbi5xbi5nZXQoZSksIHMgPSB0LnNuYXBzaG90VmVyc2lvbiwgaSA9IHQud2l0aExhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24ocyk7XG4gICAgICAgICAgICAgICAgLy8gQWR2YW5jZSB0aGUgbGFzdCBsaW1ibyBmcmVlIHNuYXBzaG90IHZlcnNpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5xbiA9IG4ucW4uaW5zZXJ0KGUsIGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfShzLmxvY2FsU3RvcmUsIHIpKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gQWEodCwgZSkge1xuICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgIGlmICghbi5jdXJyZW50VXNlci5pc0VxdWFsKGUpKSB7XG4gICAgICAgICQoXCJTeW5jRW5naW5lXCIsIFwiVXNlciBjaGFuZ2UuIE5ldyB1c2VyOlwiLCBlLnRvS2V5KCkpO1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgZHIobi5sb2NhbFN0b3JlLCBlKTtcbiAgICAgICAgbi5jdXJyZW50VXNlciA9IGUsIFxuICAgICAgICAvLyBGYWlscyB0YXNrcyB3YWl0aW5nIGZvciBwZW5kaW5nIHdyaXRlcyByZXF1ZXN0ZWQgYnkgcHJldmlvdXMgdXNlci5cbiAgICAgICAgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgdC5qby5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0LnJlamVjdChuZXcgaihLLkNBTkNFTExFRCwgZSkpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKSwgdC5qby5jbGVhcigpO1xuICAgICAgICB9KG4sIFwiJ3dhaXRGb3JQZW5kaW5nV3JpdGVzJyBwcm9taXNlIGlzIHJlamVjdGVkIGR1ZSB0byBhIHVzZXIgY2hhbmdlLlwiKSwgXG4gICAgICAgIC8vIFRPRE8oYi8xMTQyMjY0MTcpOiBDb25zaWRlciBjYWxsaW5nIHRoaXMgb25seSBpbiB0aGUgcHJpbWFyeSB0YWIuXG4gICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUuaGFuZGxlVXNlckNoYW5nZShlLCB0LnJlbW92ZWRCYXRjaElkcywgdC5hZGRlZEJhdGNoSWRzKSwgYXdhaXQgSWEobiwgdC5Hbik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBSYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IHEodCksIHMgPSBuLlVvLmdldChlKTtcbiAgICBpZiAocyAmJiBzLiRvKSByZXR1cm4gU24oKS5hZGQocy5rZXkpO1xuICAgIHtcbiAgICAgICAgbGV0IHQgPSBTbigpO1xuICAgICAgICBjb25zdCBzID0gbi5Nby5nZXQoZSk7XG4gICAgICAgIGlmICghcykgcmV0dXJuIHQ7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiBzKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gbi5Pby5nZXQoZSk7XG4gICAgICAgICAgICB0ID0gdC51bmlvbldpdGgocy52aWV3LlBvKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG59XG5cbi8qKlxuICogUmVjb25jaWxlIHRoZSBsaXN0IG9mIHN5bmNlZCBkb2N1bWVudHMgaW4gYW4gZXhpc3RpbmcgdmlldyB3aXRoIHRob3NlXG4gKiBmcm9tIHBlcnNpc3RlbmNlLlxuICovIGFzeW5jIGZ1bmN0aW9uIFBhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KSwgcyA9IGF3YWl0IEVyKG4ubG9jYWxTdG9yZSwgZS5xdWVyeSwgXG4gICAgLyogdXNlUHJldmlvdXNSZXN1bHRzPSAqLyAhMCksIGkgPSBlLnZpZXcua28ocyk7XG4gICAgcmV0dXJuIG4uaXNQcmltYXJ5Q2xpZW50ICYmIHBhKG4sIGUudGFyZ2V0SWQsIGkuQ28pLCBpO1xufVxuXG4vKipcbiAqIFJldHJpZXZlcyBuZXdseSBjaGFuZ2VkIGRvY3VtZW50cyBmcm9tIHJlbW90ZSBkb2N1bWVudCBjYWNoZSBhbmQgcmFpc2VzXG4gKiBzbmFwc2hvdHMgaWYgbmVlZGVkLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gYmEodCkge1xuICAgIGNvbnN0IGUgPSBxKHQpO1xuICAgIHJldHVybiBBcihlLmxvY2FsU3RvcmUpLnRoZW4oKHQgPT4gSWEoZSwgdCkpKTtcbn1cblxuLyoqIEFwcGxpZXMgYSBtdXRhdGlvbiBzdGF0ZSB0byBhbiBleGlzdGluZyBiYXRjaC4gICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gdmEodCwgZSwgbiwgcykge1xuICAgIGNvbnN0IGkgPSBxKHQpLCByID0gYXdhaXQgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gcSh0KSwgcyA9IHEobi5Bbik7XG4gICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiTG9va3VwIG11dGF0aW9uIGRvY3VtZW50c1wiLCBcInJlYWRvbmx5XCIsICh0ID0+IHMuWnQodCwgZSkubmV4dCgoZSA9PiBlID8gbi5Xbi52bih0LCBlKSA6IEdzLnJlc29sdmUobnVsbCkpKSkpO1xuICAgIH1cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgIChpLmxvY2FsU3RvcmUsIGUpO1xuICAgIG51bGwgIT09IHIgPyAoXCJwZW5kaW5nXCIgPT09IG4gPyBcbiAgICAvLyBJZiB3ZSBhcmUgdGhlIHByaW1hcnkgY2xpZW50LCB3ZSBuZWVkIHRvIHNlbmQgdGhpcyB3cml0ZSB0byB0aGVcbiAgICAvLyBiYWNrZW5kLiBTZWNvbmRhcnkgY2xpZW50cyB3aWxsIGlnbm9yZSB0aGVzZSB3cml0ZXMgc2luY2UgdGhlaXIgcmVtb3RlXG4gICAgLy8gY29ubmVjdGlvbiBpcyBkaXNhYmxlZC5cbiAgICBhd2FpdCBSbyhpLnJlbW90ZVN0b3JlKSA6IFwiYWNrbm93bGVkZ2VkXCIgPT09IG4gfHwgXCJyZWplY3RlZFwiID09PSBuID8gKFxuICAgIC8vIE5PVEU6IEJvdGggdGhlc2UgbWV0aG9kcyBhcmUgbm8tb3BzIGZvciBiYXRjaGVzIHRoYXQgb3JpZ2luYXRlZCBmcm9tXG4gICAgLy8gb3RoZXIgY2xpZW50cy5cbiAgICBtYShpLCBlLCBzIHx8IG51bGwpLCBfYShpLCBlKSwgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBxKHEodCkuQW4pLmVlKGUpO1xuICAgIH1cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgIChpLmxvY2FsU3RvcmUsIGUpKSA6IEwoKSwgYXdhaXQgSWEoaSwgcikpIDogXG4gICAgLy8gQSB0aHJvdHRsZWQgdGFiIG1heSBub3QgaGF2ZSBzZWVuIHRoZSBtdXRhdGlvbiBiZWZvcmUgaXQgd2FzIGNvbXBsZXRlZFxuICAgIC8vIGFuZCByZW1vdmVkIGZyb20gdGhlIG11dGF0aW9uIHF1ZXVlLCBpbiB3aGljaCBjYXNlIHdlIHdvbid0IGhhdmUgY2FjaGVkXG4gICAgLy8gdGhlIGFmZmVjdGVkIGRvY3VtZW50cy4gSW4gdGhpcyBjYXNlIHdlIGNhbiBzYWZlbHkgaWdub3JlIHRoZSB1cGRhdGVcbiAgICAvLyBzaW5jZSB0aGF0IG1lYW5zIHdlIGRpZG4ndCBhcHBseSB0aGUgbXV0YXRpb24gbG9jYWxseSBhdCBhbGwgKGlmIHdlXG4gICAgLy8gaGFkLCB3ZSB3b3VsZCBoYXZlIGNhY2hlZCB0aGUgYWZmZWN0ZWQgZG9jdW1lbnRzKSwgYW5kIHNvIHdlIHdpbGwganVzdFxuICAgIC8vIHNlZSBhbnkgcmVzdWx0aW5nIGRvY3VtZW50IGNoYW5nZXMgdmlhIG5vcm1hbCByZW1vdGUgZG9jdW1lbnQgdXBkYXRlc1xuICAgIC8vIGFzIGFwcGxpY2FibGUuXG4gICAgJChcIlN5bmNFbmdpbmVcIiwgXCJDYW5ub3QgYXBwbHkgbXV0YXRpb24gYmF0Y2ggd2l0aCBpZDogXCIgKyBlKTtcbn1cblxuLyoqIEFwcGxpZXMgYSBxdWVyeSB0YXJnZXQgY2hhbmdlIGZyb20gYSBkaWZmZXJlbnQgdGFiLiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIFZhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcSh0KTtcbiAgICBpZiAoeGEobiksICRhKG4pLCAhMCA9PT0gZSAmJiAhMCAhPT0gbi5Xbykge1xuICAgICAgICAvLyBTZWNvbmRhcnkgdGFicyBvbmx5IG1haW50YWluIFZpZXdzIGZvciB0aGVpciBsb2NhbCBsaXN0ZW5lcnMgYW5kIHRoZVxuICAgICAgICAvLyBWaWV3cyBpbnRlcm5hbCBzdGF0ZSBtYXkgbm90IGJlIDEwMCUgcG9wdWxhdGVkIChpbiBwYXJ0aWN1bGFyXG4gICAgICAgIC8vIHNlY29uZGFyeSB0YWJzIGRvbid0IHRyYWNrIHN5bmNlZERvY3VtZW50cywgdGhlIHNldCBvZiBkb2N1bWVudHMgdGhlXG4gICAgICAgIC8vIHNlcnZlciBjb25zaWRlcnMgdG8gYmUgaW4gdGhlIHRhcmdldCkuIFNvIHdoZW4gYSBzZWNvbmRhcnkgYmVjb21lc1xuICAgICAgICAvLyBwcmltYXJ5LCB3ZSBuZWVkIHRvIG5lZWQgdG8gbWFrZSBzdXJlIHRoYXQgYWxsIHZpZXdzIGZvciBhbGwgdGFyZ2V0c1xuICAgICAgICAvLyBtYXRjaCB0aGUgc3RhdGUgb24gZGlzay5cbiAgICAgICAgY29uc3QgdCA9IG4uc2hhcmVkQ2xpZW50U3RhdGUuZ2V0QWxsQWN0aXZlUXVlcnlUYXJnZXRzKCksIGUgPSBhd2FpdCBTYShuLCB0LnRvQXJyYXkoKSk7XG4gICAgICAgIG4uV28gPSAhMCwgYXdhaXQga28obi5yZW1vdGVTdG9yZSwgITApO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkgaG8obi5yZW1vdGVTdG9yZSwgdCk7XG4gICAgfSBlbHNlIGlmICghMSA9PT0gZSAmJiAhMSAhPT0gbi5Xbykge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIGxldCBlID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIG4uTW8uZm9yRWFjaCgoKHMsIGkpID0+IHtcbiAgICAgICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUuaXNMb2NhbFF1ZXJ5VGFyZ2V0KGkpID8gdC5wdXNoKGkpIDogZSA9IGUudGhlbigoKCkgPT4gKGdhKG4sIGkpLCBcbiAgICAgICAgICAgIFRyKG4ubG9jYWxTdG9yZSwgaSwgXG4gICAgICAgICAgICAvKmtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhPSovICEwKSkpKSwgbG8obi5yZW1vdGVTdG9yZSwgaSk7XG4gICAgICAgIH0pKSwgYXdhaXQgZSwgYXdhaXQgU2EobiwgdCksIFxuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gcSh0KTtcbiAgICAgICAgICAgIGUuVW8uZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBsbyhlLnJlbW90ZVN0b3JlLCBuKTtcbiAgICAgICAgICAgIH0pKSwgZS5xby5ocygpLCBlLlVvID0gbmV3IE1hcCwgZS5CbyA9IG5ldyBnbihTdC5jb21wYXJhdG9yKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFJlY29uY2lsZSB0aGUgcXVlcnkgdmlld3Mgb2YgdGhlIHByb3ZpZGVkIHF1ZXJ5IHRhcmdldHMgd2l0aCB0aGUgc3RhdGUgZnJvbVxuICogcGVyc2lzdGVuY2UuIFJhaXNlcyBzbmFwc2hvdHMgZm9yIGFueSBjaGFuZ2VzIHRoYXQgYWZmZWN0IHRoZSBsb2NhbFxuICogY2xpZW50IGFuZCByZXR1cm5zIHRoZSB1cGRhdGVkIHN0YXRlIG9mIGFsbCB0YXJnZXQncyBxdWVyeSBkYXRhLlxuICpcbiAqIEBwYXJhbSBzeW5jRW5naW5lIC0gVGhlIHN5bmMgZW5naW5lIGltcGxlbWVudGF0aW9uXG4gKiBAcGFyYW0gdGFyZ2V0cyAtIHRoZSBsaXN0IG9mIHRhcmdldHMgd2l0aCB2aWV3cyB0aGF0IG5lZWQgdG8gYmUgcmVjb21wdXRlZFxuICogQHBhcmFtIHRyYW5zaXRpb25Ub1ByaW1hcnkgLSBgdHJ1ZWAgaWZmIHRoZSB0YWIgdHJhbnNpdGlvbnMgZnJvbSBhIHNlY29uZGFyeVxuICogdGFiIHRvIGEgcHJpbWFyeSB0YWJcbiAqL1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgICAgICAobiksIG4uV28gPSAhMSwgYXdhaXQga28obi5yZW1vdGVTdG9yZSwgITEpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gU2EodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBxKHQpLCBpID0gW10sIHIgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICBsZXQgZTtcbiAgICAgICAgY29uc3QgbiA9IHMuTW8uZ2V0KHQpO1xuICAgICAgICBpZiAobiAmJiAwICE9PSBuLmxlbmd0aCkge1xuICAgICAgICAgICAgLy8gRm9yIHF1ZXJpZXMgdGhhdCBoYXZlIGEgbG9jYWwgVmlldywgd2UgZmV0Y2ggdGhlaXIgY3VycmVudCBzdGF0ZVxuICAgICAgICAgICAgLy8gZnJvbSBMb2NhbFN0b3JlIChhcyB0aGUgcmVzdW1lIHRva2VuIGFuZCB0aGUgc25hcHNob3QgdmVyc2lvblxuICAgICAgICAgICAgLy8gbWlnaHQgaGF2ZSBjaGFuZ2VkKSBhbmQgcmVjb25jaWxlIHRoZWlyIHZpZXdzIHdpdGggdGhlIHBlcnNpc3RlZFxuICAgICAgICAgICAgLy8gc3RhdGUgKHRoZSBsaXN0IG9mIHN5bmNlZERvY3VtZW50cyBtYXkgaGF2ZSBnb3R0ZW4gb3V0IG9mIHN5bmMpLlxuICAgICAgICAgICAgZSA9IGF3YWl0IHByKHMubG9jYWxTdG9yZSwgUmUoblswXSkpO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIG4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gcy5Pby5nZXQodCksIG4gPSBhd2FpdCBQYShzLCBlKTtcbiAgICAgICAgICAgICAgICBuLnNuYXBzaG90ICYmIHIucHVzaChuLnNuYXBzaG90KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEZvciBxdWVyaWVzIHRoYXQgbmV2ZXIgZXhlY3V0ZWQgb24gdGhpcyBjbGllbnQsIHdlIG5lZWQgdG9cbiAgICAgICAgICAgIC8vIGFsbG9jYXRlIHRoZSB0YXJnZXQgaW4gTG9jYWxTdG9yZSBhbmQgaW5pdGlhbGl6ZSBhIG5ldyBWaWV3LlxuICAgICAgICAgICAgY29uc3QgbiA9IGF3YWl0IElyKHMubG9jYWxTdG9yZSwgdCk7XG4gICAgICAgICAgICBlID0gYXdhaXQgcHIocy5sb2NhbFN0b3JlLCBuKSwgYXdhaXQgb2EocywgRGEobiksIHQsIFxuICAgICAgICAgICAgLypjdXJyZW50PSovICExKTtcbiAgICAgICAgfVxuICAgICAgICBpLnB1c2goZSk7XG4gICAgfVxuICAgIHJldHVybiBzLkZvLlByKHIpLCBpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBgUXVlcnlgIG9iamVjdCBmcm9tIHRoZSBzcGVjaWZpZWQgYFRhcmdldGAuIFRoZXJlIGlzIG5vIHdheSB0b1xuICogb2J0YWluIHRoZSBvcmlnaW5hbCBgUXVlcnlgLCBzbyB3ZSBzeW50aGVzaXplIGEgYFF1ZXJ5YCBmcm9tIHRoZSBgVGFyZ2V0YFxuICogb2JqZWN0LlxuICpcbiAqIFRoZSBzeW50aGVzaXplZCByZXN1bHQgbWlnaHQgYmUgZGlmZmVyZW50IGZyb20gdGhlIG9yaWdpbmFsIGBRdWVyeWAsIGJ1dFxuICogc2luY2UgdGhlIHN5bnRoZXNpemVkIGBRdWVyeWAgc2hvdWxkIHJldHVybiB0aGUgc2FtZSByZXN1bHRzIGFzIHRoZVxuICogb3JpZ2luYWwgb25lIChvbmx5IHRoZSBwcmVzZW50YXRpb24gb2YgcmVzdWx0cyBtaWdodCBkaWZmZXIpLCB0aGUgcG90ZW50aWFsXG4gKiBkaWZmZXJlbmNlIHdpbGwgbm90IGNhdXNlIGlzc3Vlcy5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmZ1bmN0aW9uIERhKHQpIHtcbiAgICByZXR1cm4gbWUodC5wYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgdC5vcmRlckJ5LCB0LmZpbHRlcnMsIHQubGltaXQsIFwiRlwiIC8qIEZpcnN0ICovICwgdC5zdGFydEF0LCB0LmVuZEF0KTtcbn1cblxuLyoqIFJldHVybnMgdGhlIElEcyBvZiB0aGUgY2xpZW50cyB0aGF0IGFyZSBjdXJyZW50bHkgYWN0aXZlLiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmZ1bmN0aW9uIENhKHQpIHtcbiAgICBjb25zdCBlID0gcSh0KTtcbiAgICByZXR1cm4gcShxKGUubG9jYWxTdG9yZSkucGVyc2lzdGVuY2UpLlRuKCk7XG59XG5cbi8qKiBBcHBsaWVzIGEgcXVlcnkgdGFyZ2V0IGNoYW5nZSBmcm9tIGEgZGlmZmVyZW50IHRhYi4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5hc3luYyBmdW5jdGlvbiBOYSh0LCBlLCBuLCBzKSB7XG4gICAgY29uc3QgaSA9IHEodCk7XG4gICAgaWYgKGkuV28pIFxuICAgIC8vIElmIHdlIHJlY2VpdmUgYSB0YXJnZXQgc3RhdGUgbm90aWZpY2F0aW9uIHZpYSBXZWJTdG9yYWdlLCB3ZSBhcmVcbiAgICAvLyBlaXRoZXIgYWxyZWFkeSBzZWNvbmRhcnkgb3IgYW5vdGhlciB0YWIgaGFzIHRha2VuIHRoZSBwcmltYXJ5IGxlYXNlLlxuICAgICQoXCJTeW5jRW5naW5lXCIsIFwiSWdub3JpbmcgdW5leHBlY3RlZCBxdWVyeSBzdGF0ZSBub3RpZmljYXRpb24uXCIpOyBlbHNlIGlmIChpLk1vLmhhcyhlKSkgc3dpdGNoIChuKSB7XG4gICAgICBjYXNlIFwiY3VycmVudFwiOlxuICAgICAgY2FzZSBcIm5vdC1jdXJyZW50XCI6XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBhd2FpdCBBcihpLmxvY2FsU3RvcmUpLCBzID0gTm4uY3JlYXRlU3ludGhlc2l6ZWRSZW1vdGVFdmVudEZvckN1cnJlbnRDaGFuZ2UoZSwgXCJjdXJyZW50XCIgPT09IG4pO1xuICAgICAgICAgICAgYXdhaXQgSWEoaSwgdCwgcyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICBjYXNlIFwicmVqZWN0ZWRcIjpcbiAgICAgICAgYXdhaXQgVHIoaS5sb2NhbFN0b3JlLCBlLCBcbiAgICAgICAgLyoga2VlcFBlcnNpc3RlZFRhcmdldERhdGEgKi8gITApLCBnYShpLCBlLCBzKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIEwoKTtcbiAgICB9XG59XG5cbi8qKiBBZGRzIG9yIHJlbW92ZXMgV2F0Y2ggdGFyZ2V0cyBmb3IgcXVlcmllcyBmcm9tIGRpZmZlcmVudCB0YWJzLiAqLyBhc3luYyBmdW5jdGlvbiBrYSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHhhKHQpO1xuICAgIGlmIChzLldvKSB7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSB7XG4gICAgICAgICAgICBpZiAocy5Nby5oYXModCkpIHtcbiAgICAgICAgICAgICAgICAvLyBBIHRhcmdldCBtaWdodCBoYXZlIGJlZW4gYWRkZWQgaW4gYSBwcmV2aW91cyBhdHRlbXB0XG4gICAgICAgICAgICAgICAgJChcIlN5bmNFbmdpbmVcIiwgXCJBZGRpbmcgYW4gYWxyZWFkeSBhY3RpdmUgdGFyZ2V0IFwiICsgdCk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBlID0gYXdhaXQgSXIocy5sb2NhbFN0b3JlLCB0KSwgbiA9IGF3YWl0IHByKHMubG9jYWxTdG9yZSwgZSk7XG4gICAgICAgICAgICBhd2FpdCBvYShzLCBEYShlKSwgbi50YXJnZXRJZCwgXG4gICAgICAgICAgICAvKmN1cnJlbnQ9Ki8gITEpLCBobyhzLnJlbW90ZVN0b3JlLCBuKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgbikgXG4gICAgICAgIC8vIENoZWNrIHRoYXQgdGhlIHRhcmdldCBpcyBzdGlsbCBhY3RpdmUgc2luY2UgdGhlIHRhcmdldCBtaWdodCBoYXZlIGJlZW5cbiAgICAgICAgLy8gcmVtb3ZlZCBpZiBpdCBoYXMgYmVlbiByZWplY3RlZCBieSB0aGUgYmFja2VuZC5cbiAgICAgICAgcy5Nby5oYXModCkgJiYgXG4gICAgICAgIC8vIFJlbGVhc2UgcXVlcmllcyB0aGF0IGFyZSBzdGlsbCBhY3RpdmUuXG4gICAgICAgIGF3YWl0IFRyKHMubG9jYWxTdG9yZSwgdCwgXG4gICAgICAgIC8qIGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhICovICExKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICBsbyhzLnJlbW90ZVN0b3JlLCB0KSwgZ2EocywgdCk7XG4gICAgICAgIH0pKS5jYXRjaChCaSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB4YSh0KSB7XG4gICAgY29uc3QgZSA9IHEodCk7XG4gICAgcmV0dXJuIGUucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLmFwcGx5UmVtb3RlRXZlbnQgPSB1YS5iaW5kKG51bGwsIGUpLCBlLnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0ID0gUmEuYmluZChudWxsLCBlKSwgXG4gICAgZS5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIucmVqZWN0TGlzdGVuID0gbGEuYmluZChudWxsLCBlKSwgZS5Gby5QciA9IFFvLmJpbmQobnVsbCwgZS5ldmVudE1hbmFnZXIpLCBcbiAgICBlLkZvLnpvID0gV28uYmluZChudWxsLCBlLmV2ZW50TWFuYWdlciksIGU7XG59XG5cbmZ1bmN0aW9uICRhKHQpIHtcbiAgICBjb25zdCBlID0gcSh0KTtcbiAgICByZXR1cm4gZS5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIuYXBwbHlTdWNjZXNzZnVsV3JpdGUgPSBmYS5iaW5kKG51bGwsIGUpLCBlLnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5yZWplY3RGYWlsZWRXcml0ZSA9IGRhLmJpbmQobnVsbCwgZSksIFxuICAgIGU7XG59XG5cbi8qKlxuICogTG9hZHMgYSBGaXJlc3RvcmUgYnVuZGxlIGludG8gdGhlIFNESy4gVGhlIHJldHVybmVkIHByb21pc2UgcmVzb2x2ZXMgd2hlblxuICogdGhlIGJ1bmRsZSBmaW5pc2hlZCBsb2FkaW5nLlxuICpcbiAqIEBwYXJhbSBzeW5jRW5naW5lIC0gU3luY0VuZ2luZSB0byB1c2UuXG4gKiBAcGFyYW0gYnVuZGxlUmVhZGVyIC0gQnVuZGxlIHRvIGxvYWQgaW50byB0aGUgU0RLLlxuICogQHBhcmFtIHRhc2sgLSBMb2FkQnVuZGxlVGFzayB1c2VkIHRvIHVwZGF0ZSB0aGUgbG9hZGluZyBwcm9ncmVzcyB0byBwdWJsaWMgQVBJLlxuICovIGZ1bmN0aW9uIEZhKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gcSh0KTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgIChhc3luYyBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzID0gYXdhaXQgZS5nZXRNZXRhZGF0YSgpO1xuICAgICAgICAgICAgaWYgKGF3YWl0IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gcSh0KSwgcyA9IEduKGUuY3JlYXRlVGltZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJoYXNOZXdlckJ1bmRsZVwiLCBcInJlYWRvbmx5XCIsICh0ID0+IG4uWWUuZ2V0QnVuZGxlTWV0YWRhdGEodCwgZS5pZCkpKS50aGVuKCh0ID0+ICEhdCAmJiB0LmNyZWF0ZVRpbWUuY29tcGFyZVRvKHMpID49IDApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogU2F2ZXMgdGhlIGdpdmVuIGBCdW5kbGVNZXRhZGF0YWAgdG8gbG9jYWwgcGVyc2lzdGVuY2UuXG4gKi8gKHQubG9jYWxTdG9yZSwgcykpIHJldHVybiBhd2FpdCBlLmNsb3NlKCksIHZvaWQgbi5fY29tcGxldGVXaXRoKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0YXNrU3RhdGU6IFwiU3VjY2Vzc1wiLFxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudHNMb2FkZWQ6IHQudG90YWxEb2N1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgIGJ5dGVzTG9hZGVkOiB0LnRvdGFsQnl0ZXMsXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsRG9jdW1lbnRzOiB0LnRvdGFsRG9jdW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICB0b3RhbEJ5dGVzOiB0LnRvdGFsQnl0ZXNcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfShzKSk7XG4gICAgICAgICAgICBuLl91cGRhdGVQcm9ncmVzcyhYbyhzKSk7XG4gICAgICAgICAgICBjb25zdCBpID0gbmV3IFlvKHMsIHQubG9jYWxTdG9yZSwgZS5rKTtcbiAgICAgICAgICAgIGxldCByID0gYXdhaXQgZS5IbygpO1xuICAgICAgICAgICAgZm9yICg7cjsgKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGF3YWl0IGkueW8ocik7XG4gICAgICAgICAgICAgICAgdCAmJiBuLl91cGRhdGVQcm9ncmVzcyh0KSwgciA9IGF3YWl0IGUuSG8oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG8gPSBhd2FpdCBpLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICAvLyBUT0RPKGIvMTYwODc2NDQzKTogVGhpcyBjdXJyZW50bHkgcmFpc2VzIHNuYXBzaG90cyB3aXRoXG4gICAgICAgICAgICAvLyBgZnJvbUNhY2hlPWZhbHNlYCBpZiB1c2VycyBhbHJlYWR5IGxpc3RlbiB0byBzb21lIHF1ZXJpZXMgYW5kIGJ1bmRsZXNcbiAgICAgICAgICAgIC8vIGhhcyBuZXdlciB2ZXJzaW9uLlxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgSWEodCwgby5JbiwgXG4gICAgICAgICAgICAvKiByZW1vdGVFdmVudCAqLyB2b2lkIDApLCBcbiAgICAgICAgICAgIC8vIFNhdmUgbWV0YWRhdGEsIHNvIGxvYWRpbmcgdGhlIHNhbWUgYnVuZGxlIHdpbGwgc2tpcC5cbiAgICAgICAgICAgIGF3YWl0IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gcSh0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlNhdmUgYnVuZGxlXCIsIFwicmVhZHdyaXRlXCIsICh0ID0+IG4uWWUuc2F2ZUJ1bmRsZU1ldGFkYXRhKHQsIGUpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIFJldHVybnMgYSBwcm9taXNlIG9mIGEgYE5hbWVkUXVlcnlgIGFzc29jaWF0ZWQgd2l0aCBnaXZlbiBxdWVyeSBuYW1lLiBQcm9taXNlXG4gKiByZXNvbHZlcyB0byB1bmRlZmluZWQgaWYgbm8gcGVyc2lzdGVkIGRhdGEgY2FuIGJlIGZvdW5kLlxuICovICh0LmxvY2FsU3RvcmUsIHMpLCBuLl9jb21wbGV0ZVdpdGgoby5wcm9ncmVzcyk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIE8oXCJTeW5jRW5naW5lXCIsIGBMb2FkaW5nIGJ1bmRsZSBmYWlsZWQgd2l0aCAke3R9YCksIG4uX2ZhaWxXaXRoKHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgLyoqXG4gKiBQcm92aWRlcyBhbGwgY29tcG9uZW50cyBuZWVkZWQgZm9yIEZpcmVzdG9yZSB3aXRoIGluLW1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAqIFVzZXMgRWFnZXJHQyBnYXJiYWdlIGNvbGxlY3Rpb24uXG4gKi8pKHMsIGUsIG4pLnRoZW4oKCgpID0+IHtcbiAgICAgICAgcy5zaGFyZWRDbGllbnRTdGF0ZS5ub3RpZnlCdW5kbGVMb2FkZWQoKTtcbiAgICB9KSk7XG59XG5cbmNsYXNzIE9hIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zeW5jaHJvbml6ZVRhYnMgPSAhMTtcbiAgICB9XG4gICAgYXN5bmMgaW5pdGlhbGl6ZSh0KSB7XG4gICAgICAgIHRoaXMuayA9IHRvKHQuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQpLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlID0gdGhpcy5Kbyh0KSwgdGhpcy5wZXJzaXN0ZW5jZSA9IHRoaXMuWW8odCksIFxuICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLnN0YXJ0KCksIHRoaXMuZ2NTY2hlZHVsZXIgPSB0aGlzLlhvKHQpLCB0aGlzLmxvY2FsU3RvcmUgPSB0aGlzLlpvKHQpO1xuICAgIH1cbiAgICBYbyh0KSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBabyh0KSB7XG4gICAgICAgIHJldHVybiBmcih0aGlzLnBlcnNpc3RlbmNlLCBuZXcgaHIsIHQuaW5pdGlhbFVzZXIsIHRoaXMuayk7XG4gICAgfVxuICAgIFlvKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB4cihGci5rcywgdGhpcy5rKTtcbiAgICB9XG4gICAgSm8odCkge1xuICAgICAgICByZXR1cm4gbmV3IFdyO1xuICAgIH1cbiAgICBhc3luYyB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHRoaXMuZ2NTY2hlZHVsZXIgJiYgdGhpcy5nY1NjaGVkdWxlci5zdG9wKCksIGF3YWl0IHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuc2h1dGRvd24oKSwgXG4gICAgICAgIGF3YWl0IHRoaXMucGVyc2lzdGVuY2Uuc2h1dGRvd24oKTtcbiAgICB9XG59XG5cbi8qKlxuICogUHJvdmlkZXMgYWxsIGNvbXBvbmVudHMgbmVlZGVkIGZvciBGaXJlc3RvcmUgd2l0aCBJbmRleGVkREIgcGVyc2lzdGVuY2UuXG4gKi8gY2xhc3MgTWEgZXh0ZW5kcyBPYSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLnRhID0gdCwgdGhpcy5jYWNoZVNpemVCeXRlcyA9IGUsIHRoaXMuZm9yY2VPd25lcnNoaXAgPSBuLCB0aGlzLnN5bmNocm9uaXplVGFicyA9ICExO1xuICAgIH1cbiAgICBhc3luYyBpbml0aWFsaXplKHQpIHtcbiAgICAgICAgYXdhaXQgc3VwZXIuaW5pdGlhbGl6ZSh0KSwgYXdhaXQgUnIodGhpcy5sb2NhbFN0b3JlKSwgYXdhaXQgdGhpcy50YS5pbml0aWFsaXplKHRoaXMsIHQpLCBcbiAgICAgICAgLy8gRW5xdWV1ZSB3cml0ZXMgZnJvbSBhIHByZXZpb3VzIHNlc3Npb25cbiAgICAgICAgYXdhaXQgJGEodGhpcy50YS5zeW5jRW5naW5lKSwgYXdhaXQgUm8odGhpcy50YS5yZW1vdGVTdG9yZSksIFxuICAgICAgICAvLyBOT1RFOiBUaGlzIHdpbGwgaW1tZWRpYXRlbHkgY2FsbCB0aGUgbGlzdGVuZXIsIHNvIHdlIG1ha2Ugc3VyZSB0b1xuICAgICAgICAvLyBzZXQgaXQgYWZ0ZXIgbG9jYWxTdG9yZSAvIHJlbW90ZVN0b3JlIGFyZSBzdGFydGVkLlxuICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLnNuKCgoKSA9PiAodGhpcy5nY1NjaGVkdWxlciAmJiAhdGhpcy5nY1NjaGVkdWxlci5zdGFydGVkICYmIHRoaXMuZ2NTY2hlZHVsZXIuc3RhcnQodGhpcy5sb2NhbFN0b3JlKSwgXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpO1xuICAgIH1cbiAgICBabyh0KSB7XG4gICAgICAgIHJldHVybiBmcih0aGlzLnBlcnNpc3RlbmNlLCBuZXcgaHIsIHQuaW5pdGlhbFVzZXIsIHRoaXMuayk7XG4gICAgfVxuICAgIFhvKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUuZ2FyYmFnZUNvbGxlY3RvcjtcbiAgICAgICAgcmV0dXJuIG5ldyBLaShlLCB0LmFzeW5jUXVldWUpO1xuICAgIH1cbiAgICBZbyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBvcih0LmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkLCB0LmRhdGFiYXNlSW5mby5wZXJzaXN0ZW5jZUtleSksIG4gPSB2b2lkIDAgIT09IHRoaXMuY2FjaGVTaXplQnl0ZXMgPyB2aS53aXRoQ2FjaGVTaXplKHRoaXMuY2FjaGVTaXplQnl0ZXMpIDogdmkuREVGQVVMVDtcbiAgICAgICAgcmV0dXJuIG5ldyBzcih0aGlzLnN5bmNocm9uaXplVGFicywgZSwgdC5jbGllbnRJZCwgbiwgdC5hc3luY1F1ZXVlLCBYcigpLCBacigpLCB0aGlzLmssIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUsICEhdGhpcy5mb3JjZU93bmVyc2hpcCk7XG4gICAgfVxuICAgIEpvKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBXcjtcbiAgICB9XG59XG5cbi8qKlxuICogUHJvdmlkZXMgYWxsIGNvbXBvbmVudHMgbmVlZGVkIGZvciBGaXJlc3RvcmUgd2l0aCBtdWx0aS10YWIgSW5kZXhlZERCXG4gKiBwZXJzaXN0ZW5jZS5cbiAqXG4gKiBJbiB0aGUgbGVnYWN5IGNsaWVudCwgdGhpcyBwcm92aWRlciBpcyB1c2VkIHRvIHByb3ZpZGUgYm90aCBtdWx0aS10YWIgYW5kXG4gKiBub24tbXVsdGktdGFiIHBlcnNpc3RlbmNlIHNpbmNlIHdlIGNhbm5vdCB0ZWxsIGF0IGJ1aWxkIHRpbWUgd2hldGhlclxuICogYHN5bmNocm9uaXplVGFic2Agd2lsbCBiZSBlbmFibGVkLlxuICovIGNsYXNzIExhIGV4dGVuZHMgTWEge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgZSwgLyogZm9yY2VPd25lcnNoaXA9ICovICExKSwgdGhpcy50YSA9IHQsIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSBlLCB0aGlzLnN5bmNocm9uaXplVGFicyA9ICEwO1xuICAgIH1cbiAgICBhc3luYyBpbml0aWFsaXplKHQpIHtcbiAgICAgICAgYXdhaXQgc3VwZXIuaW5pdGlhbGl6ZSh0KTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMudGEuc3luY0VuZ2luZTtcbiAgICAgICAgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSBpbnN0YW5jZW9mIFFyICYmICh0aGlzLnNoYXJlZENsaWVudFN0YXRlLnN5bmNFbmdpbmUgPSB7XG4gICAgICAgICAgICBtaTogdmEuYmluZChudWxsLCBlKSxcbiAgICAgICAgICAgIGdpOiBOYS5iaW5kKG51bGwsIGUpLFxuICAgICAgICAgICAgeWk6IGthLmJpbmQobnVsbCwgZSksXG4gICAgICAgICAgICBUbjogQ2EuYmluZChudWxsLCBlKSxcbiAgICAgICAgICAgIF9pOiBiYS5iaW5kKG51bGwsIGUpXG4gICAgICAgIH0sIGF3YWl0IHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuc3RhcnQoKSksIFxuICAgICAgICAvLyBOT1RFOiBUaGlzIHdpbGwgaW1tZWRpYXRlbHkgY2FsbCB0aGUgbGlzdGVuZXIsIHNvIHdlIG1ha2Ugc3VyZSB0b1xuICAgICAgICAvLyBzZXQgaXQgYWZ0ZXIgbG9jYWxTdG9yZSAvIHJlbW90ZVN0b3JlIGFyZSBzdGFydGVkLlxuICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLnNuKChhc3luYyB0ID0+IHtcbiAgICAgICAgICAgIGF3YWl0IFZhKHRoaXMudGEuc3luY0VuZ2luZSwgdCksIHRoaXMuZ2NTY2hlZHVsZXIgJiYgKHQgJiYgIXRoaXMuZ2NTY2hlZHVsZXIuc3RhcnRlZCA/IHRoaXMuZ2NTY2hlZHVsZXIuc3RhcnQodGhpcy5sb2NhbFN0b3JlKSA6IHQgfHwgdGhpcy5nY1NjaGVkdWxlci5zdG9wKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIEpvKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFhyKCk7XG4gICAgICAgIGlmICghUXIuYnQoZSkpIHRocm93IG5ldyBqKEsuVU5JTVBMRU1FTlRFRCwgXCJJbmRleGVkREIgcGVyc2lzdGVuY2UgaXMgb25seSBhdmFpbGFibGUgb24gcGxhdGZvcm1zIHRoYXQgc3VwcG9ydCBMb2NhbFN0b3JhZ2UuXCIpO1xuICAgICAgICBjb25zdCBuID0gb3IodC5kYXRhYmFzZUluZm8uZGF0YWJhc2VJZCwgdC5kYXRhYmFzZUluZm8ucGVyc2lzdGVuY2VLZXkpO1xuICAgICAgICByZXR1cm4gbmV3IFFyKGUsIHQuYXN5bmNRdWV1ZSwgbiwgdC5jbGllbnRJZCwgdC5pbml0aWFsVXNlcik7XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemVzIGFuZCB3aXJlcyB0aGUgY29tcG9uZW50cyB0aGF0IGFyZSBuZWVkZWQgdG8gaW50ZXJmYWNlIHdpdGggdGhlXG4gKiBuZXR3b3JrLlxuICovIGNsYXNzIEJhIHtcbiAgICBhc3luYyBpbml0aWFsaXplKHQsIGUpIHtcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlIHx8ICh0aGlzLmxvY2FsU3RvcmUgPSB0LmxvY2FsU3RvcmUsIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUgPSB0LnNoYXJlZENsaWVudFN0YXRlLCBcbiAgICAgICAgdGhpcy5kYXRhc3RvcmUgPSB0aGlzLmNyZWF0ZURhdGFzdG9yZShlKSwgdGhpcy5yZW1vdGVTdG9yZSA9IHRoaXMuY3JlYXRlUmVtb3RlU3RvcmUoZSksIFxuICAgICAgICB0aGlzLmV2ZW50TWFuYWdlciA9IHRoaXMuY3JlYXRlRXZlbnRNYW5hZ2VyKGUpLCB0aGlzLnN5bmNFbmdpbmUgPSB0aGlzLmNyZWF0ZVN5bmNFbmdpbmUoZSwgXG4gICAgICAgIC8qIHN0YXJ0QXNQcmltYXJ5PSovICF0LnN5bmNocm9uaXplVGFicyksIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUub25saW5lU3RhdGVIYW5kbGVyID0gdCA9PiBoYSh0aGlzLnN5bmNFbmdpbmUsIHQsIDEgLyogU2hhcmVkQ2xpZW50U3RhdGUgKi8pLCBcbiAgICAgICAgdGhpcy5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIuaGFuZGxlQ3JlZGVudGlhbENoYW5nZSA9IEFhLmJpbmQobnVsbCwgdGhpcy5zeW5jRW5naW5lKSwgXG4gICAgICAgIGF3YWl0IGtvKHRoaXMucmVtb3RlU3RvcmUsIHRoaXMuc3luY0VuZ2luZS5pc1ByaW1hcnlDbGllbnQpKTtcbiAgICB9XG4gICAgY3JlYXRlRXZlbnRNYW5hZ2VyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBxbztcbiAgICB9XG4gICAgY3JlYXRlRGF0YXN0b3JlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRvKHQuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQpLCBuID0gKHMgPSB0LmRhdGFiYXNlSW5mbywgbmV3IFlyKHMpKTtcbiAgICAgICAgdmFyIHM7XG4gICAgICAgIC8qKiBSZXR1cm4gdGhlIFBsYXRmb3JtLXNwZWNpZmljIGNvbm5lY3Rpdml0eSBtb25pdG9yLiAqLyAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgcm8odCwgZSwgbiwgcyk7XG4gICAgICAgIH0odC5hdXRoQ3JlZGVudGlhbHMsIHQuYXBwQ2hlY2tDcmVkZW50aWFscywgbiwgZSk7XG4gICAgfVxuICAgIGNyZWF0ZVJlbW90ZVN0b3JlKHQpIHtcbiAgICAgICAgcmV0dXJuIGUgPSB0aGlzLmxvY2FsU3RvcmUsIG4gPSB0aGlzLmRhdGFzdG9yZSwgcyA9IHQuYXN5bmNRdWV1ZSwgaSA9IHQgPT4gaGEodGhpcy5zeW5jRW5naW5lLCB0LCAwIC8qIFJlbW90ZVN0b3JlICovKSwgXG4gICAgICAgIHIgPSB6ci5idCgpID8gbmV3IHpyIDogbmV3IEdyLCBuZXcgYW8oZSwgbiwgcywgaSwgcik7XG4gICAgICAgIHZhciBlLCBuLCBzLCBpLCByO1xuICAgICAgICAvKiogUmUtZW5hYmxlcyB0aGUgbmV0d29yay4gSWRlbXBvdGVudC4gKi8gICAgfVxuICAgIGNyZWF0ZVN5bmNFbmdpbmUodCwgZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSwgbiwgXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTWFuYWdlcyBzdGF0ZSBzeW5jaHJvbml6YXRpb24gaW4gbXVsdGktdGFiIGVudmlyb25tZW50cy5cbiAgICAgICAgcywgaSwgciwgbykge1xuICAgICAgICAgICAgY29uc3QgYSA9IG5ldyBpYSh0LCBlLCBuLCBzLCBpLCByKTtcbiAgICAgICAgICAgIHJldHVybiBvICYmIChhLldvID0gITApLCBhO1xuICAgICAgICB9KHRoaXMubG9jYWxTdG9yZSwgdGhpcy5yZW1vdGVTdG9yZSwgdGhpcy5ldmVudE1hbmFnZXIsIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUsIHQuaW5pdGlhbFVzZXIsIHQubWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnMsIGUpO1xuICAgIH1cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHJldHVybiBhc3luYyBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gcSh0KTtcbiAgICAgICAgICAgICQoXCJSZW1vdGVTdG9yZVwiLCBcIlJlbW90ZVN0b3JlIHNodXR0aW5nIGRvd24uXCIpLCBlLkdyLmFkZCg1IC8qIFNodXRkb3duICovKSwgYXdhaXQgdW8oZSksIFxuICAgICAgICAgICAgZS5Ici5zaHV0ZG93bigpLCBcbiAgICAgICAgICAgIC8vIFNldCB0aGUgT25saW5lU3RhdGUgdG8gVW5rbm93biAocmF0aGVyIHRoYW4gT2ZmbGluZSkgdG8gYXZvaWQgcG90ZW50aWFsbHlcbiAgICAgICAgICAgIC8vIHRyaWdnZXJpbmcgc3B1cmlvdXMgbGlzdGVuZXIgZXZlbnRzIHdpdGggY2FjaGVkIGRhdGEsIGV0Yy5cbiAgICAgICAgICAgIGUuSnIuc2V0KFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pO1xuICAgICAgICB9KHRoaXMucmVtb3RlU3RvcmUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSG93IG1hbnkgYnl0ZXMgdG8gcmVhZCBlYWNoIHRpbWUgd2hlbiBgUmVhZGFibGVTdHJlYW1SZWFkZXIucmVhZCgpYCBpc1xuICogY2FsbGVkLiBPbmx5IGFwcGxpY2FibGUgZm9yIGJ5dGUgc3RyZWFtcyB0aGF0IHdlIGNvbnRyb2wgKGUuZy4gdGhvc2UgYmFja2VkXG4gKiBieSBhbiBVSW50OEFycmF5KS5cbiAqL1xuLyoqXG4gKiBCdWlsZHMgYSBgQnl0ZVN0cmVhbVJlYWRlcmAgZnJvbSBhIFVJbnQ4QXJyYXkuXG4gKiBAcGFyYW0gc291cmNlIC0gVGhlIGRhdGEgc291cmNlIHRvIHVzZS5cbiAqIEBwYXJhbSBieXRlc1BlclJlYWQgLSBIb3cgbWFueSBieXRlcyBlYWNoIGByZWFkKClgIGZyb20gdGhlIHJldHVybmVkIHJlYWRlclxuICogICAgICAgIHdpbGwgcmVhZC5cbiAqL1xuZnVuY3Rpb24gVWEodCwgZSA9IDEwMjQwKSB7XG4gICAgbGV0IG4gPSAwO1xuICAgIC8vIFRoZSBUeXBlU2NyaXB0IGRlZmluaXRpb24gZm9yIFJlYWRhYmxlU3RyZWFtUmVhZGVyIGNoYW5nZWQuIFdlIHVzZVxuICAgIC8vIGBhbnlgIGhlcmUgdG8gYWxsb3cgdGhpcyBjb2RlIHRvIGNvbXBpbGUgd2l0aCBkaWZmZXJlbnQgdmVyc2lvbnMuXG4gICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvNDI5NzBcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBhc3luYyByZWFkKCkge1xuICAgICAgICAgICAgaWYgKG4gPCB0LmJ5dGVMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0ge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdC5zbGljZShuLCBuICsgZSksXG4gICAgICAgICAgICAgICAgICAgIGRvbmU6ICExXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbiArPSBlLCBzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBkb25lOiAhMFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgY2FuY2VsKCkge30sXG4gICAgICAgIHJlbGVhc2VMb2NrKCkge30sXG4gICAgICAgIGNsb3NlZDogUHJvbWlzZS5yZWplY3QoXCJ1bmltcGxlbWVudGVkXCIpXG4gICAgfTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogT24gd2ViLCBhIGBSZWFkYWJsZVN0cmVhbWAgaXMgd3JhcHBlZCBhcm91bmQgYnkgYSBgQnl0ZVN0cmVhbVJlYWRlcmAuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKlxuICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIE9ic2VydmVyPFQ+IHRoYXQgd2lsbCBkaXNwYXRjaCBldmVudHNcbiAqIGFzeW5jaHJvbm91c2x5LiBUbyBhbGxvdyBpbW1lZGlhdGUgc2lsZW5jaW5nLCBhIG11dGUgY2FsbCBpcyBhZGRlZCB3aGljaFxuICogY2F1c2VzIGV2ZW50cyBzY2hlZHVsZWQgdG8gbm8gbG9uZ2VyIGJlIHJhaXNlZC5cbiAqL1xuY2xhc3MgcWEge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IHQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogV2hlbiBzZXQgdG8gdHJ1ZSwgd2lsbCBub3QgcmFpc2UgZnV0dXJlIGV2ZW50cy4gTmVjZXNzYXJ5IHRvIGRlYWwgd2l0aFxuICAgICAgICAgKiBhc3luYyBkZXRhY2htZW50IG9mIGxpc3RlbmVyLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tdXRlZCA9ICExO1xuICAgIH1cbiAgICBuZXh0KHQpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5uZXh0ICYmIHRoaXMuZWEodGhpcy5vYnNlcnZlci5uZXh0LCB0KTtcbiAgICB9XG4gICAgZXJyb3IodCkge1xuICAgICAgICB0aGlzLm9ic2VydmVyLmVycm9yID8gdGhpcy5lYSh0aGlzLm9ic2VydmVyLmVycm9yLCB0KSA6IGNvbnNvbGUuZXJyb3IoXCJVbmNhdWdodCBFcnJvciBpbiBzbmFwc2hvdCBsaXN0ZW5lcjpcIiwgdCk7XG4gICAgfVxuICAgIG5hKCkge1xuICAgICAgICB0aGlzLm11dGVkID0gITA7XG4gICAgfVxuICAgIGVhKHQsIGUpIHtcbiAgICAgICAgdGhpcy5tdXRlZCB8fCBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm11dGVkIHx8IHQoZSk7XG4gICAgICAgIH0pLCAwKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgY2xhc3MgcmVwcmVzZW50aW5nIGEgYnVuZGxlLlxuICpcbiAqIFRha2VzIGEgYnVuZGxlIHN0cmVhbSBvciBidWZmZXIsIGFuZCBwcmVzZW50cyBhYnN0cmFjdGlvbnMgdG8gcmVhZCBidW5kbGVkXG4gKiBlbGVtZW50cyBvdXQgb2YgdGhlIHVuZGVybHlpbmcgY29udGVudC5cbiAqLyBjbGFzcyBLYSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSByZWFkZXIgdG8gcmVhZCBmcm9tIHVuZGVybHlpbmcgYmluYXJ5IGJ1bmRsZSBkYXRhIHNvdXJjZS4gKi9cbiAgICB0LCBlKSB7XG4gICAgICAgIHRoaXMuc2EgPSB0LCB0aGlzLmsgPSBlLCBcbiAgICAgICAgLyoqIENhY2hlZCBidW5kbGUgbWV0YWRhdGEuICovXG4gICAgICAgIHRoaXMubWV0YWRhdGEgPSBuZXcgUSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbnRlcm5hbCBidWZmZXIgdG8gaG9sZCBidW5kbGUgY29udGVudCwgYWNjdW11bGF0aW5nIGluY29tcGxldGUgZWxlbWVudFxuICAgICAgICAgKiBjb250ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5idWZmZXIgPSBuZXcgVWludDhBcnJheSwgdGhpcy5pYSA9IG5ldyBUZXh0RGVjb2RlcihcInV0Zi04XCIpLCBcbiAgICAgICAgLy8gUmVhZCB0aGUgbWV0YWRhdGEgKHdoaWNoIGlzIHRoZSBmaXJzdCBlbGVtZW50KS5cbiAgICAgICAgdGhpcy5yYSgpLnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgdCAmJiB0Ll9vKCkgPyB0aGlzLm1ldGFkYXRhLnJlc29sdmUodC5wYXlsb2FkLm1ldGFkYXRhKSA6IHRoaXMubWV0YWRhdGEucmVqZWN0KG5ldyBFcnJvcihgVGhlIGZpcnN0IGVsZW1lbnQgb2YgdGhlIGJ1bmRsZSBpcyBub3QgYSBtZXRhZGF0YSwgaXQgaXNcXG4gICAgICAgICAgICAgJHtKU09OLnN0cmluZ2lmeShudWxsID09IHQgPyB2b2lkIDAgOiB0LnBheWxvYWQpfWApKTtcbiAgICAgICAgfSksICh0ID0+IHRoaXMubWV0YWRhdGEucmVqZWN0KHQpKSk7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zYS5jYW5jZWwoKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0TWV0YWRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1ldGFkYXRhLnByb21pc2U7XG4gICAgfVxuICAgIGFzeW5jIEhvKCkge1xuICAgICAgICAvLyBNYWtlcyBzdXJlIG1ldGFkYXRhIGlzIHJlYWQgYmVmb3JlIHByb2NlZWRpbmcuXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdldE1ldGFkYXRhKCksIHRoaXMucmEoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgZnJvbSB0aGUgaGVhZCBvZiBpbnRlcm5hbCBidWZmZXIsIGFuZCBwdWxsaW5nIG1vcmUgZGF0YSBmcm9tXG4gICAgICogdW5kZXJseWluZyBzdHJlYW0gaWYgYSBjb21wbGV0ZSBlbGVtZW50IGNhbm5vdCBiZSBmb3VuZCwgdW50aWwgYW5cbiAgICAgKiBlbGVtZW50KGluY2x1ZGluZyB0aGUgcHJlZml4ZWQgbGVuZ3RoIGFuZCB0aGUgSlNPTiBzdHJpbmcpIGlzIGZvdW5kLlxuICAgICAqXG4gICAgICogT25jZSBhIGNvbXBsZXRlIGVsZW1lbnQgaXMgcmVhZCwgaXQgaXMgZHJvcHBlZCBmcm9tIGludGVybmFsIGJ1ZmZlci5cbiAgICAgKlxuICAgICAqIFJldHVybnMgZWl0aGVyIHRoZSBidW5kbGVkIGVsZW1lbnQsIG9yIG51bGwgaWYgd2UgaGF2ZSByZWFjaGVkIHRoZSBlbmQgb2ZcbiAgICAgKiB0aGUgc3RyZWFtLlxuICAgICAqLyAgICBhc3luYyByYSgpIHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IHRoaXMub2EoKTtcbiAgICAgICAgaWYgKG51bGwgPT09IHQpIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5pYS5kZWNvZGUodCksIG4gPSBOdW1iZXIoZSk7XG4gICAgICAgIGlzTmFOKG4pICYmIHRoaXMuYWEoYGxlbmd0aCBzdHJpbmcgKCR7ZX0pIGlzIG5vdCB2YWxpZCBudW1iZXJgKTtcbiAgICAgICAgY29uc3QgcyA9IGF3YWl0IHRoaXMuY2Eobik7XG4gICAgICAgIHJldHVybiBuZXcgSG8oSlNPTi5wYXJzZShzKSwgdC5sZW5ndGggKyBuKTtcbiAgICB9XG4gICAgLyoqIEZpcnN0IGluZGV4IG9mICd7JyBmcm9tIHRoZSB1bmRlcmx5aW5nIGJ1ZmZlci4gKi8gICAgdWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5maW5kSW5kZXgoKHQgPT4gdCA9PT0gXCJ7XCIuY2hhckNvZGVBdCgwKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkcyBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGludGVybmFsIGJ1ZmZlciwgdW50aWwgdGhlIGZpcnN0ICd7JywgYW5kXG4gICAgICogcmV0dXJuIHRoZSBjb250ZW50LlxuICAgICAqXG4gICAgICogSWYgcmVhY2hlZCBlbmQgb2YgdGhlIHN0cmVhbSwgcmV0dXJucyBhIG51bGwuXG4gICAgICovICAgIGFzeW5jIG9hKCkge1xuICAgICAgICBmb3IgKDt0aGlzLnVhKCkgPCAwOyApIHtcbiAgICAgICAgICAgIGlmIChhd2FpdCB0aGlzLmhhKCkpIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIC8vIEJyb2tlIG91dCBvZiB0aGUgbG9vcCBiZWNhdXNlIHVuZGVybHlpbmcgc3RyZWFtIGlzIGNsb3NlZCwgYW5kIHRoZXJlXG4gICAgICAgIC8vIGhhcHBlbnMgdG8gYmUgbm8gbW9yZSBkYXRhIHRvIHByb2Nlc3MuXG4gICAgICAgICAgICAgICAgaWYgKDAgPT09IHRoaXMuYnVmZmVyLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnVhKCk7XG4gICAgICAgIC8vIEJyb2tlIG91dCBvZiB0aGUgbG9vcCBiZWNhdXNlIHVuZGVybHlpbmcgc3RyZWFtIGlzIGNsb3NlZCwgYnV0IHN0aWxsXG4gICAgICAgIC8vIGNhbm5vdCBmaW5kIGFuIG9wZW4gYnJhY2tldC5cbiAgICAgICAgICAgICAgICB0IDwgMCAmJiB0aGlzLmFhKFwiUmVhY2hlZCB0aGUgZW5kIG9mIGJ1bmRsZSB3aGVuIGEgbGVuZ3RoIHN0cmluZyBpcyBleHBlY3RlZC5cIik7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmJ1ZmZlci5zbGljZSgwLCB0KTtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBpbnRlcm5hbCBidWZmZXIgdG8gZHJvcCB0aGUgcmVhZCBsZW5ndGguXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuc2xpY2UodCksIGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIGZyb20gYSBzcGVjaWZpZWQgcG9zaXRpb24gZnJvbSB0aGUgaW50ZXJuYWwgYnVmZmVyLCBmb3IgYSBzcGVjaWZpZWRcbiAgICAgKiBudW1iZXIgb2YgYnl0ZXMsIHB1bGxpbmcgbW9yZSBkYXRhIGZyb20gdGhlIHVuZGVybHlpbmcgc3RyZWFtIGlmIG5lZWRlZC5cbiAgICAgKlxuICAgICAqIFJldHVybnMgYSBzdHJpbmcgZGVjb2RlZCBmcm9tIHRoZSByZWFkIGJ5dGVzLlxuICAgICAqLyAgICBhc3luYyBjYSh0KSB7XG4gICAgICAgIGZvciAoO3RoaXMuYnVmZmVyLmxlbmd0aCA8IHQ7ICkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5oYSgpICYmIHRoaXMuYWEoXCJSZWFjaGVkIHRoZSBlbmQgb2YgYnVuZGxlIHdoZW4gbW9yZSBpcyBleHBlY3RlZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZSA9IHRoaXMuaWEuZGVjb2RlKHRoaXMuYnVmZmVyLnNsaWNlKDAsIHQpKTtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBpbnRlcm5hbCBidWZmZXIgdG8gZHJvcCB0aGUgcmVhZCBqc29uIHN0cmluZy5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5zbGljZSh0KSwgZTtcbiAgICB9XG4gICAgYWEodCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgIHRocm93IHRoaXMuc2EuY2FuY2VsKCksIG5ldyBFcnJvcihgSW52YWxpZCBidW5kbGUgZm9ybWF0OiAke3R9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFB1bGxzIG1vcmUgZGF0YSBmcm9tIHVuZGVybHlpbmcgc3RyZWFtIHRvIGludGVybmFsIGJ1ZmZlci5cbiAgICAgKiBSZXR1cm5zIGEgYm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIHN0cmVhbSBpcyBmaW5pc2hlZC5cbiAgICAgKi8gICAgYXN5bmMgaGEoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCB0aGlzLnNhLnJlYWQoKTtcbiAgICAgICAgaWYgKCF0LmRvbmUpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgVWludDhBcnJheSh0aGlzLmJ1ZmZlci5sZW5ndGggKyB0LnZhbHVlLmxlbmd0aCk7XG4gICAgICAgICAgICBlLnNldCh0aGlzLmJ1ZmZlciksIGUuc2V0KHQudmFsdWUsIHRoaXMuYnVmZmVyLmxlbmd0aCksIHRoaXMuYnVmZmVyID0gZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdC5kb25lO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSW50ZXJuYWwgdHJhbnNhY3Rpb24gb2JqZWN0IHJlc3BvbnNpYmxlIGZvciBhY2N1bXVsYXRpbmcgdGhlIG11dGF0aW9ucyB0b1xuICogcGVyZm9ybSBhbmQgdGhlIGJhc2UgdmVyc2lvbnMgZm9yIGFueSBkb2N1bWVudHMgcmVhZC5cbiAqL1xuY2xhc3MgamEge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5kYXRhc3RvcmUgPSB0LCBcbiAgICAgICAgLy8gVGhlIHZlcnNpb24gb2YgZWFjaCBkb2N1bWVudCB0aGF0IHdhcyByZWFkIGR1cmluZyB0aGlzIHRyYW5zYWN0aW9uLlxuICAgICAgICB0aGlzLnJlYWRWZXJzaW9ucyA9IG5ldyBNYXAsIHRoaXMubXV0YXRpb25zID0gW10sIHRoaXMuY29tbWl0dGVkID0gITEsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBkZWZlcnJlZCB1c2FnZSBlcnJvciB0aGF0IG9jY3VycmVkIHByZXZpb3VzbHkgaW4gdGhpcyB0cmFuc2FjdGlvbiB0aGF0XG4gICAgICAgICAqIHdpbGwgY2F1c2UgdGhlIHRyYW5zYWN0aW9uIHRvIGZhaWwgb25jZSBpdCBhY3R1YWxseSBjb21taXRzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5sYXN0V3JpdGVFcnJvciA9IG51bGwsIFxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IG9mIGRvY3VtZW50cyB0aGF0IGhhdmUgYmVlbiB3cml0dGVuIGluIHRoZSB0cmFuc2FjdGlvbi5cbiAgICAgICAgICpcbiAgICAgICAgICogV2hlbiB0aGVyZSdzIG1vcmUgdGhhbiBvbmUgd3JpdGUgdG8gdGhlIHNhbWUga2V5IGluIGEgdHJhbnNhY3Rpb24sIGFueVxuICAgICAgICAgKiB3cml0ZXMgYWZ0ZXIgdGhlIGZpcnN0IGFyZSBoYW5kbGVkIGRpZmZlcmVudGx5LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy53cml0dGVuRG9jcyA9IG5ldyBTZXQ7XG4gICAgfVxuICAgIGFzeW5jIGxvb2t1cCh0KSB7XG4gICAgICAgIGlmICh0aGlzLmVuc3VyZUNvbW1pdE5vdENhbGxlZCgpLCB0aGlzLm11dGF0aW9ucy5sZW5ndGggPiAwKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiRmlyZXN0b3JlIHRyYW5zYWN0aW9ucyByZXF1aXJlIGFsbCByZWFkcyB0byBiZSBleGVjdXRlZCBiZWZvcmUgYWxsIHdyaXRlcy5cIik7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gcSh0KSwgcyA9IHRzKG4uaykgKyBcIi9kb2N1bWVudHNcIiwgaSA9IHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudHM6IGUubWFwKCh0ID0+IEpuKG4uaywgdCkpKVxuICAgICAgICAgICAgfSwgciA9IGF3YWl0IG4uamkoXCJCYXRjaEdldERvY3VtZW50c1wiLCBzLCBpKSwgbyA9IG5ldyBNYXA7XG4gICAgICAgICAgICByLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBpcyhuLmssIHQpO1xuICAgICAgICAgICAgICAgIG8uc2V0KGUua2V5LnRvU3RyaW5nKCksIGUpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgY29uc3QgYSA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG8uZ2V0KHQudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgQighIWUpLCBhLnB1c2goZSk7XG4gICAgICAgICAgICB9KSksIGE7XG4gICAgICAgIH0odGhpcy5kYXRhc3RvcmUsIHQpO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCh0ID0+IHRoaXMucmVjb3JkVmVyc2lvbih0KSkpLCBlO1xuICAgIH1cbiAgICBzZXQodCwgZSkge1xuICAgICAgICB0aGlzLndyaXRlKGUudG9NdXRhdGlvbih0LCB0aGlzLnByZWNvbmRpdGlvbih0KSkpLCB0aGlzLndyaXR0ZW5Eb2NzLmFkZCh0LnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgICB1cGRhdGUodCwgZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy53cml0ZShlLnRvTXV0YXRpb24odCwgdGhpcy5wcmVjb25kaXRpb25Gb3JVcGRhdGUodCkpKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgdGhpcy5sYXN0V3JpdGVFcnJvciA9IHQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53cml0dGVuRG9jcy5hZGQodC50b1N0cmluZygpKTtcbiAgICB9XG4gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgdGhpcy53cml0ZShuZXcgaG4odCwgdGhpcy5wcmVjb25kaXRpb24odCkpKSwgdGhpcy53cml0dGVuRG9jcy5hZGQodC50b1N0cmluZygpKTtcbiAgICB9XG4gICAgYXN5bmMgY29tbWl0KCkge1xuICAgICAgICBpZiAodGhpcy5lbnN1cmVDb21taXROb3RDYWxsZWQoKSwgdGhpcy5sYXN0V3JpdGVFcnJvcikgdGhyb3cgdGhpcy5sYXN0V3JpdGVFcnJvcjtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMucmVhZFZlcnNpb25zO1xuICAgICAgICAvLyBGb3IgZWFjaCBtdXRhdGlvbiwgbm90ZSB0aGF0IHRoZSBkb2Mgd2FzIHdyaXR0ZW4uXG4gICAgICAgICAgICAgICAgdGhpcy5tdXRhdGlvbnMuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0LmRlbGV0ZShlLmtleS50b1N0cmluZygpKTtcbiAgICAgICAgfSkpLCBcbiAgICAgICAgLy8gRm9yIGVhY2ggZG9jdW1lbnQgdGhhdCB3YXMgcmVhZCBidXQgbm90IHdyaXR0ZW4gdG8sIHdlIHdhbnQgdG8gcGVyZm9ybVxuICAgICAgICAvLyBhIGB2ZXJpZnlgIG9wZXJhdGlvbi5cbiAgICAgICAgdC5mb3JFYWNoKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IFN0LmZyb21QYXRoKGUpO1xuICAgICAgICAgICAgdGhpcy5tdXRhdGlvbnMucHVzaChuZXcgbG4obiwgdGhpcy5wcmVjb25kaXRpb24obikpKTtcbiAgICAgICAgfSkpLCBhd2FpdCBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gcSh0KSwgcyA9IHRzKG4uaykgKyBcIi9kb2N1bWVudHNcIiwgaSA9IHtcbiAgICAgICAgICAgICAgICB3cml0ZXM6IGUubWFwKCh0ID0+IG9zKG4uaywgdCkpKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGF3YWl0IG4uQmkoXCJDb21taXRcIiwgcywgaSk7XG4gICAgICAgIH0odGhpcy5kYXRhc3RvcmUsIHRoaXMubXV0YXRpb25zKSwgdGhpcy5jb21taXR0ZWQgPSAhMDtcbiAgICB9XG4gICAgcmVjb3JkVmVyc2lvbih0KSB7XG4gICAgICAgIGxldCBlO1xuICAgICAgICBpZiAodC5pc0ZvdW5kRG9jdW1lbnQoKSkgZSA9IHQudmVyc2lvbjsgZWxzZSB7XG4gICAgICAgICAgICBpZiAoIXQuaXNOb0RvY3VtZW50KCkpIHRocm93IEwoKTtcbiAgICAgICAgICAgIC8vIEZvciBkZWxldGVkIGRvY3MsIHdlIG11c3QgdXNlIGJhc2VWZXJzaW9uIDAgd2hlbiB3ZSBvdmVyd3JpdGUgdGhlbS5cbiAgICAgICAgICAgIGUgPSBjdC5taW4oKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuID0gdGhpcy5yZWFkVmVyc2lvbnMuZ2V0KHQua2V5LnRvU3RyaW5nKCkpO1xuICAgICAgICBpZiAobikge1xuICAgICAgICAgICAgaWYgKCFlLmlzRXF1YWwobikpIFxuICAgICAgICAgICAgLy8gVGhpcyB0cmFuc2FjdGlvbiB3aWxsIGZhaWwgbm8gbWF0dGVyIHdoYXQuXG4gICAgICAgICAgICB0aHJvdyBuZXcgaihLLkFCT1JURUQsIFwiRG9jdW1lbnQgdmVyc2lvbiBjaGFuZ2VkIGJldHdlZW4gdHdvIHJlYWRzLlwiKTtcbiAgICAgICAgfSBlbHNlIHRoaXMucmVhZFZlcnNpb25zLnNldCh0LmtleS50b1N0cmluZygpLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdmVyc2lvbiBvZiB0aGlzIGRvY3VtZW50IHdoZW4gaXQgd2FzIHJlYWQgaW4gdGhpcyB0cmFuc2FjdGlvbixcbiAgICAgKiBhcyBhIHByZWNvbmRpdGlvbiwgb3Igbm8gcHJlY29uZGl0aW9uIGlmIGl0IHdhcyBub3QgcmVhZC5cbiAgICAgKi8gICAgcHJlY29uZGl0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMucmVhZFZlcnNpb25zLmdldCh0LnRvU3RyaW5nKCkpO1xuICAgICAgICByZXR1cm4gIXRoaXMud3JpdHRlbkRvY3MuaGFzKHQudG9TdHJpbmcoKSkgJiYgZSA/IEplLnVwZGF0ZVRpbWUoZSkgOiBKZS5ub25lKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHByZWNvbmRpdGlvbiBmb3IgYSBkb2N1bWVudCBpZiB0aGUgb3BlcmF0aW9uIGlzIGFuIHVwZGF0ZS5cbiAgICAgKi8gICAgcHJlY29uZGl0aW9uRm9yVXBkYXRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMucmVhZFZlcnNpb25zLmdldCh0LnRvU3RyaW5nKCkpO1xuICAgICAgICAvLyBUaGUgZmlyc3QgdGltZSBhIGRvY3VtZW50IGlzIHdyaXR0ZW4sIHdlIHdhbnQgdG8gdGFrZSBpbnRvIGFjY291bnQgdGhlXG4gICAgICAgIC8vIHJlYWQgdGltZSBhbmQgZXhpc3RlbmNlXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLndyaXR0ZW5Eb2NzLmhhcyh0LnRvU3RyaW5nKCkpICYmIGUpIHtcbiAgICAgICAgICAgIGlmIChlLmlzRXF1YWwoY3QubWluKCkpKSBcbiAgICAgICAgICAgIC8vIFRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LCBzbyBmYWlsIHRoZSB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgIC8vIFRoaXMgaGFzIHRvIGJlIHZhbGlkYXRlZCBsb2NhbGx5IGJlY2F1c2UgeW91IGNhbid0IHNlbmQgYVxuICAgICAgICAgICAgLy8gcHJlY29uZGl0aW9uIHRoYXQgYSBkb2N1bWVudCBkb2VzIG5vdCBleGlzdCB3aXRob3V0IGNoYW5naW5nIHRoZVxuICAgICAgICAgICAgLy8gc2VtYW50aWNzIG9mIHRoZSBiYWNrZW5kIHdyaXRlIHRvIGJlIGFuIGluc2VydC4gVGhpcyBpcyB0aGUgcmV2ZXJzZVxuICAgICAgICAgICAgLy8gb2Ygd2hhdCB3ZSB3YW50LCBzaW5jZSB3ZSB3YW50IHRvIGFzc2VydCB0aGF0IHRoZSBkb2N1bWVudCBkb2Vzbid0XG4gICAgICAgICAgICAvLyBleGlzdCBidXQgdGhlbiBzZW5kIHRoZSB1cGRhdGUgYW5kIGhhdmUgaXQgZmFpbC4gU2luY2Ugd2UgY2FuJ3RcbiAgICAgICAgICAgIC8vIGV4cHJlc3MgdGhhdCB0byB0aGUgYmFja2VuZCwgd2UgaGF2ZSB0byB2YWxpZGF0ZSBsb2NhbGx5LlxuICAgICAgICAgICAgLy8gTm90ZTogdGhpcyBjYW4gY2hhbmdlIG9uY2Ugd2UgY2FuIHNlbmQgc2VwYXJhdGUgdmVyaWZ5IHdyaXRlcyBpbiB0aGVcbiAgICAgICAgICAgIC8vIHRyYW5zYWN0aW9uLlxuICAgICAgICAgICAgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIkNhbid0IHVwZGF0ZSBhIGRvY3VtZW50IHRoYXQgZG9lc24ndCBleGlzdC5cIik7XG4gICAgICAgICAgICAvLyBEb2N1bWVudCBleGlzdHMsIGJhc2UgcHJlY29uZGl0aW9uIG9uIGRvY3VtZW50IHVwZGF0ZSB0aW1lLlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEplLnVwZGF0ZVRpbWUoZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRG9jdW1lbnQgd2FzIG5vdCByZWFkLCBzbyB3ZSBqdXN0IHVzZSB0aGUgcHJlY29uZGl0aW9ucyBmb3IgYSBibGluZFxuICAgICAgICAvLyB1cGRhdGUuXG4gICAgICAgIHJldHVybiBKZS5leGlzdHMoITApO1xuICAgIH1cbiAgICB3cml0ZSh0KSB7XG4gICAgICAgIHRoaXMuZW5zdXJlQ29tbWl0Tm90Q2FsbGVkKCksIHRoaXMubXV0YXRpb25zLnB1c2godCk7XG4gICAgfVxuICAgIGVuc3VyZUNvbW1pdE5vdENhbGxlZCgpIHt9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRyYW5zYWN0aW9uUnVubmVyIGVuY2Fwc3VsYXRlcyB0aGUgbG9naWMgbmVlZGVkIHRvIHJ1biBhbmQgcmV0cnkgdHJhbnNhY3Rpb25zXG4gKiB3aXRoIGJhY2tvZmYuXG4gKi9cbmNsYXNzIFFhIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IHQsIHRoaXMuZGF0YXN0b3JlID0gZSwgdGhpcy51cGRhdGVGdW5jdGlvbiA9IG4sIHRoaXMuZGVmZXJyZWQgPSBzLCBcbiAgICAgICAgdGhpcy5sYSA9IDUsIHRoaXMudXIgPSBuZXcgZW8odGhpcy5hc3luY1F1ZXVlLCBcInRyYW5zYWN0aW9uX3JldHJ5XCIgLyogVHJhbnNhY3Rpb25SZXRyeSAqLyk7XG4gICAgfVxuICAgIC8qKiBSdW5zIHRoZSB0cmFuc2FjdGlvbiBhbmQgc2V0cyB0aGUgcmVzdWx0IG9uIGRlZmVycmVkLiAqLyAgICBydW4oKSB7XG4gICAgICAgIHRoaXMubGEgLT0gMSwgdGhpcy5mYSgpO1xuICAgIH1cbiAgICBmYSgpIHtcbiAgICAgICAgdGhpcy51ci5aaSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBqYSh0aGlzLmRhdGFzdG9yZSksIGUgPSB0aGlzLmRhKHQpO1xuICAgICAgICAgICAgZSAmJiBlLnRoZW4oKGUgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiB0LmNvbW1pdCgpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZlcnJlZC5yZXNvbHZlKGUpO1xuICAgICAgICAgICAgICAgIH0pKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud2EodCk7XG4gICAgICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgICAgICB9KSkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMud2EodCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZGEodCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMudXBkYXRlRnVuY3Rpb24odCk7XG4gICAgICAgICAgICByZXR1cm4gIWJ0KGUpICYmIGUuY2F0Y2ggJiYgZS50aGVuID8gZSA6ICh0aGlzLmRlZmVycmVkLnJlamVjdChFcnJvcihcIlRyYW5zYWN0aW9uIGNhbGxiYWNrIG11c3QgcmV0dXJuIGEgUHJvbWlzZVwiKSksIFxuICAgICAgICAgICAgbnVsbCk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIC8vIERvIG5vdCByZXRyeSBlcnJvcnMgdGhyb3duIGJ5IHVzZXIgcHJvdmlkZWQgdXBkYXRlRnVuY3Rpb24uXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZlcnJlZC5yZWplY3QodCksIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgd2EodCkge1xuICAgICAgICB0aGlzLmxhID4gMCAmJiB0aGlzLl9hKHQpID8gKHRoaXMubGEgLT0gMSwgdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKCgpID0+ICh0aGlzLmZhKCksIFxuICAgICAgICBQcm9taXNlLnJlc29sdmUoKSkpKSkgOiB0aGlzLmRlZmVycmVkLnJlamVjdCh0KTtcbiAgICB9XG4gICAgX2EodCkge1xuICAgICAgICBpZiAoXCJGaXJlYmFzZUVycm9yXCIgPT09IHQubmFtZSkge1xuICAgICAgICAgICAgLy8gSW4gdHJhbnNhY3Rpb25zLCB0aGUgYmFja2VuZCB3aWxsIGZhaWwgb3V0ZGF0ZWQgcmVhZHMgd2l0aCBGQUlMRURfUFJFQ09ORElUSU9OIGFuZFxuICAgICAgICAgICAgLy8gbm9uLW1hdGNoaW5nIGRvY3VtZW50IHZlcnNpb25zIHdpdGggQUJPUlRFRC4gVGhlc2UgZXJyb3JzIHNob3VsZCBiZSByZXRyaWVkLlxuICAgICAgICAgICAgY29uc3QgZSA9IHQuY29kZTtcbiAgICAgICAgICAgIHJldHVybiBcImFib3J0ZWRcIiA9PT0gZSB8fCBcImZhaWxlZC1wcmVjb25kaXRpb25cIiA9PT0gZSB8fCAhX24oZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRmlyZXN0b3JlQ2xpZW50IGlzIGEgdG9wLWxldmVsIGNsYXNzIHRoYXQgY29uc3RydWN0cyBhbmQgb3ducyBhbGwgb2YgdGhlXG4gKiBwaWVjZXMgb2YgdGhlIGNsaWVudCBTREsgYXJjaGl0ZWN0dXJlLiBJdCBpcyByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgdGhlXG4gKiBhc3luYyBxdWV1ZSB0aGF0IGlzIHNoYXJlZCBieSBhbGwgb2YgdGhlIG90aGVyIGNvbXBvbmVudHMgaW4gdGhlIHN5c3RlbS5cbiAqL1xuY2xhc3MgV2Ege1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIFxuICAgIC8qKlxuICAgICAqIEFzeW5jaHJvbm91cyBxdWV1ZSByZXNwb25zaWJsZSBmb3IgYWxsIG9mIG91ciBpbnRlcm5hbCBwcm9jZXNzaW5nLiBXaGVuXG4gICAgICogd2UgZ2V0IGluY29taW5nIHdvcmsgZnJvbSB0aGUgdXNlciAodmlhIHB1YmxpYyBBUEkpIG9yIHRoZSBuZXR3b3JrXG4gICAgICogKGluY29taW5nIEdSUEMgbWVzc2FnZXMpLCB3ZSBzaG91bGQgYWx3YXlzIHNjaGVkdWxlIG9udG8gdGhpcyBxdWV1ZS5cbiAgICAgKiBUaGlzIGVuc3VyZXMgYWxsIG9mIG91ciB3b3JrIGlzIHByb3Blcmx5IHNlcmlhbGl6ZWQgKGUuZy4gd2UgZG9uJ3RcbiAgICAgKiBzdGFydCBwcm9jZXNzaW5nIGEgbmV3IG9wZXJhdGlvbiB3aGlsZSB0aGUgcHJldmlvdXMgb25lIGlzIHdhaXRpbmcgZm9yXG4gICAgICogYW4gYXN5bmMgSS9PIHRvIGNvbXBsZXRlKS5cbiAgICAgKi9cbiAgICBuLCBzKSB7XG4gICAgICAgIHRoaXMuYXV0aENyZWRlbnRpYWxzID0gdCwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzID0gZSwgdGhpcy5hc3luY1F1ZXVlID0gbiwgdGhpcy5kYXRhYmFzZUluZm8gPSBzLCBcbiAgICAgICAgdGhpcy51c2VyID0gRC5VTkFVVEhFTlRJQ0FURUQsIHRoaXMuY2xpZW50SWQgPSBzdC5BKCksIHRoaXMuYXV0aENyZWRlbnRpYWxMaXN0ZW5lciA9ICgpID0+IFByb21pc2UucmVzb2x2ZSgpLCBcbiAgICAgICAgdGhpcy5hdXRoQ3JlZGVudGlhbHMuc3RhcnQobiwgKGFzeW5jIHQgPT4ge1xuICAgICAgICAgICAgJChcIkZpcmVzdG9yZUNsaWVudFwiLCBcIlJlY2VpdmVkIHVzZXI9XCIsIHQudWlkKSwgYXdhaXQgdGhpcy5hdXRoQ3JlZGVudGlhbExpc3RlbmVyKHQpLCBcbiAgICAgICAgICAgIHRoaXMudXNlciA9IHQ7XG4gICAgICAgIH0pKSwgXG4gICAgICAgIC8vIFJlZ2lzdGVyIGFuIGVtcHR5IGNyZWRlbnRpYWxzIGNoYW5nZSBsaXN0ZW5lciB0byBhY3RpdmF0ZSB0b2tlbiByZWZyZXNoLlxuICAgICAgICB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuc3RhcnQobiwgKCgpID0+IFByb21pc2UucmVzb2x2ZSgpKSk7XG4gICAgfVxuICAgIGFzeW5jIGdldENvbmZpZ3VyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhc3luY1F1ZXVlOiB0aGlzLmFzeW5jUXVldWUsXG4gICAgICAgICAgICBkYXRhYmFzZUluZm86IHRoaXMuZGF0YWJhc2VJbmZvLFxuICAgICAgICAgICAgY2xpZW50SWQ6IHRoaXMuY2xpZW50SWQsXG4gICAgICAgICAgICBhdXRoQ3JlZGVudGlhbHM6IHRoaXMuYXV0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgYXBwQ2hlY2tDcmVkZW50aWFsczogdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzLFxuICAgICAgICAgICAgaW5pdGlhbFVzZXI6IHRoaXMudXNlcixcbiAgICAgICAgICAgIG1heENvbmN1cnJlbnRMaW1ib1Jlc29sdXRpb25zOiAxMDBcbiAgICAgICAgfTtcbiAgICB9XG4gICAgc2V0Q3JlZGVudGlhbENoYW5nZUxpc3RlbmVyKHQpIHtcbiAgICAgICAgdGhpcy5hdXRoQ3JlZGVudGlhbExpc3RlbmVyID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHRoYXQgdGhlIGNsaWVudCBoYXMgbm90IGJlZW4gdGVybWluYXRlZC4gRW5zdXJlcyB0aGF0IG90aGVyIG1ldGhvZHMgb25cbiAgICAgKiB0aGlzIGNsYXNzIGNhbm5vdCBiZSBjYWxsZWQgYWZ0ZXIgdGhlIGNsaWVudCBpcyB0ZXJtaW5hdGVkLlxuICAgICAqLyAgICB2ZXJpZnlOb3RUZXJtaW5hdGVkKCkge1xuICAgICAgICBpZiAodGhpcy5hc3luY1F1ZXVlLmlzU2h1dHRpbmdEb3duKSB0aHJvdyBuZXcgaihLLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiVGhlIGNsaWVudCBoYXMgYWxyZWFkeSBiZWVuIHRlcm1pbmF0ZWQuXCIpO1xuICAgIH1cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnRlclJlc3RyaWN0ZWRNb2RlKCk7XG4gICAgICAgIGNvbnN0IHQgPSBuZXcgUTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0RXZlbldoaWxlUmVzdHJpY3RlZCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLm9ubGluZUNvbXBvbmVudHMgJiYgYXdhaXQgdGhpcy5vbmxpbmVDb21wb25lbnRzLnRlcm1pbmF0ZSgpLCB0aGlzLm9mZmxpbmVDb21wb25lbnRzICYmIGF3YWl0IHRoaXMub2ZmbGluZUNvbXBvbmVudHMudGVybWluYXRlKCksIFxuICAgICAgICAgICAgICAgIC8vIFRoZSBjcmVkZW50aWFscyBwcm92aWRlciBtdXN0IGJlIHRlcm1pbmF0ZWQgYWZ0ZXIgc2h1dHRpbmcgZG93biB0aGVcbiAgICAgICAgICAgICAgICAvLyBSZW1vdGVTdG9yZSBhcyBpdCB3aWxsIHByZXZlbnQgdGhlIFJlbW90ZVN0b3JlIGZyb20gcmV0cmlldmluZyBhdXRoXG4gICAgICAgICAgICAgICAgLy8gdG9rZW5zLlxuICAgICAgICAgICAgICAgIHRoaXMuYXV0aENyZWRlbnRpYWxzLnNodXRkb3duKCksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5zaHV0ZG93bigpLCB0LnJlc29sdmUoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gT28oZSwgXCJGYWlsZWQgdG8gc2h1dGRvd24gcGVyc2lzdGVuY2VcIik7XG4gICAgICAgICAgICAgICAgdC5yZWplY3Qobik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSwgdC5wcm9taXNlO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gR2EodCwgZSkge1xuICAgIHQuYXN5bmNRdWV1ZS52ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzKCksICQoXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJJbml0aWFsaXppbmcgT2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyXCIpO1xuICAgIGNvbnN0IG4gPSBhd2FpdCB0LmdldENvbmZpZ3VyYXRpb24oKTtcbiAgICBhd2FpdCBlLmluaXRpYWxpemUobik7XG4gICAgbGV0IHMgPSBuLmluaXRpYWxVc2VyO1xuICAgIHQuc2V0Q3JlZGVudGlhbENoYW5nZUxpc3RlbmVyKChhc3luYyB0ID0+IHtcbiAgICAgICAgcy5pc0VxdWFsKHQpIHx8IChhd2FpdCBkcihlLmxvY2FsU3RvcmUsIHQpLCBzID0gdCk7XG4gICAgfSkpLCBcbiAgICAvLyBXaGVuIGEgdXNlciBjYWxscyBjbGVhclBlcnNpc3RlbmNlKCkgaW4gb25lIGNsaWVudCwgYWxsIG90aGVyIGNsaWVudHNcbiAgICAvLyBuZWVkIHRvIGJlIHRlcm1pbmF0ZWQgdG8gYWxsb3cgdGhlIGRlbGV0ZSB0byBzdWNjZWVkLlxuICAgIGUucGVyc2lzdGVuY2Uuc2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIoKCgpID0+IHQudGVybWluYXRlKCkpKSwgdC5vZmZsaW5lQ29tcG9uZW50cyA9IGU7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHphKHQsIGUpIHtcbiAgICB0LmFzeW5jUXVldWUudmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpO1xuICAgIGNvbnN0IG4gPSBhd2FpdCBIYSh0KTtcbiAgICAkKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiSW5pdGlhbGl6aW5nIE9ubGluZUNvbXBvbmVudFByb3ZpZGVyXCIpO1xuICAgIGNvbnN0IHMgPSBhd2FpdCB0LmdldENvbmZpZ3VyYXRpb24oKTtcbiAgICBhd2FpdCBlLmluaXRpYWxpemUobiwgcyksIFxuICAgIC8vIFRoZSBDcmVkZW50aWFsQ2hhbmdlTGlzdGVuZXIgb2YgdGhlIG9ubGluZSBjb21wb25lbnQgcHJvdmlkZXIgdGFrZXNcbiAgICAvLyBwcmVjZWRlbmNlIG92ZXIgdGhlIG9mZmxpbmUgY29tcG9uZW50IHByb3ZpZGVyLlxuICAgIHQuc2V0Q3JlZGVudGlhbENoYW5nZUxpc3RlbmVyKCh0ID0+IGFzeW5jIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHEodCk7XG4gICAgICAgIG4uYXN5bmNRdWV1ZS52ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzKCksICQoXCJSZW1vdGVTdG9yZVwiLCBcIlJlbW90ZVN0b3JlIHJlY2VpdmVkIG5ldyBjcmVkZW50aWFsc1wiKTtcbiAgICAgICAgY29uc3QgcyA9IGdvKG4pO1xuICAgICAgICAvLyBUZWFyIGRvd24gYW5kIHJlLWNyZWF0ZSBvdXIgbmV0d29yayBzdHJlYW1zLiBUaGlzIHdpbGwgZW5zdXJlIHdlIGdldCBhXG4gICAgICAgIC8vIGZyZXNoIGF1dGggdG9rZW4gZm9yIHRoZSBuZXcgdXNlciBhbmQgcmUtZmlsbCB0aGUgd3JpdGUgcGlwZWxpbmUgd2l0aFxuICAgICAgICAvLyBuZXcgbXV0YXRpb25zIGZyb20gdGhlIExvY2FsU3RvcmUgKHNpbmNlIG11dGF0aW9ucyBhcmUgcGVyLXVzZXIpLlxuICAgICAgICAgICAgICAgIG4uR3IuYWRkKDMgLyogQ3JlZGVudGlhbENoYW5nZSAqLyksIGF3YWl0IHVvKG4pLCBzICYmIFxuICAgICAgICAvLyBEb24ndCBzZXQgdGhlIG5ldHdvcmsgc3RhdHVzIHRvIFVua25vd24gaWYgd2UgYXJlIG9mZmxpbmUuXG4gICAgICAgIG4uSnIuc2V0KFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pLCBhd2FpdCBuLnJlbW90ZVN5bmNlci5oYW5kbGVDcmVkZW50aWFsQ2hhbmdlKGUpLCBcbiAgICAgICAgbi5Hci5kZWxldGUoMyAvKiBDcmVkZW50aWFsQ2hhbmdlICovKSwgYXdhaXQgY28obik7XG4gICAgfShlLnJlbW90ZVN0b3JlLCB0KSkpLCB0Lm9ubGluZUNvbXBvbmVudHMgPSBlO1xufVxuXG5hc3luYyBmdW5jdGlvbiBIYSh0KSB7XG4gICAgcmV0dXJuIHQub2ZmbGluZUNvbXBvbmVudHMgfHwgKCQoXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJVc2luZyBkZWZhdWx0IE9mZmxpbmVDb21wb25lbnRQcm92aWRlclwiKSwgXG4gICAgYXdhaXQgR2EodCwgbmV3IE9hKSksIHQub2ZmbGluZUNvbXBvbmVudHM7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIEphKHQpIHtcbiAgICByZXR1cm4gdC5vbmxpbmVDb21wb25lbnRzIHx8ICgkKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiVXNpbmcgZGVmYXVsdCBPbmxpbmVDb21wb25lbnRQcm92aWRlclwiKSwgXG4gICAgYXdhaXQgemEodCwgbmV3IEJhKSksIHQub25saW5lQ29tcG9uZW50cztcbn1cblxuZnVuY3Rpb24gWWEodCkge1xuICAgIHJldHVybiBIYSh0KS50aGVuKCh0ID0+IHQucGVyc2lzdGVuY2UpKTtcbn1cblxuZnVuY3Rpb24gWGEodCkge1xuICAgIHJldHVybiBIYSh0KS50aGVuKCh0ID0+IHQubG9jYWxTdG9yZSkpO1xufVxuXG5mdW5jdGlvbiBaYSh0KSB7XG4gICAgcmV0dXJuIEphKHQpLnRoZW4oKHQgPT4gdC5yZW1vdGVTdG9yZSkpO1xufVxuXG5mdW5jdGlvbiB0Yyh0KSB7XG4gICAgcmV0dXJuIEphKHQpLnRoZW4oKHQgPT4gdC5zeW5jRW5naW5lKSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGVjKHQpIHtcbiAgICBjb25zdCBlID0gYXdhaXQgSmEodCksIG4gPSBlLmV2ZW50TWFuYWdlcjtcbiAgICByZXR1cm4gbi5vbkxpc3RlbiA9IHJhLmJpbmQobnVsbCwgZS5zeW5jRW5naW5lKSwgbi5vblVubGlzdGVuID0gYWEuYmluZChudWxsLCBlLnN5bmNFbmdpbmUpLCBcbiAgICBuO1xufVxuXG4vKiogRW5hYmxlcyB0aGUgbmV0d29yayBjb25uZWN0aW9uIGFuZCByZS1lbnF1ZXVlcyBhbGwgcGVuZGluZyBvcGVyYXRpb25zLiAqLyBmdW5jdGlvbiBuYyh0KSB7XG4gICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlKChhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBZYSh0KSwgbiA9IGF3YWl0IFphKHQpO1xuICAgICAgICByZXR1cm4gZS5zZXROZXR3b3JrRW5hYmxlZCghMCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBxKHQpO1xuICAgICAgICAgICAgcmV0dXJuIGUuR3IuZGVsZXRlKDAgLyogVXNlckRpc2FibGVkICovKSwgY28oZSk7XG4gICAgICAgIH0obik7XG4gICAgfSkpO1xufVxuXG4vKiogRGlzYWJsZXMgdGhlIG5ldHdvcmsgY29ubmVjdGlvbi4gUGVuZGluZyBvcGVyYXRpb25zIHdpbGwgbm90IGNvbXBsZXRlLiAqLyBmdW5jdGlvbiBzYyh0KSB7XG4gICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlKChhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBZYSh0KSwgbiA9IGF3YWl0IFphKHQpO1xuICAgICAgICByZXR1cm4gZS5zZXROZXR3b3JrRW5hYmxlZCghMSksIGFzeW5jIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBxKHQpO1xuICAgICAgICAgICAgZS5Hci5hZGQoMCAvKiBVc2VyRGlzYWJsZWQgKi8pLCBhd2FpdCB1byhlKSwgXG4gICAgICAgICAgICAvLyBTZXQgdGhlIE9ubGluZVN0YXRlIHRvIE9mZmxpbmUgc28gZ2V0KClzIHJldHVybiBmcm9tIGNhY2hlLCBldGMuXG4gICAgICAgICAgICBlLkpyLnNldChcIk9mZmxpbmVcIiAvKiBPZmZsaW5lICovKTtcbiAgICAgICAgfShuKTtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIGFsbCB3cml0ZXMgdGhhdCB3ZXJlIHBlbmRpbmcgYXQgdGhlIHRpbWVcbiAqIHRoaXMgbWV0aG9kIHdhcyBjYWxsZWQgcmVjZWl2ZWQgc2VydmVyIGFja25vd2xlZGdlbWVudC4gQW4gYWNrbm93bGVkZ2VtZW50XG4gKiBjYW4gYmUgZWl0aGVyIGFjY2VwdGFuY2Ugb3IgcmVqZWN0aW9uLlxuICovIGZ1bmN0aW9uIGljKHQsIGUpIHtcbiAgICBjb25zdCBuID0gbmV3IFE7XG4gICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBhc3luYyBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzID0gYXdhaXQgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwicmVhZCBkb2N1bWVudFwiLCBcInJlYWRvbmx5XCIsICh0ID0+IG4uV24uUm4odCwgZSkpKTtcbiAgICAgICAgICAgIH0odCwgZSk7XG4gICAgICAgICAgICBzLmlzRm91bmREb2N1bWVudCgpID8gbi5yZXNvbHZlKHMpIDogcy5pc05vRG9jdW1lbnQoKSA/IG4ucmVzb2x2ZShudWxsKSA6IG4ucmVqZWN0KG5ldyBqKEsuVU5BVkFJTEFCTEUsIFwiRmFpbGVkIHRvIGdldCBkb2N1bWVudCBmcm9tIGNhY2hlLiAoSG93ZXZlciwgdGhpcyBkb2N1bWVudCBtYXkgZXhpc3Qgb24gdGhlIHNlcnZlci4gUnVuIGFnYWluIHdpdGhvdXQgc2V0dGluZyAnc291cmNlJyBpbiB0aGUgR2V0T3B0aW9ucyB0byBhdHRlbXB0IHRvIHJldHJpZXZlIHRoZSBkb2N1bWVudCBmcm9tIHRoZSBzZXJ2ZXIuKVwiKSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBPbyh0LCBgRmFpbGVkIHRvIGdldCBkb2N1bWVudCAnJHtlfSBmcm9tIGNhY2hlYCk7XG4gICAgICAgICAgICBuLnJlamVjdChzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAqIFJldHJpZXZlcyBhIGxhdGVuY3ktY29tcGVuc2F0ZWQgZG9jdW1lbnQgZnJvbSB0aGUgYmFja2VuZCB2aWEgYVxuICogU25hcHNob3RMaXN0ZW5lci5cbiAqLyAoYXdhaXQgWGEodCksIGUsIG4pKSksIG4ucHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gcmModCwgZSwgbiA9IHt9KSB7XG4gICAgY29uc3QgcyA9IG5ldyBRO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gZnVuY3Rpb24odCwgZSwgbiwgcywgaSkge1xuICAgICAgICBjb25zdCByID0gbmV3IHFhKHtcbiAgICAgICAgICAgIG5leHQ6IHIgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBxdWVyeSBmaXJzdCBiZWZvcmUgcGFzc2luZyBldmVudCB0byB1c2VyIHRvIGF2b2lkXG4gICAgICAgICAgICAgICAgLy8gdXNlciBhY3Rpb25zIGFmZmVjdGluZyB0aGUgbm93IHN0YWxlIHF1ZXJ5LlxuICAgICAgICAgICAgICAgIGUuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gam8odCwgbykpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBhID0gci5kb2NzLmhhcyhuKTtcbiAgICAgICAgICAgICAgICAhYSAmJiByLmZyb21DYWNoZSA/IFxuICAgICAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogSWYgd2UncmUgb25saW5lIGFuZCB0aGUgZG9jdW1lbnQgZG9lc24ndFxuICAgICAgICAgICAgICAgIC8vIGV4aXN0IHRoZW4gd2UgcmVzb2x2ZSB3aXRoIGEgZG9jLmV4aXN0cyBzZXQgdG8gZmFsc2UuIElmXG4gICAgICAgICAgICAgICAgLy8gd2UncmUgb2ZmbGluZSBob3dldmVyLCB3ZSByZWplY3QgdGhlIFByb21pc2UgaW4gdGhpc1xuICAgICAgICAgICAgICAgIC8vIGNhc2UuIFR3byBvcHRpb25zOiAxKSBDYWNoZSB0aGUgbmVnYXRpdmUgcmVzcG9uc2UgZnJvbVxuICAgICAgICAgICAgICAgIC8vIHRoZSBzZXJ2ZXIgc28gd2UgY2FuIGRlbGl2ZXIgdGhhdCBldmVuIHdoZW4geW91J3JlXG4gICAgICAgICAgICAgICAgLy8gb2ZmbGluZSAyKSBBY3R1YWxseSByZWplY3QgdGhlIFByb21pc2UgaW4gdGhlIG9ubGluZSBjYXNlXG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QuXG4gICAgICAgICAgICAgICAgaS5yZWplY3QobmV3IGooSy5VTkFWQUlMQUJMRSwgXCJGYWlsZWQgdG8gZ2V0IGRvY3VtZW50IGJlY2F1c2UgdGhlIGNsaWVudCBpcyBvZmZsaW5lLlwiKSkgOiBhICYmIHIuZnJvbUNhY2hlICYmIHMgJiYgXCJzZXJ2ZXJcIiA9PT0gcy5zb3VyY2UgPyBpLnJlamVjdChuZXcgaihLLlVOQVZBSUxBQkxFLCAnRmFpbGVkIHRvIGdldCBkb2N1bWVudCBmcm9tIHNlcnZlci4gKEhvd2V2ZXIsIHRoaXMgZG9jdW1lbnQgZG9lcyBleGlzdCBpbiB0aGUgbG9jYWwgY2FjaGUuIFJ1biBhZ2FpbiB3aXRob3V0IHNldHRpbmcgc291cmNlIHRvIFwic2VydmVyXCIgdG8gcmV0cmlldmUgdGhlIGNhY2hlZCBkb2N1bWVudC4pJykpIDogaS5yZXNvbHZlKHIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiB0ID0+IGkucmVqZWN0KHQpXG4gICAgICAgIH0pLCBvID0gbmV3IHpvKGdlKG4ucGF0aCksIHIsIHtcbiAgICAgICAgICAgIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6ICEwLFxuICAgICAgICAgICAgd286ICEwXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gS28odCwgbyk7XG4gICAgfShhd2FpdCBlYyh0KSwgdC5hc3luY1F1ZXVlLCBlLCBuLCBzKSkpLCBzLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIG9jKHQsIGUpIHtcbiAgICBjb25zdCBuID0gbmV3IFE7XG4gICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBhc3luYyBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzID0gYXdhaXQgRXIodCwgZSwgXG4gICAgICAgICAgICAvKiB1c2VQcmV2aW91c1Jlc3VsdHM9ICovICEwKSwgaSA9IG5ldyBlYShlLCBzLnpuKSwgciA9IGkuYm8ocy5kb2N1bWVudHMpLCBvID0gaS5hcHBseUNoYW5nZXMociwgXG4gICAgICAgICAgICAvKiB1cGRhdGVMaW1ib0RvY3VtZW50cz0gKi8gITEpO1xuICAgICAgICAgICAgbi5yZXNvbHZlKG8uc25hcHNob3QpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICBjb25zdCBzID0gT28odCwgYEZhaWxlZCB0byBleGVjdXRlIHF1ZXJ5ICcke2V9IGFnYWluc3QgY2FjaGVgKTtcbiAgICAgICAgICAgIG4ucmVqZWN0KHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICogUmV0cmlldmVzIGEgbGF0ZW5jeS1jb21wZW5zYXRlZCBxdWVyeSBzbmFwc2hvdCBmcm9tIHRoZSBiYWNrZW5kIHZpYSBhXG4gKiBTbmFwc2hvdExpc3RlbmVyLlxuICovIChhd2FpdCBYYSh0KSwgZSwgbikpKSwgbi5wcm9taXNlO1xufVxuXG5mdW5jdGlvbiBhYyh0LCBlLCBuID0ge30pIHtcbiAgICBjb25zdCBzID0gbmV3IFE7XG4gICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBmdW5jdGlvbih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgcWEoe1xuICAgICAgICAgICAgbmV4dDogbiA9PiB7XG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHF1ZXJ5IGZpcnN0IGJlZm9yZSBwYXNzaW5nIGV2ZW50IHRvIHVzZXIgdG8gYXZvaWRcbiAgICAgICAgICAgICAgICAvLyB1c2VyIGFjdGlvbnMgYWZmZWN0aW5nIHRoZSBub3cgc3RhbGUgcXVlcnkuXG4gICAgICAgICAgICAgICAgZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiBqbyh0LCBvKSkpLCBuLmZyb21DYWNoZSAmJiBcInNlcnZlclwiID09PSBzLnNvdXJjZSA/IGkucmVqZWN0KG5ldyBqKEsuVU5BVkFJTEFCTEUsICdGYWlsZWQgdG8gZ2V0IGRvY3VtZW50cyBmcm9tIHNlcnZlci4gKEhvd2V2ZXIsIHRoZXNlIGRvY3VtZW50cyBtYXkgZXhpc3QgaW4gdGhlIGxvY2FsIGNhY2hlLiBSdW4gYWdhaW4gd2l0aG91dCBzZXR0aW5nIHNvdXJjZSB0byBcInNlcnZlclwiIHRvIHJldHJpZXZlIHRoZSBjYWNoZWQgZG9jdW1lbnRzLiknKSkgOiBpLnJlc29sdmUobik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IHQgPT4gaS5yZWplY3QodClcbiAgICAgICAgfSksIG8gPSBuZXcgem8obiwgciwge1xuICAgICAgICAgICAgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczogITAsXG4gICAgICAgICAgICB3bzogITBcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBLbyh0LCBvKTtcbiAgICB9KGF3YWl0IGVjKHQpLCB0LmFzeW5jUXVldWUsIGUsIG4sIHMpKSksIHMucHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gY2ModCwgZSkge1xuICAgIGNvbnN0IG4gPSBuZXcgcWEoZSk7XG4gICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHEodCkuaW8uYWRkKGUpLCBcbiAgICAgICAgLy8gSW1tZWRpYXRlbHkgZmlyZSBhbiBpbml0aWFsIGV2ZW50LCBpbmRpY2F0aW5nIGFsbCBleGlzdGluZyBsaXN0ZW5lcnNcbiAgICAgICAgLy8gYXJlIGluLXN5bmMuXG4gICAgICAgIGUubmV4dCgpO1xuICAgIH0oYXdhaXQgZWModCksIG4pKSksICgpID0+IHtcbiAgICAgICAgbi5uYSgpLCB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcSh0KS5pby5kZWxldGUoZSk7XG4gICAgICAgIH0oYXdhaXQgZWModCksIG4pKSk7XG4gICAgfTtcbn1cblxuLyoqXG4gKiBUYWtlcyBhbiB1cGRhdGVGdW5jdGlvbiBpbiB3aGljaCBhIHNldCBvZiByZWFkcyBhbmQgd3JpdGVzIGNhbiBiZSBwZXJmb3JtZWRcbiAqIGF0b21pY2FsbHkuIEluIHRoZSB1cGRhdGVGdW5jdGlvbiwgdGhlIGNsaWVudCBjYW4gcmVhZCBhbmQgd3JpdGUgdmFsdWVzXG4gKiB1c2luZyB0aGUgc3VwcGxpZWQgdHJhbnNhY3Rpb24gb2JqZWN0LiBBZnRlciB0aGUgdXBkYXRlRnVuY3Rpb24sIGFsbFxuICogY2hhbmdlcyB3aWxsIGJlIGNvbW1pdHRlZC4gSWYgYSByZXRyeWFibGUgZXJyb3Igb2NjdXJzIChleDogc29tZSBvdGhlclxuICogY2xpZW50IGhhcyBjaGFuZ2VkIGFueSBvZiB0aGUgZGF0YSByZWZlcmVuY2VkKSwgdGhlbiB0aGUgdXBkYXRlRnVuY3Rpb25cbiAqIHdpbGwgYmUgY2FsbGVkIGFnYWluIGFmdGVyIGEgYmFja29mZi4gSWYgdGhlIHVwZGF0ZUZ1bmN0aW9uIHN0aWxsIGZhaWxzXG4gKiBhZnRlciBhbGwgcmV0cmllcywgdGhlbiB0aGUgdHJhbnNhY3Rpb24gd2lsbCBiZSByZWplY3RlZC5cbiAqXG4gKiBUaGUgdHJhbnNhY3Rpb24gb2JqZWN0IHBhc3NlZCB0byB0aGUgdXBkYXRlRnVuY3Rpb24gY29udGFpbnMgbWV0aG9kcyBmb3JcbiAqIGFjY2Vzc2luZyBkb2N1bWVudHMgYW5kIGNvbGxlY3Rpb25zLiBVbmxpa2Ugb3RoZXIgZGF0YXN0b3JlIGFjY2VzcywgZGF0YVxuICogYWNjZXNzZWQgd2l0aCB0aGUgdHJhbnNhY3Rpb24gd2lsbCBub3QgcmVmbGVjdCBsb2NhbCBjaGFuZ2VzIHRoYXQgaGF2ZSBub3RcbiAqIGJlZW4gY29tbWl0dGVkLiBGb3IgdGhpcyByZWFzb24sIGl0IGlzIHJlcXVpcmVkIHRoYXQgYWxsIHJlYWRzIGFyZVxuICogcGVyZm9ybWVkIGJlZm9yZSBhbnkgd3JpdGVzLiBUcmFuc2FjdGlvbnMgbXVzdCBiZSBwZXJmb3JtZWQgd2hpbGUgb25saW5lLlxuICovIGZ1bmN0aW9uIHVjKHQsIGUpIHtcbiAgICBjb25zdCBuID0gbmV3IFE7XG4gICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHMgPSBhd2FpdCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gSmEodCkudGhlbigodCA9PiB0LmRhdGFzdG9yZSkpO1xuICAgICAgICB9KHQpO1xuICAgICAgICBuZXcgUWEodC5hc3luY1F1ZXVlLCBzLCBlLCBuKS5ydW4oKTtcbiAgICB9KSksIG4ucHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gaGModCwgZSwgbiwgcykge1xuICAgIGNvbnN0IGkgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBuID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCA/IChuZXcgVGV4dEVuY29kZXIpLmVuY29kZSh0KSA6IHQ7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEthKHQsIGUpO1xuICAgICAgICB9KGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGlmICh0IGluc3RhbmNlb2YgVWludDhBcnJheSkgcmV0dXJuIFVhKHQsIGUpO1xuICAgICAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgcmV0dXJuIFVhKG5ldyBVaW50OEFycmF5KHQpLCBlKTtcbiAgICAgICAgICAgIGlmICh0IGluc3RhbmNlb2YgUmVhZGFibGVTdHJlYW0pIHJldHVybiB0LmdldFJlYWRlcigpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU291cmNlIG9mIGB0b0J5dGVTdHJlYW1SZWFkZXJgIGhhcyB0byBiZSBhIEFycmF5QnVmZmVyIG9yIFJlYWRhYmxlU3RyZWFtXCIpO1xuICAgICAgICB9KG4pLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKG4sIHRvKGUpKTtcbiAgICB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICBGYShhd2FpdCB0Yyh0KSwgaSwgcyk7XG4gICAgfSkpO1xufVxuXG5mdW5jdGlvbiBsYyh0LCBlKSB7XG4gICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlKChhc3luYyAoKSA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBxKHQpO1xuICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCBuYW1lZCBxdWVyeVwiLCBcInJlYWRvbmx5XCIsICh0ID0+IG4uWWUuZ2V0TmFtZWRRdWVyeSh0LCBlKSkpO1xuICAgIH0oYXdhaXQgWGEodCksIGUpKSk7XG59XG5cbmNsYXNzIGZjIHtcbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGEgRGF0YWJhc2VJbmZvIHVzaW5nIHRoZSBwcm92aWRlZCBob3N0LCBkYXRhYmFzZUlkIGFuZFxuICAgICAqIHBlcnNpc3RlbmNlS2V5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRhdGFiYXNlSWQgLSBUaGUgZGF0YWJhc2UgdG8gdXNlLlxuICAgICAqIEBwYXJhbSBhcHBJZCAtIFRoZSBGaXJlYmFzZSBBcHAgSWQuXG4gICAgICogQHBhcmFtIHBlcnNpc3RlbmNlS2V5IC0gQSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhpcyBGaXJlc3RvcmUncyBsb2NhbFxuICAgICAqIHN0b3JhZ2UgKHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCB0aGUgZGF0YWJhc2VJZCkuXG4gICAgICogQHBhcmFtIGhvc3QgLSBUaGUgRmlyZXN0b3JlIGJhY2tlbmQgaG9zdCB0byBjb25uZWN0IHRvLlxuICAgICAqIEBwYXJhbSBzc2wgLSBXaGV0aGVyIHRvIHVzZSBTU0wgd2hlbiBjb25uZWN0aW5nLlxuICAgICAqIEBwYXJhbSBmb3JjZUxvbmdQb2xsaW5nIC0gV2hldGhlciB0byB1c2UgdGhlIGZvcmNlTG9uZ1BvbGxpbmcgb3B0aW9uXG4gICAgICogd2hlbiB1c2luZyBXZWJDaGFubmVsIGFzIHRoZSBuZXR3b3JrIHRyYW5zcG9ydC5cbiAgICAgKiBAcGFyYW0gYXV0b0RldGVjdExvbmdQb2xsaW5nIC0gV2hldGhlciB0byB1c2UgdGhlIGRldGVjdEJ1ZmZlcmluZ1Byb3h5XG4gICAgICogb3B0aW9uIHdoZW4gdXNpbmcgV2ViQ2hhbm5lbCBhcyB0aGUgbmV0d29yayB0cmFuc3BvcnQuXG4gICAgICogQHBhcmFtIHVzZUZldGNoU3RyZWFtcyBXaGV0aGVyIHRvIHVzZSB0aGUgRmV0Y2ggQVBJIGluc3RlYWQgb2ZcbiAgICAgKiBYTUxIVFRQUmVxdWVzdFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGksIHIsIG8sIGEpIHtcbiAgICAgICAgdGhpcy5kYXRhYmFzZUlkID0gdCwgdGhpcy5hcHBJZCA9IGUsIHRoaXMucGVyc2lzdGVuY2VLZXkgPSBuLCB0aGlzLmhvc3QgPSBzLCB0aGlzLnNzbCA9IGksIFxuICAgICAgICB0aGlzLmZvcmNlTG9uZ1BvbGxpbmcgPSByLCB0aGlzLmF1dG9EZXRlY3RMb25nUG9sbGluZyA9IG8sIHRoaXMudXNlRmV0Y2hTdHJlYW1zID0gYTtcbiAgICB9XG59XG5cbi8qKiBUaGUgZGVmYXVsdCBkYXRhYmFzZSBuYW1lIGZvciBhIHByb2plY3QuICovXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIGRhdGFiYXNlIElEIGEgRmlyZXN0b3JlIGNsaWVudCBpcyBhc3NvY2lhdGVkIHdpdGguXG4gKiBAaW50ZXJuYWxcbiAqL1xuY2xhc3MgZGMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5wcm9qZWN0SWQgPSB0LCB0aGlzLmRhdGFiYXNlID0gZSB8fCBcIihkZWZhdWx0KVwiO1xuICAgIH1cbiAgICBnZXQgaXNEZWZhdWx0RGF0YWJhc2UoKSB7XG4gICAgICAgIHJldHVybiBcIihkZWZhdWx0KVwiID09PSB0aGlzLmRhdGFiYXNlO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBkYyAmJiB0LnByb2plY3RJZCA9PT0gdGhpcy5wcm9qZWN0SWQgJiYgdC5kYXRhYmFzZSA9PT0gdGhpcy5kYXRhYmFzZTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IHdjID0gbmV3IE1hcDtcblxuLyoqXG4gKiBBbiBpbnN0YW5jZSBtYXAgdGhhdCBlbnN1cmVzIG9ubHkgb25lIERhdGFzdG9yZSBleGlzdHMgcGVyIEZpcmVzdG9yZVxuICogaW5zdGFuY2UuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5mdW5jdGlvbiBfYyh0LCBlLCBuKSB7XG4gICAgaWYgKCFuKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBGdW5jdGlvbiAke3R9KCkgY2Fubm90IGJlIGNhbGxlZCB3aXRoIGFuIGVtcHR5ICR7ZX0uYCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgdHdvIGJvb2xlYW4gb3B0aW9ucyBhcmUgbm90IHNldCBhdCB0aGUgc2FtZSB0aW1lLlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gbWModCwgZSwgbiwgcykge1xuICAgIGlmICghMCA9PT0gZSAmJiAhMCA9PT0gcykgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgJHt0fSBhbmQgJHtufSBjYW5ub3QgYmUgdXNlZCB0b2dldGhlci5gKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCBgcGF0aGAgcmVmZXJzIHRvIGEgZG9jdW1lbnQgKGluZGljYXRlZCBieSB0aGUgZmFjdCBpdCBjb250YWluc1xuICogYW4gZXZlbiBudW1iZXJzIG9mIHNlZ21lbnRzKS5cbiAqLyBmdW5jdGlvbiBnYyh0KSB7XG4gICAgaWYgKCFTdC5pc0RvY3VtZW50S2V5KHQpKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIGRvY3VtZW50IHJlZmVyZW5jZS4gRG9jdW1lbnQgcmVmZXJlbmNlcyBtdXN0IGhhdmUgYW4gZXZlbiBudW1iZXIgb2Ygc2VnbWVudHMsIGJ1dCAke3R9IGhhcyAke3QubGVuZ3RofS5gKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCBgcGF0aGAgcmVmZXJzIHRvIGEgY29sbGVjdGlvbiAoaW5kaWNhdGVkIGJ5IHRoZSBmYWN0IGl0XG4gKiBjb250YWlucyBhbiBvZGQgbnVtYmVycyBvZiBzZWdtZW50cykuXG4gKi8gZnVuY3Rpb24geWModCkge1xuICAgIGlmIChTdC5pc0RvY3VtZW50S2V5KHQpKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIGNvbGxlY3Rpb24gcmVmZXJlbmNlLiBDb2xsZWN0aW9uIHJlZmVyZW5jZXMgbXVzdCBoYXZlIGFuIG9kZCBudW1iZXIgb2Ygc2VnbWVudHMsIGJ1dCAke3R9IGhhcyAke3QubGVuZ3RofS5gKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgaXQncyBhIG5vbi1udWxsIG9iamVjdCB3aXRob3V0IGEgY3VzdG9tIHByb3RvdHlwZVxuICogKGkuZS4gZXhjbHVkZXMgQXJyYXksIERhdGUsIGV0Yy4pLlxuICovXG4vKiogUmV0dXJucyBhIHN0cmluZyBkZXNjcmliaW5nIHRoZSB0eXBlIC8gdmFsdWUgb2YgdGhlIHByb3ZpZGVkIGlucHV0LiAqL1xuZnVuY3Rpb24gcGModCkge1xuICAgIGlmICh2b2lkIDAgPT09IHQpIHJldHVybiBcInVuZGVmaW5lZFwiO1xuICAgIGlmIChudWxsID09PSB0KSByZXR1cm4gXCJudWxsXCI7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQpIHJldHVybiB0Lmxlbmd0aCA+IDIwICYmICh0ID0gYCR7dC5zdWJzdHJpbmcoMCwgMjApfS4uLmApLCBcbiAgICBKU09OLnN0cmluZ2lmeSh0KTtcbiAgICBpZiAoXCJudW1iZXJcIiA9PSB0eXBlb2YgdCB8fCBcImJvb2xlYW5cIiA9PSB0eXBlb2YgdCkgcmV0dXJuIFwiXCIgKyB0O1xuICAgIGlmIChcIm9iamVjdFwiID09IHR5cGVvZiB0KSB7XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgQXJyYXkpIHJldHVybiBcImFuIGFycmF5XCI7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBcbiAgICAgICAgICAgIC8qKiB0cnkgdG8gZ2V0IHRoZSBjb25zdHJ1Y3RvciBuYW1lIGZvciBhbiBvYmplY3QuICovXG4gICAgICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHQuY29uc3RydWN0b3IpIHJldHVybiB0LmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIENhc3RzIGBvYmpgIHRvIGBUYCwgb3B0aW9uYWxseSB1bndyYXBwaW5nIENvbXBhdCB0eXBlcyB0byBleHBvc2UgdGhlXG4gKiB1bmRlcmx5aW5nIGluc3RhbmNlLiBUaHJvd3MgaWYgIGBvYmpgIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiBgVGAuXG4gKlxuICogVGhpcyBjYXN0IGlzIHVzZWQgaW4gdGhlIExpdGUgYW5kIEZ1bGwgU0RLIHRvIHZlcmlmeSBpbnN0YW5jZSB0eXBlcyBmb3JcbiAqIGFyZ3VtZW50cyBwYXNzZWQgdG8gdGhlIHB1YmxpYyBBUEkuXG4gKiBAaW50ZXJuYWxcbiAqLyAodCk7XG4gICAgICAgICAgICByZXR1cm4gZSA/IGBhIGN1c3RvbSAke2V9IG9iamVjdGAgOiBcImFuIG9iamVjdFwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHQgPyBcImEgZnVuY3Rpb25cIiA6IEwoKTtcbn1cblxuZnVuY3Rpb24gVGModCwgXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZSkge1xuICAgIGlmIChcIl9kZWxlZ2F0ZVwiIGluIHQgJiYgKFxuICAgIC8vIFVud3JhcCBDb21wYXQgdHlwZXNcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHQgPSB0Ll9kZWxlZ2F0ZSksICEodCBpbnN0YW5jZW9mIGUpKSB7XG4gICAgICAgIGlmIChlLm5hbWUgPT09IHQuY29uc3RydWN0b3IubmFtZSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIlR5cGUgZG9lcyBub3QgbWF0Y2ggdGhlIGV4cGVjdGVkIGluc3RhbmNlLiBEaWQgeW91IHBhc3MgYSByZWZlcmVuY2UgZnJvbSBhIGRpZmZlcmVudCBGaXJlc3RvcmUgU0RLP1wiKTtcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgbiA9IHBjKHQpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgRXhwZWN0ZWQgdHlwZSAnJHtlLm5hbWV9JywgYnV0IGl0IHdhczogJHtufWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0O1xufVxuXG5mdW5jdGlvbiBFYyh0LCBlKSB7XG4gICAgaWYgKGUgPD0gMCkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgRnVuY3Rpb24gJHt0fSgpIHJlcXVpcmVzIGEgcG9zaXRpdmUgbnVtYmVyLCBidXQgaXQgd2FzOiAke2V9LmApO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gc2V0dGluZ3MoKSBkZWZhdWx0czpcbi8qKlxuICogQSBjb25jcmV0ZSB0eXBlIGRlc2NyaWJpbmcgYWxsIHRoZSB2YWx1ZXMgdGhhdCBjYW4gYmUgYXBwbGllZCB2aWEgYVxuICogdXNlci1zdXBwbGllZCBgRmlyZXN0b3JlU2V0dGluZ3NgIG9iamVjdC4gVGhpcyBpcyBhIHNlcGFyYXRlIHR5cGUgc28gdGhhdFxuICogZGVmYXVsdHMgY2FuIGJlIHN1cHBsaWVkIGFuZCB0aGUgdmFsdWUgY2FuIGJlIGNoZWNrZWQgZm9yIGVxdWFsaXR5LlxuICovXG5jbGFzcyBJYyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gdC5ob3N0KSB7XG4gICAgICAgICAgICBpZiAodm9pZCAwICE9PSB0LnNzbCkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIkNhbid0IHByb3ZpZGUgc3NsIG9wdGlvbiBpZiBob3N0IG9wdGlvbiBpcyBub3Qgc2V0XCIpO1xuICAgICAgICAgICAgdGhpcy5ob3N0ID0gXCJmaXJlc3RvcmUuZ29vZ2xlYXBpcy5jb21cIiwgdGhpcy5zc2wgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgdGhpcy5ob3N0ID0gdC5ob3N0LCB0aGlzLnNzbCA9IG51bGwgPT09IChlID0gdC5zc2wpIHx8IHZvaWQgMCA9PT0gZSB8fCBlO1xuICAgICAgICBpZiAodGhpcy5jcmVkZW50aWFscyA9IHQuY3JlZGVudGlhbHMsIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyA9ICEhdC5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzLCBcbiAgICAgICAgdm9pZCAwID09PSB0LmNhY2hlU2l6ZUJ5dGVzKSB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gNDE5NDMwNDA7IGVsc2Uge1xuICAgICAgICAgICAgaWYgKC0xICE9PSB0LmNhY2hlU2l6ZUJ5dGVzICYmIHQuY2FjaGVTaXplQnl0ZXMgPCAxMDQ4NTc2KSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiY2FjaGVTaXplQnl0ZXMgbXVzdCBiZSBhdCBsZWFzdCAxMDQ4NTc2XCIpO1xuICAgICAgICAgICAgdGhpcy5jYWNoZVNpemVCeXRlcyA9IHQuY2FjaGVTaXplQnl0ZXM7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nID0gISF0LmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcsIHRoaXMuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nID0gISF0LmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZywgXG4gICAgICAgIHRoaXMudXNlRmV0Y2hTdHJlYW1zID0gISF0LnVzZUZldGNoU3RyZWFtcywgbWMoXCJleHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nXCIsIHQuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZywgXCJleHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmdcIiwgdC5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaG9zdCA9PT0gdC5ob3N0ICYmIHRoaXMuc3NsID09PSB0LnNzbCAmJiB0aGlzLmNyZWRlbnRpYWxzID09PSB0LmNyZWRlbnRpYWxzICYmIHRoaXMuY2FjaGVTaXplQnl0ZXMgPT09IHQuY2FjaGVTaXplQnl0ZXMgJiYgdGhpcy5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nID09PSB0LmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcgJiYgdGhpcy5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPT09IHQuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nICYmIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyA9PT0gdC5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzICYmIHRoaXMudXNlRmV0Y2hTdHJlYW1zID09PSB0LnVzZUZldGNoU3RyZWFtcztcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRoZSBDbG91ZCBGaXJlc3RvcmUgc2VydmljZSBpbnRlcmZhY2UuXG4gKlxuICogRG8gbm90IGNhbGwgdGhpcyBjb25zdHJ1Y3RvciBkaXJlY3RseS4gSW5zdGVhZCwgdXNlIHtAbGluayBnZXRGaXJlc3RvcmV9LlxuICovIGNsYXNzIEFjIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5fYXV0aENyZWRlbnRpYWxzID0gZSwgdGhpcy5fYXBwQ2hlY2tDcmVkZW50aWFscyA9IG4sIFxuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciBpdCdzIGEgRmlyZXN0b3JlIG9yIEZpcmVzdG9yZSBMaXRlIGluc3RhbmNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJmaXJlc3RvcmUtbGl0ZVwiLCB0aGlzLl9wZXJzaXN0ZW5jZUtleSA9IFwiKGxpdGUpXCIsIHRoaXMuX3NldHRpbmdzID0gbmV3IEljKHt9KSwgXG4gICAgICAgIHRoaXMuX3NldHRpbmdzRnJvemVuID0gITEsIHQgaW5zdGFuY2VvZiBkYyA/IHRoaXMuX2RhdGFiYXNlSWQgPSB0IDogKHRoaXMuX2FwcCA9IHQsIFxuICAgICAgICB0aGlzLl9kYXRhYmFzZUlkID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmFwcGx5KHQub3B0aW9ucywgWyBcInByb2plY3RJZFwiIF0pKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsICdcInByb2plY3RJZFwiIG5vdCBwcm92aWRlZCBpbiBmaXJlYmFzZS5pbml0aWFsaXplQXBwLicpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBkYyh0Lm9wdGlvbnMucHJvamVjdElkKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIE1vZGlmeSB0aGlzIGluc3RhbmNlIHRvIGNvbW11bmljYXRlIHdpdGggdGhlIENsb3VkIEZpcmVzdG9yZSBlbXVsYXRvci5cbiAqXG4gKiBOb3RlOiBUaGlzIG11c3QgYmUgY2FsbGVkIGJlZm9yZSB0aGlzIGluc3RhbmNlIGhhcyBiZWVuIHVzZWQgdG8gZG8gYW55XG4gKiBvcGVyYXRpb25zLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUgYEZpcmVzdG9yZWAgaW5zdGFuY2UgdG8gY29uZmlndXJlIHRvIGNvbm5lY3QgdG8gdGhlXG4gKiBlbXVsYXRvci5cbiAqIEBwYXJhbSBob3N0IC0gdGhlIGVtdWxhdG9yIGhvc3QgKGV4OiBsb2NhbGhvc3QpLlxuICogQHBhcmFtIHBvcnQgLSB0aGUgZW11bGF0b3IgcG9ydCAoZXg6IDkwMDApLlxuICogQHBhcmFtIG9wdGlvbnMubW9ja1VzZXJUb2tlbiAtIHRoZSBtb2NrIGF1dGggdG9rZW4gdG8gdXNlIGZvciB1bml0IHRlc3RpbmdcbiAqIFNlY3VyaXR5IFJ1bGVzLlxuICovICh0KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gYXNzb2NpYXRlZCB3aXRoIHRoaXMgYEZpcmVzdG9yZWAgc2VydmljZVxuICAgICAqIGluc3RhbmNlLlxuICAgICAqLyAgICBnZXQgYXBwKCkge1xuICAgICAgICBpZiAoIXRoaXMuX2FwcCkgdGhyb3cgbmV3IGooSy5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkZpcmVzdG9yZSB3YXMgbm90IGluaXRpYWxpemVkIHVzaW5nIHRoZSBGaXJlYmFzZSBTREsuICdhcHAnIGlzIG5vdCBhdmFpbGFibGVcIik7XG4gICAgICAgIHJldHVybiB0aGlzLl9hcHA7XG4gICAgfVxuICAgIGdldCBfaW5pdGlhbGl6ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5nc0Zyb3plbjtcbiAgICB9XG4gICAgZ2V0IF90ZXJtaW5hdGVkKCkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB0aGlzLl90ZXJtaW5hdGVUYXNrO1xuICAgIH1cbiAgICBfc2V0U2V0dGluZ3ModCkge1xuICAgICAgICBpZiAodGhpcy5fc2V0dGluZ3NGcm96ZW4pIHRocm93IG5ldyBqKEsuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJGaXJlc3RvcmUgaGFzIGFscmVhZHkgYmVlbiBzdGFydGVkIGFuZCBpdHMgc2V0dGluZ3MgY2FuIG5vIGxvbmdlciBiZSBjaGFuZ2VkLiBZb3UgY2FuIG9ubHkgbW9kaWZ5IHNldHRpbmdzIGJlZm9yZSBjYWxsaW5nIGFueSBvdGhlciBtZXRob2RzIG9uIGEgRmlyZXN0b3JlIG9iamVjdC5cIik7XG4gICAgICAgIHRoaXMuX3NldHRpbmdzID0gbmV3IEljKHQpLCB2b2lkIDAgIT09IHQuY3JlZGVudGlhbHMgJiYgKHRoaXMuX2F1dGhDcmVkZW50aWFscyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGlmICghdCkgcmV0dXJuIG5ldyBHO1xuICAgICAgICAgICAgc3dpdGNoICh0LnR5cGUpIHtcbiAgICAgICAgICAgICAgY2FzZSBcImdhcGlcIjpcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdC5jbGllbnQ7XG4gICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoaXMgcmVhbGx5IGlzIGEgR2FwaSBjbGllbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBCKCEoXCJvYmplY3RcIiAhPSB0eXBlb2YgZSB8fCBudWxsID09PSBlIHx8ICFlLmF1dGggfHwgIWUuYXV0aC5nZXRBdXRoSGVhZGVyVmFsdWVGb3JGaXJzdFBhcnR5KSksIFxuICAgICAgICAgICAgICAgIG5ldyBZKGUsIHQuc2Vzc2lvbkluZGV4IHx8IFwiMFwiLCB0LmlhbVRva2VuIHx8IG51bGwpO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJwcm92aWRlclwiOlxuICAgICAgICAgICAgICAgIHJldHVybiB0LmNsaWVudDtcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJtYWtlQXV0aENyZWRlbnRpYWxzUHJvdmlkZXIgZmFpbGVkIGR1ZSB0byBpbnZhbGlkIGNyZWRlbnRpYWwgdHlwZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSh0LmNyZWRlbnRpYWxzKSk7XG4gICAgfVxuICAgIF9nZXRTZXR0aW5ncygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzO1xuICAgIH1cbiAgICBfZnJlZXplU2V0dGluZ3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5nc0Zyb3plbiA9ICEwLCB0aGlzLl9zZXR0aW5ncztcbiAgICB9XG4gICAgX2RlbGV0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rlcm1pbmF0ZVRhc2sgfHwgKHRoaXMuX3Rlcm1pbmF0ZVRhc2sgPSB0aGlzLl90ZXJtaW5hdGUoKSksIHRoaXMuX3Rlcm1pbmF0ZVRhc2s7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgSlNPTi1zZXJpYWxpemFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBgRmlyZXN0b3JlYCBpbnN0YW5jZS4gKi8gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYXBwOiB0aGlzLl9hcHAsXG4gICAgICAgICAgICBkYXRhYmFzZUlkOiB0aGlzLl9kYXRhYmFzZUlkLFxuICAgICAgICAgICAgc2V0dGluZ3M6IHRoaXMuX3NldHRpbmdzXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRlcm1pbmF0ZXMgYWxsIGNvbXBvbmVudHMgdXNlZCBieSB0aGlzIGNsaWVudC4gU3ViY2xhc3NlcyBjYW4gb3ZlcnJpZGVcbiAgICAgKiB0aGlzIG1ldGhvZCB0byBjbGVhbiB1cCB0aGVpciBvd24gZGVwZW5kZW5jaWVzLCBidXQgbXVzdCBhbHNvIGNhbGwgdGhpc1xuICAgICAqIG1ldGhvZC5cbiAgICAgKlxuICAgICAqIE9ubHkgZXZlciBjYWxsZWQgb25jZS5cbiAgICAgKi8gICAgX3Rlcm1pbmF0ZSgpIHtcbiAgICAgICAgLyoqXG4gKiBSZW1vdmVzIGFsbCBjb21wb25lbnRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgcHJvdmlkZWQgaW5zdGFuY2UuIE11c3QgYmUgY2FsbGVkXG4gKiB3aGVuIHRoZSBgRmlyZXN0b3JlYCBpbnN0YW5jZSBpcyB0ZXJtaW5hdGVkLlxuICovXG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gd2MuZ2V0KHQpO1xuICAgICAgICAgICAgZSAmJiAoJChcIkNvbXBvbmVudFByb3ZpZGVyXCIsIFwiUmVtb3ZpbmcgRGF0YXN0b3JlXCIpLCB3Yy5kZWxldGUodCksIGUudGVybWluYXRlKCkpO1xuICAgICAgICB9KHRoaXMpLCBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFJjKHQsIGUsIG4sIHMgPSB7fSkge1xuICAgIHZhciBpO1xuICAgIGNvbnN0IHIgPSAodCA9IFRjKHQsIEFjKSkuX2dldFNldHRpbmdzKCk7XG4gICAgaWYgKFwiZmlyZXN0b3JlLmdvb2dsZWFwaXMuY29tXCIgIT09IHIuaG9zdCAmJiByLmhvc3QgIT09IGUgJiYgTyhcIkhvc3QgaGFzIGJlZW4gc2V0IGluIGJvdGggc2V0dGluZ3MoKSBhbmQgdXNlRW11bGF0b3IoKSwgZW11bGF0b3IgaG9zdCB3aWxsIGJlIHVzZWRcIiksIFxuICAgIHQuX3NldFNldHRpbmdzKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgciksIHtcbiAgICAgICAgaG9zdDogYCR7ZX06JHtufWAsXG4gICAgICAgIHNzbDogITFcbiAgICB9KSksIHMubW9ja1VzZXJUb2tlbikge1xuICAgICAgICBsZXQgZSwgbjtcbiAgICAgICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHMubW9ja1VzZXJUb2tlbikgZSA9IHMubW9ja1VzZXJUb2tlbiwgbiA9IEQuTU9DS19VU0VSOyBlbHNlIHtcbiAgICAgICAgICAgIC8vIExldCBjcmVhdGVNb2NrVXNlclRva2VuIHZhbGlkYXRlIGZpcnN0IChjYXRjaGVzIGNvbW1vbiBtaXN0YWtlcyBsaWtlXG4gICAgICAgICAgICAvLyBpbnZhbGlkIGZpZWxkIFwidWlkXCIgYW5kIG1pc3NpbmcgZmllbGQgXCJzdWJcIiAvIFwidXNlcl9pZFwiLilcbiAgICAgICAgICAgIGUgPSBjcmVhdGVNb2NrVXNlclRva2VuKHMubW9ja1VzZXJUb2tlbiwgbnVsbCA9PT0gKGkgPSB0Ll9hcHApIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGkub3B0aW9ucy5wcm9qZWN0SWQpO1xuICAgICAgICAgICAgY29uc3QgciA9IHMubW9ja1VzZXJUb2tlbi5zdWIgfHwgcy5tb2NrVXNlclRva2VuLnVzZXJfaWQ7XG4gICAgICAgICAgICBpZiAoIXIpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJtb2NrVXNlclRva2VuIG11c3QgY29udGFpbiAnc3ViJyBvciAndXNlcl9pZCcgZmllbGQhXCIpO1xuICAgICAgICAgICAgbiA9IG5ldyBEKHIpO1xuICAgICAgICB9XG4gICAgICAgIHQuX2F1dGhDcmVkZW50aWFscyA9IG5ldyB6KG5ldyBXKGUsIG4pKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYERvY3VtZW50UmVmZXJlbmNlYCByZWZlcnMgdG8gYSBkb2N1bWVudCBsb2NhdGlvbiBpbiBhIEZpcmVzdG9yZSBkYXRhYmFzZVxuICogYW5kIGNhbiBiZSB1c2VkIHRvIHdyaXRlLCByZWFkLCBvciBsaXN0ZW4gdG8gdGhlIGxvY2F0aW9uLiBUaGUgZG9jdW1lbnQgYXRcbiAqIHRoZSByZWZlcmVuY2VkIGxvY2F0aW9uIG1heSBvciBtYXkgbm90IGV4aXN0LlxuICovIGNsYXNzIFBjIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIFxuICAgIC8qKlxuICAgICAqIElmIHByb3ZpZGVkLCB0aGUgYEZpcmVzdG9yZURhdGFDb252ZXJ0ZXJgIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGluc3RhbmNlLlxuICAgICAqL1xuICAgIGUsIG4pIHtcbiAgICAgICAgdGhpcy5jb252ZXJ0ZXIgPSBlLCB0aGlzLl9rZXkgPSBuLCBcbiAgICAgICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgRmlyZXN0b3JlIHJlZmVyZW5jZS4gKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJkb2N1bWVudFwiLCB0aGlzLmZpcmVzdG9yZSA9IHQ7XG4gICAgfVxuICAgIGdldCBfcGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleS5wYXRoO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZG9jdW1lbnQncyBpZGVudGlmaWVyIHdpdGhpbiBpdHMgY29sbGVjdGlvbi5cbiAgICAgKi8gICAgZ2V0IGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fa2V5LnBhdGgubGFzdFNlZ21lbnQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBwYXRoIG9mIHRoZSByZWZlcmVuY2VkIGRvY3VtZW50IChyZWxhdGl2ZVxuICAgICAqIHRvIHRoZSByb290IG9mIHRoZSBkYXRhYmFzZSkuXG4gICAgICovICAgIGdldCBwYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fa2V5LnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjb2xsZWN0aW9uIHRoaXMgYERvY3VtZW50UmVmZXJlbmNlYCBiZWxvbmdzIHRvLlxuICAgICAqLyAgICBnZXQgcGFyZW50KCkge1xuICAgICAgICByZXR1cm4gbmV3IHZjKHRoaXMuZmlyZXN0b3JlLCB0aGlzLmNvbnZlcnRlciwgdGhpcy5fa2V5LnBhdGgucG9wTGFzdCgpKTtcbiAgICB9XG4gICAgd2l0aENvbnZlcnRlcih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgUGModGhpcy5maXJlc3RvcmUsIHQsIHRoaXMuX2tleSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYFF1ZXJ5YCByZWZlcnMgdG8gYSBxdWVyeSB3aGljaCB5b3UgY2FuIHJlYWQgb3IgbGlzdGVuIHRvLiBZb3UgY2FuIGFsc29cbiAqIGNvbnN0cnVjdCByZWZpbmVkIGBRdWVyeWAgb2JqZWN0cyBieSBhZGRpbmcgZmlsdGVycyBhbmQgb3JkZXJpbmcuXG4gKi8gY2xhc3MgYmMge1xuICAgIC8vIFRoaXMgaXMgdGhlIGxpdGUgdmVyc2lvbiBvZiB0aGUgUXVlcnkgY2xhc3MgaW4gdGhlIG1haW4gU0RLLlxuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yIHByb3RlY3RlZCAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIFxuICAgIC8qKlxuICAgICAqIElmIHByb3ZpZGVkLCB0aGUgYEZpcmVzdG9yZURhdGFDb252ZXJ0ZXJgIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGluc3RhbmNlLlxuICAgICAqL1xuICAgIGUsIG4pIHtcbiAgICAgICAgdGhpcy5jb252ZXJ0ZXIgPSBlLCB0aGlzLl9xdWVyeSA9IG4sIFxuICAgICAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBGaXJlc3RvcmUgcmVmZXJlbmNlLiAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcInF1ZXJ5XCIsIHRoaXMuZmlyZXN0b3JlID0gdDtcbiAgICB9XG4gICAgd2l0aENvbnZlcnRlcih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgYmModGhpcy5maXJlc3RvcmUsIHQsIHRoaXMuX3F1ZXJ5KTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBgQ29sbGVjdGlvblJlZmVyZW5jZWAgb2JqZWN0IGNhbiBiZSB1c2VkIGZvciBhZGRpbmcgZG9jdW1lbnRzLCBnZXR0aW5nXG4gKiBkb2N1bWVudCByZWZlcmVuY2VzLCBhbmQgcXVlcnlpbmcgZm9yIGRvY3VtZW50cyAodXNpbmcge0BsaW5rIHF1ZXJ5fSkuXG4gKi8gY2xhc3MgdmMgZXh0ZW5kcyBiYyB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKHQsIGUsIGdlKG4pKSwgdGhpcy5fcGF0aCA9IG4sIFxuICAgICAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBGaXJlc3RvcmUgcmVmZXJlbmNlLiAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcImNvbGxlY3Rpb25cIjtcbiAgICB9XG4gICAgLyoqIFRoZSBjb2xsZWN0aW9uJ3MgaWRlbnRpZmllci4gKi8gICAgZ2V0IGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcXVlcnkucGF0aC5sYXN0U2VnbWVudCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHBhdGggb2YgdGhlIHJlZmVyZW5jZWQgY29sbGVjdGlvbiAocmVsYXRpdmVcbiAgICAgKiB0byB0aGUgcm9vdCBvZiB0aGUgZGF0YWJhc2UpLlxuICAgICAqLyAgICBnZXQgcGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3F1ZXJ5LnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgcmVmZXJlbmNlIHRvIHRoZSBjb250YWluaW5nIGBEb2N1bWVudFJlZmVyZW5jZWAgaWYgdGhpcyBpcyBhXG4gICAgICogc3ViY29sbGVjdGlvbi4gSWYgdGhpcyBpc24ndCBhIHN1YmNvbGxlY3Rpb24sIHRoZSByZWZlcmVuY2UgaXMgbnVsbC5cbiAgICAgKi8gICAgZ2V0IHBhcmVudCgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuX3BhdGgucG9wTGFzdCgpO1xuICAgICAgICByZXR1cm4gdC5pc0VtcHR5KCkgPyBudWxsIDogbmV3IFBjKHRoaXMuZmlyZXN0b3JlLCBcbiAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsLCBuZXcgU3QodCkpO1xuICAgIH1cbiAgICB3aXRoQ29udmVydGVyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB2Yyh0aGlzLmZpcmVzdG9yZSwgdCwgdGhpcy5fcGF0aCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBWYyh0LCBlLCAuLi5uKSB7XG4gICAgaWYgKHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCksIF9jKFwiY29sbGVjdGlvblwiLCBcInBhdGhcIiwgZSksIHQgaW5zdGFuY2VvZiBBYykge1xuICAgICAgICBjb25zdCBzID0gZHQuZnJvbVN0cmluZyhlLCAuLi5uKTtcbiAgICAgICAgcmV0dXJuIHljKHMpLCBuZXcgdmModCwgLyogY29udmVydGVyPSAqLyBudWxsLCBzKTtcbiAgICB9XG4gICAge1xuICAgICAgICBpZiAoISh0IGluc3RhbmNlb2YgUGMgfHwgdCBpbnN0YW5jZW9mIHZjKSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIkV4cGVjdGVkIGZpcnN0IGFyZ3VtZW50IHRvIGNvbGxlY3Rpb24oKSB0byBiZSBhIENvbGxlY3Rpb25SZWZlcmVuY2UsIGEgRG9jdW1lbnRSZWZlcmVuY2Ugb3IgRmlyZWJhc2VGaXJlc3RvcmVcIik7XG4gICAgICAgIGNvbnN0IHMgPSB0Ll9wYXRoLmNoaWxkKGR0LmZyb21TdHJpbmcoZSwgLi4ubikpO1xuICAgICAgICByZXR1cm4geWMocyksIG5ldyB2Yyh0LmZpcmVzdG9yZSwgXG4gICAgICAgIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgcyk7XG4gICAgfVxufVxuXG4vLyBUT0RPKGZpcmVzdG9yZWxpdGUpOiBDb25zaWRlciB1c2luZyBFcnJvckZhY3RvcnkgLVxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWpzLXNkay9ibG9iLzAxMzFlMWYvcGFja2FnZXMvdXRpbC9zcmMvZXJyb3JzLnRzI0wxMDZcbi8qKlxuICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIG5ldyBgUXVlcnlgIGluc3RhbmNlIHRoYXQgaW5jbHVkZXMgYWxsIGRvY3VtZW50cyBpbiB0aGVcbiAqIGRhdGFiYXNlIHRoYXQgYXJlIGNvbnRhaW5lZCBpbiBhIGNvbGxlY3Rpb24gb3Igc3ViY29sbGVjdGlvbiB3aXRoIHRoZVxuICogZ2l2ZW4gYGNvbGxlY3Rpb25JZGAuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIEEgcmVmZXJlbmNlIHRvIHRoZSByb290IGBGaXJlc3RvcmVgIGluc3RhbmNlLlxuICogQHBhcmFtIGNvbGxlY3Rpb25JZCAtIElkZW50aWZpZXMgdGhlIGNvbGxlY3Rpb25zIHRvIHF1ZXJ5IG92ZXIuIEV2ZXJ5XG4gKiBjb2xsZWN0aW9uIG9yIHN1YmNvbGxlY3Rpb24gd2l0aCB0aGlzIElEIGFzIHRoZSBsYXN0IHNlZ21lbnQgb2YgaXRzIHBhdGhcbiAqIHdpbGwgYmUgaW5jbHVkZWQuIENhbm5vdCBjb250YWluIGEgc2xhc2guXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCBgUXVlcnlgLlxuICovIGZ1bmN0aW9uIFNjKHQsIGUpIHtcbiAgICBpZiAodCA9IFRjKHQsIEFjKSwgX2MoXCJjb2xsZWN0aW9uR3JvdXBcIiwgXCJjb2xsZWN0aW9uIGlkXCIsIGUpLCBlLmluZGV4T2YoXCIvXCIpID49IDApIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgY29sbGVjdGlvbiBJRCAnJHtlfScgcGFzc2VkIHRvIGZ1bmN0aW9uIGNvbGxlY3Rpb25Hcm91cCgpLiBDb2xsZWN0aW9uIElEcyBtdXN0IG5vdCBjb250YWluICcvJy5gKTtcbiAgICByZXR1cm4gbmV3IGJjKHQsIFxuICAgIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgXG4gICAgLyoqXG4gKiBDcmVhdGVzIGEgbmV3IFF1ZXJ5IGZvciBhIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcnkgdGhhdCBtYXRjaGVzIGFsbCBkb2N1bWVudHNcbiAqIHdpdGhpbiB0aGUgcHJvdmlkZWQgY29sbGVjdGlvbiBncm91cC5cbiAqL1xuICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBfZShkdC5lbXB0eVBhdGgoKSwgdCk7XG4gICAgfShlKSk7XG59XG5cbmZ1bmN0aW9uIERjKHQsIGUsIC4uLm4pIHtcbiAgICBpZiAodCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSwgXG4gICAgLy8gV2UgYWxsb3cgb21pc3Npb24gb2YgJ3BhdGhTdHJpbmcnIGJ1dCBleHBsaWNpdGx5IHByb2hpYml0IHBhc3NpbmcgaW4gYm90aFxuICAgIC8vICd1bmRlZmluZWQnIGFuZCAnbnVsbCcuXG4gICAgMSA9PT0gYXJndW1lbnRzLmxlbmd0aCAmJiAoZSA9IHN0LkEoKSksIF9jKFwiZG9jXCIsIFwicGF0aFwiLCBlKSwgdCBpbnN0YW5jZW9mIEFjKSB7XG4gICAgICAgIGNvbnN0IHMgPSBkdC5mcm9tU3RyaW5nKGUsIC4uLm4pO1xuICAgICAgICByZXR1cm4gZ2MocyksIG5ldyBQYyh0LCBcbiAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsLCBuZXcgU3QocykpO1xuICAgIH1cbiAgICB7XG4gICAgICAgIGlmICghKHQgaW5zdGFuY2VvZiBQYyB8fCB0IGluc3RhbmNlb2YgdmMpKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiRXhwZWN0ZWQgZmlyc3QgYXJndW1lbnQgdG8gY29sbGVjdGlvbigpIHRvIGJlIGEgQ29sbGVjdGlvblJlZmVyZW5jZSwgYSBEb2N1bWVudFJlZmVyZW5jZSBvciBGaXJlYmFzZUZpcmVzdG9yZVwiKTtcbiAgICAgICAgY29uc3QgcyA9IHQuX3BhdGguY2hpbGQoZHQuZnJvbVN0cmluZyhlLCAuLi5uKSk7XG4gICAgICAgIHJldHVybiBnYyhzKSwgbmV3IFBjKHQuZmlyZXN0b3JlLCB0IGluc3RhbmNlb2YgdmMgPyB0LmNvbnZlcnRlciA6IG51bGwsIG5ldyBTdChzKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcHJvdmlkZWQgcmVmZXJlbmNlcyBhcmUgZXF1YWwuXG4gKlxuICogQHBhcmFtIGxlZnQgLSBBIHJlZmVyZW5jZSB0byBjb21wYXJlLlxuICogQHBhcmFtIHJpZ2h0IC0gQSByZWZlcmVuY2UgdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHJlZmVyZW5jZXMgcG9pbnQgdG8gdGhlIHNhbWUgbG9jYXRpb24gaW4gdGhlIHNhbWVcbiAqIEZpcmVzdG9yZSBkYXRhYmFzZS5cbiAqLyBmdW5jdGlvbiBDYyh0LCBlKSB7XG4gICAgcmV0dXJuIHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCksIGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSksICh0IGluc3RhbmNlb2YgUGMgfHwgdCBpbnN0YW5jZW9mIHZjKSAmJiAoZSBpbnN0YW5jZW9mIFBjIHx8IGUgaW5zdGFuY2VvZiB2YykgJiYgKHQuZmlyZXN0b3JlID09PSBlLmZpcmVzdG9yZSAmJiB0LnBhdGggPT09IGUucGF0aCAmJiB0LmNvbnZlcnRlciA9PT0gZS5jb252ZXJ0ZXIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcHJvdmlkZWQgcXVlcmllcyBwb2ludCB0byB0aGUgc2FtZSBjb2xsZWN0aW9uIGFuZCBhcHBseVxuICogdGhlIHNhbWUgY29uc3RyYWludHMuXG4gKlxuICogQHBhcmFtIGxlZnQgLSBBIGBRdWVyeWAgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSByaWdodCAtIEEgYFF1ZXJ5YCB0byBjb21wYXJlLlxuICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgcmVmZXJlbmNlcyBwb2ludCB0byB0aGUgc2FtZSBsb2NhdGlvbiBpbiB0aGUgc2FtZVxuICogRmlyZXN0b3JlIGRhdGFiYXNlLlxuICovIGZ1bmN0aW9uIE5jKHQsIGUpIHtcbiAgICByZXR1cm4gdCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSwgZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSwgdCBpbnN0YW5jZW9mIGJjICYmIGUgaW5zdGFuY2VvZiBiYyAmJiAodC5maXJlc3RvcmUgPT09IGUuZmlyZXN0b3JlICYmIGJlKHQuX3F1ZXJ5LCBlLl9xdWVyeSkgJiYgdC5jb252ZXJ0ZXIgPT09IGUuY29udmVydGVyKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3Mga2Mge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBUaGUgbGFzdCBwcm9taXNlIGluIHRoZSBxdWV1ZS5cbiAgICAgICAgdGhpcy5tYSA9IFByb21pc2UucmVzb2x2ZSgpLCBcbiAgICAgICAgLy8gQSBsaXN0IG9mIHJldHJ5YWJsZSBvcGVyYXRpb25zLiBSZXRyeWFibGUgb3BlcmF0aW9ucyBhcmUgcnVuIGluIG9yZGVyIGFuZFxuICAgICAgICAvLyByZXRyaWVkIHdpdGggYmFja29mZi5cbiAgICAgICAgdGhpcy5nYSA9IFtdLCBcbiAgICAgICAgLy8gSXMgdGhpcyBBc3luY1F1ZXVlIGJlaW5nIHNodXQgZG93bj8gT25jZSBpdCBpcyBzZXQgdG8gdHJ1ZSwgaXQgd2lsbCBub3RcbiAgICAgICAgLy8gYmUgY2hhbmdlZCBhZ2Fpbi5cbiAgICAgICAgdGhpcy55YSA9ICExLCBcbiAgICAgICAgLy8gT3BlcmF0aW9ucyBzY2hlZHVsZWQgdG8gYmUgcXVldWVkIGluIHRoZSBmdXR1cmUuIE9wZXJhdGlvbnMgYXJlXG4gICAgICAgIC8vIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZCBhZnRlciB0aGV5IGFyZSBydW4gb3IgY2FuY2VsZWQuXG4gICAgICAgIHRoaXMucGEgPSBbXSwgXG4gICAgICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAgICAgdGhpcy5UYSA9IG51bGwsIFxuICAgICAgICAvLyBGbGFnIHNldCB3aGlsZSB0aGVyZSdzIGFuIG91dHN0YW5kaW5nIEFzeW5jUXVldWUgb3BlcmF0aW9uLCB1c2VkIGZvclxuICAgICAgICAvLyBhc3NlcnRpb24gc2FuaXR5LWNoZWNrcy5cbiAgICAgICAgdGhpcy5FYSA9ICExLCBcbiAgICAgICAgLy8gRW5hYmxlZCBkdXJpbmcgc2h1dGRvd24gb24gU2FmYXJpIHRvIHByZXZlbnQgZnV0dXJlIGFjY2VzcyB0byBJbmRleGVkREIuXG4gICAgICAgIHRoaXMuSWEgPSAhMSwgXG4gICAgICAgIC8vIExpc3Qgb2YgVGltZXJJZHMgdG8gZmFzdC1mb3J3YXJkIGRlbGF5cyBmb3IuXG4gICAgICAgIHRoaXMuQWEgPSBbXSwgXG4gICAgICAgIC8vIEJhY2tvZmYgdGltZXIgdXNlZCB0byBzY2hlZHVsZSByZXRyaWVzIGZvciByZXRyeWFibGUgb3BlcmF0aW9uc1xuICAgICAgICB0aGlzLnVyID0gbmV3IGVvKHRoaXMsIFwiYXN5bmNfcXVldWVfcmV0cnlcIiAvKiBBc3luY1F1ZXVlUmV0cnkgKi8pLCBcbiAgICAgICAgLy8gVmlzaWJpbGl0eSBoYW5kbGVyIHRoYXQgdHJpZ2dlcnMgYW4gaW1tZWRpYXRlIHJldHJ5IG9mIGFsbCByZXRyeWFibGVcbiAgICAgICAgLy8gb3BlcmF0aW9ucy4gTWVhbnQgdG8gc3BlZWQgdXAgcmVjb3Zlcnkgd2hlbiB3ZSByZWdhaW4gZmlsZSBzeXN0ZW0gYWNjZXNzXG4gICAgICAgIC8vIGFmdGVyIHBhZ2UgY29tZXMgaW50byBmb3JlZ3JvdW5kLlxuICAgICAgICB0aGlzLlJhID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdCA9IFpyKCk7XG4gICAgICAgICAgICB0ICYmICQoXCJBc3luY1F1ZXVlXCIsIFwiVmlzaWJpbGl0eSBzdGF0ZSBjaGFuZ2VkIHRvIFwiICsgdC52aXNpYmlsaXR5U3RhdGUpLCB0aGlzLnVyLmVyKCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHQgPSBacigpO1xuICAgICAgICB0ICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdC5hZGRFdmVudExpc3RlbmVyICYmIHQuYWRkRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgdGhpcy5SYSk7XG4gICAgfVxuICAgIGdldCBpc1NodXR0aW5nRG93bigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueWE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBuZXcgb3BlcmF0aW9uIHRvIHRoZSBxdWV1ZSB3aXRob3V0IHdhaXRpbmcgZm9yIGl0IHRvIGNvbXBsZXRlIChpLmUuXG4gICAgICogd2UgaWdub3JlIHRoZSBQcm9taXNlIHJlc3VsdCkuXG4gICAgICovICAgIGVucXVldWVBbmRGb3JnZXQodCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgIHRoaXMuZW5xdWV1ZSh0KTtcbiAgICB9XG4gICAgZW5xdWV1ZUFuZEZvcmdldEV2ZW5XaGlsZVJlc3RyaWN0ZWQodCkge1xuICAgICAgICB0aGlzLlBhKCksIFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgIHRoaXMuYmEodCk7XG4gICAgfVxuICAgIGVudGVyUmVzdHJpY3RlZE1vZGUodCkge1xuICAgICAgICBpZiAoIXRoaXMueWEpIHtcbiAgICAgICAgICAgIHRoaXMueWEgPSAhMCwgdGhpcy5JYSA9IHQgfHwgITE7XG4gICAgICAgICAgICBjb25zdCBlID0gWnIoKTtcbiAgICAgICAgICAgIGUgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgJiYgZS5yZW1vdmVFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB0aGlzLlJhKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbnF1ZXVlKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuUGEoKSwgdGhpcy55YSkgXG4gICAgICAgIC8vIFJldHVybiBhIFByb21pc2Ugd2hpY2ggbmV2ZXIgcmVzb2x2ZXMuXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoKCkgPT4ge30pKTtcbiAgICAgICAgLy8gQ3JlYXRlIGEgZGVmZXJyZWQgUHJvbWlzZSB0aGF0IHdlIGNhbiByZXR1cm4gdG8gdGhlIGNhbGxlZS4gVGhpc1xuICAgICAgICAvLyBhbGxvd3MgdXMgdG8gcmV0dXJuIGEgXCJoYW5naW5nIFByb21pc2VcIiBvbmx5IHRvIHRoZSBjYWxsZWUgYW5kIHN0aWxsXG4gICAgICAgIC8vIGFkdmFuY2UgdGhlIHF1ZXVlIGV2ZW4gd2hlbiB0aGUgb3BlcmF0aW9uIGlzIG5vdCBydW4uXG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBRO1xuICAgICAgICByZXR1cm4gdGhpcy5iYSgoKCkgPT4gdGhpcy55YSAmJiB0aGlzLklhID8gUHJvbWlzZS5yZXNvbHZlKCkgOiAodCgpLnRoZW4oZS5yZXNvbHZlLCBlLnJlamVjdCksIFxuICAgICAgICBlLnByb21pc2UpKSkudGhlbigoKCkgPT4gZS5wcm9taXNlKSk7XG4gICAgfVxuICAgIGVucXVldWVSZXRyeWFibGUodCkge1xuICAgICAgICB0aGlzLmVucXVldWVBbmRGb3JnZXQoKCgpID0+ICh0aGlzLmdhLnB1c2godCksIHRoaXMudmEoKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUnVucyB0aGUgbmV4dCBvcGVyYXRpb24gZnJvbSB0aGUgcmV0cnlhYmxlIHF1ZXVlLiBJZiB0aGUgb3BlcmF0aW9uIGZhaWxzLFxuICAgICAqIHJlc2NoZWR1bGVzIHdpdGggYmFja29mZi5cbiAgICAgKi8gICAgYXN5bmMgdmEoKSB7XG4gICAgICAgIGlmICgwICE9PSB0aGlzLmdhLmxlbmd0aCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmdhWzBdKCksIHRoaXMuZ2Euc2hpZnQoKSwgdGhpcy51ci5yZXNldCgpO1xuICAgICAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgICAgIGlmICghWHModCkpIHRocm93IHQ7XG4gLy8gRmFpbHVyZSB3aWxsIGJlIGhhbmRsZWQgYnkgQXN5bmNRdWV1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiQXN5bmNRdWV1ZVwiLCBcIk9wZXJhdGlvbiBmYWlsZWQgd2l0aCByZXRyeWFibGUgZXJyb3I6IFwiICsgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmdhLmxlbmd0aCA+IDAgJiYgXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSBhcmUgYWRkaXRpb25hbCBvcGVyYXRpb25zLCB3ZSByZS1zY2hlZHVsZSBgcmV0cnlOZXh0T3AoKWAuXG4gICAgICAgICAgICAvLyBUaGlzIGlzIG5lY2Vzc2FyeSB0byBydW4gcmV0cnlhYmxlIG9wZXJhdGlvbnMgdGhhdCBmYWlsZWQgZHVyaW5nXG4gICAgICAgICAgICAvLyB0aGVpciBpbml0aWFsIGF0dGVtcHQgc2luY2Ugd2UgZG9uJ3Qga25vdyB3aGV0aGVyIHRoZXkgYXJlIGFscmVhZHlcbiAgICAgICAgICAgIC8vIGVucXVldWVkLiBJZiwgZm9yIGV4YW1wbGUsIGBvcDFgLCBgb3AyYCwgYG9wM2AgYXJlIGVucXVldWVkIGFuZCBgb3AxYFxuICAgICAgICAgICAgLy8gbmVlZHMgdG8gIGJlIHJlLXJ1biwgd2Ugd2lsbCBydW4gYG9wMWAsIGBvcDFgLCBgb3AyYCB1c2luZyB0aGVcbiAgICAgICAgICAgIC8vIGFscmVhZHkgZW5xdWV1ZWQgY2FsbHMgdG8gYHJldHJ5TmV4dE9wKClgLiBgb3AzKClgIHdpbGwgdGhlbiBydW4gaW4gdGhlXG4gICAgICAgICAgICAvLyBjYWxsIHNjaGVkdWxlZCBoZXJlLlxuICAgICAgICAgICAgLy8gU2luY2UgYGJhY2tvZmZBbmRSdW4oKWAgY2FuY2VscyBhbiBleGlzdGluZyBiYWNrb2ZmIGFuZCBzY2hlZHVsZXMgYVxuICAgICAgICAgICAgLy8gbmV3IGJhY2tvZmYgb24gZXZlcnkgY2FsbCwgdGhlcmUgaXMgb25seSBldmVyIGEgc2luZ2xlIGFkZGl0aW9uYWxcbiAgICAgICAgICAgIC8vIG9wZXJhdGlvbiBpbiB0aGUgcXVldWUuXG4gICAgICAgICAgICB0aGlzLnVyLlppKCgoKSA9PiB0aGlzLnZhKCkpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBiYSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLm1hLnRoZW4oKCgpID0+ICh0aGlzLkVhID0gITAsIHQoKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLlRhID0gdCwgdGhpcy5FYSA9ICExO1xuICAgICAgICAgICAgY29uc3QgZSA9IFxuICAgICAgICAgICAgLyoqXG4gKiBDaHJvbWUgaW5jbHVkZXMgRXJyb3IubWVzc2FnZSBpbiBFcnJvci5zdGFjay4gT3RoZXIgYnJvd3NlcnMgZG8gbm90LlxuICogVGhpcyByZXR1cm5zIGV4cGVjdGVkIG91dHB1dCBvZiBtZXNzYWdlICsgc3RhY2sgd2hlbiBhdmFpbGFibGUuXG4gKiBAcGFyYW0gZXJyb3IgLSBFcnJvciBvciBGaXJlc3RvcmVFcnJvclxuICovXG4gICAgICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgbGV0IGUgPSB0Lm1lc3NhZ2UgfHwgXCJcIjtcbiAgICAgICAgICAgICAgICB0LnN0YWNrICYmIChlID0gdC5zdGFjay5pbmNsdWRlcyh0Lm1lc3NhZ2UpID8gdC5zdGFjayA6IHQubWVzc2FnZSArIFwiXFxuXCIgKyB0LnN0YWNrKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovICh0KTtcbiAgICAgICAgICAgIC8vIFJlLXRocm93IHRoZSBlcnJvciBzbyB0aGF0IHRoaXMudGFpbCBiZWNvbWVzIGEgcmVqZWN0ZWQgUHJvbWlzZSBhbmRcbiAgICAgICAgICAgIC8vIGFsbCBmdXJ0aGVyIGF0dGVtcHRzIHRvIGNoYWluICh2aWEgLnRoZW4pIHdpbGwganVzdCBzaG9ydC1jaXJjdWl0XG4gICAgICAgICAgICAvLyBhbmQgcmV0dXJuIHRoZSByZWplY3RlZCBQcm9taXNlLlxuICAgICAgICAgICAgdGhyb3cgRihcIklOVEVSTkFMIFVOSEFORExFRCBFUlJPUjogXCIsIGUpLCB0O1xuICAgICAgICB9KSkudGhlbigodCA9PiAodGhpcy5FYSA9ICExLCB0KSkpKSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5tYSA9IGUsIGU7XG4gICAgfVxuICAgIGVucXVldWVBZnRlckRlbGF5KHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5QYSgpLCBcbiAgICAgICAgLy8gRmFzdC1mb3J3YXJkIGRlbGF5cyBmb3IgdGltZXJJZHMgdGhhdCBoYXZlIGJlZW4gb3ZlcnJpZGVuLlxuICAgICAgICB0aGlzLkFhLmluZGV4T2YodCkgPiAtMSAmJiAoZSA9IDApO1xuICAgICAgICBjb25zdCBzID0gRm8uY3JlYXRlQW5kU2NoZWR1bGUodGhpcywgdCwgZSwgbiwgKHQgPT4gdGhpcy5WYSh0KSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5wYS5wdXNoKHMpLCBzO1xuICAgIH1cbiAgICBQYSgpIHtcbiAgICAgICAgdGhpcy5UYSAmJiBMKCk7XG4gICAgfVxuICAgIHZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MoKSB7fVxuICAgIC8qKlxuICAgICAqIFdhaXRzIHVudGlsIGFsbCBjdXJyZW50bHkgcXVldWVkIHRhc2tzIGFyZSBmaW5pc2hlZCBleGVjdXRpbmcuIERlbGF5ZWRcbiAgICAgKiBvcGVyYXRpb25zIGFyZSBub3QgcnVuLlxuICAgICAqLyAgICBhc3luYyBTYSgpIHtcbiAgICAgICAgLy8gT3BlcmF0aW9ucyBpbiB0aGUgcXVldWUgcHJpb3IgdG8gZHJhaW5pbmcgbWF5IGhhdmUgZW5xdWV1ZWQgYWRkaXRpb25hbFxuICAgICAgICAvLyBvcGVyYXRpb25zLiBLZWVwIGRyYWluaW5nIHRoZSBxdWV1ZSB1bnRpbCB0aGUgdGFpbCBpcyBubyBsb25nZXIgYWR2YW5jZWQsXG4gICAgICAgIC8vIHdoaWNoIGluZGljYXRlcyB0aGF0IG5vIG1vcmUgbmV3IG9wZXJhdGlvbnMgd2VyZSBlbnF1ZXVlZCBhbmQgdGhhdCBhbGxcbiAgICAgICAgLy8gb3BlcmF0aW9ucyB3ZXJlIGV4ZWN1dGVkLlxuICAgICAgICBsZXQgdDtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgdCA9IHRoaXMubWEsIGF3YWl0IHQ7XG4gICAgICAgIH0gd2hpbGUgKHQgIT09IHRoaXMubWEpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3IgVGVzdHM6IERldGVybWluZSBpZiBhIGRlbGF5ZWQgb3BlcmF0aW9uIHdpdGggYSBwYXJ0aWN1bGFyIFRpbWVySWRcbiAgICAgKiBleGlzdHMuXG4gICAgICovICAgIERhKHQpIHtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMucGEpIGlmIChlLnRpbWVySWQgPT09IHQpIHJldHVybiAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3IgVGVzdHM6IFJ1bnMgc29tZSBvciBhbGwgZGVsYXllZCBvcGVyYXRpb25zIGVhcmx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGxhc3RUaW1lcklkIC0gRGVsYXllZCBvcGVyYXRpb25zIHVwIHRvIGFuZCBpbmNsdWRpbmcgdGhpcyBUaW1lcklkXG4gICAgICogd2lsbCBiZSBkcmFpbmVkLiBQYXNzIFRpbWVySWQuQWxsIHRvIHJ1biBhbGwgZGVsYXllZCBvcGVyYXRpb25zLlxuICAgICAqIEByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIG9uY2UgYWxsIG9wZXJhdGlvbnMgaGF2ZSBiZWVuIHJ1bi5cbiAgICAgKi8gICAgQ2EodCkge1xuICAgICAgICAvLyBOb3RlIHRoYXQgZHJhaW5pbmcgbWF5IGdlbmVyYXRlIG1vcmUgZGVsYXllZCBvcHMsIHNvIHdlIGRvIHRoYXQgZmlyc3QuXG4gICAgICAgIHJldHVybiB0aGlzLlNhKCkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgLy8gUnVuIG9wcyBpbiB0aGUgc2FtZSBvcmRlciB0aGV5J2QgcnVuIGlmIHRoZXkgcmFuIG5hdHVyYWxseS5cbiAgICAgICAgICAgIHRoaXMucGEuc29ydCgoKHQsIGUpID0+IHQudGFyZ2V0VGltZU1zIC0gZS50YXJnZXRUaW1lTXMpKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLnBhKSBpZiAoZS5za2lwRGVsYXkoKSwgXCJhbGxcIiAvKiBBbGwgKi8gIT09IHQgJiYgZS50aW1lcklkID09PSB0KSBicmVhaztcbiAgICAgICAgICAgIHJldHVybiB0aGlzLlNhKCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9yIFRlc3RzOiBTa2lwIGFsbCBzdWJzZXF1ZW50IGRlbGF5cyBmb3IgYSB0aW1lciBpZC5cbiAgICAgKi8gICAgTmEodCkge1xuICAgICAgICB0aGlzLkFhLnB1c2godCk7XG4gICAgfVxuICAgIC8qKiBDYWxsZWQgb25jZSBhIERlbGF5ZWRPcGVyYXRpb24gaXMgcnVuIG9yIGNhbmNlbGVkLiAqLyAgICBWYSh0KSB7XG4gICAgICAgIC8vIE5PVEU6IGluZGV4T2YgLyBzbGljZSBhcmUgTyhuKSwgYnV0IGRlbGF5ZWRPcGVyYXRpb25zIGlzIGV4cGVjdGVkIHRvIGJlIHNtYWxsLlxuICAgICAgICBjb25zdCBlID0gdGhpcy5wYS5pbmRleE9mKHQpO1xuICAgICAgICB0aGlzLnBhLnNwbGljZShlLCAxKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHhjKHQpIHtcbiAgICAvKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBvYmogaXMgYW4gb2JqZWN0IGFuZCBjb250YWlucyBhdCBsZWFzdCBvbmUgb2YgdGhlIHNwZWNpZmllZFxuICogbWV0aG9kcy5cbiAqL1xuICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGlmIChcIm9iamVjdFwiICE9IHR5cGVvZiB0IHx8IG51bGwgPT09IHQpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgbiA9IHQ7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSBpZiAodCBpbiBuICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2Ygblt0XSkgcmV0dXJuICEwO1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgLyoqXG4gKiBSZXByZXNlbnRzIHRoZSB0YXNrIG9mIGxvYWRpbmcgYSBGaXJlc3RvcmUgYnVuZGxlLiBJdCBwcm92aWRlcyBwcm9ncmVzcyBvZiBidW5kbGVcbiAqIGxvYWRpbmcsIGFzIHdlbGwgYXMgdGFzayBjb21wbGV0aW9uIGFuZCBlcnJvciBldmVudHMuXG4gKlxuICogVGhlIEFQSSBpcyBjb21wYXRpYmxlIHdpdGggYFByb21pc2U8TG9hZEJ1bmRsZVRhc2tQcm9ncmVzcz5gLlxuICovICh0LCBbIFwibmV4dFwiLCBcImVycm9yXCIsIFwiY29tcGxldGVcIiBdKTtcbn1cblxuY2xhc3MgJGMge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLl9wcm9ncmVzc09ic2VydmVyID0ge30sIHRoaXMuX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIgPSBuZXcgUSwgdGhpcy5fbGFzdFByb2dyZXNzID0ge1xuICAgICAgICAgICAgdGFza1N0YXRlOiBcIlJ1bm5pbmdcIixcbiAgICAgICAgICAgIHRvdGFsQnl0ZXM6IDAsXG4gICAgICAgICAgICB0b3RhbERvY3VtZW50czogMCxcbiAgICAgICAgICAgIGJ5dGVzTG9hZGVkOiAwLFxuICAgICAgICAgICAgZG9jdW1lbnRzTG9hZGVkOiAwXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBmdW5jdGlvbnMgdG8gbGlzdGVuIHRvIGJ1bmRsZSBsb2FkaW5nIHByb2dyZXNzIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0gbmV4dCAtIENhbGxlZCB3aGVuIHRoZXJlIGlzIGEgcHJvZ3Jlc3MgdXBkYXRlIGZyb20gYnVuZGxlIGxvYWRpbmcuIFR5cGljYWxseSBgbmV4dGAgY2FsbHMgb2NjdXJcbiAgICAgKiAgIGVhY2ggdGltZSBhIEZpcmVzdG9yZSBkb2N1bWVudCBpcyBsb2FkZWQgZnJvbSB0aGUgYnVuZGxlLlxuICAgICAqIEBwYXJhbSBlcnJvciAtIENhbGxlZCB3aGVuIGFuIGVycm9yIG9jY3VycyBkdXJpbmcgYnVuZGxlIGxvYWRpbmcuIFRoZSB0YXNrIGFib3J0cyBhZnRlciByZXBvcnRpbmcgdGhlXG4gICAgICogICBlcnJvciwgYW5kIHRoZXJlIHNob3VsZCBiZSBubyBtb3JlIHVwZGF0ZXMgYWZ0ZXIgdGhpcy5cbiAgICAgKiBAcGFyYW0gY29tcGxldGUgLSBDYWxsZWQgd2hlbiB0aGUgbG9hZGluZyB0YXNrIGlzIGNvbXBsZXRlLlxuICAgICAqLyAgICBvblByb2dyZXNzKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlciA9IHtcbiAgICAgICAgICAgIG5leHQ6IHQsXG4gICAgICAgICAgICBlcnJvcjogZSxcbiAgICAgICAgICAgIGNvbXBsZXRlOiBuXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEltcGxlbWVudHMgdGhlIGBQcm9taXNlPExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3M+LmNhdGNoYCBpbnRlcmZhY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb25SZWplY3RlZCAtIENhbGxlZCB3aGVuIGFuIGVycm9yIG9jY3VycyBkdXJpbmcgYnVuZGxlIGxvYWRpbmcuXG4gICAgICovICAgIGNhdGNoKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIucHJvbWlzZS5jYXRjaCh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW1wbGVtZW50cyB0aGUgYFByb21pc2U8TG9hZEJ1bmRsZVRhc2tQcm9ncmVzcz4udGhlbmAgaW50ZXJmYWNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9uRnVsZmlsbGVkIC0gQ2FsbGVkIG9uIHRoZSBjb21wbGV0aW9uIG9mIHRoZSBsb2FkaW5nIHRhc2sgd2l0aCBhIGZpbmFsIGBMb2FkQnVuZGxlVGFza1Byb2dyZXNzYCB1cGRhdGUuXG4gICAgICogICBUaGUgdXBkYXRlIHdpbGwgYWx3YXlzIGhhdmUgaXRzIGB0YXNrU3RhdGVgIHNldCB0byBgXCJTdWNjZXNzXCJgLlxuICAgICAqIEBwYXJhbSBvblJlamVjdGVkIC0gQ2FsbGVkIHdoZW4gYW4gZXJyb3Igb2NjdXJzIGR1cmluZyBidW5kbGUgbG9hZGluZy5cbiAgICAgKi8gICAgdGhlbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90YXNrQ29tcGxldGlvblJlc29sdmVyLnByb21pc2UudGhlbih0LCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTm90aWZpZXMgYWxsIG9ic2VydmVycyB0aGF0IGJ1bmRsZSBsb2FkaW5nIGhhcyBjb21wbGV0ZWQsIHdpdGggYSBwcm92aWRlZFxuICAgICAqIGBMb2FkQnVuZGxlVGFza1Byb2dyZXNzYCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqLyAgICBfY29tcGxldGVXaXRoKHQpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlUHJvZ3Jlc3ModCksIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIuY29tcGxldGUgJiYgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5jb21wbGV0ZSgpLCBcbiAgICAgICAgdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlci5yZXNvbHZlKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBOb3RpZmllcyBhbGwgb2JzZXJ2ZXJzIHRoYXQgYnVuZGxlIGxvYWRpbmcgaGFzIGZhaWxlZCwgd2l0aCBhIHByb3ZpZGVkXG4gICAgICogYEVycm9yYCBhcyB0aGUgcmVhc29uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi8gICAgX2ZhaWxXaXRoKHQpIHtcbiAgICAgICAgdGhpcy5fbGFzdFByb2dyZXNzLnRhc2tTdGF0ZSA9IFwiRXJyb3JcIiwgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5uZXh0ICYmIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIubmV4dCh0aGlzLl9sYXN0UHJvZ3Jlc3MpLCBcbiAgICAgICAgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5lcnJvciAmJiB0aGlzLl9wcm9ncmVzc09ic2VydmVyLmVycm9yKHQpLCB0aGlzLl90YXNrQ29tcGxldGlvblJlc29sdmVyLnJlamVjdCh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTm90aWZpZXMgYSBwcm9ncmVzcyB1cGRhdGUgb2YgbG9hZGluZyBhIGJ1bmRsZS5cbiAgICAgKiBAcGFyYW0gcHJvZ3Jlc3MgLSBUaGUgbmV3IHByb2dyZXNzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi8gICAgX3VwZGF0ZVByb2dyZXNzKHQpIHtcbiAgICAgICAgdGhpcy5fbGFzdFByb2dyZXNzID0gdCwgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5uZXh0ICYmIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIubmV4dCh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogRE9NRXhjZXB0aW9uIGVycm9yIGNvZGUgY29uc3RhbnRzLiAqLyBjb25zdCBGYyA9IC0xO1xuXG4vKipcbiAqIFRoZSBDbG91ZCBGaXJlc3RvcmUgc2VydmljZSBpbnRlcmZhY2UuXG4gKlxuICogRG8gbm90IGNhbGwgdGhpcyBjb25zdHJ1Y3RvciBkaXJlY3RseS4gSW5zdGVhZCwgdXNlIHtAbGluayBnZXRGaXJlc3RvcmV9LlxuICovXG5jbGFzcyBPYyBleHRlbmRzIEFjIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIodCwgZSwgbiksIFxuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciBpdCdzIGEge0BsaW5rIEZpcmVzdG9yZX0gb3IgRmlyZXN0b3JlIExpdGUgaW5zdGFuY2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcImZpcmVzdG9yZVwiLCB0aGlzLl9xdWV1ZSA9IG5ldyBrYywgdGhpcy5fcGVyc2lzdGVuY2VLZXkgPSBcIm5hbWVcIiBpbiB0ID8gdC5uYW1lIDogXCJbREVGQVVMVF1cIjtcbiAgICB9XG4gICAgX3Rlcm1pbmF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpcmVzdG9yZUNsaWVudCB8fCBcbiAgICAgICAgLy8gVGhlIGNsaWVudCBtdXN0IGJlIGluaXRpYWxpemVkIHRvIGVuc3VyZSB0aGF0IGFsbCBzdWJzZXF1ZW50IEFQSVxuICAgICAgICAvLyB1c2FnZSB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuICAgICAgICBVYyh0aGlzKSwgdGhpcy5fZmlyZXN0b3JlQ2xpZW50LnRlcm1pbmF0ZSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbml0aWFsaXplcyBhIG5ldyBpbnN0YW5jZSBvZiB7QGxpbmsgRmlyZXN0b3JlfSB3aXRoIHRoZSBwcm92aWRlZCBzZXR0aW5ncy5cbiAqIENhbiBvbmx5IGJlIGNhbGxlZCBiZWZvcmUgYW55IG90aGVyIGZ1bmN0aW9uLCBpbmNsdWRpbmdcbiAqIHtAbGluayBnZXRGaXJlc3RvcmV9LiBJZiB0aGUgY3VzdG9tIHNldHRpbmdzIGFyZSBlbXB0eSwgdGhpcyBmdW5jdGlvbiBpc1xuICogZXF1aXZhbGVudCB0byBjYWxsaW5nIHtAbGluayBnZXRGaXJlc3RvcmV9LlxuICpcbiAqIEBwYXJhbSBhcHAgLSBUaGUge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IHdpdGggd2hpY2ggdGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHdpbGxcbiAqIGJlIGFzc29jaWF0ZWQuXG4gKiBAcGFyYW0gc2V0dGluZ3MgLSBBIHNldHRpbmdzIG9iamVjdCB0byBjb25maWd1cmUgdGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlLlxuICogQHJldHVybnMgQSBuZXdseSBpbml0aWFsaXplZCB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZS5cbiAqLyBmdW5jdGlvbiBNYyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IF9nZXRQcm92aWRlcih0LCBcImZpcmVzdG9yZVwiKTtcbiAgICBpZiAobi5pc0luaXRpYWxpemVkKCkpIHtcbiAgICAgICAgY29uc3QgdCA9IG4uZ2V0SW1tZWRpYXRlKCksIHMgPSBuLmdldE9wdGlvbnMoKTtcbiAgICAgICAgaWYgKGRlZXBFcXVhbChzLCBlKSkgcmV0dXJuIHQ7XG4gICAgICAgIHRocm93IG5ldyBqKEsuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJpbml0aWFsaXplRmlyZXN0b3JlKCkgaGFzIGFscmVhZHkgYmVlbiBjYWxsZWQgd2l0aCBkaWZmZXJlbnQgb3B0aW9ucy4gVG8gYXZvaWQgdGhpcyBlcnJvciwgY2FsbCBpbml0aWFsaXplRmlyZXN0b3JlKCkgd2l0aCB0aGUgc2FtZSBvcHRpb25zIGFzIHdoZW4gaXQgd2FzIG9yaWdpbmFsbHkgY2FsbGVkLCBvciBjYWxsIGdldEZpcmVzdG9yZSgpIHRvIHJldHVybiB0aGUgYWxyZWFkeSBpbml0aWFsaXplZCBpbnN0YW5jZS5cIik7XG4gICAgfVxuICAgIGlmICh2b2lkIDAgIT09IGUuY2FjaGVTaXplQnl0ZXMgJiYgLTEgIT09IGUuY2FjaGVTaXplQnl0ZXMgJiYgZS5jYWNoZVNpemVCeXRlcyA8IDEwNDg1NzYpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJjYWNoZVNpemVCeXRlcyBtdXN0IGJlIGF0IGxlYXN0IDEwNDg1NzZcIik7XG4gICAgcmV0dXJuIG4uaW5pdGlhbGl6ZSh7XG4gICAgICAgIG9wdGlvbnM6IGVcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBleGlzdGluZyB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB0aGF0IGlzIGFzc29jaWF0ZWQgd2l0aCB0aGVcbiAqIHByb3ZpZGVkIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfS4gSWYgbm8gaW5zdGFuY2UgZXhpc3RzLCBpbml0aWFsaXplcyBhIG5ld1xuICogaW5zdGFuY2Ugd2l0aCBkZWZhdWx0IHNldHRpbmdzLlxuICpcbiAqIEBwYXJhbSBhcHAgLSBUaGUge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IGluc3RhbmNlIHRoYXQgdGhlIHJldHVybmVkIHtAbGluayBGaXJlc3RvcmV9XG4gKiBpbnN0YW5jZSBpcyBhc3NvY2lhdGVkIHdpdGguXG4gKiBAcmV0dXJucyBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2Ugb2YgdGhlIHByb3ZpZGVkIGFwcC5cbiAqLyBmdW5jdGlvbiBMYyhlID0gZ2V0QXBwKCkpIHtcbiAgICByZXR1cm4gX2dldFByb3ZpZGVyKGUsIFwiZmlyZXN0b3JlXCIpLmdldEltbWVkaWF0ZSgpO1xufVxuXG4vKipcbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIEJjKHQpIHtcbiAgICByZXR1cm4gdC5fZmlyZXN0b3JlQ2xpZW50IHx8IFVjKHQpLCB0Ll9maXJlc3RvcmVDbGllbnQudmVyaWZ5Tm90VGVybWluYXRlZCgpLCB0Ll9maXJlc3RvcmVDbGllbnQ7XG59XG5cbmZ1bmN0aW9uIFVjKHQpIHtcbiAgICB2YXIgZTtcbiAgICBjb25zdCBuID0gdC5fZnJlZXplU2V0dGluZ3MoKSwgcyA9IGZ1bmN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBmYyh0LCBlLCBuLCBzLmhvc3QsIHMuc3NsLCBzLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcsIHMuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nLCBzLnVzZUZldGNoU3RyZWFtcyk7XG4gICAgfSh0Ll9kYXRhYmFzZUlkLCAobnVsbCA9PT0gKGUgPSB0Ll9hcHApIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUub3B0aW9ucy5hcHBJZCkgfHwgXCJcIiwgdC5fcGVyc2lzdGVuY2VLZXksIG4pO1xuICAgIHQuX2ZpcmVzdG9yZUNsaWVudCA9IG5ldyBXYSh0Ll9hdXRoQ3JlZGVudGlhbHMsIHQuX2FwcENoZWNrQ3JlZGVudGlhbHMsIHQuX3F1ZXVlLCBzKTtcbn1cblxuLyoqXG4gKiBBdHRlbXB0cyB0byBlbmFibGUgcGVyc2lzdGVudCBzdG9yYWdlLCBpZiBwb3NzaWJsZS5cbiAqXG4gKiBNdXN0IGJlIGNhbGxlZCBiZWZvcmUgYW55IG90aGVyIGZ1bmN0aW9ucyAob3RoZXIgdGhhblxuICoge0BsaW5rIGluaXRpYWxpemVGaXJlc3RvcmV9LCB7QGxpbmsgZ2V0RmlyZXN0b3JlfSBvclxuICoge0BsaW5rIGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2V9LlxuICpcbiAqIElmIHRoaXMgZmFpbHMsIGBlbmFibGVJbmRleGVkRGJQZXJzaXN0ZW5jZSgpYCB3aWxsIHJlamVjdCB0aGUgcHJvbWlzZSBpdFxuICogcmV0dXJucy4gTm90ZSB0aGF0IGV2ZW4gYWZ0ZXIgdGhpcyBmYWlsdXJlLCB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2Ugd2lsbFxuICogcmVtYWluIHVzYWJsZSwgaG93ZXZlciBvZmZsaW5lIHBlcnNpc3RlbmNlIHdpbGwgYmUgZGlzYWJsZWQuXG4gKlxuICogVGhlcmUgYXJlIHNldmVyYWwgcmVhc29ucyB3aHkgdGhpcyBjYW4gZmFpbCwgd2hpY2ggY2FuIGJlIGlkZW50aWZpZWQgYnlcbiAqIHRoZSBgY29kZWAgb24gdGhlIGVycm9yLlxuICpcbiAqICAgKiBmYWlsZWQtcHJlY29uZGl0aW9uOiBUaGUgYXBwIGlzIGFscmVhZHkgb3BlbiBpbiBhbm90aGVyIGJyb3dzZXIgdGFiLlxuICogICAqIHVuaW1wbGVtZW50ZWQ6IFRoZSBicm93c2VyIGlzIGluY29tcGF0aWJsZSB3aXRoIHRoZSBvZmZsaW5lXG4gKiAgICAgcGVyc2lzdGVuY2UgaW1wbGVtZW50YXRpb24uXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB0byBlbmFibGUgcGVyc2lzdGVuY2UgZm9yLlxuICogQHBhcmFtIHBlcnNpc3RlbmNlU2V0dGluZ3MgLSBPcHRpb25hbCBzZXR0aW5ncyBvYmplY3QgdG8gY29uZmlndXJlXG4gKiBwZXJzaXN0ZW5jZS5cbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgcmVwcmVzZW50cyBzdWNjZXNzZnVsbHkgZW5hYmxpbmcgcGVyc2lzdGVudCBzdG9yYWdlLlxuICovIGZ1bmN0aW9uIHFjKHQsIGUpIHtcbiAgICBYYyh0ID0gVGModCwgT2MpKTtcbiAgICBjb25zdCBuID0gQmModCksIHMgPSB0Ll9mcmVlemVTZXR0aW5ncygpLCBpID0gbmV3IEJhO1xuICAgIHJldHVybiBqYyhuLCBpLCBuZXcgTWEoaSwgcy5jYWNoZVNpemVCeXRlcywgbnVsbCA9PSBlID8gdm9pZCAwIDogZS5mb3JjZU93bmVyc2hpcCkpO1xufVxuXG4vKipcbiAqIEF0dGVtcHRzIHRvIGVuYWJsZSBtdWx0aS10YWIgcGVyc2lzdGVudCBzdG9yYWdlLCBpZiBwb3NzaWJsZS4gSWYgZW5hYmxlZFxuICogYWNyb3NzIGFsbCB0YWJzLCBhbGwgb3BlcmF0aW9ucyBzaGFyZSBhY2Nlc3MgdG8gbG9jYWwgcGVyc2lzdGVuY2UsIGluY2x1ZGluZ1xuICogc2hhcmVkIGV4ZWN1dGlvbiBvZiBxdWVyaWVzIGFuZCBsYXRlbmN5LWNvbXBlbnNhdGVkIGxvY2FsIGRvY3VtZW50IHVwZGF0ZXNcbiAqIGFjcm9zcyBhbGwgY29ubmVjdGVkIGluc3RhbmNlcy5cbiAqXG4gKiBJZiB0aGlzIGZhaWxzLCBgZW5hYmxlTXVsdGlUYWJJbmRleGVkRGJQZXJzaXN0ZW5jZSgpYCB3aWxsIHJlamVjdCB0aGUgcHJvbWlzZVxuICogaXQgcmV0dXJucy4gTm90ZSB0aGF0IGV2ZW4gYWZ0ZXIgdGhpcyBmYWlsdXJlLCB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2Ugd2lsbFxuICogcmVtYWluIHVzYWJsZSwgaG93ZXZlciBvZmZsaW5lIHBlcnNpc3RlbmNlIHdpbGwgYmUgZGlzYWJsZWQuXG4gKlxuICogVGhlcmUgYXJlIHNldmVyYWwgcmVhc29ucyB3aHkgdGhpcyBjYW4gZmFpbCwgd2hpY2ggY2FuIGJlIGlkZW50aWZpZWQgYnlcbiAqIHRoZSBgY29kZWAgb24gdGhlIGVycm9yLlxuICpcbiAqICAgKiBmYWlsZWQtcHJlY29uZGl0aW9uOiBUaGUgYXBwIGlzIGFscmVhZHkgb3BlbiBpbiBhbm90aGVyIGJyb3dzZXIgdGFiIGFuZFxuICogICAgIG11bHRpLXRhYiBpcyBub3QgZW5hYmxlZC5cbiAqICAgKiB1bmltcGxlbWVudGVkOiBUaGUgYnJvd3NlciBpcyBpbmNvbXBhdGlibGUgd2l0aCB0aGUgb2ZmbGluZVxuICogICAgIHBlcnNpc3RlbmNlIGltcGxlbWVudGF0aW9uLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdG8gZW5hYmxlIHBlcnNpc3RlbmNlIGZvci5cbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgcmVwcmVzZW50cyBzdWNjZXNzZnVsbHkgZW5hYmxpbmcgcGVyc2lzdGVudFxuICogc3RvcmFnZS5cbiAqLyBmdW5jdGlvbiBLYyh0KSB7XG4gICAgWGModCA9IFRjKHQsIE9jKSk7XG4gICAgY29uc3QgZSA9IEJjKHQpLCBuID0gdC5fZnJlZXplU2V0dGluZ3MoKSwgcyA9IG5ldyBCYTtcbiAgICByZXR1cm4gamMoZSwgcywgbmV3IExhKHMsIG4uY2FjaGVTaXplQnl0ZXMpKTtcbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgYm90aCB0aGUgYE9mZmxpbmVDb21wb25lbnRQcm92aWRlcmAgYW5kIGBPbmxpbmVDb21wb25lbnRQcm92aWRlcmAuXG4gKiBJZiB0aGUgb3BlcmF0aW9uIGZhaWxzIHdpdGggYSByZWNvdmVyYWJsZSBlcnJvciAoc2VlXG4gKiBgY2FuUmVjb3ZlckZyb21JbmRleGVkRGJFcnJvcigpYCBiZWxvdyksIHRoZSByZXR1cm5lZCBQcm9taXNlIGlzIHJlamVjdGVkXG4gKiBidXQgdGhlIGNsaWVudCByZW1haW5zIHVzYWJsZS5cbiAqLyBmdW5jdGlvbiBqYyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IG5ldyBRO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgR2EodCwgbiksIGF3YWl0IHphKHQsIGUpLCBzLnJlc29sdmUoKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgaWYgKCFcbiAgICAgICAgICAgIC8qKlxuICogRGVjaWRlcyB3aGV0aGVyIHRoZSBwcm92aWRlZCBlcnJvciBhbGxvd3MgdXMgdG8gZ3JhY2VmdWxseSBkaXNhYmxlXG4gKiBwZXJzaXN0ZW5jZSAoYXMgb3Bwb3NlZCB0byBjcmFzaGluZyB0aGUgY2xpZW50KS5cbiAqL1xuICAgICAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIGlmIChcIkZpcmViYXNlRXJyb3JcIiA9PT0gdC5uYW1lKSByZXR1cm4gdC5jb2RlID09PSBLLkZBSUxFRF9QUkVDT05ESVRJT04gfHwgdC5jb2RlID09PSBLLlVOSU1QTEVNRU5URUQ7XG4gICAgICAgICAgICAgICAgaWYgKFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIERPTUV4Y2VwdGlvbiAmJiB0IGluc3RhbmNlb2YgRE9NRXhjZXB0aW9uKSBcbiAgICAgICAgICAgICAgICAvLyBUaGVyZSBhcmUgYSBmZXcga25vd24gY2lyY3Vtc3RhbmNlcyB3aGVyZSB3ZSBjYW4gb3BlbiBJbmRleGVkRGIgYnV0XG4gICAgICAgICAgICAgICAgLy8gdHJ5aW5nIHRvIHJlYWQvd3JpdGUgd2lsbCBmYWlsIChlLmcuIHF1b3RhIGV4Y2VlZGVkKS4gRm9yXG4gICAgICAgICAgICAgICAgLy8gd2VsbC11bmRlcnN0b29kIGNhc2VzLCB3ZSBhdHRlbXB0IHRvIGRldGVjdCB0aGVzZSBhbmQgdGhlbiBncmFjZWZ1bGx5XG4gICAgICAgICAgICAgICAgLy8gZmFsbCBiYWNrIHRvIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgICAgICAgICAvLyBOT1RFOiBSYXRoZXIgdGhhbiBjb250aW51ZSB0byBhZGQgdG8gdGhpcyBsaXN0LCB3ZSBjb3VsZCBkZWNpZGUgdG9cbiAgICAgICAgICAgICAgICAvLyBhbHdheXMgZmFsbCBiYWNrLCB3aXRoIHRoZSByaXNrIHRoYXQgd2UgbWlnaHQgYWNjaWRlbnRhbGx5IGhpZGUgZXJyb3JzXG4gICAgICAgICAgICAgICAgLy8gcmVwcmVzZW50aW5nIGFjdHVhbCBTREsgYnVncy5cbiAgICAgICAgICAgICAgICAvLyBXaGVuIHRoZSBicm93c2VyIGlzIG91dCBvZiBxdW90YSB3ZSBjb3VsZCBnZXQgZWl0aGVyIHF1b3RhIGV4Y2VlZGVkXG4gICAgICAgICAgICAgICAgLy8gb3IgYW4gYWJvcnRlZCBlcnJvciBkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgZXJyb3IgaGFwcGVuZWQgZHVyaW5nXG4gICAgICAgICAgICAgICAgLy8gc2NoZW1hIG1pZ3JhdGlvbi5cbiAgICAgICAgICAgICAgICByZXR1cm4gMjIgPT09IHQuY29kZSB8fCAyMCA9PT0gdC5jb2RlIHx8IFxuICAgICAgICAgICAgICAgIC8vIEZpcmVmb3ggUHJpdmF0ZSBCcm93c2luZyBtb2RlIGRpc2FibGVzIEluZGV4ZWREYiBhbmQgcmV0dXJuc1xuICAgICAgICAgICAgICAgIC8vIElOVkFMSURfU1RBVEUgZm9yIGFueSB1c2FnZS5cbiAgICAgICAgICAgICAgICAxMSA9PT0gdC5jb2RlO1xuICAgICAgICAgICAgICAgIHJldHVybiAhMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogQ2xlYXJzIHRoZSBwZXJzaXN0ZW50IHN0b3JhZ2UuIFRoaXMgaW5jbHVkZXMgcGVuZGluZyB3cml0ZXMgYW5kIGNhY2hlZFxuICogZG9jdW1lbnRzLlxuICpcbiAqIE11c3QgYmUgY2FsbGVkIHdoaWxlIHRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSBpcyBub3Qgc3RhcnRlZCAoYWZ0ZXIgdGhlIGFwcCBpc1xuICogdGVybWluYXRlZCBvciB3aGVuIHRoZSBhcHAgaXMgZmlyc3QgaW5pdGlhbGl6ZWQpLiBPbiBzdGFydHVwLCB0aGlzIGZ1bmN0aW9uXG4gKiBtdXN0IGJlIGNhbGxlZCBiZWZvcmUgb3RoZXIgZnVuY3Rpb25zIChvdGhlciB0aGFuIHtAbGlua1xuICogaW5pdGlhbGl6ZUZpcmVzdG9yZX0gb3Ige0BsaW5rIGdldEZpcmVzdG9yZX0pKS4gSWYgdGhlIHtAbGluayBGaXJlc3RvcmV9XG4gKiBpbnN0YW5jZSBpcyBzdGlsbCBydW5uaW5nLCB0aGUgcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkIHdpdGggdGhlIGVycm9yIGNvZGVcbiAqIG9mIGBmYWlsZWQtcHJlY29uZGl0aW9uYC5cbiAqXG4gKiBOb3RlOiBgY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZSgpYCBpcyBwcmltYXJpbHkgaW50ZW5kZWQgdG8gaGVscCB3cml0ZVxuICogcmVsaWFibGUgdGVzdHMgdGhhdCB1c2UgQ2xvdWQgRmlyZXN0b3JlLiBJdCB1c2VzIGFuIGVmZmljaWVudCBtZWNoYW5pc20gZm9yXG4gKiBkcm9wcGluZyBleGlzdGluZyBkYXRhIGJ1dCBkb2VzIG5vdCBhdHRlbXB0IHRvIHNlY3VyZWx5IG92ZXJ3cml0ZSBvclxuICogb3RoZXJ3aXNlIG1ha2UgY2FjaGVkIGRhdGEgdW5yZWNvdmVyYWJsZS4gRm9yIGFwcGxpY2F0aW9ucyB0aGF0IGFyZSBzZW5zaXRpdmVcbiAqIHRvIHRoZSBkaXNjbG9zdXJlIG9mIGNhY2hlZCBkYXRhIGluIGJldHdlZW4gdXNlciBzZXNzaW9ucywgd2Ugc3Ryb25nbHlcbiAqIHJlY29tbWVuZCBub3QgZW5hYmxpbmcgcGVyc2lzdGVuY2UgYXQgYWxsLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdG8gY2xlYXIgcGVyc2lzdGVuY2UgZm9yLlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCB3aGVuIHRoZSBwZXJzaXN0ZW50IHN0b3JhZ2UgaXNcbiAqIGNsZWFyZWQuIE90aGVyd2lzZSwgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQgd2l0aCBhbiBlcnJvci5cbiAqLyAodCkpIHRocm93IHQ7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJFcnJvciBlbmFibGluZyBvZmZsaW5lIHBlcnNpc3RlbmNlLiBGYWxsaW5nIGJhY2sgdG8gcGVyc2lzdGVuY2UgZGlzYWJsZWQ6IFwiICsgdCksIFxuICAgICAgICAgICAgcy5yZWplY3QodCk7XG4gICAgICAgIH1cbiAgICB9KSkudGhlbigoKCkgPT4gcy5wcm9taXNlKSk7XG59XG5cbmZ1bmN0aW9uIFFjKHQpIHtcbiAgICBpZiAodC5faW5pdGlhbGl6ZWQgJiYgIXQuX3Rlcm1pbmF0ZWQpIHRocm93IG5ldyBqKEsuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJQZXJzaXN0ZW5jZSBjYW4gb25seSBiZSBjbGVhcmVkIGJlZm9yZSBhIEZpcmVzdG9yZSBpbnN0YW5jZSBpcyBpbml0aWFsaXplZCBvciBhZnRlciBpdCBpcyB0ZXJtaW5hdGVkLlwiKTtcbiAgICBjb25zdCBlID0gbmV3IFE7XG4gICAgcmV0dXJuIHQuX3F1ZXVlLmVucXVldWVBbmRGb3JnZXRFdmVuV2hpbGVSZXN0cmljdGVkKChhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBhc3luYyBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFIcy5idCgpKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQgKyBcIm1haW5cIjtcbiAgICAgICAgICAgICAgICBhd2FpdCBIcy5kZWxldGUoZSk7XG4gICAgICAgICAgICB9KG9yKHQuX2RhdGFiYXNlSWQsIHQuX3BlcnNpc3RlbmNlS2V5KSksIGUucmVzb2x2ZSgpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICBlLnJlamVjdCh0KTtcbiAgICAgICAgfVxuICAgIH0pKSwgZS5wcm9taXNlO1xufVxuXG4vKipcbiAqIFdhaXRzIHVudGlsIGFsbCBjdXJyZW50bHkgcGVuZGluZyB3cml0ZXMgZm9yIHRoZSBhY3RpdmUgdXNlciBoYXZlIGJlZW5cbiAqIGFja25vd2xlZGdlZCBieSB0aGUgYmFja2VuZC5cbiAqXG4gKiBUaGUgcmV0dXJuZWQgcHJvbWlzZSByZXNvbHZlcyBpbW1lZGlhdGVseSBpZiB0aGVyZSBhcmUgbm8gb3V0c3RhbmRpbmcgd3JpdGVzLlxuICogT3RoZXJ3aXNlLCB0aGUgcHJvbWlzZSB3YWl0cyBmb3IgYWxsIHByZXZpb3VzbHkgaXNzdWVkIHdyaXRlcyAoaW5jbHVkaW5nXG4gKiB0aG9zZSB3cml0dGVuIGluIGEgcHJldmlvdXMgYXBwIHNlc3Npb24pLCBidXQgaXQgZG9lcyBub3Qgd2FpdCBmb3Igd3JpdGVzXG4gKiB0aGF0IHdlcmUgYWRkZWQgYWZ0ZXIgdGhlIGZ1bmN0aW9uIGlzIGNhbGxlZC4gSWYgeW91IHdhbnQgdG8gd2FpdCBmb3JcbiAqIGFkZGl0aW9uYWwgd3JpdGVzLCBjYWxsIGB3YWl0Rm9yUGVuZGluZ1dyaXRlcygpYCBhZ2Fpbi5cbiAqXG4gKiBBbnkgb3V0c3RhbmRpbmcgYHdhaXRGb3JQZW5kaW5nV3JpdGVzKClgIHByb21pc2VzIGFyZSByZWplY3RlZCBkdXJpbmcgdXNlclxuICogY2hhbmdlcy5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB3aGljaCByZXNvbHZlcyB3aGVuIGFsbCBjdXJyZW50bHkgcGVuZGluZyB3cml0ZXMgaGF2ZSBiZWVuXG4gKiBhY2tub3dsZWRnZWQgYnkgdGhlIGJhY2tlbmQuXG4gKi8gZnVuY3Rpb24gV2ModCkge1xuICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgUTtcbiAgICAgICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiB3YShhd2FpdCB0Yyh0KSwgZSkpKSwgZS5wcm9taXNlO1xuICAgIH0oQmModCA9IFRjKHQsIE9jKSkpO1xufVxuXG4vKipcbiAqIFJlLWVuYWJsZXMgdXNlIG9mIHRoZSBuZXR3b3JrIGZvciB0aGlzIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIGFmdGVyIGEgcHJpb3JcbiAqIGNhbGwgdG8ge0BsaW5rIGRpc2FibGVOZXR3b3JrfS5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IGlzIHJlc29sdmVkIG9uY2UgdGhlIG5ldHdvcmsgaGFzIGJlZW4gZW5hYmxlZC5cbiAqLyBmdW5jdGlvbiBHYyh0KSB7XG4gICAgcmV0dXJuIG5jKEJjKHQgPSBUYyh0LCBPYykpKTtcbn1cblxuLyoqXG4gKiBEaXNhYmxlcyBuZXR3b3JrIHVzYWdlIGZvciB0aGlzIGluc3RhbmNlLiBJdCBjYW4gYmUgcmUtZW5hYmxlZCB2aWEge0BsaW5rXG4gKiBlbmFibGVOZXR3b3JrfS4gV2hpbGUgdGhlIG5ldHdvcmsgaXMgZGlzYWJsZWQsIGFueSBzbmFwc2hvdCBsaXN0ZW5lcnMsXG4gKiBgZ2V0RG9jKClgIG9yIGBnZXREb2NzKClgIGNhbGxzIHdpbGwgcmV0dXJuIHJlc3VsdHMgZnJvbSBjYWNoZSwgYW5kIGFueSB3cml0ZVxuICogb3BlcmF0aW9ucyB3aWxsIGJlIHF1ZXVlZCB1bnRpbCB0aGUgbmV0d29yayBpcyByZXN0b3JlZC5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IGlzIHJlc29sdmVkIG9uY2UgdGhlIG5ldHdvcmsgaGFzIGJlZW4gZGlzYWJsZWQuXG4gKi8gZnVuY3Rpb24gemModCkge1xuICAgIHJldHVybiBzYyhCYyh0ID0gVGModCwgT2MpKSk7XG59XG5cbi8qKlxuICogVGVybWluYXRlcyB0aGUgcHJvdmlkZWQge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UuXG4gKlxuICogQWZ0ZXIgY2FsbGluZyBgdGVybWluYXRlKClgIG9ubHkgdGhlIGBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlKClgIGZ1bmN0aW9uXG4gKiBtYXkgYmUgdXNlZC4gQW55IG90aGVyIGZ1bmN0aW9uIHdpbGwgdGhyb3cgYSBgRmlyZXN0b3JlRXJyb3JgLlxuICpcbiAqIFRvIHJlc3RhcnQgYWZ0ZXIgdGVybWluYXRpb24sIGNyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiBGaXJlYmFzZUZpcmVzdG9yZSB3aXRoXG4gKiB7QGxpbmsgZ2V0RmlyZXN0b3JlfS5cbiAqXG4gKiBUZXJtaW5hdGlvbiBkb2VzIG5vdCBjYW5jZWwgYW55IHBlbmRpbmcgd3JpdGVzLCBhbmQgYW55IHByb21pc2VzIHRoYXQgYXJlXG4gKiBhd2FpdGluZyBhIHJlc3BvbnNlIGZyb20gdGhlIHNlcnZlciB3aWxsIG5vdCBiZSByZXNvbHZlZC4gSWYgeW91IGhhdmVcbiAqIHBlcnNpc3RlbmNlIGVuYWJsZWQsIHRoZSBuZXh0IHRpbWUgeW91IHN0YXJ0IHRoaXMgaW5zdGFuY2UsIGl0IHdpbGwgcmVzdW1lXG4gKiBzZW5kaW5nIHRoZXNlIHdyaXRlcyB0byB0aGUgc2VydmVyLlxuICpcbiAqIE5vdGU6IFVuZGVyIG5vcm1hbCBjaXJjdW1zdGFuY2VzLCBjYWxsaW5nIGB0ZXJtaW5hdGUoKWAgaXMgbm90IHJlcXVpcmVkLiBUaGlzXG4gKiBmdW5jdGlvbiBpcyB1c2VmdWwgb25seSB3aGVuIHlvdSB3YW50IHRvIGZvcmNlIHRoaXMgaW5zdGFuY2UgdG8gcmVsZWFzZSBhbGxcbiAqIG9mIGl0cyByZXNvdXJjZXMgb3IgaW4gY29tYmluYXRpb24gd2l0aCBgY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZSgpYCB0b1xuICogZW5zdXJlIHRoYXQgYWxsIGxvY2FsIHN0YXRlIGlzIGRlc3Ryb3llZCBiZXR3ZWVuIHRlc3QgcnVucy5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IGlzIHJlc29sdmVkIHdoZW4gdGhlIGluc3RhbmNlIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseVxuICogdGVybWluYXRlZC5cbiAqLyBmdW5jdGlvbiBIYyh0KSB7XG4gICAgcmV0dXJuIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UodC5hcHAsIFwiZmlyZXN0b3JlXCIpLCB0Ll9kZWxldGUoKTtcbn1cblxuLyoqXG4gKiBMb2FkcyBhIEZpcmVzdG9yZSBidW5kbGUgaW50byB0aGUgbG9jYWwgY2FjaGUuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB0byBsb2FkIGJ1bmRsZXMgZm9yIGZvci5cbiAqIEBwYXJhbSBidW5kbGVEYXRhIC0gQW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgYnVuZGxlIHRvIGJlIGxvYWRlZC4gVmFsaWQgb2JqZWN0cyBhcmVcbiAqICAgYEFycmF5QnVmZmVyYCwgYFJlYWRhYmxlU3RyZWFtPFVpbnQ4QXJyYXk+YCBvciBgc3RyaW5nYC5cbiAqXG4gKiBAcmV0dXJuc1xuICogICBBIGBMb2FkQnVuZGxlVGFza2Agb2JqZWN0LCB3aGljaCBub3RpZmllcyBjYWxsZXJzIHdpdGggcHJvZ3Jlc3MgdXBkYXRlcywgYW5kIGNvbXBsZXRpb25cbiAqICAgb3IgZXJyb3IgZXZlbnRzLiBJdCBjYW4gYmUgdXNlZCBhcyBhIGBQcm9taXNlPExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3M+YC5cbiAqLyBmdW5jdGlvbiBKYyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEJjKHQgPSBUYyh0LCBPYykpLCBzID0gbmV3ICRjO1xuICAgIHJldHVybiBoYyhuLCB0Ll9kYXRhYmFzZUlkLCBlLCBzKSwgcztcbn1cblxuLyoqXG4gKiBSZWFkcyBhIEZpcmVzdG9yZSB7QGxpbmsgUXVlcnl9IGZyb20gbG9jYWwgY2FjaGUsIGlkZW50aWZpZWQgYnkgdGhlIGdpdmVuIG5hbWUuXG4gKlxuICogVGhlIG5hbWVkIHF1ZXJpZXMgYXJlIHBhY2thZ2VkICBpbnRvIGJ1bmRsZXMgb24gdGhlIHNlcnZlciBzaWRlIChhbG9uZ1xuICogd2l0aCByZXN1bHRpbmcgZG9jdW1lbnRzKSwgYW5kIGxvYWRlZCB0byBsb2NhbCBjYWNoZSB1c2luZyBgbG9hZEJ1bmRsZWAuIE9uY2UgaW4gbG9jYWxcbiAqIGNhY2hlLCB1c2UgdGhpcyBtZXRob2QgdG8gZXh0cmFjdCBhIHtAbGluayBRdWVyeX0gYnkgbmFtZS5cbiAqLyBmdW5jdGlvbiBZYyh0LCBlKSB7XG4gICAgcmV0dXJuIGxjKEJjKHQgPSBUYyh0LCBPYykpLCBlKS50aGVuKChlID0+IGUgPyBuZXcgYmModCwgbnVsbCwgZS5xdWVyeSkgOiBudWxsKSk7XG59XG5cbmZ1bmN0aW9uIFhjKHQpIHtcbiAgICBpZiAodC5faW5pdGlhbGl6ZWQgfHwgdC5fdGVybWluYXRlZCkgdGhyb3cgbmV3IGooSy5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkZpcmVzdG9yZSBoYXMgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQgYW5kIHBlcnNpc3RlbmNlIGNhbiBubyBsb25nZXIgYmUgZW5hYmxlZC4gWW91IGNhbiBvbmx5IGVuYWJsZSBwZXJzaXN0ZW5jZSBiZWZvcmUgY2FsbGluZyBhbnkgb3RoZXIgbWV0aG9kcyBvbiBhIEZpcmVzdG9yZSBvYmplY3QuXCIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBgRmllbGRQYXRoYCByZWZlcnMgdG8gYSBmaWVsZCBpbiBhIGRvY3VtZW50LiBUaGUgcGF0aCBtYXkgY29uc2lzdCBvZiBhXG4gKiBzaW5nbGUgZmllbGQgbmFtZSAocmVmZXJyaW5nIHRvIGEgdG9wLWxldmVsIGZpZWxkIGluIHRoZSBkb2N1bWVudCksIG9yIGFcbiAqIGxpc3Qgb2YgZmllbGQgbmFtZXMgKHJlZmVycmluZyB0byBhIG5lc3RlZCBmaWVsZCBpbiB0aGUgZG9jdW1lbnQpLlxuICpcbiAqIENyZWF0ZSBhIGBGaWVsZFBhdGhgIGJ5IHByb3ZpZGluZyBmaWVsZCBuYW1lcy4gSWYgbW9yZSB0aGFuIG9uZSBmaWVsZFxuICogbmFtZSBpcyBwcm92aWRlZCwgdGhlIHBhdGggd2lsbCBwb2ludCB0byBhIG5lc3RlZCBmaWVsZCBpbiBhIGRvY3VtZW50LlxuICovXG5jbGFzcyBaYyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGBGaWVsZFBhdGhgIGZyb20gdGhlIHByb3ZpZGVkIGZpZWxkIG5hbWVzLiBJZiBtb3JlIHRoYW4gb25lIGZpZWxkXG4gICAgICogbmFtZSBpcyBwcm92aWRlZCwgdGhlIHBhdGggd2lsbCBwb2ludCB0byBhIG5lc3RlZCBmaWVsZCBpbiBhIGRvY3VtZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpZWxkTmFtZXMgLSBBIGxpc3Qgb2YgZmllbGQgbmFtZXMuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoLi4udCkge1xuICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHQubGVuZ3RoOyArK2UpIGlmICgwID09PSB0W2VdLmxlbmd0aCkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgZmllbGQgbmFtZSBhdCBhcmd1bWVudCAkKGkgKyAxKS4gRmllbGQgbmFtZXMgbXVzdCBub3QgYmUgZW1wdHkuXCIpO1xuICAgICAgICB0aGlzLl9pbnRlcm5hbFBhdGggPSBuZXcgX3QodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGBGaWVsZFBhdGhgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgYEZpZWxkUGF0aGAgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhpcyBgRmllbGRQYXRoYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqLyAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ludGVybmFsUGF0aC5pc0VxdWFsKHQuX2ludGVybmFsUGF0aCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSBzcGVjaWFsIHNlbnRpbmVsIGBGaWVsZFBhdGhgIHRvIHJlZmVyIHRvIHRoZSBJRCBvZiBhIGRvY3VtZW50LlxuICogSXQgY2FuIGJlIHVzZWQgaW4gcXVlcmllcyB0byBzb3J0IG9yIGZpbHRlciBieSB0aGUgZG9jdW1lbnQgSUQuXG4gKi8gZnVuY3Rpb24gdHUoKSB7XG4gICAgcmV0dXJuIG5ldyBaYyhcIl9fbmFtZV9fXCIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbW11dGFibGUgb2JqZWN0IHJlcHJlc2VudGluZyBhbiBhcnJheSBvZiBieXRlcy5cbiAqLyBjbGFzcyBldSB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuX2J5dGVTdHJpbmcgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGBCeXRlc2Agb2JqZWN0IGZyb20gdGhlIGdpdmVuIEJhc2U2NCBzdHJpbmcsIGNvbnZlcnRpbmcgaXQgdG9cbiAgICAgKiBieXRlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiYXNlNjQgLSBUaGUgQmFzZTY0IHN0cmluZyB1c2VkIHRvIGNyZWF0ZSB0aGUgYEJ5dGVzYCBvYmplY3QuXG4gICAgICovICAgIHN0YXRpYyBmcm9tQmFzZTY0U3RyaW5nKHQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgZXUoeXQuZnJvbUJhc2U2NFN0cmluZyh0KSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJGYWlsZWQgdG8gY29uc3RydWN0IGRhdGEgZnJvbSBCYXNlNjQgc3RyaW5nOiBcIiArIHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgYEJ5dGVzYCBvYmplY3QgZnJvbSB0aGUgZ2l2ZW4gVWludDhBcnJheS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhcnJheSAtIFRoZSBVaW50OEFycmF5IHVzZWQgdG8gY3JlYXRlIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKi8gICAgc3RhdGljIGZyb21VaW50OEFycmF5KHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBldSh5dC5mcm9tVWludDhBcnJheSh0KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHVuZGVybHlpbmcgYnl0ZXMgYXMgYSBCYXNlNjQtZW5jb2RlZCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgQmFzZTY0LWVuY29kZWQgc3RyaW5nIGNyZWF0ZWQgZnJvbSB0aGUgYEJ5dGVzYCBvYmplY3QuXG4gICAgICovICAgIHRvQmFzZTY0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnl0ZVN0cmluZy50b0Jhc2U2NCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB1bmRlcmx5aW5nIGJ5dGVzIGluIGEgbmV3IGBVaW50OEFycmF5YC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBVaW50OEFycmF5IGNyZWF0ZWQgZnJvbSB0aGUgYEJ5dGVzYCBvYmplY3QuXG4gICAgICovICAgIHRvVWludDhBcnJheSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J5dGVTdHJpbmcudG9VaW50OEFycmF5KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFwiQnl0ZXMoYmFzZTY0OiBcIiArIHRoaXMudG9CYXNlNjQoKSArIFwiKVwiO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgQnl0ZXNgIG9iamVjdCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBCeXRlc2Agb2JqZWN0IHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYEJ5dGVzYCBvYmplY3QgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ieXRlU3RyaW5nLmlzRXF1YWwodC5fYnl0ZVN0cmluZyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBTZW50aW5lbCB2YWx1ZXMgdGhhdCBjYW4gYmUgdXNlZCB3aGVuIHdyaXRpbmcgZG9jdW1lbnQgZmllbGRzIHdpdGggYHNldCgpYFxuICogb3IgYHVwZGF0ZSgpYC5cbiAqLyBjbGFzcyBudSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIF9tZXRob2ROYW1lIC0gVGhlIHB1YmxpYyBBUEkgZW5kcG9pbnQgdGhhdCByZXR1cm5zIHRoaXMgY2xhc3MuXG4gICAgICogQGhpZGVjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5fbWV0aG9kTmFtZSA9IHQ7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbW11dGFibGUgb2JqZWN0IHJlcHJlc2VudGluZyBhIGdlb2dyYXBoaWMgbG9jYXRpb24gaW4gRmlyZXN0b3JlLiBUaGVcbiAqIGxvY2F0aW9uIGlzIHJlcHJlc2VudGVkIGFzIGxhdGl0dWRlL2xvbmdpdHVkZSBwYWlyLlxuICpcbiAqIExhdGl0dWRlIHZhbHVlcyBhcmUgaW4gdGhlIHJhbmdlIG9mIFstOTAsIDkwXS5cbiAqIExvbmdpdHVkZSB2YWx1ZXMgYXJlIGluIHRoZSByYW5nZSBvZiBbLTE4MCwgMTgwXS5cbiAqLyBjbGFzcyBzdSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBpbW11dGFibGUgYEdlb1BvaW50YCBvYmplY3Qgd2l0aCB0aGUgcHJvdmlkZWQgbGF0aXR1ZGUgYW5kXG4gICAgICogbG9uZ2l0dWRlIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gbGF0aXR1ZGUgLSBUaGUgbGF0aXR1ZGUgYXMgbnVtYmVyIGJldHdlZW4gLTkwIGFuZCA5MC5cbiAgICAgKiBAcGFyYW0gbG9uZ2l0dWRlIC0gVGhlIGxvbmdpdHVkZSBhcyBudW1iZXIgYmV0d2VlbiAtMTgwIGFuZCAxODAuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBpZiAoIWlzRmluaXRlKHQpIHx8IHQgPCAtOTAgfHwgdCA+IDkwKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiTGF0aXR1ZGUgbXVzdCBiZSBhIG51bWJlciBiZXR3ZWVuIC05MCBhbmQgOTAsIGJ1dCB3YXM6IFwiICsgdCk7XG4gICAgICAgIGlmICghaXNGaW5pdGUoZSkgfHwgZSA8IC0xODAgfHwgZSA+IDE4MCkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIkxvbmdpdHVkZSBtdXN0IGJlIGEgbnVtYmVyIGJldHdlZW4gLTE4MCBhbmQgMTgwLCBidXQgd2FzOiBcIiArIGUpO1xuICAgICAgICB0aGlzLl9sYXQgPSB0LCB0aGlzLl9sb25nID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGxhdGl0dWRlIG9mIHRoaXMgYEdlb1BvaW50YCBpbnN0YW5jZS5cbiAgICAgKi8gICAgZ2V0IGxhdGl0dWRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGF0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbG9uZ2l0dWRlIG9mIHRoaXMgYEdlb1BvaW50YCBpbnN0YW5jZS5cbiAgICAgKi8gICAgZ2V0IGxvbmdpdHVkZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvbmc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGBHZW9Qb2ludGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgR2VvUG9pbnRgIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYEdlb1BvaW50YCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqLyAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xhdCA9PT0gdC5fbGF0ICYmIHRoaXMuX2xvbmcgPT09IHQuX2xvbmc7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgSlNPTi1zZXJpYWxpemFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBHZW9Qb2ludC4gKi8gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbGF0aXR1ZGU6IHRoaXMuX2xhdCxcbiAgICAgICAgICAgIGxvbmdpdHVkZTogdGhpcy5fbG9uZ1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBY3R1YWxseSBwcml2YXRlIHRvIEpTIGNvbnN1bWVycyBvZiBvdXIgQVBJLCBzbyB0aGlzIGZ1bmN0aW9uIGlzIHByZWZpeGVkXG4gICAgICogd2l0aCBhbiB1bmRlcnNjb3JlLlxuICAgICAqLyAgICBfY29tcGFyZVRvKHQpIHtcbiAgICAgICAgcmV0dXJuIGl0KHRoaXMuX2xhdCwgdC5fbGF0KSB8fCBpdCh0aGlzLl9sb25nLCB0Ll9sb25nKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IGl1ID0gL15fXy4qX18kLztcblxuLyoqIFRoZSByZXN1bHQgb2YgcGFyc2luZyBkb2N1bWVudCBkYXRhIChlLmcuIGZvciBhIHNldERhdGEgY2FsbCkuICovIGNsYXNzIHJ1IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IHQsIHRoaXMuZmllbGRNYXNrID0gZSwgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBuO1xuICAgIH1cbiAgICB0b011dGF0aW9uKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHRoaXMuZmllbGRNYXNrID8gbmV3IG9uKHQsIHRoaXMuZGF0YSwgdGhpcy5maWVsZE1hc2ssIGUsIHRoaXMuZmllbGRUcmFuc2Zvcm1zKSA6IG5ldyBybih0LCB0aGlzLmRhdGEsIGUsIHRoaXMuZmllbGRUcmFuc2Zvcm1zKTtcbiAgICB9XG59XG5cbi8qKiBUaGUgcmVzdWx0IG9mIHBhcnNpbmcgXCJ1cGRhdGVcIiBkYXRhIChpLmUuIGZvciBhbiB1cGRhdGVEYXRhIGNhbGwpLiAqLyBjbGFzcyBvdSB7XG4gICAgY29uc3RydWN0b3IodCwgXG4gICAgLy8gVGhlIGZpZWxkTWFzayBkb2VzIG5vdCBpbmNsdWRlIGRvY3VtZW50IHRyYW5zZm9ybXMuXG4gICAgZSwgbikge1xuICAgICAgICB0aGlzLmRhdGEgPSB0LCB0aGlzLmZpZWxkTWFzayA9IGUsIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gbjtcbiAgICB9XG4gICAgdG9NdXRhdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgb24odCwgdGhpcy5kYXRhLCB0aGlzLmZpZWxkTWFzaywgZSwgdGhpcy5maWVsZFRyYW5zZm9ybXMpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gYXUodCkge1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgY2FzZSAwIC8qIFNldCAqLyA6XG4gLy8gZmFsbCB0aHJvdWdoXG4gICAgICAgICAgICAgIGNhc2UgMiAvKiBNZXJnZVNldCAqLyA6XG4gLy8gZmFsbCB0aHJvdWdoXG4gICAgICAgICAgICAgIGNhc2UgMSAvKiBVcGRhdGUgKi8gOlxuICAgICAgICByZXR1cm4gITA7XG5cbiAgICAgIGNhc2UgMyAvKiBBcmd1bWVudCAqLyA6XG4gICAgICBjYXNlIDQgLyogQXJyYXlBcmd1bWVudCAqLyA6XG4gICAgICAgIHJldHVybiAhMTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgTCgpO1xuICAgIH1cbn1cblxuLyoqIEEgXCJjb250ZXh0XCIgb2JqZWN0IHBhc3NlZCBhcm91bmQgd2hpbGUgcGFyc2luZyB1c2VyIGRhdGEuICovIGNsYXNzIGN1IHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyBhIFBhcnNlQ29udGV4dCB3aXRoIHRoZSBnaXZlbiBzb3VyY2UgYW5kIHBhdGguXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2V0dGluZ3MgLSBUaGUgc2V0dGluZ3MgZm9yIHRoZSBwYXJzZXIuXG4gICAgICogQHBhcmFtIGRhdGFiYXNlSWQgLSBUaGUgZGF0YWJhc2UgSUQgb2YgdGhlIEZpcmVzdG9yZSBpbnN0YW5jZS5cbiAgICAgKiBAcGFyYW0gc2VyaWFsaXplciAtIFRoZSBzZXJpYWxpemVyIHRvIHVzZSB0byBnZW5lcmF0ZSB0aGUgVmFsdWUgcHJvdG8uXG4gICAgICogQHBhcmFtIGlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgLSBXaGV0aGVyIHRvIGlnbm9yZSB1bmRlZmluZWQgcHJvcGVydGllc1xuICAgICAqIHJhdGhlciB0aGFuIHRocm93LlxuICAgICAqIEBwYXJhbSBmaWVsZFRyYW5zZm9ybXMgLSBBIG11dGFibGUgbGlzdCBvZiBmaWVsZCB0cmFuc2Zvcm1zIGVuY291bnRlcmVkXG4gICAgICogd2hpbGUgcGFyc2luZyB0aGUgZGF0YS5cbiAgICAgKiBAcGFyYW0gZmllbGRNYXNrIC0gQSBtdXRhYmxlIGxpc3Qgb2YgZmllbGQgcGF0aHMgZW5jb3VudGVyZWQgd2hpbGUgcGFyc2luZ1xuICAgICAqIHRoZSBkYXRhLlxuICAgICAqXG4gICAgICogVE9ETyhiLzM0ODcxMTMxKTogV2UgZG9uJ3Qgc3VwcG9ydCBhcnJheSBwYXRocyByaWdodCBub3csIHNvIHBhdGggY2FuIGJlXG4gICAgICogbnVsbCB0byBpbmRpY2F0ZSB0aGUgY29udGV4dCByZXByZXNlbnRzIGFueSBsb2NhdGlvbiB3aXRoaW4gYW4gYXJyYXkgKGluXG4gICAgICogd2hpY2ggY2FzZSBjZXJ0YWluIGZlYXR1cmVzIHdpbGwgbm90IHdvcmsgYW5kIGVycm9ycyB3aWxsIGJlIHNvbWV3aGF0XG4gICAgICogY29tcHJvbWlzZWQpLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGksIHIpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHQsIHRoaXMuZGF0YWJhc2VJZCA9IGUsIHRoaXMuayA9IG4sIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyA9IHMsIFxuICAgICAgICAvLyBNaW5vciBoYWNrOiBJZiBmaWVsZFRyYW5zZm9ybXMgaXMgdW5kZWZpbmVkLCB3ZSBhc3N1bWUgdGhpcyBpcyBhblxuICAgICAgICAvLyBleHRlcm5hbCBjYWxsIGFuZCB3ZSBuZWVkIHRvIHZhbGlkYXRlIHRoZSBlbnRpcmUgcGF0aC5cbiAgICAgICAgdm9pZCAwID09PSBpICYmIHRoaXMua2EoKSwgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBpIHx8IFtdLCB0aGlzLmZpZWxkTWFzayA9IHIgfHwgW107XG4gICAgfVxuICAgIGdldCBwYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5wYXRoO1xuICAgIH1cbiAgICBnZXQgeGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLnhhO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIG5ldyBjb250ZXh0IHdpdGggdGhlIHNwZWNpZmllZCBzZXR0aW5ncyBvdmVyd3JpdHRlbi4gKi8gICAgJGEodCkge1xuICAgICAgICByZXR1cm4gbmV3IGN1KE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5zZXR0aW5ncyksIHQpLCB0aGlzLmRhdGFiYXNlSWQsIHRoaXMuaywgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzLCB0aGlzLmZpZWxkVHJhbnNmb3JtcywgdGhpcy5maWVsZE1hc2spO1xuICAgIH1cbiAgICBGYSh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBjb25zdCBuID0gbnVsbCA9PT0gKGUgPSB0aGlzLnBhdGgpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuY2hpbGQodCksIHMgPSB0aGlzLiRhKHtcbiAgICAgICAgICAgIHBhdGg6IG4sXG4gICAgICAgICAgICBPYTogITFcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzLk1hKHQpLCBzO1xuICAgIH1cbiAgICBMYSh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBjb25zdCBuID0gbnVsbCA9PT0gKGUgPSB0aGlzLnBhdGgpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuY2hpbGQodCksIHMgPSB0aGlzLiRhKHtcbiAgICAgICAgICAgIHBhdGg6IG4sXG4gICAgICAgICAgICBPYTogITFcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzLmthKCksIHM7XG4gICAgfVxuICAgIEJhKHQpIHtcbiAgICAgICAgLy8gVE9ETyhiLzM0ODcxMTMxKTogV2UgZG9uJ3Qgc3VwcG9ydCBhcnJheSBwYXRocyByaWdodCBub3c7IHNvIG1ha2UgcGF0aFxuICAgICAgICAvLyB1bmRlZmluZWQuXG4gICAgICAgIHJldHVybiB0aGlzLiRhKHtcbiAgICAgICAgICAgIHBhdGg6IHZvaWQgMCxcbiAgICAgICAgICAgIE9hOiAhMFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgVWEodCkge1xuICAgICAgICByZXR1cm4gVnUodCwgdGhpcy5zZXR0aW5ncy5tZXRob2ROYW1lLCB0aGlzLnNldHRpbmdzLnFhIHx8ICExLCB0aGlzLnBhdGgsIHRoaXMuc2V0dGluZ3MuS2EpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyAndHJ1ZScgaWYgJ2ZpZWxkUGF0aCcgd2FzIHRyYXZlcnNlZCB3aGVuIGNyZWF0aW5nIHRoaXMgY29udGV4dC4gKi8gICAgY29udGFpbnModCkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB0aGlzLmZpZWxkTWFzay5maW5kKChlID0+IHQuaXNQcmVmaXhPZihlKSkpIHx8IHZvaWQgMCAhPT0gdGhpcy5maWVsZFRyYW5zZm9ybXMuZmluZCgoZSA9PiB0LmlzUHJlZml4T2YoZS5maWVsZCkpKTtcbiAgICB9XG4gICAga2EoKSB7XG4gICAgICAgIC8vIFRPRE8oYi8zNDg3MTEzMSk6IFJlbW92ZSBudWxsIGNoZWNrIG9uY2Ugd2UgaGF2ZSBwcm9wZXIgcGF0aHMgZm9yIGZpZWxkc1xuICAgICAgICAvLyB3aXRoaW4gYXJyYXlzLlxuICAgICAgICBpZiAodGhpcy5wYXRoKSBmb3IgKGxldCB0ID0gMDsgdCA8IHRoaXMucGF0aC5sZW5ndGg7IHQrKykgdGhpcy5NYSh0aGlzLnBhdGguZ2V0KHQpKTtcbiAgICB9XG4gICAgTWEodCkge1xuICAgICAgICBpZiAoMCA9PT0gdC5sZW5ndGgpIHRocm93IHRoaXMuVWEoXCJEb2N1bWVudCBmaWVsZHMgbXVzdCBub3QgYmUgZW1wdHlcIik7XG4gICAgICAgIGlmIChhdSh0aGlzLnhhKSAmJiBpdS50ZXN0KHQpKSB0aHJvdyB0aGlzLlVhKCdEb2N1bWVudCBmaWVsZHMgY2Fubm90IGJlZ2luIGFuZCBlbmQgd2l0aCBcIl9fXCInKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIGZvciBwYXJzaW5nIHJhdyB1c2VyIGlucHV0IChwcm92aWRlZCB2aWEgdGhlIEFQSSkgaW50byBpbnRlcm5hbCBtb2RlbFxuICogY2xhc3Nlcy5cbiAqLyBjbGFzcyB1dSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLmRhdGFiYXNlSWQgPSB0LCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgPSBlLCB0aGlzLmsgPSBuIHx8IHRvKHQpO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyB0b3AtbGV2ZWwgcGFyc2UgY29udGV4dC4gKi8gICAgamEodCwgZSwgbiwgcyA9ICExKSB7XG4gICAgICAgIHJldHVybiBuZXcgY3Uoe1xuICAgICAgICAgICAgeGE6IHQsXG4gICAgICAgICAgICBtZXRob2ROYW1lOiBlLFxuICAgICAgICAgICAgS2E6IG4sXG4gICAgICAgICAgICBwYXRoOiBfdC5lbXB0eVBhdGgoKSxcbiAgICAgICAgICAgIE9hOiAhMSxcbiAgICAgICAgICAgIHFhOiBzXG4gICAgICAgIH0sIHRoaXMuZGF0YWJhc2VJZCwgdGhpcy5rLCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaHUodCkge1xuICAgIGNvbnN0IGUgPSB0Ll9mcmVlemVTZXR0aW5ncygpLCBuID0gdG8odC5fZGF0YWJhc2VJZCk7XG4gICAgcmV0dXJuIG5ldyB1dSh0Ll9kYXRhYmFzZUlkLCAhIWUuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcywgbik7XG59XG5cbi8qKiBQYXJzZSBkb2N1bWVudCBkYXRhIGZyb20gYSBzZXQoKSBjYWxsLiAqLyBmdW5jdGlvbiBsdSh0LCBlLCBuLCBzLCBpLCByID0ge30pIHtcbiAgICBjb25zdCBvID0gdC5qYShyLm1lcmdlIHx8IHIubWVyZ2VGaWVsZHMgPyAyIC8qIE1lcmdlU2V0ICovIDogMCAvKiBTZXQgKi8gLCBlLCBuLCBpKTtcbiAgICBSdShcIkRhdGEgbXVzdCBiZSBhbiBvYmplY3QsIGJ1dCBpdCB3YXM6XCIsIG8sIHMpO1xuICAgIGNvbnN0IGEgPSBJdShzLCBvKTtcbiAgICBsZXQgYywgdTtcbiAgICBpZiAoci5tZXJnZSkgYyA9IG5ldyBtdChvLmZpZWxkTWFzayksIHUgPSBvLmZpZWxkVHJhbnNmb3JtczsgZWxzZSBpZiAoci5tZXJnZUZpZWxkcykge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIGZvciAoY29uc3QgcyBvZiByLm1lcmdlRmllbGRzKSB7XG4gICAgICAgICAgICBjb25zdCBpID0gUHUoZSwgcywgbik7XG4gICAgICAgICAgICBpZiAoIW8uY29udGFpbnMoaSkpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEZpZWxkICcke2l9JyBpcyBzcGVjaWZpZWQgaW4geW91ciBmaWVsZCBtYXNrIGJ1dCBtaXNzaW5nIGZyb20geW91ciBpbnB1dCBkYXRhLmApO1xuICAgICAgICAgICAgU3UodCwgaSkgfHwgdC5wdXNoKGkpO1xuICAgICAgICB9XG4gICAgICAgIGMgPSBuZXcgbXQodCksIHUgPSBvLmZpZWxkVHJhbnNmb3Jtcy5maWx0ZXIoKHQgPT4gYy5jb3ZlcnModC5maWVsZCkpKTtcbiAgICB9IGVsc2UgYyA9IG51bGwsIHUgPSBvLmZpZWxkVHJhbnNmb3JtcztcbiAgICByZXR1cm4gbmV3IHJ1KG5ldyBqdChhKSwgYywgdSk7XG59XG5cbmNsYXNzIGZ1IGV4dGVuZHMgbnUge1xuICAgIF90b0ZpZWxkVHJhbnNmb3JtKHQpIHtcbiAgICAgICAgaWYgKDIgLyogTWVyZ2VTZXQgKi8gIT09IHQueGEpIHRocm93IDEgLyogVXBkYXRlICovID09PSB0LnhhID8gdC5VYShgJHt0aGlzLl9tZXRob2ROYW1lfSgpIGNhbiBvbmx5IGFwcGVhciBhdCB0aGUgdG9wIGxldmVsIG9mIHlvdXIgdXBkYXRlIGRhdGFgKSA6IHQuVWEoYCR7dGhpcy5fbWV0aG9kTmFtZX0oKSBjYW5ub3QgYmUgdXNlZCB3aXRoIHNldCgpIHVubGVzcyB5b3UgcGFzcyB7bWVyZ2U6dHJ1ZX1gKTtcbiAgICAgICAgLy8gTm8gdHJhbnNmb3JtIHRvIGFkZCBmb3IgYSBkZWxldGUsIGJ1dCB3ZSBuZWVkIHRvIGFkZCBpdCB0byBvdXJcbiAgICAgICAgLy8gZmllbGRNYXNrIHNvIGl0IGdldHMgZGVsZXRlZC5cbiAgICAgICAgcmV0dXJuIHQuZmllbGRNYXNrLnB1c2godC5wYXRoKSwgbnVsbDtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgZnU7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBjaGlsZCBjb250ZXh0IGZvciBwYXJzaW5nIFNlcmlhbGl6YWJsZUZpZWxkVmFsdWVzLlxuICpcbiAqIFRoaXMgaXMgZGlmZmVyZW50IHRoYW4gY2FsbGluZyBgUGFyc2VDb250ZXh0LmNvbnRleHRXaXRoYCBiZWNhdXNlIGl0IGtlZXBzXG4gKiB0aGUgZmllbGRUcmFuc2Zvcm1zIGFuZCBmaWVsZE1hc2sgc2VwYXJhdGUuXG4gKlxuICogVGhlIGNyZWF0ZWQgY29udGV4dCBoYXMgaXRzIGBkYXRhU291cmNlYCBzZXQgdG8gYFVzZXJEYXRhU291cmNlLkFyZ3VtZW50YC5cbiAqIEFsdGhvdWdoIHRoZXNlIHZhbHVlcyBhcmUgdXNlZCB3aXRoIHdyaXRlcywgYW55IGVsZW1lbnRzIGluIHRoZXNlIEZpZWxkVmFsdWVzXG4gKiBhcmUgbm90IGNvbnNpZGVyZWQgd3JpdGVzIHNpbmNlIHRoZXkgY2Fubm90IGNvbnRhaW4gYW55IEZpZWxkVmFsdWUgc2VudGluZWxzLFxuICogZXRjLlxuICpcbiAqIEBwYXJhbSBmaWVsZFZhbHVlIC0gVGhlIHNlbnRpbmVsIEZpZWxkVmFsdWUgZm9yIHdoaWNoIHRvIGNyZWF0ZSBhIGNoaWxkXG4gKiAgICAgY29udGV4dC5cbiAqIEBwYXJhbSBjb250ZXh0IC0gVGhlIHBhcmVudCBjb250ZXh0LlxuICogQHBhcmFtIGFycmF5RWxlbWVudCAtIFdoZXRoZXIgb3Igbm90IHRoZSBGaWVsZFZhbHVlIGhhcyBhbiBhcnJheS5cbiAqLyBmdW5jdGlvbiBkdSh0LCBlLCBuKSB7XG4gICAgcmV0dXJuIG5ldyBjdSh7XG4gICAgICAgIHhhOiAzIC8qIEFyZ3VtZW50ICovICxcbiAgICAgICAgS2E6IGUuc2V0dGluZ3MuS2EsXG4gICAgICAgIG1ldGhvZE5hbWU6IHQuX21ldGhvZE5hbWUsXG4gICAgICAgIE9hOiBuXG4gICAgfSwgZS5kYXRhYmFzZUlkLCBlLmssIGUuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyk7XG59XG5cbmNsYXNzIHd1IGV4dGVuZHMgbnUge1xuICAgIF90b0ZpZWxkVHJhbnNmb3JtKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBHZSh0LnBhdGgsIG5ldyBMZSk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIHd1O1xuICAgIH1cbn1cblxuY2xhc3MgX3UgZXh0ZW5kcyBudSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0KSwgdGhpcy5RYSA9IGU7XG4gICAgfVxuICAgIF90b0ZpZWxkVHJhbnNmb3JtKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IGR1KHRoaXMsIHQsIFxuICAgICAgICAvKmFycmF5PSovICEwKSwgbiA9IHRoaXMuUWEubWFwKCh0ID0+IEV1KHQsIGUpKSksIHMgPSBuZXcgQmUobik7XG4gICAgICAgIHJldHVybiBuZXcgR2UodC5wYXRoLCBzKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIC8vIFRPRE8obXJzY2htaWR0KTogSW1wbGVtZW50IGlzRXF1YWxzXG4gICAgICAgIHJldHVybiB0aGlzID09PSB0O1xuICAgIH1cbn1cblxuY2xhc3MgbXUgZXh0ZW5kcyBudSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0KSwgdGhpcy5RYSA9IGU7XG4gICAgfVxuICAgIF90b0ZpZWxkVHJhbnNmb3JtKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IGR1KHRoaXMsIHQsIFxuICAgICAgICAvKmFycmF5PSovICEwKSwgbiA9IHRoaXMuUWEubWFwKCh0ID0+IEV1KHQsIGUpKSksIHMgPSBuZXcgcWUobik7XG4gICAgICAgIHJldHVybiBuZXcgR2UodC5wYXRoLCBzKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIC8vIFRPRE8obXJzY2htaWR0KTogSW1wbGVtZW50IGlzRXF1YWxzXG4gICAgICAgIHJldHVybiB0aGlzID09PSB0O1xuICAgIH1cbn1cblxuY2xhc3MgZ3UgZXh0ZW5kcyBudSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0KSwgdGhpcy5XYSA9IGU7XG4gICAgfVxuICAgIF90b0ZpZWxkVHJhbnNmb3JtKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBqZSh0LmssIHhlKHQuaywgdGhpcy5XYSkpO1xuICAgICAgICByZXR1cm4gbmV3IEdlKHQucGF0aCwgZSk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICAvLyBUT0RPKG1yc2NobWlkdCk6IEltcGxlbWVudCBpc0VxdWFsc1xuICAgICAgICByZXR1cm4gdGhpcyA9PT0gdDtcbiAgICB9XG59XG5cbi8qKiBQYXJzZSB1cGRhdGUgZGF0YSBmcm9tIGFuIHVwZGF0ZSgpIGNhbGwuICovIGZ1bmN0aW9uIHl1KHQsIGUsIG4sIHMpIHtcbiAgICBjb25zdCBpID0gdC5qYSgxIC8qIFVwZGF0ZSAqLyAsIGUsIG4pO1xuICAgIFJ1KFwiRGF0YSBtdXN0IGJlIGFuIG9iamVjdCwgYnV0IGl0IHdhczpcIiwgaSwgcyk7XG4gICAgY29uc3QgciA9IFtdLCBvID0ganQuZW1wdHkoKTtcbiAgICBodChzLCAoKHQsIHMpID0+IHtcbiAgICAgICAgY29uc3QgYSA9IHZ1KGUsIHQsIG4pO1xuICAgICAgICAvLyBGb3IgQ29tcGF0IHR5cGVzLCB3ZSBoYXZlIHRvIFwiZXh0cmFjdFwiIHRoZSB1bmRlcmx5aW5nIHR5cGVzIGJlZm9yZVxuICAgICAgICAvLyBwZXJmb3JtaW5nIHZhbGlkYXRpb24uXG4gICAgICAgICAgICAgICAgcyA9IGdldE1vZHVsYXJJbnN0YW5jZShzKTtcbiAgICAgICAgY29uc3QgYyA9IGkuTGEoYSk7XG4gICAgICAgIGlmIChzIGluc3RhbmNlb2YgZnUpIFxuICAgICAgICAvLyBBZGQgaXQgdG8gdGhlIGZpZWxkIG1hc2ssIGJ1dCBkb24ndCBhZGQgYW55dGhpbmcgdG8gdXBkYXRlRGF0YS5cbiAgICAgICAgci5wdXNoKGEpOyBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBFdShzLCBjKTtcbiAgICAgICAgICAgIG51bGwgIT0gdCAmJiAoci5wdXNoKGEpLCBvLnNldChhLCB0KSk7XG4gICAgICAgIH1cbiAgICB9KSk7XG4gICAgY29uc3QgYSA9IG5ldyBtdChyKTtcbiAgICByZXR1cm4gbmV3IG91KG8sIGEsIGkuZmllbGRUcmFuc2Zvcm1zKTtcbn1cblxuLyoqIFBhcnNlIHVwZGF0ZSBkYXRhIGZyb20gYSBsaXN0IG9mIGZpZWxkL3ZhbHVlIGFyZ3VtZW50cy4gKi8gZnVuY3Rpb24gcHUodCwgZSwgbiwgcywgaSwgcikge1xuICAgIGNvbnN0IG8gPSB0LmphKDEgLyogVXBkYXRlICovICwgZSwgbiksIGEgPSBbIFB1KGUsIHMsIG4pIF0sIGMgPSBbIGkgXTtcbiAgICBpZiAoci5sZW5ndGggJSAyICE9IDApIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEZ1bmN0aW9uICR7ZX0oKSBuZWVkcyB0byBiZSBjYWxsZWQgd2l0aCBhbiBldmVuIG51bWJlciBvZiBhcmd1bWVudHMgdGhhdCBhbHRlcm5hdGUgYmV0d2VlbiBmaWVsZCBuYW1lcyBhbmQgdmFsdWVzLmApO1xuICAgIGZvciAobGV0IHQgPSAwOyB0IDwgci5sZW5ndGg7IHQgKz0gMikgYS5wdXNoKFB1KGUsIHJbdF0pKSwgYy5wdXNoKHJbdCArIDFdKTtcbiAgICBjb25zdCB1ID0gW10sIGggPSBqdC5lbXB0eSgpO1xuICAgIC8vIFdlIGl0ZXJhdGUgaW4gcmV2ZXJzZSBvcmRlciB0byBwaWNrIHRoZSBsYXN0IHZhbHVlIGZvciBhIGZpZWxkIGlmIHRoZVxuICAgIC8vIHVzZXIgc3BlY2lmaWVkIHRoZSBmaWVsZCBtdWx0aXBsZSB0aW1lcy5cbiAgICBmb3IgKGxldCB0ID0gYS5sZW5ndGggLSAxOyB0ID49IDA7IC0tdCkgaWYgKCFTdSh1LCBhW3RdKSkge1xuICAgICAgICBjb25zdCBlID0gYVt0XTtcbiAgICAgICAgbGV0IG4gPSBjW3RdO1xuICAgICAgICAvLyBGb3IgQ29tcGF0IHR5cGVzLCB3ZSBoYXZlIHRvIFwiZXh0cmFjdFwiIHRoZSB1bmRlcmx5aW5nIHR5cGVzIGJlZm9yZVxuICAgICAgICAvLyBwZXJmb3JtaW5nIHZhbGlkYXRpb24uXG4gICAgICAgICAgICAgICAgbiA9IGdldE1vZHVsYXJJbnN0YW5jZShuKTtcbiAgICAgICAgY29uc3QgcyA9IG8uTGEoZSk7XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgZnUpIFxuICAgICAgICAvLyBBZGQgaXQgdG8gdGhlIGZpZWxkIG1hc2ssIGJ1dCBkb24ndCBhZGQgYW55dGhpbmcgdG8gdXBkYXRlRGF0YS5cbiAgICAgICAgdS5wdXNoKGUpOyBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBFdShuLCBzKTtcbiAgICAgICAgICAgIG51bGwgIT0gdCAmJiAodS5wdXNoKGUpLCBoLnNldChlLCB0KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgbCA9IG5ldyBtdCh1KTtcbiAgICByZXR1cm4gbmV3IG91KGgsIGwsIG8uZmllbGRUcmFuc2Zvcm1zKTtcbn1cblxuLyoqXG4gKiBQYXJzZSBhIFwicXVlcnkgdmFsdWVcIiAoZS5nLiB2YWx1ZSBpbiBhIHdoZXJlIGZpbHRlciBvciBhIHZhbHVlIGluIGEgY3Vyc29yXG4gKiBib3VuZCkuXG4gKlxuICogQHBhcmFtIGFsbG93QXJyYXlzIC0gV2hldGhlciB0aGUgcXVlcnkgdmFsdWUgaXMgYW4gYXJyYXkgdGhhdCBtYXkgZGlyZWN0bHlcbiAqIGNvbnRhaW4gYWRkaXRpb25hbCBhcnJheXMgKGUuZy4gdGhlIG9wZXJhbmQgb2YgYW4gYGluYCBxdWVyeSkuXG4gKi8gZnVuY3Rpb24gVHUodCwgZSwgbiwgcyA9ICExKSB7XG4gICAgcmV0dXJuIEV1KG4sIHQuamEocyA/IDQgLyogQXJyYXlBcmd1bWVudCAqLyA6IDMgLyogQXJndW1lbnQgKi8gLCBlKSk7XG59XG5cbi8qKlxuICogUGFyc2VzIHVzZXIgZGF0YSB0byBQcm90b2J1ZiBWYWx1ZXMuXG4gKlxuICogQHBhcmFtIGlucHV0IC0gRGF0YSB0byBiZSBwYXJzZWQuXG4gKiBAcGFyYW0gY29udGV4dCAtIEEgY29udGV4dCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBjdXJyZW50IHBhdGggYmVpbmcgcGFyc2VkLFxuICogdGhlIHNvdXJjZSBvZiB0aGUgZGF0YSBiZWluZyBwYXJzZWQsIGV0Yy5cbiAqIEByZXR1cm5zIFRoZSBwYXJzZWQgdmFsdWUsIG9yIG51bGwgaWYgdGhlIHZhbHVlIHdhcyBhIEZpZWxkVmFsdWUgc2VudGluZWxcbiAqIHRoYXQgc2hvdWxkIG5vdCBiZSBpbmNsdWRlZCBpbiB0aGUgcmVzdWx0aW5nIHBhcnNlZCBkYXRhLlxuICovIGZ1bmN0aW9uIEV1KHQsIGUpIHtcbiAgICBpZiAoQXUoXG4gICAgLy8gVW53cmFwIHRoZSBBUEkgdHlwZSBmcm9tIHRoZSBDb21wYXQgU0RLLiBUaGlzIHdpbGwgcmV0dXJuIHRoZSBBUEkgdHlwZVxuICAgIC8vIGZyb20gZmlyZXN0b3JlLWV4cC5cbiAgICB0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpKSkgcmV0dXJuIFJ1KFwiVW5zdXBwb3J0ZWQgZmllbGQgdmFsdWU6XCIsIGUsIHQpLCBJdSh0LCBlKTtcbiAgICBpZiAodCBpbnN0YW5jZW9mIG51KSBcbiAgICAvLyBGaWVsZFZhbHVlcyB1c3VhbGx5IHBhcnNlIGludG8gdHJhbnNmb3JtcyAoZXhjZXB0IEZpZWxkVmFsdWUuZGVsZXRlKCkpXG4gICAgLy8gaW4gd2hpY2ggY2FzZSB3ZSBkbyBub3Qgd2FudCB0byBpbmNsdWRlIHRoaXMgZmllbGQgaW4gb3VyIHBhcnNlZCBkYXRhXG4gICAgLy8gKGFzIGRvaW5nIHNvIHdpbGwgb3ZlcndyaXRlIHRoZSBmaWVsZCBkaXJlY3RseSBwcmlvciB0byB0aGUgdHJhbnNmb3JtXG4gICAgLy8gdHJ5aW5nIHRvIHRyYW5zZm9ybSBpdCkuIFNvIHdlIGRvbid0IGFkZCB0aGlzIGxvY2F0aW9uIHRvXG4gICAgLy8gY29udGV4dC5maWVsZE1hc2sgYW5kIHdlIHJldHVybiBudWxsIGFzIG91ciBwYXJzaW5nIHJlc3VsdC5cbiAgICAvKipcbiAqIFwiUGFyc2VzXCIgdGhlIHByb3ZpZGVkIEZpZWxkVmFsdWVJbXBsLCBhZGRpbmcgYW55IG5lY2Vzc2FyeSB0cmFuc2Zvcm1zIHRvXG4gKiBjb250ZXh0LmZpZWxkVHJhbnNmb3Jtcy5cbiAqL1xuICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIC8vIFNlbnRpbmVscyBhcmUgb25seSBzdXBwb3J0ZWQgd2l0aCB3cml0ZXMsIGFuZCBub3Qgd2l0aGluIGFycmF5cy5cbiAgICAgICAgaWYgKCFhdShlLnhhKSkgdGhyb3cgZS5VYShgJHt0Ll9tZXRob2ROYW1lfSgpIGNhbiBvbmx5IGJlIHVzZWQgd2l0aCB1cGRhdGUoKSBhbmQgc2V0KClgKTtcbiAgICAgICAgaWYgKCFlLnBhdGgpIHRocm93IGUuVWEoYCR7dC5fbWV0aG9kTmFtZX0oKSBpcyBub3QgY3VycmVudGx5IHN1cHBvcnRlZCBpbnNpZGUgYXJyYXlzYCk7XG4gICAgICAgIGNvbnN0IG4gPSB0Ll90b0ZpZWxkVHJhbnNmb3JtKGUpO1xuICAgICAgICBuICYmIGUuZmllbGRUcmFuc2Zvcm1zLnB1c2gobik7XG4gICAgfVxuICAgIC8qKlxuICogSGVscGVyIHRvIHBhcnNlIGEgc2NhbGFyIHZhbHVlIChpLmUuIG5vdCBhbiBPYmplY3QsIEFycmF5LCBvciBGaWVsZFZhbHVlKVxuICpcbiAqIEByZXR1cm5zIFRoZSBwYXJzZWQgdmFsdWVcbiAqLyAodCwgZSksIG51bGw7XG4gICAgaWYgKHZvaWQgMCA9PT0gdCAmJiBlLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMpIFxuICAgIC8vIElmIHRoZSBpbnB1dCBpcyB1bmRlZmluZWQgaXQgY2FuIG5ldmVyIHBhcnRpY2lwYXRlIGluIHRoZSBmaWVsZE1hc2ssIHNvXG4gICAgLy8gZG9uJ3QgaGFuZGxlIHRoaXMgYmVsb3cuIElmIGBpZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzYCBpcyBmYWxzZSxcbiAgICAvLyBgcGFyc2VTY2FsYXJWYWx1ZWAgd2lsbCByZWplY3QgYW4gdW5kZWZpbmVkIHZhbHVlLlxuICAgIHJldHVybiBudWxsO1xuICAgIGlmIChcbiAgICAvLyBJZiBjb250ZXh0LnBhdGggaXMgbnVsbCB3ZSBhcmUgaW5zaWRlIGFuIGFycmF5IGFuZCB3ZSBkb24ndCBzdXBwb3J0XG4gICAgLy8gZmllbGQgbWFzayBwYXRocyBtb3JlIGdyYW51bGFyIHRoYW4gdGhlIHRvcC1sZXZlbCBhcnJheS5cbiAgICBlLnBhdGggJiYgZS5maWVsZE1hc2sucHVzaChlLnBhdGgpLCB0IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgLy8gVE9ETyhiLzM0ODcxMTMxKTogSW5jbHVkZSB0aGUgcGF0aCBjb250YWluaW5nIHRoZSBhcnJheSBpbiB0aGUgZXJyb3JcbiAgICAgICAgLy8gbWVzc2FnZS5cbiAgICAgICAgLy8gSW4gdGhlIGNhc2Ugb2YgSU4gcXVlcmllcywgdGhlIHBhcnNlZCBkYXRhIGlzIGFuIGFycmF5IChyZXByZXNlbnRpbmdcbiAgICAgICAgLy8gdGhlIHNldCBvZiB2YWx1ZXMgdG8gYmUgaW5jbHVkZWQgZm9yIHRoZSBJTiBxdWVyeSkgdGhhdCBtYXkgZGlyZWN0bHlcbiAgICAgICAgLy8gY29udGFpbiBhZGRpdGlvbmFsIGFycmF5cyAoZWFjaCByZXByZXNlbnRpbmcgYW4gaW5kaXZpZHVhbCBmaWVsZFxuICAgICAgICAvLyB2YWx1ZSksIHNvIHdlIGRpc2FibGUgdGhpcyB2YWxpZGF0aW9uLlxuICAgICAgICBpZiAoZS5zZXR0aW5ncy5PYSAmJiA0IC8qIEFycmF5QXJndW1lbnQgKi8gIT09IGUueGEpIHRocm93IGUuVWEoXCJOZXN0ZWQgYXJyYXlzIGFyZSBub3Qgc3VwcG9ydGVkXCIpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IFtdO1xuICAgICAgICAgICAgbGV0IHMgPSAwO1xuICAgICAgICAgICAgZm9yIChjb25zdCBpIG9mIHQpIHtcbiAgICAgICAgICAgICAgICBsZXQgdCA9IEV1KGksIGUuQmEocykpO1xuICAgICAgICAgICAgICAgIG51bGwgPT0gdCAmJiAoXG4gICAgICAgICAgICAgICAgLy8gSnVzdCBpbmNsdWRlIG51bGxzIGluIHRoZSBhcnJheSBmb3IgZmllbGRzIGJlaW5nIHJlcGxhY2VkIHdpdGggYVxuICAgICAgICAgICAgICAgIC8vIHNlbnRpbmVsLlxuICAgICAgICAgICAgICAgIHQgPSB7XG4gICAgICAgICAgICAgICAgICAgIG51bGxWYWx1ZTogXCJOVUxMX1ZBTFVFXCJcbiAgICAgICAgICAgICAgICB9KSwgbi5wdXNoKHQpLCBzKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSh0LCBlKTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgaWYgKG51bGwgPT09ICh0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpKSkgcmV0dXJuIHtcbiAgICAgICAgICAgIG51bGxWYWx1ZTogXCJOVUxMX1ZBTFVFXCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKFwibnVtYmVyXCIgPT0gdHlwZW9mIHQpIHJldHVybiB4ZShlLmssIHQpO1xuICAgICAgICBpZiAoXCJib29sZWFuXCIgPT0gdHlwZW9mIHQpIHJldHVybiB7XG4gICAgICAgICAgICBib29sZWFuVmFsdWU6IHRcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQpIHJldHVybiB7XG4gICAgICAgICAgICBzdHJpbmdWYWx1ZTogdFxuICAgICAgICB9O1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBhdC5mcm9tRGF0ZSh0KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdGltZXN0YW1wVmFsdWU6IGpuKGUuaywgbilcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBhdCkge1xuICAgICAgICAgICAgLy8gRmlyZXN0b3JlIGJhY2tlbmQgdHJ1bmNhdGVzIHByZWNpc2lvbiBkb3duIHRvIG1pY3Jvc2Vjb25kcy4gVG8gZW5zdXJlXG4gICAgICAgICAgICAvLyBvZmZsaW5lIG1vZGUgd29ya3MgdGhlIHNhbWUgd2l0aCByZWdhcmRzIHRvIHRydW5jYXRpb24sIHBlcmZvcm0gdGhlXG4gICAgICAgICAgICAvLyB0cnVuY2F0aW9uIGltbWVkaWF0ZWx5IHdpdGhvdXQgd2FpdGluZyBmb3IgdGhlIGJhY2tlbmQgdG8gZG8gdGhhdC5cbiAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgYXQodC5zZWNvbmRzLCAxZTMgKiBNYXRoLmZsb29yKHQubmFub3NlY29uZHMgLyAxZTMpKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdGltZXN0YW1wVmFsdWU6IGpuKGUuaywgbilcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBzdSkgcmV0dXJuIHtcbiAgICAgICAgICAgIGdlb1BvaW50VmFsdWU6IHtcbiAgICAgICAgICAgICAgICBsYXRpdHVkZTogdC5sYXRpdHVkZSxcbiAgICAgICAgICAgICAgICBsb25naXR1ZGU6IHQubG9uZ2l0dWRlXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgZXUpIHJldHVybiB7XG4gICAgICAgICAgICBieXRlc1ZhbHVlOiBRbihlLmssIHQuX2J5dGVTdHJpbmcpXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgUGMpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLmRhdGFiYXNlSWQsIHMgPSB0LmZpcmVzdG9yZS5fZGF0YWJhc2VJZDtcbiAgICAgICAgICAgIGlmICghcy5pc0VxdWFsKG4pKSB0aHJvdyBlLlVhKGBEb2N1bWVudCByZWZlcmVuY2UgaXMgZm9yIGRhdGFiYXNlICR7cy5wcm9qZWN0SWR9LyR7cy5kYXRhYmFzZX0gYnV0IHNob3VsZCBiZSBmb3IgZGF0YWJhc2UgJHtuLnByb2plY3RJZH0vJHtuLmRhdGFiYXNlfWApO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICByZWZlcmVuY2VWYWx1ZTogem4odC5maXJlc3RvcmUuX2RhdGFiYXNlSWQgfHwgZS5kYXRhYmFzZUlkLCB0Ll9rZXkucGF0aClcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgZS5VYShgVW5zdXBwb3J0ZWQgZmllbGQgdmFsdWU6ICR7cGModCl9YCk7XG4gICAgfVxuICAgIC8qKlxuICogQ2hlY2tzIHdoZXRoZXIgYW4gb2JqZWN0IGxvb2tzIGxpa2UgYSBKU09OIG9iamVjdCB0aGF0IHNob3VsZCBiZSBjb252ZXJ0ZWRcbiAqIGludG8gYSBzdHJ1Y3QuIE5vcm1hbCBjbGFzcy9wcm90b3R5cGUgaW5zdGFuY2VzIGFyZSBjb25zaWRlcmVkIHRvIGxvb2sgbGlrZVxuICogSlNPTiBvYmplY3RzIHNpbmNlIHRoZXkgc2hvdWxkIGJlIGNvbnZlcnRlZCB0byBhIHN0cnVjdCB2YWx1ZS4gQXJyYXlzLCBEYXRlcyxcbiAqIEdlb1BvaW50cywgZXRjLiBhcmUgbm90IGNvbnNpZGVyZWQgdG8gbG9vayBsaWtlIEpTT04gb2JqZWN0cyBzaW5jZSB0aGV5IG1hcFxuICogdG8gc3BlY2lmaWMgRmllbGRWYWx1ZSB0eXBlcyBvdGhlciB0aGFuIE9iamVjdFZhbHVlLlxuICovICh0LCBlKTtcbn1cblxuZnVuY3Rpb24gSXUodCwgZSkge1xuICAgIGNvbnN0IG4gPSB7fTtcbiAgICByZXR1cm4gbHQodCkgPyBcbiAgICAvLyBJZiB3ZSBlbmNvdW50ZXIgYW4gZW1wdHkgb2JqZWN0LCB3ZSBleHBsaWNpdGx5IGFkZCBpdCB0byB0aGUgdXBkYXRlXG4gICAgLy8gbWFzayB0byBlbnN1cmUgdGhhdCB0aGUgc2VydmVyIGNyZWF0ZXMgYSBtYXAgZW50cnkuXG4gICAgZS5wYXRoICYmIGUucGF0aC5sZW5ndGggPiAwICYmIGUuZmllbGRNYXNrLnB1c2goZS5wYXRoKSA6IGh0KHQsICgodCwgcykgPT4ge1xuICAgICAgICBjb25zdCBpID0gRXUocywgZS5GYSh0KSk7XG4gICAgICAgIG51bGwgIT0gaSAmJiAoblt0XSA9IGkpO1xuICAgIH0pKSwge1xuICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgZmllbGRzOiBuXG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBBdSh0KSB7XG4gICAgcmV0dXJuICEoXCJvYmplY3RcIiAhPSB0eXBlb2YgdCB8fCBudWxsID09PSB0IHx8IHQgaW5zdGFuY2VvZiBBcnJheSB8fCB0IGluc3RhbmNlb2YgRGF0ZSB8fCB0IGluc3RhbmNlb2YgYXQgfHwgdCBpbnN0YW5jZW9mIHN1IHx8IHQgaW5zdGFuY2VvZiBldSB8fCB0IGluc3RhbmNlb2YgUGMgfHwgdCBpbnN0YW5jZW9mIG51KTtcbn1cblxuZnVuY3Rpb24gUnUodCwgZSwgbikge1xuICAgIGlmICghQXUobikgfHwgIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIFwib2JqZWN0XCIgPT0gdHlwZW9mIHQgJiYgbnVsbCAhPT0gdCAmJiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKHQpID09PSBPYmplY3QucHJvdG90eXBlIHx8IG51bGwgPT09IE9iamVjdC5nZXRQcm90b3R5cGVPZih0KSk7XG4gICAgfShuKSkge1xuICAgICAgICBjb25zdCBzID0gcGMobik7XG4gICAgICAgIHRocm93IFwiYW4gb2JqZWN0XCIgPT09IHMgPyBlLlVhKHQgKyBcIiBhIGN1c3RvbSBvYmplY3RcIikgOiBlLlVhKHQgKyBcIiBcIiArIHMpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdGhhdCBjYWxscyBmcm9tRG90U2VwYXJhdGVkU3RyaW5nKCkgYnV0IHdyYXBzIGFueSBlcnJvciB0aHJvd24uXG4gKi8gZnVuY3Rpb24gUHUodCwgZSwgbikge1xuICAgIGlmICgoXG4gICAgLy8gSWYgcmVxdWlyZWQsIHJlcGxhY2UgdGhlIEZpZWxkUGF0aCBDb21wYXQgY2xhc3Mgd2l0aCB3aXRoIHRoZSBmaXJlc3RvcmUtZXhwXG4gICAgLy8gRmllbGRQYXRoLlxuICAgIGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSkpIGluc3RhbmNlb2YgWmMpIHJldHVybiBlLl9pbnRlcm5hbFBhdGg7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIGUpIHJldHVybiB2dSh0LCBlKTtcbiAgICB0aHJvdyBWdShcIkZpZWxkIHBhdGggYXJndW1lbnRzIG11c3QgYmUgb2YgdHlwZSBzdHJpbmcgb3IgRmllbGRQYXRoLlwiLCB0LCBcbiAgICAvKiBoYXNDb252ZXJ0ZXI9ICovICExLCBcbiAgICAvKiBwYXRoPSAqLyB2b2lkIDAsIG4pO1xufVxuXG4vKipcbiAqIE1hdGNoZXMgYW55IGNoYXJhY3RlcnMgaW4gYSBmaWVsZCBwYXRoIHN0cmluZyB0aGF0IGFyZSByZXNlcnZlZC5cbiAqLyBjb25zdCBidSA9IG5ldyBSZWdFeHAoXCJbflxcXFwqL1xcXFxbXFxcXF1dXCIpO1xuXG4vKipcbiAqIFdyYXBzIGZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcgd2l0aCBhbiBlcnJvciBtZXNzYWdlIGFib3V0IHRoZSBtZXRob2QgdGhhdFxuICogd2FzIHRocm93bi5cbiAqIEBwYXJhbSBtZXRob2ROYW1lIC0gVGhlIHB1YmxpY2x5IHZpc2libGUgbWV0aG9kIG5hbWVcbiAqIEBwYXJhbSBwYXRoIC0gVGhlIGRvdC1zZXBhcmF0ZWQgc3RyaW5nIGZvcm0gb2YgYSBmaWVsZCBwYXRoIHdoaWNoIHdpbGwgYmVcbiAqIHNwbGl0IG9uIGRvdHMuXG4gKiBAcGFyYW0gdGFyZ2V0RG9jIC0gVGhlIGRvY3VtZW50IGFnYWluc3Qgd2hpY2ggdGhlIGZpZWxkIHBhdGggd2lsbCBiZVxuICogZXZhbHVhdGVkLlxuICovIGZ1bmN0aW9uIHZ1KHQsIGUsIG4pIHtcbiAgICBpZiAoZS5zZWFyY2goYnUpID49IDApIHRocm93IFZ1KGBJbnZhbGlkIGZpZWxkIHBhdGggKCR7ZX0pLiBQYXRocyBtdXN0IG5vdCBjb250YWluICd+JywgJyonLCAnLycsICdbJywgb3IgJ10nYCwgdCwgXG4gICAgLyogaGFzQ29udmVydGVyPSAqLyAhMSwgXG4gICAgLyogcGF0aD0gKi8gdm9pZCAwLCBuKTtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gbmV3IFpjKC4uLmUuc3BsaXQoXCIuXCIpKS5faW50ZXJuYWxQYXRoO1xuICAgIH0gY2F0Y2ggKHMpIHtcbiAgICAgICAgdGhyb3cgVnUoYEludmFsaWQgZmllbGQgcGF0aCAoJHtlfSkuIFBhdGhzIG11c3Qgbm90IGJlIGVtcHR5LCBiZWdpbiB3aXRoICcuJywgZW5kIHdpdGggJy4nLCBvciBjb250YWluICcuLidgLCB0LCBcbiAgICAgICAgLyogaGFzQ29udmVydGVyPSAqLyAhMSwgXG4gICAgICAgIC8qIHBhdGg9ICovIHZvaWQgMCwgbik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBWdSh0LCBlLCBuLCBzLCBpKSB7XG4gICAgY29uc3QgciA9IHMgJiYgIXMuaXNFbXB0eSgpLCBvID0gdm9pZCAwICE9PSBpO1xuICAgIGxldCBhID0gYEZ1bmN0aW9uICR7ZX0oKSBjYWxsZWQgd2l0aCBpbnZhbGlkIGRhdGFgO1xuICAgIG4gJiYgKGEgKz0gXCIgKHZpYSBgdG9GaXJlc3RvcmUoKWApXCIpLCBhICs9IFwiLiBcIjtcbiAgICBsZXQgYyA9IFwiXCI7XG4gICAgcmV0dXJuIChyIHx8IG8pICYmIChjICs9IFwiIChmb3VuZFwiLCByICYmIChjICs9IGAgaW4gZmllbGQgJHtzfWApLCBvICYmIChjICs9IGAgaW4gZG9jdW1lbnQgJHtpfWApLCBcbiAgICBjICs9IFwiKVwiKSwgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBhICsgdCArIGMpO1xufVxuXG4vKiogQ2hlY2tzIGBoYXlzdGFja2AgaWYgRmllbGRQYXRoIGBuZWVkbGVgIGlzIHByZXNlbnQuIFJ1bnMgaW4gTyhuKS4gKi8gZnVuY3Rpb24gU3UodCwgZSkge1xuICAgIHJldHVybiB0LnNvbWUoKHQgPT4gdC5pc0VxdWFsKGUpKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5zIGRhdGEgcmVhZCBmcm9tIGEgZG9jdW1lbnQgaW4geW91ciBGaXJlc3RvcmVcbiAqIGRhdGFiYXNlLiBUaGUgZGF0YSBjYW4gYmUgZXh0cmFjdGVkIHdpdGggYC5kYXRhKClgIG9yIGAuZ2V0KDxmaWVsZD4pYCB0b1xuICogZ2V0IGEgc3BlY2lmaWMgZmllbGQuXG4gKlxuICogRm9yIGEgYERvY3VtZW50U25hcHNob3RgIHRoYXQgcG9pbnRzIHRvIGEgbm9uLWV4aXN0aW5nIGRvY3VtZW50LCBhbnkgZGF0YVxuICogYWNjZXNzIHdpbGwgcmV0dXJuICd1bmRlZmluZWQnLiBZb3UgY2FuIHVzZSB0aGUgYGV4aXN0cygpYCBtZXRob2QgdG9cbiAqIGV4cGxpY2l0bHkgdmVyaWZ5IGEgZG9jdW1lbnQncyBleGlzdGVuY2UuXG4gKi8gY2xhc3MgRHUge1xuICAgIC8vIE5vdGU6IFRoaXMgY2xhc3MgaXMgc3RyaXBwZWQgZG93biB2ZXJzaW9uIG9mIHRoZSBEb2N1bWVudFNuYXBzaG90IGluXG4gICAgLy8gdGhlIGxlZ2FjeSBTREsuIFRoZSBjaGFuZ2VzIGFyZTpcbiAgICAvLyAtIE5vIHN1cHBvcnQgZm9yIFNuYXBzaG90TWV0YWRhdGEuXG4gICAgLy8gLSBObyBzdXBwb3J0IGZvciBTbmFwc2hvdE9wdGlvbnMuXG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgcHJvdGVjdGVkICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSkge1xuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSB0LCB0aGlzLl91c2VyRGF0YVdyaXRlciA9IGUsIHRoaXMuX2tleSA9IG4sIHRoaXMuX2RvY3VtZW50ID0gcywgXG4gICAgICAgIHRoaXMuX2NvbnZlcnRlciA9IGk7XG4gICAgfVxuICAgIC8qKiBQcm9wZXJ0eSBvZiB0aGUgYERvY3VtZW50U25hcHNob3RgIHRoYXQgcHJvdmlkZXMgdGhlIGRvY3VtZW50J3MgSUQuICovICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleS5wYXRoLmxhc3RTZWdtZW50KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBgRG9jdW1lbnRSZWZlcmVuY2VgIGZvciB0aGUgZG9jdW1lbnQgaW5jbHVkZWQgaW4gdGhlIGBEb2N1bWVudFNuYXBzaG90YC5cbiAgICAgKi8gICAgZ2V0IHJlZigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQYyh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX2NvbnZlcnRlciwgdGhpcy5fa2V5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2lnbmFscyB3aGV0aGVyIG9yIG5vdCB0aGUgZG9jdW1lbnQgYXQgdGhlIHNuYXBzaG90J3MgbG9jYXRpb24gZXhpc3RzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgZG9jdW1lbnQgZXhpc3RzLlxuICAgICAqLyAgICBleGlzdHMoKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLl9kb2N1bWVudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IGFzIGFuIGBPYmplY3RgLiBSZXR1cm5zIGB1bmRlZmluZWRgIGlmXG4gICAgICogdGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBbiBgT2JqZWN0YCBjb250YWluaW5nIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IG9yIGB1bmRlZmluZWRgXG4gICAgICogaWYgdGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QuXG4gICAgICovICAgIGRhdGEoKSB7XG4gICAgICAgIGlmICh0aGlzLl9kb2N1bWVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2NvbnZlcnRlcikge1xuICAgICAgICAgICAgICAgIC8vIFdlIG9ubHkgd2FudCB0byB1c2UgdGhlIGNvbnZlcnRlciBhbmQgY3JlYXRlIGEgbmV3IERvY3VtZW50U25hcHNob3RcbiAgICAgICAgICAgICAgICAvLyBpZiBhIGNvbnZlcnRlciBoYXMgYmVlbiBwcm92aWRlZC5cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gbmV3IEN1KHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fdXNlckRhdGFXcml0ZXIsIHRoaXMuX2tleSwgdGhpcy5fZG9jdW1lbnQsIFxuICAgICAgICAgICAgICAgIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnZlcnRlci5mcm9tRmlyZXN0b3JlKHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJEYXRhV3JpdGVyLmNvbnZlcnRWYWx1ZSh0aGlzLl9kb2N1bWVudC5kYXRhLnZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGZpZWxkIHNwZWNpZmllZCBieSBgZmllbGRQYXRoYC4gUmV0dXJucyBgdW5kZWZpbmVkYCBpZiB0aGVcbiAgICAgKiBkb2N1bWVudCBvciBmaWVsZCBkb2Vzbid0IGV4aXN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpZWxkUGF0aCAtIFRoZSBwYXRoIChmb3IgZXhhbXBsZSAnZm9vJyBvciAnZm9vLmJhcicpIHRvIGEgc3BlY2lmaWNcbiAgICAgKiBmaWVsZC5cbiAgICAgKiBAcmV0dXJucyBUaGUgZGF0YSBhdCB0aGUgc3BlY2lmaWVkIGZpZWxkIGxvY2F0aW9uIG9yIHVuZGVmaW5lZCBpZiBubyBzdWNoXG4gICAgICogZmllbGQgZXhpc3RzIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKi9cbiAgICAvLyBXZSBhcmUgdXNpbmcgYGFueWAgaGVyZSB0byBhdm9pZCBhbiBleHBsaWNpdCBjYXN0IGJ5IG91ciB1c2Vycy5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGdldCh0KSB7XG4gICAgICAgIGlmICh0aGlzLl9kb2N1bWVudCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuX2RvY3VtZW50LmRhdGEuZmllbGQoTnUoXCJEb2N1bWVudFNuYXBzaG90LmdldFwiLCB0KSk7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gZSkgcmV0dXJuIHRoaXMuX3VzZXJEYXRhV3JpdGVyLmNvbnZlcnRWYWx1ZShlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBRdWVyeURvY3VtZW50U25hcHNob3RgIGNvbnRhaW5zIGRhdGEgcmVhZCBmcm9tIGEgZG9jdW1lbnQgaW4geW91clxuICogRmlyZXN0b3JlIGRhdGFiYXNlIGFzIHBhcnQgb2YgYSBxdWVyeS4gVGhlIGRvY3VtZW50IGlzIGd1YXJhbnRlZWQgdG8gZXhpc3RcbiAqIGFuZCBpdHMgZGF0YSBjYW4gYmUgZXh0cmFjdGVkIHdpdGggYC5kYXRhKClgIG9yIGAuZ2V0KDxmaWVsZD4pYCB0byBnZXQgYVxuICogc3BlY2lmaWMgZmllbGQuXG4gKlxuICogQSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBvZmZlcnMgdGhlIHNhbWUgQVBJIHN1cmZhY2UgYXMgYVxuICogYERvY3VtZW50U25hcHNob3RgLiBTaW5jZSBxdWVyeSByZXN1bHRzIGNvbnRhaW4gb25seSBleGlzdGluZyBkb2N1bWVudHMsIHRoZVxuICogYGV4aXN0c2AgcHJvcGVydHkgd2lsbCBhbHdheXMgYmUgdHJ1ZSBhbmQgYGRhdGEoKWAgd2lsbCBuZXZlciByZXR1cm5cbiAqICd1bmRlZmluZWQnLlxuICovIGNsYXNzIEN1IGV4dGVuZHMgRHUge1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBhcyBhbiBgT2JqZWN0YC5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEByZXR1cm5zIEFuIGBPYmplY3RgIGNvbnRhaW5pbmcgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICovXG4gICAgZGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmRhdGEoKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRoYXQgY2FsbHMgYGZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcoKWAgYnV0IHdyYXBzIGFueSBlcnJvciB0aHJvd24uXG4gKi8gZnVuY3Rpb24gTnUodCwgZSkge1xuICAgIHJldHVybiBcInN0cmluZ1wiID09IHR5cGVvZiBlID8gdnUodCwgZSkgOiBlIGluc3RhbmNlb2YgWmMgPyBlLl9pbnRlcm5hbFBhdGggOiBlLl9kZWxlZ2F0ZS5faW50ZXJuYWxQYXRoO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBNZXRhZGF0YSBhYm91dCBhIHNuYXBzaG90LCBkZXNjcmliaW5nIHRoZSBzdGF0ZSBvZiB0aGUgc25hcHNob3QuXG4gKi8gY2xhc3Mga3Uge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmhhc1BlbmRpbmdXcml0ZXMgPSB0LCB0aGlzLmZyb21DYWNoZSA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGBTbmFwc2hvdE1ldGFkYXRhYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBTbmFwc2hvdE1ldGFkYXRhYCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBTbmFwc2hvdE1ldGFkYXRhYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqLyAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzUGVuZGluZ1dyaXRlcyA9PT0gdC5oYXNQZW5kaW5nV3JpdGVzICYmIHRoaXMuZnJvbUNhY2hlID09PSB0LmZyb21DYWNoZTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBgRG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbnMgZGF0YSByZWFkIGZyb20gYSBkb2N1bWVudCBpbiB5b3VyIEZpcmVzdG9yZVxuICogZGF0YWJhc2UuIFRoZSBkYXRhIGNhbiBiZSBleHRyYWN0ZWQgd2l0aCBgLmRhdGEoKWAgb3IgYC5nZXQoPGZpZWxkPilgIHRvXG4gKiBnZXQgYSBzcGVjaWZpYyBmaWVsZC5cbiAqXG4gKiBGb3IgYSBgRG9jdW1lbnRTbmFwc2hvdGAgdGhhdCBwb2ludHMgdG8gYSBub24tZXhpc3RpbmcgZG9jdW1lbnQsIGFueSBkYXRhXG4gKiBhY2Nlc3Mgd2lsbCByZXR1cm4gJ3VuZGVmaW5lZCcuIFlvdSBjYW4gdXNlIHRoZSBgZXhpc3RzKClgIG1ldGhvZCB0b1xuICogZXhwbGljaXRseSB2ZXJpZnkgYSBkb2N1bWVudCdzIGV4aXN0ZW5jZS5cbiAqLyBjbGFzcyB4dSBleHRlbmRzIER1IHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciBwcm90ZWN0ZWQgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByKSB7XG4gICAgICAgIHN1cGVyKHQsIGUsIG4sIHMsIHIpLCB0aGlzLl9maXJlc3RvcmUgPSB0LCB0aGlzLl9maXJlc3RvcmVJbXBsID0gdCwgdGhpcy5tZXRhZGF0YSA9IGk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByb3BlcnR5IG9mIHRoZSBgRG9jdW1lbnRTbmFwc2hvdGAgdGhhdCBzaWduYWxzIHdoZXRoZXIgb3Igbm90IHRoZSBkYXRhXG4gICAgICogZXhpc3RzLiBUcnVlIGlmIHRoZSBkb2N1bWVudCBleGlzdHMuXG4gICAgICovICAgIGV4aXN0cygpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmV4aXN0cygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgYXMgYW4gYE9iamVjdGAuIFJldHVybnMgYHVuZGVmaW5lZGAgaWZcbiAgICAgKiB0aGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQsIGBGaWVsZFZhbHVlLnNlcnZlclRpbWVzdGFtcCgpYCB2YWx1ZXMgdGhhdCBoYXZlIG5vdCB5ZXQgYmVlblxuICAgICAqIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSB3aWxsIGJlIHJldHVybmVkIGFzIGBudWxsYC4gWW91IGNhbiBvdmVycmlkZVxuICAgICAqIHRoaXMgYnkgcGFzc2luZyBhbiBvcHRpb25zIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb3B0aW9ucyBvYmplY3QgdG8gY29uZmlndXJlIGhvdyBkYXRhIGlzIHJldHJpZXZlZCBmcm9tXG4gICAgICogdGhlIHNuYXBzaG90IChmb3IgZXhhbXBsZSB0aGUgZGVzaXJlZCBiZWhhdmlvciBmb3Igc2VydmVyIHRpbWVzdGFtcHMgdGhhdFxuICAgICAqIGhhdmUgbm90IHlldCBiZWVuIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSkuXG4gICAgICogQHJldHVybnMgQW4gYE9iamVjdGAgY29udGFpbmluZyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBvciBgdW5kZWZpbmVkYCBpZlxuICAgICAqIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAqLyAgICBkYXRhKHQgPSB7fSkge1xuICAgICAgICBpZiAodGhpcy5fZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jb252ZXJ0ZXIpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBvbmx5IHdhbnQgdG8gdXNlIHRoZSBjb252ZXJ0ZXIgYW5kIGNyZWF0ZSBhIG5ldyBEb2N1bWVudFNuYXBzaG90XG4gICAgICAgICAgICAgICAgLy8gaWYgYSBjb252ZXJ0ZXIgaGFzIGJlZW4gcHJvdmlkZWQuXG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyAkdSh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX3VzZXJEYXRhV3JpdGVyLCB0aGlzLl9rZXksIHRoaXMuX2RvY3VtZW50LCB0aGlzLm1ldGFkYXRhLCBcbiAgICAgICAgICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jb252ZXJ0ZXIuZnJvbUZpcmVzdG9yZShlLCB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl91c2VyRGF0YVdyaXRlci5jb252ZXJ0VmFsdWUodGhpcy5fZG9jdW1lbnQuZGF0YS52YWx1ZSwgdC5zZXJ2ZXJUaW1lc3RhbXBzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGZpZWxkIHNwZWNpZmllZCBieSBgZmllbGRQYXRoYC4gUmV0dXJucyBgdW5kZWZpbmVkYCBpZiB0aGVcbiAgICAgKiBkb2N1bWVudCBvciBmaWVsZCBkb2Vzbid0IGV4aXN0LlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCwgYSBgRmllbGRWYWx1ZS5zZXJ2ZXJUaW1lc3RhbXAoKWAgdGhhdCBoYXMgbm90IHlldCBiZWVuIHNldCB0b1xuICAgICAqIGl0cyBmaW5hbCB2YWx1ZSB3aWxsIGJlIHJldHVybmVkIGFzIGBudWxsYC4gWW91IGNhbiBvdmVycmlkZSB0aGlzIGJ5XG4gICAgICogcGFzc2luZyBhbiBvcHRpb25zIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWVsZFBhdGggLSBUaGUgcGF0aCAoZm9yIGV4YW1wbGUgJ2Zvbycgb3IgJ2Zvby5iYXInKSB0byBhIHNwZWNpZmljXG4gICAgICogZmllbGQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBbiBvcHRpb25zIG9iamVjdCB0byBjb25maWd1cmUgaG93IHRoZSBmaWVsZCBpcyByZXRyaWV2ZWRcbiAgICAgKiBmcm9tIHRoZSBzbmFwc2hvdCAoZm9yIGV4YW1wbGUgdGhlIGRlc2lyZWQgYmVoYXZpb3IgZm9yIHNlcnZlciB0aW1lc3RhbXBzXG4gICAgICogdGhhdCBoYXZlIG5vdCB5ZXQgYmVlbiBzZXQgdG8gdGhlaXIgZmluYWwgdmFsdWUpLlxuICAgICAqIEByZXR1cm5zIFRoZSBkYXRhIGF0IHRoZSBzcGVjaWZpZWQgZmllbGQgbG9jYXRpb24gb3IgdW5kZWZpbmVkIGlmIG5vIHN1Y2hcbiAgICAgKiBmaWVsZCBleGlzdHMgaW4gdGhlIGRvY3VtZW50LlxuICAgICAqL1xuICAgIC8vIFdlIGFyZSB1c2luZyBgYW55YCBoZXJlIHRvIGF2b2lkIGFuIGV4cGxpY2l0IGNhc3QgYnkgb3VyIHVzZXJzLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgZ2V0KHQsIGUgPSB7fSkge1xuICAgICAgICBpZiAodGhpcy5fZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLl9kb2N1bWVudC5kYXRhLmZpZWxkKE51KFwiRG9jdW1lbnRTbmFwc2hvdC5nZXRcIiwgdCkpO1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IG4pIHJldHVybiB0aGlzLl91c2VyRGF0YVdyaXRlci5jb252ZXJ0VmFsdWUobiwgZS5zZXJ2ZXJUaW1lc3RhbXBzKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBRdWVyeURvY3VtZW50U25hcHNob3RgIGNvbnRhaW5zIGRhdGEgcmVhZCBmcm9tIGEgZG9jdW1lbnQgaW4geW91clxuICogRmlyZXN0b3JlIGRhdGFiYXNlIGFzIHBhcnQgb2YgYSBxdWVyeS4gVGhlIGRvY3VtZW50IGlzIGd1YXJhbnRlZWQgdG8gZXhpc3RcbiAqIGFuZCBpdHMgZGF0YSBjYW4gYmUgZXh0cmFjdGVkIHdpdGggYC5kYXRhKClgIG9yIGAuZ2V0KDxmaWVsZD4pYCB0byBnZXQgYVxuICogc3BlY2lmaWMgZmllbGQuXG4gKlxuICogQSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBvZmZlcnMgdGhlIHNhbWUgQVBJIHN1cmZhY2UgYXMgYVxuICogYERvY3VtZW50U25hcHNob3RgLiBTaW5jZSBxdWVyeSByZXN1bHRzIGNvbnRhaW4gb25seSBleGlzdGluZyBkb2N1bWVudHMsIHRoZVxuICogYGV4aXN0c2AgcHJvcGVydHkgd2lsbCBhbHdheXMgYmUgdHJ1ZSBhbmQgYGRhdGEoKWAgd2lsbCBuZXZlciByZXR1cm5cbiAqICd1bmRlZmluZWQnLlxuICovIGNsYXNzICR1IGV4dGVuZHMgeHUge1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBhcyBhbiBgT2JqZWN0YC5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQsIGBGaWVsZFZhbHVlLnNlcnZlclRpbWVzdGFtcCgpYCB2YWx1ZXMgdGhhdCBoYXZlIG5vdCB5ZXQgYmVlblxuICAgICAqIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSB3aWxsIGJlIHJldHVybmVkIGFzIGBudWxsYC4gWW91IGNhbiBvdmVycmlkZVxuICAgICAqIHRoaXMgYnkgcGFzc2luZyBhbiBvcHRpb25zIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb3B0aW9ucyBvYmplY3QgdG8gY29uZmlndXJlIGhvdyBkYXRhIGlzIHJldHJpZXZlZCBmcm9tXG4gICAgICogdGhlIHNuYXBzaG90IChmb3IgZXhhbXBsZSB0aGUgZGVzaXJlZCBiZWhhdmlvciBmb3Igc2VydmVyIHRpbWVzdGFtcHMgdGhhdFxuICAgICAqIGhhdmUgbm90IHlldCBiZWVuIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSkuXG4gICAgICogQHJldHVybnMgQW4gYE9iamVjdGAgY29udGFpbmluZyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKi9cbiAgICBkYXRhKHQgPSB7fSkge1xuICAgICAgICByZXR1cm4gc3VwZXIuZGF0YSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBgUXVlcnlTbmFwc2hvdGAgY29udGFpbnMgemVybyBvciBtb3JlIGBEb2N1bWVudFNuYXBzaG90YCBvYmplY3RzXG4gKiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdHMgb2YgYSBxdWVyeS4gVGhlIGRvY3VtZW50cyBjYW4gYmUgYWNjZXNzZWQgYXMgYW5cbiAqIGFycmF5IHZpYSB0aGUgYGRvY3NgIHByb3BlcnR5IG9yIGVudW1lcmF0ZWQgdXNpbmcgdGhlIGBmb3JFYWNoYCBtZXRob2QuIFRoZVxuICogbnVtYmVyIG9mIGRvY3VtZW50cyBjYW4gYmUgZGV0ZXJtaW5lZCB2aWEgdGhlIGBlbXB0eWAgYW5kIGBzaXplYFxuICogcHJvcGVydGllcy5cbiAqLyBjbGFzcyBGdSB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IHQsIHRoaXMuX3VzZXJEYXRhV3JpdGVyID0gZSwgdGhpcy5fc25hcHNob3QgPSBzLCB0aGlzLm1ldGFkYXRhID0gbmV3IGt1KHMuaGFzUGVuZGluZ1dyaXRlcywgcy5mcm9tQ2FjaGUpLCBcbiAgICAgICAgdGhpcy5xdWVyeSA9IG47XG4gICAgfVxuICAgIC8qKiBBbiBhcnJheSBvZiBhbGwgdGhlIGRvY3VtZW50cyBpbiB0aGUgYFF1ZXJ5U25hcHNob3RgLiAqLyAgICBnZXQgZG9jcygpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKChlID0+IHQucHVzaChlKSkpLCB0O1xuICAgIH1cbiAgICAvKiogVGhlIG51bWJlciBvZiBkb2N1bWVudHMgaW4gdGhlIGBRdWVyeVNuYXBzaG90YC4gKi8gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zbmFwc2hvdC5kb2NzLnNpemU7XG4gICAgfVxuICAgIC8qKiBUcnVlIGlmIHRoZXJlIGFyZSBubyBkb2N1bWVudHMgaW4gdGhlIGBRdWVyeVNuYXBzaG90YC4gKi8gICAgZ2V0IGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gMCA9PT0gdGhpcy5zaXplO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbnVtZXJhdGVzIGFsbCBvZiB0aGUgZG9jdW1lbnRzIGluIHRoZSBgUXVlcnlTbmFwc2hvdGAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgLSBBIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCB3aXRoIGEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgZm9yXG4gICAgICogZWFjaCBkb2N1bWVudCBpbiB0aGUgc25hcHNob3QuXG4gICAgICogQHBhcmFtIHRoaXNBcmcgLSBUaGUgYHRoaXNgIGJpbmRpbmcgZm9yIHRoZSBjYWxsYmFjay5cbiAgICAgKi8gICAgZm9yRWFjaCh0LCBlKSB7XG4gICAgICAgIHRoaXMuX3NuYXBzaG90LmRvY3MuZm9yRWFjaCgobiA9PiB7XG4gICAgICAgICAgICB0LmNhbGwoZSwgbmV3ICR1KHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fdXNlckRhdGFXcml0ZXIsIG4ua2V5LCBuLCBuZXcga3UodGhpcy5fc25hcHNob3QubXV0YXRlZEtleXMuaGFzKG4ua2V5KSwgdGhpcy5fc25hcHNob3QuZnJvbUNhY2hlKSwgdGhpcy5xdWVyeS5jb252ZXJ0ZXIpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIHRoZSBkb2N1bWVudHMgY2hhbmdlcyBzaW5jZSB0aGUgbGFzdCBzbmFwc2hvdC4gSWYgdGhpc1xuICAgICAqIGlzIHRoZSBmaXJzdCBzbmFwc2hvdCwgYWxsIGRvY3VtZW50cyB3aWxsIGJlIGluIHRoZSBsaXN0IGFzICdhZGRlZCdcbiAgICAgKiBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBgU25hcHNob3RMaXN0ZW5PcHRpb25zYCB0aGF0IGNvbnRyb2wgd2hldGhlciBtZXRhZGF0YS1vbmx5XG4gICAgICogY2hhbmdlcyAoaS5lLiBvbmx5IGBEb2N1bWVudFNuYXBzaG90Lm1ldGFkYXRhYCBjaGFuZ2VkKSBzaG91bGQgdHJpZ2dlclxuICAgICAqIHNuYXBzaG90IGV2ZW50cy5cbiAgICAgKi8gICAgZG9jQ2hhbmdlcyh0ID0ge30pIHtcbiAgICAgICAgY29uc3QgZSA9ICEhdC5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzO1xuICAgICAgICBpZiAoZSAmJiB0aGlzLl9zbmFwc2hvdC5leGNsdWRlc01ldGFkYXRhQ2hhbmdlcykgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIlRvIGluY2x1ZGUgbWV0YWRhdGEgY2hhbmdlcyB3aXRoIHlvdXIgZG9jdW1lbnQgY2hhbmdlcywgeW91IG11c3QgYWxzbyBwYXNzIHsgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczp0cnVlIH0gdG8gb25TbmFwc2hvdCgpLlwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZENoYW5nZXMgJiYgdGhpcy5fY2FjaGVkQ2hhbmdlc0luY2x1ZGVNZXRhZGF0YUNoYW5nZXMgPT09IGUgfHwgKHRoaXMuX2NhY2hlZENoYW5nZXMgPSBcbiAgICAgICAgLyoqIENhbGN1bGF0ZXMgdGhlIGFycmF5IG9mIGBEb2N1bWVudENoYW5nZWBzIGZvciBhIGdpdmVuIGBWaWV3U25hcHNob3RgLiAqL1xuICAgICAgICBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBpZiAodC5fc25hcHNob3Qub2xkRG9jcy5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICBsZXQgZSA9IDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHQuX3NuYXBzaG90LmRvY0NoYW5nZXMubWFwKChuID0+ICh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYWRkZWRcIixcbiAgICAgICAgICAgICAgICAgICAgZG9jOiBuZXcgJHUodC5fZmlyZXN0b3JlLCB0Ll91c2VyRGF0YVdyaXRlciwgbi5kb2Mua2V5LCBuLmRvYywgbmV3IGt1KHQuX3NuYXBzaG90Lm11dGF0ZWRLZXlzLmhhcyhuLmRvYy5rZXkpLCB0Ll9zbmFwc2hvdC5mcm9tQ2FjaGUpLCB0LnF1ZXJ5LmNvbnZlcnRlciksXG4gICAgICAgICAgICAgICAgICAgIG9sZEluZGV4OiAtMSxcbiAgICAgICAgICAgICAgICAgICAgbmV3SW5kZXg6IGUrK1xuICAgICAgICAgICAgICAgIH0pKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8gQSBgRG9jdW1lbnRTZXRgIHRoYXQgaXMgdXBkYXRlZCBpbmNyZW1lbnRhbGx5IGFzIGNoYW5nZXMgYXJlIGFwcGxpZWQgdG8gdXNlXG4gICAgICAgICAgICAgICAgLy8gdG8gbG9va3VwIHRoZSBpbmRleCBvZiBhIGRvY3VtZW50LlxuICAgICAgICAgICAgICAgIGxldCBuID0gdC5fc25hcHNob3Qub2xkRG9jcztcbiAgICAgICAgICAgICAgICByZXR1cm4gdC5fc25hcHNob3QuZG9jQ2hhbmdlcy5maWx0ZXIoKHQgPT4gZSB8fCAzIC8qIE1ldGFkYXRhICovICE9PSB0LnR5cGUpKS5tYXAoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gbmV3ICR1KHQuX2ZpcmVzdG9yZSwgdC5fdXNlckRhdGFXcml0ZXIsIGUuZG9jLmtleSwgZS5kb2MsIG5ldyBrdSh0Ll9zbmFwc2hvdC5tdXRhdGVkS2V5cy5oYXMoZS5kb2Mua2V5KSwgdC5fc25hcHNob3QuZnJvbUNhY2hlKSwgdC5xdWVyeS5jb252ZXJ0ZXIpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IC0xLCByID0gLTE7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwIC8qIEFkZGVkICovICE9PSBlLnR5cGUgJiYgKGkgPSBuLmluZGV4T2YoZS5kb2Mua2V5KSwgbiA9IG4uZGVsZXRlKGUuZG9jLmtleSkpLCBcbiAgICAgICAgICAgICAgICAgICAgMSAvKiBSZW1vdmVkICovICE9PSBlLnR5cGUgJiYgKG4gPSBuLmFkZChlLmRvYyksIHIgPSBuLmluZGV4T2YoZS5kb2Mua2V5KSksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IE91KGUudHlwZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2M6IHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRJbmRleDogaSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0luZGV4OiByXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KHRoaXMsIGUpLCB0aGlzLl9jYWNoZWRDaGFuZ2VzSW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyA9IGUpLCB0aGlzLl9jYWNoZWRDaGFuZ2VzO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gT3UodCkge1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgY2FzZSAwIC8qIEFkZGVkICovIDpcbiAgICAgICAgcmV0dXJuIFwiYWRkZWRcIjtcblxuICAgICAgY2FzZSAyIC8qIE1vZGlmaWVkICovIDpcbiAgICAgIGNhc2UgMyAvKiBNZXRhZGF0YSAqLyA6XG4gICAgICAgIHJldHVybiBcIm1vZGlmaWVkXCI7XG5cbiAgICAgIGNhc2UgMSAvKiBSZW1vdmVkICovIDpcbiAgICAgICAgcmV0dXJuIFwicmVtb3ZlZFwiO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gTCgpO1xuICAgIH1cbn1cblxuLy8gVE9ETyhmaXJlc3RvcmVleHApOiBBZGQgdGVzdHMgZm9yIHNuYXBzaG90RXF1YWwgd2l0aCBkaWZmZXJlbnQgc25hcHNob3Rcbi8vIG1ldGFkYXRhXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcHJvdmlkZWQgc25hcHNob3RzIGFyZSBlcXVhbC5cbiAqXG4gKiBAcGFyYW0gbGVmdCAtIEEgc25hcHNob3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSByaWdodCAtIEEgc25hcHNob3QgdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHNuYXBzaG90cyBhcmUgZXF1YWwuXG4gKi8gZnVuY3Rpb24gTXUodCwgZSkge1xuICAgIHJldHVybiB0IGluc3RhbmNlb2YgeHUgJiYgZSBpbnN0YW5jZW9mIHh1ID8gdC5fZmlyZXN0b3JlID09PSBlLl9maXJlc3RvcmUgJiYgdC5fa2V5LmlzRXF1YWwoZS5fa2V5KSAmJiAobnVsbCA9PT0gdC5fZG9jdW1lbnQgPyBudWxsID09PSBlLl9kb2N1bWVudCA6IHQuX2RvY3VtZW50LmlzRXF1YWwoZS5fZG9jdW1lbnQpKSAmJiB0Ll9jb252ZXJ0ZXIgPT09IGUuX2NvbnZlcnRlciA6IHQgaW5zdGFuY2VvZiBGdSAmJiBlIGluc3RhbmNlb2YgRnUgJiYgKHQuX2ZpcmVzdG9yZSA9PT0gZS5fZmlyZXN0b3JlICYmIE5jKHQucXVlcnksIGUucXVlcnkpICYmIHQubWV0YWRhdGEuaXNFcXVhbChlLm1ldGFkYXRhKSAmJiB0Ll9zbmFwc2hvdC5pc0VxdWFsKGUuX3NuYXBzaG90KSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIEx1KHQpIHtcbiAgICBpZiAocGUodCkgJiYgMCA9PT0gdC5leHBsaWNpdE9yZGVyQnkubGVuZ3RoKSB0aHJvdyBuZXcgaihLLlVOSU1QTEVNRU5URUQsIFwibGltaXRUb0xhc3QoKSBxdWVyaWVzIHJlcXVpcmUgc3BlY2lmeWluZyBhdCBsZWFzdCBvbmUgb3JkZXJCeSgpIGNsYXVzZVwiKTtcbn1cblxuLyoqXG4gKiBBIGBRdWVyeUNvbnN0cmFpbnRgIGlzIHVzZWQgdG8gbmFycm93IHRoZSBzZXQgb2YgZG9jdW1lbnRzIHJldHVybmVkIGJ5IGFcbiAqIEZpcmVzdG9yZSBxdWVyeS4gYFF1ZXJ5Q29uc3RyYWludGBzIGFyZSBjcmVhdGVkIGJ5IGludm9raW5nIHtAbGluayB3aGVyZX0sXG4gKiB7QGxpbmsgb3JkZXJCeX0sIHtAbGluayAoc3RhcnRBdDoxKX0sIHtAbGluayAoc3RhcnRBZnRlcjoxKX0sIHtAbGlua1xuICogZW5kQmVmb3JlOjF9LCB7QGxpbmsgKGVuZEF0OjEpfSwge0BsaW5rIGxpbWl0fSBvciB7QGxpbmsgbGltaXRUb0xhc3R9IGFuZFxuICogY2FuIHRoZW4gYmUgcGFzc2VkIHRvIHtAbGluayBxdWVyeX0gdG8gY3JlYXRlIGEgbmV3IHF1ZXJ5IGluc3RhbmNlIHRoYXRcbiAqIGFsc28gY29udGFpbnMgdGhpcyBgUXVlcnlDb25zdHJhaW50YC5cbiAqLyBjbGFzcyBCdSB7fVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgaW1tdXRhYmxlIGluc3RhbmNlIG9mIHtAbGluayBRdWVyeX0gdGhhdCBpcyBleHRlbmRlZCB0byBhbHNvIGluY2x1ZGVcbiAqIGFkZGl0aW9uYWwgcXVlcnkgY29uc3RyYWludHMuXG4gKlxuICogQHBhcmFtIHF1ZXJ5IC0gVGhlIHtAbGluayBRdWVyeX0gaW5zdGFuY2UgdG8gdXNlIGFzIGEgYmFzZSBmb3IgdGhlIG5ldyBjb25zdHJhaW50cy5cbiAqIEBwYXJhbSBxdWVyeUNvbnN0cmFpbnRzIC0gVGhlIGxpc3Qgb2Yge0BsaW5rIFF1ZXJ5Q29uc3RyYWludH1zIHRvIGFwcGx5LlxuICogQHRocm93cyBpZiBhbnkgb2YgdGhlIHByb3ZpZGVkIHF1ZXJ5IGNvbnN0cmFpbnRzIGNhbm5vdCBiZSBjb21iaW5lZCB3aXRoIHRoZVxuICogZXhpc3Rpbmcgb3IgbmV3IGNvbnN0cmFpbnRzLlxuICovIGZ1bmN0aW9uIFV1KHQsIC4uLmUpIHtcbiAgICBmb3IgKGNvbnN0IG4gb2YgZSkgdCA9IG4uX2FwcGx5KHQpO1xuICAgIHJldHVybiB0O1xufVxuXG5jbGFzcyBxdSBleHRlbmRzIEJ1IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuR2EgPSB0LCB0aGlzLnphID0gZSwgdGhpcy5IYSA9IG4sIHRoaXMudHlwZSA9IFwid2hlcmVcIjtcbiAgICB9XG4gICAgX2FwcGx5KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IGh1KHQuZmlyZXN0b3JlKSwgbiA9IGZ1bmN0aW9uKHQsIGUsIG4sIHMsIGksIHIsIG8pIHtcbiAgICAgICAgICAgIGxldCBhO1xuICAgICAgICAgICAgaWYgKGkuaXNLZXlGaWVsZCgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKFwiYXJyYXktY29udGFpbnNcIiAvKiBBUlJBWV9DT05UQUlOUyAqLyA9PT0gciB8fCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyA9PT0gcikgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBRdWVyeS4gWW91IGNhbid0IHBlcmZvcm0gJyR7cn0nIHF1ZXJpZXMgb24gRmllbGRQYXRoLmRvY3VtZW50SWQoKS5gKTtcbiAgICAgICAgICAgICAgICBpZiAoXCJpblwiIC8qIElOICovID09PSByIHx8IFwibm90LWluXCIgLyogTk9UX0lOICovID09PSByKSB7XG4gICAgICAgICAgICAgICAgICAgIHNoKG8sIHIpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiBvKSBlLnB1c2gobmgocywgdCwgbikpO1xuICAgICAgICAgICAgICAgICAgICBhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlWYWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlczogZVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBhID0gbmgocywgdCwgbyk7XG4gICAgICAgICAgICB9IGVsc2UgXCJpblwiIC8qIElOICovICE9PSByICYmIFwibm90LWluXCIgLyogTk9UX0lOICovICE9PSByICYmIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogQVJSQVlfQ09OVEFJTlNfQU5ZICovICE9PSByIHx8IHNoKG8sIHIpLCBcbiAgICAgICAgICAgIGEgPSBUdShuLCBlLCBvLCBcbiAgICAgICAgICAgIC8qIGFsbG93QXJyYXlzPSAqLyBcImluXCIgLyogSU4gKi8gPT09IHIgfHwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gPT09IHIpO1xuICAgICAgICAgICAgY29uc3QgYyA9IFp0LmNyZWF0ZShpLCByLCBhKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUuVigpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBFZSh0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IG4gJiYgIW4uaXNFcXVhbChlLmZpZWxkKSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gQWxsIHdoZXJlIGZpbHRlcnMgd2l0aCBhbiBpbmVxdWFsaXR5ICg8LCA8PSwgIT0sIG5vdC1pbiwgPiwgb3IgPj0pIG11c3QgYmUgb24gdGhlIHNhbWUgZmllbGQuIEJ1dCB5b3UgaGF2ZSBpbmVxdWFsaXR5IGZpbHRlcnMgb24gJyR7bi50b1N0cmluZygpfScgYW5kICcke2UuZmllbGQudG9TdHJpbmcoKX0nYCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBUZSh0KTtcbiAgICAgICAgICAgICAgICAgICAgbnVsbCAhPT0gcyAmJiBpaCh0LCBlLmZpZWxkLCBzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIHQuZmlsdGVycykgaWYgKGUuaW5kZXhPZihuLm9wKSA+PSAwKSByZXR1cm4gbi5vcDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfSh0LCBcbiAgICAgICAgICAgICAgICAvKipcbiAqIEdpdmVuIGFuIG9wZXJhdG9yLCByZXR1cm5zIHRoZSBzZXQgb2Ygb3BlcmF0b3JzIHRoYXQgY2Fubm90IGJlIHVzZWQgd2l0aCBpdC5cbiAqXG4gKiBPcGVyYXRvcnMgaW4gYSBxdWVyeSBtdXN0IGFkaGVyZSB0byB0aGUgZm9sbG93aW5nIHNldCBvZiBydWxlczpcbiAqIDEuIE9ubHkgb25lIGFycmF5IG9wZXJhdG9yIGlzIGFsbG93ZWQuXG4gKiAyLiBPbmx5IG9uZSBkaXNqdW5jdGl2ZSBvcGVyYXRvciBpcyBhbGxvd2VkLlxuICogMy4gYE5PVF9FUVVBTGAgY2Fubm90IGJlIHVzZWQgd2l0aCBhbm90aGVyIGBOT1RfRVFVQUxgIG9wZXJhdG9yLlxuICogNC4gYE5PVF9JTmAgY2Fubm90IGJlIHVzZWQgd2l0aCBhcnJheSwgZGlzanVuY3RpdmUsIG9yIGBOT1RfRVFVQUxgIG9wZXJhdG9ycy5cbiAqXG4gKiBBcnJheSBvcGVyYXRvcnM6IGBBUlJBWV9DT05UQUlOU2AsIGBBUlJBWV9DT05UQUlOU19BTllgXG4gKiBEaXNqdW5jdGl2ZSBvcGVyYXRvcnM6IGBJTmAsIGBBUlJBWV9DT05UQUlOU19BTllgLCBgTk9UX0lOYFxuICovXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgXCIhPVwiIC8qIE5PVF9FUVVBTCAqLyAsIFwibm90LWluXCIgLyogTk9UX0lOICovIF07XG5cbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYXJyYXktY29udGFpbnNcIiAvKiBBUlJBWV9DT05UQUlOUyAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyBcImFycmF5LWNvbnRhaW5zXCIgLyogQVJSQVlfQ09OVEFJTlMgKi8gLCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyAsIFwibm90LWluXCIgLyogTk9UX0lOICovIF07XG5cbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaW5cIiAvKiBJTiAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyAsIFwiaW5cIiAvKiBJTiAqLyAsIFwibm90LWluXCIgLyogTk9UX0lOICovIF07XG5cbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogQVJSQVlfQ09OVEFJTlNfQU5ZICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbIFwiYXJyYXktY29udGFpbnNcIiAvKiBBUlJBWV9DT05UQUlOUyAqLyAsIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogQVJSQVlfQ09OVEFJTlNfQU5ZICovICwgXCJpblwiIC8qIElOICovICwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gXTtcblxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgXCJhcnJheS1jb250YWluc1wiIC8qIEFSUkFZX0NPTlRBSU5TICovICwgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi8gLCBcImluXCIgLyogSU4gKi8gLCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyAsIFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gXTtcblxuICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KGUub3ApKTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gbikgXG4gICAgICAgICAgICAgICAgLy8gU3BlY2lhbCBjYXNlIHdoZW4gaXQncyBhIGR1cGxpY2F0ZSBvcCB0byBnaXZlIGEgc2xpZ2h0bHkgY2xlYXJlciBlcnJvciBtZXNzYWdlLlxuICAgICAgICAgICAgICAgIHRocm93IG4gPT09IGUub3AgPyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBZb3UgY2Fubm90IHVzZSBtb3JlIHRoYW4gb25lICcke2Uub3AudG9TdHJpbmcoKX0nIGZpbHRlci5gKSA6IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFlvdSBjYW5ub3QgdXNlICcke2Uub3AudG9TdHJpbmcoKX0nIGZpbHRlcnMgd2l0aCAnJHtuLnRvU3RyaW5nKCl9JyBmaWx0ZXJzLmApO1xuICAgICAgICAgICAgfSh0LCBjKSwgYztcbiAgICAgICAgfSh0Ll9xdWVyeSwgXCJ3aGVyZVwiLCBlLCB0LmZpcmVzdG9yZS5fZGF0YWJhc2VJZCwgdGhpcy5HYSwgdGhpcy56YSwgdGhpcy5IYSk7XG4gICAgICAgIHJldHVybiBuZXcgYmModC5maXJlc3RvcmUsIHQuY29udmVydGVyLCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5maWx0ZXJzLmNvbmNhdChbIGUgXSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IF9lKHQucGF0aCwgdC5jb2xsZWN0aW9uR3JvdXAsIHQuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIG4sIHQubGltaXQsIHQubGltaXRUeXBlLCB0LnN0YXJ0QXQsIHQuZW5kQXQpO1xuICAgICAgICB9KHQuX3F1ZXJ5LCBuKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgUXVlcnlDb25zdHJhaW50fSB0aGF0IGVuZm9yY2VzIHRoYXQgZG9jdW1lbnRzIG11c3QgY29udGFpbiB0aGVcbiAqIHNwZWNpZmllZCBmaWVsZCBhbmQgdGhhdCB0aGUgdmFsdWUgc2hvdWxkIHNhdGlzZnkgdGhlIHJlbGF0aW9uIGNvbnN0cmFpbnRcbiAqIHByb3ZpZGVkLlxuICpcbiAqIEBwYXJhbSBmaWVsZFBhdGggLSBUaGUgcGF0aCB0byBjb21wYXJlXG4gKiBAcGFyYW0gb3BTdHIgLSBUaGUgb3BlcmF0aW9uIHN0cmluZyAoZS5nIFwiJmx0O1wiLCBcIiZsdDs9XCIsIFwiPT1cIiwgXCImbHQ7XCIsXG4gKiAgIFwiJmx0Oz1cIiwgXCIhPVwiKS5cbiAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSBmb3IgY29tcGFyaXNvblxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQge0BsaW5rIFF1ZXJ5fS5cbiAqLyBmdW5jdGlvbiBLdSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IGUsIGkgPSBOdShcIndoZXJlXCIsIHQpO1xuICAgIHJldHVybiBuZXcgcXUoaSwgcywgbik7XG59XG5cbmNsYXNzIGp1IGV4dGVuZHMgQnUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5HYSA9IHQsIHRoaXMuSmEgPSBlLCB0aGlzLnR5cGUgPSBcIm9yZGVyQnlcIjtcbiAgICB9XG4gICAgX2FwcGx5KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSB0LnN0YXJ0QXQpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBZb3UgbXVzdCBub3QgY2FsbCBzdGFydEF0KCkgb3Igc3RhcnRBZnRlcigpIGJlZm9yZSBjYWxsaW5nIG9yZGVyQnkoKS5cIik7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gdC5lbmRBdCkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgcXVlcnkuIFlvdSBtdXN0IG5vdCBjYWxsIGVuZEF0KCkgb3IgZW5kQmVmb3JlKCkgYmVmb3JlIGNhbGxpbmcgb3JkZXJCeSgpLlwiKTtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgbGUoZSwgbik7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgIGlmIChudWxsID09PSBUZSh0KSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIHRoZSBmaXJzdCBvcmRlciBieS4gSXQgbXVzdCBtYXRjaCBhbnkgaW5lcXVhbGl0eS5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IEVlKHQpO1xuICAgICAgICAgICAgICAgICAgICBudWxsICE9PSBuICYmIGloKHQsIG4sIGUuZmllbGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0odCwgcyksIHM7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBDcmVhdGUgYSBgQm91bmRgIGZyb20gYSBxdWVyeSBhbmQgYSBkb2N1bWVudC5cbiAqXG4gKiBOb3RlIHRoYXQgdGhlIGBCb3VuZGAgd2lsbCBhbHdheXMgaW5jbHVkZSB0aGUga2V5IG9mIHRoZSBkb2N1bWVudFxuICogYW5kIHNvIG9ubHkgdGhlIHByb3ZpZGVkIGRvY3VtZW50IHdpbGwgY29tcGFyZSBlcXVhbCB0byB0aGUgcmV0dXJuZWRcbiAqIHBvc2l0aW9uLlxuICpcbiAqIFdpbGwgdGhyb3cgaWYgdGhlIGRvY3VtZW50IGRvZXMgbm90IGNvbnRhaW4gYWxsIGZpZWxkcyBvZiB0aGUgb3JkZXIgYnlcbiAqIG9mIHRoZSBxdWVyeSBvciBpZiBhbnkgb2YgdGhlIGZpZWxkcyBpbiB0aGUgb3JkZXIgYnkgYXJlIGFuIHVuY29tbWl0dGVkXG4gKiBzZXJ2ZXIgdGltZXN0YW1wLlxuICovICh0Ll9xdWVyeSwgdGhpcy5HYSwgdGhpcy5KYSk7XG4gICAgICAgIHJldHVybiBuZXcgYmModC5maXJlc3RvcmUsIHQuY29udmVydGVyLCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IHZhbGlkYXRlIHRoYXQgb3JkZXJCeSBkb2VzIG5vdCBsaXN0IHRoZSBzYW1lIGtleSB0d2ljZS5cbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LmV4cGxpY2l0T3JkZXJCeS5jb25jYXQoWyBlIF0pO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBfZSh0LnBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCBuLCB0LmZpbHRlcnMuc2xpY2UoKSwgdC5saW1pdCwgdC5saW1pdFR5cGUsIHQuc3RhcnRBdCwgdC5lbmRBdCk7XG4gICAgICAgIH0odC5fcXVlcnksIGUpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBRdWVyeUNvbnN0cmFpbnR9IHRoYXQgc29ydHMgdGhlIHF1ZXJ5IHJlc3VsdCBieSB0aGVcbiAqIHNwZWNpZmllZCBmaWVsZCwgb3B0aW9uYWxseSBpbiBkZXNjZW5kaW5nIG9yZGVyIGluc3RlYWQgb2YgYXNjZW5kaW5nLlxuICpcbiAqIEBwYXJhbSBmaWVsZFBhdGggLSBUaGUgZmllbGQgdG8gc29ydCBieS5cbiAqIEBwYXJhbSBkaXJlY3Rpb25TdHIgLSBPcHRpb25hbCBkaXJlY3Rpb24gdG8gc29ydCBieSAoJ2FzYycgb3IgJ2Rlc2MnKS4gSWZcbiAqIG5vdCBzcGVjaWZpZWQsIG9yZGVyIHdpbGwgYmUgYXNjZW5kaW5nLlxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQge0BsaW5rIFF1ZXJ5fS5cbiAqLyBmdW5jdGlvbiBRdSh0LCBlID0gXCJhc2NcIikge1xuICAgIGNvbnN0IG4gPSBlLCBzID0gTnUoXCJvcmRlckJ5XCIsIHQpO1xuICAgIHJldHVybiBuZXcganUocywgbik7XG59XG5cbmNsYXNzIFd1IGV4dGVuZHMgQnUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy50eXBlID0gdCwgdGhpcy5ZYSA9IGUsIHRoaXMuWGEgPSBuO1xuICAgIH1cbiAgICBfYXBwbHkodCkge1xuICAgICAgICByZXR1cm4gbmV3IGJjKHQuZmlyZXN0b3JlLCB0LmNvbnZlcnRlciwgUGUodC5fcXVlcnksIHRoaXMuWWEsIHRoaXMuWGEpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBRdWVyeUNvbnN0cmFpbnR9IHRoYXQgb25seSByZXR1cm5zIHRoZSBmaXJzdCBtYXRjaGluZyBkb2N1bWVudHMuXG4gKlxuICogQHBhcmFtIGxpbWl0IC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIGl0ZW1zIHRvIHJldHVybi5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHtAbGluayBRdWVyeX0uXG4gKi8gZnVuY3Rpb24gR3UodCkge1xuICAgIHJldHVybiBFYyhcImxpbWl0XCIsIHQpLCBuZXcgV3UoXCJsaW1pdFwiLCB0LCBcIkZcIiAvKiBGaXJzdCAqLyk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBRdWVyeUNvbnN0cmFpbnR9IHRoYXQgb25seSByZXR1cm5zIHRoZSBsYXN0IG1hdGNoaW5nIGRvY3VtZW50cy5cbiAqXG4gKiBZb3UgbXVzdCBzcGVjaWZ5IGF0IGxlYXN0IG9uZSBgb3JkZXJCeWAgY2xhdXNlIGZvciBgbGltaXRUb0xhc3RgIHF1ZXJpZXMsXG4gKiBvdGhlcndpc2UgYW4gZXhjZXB0aW9uIHdpbGwgYmUgdGhyb3duIGR1cmluZyBleGVjdXRpb24uXG4gKlxuICogQHBhcmFtIGxpbWl0IC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIGl0ZW1zIHRvIHJldHVybi5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHtAbGluayBRdWVyeX0uXG4gKi8gZnVuY3Rpb24genUodCkge1xuICAgIHJldHVybiBFYyhcImxpbWl0VG9MYXN0XCIsIHQpLCBuZXcgV3UoXCJsaW1pdFRvTGFzdFwiLCB0LCBcIkxcIiAvKiBMYXN0ICovKTtcbn1cblxuY2xhc3MgSHUgZXh0ZW5kcyBCdSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLnR5cGUgPSB0LCB0aGlzLlphID0gZSwgdGhpcy50YyA9IG47XG4gICAgfVxuICAgIF9hcHBseSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBlaCh0LCB0aGlzLnR5cGUsIHRoaXMuWmEsIHRoaXMudGMpO1xuICAgICAgICByZXR1cm4gbmV3IGJjKHQuZmlyZXN0b3JlLCB0LmNvbnZlcnRlciwgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBfZSh0LnBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCB0LmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCB0LmZpbHRlcnMuc2xpY2UoKSwgdC5saW1pdCwgdC5saW1pdFR5cGUsIGUsIHQuZW5kQXQpO1xuICAgICAgICB9KHQuX3F1ZXJ5LCBlKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBKdSguLi50KSB7XG4gICAgcmV0dXJuIG5ldyBIdShcInN0YXJ0QXRcIiwgdCwgLypiZWZvcmU9Ki8gITApO1xufVxuXG5mdW5jdGlvbiBZdSguLi50KSB7XG4gICAgcmV0dXJuIG5ldyBIdShcInN0YXJ0QWZ0ZXJcIiwgdCwgXG4gICAgLypiZWZvcmU9Ki8gITEpO1xufVxuXG5jbGFzcyBYdSBleHRlbmRzIEJ1IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMudHlwZSA9IHQsIHRoaXMuWmEgPSBlLCB0aGlzLnRjID0gbjtcbiAgICB9XG4gICAgX2FwcGx5KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IGVoKHQsIHRoaXMudHlwZSwgdGhpcy5aYSwgdGhpcy50Yyk7XG4gICAgICAgIHJldHVybiBuZXcgYmModC5maXJlc3RvcmUsIHQuY29udmVydGVyLCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IF9lKHQucGF0aCwgdC5jb2xsZWN0aW9uR3JvdXAsIHQuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIHQuZmlsdGVycy5zbGljZSgpLCB0LmxpbWl0LCB0LmxpbWl0VHlwZSwgdC5zdGFydEF0LCBlKTtcbiAgICAgICAgfSh0Ll9xdWVyeSwgZSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gWnUoLi4udCkge1xuICAgIHJldHVybiBuZXcgWHUoXCJlbmRCZWZvcmVcIiwgdCwgLypiZWZvcmU9Ki8gITApO1xufVxuXG5mdW5jdGlvbiB0aCguLi50KSB7XG4gICAgcmV0dXJuIG5ldyBYdShcImVuZEF0XCIsIHQsIC8qYmVmb3JlPSovICExKTtcbn1cblxuLyoqIEhlbHBlciBmdW5jdGlvbiB0byBjcmVhdGUgYSBib3VuZCBmcm9tIGEgZG9jdW1lbnQgb3IgZmllbGRzICovIGZ1bmN0aW9uIGVoKHQsIGUsIG4sIHMpIHtcbiAgICBpZiAoblswXSA9IGdldE1vZHVsYXJJbnN0YW5jZShuWzBdKSwgblswXSBpbnN0YW5jZW9mIER1KSByZXR1cm4gZnVuY3Rpb24odCwgZSwgbiwgcywgaSkge1xuICAgICAgICBpZiAoIXMpIHRocm93IG5ldyBqKEsuTk9UX0ZPVU5ELCBgQ2FuJ3QgdXNlIGEgRG9jdW1lbnRTbmFwc2hvdCB0aGF0IGRvZXNuJ3QgZXhpc3QgZm9yICR7bn0oKS5gKTtcbiAgICAgICAgY29uc3QgciA9IFtdO1xuICAgICAgICAvLyBCZWNhdXNlIHBlb3BsZSBleHBlY3QgdG8gY29udGludWUvZW5kIGEgcXVlcnkgYXQgdGhlIGV4YWN0IGRvY3VtZW50XG4gICAgICAgIC8vIHByb3ZpZGVkLCB3ZSBuZWVkIHRvIHVzZSB0aGUgaW1wbGljaXQgc29ydCBvcmRlciByYXRoZXIgdGhhbiB0aGUgZXhwbGljaXRcbiAgICAgICAgLy8gc29ydCBvcmRlciwgYmVjYXVzZSBpdCdzIGd1YXJhbnRlZWQgdG8gY29udGFpbiB0aGUgZG9jdW1lbnQga2V5LiBUaGF0IHdheVxuICAgICAgICAvLyB0aGUgcG9zaXRpb24gYmVjb21lcyB1bmFtYmlndW91cyBhbmQgdGhlIHF1ZXJ5IGNvbnRpbnVlcy9lbmRzIGV4YWN0bHkgYXRcbiAgICAgICAgLy8gdGhlIHByb3ZpZGVkIGRvY3VtZW50LiBXaXRob3V0IHRoZSBrZXkgKGJ5IHVzaW5nIHRoZSBleHBsaWNpdCBzb3J0XG4gICAgICAgIC8vIG9yZGVycyksIG11bHRpcGxlIGRvY3VtZW50cyBjb3VsZCBtYXRjaCB0aGUgcG9zaXRpb24sIHlpZWxkaW5nIGR1cGxpY2F0ZVxuICAgICAgICAvLyByZXN1bHRzLlxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiBBZSh0KSkgaWYgKG4uZmllbGQuaXNLZXlGaWVsZCgpKSByLnB1c2goT3QoZSwgcy5rZXkpKTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gcy5kYXRhLmZpZWxkKG4uZmllbGQpO1xuICAgICAgICAgICAgaWYgKEF0KHQpKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsICdJbnZhbGlkIHF1ZXJ5LiBZb3UgYXJlIHRyeWluZyB0byBzdGFydCBvciBlbmQgYSBxdWVyeSB1c2luZyBhIGRvY3VtZW50IGZvciB3aGljaCB0aGUgZmllbGQgXCInICsgbi5maWVsZCArICdcIiBpcyBhbiB1bmNvbW1pdHRlZCBzZXJ2ZXIgdGltZXN0YW1wLiAoU2luY2UgdGhlIHZhbHVlIG9mIHRoaXMgZmllbGQgaXMgdW5rbm93biwgeW91IGNhbm5vdCBzdGFydC9lbmQgYSBxdWVyeSB3aXRoIGl0LiknKTtcbiAgICAgICAgICAgIGlmIChudWxsID09PSB0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG4uZmllbGQuY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gWW91IGFyZSB0cnlpbmcgdG8gc3RhcnQgb3IgZW5kIGEgcXVlcnkgdXNpbmcgYSBkb2N1bWVudCBmb3Igd2hpY2ggdGhlIGZpZWxkICcke3R9JyAodXNlZCBhcyB0aGUgb3JkZXJCeSkgZG9lcyBub3QgZXhpc3QuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByLnB1c2godCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyB1ZShyLCBpKTtcbiAgICB9XG4gICAgLyoqXG4gKiBDb252ZXJ0cyBhIGxpc3Qgb2YgZmllbGQgdmFsdWVzIHRvIGEgYEJvdW5kYCBmb3IgdGhlIGdpdmVuIHF1ZXJ5LlxuICovICh0Ll9xdWVyeSwgdC5maXJlc3RvcmUuX2RhdGFiYXNlSWQsIGUsIG5bMF0uX2RvY3VtZW50LCBzKTtcbiAgICB7XG4gICAgICAgIGNvbnN0IGkgPSBodSh0LmZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlLCBuLCBzLCBpLCByKSB7XG4gICAgICAgICAgICAvLyBVc2UgZXhwbGljaXQgb3JkZXIgYnkncyBiZWNhdXNlIGl0IGhhcyB0byBtYXRjaCB0aGUgcXVlcnkgdGhlIHVzZXIgbWFkZVxuICAgICAgICAgICAgY29uc3QgbyA9IHQuZXhwbGljaXRPcmRlckJ5O1xuICAgICAgICAgICAgaWYgKGkubGVuZ3RoID4gby5sZW5ndGgpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYFRvbyBtYW55IGFyZ3VtZW50cyBwcm92aWRlZCB0byAke3N9KCkuIFRoZSBudW1iZXIgb2YgYXJndW1lbnRzIG11c3QgYmUgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHRoZSBudW1iZXIgb2Ygb3JkZXJCeSgpIGNsYXVzZXNgKTtcbiAgICAgICAgICAgIGNvbnN0IGEgPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgaS5sZW5ndGg7IHIrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGMgPSBpW3JdO1xuICAgICAgICAgICAgICAgIGlmIChvW3JdLmZpZWxkLmlzS2V5RmllbGQoKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoXCJzdHJpbmdcIiAhPSB0eXBlb2YgYykgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gRXhwZWN0ZWQgYSBzdHJpbmcgZm9yIGRvY3VtZW50IElEIGluICR7c30oKSwgYnV0IGdvdCBhICR7dHlwZW9mIGN9YCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghSWUodCkgJiYgLTEgIT09IGMuaW5kZXhPZihcIi9cIikpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgYSBjb2xsZWN0aW9uIGFuZCBvcmRlcmluZyBieSBGaWVsZFBhdGguZG9jdW1lbnRJZCgpLCB0aGUgdmFsdWUgcGFzc2VkIHRvICR7c30oKSBtdXN0IGJlIGEgcGxhaW4gZG9jdW1lbnQgSUQsIGJ1dCAnJHtjfScgY29udGFpbnMgYSBzbGFzaC5gKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHQucGF0aC5jaGlsZChkdC5mcm9tU3RyaW5nKGMpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFTdC5pc0RvY3VtZW50S2V5KG4pKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBncm91cCBhbmQgb3JkZXJpbmcgYnkgRmllbGRQYXRoLmRvY3VtZW50SWQoKSwgdGhlIHZhbHVlIHBhc3NlZCB0byAke3N9KCkgbXVzdCByZXN1bHQgaW4gYSB2YWxpZCBkb2N1bWVudCBwYXRoLCBidXQgJyR7bn0nIGlzIG5vdCBiZWNhdXNlIGl0IGNvbnRhaW5zIGFuIG9kZCBudW1iZXIgb2Ygc2VnbWVudHMuYCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBuZXcgU3Qobik7XG4gICAgICAgICAgICAgICAgICAgIGEucHVzaChPdChlLCBpKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IFR1KG4sIHMsIGMpO1xuICAgICAgICAgICAgICAgICAgICBhLnB1c2godCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyB1ZShhLCByKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFBhcnNlcyB0aGUgZ2l2ZW4gYGRvY3VtZW50SWRWYWx1ZWAgaW50byBhIGBSZWZlcmVuY2VWYWx1ZWAsIHRocm93aW5nXG4gKiBhcHByb3ByaWF0ZSBlcnJvcnMgaWYgdGhlIHZhbHVlIGlzIGFueXRoaW5nIG90aGVyIHRoYW4gYSBgRG9jdW1lbnRSZWZlcmVuY2VgXG4gKiBvciBgc3RyaW5nYCwgb3IgaWYgdGhlIHN0cmluZyBpcyBtYWxmb3JtZWQuXG4gKi8gKHQuX3F1ZXJ5LCB0LmZpcmVzdG9yZS5fZGF0YWJhc2VJZCwgaSwgZSwgbiwgcyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBuaCh0LCBlLCBuKSB7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIChuID0gZ2V0TW9kdWxhckluc3RhbmNlKG4pKSkge1xuICAgICAgICBpZiAoXCJcIiA9PT0gbikgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgd2l0aCBGaWVsZFBhdGguZG9jdW1lbnRJZCgpLCB5b3UgbXVzdCBwcm92aWRlIGEgdmFsaWQgZG9jdW1lbnQgSUQsIGJ1dCBpdCB3YXMgYW4gZW1wdHkgc3RyaW5nLlwiKTtcbiAgICAgICAgaWYgKCFJZShlKSAmJiAtMSAhPT0gbi5pbmRleE9mKFwiL1wiKSkgdGhyb3cgbmV3IGooSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyBhIGNvbGxlY3Rpb24gYnkgRmllbGRQYXRoLmRvY3VtZW50SWQoKSwgeW91IG11c3QgcHJvdmlkZSBhIHBsYWluIGRvY3VtZW50IElELCBidXQgJyR7bn0nIGNvbnRhaW5zIGEgJy8nIGNoYXJhY3Rlci5gKTtcbiAgICAgICAgY29uc3QgcyA9IGUucGF0aC5jaGlsZChkdC5mcm9tU3RyaW5nKG4pKTtcbiAgICAgICAgaWYgKCFTdC5pc0RvY3VtZW50S2V5KHMpKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBncm91cCBieSBGaWVsZFBhdGguZG9jdW1lbnRJZCgpLCB0aGUgdmFsdWUgcHJvdmlkZWQgbXVzdCByZXN1bHQgaW4gYSB2YWxpZCBkb2N1bWVudCBwYXRoLCBidXQgJyR7c30nIGlzIG5vdCBiZWNhdXNlIGl0IGhhcyBhbiBvZGQgbnVtYmVyIG9mIHNlZ21lbnRzICgke3MubGVuZ3RofSkuYCk7XG4gICAgICAgIHJldHVybiBPdCh0LCBuZXcgU3QocykpO1xuICAgIH1cbiAgICBpZiAobiBpbnN0YW5jZW9mIFBjKSByZXR1cm4gT3QodCwgbi5fa2V5KTtcbiAgICB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIHdpdGggRmllbGRQYXRoLmRvY3VtZW50SWQoKSwgeW91IG11c3QgcHJvdmlkZSBhIHZhbGlkIHN0cmluZyBvciBhIERvY3VtZW50UmVmZXJlbmNlLCBidXQgaXQgd2FzOiAke3BjKG4pfS5gKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCB0aGUgdmFsdWUgcGFzc2VkIGludG8gYSBkaXNqdW5jdGl2ZSBmaWx0ZXIgc2F0aXNmaWVzIGFsbFxuICogYXJyYXkgcmVxdWlyZW1lbnRzLlxuICovIGZ1bmN0aW9uIHNoKHQsIGUpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkodCkgfHwgMCA9PT0gdC5sZW5ndGgpIHRocm93IG5ldyBqKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgUXVlcnkuIEEgbm9uLWVtcHR5IGFycmF5IGlzIHJlcXVpcmVkIGZvciAnJHtlLnRvU3RyaW5nKCl9JyBmaWx0ZXJzLmApO1xuICAgIGlmICh0Lmxlbmd0aCA+IDEwKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIFF1ZXJ5LiAnJHtlLnRvU3RyaW5nKCl9JyBmaWx0ZXJzIHN1cHBvcnQgYSBtYXhpbXVtIG9mIDEwIGVsZW1lbnRzIGluIHRoZSB2YWx1ZSBhcnJheS5gKTtcbn1cblxuZnVuY3Rpb24gaWgodCwgZSwgbikge1xuICAgIGlmICghbi5pc0VxdWFsKGUpKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBZb3UgaGF2ZSBhIHdoZXJlIGZpbHRlciB3aXRoIGFuIGluZXF1YWxpdHkgKDwsIDw9LCAhPSwgbm90LWluLCA+LCBvciA+PSkgb24gZmllbGQgJyR7ZS50b1N0cmluZygpfScgYW5kIHNvIHlvdSBtdXN0IGFsc28gdXNlICcke2UudG9TdHJpbmcoKX0nIGFzIHlvdXIgZmlyc3QgYXJndW1lbnQgdG8gb3JkZXJCeSgpLCBidXQgeW91ciBmaXJzdCBvcmRlckJ5KCkgaXMgb24gZmllbGQgJyR7bi50b1N0cmluZygpfScgaW5zdGVhZC5gKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQ29udmVydHMgRmlyZXN0b3JlJ3MgaW50ZXJuYWwgdHlwZXMgdG8gdGhlIEphdmFTY3JpcHQgdHlwZXMgdGhhdCB3ZSBleHBvc2VcbiAqIHRvIHRoZSB1c2VyLlxuICpcbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIHJoIHtcbiAgICBjb252ZXJ0VmFsdWUodCwgZSA9IFwibm9uZVwiKSB7XG4gICAgICAgIHN3aXRjaCAoRHQodCkpIHtcbiAgICAgICAgICBjYXNlIDAgLyogTnVsbFZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgY2FzZSAxIC8qIEJvb2xlYW5WYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdC5ib29sZWFuVmFsdWU7XG5cbiAgICAgICAgICBjYXNlIDIgLyogTnVtYmVyVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIEV0KHQuaW50ZWdlclZhbHVlIHx8IHQuZG91YmxlVmFsdWUpO1xuXG4gICAgICAgICAgY2FzZSAzIC8qIFRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRUaW1lc3RhbXAodC50aW1lc3RhbXBWYWx1ZSk7XG5cbiAgICAgICAgICBjYXNlIDQgLyogU2VydmVyVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFNlcnZlclRpbWVzdGFtcCh0LCBlKTtcblxuICAgICAgICAgIGNhc2UgNSAvKiBTdHJpbmdWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdC5zdHJpbmdWYWx1ZTtcblxuICAgICAgICAgIGNhc2UgNiAvKiBCbG9iVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydEJ5dGVzKEl0KHQuYnl0ZXNWYWx1ZSkpO1xuXG4gICAgICAgICAgY2FzZSA3IC8qIFJlZlZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRSZWZlcmVuY2UodC5yZWZlcmVuY2VWYWx1ZSk7XG5cbiAgICAgICAgICBjYXNlIDggLyogR2VvUG9pbnRWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0R2VvUG9pbnQodC5nZW9Qb2ludFZhbHVlKTtcblxuICAgICAgICAgIGNhc2UgOSAvKiBBcnJheVZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRBcnJheSh0LmFycmF5VmFsdWUsIGUpO1xuXG4gICAgICAgICAgY2FzZSAxMCAvKiBPYmplY3RWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0T2JqZWN0KHQubWFwVmFsdWUsIGUpO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IEwoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb252ZXJ0T2JqZWN0KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHt9O1xuICAgICAgICByZXR1cm4gaHQodC5maWVsZHMsICgodCwgcykgPT4ge1xuICAgICAgICAgICAgblt0XSA9IHRoaXMuY29udmVydFZhbHVlKHMsIGUpO1xuICAgICAgICB9KSksIG47XG4gICAgfVxuICAgIGNvbnZlcnRHZW9Qb2ludCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgc3UoRXQodC5sYXRpdHVkZSksIEV0KHQubG9uZ2l0dWRlKSk7XG4gICAgfVxuICAgIGNvbnZlcnRBcnJheSh0LCBlKSB7XG4gICAgICAgIHJldHVybiAodC52YWx1ZXMgfHwgW10pLm1hcCgodCA9PiB0aGlzLmNvbnZlcnRWYWx1ZSh0LCBlKSkpO1xuICAgIH1cbiAgICBjb252ZXJ0U2VydmVyVGltZXN0YW1wKHQsIGUpIHtcbiAgICAgICAgc3dpdGNoIChlKSB7XG4gICAgICAgICAgY2FzZSBcInByZXZpb3VzXCI6XG4gICAgICAgICAgICBjb25zdCBuID0gUnQodCk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbCA9PSBuID8gbnVsbCA6IHRoaXMuY29udmVydFZhbHVlKG4sIGUpO1xuXG4gICAgICAgICAgY2FzZSBcImVzdGltYXRlXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0VGltZXN0YW1wKFB0KHQpKTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb252ZXJ0VGltZXN0YW1wKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFR0KHQpO1xuICAgICAgICByZXR1cm4gbmV3IGF0KGUuc2Vjb25kcywgZS5uYW5vcyk7XG4gICAgfVxuICAgIGNvbnZlcnREb2N1bWVudEtleSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBkdC5mcm9tU3RyaW5nKHQpO1xuICAgICAgICBCKEFzKG4pKTtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBkYyhuLmdldCgxKSwgbi5nZXQoMykpLCBpID0gbmV3IFN0KG4ucG9wRmlyc3QoNSkpO1xuICAgICAgICByZXR1cm4gcy5pc0VxdWFsKGUpIHx8IFxuICAgICAgICAvLyBUT0RPKGIvNjQxMzAyMDIpOiBTb21laG93IHN1cHBvcnQgZm9yZWlnbiByZWZlcmVuY2VzLlxuICAgICAgICBGKGBEb2N1bWVudCAke2l9IGNvbnRhaW5zIGEgZG9jdW1lbnQgcmVmZXJlbmNlIHdpdGhpbiBhIGRpZmZlcmVudCBkYXRhYmFzZSAoJHtzLnByb2plY3RJZH0vJHtzLmRhdGFiYXNlfSkgd2hpY2ggaXMgbm90IHN1cHBvcnRlZC4gSXQgd2lsbCBiZSB0cmVhdGVkIGFzIGEgcmVmZXJlbmNlIGluIHRoZSBjdXJyZW50IGRhdGFiYXNlICgke2UucHJvamVjdElkfS8ke2UuZGF0YWJhc2V9KSBpbnN0ZWFkLmApLCBcbiAgICAgICAgaTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENvbnZlcnRzIGN1c3RvbSBtb2RlbCBvYmplY3Qgb2YgdHlwZSBUIGludG8gYERvY3VtZW50RGF0YWAgYnkgYXBwbHlpbmcgdGhlXG4gKiBjb252ZXJ0ZXIgaWYgaXQgZXhpc3RzLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB3aGVuIGNvbnZlcnRpbmcgdXNlciBvYmplY3RzIHRvIGBEb2N1bWVudERhdGFgXG4gKiBiZWNhdXNlIHdlIHdhbnQgdG8gcHJvdmlkZSB0aGUgdXNlciB3aXRoIGEgbW9yZSBzcGVjaWZpYyBlcnJvciBtZXNzYWdlIGlmXG4gKiB0aGVpciBgc2V0KClgIG9yIGZhaWxzIGR1ZSB0byBpbnZhbGlkIGRhdGEgb3JpZ2luYXRpbmcgZnJvbSBhIGB0b0ZpcmVzdG9yZSgpYFxuICogY2FsbC5cbiAqLyBmdW5jdGlvbiBvaCh0LCBlLCBuKSB7XG4gICAgbGV0IHM7XG4gICAgLy8gQ2FzdCB0byBgYW55YCBpbiBvcmRlciB0byBzYXRpc2Z5IHRoZSB1bmlvbiB0eXBlIGNvbnN0cmFpbnQgb25cbiAgICAvLyB0b0ZpcmVzdG9yZSgpLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgcmV0dXJuIHMgPSB0ID8gbiAmJiAobi5tZXJnZSB8fCBuLm1lcmdlRmllbGRzKSA/IHQudG9GaXJlc3RvcmUoZSwgbikgOiB0LnRvRmlyZXN0b3JlKGUpIDogZSwgXG4gICAgcztcbn1cblxuY2xhc3MgYWggZXh0ZW5kcyByaCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmZpcmVzdG9yZSA9IHQ7XG4gICAgfVxuICAgIGNvbnZlcnRCeXRlcyh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgZXUodCk7XG4gICAgfVxuICAgIGNvbnZlcnRSZWZlcmVuY2UodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5jb252ZXJ0RG9jdW1lbnRLZXkodCwgdGhpcy5maXJlc3RvcmUuX2RhdGFiYXNlSWQpO1xuICAgICAgICByZXR1cm4gbmV3IFBjKHRoaXMuZmlyZXN0b3JlLCAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSB3cml0ZSBiYXRjaCwgdXNlZCB0byBwZXJmb3JtIG11bHRpcGxlIHdyaXRlcyBhcyBhIHNpbmdsZSBhdG9taWMgdW5pdC5cbiAqXG4gKiBBIGBXcml0ZUJhdGNoYCBvYmplY3QgY2FuIGJlIGFjcXVpcmVkIGJ5IGNhbGxpbmcge0BsaW5rIHdyaXRlQmF0Y2h9LiBJdFxuICogcHJvdmlkZXMgbWV0aG9kcyBmb3IgYWRkaW5nIHdyaXRlcyB0byB0aGUgd3JpdGUgYmF0Y2guIE5vbmUgb2YgdGhlIHdyaXRlc1xuICogd2lsbCBiZSBjb21taXR0ZWQgKG9yIHZpc2libGUgbG9jYWxseSkgdW50aWwge0BsaW5rIFdyaXRlQmF0Y2guY29tbWl0fSBpc1xuICogY2FsbGVkLlxuICovIGNsYXNzIGNoIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gdCwgdGhpcy5fY29tbWl0SGFuZGxlciA9IGUsIHRoaXMuX211dGF0aW9ucyA9IFtdLCB0aGlzLl9jb21taXR0ZWQgPSAhMSwgXG4gICAgICAgIHRoaXMuX2RhdGFSZWFkZXIgPSBodSh0KTtcbiAgICB9XG4gICAgc2V0KHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5fdmVyaWZ5Tm90Q29tbWl0dGVkKCk7XG4gICAgICAgIGNvbnN0IHMgPSB1aCh0LCB0aGlzLl9maXJlc3RvcmUpLCBpID0gb2gocy5jb252ZXJ0ZXIsIGUsIG4pLCByID0gbHUodGhpcy5fZGF0YVJlYWRlciwgXCJXcml0ZUJhdGNoLnNldFwiLCBzLl9rZXksIGksIG51bGwgIT09IHMuY29udmVydGVyLCBuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX211dGF0aW9ucy5wdXNoKHIudG9NdXRhdGlvbihzLl9rZXksIEplLm5vbmUoKSkpLCB0aGlzO1xuICAgIH1cbiAgICB1cGRhdGUodCwgZSwgbiwgLi4ucykge1xuICAgICAgICB0aGlzLl92ZXJpZnlOb3RDb21taXR0ZWQoKTtcbiAgICAgICAgY29uc3QgaSA9IHVoKHQsIHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIC8vIEZvciBDb21wYXQgdHlwZXMsIHdlIGhhdmUgdG8gXCJleHRyYWN0XCIgdGhlIHVuZGVybHlpbmcgdHlwZXMgYmVmb3JlXG4gICAgICAgIC8vIHBlcmZvcm1pbmcgdmFsaWRhdGlvbi5cbiAgICAgICAgICAgICAgICBsZXQgcjtcbiAgICAgICAgcmV0dXJuIHIgPSBcInN0cmluZ1wiID09IHR5cGVvZiAoZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSkgfHwgZSBpbnN0YW5jZW9mIFpjID8gcHUodGhpcy5fZGF0YVJlYWRlciwgXCJXcml0ZUJhdGNoLnVwZGF0ZVwiLCBpLl9rZXksIGUsIG4sIHMpIDogeXUodGhpcy5fZGF0YVJlYWRlciwgXCJXcml0ZUJhdGNoLnVwZGF0ZVwiLCBpLl9rZXksIGUpLCBcbiAgICAgICAgdGhpcy5fbXV0YXRpb25zLnB1c2goci50b011dGF0aW9uKGkuX2tleSwgSmUuZXhpc3RzKCEwKSkpLCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGUgcHJvdmlkZWQge0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudFJlZiAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZSBkZWxldGVkLlxuICAgICAqIEByZXR1cm5zIFRoaXMgYFdyaXRlQmF0Y2hgIGluc3RhbmNlLiBVc2VkIGZvciBjaGFpbmluZyBtZXRob2QgY2FsbHMuXG4gICAgICovICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIHRoaXMuX3ZlcmlmeU5vdENvbW1pdHRlZCgpO1xuICAgICAgICBjb25zdCBlID0gdWgodCwgdGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX211dGF0aW9ucyA9IHRoaXMuX211dGF0aW9ucy5jb25jYXQobmV3IGhuKGUuX2tleSwgSmUubm9uZSgpKSksIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbW1pdHMgYWxsIG9mIHRoZSB3cml0ZXMgaW4gdGhpcyB3cml0ZSBiYXRjaCBhcyBhIHNpbmdsZSBhdG9taWMgdW5pdC5cbiAgICAgKlxuICAgICAqIFRoZSByZXN1bHQgb2YgdGhlc2Ugd3JpdGVzIHdpbGwgb25seSBiZSByZWZsZWN0ZWQgaW4gZG9jdW1lbnQgcmVhZHMgdGhhdFxuICAgICAqIG9jY3VyIGFmdGVyIHRoZSByZXR1cm5lZCBwcm9taXNlIHJlc29sdmVzLiBJZiB0aGUgY2xpZW50IGlzIG9mZmxpbmUsIHRoZVxuICAgICAqIHdyaXRlIGZhaWxzLiBJZiB5b3Ugd291bGQgbGlrZSB0byBzZWUgbG9jYWwgbW9kaWZpY2F0aW9ucyBvciBidWZmZXIgd3JpdGVzXG4gICAgICogdW50aWwgdGhlIGNsaWVudCBpcyBvbmxpbmUsIHVzZSB0aGUgZnVsbCBGaXJlc3RvcmUgU0RLLlxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBgUHJvbWlzZWAgcmVzb2x2ZWQgb25jZSBhbGwgb2YgdGhlIHdyaXRlcyBpbiB0aGUgYmF0Y2ggaGF2ZSBiZWVuXG4gICAgICogc3VjY2Vzc2Z1bGx5IHdyaXR0ZW4gdG8gdGhlIGJhY2tlbmQgYXMgYW4gYXRvbWljIHVuaXQgKG5vdGUgdGhhdCBpdCB3b24ndFxuICAgICAqIHJlc29sdmUgd2hpbGUgeW91J3JlIG9mZmxpbmUpLlxuICAgICAqLyAgICBjb21taXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl92ZXJpZnlOb3RDb21taXR0ZWQoKSwgdGhpcy5fY29tbWl0dGVkID0gITAsIHRoaXMuX211dGF0aW9ucy5sZW5ndGggPiAwID8gdGhpcy5fY29tbWl0SGFuZGxlcih0aGlzLl9tdXRhdGlvbnMpIDogUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIF92ZXJpZnlOb3RDb21taXR0ZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLl9jb21taXR0ZWQpIHRocm93IG5ldyBqKEsuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJBIHdyaXRlIGJhdGNoIGNhbiBubyBsb25nZXIgYmUgdXNlZCBhZnRlciBjb21taXQoKSBoYXMgYmVlbiBjYWxsZWQuXCIpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gdWgodCwgZSkge1xuICAgIGlmICgodCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSkuZmlyZXN0b3JlICE9PSBlKSB0aHJvdyBuZXcgaihLLklOVkFMSURfQVJHVU1FTlQsIFwiUHJvdmlkZWQgZG9jdW1lbnQgcmVmZXJlbmNlIGlzIGZyb20gYSBkaWZmZXJlbnQgRmlyZXN0b3JlIGluc3RhbmNlLlwiKTtcbiAgICByZXR1cm4gdDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIFRPRE8obXJzY2htaWR0KSBDb25zaWRlciB1c2luZyBgQmFzZVRyYW5zYWN0aW9uYCBhcyB0aGUgYmFzZSBjbGFzcyBpbiB0aGVcbi8vIGxlZ2FjeSBTREsuXG4vKipcbiAqIEEgcmVmZXJlbmNlIHRvIGEgdHJhbnNhY3Rpb24uXG4gKlxuICogVGhlIGBUcmFuc2FjdGlvbmAgb2JqZWN0IHBhc3NlZCB0byBhIHRyYW5zYWN0aW9uJ3MgYHVwZGF0ZUZ1bmN0aW9uYCBwcm92aWRlc1xuICogdGhlIG1ldGhvZHMgdG8gcmVhZCBhbmQgd3JpdGUgZGF0YSB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uIGNvbnRleHQuIFNlZVxuICoge0BsaW5rIHJ1blRyYW5zYWN0aW9ufS5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVhZHMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoaXMgYERvY3VtZW50UmVmZXJlbmNlYC5cbiAqXG4gKiBOb3RlOiBgZ2V0RG9jKClgIGF0dGVtcHRzIHRvIHByb3ZpZGUgdXAtdG8tZGF0ZSBkYXRhIHdoZW4gcG9zc2libGUgYnkgd2FpdGluZ1xuICogZm9yIGRhdGEgZnJvbSB0aGUgc2VydmVyLCBidXQgaXQgbWF5IHJldHVybiBjYWNoZWQgZGF0YSBvciBmYWlsIGlmIHlvdSBhcmVcbiAqIG9mZmxpbmUgYW5kIHRoZSBzZXJ2ZXIgY2Fubm90IGJlIHJlYWNoZWQuIFRvIHNwZWNpZnkgdGhpcyBiZWhhdmlvciwgaW52b2tlXG4gKiB7QGxpbmsgZ2V0RG9jRnJvbUNhY2hlfSBvciB7QGxpbmsgZ2V0RG9jRnJvbVNlcnZlcn0uXG4gKlxuICogQHBhcmFtIHJlZmVyZW5jZSAtIFRoZSByZWZlcmVuY2Ugb2YgdGhlIGRvY3VtZW50IHRvIGZldGNoLlxuICogQHJldHVybnMgQSBQcm9taXNlIHJlc29sdmVkIHdpdGggYSBgRG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbmluZyB0aGVcbiAqIGN1cnJlbnQgZG9jdW1lbnQgY29udGVudHMuXG4gKi9cbmZ1bmN0aW9uIGhoKHQpIHtcbiAgICB0ID0gVGModCwgUGMpO1xuICAgIGNvbnN0IGUgPSBUYyh0LmZpcmVzdG9yZSwgT2MpO1xuICAgIHJldHVybiByYyhCYyhlKSwgdC5fa2V5KS50aGVuKChuID0+IFJoKGUsIHQsIG4pKSk7XG59XG5cbmNsYXNzIGxoIGV4dGVuZHMgcmgge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5maXJlc3RvcmUgPSB0O1xuICAgIH1cbiAgICBjb252ZXJ0Qnl0ZXModCkge1xuICAgICAgICByZXR1cm4gbmV3IGV1KHQpO1xuICAgIH1cbiAgICBjb252ZXJ0UmVmZXJlbmNlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuY29udmVydERvY3VtZW50S2V5KHQsIHRoaXMuZmlyZXN0b3JlLl9kYXRhYmFzZUlkKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQYyh0aGlzLmZpcmVzdG9yZSwgLyogY29udmVydGVyPSAqLyBudWxsLCBlKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVhZHMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoaXMgYERvY3VtZW50UmVmZXJlbmNlYCBmcm9tIGNhY2hlLlxuICogUmV0dXJucyBhbiBlcnJvciBpZiB0aGUgZG9jdW1lbnQgaXMgbm90IGN1cnJlbnRseSBjYWNoZWQuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgcmVzb2x2ZWQgd2l0aCBhIGBEb2N1bWVudFNuYXBzaG90YCBjb250YWluaW5nIHRoZVxuICogY3VycmVudCBkb2N1bWVudCBjb250ZW50cy5cbiAqLyBmdW5jdGlvbiBmaCh0KSB7XG4gICAgdCA9IFRjKHQsIFBjKTtcbiAgICBjb25zdCBlID0gVGModC5maXJlc3RvcmUsIE9jKSwgbiA9IEJjKGUpLCBzID0gbmV3IGxoKGUpO1xuICAgIHJldHVybiBpYyhuLCB0Ll9rZXkpLnRoZW4oKG4gPT4gbmV3IHh1KGUsIHMsIHQuX2tleSwgbiwgbmV3IGt1KG51bGwgIT09IG4gJiYgbi5oYXNMb2NhbE11dGF0aW9ucywgXG4gICAgLyogZnJvbUNhY2hlPSAqLyAhMCksIHQuY29udmVydGVyKSkpO1xufVxuXG4vKipcbiAqIFJlYWRzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGlzIGBEb2N1bWVudFJlZmVyZW5jZWAgZnJvbSB0aGUgc2VydmVyLlxuICogUmV0dXJucyBhbiBlcnJvciBpZiB0aGUgbmV0d29yayBpcyBub3QgYXZhaWxhYmxlLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHJlc29sdmVkIHdpdGggYSBgRG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbmluZyB0aGVcbiAqIGN1cnJlbnQgZG9jdW1lbnQgY29udGVudHMuXG4gKi8gZnVuY3Rpb24gZGgodCkge1xuICAgIHQgPSBUYyh0LCBQYyk7XG4gICAgY29uc3QgZSA9IFRjKHQuZmlyZXN0b3JlLCBPYyk7XG4gICAgcmV0dXJuIHJjKEJjKGUpLCB0Ll9rZXksIHtcbiAgICAgICAgc291cmNlOiBcInNlcnZlclwiXG4gICAgfSkudGhlbigobiA9PiBSaChlLCB0LCBuKSkpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIHRoZSBxdWVyeSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0cyBhcyBhIGBRdWVyeVNuYXBzaG90YC5cbiAqXG4gKiBOb3RlOiBgZ2V0RG9jcygpYCBhdHRlbXB0cyB0byBwcm92aWRlIHVwLXRvLWRhdGUgZGF0YSB3aGVuIHBvc3NpYmxlIGJ5XG4gKiB3YWl0aW5nIGZvciBkYXRhIGZyb20gdGhlIHNlcnZlciwgYnV0IGl0IG1heSByZXR1cm4gY2FjaGVkIGRhdGEgb3IgZmFpbCBpZlxuICogeW91IGFyZSBvZmZsaW5lIGFuZCB0aGUgc2VydmVyIGNhbm5vdCBiZSByZWFjaGVkLiBUbyBzcGVjaWZ5IHRoaXMgYmVoYXZpb3IsXG4gKiBpbnZva2Uge0BsaW5rIGdldERvY3NGcm9tQ2FjaGV9IG9yIHtAbGluayBnZXREb2NzRnJvbVNlcnZlcn0uXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCB3aWxsIGJlIHJlc29sdmVkIHdpdGggdGhlIHJlc3VsdHMgb2YgdGhlIHF1ZXJ5LlxuICovIGZ1bmN0aW9uIHdoKHQpIHtcbiAgICB0ID0gVGModCwgYmMpO1xuICAgIGNvbnN0IGUgPSBUYyh0LmZpcmVzdG9yZSwgT2MpLCBuID0gQmMoZSksIHMgPSBuZXcgbGgoZSk7XG4gICAgcmV0dXJuIEx1KHQuX3F1ZXJ5KSwgYWMobiwgdC5fcXVlcnkpLnRoZW4oKG4gPT4gbmV3IEZ1KGUsIHMsIHQsIG4pKSk7XG59XG5cbi8qKlxuICogRXhlY3V0ZXMgdGhlIHF1ZXJ5IGFuZCByZXR1cm5zIHRoZSByZXN1bHRzIGFzIGEgYFF1ZXJ5U25hcHNob3RgIGZyb20gY2FjaGUuXG4gKiBSZXR1cm5zIGFuIGVycm9yIGlmIHRoZSBkb2N1bWVudCBpcyBub3QgY3VycmVudGx5IGNhY2hlZC5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgd2l0aCB0aGUgcmVzdWx0cyBvZiB0aGUgcXVlcnkuXG4gKi8gZnVuY3Rpb24gX2godCkge1xuICAgIHQgPSBUYyh0LCBiYyk7XG4gICAgY29uc3QgZSA9IFRjKHQuZmlyZXN0b3JlLCBPYyksIG4gPSBCYyhlKSwgcyA9IG5ldyBsaChlKTtcbiAgICByZXR1cm4gb2MobiwgdC5fcXVlcnkpLnRoZW4oKG4gPT4gbmV3IEZ1KGUsIHMsIHQsIG4pKSk7XG59XG5cbi8qKlxuICogRXhlY3V0ZXMgdGhlIHF1ZXJ5IGFuZCByZXR1cm5zIHRoZSByZXN1bHRzIGFzIGEgYFF1ZXJ5U25hcHNob3RgIGZyb20gdGhlXG4gKiBzZXJ2ZXIuIFJldHVybnMgYW4gZXJyb3IgaWYgdGhlIG5ldHdvcmsgaXMgbm90IGF2YWlsYWJsZS5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgd2l0aCB0aGUgcmVzdWx0cyBvZiB0aGUgcXVlcnkuXG4gKi8gZnVuY3Rpb24gbWgodCkge1xuICAgIHQgPSBUYyh0LCBiYyk7XG4gICAgY29uc3QgZSA9IFRjKHQuZmlyZXN0b3JlLCBPYyksIG4gPSBCYyhlKSwgcyA9IG5ldyBsaChlKTtcbiAgICByZXR1cm4gYWMobiwgdC5fcXVlcnksIHtcbiAgICAgICAgc291cmNlOiBcInNlcnZlclwiXG4gICAgfSkudGhlbigobiA9PiBuZXcgRnUoZSwgcywgdCwgbikpKTtcbn1cblxuZnVuY3Rpb24gZ2godCwgZSwgbikge1xuICAgIHQgPSBUYyh0LCBQYyk7XG4gICAgY29uc3QgcyA9IFRjKHQuZmlyZXN0b3JlLCBPYyksIGkgPSBvaCh0LmNvbnZlcnRlciwgZSwgbik7XG4gICAgcmV0dXJuIEFoKHMsIFsgbHUoaHUocyksIFwic2V0RG9jXCIsIHQuX2tleSwgaSwgbnVsbCAhPT0gdC5jb252ZXJ0ZXIsIG4pLnRvTXV0YXRpb24odC5fa2V5LCBKZS5ub25lKCkpIF0pO1xufVxuXG5mdW5jdGlvbiB5aCh0LCBlLCBuLCAuLi5zKSB7XG4gICAgdCA9IFRjKHQsIFBjKTtcbiAgICBjb25zdCBpID0gVGModC5maXJlc3RvcmUsIE9jKSwgciA9IGh1KGkpO1xuICAgIGxldCBvO1xuICAgIG8gPSBcInN0cmluZ1wiID09IHR5cGVvZiAoXG4gICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAvLyBwZXJmb3JtaW5nIHZhbGlkYXRpb24uXG4gICAgZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSkgfHwgZSBpbnN0YW5jZW9mIFpjID8gcHUociwgXCJ1cGRhdGVEb2NcIiwgdC5fa2V5LCBlLCBuLCBzKSA6IHl1KHIsIFwidXBkYXRlRG9jXCIsIHQuX2tleSwgZSk7XG4gICAgcmV0dXJuIEFoKGksIFsgby50b011dGF0aW9uKHQuX2tleSwgSmUuZXhpc3RzKCEwKSkgXSk7XG59XG5cbi8qKlxuICogRGVsZXRlcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhlIHNwZWNpZmllZCBgRG9jdW1lbnRSZWZlcmVuY2VgLlxuICpcbiAqIEBwYXJhbSByZWZlcmVuY2UgLSBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gZGVsZXRlLlxuICogQHJldHVybnMgQSBQcm9taXNlIHJlc29sdmVkIG9uY2UgdGhlIGRvY3VtZW50IGhhcyBiZWVuIHN1Y2Nlc3NmdWxseVxuICogZGVsZXRlZCBmcm9tIHRoZSBiYWNrZW5kIChub3RlIHRoYXQgaXQgd29uJ3QgcmVzb2x2ZSB3aGlsZSB5b3UncmUgb2ZmbGluZSkuXG4gKi8gZnVuY3Rpb24gcGgodCkge1xuICAgIHJldHVybiBBaChUYyh0LmZpcmVzdG9yZSwgT2MpLCBbIG5ldyBobih0Ll9rZXksIEplLm5vbmUoKSkgXSk7XG59XG5cbi8qKlxuICogQWRkIGEgbmV3IGRvY3VtZW50IHRvIHNwZWNpZmllZCBgQ29sbGVjdGlvblJlZmVyZW5jZWAgd2l0aCB0aGUgZ2l2ZW4gZGF0YSxcbiAqIGFzc2lnbmluZyBpdCBhIGRvY3VtZW50IElEIGF1dG9tYXRpY2FsbHkuXG4gKlxuICogQHBhcmFtIHJlZmVyZW5jZSAtIEEgcmVmZXJlbmNlIHRvIHRoZSBjb2xsZWN0aW9uIHRvIGFkZCB0aGlzIGRvY3VtZW50IHRvLlxuICogQHBhcmFtIGRhdGEgLSBBbiBPYmplY3QgY29udGFpbmluZyB0aGUgZGF0YSBmb3IgdGhlIG5ldyBkb2N1bWVudC5cbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHJlc29sdmVkIHdpdGggYSBgRG9jdW1lbnRSZWZlcmVuY2VgIHBvaW50aW5nIHRvIHRoZVxuICogbmV3bHkgY3JlYXRlZCBkb2N1bWVudCBhZnRlciBpdCBoYXMgYmVlbiB3cml0dGVuIHRvIHRoZSBiYWNrZW5kIChOb3RlIHRoYXQgaXRcbiAqIHdvbid0IHJlc29sdmUgd2hpbGUgeW91J3JlIG9mZmxpbmUpLlxuICovIGZ1bmN0aW9uIFRoKHQsIGUpIHtcbiAgICBjb25zdCBuID0gVGModC5maXJlc3RvcmUsIE9jKSwgcyA9IERjKHQpLCBpID0gb2godC5jb252ZXJ0ZXIsIGUpO1xuICAgIHJldHVybiBBaChuLCBbIGx1KGh1KHQuZmlyZXN0b3JlKSwgXCJhZGREb2NcIiwgcy5fa2V5LCBpLCBudWxsICE9PSB0LmNvbnZlcnRlciwge30pLnRvTXV0YXRpb24ocy5fa2V5LCBKZS5leGlzdHMoITEpKSBdKS50aGVuKCgoKSA9PiBzKSk7XG59XG5cbmZ1bmN0aW9uIEVoKHQsIC4uLmUpIHtcbiAgICB2YXIgbiwgcywgaTtcbiAgICB0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpO1xuICAgIGxldCByID0ge1xuICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiAhMVxuICAgIH0sIG8gPSAwO1xuICAgIFwib2JqZWN0XCIgIT0gdHlwZW9mIGVbb10gfHwgeGMoZVtvXSkgfHwgKHIgPSBlW29dLCBvKyspO1xuICAgIGNvbnN0IGEgPSB7XG4gICAgICAgIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6IHIuaW5jbHVkZU1ldGFkYXRhQ2hhbmdlc1xuICAgIH07XG4gICAgaWYgKHhjKGVbb10pKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlW29dO1xuICAgICAgICBlW29dID0gbnVsbCA9PT0gKG4gPSB0Lm5leHQpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uYmluZCh0KSwgZVtvICsgMV0gPSBudWxsID09PSAocyA9IHQuZXJyb3IpIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMuYmluZCh0KSwgXG4gICAgICAgIGVbbyArIDJdID0gbnVsbCA9PT0gKGkgPSB0LmNvbXBsZXRlKSB8fCB2b2lkIDAgPT09IGkgPyB2b2lkIDAgOiBpLmJpbmQodCk7XG4gICAgfVxuICAgIGxldCBjLCB1LCBoO1xuICAgIGlmICh0IGluc3RhbmNlb2YgUGMpIHUgPSBUYyh0LmZpcmVzdG9yZSwgT2MpLCBoID0gZ2UodC5fa2V5LnBhdGgpLCBjID0ge1xuICAgICAgICBuZXh0OiBuID0+IHtcbiAgICAgICAgICAgIGVbb10gJiYgZVtvXShSaCh1LCB0LCBuKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBlW28gKyAxXSxcbiAgICAgICAgY29tcGxldGU6IGVbbyArIDJdXG4gICAgfTsgZWxzZSB7XG4gICAgICAgIGNvbnN0IG4gPSBUYyh0LCBiYyk7XG4gICAgICAgIHUgPSBUYyhuLmZpcmVzdG9yZSwgT2MpLCBoID0gbi5fcXVlcnk7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgbGgodSk7XG4gICAgICAgIGMgPSB7XG4gICAgICAgICAgICBuZXh0OiB0ID0+IHtcbiAgICAgICAgICAgICAgICBlW29dICYmIGVbb10obmV3IEZ1KHUsIHMsIG4sIHQpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZVtvICsgMV0sXG4gICAgICAgICAgICBjb21wbGV0ZTogZVtvICsgMl1cbiAgICAgICAgfSwgTHUodC5fcXVlcnkpO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24odCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0gbmV3IHFhKHMpLCByID0gbmV3IHpvKGUsIGksIG4pO1xuICAgICAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IEtvKGF3YWl0IGVjKHQpLCByKSkpLCAoKSA9PiB7XG4gICAgICAgICAgICBpLm5hKCksIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBqbyhhd2FpdCBlYyh0KSwgcikpKTtcbiAgICAgICAgfTtcbiAgICB9KEJjKHUpLCBoLCBhLCBjKTtcbn1cblxuZnVuY3Rpb24gSWgodCwgZSkge1xuICAgIHJldHVybiBjYyhCYyh0ID0gVGModCwgT2MpKSwgeGMoZSkgPyBlIDoge1xuICAgICAgICBuZXh0OiBlXG4gICAgfSk7XG59XG5cbi8qKlxuICogTG9jYWxseSB3cml0ZXMgYG11dGF0aW9uc2Agb24gdGhlIGFzeW5jIHF1ZXVlLlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gQWgodCwgZSkge1xuICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgUTtcbiAgICAgICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBjYShhd2FpdCB0Yyh0KSwgZSwgbikpKSwgbi5wcm9taXNlO1xuICAgIH0oQmModCksIGUpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEge0BsaW5rIFZpZXdTbmFwc2hvdH0gdGhhdCBjb250YWlucyB0aGUgc2luZ2xlIGRvY3VtZW50IHNwZWNpZmllZCBieSBgcmVmYFxuICogdG8gYSB7QGxpbmsgRG9jdW1lbnRTbmFwc2hvdH0uXG4gKi8gZnVuY3Rpb24gUmgodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBuLmRvY3MuZ2V0KGUuX2tleSksIGkgPSBuZXcgbGgodCk7XG4gICAgcmV0dXJuIG5ldyB4dSh0LCBpLCBlLl9rZXksIHMsIG5ldyBrdShuLmhhc1BlbmRpbmdXcml0ZXMsIG4uZnJvbUNhY2hlKSwgZS5jb252ZXJ0ZXIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHJlZmVyZW5jZSB0byBhIHRyYW5zYWN0aW9uLlxuICpcbiAqIFRoZSBgVHJhbnNhY3Rpb25gIG9iamVjdCBwYXNzZWQgdG8gYSB0cmFuc2FjdGlvbidzIGB1cGRhdGVGdW5jdGlvbmAgcHJvdmlkZXNcbiAqIHRoZSBtZXRob2RzIHRvIHJlYWQgYW5kIHdyaXRlIGRhdGEgd2l0aGluIHRoZSB0cmFuc2FjdGlvbiBjb250ZXh0LiBTZWVcbiAqIHtAbGluayBydW5UcmFuc2FjdGlvbn0uXG4gKi8gY2xhc3MgUGggZXh0ZW5kcyBjbGFzcyB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IHQsIHRoaXMuX3RyYW5zYWN0aW9uID0gZSwgdGhpcy5fZGF0YVJlYWRlciA9IGh1KHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJlbmNlZCBieSB0aGUgcHJvdmlkZWQge0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudFJlZiAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZSByZWFkLlxuICAgICAqIEByZXR1cm5zIEEgYERvY3VtZW50U25hcHNob3RgIHdpdGggdGhlIHJlYWQgZGF0YS5cbiAgICAgKi8gICAgZ2V0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHVoKHQsIHRoaXMuX2ZpcmVzdG9yZSksIG4gPSBuZXcgYWgodGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zYWN0aW9uLmxvb2t1cChbIGUuX2tleSBdKS50aGVuKCh0ID0+IHtcbiAgICAgICAgICAgIGlmICghdCB8fCAxICE9PSB0Lmxlbmd0aCkgcmV0dXJuIEwoKTtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0WzBdO1xuICAgICAgICAgICAgaWYgKHMuaXNGb3VuZERvY3VtZW50KCkpIHJldHVybiBuZXcgRHUodGhpcy5fZmlyZXN0b3JlLCBuLCBzLmtleSwgcywgZS5jb252ZXJ0ZXIpO1xuICAgICAgICAgICAgaWYgKHMuaXNOb0RvY3VtZW50KCkpIHJldHVybiBuZXcgRHUodGhpcy5fZmlyZXN0b3JlLCBuLCBlLl9rZXksIG51bGwsIGUuY29udmVydGVyKTtcbiAgICAgICAgICAgIHRocm93IEwoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzZXQodCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gdWgodCwgdGhpcy5fZmlyZXN0b3JlKSwgaSA9IG9oKHMuY29udmVydGVyLCBlLCBuKSwgciA9IGx1KHRoaXMuX2RhdGFSZWFkZXIsIFwiVHJhbnNhY3Rpb24uc2V0XCIsIHMuX2tleSwgaSwgbnVsbCAhPT0gcy5jb252ZXJ0ZXIsIG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNhY3Rpb24uc2V0KHMuX2tleSwgciksIHRoaXM7XG4gICAgfVxuICAgIHVwZGF0ZSh0LCBlLCBuLCAuLi5zKSB7XG4gICAgICAgIGNvbnN0IGkgPSB1aCh0LCB0aGlzLl9maXJlc3RvcmUpO1xuICAgICAgICAvLyBGb3IgQ29tcGF0IHR5cGVzLCB3ZSBoYXZlIHRvIFwiZXh0cmFjdFwiIHRoZSB1bmRlcmx5aW5nIHR5cGVzIGJlZm9yZVxuICAgICAgICAvLyBwZXJmb3JtaW5nIHZhbGlkYXRpb24uXG4gICAgICAgICAgICAgICAgbGV0IHI7XG4gICAgICAgIHJldHVybiByID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgKGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSkpIHx8IGUgaW5zdGFuY2VvZiBaYyA/IHB1KHRoaXMuX2RhdGFSZWFkZXIsIFwiVHJhbnNhY3Rpb24udXBkYXRlXCIsIGkuX2tleSwgZSwgbiwgcykgOiB5dSh0aGlzLl9kYXRhUmVhZGVyLCBcIlRyYW5zYWN0aW9uLnVwZGF0ZVwiLCBpLl9rZXksIGUpLCBcbiAgICAgICAgdGhpcy5fdHJhbnNhY3Rpb24udXBkYXRlKGkuX2tleSwgciksIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZXMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoZSBwcm92aWRlZCB7QGxpbmsgRG9jdW1lbnRSZWZlcmVuY2V9LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50UmVmIC0gQSByZWZlcmVuY2UgdG8gdGhlIGRvY3VtZW50IHRvIGJlIGRlbGV0ZWQuXG4gICAgICogQHJldHVybnMgVGhpcyBgVHJhbnNhY3Rpb25gIGluc3RhbmNlLiBVc2VkIGZvciBjaGFpbmluZyBtZXRob2QgY2FsbHMuXG4gICAgICovICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB1aCh0LCB0aGlzLl9maXJlc3RvcmUpO1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNhY3Rpb24uZGVsZXRlKGUuX2tleSksIHRoaXM7XG4gICAgfVxufSB7XG4gICAgLy8gVGhpcyBjbGFzcyBpbXBsZW1lbnRzIHRoZSBzYW1lIGxvZ2ljIGFzIHRoZSBUcmFuc2FjdGlvbiBBUEkgaW4gdGhlIExpdGUgU0RLXG4gICAgLy8gYnV0IGlzIHN1YmNsYXNzZWQgaW4gb3JkZXIgdG8gcmV0dXJuIGl0cyBvd24gRG9jdW1lbnRTbmFwc2hvdCB0eXBlcy5cbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgZSksIHRoaXMuX2ZpcmVzdG9yZSA9IHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIHRoZSBkb2N1bWVudCByZWZlcmVuY2VkIGJ5IHRoZSBwcm92aWRlZCB7QGxpbmsgRG9jdW1lbnRSZWZlcmVuY2V9LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50UmVmIC0gQSByZWZlcmVuY2UgdG8gdGhlIGRvY3VtZW50IHRvIGJlIHJlYWQuXG4gICAgICogQHJldHVybnMgQSBgRG9jdW1lbnRTbmFwc2hvdGAgd2l0aCB0aGUgcmVhZCBkYXRhLlxuICAgICAqLyAgICBnZXQodCkge1xuICAgICAgICBjb25zdCBlID0gdWgodCwgdGhpcy5fZmlyZXN0b3JlKSwgbiA9IG5ldyBsaCh0aGlzLl9maXJlc3RvcmUpO1xuICAgICAgICByZXR1cm4gc3VwZXIuZ2V0KHQpLnRoZW4oKHQgPT4gbmV3IHh1KHRoaXMuX2ZpcmVzdG9yZSwgbiwgZS5fa2V5LCB0Ll9kb2N1bWVudCwgbmV3IGt1KFxuICAgICAgICAvKiBoYXNQZW5kaW5nV3JpdGVzPSAqLyAhMSwgXG4gICAgICAgIC8qIGZyb21DYWNoZT0gKi8gITEpLCBlLmNvbnZlcnRlcikpKTtcbiAgICB9XG59XG5cbi8qKlxuICogRXhlY3V0ZXMgdGhlIGdpdmVuIGB1cGRhdGVGdW5jdGlvbmAgYW5kIHRoZW4gYXR0ZW1wdHMgdG8gY29tbWl0IHRoZSBjaGFuZ2VzXG4gKiBhcHBsaWVkIHdpdGhpbiB0aGUgdHJhbnNhY3Rpb24uIElmIGFueSBkb2N1bWVudCByZWFkIHdpdGhpbiB0aGUgdHJhbnNhY3Rpb25cbiAqIGhhcyBjaGFuZ2VkLCBDbG91ZCBGaXJlc3RvcmUgcmV0cmllcyB0aGUgYHVwZGF0ZUZ1bmN0aW9uYC4gSWYgaXQgZmFpbHMgdG9cbiAqIGNvbW1pdCBhZnRlciA1IGF0dGVtcHRzLCB0aGUgdHJhbnNhY3Rpb24gZmFpbHMuXG4gKlxuICogVGhlIG1heGltdW0gbnVtYmVyIG9mIHdyaXRlcyBhbGxvd2VkIGluIGEgc2luZ2xlIHRyYW5zYWN0aW9uIGlzIDUwMC5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gQSByZWZlcmVuY2UgdG8gdGhlIEZpcmVzdG9yZSBkYXRhYmFzZSB0byBydW4gdGhpc1xuICogdHJhbnNhY3Rpb24gYWdhaW5zdC5cbiAqIEBwYXJhbSB1cGRhdGVGdW5jdGlvbiAtIFRoZSBmdW5jdGlvbiB0byBleGVjdXRlIHdpdGhpbiB0aGUgdHJhbnNhY3Rpb25cbiAqIGNvbnRleHQuXG4gKiBAcmV0dXJucyBJZiB0aGUgdHJhbnNhY3Rpb24gY29tcGxldGVkIHN1Y2Nlc3NmdWxseSBvciB3YXMgZXhwbGljaXRseSBhYm9ydGVkXG4gKiAodGhlIGB1cGRhdGVGdW5jdGlvbmAgcmV0dXJuZWQgYSBmYWlsZWQgcHJvbWlzZSksIHRoZSBwcm9taXNlIHJldHVybmVkIGJ5IHRoZVxuICogYHVwZGF0ZUZ1bmN0aW9uIGBpcyByZXR1cm5lZCBoZXJlLiBPdGhlcndpc2UsIGlmIHRoZSB0cmFuc2FjdGlvbiBmYWlsZWQsIGFcbiAqIHJlamVjdGVkIHByb21pc2Ugd2l0aCB0aGUgY29ycmVzcG9uZGluZyBmYWlsdXJlIGVycm9yIGlzIHJldHVybmVkLlxuICovIGZ1bmN0aW9uIGJoKHQsIGUpIHtcbiAgICByZXR1cm4gdWMoQmModCA9IFRjKHQsIE9jKSksIChuID0+IGUobmV3IFBoKHQsIG4pKSkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIGEgc2VudGluZWwgZm9yIHVzZSB3aXRoIHtAbGluayBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHVwZGF0ZURvYzoxKX0gb3JcbiAqIHtAbGluayBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHNldERvYzoxKX0gd2l0aCBge21lcmdlOiB0cnVlfWAgdG8gbWFyayBhIGZpZWxkIGZvciBkZWxldGlvbi5cbiAqLyBmdW5jdGlvbiB2aCgpIHtcbiAgICByZXR1cm4gbmV3IGZ1KFwiZGVsZXRlRmllbGRcIik7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHNlbnRpbmVsIHVzZWQgd2l0aCB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyhzZXREb2M6MSl9IG9yIHtAbGluayBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHVwZGF0ZURvYzoxKX0gdG9cbiAqIGluY2x1ZGUgYSBzZXJ2ZXItZ2VuZXJhdGVkIHRpbWVzdGFtcCBpbiB0aGUgd3JpdHRlbiBkYXRhLlxuICovIGZ1bmN0aW9uIFZoKCkge1xuICAgIHJldHVybiBuZXcgd3UoXCJzZXJ2ZXJUaW1lc3RhbXBcIik7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHNwZWNpYWwgdmFsdWUgdGhhdCBjYW4gYmUgdXNlZCB3aXRoIHtAbGluayBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHNldERvYzoxKX0gb3Ige0BsaW5rXG4gKiBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHVwZGF0ZURvYzoxKX0gdGhhdCB0ZWxscyB0aGUgc2VydmVyIHRvIHVuaW9uIHRoZSBnaXZlbiBlbGVtZW50cyB3aXRoIGFueSBhcnJheVxuICogdmFsdWUgdGhhdCBhbHJlYWR5IGV4aXN0cyBvbiB0aGUgc2VydmVyLiBFYWNoIHNwZWNpZmllZCBlbGVtZW50IHRoYXQgZG9lc24ndFxuICogYWxyZWFkeSBleGlzdCBpbiB0aGUgYXJyYXkgd2lsbCBiZSBhZGRlZCB0byB0aGUgZW5kLiBJZiB0aGUgZmllbGQgYmVpbmdcbiAqIG1vZGlmaWVkIGlzIG5vdCBhbHJlYWR5IGFuIGFycmF5IGl0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gd2l0aCBhbiBhcnJheVxuICogY29udGFpbmluZyBleGFjdGx5IHRoZSBzcGVjaWZpZWQgZWxlbWVudHMuXG4gKlxuICogQHBhcmFtIGVsZW1lbnRzIC0gVGhlIGVsZW1lbnRzIHRvIHVuaW9uIGludG8gdGhlIGFycmF5LlxuICogQHJldHVybnMgVGhlIGBGaWVsZFZhbHVlYCBzZW50aW5lbCBmb3IgdXNlIGluIGEgY2FsbCB0byBgc2V0RG9jKClgIG9yXG4gKiBgdXBkYXRlRG9jKClgLlxuICovIGZ1bmN0aW9uIFNoKC4uLnQpIHtcbiAgICAvLyBOT1RFOiBXZSBkb24ndCBhY3R1YWxseSBwYXJzZSB0aGUgZGF0YSB1bnRpbCBpdCdzIHVzZWQgaW4gc2V0KCkgb3JcbiAgICAvLyB1cGRhdGUoKSBzaW5jZSB3ZSdkIG5lZWQgdGhlIEZpcmVzdG9yZSBpbnN0YW5jZSB0byBkbyB0aGlzLlxuICAgIHJldHVybiBuZXcgX3UoXCJhcnJheVVuaW9uXCIsIHQpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzcGVjaWFsIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCB7QGxpbmsgKHNldERvYzoxKX0gb3Ige0BsaW5rXG4gKiB1cGRhdGVEb2M6MX0gdGhhdCB0ZWxscyB0aGUgc2VydmVyIHRvIHJlbW92ZSB0aGUgZ2l2ZW4gZWxlbWVudHMgZnJvbSBhbnlcbiAqIGFycmF5IHZhbHVlIHRoYXQgYWxyZWFkeSBleGlzdHMgb24gdGhlIHNlcnZlci4gQWxsIGluc3RhbmNlcyBvZiBlYWNoIGVsZW1lbnRcbiAqIHNwZWNpZmllZCB3aWxsIGJlIHJlbW92ZWQgZnJvbSB0aGUgYXJyYXkuIElmIHRoZSBmaWVsZCBiZWluZyBtb2RpZmllZCBpcyBub3RcbiAqIGFscmVhZHkgYW4gYXJyYXkgaXQgd2lsbCBiZSBvdmVyd3JpdHRlbiB3aXRoIGFuIGVtcHR5IGFycmF5LlxuICpcbiAqIEBwYXJhbSBlbGVtZW50cyAtIFRoZSBlbGVtZW50cyB0byByZW1vdmUgZnJvbSB0aGUgYXJyYXkuXG4gKiBAcmV0dXJucyBUaGUgYEZpZWxkVmFsdWVgIHNlbnRpbmVsIGZvciB1c2UgaW4gYSBjYWxsIHRvIGBzZXREb2MoKWAgb3JcbiAqIGB1cGRhdGVEb2MoKWBcbiAqLyBmdW5jdGlvbiBEaCguLi50KSB7XG4gICAgLy8gTk9URTogV2UgZG9uJ3QgYWN0dWFsbHkgcGFyc2UgdGhlIGRhdGEgdW50aWwgaXQncyB1c2VkIGluIHNldCgpIG9yXG4gICAgLy8gdXBkYXRlKCkgc2luY2Ugd2UnZCBuZWVkIHRoZSBGaXJlc3RvcmUgaW5zdGFuY2UgdG8gZG8gdGhpcy5cbiAgICByZXR1cm4gbmV3IG11KFwiYXJyYXlSZW1vdmVcIiwgdCk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHNwZWNpYWwgdmFsdWUgdGhhdCBjYW4gYmUgdXNlZCB3aXRoIHtAbGluayBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHNldERvYzoxKX0gb3Ige0BsaW5rXG4gKiBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHVwZGF0ZURvYzoxKX0gdGhhdCB0ZWxscyB0aGUgc2VydmVyIHRvIGluY3JlbWVudCB0aGUgZmllbGQncyBjdXJyZW50IHZhbHVlIGJ5XG4gKiB0aGUgZ2l2ZW4gdmFsdWUuXG4gKlxuICogSWYgZWl0aGVyIHRoZSBvcGVyYW5kIG9yIHRoZSBjdXJyZW50IGZpZWxkIHZhbHVlIHVzZXMgZmxvYXRpbmcgcG9pbnRcbiAqIHByZWNpc2lvbiwgYWxsIGFyaXRobWV0aWMgZm9sbG93cyBJRUVFIDc1NCBzZW1hbnRpY3MuIElmIGJvdGggdmFsdWVzIGFyZVxuICogaW50ZWdlcnMsIHZhbHVlcyBvdXRzaWRlIG9mIEphdmFTY3JpcHQncyBzYWZlIG51bWJlciByYW5nZVxuICogKGBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUmAgdG8gYE51bWJlci5NQVhfU0FGRV9JTlRFR0VSYCkgYXJlIGFsc28gc3ViamVjdCB0b1xuICogcHJlY2lzaW9uIGxvc3MuIEZ1cnRoZXJtb3JlLCBvbmNlIHByb2Nlc3NlZCBieSB0aGUgRmlyZXN0b3JlIGJhY2tlbmQsIGFsbFxuICogaW50ZWdlciBvcGVyYXRpb25zIGFyZSBjYXBwZWQgYmV0d2VlbiAtMl42MyBhbmQgMl42My0xLlxuICpcbiAqIElmIHRoZSBjdXJyZW50IGZpZWxkIHZhbHVlIGlzIG5vdCBvZiB0eXBlIGBudW1iZXJgLCBvciBpZiB0aGUgZmllbGQgZG9lcyBub3RcbiAqIHlldCBleGlzdCwgdGhlIHRyYW5zZm9ybWF0aW9uIHNldHMgdGhlIGZpZWxkIHRvIHRoZSBnaXZlbiB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0gbiAtIFRoZSB2YWx1ZSB0byBpbmNyZW1lbnQgYnkuXG4gKiBAcmV0dXJucyBUaGUgYEZpZWxkVmFsdWVgIHNlbnRpbmVsIGZvciB1c2UgaW4gYSBjYWxsIHRvIGBzZXREb2MoKWAgb3JcbiAqIGB1cGRhdGVEb2MoKWBcbiAqLyBmdW5jdGlvbiBDaCh0KSB7XG4gICAgcmV0dXJuIG5ldyBndShcImluY3JlbWVudFwiLCB0KTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQ3JlYXRlcyBhIHdyaXRlIGJhdGNoLCB1c2VkIGZvciBwZXJmb3JtaW5nIG11bHRpcGxlIHdyaXRlcyBhcyBhIHNpbmdsZVxuICogYXRvbWljIG9wZXJhdGlvbi4gVGhlIG1heGltdW0gbnVtYmVyIG9mIHdyaXRlcyBhbGxvd2VkIGluIGEgc2luZ2xlIHtAbGluayBXcml0ZUJhdGNofVxuICogaXMgNTAwLlxuICpcbiAqIFVubGlrZSB0cmFuc2FjdGlvbnMsIHdyaXRlIGJhdGNoZXMgYXJlIHBlcnNpc3RlZCBvZmZsaW5lIGFuZCB0aGVyZWZvcmUgYXJlXG4gKiBwcmVmZXJhYmxlIHdoZW4geW91IGRvbid0IG5lZWQgdG8gY29uZGl0aW9uIHlvdXIgd3JpdGVzIG9uIHJlYWQgZGF0YS5cbiAqXG4gKiBAcmV0dXJucyBBIHtAbGluayBXcml0ZUJhdGNofSB0aGF0IGNhbiBiZSB1c2VkIHRvIGF0b21pY2FsbHkgZXhlY3V0ZSBtdWx0aXBsZVxuICogd3JpdGVzLlxuICovIGZ1bmN0aW9uIE5oKHQpIHtcbiAgICByZXR1cm4gQmModCA9IFRjKHQsIE9jKSksIG5ldyBjaCh0LCAoZSA9PiBBaCh0LCBlKSkpO1xufVxuXG4vKipcbiAqIENsb3VkIEZpcmVzdG9yZVxuICpcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICovICFmdW5jdGlvbih0LCBlID0gITApIHtcbiAgICAhZnVuY3Rpb24odCkge1xuICAgICAgICBDID0gdDtcbiAgICB9KFNES19WRVJTSU9OKSwgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoXCJmaXJlc3RvcmVcIiwgKCh0LCB7b3B0aW9uczogbn0pID0+IHtcbiAgICAgICAgY29uc3QgcyA9IHQuZ2V0UHJvdmlkZXIoXCJhcHBcIikuZ2V0SW1tZWRpYXRlKCksIGkgPSBuZXcgT2MocywgbmV3IEgodC5nZXRQcm92aWRlcihcImF1dGgtaW50ZXJuYWxcIikpLCBuZXcgWih0LmdldFByb3ZpZGVyKFwiYXBwLWNoZWNrLWludGVybmFsXCIpKSk7XG4gICAgICAgIHJldHVybiBuID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICB1c2VGZXRjaFN0cmVhbXM6IGVcbiAgICAgICAgfSwgbiksIGkuX3NldFNldHRpbmdzKG4pLCBpO1xuICAgIH0pLCBcIlBVQkxJQ1wiKSksIHJlZ2lzdGVyVmVyc2lvbihTLCBcIjMuNC4xXCIsIHQpLCBcbiAgICAvLyBCVUlMRF9UQVJHRVQgd2lsbCBiZSByZXBsYWNlZCBieSB2YWx1ZXMgbGlrZSBlc201LCBlc20yMDE3LCBjanM1LCBldGMgZHVyaW5nIHRoZSBjb21waWxhdGlvblxuICAgIHJlZ2lzdGVyVmVyc2lvbihTLCBcIjMuNC4xXCIsIFwiZXNtMjAxN1wiKTtcbn0oKTtcblxuZXhwb3J0IHsgcmggYXMgQWJzdHJhY3RVc2VyRGF0YVdyaXRlciwgZXUgYXMgQnl0ZXMsIEZjIGFzIENBQ0hFX1NJWkVfVU5MSU1JVEVELCB2YyBhcyBDb2xsZWN0aW9uUmVmZXJlbmNlLCBQYyBhcyBEb2N1bWVudFJlZmVyZW5jZSwgeHUgYXMgRG9jdW1lbnRTbmFwc2hvdCwgWmMgYXMgRmllbGRQYXRoLCBudSBhcyBGaWVsZFZhbHVlLCBPYyBhcyBGaXJlc3RvcmUsIGogYXMgRmlyZXN0b3JlRXJyb3IsIHN1IGFzIEdlb1BvaW50LCAkYyBhcyBMb2FkQnVuZGxlVGFzaywgYmMgYXMgUXVlcnksIEJ1IGFzIFF1ZXJ5Q29uc3RyYWludCwgJHUgYXMgUXVlcnlEb2N1bWVudFNuYXBzaG90LCBGdSBhcyBRdWVyeVNuYXBzaG90LCBrdSBhcyBTbmFwc2hvdE1ldGFkYXRhLCBhdCBhcyBUaW1lc3RhbXAsIFBoIGFzIFRyYW5zYWN0aW9uLCBjaCBhcyBXcml0ZUJhdGNoLCBkYyBhcyBfRGF0YWJhc2VJZCwgU3QgYXMgX0RvY3VtZW50S2V5LCB0dCBhcyBfRW1wdHlBcHBDaGVja1Rva2VuUHJvdmlkZXIsIEcgYXMgX0VtcHR5QXV0aENyZWRlbnRpYWxzUHJvdmlkZXIsIF90IGFzIF9GaWVsZFBhdGgsIFRjIGFzIF9jYXN0LCBVIGFzIF9kZWJ1Z0Fzc2VydCwgZ3QgYXMgX2lzQmFzZTY0QXZhaWxhYmxlLCBPIGFzIF9sb2dXYXJuLCBtYyBhcyBfdmFsaWRhdGVJc05vdFVzZWRUb2dldGhlciwgVGggYXMgYWRkRG9jLCBEaCBhcyBhcnJheVJlbW92ZSwgU2ggYXMgYXJyYXlVbmlvbiwgUWMgYXMgY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZSwgVmMgYXMgY29sbGVjdGlvbiwgU2MgYXMgY29sbGVjdGlvbkdyb3VwLCBSYyBhcyBjb25uZWN0RmlyZXN0b3JlRW11bGF0b3IsIHBoIGFzIGRlbGV0ZURvYywgdmggYXMgZGVsZXRlRmllbGQsIHpjIGFzIGRpc2FibGVOZXR3b3JrLCBEYyBhcyBkb2MsIHR1IGFzIGRvY3VtZW50SWQsIHFjIGFzIGVuYWJsZUluZGV4ZWREYlBlcnNpc3RlbmNlLCBLYyBhcyBlbmFibGVNdWx0aVRhYkluZGV4ZWREYlBlcnNpc3RlbmNlLCBHYyBhcyBlbmFibGVOZXR3b3JrLCB0aCBhcyBlbmRBdCwgWnUgYXMgZW5kQmVmb3JlLCBCYyBhcyBlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkLCBBaCBhcyBleGVjdXRlV3JpdGUsIGhoIGFzIGdldERvYywgZmggYXMgZ2V0RG9jRnJvbUNhY2hlLCBkaCBhcyBnZXREb2NGcm9tU2VydmVyLCB3aCBhcyBnZXREb2NzLCBfaCBhcyBnZXREb2NzRnJvbUNhY2hlLCBtaCBhcyBnZXREb2NzRnJvbVNlcnZlciwgTGMgYXMgZ2V0RmlyZXN0b3JlLCBDaCBhcyBpbmNyZW1lbnQsIE1jIGFzIGluaXRpYWxpemVGaXJlc3RvcmUsIEd1IGFzIGxpbWl0LCB6dSBhcyBsaW1pdFRvTGFzdCwgSmMgYXMgbG9hZEJ1bmRsZSwgWWMgYXMgbmFtZWRRdWVyeSwgRWggYXMgb25TbmFwc2hvdCwgSWggYXMgb25TbmFwc2hvdHNJblN5bmMsIFF1IGFzIG9yZGVyQnksIFV1IGFzIHF1ZXJ5LCBOYyBhcyBxdWVyeUVxdWFsLCBDYyBhcyByZWZFcXVhbCwgYmggYXMgcnVuVHJhbnNhY3Rpb24sIFZoIGFzIHNlcnZlclRpbWVzdGFtcCwgZ2ggYXMgc2V0RG9jLCB4IGFzIHNldExvZ0xldmVsLCBNdSBhcyBzbmFwc2hvdEVxdWFsLCBZdSBhcyBzdGFydEFmdGVyLCBKdSBhcyBzdGFydEF0LCBIYyBhcyB0ZXJtaW5hdGUsIHloIGFzIHVwZGF0ZURvYywgV2MgYXMgd2FpdEZvclBlbmRpbmdXcml0ZXMsIEt1IGFzIHdoZXJlLCBOaCBhcyB3cml0ZUJhdGNoIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBDb21wb25lbnRDb250YWluZXIgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCB7IExvZ2dlciwgc2V0VXNlckxvZ0hhbmRsZXIsIHNldExvZ0xldmVsIGFzIHNldExvZ0xldmVsJDEgfSBmcm9tICdAZmlyZWJhc2UvbG9nZ2VyJztcbmltcG9ydCB7IEVycm9yRmFjdG9yeSwgZGVlcEVxdWFsIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuZXhwb3J0IHsgRmlyZWJhc2VFcnJvciB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgIH1cclxuICAgIC8vIEluIGluaXRpYWwgaW1wbGVtZW50YXRpb24sIHRoaXMgd2lsbCBiZSBjYWxsZWQgYnkgaW5zdGFsbGF0aW9ucyBvblxyXG4gICAgLy8gYXV0aCB0b2tlbiByZWZyZXNoLCBhbmQgaW5zdGFsbGF0aW9ucyB3aWxsIHNlbmQgdGhpcyBzdHJpbmcuXHJcbiAgICBnZXRQbGF0Zm9ybUluZm9TdHJpbmcoKSB7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXJzID0gdGhpcy5jb250YWluZXIuZ2V0UHJvdmlkZXJzKCk7XHJcbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIHByb3ZpZGVycyBhbmQgZ2V0IGxpYnJhcnkvdmVyc2lvbiBwYWlycyBmcm9tIGFueSB0aGF0IGFyZVxyXG4gICAgICAgIC8vIHZlcnNpb24gY29tcG9uZW50cy5cclxuICAgICAgICByZXR1cm4gcHJvdmlkZXJzXHJcbiAgICAgICAgICAgIC5tYXAocHJvdmlkZXIgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyKHByb3ZpZGVyKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydmljZSA9IHByb3ZpZGVyLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke3NlcnZpY2UubGlicmFyeX0vJHtzZXJ2aWNlLnZlcnNpb259YDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmZpbHRlcihsb2dTdHJpbmcgPT4gbG9nU3RyaW5nKVxyXG4gICAgICAgICAgICAuam9pbignICcpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gcHJvdmlkZXIgY2hlY2sgaWYgdGhpcyBwcm92aWRlciBwcm92aWRlcyBhIFZlcnNpb25TZXJ2aWNlXHJcbiAqXHJcbiAqIE5PVEU6IFVzaW5nIFByb3ZpZGVyPCdhcHAtdmVyc2lvbic+IGlzIGEgaGFjayB0byBpbmRpY2F0ZSB0aGF0IHRoZSBwcm92aWRlclxyXG4gKiBwcm92aWRlcyBWZXJzaW9uU2VydmljZS4gVGhlIHByb3ZpZGVyIGlzIG5vdCBuZWNlc3NhcmlseSBhICdhcHAtdmVyc2lvbidcclxuICogcHJvdmlkZXIuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1ZlcnNpb25TZXJ2aWNlUHJvdmlkZXIocHJvdmlkZXIpIHtcclxuICAgIGNvbnN0IGNvbXBvbmVudCA9IHByb3ZpZGVyLmdldENvbXBvbmVudCgpO1xyXG4gICAgcmV0dXJuIChjb21wb25lbnQgPT09IG51bGwgfHwgY29tcG9uZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb21wb25lbnQudHlwZSkgPT09IFwiVkVSU0lPTlwiIC8qIFZFUlNJT04gKi87XHJcbn1cblxuY29uc3QgbmFtZSRvID0gXCJAZmlyZWJhc2UvYXBwXCI7XG5jb25zdCB2ZXJzaW9uJDEgPSBcIjAuNy4xMVwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKCdAZmlyZWJhc2UvYXBwJyk7XG5cbmNvbnN0IG5hbWUkbiA9IFwiQGZpcmViYXNlL2FwcC1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRtID0gXCJAZmlyZWJhc2UvYW5hbHl0aWNzLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGwgPSBcIkBmaXJlYmFzZS9hbmFseXRpY3NcIjtcblxuY29uc3QgbmFtZSRrID0gXCJAZmlyZWJhc2UvYXBwLWNoZWNrLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGogPSBcIkBmaXJlYmFzZS9hcHAtY2hlY2tcIjtcblxuY29uc3QgbmFtZSRpID0gXCJAZmlyZWJhc2UvYXV0aFwiO1xuXG5jb25zdCBuYW1lJGggPSBcIkBmaXJlYmFzZS9hdXRoLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGcgPSBcIkBmaXJlYmFzZS9kYXRhYmFzZVwiO1xuXG5jb25zdCBuYW1lJGYgPSBcIkBmaXJlYmFzZS9kYXRhYmFzZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRlID0gXCJAZmlyZWJhc2UvZnVuY3Rpb25zXCI7XG5cbmNvbnN0IG5hbWUkZCA9IFwiQGZpcmViYXNlL2Z1bmN0aW9ucy1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRjID0gXCJAZmlyZWJhc2UvaW5zdGFsbGF0aW9uc1wiO1xuXG5jb25zdCBuYW1lJGIgPSBcIkBmaXJlYmFzZS9pbnN0YWxsYXRpb25zLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGEgPSBcIkBmaXJlYmFzZS9tZXNzYWdpbmdcIjtcblxuY29uc3QgbmFtZSQ5ID0gXCJAZmlyZWJhc2UvbWVzc2FnaW5nLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDggPSBcIkBmaXJlYmFzZS9wZXJmb3JtYW5jZVwiO1xuXG5jb25zdCBuYW1lJDcgPSBcIkBmaXJlYmFzZS9wZXJmb3JtYW5jZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSQ2ID0gXCJAZmlyZWJhc2UvcmVtb3RlLWNvbmZpZ1wiO1xuXG5jb25zdCBuYW1lJDUgPSBcIkBmaXJlYmFzZS9yZW1vdGUtY29uZmlnLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDQgPSBcIkBmaXJlYmFzZS9zdG9yYWdlXCI7XG5cbmNvbnN0IG5hbWUkMyA9IFwiQGZpcmViYXNlL3N0b3JhZ2UtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkMiA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuXG5jb25zdCBuYW1lJDEgPSBcIkBmaXJlYmFzZS9maXJlc3RvcmUtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUgPSBcImZpcmViYXNlXCI7XG5jb25zdCB2ZXJzaW9uID0gXCI5LjYuMVwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIGRlZmF1bHQgYXBwIG5hbWVcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0VOVFJZX05BTUUgPSAnW0RFRkFVTFRdJztcclxuY29uc3QgUExBVEZPUk1fTE9HX1NUUklORyA9IHtcclxuICAgIFtuYW1lJG9dOiAnZmlyZS1jb3JlJyxcclxuICAgIFtuYW1lJG5dOiAnZmlyZS1jb3JlLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRsXTogJ2ZpcmUtYW5hbHl0aWNzJyxcclxuICAgIFtuYW1lJG1dOiAnZmlyZS1hbmFseXRpY3MtY29tcGF0JyxcclxuICAgIFtuYW1lJGpdOiAnZmlyZS1hcHAtY2hlY2snLFxyXG4gICAgW25hbWUka106ICdmaXJlLWFwcC1jaGVjay1jb21wYXQnLFxyXG4gICAgW25hbWUkaV06ICdmaXJlLWF1dGgnLFxyXG4gICAgW25hbWUkaF06ICdmaXJlLWF1dGgtY29tcGF0JyxcclxuICAgIFtuYW1lJGddOiAnZmlyZS1ydGRiJyxcclxuICAgIFtuYW1lJGZdOiAnZmlyZS1ydGRiLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRlXTogJ2ZpcmUtZm4nLFxyXG4gICAgW25hbWUkZF06ICdmaXJlLWZuLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRjXTogJ2ZpcmUtaWlkJyxcclxuICAgIFtuYW1lJGJdOiAnZmlyZS1paWQtY29tcGF0JyxcclxuICAgIFtuYW1lJGFdOiAnZmlyZS1mY20nLFxyXG4gICAgW25hbWUkOV06ICdmaXJlLWZjbS1jb21wYXQnLFxyXG4gICAgW25hbWUkOF06ICdmaXJlLXBlcmYnLFxyXG4gICAgW25hbWUkN106ICdmaXJlLXBlcmYtY29tcGF0JyxcclxuICAgIFtuYW1lJDZdOiAnZmlyZS1yYycsXHJcbiAgICBbbmFtZSQ1XTogJ2ZpcmUtcmMtY29tcGF0JyxcclxuICAgIFtuYW1lJDRdOiAnZmlyZS1nY3MnLFxyXG4gICAgW25hbWUkM106ICdmaXJlLWdjcy1jb21wYXQnLFxyXG4gICAgW25hbWUkMl06ICdmaXJlLWZzdCcsXHJcbiAgICBbbmFtZSQxXTogJ2ZpcmUtZnN0LWNvbXBhdCcsXHJcbiAgICAnZmlyZS1qcyc6ICdmaXJlLWpzJyxcclxuICAgIFtuYW1lXTogJ2ZpcmUtanMtYWxsJ1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBfYXBwcyA9IG5ldyBNYXAoKTtcclxuLyoqXHJcbiAqIFJlZ2lzdGVyZWQgY29tcG9uZW50cy5cclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG5jb25zdCBfY29tcG9uZW50cyA9IG5ldyBNYXAoKTtcclxuLyoqXHJcbiAqIEBwYXJhbSBjb21wb25lbnQgLSB0aGUgY29tcG9uZW50IGJlaW5nIGFkZGVkIHRvIHRoaXMgYXBwJ3MgY29udGFpbmVyXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX2FkZENvbXBvbmVudChhcHAsIGNvbXBvbmVudCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBhcHAuY29udGFpbmVyLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBsb2dnZXIuZGVidWcoYENvbXBvbmVudCAke2NvbXBvbmVudC5uYW1lfSBmYWlsZWQgdG8gcmVnaXN0ZXIgd2l0aCBGaXJlYmFzZUFwcCAke2FwcC5uYW1lfWAsIGUpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudChhcHAsIGNvbXBvbmVudCkge1xyXG4gICAgYXBwLmNvbnRhaW5lci5hZGRPck92ZXJ3cml0ZUNvbXBvbmVudChjb21wb25lbnQpO1xyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gY29tcG9uZW50IC0gdGhlIGNvbXBvbmVudCB0byByZWdpc3RlclxyXG4gKiBAcmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgY29tcG9uZW50IGlzIHJlZ2lzdGVyZWQgc3VjY2Vzc2Z1bGx5XHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX3JlZ2lzdGVyQ29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgY29uc3QgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudC5uYW1lO1xyXG4gICAgaWYgKF9jb21wb25lbnRzLmhhcyhjb21wb25lbnROYW1lKSkge1xyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgVGhlcmUgd2VyZSBtdWx0aXBsZSBhdHRlbXB0cyB0byByZWdpc3RlciBjb21wb25lbnQgJHtjb21wb25lbnROYW1lfS5gKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBfY29tcG9uZW50cy5zZXQoY29tcG9uZW50TmFtZSwgY29tcG9uZW50KTtcclxuICAgIC8vIGFkZCB0aGUgY29tcG9uZW50IHRvIGV4aXN0aW5nIGFwcCBpbnN0YW5jZXNcclxuICAgIGZvciAoY29uc3QgYXBwIG9mIF9hcHBzLnZhbHVlcygpKSB7XHJcbiAgICAgICAgX2FkZENvbXBvbmVudChhcHAsIGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGFwcCAtIEZpcmViYXNlQXBwIGluc3RhbmNlXHJcbiAqIEBwYXJhbSBuYW1lIC0gc2VydmljZSBuYW1lXHJcbiAqXHJcbiAqIEByZXR1cm5zIHRoZSBwcm92aWRlciBmb3IgdGhlIHNlcnZpY2Ugd2l0aCB0aGUgbWF0Y2hpbmcgbmFtZVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9nZXRQcm92aWRlcihhcHAsIG5hbWUpIHtcclxuICAgIHJldHVybiBhcHAuY29udGFpbmVyLmdldFByb3ZpZGVyKG5hbWUpO1xyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gYXBwIC0gRmlyZWJhc2VBcHAgaW5zdGFuY2VcclxuICogQHBhcmFtIG5hbWUgLSBzZXJ2aWNlIG5hbWVcclxuICogQHBhcmFtIGluc3RhbmNlSWRlbnRpZmllciAtIHNlcnZpY2UgaW5zdGFuY2UgaWRlbnRpZmllciBpbiBjYXNlIHRoZSBzZXJ2aWNlIHN1cHBvcnRzIG11bHRpcGxlIGluc3RhbmNlc1xyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UoYXBwLCBuYW1lLCBpbnN0YW5jZUlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgIF9nZXRQcm92aWRlcihhcHAsIG5hbWUpLmNsZWFySW5zdGFuY2UoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxufVxyXG4vKipcclxuICogVGVzdCBvbmx5XHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX2NsZWFyQ29tcG9uZW50cygpIHtcclxuICAgIF9jb21wb25lbnRzLmNsZWFyKCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgRVJST1JTID0ge1xyXG4gICAgW1wibm8tYXBwXCIgLyogTk9fQVBQICovXTogXCJObyBGaXJlYmFzZSBBcHAgJ3skYXBwTmFtZX0nIGhhcyBiZWVuIGNyZWF0ZWQgLSBcIiArXHJcbiAgICAgICAgJ2NhbGwgRmlyZWJhc2UgQXBwLmluaXRpYWxpemVBcHAoKScsXHJcbiAgICBbXCJiYWQtYXBwLW5hbWVcIiAvKiBCQURfQVBQX05BTUUgKi9dOiBcIklsbGVnYWwgQXBwIG5hbWU6ICd7JGFwcE5hbWV9XCIsXHJcbiAgICBbXCJkdXBsaWNhdGUtYXBwXCIgLyogRFVQTElDQVRFX0FQUCAqL106IFwiRmlyZWJhc2UgQXBwIG5hbWVkICd7JGFwcE5hbWV9JyBhbHJlYWR5IGV4aXN0cyB3aXRoIGRpZmZlcmVudCBvcHRpb25zIG9yIGNvbmZpZ1wiLFxyXG4gICAgW1wiYXBwLWRlbGV0ZWRcIiAvKiBBUFBfREVMRVRFRCAqL106IFwiRmlyZWJhc2UgQXBwIG5hbWVkICd7JGFwcE5hbWV9JyBhbHJlYWR5IGRlbGV0ZWRcIixcclxuICAgIFtcImludmFsaWQtYXBwLWFyZ3VtZW50XCIgLyogSU5WQUxJRF9BUFBfQVJHVU1FTlQgKi9dOiAnZmlyZWJhc2UueyRhcHBOYW1lfSgpIHRha2VzIGVpdGhlciBubyBhcmd1bWVudCBvciBhICcgK1xyXG4gICAgICAgICdGaXJlYmFzZSBBcHAgaW5zdGFuY2UuJyxcclxuICAgIFtcImludmFsaWQtbG9nLWFyZ3VtZW50XCIgLyogSU5WQUxJRF9MT0dfQVJHVU1FTlQgKi9dOiAnRmlyc3QgYXJndW1lbnQgdG8gYG9uTG9nYCBtdXN0IGJlIG51bGwgb3IgYSBmdW5jdGlvbi4nXHJcbn07XHJcbmNvbnN0IEVSUk9SX0ZBQ1RPUlkgPSBuZXcgRXJyb3JGYWN0b3J5KCdhcHAnLCAnRmlyZWJhc2UnLCBFUlJPUlMpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBGaXJlYmFzZUFwcEltcGwge1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucywgY29uZmlnLCBjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLl9pc0RlbGV0ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5fY29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgY29uZmlnKTtcclxuICAgICAgICB0aGlzLl9uYW1lID0gY29uZmlnLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkID1cclxuICAgICAgICAgICAgY29uZmlnLmF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ2FwcCcsICgpID0+IHRoaXMsIFwiUFVCTElDXCIgLyogUFVCTElDICovKSk7XHJcbiAgICB9XHJcbiAgICBnZXQgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkO1xyXG4gICAgfVxyXG4gICAgc2V0IGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCh2YWwpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkID0gdmFsO1xyXG4gICAgfVxyXG4gICAgZ2V0IG5hbWUoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9uYW1lO1xyXG4gICAgfVxyXG4gICAgZ2V0IG9wdGlvbnMoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9vcHRpb25zO1xyXG4gICAgfVxyXG4gICAgZ2V0IGNvbmZpZygpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZztcclxuICAgIH1cclxuICAgIGdldCBjb250YWluZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRhaW5lcjtcclxuICAgIH1cclxuICAgIGdldCBpc0RlbGV0ZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzRGVsZXRlZDtcclxuICAgIH1cclxuICAgIHNldCBpc0RlbGV0ZWQodmFsKSB7XHJcbiAgICAgICAgdGhpcy5faXNEZWxldGVkID0gdmFsO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHdpbGwgdGhyb3cgYW4gRXJyb3IgaWYgdGhlIEFwcCBoYXMgYWxyZWFkeSBiZWVuIGRlbGV0ZWQgLVxyXG4gICAgICogdXNlIGJlZm9yZSBwZXJmb3JtaW5nIEFQSSBhY3Rpb25zIG9uIHRoZSBBcHAuXHJcbiAgICAgKi9cclxuICAgIGNoZWNrRGVzdHJveWVkKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRGVsZXRlZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFwcC1kZWxldGVkXCIgLyogQVBQX0RFTEVURUQgKi8sIHsgYXBwTmFtZTogdGhpcy5fbmFtZSB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBjdXJyZW50IFNESyB2ZXJzaW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBTREtfVkVSU0lPTiA9IHZlcnNpb247XHJcbmZ1bmN0aW9uIGluaXRpYWxpemVBcHAob3B0aW9ucywgcmF3Q29uZmlnID0ge30pIHtcclxuICAgIGlmICh0eXBlb2YgcmF3Q29uZmlnICE9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGNvbnN0IG5hbWUgPSByYXdDb25maWc7XHJcbiAgICAgICAgcmF3Q29uZmlnID0geyBuYW1lIH07XHJcbiAgICB9XHJcbiAgICBjb25zdCBjb25maWcgPSBPYmplY3QuYXNzaWduKHsgbmFtZTogREVGQVVMVF9FTlRSWV9OQU1FLCBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQ6IGZhbHNlIH0sIHJhd0NvbmZpZyk7XHJcbiAgICBjb25zdCBuYW1lID0gY29uZmlnLm5hbWU7XHJcbiAgICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnIHx8ICFuYW1lKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJiYWQtYXBwLW5hbWVcIiAvKiBCQURfQVBQX05BTUUgKi8sIHtcclxuICAgICAgICAgICAgYXBwTmFtZTogU3RyaW5nKG5hbWUpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBleGlzdGluZ0FwcCA9IF9hcHBzLmdldChuYW1lKTtcclxuICAgIGlmIChleGlzdGluZ0FwcCkge1xyXG4gICAgICAgIC8vIHJldHVybiB0aGUgZXhpc3RpbmcgYXBwIGlmIG9wdGlvbnMgYW5kIGNvbmZpZyBkZWVwIGVxdWFsIHRoZSBvbmVzIGluIHRoZSBleGlzdGluZyBhcHAuXHJcbiAgICAgICAgaWYgKGRlZXBFcXVhbChvcHRpb25zLCBleGlzdGluZ0FwcC5vcHRpb25zKSAmJlxyXG4gICAgICAgICAgICBkZWVwRXF1YWwoY29uZmlnLCBleGlzdGluZ0FwcC5jb25maWcpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZ0FwcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiZHVwbGljYXRlLWFwcFwiIC8qIERVUExJQ0FURV9BUFAgKi8sIHsgYXBwTmFtZTogbmFtZSB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBjb250YWluZXIgPSBuZXcgQ29tcG9uZW50Q29udGFpbmVyKG5hbWUpO1xyXG4gICAgZm9yIChjb25zdCBjb21wb25lbnQgb2YgX2NvbXBvbmVudHMudmFsdWVzKCkpIHtcclxuICAgICAgICBjb250YWluZXIuYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBuZXdBcHAgPSBuZXcgRmlyZWJhc2VBcHBJbXBsKG9wdGlvbnMsIGNvbmZpZywgY29udGFpbmVyKTtcclxuICAgIF9hcHBzLnNldChuYW1lLCBuZXdBcHApO1xyXG4gICAgcmV0dXJuIG5ld0FwcDtcclxufVxyXG4vKipcclxuICogUmV0cmlldmVzIGEge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IGluc3RhbmNlLlxyXG4gKlxyXG4gKiBXaGVuIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50cywgdGhlIGRlZmF1bHQgYXBwIGlzIHJldHVybmVkLiBXaGVuIGFuIGFwcCBuYW1lXHJcbiAqIGlzIHByb3ZpZGVkLCB0aGUgYXBwIGNvcnJlc3BvbmRpbmcgdG8gdGhhdCBuYW1lIGlzIHJldHVybmVkLlxyXG4gKlxyXG4gKiBBbiBleGNlcHRpb24gaXMgdGhyb3duIGlmIHRoZSBhcHAgYmVpbmcgcmV0cmlldmVkIGhhcyBub3QgeWV0IGJlZW5cclxuICogaW5pdGlhbGl6ZWQuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gUmV0dXJuIHRoZSBkZWZhdWx0IGFwcFxyXG4gKiBjb25zdCBhcHAgPSBnZXRBcHAoKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gUmV0dXJuIGEgbmFtZWQgYXBwXHJcbiAqIGNvbnN0IG90aGVyQXBwID0gZ2V0QXBwKFwib3RoZXJBcHBcIik7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gbmFtZSAtIE9wdGlvbmFsIG5hbWUgb2YgdGhlIGFwcCB0byByZXR1cm4uIElmIG5vIG5hbWUgaXNcclxuICogICBwcm92aWRlZCwgdGhlIGRlZmF1bHQgaXMgYFwiW0RFRkFVTFRdXCJgLlxyXG4gKlxyXG4gKiBAcmV0dXJucyBUaGUgYXBwIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHByb3ZpZGVkIGFwcCBuYW1lLlxyXG4gKiAgIElmIG5vIGFwcCBuYW1lIGlzIHByb3ZpZGVkLCB0aGUgZGVmYXVsdCBhcHAgaXMgcmV0dXJuZWQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGdldEFwcChuYW1lID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICBjb25zdCBhcHAgPSBfYXBwcy5nZXQobmFtZSk7XHJcbiAgICBpZiAoIWFwcCkge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm8tYXBwXCIgLyogTk9fQVBQICovLCB7IGFwcE5hbWU6IG5hbWUgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXBwO1xyXG59XHJcbi8qKlxyXG4gKiBBIChyZWFkLW9ubHkpIGFycmF5IG9mIGFsbCBpbml0aWFsaXplZCBhcHBzLlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRBcHBzKCkge1xyXG4gICAgcmV0dXJuIEFycmF5LmZyb20oX2FwcHMudmFsdWVzKCkpO1xyXG59XHJcbi8qKlxyXG4gKiBSZW5kZXJzIHRoaXMgYXBwIHVudXNhYmxlIGFuZCBmcmVlcyB0aGUgcmVzb3VyY2VzIG9mIGFsbCBhc3NvY2lhdGVkXHJcbiAqIHNlcnZpY2VzLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIGRlbGV0ZUFwcChhcHApXHJcbiAqICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAqICAgICBjb25zb2xlLmxvZyhcIkFwcCBkZWxldGVkIHN1Y2Nlc3NmdWxseVwiKTtcclxuICogICB9KVxyXG4gKiAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xyXG4gKiAgICAgY29uc29sZS5sb2coXCJFcnJvciBkZWxldGluZyBhcHA6XCIsIGVycm9yKTtcclxuICogICB9KTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUFwcChhcHApIHtcclxuICAgIGNvbnN0IG5hbWUgPSBhcHAubmFtZTtcclxuICAgIGlmIChfYXBwcy5oYXMobmFtZSkpIHtcclxuICAgICAgICBfYXBwcy5kZWxldGUobmFtZSk7XHJcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoYXBwLmNvbnRhaW5lclxyXG4gICAgICAgICAgICAuZ2V0UHJvdmlkZXJzKClcclxuICAgICAgICAgICAgLm1hcChwcm92aWRlciA9PiBwcm92aWRlci5kZWxldGUoKSkpO1xyXG4gICAgICAgIGFwcC5pc0RlbGV0ZWQgPSB0cnVlO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBSZWdpc3RlcnMgYSBsaWJyYXJ5J3MgbmFtZSBhbmQgdmVyc2lvbiBmb3IgcGxhdGZvcm0gbG9nZ2luZyBwdXJwb3Nlcy5cclxuICogQHBhcmFtIGxpYnJhcnkgLSBOYW1lIG9mIDFwIG9yIDNwIGxpYnJhcnkgKGUuZy4gZmlyZXN0b3JlLCBhbmd1bGFyZmlyZSlcclxuICogQHBhcmFtIHZlcnNpb24gLSBDdXJyZW50IHZlcnNpb24gb2YgdGhhdCBsaWJyYXJ5LlxyXG4gKiBAcGFyYW0gdmFyaWFudCAtIEJ1bmRsZSB2YXJpYW50LCBlLmcuLCBub2RlLCBybiwgZXRjLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiByZWdpc3RlclZlcnNpb24obGlicmFyeUtleU9yTmFtZSwgdmVyc2lvbiwgdmFyaWFudCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgLy8gVE9ETzogV2UgY2FuIHVzZSB0aGlzIGNoZWNrIHRvIHdoaXRlbGlzdCBzdHJpbmdzIHdoZW4vaWYgd2Ugc2V0IHVwXHJcbiAgICAvLyBhIGdvb2Qgd2hpdGVsaXN0IHN5c3RlbS5cclxuICAgIGxldCBsaWJyYXJ5ID0gKF9hID0gUExBVEZPUk1fTE9HX1NUUklOR1tsaWJyYXJ5S2V5T3JOYW1lXSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbGlicmFyeUtleU9yTmFtZTtcclxuICAgIGlmICh2YXJpYW50KSB7XHJcbiAgICAgICAgbGlicmFyeSArPSBgLSR7dmFyaWFudH1gO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbGlicmFyeU1pc21hdGNoID0gbGlicmFyeS5tYXRjaCgvXFxzfFxcLy8pO1xyXG4gICAgY29uc3QgdmVyc2lvbk1pc21hdGNoID0gdmVyc2lvbi5tYXRjaCgvXFxzfFxcLy8pO1xyXG4gICAgaWYgKGxpYnJhcnlNaXNtYXRjaCB8fCB2ZXJzaW9uTWlzbWF0Y2gpIHtcclxuICAgICAgICBjb25zdCB3YXJuaW5nID0gW1xyXG4gICAgICAgICAgICBgVW5hYmxlIHRvIHJlZ2lzdGVyIGxpYnJhcnkgXCIke2xpYnJhcnl9XCIgd2l0aCB2ZXJzaW9uIFwiJHt2ZXJzaW9ufVwiOmBcclxuICAgICAgICBdO1xyXG4gICAgICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgd2FybmluZy5wdXNoKGBsaWJyYXJ5IG5hbWUgXCIke2xpYnJhcnl9XCIgY29udGFpbnMgaWxsZWdhbCBjaGFyYWN0ZXJzICh3aGl0ZXNwYWNlIG9yIFwiL1wiKWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGlicmFyeU1pc21hdGNoICYmIHZlcnNpb25NaXNtYXRjaCkge1xyXG4gICAgICAgICAgICB3YXJuaW5nLnB1c2goJ2FuZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmVyc2lvbk1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgIHdhcm5pbmcucHVzaChgdmVyc2lvbiBuYW1lIFwiJHt2ZXJzaW9ufVwiIGNvbnRhaW5zIGlsbGVnYWwgY2hhcmFjdGVycyAod2hpdGVzcGFjZSBvciBcIi9cIilgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbG9nZ2VyLndhcm4od2FybmluZy5qb2luKCcgJykpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KGAke2xpYnJhcnl9LXZlcnNpb25gLCAoKSA9PiAoeyBsaWJyYXJ5LCB2ZXJzaW9uIH0pLCBcIlZFUlNJT05cIiAvKiBWRVJTSU9OICovKSk7XHJcbn1cclxuLyoqXHJcbiAqIFNldHMgbG9nIGhhbmRsZXIgZm9yIGFsbCBGaXJlYmFzZSBTREtzLlxyXG4gKiBAcGFyYW0gbG9nQ2FsbGJhY2sgLSBBbiBvcHRpb25hbCBjdXN0b20gbG9nIGhhbmRsZXIgdGhhdCBleGVjdXRlcyB1c2VyIGNvZGUgd2hlbmV2ZXJcclxuICogdGhlIEZpcmViYXNlIFNESyBtYWtlcyBhIGxvZ2dpbmcgY2FsbC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gb25Mb2cobG9nQ2FsbGJhY2ssIG9wdGlvbnMpIHtcclxuICAgIGlmIChsb2dDYWxsYmFjayAhPT0gbnVsbCAmJiB0eXBlb2YgbG9nQ2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImludmFsaWQtbG9nLWFyZ3VtZW50XCIgLyogSU5WQUxJRF9MT0dfQVJHVU1FTlQgKi8pO1xyXG4gICAgfVxyXG4gICAgc2V0VXNlckxvZ0hhbmRsZXIobG9nQ2FsbGJhY2ssIG9wdGlvbnMpO1xyXG59XHJcbi8qKlxyXG4gKiBTZXRzIGxvZyBsZXZlbCBmb3IgYWxsIEZpcmViYXNlIFNES3MuXHJcbiAqXHJcbiAqIEFsbCBvZiB0aGUgbG9nIHR5cGVzIGFib3ZlIHRoZSBjdXJyZW50IGxvZyBsZXZlbCBhcmUgY2FwdHVyZWQgKGkuZS4gaWZcclxuICogeW91IHNldCB0aGUgbG9nIGxldmVsIHRvIGBpbmZvYCwgZXJyb3JzIGFyZSBsb2dnZWQsIGJ1dCBgZGVidWdgIGFuZFxyXG4gKiBgdmVyYm9zZWAgbG9ncyBhcmUgbm90KS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gc2V0TG9nTGV2ZWwobG9nTGV2ZWwpIHtcclxuICAgIHNldExvZ0xldmVsJDEobG9nTGV2ZWwpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyQ29yZUNvbXBvbmVudHModmFyaWFudCkge1xyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ3BsYXRmb3JtLWxvZ2dlcicsIGNvbnRhaW5lciA9PiBuZXcgUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlSW1wbChjb250YWluZXIpLCBcIlBSSVZBVEVcIiAvKiBQUklWQVRFICovKSk7XHJcbiAgICAvLyBSZWdpc3RlciBgYXBwYCBwYWNrYWdlLlxyXG4gICAgcmVnaXN0ZXJWZXJzaW9uKG5hbWUkbywgdmVyc2lvbiQxLCB2YXJpYW50KTtcclxuICAgIC8vIEJVSUxEX1RBUkdFVCB3aWxsIGJlIHJlcGxhY2VkIGJ5IHZhbHVlcyBsaWtlIGVzbTUsIGVzbTIwMTcsIGNqczUsIGV0YyBkdXJpbmcgdGhlIGNvbXBpbGF0aW9uXHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSRvLCB2ZXJzaW9uJDEsICdlc20yMDE3Jyk7XHJcbiAgICAvLyBSZWdpc3RlciBwbGF0Zm9ybSBTREsgaWRlbnRpZmllciAobm8gdmVyc2lvbikuXHJcbiAgICByZWdpc3RlclZlcnNpb24oJ2ZpcmUtanMnLCAnJyk7XHJcbn1cblxuLyoqXHJcbiAqIEZpcmViYXNlIEFwcFxyXG4gKlxyXG4gKiBAcmVtYXJrcyBUaGlzIHBhY2thZ2UgY29vcmRpbmF0ZXMgdGhlIGNvbW11bmljYXRpb24gYmV0d2VlbiB0aGUgZGlmZmVyZW50IEZpcmViYXNlIGNvbXBvbmVudHNcclxuICogQHBhY2thZ2VEb2N1bWVudGF0aW9uXHJcbiAqL1xyXG5yZWdpc3RlckNvcmVDb21wb25lbnRzKCcnKTtcblxuZXhwb3J0IHsgU0RLX1ZFUlNJT04sIERFRkFVTFRfRU5UUllfTkFNRSBhcyBfREVGQVVMVF9FTlRSWV9OQU1FLCBfYWRkQ29tcG9uZW50LCBfYWRkT3JPdmVyd3JpdGVDb21wb25lbnQsIF9hcHBzLCBfY2xlYXJDb21wb25lbnRzLCBfY29tcG9uZW50cywgX2dldFByb3ZpZGVyLCBfcmVnaXN0ZXJDb21wb25lbnQsIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UsIGRlbGV0ZUFwcCwgZ2V0QXBwLCBnZXRBcHBzLCBpbml0aWFsaXplQXBwLCBvbkxvZywgcmVnaXN0ZXJWZXJzaW9uLCBzZXRMb2dMZXZlbCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsIi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBIGNvbnRhaW5lciBmb3IgYWxsIG9mIHRoZSBMb2dnZXIgaW5zdGFuY2VzXHJcbiAqL1xyXG5jb25zdCBpbnN0YW5jZXMgPSBbXTtcclxuLyoqXHJcbiAqIFRoZSBKUyBTREsgc3VwcG9ydHMgNSBsb2cgbGV2ZWxzIGFuZCBhbHNvIGFsbG93cyBhIHVzZXIgdGhlIGFiaWxpdHkgdG9cclxuICogc2lsZW5jZSB0aGUgbG9ncyBhbHRvZ2V0aGVyLlxyXG4gKlxyXG4gKiBUaGUgb3JkZXIgaXMgYSBmb2xsb3dzOlxyXG4gKiBERUJVRyA8IFZFUkJPU0UgPCBJTkZPIDwgV0FSTiA8IEVSUk9SXHJcbiAqXHJcbiAqIEFsbCBvZiB0aGUgbG9nIHR5cGVzIGFib3ZlIHRoZSBjdXJyZW50IGxvZyBsZXZlbCB3aWxsIGJlIGNhcHR1cmVkIChpLmUuIGlmXHJcbiAqIHlvdSBzZXQgdGhlIGxvZyBsZXZlbCB0byBgSU5GT2AsIGVycm9ycyB3aWxsIHN0aWxsIGJlIGxvZ2dlZCwgYnV0IGBERUJVR2AgYW5kXHJcbiAqIGBWRVJCT1NFYCBsb2dzIHdpbGwgbm90KVxyXG4gKi9cclxudmFyIExvZ0xldmVsO1xyXG4oZnVuY3Rpb24gKExvZ0xldmVsKSB7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIkRFQlVHXCJdID0gMF0gPSBcIkRFQlVHXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIlZFUkJPU0VcIl0gPSAxXSA9IFwiVkVSQk9TRVwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJJTkZPXCJdID0gMl0gPSBcIklORk9cIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiV0FSTlwiXSA9IDNdID0gXCJXQVJOXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIkVSUk9SXCJdID0gNF0gPSBcIkVSUk9SXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIlNJTEVOVFwiXSA9IDVdID0gXCJTSUxFTlRcIjtcclxufSkoTG9nTGV2ZWwgfHwgKExvZ0xldmVsID0ge30pKTtcclxuY29uc3QgbGV2ZWxTdHJpbmdUb0VudW0gPSB7XHJcbiAgICAnZGVidWcnOiBMb2dMZXZlbC5ERUJVRyxcclxuICAgICd2ZXJib3NlJzogTG9nTGV2ZWwuVkVSQk9TRSxcclxuICAgICdpbmZvJzogTG9nTGV2ZWwuSU5GTyxcclxuICAgICd3YXJuJzogTG9nTGV2ZWwuV0FSTixcclxuICAgICdlcnJvcic6IExvZ0xldmVsLkVSUk9SLFxyXG4gICAgJ3NpbGVudCc6IExvZ0xldmVsLlNJTEVOVFxyXG59O1xyXG4vKipcclxuICogVGhlIGRlZmF1bHQgbG9nIGxldmVsXHJcbiAqL1xyXG5jb25zdCBkZWZhdWx0TG9nTGV2ZWwgPSBMb2dMZXZlbC5JTkZPO1xyXG4vKipcclxuICogQnkgZGVmYXVsdCwgYGNvbnNvbGUuZGVidWdgIGlzIG5vdCBkaXNwbGF5ZWQgaW4gdGhlIGRldmVsb3BlciBjb25zb2xlIChpblxyXG4gKiBjaHJvbWUpLiBUbyBhdm9pZCBmb3JjaW5nIHVzZXJzIHRvIGhhdmUgdG8gb3B0LWluIHRvIHRoZXNlIGxvZ3MgdHdpY2VcclxuICogKGkuZS4gb25jZSBmb3IgZmlyZWJhc2UsIGFuZCBvbmNlIGluIHRoZSBjb25zb2xlKSwgd2UgYXJlIHNlbmRpbmcgYERFQlVHYFxyXG4gKiBsb2dzIHRvIHRoZSBgY29uc29sZS5sb2dgIGZ1bmN0aW9uLlxyXG4gKi9cclxuY29uc3QgQ29uc29sZU1ldGhvZCA9IHtcclxuICAgIFtMb2dMZXZlbC5ERUJVR106ICdsb2cnLFxyXG4gICAgW0xvZ0xldmVsLlZFUkJPU0VdOiAnbG9nJyxcclxuICAgIFtMb2dMZXZlbC5JTkZPXTogJ2luZm8nLFxyXG4gICAgW0xvZ0xldmVsLldBUk5dOiAnd2FybicsXHJcbiAgICBbTG9nTGV2ZWwuRVJST1JdOiAnZXJyb3InXHJcbn07XHJcbi8qKlxyXG4gKiBUaGUgZGVmYXVsdCBsb2cgaGFuZGxlciB3aWxsIGZvcndhcmQgREVCVUcsIFZFUkJPU0UsIElORk8sIFdBUk4sIGFuZCBFUlJPUlxyXG4gKiBtZXNzYWdlcyBvbiB0byB0aGVpciBjb3JyZXNwb25kaW5nIGNvbnNvbGUgY291bnRlcnBhcnRzIChpZiB0aGUgbG9nIG1ldGhvZFxyXG4gKiBpcyBzdXBwb3J0ZWQgYnkgdGhlIGN1cnJlbnQgbG9nIGxldmVsKVxyXG4gKi9cclxuY29uc3QgZGVmYXVsdExvZ0hhbmRsZXIgPSAoaW5zdGFuY2UsIGxvZ1R5cGUsIC4uLmFyZ3MpID0+IHtcclxuICAgIGlmIChsb2dUeXBlIDwgaW5zdGFuY2UubG9nTGV2ZWwpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgICBjb25zdCBtZXRob2QgPSBDb25zb2xlTWV0aG9kW2xvZ1R5cGVdO1xyXG4gICAgaWYgKG1ldGhvZCkge1xyXG4gICAgICAgIGNvbnNvbGVbbWV0aG9kXShgWyR7bm93fV0gICR7aW5zdGFuY2UubmFtZX06YCwgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEF0dGVtcHRlZCB0byBsb2cgYSBtZXNzYWdlIHdpdGggYW4gaW52YWxpZCBsb2dUeXBlICh2YWx1ZTogJHtsb2dUeXBlfSlgKTtcclxuICAgIH1cclxufTtcclxuY2xhc3MgTG9nZ2VyIHtcclxuICAgIC8qKlxyXG4gICAgICogR2l2ZXMgeW91IGFuIGluc3RhbmNlIG9mIGEgTG9nZ2VyIHRvIGNhcHR1cmUgbWVzc2FnZXMgYWNjb3JkaW5nIHRvXHJcbiAgICAgKiBGaXJlYmFzZSdzIGxvZ2dpbmcgc2NoZW1lLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIHRoYXQgdGhlIGxvZ3Mgd2lsbCBiZSBhc3NvY2lhdGVkIHdpdGhcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IobmFtZSkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGxvZyBsZXZlbCBvZiB0aGUgZ2l2ZW4gTG9nZ2VyIGluc3RhbmNlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2xvZ0xldmVsID0gZGVmYXVsdExvZ0xldmVsO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBtYWluIChpbnRlcm5hbCkgbG9nIGhhbmRsZXIgZm9yIHRoZSBMb2dnZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICogQ2FuIGJlIHNldCB0byBhIG5ldyBmdW5jdGlvbiBpbiBpbnRlcm5hbCBwYWNrYWdlIGNvZGUgYnV0IG5vdCBieSB1c2VyLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIgPSBkZWZhdWx0TG9nSGFuZGxlcjtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgb3B0aW9uYWwsIGFkZGl0aW9uYWwsIHVzZXItZGVmaW5lZCBsb2cgaGFuZGxlciBmb3IgdGhlIExvZ2dlciBpbnN0YW5jZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2FwdHVyZSB0aGUgY3VycmVudCBpbnN0YW5jZSBmb3IgbGF0ZXIgdXNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaW5zdGFuY2VzLnB1c2godGhpcyk7XHJcbiAgICB9XHJcbiAgICBnZXQgbG9nTGV2ZWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvZ0xldmVsO1xyXG4gICAgfVxyXG4gICAgc2V0IGxvZ0xldmVsKHZhbCkge1xyXG4gICAgICAgIGlmICghKHZhbCBpbiBMb2dMZXZlbCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCB2YWx1ZSBcIiR7dmFsfVwiIGFzc2lnbmVkIHRvIFxcYGxvZ0xldmVsXFxgYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2xvZ0xldmVsID0gdmFsO1xyXG4gICAgfVxyXG4gICAgLy8gV29ya2Fyb3VuZCBmb3Igc2V0dGVyL2dldHRlciBoYXZpbmcgdG8gYmUgdGhlIHNhbWUgdHlwZS5cclxuICAgIHNldExvZ0xldmVsKHZhbCkge1xyXG4gICAgICAgIHRoaXMuX2xvZ0xldmVsID0gdHlwZW9mIHZhbCA9PT0gJ3N0cmluZycgPyBsZXZlbFN0cmluZ1RvRW51bVt2YWxdIDogdmFsO1xyXG4gICAgfVxyXG4gICAgZ2V0IGxvZ0hhbmRsZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvZ0hhbmRsZXI7XHJcbiAgICB9XHJcbiAgICBzZXQgbG9nSGFuZGxlcih2YWwpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHZhbCAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBhc3NpZ25lZCB0byBgbG9nSGFuZGxlcmAgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIgPSB2YWw7XHJcbiAgICB9XHJcbiAgICBnZXQgdXNlckxvZ0hhbmRsZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJMb2dIYW5kbGVyO1xyXG4gICAgfVxyXG4gICAgc2V0IHVzZXJMb2dIYW5kbGVyKHZhbCkge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyID0gdmFsO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZnVuY3Rpb25zIGJlbG93IGFyZSBhbGwgYmFzZWQgb24gdGhlIGBjb25zb2xlYCBpbnRlcmZhY2VcclxuICAgICAqL1xyXG4gICAgZGVidWcoLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLkRFQlVHLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLkRFQlVHLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIGxvZyguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiZcclxuICAgICAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuVkVSQk9TRSwgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5WRVJCT1NFLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIGluZm8oLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLklORk8sIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuSU5GTywgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICB3YXJuKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5XQVJOLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLldBUk4sIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgZXJyb3IoLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLkVSUk9SLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLkVSUk9SLCAuLi5hcmdzKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBzZXRMb2dMZXZlbChsZXZlbCkge1xyXG4gICAgaW5zdGFuY2VzLmZvckVhY2goaW5zdCA9PiB7XHJcbiAgICAgICAgaW5zdC5zZXRMb2dMZXZlbChsZXZlbCk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBzZXRVc2VyTG9nSGFuZGxlcihsb2dDYWxsYmFjaywgb3B0aW9ucykge1xyXG4gICAgZm9yIChjb25zdCBpbnN0YW5jZSBvZiBpbnN0YW5jZXMpIHtcclxuICAgICAgICBsZXQgY3VzdG9tTG9nTGV2ZWwgPSBudWxsO1xyXG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMubGV2ZWwpIHtcclxuICAgICAgICAgICAgY3VzdG9tTG9nTGV2ZWwgPSBsZXZlbFN0cmluZ1RvRW51bVtvcHRpb25zLmxldmVsXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxvZ0NhbGxiYWNrID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLnVzZXJMb2dIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLnVzZXJMb2dIYW5kbGVyID0gKGluc3RhbmNlLCBsZXZlbCwgLi4uYXJncykgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGFyZ3NcclxuICAgICAgICAgICAgICAgICAgICAubWFwKGFyZyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgYXJnID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgYXJnID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZy50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChhcmcgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJnLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGFyZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGlnbm9yZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGFyZyA9PiBhcmcpXHJcbiAgICAgICAgICAgICAgICAgICAgLmpvaW4oJyAnKTtcclxuICAgICAgICAgICAgICAgIGlmIChsZXZlbCA+PSAoY3VzdG9tTG9nTGV2ZWwgIT09IG51bGwgJiYgY3VzdG9tTG9nTGV2ZWwgIT09IHZvaWQgMCA/IGN1c3RvbUxvZ0xldmVsIDogaW5zdGFuY2UubG9nTGV2ZWwpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nQ2FsbGJhY2soe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXZlbDogTG9nTGV2ZWxbbGV2ZWxdLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGluc3RhbmNlLm5hbWVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuZXhwb3J0IHsgTG9nTGV2ZWwsIExvZ2dlciwgc2V0TG9nTGV2ZWwsIHNldFVzZXJMb2dIYW5kbGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiaW1wb3J0IHsgRGVmZXJyZWQgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5cbi8qKlxyXG4gKiBDb21wb25lbnQgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuIGBhdXRoYCwgYGF1dGgtaW50ZXJuYWxgXHJcbiAqL1xyXG5jbGFzcyBDb21wb25lbnQge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIHB1YmxpYyBzZXJ2aWNlIG5hbWUsIGUuZy4gYXBwLCBhdXRoLCBmaXJlc3RvcmUsIGRhdGFiYXNlXHJcbiAgICAgKiBAcGFyYW0gaW5zdGFuY2VGYWN0b3J5IFNlcnZpY2UgZmFjdG9yeSByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgdGhlIHB1YmxpYyBpbnRlcmZhY2VcclxuICAgICAqIEBwYXJhbSB0eXBlIHdoZXRoZXIgdGhlIHNlcnZpY2UgcHJvdmlkZWQgYnkgdGhlIGNvbXBvbmVudCBpcyBwdWJsaWMgb3IgcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBpbnN0YW5jZUZhY3RvcnksIHR5cGUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VGYWN0b3J5ID0gaW5zdGFuY2VGYWN0b3J5O1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyA9IGZhbHNlO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFByb3BlcnRpZXMgdG8gYmUgYWRkZWQgdG8gdGhlIHNlcnZpY2UgbmFtZXNwYWNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlUHJvcHMgPSB7fTtcclxuICAgICAgICB0aGlzLmluc3RhbnRpYXRpb25Nb2RlID0gXCJMQVpZXCIgLyogTEFaWSAqLztcclxuICAgICAgICB0aGlzLm9uSW5zdGFuY2VDcmVhdGVkID0gbnVsbDtcclxuICAgIH1cclxuICAgIHNldEluc3RhbnRpYXRpb25Nb2RlKG1vZGUpIHtcclxuICAgICAgICB0aGlzLmluc3RhbnRpYXRpb25Nb2RlID0gbW9kZTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldE11bHRpcGxlSW5zdGFuY2VzKG11bHRpcGxlSW5zdGFuY2VzKSB7XHJcbiAgICAgICAgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyA9IG11bHRpcGxlSW5zdGFuY2VzO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgc2V0U2VydmljZVByb3BzKHByb3BzKSB7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlUHJvcHMgPSBwcm9wcztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldEluc3RhbmNlQ3JlYXRlZENhbGxiYWNrKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5vbkluc3RhbmNlQ3JlYXRlZCA9IGNhbGxiYWNrO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IERFRkFVTFRfRU5UUllfTkFNRSA9ICdbREVGQVVMVF0nO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGluc3RhbmNlIGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiAnYXV0aCcsICdhdXRoLWludGVybmFsJ1xyXG4gKiBOYW1lU2VydmljZU1hcHBpbmdbVF0gaXMgYW4gYWxpYXMgZm9yIHRoZSB0eXBlIG9mIHRoZSBpbnN0YW5jZVxyXG4gKi9cclxuY2xhc3MgUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IobmFtZSwgY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZCA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc09wdGlvbnMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5vbkluaXRDYWxsYmFja3MgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBpZGVudGlmaWVyIEEgcHJvdmlkZXIgY2FuIHByb3ZpZGUgbXVsaXRwbGUgaW5zdGFuY2VzIG9mIGEgc2VydmljZVxyXG4gICAgICogaWYgdGhpcy5jb21wb25lbnQubXVsdGlwbGVJbnN0YW5jZXMgaXMgdHJ1ZS5cclxuICAgICAqL1xyXG4gICAgZ2V0KGlkZW50aWZpZXIpIHtcclxuICAgICAgICAvLyBpZiBtdWx0aXBsZUluc3RhbmNlcyBpcyBub3Qgc3VwcG9ydGVkLCB1c2UgdGhlIGRlZmF1bHQgbmFtZVxyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCF0aGlzLmluc3RhbmNlc0RlZmVycmVkLmhhcyhub3JtYWxpemVkSWRlbnRpZmllcikpIHtcclxuICAgICAgICAgICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5zZXQobm9ybWFsaXplZElkZW50aWZpZXIsIGRlZmVycmVkKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikgfHxcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6ZSB0aGUgc2VydmljZSBpZiBpdCBjYW4gYmUgYXV0by1pbml0aWFsaXplZFxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXJcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IHRocm93cyBhbiBleGNlcHRpb24gZHVyaW5nIGdldCgpLCBpdCBzaG91bGQgbm90IGNhdXNlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYSBmYXRhbCBlcnJvci4gV2UganVzdCByZXR1cm4gdGhlIHVucmVzb2x2ZWQgcHJvbWlzZSBpbiB0aGlzIGNhc2UuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKS5wcm9taXNlO1xyXG4gICAgfVxyXG4gICAgZ2V0SW1tZWRpYXRlKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgLy8gaWYgbXVsdGlwbGVJbnN0YW5jZXMgaXMgbm90IHN1cHBvcnRlZCwgdXNlIHRoZSBkZWZhdWx0IG5hbWVcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5pZGVudGlmaWVyKTtcclxuICAgICAgICBjb25zdCBvcHRpb25hbCA9IChfYSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5vcHRpb25hbCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikgfHxcclxuICAgICAgICAgICAgdGhpcy5zaG91bGRBdXRvSW5pdGlhbGl6ZSgpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBJbiBjYXNlIGEgY29tcG9uZW50IGlzIG5vdCBpbml0aWFsaXplZCBhbmQgc2hvdWxkL2NhbiBub3QgYmUgYXV0by1pbml0aWFsaXplZCBhdCB0aGUgbW9tZW50LCByZXR1cm4gbnVsbCBpZiB0aGUgb3B0aW9uYWwgZmxhZyBpcyBzZXQsIG9yIHRocm93XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25hbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihgU2VydmljZSAke3RoaXMubmFtZX0gaXMgbm90IGF2YWlsYWJsZWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0Q29tcG9uZW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudDtcclxuICAgIH1cclxuICAgIHNldENvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBpZiAoY29tcG9uZW50Lm5hbWUgIT09IHRoaXMubmFtZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgTWlzbWF0Y2hpbmcgQ29tcG9uZW50ICR7Y29tcG9uZW50Lm5hbWV9IGZvciBQcm92aWRlciAke3RoaXMubmFtZX0uYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgQ29tcG9uZW50IGZvciAke3RoaXMubmFtZX0gaGFzIGFscmVhZHkgYmVlbiBwcm92aWRlZGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IGNvbXBvbmVudDtcclxuICAgICAgICAvLyByZXR1cm4gZWFybHkgd2l0aG91dCBhdHRlbXB0aW5nIHRvIGluaXRpYWxpemUgdGhlIGNvbXBvbmVudCBpZiB0aGUgY29tcG9uZW50IHJlcXVpcmVzIGV4cGxpY2l0IGluaXRpYWxpemF0aW9uIChjYWxsaW5nIGBQcm92aWRlci5pbml0aWFsaXplKClgKVxyXG4gICAgICAgIGlmICghdGhpcy5zaG91bGRBdXRvSW5pdGlhbGl6ZSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaWYgdGhlIHNlcnZpY2UgaXMgZWFnZXIsIGluaXRpYWxpemUgdGhlIGRlZmF1bHQgaW5zdGFuY2VcclxuICAgICAgICBpZiAoaXNDb21wb25lbnRFYWdlcihjb21wb25lbnQpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2UoeyBpbnN0YW5jZUlkZW50aWZpZXI6IERFRkFVTFRfRU5UUllfTkFNRSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSBmb3IgYW4gZWFnZXIgQ29tcG9uZW50IHRocm93cyBhbiBleGNlcHRpb24gZHVyaW5nIHRoZSBlYWdlclxyXG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6YXRpb24sIGl0IHNob3VsZCBub3QgY2F1c2UgYSBmYXRhbCBlcnJvci5cclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IEludmVzdGlnYXRlIGlmIHdlIG5lZWQgdG8gbWFrZSBpdCBjb25maWd1cmFibGUsIGJlY2F1c2Ugc29tZSBjb21wb25lbnQgbWF5IHdhbnQgdG8gY2F1c2VcclxuICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IgaW4gdGhpcyBjYXNlP1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIENyZWF0ZSBzZXJ2aWNlIGluc3RhbmNlcyBmb3IgdGhlIHBlbmRpbmcgcHJvbWlzZXMgYW5kIHJlc29sdmUgdGhlbVxyXG4gICAgICAgIC8vIE5PVEU6IGlmIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgaXMgZmFsc2UsIG9ubHkgdGhlIGRlZmF1bHQgaW5zdGFuY2Ugd2lsbCBiZSBjcmVhdGVkXHJcbiAgICAgICAgLy8gYW5kIGFsbCBwcm9taXNlcyB3aXRoIHJlc29sdmUgd2l0aCBpdCByZWdhcmRsZXNzIG9mIHRoZSBpZGVudGlmaWVyLlxyXG4gICAgICAgIGZvciAoY29uc3QgW2luc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2VEZWZlcnJlZF0gb2YgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5lbnRyaWVzKCkpIHtcclxuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgLy8gYGdldE9ySW5pdGlhbGl6ZVNlcnZpY2UoKWAgc2hvdWxkIGFsd2F5cyByZXR1cm4gYSB2YWxpZCBpbnN0YW5jZSBzaW5jZSBhIGNvbXBvbmVudCBpcyBndWFyYW50ZWVkLiB1c2UgISB0byBtYWtlIHR5cGVzY3JpcHQgaGFwcHkuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllclxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZURlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IHRocm93cyBhbiBleGNlcHRpb24sIGl0IHNob3VsZCBub3QgY2F1c2VcclxuICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IuIFdlIGp1c3QgbGVhdmUgdGhlIHByb21pc2UgdW5yZXNvbHZlZC5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNsZWFySW5zdGFuY2UoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzT3B0aW9ucy5kZWxldGUoaWRlbnRpZmllcik7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgfVxyXG4gICAgLy8gYXBwLmRlbGV0ZSgpIHdpbGwgY2FsbCB0aGlzIG1ldGhvZCBvbiBldmVyeSBwcm92aWRlciB0byBkZWxldGUgdGhlIHNlcnZpY2VzXHJcbiAgICAvLyBUT0RPOiBzaG91bGQgd2UgbWFyayB0aGUgcHJvdmlkZXIgYXMgZGVsZXRlZD9cclxuICAgIGFzeW5jIGRlbGV0ZSgpIHtcclxuICAgICAgICBjb25zdCBzZXJ2aWNlcyA9IEFycmF5LmZyb20odGhpcy5pbnN0YW5jZXMudmFsdWVzKCkpO1xyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgICAgICAgLi4uc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoc2VydmljZSA9PiAnSU5URVJOQUwnIGluIHNlcnZpY2UpIC8vIGxlZ2FjeSBzZXJ2aWNlc1xyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgIC5tYXAoc2VydmljZSA9PiBzZXJ2aWNlLklOVEVSTkFMLmRlbGV0ZSgpKSxcclxuICAgICAgICAgICAgLi4uc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoc2VydmljZSA9PiAnX2RlbGV0ZScgaW4gc2VydmljZSkgLy8gbW9kdWxhcml6ZWQgc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICAubWFwKHNlcnZpY2UgPT4gc2VydmljZS5fZGVsZXRlKCkpXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcbiAgICBpc0NvbXBvbmVudFNldCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQgIT0gbnVsbDtcclxuICAgIH1cclxuICAgIGlzSW5pdGlhbGl6ZWQoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlcy5oYXMoaWRlbnRpZmllcik7XHJcbiAgICB9XHJcbiAgICBnZXRPcHRpb25zKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZXNPcHRpb25zLmdldChpZGVudGlmaWVyKSB8fCB7fTtcclxuICAgIH1cclxuICAgIGluaXRpYWxpemUob3B0cyA9IHt9KSB7XHJcbiAgICAgICAgY29uc3QgeyBvcHRpb25zID0ge30gfSA9IG9wdHM7XHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihvcHRzLmluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYCR7dGhpcy5uYW1lfSgke25vcm1hbGl6ZWRJZGVudGlmaWVyfSkgaGFzIGFscmVhZHkgYmVlbiBpbml0aWFsaXplZGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMuaXNDb21wb25lbnRTZXQoKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgQ29tcG9uZW50ICR7dGhpcy5uYW1lfSBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZCB5ZXRgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyLFxyXG4gICAgICAgICAgICBvcHRpb25zXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gcmVzb2x2ZSBhbnkgcGVuZGluZyBwcm9taXNlIHdhaXRpbmcgZm9yIHRoZSBzZXJ2aWNlIGluc3RhbmNlXHJcbiAgICAgICAgZm9yIChjb25zdCBbaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZURlZmVycmVkXSBvZiB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmVudHJpZXMoKSkge1xyXG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkRGVmZXJyZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgaWYgKG5vcm1hbGl6ZWRJZGVudGlmaWVyID09PSBub3JtYWxpemVkRGVmZXJyZWRJZGVudGlmaWVyKSB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZURlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjYWxsYmFjayAtIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGludm9rZWQgIGFmdGVyIHRoZSBwcm92aWRlciBoYXMgYmVlbiBpbml0aWFsaXplZCBieSBjYWxsaW5nIHByb3ZpZGVyLmluaXRpYWxpemUoKS5cclxuICAgICAqIFRoZSBmdW5jdGlvbiBpcyBpbnZva2VkIFNZTkNIUk9OT1VTTFksIHNvIGl0IHNob3VsZCBub3QgZXhlY3V0ZSBhbnkgbG9uZ3J1bm5pbmcgdGFza3MgaW4gb3JkZXIgdG8gbm90IGJsb2NrIHRoZSBwcm9ncmFtLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpZGVudGlmaWVyIEFuIG9wdGlvbmFsIGluc3RhbmNlIGlkZW50aWZpZXJcclxuICAgICAqIEByZXR1cm5zIGEgZnVuY3Rpb24gdG8gdW5yZWdpc3RlciB0aGUgY2FsbGJhY2tcclxuICAgICAqL1xyXG4gICAgb25Jbml0KGNhbGxiYWNrLCBpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllcik7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdDYWxsYmFja3MgPSAoX2EgPSB0aGlzLm9uSW5pdENhbGxiYWNrcy5nZXQobm9ybWFsaXplZElkZW50aWZpZXIpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBuZXcgU2V0KCk7XHJcbiAgICAgICAgZXhpc3RpbmdDYWxsYmFja3MuYWRkKGNhbGxiYWNrKTtcclxuICAgICAgICB0aGlzLm9uSW5pdENhbGxiYWNrcy5zZXQobm9ybWFsaXplZElkZW50aWZpZXIsIGV4aXN0aW5nQ2FsbGJhY2tzKTtcclxuICAgICAgICBjb25zdCBleGlzdGluZ0luc3RhbmNlID0gdGhpcy5pbnN0YW5jZXMuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoZXhpc3RpbmdJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBjYWxsYmFjayhleGlzdGluZ0luc3RhbmNlLCBub3JtYWxpemVkSWRlbnRpZmllcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4aXN0aW5nQ2FsbGJhY2tzLmRlbGV0ZShjYWxsYmFjayk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW52b2tlIG9uSW5pdCBjYWxsYmFja3Mgc3luY2hyb25vdXNseVxyXG4gICAgICogQHBhcmFtIGluc3RhbmNlIHRoZSBzZXJ2aWNlIGluc3RhbmNlYFxyXG4gICAgICovXHJcbiAgICBpbnZva2VPbkluaXRDYWxsYmFja3MoaW5zdGFuY2UsIGlkZW50aWZpZXIpIHtcclxuICAgICAgICBjb25zdCBjYWxsYmFja3MgPSB0aGlzLm9uSW5pdENhbGxiYWNrcy5nZXQoaWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCFjYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIGNhbGxiYWNrcykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soaW5zdGFuY2UsIGlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICAgICAgLy8gaWdub3JlIGVycm9ycyBpbiB0aGUgb25Jbml0IGNhbGxiYWNrXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXRPckluaXRpYWxpemVTZXJ2aWNlKHsgaW5zdGFuY2VJZGVudGlmaWVyLCBvcHRpb25zID0ge30gfSkge1xyXG4gICAgICAgIGxldCBpbnN0YW5jZSA9IHRoaXMuaW5zdGFuY2VzLmdldChpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICghaW5zdGFuY2UgJiYgdGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UgPSB0aGlzLmNvbXBvbmVudC5pbnN0YW5jZUZhY3RvcnkodGhpcy5jb250YWluZXIsIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplSWRlbnRpZmllckZvckZhY3RvcnkoaW5zdGFuY2VJZGVudGlmaWVyKSxcclxuICAgICAgICAgICAgICAgIG9wdGlvbnNcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXNPcHRpb25zLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogSW52b2tlIG9uSW5pdCBsaXN0ZW5lcnMuXHJcbiAgICAgICAgICAgICAqIE5vdGUgdGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQgaXMgZGlmZmVyZW50LCB3aGljaCBpcyB1c2VkIGJ5IHRoZSBjb21wb25lbnQgY3JlYXRvcixcclxuICAgICAgICAgICAgICogd2hpbGUgb25Jbml0IGxpc3RlbmVycyBhcmUgcmVnaXN0ZXJlZCBieSBjb25zdW1lcnMgb2YgdGhlIHByb3ZpZGVyLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdGhpcy5pbnZva2VPbkluaXRDYWxsYmFja3MoaW5zdGFuY2UsIGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBPcmRlciBpcyBpbXBvcnRhbnRcclxuICAgICAgICAgICAgICogb25JbnN0YW5jZUNyZWF0ZWQoKSBzaG91bGQgYmUgY2FsbGVkIGFmdGVyIHRoaXMuaW5zdGFuY2VzLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTsgd2hpY2hcclxuICAgICAgICAgICAgICogbWFrZXMgYGlzSW5pdGlhbGl6ZWQoKWAgcmV0dXJuIHRydWUuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQodGhpcy5jb250YWluZXIsIGluc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWdub3JlIGVycm9ycyBpbiB0aGUgb25JbnN0YW5jZUNyZWF0ZWRDYWxsYmFja1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZSB8fCBudWxsO1xyXG4gICAgfVxyXG4gICAgbm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICBpZiAodGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50Lm11bHRpcGxlSW5zdGFuY2VzID8gaWRlbnRpZmllciA6IERFRkFVTFRfRU5UUllfTkFNRTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpZGVudGlmaWVyOyAvLyBhc3N1bWUgbXVsdGlwbGUgaW5zdGFuY2VzIGFyZSBzdXBwb3J0ZWQgYmVmb3JlIHRoZSBjb21wb25lbnQgaXMgcHJvdmlkZWQuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2hvdWxkQXV0b0luaXRpYWxpemUoKSB7XHJcbiAgICAgICAgcmV0dXJuICghIXRoaXMuY29tcG9uZW50ICYmXHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50Lmluc3RhbnRpYXRpb25Nb2RlICE9PSBcIkVYUExJQ0lUXCIgLyogRVhQTElDSVQgKi8pO1xyXG4gICAgfVxyXG59XHJcbi8vIHVuZGVmaW5lZCBzaG91bGQgYmUgcGFzc2VkIHRvIHRoZSBzZXJ2aWNlIGZhY3RvcnkgZm9yIHRoZSBkZWZhdWx0IGluc3RhbmNlXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZUlkZW50aWZpZXJGb3JGYWN0b3J5KGlkZW50aWZpZXIpIHtcclxuICAgIHJldHVybiBpZGVudGlmaWVyID09PSBERUZBVUxUX0VOVFJZX05BTUUgPyB1bmRlZmluZWQgOiBpZGVudGlmaWVyO1xyXG59XHJcbmZ1bmN0aW9uIGlzQ29tcG9uZW50RWFnZXIoY29tcG9uZW50KSB7XHJcbiAgICByZXR1cm4gY29tcG9uZW50Lmluc3RhbnRpYXRpb25Nb2RlID09PSBcIkVBR0VSXCIgLyogRUFHRVIgKi87XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENvbXBvbmVudENvbnRhaW5lciB0aGF0IHByb3ZpZGVzIFByb3ZpZGVycyBmb3Igc2VydmljZSBuYW1lIFQsIGUuZy4gYGF1dGhgLCBgYXV0aC1pbnRlcm5hbGBcclxuICovXHJcbmNsYXNzIENvbXBvbmVudENvbnRhaW5lciB7XHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLnByb3ZpZGVycyA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjb21wb25lbnQgQ29tcG9uZW50IGJlaW5nIGFkZGVkXHJcbiAgICAgKiBAcGFyYW0gb3ZlcndyaXRlIFdoZW4gYSBjb21wb25lbnQgd2l0aCB0aGUgc2FtZSBuYW1lIGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCxcclxuICAgICAqIGlmIG92ZXJ3cml0ZSBpcyB0cnVlOiBvdmVyd3JpdGUgdGhlIGV4aXN0aW5nIGNvbXBvbmVudCB3aXRoIHRoZSBuZXcgY29tcG9uZW50IGFuZCBjcmVhdGUgYSBuZXdcclxuICAgICAqIHByb3ZpZGVyIHdpdGggdGhlIG5ldyBjb21wb25lbnQuIEl0IGNhbiBiZSB1c2VmdWwgaW4gdGVzdHMgd2hlcmUgeW91IHdhbnQgdG8gdXNlIGRpZmZlcmVudCBtb2Nrc1xyXG4gICAgICogZm9yIGRpZmZlcmVudCB0ZXN0cy5cclxuICAgICAqIGlmIG92ZXJ3cml0ZSBpcyBmYWxzZTogdGhyb3cgYW4gZXhjZXB0aW9uXHJcbiAgICAgKi9cclxuICAgIGFkZENvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMuZ2V0UHJvdmlkZXIoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIGlmIChwcm92aWRlci5pc0NvbXBvbmVudFNldCgpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ29tcG9uZW50ICR7Y29tcG9uZW50Lm5hbWV9IGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCB3aXRoICR7dGhpcy5uYW1lfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwcm92aWRlci5zZXRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIGFkZE9yT3ZlcndyaXRlQ29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5nZXRQcm92aWRlcihjb21wb25lbnQubmFtZSk7XHJcbiAgICAgICAgaWYgKHByb3ZpZGVyLmlzQ29tcG9uZW50U2V0KCkpIHtcclxuICAgICAgICAgICAgLy8gZGVsZXRlIHRoZSBleGlzdGluZyBwcm92aWRlciBmcm9tIHRoZSBjb250YWluZXIsIHNvIHdlIGNhbiByZWdpc3RlciB0aGUgbmV3IGNvbXBvbmVudFxyXG4gICAgICAgICAgICB0aGlzLnByb3ZpZGVycy5kZWxldGUoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBnZXRQcm92aWRlciBwcm92aWRlcyBhIHR5cGUgc2FmZSBpbnRlcmZhY2Ugd2hlcmUgaXQgY2FuIG9ubHkgYmUgY2FsbGVkIHdpdGggYSBmaWVsZCBuYW1lXHJcbiAgICAgKiBwcmVzZW50IGluIE5hbWVTZXJ2aWNlTWFwcGluZyBpbnRlcmZhY2UuXHJcbiAgICAgKlxyXG4gICAgICogRmlyZWJhc2UgU0RLcyBwcm92aWRpbmcgc2VydmljZXMgc2hvdWxkIGV4dGVuZCBOYW1lU2VydmljZU1hcHBpbmcgaW50ZXJmYWNlIHRvIHJlZ2lzdGVyXHJcbiAgICAgKiB0aGVtc2VsdmVzLlxyXG4gICAgICovXHJcbiAgICBnZXRQcm92aWRlcihuYW1lKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvdmlkZXJzLmhhcyhuYW1lKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm92aWRlcnMuZ2V0KG5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjcmVhdGUgYSBQcm92aWRlciBmb3IgYSBzZXJ2aWNlIHRoYXQgaGFzbid0IHJlZ2lzdGVyZWQgd2l0aCBGaXJlYmFzZVxyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gbmV3IFByb3ZpZGVyKG5hbWUsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJzLnNldChuYW1lLCBwcm92aWRlcik7XHJcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyO1xyXG4gICAgfVxyXG4gICAgZ2V0UHJvdmlkZXJzKCkge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMucHJvdmlkZXJzLnZhbHVlcygpKTtcclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBDb21wb25lbnQsIENvbXBvbmVudENvbnRhaW5lciwgUHJvdmlkZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJ2YXIgY29tbW9uanNHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWxUaGlzIDogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB7fTtcblxudmFyIGVzbSA9IHt9O1xuXG4vKlxuXG4gQ29weXJpZ2h0IFRoZSBDbG9zdXJlIExpYnJhcnkgQXV0aG9ycy5cbiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuKi9cbnZhciBrLGdvb2c9Z29vZ3x8e30sbD1jb21tb25qc0dsb2JhbHx8c2VsZjtmdW5jdGlvbiBhYSgpe31mdW5jdGlvbiBiYShhKXt2YXIgYj10eXBlb2YgYTtiPVwib2JqZWN0XCIhPWI/YjphP0FycmF5LmlzQXJyYXkoYSk/XCJhcnJheVwiOmI6XCJudWxsXCI7cmV0dXJuIFwiYXJyYXlcIj09Ynx8XCJvYmplY3RcIj09YiYmXCJudW1iZXJcIj09dHlwZW9mIGEubGVuZ3RofWZ1bmN0aW9uIHAoYSl7dmFyIGI9dHlwZW9mIGE7cmV0dXJuIFwib2JqZWN0XCI9PWImJm51bGwhPWF8fFwiZnVuY3Rpb25cIj09Yn1mdW5jdGlvbiBkYShhKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsZWEpJiZhW2VhXXx8KGFbZWFdPSsrZmEpfXZhciBlYT1cImNsb3N1cmVfdWlkX1wiKygxRTkqTWF0aC5yYW5kb20oKT4+PjApLGZhPTA7ZnVuY3Rpb24gaGEoYSxiLGMpe3JldHVybiBhLmNhbGwuYXBwbHkoYS5iaW5kLGFyZ3VtZW50cyl9XG5mdW5jdGlvbiBpYShhLGIsYyl7aWYoIWEpdGhyb3cgRXJyb3IoKTtpZigyPGFyZ3VtZW50cy5sZW5ndGgpe3ZhciBkPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO0FycmF5LnByb3RvdHlwZS51bnNoaWZ0LmFwcGx5KGUsZCk7cmV0dXJuIGEuYXBwbHkoYixlKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYixhcmd1bWVudHMpfX1mdW5jdGlvbiBxKGEsYixjKXtGdW5jdGlvbi5wcm90b3R5cGUuYmluZCYmLTEhPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLnRvU3RyaW5nKCkuaW5kZXhPZihcIm5hdGl2ZSBjb2RlXCIpP3E9aGE6cT1pYTtyZXR1cm4gcS5hcHBseShudWxsLGFyZ3VtZW50cyl9XG5mdW5jdGlvbiBqYShhLGIpe3ZhciBjPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1jLnNsaWNlKCk7ZC5wdXNoLmFwcGx5KGQsYXJndW1lbnRzKTtyZXR1cm4gYS5hcHBseSh0aGlzLGQpfX1mdW5jdGlvbiB0KGEsYil7ZnVuY3Rpb24gYygpe31jLnByb3RvdHlwZT1iLnByb3RvdHlwZTthLlo9Yi5wcm90b3R5cGU7YS5wcm90b3R5cGU9bmV3IGM7YS5wcm90b3R5cGUuY29uc3RydWN0b3I9YTthLlZiPWZ1bmN0aW9uKGQsZSxmKXtmb3IodmFyIGg9QXJyYXkoYXJndW1lbnRzLmxlbmd0aC0yKSxuPTI7bjxhcmd1bWVudHMubGVuZ3RoO24rKyloW24tMl09YXJndW1lbnRzW25dO3JldHVybiBiLnByb3RvdHlwZVtlXS5hcHBseShkLGgpfTt9ZnVuY3Rpb24gdigpe3RoaXMucz10aGlzLnM7dGhpcy5vPXRoaXMubzt9dmFyIGthPTAsbGE9e307di5wcm90b3R5cGUucz0hMTt2LnByb3RvdHlwZS5uYT1mdW5jdGlvbigpe2lmKCF0aGlzLnMmJih0aGlzLnM9ITAsdGhpcy5NKCksMCE9a2EpKXt2YXIgYT1kYSh0aGlzKTtkZWxldGUgbGFbYV07fX07di5wcm90b3R5cGUuTT1mdW5jdGlvbigpe2lmKHRoaXMubylmb3IoO3RoaXMuby5sZW5ndGg7KXRoaXMuby5zaGlmdCgpKCk7fTtjb25zdCBtYT1BcnJheS5wcm90b3R5cGUuaW5kZXhPZj9mdW5jdGlvbihhLGIpe3JldHVybiBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGEsYix2b2lkIDApfTpmdW5jdGlvbihhLGIpe2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSlyZXR1cm4gXCJzdHJpbmdcIiE9PXR5cGVvZiBifHwxIT1iLmxlbmd0aD8tMTphLmluZGV4T2YoYiwwKTtmb3IobGV0IGM9MDtjPGEubGVuZ3RoO2MrKylpZihjIGluIGEmJmFbY109PT1iKXJldHVybiBjO3JldHVybiAtMX0sbmE9QXJyYXkucHJvdG90eXBlLmZvckVhY2g/ZnVuY3Rpb24oYSxiLGMpe0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYSxiLGMpO306ZnVuY3Rpb24oYSxiLGMpe2NvbnN0IGQ9YS5sZW5ndGgsZT1cInN0cmluZ1wiPT09dHlwZW9mIGE/YS5zcGxpdChcIlwiKTphO2ZvcihsZXQgZj0wO2Y8ZDtmKyspZiBpbiBlJiZiLmNhbGwoYyxlW2ZdLGYsYSk7fTtcbmZ1bmN0aW9uIG9hKGEpe2E6e3ZhciBiPXBhO2NvbnN0IGM9YS5sZW5ndGgsZD1cInN0cmluZ1wiPT09dHlwZW9mIGE/YS5zcGxpdChcIlwiKTphO2ZvcihsZXQgZT0wO2U8YztlKyspaWYoZSBpbiBkJiZiLmNhbGwodm9pZCAwLGRbZV0sZSxhKSl7Yj1lO2JyZWFrIGF9Yj0tMTt9cmV0dXJuIDA+Yj9udWxsOlwic3RyaW5nXCI9PT10eXBlb2YgYT9hLmNoYXJBdChiKTphW2JdfWZ1bmN0aW9uIHFhKGEpe3JldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLGFyZ3VtZW50cyl9ZnVuY3Rpb24gcmEoYSl7Y29uc3QgYj1hLmxlbmd0aDtpZigwPGIpe2NvbnN0IGM9QXJyYXkoYik7Zm9yKGxldCBkPTA7ZDxiO2QrKyljW2RdPWFbZF07cmV0dXJuIGN9cmV0dXJuIFtdfWZ1bmN0aW9uIHNhKGEpe3JldHVybiAvXltcXHNcXHhhMF0qJC8udGVzdChhKX12YXIgdGE9U3RyaW5nLnByb3RvdHlwZS50cmltP2Z1bmN0aW9uKGEpe3JldHVybiBhLnRyaW0oKX06ZnVuY3Rpb24oYSl7cmV0dXJuIC9eW1xcc1xceGEwXSooW1xcc1xcU10qPylbXFxzXFx4YTBdKiQvLmV4ZWMoYSlbMV19O2Z1bmN0aW9uIHcoYSxiKXtyZXR1cm4gLTEhPWEuaW5kZXhPZihiKX1mdW5jdGlvbiB1YShhLGIpe3JldHVybiBhPGI/LTE6YT5iPzE6MH12YXIgeDthOnt2YXIgdmE9bC5uYXZpZ2F0b3I7aWYodmEpe3ZhciB3YT12YS51c2VyQWdlbnQ7aWYod2Epe3g9d2E7YnJlYWsgYX19eD1cIlwiO31mdW5jdGlvbiB4YShhLGIsYyl7Zm9yKGNvbnN0IGQgaW4gYSliLmNhbGwoYyxhW2RdLGQsYSk7fWZ1bmN0aW9uIHlhKGEpe2NvbnN0IGI9e307Zm9yKGNvbnN0IGMgaW4gYSliW2NdPWFbY107cmV0dXJuIGJ9dmFyIHphPVwiY29uc3RydWN0b3IgaGFzT3duUHJvcGVydHkgaXNQcm90b3R5cGVPZiBwcm9wZXJ0eUlzRW51bWVyYWJsZSB0b0xvY2FsZVN0cmluZyB0b1N0cmluZyB2YWx1ZU9mXCIuc3BsaXQoXCIgXCIpO2Z1bmN0aW9uIEFhKGEsYil7bGV0IGMsZDtmb3IobGV0IGU9MTtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXtkPWFyZ3VtZW50c1tlXTtmb3IoYyBpbiBkKWFbY109ZFtjXTtmb3IobGV0IGY9MDtmPHphLmxlbmd0aDtmKyspYz16YVtmXSxPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZCxjKSYmKGFbY109ZFtjXSk7fX1mdW5jdGlvbiBDYShhKXtDYVtcIiBcIl0oYSk7cmV0dXJuIGF9Q2FbXCIgXCJdPWFhO2Z1bmN0aW9uIEZhKGEpe3ZhciBiPUdhO3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiw5KT9iWzldOmJbOV09YSg5KX12YXIgSGE9dyh4LFwiT3BlcmFcIikseT13KHgsXCJUcmlkZW50XCIpfHx3KHgsXCJNU0lFXCIpLElhPXcoeCxcIkVkZ2VcIiksSmE9SWF8fHksS2E9dyh4LFwiR2Vja29cIikmJiEodyh4LnRvTG93ZXJDYXNlKCksXCJ3ZWJraXRcIikmJiF3KHgsXCJFZGdlXCIpKSYmISh3KHgsXCJUcmlkZW50XCIpfHx3KHgsXCJNU0lFXCIpKSYmIXcoeCxcIkVkZ2VcIiksTGE9dyh4LnRvTG93ZXJDYXNlKCksXCJ3ZWJraXRcIikmJiF3KHgsXCJFZGdlXCIpO2Z1bmN0aW9uIE1hKCl7dmFyIGE9bC5kb2N1bWVudDtyZXR1cm4gYT9hLmRvY3VtZW50TW9kZTp2b2lkIDB9dmFyIE5hO1xuYTp7dmFyIE9hPVwiXCIsUGE9ZnVuY3Rpb24oKXt2YXIgYT14O2lmKEthKXJldHVybiAvcnY6KFteXFwpO10rKShcXCl8OykvLmV4ZWMoYSk7aWYoSWEpcmV0dXJuIC9FZGdlXFwvKFtcXGRcXC5dKykvLmV4ZWMoYSk7aWYoeSlyZXR1cm4gL1xcYig/Ok1TSUV8cnYpWzogXShbXlxcKTtdKykoXFwpfDspLy5leGVjKGEpO2lmKExhKXJldHVybiAvV2ViS2l0XFwvKFxcUyspLy5leGVjKGEpO2lmKEhhKXJldHVybiAvKD86VmVyc2lvbilbIFxcL10/KFxcUyspLy5leGVjKGEpfSgpO1BhJiYoT2E9UGE/UGFbMV06XCJcIik7aWYoeSl7dmFyIFFhPU1hKCk7aWYobnVsbCE9UWEmJlFhPnBhcnNlRmxvYXQoT2EpKXtOYT1TdHJpbmcoUWEpO2JyZWFrIGF9fU5hPU9hO312YXIgR2E9e307XG5mdW5jdGlvbiBSYSgpe3JldHVybiBGYShmdW5jdGlvbigpe2xldCBhPTA7Y29uc3QgYj10YShTdHJpbmcoTmEpKS5zcGxpdChcIi5cIiksYz10YShcIjlcIikuc3BsaXQoXCIuXCIpLGQ9TWF0aC5tYXgoYi5sZW5ndGgsYy5sZW5ndGgpO2ZvcihsZXQgaD0wOzA9PWEmJmg8ZDtoKyspe3ZhciBlPWJbaF18fFwiXCIsZj1jW2hdfHxcIlwiO2Rve2U9LyhcXGQqKShcXEQqKSguKikvLmV4ZWMoZSl8fFtcIlwiLFwiXCIsXCJcIixcIlwiXTtmPS8oXFxkKikoXFxEKikoLiopLy5leGVjKGYpfHxbXCJcIixcIlwiLFwiXCIsXCJcIl07aWYoMD09ZVswXS5sZW5ndGgmJjA9PWZbMF0ubGVuZ3RoKWJyZWFrO2E9dWEoMD09ZVsxXS5sZW5ndGg/MDpwYXJzZUludChlWzFdLDEwKSwwPT1mWzFdLmxlbmd0aD8wOnBhcnNlSW50KGZbMV0sMTApKXx8dWEoMD09ZVsyXS5sZW5ndGgsMD09ZlsyXS5sZW5ndGgpfHx1YShlWzJdLGZbMl0pO2U9ZVszXTtmPWZbM107fXdoaWxlKDA9PWEpfXJldHVybiAwPD1hfSl9dmFyIFNhO1xuaWYobC5kb2N1bWVudCYmeSl7dmFyIFRhPU1hKCk7U2E9VGE/VGE6cGFyc2VJbnQoTmEsMTApfHx2b2lkIDA7fWVsc2UgU2E9dm9pZCAwO3ZhciBVYT1TYTt2YXIgVmE9ZnVuY3Rpb24oKXtpZighbC5hZGRFdmVudExpc3RlbmVyfHwhT2JqZWN0LmRlZmluZVByb3BlcnR5KXJldHVybiAhMTt2YXIgYT0hMSxiPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSxcInBhc3NpdmVcIix7Z2V0OmZ1bmN0aW9uKCl7YT0hMDt9fSk7dHJ5e2wuYWRkRXZlbnRMaXN0ZW5lcihcInRlc3RcIixhYSxiKSxsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0ZXN0XCIsYWEsYik7fWNhdGNoKGMpe31yZXR1cm4gYX0oKTtmdW5jdGlvbiB6KGEsYil7dGhpcy50eXBlPWE7dGhpcy5nPXRoaXMudGFyZ2V0PWI7dGhpcy5kZWZhdWx0UHJldmVudGVkPSExO316LnByb3RvdHlwZS5oPWZ1bmN0aW9uKCl7dGhpcy5kZWZhdWx0UHJldmVudGVkPSEwO307ZnVuY3Rpb24gQShhLGIpe3ouY2FsbCh0aGlzLGE/YS50eXBlOlwiXCIpO3RoaXMucmVsYXRlZFRhcmdldD10aGlzLmc9dGhpcy50YXJnZXQ9bnVsbDt0aGlzLmJ1dHRvbj10aGlzLnNjcmVlblk9dGhpcy5zY3JlZW5YPXRoaXMuY2xpZW50WT10aGlzLmNsaWVudFg9MDt0aGlzLmtleT1cIlwiO3RoaXMubWV0YUtleT10aGlzLnNoaWZ0S2V5PXRoaXMuYWx0S2V5PXRoaXMuY3RybEtleT0hMTt0aGlzLnN0YXRlPW51bGw7dGhpcy5wb2ludGVySWQ9MDt0aGlzLnBvaW50ZXJUeXBlPVwiXCI7dGhpcy5pPW51bGw7aWYoYSl7dmFyIGM9dGhpcy50eXBlPWEudHlwZSxkPWEuY2hhbmdlZFRvdWNoZXMmJmEuY2hhbmdlZFRvdWNoZXMubGVuZ3RoP2EuY2hhbmdlZFRvdWNoZXNbMF06bnVsbDt0aGlzLnRhcmdldD1hLnRhcmdldHx8YS5zcmNFbGVtZW50O3RoaXMuZz1iO2lmKGI9YS5yZWxhdGVkVGFyZ2V0KXtpZihLYSl7YTp7dHJ5e0NhKGIubm9kZU5hbWUpO3ZhciBlPSEwO2JyZWFrIGF9Y2F0Y2goZil7fWU9XG4hMTt9ZXx8KGI9bnVsbCk7fX1lbHNlIFwibW91c2VvdmVyXCI9PWM/Yj1hLmZyb21FbGVtZW50OlwibW91c2VvdXRcIj09YyYmKGI9YS50b0VsZW1lbnQpO3RoaXMucmVsYXRlZFRhcmdldD1iO2Q/KHRoaXMuY2xpZW50WD12b2lkIDAhPT1kLmNsaWVudFg/ZC5jbGllbnRYOmQucGFnZVgsdGhpcy5jbGllbnRZPXZvaWQgMCE9PWQuY2xpZW50WT9kLmNsaWVudFk6ZC5wYWdlWSx0aGlzLnNjcmVlblg9ZC5zY3JlZW5YfHwwLHRoaXMuc2NyZWVuWT1kLnNjcmVlbll8fDApOih0aGlzLmNsaWVudFg9dm9pZCAwIT09YS5jbGllbnRYP2EuY2xpZW50WDphLnBhZ2VYLHRoaXMuY2xpZW50WT12b2lkIDAhPT1hLmNsaWVudFk/YS5jbGllbnRZOmEucGFnZVksdGhpcy5zY3JlZW5YPWEuc2NyZWVuWHx8MCx0aGlzLnNjcmVlblk9YS5zY3JlZW5ZfHwwKTt0aGlzLmJ1dHRvbj1hLmJ1dHRvbjt0aGlzLmtleT1hLmtleXx8XCJcIjt0aGlzLmN0cmxLZXk9YS5jdHJsS2V5O3RoaXMuYWx0S2V5PWEuYWx0S2V5O3RoaXMuc2hpZnRLZXk9XG5hLnNoaWZ0S2V5O3RoaXMubWV0YUtleT1hLm1ldGFLZXk7dGhpcy5wb2ludGVySWQ9YS5wb2ludGVySWR8fDA7dGhpcy5wb2ludGVyVHlwZT1cInN0cmluZ1wiPT09dHlwZW9mIGEucG9pbnRlclR5cGU/YS5wb2ludGVyVHlwZTpXYVthLnBvaW50ZXJUeXBlXXx8XCJcIjt0aGlzLnN0YXRlPWEuc3RhdGU7dGhpcy5pPWE7YS5kZWZhdWx0UHJldmVudGVkJiZBLlouaC5jYWxsKHRoaXMpO319dChBLHopO3ZhciBXYT17MjpcInRvdWNoXCIsMzpcInBlblwiLDQ6XCJtb3VzZVwifTtBLnByb3RvdHlwZS5oPWZ1bmN0aW9uKCl7QS5aLmguY2FsbCh0aGlzKTt2YXIgYT10aGlzLmk7YS5wcmV2ZW50RGVmYXVsdD9hLnByZXZlbnREZWZhdWx0KCk6YS5yZXR1cm5WYWx1ZT0hMTt9O3ZhciBCPVwiY2xvc3VyZV9saXN0ZW5hYmxlX1wiKygxRTYqTWF0aC5yYW5kb20oKXwwKTt2YXIgWGE9MDtmdW5jdGlvbiBZYShhLGIsYyxkLGUpe3RoaXMubGlzdGVuZXI9YTt0aGlzLnByb3h5PW51bGw7dGhpcy5zcmM9Yjt0aGlzLnR5cGU9Yzt0aGlzLmNhcHR1cmU9ISFkO3RoaXMuaWE9ZTt0aGlzLmtleT0rK1hhO3RoaXMuY2E9dGhpcy5mYT0hMTt9ZnVuY3Rpb24gWmEoYSl7YS5jYT0hMDthLmxpc3RlbmVyPW51bGw7YS5wcm94eT1udWxsO2Euc3JjPW51bGw7YS5pYT1udWxsO31mdW5jdGlvbiAkYShhKXt0aGlzLnNyYz1hO3RoaXMuZz17fTt0aGlzLmg9MDt9JGEucHJvdG90eXBlLmFkZD1mdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPWEudG9TdHJpbmcoKTthPXRoaXMuZ1tmXTthfHwoYT10aGlzLmdbZl09W10sdGhpcy5oKyspO3ZhciBoPWFiKGEsYixkLGUpOy0xPGg/KGI9YVtoXSxjfHwoYi5mYT0hMSkpOihiPW5ldyBZYShiLHRoaXMuc3JjLGYsISFkLGUpLGIuZmE9YyxhLnB1c2goYikpO3JldHVybiBifTtmdW5jdGlvbiBiYihhLGIpe3ZhciBjPWIudHlwZTtpZihjIGluIGEuZyl7dmFyIGQ9YS5nW2NdLGU9bWEoZCxiKSxmOyhmPTA8PWUpJiZBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwoZCxlLDEpO2YmJihaYShiKSwwPT1hLmdbY10ubGVuZ3RoJiYoZGVsZXRlIGEuZ1tjXSxhLmgtLSkpO319XG5mdW5jdGlvbiBhYihhLGIsYyxkKXtmb3IodmFyIGU9MDtlPGEubGVuZ3RoOysrZSl7dmFyIGY9YVtlXTtpZighZi5jYSYmZi5saXN0ZW5lcj09YiYmZi5jYXB0dXJlPT0hIWMmJmYuaWE9PWQpcmV0dXJuIGV9cmV0dXJuIC0xfXZhciBjYj1cImNsb3N1cmVfbG1fXCIrKDFFNipNYXRoLnJhbmRvbSgpfDApLGRiPXt9O2Z1bmN0aW9uIGZiKGEsYixjLGQsZSl7aWYoZCYmZC5vbmNlKXJldHVybiBnYihhLGIsYyxkLGUpO2lmKEFycmF5LmlzQXJyYXkoYikpe2Zvcih2YXIgZj0wO2Y8Yi5sZW5ndGg7ZisrKWZiKGEsYltmXSxjLGQsZSk7cmV0dXJuIG51bGx9Yz1oYihjKTtyZXR1cm4gYSYmYVtCXT9hLk4oYixjLHAoZCk/ISFkLmNhcHR1cmU6ISFkLGUpOmliKGEsYixjLCExLGQsZSl9XG5mdW5jdGlvbiBpYihhLGIsYyxkLGUsZil7aWYoIWIpdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGV2ZW50IHR5cGVcIik7dmFyIGg9cChlKT8hIWUuY2FwdHVyZTohIWUsbj1qYihhKTtufHwoYVtjYl09bj1uZXcgJGEoYSkpO2M9bi5hZGQoYixjLGQsaCxmKTtpZihjLnByb3h5KXJldHVybiBjO2Q9a2IoKTtjLnByb3h5PWQ7ZC5zcmM9YTtkLmxpc3RlbmVyPWM7aWYoYS5hZGRFdmVudExpc3RlbmVyKVZhfHwoZT1oKSx2b2lkIDA9PT1lJiYoZT0hMSksYS5hZGRFdmVudExpc3RlbmVyKGIudG9TdHJpbmcoKSxkLGUpO2Vsc2UgaWYoYS5hdHRhY2hFdmVudClhLmF0dGFjaEV2ZW50KGxiKGIudG9TdHJpbmcoKSksZCk7ZWxzZSBpZihhLmFkZExpc3RlbmVyJiZhLnJlbW92ZUxpc3RlbmVyKWEuYWRkTGlzdGVuZXIoZCk7ZWxzZSB0aHJvdyBFcnJvcihcImFkZEV2ZW50TGlzdGVuZXIgYW5kIGF0dGFjaEV2ZW50IGFyZSB1bmF2YWlsYWJsZS5cIik7cmV0dXJuIGN9XG5mdW5jdGlvbiBrYigpe2Z1bmN0aW9uIGEoYyl7cmV0dXJuIGIuY2FsbChhLnNyYyxhLmxpc3RlbmVyLGMpfXZhciBiPW1iO3JldHVybiBhfWZ1bmN0aW9uIGdiKGEsYixjLGQsZSl7aWYoQXJyYXkuaXNBcnJheShiKSl7Zm9yKHZhciBmPTA7ZjxiLmxlbmd0aDtmKyspZ2IoYSxiW2ZdLGMsZCxlKTtyZXR1cm4gbnVsbH1jPWhiKGMpO3JldHVybiBhJiZhW0JdP2EuTyhiLGMscChkKT8hIWQuY2FwdHVyZTohIWQsZSk6aWIoYSxiLGMsITAsZCxlKX1cbmZ1bmN0aW9uIG5iKGEsYixjLGQsZSl7aWYoQXJyYXkuaXNBcnJheShiKSlmb3IodmFyIGY9MDtmPGIubGVuZ3RoO2YrKyluYihhLGJbZl0sYyxkLGUpO2Vsc2UgKGQ9cChkKT8hIWQuY2FwdHVyZTohIWQsYz1oYihjKSxhJiZhW0JdKT8oYT1hLmksYj1TdHJpbmcoYikudG9TdHJpbmcoKSxiIGluIGEuZyYmKGY9YS5nW2JdLGM9YWIoZixjLGQsZSksLTE8YyYmKFphKGZbY10pLEFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChmLGMsMSksMD09Zi5sZW5ndGgmJihkZWxldGUgYS5nW2JdLGEuaC0tKSkpKTphJiYoYT1qYihhKSkmJihiPWEuZ1tiLnRvU3RyaW5nKCldLGE9LTEsYiYmKGE9YWIoYixjLGQsZSkpLChjPS0xPGE/YlthXTpudWxsKSYmb2IoYykpO31cbmZ1bmN0aW9uIG9iKGEpe2lmKFwibnVtYmVyXCIhPT10eXBlb2YgYSYmYSYmIWEuY2Epe3ZhciBiPWEuc3JjO2lmKGImJmJbQl0pYmIoYi5pLGEpO2Vsc2Uge3ZhciBjPWEudHlwZSxkPWEucHJveHk7Yi5yZW1vdmVFdmVudExpc3RlbmVyP2IucmVtb3ZlRXZlbnRMaXN0ZW5lcihjLGQsYS5jYXB0dXJlKTpiLmRldGFjaEV2ZW50P2IuZGV0YWNoRXZlbnQobGIoYyksZCk6Yi5hZGRMaXN0ZW5lciYmYi5yZW1vdmVMaXN0ZW5lciYmYi5yZW1vdmVMaXN0ZW5lcihkKTsoYz1qYihiKSk/KGJiKGMsYSksMD09Yy5oJiYoYy5zcmM9bnVsbCxiW2NiXT1udWxsKSk6WmEoYSk7fX19ZnVuY3Rpb24gbGIoYSl7cmV0dXJuIGEgaW4gZGI/ZGJbYV06ZGJbYV09XCJvblwiK2F9ZnVuY3Rpb24gbWIoYSxiKXtpZihhLmNhKWE9ITA7ZWxzZSB7Yj1uZXcgQShiLHRoaXMpO3ZhciBjPWEubGlzdGVuZXIsZD1hLmlhfHxhLnNyYzthLmZhJiZvYihhKTthPWMuY2FsbChkLGIpO31yZXR1cm4gYX1cbmZ1bmN0aW9uIGpiKGEpe2E9YVtjYl07cmV0dXJuIGEgaW5zdGFuY2VvZiAkYT9hOm51bGx9dmFyIHBiPVwiX19jbG9zdXJlX2V2ZW50c19mbl9cIisoMUU5Kk1hdGgucmFuZG9tKCk+Pj4wKTtmdW5jdGlvbiBoYihhKXtpZihcImZ1bmN0aW9uXCI9PT10eXBlb2YgYSlyZXR1cm4gYTthW3BiXXx8KGFbcGJdPWZ1bmN0aW9uKGIpe3JldHVybiBhLmhhbmRsZUV2ZW50KGIpfSk7cmV0dXJuIGFbcGJdfWZ1bmN0aW9uIEMoKXt2LmNhbGwodGhpcyk7dGhpcy5pPW5ldyAkYSh0aGlzKTt0aGlzLlA9dGhpczt0aGlzLkk9bnVsbDt9dChDLHYpO0MucHJvdG90eXBlW0JdPSEwO0MucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYSxiLGMsZCl7bmIodGhpcyxhLGIsYyxkKTt9O1xuZnVuY3Rpb24gRChhLGIpe3ZhciBjLGQ9YS5JO2lmKGQpZm9yKGM9W107ZDtkPWQuSSljLnB1c2goZCk7YT1hLlA7ZD1iLnR5cGV8fGI7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBiKWI9bmV3IHooYixhKTtlbHNlIGlmKGIgaW5zdGFuY2VvZiB6KWIudGFyZ2V0PWIudGFyZ2V0fHxhO2Vsc2Uge3ZhciBlPWI7Yj1uZXcgeihkLGEpO0FhKGIsZSk7fWU9ITA7aWYoYylmb3IodmFyIGY9Yy5sZW5ndGgtMTswPD1mO2YtLSl7dmFyIGg9Yi5nPWNbZl07ZT1xYihoLGQsITAsYikmJmU7fWg9Yi5nPWE7ZT1xYihoLGQsITAsYikmJmU7ZT1xYihoLGQsITEsYikmJmU7aWYoYylmb3IoZj0wO2Y8Yy5sZW5ndGg7ZisrKWg9Yi5nPWNbZl0sZT1xYihoLGQsITEsYikmJmU7fVxuQy5wcm90b3R5cGUuTT1mdW5jdGlvbigpe0MuWi5NLmNhbGwodGhpcyk7aWYodGhpcy5pKXt2YXIgYT10aGlzLmksYztmb3IoYyBpbiBhLmcpe2Zvcih2YXIgZD1hLmdbY10sZT0wO2U8ZC5sZW5ndGg7ZSsrKVphKGRbZV0pO2RlbGV0ZSBhLmdbY107YS5oLS07fX10aGlzLkk9bnVsbDt9O0MucHJvdG90eXBlLk49ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMuaS5hZGQoU3RyaW5nKGEpLGIsITEsYyxkKX07Qy5wcm90b3R5cGUuTz1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5pLmFkZChTdHJpbmcoYSksYiwhMCxjLGQpfTtcbmZ1bmN0aW9uIHFiKGEsYixjLGQpe2I9YS5pLmdbU3RyaW5nKGIpXTtpZighYilyZXR1cm4gITA7Yj1iLmNvbmNhdCgpO2Zvcih2YXIgZT0hMCxmPTA7ZjxiLmxlbmd0aDsrK2Ype3ZhciBoPWJbZl07aWYoaCYmIWguY2EmJmguY2FwdHVyZT09Yyl7dmFyIG49aC5saXN0ZW5lcix1PWguaWF8fGguc3JjO2guZmEmJmJiKGEuaSxoKTtlPSExIT09bi5jYWxsKHUsZCkmJmU7fX1yZXR1cm4gZSYmIWQuZGVmYXVsdFByZXZlbnRlZH12YXIgcmI9bC5KU09OLnN0cmluZ2lmeTtmdW5jdGlvbiBzYigpe3ZhciBhPXRiO2xldCBiPW51bGw7YS5nJiYoYj1hLmcsYS5nPWEuZy5uZXh0LGEuZ3x8KGEuaD1udWxsKSxiLm5leHQ9bnVsbCk7cmV0dXJuIGJ9Y2xhc3MgdWJ7Y29uc3RydWN0b3IoKXt0aGlzLmg9dGhpcy5nPW51bGw7fWFkZChhLGIpe2NvbnN0IGM9dmIuZ2V0KCk7Yy5zZXQoYSxiKTt0aGlzLmg/dGhpcy5oLm5leHQ9Yzp0aGlzLmc9Yzt0aGlzLmg9Yzt9fXZhciB2Yj1uZXcgY2xhc3N7Y29uc3RydWN0b3IoYSxiKXt0aGlzLmk9YTt0aGlzLmo9Yjt0aGlzLmg9MDt0aGlzLmc9bnVsbDt9Z2V0KCl7bGV0IGE7MDx0aGlzLmg/KHRoaXMuaC0tLGE9dGhpcy5nLHRoaXMuZz1hLm5leHQsYS5uZXh0PW51bGwpOmE9dGhpcy5pKCk7cmV0dXJuIGF9fSgoKT0+bmV3IHdiLGE9PmEucmVzZXQoKSk7XG5jbGFzcyB3Yntjb25zdHJ1Y3Rvcigpe3RoaXMubmV4dD10aGlzLmc9dGhpcy5oPW51bGw7fXNldChhLGIpe3RoaXMuaD1hO3RoaXMuZz1iO3RoaXMubmV4dD1udWxsO31yZXNldCgpe3RoaXMubmV4dD10aGlzLmc9dGhpcy5oPW51bGw7fX1mdW5jdGlvbiB5YihhKXtsLnNldFRpbWVvdXQoKCk9Pnt0aHJvdyBhO30sMCk7fWZ1bmN0aW9uIHpiKGEsYil7QWJ8fEJiKCk7Q2J8fChBYigpLENiPSEwKTt0Yi5hZGQoYSxiKTt9dmFyIEFiO2Z1bmN0aW9uIEJiKCl7dmFyIGE9bC5Qcm9taXNlLnJlc29sdmUodm9pZCAwKTtBYj1mdW5jdGlvbigpe2EudGhlbihEYik7fTt9dmFyIENiPSExLHRiPW5ldyB1YjtmdW5jdGlvbiBEYigpe2Zvcih2YXIgYTthPXNiKCk7KXt0cnl7YS5oLmNhbGwoYS5nKTt9Y2F0Y2goYyl7eWIoYyk7fXZhciBiPXZiO2IuaihhKTsxMDA+Yi5oJiYoYi5oKyssYS5uZXh0PWIuZyxiLmc9YSk7fUNiPSExO31mdW5jdGlvbiBFYihhLGIpe0MuY2FsbCh0aGlzKTt0aGlzLmg9YXx8MTt0aGlzLmc9Ynx8bDt0aGlzLmo9cSh0aGlzLmtiLHRoaXMpO3RoaXMubD1EYXRlLm5vdygpO310KEViLEMpO2s9RWIucHJvdG90eXBlO2suZGE9ITE7ay5TPW51bGw7ay5rYj1mdW5jdGlvbigpe2lmKHRoaXMuZGEpe3ZhciBhPURhdGUubm93KCktdGhpcy5sOzA8YSYmYTwuOCp0aGlzLmg/dGhpcy5TPXRoaXMuZy5zZXRUaW1lb3V0KHRoaXMuaix0aGlzLmgtYSk6KHRoaXMuUyYmKHRoaXMuZy5jbGVhclRpbWVvdXQodGhpcy5TKSx0aGlzLlM9bnVsbCksRCh0aGlzLFwidGlja1wiKSx0aGlzLmRhJiYoRmIodGhpcyksdGhpcy5zdGFydCgpKSk7fX07ay5zdGFydD1mdW5jdGlvbigpe3RoaXMuZGE9ITA7dGhpcy5TfHwodGhpcy5TPXRoaXMuZy5zZXRUaW1lb3V0KHRoaXMuaix0aGlzLmgpLHRoaXMubD1EYXRlLm5vdygpKTt9O1xuZnVuY3Rpb24gRmIoYSl7YS5kYT0hMTthLlMmJihhLmcuY2xlYXJUaW1lb3V0KGEuUyksYS5TPW51bGwpO31rLk09ZnVuY3Rpb24oKXtFYi5aLk0uY2FsbCh0aGlzKTtGYih0aGlzKTtkZWxldGUgdGhpcy5nO307ZnVuY3Rpb24gR2IoYSxiLGMpe2lmKFwiZnVuY3Rpb25cIj09PXR5cGVvZiBhKWMmJihhPXEoYSxjKSk7ZWxzZSBpZihhJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLmhhbmRsZUV2ZW50KWE9cShhLmhhbmRsZUV2ZW50LGEpO2Vsc2UgdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGxpc3RlbmVyIGFyZ3VtZW50XCIpO3JldHVybiAyMTQ3NDgzNjQ3PE51bWJlcihiKT8tMTpsLnNldFRpbWVvdXQoYSxifHwwKX1mdW5jdGlvbiBIYihhKXthLmc9R2IoKCk9PnthLmc9bnVsbDthLmkmJihhLmk9ITEsSGIoYSkpO30sYS5qKTtjb25zdCBiPWEuaDthLmg9bnVsbDthLm0uYXBwbHkobnVsbCxiKTt9Y2xhc3MgSWIgZXh0ZW5kcyB2e2NvbnN0cnVjdG9yKGEsYil7c3VwZXIoKTt0aGlzLm09YTt0aGlzLmo9Yjt0aGlzLmg9bnVsbDt0aGlzLmk9ITE7dGhpcy5nPW51bGw7fWwoYSl7dGhpcy5oPWFyZ3VtZW50czt0aGlzLmc/dGhpcy5pPSEwOkhiKHRoaXMpO31NKCl7c3VwZXIuTSgpO3RoaXMuZyYmKGwuY2xlYXJUaW1lb3V0KHRoaXMuZyksdGhpcy5nPW51bGwsdGhpcy5pPSExLHRoaXMuaD1udWxsKTt9fWZ1bmN0aW9uIEUoYSl7di5jYWxsKHRoaXMpO3RoaXMuaD1hO3RoaXMuZz17fTt9dChFLHYpO3ZhciBKYj1bXTtmdW5jdGlvbiBLYihhLGIsYyxkKXtBcnJheS5pc0FycmF5KGMpfHwoYyYmKEpiWzBdPWMudG9TdHJpbmcoKSksYz1KYik7Zm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspe3ZhciBmPWZiKGIsY1tlXSxkfHxhLmhhbmRsZUV2ZW50LCExLGEuaHx8YSk7aWYoIWYpYnJlYWs7YS5nW2Yua2V5XT1mO319ZnVuY3Rpb24gTGIoYSl7eGEoYS5nLGZ1bmN0aW9uKGIsYyl7dGhpcy5nLmhhc093blByb3BlcnR5KGMpJiZvYihiKTt9LGEpO2EuZz17fTt9RS5wcm90b3R5cGUuTT1mdW5jdGlvbigpe0UuWi5NLmNhbGwodGhpcyk7TGIodGhpcyk7fTtFLnByb3RvdHlwZS5oYW5kbGVFdmVudD1mdW5jdGlvbigpe3Rocm93IEVycm9yKFwiRXZlbnRIYW5kbGVyLmhhbmRsZUV2ZW50IG5vdCBpbXBsZW1lbnRlZFwiKTt9O2Z1bmN0aW9uIE1iKCl7dGhpcy5nPSEwO31NYi5wcm90b3R5cGUuQWE9ZnVuY3Rpb24oKXt0aGlzLmc9ITE7fTtmdW5jdGlvbiBOYihhLGIsYyxkLGUsZil7YS5pbmZvKGZ1bmN0aW9uKCl7aWYoYS5nKWlmKGYpe3ZhciBoPVwiXCI7Zm9yKHZhciBuPWYuc3BsaXQoXCImXCIpLHU9MDt1PG4ubGVuZ3RoO3UrKyl7dmFyIG09blt1XS5zcGxpdChcIj1cIik7aWYoMTxtLmxlbmd0aCl7dmFyIHI9bVswXTttPW1bMV07dmFyIEc9ci5zcGxpdChcIl9cIik7aD0yPD1HLmxlbmd0aCYmXCJ0eXBlXCI9PUdbMV0/aCsocitcIj1cIittK1wiJlwiKTpoKyhyK1wiPXJlZGFjdGVkJlwiKTt9fX1lbHNlIGg9bnVsbDtlbHNlIGg9ZjtyZXR1cm4gXCJYTUxIVFRQIFJFUSAoXCIrZCtcIikgW2F0dGVtcHQgXCIrZStcIl06IFwiK2IrXCJcXG5cIitjK1wiXFxuXCIraH0pO31cbmZ1bmN0aW9uIE9iKGEsYixjLGQsZSxmLGgpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlhNTEhUVFAgUkVTUCAoXCIrZCtcIikgWyBhdHRlbXB0IFwiK2UrXCJdOiBcIitiK1wiXFxuXCIrYytcIlxcblwiK2YrXCIgXCIraH0pO31mdW5jdGlvbiBGKGEsYixjLGQpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlhNTEhUVFAgVEVYVCAoXCIrYitcIik6IFwiK1BiKGEsYykrKGQ/XCIgXCIrZDpcIlwiKX0pO31mdW5jdGlvbiBRYihhLGIpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlRJTUVPVVQ6IFwiK2J9KTt9TWIucHJvdG90eXBlLmluZm89ZnVuY3Rpb24oKXt9O1xuZnVuY3Rpb24gUGIoYSxiKXtpZighYS5nKXJldHVybiBiO2lmKCFiKXJldHVybiBudWxsO3RyeXt2YXIgYz1KU09OLnBhcnNlKGIpO2lmKGMpZm9yKGE9MDthPGMubGVuZ3RoO2ErKylpZihBcnJheS5pc0FycmF5KGNbYV0pKXt2YXIgZD1jW2FdO2lmKCEoMj5kLmxlbmd0aCkpe3ZhciBlPWRbMV07aWYoQXJyYXkuaXNBcnJheShlKSYmISgxPmUubGVuZ3RoKSl7dmFyIGY9ZVswXTtpZihcIm5vb3BcIiE9ZiYmXCJzdG9wXCIhPWYmJlwiY2xvc2VcIiE9Zilmb3IodmFyIGg9MTtoPGUubGVuZ3RoO2grKyllW2hdPVwiXCI7fX19cmV0dXJuIHJiKGMpfWNhdGNoKG4pe3JldHVybiBifX12YXIgSD17fSxSYj1udWxsO2Z1bmN0aW9uIFNiKCl7cmV0dXJuIFJiPVJifHxuZXcgQ31ILk1hPVwic2VydmVycmVhY2hhYmlsaXR5XCI7ZnVuY3Rpb24gVGIoYSl7ei5jYWxsKHRoaXMsSC5NYSxhKTt9dChUYix6KTtmdW5jdGlvbiBJKGEpe2NvbnN0IGI9U2IoKTtEKGIsbmV3IFRiKGIsYSkpO31ILlNUQVRfRVZFTlQ9XCJzdGF0ZXZlbnRcIjtmdW5jdGlvbiBVYihhLGIpe3ouY2FsbCh0aGlzLEguU1RBVF9FVkVOVCxhKTt0aGlzLnN0YXQ9Yjt9dChVYix6KTtmdW5jdGlvbiBKKGEpe2NvbnN0IGI9U2IoKTtEKGIsbmV3IFViKGIsYSkpO31ILk5hPVwidGltaW5nZXZlbnRcIjtmdW5jdGlvbiBWYihhLGIpe3ouY2FsbCh0aGlzLEguTmEsYSk7dGhpcy5zaXplPWI7fXQoVmIseik7XG5mdW5jdGlvbiBLKGEsYil7aWYoXCJmdW5jdGlvblwiIT09dHlwZW9mIGEpdGhyb3cgRXJyb3IoXCJGbiBtdXN0IG5vdCBiZSBudWxsIGFuZCBtdXN0IGJlIGEgZnVuY3Rpb25cIik7cmV0dXJuIGwuc2V0VGltZW91dChmdW5jdGlvbigpe2EoKTt9LGIpfXZhciBXYj17Tk9fRVJST1I6MCxsYjoxLHliOjIseGI6MyxzYjo0LHdiOjUsemI6NixKYTo3LFRJTUVPVVQ6OCxDYjo5fTt2YXIgWGI9e3FiOlwiY29tcGxldGVcIixNYjpcInN1Y2Nlc3NcIixLYTpcImVycm9yXCIsSmE6XCJhYm9ydFwiLEViOlwicmVhZHlcIixGYjpcInJlYWR5c3RhdGVjaGFuZ2VcIixUSU1FT1VUOlwidGltZW91dFwiLEFiOlwiaW5jcmVtZW50YWxkYXRhXCIsRGI6XCJwcm9ncmVzc1wiLHRiOlwiZG93bmxvYWRwcm9ncmVzc1wiLFViOlwidXBsb2FkcHJvZ3Jlc3NcIn07ZnVuY3Rpb24gWWIoKXt9WWIucHJvdG90eXBlLmg9bnVsbDtmdW5jdGlvbiBaYihhKXtyZXR1cm4gYS5ofHwoYS5oPWEuaSgpKX1mdW5jdGlvbiAkYigpe312YXIgTD17T1BFTjpcImFcIixwYjpcImJcIixLYTpcImNcIixCYjpcImRcIn07ZnVuY3Rpb24gYWMoKXt6LmNhbGwodGhpcyxcImRcIik7fXQoYWMseik7ZnVuY3Rpb24gYmMoKXt6LmNhbGwodGhpcyxcImNcIik7fXQoYmMseik7dmFyIGNjO2Z1bmN0aW9uIGRjKCl7fXQoZGMsWWIpO2RjLnByb3RvdHlwZS5nPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdH07ZGMucHJvdG90eXBlLmk9ZnVuY3Rpb24oKXtyZXR1cm4ge319O2NjPW5ldyBkYztmdW5jdGlvbiBNKGEsYixjLGQpe3RoaXMubD1hO3RoaXMuaj1iO3RoaXMubT1jO3RoaXMuWD1kfHwxO3RoaXMuVj1uZXcgRSh0aGlzKTt0aGlzLlA9ZWM7YT1KYT8xMjU6dm9pZCAwO3RoaXMuVz1uZXcgRWIoYSk7dGhpcy5IPW51bGw7dGhpcy5pPSExO3RoaXMucz10aGlzLkE9dGhpcy52PXRoaXMuSz10aGlzLkY9dGhpcy5ZPXRoaXMuQj1udWxsO3RoaXMuRD1bXTt0aGlzLmc9bnVsbDt0aGlzLkM9MDt0aGlzLm89dGhpcy51PW51bGw7dGhpcy5OPS0xO3RoaXMuST0hMTt0aGlzLk89MDt0aGlzLkw9bnVsbDt0aGlzLmFhPXRoaXMuSj10aGlzLiQ9dGhpcy5VPSExO3RoaXMuaD1uZXcgZmM7fWZ1bmN0aW9uIGZjKCl7dGhpcy5pPW51bGw7dGhpcy5nPVwiXCI7dGhpcy5oPSExO312YXIgZWM9NDVFMyxnYz17fSxoYz17fTtrPU0ucHJvdG90eXBlO2suc2V0VGltZW91dD1mdW5jdGlvbihhKXt0aGlzLlA9YTt9O1xuZnVuY3Rpb24gaWMoYSxiLGMpe2EuSz0xO2Eudj1qYyhOKGIpKTthLnM9YzthLlU9ITA7a2MoYSxudWxsKTt9ZnVuY3Rpb24ga2MoYSxiKXthLkY9RGF0ZS5ub3coKTtsYyhhKTthLkE9TihhLnYpO3ZhciBjPWEuQSxkPWEuWDtBcnJheS5pc0FycmF5KGQpfHwoZD1bU3RyaW5nKGQpXSk7bWMoYy5oLFwidFwiLGQpO2EuQz0wO2M9YS5sLkg7YS5oPW5ldyBmYzthLmc9bmMoYS5sLGM/YjpudWxsLCFhLnMpOzA8YS5PJiYoYS5MPW5ldyBJYihxKGEuSWEsYSxhLmcpLGEuTykpO0tiKGEuVixhLmcsXCJyZWFkeXN0YXRlY2hhbmdlXCIsYS5nYik7Yj1hLkg/eWEoYS5IKTp7fTthLnM/KGEudXx8KGEudT1cIlBPU1RcIiksYltcIkNvbnRlbnQtVHlwZVwiXT1cImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLGEuZy5lYShhLkEsYS51LGEucyxiKSk6KGEudT1cIkdFVFwiLGEuZy5lYShhLkEsYS51LG51bGwsYikpO0koMSk7TmIoYS5qLGEudSxhLkEsYS5tLGEuWCxhLnMpO31cbmsuZ2I9ZnVuY3Rpb24oYSl7YT1hLnRhcmdldDtjb25zdCBiPXRoaXMuTDtiJiYzPT1PKGEpP2IubCgpOnRoaXMuSWEoYSk7fTtcbmsuSWE9ZnVuY3Rpb24oYSl7dHJ5e2lmKGE9PXRoaXMuZylhOntjb25zdCByPU8odGhpcy5nKTt2YXIgYj10aGlzLmcuRGEoKTtjb25zdCBHPXRoaXMuZy5iYSgpO2lmKCEoMz5yKSYmKDMhPXJ8fEphfHx0aGlzLmcmJih0aGlzLmguaHx8dGhpcy5nLmdhKCl8fG9jKHRoaXMuZykpKSl7dGhpcy5JfHw0IT1yfHw3PT1ifHwoOD09Ynx8MD49Rz9JKDMpOkkoMikpO3BjKHRoaXMpO3ZhciBjPXRoaXMuZy5iYSgpO3RoaXMuTj1jO2I6aWYocWModGhpcykpe3ZhciBkPW9jKHRoaXMuZyk7YT1cIlwiO3ZhciBlPWQubGVuZ3RoLGY9ND09Tyh0aGlzLmcpO2lmKCF0aGlzLmguaSl7aWYoXCJ1bmRlZmluZWRcIj09PXR5cGVvZiBUZXh0RGVjb2Rlcil7UCh0aGlzKTtyYyh0aGlzKTt2YXIgaD1cIlwiO2JyZWFrIGJ9dGhpcy5oLmk9bmV3IGwuVGV4dERlY29kZXI7fWZvcihiPTA7YjxlO2IrKyl0aGlzLmguaD0hMCxhKz10aGlzLmguaS5kZWNvZGUoZFtiXSx7c3RyZWFtOmYmJmI9PWUtMX0pO2Quc3BsaWNlKDAsXG5lKTt0aGlzLmguZys9YTt0aGlzLkM9MDtoPXRoaXMuaC5nO31lbHNlIGg9dGhpcy5nLmdhKCk7dGhpcy5pPTIwMD09YztPYih0aGlzLmosdGhpcy51LHRoaXMuQSx0aGlzLm0sdGhpcy5YLHIsYyk7aWYodGhpcy5pKXtpZih0aGlzLiQmJiF0aGlzLkope2I6e2lmKHRoaXMuZyl7dmFyIG4sdT10aGlzLmc7aWYoKG49dS5nP3UuZy5nZXRSZXNwb25zZUhlYWRlcihcIlgtSFRUUC1Jbml0aWFsLVJlc3BvbnNlXCIpOm51bGwpJiYhc2Eobikpe3ZhciBtPW47YnJlYWsgYn19bT1udWxsO31pZihjPW0pRih0aGlzLmosdGhpcy5tLGMsXCJJbml0aWFsIGhhbmRzaGFrZSByZXNwb25zZSB2aWEgWC1IVFRQLUluaXRpYWwtUmVzcG9uc2VcIiksdGhpcy5KPSEwLHNjKHRoaXMsYyk7ZWxzZSB7dGhpcy5pPSExO3RoaXMubz0zO0ooMTIpO1AodGhpcyk7cmModGhpcyk7YnJlYWsgYX19dGhpcy5VPyh0Yyh0aGlzLHIsaCksSmEmJnRoaXMuaSYmMz09ciYmKEtiKHRoaXMuVix0aGlzLlcsXCJ0aWNrXCIsdGhpcy5mYiksXG50aGlzLlcuc3RhcnQoKSkpOihGKHRoaXMuaix0aGlzLm0saCxudWxsKSxzYyh0aGlzLGgpKTs0PT1yJiZQKHRoaXMpO3RoaXMuaSYmIXRoaXMuSSYmKDQ9PXI/dWModGhpcy5sLHRoaXMpOih0aGlzLmk9ITEsbGModGhpcykpKTt9ZWxzZSA0MDA9PWMmJjA8aC5pbmRleE9mKFwiVW5rbm93biBTSURcIik/KHRoaXMubz0zLEooMTIpKToodGhpcy5vPTAsSigxMykpLFAodGhpcykscmModGhpcyk7fX19Y2F0Y2gocil7fWZpbmFsbHl7fX07ZnVuY3Rpb24gcWMoYSl7cmV0dXJuIGEuZz9cIkdFVFwiPT1hLnUmJjIhPWEuSyYmYS5sLkJhOiExfVxuZnVuY3Rpb24gdGMoYSxiLGMpe2xldCBkPSEwLGU7Zm9yKDshYS5JJiZhLkM8Yy5sZW5ndGg7KWlmKGU9dmMoYSxjKSxlPT1oYyl7ND09YiYmKGEubz00LEooMTQpLGQ9ITEpO0YoYS5qLGEubSxudWxsLFwiW0luY29tcGxldGUgUmVzcG9uc2VdXCIpO2JyZWFrfWVsc2UgaWYoZT09Z2Mpe2Eubz00O0ooMTUpO0YoYS5qLGEubSxjLFwiW0ludmFsaWQgQ2h1bmtdXCIpO2Q9ITE7YnJlYWt9ZWxzZSBGKGEuaixhLm0sZSxudWxsKSxzYyhhLGUpO3FjKGEpJiZlIT1oYyYmZSE9Z2MmJihhLmguZz1cIlwiLGEuQz0wKTs0IT1ifHwwIT1jLmxlbmd0aHx8YS5oLmh8fChhLm89MSxKKDE2KSxkPSExKTthLmk9YS5pJiZkO2Q/MDxjLmxlbmd0aCYmIWEuYWEmJihhLmFhPSEwLGI9YS5sLGIuZz09YSYmYi4kJiYhYi5MJiYoYi5oLmluZm8oXCJHcmVhdCwgbm8gYnVmZmVyaW5nIHByb3h5IGRldGVjdGVkLiBCeXRlcyByZWNlaXZlZDogXCIrYy5sZW5ndGgpLHdjKGIpLGIuTD0hMCxKKDExKSkpOihGKGEuaixhLm0sXG5jLFwiW0ludmFsaWQgQ2h1bmtlZCBSZXNwb25zZV1cIiksUChhKSxyYyhhKSk7fWsuZmI9ZnVuY3Rpb24oKXtpZih0aGlzLmcpe3ZhciBhPU8odGhpcy5nKSxiPXRoaXMuZy5nYSgpO3RoaXMuQzxiLmxlbmd0aCYmKHBjKHRoaXMpLHRjKHRoaXMsYSxiKSx0aGlzLmkmJjQhPWEmJmxjKHRoaXMpKTt9fTtmdW5jdGlvbiB2YyhhLGIpe3ZhciBjPWEuQyxkPWIuaW5kZXhPZihcIlxcblwiLGMpO2lmKC0xPT1kKXJldHVybiBoYztjPU51bWJlcihiLnN1YnN0cmluZyhjLGQpKTtpZihpc05hTihjKSlyZXR1cm4gZ2M7ZCs9MTtpZihkK2M+Yi5sZW5ndGgpcmV0dXJuIGhjO2I9Yi5zdWJzdHIoZCxjKTthLkM9ZCtjO3JldHVybiBifWsuY2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy5JPSEwO1AodGhpcyk7fTtmdW5jdGlvbiBsYyhhKXthLlk9RGF0ZS5ub3coKSthLlA7eGMoYSxhLlApO31cbmZ1bmN0aW9uIHhjKGEsYil7aWYobnVsbCE9YS5CKXRocm93IEVycm9yKFwiV2F0Y2hEb2cgdGltZXIgbm90IG51bGxcIik7YS5CPUsocShhLmViLGEpLGIpO31mdW5jdGlvbiBwYyhhKXthLkImJihsLmNsZWFyVGltZW91dChhLkIpLGEuQj1udWxsKTt9ay5lYj1mdW5jdGlvbigpe3RoaXMuQj1udWxsO2NvbnN0IGE9RGF0ZS5ub3coKTswPD1hLXRoaXMuWT8oUWIodGhpcy5qLHRoaXMuQSksMiE9dGhpcy5LJiYoSSgzKSxKKDE3KSksUCh0aGlzKSx0aGlzLm89MixyYyh0aGlzKSk6eGModGhpcyx0aGlzLlktYSk7fTtmdW5jdGlvbiByYyhhKXswPT1hLmwuR3x8YS5JfHx1YyhhLmwsYSk7fWZ1bmN0aW9uIFAoYSl7cGMoYSk7dmFyIGI9YS5MO2ImJlwiZnVuY3Rpb25cIj09dHlwZW9mIGIubmEmJmIubmEoKTthLkw9bnVsbDtGYihhLlcpO0xiKGEuVik7YS5nJiYoYj1hLmcsYS5nPW51bGwsYi5hYm9ydCgpLGIubmEoKSk7fVxuZnVuY3Rpb24gc2MoYSxiKXt0cnl7dmFyIGM9YS5sO2lmKDAhPWMuRyYmKGMuZz09YXx8eWMoYy5pLGEpKSlpZihjLkk9YS5OLCFhLkomJnljKGMuaSxhKSYmMz09Yy5HKXt0cnl7dmFyIGQ9Yy5DYS5nLnBhcnNlKGIpO31jYXRjaChtKXtkPW51bGw7fWlmKEFycmF5LmlzQXJyYXkoZCkmJjM9PWQubGVuZ3RoKXt2YXIgZT1kO2lmKDA9PWVbMF0pYTp7aWYoIWMudSl7aWYoYy5nKWlmKGMuZy5GKzNFMzxhLkYpemMoYyksQWMoYyk7ZWxzZSBicmVhayBhO0JjKGMpO0ooMTgpO319ZWxzZSBjLnRhPWVbMV0sMDxjLnRhLWMuVSYmMzc1MDA+ZVsyXSYmYy5OJiYwPT1jLkEmJiFjLnYmJihjLnY9SyhxKGMuYWIsYyksNkUzKSk7aWYoMT49Q2MoYy5pKSYmYy5rYSl7dHJ5e2Mua2EoKTt9Y2F0Y2gobSl7fWMua2E9dm9pZCAwO319ZWxzZSBRKGMsMTEpO31lbHNlIGlmKChhLkp8fGMuZz09YSkmJnpjKGMpLCFzYShiKSlmb3IoZT1jLkNhLmcucGFyc2UoYiksYj0wO2I8ZS5sZW5ndGg7YisrKXtsZXQgbT1lW2JdO1xuYy5VPW1bMF07bT1tWzFdO2lmKDI9PWMuRylpZihcImNcIj09bVswXSl7Yy5KPW1bMV07Yy5sYT1tWzJdO2NvbnN0IHI9bVszXTtudWxsIT1yJiYoYy5tYT1yLGMuaC5pbmZvKFwiVkVSPVwiK2MubWEpKTtjb25zdCBHPW1bNF07bnVsbCE9RyYmKGMuemE9RyxjLmguaW5mbyhcIlNWRVI9XCIrYy56YSkpO2NvbnN0IERhPW1bNV07bnVsbCE9RGEmJlwibnVtYmVyXCI9PT10eXBlb2YgRGEmJjA8RGEmJihkPTEuNSpEYSxjLks9ZCxjLmguaW5mbyhcImJhY2tDaGFubmVsUmVxdWVzdFRpbWVvdXRNc189XCIrZCkpO2Q9Yztjb25zdCBjYT1hLmc7aWYoY2Epe2NvbnN0IEVhPWNhLmc/Y2EuZy5nZXRSZXNwb25zZUhlYWRlcihcIlgtQ2xpZW50LVdpcmUtUHJvdG9jb2xcIik6bnVsbDtpZihFYSl7dmFyIGY9ZC5pOyFmLmcmJih3KEVhLFwic3BkeVwiKXx8dyhFYSxcInF1aWNcIil8fHcoRWEsXCJoMlwiKSkmJihmLmo9Zi5sLGYuZz1uZXcgU2V0LGYuaCYmKERjKGYsZi5oKSxmLmg9bnVsbCkpO31pZihkLkQpe2NvbnN0IHhiPVxuY2EuZz9jYS5nLmdldFJlc3BvbnNlSGVhZGVyKFwiWC1IVFRQLVNlc3Npb24tSWRcIik6bnVsbDt4YiYmKGQuc2E9eGIsUihkLkYsZC5ELHhiKSk7fX1jLkc9MztjLmomJmMuai54YSgpO2MuJCYmKGMuTz1EYXRlLm5vdygpLWEuRixjLmguaW5mbyhcIkhhbmRzaGFrZSBSVFQ6IFwiK2MuTytcIm1zXCIpKTtkPWM7dmFyIGg9YTtkLm9hPUVjKGQsZC5IP2QubGE6bnVsbCxkLlcpO2lmKGguSil7RmMoZC5pLGgpO3ZhciBuPWgsdT1kLks7dSYmbi5zZXRUaW1lb3V0KHUpO24uQiYmKHBjKG4pLGxjKG4pKTtkLmc9aDt9ZWxzZSBHYyhkKTswPGMubC5sZW5ndGgmJkhjKGMpO31lbHNlIFwic3RvcFwiIT1tWzBdJiZcImNsb3NlXCIhPW1bMF18fFEoYyw3KTtlbHNlIDM9PWMuRyYmKFwic3RvcFwiPT1tWzBdfHxcImNsb3NlXCI9PW1bMF0/XCJzdG9wXCI9PW1bMF0/UShjLDcpOkljKGMpOlwibm9vcFwiIT1tWzBdJiZjLmomJmMuai53YShtKSxjLkE9MCk7fUkoNCk7fWNhdGNoKG0pe319ZnVuY3Rpb24gSmMoYSl7aWYoYS5SJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLlIpcmV0dXJuIGEuUigpO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSlyZXR1cm4gYS5zcGxpdChcIlwiKTtpZihiYShhKSl7Zm9yKHZhciBiPVtdLGM9YS5sZW5ndGgsZD0wO2Q8YztkKyspYi5wdXNoKGFbZF0pO3JldHVybiBifWI9W107Yz0wO2ZvcihkIGluIGEpYltjKytdPWFbZF07cmV0dXJuIGJ9XG5mdW5jdGlvbiBLYyhhLGIpe2lmKGEuZm9yRWFjaCYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5mb3JFYWNoKWEuZm9yRWFjaChiLHZvaWQgMCk7ZWxzZSBpZihiYShhKXx8XCJzdHJpbmdcIj09PXR5cGVvZiBhKW5hKGEsYix2b2lkIDApO2Vsc2Uge2lmKGEuVCYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5UKXZhciBjPWEuVCgpO2Vsc2UgaWYoYS5SJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLlIpYz12b2lkIDA7ZWxzZSBpZihiYShhKXx8XCJzdHJpbmdcIj09PXR5cGVvZiBhKXtjPVtdO2Zvcih2YXIgZD1hLmxlbmd0aCxlPTA7ZTxkO2UrKyljLnB1c2goZSk7fWVsc2UgZm9yKGUgaW4gYz1bXSxkPTAsYSljW2QrK109ZTtkPUpjKGEpO2U9ZC5sZW5ndGg7Zm9yKHZhciBmPTA7ZjxlO2YrKyliLmNhbGwodm9pZCAwLGRbZl0sYyYmY1tmXSxhKTt9fWZ1bmN0aW9uIFMoYSxiKXt0aGlzLmg9e307dGhpcy5nPVtdO3RoaXMuaT0wO3ZhciBjPWFyZ3VtZW50cy5sZW5ndGg7aWYoMTxjKXtpZihjJTIpdGhyb3cgRXJyb3IoXCJVbmV2ZW4gbnVtYmVyIG9mIGFyZ3VtZW50c1wiKTtmb3IodmFyIGQ9MDtkPGM7ZCs9Mil0aGlzLnNldChhcmd1bWVudHNbZF0sYXJndW1lbnRzW2QrMV0pO31lbHNlIGlmKGEpaWYoYSBpbnN0YW5jZW9mIFMpZm9yKGM9YS5UKCksZD0wO2Q8Yy5sZW5ndGg7ZCsrKXRoaXMuc2V0KGNbZF0sYS5nZXQoY1tkXSkpO2Vsc2UgZm9yKGQgaW4gYSl0aGlzLnNldChkLGFbZF0pO31rPVMucHJvdG90eXBlO2suUj1mdW5jdGlvbigpe0xjKHRoaXMpO2Zvcih2YXIgYT1bXSxiPTA7Yjx0aGlzLmcubGVuZ3RoO2IrKylhLnB1c2godGhpcy5oW3RoaXMuZ1tiXV0pO3JldHVybiBhfTtrLlQ9ZnVuY3Rpb24oKXtMYyh0aGlzKTtyZXR1cm4gdGhpcy5nLmNvbmNhdCgpfTtcbmZ1bmN0aW9uIExjKGEpe2lmKGEuaSE9YS5nLmxlbmd0aCl7Zm9yKHZhciBiPTAsYz0wO2I8YS5nLmxlbmd0aDspe3ZhciBkPWEuZ1tiXTtUKGEuaCxkKSYmKGEuZ1tjKytdPWQpO2IrKzt9YS5nLmxlbmd0aD1jO31pZihhLmkhPWEuZy5sZW5ndGgpe3ZhciBlPXt9O2ZvcihjPWI9MDtiPGEuZy5sZW5ndGg7KWQ9YS5nW2JdLFQoZSxkKXx8KGEuZ1tjKytdPWQsZVtkXT0xKSxiKys7YS5nLmxlbmd0aD1jO319ay5nZXQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gVCh0aGlzLmgsYSk/dGhpcy5oW2FdOmJ9O2suc2V0PWZ1bmN0aW9uKGEsYil7VCh0aGlzLmgsYSl8fCh0aGlzLmkrKyx0aGlzLmcucHVzaChhKSk7dGhpcy5oW2FdPWI7fTtrLmZvckVhY2g9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5UKCksZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgZT1jW2RdLGY9dGhpcy5nZXQoZSk7YS5jYWxsKGIsZixlLHRoaXMpO319O1xuZnVuY3Rpb24gVChhLGIpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxiKX12YXIgTWM9L14oPzooW146Lz8jLl0rKTopPyg/OlxcL1xcLyg/OihbXlxcXFwvPyNdKilAKT8oW15cXFxcLz8jXSo/KSg/OjooWzAtOV0rKSk/KD89W1xcXFwvPyNdfCQpKT8oW14/I10rKT8oPzpcXD8oW14jXSopKT8oPzojKFtcXHNcXFNdKikpPyQvO2Z1bmN0aW9uIE5jKGEsYil7aWYoYSl7YT1hLnNwbGl0KFwiJlwiKTtmb3IodmFyIGM9MDtjPGEubGVuZ3RoO2MrKyl7dmFyIGQ9YVtjXS5pbmRleE9mKFwiPVwiKSxlPW51bGw7aWYoMDw9ZCl7dmFyIGY9YVtjXS5zdWJzdHJpbmcoMCxkKTtlPWFbY10uc3Vic3RyaW5nKGQrMSk7fWVsc2UgZj1hW2NdO2IoZixlP2RlY29kZVVSSUNvbXBvbmVudChlLnJlcGxhY2UoL1xcKy9nLFwiIFwiKSk6XCJcIik7fX19ZnVuY3Rpb24gVShhLGIpe3RoaXMuaT10aGlzLnM9dGhpcy5qPVwiXCI7dGhpcy5tPW51bGw7dGhpcy5vPXRoaXMubD1cIlwiO3RoaXMuZz0hMTtpZihhIGluc3RhbmNlb2YgVSl7dGhpcy5nPXZvaWQgMCE9PWI/YjphLmc7T2ModGhpcyxhLmopO3RoaXMucz1hLnM7UGModGhpcyxhLmkpO1FjKHRoaXMsYS5tKTt0aGlzLmw9YS5sO2I9YS5oO3ZhciBjPW5ldyBSYztjLmk9Yi5pO2IuZyYmKGMuZz1uZXcgUyhiLmcpLGMuaD1iLmgpO1NjKHRoaXMsYyk7dGhpcy5vPWEubzt9ZWxzZSBhJiYoYz1TdHJpbmcoYSkubWF0Y2goTWMpKT8odGhpcy5nPSEhYixPYyh0aGlzLGNbMV18fFwiXCIsITApLHRoaXMucz1UYyhjWzJdfHxcIlwiKSxQYyh0aGlzLGNbM118fFwiXCIsITApLFFjKHRoaXMsY1s0XSksdGhpcy5sPVRjKGNbNV18fFwiXCIsITApLFNjKHRoaXMsY1s2XXx8XCJcIiwhMCksdGhpcy5vPVRjKGNbN118fFwiXCIpKToodGhpcy5nPSEhYix0aGlzLmg9bmV3IFJjKG51bGwsdGhpcy5nKSk7fVxuVS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgYT1bXSxiPXRoaXMuajtiJiZhLnB1c2goVWMoYixWYywhMCksXCI6XCIpO3ZhciBjPXRoaXMuaTtpZihjfHxcImZpbGVcIj09YilhLnB1c2goXCIvL1wiKSwoYj10aGlzLnMpJiZhLnB1c2goVWMoYixWYywhMCksXCJAXCIpLGEucHVzaChlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGMpKS5yZXBsYWNlKC8lMjUoWzAtOWEtZkEtRl17Mn0pL2csXCIlJDFcIikpLGM9dGhpcy5tLG51bGwhPWMmJmEucHVzaChcIjpcIixTdHJpbmcoYykpO2lmKGM9dGhpcy5sKXRoaXMuaSYmXCIvXCIhPWMuY2hhckF0KDApJiZhLnB1c2goXCIvXCIpLGEucHVzaChVYyhjLFwiL1wiPT1jLmNoYXJBdCgwKT9XYzpYYywhMCkpOyhjPXRoaXMuaC50b1N0cmluZygpKSYmYS5wdXNoKFwiP1wiLGMpOyhjPXRoaXMubykmJmEucHVzaChcIiNcIixVYyhjLFljKSk7cmV0dXJuIGEuam9pbihcIlwiKX07ZnVuY3Rpb24gTihhKXtyZXR1cm4gbmV3IFUoYSl9XG5mdW5jdGlvbiBPYyhhLGIsYyl7YS5qPWM/VGMoYiwhMCk6YjthLmomJihhLmo9YS5qLnJlcGxhY2UoLzokLyxcIlwiKSk7fWZ1bmN0aW9uIFBjKGEsYixjKXthLmk9Yz9UYyhiLCEwKTpiO31mdW5jdGlvbiBRYyhhLGIpe2lmKGIpe2I9TnVtYmVyKGIpO2lmKGlzTmFOKGIpfHwwPmIpdGhyb3cgRXJyb3IoXCJCYWQgcG9ydCBudW1iZXIgXCIrYik7YS5tPWI7fWVsc2UgYS5tPW51bGw7fWZ1bmN0aW9uIFNjKGEsYixjKXtiIGluc3RhbmNlb2YgUmM/KGEuaD1iLFpjKGEuaCxhLmcpKTooY3x8KGI9VWMoYiwkYykpLGEuaD1uZXcgUmMoYixhLmcpKTt9ZnVuY3Rpb24gUihhLGIsYyl7YS5oLnNldChiLGMpO31mdW5jdGlvbiBqYyhhKXtSKGEsXCJ6eFwiLE1hdGguZmxvb3IoMjE0NzQ4MzY0OCpNYXRoLnJhbmRvbSgpKS50b1N0cmluZygzNikrTWF0aC5hYnMoTWF0aC5mbG9vcigyMTQ3NDgzNjQ4Kk1hdGgucmFuZG9tKCkpXkRhdGUubm93KCkpLnRvU3RyaW5nKDM2KSk7cmV0dXJuIGF9XG5mdW5jdGlvbiBhZChhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIFU/TihhKTpuZXcgVShhLHZvaWQgMCl9ZnVuY3Rpb24gYmQoYSxiLGMsZCl7dmFyIGU9bmV3IFUobnVsbCx2b2lkIDApO2EmJk9jKGUsYSk7YiYmUGMoZSxiKTtjJiZRYyhlLGMpO2QmJihlLmw9ZCk7cmV0dXJuIGV9ZnVuY3Rpb24gVGMoYSxiKXtyZXR1cm4gYT9iP2RlY29kZVVSSShhLnJlcGxhY2UoLyUyNS9nLFwiJTI1MjVcIikpOmRlY29kZVVSSUNvbXBvbmVudChhKTpcIlwifWZ1bmN0aW9uIFVjKGEsYixjKXtyZXR1cm4gXCJzdHJpbmdcIj09PXR5cGVvZiBhPyhhPWVuY29kZVVSSShhKS5yZXBsYWNlKGIsY2QpLGMmJihhPWEucmVwbGFjZSgvJTI1KFswLTlhLWZBLUZdezJ9KS9nLFwiJSQxXCIpKSxhKTpudWxsfWZ1bmN0aW9uIGNkKGEpe2E9YS5jaGFyQ29kZUF0KDApO3JldHVybiBcIiVcIisoYT4+NCYxNSkudG9TdHJpbmcoMTYpKyhhJjE1KS50b1N0cmluZygxNil9XG52YXIgVmM9L1sjXFwvXFw/QF0vZyxYYz0vWyNcXD86XS9nLFdjPS9bI1xcP10vZywkYz0vWyNcXD9AXS9nLFljPS8jL2c7ZnVuY3Rpb24gUmMoYSxiKXt0aGlzLmg9dGhpcy5nPW51bGw7dGhpcy5pPWF8fG51bGw7dGhpcy5qPSEhYjt9ZnVuY3Rpb24gVihhKXthLmd8fChhLmc9bmV3IFMsYS5oPTAsYS5pJiZOYyhhLmksZnVuY3Rpb24oYixjKXthLmFkZChkZWNvZGVVUklDb21wb25lbnQoYi5yZXBsYWNlKC9cXCsvZyxcIiBcIikpLGMpO30pKTt9az1SYy5wcm90b3R5cGU7ay5hZGQ9ZnVuY3Rpb24oYSxiKXtWKHRoaXMpO3RoaXMuaT1udWxsO2E9Vyh0aGlzLGEpO3ZhciBjPXRoaXMuZy5nZXQoYSk7Y3x8dGhpcy5nLnNldChhLGM9W10pO2MucHVzaChiKTt0aGlzLmgrPTE7cmV0dXJuIHRoaXN9O1xuZnVuY3Rpb24gZGQoYSxiKXtWKGEpO2I9VyhhLGIpO1QoYS5nLmgsYikmJihhLmk9bnVsbCxhLmgtPWEuZy5nZXQoYikubGVuZ3RoLGE9YS5nLFQoYS5oLGIpJiYoZGVsZXRlIGEuaFtiXSxhLmktLSxhLmcubGVuZ3RoPjIqYS5pJiZMYyhhKSkpO31mdW5jdGlvbiBlZChhLGIpe1YoYSk7Yj1XKGEsYik7cmV0dXJuIFQoYS5nLmgsYil9ay5mb3JFYWNoPWZ1bmN0aW9uKGEsYil7Vih0aGlzKTt0aGlzLmcuZm9yRWFjaChmdW5jdGlvbihjLGQpe25hKGMsZnVuY3Rpb24oZSl7YS5jYWxsKGIsZSxkLHRoaXMpO30sdGhpcyk7fSx0aGlzKTt9O2suVD1mdW5jdGlvbigpe1YodGhpcyk7Zm9yKHZhciBhPXRoaXMuZy5SKCksYj10aGlzLmcuVCgpLGM9W10sZD0wO2Q8Yi5sZW5ndGg7ZCsrKWZvcih2YXIgZT1hW2RdLGY9MDtmPGUubGVuZ3RoO2YrKyljLnB1c2goYltkXSk7cmV0dXJuIGN9O1xuay5SPWZ1bmN0aW9uKGEpe1YodGhpcyk7dmFyIGI9W107aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhKWVkKHRoaXMsYSkmJihiPXFhKGIsdGhpcy5nLmdldChXKHRoaXMsYSkpKSk7ZWxzZSB7YT10aGlzLmcuUigpO2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKWI9cWEoYixhW2NdKTt9cmV0dXJuIGJ9O2suc2V0PWZ1bmN0aW9uKGEsYil7Vih0aGlzKTt0aGlzLmk9bnVsbDthPVcodGhpcyxhKTtlZCh0aGlzLGEpJiYodGhpcy5oLT10aGlzLmcuZ2V0KGEpLmxlbmd0aCk7dGhpcy5nLnNldChhLFtiXSk7dGhpcy5oKz0xO3JldHVybiB0aGlzfTtrLmdldD1mdW5jdGlvbihhLGIpe2lmKCFhKXJldHVybiBiO2E9dGhpcy5SKGEpO3JldHVybiAwPGEubGVuZ3RoP1N0cmluZyhhWzBdKTpifTtmdW5jdGlvbiBtYyhhLGIsYyl7ZGQoYSxiKTswPGMubGVuZ3RoJiYoYS5pPW51bGwsYS5nLnNldChXKGEsYikscmEoYykpLGEuaCs9Yy5sZW5ndGgpO31cbmsudG9TdHJpbmc9ZnVuY3Rpb24oKXtpZih0aGlzLmkpcmV0dXJuIHRoaXMuaTtpZighdGhpcy5nKXJldHVybiBcIlwiO2Zvcih2YXIgYT1bXSxiPXRoaXMuZy5UKCksYz0wO2M8Yi5sZW5ndGg7YysrKXt2YXIgZD1iW2NdLGU9ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhkKSk7ZD10aGlzLlIoZCk7Zm9yKHZhciBmPTA7ZjxkLmxlbmd0aDtmKyspe3ZhciBoPWU7XCJcIiE9PWRbZl0mJihoKz1cIj1cIitlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGRbZl0pKSk7YS5wdXNoKGgpO319cmV0dXJuIHRoaXMuaT1hLmpvaW4oXCImXCIpfTtmdW5jdGlvbiBXKGEsYil7Yj1TdHJpbmcoYik7YS5qJiYoYj1iLnRvTG93ZXJDYXNlKCkpO3JldHVybiBifWZ1bmN0aW9uIFpjKGEsYil7YiYmIWEuaiYmKFYoYSksYS5pPW51bGwsYS5nLmZvckVhY2goZnVuY3Rpb24oYyxkKXt2YXIgZT1kLnRvTG93ZXJDYXNlKCk7ZCE9ZSYmKGRkKHRoaXMsZCksbWModGhpcyxlLGMpKTt9LGEpKTthLmo9Yjt9dmFyIGZkPWNsYXNze2NvbnN0cnVjdG9yKGEsYil7dGhpcy5oPWE7dGhpcy5nPWI7fX07ZnVuY3Rpb24gZ2QoYSl7dGhpcy5sPWF8fGhkO2wuUGVyZm9ybWFuY2VOYXZpZ2F0aW9uVGltaW5nPyhhPWwucGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5VHlwZShcIm5hdmlnYXRpb25cIiksYT0wPGEubGVuZ3RoJiYoXCJocVwiPT1hWzBdLm5leHRIb3BQcm90b2NvbHx8XCJoMlwiPT1hWzBdLm5leHRIb3BQcm90b2NvbCkpOmE9ISEobC5nJiZsLmcuRWEmJmwuZy5FYSgpJiZsLmcuRWEoKS5aYik7dGhpcy5qPWE/dGhpcy5sOjE7dGhpcy5nPW51bGw7MTx0aGlzLmomJih0aGlzLmc9bmV3IFNldCk7dGhpcy5oPW51bGw7dGhpcy5pPVtdO312YXIgaGQ9MTA7ZnVuY3Rpb24gaWQoYSl7cmV0dXJuIGEuaD8hMDphLmc/YS5nLnNpemU+PWEuajohMX1mdW5jdGlvbiBDYyhhKXtyZXR1cm4gYS5oPzE6YS5nP2EuZy5zaXplOjB9ZnVuY3Rpb24geWMoYSxiKXtyZXR1cm4gYS5oP2EuaD09YjphLmc/YS5nLmhhcyhiKTohMX1mdW5jdGlvbiBEYyhhLGIpe2EuZz9hLmcuYWRkKGIpOmEuaD1iO31cbmZ1bmN0aW9uIEZjKGEsYil7YS5oJiZhLmg9PWI/YS5oPW51bGw6YS5nJiZhLmcuaGFzKGIpJiZhLmcuZGVsZXRlKGIpO31nZC5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy5pPWpkKHRoaXMpO2lmKHRoaXMuaCl0aGlzLmguY2FuY2VsKCksdGhpcy5oPW51bGw7ZWxzZSBpZih0aGlzLmcmJjAhPT10aGlzLmcuc2l6ZSl7Zm9yKGNvbnN0IGEgb2YgdGhpcy5nLnZhbHVlcygpKWEuY2FuY2VsKCk7dGhpcy5nLmNsZWFyKCk7fX07ZnVuY3Rpb24gamQoYSl7aWYobnVsbCE9YS5oKXJldHVybiBhLmkuY29uY2F0KGEuaC5EKTtpZihudWxsIT1hLmcmJjAhPT1hLmcuc2l6ZSl7bGV0IGI9YS5pO2Zvcihjb25zdCBjIG9mIGEuZy52YWx1ZXMoKSliPWIuY29uY2F0KGMuRCk7cmV0dXJuIGJ9cmV0dXJuIHJhKGEuaSl9ZnVuY3Rpb24ga2QoKXt9a2QucHJvdG90eXBlLnN0cmluZ2lmeT1mdW5jdGlvbihhKXtyZXR1cm4gbC5KU09OLnN0cmluZ2lmeShhLHZvaWQgMCl9O2tkLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbihhKXtyZXR1cm4gbC5KU09OLnBhcnNlKGEsdm9pZCAwKX07ZnVuY3Rpb24gbGQoKXt0aGlzLmc9bmV3IGtkO31mdW5jdGlvbiBtZChhLGIsYyl7Y29uc3QgZD1jfHxcIlwiO3RyeXtLYyhhLGZ1bmN0aW9uKGUsZil7bGV0IGg9ZTtwKGUpJiYoaD1yYihlKSk7Yi5wdXNoKGQrZitcIj1cIitlbmNvZGVVUklDb21wb25lbnQoaCkpO30pO31jYXRjaChlKXt0aHJvdyBiLnB1c2goZCtcInR5cGU9XCIrZW5jb2RlVVJJQ29tcG9uZW50KFwiX2JhZG1hcFwiKSksZTt9fWZ1bmN0aW9uIG5kKGEsYil7Y29uc3QgYz1uZXcgTWI7aWYobC5JbWFnZSl7Y29uc3QgZD1uZXcgSW1hZ2U7ZC5vbmxvYWQ9amEob2QsYyxkLFwiVGVzdExvYWRJbWFnZTogbG9hZGVkXCIsITAsYik7ZC5vbmVycm9yPWphKG9kLGMsZCxcIlRlc3RMb2FkSW1hZ2U6IGVycm9yXCIsITEsYik7ZC5vbmFib3J0PWphKG9kLGMsZCxcIlRlc3RMb2FkSW1hZ2U6IGFib3J0XCIsITEsYik7ZC5vbnRpbWVvdXQ9amEob2QsYyxkLFwiVGVzdExvYWRJbWFnZTogdGltZW91dFwiLCExLGIpO2wuc2V0VGltZW91dChmdW5jdGlvbigpe2lmKGQub250aW1lb3V0KWQub250aW1lb3V0KCk7fSwxRTQpO2Quc3JjPWE7fWVsc2UgYighMSk7fWZ1bmN0aW9uIG9kKGEsYixjLGQsZSl7dHJ5e2Iub25sb2FkPW51bGwsYi5vbmVycm9yPW51bGwsYi5vbmFib3J0PW51bGwsYi5vbnRpbWVvdXQ9bnVsbCxlKGQpO31jYXRjaChmKXt9fWZ1bmN0aW9uIHBkKGEpe3RoaXMubD1hLiRifHxudWxsO3RoaXMuaj1hLmlifHwhMTt9dChwZCxZYik7cGQucHJvdG90eXBlLmc9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHFkKHRoaXMubCx0aGlzLmopfTtwZC5wcm90b3R5cGUuaT1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYX19KHt9KTtmdW5jdGlvbiBxZChhLGIpe0MuY2FsbCh0aGlzKTt0aGlzLkQ9YTt0aGlzLnU9Yjt0aGlzLm09dm9pZCAwO3RoaXMucmVhZHlTdGF0ZT1yZDt0aGlzLnN0YXR1cz0wO3RoaXMucmVzcG9uc2VUeXBlPXRoaXMucmVzcG9uc2VUZXh0PXRoaXMucmVzcG9uc2U9dGhpcy5zdGF0dXNUZXh0PVwiXCI7dGhpcy5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbDt0aGlzLnY9bmV3IEhlYWRlcnM7dGhpcy5oPW51bGw7dGhpcy5DPVwiR0VUXCI7dGhpcy5CPVwiXCI7dGhpcy5nPSExO3RoaXMuQT10aGlzLmo9dGhpcy5sPW51bGw7fXQocWQsQyk7dmFyIHJkPTA7az1xZC5wcm90b3R5cGU7XG5rLm9wZW49ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnJlYWR5U3RhdGUhPXJkKXRocm93IHRoaXMuYWJvcnQoKSxFcnJvcihcIkVycm9yIHJlb3BlbmluZyBhIGNvbm5lY3Rpb25cIik7dGhpcy5DPWE7dGhpcy5CPWI7dGhpcy5yZWFkeVN0YXRlPTE7c2QodGhpcyk7fTtrLnNlbmQ9ZnVuY3Rpb24oYSl7aWYoMSE9dGhpcy5yZWFkeVN0YXRlKXRocm93IHRoaXMuYWJvcnQoKSxFcnJvcihcIm5lZWQgdG8gY2FsbCBvcGVuKCkgZmlyc3QuIFwiKTt0aGlzLmc9ITA7Y29uc3QgYj17aGVhZGVyczp0aGlzLnYsbWV0aG9kOnRoaXMuQyxjcmVkZW50aWFsczp0aGlzLm0sY2FjaGU6dm9pZCAwfTthJiYoYi5ib2R5PWEpOyh0aGlzLkR8fGwpLmZldGNoKG5ldyBSZXF1ZXN0KHRoaXMuQixiKSkudGhlbih0aGlzLlZhLmJpbmQodGhpcyksdGhpcy5oYS5iaW5kKHRoaXMpKTt9O1xuay5hYm9ydD1mdW5jdGlvbigpe3RoaXMucmVzcG9uc2U9dGhpcy5yZXNwb25zZVRleHQ9XCJcIjt0aGlzLnY9bmV3IEhlYWRlcnM7dGhpcy5zdGF0dXM9MDt0aGlzLmomJnRoaXMuai5jYW5jZWwoXCJSZXF1ZXN0IHdhcyBhYm9ydGVkLlwiKTsxPD10aGlzLnJlYWR5U3RhdGUmJnRoaXMuZyYmNCE9dGhpcy5yZWFkeVN0YXRlJiYodGhpcy5nPSExLHRkKHRoaXMpKTt0aGlzLnJlYWR5U3RhdGU9cmQ7fTtcbmsuVmE9ZnVuY3Rpb24oYSl7aWYodGhpcy5nJiYodGhpcy5sPWEsdGhpcy5ofHwodGhpcy5zdGF0dXM9dGhpcy5sLnN0YXR1cyx0aGlzLnN0YXR1c1RleHQ9dGhpcy5sLnN0YXR1c1RleHQsdGhpcy5oPWEuaGVhZGVycyx0aGlzLnJlYWR5U3RhdGU9MixzZCh0aGlzKSksdGhpcy5nJiYodGhpcy5yZWFkeVN0YXRlPTMsc2QodGhpcyksdGhpcy5nKSkpaWYoXCJhcnJheWJ1ZmZlclwiPT09dGhpcy5yZXNwb25zZVR5cGUpYS5hcnJheUJ1ZmZlcigpLnRoZW4odGhpcy5UYS5iaW5kKHRoaXMpLHRoaXMuaGEuYmluZCh0aGlzKSk7ZWxzZSBpZihcInVuZGVmaW5lZFwiIT09dHlwZW9mIGwuUmVhZGFibGVTdHJlYW0mJlwiYm9keVwiaW4gYSl7dGhpcy5qPWEuYm9keS5nZXRSZWFkZXIoKTtpZih0aGlzLnUpe2lmKHRoaXMucmVzcG9uc2VUeXBlKXRocm93IEVycm9yKCdyZXNwb25zZVR5cGUgbXVzdCBiZSBlbXB0eSBmb3IgXCJzdHJlYW1CaW5hcnlDaHVua3NcIiBtb2RlIHJlc3BvbnNlcy4nKTt0aGlzLnJlc3BvbnNlPVxuW107fWVsc2UgdGhpcy5yZXNwb25zZT10aGlzLnJlc3BvbnNlVGV4dD1cIlwiLHRoaXMuQT1uZXcgVGV4dERlY29kZXI7dWQodGhpcyk7fWVsc2UgYS50ZXh0KCkudGhlbih0aGlzLlVhLmJpbmQodGhpcyksdGhpcy5oYS5iaW5kKHRoaXMpKTt9O2Z1bmN0aW9uIHVkKGEpe2Euai5yZWFkKCkudGhlbihhLlNhLmJpbmQoYSkpLmNhdGNoKGEuaGEuYmluZChhKSk7fWsuU2E9ZnVuY3Rpb24oYSl7aWYodGhpcy5nKXtpZih0aGlzLnUmJmEudmFsdWUpdGhpcy5yZXNwb25zZS5wdXNoKGEudmFsdWUpO2Vsc2UgaWYoIXRoaXMudSl7dmFyIGI9YS52YWx1ZT9hLnZhbHVlOm5ldyBVaW50OEFycmF5KDApO2lmKGI9dGhpcy5BLmRlY29kZShiLHtzdHJlYW06IWEuZG9uZX0pKXRoaXMucmVzcG9uc2U9dGhpcy5yZXNwb25zZVRleHQrPWI7fWEuZG9uZT90ZCh0aGlzKTpzZCh0aGlzKTszPT10aGlzLnJlYWR5U3RhdGUmJnVkKHRoaXMpO319O1xuay5VYT1mdW5jdGlvbihhKXt0aGlzLmcmJih0aGlzLnJlc3BvbnNlPXRoaXMucmVzcG9uc2VUZXh0PWEsdGQodGhpcykpO307ay5UYT1mdW5jdGlvbihhKXt0aGlzLmcmJih0aGlzLnJlc3BvbnNlPWEsdGQodGhpcykpO307ay5oYT1mdW5jdGlvbigpe3RoaXMuZyYmdGQodGhpcyk7fTtmdW5jdGlvbiB0ZChhKXthLnJlYWR5U3RhdGU9NDthLmw9bnVsbDthLmo9bnVsbDthLkE9bnVsbDtzZChhKTt9ay5zZXRSZXF1ZXN0SGVhZGVyPWZ1bmN0aW9uKGEsYil7dGhpcy52LmFwcGVuZChhLGIpO307ay5nZXRSZXNwb25zZUhlYWRlcj1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5oP3RoaXMuaC5nZXQoYS50b0xvd2VyQ2FzZSgpKXx8XCJcIjpcIlwifTtcbmsuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzPWZ1bmN0aW9uKCl7aWYoIXRoaXMuaClyZXR1cm4gXCJcIjtjb25zdCBhPVtdLGI9dGhpcy5oLmVudHJpZXMoKTtmb3IodmFyIGM9Yi5uZXh0KCk7IWMuZG9uZTspYz1jLnZhbHVlLGEucHVzaChjWzBdK1wiOiBcIitjWzFdKSxjPWIubmV4dCgpO3JldHVybiBhLmpvaW4oXCJcXHJcXG5cIil9O2Z1bmN0aW9uIHNkKGEpe2Eub25yZWFkeXN0YXRlY2hhbmdlJiZhLm9ucmVhZHlzdGF0ZWNoYW5nZS5jYWxsKGEpO31PYmplY3QuZGVmaW5lUHJvcGVydHkocWQucHJvdG90eXBlLFwid2l0aENyZWRlbnRpYWxzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBcImluY2x1ZGVcIj09PXRoaXMubX0sc2V0OmZ1bmN0aW9uKGEpe3RoaXMubT1hP1wiaW5jbHVkZVwiOlwic2FtZS1vcmlnaW5cIjt9fSk7dmFyIHZkPWwuSlNPTi5wYXJzZTtmdW5jdGlvbiBYKGEpe0MuY2FsbCh0aGlzKTt0aGlzLmhlYWRlcnM9bmV3IFM7dGhpcy51PWF8fG51bGw7dGhpcy5oPSExO3RoaXMuQz10aGlzLmc9bnVsbDt0aGlzLkg9XCJcIjt0aGlzLm09MDt0aGlzLmo9XCJcIjt0aGlzLmw9dGhpcy5GPXRoaXMudj10aGlzLkQ9ITE7dGhpcy5CPTA7dGhpcy5BPW51bGw7dGhpcy5KPXdkO3RoaXMuSz10aGlzLkw9ITE7fXQoWCxDKTt2YXIgd2Q9XCJcIix4ZD0vXmh0dHBzPyQvaSx5ZD1bXCJQT1NUXCIsXCJQVVRcIl07az1YLnByb3RvdHlwZTtcbmsuZWE9ZnVuY3Rpb24oYSxiLGMsZCl7aWYodGhpcy5nKXRocm93IEVycm9yKFwiW2dvb2cubmV0LlhocklvXSBPYmplY3QgaXMgYWN0aXZlIHdpdGggYW5vdGhlciByZXF1ZXN0PVwiK3RoaXMuSCtcIjsgbmV3VXJpPVwiK2EpO2I9Yj9iLnRvVXBwZXJDYXNlKCk6XCJHRVRcIjt0aGlzLkg9YTt0aGlzLmo9XCJcIjt0aGlzLm09MDt0aGlzLkQ9ITE7dGhpcy5oPSEwO3RoaXMuZz10aGlzLnU/dGhpcy51LmcoKTpjYy5nKCk7dGhpcy5DPXRoaXMudT9aYih0aGlzLnUpOlpiKGNjKTt0aGlzLmcub25yZWFkeXN0YXRlY2hhbmdlPXEodGhpcy5GYSx0aGlzKTt0cnl7dGhpcy5GPSEwLHRoaXMuZy5vcGVuKGIsU3RyaW5nKGEpLCEwKSx0aGlzLkY9ITE7fWNhdGNoKGYpe3pkKHRoaXMsZik7cmV0dXJufWE9Y3x8XCJcIjtjb25zdCBlPW5ldyBTKHRoaXMuaGVhZGVycyk7ZCYmS2MoZCxmdW5jdGlvbihmLGgpe2Uuc2V0KGgsZik7fSk7ZD1vYShlLlQoKSk7Yz1sLkZvcm1EYXRhJiZhIGluc3RhbmNlb2YgbC5Gb3JtRGF0YTtcbiEoMDw9bWEoeWQsYikpfHxkfHxjfHxlLnNldChcIkNvbnRlbnQtVHlwZVwiLFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLThcIik7ZS5mb3JFYWNoKGZ1bmN0aW9uKGYsaCl7dGhpcy5nLnNldFJlcXVlc3RIZWFkZXIoaCxmKTt9LHRoaXMpO3RoaXMuSiYmKHRoaXMuZy5yZXNwb25zZVR5cGU9dGhpcy5KKTtcIndpdGhDcmVkZW50aWFsc1wiaW4gdGhpcy5nJiZ0aGlzLmcud2l0aENyZWRlbnRpYWxzIT09dGhpcy5MJiYodGhpcy5nLndpdGhDcmVkZW50aWFscz10aGlzLkwpO3RyeXtBZCh0aGlzKSwwPHRoaXMuQiYmKCh0aGlzLks9QmQodGhpcy5nKSk/KHRoaXMuZy50aW1lb3V0PXRoaXMuQix0aGlzLmcub250aW1lb3V0PXEodGhpcy5wYSx0aGlzKSk6dGhpcy5BPUdiKHRoaXMucGEsdGhpcy5CLHRoaXMpKSx0aGlzLnY9ITAsdGhpcy5nLnNlbmQoYSksdGhpcy52PSExO31jYXRjaChmKXt6ZCh0aGlzLGYpO319O1xuZnVuY3Rpb24gQmQoYSl7cmV0dXJuIHkmJlJhKCkmJlwibnVtYmVyXCI9PT10eXBlb2YgYS50aW1lb3V0JiZ2b2lkIDAhPT1hLm9udGltZW91dH1mdW5jdGlvbiBwYShhKXtyZXR1cm4gXCJjb250ZW50LXR5cGVcIj09YS50b0xvd2VyQ2FzZSgpfWsucGE9ZnVuY3Rpb24oKXtcInVuZGVmaW5lZFwiIT10eXBlb2YgZ29vZyYmdGhpcy5nJiYodGhpcy5qPVwiVGltZWQgb3V0IGFmdGVyIFwiK3RoaXMuQitcIm1zLCBhYm9ydGluZ1wiLHRoaXMubT04LEQodGhpcyxcInRpbWVvdXRcIiksdGhpcy5hYm9ydCg4KSk7fTtmdW5jdGlvbiB6ZChhLGIpe2EuaD0hMTthLmcmJihhLmw9ITAsYS5nLmFib3J0KCksYS5sPSExKTthLmo9YjthLm09NTtDZChhKTtEZChhKTt9ZnVuY3Rpb24gQ2QoYSl7YS5EfHwoYS5EPSEwLEQoYSxcImNvbXBsZXRlXCIpLEQoYSxcImVycm9yXCIpKTt9XG5rLmFib3J0PWZ1bmN0aW9uKGEpe3RoaXMuZyYmdGhpcy5oJiYodGhpcy5oPSExLHRoaXMubD0hMCx0aGlzLmcuYWJvcnQoKSx0aGlzLmw9ITEsdGhpcy5tPWF8fDcsRCh0aGlzLFwiY29tcGxldGVcIiksRCh0aGlzLFwiYWJvcnRcIiksRGQodGhpcykpO307ay5NPWZ1bmN0aW9uKCl7dGhpcy5nJiYodGhpcy5oJiYodGhpcy5oPSExLHRoaXMubD0hMCx0aGlzLmcuYWJvcnQoKSx0aGlzLmw9ITEpLERkKHRoaXMsITApKTtYLlouTS5jYWxsKHRoaXMpO307ay5GYT1mdW5jdGlvbigpe3RoaXMuc3x8KHRoaXMuRnx8dGhpcy52fHx0aGlzLmw/RWQodGhpcyk6dGhpcy5jYigpKTt9O2suY2I9ZnVuY3Rpb24oKXtFZCh0aGlzKTt9O1xuZnVuY3Rpb24gRWQoYSl7aWYoYS5oJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgZ29vZyYmKCFhLkNbMV18fDQhPU8oYSl8fDIhPWEuYmEoKSkpaWYoYS52JiY0PT1PKGEpKUdiKGEuRmEsMCxhKTtlbHNlIGlmKEQoYSxcInJlYWR5c3RhdGVjaGFuZ2VcIiksND09TyhhKSl7YS5oPSExO3RyeXtjb25zdCBuPWEuYmEoKTthOnN3aXRjaChuKXtjYXNlIDIwMDpjYXNlIDIwMTpjYXNlIDIwMjpjYXNlIDIwNDpjYXNlIDIwNjpjYXNlIDMwNDpjYXNlIDEyMjM6dmFyIGI9ITA7YnJlYWsgYTtkZWZhdWx0OmI9ITE7fXZhciBjO2lmKCEoYz1iKSl7dmFyIGQ7aWYoZD0wPT09bil7dmFyIGU9U3RyaW5nKGEuSCkubWF0Y2goTWMpWzFdfHxudWxsO2lmKCFlJiZsLnNlbGYmJmwuc2VsZi5sb2NhdGlvbil7dmFyIGY9bC5zZWxmLmxvY2F0aW9uLnByb3RvY29sO2U9Zi5zdWJzdHIoMCxmLmxlbmd0aC0xKTt9ZD0heGQudGVzdChlP2UudG9Mb3dlckNhc2UoKTpcIlwiKTt9Yz1kO31pZihjKUQoYSxcImNvbXBsZXRlXCIpLEQoYSxcblwic3VjY2Vzc1wiKTtlbHNlIHthLm09Njt0cnl7dmFyIGg9MjxPKGEpP2EuZy5zdGF0dXNUZXh0OlwiXCI7fWNhdGNoKHUpe2g9XCJcIjt9YS5qPWgrXCIgW1wiK2EuYmEoKStcIl1cIjtDZChhKTt9fWZpbmFsbHl7RGQoYSk7fX19ZnVuY3Rpb24gRGQoYSxiKXtpZihhLmcpe0FkKGEpO2NvbnN0IGM9YS5nLGQ9YS5DWzBdP2FhOm51bGw7YS5nPW51bGw7YS5DPW51bGw7Ynx8RChhLFwicmVhZHlcIik7dHJ5e2Mub25yZWFkeXN0YXRlY2hhbmdlPWQ7fWNhdGNoKGUpe319fWZ1bmN0aW9uIEFkKGEpe2EuZyYmYS5LJiYoYS5nLm9udGltZW91dD1udWxsKTthLkEmJihsLmNsZWFyVGltZW91dChhLkEpLGEuQT1udWxsKTt9ZnVuY3Rpb24gTyhhKXtyZXR1cm4gYS5nP2EuZy5yZWFkeVN0YXRlOjB9ay5iYT1mdW5jdGlvbigpe3RyeXtyZXR1cm4gMjxPKHRoaXMpP3RoaXMuZy5zdGF0dXM6LTF9Y2F0Y2goYSl7cmV0dXJuIC0xfX07XG5rLmdhPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiB0aGlzLmc/dGhpcy5nLnJlc3BvbnNlVGV4dDpcIlwifWNhdGNoKGEpe3JldHVybiBcIlwifX07ay5RYT1mdW5jdGlvbihhKXtpZih0aGlzLmcpe3ZhciBiPXRoaXMuZy5yZXNwb25zZVRleHQ7YSYmMD09Yi5pbmRleE9mKGEpJiYoYj1iLnN1YnN0cmluZyhhLmxlbmd0aCkpO3JldHVybiB2ZChiKX19O2Z1bmN0aW9uIG9jKGEpe3RyeXtpZighYS5nKXJldHVybiBudWxsO2lmKFwicmVzcG9uc2VcImluIGEuZylyZXR1cm4gYS5nLnJlc3BvbnNlO3N3aXRjaChhLkope2Nhc2Ugd2Q6Y2FzZSBcInRleHRcIjpyZXR1cm4gYS5nLnJlc3BvbnNlVGV4dDtjYXNlIFwiYXJyYXlidWZmZXJcIjppZihcIm1velJlc3BvbnNlQXJyYXlCdWZmZXJcImluIGEuZylyZXR1cm4gYS5nLm1velJlc3BvbnNlQXJyYXlCdWZmZXJ9cmV0dXJuIG51bGx9Y2F0Y2goYil7cmV0dXJuIG51bGx9fWsuRGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tfTtcbmsuTGE9ZnVuY3Rpb24oKXtyZXR1cm4gXCJzdHJpbmdcIj09PXR5cGVvZiB0aGlzLmo/dGhpcy5qOlN0cmluZyh0aGlzLmopfTtmdW5jdGlvbiBGZChhKXtsZXQgYj1cIlwiO3hhKGEsZnVuY3Rpb24oYyxkKXtiKz1kO2IrPVwiOlwiO2IrPWM7Yis9XCJcXHJcXG5cIjt9KTtyZXR1cm4gYn1mdW5jdGlvbiBHZChhLGIsYyl7YTp7Zm9yKGQgaW4gYyl7dmFyIGQ9ITE7YnJlYWsgYX1kPSEwO31kfHwoYz1GZChjKSxcInN0cmluZ1wiPT09dHlwZW9mIGE/KG51bGwhPWMmJmVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoYykpKTpSKGEsYixjKSk7fWZ1bmN0aW9uIEhkKGEsYixjKXtyZXR1cm4gYyYmYy5pbnRlcm5hbENoYW5uZWxQYXJhbXM/Yy5pbnRlcm5hbENoYW5uZWxQYXJhbXNbYV18fGI6Yn1cbmZ1bmN0aW9uIElkKGEpe3RoaXMuemE9MDt0aGlzLmw9W107dGhpcy5oPW5ldyBNYjt0aGlzLmxhPXRoaXMub2E9dGhpcy5GPXRoaXMuVz10aGlzLmc9dGhpcy5zYT10aGlzLkQ9dGhpcy5hYT10aGlzLm89dGhpcy5QPXRoaXMucz1udWxsO3RoaXMuWmE9dGhpcy5WPTA7dGhpcy5YYT1IZChcImZhaWxGYXN0XCIsITEsYSk7dGhpcy5OPXRoaXMudj10aGlzLnU9dGhpcy5tPXRoaXMuaj1udWxsO3RoaXMuWD0hMDt0aGlzLkk9dGhpcy50YT10aGlzLlU9LTE7dGhpcy5ZPXRoaXMuQT10aGlzLkM9MDt0aGlzLlBhPUhkKFwiYmFzZVJldHJ5RGVsYXlNc1wiLDVFMyxhKTt0aGlzLiRhPUhkKFwicmV0cnlEZWxheVNlZWRNc1wiLDFFNCxhKTt0aGlzLllhPUhkKFwiZm9yd2FyZENoYW5uZWxNYXhSZXRyaWVzXCIsMixhKTt0aGlzLnJhPUhkKFwiZm9yd2FyZENoYW5uZWxSZXF1ZXN0VGltZW91dE1zXCIsMkU0LGEpO3RoaXMucWE9YSYmYS54bWxIdHRwRmFjdG9yeXx8dm9pZCAwO3RoaXMuQmE9YSYmYS5ZYnx8ITE7XG50aGlzLks9dm9pZCAwO3RoaXMuSD1hJiZhLnN1cHBvcnRzQ3Jvc3NEb21haW5YaHJ8fCExO3RoaXMuSj1cIlwiO3RoaXMuaT1uZXcgZ2QoYSYmYS5jb25jdXJyZW50UmVxdWVzdExpbWl0KTt0aGlzLkNhPW5ldyBsZDt0aGlzLmphPWEmJmEuZmFzdEhhbmRzaGFrZXx8ITE7dGhpcy5SYT1hJiZhLldifHwhMTthJiZhLkFhJiZ0aGlzLmguQWEoKTthJiZhLmZvcmNlTG9uZ1BvbGxpbmcmJih0aGlzLlg9ITEpO3RoaXMuJD0hdGhpcy5qYSYmdGhpcy5YJiZhJiZhLmRldGVjdEJ1ZmZlcmluZ1Byb3h5fHwhMTt0aGlzLmthPXZvaWQgMDt0aGlzLk89MDt0aGlzLkw9ITE7dGhpcy5CPW51bGw7dGhpcy5XYT0hYXx8ITEhPT1hLlhiO31rPUlkLnByb3RvdHlwZTtrLm1hPTg7ay5HPTE7XG5mdW5jdGlvbiBJYyhhKXtKZChhKTtpZigzPT1hLkcpe3ZhciBiPWEuVisrLGM9TihhLkYpO1IoYyxcIlNJRFwiLGEuSik7UihjLFwiUklEXCIsYik7UihjLFwiVFlQRVwiLFwidGVybWluYXRlXCIpO0tkKGEsYyk7Yj1uZXcgTShhLGEuaCxiLHZvaWQgMCk7Yi5LPTI7Yi52PWpjKE4oYykpO2M9ITE7bC5uYXZpZ2F0b3ImJmwubmF2aWdhdG9yLnNlbmRCZWFjb24mJihjPWwubmF2aWdhdG9yLnNlbmRCZWFjb24oYi52LnRvU3RyaW5nKCksXCJcIikpOyFjJiZsLkltYWdlJiYoKG5ldyBJbWFnZSkuc3JjPWIudixjPSEwKTtjfHwoYi5nPW5jKGIubCxudWxsKSxiLmcuZWEoYi52KSk7Yi5GPURhdGUubm93KCk7bGMoYik7fUxkKGEpO31rLmhiPWZ1bmN0aW9uKGEpe3RyeXt0aGlzLmguaW5mbyhcIk9yaWdpbiBUcmlhbHMgaW52b2tlZDogXCIrYSk7fWNhdGNoKGIpe319O2Z1bmN0aW9uIEFjKGEpe2EuZyYmKHdjKGEpLGEuZy5jYW5jZWwoKSxhLmc9bnVsbCk7fVxuZnVuY3Rpb24gSmQoYSl7QWMoYSk7YS51JiYobC5jbGVhclRpbWVvdXQoYS51KSxhLnU9bnVsbCk7emMoYSk7YS5pLmNhbmNlbCgpO2EubSYmKFwibnVtYmVyXCI9PT10eXBlb2YgYS5tJiZsLmNsZWFyVGltZW91dChhLm0pLGEubT1udWxsKTt9ZnVuY3Rpb24gTWQoYSxiKXthLmwucHVzaChuZXcgZmQoYS5aYSsrLGIpKTszPT1hLkcmJkhjKGEpO31mdW5jdGlvbiBIYyhhKXtpZChhLmkpfHxhLm18fChhLm09ITAsemIoYS5IYSxhKSxhLkM9MCk7fWZ1bmN0aW9uIE5kKGEsYil7aWYoQ2MoYS5pKT49YS5pLmotKGEubT8xOjApKXJldHVybiAhMTtpZihhLm0pcmV0dXJuIGEubD1iLkQuY29uY2F0KGEubCksITA7aWYoMT09YS5HfHwyPT1hLkd8fGEuQz49KGEuWGE/MDphLllhKSlyZXR1cm4gITE7YS5tPUsocShhLkhhLGEsYiksT2QoYSxhLkMpKTthLkMrKztyZXR1cm4gITB9XG5rLkhhPWZ1bmN0aW9uKGEpe2lmKHRoaXMubSlpZih0aGlzLm09bnVsbCwxPT10aGlzLkcpe2lmKCFhKXt0aGlzLlY9TWF0aC5mbG9vcigxRTUqTWF0aC5yYW5kb20oKSk7YT10aGlzLlYrKztjb25zdCBlPW5ldyBNKHRoaXMsdGhpcy5oLGEsdm9pZCAwKTtsZXQgZj10aGlzLnM7dGhpcy5QJiYoZj8oZj15YShmKSxBYShmLHRoaXMuUCkpOmY9dGhpcy5QKTtudWxsPT09dGhpcy5vJiYoZS5IPWYpO2lmKHRoaXMuamEpYTp7dmFyIGI9MDtmb3IodmFyIGM9MDtjPHRoaXMubC5sZW5ndGg7YysrKXtiOnt2YXIgZD10aGlzLmxbY107aWYoXCJfX2RhdGFfX1wiaW4gZC5nJiYoZD1kLmcuX19kYXRhX18sXCJzdHJpbmdcIj09PXR5cGVvZiBkKSl7ZD1kLmxlbmd0aDticmVhayBifWQ9dm9pZCAwO31pZih2b2lkIDA9PT1kKWJyZWFrO2IrPWQ7aWYoNDA5NjxiKXtiPWM7YnJlYWsgYX1pZig0MDk2PT09Ynx8Yz09PXRoaXMubC5sZW5ndGgtMSl7Yj1jKzE7YnJlYWsgYX19Yj0xRTM7fWVsc2UgYj0xRTM7Yj1cblBkKHRoaXMsZSxiKTtjPU4odGhpcy5GKTtSKGMsXCJSSURcIixhKTtSKGMsXCJDVkVSXCIsMjIpO3RoaXMuRCYmUihjLFwiWC1IVFRQLVNlc3Npb24tSWRcIix0aGlzLkQpO0tkKHRoaXMsYyk7dGhpcy5vJiZmJiZHZChjLHRoaXMubyxmKTtEYyh0aGlzLmksZSk7dGhpcy5SYSYmUihjLFwiVFlQRVwiLFwiaW5pdFwiKTt0aGlzLmphPyhSKGMsXCIkcmVxXCIsYiksUihjLFwiU0lEXCIsXCJudWxsXCIpLGUuJD0hMCxpYyhlLGMsbnVsbCkpOmljKGUsYyxiKTt0aGlzLkc9Mjt9fWVsc2UgMz09dGhpcy5HJiYoYT9RZCh0aGlzLGEpOjA9PXRoaXMubC5sZW5ndGh8fGlkKHRoaXMuaSl8fFFkKHRoaXMpKTt9O1xuZnVuY3Rpb24gUWQoYSxiKXt2YXIgYztiP2M9Yi5tOmM9YS5WKys7Y29uc3QgZD1OKGEuRik7UihkLFwiU0lEXCIsYS5KKTtSKGQsXCJSSURcIixjKTtSKGQsXCJBSURcIixhLlUpO0tkKGEsZCk7YS5vJiZhLnMmJkdkKGQsYS5vLGEucyk7Yz1uZXcgTShhLGEuaCxjLGEuQysxKTtudWxsPT09YS5vJiYoYy5IPWEucyk7YiYmKGEubD1iLkQuY29uY2F0KGEubCkpO2I9UGQoYSxjLDFFMyk7Yy5zZXRUaW1lb3V0KE1hdGgucm91bmQoLjUqYS5yYSkrTWF0aC5yb3VuZCguNSphLnJhKk1hdGgucmFuZG9tKCkpKTtEYyhhLmksYyk7aWMoYyxkLGIpO31mdW5jdGlvbiBLZChhLGIpe2EuaiYmS2Moe30sZnVuY3Rpb24oYyxkKXtSKGIsZCxjKTt9KTt9XG5mdW5jdGlvbiBQZChhLGIsYyl7Yz1NYXRoLm1pbihhLmwubGVuZ3RoLGMpO3ZhciBkPWEuaj9xKGEuai5PYSxhLmosYSk6bnVsbDthOnt2YXIgZT1hLmw7bGV0IGY9LTE7Zm9yKDs7KXtjb25zdCBoPVtcImNvdW50PVwiK2NdOy0xPT1mPzA8Yz8oZj1lWzBdLmgsaC5wdXNoKFwib2ZzPVwiK2YpKTpmPTA6aC5wdXNoKFwib2ZzPVwiK2YpO2xldCBuPSEwO2ZvcihsZXQgdT0wO3U8Yzt1Kyspe2xldCBtPWVbdV0uaDtjb25zdCByPWVbdV0uZzttLT1mO2lmKDA+bSlmPU1hdGgubWF4KDAsZVt1XS5oLTEwMCksbj0hMTtlbHNlIHRyeXttZChyLGgsXCJyZXFcIittK1wiX1wiKTt9Y2F0Y2goRyl7ZCYmZChyKTt9fWlmKG4pe2Q9aC5qb2luKFwiJlwiKTticmVhayBhfX19YT1hLmwuc3BsaWNlKDAsYyk7Yi5EPWE7cmV0dXJuIGR9ZnVuY3Rpb24gR2MoYSl7YS5nfHxhLnV8fChhLlk9MSx6YihhLkdhLGEpLGEuQT0wKTt9XG5mdW5jdGlvbiBCYyhhKXtpZihhLmd8fGEudXx8Mzw9YS5BKXJldHVybiAhMTthLlkrKzthLnU9SyhxKGEuR2EsYSksT2QoYSxhLkEpKTthLkErKztyZXR1cm4gITB9ay5HYT1mdW5jdGlvbigpe3RoaXMudT1udWxsO1JkKHRoaXMpO2lmKHRoaXMuJCYmISh0aGlzLkx8fG51bGw9PXRoaXMuZ3x8MD49dGhpcy5PKSl7dmFyIGE9Mip0aGlzLk87dGhpcy5oLmluZm8oXCJCUCBkZXRlY3Rpb24gdGltZXIgZW5hYmxlZDogXCIrYSk7dGhpcy5CPUsocSh0aGlzLmJiLHRoaXMpLGEpO319O2suYmI9ZnVuY3Rpb24oKXt0aGlzLkImJih0aGlzLkI9bnVsbCx0aGlzLmguaW5mbyhcIkJQIGRldGVjdGlvbiB0aW1lb3V0IHJlYWNoZWQuXCIpLHRoaXMuaC5pbmZvKFwiQnVmZmVyaW5nIHByb3h5IGRldGVjdGVkIGFuZCBzd2l0Y2ggdG8gbG9uZy1wb2xsaW5nIVwiKSx0aGlzLk49ITEsdGhpcy5MPSEwLEooMTApLEFjKHRoaXMpLFJkKHRoaXMpKTt9O1xuZnVuY3Rpb24gd2MoYSl7bnVsbCE9YS5CJiYobC5jbGVhclRpbWVvdXQoYS5CKSxhLkI9bnVsbCk7fWZ1bmN0aW9uIFJkKGEpe2EuZz1uZXcgTShhLGEuaCxcInJwY1wiLGEuWSk7bnVsbD09PWEubyYmKGEuZy5IPWEucyk7YS5nLk89MDt2YXIgYj1OKGEub2EpO1IoYixcIlJJRFwiLFwicnBjXCIpO1IoYixcIlNJRFwiLGEuSik7UihiLFwiQ0lcIixhLk4/XCIwXCI6XCIxXCIpO1IoYixcIkFJRFwiLGEuVSk7S2QoYSxiKTtSKGIsXCJUWVBFXCIsXCJ4bWxodHRwXCIpO2EubyYmYS5zJiZHZChiLGEubyxhLnMpO2EuSyYmYS5nLnNldFRpbWVvdXQoYS5LKTt2YXIgYz1hLmc7YT1hLmxhO2MuSz0xO2Mudj1qYyhOKGIpKTtjLnM9bnVsbDtjLlU9ITA7a2MoYyxhKTt9ay5hYj1mdW5jdGlvbigpe251bGwhPXRoaXMudiYmKHRoaXMudj1udWxsLEFjKHRoaXMpLEJjKHRoaXMpLEooMTkpKTt9O2Z1bmN0aW9uIHpjKGEpe251bGwhPWEudiYmKGwuY2xlYXJUaW1lb3V0KGEudiksYS52PW51bGwpO31cbmZ1bmN0aW9uIHVjKGEsYil7dmFyIGM9bnVsbDtpZihhLmc9PWIpe3pjKGEpO3djKGEpO2EuZz1udWxsO3ZhciBkPTI7fWVsc2UgaWYoeWMoYS5pLGIpKWM9Yi5ELEZjKGEuaSxiKSxkPTE7ZWxzZSByZXR1cm47YS5JPWIuTjtpZigwIT1hLkcpaWYoYi5pKWlmKDE9PWQpe2M9Yi5zP2Iucy5sZW5ndGg6MDtiPURhdGUubm93KCktYi5GO3ZhciBlPWEuQztkPVNiKCk7RChkLG5ldyBWYihkLGMsYixlKSk7SGMoYSk7fWVsc2UgR2MoYSk7ZWxzZSBpZihlPWIubywzPT1lfHwwPT1lJiYwPGEuSXx8ISgxPT1kJiZOZChhLGIpfHwyPT1kJiZCYyhhKSkpc3dpdGNoKGMmJjA8Yy5sZW5ndGgmJihiPWEuaSxiLmk9Yi5pLmNvbmNhdChjKSksZSl7Y2FzZSAxOlEoYSw1KTticmVhaztjYXNlIDQ6UShhLDEwKTticmVhaztjYXNlIDM6UShhLDYpO2JyZWFrO2RlZmF1bHQ6UShhLDIpO319XG5mdW5jdGlvbiBPZChhLGIpe2xldCBjPWEuUGErTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKmEuJGEpO2Euanx8KGMqPTIpO3JldHVybiBjKmJ9ZnVuY3Rpb24gUShhLGIpe2EuaC5pbmZvKFwiRXJyb3IgY29kZSBcIitiKTtpZigyPT1iKXt2YXIgYz1udWxsO2EuaiYmKGM9bnVsbCk7dmFyIGQ9cShhLmpiLGEpO2N8fChjPW5ldyBVKFwiLy93d3cuZ29vZ2xlLmNvbS9pbWFnZXMvY2xlYXJkb3QuZ2lmXCIpLGwubG9jYXRpb24mJlwiaHR0cFwiPT1sLmxvY2F0aW9uLnByb3RvY29sfHxPYyhjLFwiaHR0cHNcIiksamMoYykpO25kKGMudG9TdHJpbmcoKSxkKTt9ZWxzZSBKKDIpO2EuRz0wO2EuaiYmYS5qLnZhKGIpO0xkKGEpO0pkKGEpO31rLmpiPWZ1bmN0aW9uKGEpe2E/KHRoaXMuaC5pbmZvKFwiU3VjY2Vzc2Z1bGx5IHBpbmdlZCBnb29nbGUuY29tXCIpLEooMikpOih0aGlzLmguaW5mbyhcIkZhaWxlZCB0byBwaW5nIGdvb2dsZS5jb21cIiksSigxKSk7fTtcbmZ1bmN0aW9uIExkKGEpe2EuRz0wO2EuST0tMTtpZihhLmope2lmKDAhPWpkKGEuaSkubGVuZ3RofHwwIT1hLmwubGVuZ3RoKWEuaS5pLmxlbmd0aD0wLHJhKGEubCksYS5sLmxlbmd0aD0wO2Euai51YSgpO319ZnVuY3Rpb24gRWMoYSxiLGMpe2xldCBkPWFkKGMpO2lmKFwiXCIhPWQuaSliJiZQYyhkLGIrXCIuXCIrZC5pKSxRYyhkLGQubSk7ZWxzZSB7Y29uc3QgZT1sLmxvY2F0aW9uO2Q9YmQoZS5wcm90b2NvbCxiP2IrXCIuXCIrZS5ob3N0bmFtZTplLmhvc3RuYW1lLCtlLnBvcnQsYyk7fWEuYWEmJnhhKGEuYWEsZnVuY3Rpb24oZSxmKXtSKGQsZixlKTt9KTtiPWEuRDtjPWEuc2E7YiYmYyYmUihkLGIsYyk7UihkLFwiVkVSXCIsYS5tYSk7S2QoYSxkKTtyZXR1cm4gZH1cbmZ1bmN0aW9uIG5jKGEsYixjKXtpZihiJiYhYS5IKXRocm93IEVycm9yKFwiQ2FuJ3QgY3JlYXRlIHNlY29uZGFyeSBkb21haW4gY2FwYWJsZSBYaHJJbyBvYmplY3QuXCIpO2I9YyYmYS5CYSYmIWEucWE/bmV3IFgobmV3IHBkKHtpYjohMH0pKTpuZXcgWChhLnFhKTtiLkw9YS5IO3JldHVybiBifWZ1bmN0aW9uIFNkKCl7fWs9U2QucHJvdG90eXBlO2sueGE9ZnVuY3Rpb24oKXt9O2sud2E9ZnVuY3Rpb24oKXt9O2sudmE9ZnVuY3Rpb24oKXt9O2sudWE9ZnVuY3Rpb24oKXt9O2suT2E9ZnVuY3Rpb24oKXt9O2Z1bmN0aW9uIFRkKCl7aWYoeSYmISgxMDw9TnVtYmVyKFVhKSkpdGhyb3cgRXJyb3IoXCJFbnZpcm9ubWVudGFsIGVycm9yOiBubyBhdmFpbGFibGUgdHJhbnNwb3J0LlwiKTt9VGQucHJvdG90eXBlLmc9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IFkoYSxiKX07XG5mdW5jdGlvbiBZKGEsYil7Qy5jYWxsKHRoaXMpO3RoaXMuZz1uZXcgSWQoYik7dGhpcy5sPWE7dGhpcy5oPWImJmIubWVzc2FnZVVybFBhcmFtc3x8bnVsbDthPWImJmIubWVzc2FnZUhlYWRlcnN8fG51bGw7YiYmYi5jbGllbnRQcm90b2NvbEhlYWRlclJlcXVpcmVkJiYoYT9hW1wiWC1DbGllbnQtUHJvdG9jb2xcIl09XCJ3ZWJjaGFubmVsXCI6YT17XCJYLUNsaWVudC1Qcm90b2NvbFwiOlwid2ViY2hhbm5lbFwifSk7dGhpcy5nLnM9YTthPWImJmIuaW5pdE1lc3NhZ2VIZWFkZXJzfHxudWxsO2ImJmIubWVzc2FnZUNvbnRlbnRUeXBlJiYoYT9hW1wiWC1XZWJDaGFubmVsLUNvbnRlbnQtVHlwZVwiXT1iLm1lc3NhZ2VDb250ZW50VHlwZTphPXtcIlgtV2ViQ2hhbm5lbC1Db250ZW50LVR5cGVcIjpiLm1lc3NhZ2VDb250ZW50VHlwZX0pO2ImJmIueWEmJihhP2FbXCJYLVdlYkNoYW5uZWwtQ2xpZW50LVByb2ZpbGVcIl09Yi55YTphPXtcIlgtV2ViQ2hhbm5lbC1DbGllbnQtUHJvZmlsZVwiOmIueWF9KTt0aGlzLmcuUD1cbmE7KGE9YiYmYi5odHRwSGVhZGVyc092ZXJ3cml0ZVBhcmFtKSYmIXNhKGEpJiYodGhpcy5nLm89YSk7dGhpcy5BPWImJmIuc3VwcG9ydHNDcm9zc0RvbWFpblhocnx8ITE7dGhpcy52PWImJmIuc2VuZFJhd0pzb258fCExOyhiPWImJmIuaHR0cFNlc3Npb25JZFBhcmFtKSYmIXNhKGIpJiYodGhpcy5nLkQ9YixhPXRoaXMuaCxudWxsIT09YSYmYiBpbiBhJiYoYT10aGlzLmgsYiBpbiBhJiZkZWxldGUgYVtiXSkpO3RoaXMuaj1uZXcgWih0aGlzKTt9dChZLEMpO1kucHJvdG90eXBlLm09ZnVuY3Rpb24oKXt0aGlzLmcuaj10aGlzLmo7dGhpcy5BJiYodGhpcy5nLkg9ITApO3ZhciBhPXRoaXMuZyxiPXRoaXMubCxjPXRoaXMuaHx8dm9pZCAwO2EuV2EmJihhLmguaW5mbyhcIk9yaWdpbiBUcmlhbHMgZW5hYmxlZC5cIiksemIocShhLmhiLGEsYikpKTtKKDApO2EuVz1iO2EuYWE9Y3x8e307YS5OPWEuWDthLkY9RWMoYSxudWxsLGEuVyk7SGMoYSk7fTtZLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe0ljKHRoaXMuZyk7fTtcblkucHJvdG90eXBlLnU9ZnVuY3Rpb24oYSl7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhKXt2YXIgYj17fTtiLl9fZGF0YV9fPWE7TWQodGhpcy5nLGIpO31lbHNlIHRoaXMudj8oYj17fSxiLl9fZGF0YV9fPXJiKGEpLE1kKHRoaXMuZyxiKSk6TWQodGhpcy5nLGEpO307WS5wcm90b3R5cGUuTT1mdW5jdGlvbigpe3RoaXMuZy5qPW51bGw7ZGVsZXRlIHRoaXMuajtJYyh0aGlzLmcpO2RlbGV0ZSB0aGlzLmc7WS5aLk0uY2FsbCh0aGlzKTt9O2Z1bmN0aW9uIFVkKGEpe2FjLmNhbGwodGhpcyk7dmFyIGI9YS5fX3NtX187aWYoYil7YTp7Zm9yKGNvbnN0IGMgaW4gYil7YT1jO2JyZWFrIGF9YT12b2lkIDA7fWlmKHRoaXMuaT1hKWE9dGhpcy5pLGI9bnVsbCE9PWImJmEgaW4gYj9iW2FdOnZvaWQgMDt0aGlzLmRhdGE9Yjt9ZWxzZSB0aGlzLmRhdGE9YTt9dChVZCxhYyk7ZnVuY3Rpb24gVmQoKXtiYy5jYWxsKHRoaXMpO3RoaXMuc3RhdHVzPTE7fXQoVmQsYmMpO2Z1bmN0aW9uIFooYSl7dGhpcy5nPWE7fVxudChaLFNkKTtaLnByb3RvdHlwZS54YT1mdW5jdGlvbigpe0QodGhpcy5nLFwiYVwiKTt9O1oucHJvdG90eXBlLndhPWZ1bmN0aW9uKGEpe0QodGhpcy5nLG5ldyBVZChhKSk7fTtaLnByb3RvdHlwZS52YT1mdW5jdGlvbihhKXtEKHRoaXMuZyxuZXcgVmQoYSkpO307Wi5wcm90b3R5cGUudWE9ZnVuY3Rpb24oKXtEKHRoaXMuZyxcImJcIik7fTsvKlxuXG4gQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuXG4gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG4gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuVGQucHJvdG90eXBlLmNyZWF0ZVdlYkNoYW5uZWw9VGQucHJvdG90eXBlLmc7WS5wcm90b3R5cGUuc2VuZD1ZLnByb3RvdHlwZS51O1kucHJvdG90eXBlLm9wZW49WS5wcm90b3R5cGUubTtZLnByb3RvdHlwZS5jbG9zZT1ZLnByb3RvdHlwZS5jbG9zZTtXYi5OT19FUlJPUj0wO1diLlRJTUVPVVQ9ODtXYi5IVFRQX0VSUk9SPTY7WGIuQ09NUExFVEU9XCJjb21wbGV0ZVwiOyRiLkV2ZW50VHlwZT1MO0wuT1BFTj1cImFcIjtMLkNMT1NFPVwiYlwiO0wuRVJST1I9XCJjXCI7TC5NRVNTQUdFPVwiZFwiO0MucHJvdG90eXBlLmxpc3Rlbj1DLnByb3RvdHlwZS5OO1gucHJvdG90eXBlLmxpc3Rlbk9uY2U9WC5wcm90b3R5cGUuTztYLnByb3RvdHlwZS5nZXRMYXN0RXJyb3I9WC5wcm90b3R5cGUuTGE7WC5wcm90b3R5cGUuZ2V0TGFzdEVycm9yQ29kZT1YLnByb3RvdHlwZS5EYTtYLnByb3RvdHlwZS5nZXRTdGF0dXM9WC5wcm90b3R5cGUuYmE7WC5wcm90b3R5cGUuZ2V0UmVzcG9uc2VKc29uPVgucHJvdG90eXBlLlFhO1xuWC5wcm90b3R5cGUuZ2V0UmVzcG9uc2VUZXh0PVgucHJvdG90eXBlLmdhO1gucHJvdG90eXBlLnNlbmQ9WC5wcm90b3R5cGUuZWE7dmFyIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQgPSBlc20uY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydD1mdW5jdGlvbigpe3JldHVybiBuZXcgVGR9O3ZhciBnZXRTdGF0RXZlbnRUYXJnZXQgPSBlc20uZ2V0U3RhdEV2ZW50VGFyZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIFNiKCl9O3ZhciBFcnJvckNvZGUgPSBlc20uRXJyb3JDb2RlPVdiO3ZhciBFdmVudFR5cGUgPSBlc20uRXZlbnRUeXBlPVhiO3ZhciBFdmVudCA9IGVzbS5FdmVudD1IO3ZhciBTdGF0ID0gZXNtLlN0YXQ9e3JiOjAsdWI6MSx2YjoyLE9iOjMsVGI6NCxRYjo1LFJiOjYsUGI6NyxOYjo4LFNiOjksUFJPWFk6MTAsTk9QUk9YWToxMSxMYjoxMixIYjoxMyxJYjoxNCxHYjoxNSxKYjoxNixLYjoxNyxuYjoxOCxtYjoxOSxvYjoyMH07dmFyIEZldGNoWG1sSHR0cEZhY3RvcnkgPSBlc20uRmV0Y2hYbWxIdHRwRmFjdG9yeT1wZDt2YXIgV2ViQ2hhbm5lbCA9IGVzbS5XZWJDaGFubmVsPSRiO1xudmFyIFhocklvID0gZXNtLlhocklvPVg7XG5cbmV4cG9ydCB7IEVycm9yQ29kZSwgRXZlbnQsIEV2ZW50VHlwZSwgRmV0Y2hYbWxIdHRwRmFjdG9yeSwgU3RhdCwgV2ViQ2hhbm5lbCwgWGhySW8sIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQsIGVzbSBhcyBkZWZhdWx0LCBnZXRTdGF0RXZlbnRUYXJnZXQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJpbXBvcnQgeyBFcnJvckZhY3RvcnksIGNvbnRhaW5zLCBkZWVwRXh0ZW5kLCBjcmVhdGVTdWJzY3JpYmUsIGlzQnJvd3NlciB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuaW1wb3J0ICogYXMgbW9kdWxhckFQSXMgZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBfYWRkQ29tcG9uZW50LCBkZWxldGVBcHAsIF9ERUZBVUxUX0VOVFJZX05BTUUsIF9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudCwgcmVnaXN0ZXJWZXJzaW9uIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tICdAZmlyZWJhc2UvbG9nZ2VyJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEdsb2JhbCBjb250ZXh0IG9iamVjdCBmb3IgYSBjb2xsZWN0aW9uIG9mIHNlcnZpY2VzIHVzaW5nXHJcbiAqIGEgc2hhcmVkIGF1dGhlbnRpY2F0aW9uIHN0YXRlLlxyXG4gKlxyXG4gKiBtYXJrZWQgYXMgaW50ZXJuYWwgYmVjYXVzZSBpdCByZWZlcmVuY2VzIGludGVybmFsIHR5cGVzIGV4cG9ydGVkIGZyb20gQGZpcmViYXNlL2FwcFxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNsYXNzIEZpcmViYXNlQXBwSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihfZGVsZWdhdGUsIGZpcmViYXNlKSB7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUgPSBfZGVsZWdhdGU7XHJcbiAgICAgICAgdGhpcy5maXJlYmFzZSA9IGZpcmViYXNlO1xyXG4gICAgICAgIC8vIGFkZCBpdHNlbGYgdG8gY29udGFpbmVyXHJcbiAgICAgICAgX2FkZENvbXBvbmVudChfZGVsZWdhdGUsIG5ldyBDb21wb25lbnQoJ2FwcC1jb21wYXQnLCAoKSA9PiB0aGlzLCBcIlBVQkxJQ1wiIC8qIFBVQkxJQyAqLykpO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gX2RlbGVnYXRlLmNvbnRhaW5lcjtcclxuICAgIH1cclxuICAgIGdldCBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDtcclxuICAgIH1cclxuICAgIHNldCBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUuYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkID0gdmFsO1xyXG4gICAgfVxyXG4gICAgZ2V0IG5hbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLm5hbWU7XHJcbiAgICB9XHJcbiAgICBnZXQgb3B0aW9ucygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUub3B0aW9ucztcclxuICAgIH1cclxuICAgIGRlbGV0ZSgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlbGVnYXRlLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICB9KS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5maXJlYmFzZS5JTlRFUk5BTC5yZW1vdmVBcHAodGhpcy5uYW1lKTtcclxuICAgICAgICAgICAgcmV0dXJuIGRlbGV0ZUFwcCh0aGlzLl9kZWxlZ2F0ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybiBhIHNlcnZpY2UgaW5zdGFuY2UgYXNzb2NpYXRlZCB3aXRoIHRoaXMgYXBwIChjcmVhdGluZyBpdFxyXG4gICAgICogb24gZGVtYW5kKSwgaWRlbnRpZmllZCBieSB0aGUgcGFzc2VkIGluc3RhbmNlSWRlbnRpZmllci5cclxuICAgICAqXHJcbiAgICAgKiBOT1RFOiBDdXJyZW50bHkgc3RvcmFnZSBhbmQgZnVuY3Rpb25zIGFyZSB0aGUgb25seSBvbmVzIHRoYXQgYXJlIGxldmVyYWdpbmcgdGhpc1xyXG4gICAgICogZnVuY3Rpb25hbGl0eS4gVGhleSBpbnZva2UgaXQgYnkgY2FsbGluZzpcclxuICAgICAqXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiBmaXJlYmFzZS5hcHAoKS5zdG9yYWdlKCdTVE9SQUdFIEJVQ0tFVCBJRCcpXHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBUaGUgc2VydmljZSBuYW1lIGlzIHBhc3NlZCB0byB0aGlzIGFscmVhZHlcclxuICAgICAqIEBpbnRlcm5hbFxyXG4gICAgICovXHJcbiAgICBfZ2V0U2VydmljZShuYW1lLCBpbnN0YW5jZUlkZW50aWZpZXIgPSBfREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBpbnN0YW5jZSBpZiBJbnN0YXRpYXRpb25Nb2RlIGlzIGBFWFBMSUNJVGAuXHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSB0aGlzLl9kZWxlZ2F0ZS5jb250YWluZXIuZ2V0UHJvdmlkZXIobmFtZSk7XHJcbiAgICAgICAgaWYgKCFwcm92aWRlci5pc0luaXRpYWxpemVkKCkgJiZcclxuICAgICAgICAgICAgKChfYSA9IHByb3ZpZGVyLmdldENvbXBvbmVudCgpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaW5zdGFudGlhdGlvbk1vZGUpID09PSBcIkVYUExJQ0lUXCIgLyogRVhQTElDSVQgKi8pIHtcclxuICAgICAgICAgICAgcHJvdmlkZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBnZXRJbW1lZGlhdGUgd2lsbCBhbHdheXMgc3VjY2VlZCBiZWNhdXNlIF9nZXRTZXJ2aWNlIGlzIG9ubHkgY2FsbGVkIGZvciByZWdpc3RlcmVkIGNvbXBvbmVudHMuXHJcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyLmdldEltbWVkaWF0ZSh7XHJcbiAgICAgICAgICAgIGlkZW50aWZpZXI6IGluc3RhbmNlSWRlbnRpZmllclxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmUgYSBzZXJ2aWNlIGluc3RhbmNlIGZyb20gdGhlIGNhY2hlLCBzbyB3ZSB3aWxsIGNyZWF0ZSBhIG5ldyBpbnN0YW5jZSBmb3IgdGhpcyBzZXJ2aWNlXHJcbiAgICAgKiB3aGVuIHBlb3BsZSB0cnkgdG8gZ2V0IGl0IGFnYWluLlxyXG4gICAgICpcclxuICAgICAqIE5PVEU6IGN1cnJlbnRseSBvbmx5IGZpcmVzdG9yZSB1c2VzIHRoaXMgZnVuY3Rpb25hbGl0eSB0byBzdXBwb3J0IGZpcmVzdG9yZSBzaHV0ZG93bi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgc2VydmljZSBuYW1lXHJcbiAgICAgKiBAcGFyYW0gaW5zdGFuY2VJZGVudGlmaWVyIGluc3RhbmNlIGlkZW50aWZpZXIgaW4gY2FzZSBtdWx0aXBsZSBpbnN0YW5jZXMgYXJlIGFsbG93ZWRcclxuICAgICAqIEBpbnRlcm5hbFxyXG4gICAgICovXHJcbiAgICBfcmVtb3ZlU2VydmljZUluc3RhbmNlKG5hbWUsIGluc3RhbmNlSWRlbnRpZmllciA9IF9ERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZS5jb250YWluZXJcclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgLmdldFByb3ZpZGVyKG5hbWUpXHJcbiAgICAgICAgICAgIC5jbGVhckluc3RhbmNlKGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBjb21wb25lbnQgdGhlIGNvbXBvbmVudCBiZWluZyBhZGRlZCB0byB0aGlzIGFwcCdzIGNvbnRhaW5lclxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIF9hZGRDb21wb25lbnQoY29tcG9uZW50KSB7XHJcbiAgICAgICAgX2FkZENvbXBvbmVudCh0aGlzLl9kZWxlZ2F0ZSwgY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIF9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBfYWRkT3JPdmVyd3JpdGVDb21wb25lbnQodGhpcy5fZGVsZWdhdGUsIGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxyXG4gICAgICAgICAgICBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQ6IHRoaXMuYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkLFxyXG4gICAgICAgICAgICBvcHRpb25zOiB0aGlzLm9wdGlvbnNcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcbi8vIFRPRE86IGludmVzdGlnYXRlIHdoeSB0aGUgZm9sbG93aW5nIG5lZWRzIHRvIGJlIGNvbW1lbnRlZCBvdXRcclxuLy8gUHJldmVudCBkZWFkLWNvZGUgZWxpbWluYXRpb24gb2YgdGhlc2UgbWV0aG9kcyB3L28gaW52YWxpZCBwcm9wZXJ0eVxyXG4vLyBjb3B5aW5nLlxyXG4vLyAoRmlyZWJhc2VBcHBJbXBsLnByb3RvdHlwZS5uYW1lICYmIEZpcmViYXNlQXBwSW1wbC5wcm90b3R5cGUub3B0aW9ucykgfHxcclxuLy8gICBGaXJlYmFzZUFwcEltcGwucHJvdG90eXBlLmRlbGV0ZSB8fFxyXG4vLyAgIGNvbnNvbGUubG9nKCdkYycpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBFUlJPUlMgPSB7XHJcbiAgICBbXCJuby1hcHBcIiAvKiBOT19BUFAgKi9dOiBcIk5vIEZpcmViYXNlIEFwcCAneyRhcHBOYW1lfScgaGFzIGJlZW4gY3JlYXRlZCAtIFwiICtcclxuICAgICAgICAnY2FsbCBGaXJlYmFzZSBBcHAuaW5pdGlhbGl6ZUFwcCgpJyxcclxuICAgIFtcImludmFsaWQtYXBwLWFyZ3VtZW50XCIgLyogSU5WQUxJRF9BUFBfQVJHVU1FTlQgKi9dOiAnZmlyZWJhc2UueyRhcHBOYW1lfSgpIHRha2VzIGVpdGhlciBubyBhcmd1bWVudCBvciBhICcgK1xyXG4gICAgICAgICdGaXJlYmFzZSBBcHAgaW5zdGFuY2UuJ1xyXG59O1xyXG5jb25zdCBFUlJPUl9GQUNUT1JZID0gbmV3IEVycm9yRmFjdG9yeSgnYXBwLWNvbXBhdCcsICdGaXJlYmFzZScsIEVSUk9SUyk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBCZWNhdXNlIGF1dGggY2FuJ3Qgc2hhcmUgY29kZSB3aXRoIG90aGVyIGNvbXBvbmVudHMsIHdlIGF0dGFjaCB0aGUgdXRpbGl0eSBmdW5jdGlvbnNcclxuICogaW4gYW4gaW50ZXJuYWwgbmFtZXNwYWNlIHRvIHNoYXJlIGNvZGUuXHJcbiAqIFRoaXMgZnVuY3Rpb24gcmV0dXJuIGEgZmlyZWJhc2UgbmFtZXNwYWNlIG9iamVjdCB3aXRob3V0XHJcbiAqIGFueSB1dGlsaXR5IGZ1bmN0aW9ucywgc28gaXQgY2FuIGJlIHNoYXJlZCBiZXR3ZWVuIHRoZSByZWd1bGFyIGZpcmViYXNlTmFtZXNwYWNlIGFuZFxyXG4gKiB0aGUgbGl0ZSB2ZXJzaW9uLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlRmlyZWJhc2VOYW1lc3BhY2VDb3JlKGZpcmViYXNlQXBwSW1wbCkge1xyXG4gICAgY29uc3QgYXBwcyA9IHt9O1xyXG4gICAgLy8gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgIC8vIGNvbnN0IGNvbXBvbmVudHMgPSBuZXcgTWFwPHN0cmluZywgQ29tcG9uZW50PGFueT4+KCk7XHJcbiAgICAvLyBBIG5hbWVzcGFjZSBpcyBhIHBsYWluIEphdmFTY3JpcHQgT2JqZWN0LlxyXG4gICAgY29uc3QgbmFtZXNwYWNlID0ge1xyXG4gICAgICAgIC8vIEhhY2sgdG8gcHJldmVudCBCYWJlbCBmcm9tIG1vZGlmeWluZyB0aGUgb2JqZWN0IHJldHVybmVkXHJcbiAgICAgICAgLy8gYXMgdGhlIGZpcmViYXNlIG5hbWVzcGFjZS5cclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgX19lc01vZHVsZTogdHJ1ZSxcclxuICAgICAgICBpbml0aWFsaXplQXBwOiBpbml0aWFsaXplQXBwQ29tcGF0LFxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBhcHAsXHJcbiAgICAgICAgcmVnaXN0ZXJWZXJzaW9uOiBtb2R1bGFyQVBJcy5yZWdpc3RlclZlcnNpb24sXHJcbiAgICAgICAgc2V0TG9nTGV2ZWw6IG1vZHVsYXJBUElzLnNldExvZ0xldmVsLFxyXG4gICAgICAgIG9uTG9nOiBtb2R1bGFyQVBJcy5vbkxvZyxcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgYXBwczogbnVsbCxcclxuICAgICAgICBTREtfVkVSU0lPTjogbW9kdWxhckFQSXMuU0RLX1ZFUlNJT04sXHJcbiAgICAgICAgSU5URVJOQUw6IHtcclxuICAgICAgICAgICAgcmVnaXN0ZXJDb21wb25lbnQ6IHJlZ2lzdGVyQ29tcG9uZW50Q29tcGF0LFxyXG4gICAgICAgICAgICByZW1vdmVBcHAsXHJcbiAgICAgICAgICAgIHVzZUFzU2VydmljZSxcclxuICAgICAgICAgICAgbW9kdWxhckFQSXNcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLy8gSW5qZWN0IGEgY2lyY3VsYXIgZGVmYXVsdCBleHBvcnQgdG8gYWxsb3cgQmFiZWwgdXNlcnMgd2hvIHdlcmUgcHJldmlvdXNseVxyXG4gICAgLy8gdXNpbmc6XHJcbiAgICAvL1xyXG4gICAgLy8gICBpbXBvcnQgZmlyZWJhc2UgZnJvbSAnZmlyZWJhc2UnO1xyXG4gICAgLy8gICB3aGljaCBiZWNvbWVzOiB2YXIgZmlyZWJhc2UgPSByZXF1aXJlKCdmaXJlYmFzZScpLmRlZmF1bHQ7XHJcbiAgICAvL1xyXG4gICAgLy8gaW5zdGVhZCBvZlxyXG4gICAgLy9cclxuICAgIC8vICAgaW1wb3J0ICogYXMgZmlyZWJhc2UgZnJvbSAnZmlyZWJhc2UnO1xyXG4gICAgLy8gICB3aGljaCBiZWNvbWVzOiB2YXIgZmlyZWJhc2UgPSByZXF1aXJlKCdmaXJlYmFzZScpO1xyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgIG5hbWVzcGFjZVsnZGVmYXVsdCddID0gbmFtZXNwYWNlO1xyXG4gICAgLy8gZmlyZWJhc2UuYXBwcyBpcyBhIHJlYWQtb25seSBnZXR0ZXIuXHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmFtZXNwYWNlLCAnYXBwcycsIHtcclxuICAgICAgICBnZXQ6IGdldEFwcHNcclxuICAgIH0pO1xyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxsZWQgYnkgQXBwLmRlbGV0ZSgpIC0gYnV0IGJlZm9yZSBhbnkgc2VydmljZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBBcHBcclxuICAgICAqIGFyZSBkZWxldGVkLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiByZW1vdmVBcHAobmFtZSkge1xyXG4gICAgICAgIGRlbGV0ZSBhcHBzW25hbWVdO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIEFwcCBvYmplY3QgZm9yIGEgZ2l2ZW4gbmFtZSAob3IgREVGQVVMVCkuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGFwcChuYW1lKSB7XHJcbiAgICAgICAgbmFtZSA9IG5hbWUgfHwgbW9kdWxhckFQSXMuX0RFRkFVTFRfRU5UUllfTkFNRTtcclxuICAgICAgICBpZiAoIWNvbnRhaW5zKGFwcHMsIG5hbWUpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm8tYXBwXCIgLyogTk9fQVBQICovLCB7IGFwcE5hbWU6IG5hbWUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhcHBzW25hbWVdO1xyXG4gICAgfVxyXG4gICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgYXBwWydBcHAnXSA9IGZpcmViYXNlQXBwSW1wbDtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgbmV3IEFwcCBpbnN0YW5jZSAobmFtZSBtdXN0IGJlIHVuaXF1ZSkuXHJcbiAgICAgKlxyXG4gICAgICogVGhpcyBmdW5jdGlvbiBpcyBpZGVtcG90ZW50LiBJdCBjYW4gYmUgY2FsbGVkIG1vcmUgdGhhbiBvbmNlIGFuZCByZXR1cm4gdGhlIHNhbWUgaW5zdGFuY2UgdXNpbmcgdGhlIHNhbWUgb3B0aW9ucyBhbmQgY29uZmlnLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBpbml0aWFsaXplQXBwQ29tcGF0KG9wdGlvbnMsIHJhd0NvbmZpZyA9IHt9KSB7XHJcbiAgICAgICAgY29uc3QgYXBwID0gbW9kdWxhckFQSXMuaW5pdGlhbGl6ZUFwcChvcHRpb25zLCByYXdDb25maWcpO1xyXG4gICAgICAgIGlmIChjb250YWlucyhhcHBzLCBhcHAubmFtZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFwcHNbYXBwLm5hbWVdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBhcHBDb21wYXQgPSBuZXcgZmlyZWJhc2VBcHBJbXBsKGFwcCwgbmFtZXNwYWNlKTtcclxuICAgICAgICBhcHBzW2FwcC5uYW1lXSA9IGFwcENvbXBhdDtcclxuICAgICAgICByZXR1cm4gYXBwQ29tcGF0O1xyXG4gICAgfVxyXG4gICAgLypcclxuICAgICAqIFJldHVybiBhbiBhcnJheSBvZiBhbGwgdGhlIG5vbi1kZWxldGVkIEZpcmViYXNlQXBwcy5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZ2V0QXBwcygpIHtcclxuICAgICAgICAvLyBNYWtlIGEgY29weSBzbyBjYWxsZXIgY2Fubm90IG11dGF0ZSB0aGUgYXBwcyBsaXN0LlxyXG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhhcHBzKS5tYXAobmFtZSA9PiBhcHBzW25hbWVdKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlZ2lzdGVyQ29tcG9uZW50Q29tcGF0KGNvbXBvbmVudCkge1xyXG4gICAgICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSBjb21wb25lbnQubmFtZTtcclxuICAgICAgICBjb25zdCBjb21wb25lbnROYW1lV2l0aG91dENvbXBhdCA9IGNvbXBvbmVudE5hbWUucmVwbGFjZSgnLWNvbXBhdCcsICcnKTtcclxuICAgICAgICBpZiAobW9kdWxhckFQSXMuX3JlZ2lzdGVyQ29tcG9uZW50KGNvbXBvbmVudCkgJiZcclxuICAgICAgICAgICAgY29tcG9uZW50LnR5cGUgPT09IFwiUFVCTElDXCIgLyogUFVCTElDICovKSB7XHJcbiAgICAgICAgICAgIC8vIGNyZWF0ZSBzZXJ2aWNlIG5hbWVzcGFjZSBmb3IgcHVibGljIGNvbXBvbmVudHNcclxuICAgICAgICAgICAgLy8gVGhlIFNlcnZpY2UgbmFtZXNwYWNlIGlzIGFuIGFjY2Vzc29yIGZ1bmN0aW9uIC4uLlxyXG4gICAgICAgICAgICBjb25zdCBzZXJ2aWNlTmFtZXNwYWNlID0gKGFwcEFyZyA9IGFwcCgpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhcHBBcmdbY29tcG9uZW50TmFtZVdpdGhvdXRDb21wYXRdICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSW52YWxpZCBhcmd1bWVudC5cclxuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGhhcHBlbnMgaW4gdGhlIGZvbGxvd2luZyBjYXNlOiBmaXJlYmFzZS5zdG9yYWdlKCdnczovJylcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImludmFsaWQtYXBwLWFyZ3VtZW50XCIgLyogSU5WQUxJRF9BUFBfQVJHVU1FTlQgKi8sIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwTmFtZTogY29tcG9uZW50TmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gRm9yd2FyZCBzZXJ2aWNlIGluc3RhbmNlIGxvb2t1cCB0byB0aGUgRmlyZWJhc2VBcHAuXHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFwcEFyZ1tjb21wb25lbnROYW1lV2l0aG91dENvbXBhdF0oKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gLi4uIGFuZCBhIGNvbnRhaW5lciBmb3Igc2VydmljZS1sZXZlbCBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAgICBpZiAoY29tcG9uZW50LnNlcnZpY2VQcm9wcyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBkZWVwRXh0ZW5kKHNlcnZpY2VOYW1lc3BhY2UsIGNvbXBvbmVudC5zZXJ2aWNlUHJvcHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgIG5hbWVzcGFjZVtjb21wb25lbnROYW1lV2l0aG91dENvbXBhdF0gPSBzZXJ2aWNlTmFtZXNwYWNlO1xyXG4gICAgICAgICAgICAvLyBQYXRjaCB0aGUgRmlyZWJhc2VBcHBJbXBsIHByb3RvdHlwZVxyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICBmaXJlYmFzZUFwcEltcGwucHJvdG90eXBlW2NvbXBvbmVudE5hbWVXaXRob3V0Q29tcGF0XSA9XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBUaGUgZXNsaW50IGRpc2FibGUgY2FuIGJlIHJlbW92ZWQgYW5kIHRoZSAnaWdub3JlUmVzdEFyZ3MnXHJcbiAgICAgICAgICAgICAgICAvLyBvcHRpb24gYWRkZWQgdG8gdGhlIG5vLWV4cGxpY2l0LWFueSBydWxlIHdoZW4gRVNsaW50IHJlbGVhc2VzIGl0LlxyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uICguLi5hcmdzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VydmljZUZ4biA9IHRoaXMuX2dldFNlcnZpY2UuYmluZCh0aGlzLCBjb21wb25lbnROYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VydmljZUZ4bi5hcHBseSh0aGlzLCBjb21wb25lbnQubXVsdGlwbGVJbnN0YW5jZXMgPyBhcmdzIDogW10pO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNvbXBvbmVudC50eXBlID09PSBcIlBVQkxJQ1wiIC8qIFBVQkxJQyAqL1xyXG4gICAgICAgICAgICA/IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICBuYW1lc3BhY2VbY29tcG9uZW50TmFtZVdpdGhvdXRDb21wYXRdXHJcbiAgICAgICAgICAgIDogbnVsbDtcclxuICAgIH1cclxuICAgIC8vIE1hcCB0aGUgcmVxdWVzdGVkIHNlcnZpY2UgdG8gYSByZWdpc3RlcmVkIHNlcnZpY2UgbmFtZVxyXG4gICAgLy8gKHVzZWQgdG8gbWFwIGF1dGggdG8gc2VydmVyQXV0aCBzZXJ2aWNlIHdoZW4gbmVlZGVkKS5cclxuICAgIGZ1bmN0aW9uIHVzZUFzU2VydmljZShhcHAsIG5hbWUpIHtcclxuICAgICAgICBpZiAobmFtZSA9PT0gJ3NlcnZlckF1dGgnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB1c2VTZXJ2aWNlID0gbmFtZTtcclxuICAgICAgICByZXR1cm4gdXNlU2VydmljZTtcclxuICAgIH1cclxuICAgIHJldHVybiBuYW1lc3BhY2U7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybiBhIGZpcmViYXNlIG5hbWVzcGFjZSBvYmplY3QuXHJcbiAqXHJcbiAqIEluIHByb2R1Y3Rpb24sIHRoaXMgd2lsbCBiZSBjYWxsZWQgZXhhY3RseSBvbmNlIGFuZCB0aGUgcmVzdWx0XHJcbiAqIGFzc2lnbmVkIHRvIHRoZSAnZmlyZWJhc2UnIGdsb2JhbC4gIEl0IG1heSBiZSBjYWxsZWQgbXVsdGlwbGUgdGltZXNcclxuICogaW4gdW5pdCB0ZXN0cy5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZUZpcmViYXNlTmFtZXNwYWNlKCkge1xyXG4gICAgY29uc3QgbmFtZXNwYWNlID0gY3JlYXRlRmlyZWJhc2VOYW1lc3BhY2VDb3JlKEZpcmViYXNlQXBwSW1wbCk7XHJcbiAgICBuYW1lc3BhY2UuSU5URVJOQUwgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG5hbWVzcGFjZS5JTlRFUk5BTCksIHsgY3JlYXRlRmlyZWJhc2VOYW1lc3BhY2UsXHJcbiAgICAgICAgZXh0ZW5kTmFtZXNwYWNlLFxyXG4gICAgICAgIGNyZWF0ZVN1YnNjcmliZSxcclxuICAgICAgICBFcnJvckZhY3RvcnksXHJcbiAgICAgICAgZGVlcEV4dGVuZCB9KTtcclxuICAgIC8qKlxyXG4gICAgICogUGF0Y2ggdGhlIHRvcC1sZXZlbCBmaXJlYmFzZSBuYW1lc3BhY2Ugd2l0aCBhZGRpdGlvbmFsIHByb3BlcnRpZXMuXHJcbiAgICAgKlxyXG4gICAgICogZmlyZWJhc2UuSU5URVJOQUwuZXh0ZW5kTmFtZXNwYWNlKClcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZXh0ZW5kTmFtZXNwYWNlKHByb3BzKSB7XHJcbiAgICAgICAgZGVlcEV4dGVuZChuYW1lc3BhY2UsIHByb3BzKTtcclxuICAgIH1cclxuICAgIHJldHVybiBuYW1lc3BhY2U7XHJcbn1cclxuY29uc3QgZmlyZWJhc2UkMSA9IGNyZWF0ZUZpcmViYXNlTmFtZXNwYWNlKCk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IGxvZ2dlciA9IG5ldyBMb2dnZXIoJ0BmaXJlYmFzZS9hcHAtY29tcGF0Jyk7XG5cbmNvbnN0IG5hbWUgPSBcIkBmaXJlYmFzZS9hcHAtY29tcGF0XCI7XG5jb25zdCB2ZXJzaW9uID0gXCIwLjEuMTJcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJDb3JlQ29tcG9uZW50cyh2YXJpYW50KSB7XHJcbiAgICAvLyBSZWdpc3RlciBgYXBwYCBwYWNrYWdlLlxyXG4gICAgcmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24sIHZhcmlhbnQpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIEZpcmViYXNlIExpdGUgZGV0ZWN0aW9uXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbmlmIChpc0Jyb3dzZXIoKSAmJiBzZWxmLmZpcmViYXNlICE9PSB1bmRlZmluZWQpIHtcclxuICAgIGxvZ2dlci53YXJuKGBcbiAgICBXYXJuaW5nOiBGaXJlYmFzZSBpcyBhbHJlYWR5IGRlZmluZWQgaW4gdGhlIGdsb2JhbCBzY29wZS4gUGxlYXNlIG1ha2Ugc3VyZVxuICAgIEZpcmViYXNlIGxpYnJhcnkgaXMgb25seSBsb2FkZWQgb25jZS5cbiAgYCk7XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcclxuICAgIGNvbnN0IHNka1ZlcnNpb24gPSBzZWxmLmZpcmViYXNlLlNES19WRVJTSU9OO1xyXG4gICAgaWYgKHNka1ZlcnNpb24gJiYgc2RrVmVyc2lvbi5pbmRleE9mKCdMSVRFJykgPj0gMCkge1xyXG4gICAgICAgIGxvZ2dlci53YXJuKGBcbiAgICBXYXJuaW5nOiBZb3UgYXJlIHRyeWluZyB0byBsb2FkIEZpcmViYXNlIHdoaWxlIHVzaW5nIEZpcmViYXNlIFBlcmZvcm1hbmNlIHN0YW5kYWxvbmUgc2NyaXB0LlxuICAgIFlvdSBzaG91bGQgbG9hZCBGaXJlYmFzZSBQZXJmb3JtYW5jZSB3aXRoIHRoaXMgaW5zdGFuY2Ugb2YgRmlyZWJhc2UgdG8gYXZvaWQgbG9hZGluZyBkdXBsaWNhdGUgY29kZS5cbiAgICBgKTtcclxuICAgIH1cclxufVxyXG5jb25zdCBmaXJlYmFzZSA9IGZpcmViYXNlJDE7XHJcbnJlZ2lzdGVyQ29yZUNvbXBvbmVudHMoKTtcblxuZXhwb3J0IHsgZmlyZWJhc2UgYXMgZGVmYXVsdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsInZhciBnO1xuXG4vLyBUaGlzIHdvcmtzIGluIG5vbi1zdHJpY3QgbW9kZVxuZyA9IChmdW5jdGlvbigpIHtcblx0cmV0dXJuIHRoaXM7XG59KSgpO1xuXG50cnkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUClcblx0ZyA9IGcgfHwgbmV3IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKTtcbn0gY2F0Y2ggKGUpIHtcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcblx0aWYgKHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIpIGcgPSB3aW5kb3c7XG59XG5cbi8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi5cbi8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzXG4vLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59XG5cbm1vZHVsZS5leHBvcnRzID0gZztcbiIsIi8vIFVuaXF1ZSBJRCBjcmVhdGlvbiByZXF1aXJlcyBhIGhpZ2ggcXVhbGl0eSByYW5kb20gIyBnZW5lcmF0b3IuICBJbiB0aGVcbi8vIGJyb3dzZXIgdGhpcyBpcyBhIGxpdHRsZSBjb21wbGljYXRlZCBkdWUgdG8gdW5rbm93biBxdWFsaXR5IG9mIE1hdGgucmFuZG9tKClcbi8vIGFuZCBpbmNvbnNpc3RlbnQgc3VwcG9ydCBmb3IgdGhlIGBjcnlwdG9gIEFQSS4gIFdlIGRvIHRoZSBiZXN0IHdlIGNhbiB2aWFcbi8vIGZlYXR1cmUtZGV0ZWN0aW9uXG5cbi8vIGdldFJhbmRvbVZhbHVlcyBuZWVkcyB0byBiZSBpbnZva2VkIGluIGEgY29udGV4dCB3aGVyZSBcInRoaXNcIiBpcyBhIENyeXB0b1xuLy8gaW1wbGVtZW50YXRpb24uIEFsc28sIGZpbmQgdGhlIGNvbXBsZXRlIGltcGxlbWVudGF0aW9uIG9mIGNyeXB0byBvbiBJRTExLlxudmFyIGdldFJhbmRvbVZhbHVlcyA9ICh0eXBlb2YoY3J5cHRvKSAhPSAndW5kZWZpbmVkJyAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMuYmluZChjcnlwdG8pKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICh0eXBlb2YobXNDcnlwdG8pICE9ICd1bmRlZmluZWQnICYmIHR5cGVvZiB3aW5kb3cubXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzID09ICdmdW5jdGlvbicgJiYgbXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQobXNDcnlwdG8pKTtcblxuaWYgKGdldFJhbmRvbVZhbHVlcykge1xuICAvLyBXSEFUV0cgY3J5cHRvIFJORyAtIGh0dHA6Ly93aWtpLndoYXR3Zy5vcmcvd2lraS9DcnlwdG9cbiAgdmFyIHJuZHM4ID0gbmV3IFVpbnQ4QXJyYXkoMTYpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmXG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB3aGF0d2dSTkcoKSB7XG4gICAgZ2V0UmFuZG9tVmFsdWVzKHJuZHM4KTtcbiAgICByZXR1cm4gcm5kczg7XG4gIH07XG59IGVsc2Uge1xuICAvLyBNYXRoLnJhbmRvbSgpLWJhc2VkIChSTkcpXG4gIC8vXG4gIC8vIElmIGFsbCBlbHNlIGZhaWxzLCB1c2UgTWF0aC5yYW5kb20oKS4gIEl0J3MgZmFzdCwgYnV0IGlzIG9mIHVuc3BlY2lmaWVkXG4gIC8vIHF1YWxpdHkuXG4gIHZhciBybmRzID0gbmV3IEFycmF5KDE2KTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIG1hdGhSTkcoKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIHI7IGkgPCAxNjsgaSsrKSB7XG4gICAgICBpZiAoKGkgJiAweDAzKSA9PT0gMCkgciA9IE1hdGgucmFuZG9tKCkgKiAweDEwMDAwMDAwMDtcbiAgICAgIHJuZHNbaV0gPSByID4+PiAoKGkgJiAweDAzKSA8PCAzKSAmIDB4ZmY7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJuZHM7XG4gIH07XG59XG4iLCIvKipcbiAqIENvbnZlcnQgYXJyYXkgb2YgMTYgYnl0ZSB2YWx1ZXMgdG8gVVVJRCBzdHJpbmcgZm9ybWF0IG9mIHRoZSBmb3JtOlxuICogWFhYWFhYWFgtWFhYWC1YWFhYLVhYWFgtWFhYWFhYWFhYWFhYXG4gKi9cbnZhciBieXRlVG9IZXggPSBbXTtcbmZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyArK2kpIHtcbiAgYnl0ZVRvSGV4W2ldID0gKGkgKyAweDEwMCkudG9TdHJpbmcoMTYpLnN1YnN0cigxKTtcbn1cblxuZnVuY3Rpb24gYnl0ZXNUb1V1aWQoYnVmLCBvZmZzZXQpIHtcbiAgdmFyIGkgPSBvZmZzZXQgfHwgMDtcbiAgdmFyIGJ0aCA9IGJ5dGVUb0hleDtcbiAgLy8gam9pbiB1c2VkIHRvIGZpeCBtZW1vcnkgaXNzdWUgY2F1c2VkIGJ5IGNvbmNhdGVuYXRpb246IGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTMxNzUjYzRcbiAgcmV0dXJuIChbXG4gICAgYnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSxcbiAgICBidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLCAnLScsXG4gICAgYnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSwgJy0nLFxuICAgIGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sICctJyxcbiAgICBidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLCAnLScsXG4gICAgYnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSxcbiAgICBidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLFxuICAgIGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV1cbiAgXSkuam9pbignJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYnl0ZXNUb1V1aWQ7XG4iLCIvKlxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICBodHRwczovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0ICogYXMgdXVpZCBmcm9tIFwidXVpZFwiO1xuXG5pbXBvcnQgZmlyZWJhc2UgZnJvbSBcImZpcmViYXNlL2NvbXBhdC9hcHBcIjtcbmltcG9ydCBcImZpcmViYXNlL2NvbXBhdC9hdXRoXCI7XG5pbXBvcnQgXCJmaXJlYmFzZS9jb21wYXQvZmlyZXN0b3JlXCI7XG5pbXBvcnQgeyBkb2MsIGdldERvYywgc2V0RG9jLCBvblNuYXBzaG90IH0gZnJvbSBcImZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuXG5jb25zdCBTSEFSRF9DT0xMRUNUSU9OX0lEID0gXCJfY291bnRlcl9zaGFyZHNfXCI7XG5jb25zdCBDT09LSUVfTkFNRSA9IFwiRklSRVNUT1JFX0NPVU5URVJfU0hBUkRfSURcIjtcblxuZXhwb3J0IGludGVyZmFjZSBDb3VudGVyU25hcHNob3Qge1xuICBleGlzdHM6IGJvb2xlYW47XG4gIGRhdGE6ICgpID0+IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIENvdW50ZXIge1xuICBwcml2YXRlIGRiOiBmaXJlYmFzZS5maXJlc3RvcmUuRmlyZXN0b3JlID0gbnVsbDtcbiAgcHJpdmF0ZSBzaGFyZElkID0gXCJcIjtcbiAgcHJpdmF0ZSBzaGFyZHM6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0gPSB7fTtcbiAgcHJpdmF0ZSBub3RpZnlQcm9taXNlOiBQcm9taXNlPHZvaWQ+ID0gbnVsbDtcblxuICAvKipcbiAgICogQ29uc3RydWN0cyBhIHNoYXJkZWQgY291bnRlciBvYmplY3QgdGhhdCByZWZlcmVuY2VzIHRvIGEgZmllbGRcbiAgICogaW4gYSBkb2N1bWVudCB0aGF0IGlzIGEgY291bnRlci5cbiAgICpcbiAgICogQHBhcmFtIGRvYyBBIHJlZmVyZW5jZSB0byBhIGRvY3VtZW50IHdpdGggYSBjb3VudGVyIGZpZWxkLlxuICAgKiBAcGFyYW0gZmllbGQgQSBwYXRoIHRvIGEgY291bnRlciBmaWVsZCBpbiB0aGUgYWJvdmUgZG9jdW1lbnQuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGRvYzogZmlyZWJhc2UuZmlyZXN0b3JlLkRvY3VtZW50UmVmZXJlbmNlLFxuICAgIHByaXZhdGUgZmllbGQ6IHN0cmluZ1xuICApIHtcbiAgICB0aGlzLmRiID0gZG9jLmZpcmVzdG9yZTtcbiAgICB0aGlzLnNoYXJkSWQgPSBnZXRTaGFyZElkKENPT0tJRV9OQU1FKTtcblxuICAgIGZpcmViYXNlLmluaXRpYWxpemVBcHAodGhpcy5kYi5hcHAub3B0aW9ucyk7XG5cbiAgICBjb25zdCBzaGFyZHNSZWYgPSBmaXJlYmFzZS5maXJlc3RvcmUoKS5jb2xsZWN0aW9uKFNIQVJEX0NPTExFQ1RJT05fSUQpO1xuICAgIHRoaXMuc2hhcmRzW2RvYy5wYXRoXSA9IDA7XG5cbiAgICB0aGlzLnNoYXJkc1tzaGFyZHNSZWYucGF0aCArIFwiL1wiICsgdGhpcy5zaGFyZElkXSA9IDA7XG4gICAgdGhpcy5zaGFyZHNbc2hhcmRzUmVmLnBhdGggKyBcIi9cIiArIFwiXFx0XCIgKyB0aGlzLnNoYXJkSWQuc3Vic3RyKDAsIDQpXSA9IDA7XG4gICAgdGhpcy5zaGFyZHNbc2hhcmRzUmVmLnBhdGggKyBcIi9cIiArIFwiXFx0XFx0XCIgKyB0aGlzLnNoYXJkSWQuc3Vic3RyKDAsIDMpXSA9IDA7XG4gICAgdGhpcy5zaGFyZHNbXG4gICAgICBzaGFyZHNSZWYucGF0aCArIFwiL1wiICsgXCJcXHRcXHRcXHRcIiArIHRoaXMuc2hhcmRJZC5zdWJzdHIoMCwgMilcbiAgICBdID0gMDtcbiAgICB0aGlzLnNoYXJkc1tcbiAgICAgIHNoYXJkc1JlZi5wYXRoICsgXCIvXCIgKyBcIlxcdFxcdFxcdFwiICsgdGhpcy5zaGFyZElkLnN1YnN0cigwLCAxKVxuICAgIF0gPSAwO1xuXG4gICAgLy8gdGhpcy5zaGFyZHNbc2hhcmRzUmVmLmRvYyh0aGlzLnNoYXJkSWQpLnBhdGhdID0gMDtcbiAgICAvLyB0aGlzLnNoYXJkc1tzaGFyZHNSZWYuZG9jKFwiXFx0XCIgKyB0aGlzLnNoYXJkSWQuc3Vic3RyKDAsIDQpKS5wYXRoXSA9IDA7XG4gICAgLy8gdGhpcy5zaGFyZHNbc2hhcmRzUmVmLmRvYyhcIlxcdFxcdFwiICsgdGhpcy5zaGFyZElkLnN1YnN0cigwLCAzKSkucGF0aF0gPSAwO1xuICAgIC8vIHRoaXMuc2hhcmRzW3NoYXJkc1JlZi5kb2MoXCJcXHRcXHRcXHRcIiArIHRoaXMuc2hhcmRJZC5zdWJzdHIoMCwgMikpLnBhdGhdID0gMDtcbiAgICAvLyB0aGlzLnNoYXJkc1tzaGFyZHNSZWYuZG9jKFwiXFx0XFx0XFx0XFx0XCIgKyB0aGlzLnNoYXJkSWQuc3Vic3RyKDAsIDEpKS5wYXRoXSA9IDA7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGxhdGVuY3kgY29tcGVuc2F0ZWQgdmlldyBvZiB0aGUgY291bnRlci5cbiAgICpcbiAgICogQWxsIGxvY2FsIGluY3JlbWVudHMgd2lsbCBiZSByZWZsZWN0ZWQgaW4gdGhlIGNvdW50ZXIgZXZlbiBpZiB0aGUgbWFpblxuICAgKiBjb3VudGVyIGhhc24ndCBiZWVuIHVwZGF0ZWQgeWV0LlxuICAgKi9cbiAgcHVibGljIGFzeW5jIGdldChvcHRpb25zPzogZmlyZWJhc2UuZmlyZXN0b3JlLkdldE9wdGlvbnMpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIGNvbnN0IHZhbHVlUHJvbWlzZXMgPSBPYmplY3Qua2V5cyh0aGlzLnNoYXJkcykubWFwKGFzeW5jIChwYXRoKSA9PiB7XG4gICAgICBjb25zdCBzaGFyZCA9IGF3YWl0IHRoaXMuZGIuZG9jKHBhdGgpLmdldChvcHRpb25zKTtcbiAgICAgIHJldHVybiA8bnVtYmVyPnNoYXJkLmdldCh0aGlzLmZpZWxkKSB8fCAwO1xuICAgIH0pO1xuICAgIGNvbnN0IHZhbHVlcyA9IGF3YWl0IFByb21pc2UuYWxsKHZhbHVlUHJvbWlzZXMpO1xuICAgIHJldHVybiB2YWx1ZXMucmVkdWNlKChhLCBiKSA9PiBhICsgYiwgMCk7XG4gIH1cblxuICAvKipcbiAgICogTGlzdGVuIHRvIGxhdGVuY3kgY29tcGVuc2F0ZWQgdmlldyBvZiB0aGUgY291bnRlci5cbiAgICpcbiAgICogQWxsIGxvY2FsIGluY3JlbWVudHMgdG8gdGhpcyBjb3VudGVyIHdpbGwgYmUgaW1tZWRpYXRlbHkgdmlzaWJsZSBpbiB0aGVcbiAgICogc25hcHNob3QuXG4gICAqL1xuICBwdWJsaWMgb25TbmFwc2hvdChvYnNlcnZhYmxlOiAoKG5leHQ6IENvdW50ZXJTbmFwc2hvdCkgPT4gdm9pZCkpIHtcbiAgICBPYmplY3Qua2V5cyh0aGlzLnNoYXJkcykuZm9yRWFjaCgocGF0aCkgPT4ge1xuICAgICAgY29uc3QgZG9jdW1lbnQgPSBmaXJlYmFzZS5maXJlc3RvcmUoKS5kb2MocGF0aCk7XG5cbiAgICAgIG9uU25hcHNob3QoZG9jdW1lbnQsIChzbmFwOiBmaXJlYmFzZS5maXJlc3RvcmUuRG9jdW1lbnREYXRhKSA9PiB7XG4gICAgICAgIHRoaXMuc2hhcmRzW3NuYXAucmVmLnBhdGhdID0gc25hcC5nZXQodGhpcy5maWVsZCkgfHwgMDtcbiAgICAgICAgaWYgKHRoaXMubm90aWZ5UHJvbWlzZSAhPT0gbnVsbCkgcmV0dXJuO1xuICAgICAgICB0aGlzLm5vdGlmeVByb21pc2UgPSBzY2hlZHVsZSgoKSA9PiB7XG4gICAgICAgICAgY29uc3Qgc3VtID0gT2JqZWN0LnZhbHVlcyh0aGlzLnNoYXJkcykucmVkdWNlKChhLCBiKSA9PiBhICsgYiwgMCk7XG4gICAgICAgICAgb2JzZXJ2YWJsZSh7IGV4aXN0czogdHJ1ZSwgZGF0YTogKCkgPT4gc3VtIH0pO1xuICAgICAgICAgIHRoaXMubm90aWZ5UHJvbWlzZSA9IG51bGw7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogSW5jcmVtZW50IHRoZSBjb3VudGVyIGJ5IGEgZ2l2ZW4gdmFsdWUuXG4gICAqXG4gICAqIGUuZy5cbiAgICogY29uc3QgY291bnRlciA9IG5ldyBzaGFyZGVkLkNvdW50ZXIoZGIuZG9jKFwicGF0aC9kb2N1bWVudFwiKSwgXCJjb3VudGVyXCIpO1xuICAgKiBjb3VudGVyLmluY3JlbWVudEJ5KDEpO1xuICAgKi9cbiAgcHVibGljIGluY3JlbWVudEJ5KHZhbDogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGNvbnN0IGluY3JlbWVudDogYW55ID0gZmlyZWJhc2UuZmlyZXN0b3JlLkZpZWxkVmFsdWUuaW5jcmVtZW50KHZhbCk7XG4gICAgY29uc3QgdXBkYXRlOiB7IFtrZXk6IHN0cmluZ106IGFueSB9ID0gdGhpcy5maWVsZFxuICAgICAgLnNwbGl0KFwiLlwiKVxuICAgICAgLnJldmVyc2UoKVxuICAgICAgLnJlZHVjZSgodmFsdWUsIG5hbWUpID0+ICh7IFtuYW1lXTogdmFsdWUgfSksIGluY3JlbWVudCk7XG5cbiAgICBjb25zdCBzaGFyZFJlZiA9IGZpcmViYXNlLmZpcmVzdG9yZSgpLmNvbGxlY3Rpb24oU0hBUkRfQ09MTEVDVElPTl9JRCk7XG5cbiAgICByZXR1cm4gc2V0RG9jKGRvYyhzaGFyZFJlZiwgdGhpcy5zaGFyZElkKSwgdXBkYXRlLCB7IG1lcmdlOiB0cnVlIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEFjY2VzcyB0aGUgYXNzaWduZWQgc2hhcmQgZGlyZWN0bHkuIFVzZWZ1bCB0byB1cGRhdGUgbXVsdGlwbGUgY291bnRlcnNcbiAgICogYXQgdGhlIHNhbWUgdGltZSwgYmF0Y2hlcyBvciB0cmFuc2FjdGlvbnMuXG4gICAqXG4gICAqIGUuZy5cbiAgICogY29uc3QgY291bnRlciA9IG5ldyBzaGFyZGVkLkNvdW50ZXIoZGIuZG9jKFwicGF0aC9jb3VudGVyXCIpLCBcIlwiKTtcbiAgICogY29uc3Qgc2hhcmRSZWYgPSBjb3VudGVyLnNoYXJkKCk7XG4gICAqIHNoYXJkUmVmLnNldCh7XCJjb3VudGVyMVwiLCBmaXJlc3RvcmUuRmllbGRWYWx1ZS5JbmNyZW1lbnQoMSksXG4gICAqICAgICAgICAgICAgICAgXCJjb3VudGVyMlwiLCBmaXJlc3RvcmUuRmllbGRWYWx1ZS5JbmNyZW1lbnQoMSkpO1xuICAgKi9cbiAgcHVibGljIHNoYXJkKCk6IGZpcmViYXNlLmZpcmVzdG9yZS5Eb2N1bWVudFJlZmVyZW5jZSB7XG4gICAgcmV0dXJuIHRoaXMuZG9jLmNvbGxlY3Rpb24oU0hBUkRfQ09MTEVDVElPTl9JRCkuZG9jKHRoaXMuc2hhcmRJZCk7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gc2NoZWR1bGU8VD4oZnVuYzogKCkgPT4gVCk6IFByb21pc2U8VD4ge1xuICByZXR1cm4gbmV3IFByb21pc2U8VD4oYXN5bmMgKHJlc29sdmUpID0+IHtcbiAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGZ1bmMoKTtcbiAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICB9LCAwKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGdldFNoYXJkSWQoY29va2llOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCByZXN1bHQgPSBuZXcgUmVnRXhwKFxuICAgIFwiKD86Xnw7IClcIiArIGVuY29kZVVSSUNvbXBvbmVudChjb29raWUpICsgXCI9KFteO10qKVwiXG4gICkuZXhlYyhkb2N1bWVudC5jb29raWUpO1xuICBpZiAocmVzdWx0KSByZXR1cm4gcmVzdWx0WzFdO1xuXG4gIGNvbnN0IHNoYXJkSWQgPSB1dWlkLnY0KCk7XG5cbiAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gIGRhdGUuc2V0VGltZShkYXRlLmdldFRpbWUoKSArIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCk7XG4gIGNvbnN0IGV4cGlyZXMgPSBcIjsgZXhwaXJlcz1cIiArIGRhdGUudG9VVENTdHJpbmcoKTtcblxuICBkb2N1bWVudC5jb29raWUgPVxuICAgIGVuY29kZVVSSUNvbXBvbmVudChjb29raWUpICsgXCI9XCIgKyBzaGFyZElkICsgZXhwaXJlcyArIFwiOyBwYXRoPS9cIjtcbiAgcmV0dXJuIHNoYXJkSWQ7XG59XG4iLCJ2YXIgdjEgPSByZXF1aXJlKCcuL3YxJyk7XG52YXIgdjQgPSByZXF1aXJlKCcuL3Y0Jyk7XG5cbnZhciB1dWlkID0gdjQ7XG51dWlkLnYxID0gdjE7XG51dWlkLnY0ID0gdjQ7XG5cbm1vZHVsZS5leHBvcnRzID0gdXVpZDtcbiIsInZhciBybmcgPSByZXF1aXJlKCcuL2xpYi9ybmcnKTtcbnZhciBieXRlc1RvVXVpZCA9IHJlcXVpcmUoJy4vbGliL2J5dGVzVG9VdWlkJyk7XG5cbi8vICoqYHYxKClgIC0gR2VuZXJhdGUgdGltZS1iYXNlZCBVVUlEKipcbi8vXG4vLyBJbnNwaXJlZCBieSBodHRwczovL2dpdGh1Yi5jb20vTGlvc0svVVVJRC5qc1xuLy8gYW5kIGh0dHA6Ly9kb2NzLnB5dGhvbi5vcmcvbGlicmFyeS91dWlkLmh0bWxcblxudmFyIF9ub2RlSWQ7XG52YXIgX2Nsb2Nrc2VxO1xuXG4vLyBQcmV2aW91cyB1dWlkIGNyZWF0aW9uIHRpbWVcbnZhciBfbGFzdE1TZWNzID0gMDtcbnZhciBfbGFzdE5TZWNzID0gMDtcblxuLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZCBmb3IgQVBJIGRldGFpbHNcbmZ1bmN0aW9uIHYxKG9wdGlvbnMsIGJ1Ziwgb2Zmc2V0KSB7XG4gIHZhciBpID0gYnVmICYmIG9mZnNldCB8fCAwO1xuICB2YXIgYiA9IGJ1ZiB8fCBbXTtcblxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIG5vZGUgPSBvcHRpb25zLm5vZGUgfHwgX25vZGVJZDtcbiAgdmFyIGNsb2Nrc2VxID0gb3B0aW9ucy5jbG9ja3NlcSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jbG9ja3NlcSA6IF9jbG9ja3NlcTtcblxuICAvLyBub2RlIGFuZCBjbG9ja3NlcSBuZWVkIHRvIGJlIGluaXRpYWxpemVkIHRvIHJhbmRvbSB2YWx1ZXMgaWYgdGhleSdyZSBub3RcbiAgLy8gc3BlY2lmaWVkLiAgV2UgZG8gdGhpcyBsYXppbHkgdG8gbWluaW1pemUgaXNzdWVzIHJlbGF0ZWQgdG8gaW5zdWZmaWNpZW50XG4gIC8vIHN5c3RlbSBlbnRyb3B5LiAgU2VlICMxODlcbiAgaWYgKG5vZGUgPT0gbnVsbCB8fCBjbG9ja3NlcSA9PSBudWxsKSB7XG4gICAgdmFyIHNlZWRCeXRlcyA9IHJuZygpO1xuICAgIGlmIChub2RlID09IG51bGwpIHtcbiAgICAgIC8vIFBlciA0LjUsIGNyZWF0ZSBhbmQgNDgtYml0IG5vZGUgaWQsICg0NyByYW5kb20gYml0cyArIG11bHRpY2FzdCBiaXQgPSAxKVxuICAgICAgbm9kZSA9IF9ub2RlSWQgPSBbXG4gICAgICAgIHNlZWRCeXRlc1swXSB8IDB4MDEsXG4gICAgICAgIHNlZWRCeXRlc1sxXSwgc2VlZEJ5dGVzWzJdLCBzZWVkQnl0ZXNbM10sIHNlZWRCeXRlc1s0XSwgc2VlZEJ5dGVzWzVdXG4gICAgICBdO1xuICAgIH1cbiAgICBpZiAoY2xvY2tzZXEgPT0gbnVsbCkge1xuICAgICAgLy8gUGVyIDQuMi4yLCByYW5kb21pemUgKDE0IGJpdCkgY2xvY2tzZXFcbiAgICAgIGNsb2Nrc2VxID0gX2Nsb2Nrc2VxID0gKHNlZWRCeXRlc1s2XSA8PCA4IHwgc2VlZEJ5dGVzWzddKSAmIDB4M2ZmZjtcbiAgICB9XG4gIH1cblxuICAvLyBVVUlEIHRpbWVzdGFtcHMgYXJlIDEwMCBuYW5vLXNlY29uZCB1bml0cyBzaW5jZSB0aGUgR3JlZ29yaWFuIGVwb2NoLFxuICAvLyAoMTU4Mi0xMC0xNSAwMDowMCkuICBKU051bWJlcnMgYXJlbid0IHByZWNpc2UgZW5vdWdoIGZvciB0aGlzLCBzb1xuICAvLyB0aW1lIGlzIGhhbmRsZWQgaW50ZXJuYWxseSBhcyAnbXNlY3MnIChpbnRlZ2VyIG1pbGxpc2Vjb25kcykgYW5kICduc2VjcydcbiAgLy8gKDEwMC1uYW5vc2Vjb25kcyBvZmZzZXQgZnJvbSBtc2Vjcykgc2luY2UgdW5peCBlcG9jaCwgMTk3MC0wMS0wMSAwMDowMC5cbiAgdmFyIG1zZWNzID0gb3B0aW9ucy5tc2VjcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tc2VjcyA6IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXG4gIC8vIFBlciA0LjIuMS4yLCB1c2UgY291bnQgb2YgdXVpZCdzIGdlbmVyYXRlZCBkdXJpbmcgdGhlIGN1cnJlbnQgY2xvY2tcbiAgLy8gY3ljbGUgdG8gc2ltdWxhdGUgaGlnaGVyIHJlc29sdXRpb24gY2xvY2tcbiAgdmFyIG5zZWNzID0gb3B0aW9ucy5uc2VjcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5uc2VjcyA6IF9sYXN0TlNlY3MgKyAxO1xuXG4gIC8vIFRpbWUgc2luY2UgbGFzdCB1dWlkIGNyZWF0aW9uIChpbiBtc2VjcylcbiAgdmFyIGR0ID0gKG1zZWNzIC0gX2xhc3RNU2VjcykgKyAobnNlY3MgLSBfbGFzdE5TZWNzKS8xMDAwMDtcblxuICAvLyBQZXIgNC4yLjEuMiwgQnVtcCBjbG9ja3NlcSBvbiBjbG9jayByZWdyZXNzaW9uXG4gIGlmIChkdCA8IDAgJiYgb3B0aW9ucy5jbG9ja3NlcSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgY2xvY2tzZXEgPSBjbG9ja3NlcSArIDEgJiAweDNmZmY7XG4gIH1cblxuICAvLyBSZXNldCBuc2VjcyBpZiBjbG9jayByZWdyZXNzZXMgKG5ldyBjbG9ja3NlcSkgb3Igd2UndmUgbW92ZWQgb250byBhIG5ld1xuICAvLyB0aW1lIGludGVydmFsXG4gIGlmICgoZHQgPCAwIHx8IG1zZWNzID4gX2xhc3RNU2VjcykgJiYgb3B0aW9ucy5uc2VjcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbnNlY3MgPSAwO1xuICB9XG5cbiAgLy8gUGVyIDQuMi4xLjIgVGhyb3cgZXJyb3IgaWYgdG9vIG1hbnkgdXVpZHMgYXJlIHJlcXVlc3RlZFxuICBpZiAobnNlY3MgPj0gMTAwMDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3V1aWQudjEoKTogQ2FuXFwndCBjcmVhdGUgbW9yZSB0aGFuIDEwTSB1dWlkcy9zZWMnKTtcbiAgfVxuXG4gIF9sYXN0TVNlY3MgPSBtc2VjcztcbiAgX2xhc3ROU2VjcyA9IG5zZWNzO1xuICBfY2xvY2tzZXEgPSBjbG9ja3NlcTtcblxuICAvLyBQZXIgNC4xLjQgLSBDb252ZXJ0IGZyb20gdW5peCBlcG9jaCB0byBHcmVnb3JpYW4gZXBvY2hcbiAgbXNlY3MgKz0gMTIyMTkyOTI4MDAwMDA7XG5cbiAgLy8gYHRpbWVfbG93YFxuICB2YXIgdGwgPSAoKG1zZWNzICYgMHhmZmZmZmZmKSAqIDEwMDAwICsgbnNlY3MpICUgMHgxMDAwMDAwMDA7XG4gIGJbaSsrXSA9IHRsID4+PiAyNCAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRsID4+PiAxNiAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRsID4+PiA4ICYgMHhmZjtcbiAgYltpKytdID0gdGwgJiAweGZmO1xuXG4gIC8vIGB0aW1lX21pZGBcbiAgdmFyIHRtaCA9IChtc2VjcyAvIDB4MTAwMDAwMDAwICogMTAwMDApICYgMHhmZmZmZmZmO1xuICBiW2krK10gPSB0bWggPj4+IDggJiAweGZmO1xuICBiW2krK10gPSB0bWggJiAweGZmO1xuXG4gIC8vIGB0aW1lX2hpZ2hfYW5kX3ZlcnNpb25gXG4gIGJbaSsrXSA9IHRtaCA+Pj4gMjQgJiAweGYgfCAweDEwOyAvLyBpbmNsdWRlIHZlcnNpb25cbiAgYltpKytdID0gdG1oID4+PiAxNiAmIDB4ZmY7XG5cbiAgLy8gYGNsb2NrX3NlcV9oaV9hbmRfcmVzZXJ2ZWRgIChQZXIgNC4yLjIgLSBpbmNsdWRlIHZhcmlhbnQpXG4gIGJbaSsrXSA9IGNsb2Nrc2VxID4+PiA4IHwgMHg4MDtcblxuICAvLyBgY2xvY2tfc2VxX2xvd2BcbiAgYltpKytdID0gY2xvY2tzZXEgJiAweGZmO1xuXG4gIC8vIGBub2RlYFxuICBmb3IgKHZhciBuID0gMDsgbiA8IDY7ICsrbikge1xuICAgIGJbaSArIG5dID0gbm9kZVtuXTtcbiAgfVxuXG4gIHJldHVybiBidWYgPyBidWYgOiBieXRlc1RvVXVpZChiKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB2MTtcbiIsInZhciBybmcgPSByZXF1aXJlKCcuL2xpYi9ybmcnKTtcbnZhciBieXRlc1RvVXVpZCA9IHJlcXVpcmUoJy4vbGliL2J5dGVzVG9VdWlkJyk7XG5cbmZ1bmN0aW9uIHY0KG9wdGlvbnMsIGJ1Ziwgb2Zmc2V0KSB7XG4gIHZhciBpID0gYnVmICYmIG9mZnNldCB8fCAwO1xuXG4gIGlmICh0eXBlb2Yob3B0aW9ucykgPT0gJ3N0cmluZycpIHtcbiAgICBidWYgPSBvcHRpb25zID09PSAnYmluYXJ5JyA/IG5ldyBBcnJheSgxNikgOiBudWxsO1xuICAgIG9wdGlvbnMgPSBudWxsO1xuICB9XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gIHZhciBybmRzID0gb3B0aW9ucy5yYW5kb20gfHwgKG9wdGlvbnMucm5nIHx8IHJuZykoKTtcblxuICAvLyBQZXIgNC40LCBzZXQgYml0cyBmb3IgdmVyc2lvbiBhbmQgYGNsb2NrX3NlcV9oaV9hbmRfcmVzZXJ2ZWRgXG4gIHJuZHNbNl0gPSAocm5kc1s2XSAmIDB4MGYpIHwgMHg0MDtcbiAgcm5kc1s4XSA9IChybmRzWzhdICYgMHgzZikgfCAweDgwO1xuXG4gIC8vIENvcHkgYnl0ZXMgdG8gYnVmZmVyLCBpZiBwcm92aWRlZFxuICBpZiAoYnVmKSB7XG4gICAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IDE2OyArK2lpKSB7XG4gICAgICBidWZbaSArIGlpXSA9IHJuZHNbaWldO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBidWYgfHwgYnl0ZXNUb1V1aWQocm5kcyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdjQ7XG4iLCJpbXBvcnQgZmlyZWJhc2UgZnJvbSAnQGZpcmViYXNlL2FwcC1jb21wYXQnO1xuZXhwb3J0IHsgZGVmYXVsdCB9IGZyb20gJ0BmaXJlYmFzZS9hcHAtY29tcGF0JztcblxudmFyIG5hbWUgPSBcImZpcmViYXNlXCI7XG52YXIgdmVyc2lvbiA9IFwiOS42LjFcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZmlyZWJhc2UucmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24sICdhcHAtY29tcGF0Jyk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20uanMubWFwXG4iLCJpbXBvcnQgJ0BmaXJlYmFzZS9hdXRoLWNvbXBhdCc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20uanMubWFwXG4iLCJpbXBvcnQgZmlyZWJhc2UgZnJvbSAnQGZpcmViYXNlL2FwcC1jb21wYXQnO1xuaW1wb3J0ICogYXMgZXhwIGZyb20gJ0BmaXJlYmFzZS9hdXRoL2ludGVybmFsJztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuaW1wb3J0IHsgaXNCcm93c2VyRXh0ZW5zaW9uLCBpc1JlYWN0TmF0aXZlLCBpc05vZGUsIGdldFVBLCBpc0lFLCBpc0luZGV4ZWREQkF2YWlsYWJsZSwgRmlyZWJhc2VFcnJvciB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcblxudmFyIG5hbWUgPSBcIkBmaXJlYmFzZS9hdXRoLWNvbXBhdFwiO1xudmFyIHZlcnNpb24gPSBcIjAuMi40XCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IENPUkRPVkFfT05ERVZJQ0VSRUFEWV9USU1FT1VUX01TID0gMTAwMDtcclxuZnVuY3Rpb24gX2dldEN1cnJlbnRTY2hlbWUoKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICByZXR1cm4gKChfYSA9IHNlbGYgPT09IG51bGwgfHwgc2VsZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2VsZi5sb2NhdGlvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnByb3RvY29sKSB8fCBudWxsO1xyXG59XHJcbi8qKlxyXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBjdXJyZW50IGVudmlyb25tZW50IGlzIGh0dHAgb3IgaHR0cHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBfaXNIdHRwT3JIdHRwcygpIHtcclxuICAgIHJldHVybiBfZ2V0Q3VycmVudFNjaGVtZSgpID09PSAnaHR0cDonIHx8IF9nZXRDdXJyZW50U2NoZW1lKCkgPT09ICdodHRwczonO1xyXG59XHJcbi8qKlxyXG4gKiBAcGFyYW0gez9zdHJpbmc9fSB1YSBUaGUgdXNlciBhZ2VudC5cclxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgYXBwIGlzIHJlbmRlcmVkIGluIGEgbW9iaWxlIGlPUyBvciBBbmRyb2lkXHJcbiAqICAgICBDb3Jkb3ZhIGVudmlyb25tZW50LlxyXG4gKi9cclxuZnVuY3Rpb24gX2lzQW5kcm9pZE9ySW9zQ29yZG92YVNjaGVtZSh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAhISgoX2dldEN1cnJlbnRTY2hlbWUoKSA9PT0gJ2ZpbGU6JyB8fCBfZ2V0Q3VycmVudFNjaGVtZSgpID09PSAnaW9uaWM6JykgJiZcclxuICAgICAgICB1YS50b0xvd2VyQ2FzZSgpLm1hdGNoKC9pcGhvbmV8aXBhZHxpcG9kfGFuZHJvaWQvKSk7XHJcbn1cclxuLyoqXHJcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGVudmlyb25tZW50IGlzIGEgbmF0aXZlIGVudmlyb25tZW50LCB3aGVyZVxyXG4gKiAgICAgQ09SUyBjaGVja3MgZG8gbm90IGFwcGx5LlxyXG4gKi9cclxuZnVuY3Rpb24gX2lzTmF0aXZlRW52aXJvbm1lbnQoKSB7XHJcbiAgICByZXR1cm4gaXNSZWFjdE5hdGl2ZSgpIHx8IGlzTm9kZSgpO1xyXG59XHJcbi8qKlxyXG4gKiBDaGVja3Mgd2hldGhlciB0aGUgdXNlciBhZ2VudCBpcyBJRTExLlxyXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIGl0IGlzIElFMTEuXHJcbiAqL1xyXG5mdW5jdGlvbiBfaXNJZTExKCkge1xyXG4gICAgcmV0dXJuIGlzSUUoKSAmJiAoZG9jdW1lbnQgPT09IG51bGwgfHwgZG9jdW1lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRvY3VtZW50LmRvY3VtZW50TW9kZSkgPT09IDExO1xyXG59XHJcbi8qKlxyXG4gKiBDaGVja3Mgd2hldGhlciB0aGUgdXNlciBhZ2VudCBpcyBFZGdlLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gdXNlckFnZW50IFRoZSBicm93c2VyIHVzZXIgYWdlbnQgc3RyaW5nLlxyXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIGl0IGlzIEVkZ2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfaXNFZGdlKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuIC9FZGdlXFwvXFxkKy8udGVzdCh1YSk7XHJcbn1cclxuLyoqXHJcbiAqIEBwYXJhbSB7P3N0cmluZz19IG9wdF91c2VyQWdlbnQgVGhlIG5hdmlnYXRvciB1c2VyIGFnZW50LlxyXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIGxvY2FsIHN0b3JhZ2UgaXMgbm90IHN5bmNocm9uaXplZCBiZXR3ZWVuIGFuIGlmcmFtZVxyXG4gKiAgICAgYW5kIGEgcG9wdXAgb2YgdGhlIHNhbWUgZG9tYWluLlxyXG4gKi9cclxuZnVuY3Rpb24gX2lzTG9jYWxTdG9yYWdlTm90U3luY2hyb25pemVkKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuIF9pc0llMTEoKSB8fCBfaXNFZGdlKHVhKTtcclxufVxyXG4vKiogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB3ZWIgc3RvcmFnZSBpcyBzdXBwb3J0ZWQuICovXHJcbmZ1bmN0aW9uIF9pc1dlYlN0b3JhZ2VTdXBwb3J0ZWQoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHN0b3JhZ2UgPSBzZWxmLmxvY2FsU3RvcmFnZTtcclxuICAgICAgICBjb25zdCBrZXkgPSBleHAuX2dlbmVyYXRlRXZlbnRJZCgpO1xyXG4gICAgICAgIGlmIChzdG9yYWdlKSB7XHJcbiAgICAgICAgICAgIC8vIHNldEl0ZW0gd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgd2UgY2Fubm90IGFjY2VzcyBXZWJTdG9yYWdlIChlLmcuLFxyXG4gICAgICAgICAgICAvLyBTYWZhcmkgaW4gcHJpdmF0ZSBtb2RlKS5cclxuICAgICAgICAgICAgc3RvcmFnZVsnc2V0SXRlbSddKGtleSwgJzEnKTtcclxuICAgICAgICAgICAgc3RvcmFnZVsncmVtb3ZlSXRlbSddKGtleSk7XHJcbiAgICAgICAgICAgIC8vIEZvciBicm93c2VycyB3aGVyZSBpZnJhbWUgd2ViIHN0b3JhZ2UgZG9lcyBub3Qgc3luY2hyb25pemUgd2l0aCBhIHBvcHVwXHJcbiAgICAgICAgICAgIC8vIG9mIHRoZSBzYW1lIGRvbWFpbiwgaW5kZXhlZERCIGlzIHVzZWQgZm9yIHBlcnNpc3RlbnQgc3RvcmFnZS4gVGhlc2VcclxuICAgICAgICAgICAgLy8gYnJvd3NlcnMgaW5jbHVkZSBJRTExIGFuZCBFZGdlLlxyXG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgaXQgaXMgc3VwcG9ydGVkIChJRTExIGFuZCBFZGdlIHByaXZhdGUgbW9kZSBkb2VzIG5vdCBzdXBwb3J0XHJcbiAgICAgICAgICAgIC8vIHRoYXQpLlxyXG4gICAgICAgICAgICBpZiAoX2lzTG9jYWxTdG9yYWdlTm90U3luY2hyb25pemVkKCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIEluIHN1Y2ggYnJvd3NlcnMsIGlmIGluZGV4ZWREQiBpcyBub3Qgc3VwcG9ydGVkLCBhbiBpZnJhbWUgY2Fubm90IGJlXHJcbiAgICAgICAgICAgICAgICAvLyBub3RpZmllZCBvZiB0aGUgcG9wdXAgc2lnbiBpbiByZXN1bHQuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNJbmRleGVkREJBdmFpbGFibGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIC8vIGxvY2FsU3RvcmFnZSBpcyBub3QgYXZhaWxhYmxlIGZyb20gYSB3b3JrZXIuIFRlc3QgYXZhaWxhYmlsaXR5IG9mXHJcbiAgICAgICAgLy8gaW5kZXhlZERCLlxyXG4gICAgICAgIHJldHVybiBfaXNXb3JrZXIoKSAmJiBpc0luZGV4ZWREQkF2YWlsYWJsZSgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcbi8qKlxyXG4gKiBAcGFyYW0gez9PYmplY3Q9fSBnbG9iYWwgVGhlIG9wdGlvbmFsIGdsb2JhbCBzY29wZS5cclxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciBjdXJyZW50IGVudmlyb25tZW50IGlzIGEgd29ya2VyLlxyXG4gKi9cclxuZnVuY3Rpb24gX2lzV29ya2VyKCkge1xyXG4gICAgLy8gV29ya2VyR2xvYmFsU2NvcGUgb25seSBkZWZpbmVkIGluIHdvcmtlciBlbnZpcm9ubWVudC5cclxuICAgIHJldHVybiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICAnV29ya2VyR2xvYmFsU2NvcGUnIGluIGdsb2JhbCAmJlxyXG4gICAgICAgICdpbXBvcnRTY3JpcHRzJyBpbiBnbG9iYWwpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc1BvcHVwUmVkaXJlY3RTdXBwb3J0ZWQoKSB7XHJcbiAgICByZXR1cm4gKChfaXNIdHRwT3JIdHRwcygpIHx8XHJcbiAgICAgICAgaXNCcm93c2VyRXh0ZW5zaW9uKCkgfHxcclxuICAgICAgICBfaXNBbmRyb2lkT3JJb3NDb3Jkb3ZhU2NoZW1lKCkpICYmXHJcbiAgICAgICAgLy8gUmVhY3QgTmF0aXZlIHdpdGggcmVtb3RlIGRlYnVnZ2luZyByZXBvcnRzIGl0cyBsb2NhdGlvbi5wcm90b2NvbCBhc1xyXG4gICAgICAgIC8vIGh0dHAuXHJcbiAgICAgICAgIV9pc05hdGl2ZUVudmlyb25tZW50KCkgJiZcclxuICAgICAgICAvLyBMb2NhbCBzdG9yYWdlIGhhcyB0byBiZSBzdXBwb3J0ZWQgZm9yIGJyb3dzZXIgcG9wdXAgYW5kIHJlZGlyZWN0XHJcbiAgICAgICAgLy8gb3BlcmF0aW9ucyB0byB3b3JrLlxyXG4gICAgICAgIF9pc1dlYlN0b3JhZ2VTdXBwb3J0ZWQoKSAmJlxyXG4gICAgICAgIC8vIERPTSwgcG9wdXBzIGFuZCByZWRpcmVjdHMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aGluIGEgd29ya2VyLlxyXG4gICAgICAgICFfaXNXb3JrZXIoKSk7XHJcbn1cclxuLyoqIFF1aWNrIGNoZWNrIHRoYXQgaW5kaWNhdGVzIHRoZSBwbGF0Zm9ybSAqbWF5KiBiZSBDb3Jkb3ZhICovXHJcbmZ1bmN0aW9uIF9pc0xpa2VseUNvcmRvdmEoKSB7XHJcbiAgICByZXR1cm4gX2lzQW5kcm9pZE9ySW9zQ29yZG92YVNjaGVtZSgpICYmIHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCc7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX2lzQ29yZG92YSgpIHtcclxuICAgIGlmICghX2lzTGlrZWx5Q29yZG92YSgpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBXZSd2ZSB3YWl0ZWQgbG9uZyBlbm91Z2g7IHRoZSB0ZWxsdGFsZSBDb3Jkb3ZhIGV2ZW50IGRpZG4ndCBoYXBwZW5cclxuICAgICAgICAgICAgcmVzb2x2ZShmYWxzZSk7XHJcbiAgICAgICAgfSwgQ09SRE9WQV9PTkRFVklDRVJFQURZX1RJTUVPVVRfTVMpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RldmljZXJlYWR5JywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcclxuICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IFBlcnNpc3RlbmNlID0ge1xyXG4gICAgTE9DQUw6ICdsb2NhbCcsXHJcbiAgICBOT05FOiAnbm9uZScsXHJcbiAgICBTRVNTSU9OOiAnc2Vzc2lvbidcclxufTtcclxuY29uc3QgX2Fzc2VydCQzID0gZXhwLl9hc3NlcnQ7XHJcbmNvbnN0IFBFUlNJU1RFTkNFX0tFWSA9ICdwZXJzaXN0ZW5jZSc7XHJcbi8qKlxyXG4gKiBWYWxpZGF0ZXMgdGhhdCBhbiBhcmd1bWVudCBpcyBhIHZhbGlkIHBlcnNpc3RlbmNlIHZhbHVlLiBJZiBhbiBpbnZhbGlkIHR5cGVcclxuICogaXMgc3BlY2lmaWVkLCBhbiBlcnJvciBpcyB0aHJvd24gc3luY2hyb25vdXNseS5cclxuICovXHJcbmZ1bmN0aW9uIF92YWxpZGF0ZVBlcnNpc3RlbmNlQXJndW1lbnQoYXV0aCwgcGVyc2lzdGVuY2UpIHtcclxuICAgIF9hc3NlcnQkMyhPYmplY3QudmFsdWVzKFBlcnNpc3RlbmNlKS5pbmNsdWRlcyhwZXJzaXN0ZW5jZSksIGF1dGgsIFwiaW52YWxpZC1wZXJzaXN0ZW5jZS10eXBlXCIgLyogSU5WQUxJRF9QRVJTSVNURU5DRSAqLyk7XHJcbiAgICAvLyBWYWxpZGF0ZSBpZiB0aGUgc3BlY2lmaWVkIHR5cGUgaXMgc3VwcG9ydGVkIGluIHRoZSBjdXJyZW50IGVudmlyb25tZW50LlxyXG4gICAgaWYgKGlzUmVhY3ROYXRpdmUoKSkge1xyXG4gICAgICAgIC8vIFRoaXMgaXMgb25seSBzdXBwb3J0ZWQgaW4gYSBicm93c2VyLlxyXG4gICAgICAgIF9hc3NlcnQkMyhwZXJzaXN0ZW5jZSAhPT0gUGVyc2lzdGVuY2UuU0VTU0lPTiwgYXV0aCwgXCJ1bnN1cHBvcnRlZC1wZXJzaXN0ZW5jZS10eXBlXCIgLyogVU5TVVBQT1JURURfUEVSU0lTVEVOQ0UgKi8pO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmIChpc05vZGUoKSkge1xyXG4gICAgICAgIC8vIE9ubHkgbm9uZSBpcyBzdXBwb3J0ZWQgaW4gTm9kZS5qcy5cclxuICAgICAgICBfYXNzZXJ0JDMocGVyc2lzdGVuY2UgPT09IFBlcnNpc3RlbmNlLk5PTkUsIGF1dGgsIFwidW5zdXBwb3J0ZWQtcGVyc2lzdGVuY2UtdHlwZVwiIC8qIFVOU1VQUE9SVEVEX1BFUlNJU1RFTkNFICovKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoX2lzV29ya2VyKCkpIHtcclxuICAgICAgICAvLyBJbiBhIHdvcmtlciBlbnZpcm9ubWVudCwgZWl0aGVyIExPQ0FMIG9yIE5PTkUgYXJlIHN1cHBvcnRlZC5cclxuICAgICAgICAvLyBJZiBpbmRleGVkREIgbm90IHN1cHBvcnRlZCBhbmQgTE9DQUwgcHJvdmlkZWQsIHRocm93IGFuIGVycm9yXHJcbiAgICAgICAgX2Fzc2VydCQzKHBlcnNpc3RlbmNlID09PSBQZXJzaXN0ZW5jZS5OT05FIHx8XHJcbiAgICAgICAgICAgIChwZXJzaXN0ZW5jZSA9PT0gUGVyc2lzdGVuY2UuTE9DQUwgJiYgaXNJbmRleGVkREJBdmFpbGFibGUoKSksIGF1dGgsIFwidW5zdXBwb3J0ZWQtcGVyc2lzdGVuY2UtdHlwZVwiIC8qIFVOU1VQUE9SVEVEX1BFUlNJU1RFTkNFICovKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvLyBUaGlzIGlzIHJlc3RyaWN0ZWQgYnkgd2hhdCB0aGUgYnJvd3NlciBzdXBwb3J0cy5cclxuICAgIF9hc3NlcnQkMyhwZXJzaXN0ZW5jZSA9PT0gUGVyc2lzdGVuY2UuTk9ORSB8fCBfaXNXZWJTdG9yYWdlU3VwcG9ydGVkKCksIGF1dGgsIFwidW5zdXBwb3J0ZWQtcGVyc2lzdGVuY2UtdHlwZVwiIC8qIFVOU1VQUE9SVEVEX1BFUlNJU1RFTkNFICovKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfc2F2ZVBlcnNpc3RlbmNlRm9yUmVkaXJlY3QoYXV0aCkge1xyXG4gICAgYXdhaXQgYXV0aC5faW5pdGlhbGl6YXRpb25Qcm9taXNlO1xyXG4gICAgY29uc3Qgd2luID0gZ2V0U2VsZldpbmRvdygpO1xyXG4gICAgY29uc3Qga2V5ID0gZXhwLl9wZXJzaXN0ZW5jZUtleU5hbWUoUEVSU0lTVEVOQ0VfS0VZLCBhdXRoLmNvbmZpZy5hcGlLZXksIGF1dGgubmFtZSk7XHJcbiAgICBpZiAod2luID09PSBudWxsIHx8IHdpbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogd2luLnNlc3Npb25TdG9yYWdlKSB7XHJcbiAgICAgICAgd2luLnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oa2V5LCBhdXRoLl9nZXRQZXJzaXN0ZW5jZSgpKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBfZ2V0UGVyc2lzdGVuY2VzRnJvbVJlZGlyZWN0KGFwaUtleSwgYXBwTmFtZSkge1xyXG4gICAgY29uc3Qgd2luID0gZ2V0U2VsZldpbmRvdygpO1xyXG4gICAgaWYgKCEod2luID09PSBudWxsIHx8IHdpbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogd2luLnNlc3Npb25TdG9yYWdlKSkge1xyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuICAgIGNvbnN0IGtleSA9IGV4cC5fcGVyc2lzdGVuY2VLZXlOYW1lKFBFUlNJU1RFTkNFX0tFWSwgYXBpS2V5LCBhcHBOYW1lKTtcclxuICAgIGNvbnN0IHBlcnNpc3RlbmNlID0gd2luLnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuICAgIHN3aXRjaCAocGVyc2lzdGVuY2UpIHtcclxuICAgICAgICBjYXNlIFBlcnNpc3RlbmNlLk5PTkU6XHJcbiAgICAgICAgICAgIHJldHVybiBbZXhwLmluTWVtb3J5UGVyc2lzdGVuY2VdO1xyXG4gICAgICAgIGNhc2UgUGVyc2lzdGVuY2UuTE9DQUw6XHJcbiAgICAgICAgICAgIHJldHVybiBbZXhwLmluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2UsIGV4cC5icm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlXTtcclxuICAgICAgICBjYXNlIFBlcnNpc3RlbmNlLlNFU1NJT046XHJcbiAgICAgICAgICAgIHJldHVybiBbZXhwLmJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2VdO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBnZXRTZWxmV2luZG93KCkge1xyXG4gICAgcmV0dXJuIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogbnVsbDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBfYXNzZXJ0JDIgPSBleHAuX2Fzc2VydDtcclxuLyoqIFBsYXRmb3JtLWFnbm9zdGljIHBvcHVwLXJlZGlyZWN0IHJlc29sdmVyICovXHJcbmNsYXNzIENvbXBhdFBvcHVwUmVkaXJlY3RSZXNvbHZlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAvLyBDcmVhdGUgYm90aCByZXNvbHZlcnMgZm9yIGR5bmFtaWMgcmVzb2x1dGlvbiBsYXRlclxyXG4gICAgICAgIHRoaXMuYnJvd3NlclJlc29sdmVyID0gZXhwLl9nZXRJbnN0YW5jZShleHAuYnJvd3NlclBvcHVwUmVkaXJlY3RSZXNvbHZlcik7XHJcbiAgICAgICAgdGhpcy5jb3Jkb3ZhUmVzb2x2ZXIgPSBleHAuX2dldEluc3RhbmNlKGV4cC5jb3Jkb3ZhUG9wdXBSZWRpcmVjdFJlc29sdmVyKTtcclxuICAgICAgICAvLyBUaGUgYWN0dWFsIHJlc29sdmVyIGluIHVzZTogZWl0aGVyIGJyb3dzZXJSZXNvbHZlciBvciBjb3Jkb3ZhUmVzb2x2ZXIuXHJcbiAgICAgICAgdGhpcy51bmRlcmx5aW5nUmVzb2x2ZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX3JlZGlyZWN0UGVyc2lzdGVuY2UgPSBleHAuYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZTtcclxuICAgICAgICB0aGlzLl9jb21wbGV0ZVJlZGlyZWN0Rm4gPSBleHAuX2dldFJlZGlyZWN0UmVzdWx0O1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX2luaXRpYWxpemUoYXV0aCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2VsZWN0VW5kZXJseWluZ1Jlc29sdmVyKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXNzZXJ0ZWRVbmRlcmx5aW5nUmVzb2x2ZXIuX2luaXRpYWxpemUoYXV0aCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfb3BlblBvcHVwKGF1dGgsIHByb3ZpZGVyLCBhdXRoVHlwZSwgZXZlbnRJZCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2VsZWN0VW5kZXJseWluZ1Jlc29sdmVyKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXNzZXJ0ZWRVbmRlcmx5aW5nUmVzb2x2ZXIuX29wZW5Qb3B1cChhdXRoLCBwcm92aWRlciwgYXV0aFR5cGUsIGV2ZW50SWQpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX29wZW5SZWRpcmVjdChhdXRoLCBwcm92aWRlciwgYXV0aFR5cGUsIGV2ZW50SWQpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLnNlbGVjdFVuZGVybHlpbmdSZXNvbHZlcigpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFzc2VydGVkVW5kZXJseWluZ1Jlc29sdmVyLl9vcGVuUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIsIGF1dGhUeXBlLCBldmVudElkKTtcclxuICAgIH1cclxuICAgIF9pc0lmcmFtZVdlYlN0b3JhZ2VTdXBwb3J0ZWQoYXV0aCwgY2IpIHtcclxuICAgICAgICB0aGlzLmFzc2VydGVkVW5kZXJseWluZ1Jlc29sdmVyLl9pc0lmcmFtZVdlYlN0b3JhZ2VTdXBwb3J0ZWQoYXV0aCwgY2IpO1xyXG4gICAgfVxyXG4gICAgX29yaWdpblZhbGlkYXRpb24oYXV0aCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFzc2VydGVkVW5kZXJseWluZ1Jlc29sdmVyLl9vcmlnaW5WYWxpZGF0aW9uKGF1dGgpO1xyXG4gICAgfVxyXG4gICAgZ2V0IF9zaG91bGRJbml0UHJvYWN0aXZlbHkoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9pc0xpa2VseUNvcmRvdmEoKSB8fCB0aGlzLmJyb3dzZXJSZXNvbHZlci5fc2hvdWxkSW5pdFByb2FjdGl2ZWx5O1xyXG4gICAgfVxyXG4gICAgZ2V0IGFzc2VydGVkVW5kZXJseWluZ1Jlc29sdmVyKCkge1xyXG4gICAgICAgIF9hc3NlcnQkMih0aGlzLnVuZGVybHlpbmdSZXNvbHZlciwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nUmVzb2x2ZXI7XHJcbiAgICB9XHJcbiAgICBhc3luYyBzZWxlY3RVbmRlcmx5aW5nUmVzb2x2ZXIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudW5kZXJseWluZ1Jlc29sdmVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gV2UgaGF2ZW4ndCB5ZXQgZGV0ZXJtaW5lZCB3aGV0aGVyIG9yIG5vdCB3ZSdyZSBpbiBDb3Jkb3ZhOyBnbyBhaGVhZFxyXG4gICAgICAgIC8vIGFuZCBkZXRlcm1pbmUgdGhhdCBzdGF0ZSBub3cuXHJcbiAgICAgICAgY29uc3QgaXNDb3Jkb3ZhID0gYXdhaXQgX2lzQ29yZG92YSgpO1xyXG4gICAgICAgIHRoaXMudW5kZXJseWluZ1Jlc29sdmVyID0gaXNDb3Jkb3ZhXHJcbiAgICAgICAgICAgID8gdGhpcy5jb3Jkb3ZhUmVzb2x2ZXJcclxuICAgICAgICAgICAgOiB0aGlzLmJyb3dzZXJSZXNvbHZlcjtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiB1bndyYXAob2JqZWN0KSB7XHJcbiAgICByZXR1cm4gb2JqZWN0LnVud3JhcCgpO1xyXG59XHJcbmZ1bmN0aW9uIHdyYXBwZWQob2JqZWN0KSB7XHJcbiAgICByZXR1cm4gb2JqZWN0LndyYXBwZWQoKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVkZW50aWFsRnJvbVJlc3BvbnNlKHVzZXJDcmVkZW50aWFsKSB7XHJcbiAgICByZXR1cm4gY3JlZGVudGlhbEZyb21PYmplY3QodXNlckNyZWRlbnRpYWwpO1xyXG59XHJcbmZ1bmN0aW9uIGF0dGFjaEV4dHJhRXJyb3JGaWVsZHMoYXV0aCwgZSkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgLy8gVGhlIHJlc3BvbnNlIGNvbnRhaW5zIGFsbCBmaWVsZHMgZnJvbSB0aGUgc2VydmVyIHdoaWNoIG1heSBvciBtYXkgbm90XHJcbiAgICAvLyBhY3R1YWxseSBtYXRjaCB0aGUgdW5kZXJseWluZyB0eXBlXHJcbiAgICBjb25zdCByZXNwb25zZSA9IChfYSA9IGUuY3VzdG9tRGF0YSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLl90b2tlblJlc3BvbnNlO1xyXG4gICAgaWYgKGUuY29kZSA9PT0gJ2F1dGgvbXVsdGktZmFjdG9yLWF1dGgtcmVxdWlyZWQnKSB7XHJcbiAgICAgICAgY29uc3QgbWZhRXJyID0gZTtcclxuICAgICAgICBtZmFFcnIucmVzb2x2ZXIgPSBuZXcgTXVsdGlGYWN0b3JSZXNvbHZlcihhdXRoLCBleHAuZ2V0TXVsdGlGYWN0b3JSZXNvbHZlcihhdXRoLCBlKSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChyZXNwb25zZSkge1xyXG4gICAgICAgIGNvbnN0IGNyZWRlbnRpYWwgPSBjcmVkZW50aWFsRnJvbU9iamVjdChlKTtcclxuICAgICAgICBjb25zdCBjcmVkRXJyID0gZTtcclxuICAgICAgICBpZiAoY3JlZGVudGlhbCkge1xyXG4gICAgICAgICAgICBjcmVkRXJyLmNyZWRlbnRpYWwgPSBjcmVkZW50aWFsO1xyXG4gICAgICAgICAgICBjcmVkRXJyLnRlbmFudElkID0gcmVzcG9uc2UudGVuYW50SWQgfHwgdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICBjcmVkRXJyLmVtYWlsID0gcmVzcG9uc2UuZW1haWwgfHwgdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICBjcmVkRXJyLnBob25lTnVtYmVyID0gcmVzcG9uc2UucGhvbmVOdW1iZXIgfHwgdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBjcmVkZW50aWFsRnJvbU9iamVjdChvYmplY3QpIHtcclxuICAgIGNvbnN0IHsgX3Rva2VuUmVzcG9uc2UgfSA9IChvYmplY3QgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yID8gb2JqZWN0LmN1c3RvbURhdGEgOiBvYmplY3QpO1xyXG4gICAgaWYgKCFfdG9rZW5SZXNwb25zZSkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgLy8gSGFuZGxlIHBob25lIEF1dGggY3JlZGVudGlhbCByZXNwb25zZXMsIGFzIHRoZXkgaGF2ZSBhIGRpZmZlcmVudCBmb3JtYXRcclxuICAgIC8vIGZyb20gb3RoZXIgYmFja2VuZCByZXNwb25zZXMgKGkuZS4gbm8gcHJvdmlkZXJJZCkuIFRoaXMgaXMgYWxzbyBvbmx5IHRoZVxyXG4gICAgLy8gY2FzZSBmb3IgdXNlciBjcmVkZW50aWFscyAoZG9lcyBub3Qgd29yayBmb3IgZXJyb3JzKS5cclxuICAgIGlmICghKG9iamVjdCBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IpKSB7XHJcbiAgICAgICAgaWYgKCd0ZW1wb3JhcnlQcm9vZicgaW4gX3Rva2VuUmVzcG9uc2UgJiYgJ3Bob25lTnVtYmVyJyBpbiBfdG9rZW5SZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZXhwLlBob25lQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KG9iamVjdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgcHJvdmlkZXJJZCA9IF90b2tlblJlc3BvbnNlLnByb3ZpZGVySWQ7XHJcbiAgICAvLyBFbWFpbCBhbmQgcGFzc3dvcmQgaXMgbm90IHN1cHBvcnRlZCBhcyB0aGVyZSBpcyBubyBzaXR1YXRpb24gd2hlcmUgdGhlXHJcbiAgICAvLyBzZXJ2ZXIgd291bGQgcmV0dXJuIHRoZSBwYXNzd29yZCB0byB0aGUgY2xpZW50LlxyXG4gICAgaWYgKCFwcm92aWRlcklkIHx8IHByb3ZpZGVySWQgPT09IGV4cC5Qcm92aWRlcklkLlBBU1NXT1JEKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBsZXQgcHJvdmlkZXI7XHJcbiAgICBzd2l0Y2ggKHByb3ZpZGVySWQpIHtcclxuICAgICAgICBjYXNlIGV4cC5Qcm92aWRlcklkLkdPT0dMRTpcclxuICAgICAgICAgICAgcHJvdmlkZXIgPSBleHAuR29vZ2xlQXV0aFByb3ZpZGVyO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIGV4cC5Qcm92aWRlcklkLkZBQ0VCT09LOlxyXG4gICAgICAgICAgICBwcm92aWRlciA9IGV4cC5GYWNlYm9va0F1dGhQcm92aWRlcjtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBleHAuUHJvdmlkZXJJZC5HSVRIVUI6XHJcbiAgICAgICAgICAgIHByb3ZpZGVyID0gZXhwLkdpdGh1YkF1dGhQcm92aWRlcjtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBleHAuUHJvdmlkZXJJZC5UV0lUVEVSOlxyXG4gICAgICAgICAgICBwcm92aWRlciA9IGV4cC5Ud2l0dGVyQXV0aFByb3ZpZGVyO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICBjb25zdCB7IG9hdXRoSWRUb2tlbiwgb2F1dGhBY2Nlc3NUb2tlbiwgb2F1dGhUb2tlblNlY3JldCwgcGVuZGluZ1Rva2VuLCBub25jZSB9ID0gX3Rva2VuUmVzcG9uc2U7XHJcbiAgICAgICAgICAgIGlmICghb2F1dGhBY2Nlc3NUb2tlbiAmJlxyXG4gICAgICAgICAgICAgICAgIW9hdXRoVG9rZW5TZWNyZXQgJiZcclxuICAgICAgICAgICAgICAgICFvYXV0aElkVG9rZW4gJiZcclxuICAgICAgICAgICAgICAgICFwZW5kaW5nVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFRPRE8oYXZvbGtvdmkpOiB1bmNvbW1lbnQgdGhpcyBhbmQgZ2V0IGl0IHdvcmtpbmcgd2l0aCBTQU1MICYgT0lEQ1xyXG4gICAgICAgICAgICBpZiAocGVuZGluZ1Rva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvdmlkZXJJZC5zdGFydHNXaXRoKCdzYW1sLicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4cC5TQU1MQXV0aENyZWRlbnRpYWwuX2NyZWF0ZShwcm92aWRlcklkLCBwZW5kaW5nVG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gT0lEQyBhbmQgbm9uLWRlZmF1bHQgcHJvdmlkZXJzIGV4Y2x1ZGluZyBUd2l0dGVyLlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBleHAuT0F1dGhDcmVkZW50aWFsLl9mcm9tUGFyYW1zKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbkluTWV0aG9kOiBwcm92aWRlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkVG9rZW46IG9hdXRoSWRUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IG9hdXRoQWNjZXNzVG9rZW5cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IGV4cC5PQXV0aFByb3ZpZGVyKHByb3ZpZGVySWQpLmNyZWRlbnRpYWwoe1xyXG4gICAgICAgICAgICAgICAgaWRUb2tlbjogb2F1dGhJZFRva2VuLFxyXG4gICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IG9hdXRoQWNjZXNzVG9rZW4sXHJcbiAgICAgICAgICAgICAgICByYXdOb25jZTogbm9uY2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb2JqZWN0IGluc3RhbmNlb2YgRmlyZWJhc2VFcnJvclxyXG4gICAgICAgID8gcHJvdmlkZXIuY3JlZGVudGlhbEZyb21FcnJvcihvYmplY3QpXHJcbiAgICAgICAgOiBwcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChvYmplY3QpO1xyXG59XHJcbmZ1bmN0aW9uIGNvbnZlcnRDcmVkZW50aWFsKGF1dGgsIGNyZWRlbnRpYWxQcm9taXNlKSB7XHJcbiAgICByZXR1cm4gY3JlZGVudGlhbFByb21pc2VcclxuICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yKSB7XHJcbiAgICAgICAgICAgIGF0dGFjaEV4dHJhRXJyb3JGaWVsZHMoYXV0aCwgZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IGU7XHJcbiAgICB9KVxyXG4gICAgICAgIC50aGVuKGNyZWRlbnRpYWwgPT4ge1xyXG4gICAgICAgIGNvbnN0IG9wZXJhdGlvblR5cGUgPSBjcmVkZW50aWFsLm9wZXJhdGlvblR5cGU7XHJcbiAgICAgICAgY29uc3QgdXNlciA9IGNyZWRlbnRpYWwudXNlcjtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBvcGVyYXRpb25UeXBlLFxyXG4gICAgICAgICAgICBjcmVkZW50aWFsOiBjcmVkZW50aWFsRnJvbVJlc3BvbnNlKGNyZWRlbnRpYWwpLFxyXG4gICAgICAgICAgICBhZGRpdGlvbmFsVXNlckluZm86IGV4cC5nZXRBZGRpdGlvbmFsVXNlckluZm8oY3JlZGVudGlhbCksXHJcbiAgICAgICAgICAgIHVzZXI6IFVzZXIuZ2V0T3JDcmVhdGUodXNlcilcclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gY29udmVydENvbmZpcm1hdGlvblJlc3VsdChhdXRoLCBjb25maXJtYXRpb25SZXN1bHRQcm9taXNlKSB7XHJcbiAgICBjb25zdCBjb25maXJtYXRpb25SZXN1bHRFeHAgPSBhd2FpdCBjb25maXJtYXRpb25SZXN1bHRQcm9taXNlO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB2ZXJpZmljYXRpb25JZDogY29uZmlybWF0aW9uUmVzdWx0RXhwLnZlcmlmaWNhdGlvbklkLFxyXG4gICAgICAgIGNvbmZpcm06ICh2ZXJpZmljYXRpb25Db2RlKSA9PiBjb252ZXJ0Q3JlZGVudGlhbChhdXRoLCBjb25maXJtYXRpb25SZXN1bHRFeHAuY29uZmlybSh2ZXJpZmljYXRpb25Db2RlKSlcclxuICAgIH07XHJcbn1cclxuY2xhc3MgTXVsdGlGYWN0b3JSZXNvbHZlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoLCByZXNvbHZlcikge1xyXG4gICAgICAgIHRoaXMucmVzb2x2ZXIgPSByZXNvbHZlcjtcclxuICAgICAgICB0aGlzLmF1dGggPSB3cmFwcGVkKGF1dGgpO1xyXG4gICAgfVxyXG4gICAgZ2V0IHNlc3Npb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzb2x2ZXIuc2Vzc2lvbjtcclxuICAgIH1cclxuICAgIGdldCBoaW50cygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZXNvbHZlci5oaW50cztcclxuICAgIH1cclxuICAgIHJlc29sdmVTaWduSW4oYXNzZXJ0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnZlcnRDcmVkZW50aWFsKHVud3JhcCh0aGlzLmF1dGgpLCB0aGlzLnJlc29sdmVyLnJlc29sdmVTaWduSW4oYXNzZXJ0aW9uKSk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgVXNlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihfZGVsZWdhdGUpIHtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IF9kZWxlZ2F0ZTtcclxuICAgICAgICB0aGlzLm11bHRpRmFjdG9yID0gZXhwLm11bHRpRmFjdG9yKF9kZWxlZ2F0ZSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZ2V0T3JDcmVhdGUodXNlcikge1xyXG4gICAgICAgIGlmICghVXNlci5VU0VSX01BUC5oYXModXNlcikpIHtcclxuICAgICAgICAgICAgVXNlci5VU0VSX01BUC5zZXQodXNlciwgbmV3IFVzZXIodXNlcikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gVXNlci5VU0VSX01BUC5nZXQodXNlcik7XHJcbiAgICB9XHJcbiAgICBkZWxldGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmRlbGV0ZSgpO1xyXG4gICAgfVxyXG4gICAgcmVsb2FkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5yZWxvYWQoKTtcclxuICAgIH1cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUudG9KU09OKCk7XHJcbiAgICB9XHJcbiAgICBnZXRJZFRva2VuUmVzdWx0KGZvcmNlUmVmcmVzaCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5nZXRJZFRva2VuUmVzdWx0KGZvcmNlUmVmcmVzaCk7XHJcbiAgICB9XHJcbiAgICBnZXRJZFRva2VuKGZvcmNlUmVmcmVzaCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5nZXRJZFRva2VuKGZvcmNlUmVmcmVzaCk7XHJcbiAgICB9XHJcbiAgICBsaW5rQW5kUmV0cmlldmVEYXRhV2l0aENyZWRlbnRpYWwoY3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxpbmtXaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIGFzeW5jIGxpbmtXaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnZlcnRDcmVkZW50aWFsKHRoaXMuYXV0aCwgZXhwLmxpbmtXaXRoQ3JlZGVudGlhbCh0aGlzLl9kZWxlZ2F0ZSwgY3JlZGVudGlhbCkpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgbGlua1dpdGhQaG9uZU51bWJlcihwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcikge1xyXG4gICAgICAgIHJldHVybiBjb252ZXJ0Q29uZmlybWF0aW9uUmVzdWx0KHRoaXMuYXV0aCwgZXhwLmxpbmtXaXRoUGhvbmVOdW1iZXIodGhpcy5fZGVsZWdhdGUsIHBob25lTnVtYmVyLCBhcHBsaWNhdGlvblZlcmlmaWVyKSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBsaW5rV2l0aFBvcHVwKHByb3ZpZGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnZlcnRDcmVkZW50aWFsKHRoaXMuYXV0aCwgZXhwLmxpbmtXaXRoUG9wdXAodGhpcy5fZGVsZWdhdGUsIHByb3ZpZGVyLCBDb21wYXRQb3B1cFJlZGlyZWN0UmVzb2x2ZXIpKTtcclxuICAgIH1cclxuICAgIGFzeW5jIGxpbmtXaXRoUmVkaXJlY3QocHJvdmlkZXIpIHtcclxuICAgICAgICBhd2FpdCBfc2F2ZVBlcnNpc3RlbmNlRm9yUmVkaXJlY3QoZXhwLl9jYXN0QXV0aCh0aGlzLmF1dGgpKTtcclxuICAgICAgICByZXR1cm4gZXhwLmxpbmtXaXRoUmVkaXJlY3QodGhpcy5fZGVsZWdhdGUsIHByb3ZpZGVyLCBDb21wYXRQb3B1cFJlZGlyZWN0UmVzb2x2ZXIpO1xyXG4gICAgfVxyXG4gICAgcmVhdXRoZW50aWNhdGVBbmRSZXRyaWV2ZURhdGFXaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHJlYXV0aGVudGljYXRlV2l0aENyZWRlbnRpYWwoY3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBjb252ZXJ0Q3JlZGVudGlhbCh0aGlzLmF1dGgsIGV4cC5yZWF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFsKHRoaXMuX2RlbGVnYXRlLCBjcmVkZW50aWFsKSk7XHJcbiAgICB9XHJcbiAgICByZWF1dGhlbnRpY2F0ZVdpdGhQaG9uZU51bWJlcihwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcikge1xyXG4gICAgICAgIHJldHVybiBjb252ZXJ0Q29uZmlybWF0aW9uUmVzdWx0KHRoaXMuYXV0aCwgZXhwLnJlYXV0aGVudGljYXRlV2l0aFBob25lTnVtYmVyKHRoaXMuX2RlbGVnYXRlLCBwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcikpO1xyXG4gICAgfVxyXG4gICAgcmVhdXRoZW50aWNhdGVXaXRoUG9wdXAocHJvdmlkZXIpIHtcclxuICAgICAgICByZXR1cm4gY29udmVydENyZWRlbnRpYWwodGhpcy5hdXRoLCBleHAucmVhdXRoZW50aWNhdGVXaXRoUG9wdXAodGhpcy5fZGVsZWdhdGUsIHByb3ZpZGVyLCBDb21wYXRQb3B1cFJlZGlyZWN0UmVzb2x2ZXIpKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHJlYXV0aGVudGljYXRlV2l0aFJlZGlyZWN0KHByb3ZpZGVyKSB7XHJcbiAgICAgICAgYXdhaXQgX3NhdmVQZXJzaXN0ZW5jZUZvclJlZGlyZWN0KGV4cC5fY2FzdEF1dGgodGhpcy5hdXRoKSk7XHJcbiAgICAgICAgcmV0dXJuIGV4cC5yZWF1dGhlbnRpY2F0ZVdpdGhSZWRpcmVjdCh0aGlzLl9kZWxlZ2F0ZSwgcHJvdmlkZXIsIENvbXBhdFBvcHVwUmVkaXJlY3RSZXNvbHZlcik7XHJcbiAgICB9XHJcbiAgICBzZW5kRW1haWxWZXJpZmljYXRpb24oYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICAgICAgcmV0dXJuIGV4cC5zZW5kRW1haWxWZXJpZmljYXRpb24odGhpcy5fZGVsZWdhdGUsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAgICB9XHJcbiAgICBhc3luYyB1bmxpbmsocHJvdmlkZXJJZCkge1xyXG4gICAgICAgIGF3YWl0IGV4cC51bmxpbmsodGhpcy5fZGVsZWdhdGUsIHByb3ZpZGVySWQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlRW1haWwobmV3RW1haWwpIHtcclxuICAgICAgICByZXR1cm4gZXhwLnVwZGF0ZUVtYWlsKHRoaXMuX2RlbGVnYXRlLCBuZXdFbWFpbCk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGVQYXNzd29yZChuZXdQYXNzd29yZCkge1xyXG4gICAgICAgIHJldHVybiBleHAudXBkYXRlUGFzc3dvcmQodGhpcy5fZGVsZWdhdGUsIG5ld1Bhc3N3b3JkKTtcclxuICAgIH1cclxuICAgIHVwZGF0ZVBob25lTnVtYmVyKHBob25lQ3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBleHAudXBkYXRlUGhvbmVOdW1iZXIodGhpcy5fZGVsZWdhdGUsIHBob25lQ3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGVQcm9maWxlKHByb2ZpbGUpIHtcclxuICAgICAgICByZXR1cm4gZXhwLnVwZGF0ZVByb2ZpbGUodGhpcy5fZGVsZWdhdGUsIHByb2ZpbGUpO1xyXG4gICAgfVxyXG4gICAgdmVyaWZ5QmVmb3JlVXBkYXRlRW1haWwobmV3RW1haWwsIGFjdGlvbkNvZGVTZXR0aW5ncykge1xyXG4gICAgICAgIHJldHVybiBleHAudmVyaWZ5QmVmb3JlVXBkYXRlRW1haWwodGhpcy5fZGVsZWdhdGUsIG5ld0VtYWlsLCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGVtYWlsVmVyaWZpZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmVtYWlsVmVyaWZpZWQ7XHJcbiAgICB9XHJcbiAgICBnZXQgaXNBbm9ueW1vdXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmlzQW5vbnltb3VzO1xyXG4gICAgfVxyXG4gICAgZ2V0IG1ldGFkYXRhKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5tZXRhZGF0YTtcclxuICAgIH1cclxuICAgIGdldCBwaG9uZU51bWJlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUucGhvbmVOdW1iZXI7XHJcbiAgICB9XHJcbiAgICBnZXQgcHJvdmlkZXJEYXRhKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5wcm92aWRlckRhdGE7XHJcbiAgICB9XHJcbiAgICBnZXQgcmVmcmVzaFRva2VuKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5yZWZyZXNoVG9rZW47XHJcbiAgICB9XHJcbiAgICBnZXQgdGVuYW50SWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnRlbmFudElkO1xyXG4gICAgfVxyXG4gICAgZ2V0IGRpc3BsYXlOYW1lKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5kaXNwbGF5TmFtZTtcclxuICAgIH1cclxuICAgIGdldCBlbWFpbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuZW1haWw7XHJcbiAgICB9XHJcbiAgICBnZXQgcGhvdG9VUkwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnBob3RvVVJMO1xyXG4gICAgfVxyXG4gICAgZ2V0IHByb3ZpZGVySWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnByb3ZpZGVySWQ7XHJcbiAgICB9XHJcbiAgICBnZXQgdWlkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS51aWQ7XHJcbiAgICB9XHJcbiAgICBnZXQgYXV0aCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuYXV0aDtcclxuICAgIH1cclxufVxyXG4vLyBNYWludGFpbiBhIG1hcCBzbyB0aGF0IHRoZXJlJ3MgYWx3YXlzIGEgMToxIG1hcHBpbmcgYmV0d2VlbiBuZXcgVXNlciBhbmRcclxuLy8gbGVnYWN5IGNvbXBhdCB1c2Vyc1xyXG5Vc2VyLlVTRVJfTUFQID0gbmV3IFdlYWtNYXAoKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgX2Fzc2VydCQxID0gZXhwLl9hc3NlcnQ7XHJcbmNsYXNzIEF1dGgge1xyXG4gICAgY29uc3RydWN0b3IoYXBwLCBwcm92aWRlcikge1xyXG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xyXG4gICAgICAgIGlmIChwcm92aWRlci5pc0luaXRpYWxpemVkKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGVsZWdhdGUgPSBwcm92aWRlci5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICAgICAgdGhpcy5saW5rVW5kZXJseWluZ0F1dGgoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IGFwaUtleSB9ID0gYXBwLm9wdGlvbnM7XHJcbiAgICAgICAgLy8gVE9ETzogcGxhdGZvcm0gbmVlZHMgdG8gYmUgZGV0ZXJtaW5lZCB1c2luZyBoZXVyaXN0aWNzXHJcbiAgICAgICAgX2Fzc2VydCQxKGFwaUtleSwgXCJpbnZhbGlkLWFwaS1rZXlcIiAvKiBJTlZBTElEX0FQSV9LRVkgKi8sIHtcclxuICAgICAgICAgICAgYXBwTmFtZTogYXBwLm5hbWVcclxuICAgICAgICB9KTtcclxuICAgICAgICBsZXQgcGVyc2lzdGVuY2VzID0gW2V4cC5pbk1lbW9yeVBlcnNpc3RlbmNlXTtcclxuICAgICAgICAvLyBPbmx5IGRlYWwgd2l0aCBwZXJzaXN0ZW5jZXMgaW4gd2ViIGVudmlyb25tZW50c1xyXG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAvLyBOb3RlIHRoaXMgaXMgc2xpZ2h0bHkgZGlmZmVyZW50IGJlaGF2aW9yOiBpbiB0aGlzIGNhc2UsIHRoZSBzdG9yZWRcclxuICAgICAgICAgICAgLy8gcGVyc2lzdGVuY2UgaXMgY2hlY2tlZCAqZmlyc3QqIHJhdGhlciB0aGFuIGxhc3QuIFRoaXMgaXMgYmVjYXVzZSB3ZSB3YW50XHJcbiAgICAgICAgICAgIC8vIHRvIHByZWZlciBzdG9yZWQgcGVyc2lzdGVuY2UgdHlwZSBpbiB0aGUgaGllcmFyY2h5LlxyXG4gICAgICAgICAgICBwZXJzaXN0ZW5jZXMgPSBfZ2V0UGVyc2lzdGVuY2VzRnJvbVJlZGlyZWN0KGFwaUtleSwgYXBwLm5hbWUpO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBlcnNpc3RlbmNlIG9mIFtcclxuICAgICAgICAgICAgICAgIGV4cC5pbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlLFxyXG4gICAgICAgICAgICAgICAgZXhwLmJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlLFxyXG4gICAgICAgICAgICAgICAgZXhwLmJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2VcclxuICAgICAgICAgICAgXSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFwZXJzaXN0ZW5jZXMuaW5jbHVkZXMocGVyc2lzdGVuY2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGVyc2lzdGVuY2VzLnB1c2gocGVyc2lzdGVuY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFRPRE86IHBsYXRmb3JtIG5lZWRzIHRvIGJlIGRldGVybWluZWQgdXNpbmcgaGV1cmlzdGljc1xyXG4gICAgICAgIF9hc3NlcnQkMShhcGlLZXksIFwiaW52YWxpZC1hcGkta2V5XCIgLyogSU5WQUxJRF9BUElfS0VZICovLCB7XHJcbiAgICAgICAgICAgIGFwcE5hbWU6IGFwcC5uYW1lXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gT25seSB1c2UgYSBwb3B1cC9yZWRpcmVjdCByZXNvbHZlciBpbiBicm93c2VyIGVudmlyb25tZW50c1xyXG4gICAgICAgIGNvbnN0IHJlc29sdmVyID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyBDb21wYXRQb3B1cFJlZGlyZWN0UmVzb2x2ZXIgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUgPSBwcm92aWRlci5pbml0aWFsaXplKHtcclxuICAgICAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgcGVyc2lzdGVuY2U6IHBlcnNpc3RlbmNlcyxcclxuICAgICAgICAgICAgICAgIHBvcHVwUmVkaXJlY3RSZXNvbHZlcjogcmVzb2x2ZXJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlLl91cGRhdGVFcnJvck1hcChleHAuZGVidWdFcnJvck1hcCk7XHJcbiAgICAgICAgdGhpcy5saW5rVW5kZXJseWluZ0F1dGgoKTtcclxuICAgIH1cclxuICAgIGdldCBlbXVsYXRvckNvbmZpZygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuZW11bGF0b3JDb25maWc7XHJcbiAgICB9XHJcbiAgICBnZXQgY3VycmVudFVzZXIoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9kZWxlZ2F0ZS5jdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFVzZXIuZ2V0T3JDcmVhdGUodGhpcy5fZGVsZWdhdGUuY3VycmVudFVzZXIpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGxhbmd1YWdlQ29kZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUubGFuZ3VhZ2VDb2RlO1xyXG4gICAgfVxyXG4gICAgc2V0IGxhbmd1YWdlQ29kZShsYW5ndWFnZUNvZGUpIHtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZS5sYW5ndWFnZUNvZGUgPSBsYW5ndWFnZUNvZGU7XHJcbiAgICB9XHJcbiAgICBnZXQgc2V0dGluZ3MoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnNldHRpbmdzO1xyXG4gICAgfVxyXG4gICAgZ2V0IHRlbmFudElkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS50ZW5hbnRJZDtcclxuICAgIH1cclxuICAgIHNldCB0ZW5hbnRJZCh0aWQpIHtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZS50ZW5hbnRJZCA9IHRpZDtcclxuICAgIH1cclxuICAgIHVzZURldmljZUxhbmd1YWdlKCkge1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlLnVzZURldmljZUxhbmd1YWdlKCk7XHJcbiAgICB9XHJcbiAgICBzaWduT3V0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5zaWduT3V0KCk7XHJcbiAgICB9XHJcbiAgICB1c2VFbXVsYXRvcih1cmwsIG9wdGlvbnMpIHtcclxuICAgICAgICBleHAuY29ubmVjdEF1dGhFbXVsYXRvcih0aGlzLl9kZWxlZ2F0ZSwgdXJsLCBvcHRpb25zKTtcclxuICAgIH1cclxuICAgIGFwcGx5QWN0aW9uQ29kZShjb2RlKSB7XHJcbiAgICAgICAgcmV0dXJuIGV4cC5hcHBseUFjdGlvbkNvZGUodGhpcy5fZGVsZWdhdGUsIGNvZGUpO1xyXG4gICAgfVxyXG4gICAgY2hlY2tBY3Rpb25Db2RlKGNvZGUpIHtcclxuICAgICAgICByZXR1cm4gZXhwLmNoZWNrQWN0aW9uQ29kZSh0aGlzLl9kZWxlZ2F0ZSwgY29kZSk7XHJcbiAgICB9XHJcbiAgICBjb25maXJtUGFzc3dvcmRSZXNldChjb2RlLCBuZXdQYXNzd29yZCkge1xyXG4gICAgICAgIHJldHVybiBleHAuY29uZmlybVBhc3N3b3JkUmVzZXQodGhpcy5fZGVsZWdhdGUsIGNvZGUsIG5ld1Bhc3N3b3JkKTtcclxuICAgIH1cclxuICAgIGFzeW5jIGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZChlbWFpbCwgcGFzc3dvcmQpIHtcclxuICAgICAgICByZXR1cm4gY29udmVydENyZWRlbnRpYWwodGhpcy5fZGVsZWdhdGUsIGV4cC5jcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQodGhpcy5fZGVsZWdhdGUsIGVtYWlsLCBwYXNzd29yZCkpO1xyXG4gICAgfVxyXG4gICAgZmV0Y2hQcm92aWRlcnNGb3JFbWFpbChlbWFpbCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZldGNoU2lnbkluTWV0aG9kc0ZvckVtYWlsKGVtYWlsKTtcclxuICAgIH1cclxuICAgIGZldGNoU2lnbkluTWV0aG9kc0ZvckVtYWlsKGVtYWlsKSB7XHJcbiAgICAgICAgcmV0dXJuIGV4cC5mZXRjaFNpZ25Jbk1ldGhvZHNGb3JFbWFpbCh0aGlzLl9kZWxlZ2F0ZSwgZW1haWwpO1xyXG4gICAgfVxyXG4gICAgaXNTaWduSW5XaXRoRW1haWxMaW5rKGVtYWlsTGluaykge1xyXG4gICAgICAgIHJldHVybiBleHAuaXNTaWduSW5XaXRoRW1haWxMaW5rKHRoaXMuX2RlbGVnYXRlLCBlbWFpbExpbmspO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2V0UmVkaXJlY3RSZXN1bHQoKSB7XHJcbiAgICAgICAgX2Fzc2VydCQxKF9pc1BvcHVwUmVkaXJlY3RTdXBwb3J0ZWQoKSwgdGhpcy5fZGVsZWdhdGUsIFwib3BlcmF0aW9uLW5vdC1zdXBwb3J0ZWQtaW4tdGhpcy1lbnZpcm9ubWVudFwiIC8qIE9QRVJBVElPTl9OT1RfU1VQUE9SVEVEICovKTtcclxuICAgICAgICBjb25zdCBjcmVkZW50aWFsID0gYXdhaXQgZXhwLmdldFJlZGlyZWN0UmVzdWx0KHRoaXMuX2RlbGVnYXRlLCBDb21wYXRQb3B1cFJlZGlyZWN0UmVzb2x2ZXIpO1xyXG4gICAgICAgIGlmICghY3JlZGVudGlhbCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgY3JlZGVudGlhbDogbnVsbCxcclxuICAgICAgICAgICAgICAgIHVzZXI6IG51bGxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNvbnZlcnRDcmVkZW50aWFsKHRoaXMuX2RlbGVnYXRlLCBQcm9taXNlLnJlc29sdmUoY3JlZGVudGlhbCkpO1xyXG4gICAgfVxyXG4gICAgLy8gVGhpcyBmdW5jdGlvbiBzaG91bGQgb25seSBiZSBjYWxsZWQgYnkgZnJhbWV3b3JrcyAoZS5nLiBGaXJlYmFzZVVJLXdlYikgdG8gbG9nIHRoZWlyIHVzYWdlLlxyXG4gICAgLy8gSXQgaXMgbm90IGludGVuZGVkIGZvciBkaXJlY3QgdXNlIGJ5IGRldmVsb3BlciBhcHBzLiBOTyBqc2RvYyBoZXJlIHRvIGludGVudGlvbmFsbHkgbGVhdmUgaXRcclxuICAgIC8vIG91dCBvZiBhdXRvZ2VuZXJhdGVkIGRvY3VtZW50YXRpb24gcGFnZXMgdG8gcmVkdWNlIGFjY2lkZW50YWwgbWlzdXNlLlxyXG4gICAgYWRkRnJhbWV3b3JrRm9yTG9nZ2luZyhmcmFtZXdvcmspIHtcclxuICAgICAgICBleHAuYWRkRnJhbWV3b3JrRm9yTG9nZ2luZyh0aGlzLl9kZWxlZ2F0ZSwgZnJhbWV3b3JrKTtcclxuICAgIH1cclxuICAgIG9uQXV0aFN0YXRlQ2hhbmdlZChuZXh0T3JPYnNlcnZlciwgZXJyb3JGbiwgY29tcGxldGVkKSB7XHJcbiAgICAgICAgY29uc3QgeyBuZXh0LCBlcnJvciwgY29tcGxldGUgfSA9IHdyYXBPYnNlcnZlcnMobmV4dE9yT2JzZXJ2ZXIsIGVycm9yRm4sIGNvbXBsZXRlZCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLm9uQXV0aFN0YXRlQ2hhbmdlZChuZXh0LCBlcnJvciwgY29tcGxldGUpO1xyXG4gICAgfVxyXG4gICAgb25JZFRva2VuQ2hhbmdlZChuZXh0T3JPYnNlcnZlciwgZXJyb3JGbiwgY29tcGxldGVkKSB7XHJcbiAgICAgICAgY29uc3QgeyBuZXh0LCBlcnJvciwgY29tcGxldGUgfSA9IHdyYXBPYnNlcnZlcnMobmV4dE9yT2JzZXJ2ZXIsIGVycm9yRm4sIGNvbXBsZXRlZCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLm9uSWRUb2tlbkNoYW5nZWQobmV4dCwgZXJyb3IsIGNvbXBsZXRlKTtcclxuICAgIH1cclxuICAgIHNlbmRTaWduSW5MaW5rVG9FbWFpbChlbWFpbCwgYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICAgICAgcmV0dXJuIGV4cC5zZW5kU2lnbkluTGlua1RvRW1haWwodGhpcy5fZGVsZWdhdGUsIGVtYWlsLCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gICAgfVxyXG4gICAgc2VuZFBhc3N3b3JkUmVzZXRFbWFpbChlbWFpbCwgYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICAgICAgcmV0dXJuIGV4cC5zZW5kUGFzc3dvcmRSZXNldEVtYWlsKHRoaXMuX2RlbGVnYXRlLCBlbWFpbCwgYWN0aW9uQ29kZVNldHRpbmdzIHx8IHVuZGVmaW5lZCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBzZXRQZXJzaXN0ZW5jZShwZXJzaXN0ZW5jZSkge1xyXG4gICAgICAgIF92YWxpZGF0ZVBlcnNpc3RlbmNlQXJndW1lbnQodGhpcy5fZGVsZWdhdGUsIHBlcnNpc3RlbmNlKTtcclxuICAgICAgICBsZXQgY29udmVydGVkO1xyXG4gICAgICAgIHN3aXRjaCAocGVyc2lzdGVuY2UpIHtcclxuICAgICAgICAgICAgY2FzZSBQZXJzaXN0ZW5jZS5TRVNTSU9OOlxyXG4gICAgICAgICAgICAgICAgY29udmVydGVkID0gZXhwLmJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2U7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBQZXJzaXN0ZW5jZS5MT0NBTDpcclxuICAgICAgICAgICAgICAgIC8vIE5vdCB1c2luZyBpc0luZGV4ZWREQkF2YWlsYWJsZSgpIHNpbmNlIGl0IG9ubHkgY2hlY2tzIGlmIGluZGV4ZWREQiBpcyBkZWZpbmVkLlxyXG4gICAgICAgICAgICAgICAgY29uc3QgaXNJbmRleGVkREJGdWxseVN1cHBvcnRlZCA9IGF3YWl0IGV4cFxyXG4gICAgICAgICAgICAgICAgICAgIC5fZ2V0SW5zdGFuY2UoZXhwLmluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgLl9pc0F2YWlsYWJsZSgpO1xyXG4gICAgICAgICAgICAgICAgY29udmVydGVkID0gaXNJbmRleGVkREJGdWxseVN1cHBvcnRlZFxyXG4gICAgICAgICAgICAgICAgICAgID8gZXhwLmluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2VcclxuICAgICAgICAgICAgICAgICAgICA6IGV4cC5icm93c2VyTG9jYWxQZXJzaXN0ZW5jZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFBlcnNpc3RlbmNlLk5PTkU6XHJcbiAgICAgICAgICAgICAgICBjb252ZXJ0ZWQgPSBleHAuaW5NZW1vcnlQZXJzaXN0ZW5jZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4cC5fZmFpbChcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8sIHtcclxuICAgICAgICAgICAgICAgICAgICBhcHBOYW1lOiB0aGlzLl9kZWxlZ2F0ZS5uYW1lXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnNldFBlcnNpc3RlbmNlKGNvbnZlcnRlZCk7XHJcbiAgICB9XHJcbiAgICBzaWduSW5BbmRSZXRyaWV2ZURhdGFXaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2lnbkluV2l0aENyZWRlbnRpYWwoY3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbiAgICBzaWduSW5Bbm9ueW1vdXNseSgpIHtcclxuICAgICAgICByZXR1cm4gY29udmVydENyZWRlbnRpYWwodGhpcy5fZGVsZWdhdGUsIGV4cC5zaWduSW5Bbm9ueW1vdXNseSh0aGlzLl9kZWxlZ2F0ZSkpO1xyXG4gICAgfVxyXG4gICAgc2lnbkluV2l0aENyZWRlbnRpYWwoY3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBjb252ZXJ0Q3JlZGVudGlhbCh0aGlzLl9kZWxlZ2F0ZSwgZXhwLnNpZ25JbldpdGhDcmVkZW50aWFsKHRoaXMuX2RlbGVnYXRlLCBjcmVkZW50aWFsKSk7XHJcbiAgICB9XHJcbiAgICBzaWduSW5XaXRoQ3VzdG9tVG9rZW4odG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gY29udmVydENyZWRlbnRpYWwodGhpcy5fZGVsZWdhdGUsIGV4cC5zaWduSW5XaXRoQ3VzdG9tVG9rZW4odGhpcy5fZGVsZWdhdGUsIHRva2VuKSk7XHJcbiAgICB9XHJcbiAgICBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChlbWFpbCwgcGFzc3dvcmQpIHtcclxuICAgICAgICByZXR1cm4gY29udmVydENyZWRlbnRpYWwodGhpcy5fZGVsZWdhdGUsIGV4cC5zaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZCh0aGlzLl9kZWxlZ2F0ZSwgZW1haWwsIHBhc3N3b3JkKSk7XHJcbiAgICB9XHJcbiAgICBzaWduSW5XaXRoRW1haWxMaW5rKGVtYWlsLCBlbWFpbExpbmspIHtcclxuICAgICAgICByZXR1cm4gY29udmVydENyZWRlbnRpYWwodGhpcy5fZGVsZWdhdGUsIGV4cC5zaWduSW5XaXRoRW1haWxMaW5rKHRoaXMuX2RlbGVnYXRlLCBlbWFpbCwgZW1haWxMaW5rKSk7XHJcbiAgICB9XHJcbiAgICBzaWduSW5XaXRoUGhvbmVOdW1iZXIocGhvbmVOdW1iZXIsIGFwcGxpY2F0aW9uVmVyaWZpZXIpIHtcclxuICAgICAgICByZXR1cm4gY29udmVydENvbmZpcm1hdGlvblJlc3VsdCh0aGlzLl9kZWxlZ2F0ZSwgZXhwLnNpZ25JbldpdGhQaG9uZU51bWJlcih0aGlzLl9kZWxlZ2F0ZSwgcGhvbmVOdW1iZXIsIGFwcGxpY2F0aW9uVmVyaWZpZXIpKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHNpZ25JbldpdGhQb3B1cChwcm92aWRlcikge1xyXG4gICAgICAgIF9hc3NlcnQkMShfaXNQb3B1cFJlZGlyZWN0U3VwcG9ydGVkKCksIHRoaXMuX2RlbGVnYXRlLCBcIm9wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnRcIiAvKiBPUEVSQVRJT05fTk9UX1NVUFBPUlRFRCAqLyk7XHJcbiAgICAgICAgcmV0dXJuIGNvbnZlcnRDcmVkZW50aWFsKHRoaXMuX2RlbGVnYXRlLCBleHAuc2lnbkluV2l0aFBvcHVwKHRoaXMuX2RlbGVnYXRlLCBwcm92aWRlciwgQ29tcGF0UG9wdXBSZWRpcmVjdFJlc29sdmVyKSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBzaWduSW5XaXRoUmVkaXJlY3QocHJvdmlkZXIpIHtcclxuICAgICAgICBfYXNzZXJ0JDEoX2lzUG9wdXBSZWRpcmVjdFN1cHBvcnRlZCgpLCB0aGlzLl9kZWxlZ2F0ZSwgXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIgLyogT1BFUkFUSU9OX05PVF9TVVBQT1JURUQgKi8pO1xyXG4gICAgICAgIGF3YWl0IF9zYXZlUGVyc2lzdGVuY2VGb3JSZWRpcmVjdCh0aGlzLl9kZWxlZ2F0ZSk7XHJcbiAgICAgICAgcmV0dXJuIGV4cC5zaWduSW5XaXRoUmVkaXJlY3QodGhpcy5fZGVsZWdhdGUsIHByb3ZpZGVyLCBDb21wYXRQb3B1cFJlZGlyZWN0UmVzb2x2ZXIpO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlQ3VycmVudFVzZXIodXNlcikge1xyXG4gICAgICAgIC8vIHJlbW92ZSB0cy1pZ25vcmUgb25jZSBvdmVybG9hZHMgYXJlIGRlZmluZWQgZm9yIGV4cCBmdW5jdGlvbnMgdG8gYWNjZXB0IGNvbXBhdCBvYmplY3RzXHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS51cGRhdGVDdXJyZW50VXNlcih1c2VyKTtcclxuICAgIH1cclxuICAgIHZlcmlmeVBhc3N3b3JkUmVzZXRDb2RlKGNvZGUpIHtcclxuICAgICAgICByZXR1cm4gZXhwLnZlcmlmeVBhc3N3b3JkUmVzZXRDb2RlKHRoaXMuX2RlbGVnYXRlLCBjb2RlKTtcclxuICAgIH1cclxuICAgIHVud3JhcCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGU7XHJcbiAgICB9XHJcbiAgICBfZGVsZXRlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5fZGVsZXRlKCk7XHJcbiAgICB9XHJcbiAgICBsaW5rVW5kZXJseWluZ0F1dGgoKSB7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUud3JhcHBlZCA9ICgpID0+IHRoaXM7XHJcbiAgICB9XHJcbn1cclxuQXV0aC5QZXJzaXN0ZW5jZSA9IFBlcnNpc3RlbmNlO1xyXG5mdW5jdGlvbiB3cmFwT2JzZXJ2ZXJzKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpIHtcclxuICAgIGxldCBuZXh0ID0gbmV4dE9yT2JzZXJ2ZXI7XHJcbiAgICBpZiAodHlwZW9mIG5leHRPck9ic2VydmVyICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgKHsgbmV4dCwgZXJyb3IsIGNvbXBsZXRlIH0gPSBuZXh0T3JPYnNlcnZlcik7XHJcbiAgICB9XHJcbiAgICAvLyBXZSBrbm93ICduZXh0JyBpcyBub3cgYSBmdW5jdGlvblxyXG4gICAgY29uc3Qgb2xkTmV4dCA9IG5leHQ7XHJcbiAgICBjb25zdCBuZXdOZXh0ID0gKHVzZXIpID0+IG9sZE5leHQodXNlciAmJiBVc2VyLmdldE9yQ3JlYXRlKHVzZXIpKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogbmV3TmV4dCxcclxuICAgICAgICBlcnJvcjogZXJyb3IsXHJcbiAgICAgICAgY29tcGxldGVcclxuICAgIH07XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgUGhvbmVBdXRoUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlcklkID0gJ3Bob25lJztcclxuICAgICAgICAvLyBUT0RPOiByZW1vdmUgdHMtaWdub3JlIHdoZW4gbW92aW5nIHR5cGVzIGZyb20gYXV0aC10eXBlcyB0byBhdXRoLWNvbXBhdFxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IG5ldyBleHAuUGhvbmVBdXRoUHJvdmlkZXIodW53cmFwKGZpcmViYXNlLmF1dGgoKSkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGNyZWRlbnRpYWwodmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUpIHtcclxuICAgICAgICByZXR1cm4gZXhwLlBob25lQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwodmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUpO1xyXG4gICAgfVxyXG4gICAgdmVyaWZ5UGhvbmVOdW1iZXIocGhvbmVJbmZvT3B0aW9ucywgYXBwbGljYXRpb25WZXJpZmllcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS52ZXJpZnlQaG9uZU51bWJlcihcclxuICAgICAgICAvLyBUaGUgaW1wbGVtZW50YXRpb24gbWF0Y2hlcyBidXQgdGhlIHR5cGVzIGFyZSBzdWJ0bHkgaW5jb21wYXRpYmxlXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICBwaG9uZUluZm9PcHRpb25zLCBhcHBsaWNhdGlvblZlcmlmaWVyKTtcclxuICAgIH1cclxuICAgIHVud3JhcCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGU7XHJcbiAgICB9XHJcbn1cclxuUGhvbmVBdXRoUHJvdmlkZXIuUEhPTkVfU0lHTl9JTl9NRVRIT0QgPSBleHAuUGhvbmVBdXRoUHJvdmlkZXIuUEhPTkVfU0lHTl9JTl9NRVRIT0Q7XHJcblBob25lQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lEID0gZXhwLlBob25lQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lEO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBfYXNzZXJ0ID0gZXhwLl9hc3NlcnQ7XHJcbmNsYXNzIFJlY2FwdGNoYVZlcmlmaWVyIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lciwgcGFyYW1ldGVycywgYXBwID0gZmlyZWJhc2UuYXBwKCkpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgLy8gQVBJIGtleSBpcyByZXF1aXJlZCBmb3Igd2ViIGNsaWVudCBSUEMgY2FsbHMuXHJcbiAgICAgICAgX2Fzc2VydCgoX2EgPSBhcHAub3B0aW9ucykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmFwaUtleSwgXCJpbnZhbGlkLWFwaS1rZXlcIiAvKiBJTlZBTElEX0FQSV9LRVkgKi8sIHtcclxuICAgICAgICAgICAgYXBwTmFtZTogYXBwLm5hbWVcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IG5ldyBleHAuUmVjYXB0Y2hhVmVyaWZpZXIoY29udGFpbmVyLCBcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgIHBhcmFtZXRlcnMsIFxyXG4gICAgICAgIC8vIFRPRE86IHJlbW92ZSB0cy1pZ25vcmUgd2hlbiBtb3ZpbmcgdHlwZXMgZnJvbSBhdXRoLXR5cGVzIHRvIGF1dGgtY29tcGF0XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGFwcC5hdXRoKCkpO1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHRoaXMuX2RlbGVnYXRlLnR5cGU7XHJcbiAgICB9XHJcbiAgICBjbGVhcigpIHtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZS5jbGVhcigpO1xyXG4gICAgfVxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5yZW5kZXIoKTtcclxuICAgIH1cclxuICAgIHZlcmlmeSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUudmVyaWZ5KCk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgQVVUSF9UWVBFID0gJ2F1dGgtY29tcGF0JztcclxuLy8gQ3JlYXRlIGF1dGggY29tcG9uZW50cyB0byByZWdpc3RlciB3aXRoIGZpcmViYXNlLlxyXG4vLyBQcm92aWRlcyBBdXRoIHB1YmxpYyBBUElzLlxyXG5mdW5jdGlvbiByZWdpc3RlckF1dGhDb21wYXQoaW5zdGFuY2UpIHtcclxuICAgIGluc3RhbmNlLklOVEVSTkFMLnJlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoQVVUSF9UWVBFLCBjb250YWluZXIgPT4ge1xyXG4gICAgICAgIC8vIGdldEltbWVkaWF0ZSBmb3IgRmlyZWJhc2VBcHAgd2lsbCBhbHdheXMgc3VjY2VlZFxyXG4gICAgICAgIGNvbnN0IGFwcCA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignYXBwLWNvbXBhdCcpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIGNvbnN0IGF1dGhQcm92aWRlciA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignYXV0aCcpO1xyXG4gICAgICAgIHJldHVybiBuZXcgQXV0aChhcHAsIGF1dGhQcm92aWRlcik7XHJcbiAgICB9LCBcIlBVQkxJQ1wiIC8qIFBVQkxJQyAqLylcclxuICAgICAgICAuc2V0U2VydmljZVByb3BzKHtcclxuICAgICAgICBBY3Rpb25Db2RlSW5mbzoge1xyXG4gICAgICAgICAgICBPcGVyYXRpb246IHtcclxuICAgICAgICAgICAgICAgIEVNQUlMX1NJR05JTjogZXhwLkFjdGlvbkNvZGVPcGVyYXRpb24uRU1BSUxfU0lHTklOLFxyXG4gICAgICAgICAgICAgICAgUEFTU1dPUkRfUkVTRVQ6IGV4cC5BY3Rpb25Db2RlT3BlcmF0aW9uLlBBU1NXT1JEX1JFU0VULFxyXG4gICAgICAgICAgICAgICAgUkVDT1ZFUl9FTUFJTDogZXhwLkFjdGlvbkNvZGVPcGVyYXRpb24uUkVDT1ZFUl9FTUFJTCxcclxuICAgICAgICAgICAgICAgIFJFVkVSVF9TRUNPTkRfRkFDVE9SX0FERElUSU9OOiBleHAuQWN0aW9uQ29kZU9wZXJhdGlvbi5SRVZFUlRfU0VDT05EX0ZBQ1RPUl9BRERJVElPTixcclxuICAgICAgICAgICAgICAgIFZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMOiBleHAuQWN0aW9uQ29kZU9wZXJhdGlvbi5WRVJJRllfQU5EX0NIQU5HRV9FTUFJTCxcclxuICAgICAgICAgICAgICAgIFZFUklGWV9FTUFJTDogZXhwLkFjdGlvbkNvZGVPcGVyYXRpb24uVkVSSUZZX0VNQUlMXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIEVtYWlsQXV0aFByb3ZpZGVyOiBleHAuRW1haWxBdXRoUHJvdmlkZXIsXHJcbiAgICAgICAgRmFjZWJvb2tBdXRoUHJvdmlkZXI6IGV4cC5GYWNlYm9va0F1dGhQcm92aWRlcixcclxuICAgICAgICBHaXRodWJBdXRoUHJvdmlkZXI6IGV4cC5HaXRodWJBdXRoUHJvdmlkZXIsXHJcbiAgICAgICAgR29vZ2xlQXV0aFByb3ZpZGVyOiBleHAuR29vZ2xlQXV0aFByb3ZpZGVyLFxyXG4gICAgICAgIE9BdXRoUHJvdmlkZXI6IGV4cC5PQXV0aFByb3ZpZGVyLFxyXG4gICAgICAgIFNBTUxBdXRoUHJvdmlkZXI6IGV4cC5TQU1MQXV0aFByb3ZpZGVyLFxyXG4gICAgICAgIFBob25lQXV0aFByb3ZpZGVyOiBQaG9uZUF1dGhQcm92aWRlcixcclxuICAgICAgICBQaG9uZU11bHRpRmFjdG9yR2VuZXJhdG9yOiBleHAuUGhvbmVNdWx0aUZhY3RvckdlbmVyYXRvcixcclxuICAgICAgICBSZWNhcHRjaGFWZXJpZmllcjogUmVjYXB0Y2hhVmVyaWZpZXIsXHJcbiAgICAgICAgVHdpdHRlckF1dGhQcm92aWRlcjogZXhwLlR3aXR0ZXJBdXRoUHJvdmlkZXIsXHJcbiAgICAgICAgQXV0aCxcclxuICAgICAgICBBdXRoQ3JlZGVudGlhbDogZXhwLkF1dGhDcmVkZW50aWFsLFxyXG4gICAgICAgIEVycm9yOiBGaXJlYmFzZUVycm9yXHJcbiAgICB9KVxyXG4gICAgICAgIC5zZXRJbnN0YW50aWF0aW9uTW9kZShcIkxBWllcIiAvKiBMQVpZICovKVxyXG4gICAgICAgIC5zZXRNdWx0aXBsZUluc3RhbmNlcyhmYWxzZSkpO1xyXG4gICAgaW5zdGFuY2UucmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24pO1xyXG59XHJcbnJlZ2lzdGVyQXV0aENvbXBhdChmaXJlYmFzZSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblxucHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW10gfVxuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbiIsImV4cG9ydCAqIGZyb20gJ0BmaXJlYmFzZS9maXJlc3RvcmUnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtLmpzLm1hcFxuIiwiaW1wb3J0IGZpcmViYXNlIGZyb20gJ0BmaXJlYmFzZS9hcHAtY29tcGF0JztcbmltcG9ydCB7IEZpcmVzdG9yZUVycm9yLCBCeXRlcywgX2lzQmFzZTY0QXZhaWxhYmxlLCBlbmFibGVJbmRleGVkRGJQZXJzaXN0ZW5jZSwgZW5hYmxlTXVsdGlUYWJJbmRleGVkRGJQZXJzaXN0ZW5jZSwgY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZSwgX0RhdGFiYXNlSWQsIF9sb2dXYXJuLCBjb25uZWN0RmlyZXN0b3JlRW11bGF0b3IsIGVuYWJsZU5ldHdvcmssIGRpc2FibGVOZXR3b3JrLCBfdmFsaWRhdGVJc05vdFVzZWRUb2dldGhlciwgd2FpdEZvclBlbmRpbmdXcml0ZXMsIG9uU25hcHNob3RzSW5TeW5jLCBjb2xsZWN0aW9uLCBkb2MsIGNvbGxlY3Rpb25Hcm91cCwgcnVuVHJhbnNhY3Rpb24sIGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQsIFdyaXRlQmF0Y2ggYXMgV3JpdGVCYXRjaCQxLCBleGVjdXRlV3JpdGUsIGxvYWRCdW5kbGUsIG5hbWVkUXVlcnksIF9jYXN0LCBEb2N1bWVudFJlZmVyZW5jZSBhcyBEb2N1bWVudFJlZmVyZW5jZSQxLCBEb2N1bWVudFNuYXBzaG90IGFzIERvY3VtZW50U25hcHNob3QkMSwgX0RvY3VtZW50S2V5LCByZWZFcXVhbCwgc2V0RG9jLCB1cGRhdGVEb2MsIGRlbGV0ZURvYywgb25TbmFwc2hvdCwgZ2V0RG9jRnJvbUNhY2hlLCBnZXREb2NGcm9tU2VydmVyLCBnZXREb2MsIHNuYXBzaG90RXF1YWwsIHF1ZXJ5LCB3aGVyZSwgb3JkZXJCeSwgbGltaXQsIGxpbWl0VG9MYXN0LCBzdGFydEF0LCBzdGFydEFmdGVyLCBlbmRCZWZvcmUsIGVuZEF0LCBxdWVyeUVxdWFsLCBnZXREb2NzRnJvbUNhY2hlLCBnZXREb2NzRnJvbVNlcnZlciwgZ2V0RG9jcywgUXVlcnlTbmFwc2hvdCBhcyBRdWVyeVNuYXBzaG90JDEsIGFkZERvYywgQWJzdHJhY3RVc2VyRGF0YVdyaXRlciwgc2V0TG9nTGV2ZWwgYXMgc2V0TG9nTGV2ZWwkMSwgUXVlcnlEb2N1bWVudFNuYXBzaG90IGFzIFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCQxLCBfZGVidWdBc3NlcnQsIEZpZWxkUGF0aCBhcyBGaWVsZFBhdGgkMSwgX0ZpZWxkUGF0aCwgc2VydmVyVGltZXN0YW1wLCBkZWxldGVGaWVsZCwgYXJyYXlVbmlvbiwgYXJyYXlSZW1vdmUsIGluY3JlbWVudCwgR2VvUG9pbnQsIFRpbWVzdGFtcCwgQ0FDSEVfU0laRV9VTkxJTUlURUQgfSBmcm9tICdAZmlyZWJhc2UvZmlyZXN0b3JlJztcbmltcG9ydCB7IGdldE1vZHVsYXJJbnN0YW5jZSB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuXG5jb25zdCBuYW1lID0gXCJAZmlyZWJhc2UvZmlyZXN0b3JlLWNvbXBhdFwiO1xuY29uc3QgdmVyc2lvbiA9IFwiMC4xLjEwXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlU2V0T3B0aW9ucyhtZXRob2ROYW1lLCBvcHRpb25zKSB7XHJcbiAgICBpZiAob3B0aW9ucyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbWVyZ2U6IGZhbHNlXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGlmIChvcHRpb25zLm1lcmdlRmllbGRzICE9PSB1bmRlZmluZWQgJiYgb3B0aW9ucy5tZXJnZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKCdpbnZhbGlkLWFyZ3VtZW50JywgYEludmFsaWQgb3B0aW9ucyBwYXNzZWQgdG8gZnVuY3Rpb24gJHttZXRob2ROYW1lfSgpOiBZb3UgY2Fubm90IGAgK1xyXG4gICAgICAgICAgICAnc3BlY2lmeSBib3RoIFwibWVyZ2VcIiBhbmQgXCJtZXJnZUZpZWxkc1wiLicpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG9wdGlvbnM7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqIEhlbHBlciBmdW5jdGlvbiB0byBhc3NlcnQgVWludDhBcnJheSBpcyBhdmFpbGFibGUgYXQgcnVudGltZS4gKi9cclxuZnVuY3Rpb24gYXNzZXJ0VWludDhBcnJheUF2YWlsYWJsZSgpIHtcclxuICAgIGlmICh0eXBlb2YgVWludDhBcnJheSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoJ3VuaW1wbGVtZW50ZWQnLCAnVWludDhBcnJheXMgYXJlIG5vdCBhdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudC4nKTtcclxuICAgIH1cclxufVxyXG4vKiogSGVscGVyIGZ1bmN0aW9uIHRvIGFzc2VydCBCYXNlNjQgZnVuY3Rpb25zIGFyZSBhdmFpbGFibGUgYXQgcnVudGltZS4gKi9cclxuZnVuY3Rpb24gYXNzZXJ0QmFzZTY0QXZhaWxhYmxlKCkge1xyXG4gICAgaWYgKCFfaXNCYXNlNjRBdmFpbGFibGUoKSkge1xyXG4gICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcigndW5pbXBsZW1lbnRlZCcsICdCbG9icyBhcmUgdW5hdmFpbGFibGUgaW4gRmlyZXN0b3JlIGluIHRoaXMgZW52aXJvbm1lbnQuJyk7XHJcbiAgICB9XHJcbn1cclxuLyoqIEltbXV0YWJsZSBjbGFzcyBob2xkaW5nIGEgYmxvYiAoYmluYXJ5IGRhdGEpICovXHJcbmNsYXNzIEJsb2Ige1xyXG4gICAgY29uc3RydWN0b3IoX2RlbGVnYXRlKSB7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUgPSBfZGVsZWdhdGU7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZnJvbUJhc2U2NFN0cmluZyhiYXNlNjQpIHtcclxuICAgICAgICBhc3NlcnRCYXNlNjRBdmFpbGFibGUoKTtcclxuICAgICAgICByZXR1cm4gbmV3IEJsb2IoQnl0ZXMuZnJvbUJhc2U2NFN0cmluZyhiYXNlNjQpKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBmcm9tVWludDhBcnJheShhcnJheSkge1xyXG4gICAgICAgIGFzc2VydFVpbnQ4QXJyYXlBdmFpbGFibGUoKTtcclxuICAgICAgICByZXR1cm4gbmV3IEJsb2IoQnl0ZXMuZnJvbVVpbnQ4QXJyYXkoYXJyYXkpKTtcclxuICAgIH1cclxuICAgIHRvQmFzZTY0KCkge1xyXG4gICAgICAgIGFzc2VydEJhc2U2NEF2YWlsYWJsZSgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS50b0Jhc2U2NCgpO1xyXG4gICAgfVxyXG4gICAgdG9VaW50OEFycmF5KCkge1xyXG4gICAgICAgIGFzc2VydFVpbnQ4QXJyYXlBdmFpbGFibGUoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUudG9VaW50OEFycmF5KCk7XHJcbiAgICB9XHJcbiAgICBpc0VxdWFsKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmlzRXF1YWwob3RoZXIuX2RlbGVnYXRlKTtcclxuICAgIH1cclxuICAgIHRvU3RyaW5nKCkge1xyXG4gICAgICAgIHJldHVybiAnQmxvYihiYXNlNjQ6ICcgKyB0aGlzLnRvQmFzZTY0KCkgKyAnKSc7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNQYXJ0aWFsT2JzZXJ2ZXIob2JqKSB7XHJcbiAgICByZXR1cm4gaW1wbGVtZW50c0FueU1ldGhvZHMob2JqLCBbJ25leHQnLCAnZXJyb3InLCAnY29tcGxldGUnXSk7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgdHJ1ZSBpZiBvYmogaXMgYW4gb2JqZWN0IGFuZCBjb250YWlucyBhdCBsZWFzdCBvbmUgb2YgdGhlIHNwZWNpZmllZFxyXG4gKiBtZXRob2RzLlxyXG4gKi9cclxuZnVuY3Rpb24gaW1wbGVtZW50c0FueU1ldGhvZHMob2JqLCBtZXRob2RzKSB7XHJcbiAgICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcgfHwgb2JqID09PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgb2JqZWN0ID0gb2JqO1xyXG4gICAgZm9yIChjb25zdCBtZXRob2Qgb2YgbWV0aG9kcykge1xyXG4gICAgICAgIGlmIChtZXRob2QgaW4gb2JqZWN0ICYmIHR5cGVvZiBvYmplY3RbbWV0aG9kXSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBwZXJzaXN0ZW5jZSBwcm92aWRlciBpbmNsdWRlZCB3aXRoIHRoZSBmdWxsIEZpcmVzdG9yZSBTREsuXHJcbiAqL1xyXG5jbGFzcyBJbmRleGVkRGJQZXJzaXN0ZW5jZVByb3ZpZGVyIHtcclxuICAgIGVuYWJsZUluZGV4ZWREYlBlcnNpc3RlbmNlKGZpcmVzdG9yZSwgZm9yY2VPd25lcnNoaXApIHtcclxuICAgICAgICByZXR1cm4gZW5hYmxlSW5kZXhlZERiUGVyc2lzdGVuY2UoZmlyZXN0b3JlLl9kZWxlZ2F0ZSwgeyBmb3JjZU93bmVyc2hpcCB9KTtcclxuICAgIH1cclxuICAgIGVuYWJsZU11bHRpVGFiSW5kZXhlZERiUGVyc2lzdGVuY2UoZmlyZXN0b3JlKSB7XHJcbiAgICAgICAgcmV0dXJuIGVuYWJsZU11bHRpVGFiSW5kZXhlZERiUGVyc2lzdGVuY2UoZmlyZXN0b3JlLl9kZWxlZ2F0ZSk7XHJcbiAgICB9XHJcbiAgICBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlKGZpcmVzdG9yZSkge1xyXG4gICAgICAgIHJldHVybiBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlKGZpcmVzdG9yZS5fZGVsZWdhdGUpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBDb21wYXQgY2xhc3MgZm9yIEZpcmVzdG9yZS4gRXhwb3NlcyBGaXJlc3RvcmUgTGVnYWN5IEFQSSwgYnV0IGRlbGVnYXRlc1xyXG4gKiB0byB0aGUgZnVuY3Rpb25hbCBBUEkgb2YgZmlyZXN0b3JlLWV4cC5cclxuICovXHJcbmNsYXNzIEZpcmVzdG9yZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhYmFzZUlkT3JBcHAsIF9kZWxlZ2F0ZSwgX3BlcnNpc3RlbmNlUHJvdmlkZXIpIHtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IF9kZWxlZ2F0ZTtcclxuICAgICAgICB0aGlzLl9wZXJzaXN0ZW5jZVByb3ZpZGVyID0gX3BlcnNpc3RlbmNlUHJvdmlkZXI7XHJcbiAgICAgICAgdGhpcy5JTlRFUk5BTCA9IHtcclxuICAgICAgICAgICAgZGVsZXRlOiAoKSA9PiB0aGlzLnRlcm1pbmF0ZSgpXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAoIShkYXRhYmFzZUlkT3JBcHAgaW5zdGFuY2VvZiBfRGF0YWJhc2VJZCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fYXBwQ29tcGF0ID0gZGF0YWJhc2VJZE9yQXBwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldCBfZGF0YWJhc2VJZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuX2RhdGFiYXNlSWQ7XHJcbiAgICB9XHJcbiAgICBzZXR0aW5ncyhzZXR0aW5nc0xpdGVyYWwpIHtcclxuICAgICAgICBjb25zdCBjdXJyZW50U2V0dGluZ3MgPSB0aGlzLl9kZWxlZ2F0ZS5fZ2V0U2V0dGluZ3MoKTtcclxuICAgICAgICBpZiAoIXNldHRpbmdzTGl0ZXJhbC5tZXJnZSAmJlxyXG4gICAgICAgICAgICBjdXJyZW50U2V0dGluZ3MuaG9zdCAhPT0gc2V0dGluZ3NMaXRlcmFsLmhvc3QpIHtcclxuICAgICAgICAgICAgX2xvZ1dhcm4oJ1lvdSBhcmUgb3ZlcnJpZGluZyB0aGUgb3JpZ2luYWwgaG9zdC4gSWYgeW91IGRpZCBub3QgaW50ZW5kICcgK1xyXG4gICAgICAgICAgICAgICAgJ3RvIG92ZXJyaWRlIHlvdXIgc2V0dGluZ3MsIHVzZSB7bWVyZ2U6IHRydWV9LicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc2V0dGluZ3NMaXRlcmFsLm1lcmdlKSB7XHJcbiAgICAgICAgICAgIHNldHRpbmdzTGl0ZXJhbCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgY3VycmVudFNldHRpbmdzKSwgc2V0dGluZ3NMaXRlcmFsKTtcclxuICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBwcm9wZXJ0eSBmcm9tIHRoZSBzZXR0aW5ncyBvbmNlIHRoZSBtZXJnZSBpcyBjb21wbGV0ZWRcclxuICAgICAgICAgICAgZGVsZXRlIHNldHRpbmdzTGl0ZXJhbC5tZXJnZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUuX3NldFNldHRpbmdzKHNldHRpbmdzTGl0ZXJhbCk7XHJcbiAgICB9XHJcbiAgICB1c2VFbXVsYXRvcihob3N0LCBwb3J0LCBvcHRpb25zID0ge30pIHtcclxuICAgICAgICBjb25uZWN0RmlyZXN0b3JlRW11bGF0b3IodGhpcy5fZGVsZWdhdGUsIGhvc3QsIHBvcnQsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG4gICAgZW5hYmxlTmV0d29yaygpIHtcclxuICAgICAgICByZXR1cm4gZW5hYmxlTmV0d29yayh0aGlzLl9kZWxlZ2F0ZSk7XHJcbiAgICB9XHJcbiAgICBkaXNhYmxlTmV0d29yaygpIHtcclxuICAgICAgICByZXR1cm4gZGlzYWJsZU5ldHdvcmsodGhpcy5fZGVsZWdhdGUpO1xyXG4gICAgfVxyXG4gICAgZW5hYmxlUGVyc2lzdGVuY2Uoc2V0dGluZ3MpIHtcclxuICAgICAgICBsZXQgc3luY2hyb25pemVUYWJzID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IGV4cGVyaW1lbnRhbEZvcmNlT3duaW5nVGFiID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHNldHRpbmdzKSB7XHJcbiAgICAgICAgICAgIHN5bmNocm9uaXplVGFicyA9ICEhc2V0dGluZ3Muc3luY2hyb25pemVUYWJzO1xyXG4gICAgICAgICAgICBleHBlcmltZW50YWxGb3JjZU93bmluZ1RhYiA9ICEhc2V0dGluZ3MuZXhwZXJpbWVudGFsRm9yY2VPd25pbmdUYWI7XHJcbiAgICAgICAgICAgIF92YWxpZGF0ZUlzTm90VXNlZFRvZ2V0aGVyKCdzeW5jaHJvbml6ZVRhYnMnLCBzeW5jaHJvbml6ZVRhYnMsICdleHBlcmltZW50YWxGb3JjZU93bmluZ1RhYicsIGV4cGVyaW1lbnRhbEZvcmNlT3duaW5nVGFiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHN5bmNocm9uaXplVGFic1xyXG4gICAgICAgICAgICA/IHRoaXMuX3BlcnNpc3RlbmNlUHJvdmlkZXIuZW5hYmxlTXVsdGlUYWJJbmRleGVkRGJQZXJzaXN0ZW5jZSh0aGlzKVxyXG4gICAgICAgICAgICA6IHRoaXMuX3BlcnNpc3RlbmNlUHJvdmlkZXIuZW5hYmxlSW5kZXhlZERiUGVyc2lzdGVuY2UodGhpcywgZXhwZXJpbWVudGFsRm9yY2VPd25pbmdUYWIpO1xyXG4gICAgfVxyXG4gICAgY2xlYXJQZXJzaXN0ZW5jZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcGVyc2lzdGVuY2VQcm92aWRlci5jbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgdGVybWluYXRlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9hcHBDb21wYXQpIHtcclxuICAgICAgICAgICAgdGhpcy5fYXBwQ29tcGF0Ll9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UoJ2ZpcmVzdG9yZS1jb21wYXQnKTtcclxuICAgICAgICAgICAgdGhpcy5fYXBwQ29tcGF0Ll9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UoJ2ZpcmVzdG9yZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuX2RlbGV0ZSgpO1xyXG4gICAgfVxyXG4gICAgd2FpdEZvclBlbmRpbmdXcml0ZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHdhaXRGb3JQZW5kaW5nV3JpdGVzKHRoaXMuX2RlbGVnYXRlKTtcclxuICAgIH1cclxuICAgIG9uU25hcHNob3RzSW5TeW5jKGFyZykge1xyXG4gICAgICAgIHJldHVybiBvblNuYXBzaG90c0luU3luYyh0aGlzLl9kZWxlZ2F0ZSwgYXJnKTtcclxuICAgIH1cclxuICAgIGdldCBhcHAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9hcHBDb21wYXQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKCdmYWlsZWQtcHJlY29uZGl0aW9uJywgXCJGaXJlc3RvcmUgd2FzIG5vdCBpbml0aWFsaXplZCB1c2luZyB0aGUgRmlyZWJhc2UgU0RLLiAnYXBwJyBpcyBcIiArXHJcbiAgICAgICAgICAgICAgICAnbm90IGF2YWlsYWJsZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fYXBwQ29tcGF0O1xyXG4gICAgfVxyXG4gICAgY29sbGVjdGlvbihwYXRoU3RyaW5nKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xsZWN0aW9uUmVmZXJlbmNlKHRoaXMsIGNvbGxlY3Rpb24odGhpcy5fZGVsZWdhdGUsIHBhdGhTdHJpbmcpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgcmVwbGFjZUZ1bmN0aW9uTmFtZShlLCAnY29sbGVjdGlvbigpJywgJ0ZpcmVzdG9yZS5jb2xsZWN0aW9uKCknKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBkb2MocGF0aFN0cmluZykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRSZWZlcmVuY2UodGhpcywgZG9jKHRoaXMuX2RlbGVnYXRlLCBwYXRoU3RyaW5nKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRocm93IHJlcGxhY2VGdW5jdGlvbk5hbWUoZSwgJ2RvYygpJywgJ0ZpcmVzdG9yZS5kb2MoKScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbGxlY3Rpb25Hcm91cChjb2xsZWN0aW9uSWQpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMsIGNvbGxlY3Rpb25Hcm91cCh0aGlzLl9kZWxlZ2F0ZSwgY29sbGVjdGlvbklkKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRocm93IHJlcGxhY2VGdW5jdGlvbk5hbWUoZSwgJ2NvbGxlY3Rpb25Hcm91cCgpJywgJ0ZpcmVzdG9yZS5jb2xsZWN0aW9uR3JvdXAoKScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJ1blRyYW5zYWN0aW9uKHVwZGF0ZUZ1bmN0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIHJ1blRyYW5zYWN0aW9uKHRoaXMuX2RlbGVnYXRlLCB0cmFuc2FjdGlvbiA9PiB1cGRhdGVGdW5jdGlvbihuZXcgVHJhbnNhY3Rpb24odGhpcywgdHJhbnNhY3Rpb24pKSk7XHJcbiAgICB9XHJcbiAgICBiYXRjaCgpIHtcclxuICAgICAgICBlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKHRoaXMuX2RlbGVnYXRlKTtcclxuICAgICAgICByZXR1cm4gbmV3IFdyaXRlQmF0Y2gobmV3IFdyaXRlQmF0Y2gkMSh0aGlzLl9kZWxlZ2F0ZSwgbXV0YXRpb25zID0+IGV4ZWN1dGVXcml0ZSh0aGlzLl9kZWxlZ2F0ZSwgbXV0YXRpb25zKSkpO1xyXG4gICAgfVxyXG4gICAgbG9hZEJ1bmRsZShidW5kbGVEYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIGxvYWRCdW5kbGUodGhpcy5fZGVsZWdhdGUsIGJ1bmRsZURhdGEpO1xyXG4gICAgfVxyXG4gICAgbmFtZWRRdWVyeShuYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIG5hbWVkUXVlcnkodGhpcy5fZGVsZWdhdGUsIG5hbWUpLnRoZW4oZXhwUXVlcnkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWV4cFF1ZXJ5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMsIFxyXG4gICAgICAgICAgICAvLyBXZSBjYW4gcGFzcyBgZXhwUXVlcnlgIGhlcmUgZGlyZWN0bHkgc2luY2UgbmFtZWQgcXVlcmllcyBkb24ndCBoYXZlIGEgVXNlckRhdGFDb252ZXJ0ZXIuXHJcbiAgICAgICAgICAgIC8vIE90aGVyd2lzZSwgd2Ugd291bGQgaGF2ZSB0byBjcmVhdGUgYSBuZXcgRXhwUXVlcnkgYW5kIHBhc3MgdGhlIG9sZCBVc2VyRGF0YUNvbnZlcnRlci5cclxuICAgICAgICAgICAgZXhwUXVlcnkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIFVzZXJEYXRhV3JpdGVyIGV4dGVuZHMgQWJzdHJhY3RVc2VyRGF0YVdyaXRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihmaXJlc3RvcmUpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuZmlyZXN0b3JlID0gZmlyZXN0b3JlO1xyXG4gICAgfVxyXG4gICAgY29udmVydEJ5dGVzKGJ5dGVzKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBCbG9iKG5ldyBCeXRlcyhieXRlcykpO1xyXG4gICAgfVxyXG4gICAgY29udmVydFJlZmVyZW5jZShuYW1lKSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gdGhpcy5jb252ZXJ0RG9jdW1lbnRLZXkobmFtZSwgdGhpcy5maXJlc3RvcmUuX2RhdGFiYXNlSWQpO1xyXG4gICAgICAgIHJldHVybiBEb2N1bWVudFJlZmVyZW5jZS5mb3JLZXkoa2V5LCB0aGlzLmZpcmVzdG9yZSwgLyogY29udmVydGVyPSAqLyBudWxsKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBzZXRMb2dMZXZlbChsZXZlbCkge1xyXG4gICAgc2V0TG9nTGV2ZWwkMShsZXZlbCk7XHJcbn1cclxuLyoqXHJcbiAqIEEgcmVmZXJlbmNlIHRvIGEgdHJhbnNhY3Rpb24uXHJcbiAqL1xyXG5jbGFzcyBUcmFuc2FjdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3RvcihfZmlyZXN0b3JlLCBfZGVsZWdhdGUpIHtcclxuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSBfZmlyZXN0b3JlO1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlID0gX2RlbGVnYXRlO1xyXG4gICAgICAgIHRoaXMuX3VzZXJEYXRhV3JpdGVyID0gbmV3IFVzZXJEYXRhV3JpdGVyKF9maXJlc3RvcmUpO1xyXG4gICAgfVxyXG4gICAgZ2V0KGRvY3VtZW50UmVmKSB7XHJcbiAgICAgICAgY29uc3QgcmVmID0gY2FzdFJlZmVyZW5jZShkb2N1bWVudFJlZik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlXHJcbiAgICAgICAgICAgIC5nZXQocmVmKVxyXG4gICAgICAgICAgICAudGhlbihyZXN1bHQgPT4gbmV3IERvY3VtZW50U25hcHNob3QodGhpcy5fZmlyZXN0b3JlLCBuZXcgRG9jdW1lbnRTbmFwc2hvdCQxKHRoaXMuX2ZpcmVzdG9yZS5fZGVsZWdhdGUsIHRoaXMuX3VzZXJEYXRhV3JpdGVyLCByZXN1bHQuX2tleSwgcmVzdWx0Ll9kb2N1bWVudCwgcmVzdWx0Lm1ldGFkYXRhLCByZWYuY29udmVydGVyKSkpO1xyXG4gICAgfVxyXG4gICAgc2V0KGRvY3VtZW50UmVmLCBkYXRhLCBvcHRpb25zKSB7XHJcbiAgICAgICAgY29uc3QgcmVmID0gY2FzdFJlZmVyZW5jZShkb2N1bWVudFJlZik7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgdmFsaWRhdGVTZXRPcHRpb25zKCdUcmFuc2FjdGlvbi5zZXQnLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgdGhpcy5fZGVsZWdhdGUuc2V0KHJlZiwgZGF0YSwgb3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9kZWxlZ2F0ZS5zZXQocmVmLCBkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICB1cGRhdGUoZG9jdW1lbnRSZWYsIGRhdGFPckZpZWxkLCB2YWx1ZSwgLi4ubW9yZUZpZWxkc0FuZFZhbHVlcykge1xyXG4gICAgICAgIGNvbnN0IHJlZiA9IGNhc3RSZWZlcmVuY2UoZG9jdW1lbnRSZWYpO1xyXG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlbGVnYXRlLnVwZGF0ZShyZWYsIGRhdGFPckZpZWxkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlbGVnYXRlLnVwZGF0ZShyZWYsIGRhdGFPckZpZWxkLCB2YWx1ZSwgLi4ubW9yZUZpZWxkc0FuZFZhbHVlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgZGVsZXRlKGRvY3VtZW50UmVmKSB7XHJcbiAgICAgICAgY29uc3QgcmVmID0gY2FzdFJlZmVyZW5jZShkb2N1bWVudFJlZik7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUuZGVsZXRlKHJlZik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgV3JpdGVCYXRjaCB7XHJcbiAgICBjb25zdHJ1Y3RvcihfZGVsZWdhdGUpIHtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IF9kZWxlZ2F0ZTtcclxuICAgIH1cclxuICAgIHNldChkb2N1bWVudFJlZiwgZGF0YSwgb3B0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IHJlZiA9IGNhc3RSZWZlcmVuY2UoZG9jdW1lbnRSZWYpO1xyXG4gICAgICAgIGlmIChvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHZhbGlkYXRlU2V0T3B0aW9ucygnV3JpdGVCYXRjaC5zZXQnLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgdGhpcy5fZGVsZWdhdGUuc2V0KHJlZiwgZGF0YSwgb3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9kZWxlZ2F0ZS5zZXQocmVmLCBkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICB1cGRhdGUoZG9jdW1lbnRSZWYsIGRhdGFPckZpZWxkLCB2YWx1ZSwgLi4ubW9yZUZpZWxkc0FuZFZhbHVlcykge1xyXG4gICAgICAgIGNvbnN0IHJlZiA9IGNhc3RSZWZlcmVuY2UoZG9jdW1lbnRSZWYpO1xyXG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlbGVnYXRlLnVwZGF0ZShyZWYsIGRhdGFPckZpZWxkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlbGVnYXRlLnVwZGF0ZShyZWYsIGRhdGFPckZpZWxkLCB2YWx1ZSwgLi4ubW9yZUZpZWxkc0FuZFZhbHVlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgZGVsZXRlKGRvY3VtZW50UmVmKSB7XHJcbiAgICAgICAgY29uc3QgcmVmID0gY2FzdFJlZmVyZW5jZShkb2N1bWVudFJlZik7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUuZGVsZXRlKHJlZik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBjb21taXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmNvbW1pdCgpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBXcmFwcyBhIGBQdWJsaWNGaXJlc3RvcmVEYXRhQ29udmVydGVyYCB0cmFuc2xhdGluZyB0aGUgdHlwZXMgZnJvbSB0aGVcclxuICogZXhwZXJpbWVudGFsIFNESyBpbnRvIGNvcnJlc3BvbmRpbmcgdHlwZXMgZnJvbSB0aGUgQ2xhc3NpYyBTREsgYmVmb3JlIHBhc3NpbmdcclxuICogdGhlbSB0byB0aGUgd3JhcHBlZCBjb252ZXJ0ZXIuXHJcbiAqL1xyXG5jbGFzcyBGaXJlc3RvcmVEYXRhQ29udmVydGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKF9maXJlc3RvcmUsIF91c2VyRGF0YVdyaXRlciwgX2RlbGVnYXRlKSB7XHJcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gX2ZpcmVzdG9yZTtcclxuICAgICAgICB0aGlzLl91c2VyRGF0YVdyaXRlciA9IF91c2VyRGF0YVdyaXRlcjtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IF9kZWxlZ2F0ZTtcclxuICAgIH1cclxuICAgIGZyb21GaXJlc3RvcmUoc25hcHNob3QsIG9wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCBleHBTbmFwc2hvdCA9IG5ldyBRdWVyeURvY3VtZW50U25hcHNob3QkMSh0aGlzLl9maXJlc3RvcmUuX2RlbGVnYXRlLCB0aGlzLl91c2VyRGF0YVdyaXRlciwgc25hcHNob3QuX2tleSwgc25hcHNob3QuX2RvY3VtZW50LCBzbmFwc2hvdC5tZXRhZGF0YSwgXHJcbiAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuZnJvbUZpcmVzdG9yZShuZXcgUXVlcnlEb2N1bWVudFNuYXBzaG90KHRoaXMuX2ZpcmVzdG9yZSwgZXhwU25hcHNob3QpLCBvcHRpb25zICE9PSBudWxsICYmIG9wdGlvbnMgIT09IHZvaWQgMCA/IG9wdGlvbnMgOiB7fSk7XHJcbiAgICB9XHJcbiAgICB0b0ZpcmVzdG9yZShtb2RlbE9iamVjdCwgb3B0aW9ucykge1xyXG4gICAgICAgIGlmICghb3B0aW9ucykge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUudG9GaXJlc3RvcmUobW9kZWxPYmplY3QpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnRvRmlyZXN0b3JlKG1vZGVsT2JqZWN0LCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBVc2UgdGhlIHNhbWUgaW5zdGFuY2Ugb2YgYEZpcmVzdG9yZURhdGFDb252ZXJ0ZXJgIGZvciB0aGUgZ2l2ZW4gaW5zdGFuY2VzXHJcbiAgICAvLyBvZiBgRmlyZXN0b3JlYCBhbmQgYFB1YmxpY0ZpcmVzdG9yZURhdGFDb252ZXJ0ZXJgIHNvIHRoYXQgaXNFcXVhbCgpIHdpbGxcclxuICAgIC8vIGNvbXBhcmUgZXF1YWwgZm9yIHR3byBvYmplY3RzIGNyZWF0ZWQgd2l0aCB0aGUgc2FtZSBjb252ZXJ0ZXIgaW5zdGFuY2UuXHJcbiAgICBzdGF0aWMgZ2V0SW5zdGFuY2UoZmlyZXN0b3JlLCBjb252ZXJ0ZXIpIHtcclxuICAgICAgICBjb25zdCBjb252ZXJ0ZXJNYXBCeUZpcmVzdG9yZSA9IEZpcmVzdG9yZURhdGFDb252ZXJ0ZXIuSU5TVEFOQ0VTO1xyXG4gICAgICAgIGxldCB1bnR5cGVkQ29udmVydGVyQnlDb252ZXJ0ZXIgPSBjb252ZXJ0ZXJNYXBCeUZpcmVzdG9yZS5nZXQoZmlyZXN0b3JlKTtcclxuICAgICAgICBpZiAoIXVudHlwZWRDb252ZXJ0ZXJCeUNvbnZlcnRlcikge1xyXG4gICAgICAgICAgICB1bnR5cGVkQ29udmVydGVyQnlDb252ZXJ0ZXIgPSBuZXcgV2Vha01hcCgpO1xyXG4gICAgICAgICAgICBjb252ZXJ0ZXJNYXBCeUZpcmVzdG9yZS5zZXQoZmlyZXN0b3JlLCB1bnR5cGVkQ29udmVydGVyQnlDb252ZXJ0ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgaW5zdGFuY2UgPSB1bnR5cGVkQ29udmVydGVyQnlDb252ZXJ0ZXIuZ2V0KGNvbnZlcnRlcik7XHJcbiAgICAgICAgaWYgKCFpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZSA9IG5ldyBGaXJlc3RvcmVEYXRhQ29udmVydGVyKGZpcmVzdG9yZSwgbmV3IFVzZXJEYXRhV3JpdGVyKGZpcmVzdG9yZSksIGNvbnZlcnRlcik7XHJcbiAgICAgICAgICAgIHVudHlwZWRDb252ZXJ0ZXJCeUNvbnZlcnRlci5zZXQoY29udmVydGVyLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcclxuICAgIH1cclxufVxyXG5GaXJlc3RvcmVEYXRhQ29udmVydGVyLklOU1RBTkNFUyA9IG5ldyBXZWFrTWFwKCk7XHJcbi8qKlxyXG4gKiBBIHJlZmVyZW5jZSB0byBhIHBhcnRpY3VsYXIgZG9jdW1lbnQgaW4gYSBjb2xsZWN0aW9uIGluIHRoZSBkYXRhYmFzZS5cclxuICovXHJcbmNsYXNzIERvY3VtZW50UmVmZXJlbmNlIHtcclxuICAgIGNvbnN0cnVjdG9yKGZpcmVzdG9yZSwgX2RlbGVnYXRlKSB7XHJcbiAgICAgICAgdGhpcy5maXJlc3RvcmUgPSBmaXJlc3RvcmU7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUgPSBfZGVsZWdhdGU7XHJcbiAgICAgICAgdGhpcy5fdXNlckRhdGFXcml0ZXIgPSBuZXcgVXNlckRhdGFXcml0ZXIoZmlyZXN0b3JlKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBmb3JQYXRoKHBhdGgsIGZpcmVzdG9yZSwgY29udmVydGVyKSB7XHJcbiAgICAgICAgaWYgKHBhdGgubGVuZ3RoICUgMiAhPT0gMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoJ2ludmFsaWQtYXJndW1lbnQnLCAnSW52YWxpZCBkb2N1bWVudCByZWZlcmVuY2UuIERvY3VtZW50ICcgK1xyXG4gICAgICAgICAgICAgICAgJ3JlZmVyZW5jZXMgbXVzdCBoYXZlIGFuIGV2ZW4gbnVtYmVyIG9mIHNlZ21lbnRzLCBidXQgJyArXHJcbiAgICAgICAgICAgICAgICBgJHtwYXRoLmNhbm9uaWNhbFN0cmluZygpfSBoYXMgJHtwYXRoLmxlbmd0aH1gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFJlZmVyZW5jZShmaXJlc3RvcmUsIG5ldyBEb2N1bWVudFJlZmVyZW5jZSQxKGZpcmVzdG9yZS5fZGVsZWdhdGUsIGNvbnZlcnRlciwgbmV3IF9Eb2N1bWVudEtleShwYXRoKSkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGZvcktleShrZXksIGZpcmVzdG9yZSwgY29udmVydGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFJlZmVyZW5jZShmaXJlc3RvcmUsIG5ldyBEb2N1bWVudFJlZmVyZW5jZSQxKGZpcmVzdG9yZS5fZGVsZWdhdGUsIGNvbnZlcnRlciwga2V5KSk7XHJcbiAgICB9XHJcbiAgICBnZXQgaWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmlkO1xyXG4gICAgfVxyXG4gICAgZ2V0IHBhcmVudCgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IENvbGxlY3Rpb25SZWZlcmVuY2UodGhpcy5maXJlc3RvcmUsIHRoaXMuX2RlbGVnYXRlLnBhcmVudCk7XHJcbiAgICB9XHJcbiAgICBnZXQgcGF0aCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUucGF0aDtcclxuICAgIH1cclxuICAgIGNvbGxlY3Rpb24ocGF0aFN0cmluZykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ29sbGVjdGlvblJlZmVyZW5jZSh0aGlzLmZpcmVzdG9yZSwgY29sbGVjdGlvbih0aGlzLl9kZWxlZ2F0ZSwgcGF0aFN0cmluZykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aHJvdyByZXBsYWNlRnVuY3Rpb25OYW1lKGUsICdjb2xsZWN0aW9uKCknLCAnRG9jdW1lbnRSZWZlcmVuY2UuY29sbGVjdGlvbigpJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaXNFcXVhbChvdGhlcikge1xyXG4gICAgICAgIG90aGVyID0gZ2V0TW9kdWxhckluc3RhbmNlKG90aGVyKTtcclxuICAgICAgICBpZiAoIShvdGhlciBpbnN0YW5jZW9mIERvY3VtZW50UmVmZXJlbmNlJDEpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlZkVxdWFsKHRoaXMuX2RlbGVnYXRlLCBvdGhlcik7XHJcbiAgICB9XHJcbiAgICBzZXQodmFsdWUsIG9wdGlvbnMpIHtcclxuICAgICAgICBvcHRpb25zID0gdmFsaWRhdGVTZXRPcHRpb25zKCdEb2N1bWVudFJlZmVyZW5jZS5zZXQnLCBvcHRpb25zKTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldERvYyh0aGlzLl9kZWxlZ2F0ZSwgdmFsdWUsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldERvYyh0aGlzLl9kZWxlZ2F0ZSwgdmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRocm93IHJlcGxhY2VGdW5jdGlvbk5hbWUoZSwgJ3NldERvYygpJywgJ0RvY3VtZW50UmVmZXJlbmNlLnNldCgpJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdXBkYXRlKGZpZWxkT3JVcGRhdGVEYXRhLCB2YWx1ZSwgLi4ubW9yZUZpZWxkc0FuZFZhbHVlcykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlRG9jKHRoaXMuX2RlbGVnYXRlLCBmaWVsZE9yVXBkYXRlRGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlRG9jKHRoaXMuX2RlbGVnYXRlLCBmaWVsZE9yVXBkYXRlRGF0YSwgdmFsdWUsIC4uLm1vcmVGaWVsZHNBbmRWYWx1ZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRocm93IHJlcGxhY2VGdW5jdGlvbk5hbWUoZSwgJ3VwZGF0ZURvYygpJywgJ0RvY3VtZW50UmVmZXJlbmNlLnVwZGF0ZSgpJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZGVsZXRlKCkge1xyXG4gICAgICAgIHJldHVybiBkZWxldGVEb2ModGhpcy5fZGVsZWdhdGUpO1xyXG4gICAgfVxyXG4gICAgb25TbmFwc2hvdCguLi5hcmdzKSB7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IGV4dHJhY3RTbmFwc2hvdE9wdGlvbnMoYXJncyk7XHJcbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSB3cmFwT2JzZXJ2ZXIoYXJncywgcmVzdWx0ID0+IG5ldyBEb2N1bWVudFNuYXBzaG90KHRoaXMuZmlyZXN0b3JlLCBuZXcgRG9jdW1lbnRTbmFwc2hvdCQxKHRoaXMuZmlyZXN0b3JlLl9kZWxlZ2F0ZSwgdGhpcy5fdXNlckRhdGFXcml0ZXIsIHJlc3VsdC5fa2V5LCByZXN1bHQuX2RvY3VtZW50LCByZXN1bHQubWV0YWRhdGEsIHRoaXMuX2RlbGVnYXRlLmNvbnZlcnRlcikpKTtcclxuICAgICAgICByZXR1cm4gb25TbmFwc2hvdCh0aGlzLl9kZWxlZ2F0ZSwgb3B0aW9ucywgb2JzZXJ2ZXIpO1xyXG4gICAgfVxyXG4gICAgZ2V0KG9wdGlvbnMpIHtcclxuICAgICAgICBsZXQgc25hcDtcclxuICAgICAgICBpZiAoKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5zb3VyY2UpID09PSAnY2FjaGUnKSB7XHJcbiAgICAgICAgICAgIHNuYXAgPSBnZXREb2NGcm9tQ2FjaGUodGhpcy5fZGVsZWdhdGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnNvdXJjZSkgPT09ICdzZXJ2ZXInKSB7XHJcbiAgICAgICAgICAgIHNuYXAgPSBnZXREb2NGcm9tU2VydmVyKHRoaXMuX2RlbGVnYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHNuYXAgPSBnZXREb2ModGhpcy5fZGVsZWdhdGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc25hcC50aGVuKHJlc3VsdCA9PiBuZXcgRG9jdW1lbnRTbmFwc2hvdCh0aGlzLmZpcmVzdG9yZSwgbmV3IERvY3VtZW50U25hcHNob3QkMSh0aGlzLmZpcmVzdG9yZS5fZGVsZWdhdGUsIHRoaXMuX3VzZXJEYXRhV3JpdGVyLCByZXN1bHQuX2tleSwgcmVzdWx0Ll9kb2N1bWVudCwgcmVzdWx0Lm1ldGFkYXRhLCB0aGlzLl9kZWxlZ2F0ZS5jb252ZXJ0ZXIpKSk7XHJcbiAgICB9XHJcbiAgICB3aXRoQ29udmVydGVyKGNvbnZlcnRlcikge1xyXG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRSZWZlcmVuY2UodGhpcy5maXJlc3RvcmUsIGNvbnZlcnRlclxyXG4gICAgICAgICAgICA/IHRoaXMuX2RlbGVnYXRlLndpdGhDb252ZXJ0ZXIoRmlyZXN0b3JlRGF0YUNvbnZlcnRlci5nZXRJbnN0YW5jZSh0aGlzLmZpcmVzdG9yZSwgY29udmVydGVyKSlcclxuICAgICAgICAgICAgOiB0aGlzLl9kZWxlZ2F0ZS53aXRoQ29udmVydGVyKG51bGwpKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogUmVwbGFjZXMgdGhlIGZ1bmN0aW9uIG5hbWUgaW4gYW4gZXJyb3IgdGhyb3duIGJ5IHRoZSBmaXJlc3RvcmUtZXhwIEFQSVxyXG4gKiB3aXRoIHRoZSBmdW5jdGlvbiBuYW1lcyB1c2VkIGluIHRoZSBjbGFzc2ljIEFQSS5cclxuICovXHJcbmZ1bmN0aW9uIHJlcGxhY2VGdW5jdGlvbk5hbWUoZSwgb3JpZ2luYWwsIHVwZGF0ZWQpIHtcclxuICAgIGUubWVzc2FnZSA9IGUubWVzc2FnZS5yZXBsYWNlKG9yaWdpbmFsLCB1cGRhdGVkKTtcclxuICAgIHJldHVybiBlO1xyXG59XHJcbi8qKlxyXG4gKiBJdGVyYXRlcyB0aGUgbGlzdCBvZiBhcmd1bWVudHMgZnJvbSBhbiBgb25TbmFwc2hvdGAgY2FsbCBhbmQgcmV0dXJucyB0aGVcclxuICogZmlyc3QgYXJndW1lbnQgdGhhdCBtYXkgYmUgYW4gYFNuYXBzaG90TGlzdGVuT3B0aW9uc2Agb2JqZWN0LiBSZXR1cm5zIGFuXHJcbiAqIGVtcHR5IG9iamVjdCBpZiBub25lIGlzIGZvdW5kLlxyXG4gKi9cclxuZnVuY3Rpb24gZXh0cmFjdFNuYXBzaG90T3B0aW9ucyhhcmdzKSB7XHJcbiAgICBmb3IgKGNvbnN0IGFyZyBvZiBhcmdzKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmICFpc1BhcnRpYWxPYnNlcnZlcihhcmcpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhcmc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHt9O1xyXG59XHJcbi8qKlxyXG4gKiBDcmVhdGVzIGFuIG9ic2VydmVyIHRoYXQgY2FuIGJlIHBhc3NlZCB0byB0aGUgZmlyZXN0b3JlLWV4cCBTREsuIFRoZVxyXG4gKiBvYnNlcnZlciBjb252ZXJ0cyBhbGwgb2JzZXJ2ZWQgdmFsdWVzIGludG8gdGhlIGZvcm1hdCBleHBlY3RlZCBieSB0aGUgY2xhc3NpY1xyXG4gKiBTREsuXHJcbiAqXHJcbiAqIEBwYXJhbSBhcmdzIC0gVGhlIGxpc3Qgb2YgYXJndW1lbnRzIGZyb20gYW4gYG9uU25hcHNob3RgIGNhbGwuXHJcbiAqIEBwYXJhbSB3cmFwcGVyIC0gVGhlIGZ1bmN0aW9uIHRoYXQgY29udmVydHMgdGhlIGZpcmVzdG9yZS1leHAgdHlwZSBpbnRvIHRoZVxyXG4gKiB0eXBlIHVzZWQgYnkgdGhpcyBzaGltLlxyXG4gKi9cclxuZnVuY3Rpb24gd3JhcE9ic2VydmVyKGFyZ3MsIHdyYXBwZXIpIHtcclxuICAgIHZhciBfYSwgX2I7XHJcbiAgICBsZXQgdXNlck9ic2VydmVyO1xyXG4gICAgaWYgKGlzUGFydGlhbE9ic2VydmVyKGFyZ3NbMF0pKSB7XHJcbiAgICAgICAgdXNlck9ic2VydmVyID0gYXJnc1swXTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGlzUGFydGlhbE9ic2VydmVyKGFyZ3NbMV0pKSB7XHJcbiAgICAgICAgdXNlck9ic2VydmVyID0gYXJnc1sxXTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGVvZiBhcmdzWzBdID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgdXNlck9ic2VydmVyID0ge1xyXG4gICAgICAgICAgICBuZXh0OiBhcmdzWzBdLFxyXG4gICAgICAgICAgICBlcnJvcjogYXJnc1sxXSxcclxuICAgICAgICAgICAgY29tcGxldGU6IGFyZ3NbMl1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdXNlck9ic2VydmVyID0ge1xyXG4gICAgICAgICAgICBuZXh0OiBhcmdzWzFdLFxyXG4gICAgICAgICAgICBlcnJvcjogYXJnc1syXSxcclxuICAgICAgICAgICAgY29tcGxldGU6IGFyZ3NbM11cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiB2YWwgPT4ge1xyXG4gICAgICAgICAgICBpZiAodXNlck9ic2VydmVyLm5leHQpIHtcclxuICAgICAgICAgICAgICAgIHVzZXJPYnNlcnZlci5uZXh0KHdyYXBwZXIodmFsKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVycm9yOiAoX2EgPSB1c2VyT2JzZXJ2ZXIuZXJyb3IpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5iaW5kKHVzZXJPYnNlcnZlciksXHJcbiAgICAgICAgY29tcGxldGU6IChfYiA9IHVzZXJPYnNlcnZlci5jb21wbGV0ZSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmJpbmQodXNlck9ic2VydmVyKVxyXG4gICAgfTtcclxufVxyXG5jbGFzcyBEb2N1bWVudFNuYXBzaG90IHtcclxuICAgIGNvbnN0cnVjdG9yKF9maXJlc3RvcmUsIF9kZWxlZ2F0ZSkge1xyXG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IF9maXJlc3RvcmU7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUgPSBfZGVsZWdhdGU7XHJcbiAgICB9XHJcbiAgICBnZXQgcmVmKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRSZWZlcmVuY2UodGhpcy5fZmlyZXN0b3JlLCB0aGlzLl9kZWxlZ2F0ZS5yZWYpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGlkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5pZDtcclxuICAgIH1cclxuICAgIGdldCBtZXRhZGF0YSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUubWV0YWRhdGE7XHJcbiAgICB9XHJcbiAgICBnZXQgZXhpc3RzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5leGlzdHMoKTtcclxuICAgIH1cclxuICAgIGRhdGEob3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5kYXRhKG9wdGlvbnMpO1xyXG4gICAgfVxyXG4gICAgZ2V0KGZpZWxkUGF0aCwgb3B0aW9uc1xyXG4gICAgLy8gV2UgYXJlIHVzaW5nIGBhbnlgIGhlcmUgdG8gYXZvaWQgYW4gZXhwbGljaXQgY2FzdCBieSBvdXIgdXNlcnMuXHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmdldChmaWVsZFBhdGgsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG4gICAgaXNFcXVhbChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiBzbmFwc2hvdEVxdWFsKHRoaXMuX2RlbGVnYXRlLCBvdGhlci5fZGVsZWdhdGUpO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCBleHRlbmRzIERvY3VtZW50U25hcHNob3Qge1xyXG4gICAgZGF0YShvcHRpb25zKSB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuX2RlbGVnYXRlLmRhdGEob3B0aW9ucyk7XHJcbiAgICAgICAgX2RlYnVnQXNzZXJ0KGRhdGEgIT09IHVuZGVmaW5lZCwgJ0RvY3VtZW50IGluIGEgUXVlcnlEb2N1bWVudFNuYXBzaG90IHNob3VsZCBleGlzdCcpO1xyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIFF1ZXJ5IHtcclxuICAgIGNvbnN0cnVjdG9yKGZpcmVzdG9yZSwgX2RlbGVnYXRlKSB7XHJcbiAgICAgICAgdGhpcy5maXJlc3RvcmUgPSBmaXJlc3RvcmU7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUgPSBfZGVsZWdhdGU7XHJcbiAgICAgICAgdGhpcy5fdXNlckRhdGFXcml0ZXIgPSBuZXcgVXNlckRhdGFXcml0ZXIoZmlyZXN0b3JlKTtcclxuICAgIH1cclxuICAgIHdoZXJlKGZpZWxkUGF0aCwgb3BTdHIsIHZhbHVlKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gVGhlIFwiYXMgc3RyaW5nXCIgY2FzdCBpcyBhIGxpdHRsZSBiaXQgb2YgYSBoYWNrLiBgd2hlcmVgIGFjY2VwdHMgdGhlXHJcbiAgICAgICAgICAgIC8vIEZpZWxkUGF0aCBDb21wYXQgdHlwZSBhcyBpbnB1dCwgYnV0IGlzIG5vdCB0eXBlZCBhcyBzdWNoIGluIG9yZGVyIHRvXHJcbiAgICAgICAgICAgIC8vIG5vdCBleHBvc2UgdGhpcyB2aWEgb3VyIHB1YmxpYyB0eXBpbmdzIGZpbGUuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5maXJlc3RvcmUsIHF1ZXJ5KHRoaXMuX2RlbGVnYXRlLCB3aGVyZShmaWVsZFBhdGgsIG9wU3RyLCB2YWx1ZSkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgcmVwbGFjZUZ1bmN0aW9uTmFtZShlLCAvKG9yZGVyQnl8d2hlcmUpXFwoXFwpLywgJ1F1ZXJ5LiQxKCknKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBvcmRlckJ5KGZpZWxkUGF0aCwgZGlyZWN0aW9uU3RyKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gVGhlIFwiYXMgc3RyaW5nXCIgY2FzdCBpcyBhIGxpdHRsZSBiaXQgb2YgYSBoYWNrLiBgb3JkZXJCeWAgYWNjZXB0cyB0aGVcclxuICAgICAgICAgICAgLy8gRmllbGRQYXRoIENvbXBhdCB0eXBlIGFzIGlucHV0LCBidXQgaXMgbm90IHR5cGVkIGFzIHN1Y2ggaW4gb3JkZXIgdG9cclxuICAgICAgICAgICAgLy8gbm90IGV4cG9zZSB0aGlzIHZpYSBvdXIgcHVibGljIHR5cGluZ3MgZmlsZS5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLmZpcmVzdG9yZSwgcXVlcnkodGhpcy5fZGVsZWdhdGUsIG9yZGVyQnkoZmllbGRQYXRoLCBkaXJlY3Rpb25TdHIpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRocm93IHJlcGxhY2VGdW5jdGlvbk5hbWUoZSwgLyhvcmRlckJ5fHdoZXJlKVxcKFxcKS8sICdRdWVyeS4kMSgpJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgbGltaXQobikge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5maXJlc3RvcmUsIHF1ZXJ5KHRoaXMuX2RlbGVnYXRlLCBsaW1pdChuKSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aHJvdyByZXBsYWNlRnVuY3Rpb25OYW1lKGUsICdsaW1pdCgpJywgJ1F1ZXJ5LmxpbWl0KCknKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBsaW1pdFRvTGFzdChuKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLmZpcmVzdG9yZSwgcXVlcnkodGhpcy5fZGVsZWdhdGUsIGxpbWl0VG9MYXN0KG4pKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRocm93IHJlcGxhY2VGdW5jdGlvbk5hbWUoZSwgJ2xpbWl0VG9MYXN0KCknLCAnUXVlcnkubGltaXRUb0xhc3QoKScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHN0YXJ0QXQoLi4uYXJncykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5maXJlc3RvcmUsIHF1ZXJ5KHRoaXMuX2RlbGVnYXRlLCBzdGFydEF0KC4uLmFyZ3MpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRocm93IHJlcGxhY2VGdW5jdGlvbk5hbWUoZSwgJ3N0YXJ0QXQoKScsICdRdWVyeS5zdGFydEF0KCknKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzdGFydEFmdGVyKC4uLmFyZ3MpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMuZmlyZXN0b3JlLCBxdWVyeSh0aGlzLl9kZWxlZ2F0ZSwgc3RhcnRBZnRlciguLi5hcmdzKSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aHJvdyByZXBsYWNlRnVuY3Rpb25OYW1lKGUsICdzdGFydEFmdGVyKCknLCAnUXVlcnkuc3RhcnRBZnRlcigpJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZW5kQmVmb3JlKC4uLmFyZ3MpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMuZmlyZXN0b3JlLCBxdWVyeSh0aGlzLl9kZWxlZ2F0ZSwgZW5kQmVmb3JlKC4uLmFyZ3MpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRocm93IHJlcGxhY2VGdW5jdGlvbk5hbWUoZSwgJ2VuZEJlZm9yZSgpJywgJ1F1ZXJ5LmVuZEJlZm9yZSgpJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZW5kQXQoLi4uYXJncykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5maXJlc3RvcmUsIHF1ZXJ5KHRoaXMuX2RlbGVnYXRlLCBlbmRBdCguLi5hcmdzKSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aHJvdyByZXBsYWNlRnVuY3Rpb25OYW1lKGUsICdlbmRBdCgpJywgJ1F1ZXJ5LmVuZEF0KCknKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpc0VxdWFsKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHF1ZXJ5RXF1YWwodGhpcy5fZGVsZWdhdGUsIG90aGVyLl9kZWxlZ2F0ZSk7XHJcbiAgICB9XHJcbiAgICBnZXQob3B0aW9ucykge1xyXG4gICAgICAgIGxldCBxdWVyeTtcclxuICAgICAgICBpZiAoKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5zb3VyY2UpID09PSAnY2FjaGUnKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5ID0gZ2V0RG9jc0Zyb21DYWNoZSh0aGlzLl9kZWxlZ2F0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuc291cmNlKSA9PT0gJ3NlcnZlcicpIHtcclxuICAgICAgICAgICAgcXVlcnkgPSBnZXREb2NzRnJvbVNlcnZlcih0aGlzLl9kZWxlZ2F0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBxdWVyeSA9IGdldERvY3ModGhpcy5fZGVsZWdhdGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcXVlcnkudGhlbihyZXN1bHQgPT4gbmV3IFF1ZXJ5U25hcHNob3QodGhpcy5maXJlc3RvcmUsIG5ldyBRdWVyeVNuYXBzaG90JDEodGhpcy5maXJlc3RvcmUuX2RlbGVnYXRlLCB0aGlzLl91c2VyRGF0YVdyaXRlciwgdGhpcy5fZGVsZWdhdGUsIHJlc3VsdC5fc25hcHNob3QpKSk7XHJcbiAgICB9XHJcbiAgICBvblNuYXBzaG90KC4uLmFyZ3MpIHtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0gZXh0cmFjdFNuYXBzaG90T3B0aW9ucyhhcmdzKTtcclxuICAgICAgICBjb25zdCBvYnNlcnZlciA9IHdyYXBPYnNlcnZlcihhcmdzLCBzbmFwID0+IG5ldyBRdWVyeVNuYXBzaG90KHRoaXMuZmlyZXN0b3JlLCBuZXcgUXVlcnlTbmFwc2hvdCQxKHRoaXMuZmlyZXN0b3JlLl9kZWxlZ2F0ZSwgdGhpcy5fdXNlckRhdGFXcml0ZXIsIHRoaXMuX2RlbGVnYXRlLCBzbmFwLl9zbmFwc2hvdCkpKTtcclxuICAgICAgICByZXR1cm4gb25TbmFwc2hvdCh0aGlzLl9kZWxlZ2F0ZSwgb3B0aW9ucywgb2JzZXJ2ZXIpO1xyXG4gICAgfVxyXG4gICAgd2l0aENvbnZlcnRlcihjb252ZXJ0ZXIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMuZmlyZXN0b3JlLCBjb252ZXJ0ZXJcclxuICAgICAgICAgICAgPyB0aGlzLl9kZWxlZ2F0ZS53aXRoQ29udmVydGVyKEZpcmVzdG9yZURhdGFDb252ZXJ0ZXIuZ2V0SW5zdGFuY2UodGhpcy5maXJlc3RvcmUsIGNvbnZlcnRlcikpXHJcbiAgICAgICAgICAgIDogdGhpcy5fZGVsZWdhdGUud2l0aENvbnZlcnRlcihudWxsKSk7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgRG9jdW1lbnRDaGFuZ2Uge1xyXG4gICAgY29uc3RydWN0b3IoX2ZpcmVzdG9yZSwgX2RlbGVnYXRlKSB7XHJcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gX2ZpcmVzdG9yZTtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IF9kZWxlZ2F0ZTtcclxuICAgIH1cclxuICAgIGdldCB0eXBlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS50eXBlO1xyXG4gICAgfVxyXG4gICAgZ2V0IGRvYygpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX2RlbGVnYXRlLmRvYyk7XHJcbiAgICB9XHJcbiAgICBnZXQgb2xkSW5kZXgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLm9sZEluZGV4O1xyXG4gICAgfVxyXG4gICAgZ2V0IG5ld0luZGV4KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5uZXdJbmRleDtcclxuICAgIH1cclxufVxyXG5jbGFzcyBRdWVyeVNuYXBzaG90IHtcclxuICAgIGNvbnN0cnVjdG9yKF9maXJlc3RvcmUsIF9kZWxlZ2F0ZSkge1xyXG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IF9maXJlc3RvcmU7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUgPSBfZGVsZWdhdGU7XHJcbiAgICB9XHJcbiAgICBnZXQgcXVlcnkoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX2RlbGVnYXRlLnF1ZXJ5KTtcclxuICAgIH1cclxuICAgIGdldCBtZXRhZGF0YSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUubWV0YWRhdGE7XHJcbiAgICB9XHJcbiAgICBnZXQgc2l6ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuc2l6ZTtcclxuICAgIH1cclxuICAgIGdldCBlbXB0eSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuZW1wdHk7XHJcbiAgICB9XHJcbiAgICBnZXQgZG9jcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuZG9jcy5tYXAoZG9jID0+IG5ldyBRdWVyeURvY3VtZW50U25hcHNob3QodGhpcy5fZmlyZXN0b3JlLCBkb2MpKTtcclxuICAgIH1cclxuICAgIGRvY0NoYW5nZXMob3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZVxyXG4gICAgICAgICAgICAuZG9jQ2hhbmdlcyhvcHRpb25zKVxyXG4gICAgICAgICAgICAubWFwKGRvY0NoYW5nZSA9PiBuZXcgRG9jdW1lbnRDaGFuZ2UodGhpcy5fZmlyZXN0b3JlLCBkb2NDaGFuZ2UpKTtcclxuICAgIH1cclxuICAgIGZvckVhY2goY2FsbGJhY2ssIHRoaXNBcmcpIHtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZS5mb3JFYWNoKHNuYXBzaG90ID0+IHtcclxuICAgICAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzQXJnLCBuZXcgUXVlcnlEb2N1bWVudFNuYXBzaG90KHRoaXMuX2ZpcmVzdG9yZSwgc25hcHNob3QpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGlzRXF1YWwob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gc25hcHNob3RFcXVhbCh0aGlzLl9kZWxlZ2F0ZSwgb3RoZXIuX2RlbGVnYXRlKTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBDb2xsZWN0aW9uUmVmZXJlbmNlIGV4dGVuZHMgUXVlcnkge1xyXG4gICAgY29uc3RydWN0b3IoZmlyZXN0b3JlLCBfZGVsZWdhdGUpIHtcclxuICAgICAgICBzdXBlcihmaXJlc3RvcmUsIF9kZWxlZ2F0ZSk7XHJcbiAgICAgICAgdGhpcy5maXJlc3RvcmUgPSBmaXJlc3RvcmU7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUgPSBfZGVsZWdhdGU7XHJcbiAgICB9XHJcbiAgICBnZXQgaWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmlkO1xyXG4gICAgfVxyXG4gICAgZ2V0IHBhdGgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnBhdGg7XHJcbiAgICB9XHJcbiAgICBnZXQgcGFyZW50KCkge1xyXG4gICAgICAgIGNvbnN0IGRvY1JlZiA9IHRoaXMuX2RlbGVnYXRlLnBhcmVudDtcclxuICAgICAgICByZXR1cm4gZG9jUmVmID8gbmV3IERvY3VtZW50UmVmZXJlbmNlKHRoaXMuZmlyZXN0b3JlLCBkb2NSZWYpIDogbnVsbDtcclxuICAgIH1cclxuICAgIGRvYyhkb2N1bWVudFBhdGgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZG9jdW1lbnRQYXRoID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIC8vIENhbGwgYGRvY2Agd2l0aG91dCBgZG9jdW1lbnRQYXRoYCBpZiBgZG9jdW1lbnRQYXRoYCBpcyBgdW5kZWZpbmVkYFxyXG4gICAgICAgICAgICAgICAgLy8gYXMgYGRvY2AgdmFsaWRhdGVzIHRoZSBudW1iZXIgb2YgYXJndW1lbnRzIHRvIHByZXZlbnQgdXNlcnMgZnJvbVxyXG4gICAgICAgICAgICAgICAgLy8gYWNjaWRlbnRhbGx5IHBhc3NpbmcgYHVuZGVmaW5lZGAuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50UmVmZXJlbmNlKHRoaXMuZmlyZXN0b3JlLCBkb2ModGhpcy5fZGVsZWdhdGUpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRSZWZlcmVuY2UodGhpcy5maXJlc3RvcmUsIGRvYyh0aGlzLl9kZWxlZ2F0ZSwgZG9jdW1lbnRQYXRoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgcmVwbGFjZUZ1bmN0aW9uTmFtZShlLCAnZG9jKCknLCAnQ29sbGVjdGlvblJlZmVyZW5jZS5kb2MoKScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGFkZChkYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIGFkZERvYyh0aGlzLl9kZWxlZ2F0ZSwgZGF0YSkudGhlbihkb2NSZWYgPT4gbmV3IERvY3VtZW50UmVmZXJlbmNlKHRoaXMuZmlyZXN0b3JlLCBkb2NSZWYpKTtcclxuICAgIH1cclxuICAgIGlzRXF1YWwob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gcmVmRXF1YWwodGhpcy5fZGVsZWdhdGUsIG90aGVyLl9kZWxlZ2F0ZSk7XHJcbiAgICB9XHJcbiAgICB3aXRoQ29udmVydGVyKGNvbnZlcnRlcikge1xyXG4gICAgICAgIHJldHVybiBuZXcgQ29sbGVjdGlvblJlZmVyZW5jZSh0aGlzLmZpcmVzdG9yZSwgY29udmVydGVyXHJcbiAgICAgICAgICAgID8gdGhpcy5fZGVsZWdhdGUud2l0aENvbnZlcnRlcihGaXJlc3RvcmVEYXRhQ29udmVydGVyLmdldEluc3RhbmNlKHRoaXMuZmlyZXN0b3JlLCBjb252ZXJ0ZXIpKVxyXG4gICAgICAgICAgICA6IHRoaXMuX2RlbGVnYXRlLndpdGhDb252ZXJ0ZXIobnVsbCkpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGNhc3RSZWZlcmVuY2UoZG9jdW1lbnRSZWYpIHtcclxuICAgIHJldHVybiBfY2FzdChkb2N1bWVudFJlZiwgRG9jdW1lbnRSZWZlcmVuY2UkMSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gVGhlIG9iamVjdHMgdGhhdCBhcmUgYSBwYXJ0IG9mIHRoaXMgQVBJIGFyZSBleHBvc2VkIHRvIHRoaXJkLXBhcnRpZXMgYXNcclxuLy8gY29tcGlsZWQgamF2YXNjcmlwdCBzbyB3ZSB3YW50IHRvIGZsYWcgb3VyIHByaXZhdGUgbWVtYmVycyB3aXRoIGEgbGVhZGluZ1xyXG4vLyB1bmRlcnNjb3JlIHRvIGRpc2NvdXJhZ2UgdGhlaXIgdXNlLlxyXG4vKipcclxuICogQSBgRmllbGRQYXRoYCByZWZlcnMgdG8gYSBmaWVsZCBpbiBhIGRvY3VtZW50LiBUaGUgcGF0aCBtYXkgY29uc2lzdCBvZiBhXHJcbiAqIHNpbmdsZSBmaWVsZCBuYW1lIChyZWZlcnJpbmcgdG8gYSB0b3AtbGV2ZWwgZmllbGQgaW4gdGhlIGRvY3VtZW50KSwgb3IgYSBsaXN0XHJcbiAqIG9mIGZpZWxkIG5hbWVzIChyZWZlcnJpbmcgdG8gYSBuZXN0ZWQgZmllbGQgaW4gdGhlIGRvY3VtZW50KS5cclxuICovXHJcbmNsYXNzIEZpZWxkUGF0aCB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBGaWVsZFBhdGggZnJvbSB0aGUgcHJvdmlkZWQgZmllbGQgbmFtZXMuIElmIG1vcmUgdGhhbiBvbmUgZmllbGRcclxuICAgICAqIG5hbWUgaXMgcHJvdmlkZWQsIHRoZSBwYXRoIHdpbGwgcG9pbnQgdG8gYSBuZXN0ZWQgZmllbGQgaW4gYSBkb2N1bWVudC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZmllbGROYW1lcyAtIEEgbGlzdCBvZiBmaWVsZCBuYW1lcy5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoLi4uZmllbGROYW1lcykge1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlID0gbmV3IEZpZWxkUGF0aCQxKC4uLmZpZWxkTmFtZXMpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGRvY3VtZW50SWQoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSW50ZXJuYWwgTm90ZTogVGhlIGJhY2tlbmQgZG9lc24ndCB0ZWNobmljYWxseSBzdXBwb3J0IHF1ZXJ5aW5nIGJ5XHJcbiAgICAgICAgICogZG9jdW1lbnQgSUQuIEluc3RlYWQgaXQgcXVlcmllcyBieSB0aGUgZW50aXJlIGRvY3VtZW50IG5hbWUgKGZ1bGwgcGF0aFxyXG4gICAgICAgICAqIGluY2x1ZGVkKSwgYnV0IGluIHRoZSBjYXNlcyB3ZSBjdXJyZW50bHkgc3VwcG9ydCBkb2N1bWVudElkKCksIHRoZSBuZXRcclxuICAgICAgICAgKiBlZmZlY3QgaXMgdGhlIHNhbWUuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFBhdGgoX0ZpZWxkUGF0aC5rZXlGaWVsZCgpLmNhbm9uaWNhbFN0cmluZygpKTtcclxuICAgIH1cclxuICAgIGlzRXF1YWwob3RoZXIpIHtcclxuICAgICAgICBvdGhlciA9IGdldE1vZHVsYXJJbnN0YW5jZShvdGhlcik7XHJcbiAgICAgICAgaWYgKCEob3RoZXIgaW5zdGFuY2VvZiBGaWVsZFBhdGgkMSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuX2ludGVybmFsUGF0aC5pc0VxdWFsKG90aGVyLl9pbnRlcm5hbFBhdGgpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIEZpZWxkVmFsdWUge1xyXG4gICAgY29uc3RydWN0b3IoX2RlbGVnYXRlKSB7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUgPSBfZGVsZWdhdGU7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgc2VydmVyVGltZXN0YW1wKCkge1xyXG4gICAgICAgIGNvbnN0IGRlbGVnYXRlID0gc2VydmVyVGltZXN0YW1wKCk7XHJcbiAgICAgICAgZGVsZWdhdGUuX21ldGhvZE5hbWUgPSAnRmllbGRWYWx1ZS5zZXJ2ZXJUaW1lc3RhbXAnO1xyXG4gICAgICAgIHJldHVybiBuZXcgRmllbGRWYWx1ZShkZWxlZ2F0ZSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZGVsZXRlKCkge1xyXG4gICAgICAgIGNvbnN0IGRlbGVnYXRlID0gZGVsZXRlRmllbGQoKTtcclxuICAgICAgICBkZWxlZ2F0ZS5fbWV0aG9kTmFtZSA9ICdGaWVsZFZhbHVlLmRlbGV0ZSc7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFZhbHVlKGRlbGVnYXRlKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBhcnJheVVuaW9uKC4uLmVsZW1lbnRzKSB7XHJcbiAgICAgICAgY29uc3QgZGVsZWdhdGUgPSBhcnJheVVuaW9uKC4uLmVsZW1lbnRzKTtcclxuICAgICAgICBkZWxlZ2F0ZS5fbWV0aG9kTmFtZSA9ICdGaWVsZFZhbHVlLmFycmF5VW5pb24nO1xyXG4gICAgICAgIHJldHVybiBuZXcgRmllbGRWYWx1ZShkZWxlZ2F0ZSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgYXJyYXlSZW1vdmUoLi4uZWxlbWVudHMpIHtcclxuICAgICAgICBjb25zdCBkZWxlZ2F0ZSA9IGFycmF5UmVtb3ZlKC4uLmVsZW1lbnRzKTtcclxuICAgICAgICBkZWxlZ2F0ZS5fbWV0aG9kTmFtZSA9ICdGaWVsZFZhbHVlLmFycmF5UmVtb3ZlJztcclxuICAgICAgICByZXR1cm4gbmV3IEZpZWxkVmFsdWUoZGVsZWdhdGUpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGluY3JlbWVudChuKSB7XHJcbiAgICAgICAgY29uc3QgZGVsZWdhdGUgPSBpbmNyZW1lbnQobik7XHJcbiAgICAgICAgZGVsZWdhdGUuX21ldGhvZE5hbWUgPSAnRmllbGRWYWx1ZS5pbmNyZW1lbnQnO1xyXG4gICAgICAgIHJldHVybiBuZXcgRmllbGRWYWx1ZShkZWxlZ2F0ZSk7XHJcbiAgICB9XHJcbiAgICBpc0VxdWFsKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmlzRXF1YWwob3RoZXIuX2RlbGVnYXRlKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBmaXJlc3RvcmVOYW1lc3BhY2UgPSB7XHJcbiAgICBGaXJlc3RvcmUsXHJcbiAgICBHZW9Qb2ludCxcclxuICAgIFRpbWVzdGFtcCxcclxuICAgIEJsb2IsXHJcbiAgICBUcmFuc2FjdGlvbixcclxuICAgIFdyaXRlQmF0Y2gsXHJcbiAgICBEb2N1bWVudFJlZmVyZW5jZSxcclxuICAgIERvY3VtZW50U25hcHNob3QsXHJcbiAgICBRdWVyeSxcclxuICAgIFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCxcclxuICAgIFF1ZXJ5U25hcHNob3QsXHJcbiAgICBDb2xsZWN0aW9uUmVmZXJlbmNlLFxyXG4gICAgRmllbGRQYXRoLFxyXG4gICAgRmllbGRWYWx1ZSxcclxuICAgIHNldExvZ0xldmVsLFxyXG4gICAgQ0FDSEVfU0laRV9VTkxJTUlURURcclxufTtcclxuLyoqXHJcbiAqIENvbmZpZ3VyZXMgRmlyZXN0b3JlIGFzIHBhcnQgb2YgdGhlIEZpcmViYXNlIFNESyBieSBjYWxsaW5nIHJlZ2lzdGVyQ29tcG9uZW50LlxyXG4gKlxyXG4gKiBAcGFyYW0gZmlyZWJhc2UgLSBUaGUgRmlyZWJhc2VOYW1lc3BhY2UgdG8gcmVnaXN0ZXIgRmlyZXN0b3JlIHdpdGhcclxuICogQHBhcmFtIGZpcmVzdG9yZUZhY3RvcnkgLSBBIGZhY3RvcnkgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgbmV3IEZpcmVzdG9yZVxyXG4gKiAgICBpbnN0YW5jZS5cclxuICovXHJcbmZ1bmN0aW9uIGNvbmZpZ3VyZUZvckZpcmViYXNlKGZpcmViYXNlLCBmaXJlc3RvcmVGYWN0b3J5KSB7XHJcbiAgICBmaXJlYmFzZS5JTlRFUk5BTC5yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KCdmaXJlc3RvcmUtY29tcGF0JywgY29udGFpbmVyID0+IHtcclxuICAgICAgICBjb25zdCBhcHAgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcC1jb21wYXQnKS5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICBjb25zdCBmaXJlc3RvcmVFeHAgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2ZpcmVzdG9yZScpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIHJldHVybiBmaXJlc3RvcmVGYWN0b3J5KGFwcCwgZmlyZXN0b3JlRXhwKTtcclxuICAgIH0sICdQVUJMSUMnKS5zZXRTZXJ2aWNlUHJvcHMoT2JqZWN0LmFzc2lnbih7fSwgZmlyZXN0b3JlTmFtZXNwYWNlKSkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZWdpc3RlcnMgdGhlIG1haW4gRmlyZXN0b3JlIGJ1aWxkIHdpdGggdGhlIGNvbXBvbmVudHMgZnJhbWV3b3JrLlxyXG4gKiBQZXJzaXN0ZW5jZSBjYW4gYmUgZW5hYmxlZCB2aWEgYGZpcmViYXNlLmZpcmVzdG9yZSgpLmVuYWJsZVBlcnNpc3RlbmNlKClgLlxyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJGaXJlc3RvcmUoaW5zdGFuY2UpIHtcclxuICAgIGNvbmZpZ3VyZUZvckZpcmViYXNlKGluc3RhbmNlLCAoYXBwLCBmaXJlc3RvcmVFeHApID0+IG5ldyBGaXJlc3RvcmUoYXBwLCBmaXJlc3RvcmVFeHAsIG5ldyBJbmRleGVkRGJQZXJzaXN0ZW5jZVByb3ZpZGVyKCkpKTtcclxuICAgIGluc3RhbmNlLnJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uKTtcclxufVxyXG5yZWdpc3RlckZpcmVzdG9yZShmaXJlYmFzZSk7XG5cbmV4cG9ydCB7IHJlZ2lzdGVyRmlyZXN0b3JlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIl0sInNvdXJjZVJvb3QiOiIifQ==