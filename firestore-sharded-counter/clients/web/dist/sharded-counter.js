var sharded=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=2)}([function(t,e){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);t.exports=function(){return r(n),n}}else{var o=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}},function(t,e){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);t.exports=function(t,e){var n=e||0,o=r;return[o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],"-",o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]],o[t[n++]]].join("")}},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function s(t){try{a(n.next(t))}catch(t){i(t)}}function u(t){try{a(n.throw(t))}catch(t){i(t)}}function a(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(s,u)}a((n=n.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(3),s="_counter_shards_",u="FIRESTORE_COUNTER_SHARD_ID",a=function(){function t(t,e){this.doc=t,this.field=e,this.db=null,this.shardId="",this.shards={},this.notifyPromise=null,this.db=t.firestore,this.shardId=function(t){var e=new RegExp("(?:^|; )"+encodeURIComponent(t)+"=([^;]*)").exec(document.cookie);if(e)return e[1];var r=i.v4(),n=new Date;n.setTime(n.getTime()+2592e6);var o="; expires="+n.toUTCString();return document.cookie=encodeURIComponent(t)+"="+r+o+"; path=/",r}(u);var r=t.collection(s);this.shards[t.path]=0,this.shards[r.doc(this.shardId).path]=0,this.shards[r.doc("\t"+this.shardId.substr(0,4)).path]=0,this.shards[r.doc("\t\t"+this.shardId.substr(0,3)).path]=0,this.shards[r.doc("\t\t\t"+this.shardId.substr(0,2)).path]=0,this.shards[r.doc("\t\t\t\t"+this.shardId.substr(0,1)).path]=0}return t.prototype.get=function(t){return n(this,void 0,void 0,function(){var e,r=this;return o(this,function(i){switch(i.label){case 0:return e=Object.keys(this.shards).map(function(e){return n(r,void 0,void 0,function(){return o(this,function(r){switch(r.label){case 0:return[4,this.db.doc(e).get(t)];case 1:return[2,r.sent().get(this.field)||0]}})})}),[4,Promise.all(e)];case 1:return[2,i.sent().reduce(function(t,e){return t+e},0)]}})})},t.prototype.onSnapshot=function(t){var e=this;Object.keys(this.shards).forEach(function(r){e.db.doc(r).onSnapshot(function(r){e.shards[r.ref.path]=r.get(e.field)||0,null===e.notifyPromise&&(e.notifyPromise=function(t){return n(this,void 0,void 0,function(){var e=this;return o(this,function(r){return[2,new Promise(function(r){return n(e,void 0,void 0,function(){var e=this;return o(this,function(i){return setTimeout(function(){return n(e,void 0,void 0,function(){var e;return o(this,function(n){return e=t(),r(e),[2]})})},0),[2]})})})]})})}(function(){var r=Object.values(e.shards).reduce(function(t,e){return t+e},0);t({exists:!0,data:function(){return r}}),e.notifyPromise=null}))})})},t.prototype.incrementBy=function(t){var e=firebase.firestore.FieldValue.increment(t),r=this.field.split(".").reverse().reduce(function(t,e){var r;return(r={})[e]=t,r},e);return this.doc.collection(s).doc(this.shardId).set(r,{merge:!0})},t.prototype.shard=function(){return this.doc.collection(s).doc(this.shardId)},t}();e.Counter=a},function(t,e,r){var n=r(4),o=r(5),i=o;i.v1=n,i.v4=o,t.exports=i},function(t,e,r){var n,o,i=r(0),s=r(1),u=0,a=0;t.exports=function(t,e,r){var c=e&&r||0,f=e||[],d=(t=t||{}).node||n,l=void 0!==t.clockseq?t.clockseq:o;if(null==d||null==l){var h=i();null==d&&(d=n=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==l&&(l=o=16383&(h[6]<<8|h[7]))}var p=void 0!==t.msecs?t.msecs:(new Date).getTime(),v=void 0!==t.nsecs?t.nsecs:a+1,y=p-u+(v-a)/1e4;if(y<0&&void 0===t.clockseq&&(l=l+1&16383),(y<0||p>u)&&void 0===t.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=p,a=v,o=l;var b=(1e4*(268435455&(p+=122192928e5))+v)%4294967296;f[c++]=b>>>24&255,f[c++]=b>>>16&255,f[c++]=b>>>8&255,f[c++]=255&b;var m=p/4294967296*1e4&268435455;f[c++]=m>>>8&255,f[c++]=255&m,f[c++]=m>>>24&15|16,f[c++]=m>>>16&255,f[c++]=l>>>8|128,f[c++]=255&l;for(var g=0;g<6;++g)f[c+g]=d[g];return e||s(f)}},function(t,e,r){var n=r(0),o=r(1);t.exports=function(t,e,r){var i=e&&r||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var s=(t=t||{}).random||(t.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e)for(var u=0;u<16;++u)e[i+u]=s[u];return e||o(s)}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zaGFyZGVkL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3NoYXJkZWQvLi9ub2RlX21vZHVsZXMvdXVpZC9saWIvcm5nLWJyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vc2hhcmRlZC8uL25vZGVfbW9kdWxlcy91dWlkL2xpYi9ieXRlc1RvVXVpZC5qcyIsIndlYnBhY2s6Ly9zaGFyZGVkLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL3NoYXJkZWQvLi9ub2RlX21vZHVsZXMvdXVpZC9pbmRleC5qcyIsIndlYnBhY2s6Ly9zaGFyZGVkLy4vbm9kZV9tb2R1bGVzL3V1aWQvdjEuanMiLCJ3ZWJwYWNrOi8vc2hhcmRlZC8uL25vZGVfbW9kdWxlcy91dWlkL3Y0LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZ2V0UmFuZG9tVmFsdWVzIiwiY3J5cHRvIiwid2luZG93IiwibXNDcnlwdG8iLCJybmRzOCIsIlVpbnQ4QXJyYXkiLCJybmRzIiwiQXJyYXkiLCJNYXRoIiwicmFuZG9tIiwiYnl0ZVRvSGV4IiwidG9TdHJpbmciLCJzdWJzdHIiLCJidWYiLCJvZmZzZXQiLCJidGgiLCJqb2luIiwidXVpZCIsIlNIQVJEX0NPTExFQ1RJT05fSUQiLCJDT09LSUVfTkFNRSIsIkNvdW50ZXIiLCJkb2MiLCJmaWVsZCIsInRoaXMiLCJkYiIsInNoYXJkSWQiLCJzaGFyZHMiLCJub3RpZnlQcm9taXNlIiwiZmlyZXN0b3JlIiwiY29va2llIiwicmVzdWx0IiwiUmVnRXhwIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiZXhlYyIsImRvY3VtZW50IiwidjQiLCJkYXRlIiwiRGF0ZSIsInNldFRpbWUiLCJnZXRUaW1lIiwiZXhwaXJlcyIsInRvVVRDU3RyaW5nIiwiZ2V0U2hhcmRJZCIsInNoYXJkc1JlZiIsImNvbGxlY3Rpb24iLCJwYXRoIiwib3B0aW9ucyIsInZhbHVlUHJvbWlzZXMiLCJrZXlzIiwibWFwIiwiX19hd2FpdGVyIiwiX3RoaXMiLCJfYSIsInNlbnQiLCJQcm9taXNlIiwiYWxsIiwicmVkdWNlIiwiYSIsImIiLCJvblNuYXBzaG90Iiwib2JzZXJ2YWJsZSIsImZvckVhY2giLCJzbmFwIiwicmVmIiwiZnVuYyIsInJlc29sdmUiLCJzZXRUaW1lb3V0Iiwic2NoZWR1bGUiLCJzdW0iLCJ2YWx1ZXMiLCJleGlzdHMiLCJkYXRhIiwiaW5jcmVtZW50QnkiLCJ2YWwiLCJpbmNyZW1lbnQiLCJmaXJlYmFzZSIsIkZpZWxkVmFsdWUiLCJ1cGRhdGUiLCJzcGxpdCIsInJldmVyc2UiLCJzZXQiLCJtZXJnZSIsInNoYXJkIiwidjEiLCJfbm9kZUlkIiwiX2Nsb2Nrc2VxIiwicm5nIiwiYnl0ZXNUb1V1aWQiLCJfbGFzdE1TZWNzIiwiX2xhc3ROU2VjcyIsIm5vZGUiLCJjbG9ja3NlcSIsInVuZGVmaW5lZCIsInNlZWRCeXRlcyIsIm1zZWNzIiwibnNlY3MiLCJkdCIsIkVycm9yIiwidGwiLCJ0bWgiLCJpaSJdLCJtYXBwaW5ncyI6IndCQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFM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U0FDQXVDLEVBQUEsTUFJQSxJQUFBeEMsR0FGQXdDLEtBQUEsSUFFQXJDLFNBQUFxQyxFQUFBd0MsVUFPQSxHQUpBaEYsRUFBQSxNQUFBQSxFQUFBLE1BQ0FBLEVBQUEsTUFBQUEsRUFBQSxPQUdBTyxFQUNBLFFBQUF1RixFQUFBLEVBQW9CQSxFQUFBLEtBQVNBLEVBQzdCdkYsRUFBQTdDLEVBQUFvSSxHQUFBOUYsRUFBQThGLEdBSUEsT0FBQXZGLEdBQUEwRSxFQUFBakYiLCJmaWxlIjoic2hhcmRlZC1jb3VudGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDIpO1xuIiwiLy8gVW5pcXVlIElEIGNyZWF0aW9uIHJlcXVpcmVzIGEgaGlnaCBxdWFsaXR5IHJhbmRvbSAjIGdlbmVyYXRvci4gIEluIHRoZVxuLy8gYnJvd3NlciB0aGlzIGlzIGEgbGl0dGxlIGNvbXBsaWNhdGVkIGR1ZSB0byB1bmtub3duIHF1YWxpdHkgb2YgTWF0aC5yYW5kb20oKVxuLy8gYW5kIGluY29uc2lzdGVudCBzdXBwb3J0IGZvciB0aGUgYGNyeXB0b2AgQVBJLiAgV2UgZG8gdGhlIGJlc3Qgd2UgY2FuIHZpYVxuLy8gZmVhdHVyZS1kZXRlY3Rpb25cblxuLy8gZ2V0UmFuZG9tVmFsdWVzIG5lZWRzIHRvIGJlIGludm9rZWQgaW4gYSBjb250ZXh0IHdoZXJlIFwidGhpc1wiIGlzIGEgQ3J5cHRvXG4vLyBpbXBsZW1lbnRhdGlvbi4gQWxzbywgZmluZCB0aGUgY29tcGxldGUgaW1wbGVtZW50YXRpb24gb2YgY3J5cHRvIG9uIElFMTEuXG52YXIgZ2V0UmFuZG9tVmFsdWVzID0gKHR5cGVvZihjcnlwdG8pICE9ICd1bmRlZmluZWQnICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKGNyeXB0bykpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgKHR5cGVvZihtc0NyeXB0bykgIT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHdpbmRvdy5tc0NyeXB0by5nZXRSYW5kb21WYWx1ZXMgPT0gJ2Z1bmN0aW9uJyAmJiBtc0NyeXB0by5nZXRSYW5kb21WYWx1ZXMuYmluZChtc0NyeXB0bykpO1xuXG5pZiAoZ2V0UmFuZG9tVmFsdWVzKSB7XG4gIC8vIFdIQVRXRyBjcnlwdG8gUk5HIC0gaHR0cDovL3dpa2kud2hhdHdnLm9yZy93aWtpL0NyeXB0b1xuICB2YXIgcm5kczggPSBuZXcgVWludDhBcnJheSgxNik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWZcblxuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHdoYXR3Z1JORygpIHtcbiAgICBnZXRSYW5kb21WYWx1ZXMocm5kczgpO1xuICAgIHJldHVybiBybmRzODtcbiAgfTtcbn0gZWxzZSB7XG4gIC8vIE1hdGgucmFuZG9tKCktYmFzZWQgKFJORylcbiAgLy9cbiAgLy8gSWYgYWxsIGVsc2UgZmFpbHMsIHVzZSBNYXRoLnJhbmRvbSgpLiAgSXQncyBmYXN0LCBidXQgaXMgb2YgdW5zcGVjaWZpZWRcbiAgLy8gcXVhbGl0eS5cbiAgdmFyIHJuZHMgPSBuZXcgQXJyYXkoMTYpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gbWF0aFJORygpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgcjsgaSA8IDE2OyBpKyspIHtcbiAgICAgIGlmICgoaSAmIDB4MDMpID09PSAwKSByID0gTWF0aC5yYW5kb20oKSAqIDB4MTAwMDAwMDAwO1xuICAgICAgcm5kc1tpXSA9IHIgPj4+ICgoaSAmIDB4MDMpIDw8IDMpICYgMHhmZjtcbiAgICB9XG5cbiAgICByZXR1cm4gcm5kcztcbiAgfTtcbn1cbiIsIi8qKlxuICogQ29udmVydCBhcnJheSBvZiAxNiBieXRlIHZhbHVlcyB0byBVVUlEIHN0cmluZyBmb3JtYXQgb2YgdGhlIGZvcm06XG4gKiBYWFhYWFhYWC1YWFhYLVhYWFgtWFhYWC1YWFhYWFhYWFhYWFhcbiAqL1xudmFyIGJ5dGVUb0hleCA9IFtdO1xuZm9yICh2YXIgaSA9IDA7IGkgPCAyNTY7ICsraSkge1xuICBieXRlVG9IZXhbaV0gPSAoaSArIDB4MTAwKS50b1N0cmluZygxNikuc3Vic3RyKDEpO1xufVxuXG5mdW5jdGlvbiBieXRlc1RvVXVpZChidWYsIG9mZnNldCkge1xuICB2YXIgaSA9IG9mZnNldCB8fCAwO1xuICB2YXIgYnRoID0gYnl0ZVRvSGV4O1xuICAvLyBqb2luIHVzZWQgdG8gZml4IG1lbW9yeSBpc3N1ZSBjYXVzZWQgYnkgY29uY2F0ZW5hdGlvbjogaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9MzE3NSNjNFxuICByZXR1cm4gKFtidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLCBcblx0YnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSwgJy0nLFxuXHRidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLCAnLScsXG5cdGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sICctJyxcblx0YnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSwgJy0nLFxuXHRidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLFxuXHRidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLFxuXHRidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dXSkuam9pbignJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYnl0ZXNUb1V1aWQ7XG4iLCIvKlxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZVxuICogbGljZW5zZSB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIG9yIGF0XG4gKiBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVC5cbiAqL1xuaW1wb3J0ICogYXMgdXVpZCBmcm9tIFwidXVpZFwiO1xuXG5jb25zdCBTSEFSRF9DT0xMRUNUSU9OX0lEID0gXCJfY291bnRlcl9zaGFyZHNfXCI7XG5jb25zdCBDT09LSUVfTkFNRSA9IFwiRklSRVNUT1JFX0NPVU5URVJfU0hBUkRfSURcIjtcblxuZXhwb3J0IGludGVyZmFjZSBDb3VudGVyU25hcHNob3Qge1xuICBleGlzdHM6IGJvb2xlYW47XG4gIGRhdGE6ICgpID0+IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIENvdW50ZXIge1xuICBwcml2YXRlIGRiOiBmaXJlYmFzZS5maXJlc3RvcmUuRmlyZXN0b3JlID0gbnVsbDtcbiAgcHJpdmF0ZSBzaGFyZElkID0gXCJcIjtcbiAgcHJpdmF0ZSBzaGFyZHM6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0gPSB7fTtcbiAgcHJpdmF0ZSBub3RpZnlQcm9taXNlOiBQcm9taXNlPHZvaWQ+ID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGRvYzogZmlyZWJhc2UuZmlyZXN0b3JlLkRvY3VtZW50UmVmZXJlbmNlLFxuICAgIHByaXZhdGUgZmllbGQ6IHN0cmluZ1xuICApIHtcbiAgICB0aGlzLmRiID0gZG9jLmZpcmVzdG9yZTtcbiAgICB0aGlzLnNoYXJkSWQgPSBnZXRTaGFyZElkKENPT0tJRV9OQU1FKTtcblxuICAgIGNvbnN0IHNoYXJkc1JlZiA9IGRvYy5jb2xsZWN0aW9uKFNIQVJEX0NPTExFQ1RJT05fSUQpO1xuICAgIHRoaXMuc2hhcmRzW2RvYy5wYXRoXSA9IDA7XG4gICAgdGhpcy5zaGFyZHNbc2hhcmRzUmVmLmRvYyh0aGlzLnNoYXJkSWQpLnBhdGhdID0gMDtcbiAgICB0aGlzLnNoYXJkc1tzaGFyZHNSZWYuZG9jKFwiXFx0XCIgKyB0aGlzLnNoYXJkSWQuc3Vic3RyKDAsIDQpKS5wYXRoXSA9IDA7XG4gICAgdGhpcy5zaGFyZHNbc2hhcmRzUmVmLmRvYyhcIlxcdFxcdFwiICsgdGhpcy5zaGFyZElkLnN1YnN0cigwLCAzKSkucGF0aF0gPSAwO1xuICAgIHRoaXMuc2hhcmRzW3NoYXJkc1JlZi5kb2MoXCJcXHRcXHRcXHRcIiArIHRoaXMuc2hhcmRJZC5zdWJzdHIoMCwgMikpLnBhdGhdID0gMDtcbiAgICB0aGlzLnNoYXJkc1tzaGFyZHNSZWYuZG9jKFwiXFx0XFx0XFx0XFx0XCIgKyB0aGlzLnNoYXJkSWQuc3Vic3RyKDAsIDEpKS5wYXRoXSA9IDA7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgZ2V0KG9wdGlvbnM/OiBmaXJlYmFzZS5maXJlc3RvcmUuR2V0T3B0aW9ucyk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgY29uc3QgdmFsdWVQcm9taXNlcyA9IE9iamVjdC5rZXlzKHRoaXMuc2hhcmRzKS5tYXAoYXN5bmMgKHBhdGgpID0+IHtcbiAgICAgIGNvbnN0IHNoYXJkID0gYXdhaXQgdGhpcy5kYi5kb2MocGF0aCkuZ2V0KG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIDxudW1iZXI+c2hhcmQuZ2V0KHRoaXMuZmllbGQpIHx8IDA7XG4gICAgfSk7XG4gICAgY29uc3QgdmFsdWVzID0gYXdhaXQgUHJvbWlzZS5hbGwodmFsdWVQcm9taXNlcyk7XG4gICAgcmV0dXJuIHZhbHVlcy5yZWR1Y2UoKGEsYikgPT4gYSArIGIsIDApO1xuICB9XG5cbiAgcHVibGljIG9uU25hcHNob3Qob2JzZXJ2YWJsZTogKChuZXh0OiBDb3VudGVyU25hcHNob3QpID0+IHZvaWQpKSB7XG4gICAgT2JqZWN0LmtleXModGhpcy5zaGFyZHMpLmZvckVhY2goKHBhdGgpID0+IHtcbiAgICAgIHRoaXMuZGJcbiAgICAgICAgLmRvYyhwYXRoKVxuICAgICAgICAub25TbmFwc2hvdCgoc25hcDogZmlyZWJhc2UuZmlyZXN0b3JlLkRvY3VtZW50U25hcHNob3QpID0+IHtcbiAgICAgICAgICB0aGlzLnNoYXJkc1tzbmFwLnJlZi5wYXRoXSA9IHNuYXAuZ2V0KHRoaXMuZmllbGQpIHx8IDA7XG4gICAgICAgICAgaWYgKHRoaXMubm90aWZ5UHJvbWlzZSAhPT0gbnVsbCkgcmV0dXJuO1xuICAgICAgICAgIHRoaXMubm90aWZ5UHJvbWlzZSA9IHNjaGVkdWxlKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN1bSA9IE9iamVjdC52YWx1ZXModGhpcy5zaGFyZHMpLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApO1xuICAgICAgICAgICAgb2JzZXJ2YWJsZSh7XG4gICAgICAgICAgICAgIGV4aXN0czogdHJ1ZSxcbiAgICAgICAgICAgICAgZGF0YTogKCkgPT4gc3VtLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLm5vdGlmeVByb21pc2UgPSBudWxsO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBpbmNyZW1lbnRCeShcbiAgICB2YWw6IG51bWJlclxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgY29uc3QgaW5jcmVtZW50OiBhbnkgPSBmaXJlYmFzZS5maXJlc3RvcmUuRmllbGRWYWx1ZS5pbmNyZW1lbnQodmFsKTtcbiAgICBjb25zdCB1cGRhdGU6IHsgW2tleTogc3RyaW5nXTogYW55IH0gPSB0aGlzLmZpZWxkXG4gICAgICAuc3BsaXQoXCIuXCIpXG4gICAgICAucmV2ZXJzZSgpXG4gICAgICAucmVkdWNlKCh2YWx1ZSwgbmFtZSkgPT4gKHsgW25hbWVdOiB2YWx1ZSB9KSwgaW5jcmVtZW50KTtcbiAgICByZXR1cm4gdGhpcy5kb2NcbiAgICAgIC5jb2xsZWN0aW9uKFNIQVJEX0NPTExFQ1RJT05fSUQpXG4gICAgICAuZG9jKHRoaXMuc2hhcmRJZClcbiAgICAgIC5zZXQodXBkYXRlLCB7IG1lcmdlOiB0cnVlIH0pO1xuICB9XG5cbiAgcHVibGljIHNoYXJkKCk6IGZpcmViYXNlLmZpcmVzdG9yZS5Eb2N1bWVudFJlZmVyZW5jZSB7XG4gICAgcmV0dXJuIHRoaXMuZG9jLmNvbGxlY3Rpb24oU0hBUkRfQ09MTEVDVElPTl9JRCkuZG9jKHRoaXMuc2hhcmRJZCk7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gc2NoZWR1bGU8VD4oZnVuYzogKCkgPT4gVCk6IFByb21pc2U8VD4ge1xuICByZXR1cm4gbmV3IFByb21pc2U8VD4oYXN5bmMgKHJlc29sdmUpID0+IHtcbiAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGZ1bmMoKTtcbiAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICB9LCAwKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGdldFNoYXJkSWQoY29va2llOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCByZXN1bHQgPSBuZXcgUmVnRXhwKFxuICAgIFwiKD86Xnw7IClcIiArIGVuY29kZVVSSUNvbXBvbmVudChjb29raWUpICsgXCI9KFteO10qKVwiXG4gICkuZXhlYyhkb2N1bWVudC5jb29raWUpO1xuICBpZiAocmVzdWx0KSByZXR1cm4gcmVzdWx0WzFdO1xuXG4gIGNvbnN0IHNoYXJkSWQgPSB1dWlkLnY0KCk7XG5cbiAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gIGRhdGUuc2V0VGltZShkYXRlLmdldFRpbWUoKSArIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCk7XG4gIGNvbnN0IGV4cGlyZXMgPSBcIjsgZXhwaXJlcz1cIiArIGRhdGUudG9VVENTdHJpbmcoKTtcblxuICBkb2N1bWVudC5jb29raWUgPVxuICAgIGVuY29kZVVSSUNvbXBvbmVudChjb29raWUpICsgXCI9XCIgKyBzaGFyZElkICsgZXhwaXJlcyArIFwiOyBwYXRoPS9cIjtcbiAgcmV0dXJuIHNoYXJkSWQ7XG59XG4iLCJ2YXIgdjEgPSByZXF1aXJlKCcuL3YxJyk7XG52YXIgdjQgPSByZXF1aXJlKCcuL3Y0Jyk7XG5cbnZhciB1dWlkID0gdjQ7XG51dWlkLnYxID0gdjE7XG51dWlkLnY0ID0gdjQ7XG5cbm1vZHVsZS5leHBvcnRzID0gdXVpZDtcbiIsInZhciBybmcgPSByZXF1aXJlKCcuL2xpYi9ybmcnKTtcbnZhciBieXRlc1RvVXVpZCA9IHJlcXVpcmUoJy4vbGliL2J5dGVzVG9VdWlkJyk7XG5cbi8vICoqYHYxKClgIC0gR2VuZXJhdGUgdGltZS1iYXNlZCBVVUlEKipcbi8vXG4vLyBJbnNwaXJlZCBieSBodHRwczovL2dpdGh1Yi5jb20vTGlvc0svVVVJRC5qc1xuLy8gYW5kIGh0dHA6Ly9kb2NzLnB5dGhvbi5vcmcvbGlicmFyeS91dWlkLmh0bWxcblxudmFyIF9ub2RlSWQ7XG52YXIgX2Nsb2Nrc2VxO1xuXG4vLyBQcmV2aW91cyB1dWlkIGNyZWF0aW9uIHRpbWVcbnZhciBfbGFzdE1TZWNzID0gMDtcbnZhciBfbGFzdE5TZWNzID0gMDtcblxuLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9icm9vZmEvbm9kZS11dWlkIGZvciBBUEkgZGV0YWlsc1xuZnVuY3Rpb24gdjEob3B0aW9ucywgYnVmLCBvZmZzZXQpIHtcbiAgdmFyIGkgPSBidWYgJiYgb2Zmc2V0IHx8IDA7XG4gIHZhciBiID0gYnVmIHx8IFtdO1xuXG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICB2YXIgbm9kZSA9IG9wdGlvbnMubm9kZSB8fCBfbm9kZUlkO1xuICB2YXIgY2xvY2tzZXEgPSBvcHRpb25zLmNsb2Nrc2VxICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNsb2Nrc2VxIDogX2Nsb2Nrc2VxO1xuXG4gIC8vIG5vZGUgYW5kIGNsb2Nrc2VxIG5lZWQgdG8gYmUgaW5pdGlhbGl6ZWQgdG8gcmFuZG9tIHZhbHVlcyBpZiB0aGV5J3JlIG5vdFxuICAvLyBzcGVjaWZpZWQuICBXZSBkbyB0aGlzIGxhemlseSB0byBtaW5pbWl6ZSBpc3N1ZXMgcmVsYXRlZCB0byBpbnN1ZmZpY2llbnRcbiAgLy8gc3lzdGVtIGVudHJvcHkuICBTZWUgIzE4OVxuICBpZiAobm9kZSA9PSBudWxsIHx8IGNsb2Nrc2VxID09IG51bGwpIHtcbiAgICB2YXIgc2VlZEJ5dGVzID0gcm5nKCk7XG4gICAgaWYgKG5vZGUgPT0gbnVsbCkge1xuICAgICAgLy8gUGVyIDQuNSwgY3JlYXRlIGFuZCA0OC1iaXQgbm9kZSBpZCwgKDQ3IHJhbmRvbSBiaXRzICsgbXVsdGljYXN0IGJpdCA9IDEpXG4gICAgICBub2RlID0gX25vZGVJZCA9IFtcbiAgICAgICAgc2VlZEJ5dGVzWzBdIHwgMHgwMSxcbiAgICAgICAgc2VlZEJ5dGVzWzFdLCBzZWVkQnl0ZXNbMl0sIHNlZWRCeXRlc1szXSwgc2VlZEJ5dGVzWzRdLCBzZWVkQnl0ZXNbNV1cbiAgICAgIF07XG4gICAgfVxuICAgIGlmIChjbG9ja3NlcSA9PSBudWxsKSB7XG4gICAgICAvLyBQZXIgNC4yLjIsIHJhbmRvbWl6ZSAoMTQgYml0KSBjbG9ja3NlcVxuICAgICAgY2xvY2tzZXEgPSBfY2xvY2tzZXEgPSAoc2VlZEJ5dGVzWzZdIDw8IDggfCBzZWVkQnl0ZXNbN10pICYgMHgzZmZmO1xuICAgIH1cbiAgfVxuXG4gIC8vIFVVSUQgdGltZXN0YW1wcyBhcmUgMTAwIG5hbm8tc2Vjb25kIHVuaXRzIHNpbmNlIHRoZSBHcmVnb3JpYW4gZXBvY2gsXG4gIC8vICgxNTgyLTEwLTE1IDAwOjAwKS4gIEpTTnVtYmVycyBhcmVuJ3QgcHJlY2lzZSBlbm91Z2ggZm9yIHRoaXMsIHNvXG4gIC8vIHRpbWUgaXMgaGFuZGxlZCBpbnRlcm5hbGx5IGFzICdtc2VjcycgKGludGVnZXIgbWlsbGlzZWNvbmRzKSBhbmQgJ25zZWNzJ1xuICAvLyAoMTAwLW5hbm9zZWNvbmRzIG9mZnNldCBmcm9tIG1zZWNzKSBzaW5jZSB1bml4IGVwb2NoLCAxOTcwLTAxLTAxIDAwOjAwLlxuICB2YXIgbXNlY3MgPSBvcHRpb25zLm1zZWNzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1zZWNzIDogbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cbiAgLy8gUGVyIDQuMi4xLjIsIHVzZSBjb3VudCBvZiB1dWlkJ3MgZ2VuZXJhdGVkIGR1cmluZyB0aGUgY3VycmVudCBjbG9ja1xuICAvLyBjeWNsZSB0byBzaW11bGF0ZSBoaWdoZXIgcmVzb2x1dGlvbiBjbG9ja1xuICB2YXIgbnNlY3MgPSBvcHRpb25zLm5zZWNzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm5zZWNzIDogX2xhc3ROU2VjcyArIDE7XG5cbiAgLy8gVGltZSBzaW5jZSBsYXN0IHV1aWQgY3JlYXRpb24gKGluIG1zZWNzKVxuICB2YXIgZHQgPSAobXNlY3MgLSBfbGFzdE1TZWNzKSArIChuc2VjcyAtIF9sYXN0TlNlY3MpLzEwMDAwO1xuXG4gIC8vIFBlciA0LjIuMS4yLCBCdW1wIGNsb2Nrc2VxIG9uIGNsb2NrIHJlZ3Jlc3Npb25cbiAgaWYgKGR0IDwgMCAmJiBvcHRpb25zLmNsb2Nrc2VxID09PSB1bmRlZmluZWQpIHtcbiAgICBjbG9ja3NlcSA9IGNsb2Nrc2VxICsgMSAmIDB4M2ZmZjtcbiAgfVxuXG4gIC8vIFJlc2V0IG5zZWNzIGlmIGNsb2NrIHJlZ3Jlc3NlcyAobmV3IGNsb2Nrc2VxKSBvciB3ZSd2ZSBtb3ZlZCBvbnRvIGEgbmV3XG4gIC8vIHRpbWUgaW50ZXJ2YWxcbiAgaWYgKChkdCA8IDAgfHwgbXNlY3MgPiBfbGFzdE1TZWNzKSAmJiBvcHRpb25zLm5zZWNzID09PSB1bmRlZmluZWQpIHtcbiAgICBuc2VjcyA9IDA7XG4gIH1cblxuICAvLyBQZXIgNC4yLjEuMiBUaHJvdyBlcnJvciBpZiB0b28gbWFueSB1dWlkcyBhcmUgcmVxdWVzdGVkXG4gIGlmIChuc2VjcyA+PSAxMDAwMCkge1xuICAgIHRocm93IG5ldyBFcnJvcigndXVpZC52MSgpOiBDYW5cXCd0IGNyZWF0ZSBtb3JlIHRoYW4gMTBNIHV1aWRzL3NlYycpO1xuICB9XG5cbiAgX2xhc3RNU2VjcyA9IG1zZWNzO1xuICBfbGFzdE5TZWNzID0gbnNlY3M7XG4gIF9jbG9ja3NlcSA9IGNsb2Nrc2VxO1xuXG4gIC8vIFBlciA0LjEuNCAtIENvbnZlcnQgZnJvbSB1bml4IGVwb2NoIHRvIEdyZWdvcmlhbiBlcG9jaFxuICBtc2VjcyArPSAxMjIxOTI5MjgwMDAwMDtcblxuICAvLyBgdGltZV9sb3dgXG4gIHZhciB0bCA9ICgobXNlY3MgJiAweGZmZmZmZmYpICogMTAwMDAgKyBuc2VjcykgJSAweDEwMDAwMDAwMDtcbiAgYltpKytdID0gdGwgPj4+IDI0ICYgMHhmZjtcbiAgYltpKytdID0gdGwgPj4+IDE2ICYgMHhmZjtcbiAgYltpKytdID0gdGwgPj4+IDggJiAweGZmO1xuICBiW2krK10gPSB0bCAmIDB4ZmY7XG5cbiAgLy8gYHRpbWVfbWlkYFxuICB2YXIgdG1oID0gKG1zZWNzIC8gMHgxMDAwMDAwMDAgKiAxMDAwMCkgJiAweGZmZmZmZmY7XG4gIGJbaSsrXSA9IHRtaCA+Pj4gOCAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRtaCAmIDB4ZmY7XG5cbiAgLy8gYHRpbWVfaGlnaF9hbmRfdmVyc2lvbmBcbiAgYltpKytdID0gdG1oID4+PiAyNCAmIDB4ZiB8IDB4MTA7IC8vIGluY2x1ZGUgdmVyc2lvblxuICBiW2krK10gPSB0bWggPj4+IDE2ICYgMHhmZjtcblxuICAvLyBgY2xvY2tfc2VxX2hpX2FuZF9yZXNlcnZlZGAgKFBlciA0LjIuMiAtIGluY2x1ZGUgdmFyaWFudClcbiAgYltpKytdID0gY2xvY2tzZXEgPj4+IDggfCAweDgwO1xuXG4gIC8vIGBjbG9ja19zZXFfbG93YFxuICBiW2krK10gPSBjbG9ja3NlcSAmIDB4ZmY7XG5cbiAgLy8gYG5vZGVgXG4gIGZvciAodmFyIG4gPSAwOyBuIDwgNjsgKytuKSB7XG4gICAgYltpICsgbl0gPSBub2RlW25dO1xuICB9XG5cbiAgcmV0dXJuIGJ1ZiA/IGJ1ZiA6IGJ5dGVzVG9VdWlkKGIpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHYxO1xuIiwidmFyIHJuZyA9IHJlcXVpcmUoJy4vbGliL3JuZycpO1xudmFyIGJ5dGVzVG9VdWlkID0gcmVxdWlyZSgnLi9saWIvYnl0ZXNUb1V1aWQnKTtcblxuZnVuY3Rpb24gdjQob3B0aW9ucywgYnVmLCBvZmZzZXQpIHtcbiAgdmFyIGkgPSBidWYgJiYgb2Zmc2V0IHx8IDA7XG5cbiAgaWYgKHR5cGVvZihvcHRpb25zKSA9PSAnc3RyaW5nJykge1xuICAgIGJ1ZiA9IG9wdGlvbnMgPT09ICdiaW5hcnknID8gbmV3IEFycmF5KDE2KSA6IG51bGw7XG4gICAgb3B0aW9ucyA9IG51bGw7XG4gIH1cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgdmFyIHJuZHMgPSBvcHRpb25zLnJhbmRvbSB8fCAob3B0aW9ucy5ybmcgfHwgcm5nKSgpO1xuXG4gIC8vIFBlciA0LjQsIHNldCBiaXRzIGZvciB2ZXJzaW9uIGFuZCBgY2xvY2tfc2VxX2hpX2FuZF9yZXNlcnZlZGBcbiAgcm5kc1s2XSA9IChybmRzWzZdICYgMHgwZikgfCAweDQwO1xuICBybmRzWzhdID0gKHJuZHNbOF0gJiAweDNmKSB8IDB4ODA7XG5cbiAgLy8gQ29weSBieXRlcyB0byBidWZmZXIsIGlmIHByb3ZpZGVkXG4gIGlmIChidWYpIHtcbiAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgMTY7ICsraWkpIHtcbiAgICAgIGJ1ZltpICsgaWldID0gcm5kc1tpaV07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJ1ZiB8fCBieXRlc1RvVXVpZChybmRzKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB2NDtcbiJdLCJzb3VyY2VSb290IjoiIn0=